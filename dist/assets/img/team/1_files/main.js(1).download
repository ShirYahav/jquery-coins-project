/**!
 * IMPORTANT NOTE:
 *    This file is licensed only for use in providing the iCloud
 *    service or any part thereof, and is subject to the iCloud
 *    Terms and Conditions. You may not port this file to another
 *    platform without Apple's written consent.
 *
 *    Portions of this Apple Software may utilize copyrighted material under open source licenses.
 *    Please see the file at https://www.icloud.com/applications/photos/2204Project45/en-us/acknowledgements.txt for licensing information.
 */
!function(e){try{var n=window,r=n.performance,t=n.Promise,o=n.MessageChannel,a=n.requestAnimationFrame;if(!(r&&r.mark&&t&&o&&a))return;var s=function(n){return r.mark("chunk-"+e+"-"+n)},i=!1,c=!1,u=t.resolve();s("exec-start");for(var f=0;f<5;f++)u=u.then();u.then((function(){s("exec-sync-end")}));var m=function(){i&&!c&&(s("after-paint"),c=!0)},p=new o;p.port1.onmessage=m,p.port2.postMessage(null),setTimeout(m),a((function(){i=!0,s("raf"),p.port2.postMessage(null),setTimeout(m)}))}catch(e){window.__jsPerformanceMarksError=e}}("main");!function(e,t,n,i){var r=e.__CW_IMG_URLS={};function a(t){var n=Math.ceil(e.devicePixelRatio);return 1===n?t:t.replace(/@\d{1}(?=x)/i,"@"+n)}for(var s in n){var o=n[s];Object.defineProperty(r,s,{get:function(){return[t,a(o)].join("/")}})}}(this,"/applications/photos/2204Project45/en-us/",{}),function(e,t,n){var i=e.URL||e.webkitURL,r=e.__CW_BLOB_URLS={};e.__CW_BLOBS_READY=!1;var a,s,o,l=["image/gif","image/png","image/jpeg","image/svg+xml"],c=3,u=!1,d=!1;function h(t){u=!1,e.__CW_BLOBS_READY=!1,f("__CW_SPRITE_ERROR",t)}function p(e,t,n){if(e.slice)return e.slice(t,n);var i=e.byteLength;if(t=t||0,n=n||i,0===i||t>=i||t>=n)return new ArrayBuffer(0);var r=Math.min(i-t,n-t),a=new ArrayBuffer(r);return new Uint8Array(a).set(new Uint8Array(e,t,r)),a}function f(e,t){var n=document.createEvent("Event");n.data=t,n.initEvent(e,!0,!0),document.dispatchEvent(n)}function g(e){var t=r[e],n=new RegExp("\\(blob_"+e+"\\)","gi");return function(){s++,a=a.replace(n,"("+JSON.stringify(t)+")"),s===o&&function(){var e=document.getElementById("cw-css");e||((e=document.createElement("link")).rel="stylesheet",e.id="cw-css"),e.onload=function(){f("__CW_CSS_LOADED"),a=null,d=!1},e.href="data:text/css;base64,"+btoa(a),document.head.appendChild(e)}()}}document.addEventListener("__CW_SPRITE_LOADED",(function(){if(!d)if(d=!0,f("__CW_CSS_START"),a=decodeURIComponent(atob(document.documentElement.getAttribute("data-resources-css"))),r&&(o=Object.keys(r).length),r&&o>0){s=0;var t=function(){var t="cw-img-container-r"+e.devicePixelRatio,n=document.getElementById(t);if(!n){(n=document.createElement("div")).setAttribute("aria-hidden",!0),n.id=t;var i=n.style;i.overflow="hidden",i.height="0",i.width="0",document.body.appendChild(n)}return n}();for(var n in r){var i=document.createElement("img");i.addEventListener("load",g(n)),i.src=r[n],t.appendChild(i)}}else d=!1})),function(t){var a=n[t-1];a||(a=n[0]),function t(n){if(!u){u=!0,f("__CW_SPRITE_START");var a=new XMLHttpRequest;a.open("GET","/applications/photos/2204Project45/en-us//"+n,!0),a.withCredentials=!0,a.responseType="arraybuffer",a.onload=function(){!function(t){try{if(t&&t instanceof ArrayBuffer)for(var n=new DataView(t),a=n.byteLength,s=0;s<a;){var o=n.getUint16(s),c=n.getUint8(s+2),d=n.getUint32(s+3),g=p(t,s+=7,s+d),m=new Blob([g],{type:l[c-1]});r[o]=i.createObjectURL(m),s+=d}u=!1,e.__CW_BLOBS_READY=!0,f("__CW_SPRITE_LOADED")}catch(_){h(_)}}(a.response)},a.onerror=function(e){--c>0?t(n):h(e)},a.send()}}(a)}(e.devicePixelRatio)}(this,0,["images@1x.bin","images@2x.bin"]),function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/applications/photos/2204Project45/en-us/",n(n.s=820)}([function(e,t,n){"use strict";function i(e,t,n){return t in e||(e[t]=n),e}var r,a,s=window.Window;s&&(r=s.prototype);var o=window.HTMLDocument;o&&(a=o.prototype);var l=Element.prototype,c=[];if(!("addEventListener"in l)){var u=function(e,t,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var i=0,r=c.length;i<r;i++){var a=c[i];if(a.type===e&&a.listener===t)return}var s=this,o=function(e){e.target=e.srcElement,e.currentTarget=s,t.call(s,e)},l=e,u=o;if("DOMContentLoaded"===e&&(l="readystatechange",u=function(e){"complete"===document.readyState&&o(e)},"complete"===document.readyState)){var d=document.createEventObject();d.srcElement=window,u(d)}this.attachEvent("on"+l,u),c.push({object:this,type:e,listener:t,wrapper:u})};i(l,"addEventListener",u),r&&i(r,"addEventListener",u),a&&i(a,"addEventListener",u)}if(!("removeEventListener"in l)){var d=function(e,t,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var i=-1,r=c.length;++i<r;){var a=c[i];if(a.object===this&&a.type===e&&a.listener===t){var s;s="DOMContentLoaded"===e?"readystatechange":e,this.detachEvent("on"+s,a.wrapper),c.splice(i,1);break}}};i(l,"removeEventListener",d),r&&i(r,"removeEventListener",d),a&&i(a,"removeEventListener",d)}if(!l.hasOwnProperty("classList")){var h=function(e){this.element=e},p=h.prototype;p.item=function(e){var t=this.element.getAttribute("class"),n=t?t.trim().split(/\s+/):null;return n?n[e]:void 0},p.contains=function(e){var t=this.element.getAttribute("class");return(t?" "+t+" ":"").indexOf(" "+e+" ")>-1},p.add=function(){for(var e=this.element,t=e.getAttribute("class"),n=t?" "+t+" ":" ",i=!1,r=arguments.length,a=0;a<r;a++){var s=arguments[a]+" ";-1===n.indexOf(" "+s)&&(n+=s,i=!0)}i&&e.setAttribute("class",n.substring(1,n.length-1))},p.remove=function(){for(var e=this.element,t=e.getAttribute("class"),n=t?" "+t+" ":" ",i=!1,r=arguments.length,a=0;a<r;a++)for(var s,o=arguments[a],l=" "+o+" ";(s=n.indexOf(l))>-1;)n=n.substr(0,s)+n.substr(s+o.length+1),i=!0;i&&(" "===(n=n.substring(1,n.length-1))&&(n=""),e.setAttribute("class",n))},p.toggle=function(e,t){var n=this.contains(e),i=!1;return 2===arguments.length?(n&&!t&&(i="remove"),!n&&t&&(i="add")):i=n?"remove":"add",i?(this[i](e),!n):n},p.toString=function(){return this.element.getAttribute("class")||""},Object.defineProperty&&Object.defineProperty(l,"classList",{get:function(){return new h(this)},configurable:!0})}if(window.DOMTokenList){var f=window.DOMTokenList.prototype,g=document.createElement("div");if(!1!==g.classList.toggle("polyfill-test-class",!1)){var m=f.toggle;f.toggle=function(e,t){if(1===arguments.length)return m.call(this,e);var n=this.contains(e),i=t?!n&&"add":!!n&&"remove";return i?(this[i](e),!n):n}}if(g.classList.add("foo","bar","baz"),!g.classList.contains("baz")){var _=f.add;f.add=function(){for(var e=arguments.length,t=0;t<e;t++)_.call(this,arguments[t])}}if(g.classList.add("foo","bar","baz"),g.classList.remove("foo","bar","baz"),g.classList.contains("baz")){var v=f.remove;f.remove=function(){for(var e=arguments.length,t=0;t<e;t++)v.call(this,arguments[t])}}}i(l,"addEventListener",u),i(window,"addEventListener",u),i(l,"removeEventListener",d),i(window,"removeEventListener",d),i(window.document,"contains",(function(){var e=this.documentElement;return e.contains.apply(e,arguments)}));var b=CSSStyleDeclaration.prototype;"setProperty"in b||i(b,"setProperty",(function(e,t){return this.setAttribute.call(this,e,t)}))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return M}));var i,r=n(15),a=n(64),s=n(450),o=n(82),l=n(127),c=n(13),u=n(195),d=n(51),h=n(78),p=n(17),f=n(282),g=n(442),m=n(693),_=n(692),v=n(539),b=n(20),y=n(253),w=n(538),I=n(689),S=n(690),C=n(694),E=[],A="_cw_itselfProperty",O=r.a.extend({staticMembers:{isInsideSetter:!1,getDependencyValuesAsTempArray:function(e,t,n,i){E.length=0;for(var r=0;r<t.length;r++){var a=t[r+n];p.a._sanitizeNodeID(a)>0&&(E[r]=i.internalGet(e,a))}return E},__QUALIFIED_CLASS_NAME__:"ObservableProperty"},readOnly:null,cacheable:void 0,binding:void 0,downstreamBindings:null,dependencies:null,writeDependencies:null,bindings:null,writeBindings:null,_valueCount:0,didChange:null,isComputedProperty:!1,isDependentComputedProperty:!1,isRootValueProperty:!1,requiresSupport:b.b,downstreamNodeManagerClass:null,upstreamNodeManagerClass:null,downstreamNodeManager:null,upstreamNodeManager:null,weakRootValueUpstreamNodeManager:null,init:function(e){Object(o.a)(e,h.a)&&(e={binding:e}),this.__s._$B4l$init.call(this,e)},getValue:function(e,t){var n=this.binding||this.defaultValue;return void 0===n&&(this.get||this.set)&&Object(o.a)(e[r.b.staticMembers.defaultValuePrefix+t],h.a)?null:n},inheritFrom:function(e){var t=this,n=arguments;t.__s._$BM9$inheritFrom.apply(t,n),this.didChange||(this.didChange=e.didChange),e.hasOwnProperty("cacheable")&&!this.hasOwnProperty("cacheable")&&(this.cacheable=e.cacheable);var i=e.downstreamBindings;if(i){var r=this.downstreamBindings;this.downstreamBindings=r?Object.assign(Object.create(i),r):i}},wasRegistered:function(e,t,n){var i=this,r=arguments;i.__s._$Biw$wasRegistered.apply(i,r),this._validateProvidedInitValues(e,t),this._validateProvidedAccessors(t),this.reference!==a.c||this.readOnly||(this._setRootValueNodeManagerIfNeeded=this._setRootValueNodeManagerIfNeededWeakWritable,this._setBoundNodeManagerIfNeeded=this._setBoundNodeManagerIfNeededWeakWritable),this.setUpManagers(),t=(t=t.replace(/\\/g,"\\\\")).replace(/\./g,"\\."),this._ownBinding=Object(h.c)(t),this.initializeNodeFlags(),this._setUpDidChangeObserver(e,t)},_validateProvidedInitValues:function(e,t){var n=this.binding,r=this.defaultValue;Object(l.a)(n)&&Object(l.a)(r)&&Object(c.b)("You can't define an observable property with both a binding and a defaultValue (%{key}).",{key:t,property:this}),Object(o.a)(r,h.a)&&Object(c.b)("You can\u2019t pass bindings into a property definition on `defaultValue`; you must pass it in on `binding` (%{key}).",{binding:n,property:this,key:t}),Object(u.a)(n)&&(this.binding=Object(h.c)(n));var a=this.computedDownstreamBindings=[],s=this.downstreamBindings;for(var d in s){var p=s[d];if(Object(l.a)(p)){if(Object(u.a)(p)&&(p=Object(h.c)(p)),Object(o.a)(p,h.a)){var f=p.rootObject;if(f){if(f===h.b){p.rootObject=null;var g=p.components;0===g.length&&(g.push(A),e.getMetadata(A)||e.registerMetadata(A,i))}a.push({upstreamSide:p,downstreamSide:Object(h.c)(t+"."+d)});continue}Object(c.b)("Right side of downstream bindings must either explicitly specify a root object or begin with `'(owner).'`: `'%{path}'`",{path:p.path})}Object(c.b)("Right side of downstream bindings must be a string or a binding",{binding:p})}}},_validateProvidedAccessors:function(e){var t=this.dependencies,n=this.writeDependencies,i=t&&t.length>0,r=n?n.length>0:i,s=this.isDependentComputedProperty=i||r,o=this.reference;i&&this.usesBuiltinGet&&Object(c.b)("Computed properties with dependencies must provide a getter (%{key}).",{property:this,dependencies:t,key:e}),r&&this.usesBuiltinSet&&!this.readOnly&&Object(c.b)("Computed properties with (explicit or implicit) write-dependencies must either include a setter or be marked readOnly (%{key}).",{property:this,dependencies:t,key:e}),this.isComputedProperty&&o===a.c&&Object(c.b)("Computed properties may not be WEAK references (%{key}).",{property:this,dependencies:t,key:e}),!1!==this.cacheable||o===a.b||this.typeIsPrimitive||Object(c.b)("Non-cacheable, non-primitively-typed properties may not be STRONG or WEAK references; you must manage them yourself. (%{key}).",{property:this,key:e}),s&&(n&&(this.writeBindings=h.a.createForPaths(this.writeDependencies)),this.bindings=h.a.createForPaths(this.dependencies))},_setUpDidChangeObserver:function(e,t){if(this.didChange){var n="_"+t+"_didChangeObserver";e.registerMetadata(n,Object(b.h)(t,this.didChange))}},setUpManagers:function(){var e=this.upstreamNodeManagerClass,t=this.downstreamNodeManagerClass,n=this.reference;e||(e=this.readOnly?n===a.a?I.a:w.a:n===a.a?S.a:y.b),t||(t=n===a.a?this.usesBuiltinGet||!1===this.cacheable?this.typeIsPrimitive?f.a:g.b:g.a:n===a.c?this.usesBuiltinGet||!1===this.cacheable?v.a:_.a:m.a),this.upstreamNodeManager=e.create(this),this.downstreamNodeManager=t.create(this),n===a.c&&(this.weakRootValueUpstreamNodeManager=C.a.create(this))},initializeNodeFlags:function(){var e=this.upstreamNodeFlags,t=this.downstreamNodeFlags;if(-1===e||-1===t){var n=this.reference;n===a.a&&this.typeIsPrimitive&&(n=a.b),-1===e&&(e=p.a.DIRTY_TRACKING|p.a.RELATIONSHIPS|p.a.PULL_ON_FREE,this.readOnly&&(e|=p.a.FLUSH),n!==a.c&&n!==a.a||(e|=p.a.PULL_ON_FLUSH),n===a.a&&(e|=p.a.PREVIOUS_VALUE_TRACKING),n!==a.b&&(e|=p.a.FREE),this.upstreamNodeFlags=e),-1===t&&(t=p.a.RELATIONSHIPS,n===a.b||this.usesBuiltinGet||!1===this.cacheable||(t|=p.a.FREE,n===a.a&&(t|=p.a.PREVIOUS_VALUE_TRACKING)),n===a.a&&(t|=p.a.PREVIOUS_VALUE_TRACKING,t|=p.a.FREE),this.downstreamNodeFlags=t)}},upstreamNodeFlags:-1,downstreamNodeFlags:-1,initForObject:function(e,t){var n,i=this,r=arguments,s=p.a.NULL_INDEX,o=p.a.NULL_INDEX,l=this.downstreamNodeManager;n=this.reference===a.c&&this.isRootValueProperty?this.weakRootValueUpstreamNodeManager:this.upstreamNodeManager,s=e.allocNode(l,this.downstreamNodeFlags),e.downstreamNodes[t]=s,o=e.allocNode(n,this.upstreamNodeFlags),e.upstreamNodes[t]=o,e.addConnectable(this,s,o),i.__s._$Gtl$initForObject.apply(i,r)},setInitialValueForObject:function(e,t,n){var i=e.downstreamNodes[t],r=e.upstreamNodes[t];if(p.a.getManagerForNode(i).setUpNode(e,i),p.a.getManagerForNode(r).setUpNode(e,r),Object(o.a)(n,h.a)){var s=n;this.isDependentComputedProperty&&Object(c.b)("Dependent computed properties cannot be created with a binding (%{key}).",{property:this,key:t,object:e}),p.a.setDataForNode(s,i)}else this.readOnly?(this.reference===a.a&&Object(a.f)(n,e,"Observable strong ref for `"+t+"` (read-only default value)"),p.a.setDataForNode(n,r)):void 0!==n&&p.a.passValueToNode(n,r)},connect:function(e,t,n){this.isRootValueProperty=!this.isDependentComputedProperty,this._configurePropertyAsRootValue(t,n);var i=this._ownBinding;if(this.isDependentComputedProperty){var r,a,s,o=this.bindings,l=this.writeBindings,u=n>=0&&void 0!==p.a.getStateDataForNode(n);if(o&&(r=o.length)>0)for(a=0;a<r;a++)s=o[a],h.a.hookUpBinding(e,s,i,u,!0,h.a.DONT_CONNECT,h.a.CONNECT)||Object(c.b)("Unable to connect dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path});if(l&&(r=l.length)>0)for(a=0;a<r;a++)s=l[a],h.a.hookUpBinding(e,s,i,u,!0,h.a.CONNECT,h.a.DONT_CONNECT)||Object(c.b)("Unable to connect write dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path})}else{var d;t>=0&&(d=p.a.getDataForNode(t)),d&&d.instanceOf&&d.instanceOf(h.a)&&(this.isRootValueProperty=!1,this.bind(e,d),p.a.setDataForNode(void 0,t),n&&p.a.setDataForNode(void 0,n))}for(var f=this.computedDownstreamBindings,g=f.length,m=0;m<g;m++){var _=f[m];h.a.hookUpBinding(e,_.upstreamSide,_.downstreamSide,!1,!0)}},_configurePropertyAsRootValue:function(e,t){p.a.addChildToNode(e,t,!0),this._setRootValueNodeManagerIfNeeded(e,t)},_setRootValueNodeManagerIfNeeded:d.a,_setRootValueNodeManagerIfNeededWeakWritable:function(e,t){p.a.setManagerForNode(this.weakRootValueUpstreamNodeManager,t)},bind:function(e,t){var n=this.key;this.isDependentComputedProperty&&Object(c.b)("Cannot bind property %{key}. Properties with dependencies cannot be bound.",{property:this,key:this.key,object:e});var i=e.downstreamNodes[n],r=e.upstreamNodes[n];this._disconnectNodes(i,r),this._configurePropertyAsBound(i,r);var a=t;t&&t.instanceOf&&t.instanceOf(h.a)||(a=h.a.create(a)),h.a.hookUpBinding(e,a,this._ownBinding,!1,!0)||Object(c.b)("Unable to bind property (key: "+this.key+", binding: "+a.path+").",{object:e,property:this,key:this.key,binding:a,path:a.path}),e.isConnected&&p.a.triggerFlush()},_configurePropertyAsBound:function(e,t){this._setBoundNodeManagerIfNeeded(e,t)},_setBoundNodeManagerIfNeeded:d.a,_setBoundNodeManagerIfNeededWeakWritable:function(e,t){p.a.setManagerForNode(this.upstreamNodeManager,t)},unbind:function(e){var t=this.key;this.isDependentComputedProperty&&Object(c.b)("Cannot unbind property %{key}. Properties with dependencies cannot be unbound.",{property:this,key:this.key,object:e});var n=e.downstreamNodes[t],i=e.upstreamNodes[t];this._disconnectNodes(n,i),this._configurePropertyAsRootValue(n,i),p.a.passValueToNode(void 0,i),e.isConnected&&p.a.triggerFlush()},_disconnectNodes:function(e,t){t>0&&p.a.disconnectChildrenFromNode(t),p.a.disconnectParentsFromNode(e)},_getter:null,_setter:null,_setUpInternalAccessors:function(){var e=this.key,t=r.b.staticMembers.defaultValuePrefix+e;this._getter=function(){if(!this.hasOwnProperty("propertiesAreInitialized"))return this[t];var n=O.isInsideSetter;O.isInsideSetter=!1;var i=this.downstreamNodes[e],r=p.a.getValueForNode(i);return O.isInsideSetter=n,r},this.readOnly?this._setter=function(n){this.hasOwnProperty("propertiesAreInitialized")?Object(c.b)("Cannot write to read-only property: "+e,{object:this,value:n}):this[t]=n}:this._setter=function(n){if(this.hasOwnProperty("propertiesAreInitialized")){var i=O.isInsideSetter;O.isInsideSetter=!0;var r=this.upstreamNodes[e];i&&p.a.nodeIsDirty(r)?p.a.passValueToNode(n,r):p.a.setValueForNode(n,r),O.isInsideSetter=i}else this[t]=n}},internalGet:T,internalGetPath:T,_synthesizeInternalGet:d.a,setUpNativeAccessors:function(e,t){Object.defineProperty(e,t,{get:this._getter,set:this._setter,configurable:!0})},getForObject:function(e,t){return this._getter.call(e)},setForObject:function(e,t,n){return this._setter.call(e,n)},disposeForObject:function(e,t){},__superMap:{_$B4l$init:"init",_$BM9$inheritFrom:"inheritFrom",_$Biw$wasRegistered:"wasRegistered",_$Gtl$initForObject:"initForObject"}});function T(e,t){return p.a.getValueForNode(t)}var M=function(e){return O.define.apply(O,arguments)};i=M({defaultValue:s.a,readOnly:!0})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";e.exports=n(1219)},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(313),r=function(e,t){var n;return e instanceof Error?n=e:(e&&(e=Object(i.a)(e,t)),n=new Error(e)),n.context=t,n},a=function(e,t){throw new r(e,t)}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return M}));var i=n(120),r=n(82),a=n(13),s=n(51),o=n(214),l=n(208),c=n(532),u=n(688),d=n(534),h=n(347),p=n(314),f=n(77),g=n(160),m=n(64),_=n(440),v=n(536),b=n(537),y=n(450),w=n(55),I=n(535),S={},C="$value",E=f.a.extend(p.a,{staticMembers:{create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=arguments,a=i.__s._$3In$create.apply(i,r);return a._originalArgs=t,a},__superMap:{_$3In$create:"create"},__QUALIFIED_CLASS_NAME__:"Property"},readOnly:!1,defaultValue:void 0,_hasBeenUsed:!1,initializeMember:function(){var e=this,t=arguments;return this._hasBeenUsed?this.clone():e.__s._$3lH$initializeMember.apply(e,t)},clone:function(){var e;return(e=this.constructor).create.apply(e,this._originalArgs)},set:null,_transformedSet:null,get:null,_transformedGet:null,setterReturnArray:[],usesBuiltinGet:!1,usesBuiltinSet:!1,isComputedProperty:!1,type:null,typeIsPrimitive:!1,strong:!1,weak:!1,unsafe:!1,reference:"",validators:null,init:function(e){if(Object(i.a)(e)){this.defaultValue=e.defaultValue;var t={};for(var n in e)"defaultValue"!==n&&(t[n]=e[n]);this.__s._$5_p$init.call(this,t)}else this.defaultValue=e,this.__s._$5_p$init.call(this);var a=this.validators;if(a)for(var s=a.length,o=0;o<s;++o){var l=a[o];Object(r.a)(l,I.a)||(a[o]=l.create())}},requiresSupport:M,allowedOnClass:!0,getValue:function(){return this.defaultValue},_ivar:null,_getParamOffset:0,_setParamOffset:0,_callsGetSuper:!1,_callsSetSuper:!1,_validateType:function(){return!0},_manageSwappingValues:function(e,t,n){var i="Strong ref for `"+this.key+"`";Object(m.f)(n,e,i),Object(m.e)(t,e,i)},_referenceId:void 0,wasRegistered:function(e,t,n){var i=this,r=arguments;this._hasBeenUsed=!0;var s=this.get;if(s){var o=s.__CW__getter;if(o){var l=s.__superMap,c=this.__superMap;for(var u in l)c[u]="_transformedGet"}}var d=this.set;if(d){var h=d.__CW__setter;if(h){var p=d.__superMap,f=this.__superMap;for(var g in p)f[g]="_transformedSet"}}i.__s._$7Nj$wasRegistered.apply(i,r),n&&this._inheritFromSuperMap(e,n,t),this.writeDependencies||!this.dependencies||this.readOnly||(this.writeDependencies=this.dependencies),n&&this.inheritFrom(n),this._setUpInternalVariables(t),this._synthesizeInternalMethods(),this._setUpReferenceFlag(e,t),this.reference===m.c&&this.defaultValue&&Object(a.b)("A weak-reference property may not provide a default value ('%{key})'.",{key:t,object:e}),this._setUpReferenceManagers(),this._moveDefaultValuesToPrepareForNativeAccessors(e,t),e[M.staticMembers.defaultValuePrefix+t]=e[t],this.setUpNativeAccessors(e,t)},inheritFrom:function(e){this.get||e.usesBuiltinGet||(this.get=e.get),this.set||e.usesBuiltinSet||(this.set=e.set),e.dependencies&&(this.dependencies?this._callsGetSuper&&(this.dependencies=e.dependencies.concat(this.dependencies),this._getParamOffset=e.dependencies.length):this.dependencies=e.dependencies),e.writeDependencies&&(this.writeDependencies?this._callsGetSuper&&(this.writeDependencies=e.writeDependencies.concat(this.writeDependencies),this._setParamOffset=e.writeDependencies.length):this.writeDependencies=e.writeDependencies),e.hasOwnProperty("readOnly")&&!this.hasOwnProperty("readOnly")&&(this.readOnly=e.readOnly),e.hasOwnProperty("strong")&&!this.hasOwnProperty("strong")&&(this.strong=e.strong),e.hasOwnProperty("weak")&&!this.hasOwnProperty("weak")&&(this.weak=e.weak),e.hasOwnProperty("unsafe")&&!this.hasOwnProperty("unsafe")&&(this.unsafe=e.unsafe)},_inheritFromSuperMap:function(e,t,n){var i=e.__s,r=this.__superMap;for(var a in r){var s=r[a];if("get"===s||"_transformedGet"===s)s="_transformedGet",this._callsGetSuper=!0;else{if("set"!==s&&"_transformedSet"!==s)continue;s="_transformedSet",this._callsSetSuper=!0}i[a]=t[s]}},_setUpReferenceFlag:function(e,t){var n=this.strong,i=this.weak,r=this.unsafe;n?(i&&Object(a.b)("Cannot define a property as both strong and weak.",{key:t,object:e}),r&&Object(a.b)("Cannot define a property as both strong and unsafe.",{key:t,object:e}),this.reference=m.a):i?(r&&Object(a.b)("Cannot define a property as both weak and unsafe.",{key:t,object:e}),this.reference=m.c):this.reference=m.b},_setUpReferenceManagers:function(){var e=this.reference;e===m.b||this.typeIsPrimitive?this._manageSwappingValues=s.a:e===m.c&&(this._manageSwappingValues=O,this._setUpWeakRefHashIfNeeded=A)},_setUpInternalVariables:function(e){this._ivar="_"+e},_moveDefaultValuesToPrepareForNativeAccessors:function(e,t){var n=M.staticMembers.defaultValuePrefix;e.hasOwnProperty(t)&&(e[n+t]=e[t])},_synthesizeInternalMethods:function(){if(this._synthesizeAccessors(),this._synthesizeInternalSet(),this._fillSetPathMap(),Object(_.a)(this),this._setUpInternalAccessors(),this.getForObject||this._synthesizeGetForObject(),!this.setForObject){var e=this.writeDependencies;e&&(this.setterReturnArray=new Array(e.length)),this._synthesizeSetForObject()}},_synthesizeAccessors:function(){var e=this.get;if(e){var t=e.__CW__getter||e,n=this._getParamOffset;this._transformedGet=function(e,i,r,a){return t.call(this,e,i,n,a)}}else this.usesBuiltinGet=!0,this._transformedGet=this.get=o.a;var i=this.set;if(i){var r=i.__CW__setter||i,a=this._setParamOffset;this._transformedSet=function(e,t,n,i,s){return r.call(this,e,t,n,a,s)}}else this.usesBuiltinSet=!0,this._transformedSet=this.set=o.a;this.isComputedProperty=!this.usesBuiltinGet||!this.usesBuiltinSet},_fillSetPathMap:function(){var e=this.writeDependencySetPathMap;e||(e=this.writeDependencySetPathMap=[!1]);for(var t=e.length,n=0;n<t;n++)e[n]=e[n]?this.internalSetPath:this.internalSet},initForObject:function(e,t){this._setUpWeakRefHashIfNeeded(e,t)},_setUpWeakRefHashIfNeeded:s.a,setInitialValueForObject:function(e,t,n){void 0!==n&&this.setForObjectReadWrite(e,t,n)},disposeForObject:function(e,t){var n=this._ivar;this._manageSwappingValues(e,e[n]),e[n]=void 0},setUpNativeAccessors:function(e,t){var n=this,i=this.setForObject,r=this.getForObject;Object.defineProperty(e,t,{get:function(e){return r.call(n,this,t)},set:function(e){return i.call(n,this,t,e)},configurable:!0})},_setUpInternalAccessors:s.a,getForObject:null,_synthesizeGetForObject:function(){var e=this.dependencies,t=this._transformedGet,n=this,i=M.staticMembers.defaultValuePrefix+this.key,r=this._ivar;this.getForObject=function(a,s){return a.hasOwnProperty("propertiesAreInitialized")?t.call(a,a[r],e,0,n):a[i]}},setForObject:null,setForObjectReadWrite:null,_synthesizeSetForObject:function(){var e=this.writeDependencies,t=this.setterReturnArray,n=this._transformedSet,i=this,r=this._validateType,s=t.length,o=this.writeDependencySetPathMap;this.clearSetterReturnArray(t);var l=this._ivar,c=M.staticMembers.defaultValuePrefix+this.key;this.setForObjectReadWrite=function(u,d,h){if(u.hasOwnProperty("propertiesAreInitialized")){var p=u[l],f=n.call(u,h,p,t,0,i);r.call(u,f)||Object(a.b)("Type error: cannot set value `%{value}` to property `%{key}` on %{object}.",{object:u,key:d,value:f,setValue:h}),u[l]=f;for(var g=0;g<s;g++)t[g]!==S&&o[g](u,e[g],t[g]);return this._manageSwappingValues(u,p,f),this.clearSetterReturnArray(t),f}u[c]=h},this.readOnly?this.setForObject=function(e,t,n){e.hasOwnProperty("propertiesAreInitialized")?Object(a.b)("Cannot set `"+t+"`: it is read-only.",{key:t,object:e,property:this,value:n}):e[c]=n}:this.setForObject=this.setForObjectReadWrite},clearSetterReturnArray:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=S},internalGet:function(e,t){return e.get(t)},internalGetPath:function(e,t){return e.getPath(t)},_synthesizeInternalSet:function(){var e=C,t=this._ivar;this.internalSet=function(n,i,r){return i===e?(n[t]=r,r):n.set(i,r)}},internalSet:null,internalSetPath:function(e,t,n){return e.setPath(t,n)},__superMap:{_$3lH$initializeMember:"initializeMember",_$5_p$init:"init",_$7Nj$wasRegistered:"wasRegistered"}});function A(e,t){var n=e._weakReferenceTokens;n||(n=e._weakReferenceTokens={}),n[t]=g.b}function O(e,t,n){var i=this.key,r=e._weakReferenceTokens,a=r[i];Object(m.h)(t,a);var s=Object(m.g)(n,e,e.weaklyReferencedObjectWasDisposed,i);r[i]=s}var T=function(e){return E.define.apply(E,arguments)},M={mixinDependencies:[w.b,v.a],staticMembers:{get:x,set:N,setPath:L,getPath:R,getPropertiesAsObject:F,setPropertiesWithObject:V,getPropertiesAsArray:k,setPropertiesWithArrays:B,weaklyReferencedObjectWasDisposed:j,_weakReferenceTokens:null,initializeClass:function(){this.__s._$ELz$initializeClass.call(this),D.call(this)},initializeInstance:function(){this.__s._$EPP$initializeInstance.call(this),P.call(this)},defaultValuePrefix:"__CW__",propertiesAreInitialized:!1,__superMap:{_$ELz$initializeClass:"initializeClass",_$EPP$initializeInstance:"initializeInstance"}},initializeClass:function(){this.__s._$EXs$initializeClass.call(this),D.call(this)},initializeInstance:function(){this.__s._$Ear$initializeInstance.call(this),P.call(this)},dispose:function(){var e,t=this,n=arguments,i=this._properties;for(e in i)i[e].disposeForObject(this,e);t.__s._$Elx$dispose.apply(t,n)},get:x,set:N,setPath:L,getPath:R,getPropertiesAsObject:F,setPropertiesWithObject:V,getPropertiesAsArray:k,setPropertiesWithArrays:B,weaklyReferencedObjectWasDisposed:j,_weakReferenceTokens:null,propertiesAreInitialized:!1,beginBatchSet:function(){return b.a.begin(this)},__superMap:{_$EXs$initializeClass:"initializeClass",_$Ear$initializeInstance:"initializeInstance",_$Elx$dispose:"dispose"}};function D(){this._properties=this.getMetadataByType(E)}function P(){var e,t,n=this.getMetadataByType(E),i=M.staticMembers.defaultValuePrefix;for(e in n){var r=n[e];r.initForObject&&r.initForObject(this,e)}for(e in this.propertiesAreInitialized=!0,n){var a=n[e];t=this[i+e],Object(l.a)(t)&&(t=t.call(this)),t===y.a&&(t=this),a.setInitialValueForObject&&a.setInitialValueForObject(this,e,t)}}function L(e,t){var n=Object(c.a)(e,this);return n||Object(a.b)("cannot call set on null or undefined object",{object:this,path:e,value:t}),Object(u.a)(n,Object(d.a)(e),t),this}function R(e){return Object(h.a)(this,e)}function x(e){var t=this._properties[e];return t?t.getForObject(this,e):this[e]}function N(e,t){var n=this._properties[e];return n?n.setForObject(this,e,t):this[e]=t,this}function F(){for(var e={},t=0;t<arguments.length;t++)e[arguments[t]]=this.get(arguments[t]);return e}function V(e){for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t]);return this}function k(){return Array.prototype.map.call(arguments,this.get,this)}function B(e,t){e.length>t.length&&Object(a.b)("Not enough values to set");for(var n=0;n<e.length;n++)this.set(e[n],t[n]);return this}function j(e,t){t.set(this,e,null)}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return be}));var i=n(51),r=n(13),a=new Int16Array(1024),s=1,o=1024,l=new Array(1024),c=new Int32Array(2048),u=2048,d=new Int32Array(2048),h=new Int32Array(2048),p=0,f=2048,g=-1,m=new Array(1024),_=new Array(1024),v=new Array(1024),b=new Int32Array(1024),y=2048,w=new Int32Array(256),I=0,S=256,C=new Int32Array(256),E=0,A=256,O=[],T=-1;function M(){var e;return-1===T?e=new Int32Array(256):(e=O[T],T--),e[0]=1,e}var D=M(),P=new Int32Array(256),L=0,R=256,x=!Int16Array,N=x?i.a:function(){o*=2,y*=2;var e=new Int16Array(o);e.set(a);var t=new Int32Array(y);t.set(b),a=e,b=t},F=x?i.a:function(){u*=2;var e=new Int32Array(u);e.set(c),c=e;var t=new Int32Array(u);t.set(d),d=t},V=x?i.a:function(){f*=2;var e=new Int32Array(f);e.set(h),h=e},k=x?i.a:function(){S*=2,A*=2;var e=new Int32Array(S);e.set(w),w=e;var t=new Int32Array(A);t.set(C),C=t},B=x?i.a:function(){R*=2;var e=new Int32Array(R);e.set(P),P=e},j=x?i.a:function(){var e=2*D.length,t=new Int32Array(e);t.set(D),D=t},U=0,G=0;function H(e){return 64&e&&!(4&e)}function W(e,t){H(a[e])&&l[e].didRemoveParentFromNode(m[e],e,t,d[0+(e<<1)])}function $(e,t){H(a[e])&&l[e].didRemoveChildFromNode(m[e],e,t,d[1+(e<<1)])}function z(e,t){64&a[e]&&l[e].willRemoveChildFromNode(m[e],e,t,d[1+(e<<1)])}function K(e,t){H(a[e])&&l[e].willRemoveParentFromNode(m[e],e,t,d[0+(e<<1)])}function q(){if(!(U>0||G>0)){var e=0,t=E;for(e=0;e<t;e++)Q(C[e]),C[e]=-1;E=0}}function Q(e){I>=S&&k(),w[I++]=e}function Y(e,t){var n=c[t],i=-1;-1!==g?(i=0|g,g=h[g+1]):(i=0|p,(p+=2)>f&&V()),h[i+0]=e,h[i+1]=n,c[t]=i,d[t]++}function Z(e,t){for(var n=c[t],i=-1;-1!==n;){if(h[n+0]===e){-1!==i?h[i+1]=h[n+1]:c[t]=h[n+1],h[n+1]=g,g=n,d[t]--;break}i=n,n=h[n+1]}}function X(e,t,n){U++;for(var i=(e<<1)+t,r=c[i],s=0===t?1:0,o=r;-1!==o;){var l=h[o];0===t?(n&&K(e,l),z(l,e)):(n&&z(e,l),K(l,e)),o=h[o+1]}if(o=r,c[i]=-1,d[i]=0,-1!==o)for(;;){var u=h[o];4&a[u]||Z(e,(u<<1)+s),0===t?(n&&W(e,u),$(u,e)):(n&&$(e,u),W(u,e));var p=h[o+1];if(-1===p){h[o+1]=g,g=r;break}o=p}U--,q()}function J(e){return m[e]}function ee(e,t){var n=a[e];a[e]=-4&n|t}function te(e,t){var n=a[e];return a[e]=n|t,a[e]}function ne(e,t){var n=a[e];return a[e]=n&~t,a[e]}function ie(e,t){ae(e,t,e,2)}function re(e,t){ae(e,void 0,t,3)}function ae(e,t,n,i,s){ve(e)||Object(r.b)("Tried to dirty an undefined node");var o=a[e],c=3&o;1!==c||16384&o||Object(r.b)("Cycle found in dataflow graph");var u=256&o,d=u&&2===c?he(e):void 0;ee(e,1),pe(t,e),fe(n,e),u&&(3===i?l[e].wasDirtiedByParent(J(e),e,t,d):2===i&&l[e].wasDirtiedBySelf(J(e),e,t,d)),s||(se(e),function(e){var t=a[e];(16&t||32&t||2048&t)&&!(8192&t)&&(D.length<=D[0]&&j(),D[D[0]]=e,D[0]++,te(e,8192))}(e)),ee(e,i)}function se(e,t){var n=a[e];if(!t&&128&n)!function(e){16384&a[e]||(R<=L&&B(),P[L]=e,L++,te(e,16384))}(e);else for(var i=1+(e<<1),r=d[i],s=c[i],o=r-1;-1!==s;)t&&!t[o]||re(h[s+0],e),o--,s=h[s+1]}function oe(){for(var e,t=0;t<L;t++)se(e=P[t],l[e].getActiveChildrenForNode(e));for(var n=0;n<L;n++)ne(e=P[n],16384);L=0}function le(){if(!(G>0)){U++;var e=D,t=e[0];D=M();var n,i,r=0,s=0;for(n=1;n<t;n++)ne(r=e[n],8192);for(n=1;n<t;n++)r=e[n],s=a[r],-1===r||4&s||(16&s&&l[r].flushNode(m[r],r),2048&s&&ce(r));for(n=1;n<t;n++)r=e[n],s=a[r],-1===r||4&s||32&s&&l[r].notifyNode(m[r],r);i=e,T++,O[T]=i,U--,q()}}function ce(e){ve(e)||Object(r.b)("Tried to getValue for an undefined node");var t=a[e];if(4&t)return ue(e);var n=3&t,i=l[e],s=i.isCacheable;if(0===n&&s)return ue(e);var o=3===n||!s,c=J(e),u=i.calculateValueForNode(c,e,o);ee(e,0),pe(void 0,e);var d,h=512&t;return h&&(d=ue(e)),s&&de(u,e),h&&i.previousValueWasReplaced(c,e,d),u}function ue(e){return _[e]}function de(e,t){_[t]=e}function he(e){return v[e]}function pe(e,t){v[t]=e}function fe(e,t){b[t]=e}function ge(e,t){void 0===t&&(t=0);var n,i=a[e];switch(3&i){case 0:n="CLEAN";break;case 1:n="DIRTYING";break;case 2:n="DIRTY_SELF";break;case 3:n="DIRTY_PARENT"}function r(e){for(var n,i=[];-1!==e;)n=h[e+0],t>0?i.unshift(ge(n,t-1)):i.unshift(n),e=h[e+1];return i}var s=e<<1,o=r(c[s+1]),u=r(c[s+0]),d=l[e],p={id:e,wantsFlush:!!(16&i),wantsNotify:!!(32&i),wantsFreeTracking:!!(8&i),wantsRelationshipTracking:!!(64&i),wantsActiveChildren:!!(128&i),wantsDirtyTracking:!!(256&i),isFreeing:!!(4&i),status:n,children:o,parents:u,manager:d,data:_[e],context:m[e],stateData:v[e],stateID:b[e]};return d&&d.addDebugInfoForNode&&d.addDebugInfoForNode(m[e],p,e),p}function me(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length-1);for(var i=[],r=t;r<=n&&!(r>=e.length);r++)i.push(ge(e[r]));return i}function _e(e,t,n){var i="";return e[t].forEach((function(e){var r=(e&&void 0!==e.id?e.id:e)+(e&&e.status?" ("+e.status+")":"")+": "+e.toString();i+=n+r+"\n",e&&e[t]&&(i+=_e(e,t,n+"  "))})),i}function ve(e){return void 0!==e&&null!==e&&-1!==e}var be={NULL_INDEX:-1,dumpNode:ge,dumpChildren:function(e,t){return void 0===t&&(t=7),"Children of "+e+":\n"+_e(ge(e,t),"children","")},dumpParents:function(e,t){return void 0===t&&(t=7),"Parents of "+e+":\n"+_e(ge(e,t),"parents","")},dumpNodes:me,dumpNodeNames:function(e,t,n){return me(e,t,n).map((function(e){return(e&&void 0!==e.id?e.id:e)+":"+e.toString()}))},dumpNodesWithData:function(e){var t=[];return _.forEach((function(n,i){n===e&&t.push(i)})),t},dumpNodesWithStateData:function(e){var t=[];return v.forEach((function(n,i){n===e&&t.push(i)})),t},debugNextCycle:function(){},dumpStack:function(){return{stack:[],nodes:{}}},setNodeBit:te,removeNodeBit:ne,addChildToNode:function(e,t,n){var i=0+(e<<1);Y(e,1+(t<<1)),Y(t,i),function(e,t){H(a[e])&&l[e].didAddChildToNode(m[e],e,t,d[1+(e<<1)])}(t,e),function(e,t){H(a[e])&&l[e].didAddParentToNode(m[e],e,t,d[0+(e<<1)])}(e,t),n&&re(e,t)},removeChildFromNode:function(e,t,n){z(t,e),K(e,t),Z(e,1+(t<<1)),Z(t,0+(e<<1)),$(t,e),W(e,t),n&&re(e,t)},setValueForNode:function(e,t){ie(t,e),oe(),le()},setValuesForNodes:function(){arguments.length%2!==0&&Object(r.b)("Invalid number of arguments on setValuesForNodes, arguments should be a paired list of nodeIDs and values.",arguments);for(var e=0;e<arguments.length;e+=2)ie(arguments[e+1],arguments[e]);oe(),le()},setNodeToDirtyFromParent:function(e){re(e,-1),oe(),le()},passValueToNode:function(e,t){ae(t,e,t,2,!0)},getValueForNode:ce,getDataForNode:ue,setDataForNode:de,getStateDataForNode:he,setStateDataForNode:pe,getStateIDForNode:function(e){return b[e]},setStateIDForNode:fe,getContextForNode:J,setContextForNode:function(e,t){m[t]=e},getManagerForNode:function(e){return l[e]},setManagerForNode:function(e,t){l[t]=e},getParentIDs:function(e,t,n){for(var i=n||0,r=0+(e<<1),a=d[r],s=c[r],o=a-1+i,l=o+1;l<t.length;l++)t[l]=-1;for(;-1!==s;){var u=h[s+0];t[o]=u,o--,s=h[s+1]}return t},getChildrenIDs:function(e,t,n){for(var i=n||0,r=1+(e<<1),a=d[r],s=c[r],o=a-1+i,l=o+1;l<t.length;l++)t[l]=-1;for(;-1!==s;){var u=h[s+0];t[o]=u,o--,s=h[s+1]}return t},getChildIndex:function(e,t){for(var n=1+(t<<1),i=c[n],r=d[n]-1;-1!==i;){if(h[i+0]===e)return r;i=h[i+1],r--}return-1},getParentIndex:function(e,t){for(var n=0+(e<<1),i=c[n],r=d[n]-1;-1!==i;){if(h[i+0]===t)return r;i=h[i+1],r--}return-1},FLUSH:16,NOTIFY:32,RELATIONSHIPS:64,FREE:8,ACTIVE_CHILDREN:128,DIRTY_TRACKING:256,PREVIOUS_VALUE_TRACKING:512,PULL_ON_FLUSH:2048,PULL_ON_FREE:1024,allocNode:function(e,t,n){var i=0,r=-1;i|=n|=0,I>0?r=w[--I]:(r=s++,s>o&&(N(),F())),a[r]=i;var u=r<<1,h=u+1;return c[u]=-1,c[h]=-1,d[u]=0,d[h]=0,l[r]=e,m[r]=t,_[r]=void 0,v[r]=void 0,b[r]=-1,r},freeNode:function(e){var t=a[e];if(1024&t){var n=3&t;2!==n&&3!==n||ce(e)}te(e,4),X(e,0,!1),X(e,1,!1),8&t&&l[e].nodeWillFree(m[e],e),l[e]=_[e]=m[e]=v[e]=void 0,b[e]=-1,U>0||G>0?(E>=A&&k(),C[E++]=e):Q(e)},disconnectParentsFromNode:function(e){X(e,0,!0)},disconnectChildrenFromNode:function(e){X(e,1,!0)},pullDataFromParents:function(e,t){for(var n=0+(e<<1),i=d[n],r=c[n],a=i-1,s=a+1;s<t.length;s++)t[s]=void 0;for(;-1!==r;){var o=h[r+0];t[a]=ce(o),a--,r=h[r+1]}return t},triggerFlush:le,pause:function(){G++},resume:function(){0===--G&&le()},_sanitizeNodeID:function(e){return null!==e&&void 0!==e||(e=-1),0|e},nodeIsDirty:function(e){var t=3&a[e];return 2&t||3&t},nodeIsFreeing:function(e){return 4&a[e]},isValidNodeID:ve}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return A})),n.d(t,"a",(function(){return O})),n.d(t,"h",(function(){return T})),n.d(t,"g",(function(){return M})),n.d(t,"f",(function(){return P})),n.d(t,"i",(function(){return R}));var i=n(77),r=n(15),a=n(13),s=n(120),o=n(208),l=n(82),c=n(51),u=n(695),d=n(78),h=n(17),p=n(351),f=n(229),g=n(7),m={isObservable:!0,initializeInstance:function(){this._nodes=[];var e=this.upstreamNodes={},t=this.downstreamNodes={};this._connectables=[],this._connectableTargets=[],h.a.pause(),this.initializeObservers(e,t),this.initializeSignals(e,t),this.__s._$Tn$initializeInstance.call(this),this._connectAllConnectables(),h.a.triggerFlush(),h.a.resume()},initializeObservers:function(e,t){var n=this.getMetadataByType(C);for(var i in n){var r=n[i],a=this.allocNode(r.manager,h.a.PULL_ON_FLUSH|h.a.NOTIFY);t[i]=a,this.addConnectable(r,a,h.a.NULL_INDEX)}},initializeSignals:function(e,t){var n=this.getMetadataByType(P);for(var i in n){var r=n[i],a=this.allocNode(r,h.a.PULL_ON_FLUSH|h.a.NOTIFY);r.initializeEvent(a),e[i]=t[i]=a}},upstreamNodes:null,downstreamNodes:null,_connectables:null,_connectableTargets:null,isConnected:!1,addConnectable:function(e,t,n){this.isConnected?e.connect(this,t,n):(this._connectables.push(e),this._connectableTargets.push(t),this._connectableTargets.push(n))},_connectAllConnectables:function(){var e,t=this._connectables,n=this._connectableTargets,i=t.length,r=h.a.NULL_INDEX,a=h.a.NULL_INDEX;for(e=0;e<i;e++)r=n[2*e],a=n[2*e+1],t[e].connect(this,r,a);this._connectables=this._connectableTargets=null,this.isConnected=!0},allocNode:function(e,t){var n=h.a.allocNode(e,this,t);return this._nodes.push(n),n},freeNode:function(e){var t=this._nodes,n=t.indexOf(e);n>=0?t.splice(n,1):Object(a.b)("CW.Observable `freeNode` called with a node not managed by this Observable!",{nodeID:e,observable:this}),h.a.freeNode(e)},dispose:function(){var e,t=this._nodes,n=t.length,i=h.a.NULL_INDEX;for(e=0;e<n;e++)i=t[e],h.a.freeNode(i);this._nodes=null,this.downstreamNodes=null,this.upstreamNodes=null,this.__s._$2Y_$dispose.call(this)},observe:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0];return(e=Object(s.a)(r)?A.create(this,r):A.create.apply(A,[this].concat(n,[!0]))).connect(),e},listen:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0];return(e=Object(s.a)(r)?O.create(this,r):O.create.apply(O,[this].concat(n,[!1]))).connect(),e},bindingFor:function(e){return d.a.create(e,this)},propertyChanged:function(e){var t=this.downstreamNodes[e];"number"!==typeof t&&Object(a.b)("propertyChanged must be called with the key of an observable property (key: "+e+", object: "+this+").",{object:this,key:e}),h.a.setNodeToDirtyFromParent(t)},bind:function(e,t){var n=this.getMetadataByType(g.a);if(n){var i=n[e];i||Object(a.b)("Bind must be called on an observable property",e),i.bind(this,t)}return this},unbind:function(e){var t=this.getMetadataByType(g.a);if(t){var n=t[e];n||Object(a.b)("Unbind must be called on an observable property",e),n.unbind(this)}return this},beginBatchSet:function(){return u.a.begin(this)},__superMap:{_$Tn$initializeInstance:"initializeInstance",_$2Y_$dispose:"dispose"}},_=Object.assign({staticMembers:Object.assign({},m)},m,{mixinDependencies:[i.b,r.b]}),v=void 0,b=1,y=2,w=p.a.extend({_onlyFireIfChanged:!0,_debug_dependencyNames:null,_debug_key:null,_observedTypes:null,_observesSignals:!0,init:function(e,t,n){this.__s._$4vt$init.call(this),void 0===n&&(n=!0),Object(o.a)(t)||Object(a.b)("Cannot create CW.ObserverNodeManager without an observer function to call when there is a change."),this.observer=t,this._inputCount=e,this._inputCollectorPool=[],this._observedTypes=new Array(e),n||(this._onlyFireIfChanged=n,this.invokeObserverCallback=this._actuallyInvokeObserverCallback)},calculateValueForNode:function(e,t,n){n||Object(a.b)("Observers should not be set directly, they must pull from their parents.",t);var i=this._getInputCollectorFromPool();h.a.pullDataFromParents(t,i);var r=h.a.getDataForNode(t);if(r||!S(t)){var s=r;return r._fireState!==f.a.SKIP_FIRE?s=this.invokeObserverCallback(e,i,r,t):(r._fireState=f.a.DEFAULT,I(i,r)),this._returnInputCollectorToPool(i),s}},invokeObserverCallback:function(e,t,n,i){return n._fireState===f.a.FORCE_FIRE||this._didObservedValuesChange(t,n.previousValues)?this._actuallyInvokeObserverCallback(e,t,n,i):(n.didFire=!1,n)},notifyNode:function(e,t){h.a.getDataForNode(t).didFire=!1},_actuallyInvokeObserverCallback:function(e,t,n,i){n._fireState=f.a.DEFAULT,I(t,n);var r=g.a.isInsideSetter;return g.a.isInsideSetter=!1,this._substituteSignalInputsIfNeccessary(t),this.observer.apply(e,t),g.a.isInsideSetter=r,function(e,t){var n=h.a.getDataForNode(e);if(n||!S(e)){var i=f.b.create({previousValues:n.previousValues,_fireState:f.a.DEFAULT,didFire:!0});return i.retain(),n.previousValues=null,n.release(),i}}(i)},_substituteSignalInputsIfNeccessary:function(e){if(this._observesSignals){for(var t,n,i=!1,r=this._observedTypes,a=0;a<e.length;a++)(t=r[a])===v&&(t=this._getValueType(e[a]))!==v&&(r[a]=t),t===b?((n=e[a])&&!n.didFire&&(e[a]=void 0),i=!0):t===v&&(i=!0);this._observesSignals=i}},_didObservedValuesChange:function(e,t){var n=e,i=t;if(n.length!==i.length)return!0;for(var r,a,s=this._observedTypes,o=n.length,l=0;l<o;l++)if(r=s[l],a=n[l],r===v&&(r=s[l]=this._getValueType(a)),r===b){if(a&&a.didFire)return!0}else if(a!==i[l])return!0;return!1},_getValueType:function(e){return void 0===e?v:Object(l.a)(e,f.b)?b:y},addDebugInfoForNode:function(e,t,n){t.type="Observer",t.object=e,t.key=this._debug_key||"(Anonymous)",t.dependencyNames=this._debug_dependencyNames,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},_getInputCollectorFromPool:function(){var e=this._inputCollectorPool;return e.length>0?e.pop():new Array(this._inputCount)},_returnInputCollectorToPool:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=void 0;this._inputCollectorPool.push(e)},__superMap:{_$4vt$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObserverNodeManager"}});function I(e,t){for(var n=t.previousValues,i=e.length,r=0;r<i;r++)n[r]=e[r]}function S(e){if(h.a.nodeIsFreeing(e))return!0;Object(a.b)("An observer with node %{nodeID} was corrupted (node data was lost)",{nodeID:e})}var C=i.a.extend({init:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r,a,l=this,c=this.notifyOnCreate,u=t[0];if(Object(s.a)(u))i=u.inputs,r=u.callback,void 0!==u.notifyOnCreate&&(c=u.notifyOnCreate),void 0!==u.onlyFireIfChanged&&(a=u.onlyFireIfChanged);else{var h=(i=t).pop();Object(o.a)(h)||(void 0!==h&&(c=h),h=i.pop()),r=h}this.inputs=i,this.callback=r,this.bindings=d.a.createForPaths(i),this.manager=this.managerClass.create(i.length,r,a),this.manager._debug_inputNames=i,this.notifyOnCreate=c,l.__s._$8ci$init.call(l)},wasRegistered:function(e,t){var n=this,i=arguments;n.__s._$8fD$wasRegistered.apply(n,i),this.manager._debug_key=t},getValue:function(e,t){return function(){var e=this.downstreamNodes[t],n=h.a.getDataForNode(e);!n&&S(e)||(n._fireState=f.a.FORCE_FIRE,h.a.setNodeToDirtyFromParent(e))}},notifyOnCreate:!0,manager:null,managerClass:w,requiresSupport:_,bindings:null,inputs:null,callback:null,allowAtCreate:!0,connect:function(e,t){for(var n,i=this.bindings,r=this.notifyOnCreate,s=0,o=i.length;s<o;s++)n=i[s],d.a.hookUpDownstreamNode(e,n,t,!0)||Object(a.b)("Observer could not hook up to one of its observed properties.",{object:e,observer:this,binding:n,bindingPath:n.path});var l=f.b.create({previousValues:[],_fireState:r?f.a.FORCE_FIRE:f.a.SKIP_FIRE});l.retain(),h.a.setDataForNode(l,t),e.isConnected&&h.a.triggerFlush()},__superMap:{_$8ci$init:"init",_$8fD$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObserverMetadata"}}),E=C.extend({notifyOnCreate:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"ListenerMetadata"}}),A=C.extend({node:-1,init:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this;e&&e.hasMixin&&e.hasMixin(_)||Object(a.b)("A CW.Observer must be defined on an observable object.",{owningObject:e,inputs:n}),this.owningObject=e;var o=n[0];Object(s.a)(o)?r.__s._$BRa$init.call(this,o):r.__s._$BRa$init.apply(this,n),this.node=e.allocNode(this.manager,h.a.PULL_ON_FLUSH)},connect:function(){return this.__s._$BYG$connect.call(this,this.owningObject,this.node)},disconnect:function(){h.a.disconnectParentsFromNode(this.node)},__superMap:{_$BRa$init:"init",_$BYG$connect:"connect"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Observer"}}),O=A.extend({notifyOnCreate:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"Listener"}}),T=function(){return C.define.apply(C,arguments)},M=function(){return E.define.apply(E,arguments)},D={key:"Signal Not Set Sentinel"},P=i.a.extend({requiresSupport:_,isCacheable:!0,notifyNode:function(e,t){var n=h.a.getDataForNode(t);n.context=null,n.didFire=!1,this.didPropagate.call(e)},calculateValueForNode:function(e,t,n){var i=h.a.getStateDataForNode(t);if(n){h.a.setStateDataForNode(D,t);var r=h.a.getStateIDForNode(t);h.a.getValueForNode(r),i=h.a.getStateDataForNode(t)}return i=i===D?h.a.getDataForNode(t):L(t,this._debug_key,i),this.willPropagate.call(e,i),i},validateDescendantDownstreamNodeManager:c.a,getValue:function(e,t){return function(e){var n=this.downstreamNodes[t];if(void 0!==n){var i=e;g.a.isInsideSetter&&h.a.nodeIsDirty(n)?h.a.passValueToNode(i,n):h.a.setValueForNode(i,n)}}},didPropagate:c.a,willPropagate:c.a,wasRegistered:function(e,t){var n=this,i=arguments;n.__s._$DZ3$wasRegistered.apply(n,i),this._debug_key=t},addDebugInfoForNode:function(e,t,n){t.type="Signal",t.object=e,t.key=this._debug_key,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},initializeEvent:function(e){var t=L(e,this._debug_key,null);t.didFire=!1,h.a.setDataForNode(t,e),h.a.setStateDataForNode(D,e)},__superMap:{_$DZ3$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignalMetadata"}}),L=function(e,t,n){var i=h.a.getDataForNode(e),r=f.b.create({type:t,context:n,didFire:!0});return r.retain(),i&&i.release(),r},R=function(){return P.create.apply(P,arguments)}},function(e,t,n){},function(e,t,n){var i=n(108),r=n(211).f,a=n(213),s=n(216),o=n(489),l=n(593),c=n(366);e.exports=function(e,t){var n,u,d,h,p,f=e.target,g=e.global,m=e.stat;if(n=g?i:m?i[f]||o(f,{}):(i[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=r(n,u))&&p.value:n[u],!c(g?u:f+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h===typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&a(h,"sham",!0),s(n,u,h,e)}}},function(e,t,n){"use strict";(function(e){!function(e,t){e.IntlPolyfill=t()}(e,(function(){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var s=t[n](i),o=s.value;o instanceof e?Promise.resolve(o.value).then((function(e){r("next",e)}),(function(e){r("throw",e)})):a(s.done?"return":"normal",s.value)}catch(l){a("throw",l)}}function a(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise((function(a,s){var o={key:e,arg:t,resolve:a,reject:s,next:null};i?i=i.next=o:(n=i=o,r(e,t))}))},"function"!==typeof t.return&&(this.return=void 0)}return"function"===typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s="undefined"===typeof e?self:e,o=Object.freeze({asyncIterator:function(e){if("function"===typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},asyncGenerator:n,asyncGeneratorDelegate:function(e,t){var n={},i=!1;function r(n,r){return i=!0,r=new Promise((function(t){t(e[n](r))})),{done:!1,value:t(r)}}return"function"===typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return i?(i=!1,e):r("next",e)},"function"===typeof e.throw&&(n.throw=function(e){if(i)throw i=!1,e;return r("throw",e)}),"function"===typeof e.return&&(n.return=function(e){return r("return",e)}),n},asyncToGenerator:function(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(l){return void n(l)}if(!s.done)return Promise.resolve(o).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(o)}("next")}))}},classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass:i,defineEnumerableProperties:function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},defaults:function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}return e},defineProperty:r,get:function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},inherits:function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},interopRequireDefault:function(e){return e&&e.__esModule?e:{default:e}},interopRequireWildcard:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},newArrowCheck:function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},objectDestructuringEmpty:function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},objectWithoutProperties:function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},possibleConstructorReturn:function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},selfGlobal:s,set:function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var s=Object.getPrototypeOf(t);null!==s&&e(s,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var o=a.set;void 0!==o&&o.call(r,i)}return i},slicedToArray:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){r=!0,a=l}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},slicedToArrayLoose:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},taggedTemplateLiteral:function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},taggedTemplateLiteralLoose:function(e,t){return e.raw=t,e},temporalRef:function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},temporalUndefined:{},toArray:function(e){return Array.isArray(e)?e:Array.from(e)},toConsumableArray:function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},typeof:t,extends:a,instanceof:function(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}}),l=function(){var e=function(){};try{return Object.defineProperty(e,"a",{get:function(){return 1}}),Object.defineProperty(e,"prototype",{writable:!1}),1===e.a&&e.prototype instanceof Object}catch(t){return!1}}(),c=!l&&!Object.prototype.__defineGetter__,u=Object.prototype.hasOwnProperty,d=l?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):u.call(e,t)&&!("value"in n)||(e[t]=n.value)},h=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var n=arguments[1]||0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},p=Object.create||function(e,t){var n;function i(){}for(var r in i.prototype=e,n=new i,t)u.call(t,r)&&d(n,r,t[r]);return n},f=Array.prototype.slice,g=Array.prototype.concat,m=Array.prototype.push,_=Array.prototype.join,v=Array.prototype.shift,b=Function.prototype.bind||function(e){var t=this,n=f.call(arguments,1);return t.length,function(){return t.apply(e,g.call(n,f.call(arguments)))}},y=p(null),w=Math.random();function I(e){for(var t in e)(e instanceof I||u.call(e,t))&&d(this,t,{value:e[t],enumerable:!0,writable:!0,configurable:!0})}function S(){d(this,"length",{writable:!0,value:0}),arguments.length&&m.apply(this,f.call(arguments))}function C(){if(y.disableRegExpRestore)return function(){};for(var e={lastMatch:RegExp.lastMatch||"",leftContext:RegExp.leftContext,multiline:RegExp.multiline,input:RegExp.input},t=!1,n=1;n<=9;n++)t=(e["$"+n]=RegExp["$"+n])||t;return function(){var n=/[.?*+^$[\]\\(){}|-]/g,i=e.lastMatch.replace(n,"\\$&"),r="";if(t)for(var a=1;a<=9;a++){var s=e["$"+a];s?(s=s.replace(n,"\\$&"),r+=i.substring(0,i.indexOf(s))+"(",i=s+")"+i.substring(i.indexOf(s)+s.length)):(r+="(",i=")"+i)}r=(r+=i).replace(/((^|[^\\])((\\\\)*\\[()])+|[^()])+/g,(function(e){return"[\\s\\S]{"+e.replace(/\\(.)/g,"$1").length+"}"}));var o=new RegExp(r,e.multiline?"gm":"g");o.lastIndex=e.leftContext.length,o.exec(e.input)}}function E(e){if(null===e)throw new TypeError("Cannot convert null or undefined to object");return"object"===("undefined"===typeof e?"undefined":o.typeof(e))?e:Object(e)}function A(e){return"number"===typeof e?e:Number(e)}function O(e){return u.call(e,"__getInternalProperties")?e.__getInternalProperties(w):p(null)}I.prototype=p(null),S.prototype=p(null);var T=RegExp("^(?:(?:[a-z]{2,3}(?:-[a-z]{3}(?:-[a-z]{3}){0,2})?|[a-z]{4}|[a-z]{5,8})(?:-[a-z]{4})?(?:-(?:[a-z]{2}|\\d{3}))?(?:-(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))*(?:-[0-9a-wy-z](?:-[a-z0-9]{2,8})+)*(?:-x(?:-[a-z0-9]{1,8})+)?|x(?:-[a-z0-9]{1,8})+|(?:(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))))$","i"),M=RegExp("^(?!x).*?-((?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),D=RegExp("^(?!x).*?-([0-9a-wy-z])-(?:\\w+-(?!x-))*\\1\\b","i"),P=RegExp("-[0-9a-wy-z](?:-[a-z0-9]{2,8})+","ig"),L=void 0,R={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}};function x(e){for(var t=e.length;t--;){var n=e.charAt(t);n>="a"&&n<="z"&&(e=e.slice(0,t)+n.toUpperCase()+e.slice(t+1))}return e}function N(e){return!!T.test(e)&&!M.test(e)&&!D.test(e)}function F(e){for(var t=void 0,n=void 0,i=1,r=(n=(e=e.toLowerCase()).split("-")).length;i<r;i++)if(2===n[i].length)n[i]=n[i].toUpperCase();else if(4===n[i].length)n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1);else if(1===n[i].length&&"x"!==n[i])break;(t=(e=_.call(n,"-")).match(P))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+P.source+")+","i"),_.call(t,""))),u.call(R.tags,e)&&(e=R.tags[e]);for(var a=1,s=(n=e.split("-")).length;a<s;a++)u.call(R.subtags,n[a])?n[a]=R.subtags[n[a]]:u.call(R.extLang,n[a])&&(n[a]=R.extLang[n[a]][0],1===a&&R.extLang[n[1]][1]===n[0]&&(n=f.call(n,a++),s-=1));return _.call(n,"-")}var V=/^[A-Z]{3}$/,k=/-u(?:-[0-9a-z]{2,8})+/gi;function B(e){if(void 0===e)return new S;for(var t=new S,n=E(e="string"===typeof e?[e]:e),i=function(e){var t=function(e){var t=A(e);return isNaN(t)?0:0===t||-0===t||t===1/0||t===-1/0?t:t<0?-1*Math.floor(Math.abs(t)):Math.floor(Math.abs(t))}(e);return t<=0?0:t===1/0?Math.pow(2,53)-1:Math.min(t,Math.pow(2,53)-1)}(n.length),r=0;r<i;){var a=String(r);if(a in n){var s=n[a];if(null===s||"string"!==typeof s&&"object"!==("undefined"===typeof s?"undefined":o.typeof(s)))throw new TypeError("String or Object type expected");var l=String(s);if(!N(l))throw new RangeError("'"+l+"' is not a structurally valid language tag");l=F(l),-1===h.call(t,l)&&m.call(t,l)}r++}return t}function j(e,t){for(var n=t;n;){if(h.call(e,n)>-1)return n;var i=n.lastIndexOf("-");if(i<0)return;i>=2&&"-"===n.charAt(i-2)&&(i-=2),n=n.substring(0,i)}}function U(e,t){for(var n=0,i=t.length,r=void 0,a=void 0,s=void 0;n<i&&!r;)a=t[n],r=j(e,s=String(a).replace(k,"")),n++;var o=new I;if(void 0!==r){if(o["[[locale]]"]=r,String(a)!==String(s)){var l=a.match(k)[0],c=a.indexOf("-u-");o["[[extension]]"]=l,o["[[extensionIndex]]"]=c}}else o["[[locale]]"]=L;return o}function G(e,t,n,i,r){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var a,s=(a="lookup"===n["[[localeMatcher]]"]?U(e,t):function(e,t){return U(e,t)}(e,t))["[[locale]]"],o=void 0,l=void 0;u.call(a,"[[extension]]")&&(l=(o=function(e){var t=e.length;if(0===t)return[];for(var n=[],i=!0,r=3,a=r,s=r;r<t;){if(45===e.codePointAt(r)){if(r-a===2){if(a-s>1){var o=e.substring(s,a-1);n.push(o)}var l=e.substring(a,r);n.push(l),s=r+1,i=!1}else if(!0===i){var c=e.substring(a,r);n.push(c),s=r+1}a=r+1}r+=1}if(t-a===2){if(a-s>1){var u=e.substring(s,a-1);n.push(u)}s=a}var d=e.substring(s,t);return n.push(d),n}(a["[[extension]]"])).length);var c=new I;c["[[dataLocale]]"]=s;for(var d="-u",p=0,f=i.length;p<f;){var g=i[p],m=r[s][g],_=m[0],v="",b=h;if(void 0!==o){var y=b.call(o,g);if(-1!==y)if(y+1<l&&o[y+1].length>2){var w=o[y+1];-1!==b.call(m,w)&&(v="-"+g+"-"+(_=w))}else-1!==b(m,"true")&&(_="true")}if(u.call(n,"[["+g+"]]")){var S=n["[["+g+"]]"];-1!==b.call(m,S)&&S!==_&&(_=S,v="")}c["[["+g+"]]"]=_,d+=v,p++}if(d.length>2){var C=s.indexOf("-x-");if(-1===C)s+=d;else{var E=s.substring(0,C),A=s.substring(C);s=E+d+A}s=F(s)}return c["[[locale]]"]=s,c}function H(e,t){for(var n=t.length,i=new S,r=0;r<n;){var a=t[r];void 0!==j(e,String(a).replace(k,""))&&m.call(i,a),r++}return f.call(i)}function W(e,t,n){var i,r=void 0;if(void 0!==n&&void 0!==(r=(n=new I(E(n))).localeMatcher)&&"lookup"!==(r=String(r))&&"best fit"!==r)throw new RangeError('matcher should be "lookup" or "best fit"');for(var a in i=void 0===r||"best fit"===r?function(e,t){return H(e,t)}(e,t):H(e,t))u.call(i,a)&&d(i,a,{writable:!1,configurable:!1,value:i[a]});try{d(i,"length",{writable:!1})}catch(s){}return i}function $(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a="boolean"===n?Boolean(a):"string"===n?String(a):a,void 0!==i&&-1===h.call(i,a))throw new RangeError("'"+a+"' is not an allowed value for `"+t+"`");return a}return r}function z(e,t,n,i,r){var a=e[t];if(void 0!==a){if(a=Number(a),isNaN(a)||a<n||a>i)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(a)}return r}var K={};Object.defineProperty(K,"getCanonicalLocales",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=B(e),n=[],i=t.length,r=0;r<i;)n[r]=t[r],r++;return n}});var q={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};function Q(){var e=arguments[0],t=arguments[1];return this&&this!==K?Z(E(this),e,t):new K.NumberFormat(e,t)}function Y(e,t,n){var i=z(t,"minimumIntegerDigits",1,21,1),r=z(t,"minimumFractionDigits",0,20,n),a=z(t,"maximumFractionDigits",r,20),s=t.minimumSignificantDigits,o=t.maximumSignificantDigits;e["[[minimumIntegerDigits]]"]=i,e["[[minimumFractionDigits]]"]=r,e["[[maximumFractionDigits]]"]=a,void 0===s&&void 0===o||(s=z(t,"minimumSignificantDigits",1,21,1),o=z(t,"maximumSignificantDigits",s,21,21),e["[[minimumSignificantDigits]]"]=s,e["[[maximumSignificantDigits]]"]=o)}function Z(e,t,n){var i=O(e),r=C();if(!0===i["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");d(e,"__getInternalProperties",{value:function(){if(arguments[0]===w)return i}}),i["[[initializedIntlObject]]"]=!0;var a=B(t);n=void 0===n?{}:E(n);var s=new I,o=$(n,"localeMatcher","string",new S("lookup","best fit"),"best fit");s["[[localeMatcher]]"]=o;var l=y.NumberFormat["[[localeData]]"],u=G(y.NumberFormat["[[availableLocales]]"],a,s,y.NumberFormat["[[relevantExtensionKeys]]"],l);i["[[locale]]"]=u["[[locale]]"],i["[[numberingSystem]]"]=u["[[nu]]"],i["[[dataLocale]]"]=u["[[dataLocale]]"];var h=u["[[dataLocale]]"],p=$(n,"style","string",new S("decimal","percent","currency"),"decimal");i["[[style]]"]=p;var f=$(n,"currency","string");if(void 0!==f&&!function(e){var t=x(String(e));return!1!==V.test(t)}(f))throw new RangeError("'"+f+"' is not a valid currency code");if("currency"===p&&void 0===f)throw new TypeError("Currency code is required when style is currency");var g,m=void 0;"currency"===p&&(f=f.toUpperCase(),i["[[currency]]"]=f,m=void 0!==q[g=f]?q[g]:2);var _=$(n,"currencyDisplay","string",new S("code","symbol","name"),"symbol");"currency"===p&&(i["[[currencyDisplay]]"]=_),Y(i,n,"currency"===p?m:0),void 0===i["[[maximumFractionDigits]]"]&&(i["[[maximumFractionDigits]]"]="currency"===p?Math.max(i["[[minimumFractionDigits]]"],m):"percent"===p?Math.max(i["[[minimumFractionDigits]]"],0):Math.max(i["[[minimumFractionDigits]]"],3));var v=$(n,"useGrouping","boolean",void 0,!0);i["[[useGrouping]]"]=v;var b=l[h].patterns[p];return i["[[positivePattern]]"]=b.positivePattern,i["[[negativePattern]]"]=b.negativePattern,i["[[boundFormat]]"]=void 0,i["[[initializedNumberFormat]]"]=!0,c&&(e.format=X.call(e)),r(),e}function X(){var e=null!==this&&"object"===o.typeof(this)&&O(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=b.call((function(e){return ne(this,Number(e))}),this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function J(e,t){for(var n=te(e,t),i=[],r=0,a=0;n.length>a;a++){var s=n[a],o={};o.type=s["[[type]]"],o.value=s["[[value]]"],i[r]=o,r+=1}return i}function ee(e,t){var n=O(e);return u.call(n,"[[minimumSignificantDigits]]")&&u.call(n,"[[maximumSignificantDigits]]")?function(e,t,n){var i=n,r=void 0,a=void 0;if(0===e)r=_.call(Array(i+1),"0"),a=0;else{a=function(e){if("function"===typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}(Math.abs(e));var s=Math.round(Math.exp(Math.abs(a-i+1)*Math.LN10));r=String(Math.round(a-i+1<0?e*s:e/s))}if(a>=i)return r+_.call(Array(a-i+1+1),"0");if(a===i-1)return r;if(a>=0?r=r.slice(0,a+1)+"."+r.slice(a+1):a<0&&(r="0."+_.call(Array(1-(a+1)),"0")+r),r.indexOf(".")>=0&&n>t){for(var o=n-t;o>0&&"0"===r.charAt(r.length-1);)r=r.slice(0,-1),o--;"."===r.charAt(r.length-1)&&(r=r.slice(0,-1))}return r}(t,n["[[minimumSignificantDigits]]"],n["[[maximumSignificantDigits]]"]):function(e,t,n,i){var r,a=i,s=Math.pow(10,a)*e,o=0===s?"0":s.toFixed(0),l=(r=o.indexOf("e"))>-1?o.slice(r+1):0;l&&(o=o.slice(0,r).replace(".",""),o+=_.call(Array(l-(o.length-1)+1),"0"));var c=void 0;if(0!==a){var u=o.length;if(u<=a)o=_.call(Array(a+1-u+1),"0")+o,u=a+1;var d=o.substring(0,u-a),h=o.substring(u-a,o.length);o=d+"."+h,c=d.length}else c=o.length;for(var p=i-n;p>0&&"0"===o.slice(-1);)o=o.slice(0,-1),p--;("."===o.slice(-1)&&(o=o.slice(0,-1)),c<t)&&(o=_.call(Array(t-c+1),"0")+o);return o}(t,n["[[minimumIntegerDigits]]"],n["[[minimumFractionDigits]]"],n["[[maximumFractionDigits]]"])}function te(e,t){var n=O(e),i=n["[[dataLocale]]"],r=n["[[numberingSystem]]"],a=y.NumberFormat["[[localeData]]"][i],s=a.symbols[r]||a.symbols.latn,o=void 0;!isNaN(t)&&t<0?(t=-t,o=n["[[negativePattern]]"]):o=n["[[positivePattern]]"];for(var l=new S,c=o.indexOf("{",0),u=0,d=0,h=o.length;c>-1&&c<h;){if(-1===(u=o.indexOf("}",c)))throw new Error;if(c>d){var p=o.substring(d,c);m.call(l,{"[[type]]":"literal","[[value]]":p})}var f=o.substring(c+1,u);if("number"===f)if(isNaN(t)){var g=s.nan;m.call(l,{"[[type]]":"nan","[[value]]":g})}else if(isFinite(t)){"percent"===n["[[style]]"]&&(t*=100);var _=ee(e,t);ie[r]?function(){var e=ie[r];_=String(_).replace(/\d/g,(function(t){return e[t]}))}():_=String(_);var b=void 0,w=void 0,I=_.indexOf(".",0);if(I>0?(b=_.substring(0,I),w=_.substring(I+1,I.length)):(b=_,w=void 0),!0===n["[[useGrouping]]"]){var C=s.group,E=[],A=a.patterns.primaryGroupSize||3,T=a.patterns.secondaryGroupSize||A;if(b.length>A){var M=b.length-A,D=M%T,P=b.slice(0,D);for(P.length&&m.call(E,P);D<M;)m.call(E,b.slice(D,D+T)),D+=T;m.call(E,b.slice(M))}else m.call(E,b);if(0===E.length)throw new Error;for(;E.length;){var L=v.call(E);m.call(l,{"[[type]]":"integer","[[value]]":L}),E.length&&m.call(l,{"[[type]]":"group","[[value]]":C})}}else m.call(l,{"[[type]]":"integer","[[value]]":b});if(void 0!==w){var R=s.decimal;m.call(l,{"[[type]]":"decimal","[[value]]":R}),m.call(l,{"[[type]]":"fraction","[[value]]":w})}}else{var x=s.infinity;m.call(l,{"[[type]]":"infinity","[[value]]":x})}else if("plusSign"===f){var N=s.plusSign;m.call(l,{"[[type]]":"plusSign","[[value]]":N})}else if("minusSign"===f){var F=s.minusSign;m.call(l,{"[[type]]":"minusSign","[[value]]":F})}else if("percentSign"===f&&"percent"===n["[[style]]"]){var V=s.percentSign;m.call(l,{"[[type]]":"literal","[[value]]":V})}else if("currency"===f&&"currency"===n["[[style]]"]){var k=n["[[currency]]"],B=void 0;"code"===n["[[currencyDisplay]]"]?B=k:"symbol"===n["[[currencyDisplay]]"]?B=a.currencies[k]||k:"name"===n["[[currencyDisplay]]"]&&(B=k),m.call(l,{"[[type]]":"currency","[[value]]":B})}else{var j=o.substring(c,u);m.call(l,{"[[type]]":"literal","[[value]]":j})}d=u+1,c=o.indexOf("{",d)}if(d<h){var U=o.substring(d,h);m.call(l,{"[[type]]":"literal","[[value]]":U})}return l}function ne(e,t){for(var n=te(e,t),i="",r=0;n.length>r;r++)i+=n[r]["[[value]]"];return i}d(K,"NumberFormat",{configurable:!0,writable:!0,value:Q}),d(K.NumberFormat,"prototype",{writable:!1}),y.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},d(K.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:b.call((function(e){if(!u.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=C(),n=arguments[1],i=this["[[availableLocales]]"],r=B(e);return t(),W(i,r,n)}),y.NumberFormat)}),d(K.NumberFormat.prototype,"format",{configurable:!0,get:X}),Object.defineProperty(K.NumberFormat.prototype,"formatToParts",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=null!==this&&"object"===o.typeof(this)&&O(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");var n=Number(e);return J(this,n)}});var ie={arab:["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],arabext:["\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9"],bali:["\u1b50","\u1b51","\u1b52","\u1b53","\u1b54","\u1b55","\u1b56","\u1b57","\u1b58","\u1b59"],beng:["\u09e6","\u09e7","\u09e8","\u09e9","\u09ea","\u09eb","\u09ec","\u09ed","\u09ee","\u09ef"],deva:["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],fullwide:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"],gujr:["\u0ae6","\u0ae7","\u0ae8","\u0ae9","\u0aea","\u0aeb","\u0aec","\u0aed","\u0aee","\u0aef"],guru:["\u0a66","\u0a67","\u0a68","\u0a69","\u0a6a","\u0a6b","\u0a6c","\u0a6d","\u0a6e","\u0a6f"],hanidec:["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],khmr:["\u17e0","\u17e1","\u17e2","\u17e3","\u17e4","\u17e5","\u17e6","\u17e7","\u17e8","\u17e9"],knda:["\u0ce6","\u0ce7","\u0ce8","\u0ce9","\u0cea","\u0ceb","\u0cec","\u0ced","\u0cee","\u0cef"],laoo:["\u0ed0","\u0ed1","\u0ed2","\u0ed3","\u0ed4","\u0ed5","\u0ed6","\u0ed7","\u0ed8","\u0ed9"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["\u1946","\u1947","\u1948","\u1949","\u194a","\u194b","\u194c","\u194d","\u194e","\u194f"],mlym:["\u0d66","\u0d67","\u0d68","\u0d69","\u0d6a","\u0d6b","\u0d6c","\u0d6d","\u0d6e","\u0d6f"],mong:["\u1810","\u1811","\u1812","\u1813","\u1814","\u1815","\u1816","\u1817","\u1818","\u1819"],mymr:["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049"],orya:["\u0b66","\u0b67","\u0b68","\u0b69","\u0b6a","\u0b6b","\u0b6c","\u0b6d","\u0b6e","\u0b6f"],tamldec:["\u0be6","\u0be7","\u0be8","\u0be9","\u0bea","\u0beb","\u0bec","\u0bed","\u0bee","\u0bef"],telu:["\u0c66","\u0c67","\u0c68","\u0c69","\u0c6a","\u0c6b","\u0c6c","\u0c6d","\u0c6e","\u0c6f"],thai:["\u0e50","\u0e51","\u0e52","\u0e53","\u0e54","\u0e55","\u0e56","\u0e57","\u0e58","\u0e59"],tibt:["\u0f20","\u0f21","\u0f22","\u0f23","\u0f24","\u0f25","\u0f26","\u0f27","\u0f28","\u0f29"]};d(K.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,t=new I,n=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],i=null!==this&&"object"===o.typeof(this)&&O(this);if(!i||!i["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var r=0,a=n.length;r<a;r++)u.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return p({},t)}});var re=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/[rqQASjJgwWIQq]/,oe=["era","year","month","day","weekday","quarter"],le=["hour","minute","second","hour12","timeZoneName"];function ce(e){for(var t=0;t<le.length;t+=1)if(e.hasOwnProperty(le[t]))return!1;return!0}function ue(e){for(var t=0;t<oe.length;t+=1)if(e.hasOwnProperty(oe[t]))return!1;return!0}function de(e,t){for(var n={_:{}},i=0;i<oe.length;i+=1)e[oe[i]]&&(n[oe[i]]=e[oe[i]]),e._[oe[i]]&&(n._[oe[i]]=e._[oe[i]]);for(var r=0;r<le.length;r+=1)t[le[r]]&&(n[le[r]]=t[le[r]]),t._[le[r]]&&(n._[le[r]]=t._[le[r]]);return n}function he(e){return e.pattern12=e.extendedPattern.replace(/'([^']*)'/g,(function(e,t){return t||"'"})),e.pattern=e.pattern12.replace("{ampm}","").replace(ae,""),e}function pe(e,t){switch(e.charAt(0)){case"G":return t.era=["short","short","short","long","narrow"][e.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return t.year=2===e.length?"2-digit":"numeric","{year}";case"Q":case"q":return t.quarter=["numeric","2-digit","short","long","narrow"][e.length-1],"{quarter}";case"M":case"L":return t.month=["numeric","2-digit","short","long","narrow"][e.length-1],"{month}";case"w":return t.week=2===e.length?"2-digit":"numeric","{weekday}";case"W":return t.week="numeric","{weekday}";case"d":return t.day=2===e.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return t.day="numeric","{day}";case"E":return t.weekday=["short","short","short","long","narrow","short"][e.length-1],"{weekday}";case"e":return t.weekday=["numeric","2-digit","short","long","narrow","short"][e.length-1],"{weekday}";case"c":return t.weekday=["numeric",void 0,"short","long","narrow","short"][e.length-1],"{weekday}";case"a":case"b":case"B":return t.hour12=!0,"{ampm}";case"h":case"H":return t.hour=2===e.length?"2-digit":"numeric","{hour}";case"k":case"K":return t.hour12=!0,t.hour=2===e.length?"2-digit":"numeric","{hour}";case"m":return t.minute=2===e.length?"2-digit":"numeric","{minute}";case"s":return t.second=2===e.length?"2-digit":"numeric","{second}";case"S":case"A":return t.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return t.timeZoneName=e.length<4?"short":"long","{timeZoneName}"}}function fe(e,t){if(!se.test(t)){var n={originalPattern:t,_:{}};return n.extendedPattern=t.replace(re,(function(e){return pe(e,n._)})),e.replace(re,(function(e){return pe(e,n)})),he(n)}}var ge={second:{numeric:"s","2-digit":"ss"},minute:{numeric:"m","2-digit":"mm"},year:{numeric:"y","2-digit":"yy"},day:{numeric:"d","2-digit":"dd"},month:{numeric:"L","2-digit":"LL",narrow:"LLLLL",short:"LLL",long:"LLLL"},weekday:{narrow:"ccccc",short:"ccc",long:"cccc"}},me=p(null,{narrow:{},short:{},long:{}});function _e(e,t,n,i,r){var a=e[t]&&e[t][n]?e[t][n]:e.gregory[n],s={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},o=u.call(a,i)?a[i]:u.call(a,s[i][0])?a[s[i][0]]:a[s[i][1]];return null!==r?o[r]:o}function ve(){var e=arguments[0],t=arguments[1];return this&&this!==K?be(E(this),e,t):new K.DateTimeFormat(e,t)}function be(e,t,n){var i=O(e),a=C();if(!0===i["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");d(e,"__getInternalProperties",{value:function(){if(arguments[0]===w)return i}}),i["[[initializedIntlObject]]"]=!0;var s=B(t);n=we(n,"any","date");var o=new I,l=$(n,"localeMatcher","string",new S("lookup","best fit"),"best fit");o["[[localeMatcher]]"]=l;var p=y.DateTimeFormat,f=p["[[localeData]]"],g=G(p["[[availableLocales]]"],s,o,p["[[relevantExtensionKeys]]"],f);i["[[locale]]"]=g["[[locale]]"],i["[[calendar]]"]=g["[[ca]]"],i["[[numberingSystem]]"]=g["[[nu]]"],i["[[dataLocale]]"]=g["[[dataLocale]]"];var m=g["[[dataLocale]]"],_=n.timeZone;if(void 0!==_&&"UTC"!==(_=x(_)))throw new RangeError("timeZone is not supported.");for(var v in i["[[timeZone]]"]=_,o=new I,ye)if(u.call(ye,v)){var b=$(n,v,"string",ye[v]);o["[["+v+"]]"]=b}var E=void 0,A=f[m],T=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:function(e){var t=e.availableFormats,n=e.timeFormats,i=e.dateFormats,r=[],a=void 0,s=void 0,o=void 0,l=void 0,c=void 0,u=[],d=[];for(a in t)t.hasOwnProperty(a)&&(o=fe(a,s=t[a]))&&(r.push(o),ce(o)?d.push(o):ue(o)&&u.push(o));for(a in n)n.hasOwnProperty(a)&&(o=fe(a,s=n[a]))&&(r.push(o),u.push(o));for(a in i)i.hasOwnProperty(a)&&(o=fe(a,s=i[a]))&&(r.push(o),d.push(o));for(l=0;l<u.length;l+=1)for(c=0;c<d.length;c+=1)s="long"===d[c].month?d[c].weekday?e.full:e.long:"short"===d[c].month?e.medium:e.short,(o=de(d[c],u[l])).originalPattern=s,o.extendedPattern=s.replace("{0}",u[l].extendedPattern).replace("{1}",d[c].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),r.push(he(o));return r}(e)}(A.formats);if(l=$(n,"formatMatcher","string",new S("basic","best fit"),"best fit"),A.formats=T,"basic"===l)E=function(e,t){for(var n=-1/0,i=void 0,r=0,a=t.length;r<a;){var s=t[r],o=0;for(var l in ye)if(u.call(ye,l)){var c=e["[["+l+"]]"],d=u.call(s,l)?s[l]:void 0;if(void 0===c&&void 0!==d)o-=20;else if(void 0!==c&&void 0===d)o-=120;else{var p=["2-digit","numeric","narrow","short","long"],f=h.call(p,c),g=h.call(p,d),m=Math.max(Math.min(g-f,2),-2);2===m?o-=6:1===m?o-=3:-1===m?o-=6:-2===m&&(o-=8)}}o>n&&(n=o,i=s),r++}return i}(o,T);else{var M=$(n,"hour12","boolean");o.hour12=void 0===M?A.hour12:M,E=function(e,t){var n=[];for(var i in ye)u.call(ye,i)&&void 0!==e["[["+i+"]]"]&&n.push(i);if(1===n.length){var a=function(e,t){var n;if(ge[e]&&ge[e][t])return n={originalPattern:ge[e][t],_:r({},e,t),extendedPattern:"{"+e+"}"},r(n,e,t),r(n,"pattern12","{"+e+"}"),r(n,"pattern","{"+e+"}"),n}(n[0],e["[["+n[0]+"]]"]);if(a)return a}for(var s=-1/0,o=void 0,l=0,c=t.length;l<c;){var d=t[l],p=0;for(var f in ye)if(u.call(ye,f)){var g=e["[["+f+"]]"],m=u.call(d,f)?d[f]:void 0;if(g!==(u.call(d._,f)?d._[f]:void 0)&&(p-=2),void 0===g&&void 0!==m)p-=20;else if(void 0!==g&&void 0===m)p-=120;else{var _=["2-digit","numeric","narrow","short","long"],v=h.call(_,g),b=h.call(_,m),y=Math.max(Math.min(b-v,2),-2);b<=1&&v>=2||b>=2&&v<=1?y>0?p-=6:y<0&&(p-=8):y>1?p-=3:y<-1&&(p-=6)}}d._.hour12!==e.hour12&&(p-=1),p>s&&(s=p,o=d),l++}return o}(o,T)}for(var D in ye)if(u.call(ye,D)&&u.call(E,D)){var P=E[D];P=E._&&u.call(E._,D)?E._[D]:P,i["[["+D+"]]"]=P}var L=void 0,R=$(n,"hour12","boolean");if(i["[[hour]]"])if(R=void 0===R?A.hour12:R,i["[[hour12]]"]=R,!0===R){var N=A.hourNo0;i["[[hourNo0]]"]=N,L=E.pattern12}else L=E.pattern;else L=E.pattern;return i["[[pattern]]"]=L,i["[[boundFormat]]"]=void 0,i["[[initializedDateTimeFormat]]"]=!0,c&&(e.format=Ie.call(e)),a(),e}d(K,"DateTimeFormat",{configurable:!0,writable:!0,value:ve}),d(ve,"prototype",{writable:!1});var ye={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};function we(e,t,n){if(void 0===e)e=null;else{var i=E(e);for(var r in e=new I,i)e[r]=i[r]}e=p(e);var a=!0;return"date"!==t&&"any"!==t||void 0===e.weekday&&void 0===e.year&&void 0===e.month&&void 0===e.day||(a=!1),"time"!==t&&"any"!==t||void 0===e.hour&&void 0===e.minute&&void 0===e.second||(a=!1),!a||"date"!==n&&"all"!==n||(e.year=e.month=e.day="numeric"),!a||"time"!==n&&"all"!==n||(e.hour=e.minute=e.second="numeric"),e}function Ie(){var e=null!==this&&"object"===o.typeof(this)&&O(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=b.call((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=void 0===e?Date.now():A(e);return Ce(this,t)}),this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function Se(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var n=e.__getInternalProperties(w);C();for(var i=n["[[locale]]"],r=new K.NumberFormat([i],{useGrouping:!1}),a=new K.NumberFormat([i],{minimumIntegerDigits:2,useGrouping:!1}),s=function(e,t,n){var i=new Date(e),r="get"+(n||"");return new I({"[[weekday]]":i[r+"Day"](),"[[era]]":+(i[r+"FullYear"]()>=0),"[[year]]":i[r+"FullYear"](),"[[month]]":i[r+"Month"](),"[[day]]":i[r+"Date"](),"[[hour]]":i[r+"Hours"](),"[[minute]]":i[r+"Minutes"](),"[[second]]":i[r+"Seconds"](),"[[inDST]]":!1})}(t,n["[[calendar]]"],n["[[timeZone]]"]),o=n["[[pattern]]"],l=new S,c=0,u=o.indexOf("{"),d=0,h=n["[[dataLocale]]"],p=y.DateTimeFormat["[[localeData]]"][h].calendars,f=n["[[calendar]]"];-1!==u;){var g=void 0;if(-1===(d=o.indexOf("}",u)))throw new Error("Unclosed pattern");u>c&&m.call(l,{type:"literal",value:o.substring(c,u)});var _=o.substring(u+1,d);if(ye.hasOwnProperty(_)){var v=n["[["+_+"]]"],b=s["[["+_+"]]"];if("year"===_&&b<=0?b=1-b:"month"===_?b++:"hour"===_&&!0===n["[[hour12]]"]&&0===(b%=12)&&!0===n["[[hourNo0]]"]&&(b=12),"numeric"===v)g=ne(r,b);else if("2-digit"===v)(g=ne(a,b)).length>2&&(g=g.slice(-2));else if(v in me)switch(_){case"month":g=_e(p,f,"months",v,s["[["+_+"]]"]);break;case"weekday":try{g=_e(p,f,"days",v,s["[["+_+"]]"])}catch(E){throw new Error("Could not find weekday data for locale "+i)}break;case"timeZoneName":g="";break;case"era":try{g=_e(p,f,"eras",v,s["[["+_+"]]"])}catch(E){throw new Error("Could not find era data for locale "+i)}break;default:g=s["[["+_+"]]"]}m.call(l,{type:_,value:g})}else"ampm"===_?(g=_e(p,f,"dayPeriods",s["[[hour]]"]>11?"pm":"am",null),m.call(l,{type:"dayPeriod",value:g})):m.call(l,{type:"literal",value:o.substring(u,d+1)});c=d+1,u=o.indexOf("{",c)}return d<o.length-1&&m.call(l,{type:"literal",value:o.substr(d+1)}),l}function Ce(e,t){for(var n=Se(e,t),i="",r=0;n.length>r;r++)i+=n[r].value;return i}function Ee(e,t){for(var n=Se(e,t),i=[],r=0;n.length>r;r++){var a=n[r];i.push({type:a.type,value:a.value})}return i}y.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},d(K.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:b.call((function(e){if(!u.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=C(),n=arguments[1],i=this["[[availableLocales]]"],r=B(e);return t(),W(i,r,n)}),y.NumberFormat)}),d(K.DateTimeFormat.prototype,"format",{configurable:!0,get:Ie}),Object.defineProperty(K.DateTimeFormat.prototype,"formatToParts",{enumerable:!1,writable:!0,configurable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=null!==this&&"object"===o.typeof(this)&&O(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");var n=void 0===e?Date.now():A(e);return Ee(this,n)}}),d(K.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e=void 0,t=new I,n=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],i=null!==this&&"object"===o.typeof(this)&&O(this);if(!i||!i["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var r=0,a=n.length;r<a;r++)u.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return p({},t)}});var Ae=K.__localeSensitiveProtos={Number:{},Date:{}};Ae.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return ne(new Q(arguments[0],arguments[1]),this)},Ae.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],i=new ve(t,n=we(n,"any","all"));return Ce(i,e)},Ae.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],i=new ve(t,n=we(n,"date","date"));return Ce(i,e)},Ae.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],i=new ve(t,n=we(n,"time","time"));return Ce(i,e)};var Oe=[function(e,t){return"other"},function(e,t){return t?"other":1==e?"one":"other"},function(e,t){return t?"other":0==e||1==e?"one":"other"},function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"}],Te={af:Oe[1],ak:Oe[2],am:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ar:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},ars:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},asa:Oe[1],ast:Oe[3],az:function(e,t){var n=String(e).split(".")[0],i=n.slice(-1),r=n.slice(-2),a=n.slice(-3);return t?1==i||2==i||5==i||7==i||8==i||20==r||50==r||70==r||80==r?"one":3==i||4==i||100==a||200==a||300==a||400==a||500==a||600==a||700==a||800==a||900==a?"few":0==n||6==i||40==r||60==r||90==r?"many":"other":1==e?"one":"other"},be:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?2!=r&&3!=r||12==a||13==a?"other":"few":1==r&&11!=a?"one":r>=2&&r<=4&&(a<12||a>14)?"few":i&&0==r||r>=5&&r<=9||a>=11&&a<=14?"many":"other"},bem:Oe[1],bez:Oe[1],bg:Oe[1],bh:Oe[2],bm:Oe[0],bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},bo:Oe[0],br:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2),s=i&&n[0].slice(-6);return t?"other":1==r&&11!=a&&71!=a&&91!=a?"one":2==r&&12!=a&&72!=a&&92!=a?"two":(3==r||4==r||9==r)&&(a<10||a>19)&&(a<70||a>79)&&(a<90||a>99)?"few":0!=e&&i&&0==s?"many":"other"},brx:Oe[1],bs:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==l&&11!=c?"one":a&&s>=2&&s<=4&&(o<12||o>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},ca:function(e,t){var n=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&n?"one":"other"},ce:Oe[1],cgg:Oe[1],chr:Oe[1],ckb:Oe[1],cs:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e;return t||1!=e&&(r||0!=i&&1!=i)?"other":"one"},de:Oe[3],dsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-2),o=r.slice(-2);return t?"other":a&&1==s||1==o?"one":a&&2==s||2==o?"two":a&&(3==s||4==s)||3==o||4==o?"few":"other"},dv:Oe[1],dz:Oe[0],ee:Oe[1],el:Oe[1],en:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?1==a&&11!=s?"one":2==a&&12!=s?"two":3==a&&13!=s?"few":"other":1==e&&i?"one":"other"},eo:Oe[1],es:Oe[1],et:Oe[3],eu:Oe[1],fa:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ff:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},fi:Oe[3],fil:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=r.slice(-1);return t?1==e?"one":"other":a&&(1==i||2==i||3==i)||a&&4!=s&&6!=s&&9!=s||!a&&4!=o&&6!=o&&9!=o?"one":"other"},fo:Oe[1],fr:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},fur:Oe[1],fy:Oe[3],ga:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":i&&e>=3&&e<=6?"few":i&&e>=7&&e<=10?"many":"other"},gd:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":1==e||11==e?"one":2==e||12==e?"two":i&&e>=3&&e<=10||i&&e>=13&&e<=19?"few":"other"},gl:Oe[3],gsw:Oe[1],gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},guw:Oe[2],gv:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a?"one":r&&2==a?"two":!r||0!=s&&20!=s&&40!=s&&60!=s&&80!=s?r?"other":"many":"few"},ha:Oe[1],haw:Oe[1],he:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&a&&0==s?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},hr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==l&&11!=c?"one":a&&s>=2&&s<=4&&(o<12||o>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},hsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-2),o=r.slice(-2);return t?"other":a&&1==s||1==o?"one":a&&2==s||2==o?"two":a&&(3==s||4==s)||3==o||4==o?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},id:Oe[0],ig:Oe[0],ii:Oe[0],in:Oe[0],is:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e,a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a&&11!=s||!r?"one":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},iu:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},iw:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&a&&0==s?"many":"other"},ja:Oe[0],jbo:Oe[0],jgo:Oe[1],ji:Oe[3],jmc:Oe[1],jv:Oe[0],jw:Oe[0],ka:function(e,t){var n=String(e).split(".")[0],i=n.slice(-2);return t?1==n?"one":0==n||i>=2&&i<=20||40==i||60==i||80==i?"many":"other":1==e?"one":"other"},kab:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},kaj:Oe[1],kcg:Oe[1],kde:Oe[0],kea:Oe[0],kk:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1);return t?6==r||9==r||i&&0==r&&0!=e?"many":"other":1==e?"one":"other"},kkj:Oe[1],kl:Oe[1],km:Oe[0],kn:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ko:Oe[0],ks:Oe[1],ksb:Oe[1],ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:Oe[1],kw:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},ky:Oe[1],lag:function(e,t){var n=String(e).split(".")[0];return t?"other":0==e?"zero":0!=n&&1!=n||0==e?"other":"one"},lb:Oe[1],lg:Oe[1],lkt:Oe[0],ln:Oe[2],lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var n=String(e).split("."),i=n[1]||"",r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?"other":1==a&&(s<11||s>19)?"one":a>=2&&a<=9&&(s<11||s>19)?"few":0!=i?"many":"other"},lv:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),l=i.slice(-2),c=i.slice(-1);return t?"other":a&&0==s||o>=11&&o<=19||2==r&&l>=11&&l<=19?"zero":1==s&&11!=o||2==r&&1==c&&11!=l||2!=r&&1==c?"one":"other"},mas:Oe[1],mg:Oe[2],mgo:Oe[1],mk:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),l=r.slice(-1);return t?1==s&&11!=o?"one":2==s&&12!=o?"two":7!=s&&8!=s||17==o||18==o?"other":"many":a&&1==s||1==l?"one":"other"},ml:Oe[1],mn:Oe[1],mo:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||1!=e&&r>=1&&r<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":e>=0&&e<=1?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":1==e?"one":0==e||i>=2&&i<=10?"few":i>=11&&i<=19?"many":"other"},my:Oe[0],nah:Oe[1],naq:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},nb:Oe[1],nd:Oe[1],ne:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?i&&e>=1&&e<=4?"one":"other":1==e?"one":"other"},nl:Oe[3],nn:Oe[1],nnh:Oe[1],no:Oe[1],nqo:Oe[0],nr:Oe[1],nso:Oe[2],ny:Oe[1],nyn:Oe[1],om:Oe[1],or:Oe[1],os:Oe[1],pa:Oe[2],pap:Oe[1],pl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":1==e&&r?"one":r&&a>=2&&a<=4&&(s<12||s>14)?"few":r&&1!=i&&(0==a||1==a)||r&&a>=5&&a<=9||r&&s>=12&&s<=14?"many":"other"},prg:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),l=i.slice(-2),c=i.slice(-1);return t?"other":a&&0==s||o>=11&&o<=19||2==r&&l>=11&&l<=19?"zero":1==s&&11!=o||2==r&&1==c&&11!=l||2!=r&&1==c?"one":"other"},ps:Oe[1],pt:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":i&&e>=0&&e<=2&&2!=e?"one":"other"},"pt-PT":Oe[3],rm:Oe[1],ro:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||1!=e&&r>=1&&r<=19?"few":"other"},rof:Oe[1],root:Oe[0],ru:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-1),s=i.slice(-2);return t?"other":r&&1==a&&11!=s?"one":r&&a>=2&&a<=4&&(s<12||s>14)?"few":r&&0==a||r&&a>=5&&a<=9||r&&s>=11&&s<=14?"many":"other"},rwk:Oe[1],sah:Oe[0],saq:Oe[1],sdh:Oe[1],se:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},seh:Oe[1],ses:Oe[0],sg:Oe[0],sh:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==l&&11!=c?"one":a&&s>=2&&s<=4&&(o<12||o>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},shi:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":e>=0&&e<=1?"one":i&&e>=2&&e<=10?"few":"other"},si:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"";return t?"other":0==e||1==e||0==i&&1==r?"one":"other"},sk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},sl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=i.slice(-2);return t?"other":r&&1==a?"one":r&&2==a?"two":r&&(3==a||4==a)||!r?"few":"other"},sma:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smi:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smj:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smn:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sms:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sn:Oe[1],so:Oe[1],sq:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==e?"one":4==r&&14!=a?"many":"other":1==e?"one":"other"},sr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":a&&1==s&&11!=o||1==l&&11!=c?"one":a&&s>=2&&s<=4&&(o<12||o>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},ss:Oe[1],ssy:Oe[1],st:Oe[1],sv:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,a=r&&n[0].slice(-1),s=r&&n[0].slice(-2);return t?1!=a&&2!=a||11==s||12==s?"other":"one":1==e&&i?"one":"other"},sw:Oe[3],syr:Oe[1],ta:Oe[1],te:Oe[1],teo:Oe[1],th:Oe[0],ti:Oe[2],tig:Oe[1],tk:Oe[1],tl:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",a=!n[1],s=i.slice(-1),o=r.slice(-1);return t?1==e?"one":"other":a&&(1==i||2==i||3==i)||a&&4!=s&&6!=s&&9!=s||!a&&4!=o&&6!=o&&9!=o?"one":"other"},tn:Oe[1],to:Oe[0],tr:Oe[1],ts:Oe[1],tzm:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":0==e||1==e||i&&e>=11&&e<=99?"one":"other"},ug:Oe[1],uk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],a=Number(n[0])==e,s=a&&n[0].slice(-1),o=a&&n[0].slice(-2),l=i.slice(-1),c=i.slice(-2);return t?3==s&&13!=o?"few":"other":r&&1==l&&11!=c?"one":r&&l>=2&&l<=4&&(c<12||c>14)?"few":r&&0==l||r&&l>=5&&l<=9||r&&c>=11&&c<=14?"many":"other"},ur:Oe[3],uz:Oe[1],ve:Oe[1],vi:function(e,t){return t&&1==e?"one":"other"},vo:Oe[1],vun:Oe[1],wa:Oe[2],wae:Oe[1],wo:Oe[0],xh:Oe[1],xog:Oe[1],yi:Oe[3],yo:Oe[0],yue:Oe[0],zh:Oe[0],zu:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"}};function Me(){var e=arguments[0],t=arguments[1];return this&&this!==K?De(E(this),e,t):new K.PluralRules(e,t)}function De(e,t,n){var i=O(e);if(!0===i["[[InitializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");d(e,"__getInternalProperties",{value:function(){if(arguments[0]===w)return i}}),i["[[InitializedIntlObject]]"]=!0;var r=B(t),a=$(n=void 0===n?{}:E(n),"type","string",new S("cardinal","ordinal"),"cardinal");i["[[type]]"]=a;var s=new I,o=$(n,"localeMatcher","string",new S("lookup","best fit"),"best fit");s["[[localeMatcher]]"]=o,Y(y,n,0),void 0===y["[[maximumFractionDigits]]"]&&(y["[[maximumFractionDigits]]"]=Math.max(y["[[minimumFractionDigits]]"],3));var l=y.PluralRules["[[localeData]]"],c=G(y.PluralRules["[[availableLocales]]"],r,s,y.PluralRules["[[relevantExtensionKeys]]"],l);return i["[[locale]]"]=c["[[locale]]"],i["[[InitializedPluralRules]]"]=!0,e}if(d(K,"PluralRules",{configurable:!0,writable:!0,value:Me}),d(Me,"prototype",{writable:!1}),y.PluralRules={"[[availableLocales]]":Object.keys(Te),"[[relevantExtensionKeys]]":[],"[[localeData]]":{}},d(K.PluralRules,"supportedLocalesOf",{configurable:!0,writable:!0,value:b.call((function(e){if(!u.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=C(),n=arguments[1],i=this["[[availableLocales]]"],r=B(e);return t(),W(i,r,n)}),y.PluralRules)}),d(K.PluralRules.prototype,"select",{configurable:!0,value:function(e){return function(e,t){if(!Number.isFinite(t))return"other";var n=O(e);return function(e,t,n){for(var i=e;i;i=i.replace(/[-_]?[^-_]*$/,"")){var r=Te[i];if(r)return r(n,"ordinal"===t)}return"other"}(n["[[locale]]"],n["[[type]]"],t)}(this,Number(e))}}),d(K.PluralRules.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,t=new I,n=["locale","type","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],i=null!==this&&"object"===o.typeof(this)&&O(this);if(!i||!i["[[InitializedPluralRules]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.PluralRules object.");for(var r=0,a=n.length;r<a;r++)u.call(i,e="[["+n[r]+"]]")&&(t[n[r]]={value:i[e],writable:!0,configurable:!0,enumerable:!0});return p({},t)}}),d(K,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){for(var e in d(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Ae.Number.toLocaleString}),d(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Ae.Date.toLocaleString}),Ae.Date)u.call(Ae.Date,e)&&d(Date.prototype,e,{writable:!0,configurable:!0,value:Ae.Date[e]})}}),d(K,"__addLocaleData",{value:function(e){if(!N(e.locale))throw new Error('Invalid language tag "'+e.locale+'" when calling __addLocaleData("'+e.locale+'", ...) to register new locale data.');!function(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n=void 0,i=[t],r=t.split("-");for(r.length>2&&4===r[1].length&&m.call(i,r[0]+"-"+r[2]);n=v.call(i);)m.call(y.NumberFormat["[[availableLocales]]"],n),y.NumberFormat["[[localeData]]"][n]=e.number,e.date&&(e.date.nu=e.number.nu,m.call(y.DateTimeFormat["[[availableLocales]]"],n),y.DateTimeFormat["[[localeData]]"][n]=e.date);void 0===L&&function(e){L=e}(t)}(e,e.locale)}}),d(K,"__disableRegExpRestore",{value:function(){y.disableRegExpRestore=!0}}),"undefined"===typeof Intl)try{window.Intl=K,K.__applyLocaleSensitivePrototypes()}catch(Pe){}return K}))}).call(this,n(172))},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"Pool",(function(){return f})),n.d(t,"ArrayPool",(function(){return v})),n.d(t,"ObjectPool",(function(){return b})),n.d(t,"MapPool",(function(){return y})),n.d(t,"SetPool",(function(){return w})),n.d(t,"ImagePool",(function(){return I})),n.d(t,"CanvasPool",(function(){return S})),n.d(t,"DivPool",(function(){return C})),n.d(t,"arrayPool",(function(){return E})),n.d(t,"objectPool",(function(){return A})),n.d(t,"mapPool",(function(){return O})),n.d(t,"setPool",(function(){return T})),n.d(t,"imagePool",(function(){return M})),n.d(t,"canvasPool",(function(){return D})),n.d(t,"divPool",(function(){return P}));var i=n(263),r=n(40),a=n(15),s=n(316),o=n(13),l=n(55),c=n(466),u=function(e,t){this.instance=e,this.ownerPool=t};Object.assign(u.prototype=Object.create(null),{instance:void 0,ownerPool:void 0,isDisposed:!0,isSlatedForAutodispose:!1,_retainCount:0,retain:function(){this._retainCount++},release:function(){0===--this._retainCount&&this.ownerPool.disposeInstance(this.instance)},autorelease:function(){i.b(this)},toString:function(){return"[InstanceInfo]"}});var d=new WeakMap,h={retainInstance:function(e){d.get(e).retain()},releaseInstance:function(e){d.get(e).release()},autoreleaseInstance:function(e){d.get(e).autorelease()},getInstanceInfo:function(e){return d.get(e)}},p=Object.assign({staticMembers:Object.assign({},h)},h),f=r.a.extend(p,{_desiredClass:void 0,_isDesiredClassCWClass:void 0,_pool:void 0,activeInstanceCount:a.d({readOnly:!0,get:function(){return this._activeInstanceCount}}),_activeInstanceCount:0,pooledInstanceCount:a.d({readOnly:!0,get:function(){return this._pool.length}}),init:function(e){this._pool=[],this.__s._$1Cw$init.call(this),this._desiredClass=e,this._isDesiredClassCWClass=s.a(e)},getInstance:function(){var e,t=this._pool.pop();return t?e=d.get(t):(t=this.createInstance(),e=new u(t,this),d.set(t,e)),e.isDisposed=!1,this._activeInstanceCount++,t},getAutodisposingInstance:function(){var e=this.getInstance();return this.autodisposeInstance(e),e},autodisposeInstance:function(e){var t=d.get(e);t.isSlatedForAutodispose||(t.isSlatedForAutodispose=!0,g.push(e),m||(m=Object(c.b)(_)))},createInstance:function(){return this._isDesiredClassCWClass?this._desiredClass.create():new this._desiredClass},disposeInstance:function(e){var t=d.get(e);t._retainCount&&o.b("Manually disposing ref-counted instance to pool: "+this),t.isSlatedForAutodispose&&o.b("Manually disposing auto-disposing instance to pool: "+this),t.isDisposed&&o.b("Over-disposing to pool: "+this),t.isDisposed=!0,this._activeInstanceCount--,this._pool.push(e)},__superMap:{_$1Cw$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Pool"}}),g=[],m=null,_=function(){for(var e=g.length;e--;){var t=g[e],n=d.get(t),i=n.ownerPool;n.isSlatedForAutodispose=!1,i.disposeInstance(t)}g.length=0,m=null},v=f.extend({createInstance:function(){return[]},getInstance:function(){var e=this,t=arguments,n=e.__s._$2Qb$getInstance.apply(e,t);return n.length&&o.b("ArrayPool#getInstance is returning an array of length > 0. This indicates usage of a disposed instance."),n},disposeInstance:function(e){var t=this,n=arguments;t.__s._$2Uy$disposeInstance.apply(t,n),e.length=0},getInstanceFromSlice:function(e,t,n){var i=e.length,r=void 0===t?0:t,a=void 0===n?i:n;r<0&&(r=Math.max(i+r,0)),a<0&&(a=Math.max(i+a,0));for(var s=this.getInstance(),o=r;o<a&&o<i;o++)s.push(e[o]);return s},getAutodisposingInstanceFromSlice:function(){var e=this.getInstanceFromSlice.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromParams:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t++)e[t]=arguments[t];return e},getAutodisposingInstanceFromParams:function(){var e=this.getInstanceFromParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromMap:function(e,t,n){for(var i=this.getInstance(),r=0,a=e.length;r<a;r++)i.push(t.call(n,e[r],r));return i},getAutodisposingInstanceFromMap:function(){var e=this.getInstanceFromMap.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromFilter:function(e,t,n){for(var i=this.getInstance(),r=0,a=e.length;r<a;r++){var s=e[r];t.call(n,s,r)&&i.push(s)}return i},getAutodisposingInstanceFromFilter:function(){var e=this.getInstanceFromFilter.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromUniquesOfParams:function(){for(var e=this.getInstance(),t=T.getInstance(),n=0,i=0,r=arguments.length;n<r;n++){var a=arguments[n];t.has(a)||(t.add(a),e[i++]=a)}return T.disposeInstance(t),e},getAutodisposingInstanceFromUniquesOfParams:function(){var e=this.getInstanceFromUniquesOfParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromUniquesOfArray:function(e){return this.getInstanceFromUniquesOfParams.apply(this,e)},getAutodisposingInstanceFromUniquesOfArray:function(){var e=this.getInstanceFromUniquesOfArray.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$2Qb$getInstance:"getInstance",_$2Uy$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ArrayPool"}}),b=f.extend({createInstance:function(){return{}},disposeInstance:function(e){var t=this,n=arguments;for(var i in t.__s._$3MA$disposeInstance.apply(t,n),e)e.hasOwnProperty(i)&&delete e[i]},getInstanceWithProperties:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t+=2)e[arguments[t]]=arguments[t+1];return e},getAutodisposingInstanceWithProperties:function(){var e=this.getInstanceWithProperties.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromObject:function(e){var t=this.getInstance(),n=arguments.length,i="object"===typeof arguments[1];if(i||n>2)for(var r=i?0:1,a=i?arguments[1]:arguments,s=r,o=a.length;s<o;s++){var l=a[s];t[l]=e[l]}else for(var c in e)e.hasOwnProperty(c)&&(t[c]=e[c]);return t},getAutodisposingInstanceFromObject:function(){var e=this.getInstanceFromObject.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$3MA$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObjectPool"}}),y=f.extend({createInstance:function(){return new Map},disposeInstance:function(e){var t=this,n=arguments;t.__s._$3oA$disposeInstance.apply(t,n),e.clear()},__superMap:{_$3oA$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapPool"}}),w=f.extend({createInstance:function(){return new Set},disposeInstance:function(e){var t=this,n=arguments;t.__s._$3sL$disposeInstance.apply(t,n),e.clear()},getInstanceFromParams:function(){for(var e=this.getInstance(),t=0,n=arguments.length;t<n;t++)e.add(arguments[t]);return e},getAutodisposingInstanceFromParams:function(){var e=this.getInstanceFromParams.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromArray:function(e){return this.getInstanceFromParams.apply(this,e)},getAutodisposingInstanceFromArray:function(){var e=this.getInstanceFromArray.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$3sL$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SetPool"}}),I=f.extend({createInstance:function(){return new Image},disposeInstance:function(e){var t=this,n=arguments;t.__s._$45f$disposeInstance.apply(t,n),e.removeAttribute("src");var i=e.parentNode;i&&i.removeChild(e)},__superMap:{_$45f$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImagePool"}}),S=f.extend({canvasMemoryReductionTasks:l.c(Array),createInstance:function(){return document.createElement("canvas")},getInstance:function(){for(var e=this,t=arguments,n=0;n<10;n++){var i=e.__s._$4Q2$getInstance.apply(e,t);if(i.getContext("2d"))return i;this._pool.length=0,this.canvasMemoryReductionTasks.forEach((function(e){return e()}))}throw new Error("Browser declines to allocate additional canvas memory.")},disposeInstance:function(e){var t=this,n=arguments;t.__s._$4cD$disposeInstance.apply(t,n),e.width=e.height=0;var i=e.parentNode;i&&i.removeChild(e)},getInstanceAtSize:function(e,t){var n=this.getInstance();return n.width=e,n.height=t,n},getAutodisposingInstanceAtSize:function(){var e=this.getInstanceAtSize.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromImage:function(e,t,n){var i,r,a=2===arguments.length?t:void 0;a?(i=Math.round(a*(e.naturalWidth||e.width)),r=Math.round(a*(e.naturalHeight||e.height))):(i=t||e.naturalWidth||e.width,r=n||e.naturalHeight||e.height);var s=this.getInstanceAtSize(i,r);return s.getContext("2d").drawImage(e,0,0,i,r),s},getAutodisposingInstanceFromImage:function(){var e=this.getInstanceFromImage.apply(this,arguments);return this.autodisposeInstance(e),e},getInstanceFromRotatedImage:function(e,t){var n=this.getInstance(),i=n.getContext("2d"),r=7===t||8===t?270:3===t||4===t?180:5===t||6===t?90:0,a=e.naturalWidth||e.width,s=e.naturalHeight||e.height,o=r%180===0?a:s,l=r%180===0?s:a,c=2===t||4===t?-1:1,u=5===t||7===t?-1:1;n.width=o,n.height=l;for(var d=0;d<r;d+=90)i.translate(d%180?l:o,0),i.rotate(Math.PI/2);return i.scale(c,u),i.translate((c-1)/2*a,(u-1)/2*s),i.drawImage(e,0,0),n},getAutodisposingInstanceFromRotatedImage:function(){var e=this.getInstanceFromRotatedImage.apply(this,arguments);return this.autodisposeInstance(e),e},__superMap:{_$4Q2$getInstance:"getInstance",_$4cD$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CanvasPool"}}),C=f.extend({createInstance:function(){return document.createElement("div")},disposeInstance:function(e){var t=this,n=arguments;t.__s._$5VK$disposeInstance.apply(t,n),e.style.cssText&&(e.style.cssText=""),e.className&&(e.className="");var i=e.parentNode;i&&i.removeChild(e)},__superMap:{_$5VK$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DivPool"}}),E=v.create(),A=b.create(),O=y.create(),T=w.create(),M=I.create(),D=S.create(),P=C.create()},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var i=n(515);i.create=n(1108),e.exports={Player:i,VERSION:n(651)}},function(e,t,n){},function(e,t,n){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e){var t="function"===typeof Map?new Map:void 0;return(r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return a(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,e)})(e)}function a(e,t,n){return(a=s()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d;d=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/rtc_reporting/reporting_agent.ts")}({"./node_modules/process/browser.js":function(e,t){var n,i,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/semver/semver.js":function(e,t,n){(function(n){var i;t=e.exports=K,i="object"===typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],s=t.src=[],o=0,l=o++;s[l]="0|[1-9]\\d*";var c=o++;s[c]="[0-9]+";var u=o++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=o++;s[d]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var h=o++;s[h]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=o++;s[p]="(?:"+s[l]+"|"+s[u]+")";var f=o++;s[f]="(?:"+s[c]+"|"+s[u]+")";var g=o++;s[g]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var m=o++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var _=o++;s[_]="[0-9A-Za-z-]+";var v=o++;s[v]="(?:\\+("+s[_]+"(?:\\."+s[_]+")*))";var b=o++,y="v?"+s[d]+s[g]+"?"+s[v]+"?";s[b]="^"+y+"$";var w="[v=\\s]*"+s[h]+s[m]+"?"+s[v]+"?",I=o++;s[I]="^"+w+"$";var S=o++;s[S]="((?:<|>)?=?)";var C=o++;s[C]=s[c]+"|x|X|\\*";var E=o++;s[E]=s[l]+"|x|X|\\*";var A=o++;s[A]="[v=\\s]*("+s[E]+")(?:\\.("+s[E]+")(?:\\.("+s[E]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var O=o++;s[O]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var T=o++;s[T]="^"+s[S]+"\\s*"+s[A]+"$";var M=o++;s[M]="^"+s[S]+"\\s*"+s[O]+"$";var D=o++;s[D]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var P=o++;s[P]="(?:~>?)";var L=o++;s[L]="(\\s*)"+s[P]+"\\s+",a[L]=new RegExp(s[L],"g");var R=o++;s[R]="^"+s[P]+s[A]+"$";var x=o++;s[x]="^"+s[P]+s[O]+"$";var N=o++;s[N]="(?:\\^)";var F=o++;s[F]="(\\s*)"+s[N]+"\\s+",a[F]=new RegExp(s[F],"g");var V=o++;s[V]="^"+s[N]+s[A]+"$";var k=o++;s[k]="^"+s[N]+s[O]+"$";var B=o++;s[B]="^"+s[S]+"\\s*("+w+")$|^$";var j=o++;s[j]="^"+s[S]+"\\s*("+y+")$|^$";var U=o++;s[U]="(\\s*)"+s[S]+"\\s*("+w+"|"+s[A]+")",a[U]=new RegExp(s[U],"g");var G=o++;s[G]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var H=o++;s[H]="^\\s*("+s[O]+")\\s+-\\s+("+s[O]+")\\s*$";var W=o++;s[W]="(<|>)?=?\\s*\\*";for(var $=0;$<35;$++)i($,s[$]),a[$]||(a[$]=new RegExp(s[$]));function z(e,t){if(e instanceof K)return e;if("string"!==typeof e)return null;if(e.length>256)return null;if(!(t?a[I]:a[b]).test(e))return null;try{return new K(e,t)}catch(n){return null}}function K(e,t){if(e instanceof K){if(e.loose===t)return e;e=e.version}else if("string"!==typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof K))return new K(e,t);i("SemVer",e,t),this.loose=t;var n=e.trim().match(t?a[I]:a[b]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=z,t.valid=function(e,t){var n=z(e,t);return n?n.version:null},t.clean=function(e,t){var n=z(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return i("SemVer.compare",this.version,this.loose,e),e instanceof K||(e=new K(e,this.loose)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.loose)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Q(n,r)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,i){"string"===typeof n&&(i=n,n=void 0);try{return new K(e,n).inc(t,i).version}catch(r){return null}},t.diff=function(e,t){if(J(e,t))return null;var n=z(e),i=z(t);if(n.prerelease.length||i.prerelease.length){for(var r in n)if(("major"===r||"minor"===r||"patch"===r)&&n[r]!==i[r])return"pre"+r;return"prerelease"}for(var r in n)if(("major"===r||"minor"===r||"patch"===r)&&n[r]!==i[r])return r},t.compareIdentifiers=Q;var q=/^[0-9]+$/;function Q(e,t){var n=q.test(e),i=q.test(t);return n&&i&&(e=+e,t=+t),n&&!i?-1:i&&!n?1:e<t?-1:e>t?1:0}function Y(e,t,n){return new K(e,n).compare(new K(t,n))}function Z(e,t,n){return Y(e,t,n)>0}function X(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function ee(e,t,n){return 0!==Y(e,t,n)}function te(e,t,n){return Y(e,t,n)>=0}function ne(e,t,n){return Y(e,t,n)<=0}function ie(e,t,n,i){var r;switch(t){case"===":"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),r=e===n;break;case"!==":"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),r=e!==n;break;case"":case"=":case"==":r=J(e,n,i);break;case"!=":r=ee(e,n,i);break;case">":r=Z(e,n,i);break;case">=":r=te(e,n,i);break;case"<":r=X(e,n,i);break;case"<=":r=ne(e,n,i);break;default:throw new TypeError("Invalid operator: "+t)}return r}function re(e,t){if(e instanceof re){if(e.loose===t)return e;e=e.value}if(!(this instanceof re))return new re(e,t);i("comparator",e,t),this.loose=t,this.parse(e),this.semver===ae?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}t.rcompareIdentifiers=function(e,t){return Q(t,e)},t.major=function(e,t){return new K(e,t).major},t.minor=function(e,t){return new K(e,t).minor},t.patch=function(e,t){return new K(e,t).patch},t.compare=Y,t.compareLoose=function(e,t){return Y(e,t,!0)},t.rcompare=function(e,t,n){return Y(t,e,n)},t.sort=function(e,n){return e.sort((function(e,i){return t.compare(e,i,n)}))},t.rsort=function(e,n){return e.sort((function(e,i){return t.rcompare(e,i,n)}))},t.gt=Z,t.lt=X,t.eq=J,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=ie,t.Comparator=re;var ae={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof re)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,n,i,r,a,s,o,l,c,u,d,h){return((t=oe(n)?"":oe(i)?">="+n+".0.0":oe(r)?">="+n+"."+i+".0":">="+t)+" "+(o=oe(l)?"":oe(c)?"<"+(+l+1)+".0.0":oe(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+o)).trim()}function ce(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++)if(i(e[n].semver),e[n].semver!==ae&&e[n].semver.prerelease.length>0){var r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new se(t,n)}catch(i){return!1}return t.test(e)}function de(e,t,n,i){var r,a,s,o,l;switch(e=new K(e,i),t=new se(t,i),n){case">":r=Z,a=ne,s=X,o=">",l=">=";break;case"<":r=X,a=te,s=Z,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,i))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,h=null;if(u.forEach((function(e){e.semver===ae&&(e=new re(">=0.0.0")),d=d||e,h=h||e,r(e.semver,d.semver,i)?d=e:s(e.semver,h.semver,i)&&(h=e)})),d.operator===o||d.operator===l)return!1;if((!h.operator||h.operator===o)&&a(e,h.semver))return!1;if(h.operator===l&&s(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.loose?a[B]:a[j],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new K(n[2],this.loose):this.semver=ae},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return i("Comparator.test",e,this.loose),this.semver===ae||("string"===typeof e&&(e=new K(e,this.loose)),ie(e,this.operator,this.semver,this.loose))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new se(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),ue(e.semver,n,t);var i=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),a=this.semver.version===e.semver.version,s=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),o=ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||r||a&&s||o||l},t.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),i("range",e,t);var n=t?a[H]:a[G];e=e.replace(n,le),i("hyphen replace",e),e=e.replace(a[U],"$1$2$3"),i("comparator trim",e,a[U]),e=(e=(e=e.replace(a[L],"$1~")).replace(a[F],"$1^")).split(/\s+/).join(" ");var r=t?a[B]:a[j],s=e.split(" ").map((function(e){return function(e,t){return i("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t?a[k]:a[V];return e.replace(n,(function(t,n,r,a,s){var o;return i("caret",e,t,n,r,a,s),oe(n)?o="":oe(r)?o=">="+n+".0.0 <"+(+n+1)+".0.0":oe(a)?o="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":s?(i("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),o="0"===n?"0"===r?">="+n+"."+r+"."+a+s+" <"+n+"."+r+"."+(+a+1):">="+n+"."+r+"."+a+s+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+a+s+" <"+(+n+1)+".0.0"):(i("no pr"),o="0"===n?"0"===r?">="+n+"."+r+"."+a+" <"+n+"."+r+"."+(+a+1):">="+n+"."+r+"."+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+a+" <"+(+n+1)+".0.0"),i("caret return",o),o}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t?a[x]:a[R];return e.replace(n,(function(t,n,r,a,s){var o;return i("tilde",e,t,n,r,a,s),oe(n)?o="":oe(r)?o=">="+n+".0.0 <"+(+n+1)+".0.0":oe(a)?o=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":s?(i("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),o=">="+n+"."+r+"."+a+s+" <"+n+"."+(+r+1)+".0"):o=">="+n+"."+r+"."+a+" <"+n+"."+(+r+1)+".0",i("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t?a[M]:a[T];return e.replace(n,(function(t,n,r,a,s,o){i("xRange",e,t,n,r,a,s,o);var l=oe(r),c=l||oe(a),u=c||oe(s);return"="===n&&u&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(c&&(a=0),u&&(s=0),">"===n?(n=">=",c?(r=+r+1,a=0,s=0):u&&(a=+a+1,s=0)):"<="===n&&(n="<",c?r=+r+1:a=+a+1),t=n+r+"."+a+"."+s):c?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+a+".0 <"+r+"."+(+a+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(a[W],"")}(e,t),i("stars",e),e}(e,t)})).join(" ").split(/\s+/);return this.loose&&(s=s.filter((function(e){return!!e.match(r)}))),s.map((function(e){return new re(e,t)}))},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"===typeof e&&(e=new K(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var i=null,r=null;try{var a=new se(t,n)}catch(s){return null}return e.forEach((function(e){a.test(e)&&(i&&-1!==r.compare(e)||(r=new K(i=e,n)))})),i},t.minSatisfying=function(e,t,n){var i=null,r=null;try{var a=new se(t,n)}catch(s){return null}return e.forEach((function(e){a.test(e)&&(i&&1!==r.compare(e)||(r=new K(i=e,n)))})),i},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(n){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=z(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof K)return e;if("string"!==typeof e)return null;var t=e.match(a[D]);return null==t?null:z((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/webpack/buildin/harmony-module.js":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"./src/rtc_reporting/reporting_agent.ts":function(e,t,n){"use strict";n.r(t);var i=n("./src/rtc_reporting/reporting_reporter.ts"),r=n("./src/rtc_reporting/reporting_event.ts"),a=n("./src/rtc_reporting/reporting_storebag.ts"),s=n("./src/rtc_reporting/reporting_config.ts"),o=a.RTCReportingStoreBag,l=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._objectNotToDestroy=e,this._objectToDestroy=null}var t=e.prototype;return t.addInstantiatedObject=function(e){this._objectNotToDestroy=this._objectToDestroy=e},t.destroy=function(){this._objectToDestroy&&this._objectToDestroy.destroy(),this._objectNotToDestroy=this._objectNotToDestroy=null},u(e,[{key:"instance",get:function(){return this._objectNotToDestroy}}]),e}(),c=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._sessionInfo={},this._reportingDisabled=!1,this.storebag=new l,this.reporter=null,this.reportingVersion="1",this.fuzzFactor=0,this.sessionStartTime=0,this._initializeReportingAgent(e)}var t=e.prototype;return t.destroy=function(){this.endSession()},t.issueReportingEvent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.RTCReportingAgentEventTypes.BatchEvent,i=null;if(this.ReportingAllowed&&this.reporter){var a=new r.RTCReportingEvent(e,s.RTCReportingSessionEventStatus.EventStatusSessionBegin,t,this._FuzzFactor,n);i=this.reporter.issueReportingEvent(a,this._sessionInfo)}else i=new s.RTCReportingError("Reporting not allowed.");return i},t.endSession=function(){this.ReportingAllowed&&this.reporter&&(this._issueSessionEndEvent(),this.reporter.flushAllEvents()),this._sessionInfo=null,this.reporter=null,this.storebag.destroy(),this.storebag=null},t._initializeReportingAgent=function(t){var n=this,r=null,a=null,c="",u=null,d=null,h=null,p=null,f=!1,g=(new Date).getTime(),m=null,_=null,v=null,b=null,y=null,w=null,I=null,S=null;this._sessionInfo||(this._sessionInfo={}),t&&(s.RTCReportingAgentConfigKeys.ClientName in t&&(r=t[s.RTCReportingAgentConfigKeys.ClientName]),s.RTCReportingAgentConfigKeys.ServiceName in t&&(a=t[s.RTCReportingAgentConfigKeys.ServiceName]),s.RTCReportingAgentConfigKeys.ApplicationName in t&&(c=t[s.RTCReportingAgentConfigKeys.ApplicationName]),s.RTCReportingAgentConfigKeys.Sender in t&&(u=t[s.RTCReportingAgentConfigKeys.Sender]),s.RTCReportingEventMetadataKeys.OSVersion in t&&(h=t[s.RTCReportingEventMetadataKeys.OSVersion]),s.RTCReportingAgentConfigKeys.StorebagURL in t&&(p=t[s.RTCReportingAgentConfigKeys.StorebagURL]),s.RTCReportingAgentConfigKeys.DeviceName in t&&(d=t[s.RTCReportingAgentConfigKeys.DeviceName]),s.RTCReportingAgentConfigKeys.ReportingDisabled in t&&(f=t[s.RTCReportingAgentConfigKeys.ReportingDisabled]),s.RTCReportingAgentConfigKeys.HLSEventEmitter in t&&(m=t[s.RTCReportingAgentConfigKeys.HLSEventEmitter]),s.RTCReportingEventMetadataKeys.SessionID in t&&(_=t[s.RTCReportingEventMetadataKeys.SessionID]),s.RTCReportingAgentConfigKeys.UserInfoDict in t&&(v=t[s.RTCReportingAgentConfigKeys.UserInfoDict])&&s.RTCReportingAgentConfigKeys.SenderAltConfig in v&&(I=v[s.RTCReportingAgentConfigKeys.SenderAltConfig],delete v[s.RTCReportingAgentConfigKeys.SenderAltConfig],I&&(s.RTCReportingAgentConfigKeys.ServiceIdentifier in I&&(w=I[s.RTCReportingAgentConfigKeys.ServiceIdentifier]),Object.keys(I)&&Object.assign(v,I))),s.RTCReportingEventMetadataKeys.SenderOSVersion in t&&(b=t[s.RTCReportingEventMetadataKeys.SenderOSVersion]),s.RTCReportingAgentConfigKeys.ReportingStoreBag in t&&(y=t[s.RTCReportingAgentConfigKeys.ReportingStoreBag]),s.RTCReportingAgentConfigKeys.UseHTTPHeaders in t&&(S=t[s.RTCReportingAgentConfigKeys.UseHTTPHeaders])),_||(_=e._createSessionID()),this._sessionInfo[s.RTCReportingAgentConfigKeys.ClientName]=r,this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]=a,this._sessionInfo[s.RTCReportingAgentConfigKeys.ApplicationName]=c,this._sessionInfo[s.RTCReportingAgentConfigKeys.DeviceName]=d,this._sessionInfo[s.RTCReportingAgentConfigKeys.OSVersion]=h,this._sessionInfo[s.RTCReportingEventMetadataKeys.Sender]=u,this._sessionInfo[s.RTCReportingEventMetadataKeys.RTCSchemeVersion]=this.reportingVersion,this._sessionInfo[s.RTCReportingEventMetadataKeys.RTCReportingVersion]=e.version,this._reportingDisabled=f,this._sessionInfo[s.RTCReportingEventMetadataKeys.SessionID]=_,this._sessionInfo[s.RTCReportingEventMetadataKeys.SenderOSVersion]=b,c&&a&&(a=a+"."+c),w&&a&&(a=a+"."+w),this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]=a,this.fuzzFactor=g-6e4*Math.floor(g/6e4),this.sessionStartTime=g-this.fuzzFactor,Object.keys(this._sessionInfo).forEach((function(e){return null==n._sessionInfo[e]&&delete n._sessionInfo[e]})),v&&Object.keys(v)&&Object.assign(this._sessionInfo,v),this._reportingDisabled||(y?this.storebag=new l(y):this.storebag.addInstantiatedObject(new o(p,r,a,c,d,h)),this.reporter=new i.RTCReporter(r,a,u,this.storebag.instance,this.reportingVersion,m,c,w,S,_),console.log(s.RTCReportingAgentDefaultConfig.LogMsgPrefix+"Created reporting agent using rtc.js version "+e.version),this._issueSessionBeginEvent())},t._issueSessionBeginEvent=function(){var e=new r.RTCReportingEvent(s.RTCReportingAgentMethods.ReportingSessionMethod,s.RTCReportingSessionEventStatus.EventStatusSessionBegin,null,this._FuzzFactor,s.RTCReportingAgentEventTypes.BatchEvent);this.reporter&&e&&this.reporter.issueReportingEvent(e,this.SessionInfo)},t._issueSessionEndEvent=function(){var e=new r.RTCReportingEvent(s.RTCReportingAgentMethods.ReportingSessionMethod,s.RTCReportingSessionEventStatus.EventStatusSessionEnd,null,this._FuzzFactor,s.RTCReportingAgentEventTypes.RealTimeEvent);this.reporter&&this.reporter.issueReportingEvent(e,this.SessionInfo)},e._createSessionID=function(){for(var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=[],a=0;a<256;++a)r[a]=(a<16?"0":"")+a.toString(16);return r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+"-"+r[255&t]+r[t>>8&255]+"-"+r[t>>8&15|64]+r[t>>16&255]+"-"+r[63&n|128]+r[n>>8&255]+"-"+r[n>>8&255]+r[n>>16&255]+r[255&i]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]},u(e,[{key:"ReportingAllowed",get:function(){return!this._reportingDisabled}},{key:"SessionInfo",get:function(){return this._sessionInfo},set:function(e){this._sessionInfo=e}},{key:"SessionID",get:function(){return s.RTCReportingEventMetadataKeys.SessionID in this._sessionInfo?this._sessionInfo[s.RTCReportingEventMetadataKeys.SessionID]:""}},{key:"ClientName",get:function(){return s.RTCReportingAgentConfigKeys.ClientName in this._sessionInfo?this._sessionInfo[s.RTCReportingAgentConfigKeys.ClientName]:""}},{key:"ServiceName",get:function(){return s.RTCReportingAgentConfigKeys.ServiceName in this._sessionInfo?this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]:""}},{key:"_FuzzFactor",get:function(){return this.fuzzFactor}}],[{key:"version",get:function(){return"0.1.36"}}]),e}();t.default={RTCReportingAgent:c,RTCStorebag:a,RTCReportingAgentDefaultConfig:s.RTCReportingAgentDefaultConfig,RTCReportingAgentConfigKeys:s.RTCReportingAgentConfigKeys,RTCReportingAgentEventTypes:s.RTCReportingAgentEventTypes,RTCReportingHTTPHeaderDefault:s.RTCReportingHTTPHeaderDefault,RTCReportingHTTPHeaderKeys:s.RTCReportingHTTPHeaderKeys,RTCReportingEventMetadataKeys:s.RTCReportingEventMetadataKeys,RTC_REPORTING_EVENTS_DISPATCHED:s.RTC_REPORTING_EVENTS_DISPATCHED,RTCObjectRef:l,RTCReportingStoreBagConfig:s.RTCReportingStoreBagConfig}},"./src/rtc_reporting/reporting_config.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingAgentDefaultConfig",(function(){return c})),n.d(t,"RTCReportingAgentConfigKeys",(function(){return u})),n.d(t,"RTCReportingAgentEventTypes",(function(){return d})),n.d(t,"RTCReportingHTTPHeaderKeys",(function(){return a})),n.d(t,"RTCReportingHTTPHeaderDefault",(function(){return s})),n.d(t,"RTCReportingEventMetadataKeys",(function(){return l})),n.d(t,"RTCReportingStoreBagConfig",(function(){return p})),n.d(t,"RTCReportingReporterConfig",(function(){return f})),n.d(t,"RTCReportingAgentMethods",(function(){return h})),n.d(t,"RTCReportingSessionEventStatus",(function(){return g})),n.d(t,"RTCReportingStoreBagKeys",(function(){return m})),n.d(t,"RTCReportingError",(function(){return v})),n.d(t,"RTCReportingBuildTypes",(function(){return _})),n.d(t,"RTC_REPORTING_EVENTS_DISPATCHED",(function(){return b}));var a={ContentType:"ContentType",InternalBuild:"X-RTC-Internal-Build",ClientName:"X-RTC-Client-Name",ServiceName:"X-RTC-Service-Name",ClientVersion:"X-RTC-Client-Version",Sender:"X-RTC-Sender",UserAgent:"User-Agent",SessionID:"X-RTC-Session-ID"},s={ContentTypekey:"application/json;charset=UTF-8"},l={EventID:"_method",EventType:"_eventType",EventNumber:"_eventNumber",EventTime:"eventTime",Sender:"_sender",Status:"_status",ClientTS:"_clientTS",TimeZoneOffset:"_timezoneOffset",PostTime:"postTime",Events:"events",SessionID:"_sessionID",OSVersion:"osVersion",RTCReportingVersion:"_reportVers",StoreBagVersion:"StorebagVersion",RTCSchemeVersion:"_reportScheme",BagSchemeVersion:"StorebagScheme",StoreBagName:"StorebagName",SessionTag:"SessionTag",SenderOSVersion:"SenderOSVersion"},c={RunInlineIfNoWebWorker:!0,BatchEvent:!0,LogMsgPrefix:"[RTC_RA]: "},u={ClientName:"_clientName",ServiceName:"_serviceName",StorebagURL:"storebagURL",ApplicationName:"applicationName",Sender:"sender",DeviceName:"deviceName",OSVersion:"osVersion",ReportingDisabled:"reportingDisabled",HLSEventEmitter:"hlsEventEmitter",BuildType:"internal",UserInfoDict:"userInfoDict",ReportingStoreBag:"reportingStoreBag",SenderAltConfig:"senderAltConfig",ServiceIdentifier:"ServiceIdentifier",UseHTTPHeaders:"UseHTTPHeaders"},d={BatchEvent:0,RealTimeEvent:1},h={ReportingSessionMethod:0},p={StoreBagFetchSyncMode:0,StoreBagFetchAsyncMode:1,StoreBagVersionSupported:1},f={BatchThreshold:50},g={EventStatusSessionBegin:0,EventStatusSessionEnd:1,EventStatusSessionEndWithError:2},m={Version:"Version",Scheme:"Scheme",BagVersion:"BagVersion",Configurations:"Configurations",ConfigurationList:"ConfigurationList",PostURLs:"PostURLs",Filters:"Filters",BagList:"BagList",MinOSVersionDict:"MinOSVersionDict",ClientName:"ClientName",ServiceName:"ServiceName",ServiceNameList:"ServiceNameList",SenderServiceIDList:"SenderServiceIDList",ApplicationNameList:"ApplicationNameList",DeviceList:"DeviceList",Remove:"Remove",EventThreshold:"EventThreshold",SamplingThreshold:"SamplingThreshold",DeviceWhiteList:"DeviceWhiteList",FlushEventsInterval:"FlushEventsInterval"},_={BuildTypePublic:0,BuildTypeInternal:1,BuildTypeSeed:2,BuildTypeInternalSeed:3},v=function(e){var t,n;function r(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,Error.captureStackTrace(i(t),r),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r(Error)),b="rtcReportingEventsDispatched"},"./src/rtc_reporting/reporting_event.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingEvent",(function(){return r}));var i=n("./src/rtc_reporting/reporting_config.ts"),r=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.RTCReportingAgentEventTypes.BatchEvent;this.payload=n||{},this.payload[i.RTCReportingEventMetadataKeys.EventID]=e,this.payload[i.RTCReportingEventMetadataKeys.Status]=t,this.payload[i.RTCReportingEventMetadataKeys.EventType]=a,this.fuzzFactor=r,this.isEventRealTime=a===i.RTCReportingAgentEventTypes.RealTimeEvent,this._addEventMetadata()}var t=e.prototype;return t.prepareEventPayload=function(e,t,n){Object.keys(e).forEach(function(t){this.payload[t]=e[t]}.bind(this)),this.isEventRealTime&&n&&t&&(this.payload.sizeOfLastBatch=n,this.payload.sizeTillLastBatch=t)},t._addEventMetadata=function(){var e=new Date;this.payload[i.RTCReportingEventMetadataKeys.EventTime]=e.getTime()/1e3,this.payload[i.RTCReportingEventMetadataKeys.TimeZoneOffset]=60*e.getTimezoneOffset()},u(e,[{key:"EventPayload",get:function(){return this.payload}},{key:"IsEventRealTime",get:function(){return this.isEventRealTime}}]),e}()},"./src/rtc_reporting/reporting_reporter.ts":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"RTCReporter",(function(){return a}));var i=n("./src/rtc_reporting/reporting_config.ts"),r=function(){function t(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._eventWriter=null,this._sessionID=n,this._eventDispatcher=t,"undefined"!==typeof navigator&&navigator&&"undefined"!==typeof navigator.sendBeacon&&navigator.sendBeacon?this._eventWriter=this._sendEventDataWithHTTPPost:this.module!==e?this._eventWriter=this._sendEventDataWithHTTPHeaders:this._eventWriter=this._sendEventDataWithHTTPPost,i&&(this._eventWriter=this._sendEventDataWithHTTPHeaders)}var n=t.prototype;return n.sendEventData=function(e,t,n,r,a,s){this._eventWriter&&(this._eventWriter(e,t,n,r,a,s),this._eventDispatcher&&this._eventDispatcher.emit(i.RTC_REPORTING_EVENTS_DISPATCHED,t))},n._sendEventDataUsingBeacon=function(e,t,n,i,r,a){var s=this._createEventPayloadAsJSON(n,i,r,a),o=new FormData;o.append("headers",s),o.append("payload",t),navigator.sendBeacon(e,o)},n._sendEventDataWithHTTPPost=function(e,t,n,i,r,a){var s=this._createEventPayloadAsJSON(n,i,r,a),o=new FormData;o.append("headers",s),o.append("payload",t);var l=new XMLHttpRequest;l.open("POST",e,!0),l.send(o)},n._createEventPayloadAsJSON=function(e,t,n,r){var a={};return a[i.RTCReportingHTTPHeaderKeys.InternalBuild]=0,a[i.RTCReportingHTTPHeaderKeys.ClientName]=e,a[i.RTCReportingHTTPHeaderKeys.ServiceName]=t,a[i.RTCReportingHTTPHeaderKeys.ClientVersion]=n,a[i.RTCReportingHTTPHeaderKeys.Sender]=r,a[i.RTCReportingHTTPHeaderKeys.ContentType]="application/json;charset=UTF-8",JSON.stringify(a)},n._sendEventDataWithHTTPHeaders=function(e,t,n,r,a,s){var o=new XMLHttpRequest;o.onload=function(){},o.open("POST",e,!0),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.ContentType,"application/json;charset=UTF-8"),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.InternalBuild,"0"),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.ClientName,n),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.ServiceName,r),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.ClientVersion,a),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.Sender,s),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.ClientVersion,"RTCReportingJS/0.314"),o.setRequestHeader(i.RTCReportingHTTPHeaderKeys.SessionID,this._sessionID),o.send(t)},t}(),a=function(){function e(e,t,n,i,a,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.clientName=e,this.serviceName=t,this.reportingStoreBag=i,this.sender=n,this.clientVersion=a,this.eventList=[],this._count=0,this._eventDispatcher=new r(s,u,c),this.sampleFactor=Math.random(),this._storebagStats={},this._canReport=void 0,this._sizeTillLastBatch=this._sizeOfLastBatch=0,this.storeBag=null,this.applicationName=o,this.senderServiceID=l,this.checkAndConfigureEventFlushTimeoutOnce=!1}var t=e.prototype;return t.issueReportingEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(this._updateEventMetadata(e),e.prepareEventPayload(t,this._sizeTillLastBatch,this._sizeOfLastBatch),this.eventList.push(e),this.checkAndConfigureEventFlushTimeoutOnce||this.canReportEvents()&&this._configureEventFlushTimer(),this.eventList.length>i.RTCReportingReporterConfig.BatchThreshold||e.IsEventRealTime?this.flushAllEvents():null):new i.RTCReportingError("not a valid event to report")},t.canReportEvents=function(){var e;if(void 0!==this._canReport)return this._canReport;if(this.reportingStoreBag&&!this.storeBag&&(this.storeBag=this.reportingStoreBag.createParsedStoreBag(this.applicationName,this.senderServiceID),!this.storeBag))return!1;if(this.storeBag&&this.storeBag.IsValid?(this._canReport=!0,(e=this.storeBag.getStoreBagProperty(i.RTCReportingStoreBagKeys.SamplingThreshold))&&parseFloat(e)<this.sampleFactor&&(this._canReport=!1)):this.storeBag&&console.log("StoreBag for client "+this.clientName+", service "+this.serviceName+", app "+this.applicationName+" senderService "+this.senderServiceID+" not valid "+this.storeBag.IsValid+" "),this._canReport){this._storebagStats[i.RTCReportingStoreBagKeys.SamplingThreshold]=e,this._storebagStats[i.RTCReportingEventMetadataKeys.BagSchemeVersion]=this.storeBag.StoreBagSchemeVersion,this._storebagStats[i.RTCReportingEventMetadataKeys.StoreBagVersion]=this.storeBag.StoreBagVersion,this._storebagStats[i.RTCReportingEventMetadataKeys.StoreBagName]=this.storeBag.StoreBagName;var t=this.storeBag.BagMinVersionDict;if("object"===typeof t&&t)for(var n in t)t.hasOwnProperty(n)&&(this._storebagStats[n]=t[n])}return console.log(i.RTCReportingAgentDefaultConfig.LogMsgPrefix+" Event reporting is "+this._canReport+" for client "+this.clientName+" service "+this.serviceName+", app "+this.applicationName+", senderService "+this.senderServiceID),this._canReport},t.flushEventTimeout=function(){this.flushAllEvents()},t.flushAllEvents=function(){var e=null;return this.canReportEvents()?this._sendAllEvents():e=new i.RTCReportingError("no valid storebag configured or blocked by sampling threshold, ignoring events."),this.eventList=[],e},t.batchedEventsCount=function(){return this.eventList.length},t._updateEventMetadata=function(e){e.EventPayload[i.RTCReportingEventMetadataKeys.EventNumber]=this._eventCounter(),e.EventPayload[i.RTCReportingEventMetadataKeys.ClientTS]=(new Date).getTime()/1e3,e.EventPayload[i.RTCReportingEventMetadataKeys.Sender]=this.sender,e.EventPayload[i.RTCReportingAgentConfigKeys.ClientName]=this.clientName,e.EventPayload[i.RTCReportingAgentConfigKeys.ServiceName]=this.serviceName},t._sendAllEvents=function(){if(0!==this.eventList.length){var e=this.storeBag.listOfSupportedBackEnds(this.clientName,this.serviceName);if(e&&!(e.length<=0)){var t=this.storeBag.listOfKeysToBlock();t&&this.eventList.forEach(function(e){e.prepareEventPayload(this._storebagStats,this._sizeTillLastBatch,this._sizeOfLastBatch),t.forEach((function(t){delete e.EventPayload[t]}))}.bind(this));var n=this._marshallAsJSONString();this._sizeTillLastBatch+=n.length,this._sizeOfLastBatch=n.length,e.forEach(function(e){this._eventDispatcher.sendEventData(e,n,this.clientName,this.serviceName,this.clientVersion,this.sender)}.bind(this)),console.log(i.RTCReportingAgentDefaultConfig.LogMsgPrefix+" events reported.")}}},t._marshallAsJSONString=function(){var e=(new Date).getTime()/1e3,t={},n=[];return this.eventList.forEach((function(e){n.push(e.EventPayload)})),t[i.RTCReportingEventMetadataKeys.PostTime]=e,t[i.RTCReportingEventMetadataKeys.Events]=n,JSON.stringify(t)},t._eventCounter=function(){return this._count++},t._configureEventFlushTimer=function(){var e=null;this.checkAndConfigureEventFlushTimeoutOnce=!0,this.reportingStoreBag&&!this.storeBag&&(this.storeBag=this.reportingStoreBag.createParsedStoreBag(this.applicationName,this.senderServiceID)),this.storeBag&&this.storeBag.IsValid&&(e=this.storeBag.getStoreBagProperty(i.RTCReportingStoreBagKeys.FlushEventsInterval)),e&&(e=1e3*parseInt(e,10))>=1e4&&setInterval(this.flushEventTimeout.bind(this),e)},u(e,[{key:"_EventList",get:function(){return this.eventList}}]),e}()}.call(this,n("./node_modules/webpack/buildin/harmony-module.js")(e))},"./src/rtc_reporting/reporting_storebag.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingStoreBag",(function(){return s}));var i=n("./src/rtc_reporting/reporting_config.ts"),r=n("./node_modules/semver/semver.js"),a=function(){function e(e,t,n,i){this.storeBagConfig=e,this.selectedBagName=t,this.bagVersion=n,this.bagMinVersionDict=i}var t=e.prototype;return t.listOfSupportedBackEnds=function(){return this.getStoreBagProperty(i.RTCReportingStoreBagKeys.PostURLs)},t.listOfKeysToBlock=function(){if(!this.storeBagConfig)return null;var e=this.storeBagConfig[i.RTCReportingStoreBagKeys.Filters];return e?e[i.RTCReportingStoreBagKeys.Remove]:null},t.getStoreBagProperty=function(e){var t=null;return this.IsValid&&e&&e in this.storeBagConfig&&(t=this.storeBagConfig[e]),t},u(e,[{key:"IsValid",get:function(){return Boolean(this.storeBagConfig)}},{key:"StoreBagName",get:function(){return this.IsValid?this.selectedBagName:null}},{key:"StorebagVersion",get:function(){return this.IsValid?this.bagVersion:null}},{key:"StoreBagSchemeVersion",get:function(){return i.RTCReportingStoreBagConfig.StoreBagVersionSupported}},{key:"BagMinVersionDict",get:function(){return this.bagMinVersionDict}}]),e}(),s=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.RTCReportingStoreBagConfig.StoreBagFetchAsyncMode,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.storebagURL=e,this.mode=o,this.storeBagConfig=null,this.clientName=t,this.serviceName=n,this.applicationName=r,this.deviceName=a,this.storebagLoader=null,this.selectedBagName=null,this.storebagAsJSON=l,this.bagVersion=null,this.bagMinVersionDict=null,"object"===typeof s&&(this.bagMinVersionDict=s),this.fetchAndParseStoreBag()}var t=e.prototype;return t.destroy=function(){this.storebagLoader&&(this.storebagLoader.abort(),this.storebagLoader=null)},t.fetchAndParseStoreBag=function(){this._fetchStoreBag()},t.createParsedStoreBag=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.applicationName,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storebagAsJSON?this._parseAndReturnStoreBag(this.storebagAsJSON,e,t):(console.log("no bag available!"),null)},t._checkbagMinVersion=function(e,t){if(e&&t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(t.hasOwnProperty(n)){var a=t[n];if(Object(r.gte)(a,i))return!0}}return!1}return!0},t._parseAndReturnStoreBag=function(e,t,n){var r=null,s=null,o=null,l=null;return e.forEach(function(e){if(r=null,e[i.RTCReportingStoreBagKeys.Scheme]===i.RTCReportingStoreBagConfig.StoreBagVersionSupported){var a=e[i.RTCReportingStoreBagKeys.BagList];Object.keys(a).some(function(s){var c=a[s],u=c[i.RTCReportingStoreBagKeys.MinOSVersionDict];return this._checkbagMinVersion(u,this.bagMinVersionDict)?!!this._canUseBagConfig(c,t,n)&&(r=c,o=s,l=e[i.RTCReportingStoreBagKeys.BagVersion],!1):(console.log("failed to match the version # "),!1)}.bind(this))}r&&(s=this._fillSelectedBagConfig(r,e))}.bind(this)),s||console.log(i.RTCReportingAgentDefaultConfig.LogMsgPrefix+" Failed to select a storebag."),new a(s,o,l,this.bagMinVersionDict)},t._fetchStoreBag=function(){this.storebagURL&&!this.storebagAsJSON&&this._requestStoreBagAsync()},t._requestStoreBagAsync=function(){this.storebagLoader=new XMLHttpRequest,this.storebagLoader.onreadystatechange=function(){this.storebagLoader&&4===this.storebagLoader.readyState&&200===this.storebagLoader.status&&this.storebagLoader.responseText&&(this.storebagAsJSON=JSON.parse(this.storebagLoader.responseText))}.bind(this),this.storebagLoader.open("GET",this.storebagURL,!0),this.storebagLoader.send(null)},t._canUseBagConfig=function(e,t,n){var r=e[i.RTCReportingStoreBagKeys.ClientName];if(r&&r!==this.clientName)return!1;var a=e[i.RTCReportingStoreBagKeys.ServiceNameList],s=e[i.RTCReportingStoreBagKeys.ServiceName];if(a&&a.length>0&&-1===a.indexOf(this.serviceName))return!1;if(!a&&s&&s!==this.serviceName)return!1;var o=e[i.RTCReportingStoreBagKeys.ApplicationNameList];if(o&&o.length>0&&-1===o.indexOf(t))return!1;var l=e[i.RTCReportingStoreBagKeys.DeviceList];if(l&&l.length>0&&-1===l.indexOf(this.deviceName))return!1;var c=e[i.RTCReportingStoreBagKeys.SenderServiceIDList];return!(c&&c.length>0&&-1===c.indexOf(n))},t._fillSelectedBagConfig=function(e,t){var n=null;if(!e||!t)return n;var r=t[i.RTCReportingStoreBagKeys.ConfigurationList],a=e[i.RTCReportingStoreBagKeys.Configurations];return a?(a.forEach((function(e){var t=r[e];n=n||{},Object.assign(n,t)})),n):n},e}()}}).default},e.exports=d()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(298),r=n(143),a=n(160),s=n(15),o=a.a.extend(s.b,{toString:function(){return"[Object "+Object(i.a)(this)+":"+Object(r.b)(this)+"]"},toJSON:function(){return this.toString()},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreObject"}})},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"l",(function(){return o})),n.d(t,"i",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"m",(function(){return _})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"q",(function(){return w})),n.d(t,"u",(function(){return I})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return A})),n.d(t,"t",(function(){return O})),n.d(t,"n",(function(){return T})),n.d(t,"v",(function(){return M})),n.d(t,"s",(function(){return D})),n.d(t,"r",(function(){return P}));var i=n(138),r=n(298),a=Object(i.b)("STATUS",(function(e){e("LOADED",(function(e){e("RELOADING",(function(e){e("QUEUED"),e("ACTIVE")}))})),e("NOT_LOADED",(function(e){e("LOADING",(function(e){e("QUEUED"),e("ACTIVE")})),e("ERRORED"),e("MIXED_STATE")}))})),s=a.LOADED,o=a.NOT_LOADED,l=o.LOADING,c=o.ERRORED,u=o.MIXED_STATE,d=Object(i.b)("ACTIONS",(function(e){e("READ",(function(e){e("LOAD"),e("LIST")})),e("WRITE",(function(e){e("CREATE"),e("UPDATE"),e("DESTROY"),e("BULK")}))})),h=d.READ,p=h.LOAD,f=h.LIST,g=d.WRITE,m=g.CREATE,_=g.UPDATE,v=g.DESTROY,b=g.BULK,y=[];function w(){return y}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y=e}var S,C={};function E(e){if(void 0===C[e])for(var t=0,n=y.length;t<n;t++){var i=y[t],a=Object(r.a)(i);if(a===e){C[a]=i;break}}return C[e]}function A(){return C}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C=e}function T(){return S}function M(e){var t=S;return e&&e.retain&&e.retain(),S=e,t&&t.release&&t.release(),S}function D(){M()}function P(){D(),I(),O()}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b}));var i=n(208),r=n(120),a=n(13),s=n(127),o=n(449),l=n(77),c=n(316),u=n(384);function d(e,t,n){return(d=h()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&p(r,n.prototype),r}).apply(null,arguments)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=l.a.extend({instantiate:null,init:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this,a=n[0];e===Array?e=a||[]:e===Object&&(e=a||{}),this.value=e,this.configs=n,r.__s._$1Pq$init.call(r)},wasRegistered:function(e,t){var n=this.value;Object(c.a)(n)?this.instantiate=g:Object(i.a)(n)?this.instantiate=m:Array.isArray(n)||Object(r.a)(n)?this.instantiate=_:Object(a.b)("Error on key '%{key}': CW.instance may only instantiate CW classes, JavaScript constructors, and arrays.",{key:t,object:e,type:n})},configs:null,requiresSupport:b,isOnlyMetadataForKey:!1,allowedOnClass:!0,allowAtCreate:!0,__superMap:{_$1Pq$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Instance"}}),g=function(e,t,n){if(!Object(s.a)(t))return t;if(Object(u.a)(t))return t;var i,a;Object(r.a)(t)||Array.isArray(t)?(i=this.value,a=[t]):(i=t,a=this.configs);var o=i.create.apply(i,a);return o.owner=o.owner||n,o},m=function(e,t,n){return Object(i.a)(t)?d(t,this.configs):t},_=function(e,t,n){return Object(o.a)(t)};function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return f.define.apply(f,[e].concat(n))}var b={mixinDependencies:[l.b],staticMembers:{initializeInstance:function(){var e=this.getMetadataByType(f);for(var t in e){var n,i=e[t];n=this.hasOwnProperty(t)?this[t]:i.value,this[t]=i.instantiate(t,n,this)}this.__s._$2fY$initializeInstance.call(this)},__superMap:{_$2fY$initializeInstance:"initializeInstance"}},initializeInstance:function(){var e=this.getMetadataByType(f);for(var t in e){var n=e[t],i=this[t];this[t]=n.instantiate(t,i,this)}this.__s._$2m4$initializeInstance.call(this)},__superMap:{_$2m4$initializeInstance:"initializeInstance"}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return d}));var i=n(160),r="strong",a="weak",s="unsafe";function o(e,t,n){e&&e!==t&&e.retain&&e.retain(t,n)}function l(e,t,n){e&&e!==t&&e.release&&e.release(t,n)}function c(e,t,n){e&&e!==t&&e.autorelease&&e.autorelease(t,n)}function u(e,t,n,r){return e&&e.registerWeakReference?e.registerWeakReference(t,n,r):i.b}function d(e,t){t!==i.b&&e&&e.deregisterWeakReference&&e.deregisterWeakReference(t)}},function(e,t,n){"use strict";n(1),n(0),n(2),n(11),n.d(t,"a",(function(){return q}));var i=n(283),r=n(42),a=n(239),s=n(13),o=n(98),l=n(82),c=n(7),u=n(20),d=n(165),h=n(78),p=n(277),f=n(55),g=n(468),m=n(64),_=n(285),v=n(483),b=n(156),y=n(302),w=n(761),I=n(762),S=n(205),C=n(269),E=n(140),A=n(258),O=n(250),T=n(230),M=n(360),D=n(412),P=n(167),L=n(97),R=n(189),x=n(223),N=n(304),F=n(809),V=n(257);function k(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){k(a,i,r,s,o,"next",e)}function o(e){k(a,i,r,s,o,"throw",e)}s(void 0)}))}}function j(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return U(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G,H,W,$,z=CloudKit.QueryFilterComparator.EQUALS,K=v.a.STRING.name,q=M.a.extend({mixinDependencies:[y.a],staticMembers:{init:function(){G=n(325),this.__s._$YP$init.call(this)},CK_RECORD_TYPE:"CPLAlbum",ROOT_RECORD_NAME:"----Root-Folder----",PROJECT_ROOT_RECORD_NAME:"----Project-Root-Folder----",rootRecord:w.b({readOnly:!0,strong:!0,dependencies:[i.a.bindingFor("application.dataManager.cplZone.pk")],get:Object.assign((function(){var e=i.a.getPath("application.dataManager.cplZone.pk");if(e){var t=this.findOrCreatePlaceholder(this.getPrimaryKeyWithZonePK(e,this.ROOT_RECORD_NAME));return t.isLoaded?t:t.load()}}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var a=this.findOrCreatePlaceholder(this.getPrimaryKeyWithZonePK(r,this.ROOT_RECORD_NAME));return a.isLoaded?a:a.load()}}})}),loadPredefinedContainers:function(e){for(var t,n=r.n(),i=q.getPrimaryKey(e,q.ROOT_RECORD_NAME),s=[],o=[],l=-q.PredefinedNames.length,c=j(q.PredefinedNames);!(t=c()).done;){var u=t.value,d=q.getPrimaryKey(e,u),h={pk:d,recordName:u,recordType:q.CK_RECORD_TYPE,albumType:A.a.PREDEFINED_SMART.value,sortType:q.QueryInfoByPredefinedName[u].sortType.value,sortAscending:q.QueryInfoByPredefinedName[u].sortAscending,zoneID:e.zoneID,zone:e.pk,position:l};s.push(d),o.push(h),l+=1}var p=[{pk:i,recordName:q.ROOT_RECORD_NAME,recordType:q.CK_RECORD_TYPE,albumType:A.a.FOLDER.value,sortType:void 0,sortAscending:void 0,containers:s,zoneID:e.zoneID,zone:e.pk}].concat(o);n.loadData(q,p,!0);var f=p.map((function(e){return e.pk}));return a.a.create(f,q,n)},QueryInfoByPredefinedName:H={MOMENTS:{itemListRecordType:"CPLAssetAndMasterByAssetDateWithoutHiddenOrDeleted",indexCountId:"CPLAssetByAssetDateWithoutHiddenOrDeleted",sortType:E.a.CREATION_DATE,sortAscending:!1,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},PHOTOS:{itemListRecordType:"CPLAssetAndMasterByAddedDate",indexCountId:"CPLAssetByAddedDate",sortType:E.a.IMPORT_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},FAVORITES:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"FAVORITE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Favorite",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isFavorite}},VIDEOS:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"VIDEO"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Video",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e,t){return!e.isHidden&&!e.isDeleted&&t.dataClassType===O.a.MOVIE}},LIVE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"LIVE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Live",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_SUPPORTING_VIDEO}},EXPOSURE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"EXPOSURE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Exposure",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){var t=e.adjustmentRenderTypes[0];return!e.isHidden&&!e.isDeleted&&t===C.a.LONG_EXPOSURE}},PANORAMAS:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"PANORAMA"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Panorama",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_PANORAMA}},TIMELAPSE:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"TIMELAPSE"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Timelapse",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.VIDEO_TIMELAPSE}},SLOMO:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"SLOMO"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Slomo",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.VIDEO_SLOWMO}},DEPTH:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"DEPTH"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Depth",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isSDOF}},BURSTS:{itemListRecordType:"CPLBurstStackAssetAndMasterByAssetDate",indexCountId:"CPLAssetBurstStackAssetByAssetDate",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.isBurst}},SCREENSHOT:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"SCREENSHOT"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Screenshot",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return!e.isHidden&&!e.isDeleted&&e.assetSubtype===S.a.PHOTO_SCREENSHOT}},ANIMATED:{itemListRecordType:"CPLAssetAndMasterInSmartAlbumByAssetDate",itemListFilterBy:{fieldName:"smartAlbum",comparator:z,fieldValue:{type:K,value:"ANIMATED"}},indexCountId:"CPLAssetInSmartAlbumByAssetDate:Animated",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){var t=e.adjustmentRenderTypes[0];return!e.isHidden&&!e.isDeleted&&(t===C.a.AUTOLOOP||t===C.a.MIRROR)}},HIDDEN:{itemListRecordType:"CPLAssetAndMasterHiddenByAssetDate",indexCountId:"CPLAssetHiddenByAssetDate",sortType:E.a.CREATION_DATE,sortAscending:!0,isMediaMemberOf:function(e){return e.isHidden&&!e.isDeleted&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}},DELETED:{itemListRecordType:"CPLAssetAndMasterDeletedByExpungedDate",indexCountId:"CPLAssetDeletedByExpungedDate",sortType:E.a.TRASH_DATE,sortAscending:!1,isMediaMemberOf:function(e){var t=Date.now();return e.isDeleted&&!e.isExpunged&&e.dateExpunged>t&&(!e.burstId||e.isBurst||e.isPromotedFromBurst)}}},PredefinedNames:W=Object.keys(H),PredefinedName:$=W.reduce((function(e,t){return(e[t]=t)&&e}),{}),getQueryIndexCountId:function(e,t){if(t!==A.a.FOLDER){var n=H[e];return void 0!==n?n.indexCountId:"CPLContainerRelationNotDeletedByAssetDate:"+e}return"CPLAlbumNotDeleted:"+(e!==q.ROOT_RECORD_NAME?e:"")},isQueryIndexCountIdForContainers:function(e){return""===e||e.startsWith("CPLAlbumNotDeleted:")},getQueryItemListRecordType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.a.MANUAL,n=H[e];return n?n.itemListRecordType:t===E.a.MANUAL?"CPLContainerRelationLiveByPosition":"CPLContainerRelationLiveByAssetDate"},getQueryItemListFilterBy:function(e){var t=H[e];return t?t.itemListFilterBy:{fieldName:"parentId",comparator:z,fieldValue:{value:e,type:K}}},_predefinedNameByIndexCountId:function(){var e={};for(var t in H)e[H[t].indexCountId]=t;return e}(),getRecordNameFromIndexCountId:function(e){var t=q._predefinedNameByIndexCountId[e];if(t)return t;var n=e.indexOf(":");if(-1===n)throw new s.a("Unhandled indexCountId="+e);return n===e.length-1?"----Root-Folder----":e.slice(n+1)},list:function(e){var t=e.parentPK;return q.find(t).list(e)},performOperation:function(e,t){var n=this,i=this,a=arguments;if(e!==r.d.READ.LOAD)return i.__s._$61_$performOperation.apply(i,a);for(var s=t.primaryKeys,l=[],c=[],u=this.PredefinedName.DELETED,d=0,h=s.length;d<h;d++){var p=s[d],f=p.endsWith(u)&&M.a.getRecordNameFromPrimaryKey(p)===u;f?l.push(i.__s._$61_$performOperation.call(i,T.a.Container.CountItemsInIndex,{containerPK:p,preset:"NOT_EXPUNGED_BY_DATE"})):c.push(p)}return c.length>0&&l.push(i.__s._$61_$performOperation.call(i,e,Object.assign({},t,{primaryKeys:c}))),o.a.all(l).then((function(){return n.findByPrimaryKeys(s)}))},getIsLoadedWithItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.n(),n=this.getDataHashForPrimaryKey(e,t);if(!(n instanceof Object))return!1;var i=n.containers,a=void 0===i?n.medias:i;return Array.isArray(a)},getIsLoaded:function(e){var t=this,n=arguments,i=t.__s._$6jX$getIsLoaded.apply(t,n);return i&&this.getIsLoadedWithItems(e)},loadKeyMedia:function(e,t){return L.a.loadKey(e,t)},isPlaceholderKeyMedia:function(e){return!l.a(e,L.a)},isSystemAlbumRecordName:function(e){return e in this.PredefinedName},MAX_POSITION_VALUE:Number.MAX_SAFE_INTEGER-1024,MIN_POSITION_VALUE:1024,DESIRED_POSITION_SPACING:1024,DESIRED_POSITION_SPACING_ALBUM:2,getPositionGivenLastPosition:function(e){return e?e===this.MAX_POSITION_VALUE?this.MAX_POSITION_VALUE:e+this.DESIRED_POSITION_SPACING:this.MIN_POSITION_VALUE},getPositionGivenFirstPosition:function(e){return e?0===e?0:e-this.DESIRED_POSITION_SPACING_ALBUM:this.MAX_POSITION_VALUE},_getPositionFromObject:function(e){return e?e.position:void 0},_getDateFromObject:function(e){return e?e.date:void 0},_getAddedDateFromObject:function(e){return e?e.addedDate:void 0},_getDateExpungedFromObject:function(e){return e?e.dateExpunged:void 0},pollInstances:function(e){var t=e.map((function(e){return e.getPrimaryKey()})).filter((function(e){return e}));t&&t.length>0&&this.reload({primaryKeys:t})},isContainerAProjectRootFolder:function(e){return V.a.getIsRecordNameAProjectRootFolder(e.recordName)},__superMap:{_$YP$init:"init",_$61_$performOperation:"performOperation",_$6jX$getIsLoaded:"getIsLoaded"},__QUALIFIED_CLASS_NAME__:"Container"},_getPositionFromMedia:function(e){return q._getPositionFromObject(x.a.findForItemInContainer(this.zone.pk,e.recordName,this.recordName))},_findMediaInsertIndex:function(e){var t,n=this.sortType,i=this.medias;switch(n){case E.a.TITLE:case E.a.LAST_MODIFIED_DATE:case E.a.IMPORT_DATE:t=q._getAddedDateFromObject;break;case E.a.TRASH_DATE:t=q._getDateExpungedFromObject;break;case E.a.CREATION_DATE:t=q._getDateFromObject;break;case E.a.MANUAL:t=this._getContainerPositionFromMedia;break;default:throw s.b("Unexpected container="+this.recordName+" with sortType="+n)}return Object(D.a)(i,e,this.sortAscending?D.c:D.d,i.objectAt,t)},addMediaRef:function(e){var t=r.n(),n=this.getDataHash(),i=n.pk,a=n.recordType,s=n.recordName,o=n.medias;if(o||(o=[]),-1===o.indexOf(e.pk)){var l=this._findMediaInsertIndex(e),c=0===l||void 0!==o[l-1]?e.pk:void 0,u=o.slice(0);u.splice(l,0,c);var d={recordName:s,recordType:a,pk:i,medias:u};t.loadData(this.constructor,d,!0)}},removeMediaRef:function(e){var t=r.n(),n=this.getDataHash(),i=n.pk,a=n.recordType,s=n.recordName,o=n.medias;o||(o=[]);var l=o.indexOf(e.pk);if(-1!==l){var c=o.slice(0);c.splice(l,1);var u={recordName:s,recordType:a,pk:i,medias:c};t.loadData(this.constructor,u,!0)}},_findContainerInsertIndex:function(e){var t=e.parent.containers;return Object(D.a)(t,e,D.c,t.objectAt,q._getPositionFromObject)},addContainerRef:function(e){var t=r.n(),n=this.getDataHash(),i=n.pk,a=n.recordName,s=n.recordType,o=n.containers;if(o||(o=[]),-1===o.indexOf(e.pk)){var l=this._findContainerInsertIndex(e),c=0===l||void 0!==o[l-1]?e.pk:void 0,u=o.slice(0);u.splice(l,0,c);var d={pk:i,recordType:s,recordName:a,containers:u};t.loadData(this.constructor,d,!0)}},removeContainerRef:function(e){var t=r.n(),n=this.getDataHash(),i=n.pk,a=n.recordName,s=n.recordType,o=n.containers;o||(o=[]);var l=o.indexOf(e.pk);if(-1!==l){var c=o.slice(0);c.splice(l,1);var u={pk:i,recordType:s,recordName:a,containers:c};t.loadData(this.constructor,u,!0)}},histogram:c.b({strong:!0}),invalidateHistogramOnMediasChange:u.h({inputs:["medias.length"],callback:function(e){e>=0&&(this.histogram=null)}}),loadHistogram:function(){var e=this;return B(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._isLoadingHistogram&&!e.histogram){t.next=2;break}return t.abrupt("return");case 2:return e._isLoadingHistogram=!0,t.next=5,N.a.loadFromContainerPKs([e.pk]);case 5:if(n=t.sent,e._isLoadingHistogram=!1,n&&n.firstItem&&n.firstItem.cplAssetDistribution){t.next=9;break}return t.abrupt("return");case 9:for(i=n.firstItem.cplAssetDistribution,r=F.a.fromObject(i),a=r.buckets,s=a.length,o=0,l=0,c=s;l<c;l++)(u=a[l]).startIndex=o,o+=u.count;e.histogram=r;case 16:case"end":return t.stop()}}),t)})))()},_isLoadingHistogram:!1,loadMediasForDateRangeEfficiently:function(e,t,n){var i=this;return B(regeneratorRuntime.mark((function s(){var o,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,N.a.getRankRangeFromDates(i.pk,e,t);case 2:if("object"!==typeof(o=s.sent)||"number"!==typeof o.startRank||"number"!==typeof o.endRank){s.next=10;break}return l=o.startRank,c=o.endRank,u=i._calculateStartAndEndRank(l,c,n),d=u.first,h=u.last,s.next=8,i.loadMediasForRange(d,h);case 8:return p=i._getStoreIdsForMediasWithinDateRange(d,h,e,t),s.abrupt("return",a.a.createFromStoreIds(p,L.a,r.n()));case 10:return s.abrupt("return",a.a.create());case 11:case"end":return s.stop()}}),s)})))()},_calculateStartAndEndRank:function(e,t,n){var i=e>t,r=i?t:e,a=i?e:t,s=t;return a-r>n&&(s=a===e?a-n:r+n),{first:e<s?e:s,last:e<s?s:e}},_getStoreIdsForMediasWithinDateRange:function(e,t,n,i){var r=n<i?n:i,a=n<i?i:n,s=this.getDataHash().medias,o=[],l=e,c=t,u=1;n>i&&(l=t,c=e,u=-1);for(var h=l;h!==c+u;h+=u){var p=s[h];if(p){var f=L.a.getDataHashForPrimaryKey(p).asset,g=R.a.getDataHashForPrimaryKey(f).assetDate;g&&g>=r&&g<=a&&o.push(d.a.getStoreIdForPrimaryKey(L.a,p))}}return o},albumType:b.j(A.a,{readOnly:!0}),type:c.b(h.c("albumType")),isPredefinedSmartAlbum:Object(P.e)("type",A.a.PREDEFINED_SMART),isFolder:Object(P.e)("type",A.a.FOLDER),isNormalAlbum:Object(P.e)("type",A.a.NORMAL),isRootFolder:Object(P.e)("recordName","----Root-Folder----"),isMomentsAlbum:Object(P.e)("recordName",$.MOMENTS),isRecentlyDeletedAlbum:Object(P.e)("recordName",$.DELETED),isHiddenAlbum:Object(P.e)("recordName",$.HIDDEN),isBurstsAlbum:Object(P.e)("recordName",$.BURSTS),isLiveAlbum:Object(P.e)("recordName",$.LIVE),isScreenshotAlbum:Object(P.e)("recordName",$.SCREENSHOT),isTimelapseAlbum:Object(P.e)("recordName",$.TIMELAPSE),isSlomoAlbum:Object(P.e)("recordName",$.SLOMO),isVideosAlbum:Object(P.e)("recordName",$.VIDEOS),isPanoramasAlbum:Object(P.e)("recordName",$.PANORAMAS),isFavoritesAlbum:Object(P.e)("recordName",$.FAVORITES),isAllPhotosAlbum:Object(P.e)("recordName",$.PHOTOS),albumName:c.b({dependencies:["_albumNameEnc","_name"],get:Object.assign((function(){return this._albumNameEnc||this._name}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),set:Object.assign((function(e){return this._albumNameEnc=e}),{__CW__setter:function(e,t,n,i,r){return n[0+i]=e}}),writeDependencySetPathMap:[!1]}),name:c.b(h.c("albumName")),_albumNameEnc:b.m({dataKey:"albumNameEnc"}),_name:b.e({dataKey:"name",readOnly:!0}),position:b.e(),sortType:Object(P.d)(["_sortType","_sortTypeExt"]),_sortType:b.j(E.a,{readOnly:!0,dataKey:"sortType"}),_sortTypeExt:b.j(E.a,{readOnly:!0,dataKey:"sortTypeExt",defaultValue:E.a.MANUAL}),sortAscending:b.b(),parent:c.b({dependencies:["parentId"],get:Object.assign((function(){var e=this.constructor.getPrimaryKey(this.zone,this.parentId);return q.find(e)}),{__CW__getter:function(e,t,n,i){var r=this.constructor.getPrimaryKey(this.zone,i.internalGet(this,t[0+n]));return q.find(r)}}),set:Object.assign((function(e){if("----Root-Folder----"!==this.recordName)return this.parentId=e?e.recordName:void 0}),{__CW__setter:function(e,t,n,i,r){if("----Root-Folder----"!==this.recordName)return n[0+i]=e?e.recordName:void 0}}),writeDependencySetPathMap:[!1]}),parentId:b.e({defaultValue:"----Root-Folder----"}),canBeDeleted:c.b({readOnly:!0,dependencies:["isFolder","isNormalAlbum"],get:Object.assign((function(){return this.isFolder||this.isNormalAlbum||this.isUserCreatedSmartAlbum}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||this.isUserCreatedSmartAlbum}})}),containers:p.a.toMany({type:"(self)"}),onContainersDidChange:u.h({inputs:["containers","containers.contentsDidChange"],callback:function(e,t){if(e&&t&&!this.isRootFolder&&!this.isPredefinedSmartAlbum){var n=t.context;n&&0!==n.length&&this.reloadKeyMediasIfLoaded()}}}),medias:p.a.toMany({type:L.a}),onMediasDidChange:u.h({inputs:["medias","medias.contentsDidChange"],callback:function(e,t){if(e&&t){var n=t.context;n&&0!==n.length&&this.reloadKeyMediaIfLoaded()}}}),keepKeyMediaUpToDate:u.h({inputs:["medias.length"],callback:function(){var e=this.medias,t=this.keyMediaBySystem;if(e&&t){var n=e.encode(t);e.encodedContains(n)||(this.keyMediaBySystem=e.lastItem)}}}),keyMedia:c.b({dependencies:["keyMediaByUser","keyMediaBySystem"],readOnly:!0,get:Object.assign((function(){return this.keyMediaByUser||this.keyMediaBySystem}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),didChange:function(e){if(e){var t=this.parent;!t||t.isRootFolder||t.isPredefinedSmartAlbum||t.ensureKeyMedias()}}}),keyMediaByUser:c.b({strong:!0,type:L.a}),keyMediaBySystem:c.b({strong:!0,type:L.a}),keyMedias:c.b({defaultValue:f.c(g.a),strong:!0,type:g.a}),ensureKeyMedia:function(){return this.loadKeyMedia()},ensureKeyMedias:function(){return this.loadKeyMedias()},_loadChildKeyMedias:function(){var e=this,t=this.containers;if(!t.length)return o.a.resolve();var n=[],i=[];return t.forEach((function(e,t){e&&(e.isNormalAlbum?i.push(e.loadKeyMedia().then((function(){return n[t]=e.keyMedia}))):e.isFolder&&i.push(e.ensureKeyMedias().then((function(){return n[t]=e}))))})),o.a.all(i).then((function(){for(var t,i=[],r=0,a=n.length;r<a;r++){var s=n[r];if(s){if(i.length>=4)break;l.a(s,q)?i.push(e._findKeyMediaForUserFolder(s)):i.push(s)}}return(t=e.keyMedias).splice.apply(t,[0,e.keyMedias.length].concat(i))}))},_findKeyMediaForUserFolder:function(e){var t;return function e(n){if(!t){var i,r,a=n.containers.length;for(i=0;i<a;i++)if(r=n.containers.objectAt(i),l.a(r,q)&&r.isFolder&&r.keyMedias.length&&(t=r.keyMedias.objectAt(0)))return void t.retain(this,"_findKeyMediaForUserFolder: keyMedia");for(i=0;i<a;i++)r=n.containers.objectAt(i),l.a(r,q)&&r.isFolder&&e.call(this,r)}}.call(this,e),m.d(t,this,"_findKeyMediaForUserFolder: keyMedia"),t},firstMediaByDate:c.b({strong:!0}),lastMediaByDate:c.b({strong:!0}),loadMediasForIndices:function(e){var t=arguments,n=this;return B(regeneratorRuntime.mark((function i(){var r,a,s,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=t.length>1&&void 0!==t[1]?t[1]:L.a.HydrationLevel.FULL,i.next=3;break;case 3:if(a=n.medias,!((s=n._getUnloadedMediaIndices(a,e)).length>0)){i.next=12;break}return o=I.a(s),i.next=11,n._loadMediaRanges(o,r);case 11:return i.abrupt("return",i.sent);case 12:case"end":return i.stop()}}),i)})))()},loadMediasForRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.a.HydrationLevel.FULL;return L.a.list({containerPK:this.pk,first:e,last:t,hydrationLevel:n}).catch((function(e){throw e}))},loadFirstAndLastMediasByDate:function(){var e=arguments,t=this;return B(regeneratorRuntime.mark((function n(){var i,a,s,l,c,u,d,h,p,f,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:L.a.HydrationLevel.FULL,a=e.length>1&&void 0!==e[1]&&e[1],s=r.n(),l=s.cplZone.syncToken,a||t._loadFirstAndLastMediasByDateSyncToken!==l){n.next=6;break}return n.abrupt("return",[t.firstMediaByDate,t.lastMediaByDate]);case 6:if(t.recordName!==q.PredefinedName.PHOTOS){n.next=16;break}return c=s.cplSystemContainersMap.get(q.PredefinedName.MOMENTS),n.next=10,c.loadFirstAndLastMediasByDate(i,a);case 10:return u=n.sent,t._loadFirstAndLastMediasByDateSyncToken=l,d=u[0],h=u[1],t.firstMediaByDate=d,t.lastMediaByDate=h,n.abrupt("return",u);case 16:return n.next=18,o.a.all([t._loadFirstMediaByDate(i),t._loadLastMediaByDate(i)]);case 18:return p=n.sent,t._loadFirstAndLastMediasByDateSyncToken=l,f=p[0],g=p[1],t.firstMediaByDate=f,t.lastMediaByDate=g,m.e(f,t,"_loadFirstMediaByQueryType: returned media"),m.e(g,t,"_loadLastMediaByQueryType: returned media"),n.abrupt("return",p);case 26:case"end":return n.stop()}}),n)})))()},_loadFirstAndLastMediasByDateSyncToken:void 0,_loadFirstMediaByDate:function(e){var t=this;return this.medias.length?L.a.list({containerPK:this.pk,first:0,last:Number.MAX_SAFE_INTEGER,hydrationLevel:e,limit:1,queryType:G.MediaListOperationHandler.QueryType.DATE,sortType:E.a.CREATION_DATE}).then((function(e){var n=e.objectAt(0);return m.f(n,t,"_loadFirstMediaByQueryType: returned media"),n})).catch((function(e){throw e})):o.a.resolve()},loadLastContainerRelationByPosition:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.a.HydrationLevel.FULL;return this._loadLastMediaByQueryType(t,G.MediaListOperationHandler.QueryType.POSITION).then((function(t){if(t){var n=t.primaryAsset.recordName;return m.e(t,e,"_loadLastMediaByQueryType: returned media"),x.a.findForItemInContainer(e.zone.pk,n,e.recordName)}}))},loadLastContainerByPosition:function(){var e=this;return this.list().then((function(){var t;return e.containers.forEach((function(e){e&&(!t||t.position<e.position)&&(t=e)})),t}))},loadFirstContainerByPosition:function(){var e=this;return this.list().then((function(){var t;return e.containers.forEach((function(e){e&&(e.isNormalAlbum||e.isFolder)&&(!t||t.position>e.position)&&(t=e)})),t}))},_loadLastMediaByDate:function(e){return this._loadLastMediaByQueryType(e,G.MediaListOperationHandler.QueryType.DATE)},_loadLastMediaByQueryType:function(e,t){var n=this;return this.medias.length?L.a.list({containerPK:this.pk,first:Number.MAX_SAFE_INTEGER,last:0,hydrationLevel:e,limit:1,queryType:t,sortType:E.a.CREATION_DATE}).then((function(e){var t=e.objectAt(0);return m.f(t,n,"_loadLastMediaByQueryType: returned media"),t})).catch((function(e){throw e})):o.a.resolve()},loadAll:function(){return this.list.apply(this,arguments)},list:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isForcedFetch,i=void 0!==n&&n;if(this.type!==A.a.FOLDER)return o.a.resolve();if(void 0!==this._listPromise)return this._listPromise;var a=r.n(),s=a.cplZone;return i||"string"!==typeof this._listSyncToken||this._listSyncToken!==s.syncToken?(this._listPromise=q.performOperation(r.d.READ.LIST,Object.assign({},t,{parentPK:this.pk})).then((function(t){return e._listSyncToken=s.syncToken,t})).finally((function(){e._listPromise=void 0})),this.recordName===q.ROOT_RECORD_NAME||!i&&this._loadSyncToken===s.syncToken?this._listPromise:this.load({isForcedFetch:i,isDelayable:!1}).then((function(){return e._listPromise}))):o.a.resolve(this.containers)},_listPromise:void 0,_listSyncToken:void 0,relist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.list(Object.assign({},e,{isForcedFetch:!0}))},loadKeyMedia:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.a.HydrationLevel.FULL,n=arguments.length>1?arguments[1]:void 0;if(void 0!==this._loadKeyMediaPromise)return this._loadKeyMediaPromise;var i=r.n(),a=i.cplZone;return n||"string"!==typeof this._loadKeyMediaSyncToken||this._loadKeyMediaSyncToken!==a.syncToken?this._loadKeyMediaPromise=q.loadKeyMedia(this.pk,t).then((function(n){return n?(e.keyMediaBySystem=void 0,n):e.load().then((function(){return e._loadLastMediaByDate(t)})).then((function(t){return e.keyMediaByUser=void 0,e.keyMediaBySystem=t,m.e(t,e,"_loadLastMediaByQueryType: returned media"),t}))})).finally((function(){e._loadKeyMediaSyncToken=a.syncToken,e._loadKeyMediaPromise=void 0})):o.a.resolve(this.keyMedia)},_loadKeyMediaPromise:void 0,_loadKeyMediaSyncToken:void 0,reloadKeyMediaIfLoaded:function(){return this._loadKeyMediaSyncToken?this.loadKeyMedia():o.a.resolve()},loadKeyMedias:function(e){var t=this;if(void 0!==this._loadKeyMediasPromise)return this._loadKeyMediasPromise;var n=r.n().cplZone;return e||"string"!==typeof this._loadKeyMediasSyncToken||this._loadKeyMediasSyncToken!==n.syncToken?this._loadKeyMediasPromise=this.load({isForcedFetch:e}).then((function(){return t.list({isForcedFetch:e})})).then((function(){return t._loadChildKeyMedias()})).finally((function(){t._loadKeyMediasSyncToken=n.syncToken,t._loadKeyMediasPromise=void 0})):o.a.resolve(this.keyMedias)},_loadKeyMediasPromise:void 0,_loadKeyMediasSyncToken:void 0,reloadKeyMediasIfLoaded:function(){return this._loadKeyMediasSyncToken?(this.keyMedias.length=0,this.loadKeyMedias()):o.a.resolve()},removeItems:function(e){return this._removeOrDeleteItems({items:e,shouldDeleteItems:!1})},deleteItems:function(e){return this._removeOrDeleteItems({items:e,shouldDeleteItems:!0})},_removeOrDeleteItems:function(e){var t=e.items,n=e.shouldDeleteItems,i=t.length;if(!i)return o.a.resolve();for(var a=_.a.from(t),s=this.recordName,l=this.isFolder,c=this.isNormalAlbum,u=this.isRootFolder,d=r.n(),h=[],p=!1,f=0;f<i;f++){var g=a.objectAt(f);if(l||u)g.isDeleted=!0,p=!0;else if(c){n&&(g.delete(),p=!0);for(var m=g.containerRelations,v=m.length,b=0;b<v;b++){var y=m.objectAt(b);if(y.containerId===s){h.push({primaryKey:y.recordName,modelClass:m._modelClass}),y.delete(),p=!0;break}}}else g.delete(),p=!0}return p?d.commit().then((function(e){return h.forEach((function(e){d.removeData(e.modelClass,e.primaryKey)})),e})):o.a.resolve()},init:function(){var e=this,t=arguments;e.__s._$Kdo$init.apply(e,t),this.retain()},_loadMediaRanges:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.a.HydrationLevel.FULL;return o.a.all(e.map((function(e){return t.loadMediasForRange(e[0],e[1],n)})))},_getUnloadedMediaIndices:function(e,t){for(var n,i=[],r=j(t);!(n=r()).done;){var a=n.value;void 0===e.storeIdForObjectAt(a)&&i.push(a)}return i},loadMediasByDateRange:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.a.HydrationLevel.FULL;return L.a.list({containerPK:this.pk,first:e,last:t,hydrationLevel:i,limit:n,queryType:G.MediaListOperationHandler.QueryType.DATE})},__superMap:{_$Kdo$init:"init"}})},function(e,t,n){"use strict";var i=n(117);i.b(i.c(),{"Toolbar.OneUp.Title.BurstCount.1":"Burst (1 Photo)","Toolbar.OneUp.Title.BurstCount.2":"Burst (2 Photos)","Toolbar.OneUp.Title.BurstCount.More":"Burst (%{count} Photos)","OneUp.Burst.Toolbar.Done":"Done","OneUp.Burst.Toolbar.Cancel":"Cancel","OneUp.Burst.Toolbar.MakeASelection":"Make a Selection","OneUp.Burst.Toolbar.Selection.1":"1 Photo Selected","OneUp.Burst.Toolbar.Selection.2":"2 Photos Selected","OneUp.Burst.Toolbar.Selection.More":"%{count} Photos Selected","OneUp.Burst.Button.MakeASelection":"Make a selection…","Badge.HDR":"HDR","Badge.SDOF":"PORTRAIT","Alert.Burst.Message.1":"Would you like to keep the other photo in this burst?","Alert.Burst.Message.2":"Would you like to keep the other photos in this burst?","Alert.Burst.Message.More":"Would you like to keep the other %{count} photos in this burst?","Alert.Burst.KeepAll":"Keep Everything","Alert.Burst.KeepSelection":"Keep Only Selection","Alert.Burst.Selection.Error":"Your burst could not be modified due to an error. Please try again.","Alert.OK.Button.Title":"OK","Alert.Cancel.Button.Title":"Cancel"})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(208),r=n(123).b.extend({requiredKey:null,validate:function(e,t){if(this._validating)return this._validating=!1,!1;this._validating=!0;var n,r=e[t];if(Object(i.a)(r)&&r!==this.default)return this._validating=!1,!0;if(t=this.requiredKey||t,Array.isArray(t)){n=!0;for(var a=t.length,s=0;s<a;s++)n=n&&this._validate(e,t[s])}else n=this._validate(e,t);return this._validating=!1,n},_validating:!1,_validate:function(e,t){var n=e.getMetadataByType(r)[t],a=e[t];return n?n.validate(e,t):Object(i.a)(a)},getValue:function(){return this.default},default:void 0,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredMethod"}})},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n(280),r=n(13),a=n(51),s=n(82),o=n(298),l=n(143);function c(e){var t=Object(i.a)(arguments,0,1);return e.define.apply(e,t)}var u=n(160).a.extend({staticMembers:{define:function(){return this.create.apply(this,arguments)},_ancestorGuids:[],__QUALIFIED_CLASS_NAME__:"Metadata"},value:void 0,initializeMember:function(e,t){return e.hasMixin(h)||Object(r.b)("cannot add metadata to a class without CW.MetadataSupport"),e.registerMetadata(t,this,!0),this.getValue(e,t)},wasRegistered:a.a,getValue:function(e,t){return this.value},requiresSupport:null,allowedOnClass:!1,allowedOnInstance:!0,allowAtExtend:!0,allowAtRuntime:!1,allowAtCreate:!1,isOnlyMetadataForKey:!0}),d={initializeMember:function(){return{}}},h={staticMembers:{init:function(e){var t=this.prototype;p(this),p(t),this.__s._$2LT$init.call(this,e),t.initializeClass(),this.initializeClass(),this.initializeInstance()},_metadataByType:d,_metadataByKey:d,registerMetadata:f,getMetadataByType:m,getMetadata:_,initializeClass:a.a,initializeInstance:a.a,initializeRuntime:a.a,__superMap:{_$2LT$init:"init"}},init:function(e){this.__s._$33W$init.call(this,e),this.initializeInstance()},_metadataByType:d,_metadataByKey:d,registerMetadata:f,getMetadataByType:m,getMetadata:_,initializeClass:a.a,initializeInstance:a.a,initializeRuntime:a.a,__superMap:{_$33W$init:"init"}};function p(e){if(!e.hasOwnProperty("_metadataByType")){for(var t=e._metadataByType,n={},i=Object.keys(t),r=i.length,a=0;a<r;a++){var s=i[a];n[s]=Object.create(t[s])}e._metadataByType=n;var o=e._metadataByKey;e._metadataByKey=Object.create(o)}}function f(e,t,n){e||Object(r.b)("'key' is required"),t||Object(r.b)("'metadata' is required"),Object(s.a)(t,u)||Object(r.b)("Metadata must inherit from CW.Metadata");var i=t.key;i&&i!==e&&Object(r.b)("metadata cannot be registered on key '"+e+"'; it is already registered for a different key '"+i);var a=this.isClass,c=this.constructor,d=t.requiresSupport;d&&!(a?this:c).kindOf(d)&&Object(r.b)("This class does not mix in the required support for metadata of type "+Object(o.a)(t)+".",{metadata:t,requiresSupport:d});var h=this.isInitialized,f=t.allowAtExtend,g=t.allowAtCreate;if(a)t.allowedOnClass||Object(r.b)("This metadata cannot be added to a class because `allowedOnClass` is false (key: '"+e+"', class: "+this+", metadata: "+t.constructor+").",{key:e,onClass:this,metadata:t}),h||f||g||Object(r.b)("New static metadata may not be added at extend time when `allowAtExtend` and `allowAtCreate` are false (key: '"+e+"', class: "+this+", metadata: "+t.constructor+").",{key:e,onClass:this,metadata:t});else{t.allowedOnInstance||Object(r.b)("This metadata cannot be added to an instance because `allowedOnInstance` is false (key: '"+e+"', instance of: "+c+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t});var m=c.isInitialized;m||h||f||Object(r.b)("New metadata may not be added in extend when `allowAtExtend` is false (key: '"+e+"', instance of: "+c+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t}),!m||h||g||Object(r.b)("New metadata may not be added in create when `allowAtCreate` is false (key: '"+e+"', instance of: "+c+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t})}h&&(t.allowAtRuntime?this.initializeRuntime():Object(r.b)("New metadata may not be added at runtime when `allowAtRuntime` is false (key: '"+e+"', instance: "+this+", metadata: "+t.constructor+").",{key:e,instance:this,metadata:t}));var _=t.constructor,v=this._metadataByKey[e];v&&v.isOnlyMetadataForKey&&t.isOnlyMetadataForKey&&!t.instanceOf(v.constructor)&&Object(r.b)("isOnlyMetadataForKey metadata may only be overridden if the new value is the same type or a subclass (key: '"+e+"', target: "+this+", metadata: "+t.constructor+").",{key:e,target:this,metadata:t}),p(this);var b,y=this._metadataByKey,w=this._metadataByType;if(t.isOnlyMetadataForKey||(v=null),_.hasOwnProperty("_ancestorGuids"))b=_._ancestorGuids;else{b=_._ancestorGuids=[];for(var I=_.ancestors,S=I.length,C=0;C<S&&I[C]!==u;C++);for(C++;C<S;C++){var E=I[C];b.push(Object(l.b)(E))}b.push(Object(l.b)(_))}var A=b.length;if(!v){var O=w[b[0]];O&&(v=O[e])}for(var T=0;T<A;T++){var M=b[T],D=w[M];D||(w[M]=D={}),D[e]=t}if(t.isOnlyMetadataForKey&&(y[e]=t),t.key=e,!n){var P=t.getValue(this,e);void 0!==P&&(this[e]=P)}t.wasRegistered(this,e,v)}var g={};function m(e){return this._metadataByType[Object(l.b)(e)]||g}function _(e){return this._metadataByKey[e]}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g}));var i=n(138),r=n(160),a=n(195),s=n(13),o=n(346),l=n(296),c=n(17),u={upstreamNode:0,downstreamNode:0,clear:function(){this.upstreamNode=0,this.downstreamNode=0}},d=Object(i.b)("BindingConnection",(function(e){e("CONNECT"),e("DONT_CONNECT"),e("OPTIONAL")})),h=Symbol("CW.OWNER"),p=r.a.extend(d.toStaticMixin(),{staticMembers:{createForPaths:function(e){var t,n,i=e?e.length:0,r=new Array(i);if(!e)return r;for(t=0;t<i;t++)(n=e[t]).instanceOf&&n.instanceOf(this)||(n=this.create(n)),r[t]=n;return r},hookUpBinding:function(e,t,n,i,r,s,o){t&&Object(a.a)(t)&&(t=this.create(t)),n&&Object(a.a)(n)&&(n=this.create(n)),void 0===s&&(s=this.OPTIONAL),void 0===o&&(o=this.CONNECT),u.clear(),f(e,t,i,!0,u);var l=u.upstreamNode,d=u.downstreamNode;u.clear(),f(e,n,i,!1,u);var h=u.upstreamNode,p=u.downstreamNode;if(o!==this.DONT_CONNECT)if(d>0&&p>0)c.a.addChildToNode(p,d,r);else if(o===this.CONNECT)return!1;if(s!==this.DONT_CONNECT)if(l>0&&h>0)c.a.addChildToNode(l,h,i);else if(s===this.CONNECT)return!1;return!0},hookUpDownstreamNode:function(e,t,n,i){u.clear(),f(e,t,!1,!0,u);var r=u.downstreamNode;return!(r<=0)&&(c.a.addChildToNode(n,r,i),!0)},__QUALIFIED_CLASS_NAME__:"Binding"},rootObject:null,path:"",components:null,init:function(e,t){this.__s._$3ez$init.call(this),e||Object(s.b)("Cannot create CW.Binding with no path.",{path:e});var n=!1;"."===e[0]&&(n=!0,e=e.substring(1));var i=Object(o.a)(e),r=i[0];n||("global"===r||"\ud83c\udf10"===r?(t=window,i.shift()):"(owner)"===r&&(t&&Object(s.b)("Cannot create a CW.Binding relative to (owner): %{path}. It already has a root object.",{rootObject:t,path:e}),t=h,i.shift())),t!==h&&0===i.length&&Object(s.b)("Cannot create CW.Binding with an invalid path ('%{path}').",{path:e,rootObject:t}),this.components=i,this.path=i.join("."),t&&(this.rootObject=t)},__superMap:{_$3ez$init:"init"}});function f(e,t,n,i,r){var a,o=t.components,u=o.length,d=0,p=t.rootObject||e;for(p===h&&Object(s.b)("CW.Binding cannot resolve path %{path}. (owner) was specified, but a value was not provided.",{path:t.path}),a=o[d];p&&(!p.downstreamNodes||!p.downstreamNodes.hasOwnProperty(a));)p=p[a],a=o[++d];if(!p||d===u){var f=o.join(".");Object(s.b)("No observable properties found along binding path ("+f+").",{object:e,path:f})}return d===u-1?function(e,t,n){var i=e.upstreamNodes[t];(i=c.a._sanitizeNodeID(i))>0&&(n.upstreamNode=i);var r=e.downstreamNodes[t];return(r=c.a._sanitizeNodeID(r))>0&&(n.downstreamNode=r),n}(p,a,r):function(e,t,n,i,r,a,s){var o,c,u=n.length,d=n[i],h=d;for(o=l.b.instanceFor(d).setUpForObject(e,t),i++;i<u-1;i++)h+="."+(d=n[i]),o=l.a.instanceFor(d,h).setUpForObject(e,t,o);return h+="."+(d=n[i]),(c=a?l.c.instanceFor(d,h):l.d.instanceFor(d,h)).setUpForObject(e,t,o,r),s.downstreamNode=c.getDownstreamProxyNode(t),s.upstreamNode=c.getUpstreamProxyNode(t),s}(e,p,o,d,n,i,r)}function g(e){return p.create(e)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function i(e,t){return(n=e)&&n.instanceOf?e.instanceOf(t):(t===Event||"function"===typeof t)&&e instanceof t;var n}n.d(t,"a",(function(){return i}))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(40),r=n(20),a=n(7),s=n(78),o=i.a.extend(r.b,{cloudOSApplication:a.b(),cloudOSService:a.b({dependencies:["cloudOSApplication.cloudOSService"],readOnly:!0,strong:!0,get:Object.assign((function(){return this.getPath("cloudOSApplication.cloudOSService")||null}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||null}})}),environment:a.b(s.c("cloudOSService.environment")),authBag:a.b(s.c("cloudOSService.environment.authBag")),currentUser:a.b(s.c("cloudOSService.environment.authBag.user")),isReloading:a.b(!1)}).create()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return Le})),n.d(t,"d",(function(){return Ne})),n.d(t,"b",(function(){return Fe})),n.d(t,"c",(function(){return Ve})),n(1),n(0),n(2),n(11);var i=n(178),r=n(138),a=n(42),s=n(98),o=n(7),l=n(130),c=n(277),u=n(78),d=n(264),h=n(239),p=n(20),f=n(481),g=n(482),m=n(799),_=n(207),v=n(348),b=n(256),y=n(25),w=n(324),I=n(17),S=(n(248),n(13)),C=n(139),E=n(266),A=n(1236),O=n(1238),T=n(485),M=n(484),D=n(410);function P(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){P(a,i,r,s,o,"next",e)}function o(e){P(a,i,r,s,o,"throw",e)}s(void 0)}))}}var R={mixinDependencies:[M.b],staticMembers:{resetAllDerivatives:function(){for(var e,t=this.constructor.TODO_ALL_MATERIALIZED_INSTANCES_IN_STORE,n=0;e=t[n];n++)e[n].resetDerivatives()}},_derivativeSet:null,_loadedDerivativeSet:null,addDerivative:function(e){(this._derivativeSet||(this._derivativeSet=x.getInstance())).add(e),this.derivativeMayHaveLoaded(e)},removeDerivative:function(e){var t,n=!1;if((t=this._derivativeSet)&&(t.remove(e),t.length||(x.disposeInstance(t),this._derivativeSet=null)),(t=this._loadedDerivativeSet)&&(n=t.contains(e),t.remove(e),t.length||(x.disposeInstance(t),this._loadedDerivativeSet=null)),n){var i=this.serverDerivativeInfosByDerivativeId;I.a.pause(),i&&i[e.derivativeId]||this.untrackedDerivativeDidUnload(),this.derivativeDidUnload(),I.a.resume()}},derivativeMayHaveLoaded:function(e){if(e.isLoaded){var t=this._loadedDerivativeSet||(this._loadedDerivativeSet=x.getInstance()),n=!t.contains(e);if(t.add(e),n){var i=this.serverDerivativeInfosByDerivativeId;I.a.pause(),i&&i[e.derivativeId]||this.untrackedDerivativeDidLoad(),this.derivativeDidLoad(),I.a.resume()}}},derivativeDidLoad:p.i(),derivativeDidUnload:p.i(),untrackedDerivativeDidLoad:p.i(),untrackedDerivativeDidUnload:p.i(),resetDerivatives:function(){var e=this,t=arguments;e.__s._$1Sy$resetDerivatives.apply(e,t);var n=this._derivativeSet;if(n)for(var i,r=0;i=n.items[r];r++)i.resetForChangeset()},derivativeInfoForGeometricLength:function(e,t,n,i,r){e<=0&&(e=1),e||(e=1/0);var a,s=this.getDerivativeInfoSubset(t),o=s&&s.length,l=this._loadedDerivativeSet&&this._loadedDerivativeSet.byId;if(!o||n&&!l)return null;for(var c,u=0;(c=s[u])&&!(c.geometricLength>r);u++){var d=l&&Boolean(l[s[u].derivativeId]);if((!n||d)&&(!i||d||!c.isDynamic)&&(a=c,c.geometricLength>=e))break}return i&&!a?this.derivativeInfoForGeometricLength(e,t,n,!1):a},derivativeInfoForDerivativeId:function(e){var t=this.derivativeInfosByDerivativeId;return t?t[e]:null},getLoadedDerivative:function(e){return this._loadedDerivativeSet&&this._loadedDerivativeSet.byId[e&&e.derivativeId||e]||null},getDerivative:function(e){var t=e.derivativeId?e:this.derivativeInfoForDerivativeId(e),n=this._derivativeSet&&this._derivativeSet.byId;return t?n&&n[t.derivativeId]||T.a.create(t,this.constructor):null},isDerivativeLoaded:function(e){return Boolean(this.getLoadedDerivative(e))},getBestLoadedDerivative:function(e,t,n){var i=this.derivativeInfoForGeometricLength(e,t,!0,!1,n);return i?this.getLoadedDerivative(i):null},getBestDerivative:function(e,t){var n=this.derivativeInfoForGeometricLength(e,t);return n?this.getDerivative(n):null},requestDerivative:function(e,t,n,i){if(this.earliestDerivativeURLExpiry<Date.now()){this.retain(this);var r=D.a.create().retain(this),a=E.a(this._continueOrHaltDerivativeLoadAfterURLReload,this,e.derivativeId||e,t,n,r);return(this._derivativeURLReloadPromise||(this._derivativeURLReloadPromise=(o=this,k.push(o),1===k.length&&C.a(B,1e3),s.a.create()))).then(a,a),r}var o,l=e,c=Number(l)===l?this.derivativeInfoForGeometricLength(l,t,!1,n):l.derivativeId?l:this.derivativeInfoForDerivativeId(l);if(!c){var u=i||D.a.create().retain(this).autorelease(this);return u.reject(new Error("Media lacks compatible derivatives.")),u}var d=this.getLoadedDerivative(c);return!d&&t&&(d=this.getBestLoadedDerivative(c.geometricLength,t)),(!d||d.geometricLength<c.geometricLength)&&(d=T.a.create(c,this.constructor)),d._load(i)},_continueOrHaltDerivativeLoadAfterURLReload:function(e,t,n,i){this._derivativeURLReloadPromise=null,this.propertyChanged("staticDerivativeInfos"),this.earliestDerivativeURLExpiry<Date.now()?i.reject(new Error("Failed to load Media metadata.")):this.requestDerivative(e,t,n,i),i.autorelease(this),this.release(this)},createBestImageBelowFileSize:function(e){var t=arguments,n=this;return L(regeneratorRuntime.mark((function i(){var r,a,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"image/jpeg",a=t.length>2?t[2]:void 0,s=t.length>3&&void 0!==t[3]?t[3]:0,(o=n.requestDerivative(1500)).derivativeRequestReason=a,o.offscreeniness=s,i.next=8,o;case 8:return(l=i.sent).retain("DerivativeProvisionSupport#createBestImageBelowFileSize()"),i.next=12,A.a(l.drawableEntity,e,r);case 12:return c=i.sent,i.next=15,O.a(c);case 15:return u=i.sent,d=new Uint8Array(u),l.release("DerivativeProvisionSupport#createBestImageBelowFileSize()"),i.abrupt("return",d);case 19:case"end":return i.stop()}}),i)})))()},_debug_display:function(e){},__superMap:{_$1Sy$resetDerivatives:"resetDerivatives"}},x=y.Pool.extend({createInstance:function(){var e=new w.a;return e.byId={},e.clear=N,e.add=F,e.remove=V,e},disposeInstance:function(e){var t=this,n=arguments;e.length&&S.b("Disposing a derivativeSet that stilli has derivatives in it. A derivative likely failed to retain its Media."),t.__s._$6vE$disposeInstance.apply(t,n)},__superMap:{_$6vE$disposeInstance:"disposeInstance"}}).create(),N=S.b.bind(void 0,"Cannot `clear` a derivativeSet."),F=function(e){w.a.prototype.add.call(this,e)&&(this.byId[e.derivativeId]=e)},V=function(e){w.a.prototype.remove.call(this,e)&&delete this.byId[e.derivativeId]},k=[];function B(){if(k.length){var e=k[0].constructor.reload({primaryKeys:k.map((function(e){return e.pk}))});k.forEach((function(t){return t._derivativeURLReloadPromise.resolve(e)})),k.length=0}}var j=n(197),U=n(40),G=n(55),H=n(15),W=n(327),$=U.a.extend({tileCanvases:G.c(Array),indicesByMediaPK:G.c(Object),unusedIndices:G.c(Array),materializedMediasByMediaPK:G.c(Object),usedLength:0,tileSize:128,thumbSize:128,maxPixelCount:8388608,maxTileCount:H.d({set:function(e){this.maxPixelCount=this.tileSize*this.tileSize*e},get:function(){return this.maxPixelCount/this.tileSize/this.tileSize}}),maxThumbCount:H.d({set:function(e){this.maxPixelCount=this.thumbSize*this.thumbSize*e},get:function(){return this.maxPixelCount/this.thumbSize/this.thumbSize}}),thumbCountPerTile:H.d({readOnly:!0,get:function(){return this.tileSize*this.tileSize/this.thumbSize/this.thumbSize}}),thumbsAcrossTile:H.d({readOnly:!0,get:function(){return this.tileSize/this.thumbSize}}),numericalMetadata:G.c(Array),stringMetadata:G.c(Array),otherMetadata:G.c(Array),leastRecentlyUsedIndex:-1,mostRecentlyUsedIndex:-1,_tileCanvasForIndex:function(e){var t=e/this.thumbCountPerTile|0,n=this.tileCanvases[t];return n||((n=this.tileCanvases[t]=document.createElement("canvas")).width=n.height=this.tileSize,n._context=n.getContext("2d")),n},addDerivativeIfNeeded:function(e){var t=e.info;if(t){var n=this.indicesByMediaPK[t.mediaPK];(void 0===n||t._outdateCount>this._getInfoOutdateCount(n))&&(void 0!==n&&this.purgeIndex(n),this.addDerivative(e))}},addDerivative:function(e){var t=e.info;if(t){var n=t.mediaPK;this.indicesByMediaPK[n]&&S.b("Attempting to record two TinyThumb derivatives for the same media.");var i=this.unusedIndices.pop();void 0===i&&(i=this.usedLength),i===this.maxThumbCount?(this.purgeIndex(this.leastRecentlyUsedIndex),i=this.unusedIndices.pop()):this.usedLength++,i===this.usedLength-1&&this._resetDataAtIndex(i,!0);var r=this._setPixels(i,e);this._setWidth(i,r.width),this._setHeight(i,r.height),this._setNextLessRecentlyUsedIndex(i,this.mostRecentlyUsedIndex),this._setNextMoreRecentlyUsedIndex(i,-1),this._setMediaPK(i,n),this._setInfoMimeType(i,t.mimeType),this._setInfoReflectsEdits(i,t.reflectsEdits?1:0),this._setInfoOutdateCount(i,t._outdateCount),this._setInfoDerivativeId(i,t.derivativeId),this._setInfoSynthesizedFromDerivativeId(i,t.synthesizedFromDerivativeId||""),-1!==this.mostRecentlyUsedIndex&&this._setNextMoreRecentlyUsedIndex(this.mostRecentlyUsedIndex,i),this.mostRecentlyUsedIndex=i,-1===this.leastRecentlyUsedIndex&&(this.leastRecentlyUsedIndex=i),this.indicesByMediaPK[n]=i}},purgeIndex:function(e){var t=this._getMediaPK(e);delete this.indicesByMediaPK[t],this._closeLinkedListGapAroundIndex(e),this._resetDataAtIndex(e),this.unusedIndices.push(e)},bumpIndex:function(e){this._getMediaPK(e)||S.b("Cannot bump a tinyThumbStore index that is not storing any data."),this._closeLinkedListGapAroundIndex(e),this._setNextMoreRecentlyUsedIndex(e,-1),this._setNextLessRecentlyUsedIndex(e,this.mostRecentlyUsedIndex),this.mostRecentlyUsedIndex=e},_closeLinkedListGapAroundIndex:function(e){var t=this._getNextMoreRecentlyUsedIndex(e),n=this._getNextLessRecentlyUsedIndex(e);-1!==t?this._setNextLessRecentlyUsedIndex(t,n):this.mostRecentlyUsedIndex=n,-1!==n?this._setNextMoreRecentlyUsedIndex(n,t):this.leastRecentlyUsedIndex=t},_resetDataAtIndex:function(e,t){this._setWidth(e,0),this._setHeight(e,0),this._setNextLessRecentlyUsedIndex(e,-1),this._setNextMoreRecentlyUsedIndex(e,-1),this._setMediaPK(e,""),this._setInfoMimeType(e,""),this._setInfoReflectsEdits(e,0),this._setInfoOutdateCount(e,-1),this._setInfoDerivativeId(e,""),this._setInfoSynthesizedFromDerivativeId(e,""),t||this._setPixels(e,null)},_getWidth:function(e){return this.numericalMetadata[e*X+z]},_setWidth:function(e,t){this.numericalMetadata[e*X+z]=t},_getHeight:function(e){return this.numericalMetadata[e*X+K]},_setHeight:function(e,t){this.numericalMetadata[e*X+K]=t},_getNextMoreRecentlyUsedIndex:function(e){return this.numericalMetadata[e*X+Q]},_setNextMoreRecentlyUsedIndex:function(e,t){this.numericalMetadata[e*X+Q]=t},_getNextLessRecentlyUsedIndex:function(e){return this.numericalMetadata[e*X+q]},_setNextLessRecentlyUsedIndex:function(e,t){this.numericalMetadata[e*X+q]=t},_getMediaPK:function(e){return this.stringMetadata[e*ie+J]},_setMediaPK:function(e,t){this.stringMetadata[e*ie+J]=t},_getInfoMimeType:function(e){return this.stringMetadata[e*ie+ee]},_setInfoMimeType:function(e,t){this.stringMetadata[e*ie+ee]=t},_getInfoReflectsEdits:function(e){return this.numericalMetadata[e*X+Y]},_setInfoReflectsEdits:function(e,t){this.numericalMetadata[e*X+Y]=t},_getInfoOutdateCount:function(e){return this.numericalMetadata[e*X+Z]},_setInfoOutdateCount:function(e,t){this.numericalMetadata[e*X+Z]=t},_getInfoDerivativeId:function(e){return this.stringMetadata[e*ie+te]},_setInfoDerivativeId:function(e,t){this.stringMetadata[e*ie+te]=t},_getInfoSynthesizedFromDerivativeId:function(e){return this.stringMetadata[e*ie+ne]},_setInfoSynthesizedFromDerivativeId:function(e,t){this.stringMetadata[e*ie+ne]=t},_setPixels:function(e,t){var n=this._tileCanvasForIndex(e)._context,i=e%this.thumbCountPerTile,r=this.thumbSize,a=this.thumbsAcrossTile,s=r*(i%a),o=r*(i/a|0);if(!t)return n.clearRect(s,o,r,r),null;var l=W.d(t.physicalWidth,t.physicalHeight,r,r,re),c=l.width=Math.round(l.width),u=l.height=Math.round(l.height);return t.drawIntoContext(n,s,o,c,u),l},staticMembers:{__QUALIFIED_CLASS_NAME__:"TinyThumbStore"}}),z=0,K=1,q=2,Q=3,Y=4,Z=5,X=6,J=0,ee=1,te=2,ne=3,ie=4,re={},ae=$.create(),se={mixinDependencies:[R],staticMembers:{suspendDerivativeCreations:function(){oe++},resumeDerivativeCreations:function(){--oe<=0&&(oe=0,ce())}},getBestLoadedDerivative:function(){var e=this,t=arguments,n=e.__s._$Ly$getBestLoadedDerivative.apply(e,t);return n&&(n._stopgap_shouldCache=!0),n},requestDownsample:function(e,t){if(j.a.enableDerivativeDownsampling){var n=this.constructor.isDerivativeSubsetKey(t)?t:null,i=n?this.getBestLoadedDerivative(e,n):t;i&&pe(i.geometricLength,e)&&this.scheduleDerivativeCreation(he(e),n||i.derivativeId)}},_cleanUpAndOrCancelPendingDerivativeCreations:function(){le.remove(this);var e=this._pendingDerivativeCreations;if(e){var t=y.arrayPool;e.forEach(t.disposeInstance,t),t.disposeInstance(e),this._pendingDerivativeCreations=null}},scheduleDerivativeCreation:function(){for(var e=y.arrayPool,t=this._pendingDerivativeCreations||(this._pendingDerivativeCreations=e.getInstance()),n=v.a(e.getInstance(),arguments),i=!1,r=t.length;r--;){for(var a=t[r],s=!0,o=Math.max(a.length,n.length);o--;)if(n[o]!==a[o]){s=!1;break}if(s){i=!0;break}}i||(t.push(n),le.add(this),ce())},createDerivative:function(e,t,n,i){var r=this.constructor.isDerivativeSubsetKey(t)&&t,a=r?null:this.derivativeInfoForDerivativeId(t),s=r?this.getBestLoadedDerivative(e,r):a?this.getLoadedDerivative(a):null;return e&&s&&(n||pe(s.geometricLength,e))?s.createResampledDerivative(e,n,i):null},_doPendingDerivativeCreations:function(){var e=this._pendingDerivativeCreations;if(e){for(var t=e.length;t--;){var n=e[t];this.createDerivative.apply(this,n)}this._cleanUpAndOrCancelPendingDerivativeCreations()}},cleanup:function(){var e=this,t=arguments;this._cleanUpAndOrCancelPendingDerivativeCreations(),e.__s._$32F$cleanup.apply(e,t)},__superMap:{_$Ly$getBestLoadedDerivative:"getBestLoadedDerivative",_$32F$cleanup:"cleanup"}},oe=0,le=new w.a;function ce(){ue||(ue=b.a(de))}var ue=0;function de(){if(ue&&(window.cancelAnimationFrame(ue),ue=0),!(oe>0)&&le.length){var e=Date.now()+5;do{le.oneItem._doPendingDerivativeCreations()}while(le.length&&Date.now()<e);le.length&&ce()}}function he(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function pe(e,t){var n=he(t);return he(e)>=2*n&&(n>ae.thumbSize||!ae.usedLength)}var fe={mixinDependencies:[R,se]},ge=n(817),me=n(1239),_e=n(466),ve=n(203),be=n(210),ye=n(411),we=n(205),Ie=n(250),Se=n(230),Ce=n(586),Ee=n(224),Ae=n(189),Oe=n(223),Te=n(584),Me=n(330);function De(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){De(a,i,r,s,o,"next",e)}function o(e){De(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Le=i.a.extend({mixinDependencies:[f.a,g.a,m.a,Te.b,fe,Ce.a],staticMembers:{HydrationLevel:r.b("HydrationLevel",{META:3,FULL:7,ALL:99}),Type:r.b("Type",{IMAGE:"image",SCREENSHOT:"screenshot",PANORAMA:"panorama",LIVE_PHOTO:"live-photo",BURST:"burst",SDOF:"sdof",VIDEO:"video",SLOWMO:"slowmo",TIMELAPSE:"time-lapse",AUDIO:"audio",OTHER:"other"}),genericTypeForSpecificType:function(e){switch(e){case this.Type.IMAGE:case this.Type.SCREENSHOT:case this.Type.PANORAMA:case this.Type.LIVE_PHOTO:case this.Type.SDOF:case this.Type.BURST:return this.Type.IMAGE;case this.Type.VIDEO:case this.Type.TIMELAPSE:case this.Type.SLOWMO:case this.Type.AUDIO:return this.Type.VIDEO;case this.Type.OTHER:default:return this.Type.OTHER}},load:function(){var e=arguments,t=this;return Pe(regeneratorRuntime.mark((function n(){var i,r,s,o,l,c,u,d,h,p,f,g,m,v,b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:{},r=i.isForcedFetch,s=void 0!==r&&r,o=i.hydrationLevel,l=void 0===o?Le.HydrationLevel.FULL:o,c=i.primaryKeys,u=_.Record.getZonePrimaryKeyFromPrimaryKey(c[0]),!c.some((function(e){return _.Record.getZonePrimaryKeyFromPrimaryKey(e)!==u}))){n.next=6;break}return n.abrupt("return",t._loadFromMultipleZones(i));case 6:return n.next=8,Ae.a.load({primaryKeys:c,isForcedFetch:s,hydrationLevel:l});case 8:return d=a.n(),h=c.map((function(e){return _.Record.getPrimaryKeyWithZonePK(u,d.readDataForPrimaryKey(Ae.a,e).masterRefRecordName)})),n.next=12,Ee.a.load({primaryKeys:h,isForcedFetch:s,hydrationLevel:l});case 12:for(p=[],f=0,g=c.length;f<g;f++)m=c[f],v=h[f],(b=d.readDataForPrimaryKey(t,m)||t.getRawHash(m,l)).hydrationLevel=l.name,b.asset=m,b.master=v,p[f]=b;return d.loadData(t,p),n.abrupt("return",t.findByPrimaryKeys(c));case 16:case"end":return n.stop()}}),n)})))()},_loadFromMultipleZones:function(e){var t=this;return Pe(regeneratorRuntime.mark((function n(){var i,r,o,l,c,u,d,h,p,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=e.primaryKeys,o=a.n(),l={},r.forEach((function(e,t){return l[e]=t})),c=[],u={},d=0,h=r.length;d<h;d++)p=r[d],f=_.Record.getZonePrimaryKeyFromPrimaryKey(p),(u[f]||(c[c.length]=u[f]=Object.assign({},e,{primaryKeys:[]}))).primaryKeys.push(p);return n.t0=t,n.t1=(i=Array.prototype.concat).call,n.t2=i,n.next=12,s.a.all(c.map((function(e){return t.load(e)})));case 12:return n.t3=n.sent.map((function(e){return e.retain().autorelease().encodedToArray().map((function(e){return o.constructor.getPrimaryKeyForStoreId(e)}))})),n.t4=n.t1.apply.call(n.t1,n.t2,n.t3).filter((function(e){return l[e]>=0})).sort((function(e,t){return l[e]-l[t]})),n.abrupt("return",n.t0.findByPrimaryKeys.call(n.t0,n.t4));case 15:case"end":return n.stop()}}),n)})))()},loadKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.HydrationLevel.FULL;return this.performOperation(Se.a.Media.LoadKey,{parentPK:e,hydrationLevel:t})},findByAssetPK:function(e){return Le.find(e)},findOrCreateByAssetPK:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.HydrationLevel.FULL,n=Le.find(e);if(n)return n;var i="Media: findOrCreateByAssetPK",r=Ae.a.find(e);if(r){r.retain(this,i);var s=_.Record.getPrimaryKey(r.zone,r.masterRefRecordName),o=Ee.a.find(s);if(r.release(this,i),o){o.retain(this,i);var l=a.n(),c=this.getRawHash(e,t);c.master=s,o.release(this,i),c.asset=e;var u=t!==Le.HydrationLevel.FULL;return l.loadData(this,c,u),Le.find(c.pk).retain(this,i).autorelease(this,i)}}},getRawHash:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.pk=e,n.hydrationLevel=t.name,n.master=void 0,n.asset=void 0,n},feedbackService:o.b({strong:!0,readOnly:!0,get:function(){var e=a.n();return e&&e.feedbackService}}),FeedbackErrorType:o.b({strong:!0,readOnly:!0,get:function(){var e=a.n();return e&&e.FeedbackErrorType}}),timingService:o.b({strong:!0,readOnly:!0,get:function(){var e=a.n();return e&&e.timingService}}),__QUALIFIED_CLASS_NAME__:"Media"},removeContainerRelationRef:function(e){var t=e.pk,n=a.n(),i=this.getDataHash(),r=i.pk,s=i.containerRelations;s||(s=[]);var o=s.indexOf(t);if(-1===o)return l.b.warn("Unexpected ref mgmt: rm ContainerRelation "+t+" from "+r);var c=s.slice(0);c.splice(o,1);var u={pk:r,containerRelations:c};n.loadData(this.constructor,u,!0)},addContainerRelationRef:function(e){var t=e.pk,n=a.n(),i=this.getDataHash(),r=i.pk,s=i.containerRelations;if(s||(s=[]),-1===s.indexOf(t)){var o=s.slice(0);o.push(t);var l={pk:r,containerRelations:o};n.loadData(this.constructor,l,!0)}},pk:i.c({isPrimaryKey:!0,readOnly:!0}),hydrationLevel:o.b(),master:c.a.toOne({type:Ee.a,strong:!0,readOnly:!0}),asset:c.a.toOne({type:Ae.a,strong:!0,readOnly:!0}),primaryMaster:o.b({dependencies:["master"],strong:!0,readOnly:!0,get:Object.assign((function(){return this.master}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),primaryAsset:o.b({dependencies:["asset"],strong:!0,readOnly:!0,get:Object.assign((function(){return this.asset}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),date:o.b(u.c("primaryAsset.assetDate")),timeZoneOffset:o.b({dependencies:["primaryAsset","primaryMaster"],readOnly:!0,get:Object.assign((function(){var e=this.primaryAsset,t=this.primaryMaster;if(e&&t){var n=e.timeZoneOffset,i=t.mediaMetaDataEnc;if(!n&&0!==n&&i){var r=i.DateStamp,a=i.TimeStamp,s=i.DateTimeOriginal;if(!r||!a||!s)return;var o=s.split(" ",2),l=o[0],c=o[1];n=-(new Date(r.replace(/:/g,"-")+"T"+a)-new Date(l.replace(/:/g,"-")+"T"+c))/1e3}return n}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a){var s=r.timeZoneOffset,o=a.mediaMetaDataEnc;if(!s&&0!==s&&o){var l=o.DateStamp,c=o.TimeStamp,u=o.DateTimeOriginal;if(!l||!c||!u)return;var d=u.split(" ",2),h=d[0],p=d[1];s=-(new Date(l.replace(/:/g,"-")+"T"+c)-new Date(h.replace(/:/g,"-")+"T"+p))/1e3}return s}}})}),hlsMasterPlaylistUrl:o.b({readOnly:!0,dependencies:["isEdited","primaryMaster.hlsMasterPlaylistUrl","primaryAsset.hlsMasterPlaylistUrl","baseFileName"],get:Object.assign((function(){var e=this.isEdited?this.getPath("primaryAsset.hlsMasterPlaylistUrl"):this.getPath("primaryMaster.hlsMasterPlaylistUrl");return e?e.replace(M.c,encodeURIComponent(this.baseFileName+".m3u8")):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?i.internalGetPath(this,t[2+n]):i.internalGetPath(this,t[1+n]);return r?r.replace(M.c,encodeURIComponent(i.internalGet(this,t[3+n])+".m3u8")):void 0}})}),baseFileName:o.b({readOnly:!0,dependencies:["primaryMaster.filenameEnc"],get:Object.assign((function(){var e=this.getPath("primaryMaster.filenameEnc");return e?e.slice(0,(e.lastIndexOf(".")+1||e.length+1)-1):"media"}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.slice(0,(r.lastIndexOf(".")+1||r.length+1)-1):"media"}})}),addedDate:o.b(u.c("primaryAsset.addedDate")),locationLatitude:o.b(u.c("primaryAsset.locationLatitude")),locationLongitude:o.b(u.c("primaryAsset.locationLongitude")),_locationLatitudeReducedPrecision:o.b({readOnly:!0,dependencies:["locationLatitude"],get:Object.assign((function(){var e=this.locationLatitude;return Number.isFinite(e)?e.toFixed(6):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Number.isFinite(r)?r.toFixed(6):void 0}})}),_locationLongitudeReducedPrecision:o.b({readOnly:!0,dependencies:["locationLongitude"],get:Object.assign((function(){var e=this.locationLongitude;return Number.isFinite(e)?e.toFixed(6):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Number.isFinite(r)?r.toFixed(6):void 0}})}),caption:o.b(u.c("primaryAsset.captionEnc")),specificType:o.b(),_specificType:o.b({readOnly:!0,dependencies:["primaryMaster.dataDidChange","primaryAsset.dataDidChange","primaryMaster.dataClassType","primaryMaster.itemType","primaryAsset.isBurst","isLivePhoto","primaryAsset.assetSubtype"],get:Object.assign((function(){var e=this.constructor.Type,t=this.primaryMaster,n=this.primaryAsset;if(!t||!n)return e.OTHER;switch(t.dataClassType){case Ie.a.IMAGE:if(n.isBurst)return e.BURST;if(n.isSDOF)return e.SDOF;switch(n.assetSubtype){case we.a.PHOTO_PANORAMA:return e.PANORAMA;case we.a.PHOTO_SCREENSHOT:return e.SCREENSHOT;default:return this.isLivePhoto?e.LIVE_PHOTO:e.IMAGE}case Ie.a.MOVIE:switch(n.assetSubtype){case we.a.VIDEO_SLOWMO:return e.SLOWMO;case we.a.VIDEO_TIMELAPSE:return e.TIMELAPSE;case we.a.NONE:default:return e.VIDEO}case Ie.a.AUDIO:return e.AUDIO;case Ie.a.UNKNOWN:return"com.adobe.pdf"===this.getPath("primaryMaster.itemType")?e.IMAGE:e.OTHER;default:return l.b.warn("Unexpected Master DataClassType "+t.dataClassType),e.OTHER}}),{__CW__getter:function(e,t,n,i){var r=this.constructor.Type,a=this.primaryMaster,s=this.primaryAsset;if(!a||!s)return r.OTHER;switch(a.dataClassType){case Ie.a.IMAGE:if(s.isBurst)return r.BURST;if(s.isSDOF)return r.SDOF;switch(s.assetSubtype){case we.a.PHOTO_PANORAMA:return r.PANORAMA;case we.a.PHOTO_SCREENSHOT:return r.SCREENSHOT;default:return i.internalGet(this,t[5+n])?r.LIVE_PHOTO:r.IMAGE}case Ie.a.MOVIE:switch(s.assetSubtype){case we.a.VIDEO_SLOWMO:return r.SLOWMO;case we.a.VIDEO_TIMELAPSE:return r.TIMELAPSE;case we.a.NONE:default:return r.VIDEO}case Ie.a.AUDIO:return r.AUDIO;case Ie.a.UNKNOWN:return"com.adobe.pdf"===i.internalGetPath(this,t[3+n])?r.IMAGE:r.OTHER;default:return l.b.warn("Unexpected Master DataClassType "+a.dataClassType),r.OTHER}}}),didChange:function(e){this.specificType!==e&&(this.specificType=e)}}),durationString:o.b({readOnly:!0,dependencies:["primaryAsset.duration"],get:Object.assign((function(){var e=this.getPath("primaryAsset.duration");return d.a(e)?me.a(e):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return d.a(r)?me.a(r):""}})}),isEdited:o.b(u.c("primaryAsset.isEdited")),isLivePhoto:o.b(u.c("primaryAsset.isLivePhoto")),isHEVCVideo:o.b(u.c("primaryMaster.isHEVCVideo")),isHEICImage:o.b(u.c("primaryMaster.isHEICImage")),isHdr:o.b({readOnly:!0,dependencies:["primaryAsset.assetHDRType"],get:Object.assign((function(){var e=this.getPath("primaryAsset.assetHDRType");return e&&e!==ye.a.NONE&&e!==ye.a.EV0}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r!==ye.a.NONE&&r!==ye.a.EV0}})}),isSDOF:o.b(u.c("primaryAsset.isSDOF")),type:o.b(u.c("primaryMaster.dataClassType")),subtype:o.b(u.c("primaryAsset.assetSubtype")),genericType:o.b({readOnly:!0,dependencies:["specificType"],get:Object.assign((function(){return this.constructor.genericTypeForSpecificType(this.specificType)}),{__CW__getter:function(e,t,n,i){return this.constructor.genericTypeForSpecificType(i.internalGet(this,t[0+n]))}})}),cannotHaveImageDerivative:o.b({readOnly:!0,dependencies:["specificType","genericType"],get:Object.assign((function(){return this.specificType===this.constructor.Type.AUDIO||this.genericType===this.constructor.Type.OTHER}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===this.constructor.Type.AUDIO||i.internalGet(this,t[1+n])===this.constructor.Type.OTHER}})}),dimensions:o.b({readOnly:!0,dependencies:["renderableImageDerivativeInfos","areClientDerivativesDirty"],get:Object.assign((function(){var e=this._dimensions_lastRet;e&&y.arrayPool.autodisposeInstance(e),this._dimensions_lastRet=null;var t=this.primaryAsset,n=this.primaryMaster;if(!t||!n)return null;var i=y.arrayPool.getInstance();if(this._dimensions_lastRet=i,this.areClientDerivativesDirty){var r=this.renderableImageDerivativeInfos,a=r&&r[r.length-1];if(a)return i[0]=a.width,i[1]=a.height,i}else for(var s=t.getDataHash(),o=s;o;o=o===s?n.getDataHash():null)if(i.push.apply(i,Ne(o,o!==s)),i.length)return i;return this.cannotHaveImageDerivative||l.b.warn("While trying to ascertain dimensions, could not find a single derivative on asset or master. Media PK "+this.pk),i[0]=640,i[1]=400,i}),{__CW__getter:function(e,t,n,i){var r=this._dimensions_lastRet;r&&y.arrayPool.autodisposeInstance(r),this._dimensions_lastRet=null;var a=this.primaryAsset,s=this.primaryMaster;if(!a||!s)return null;var o=y.arrayPool.getInstance();if(this._dimensions_lastRet=o,i.internalGet(this,t[1+n])){var c=i.internalGet(this,t[0+n]),u=c&&c[c.length-1];if(u)return o[0]=u.width,o[1]=u.height,o}else for(var d=a.getDataHash(),h=d;h;h=h===d?s.getDataHash():null)if(o.push.apply(o,Ne(h,h!==d)),o.length)return o;return this.cannotHaveImageDerivative||l.b.warn("While trying to ascertain dimensions, could not find a single derivative on asset or master. Media PK "+this.pk),o[0]=640,o[1]=400,o}})}),width:o.b({readOnly:!0,dependencies:["dimensions"],get:Object.assign((function(){var e=this.dimensions;return e?e[0]:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r[0]:void 0}})}),height:o.b({readOnly:!0,dependencies:["dimensions"],get:Object.assign((function(){var e=this.dimensions;return e?e[1]:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r[1]:void 0}})}),aspectRatio:o.b({readOnly:!0,dependencies:["width","height"],get:Object.assign((function(){return this.width/this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),isFavorite:o.b(u.c("primaryAsset.isFavorite")),isHidden:o.b(u.c("primaryAsset.isHidden")),dateExpunged:o.b(u.c("primaryAsset.dateExpunged")),burstCount:o.b({readOnly:!0,dependencies:["burstMedias.length","isBurst"],get:Object.assign((function(){if(!this.isBurst)return 0;var e=this.getPath("burstMedias.length");return e||_e.b(E.a(this._getBurstCount,this)),e}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return 0;var r=i.internalGetPath(this,t[0+n]);return r||_e.b(E.a(this._getBurstCount,this)),r}})}),burstMedias:c.a.toMany({type:"(self)"}),isPreparingBurstMediasArray:o.b({defaultValue:0,didChange:function(e){!e&&this._ipbma_isRetained&&(this._ipbma_isRetained=!1,this.autorelease(this,"self-retain for isPreparingBurstMediasArray")),e&&!this._ipbma_isRetained&&(this._ipbma_isRetained=!0,this.retain(this,"self-retain for isPreparingBurstMediasArray"))}}),_decrement_isPreparingBurstMediasArray:ve.b((function(){this.isPreparingBurstMediasArray--})),_getBurstCount:function(){if(!this.isBurst)return s.a.resolve(0);var e=this.constructor.performOperation(Se.a.Media.BurstCount,{burstId:this.primaryAsset.burstId,parentMediaPK:this.pk});return this.isPreparingBurstMediasArray++,e.then(this._decrement_isPreparingBurstMediasArray,this._decrement_isPreparingBurstMediasArray),e},loadBurstMediasForRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isBurst||0===this.burstCount)return l.b.warn("This media is not a burst."),s.a.resolve([]);for(var i=n,r=this.burstMedias._array,a=e;a<=t&&!i;a++)void 0===r[a]&&(i=!0);if(i){var o=this.constructor.performOperation(Se.a.Media.BurstList,{burstId:this.primaryAsset.burstId,parentMediaPK:this.pk,first:e,last:t});return this.isPreparingBurstMediasArray++,o.then(this._decrement_isPreparingBurstMediasArray,this._decrement_isPreparingBurstMediasArray),o}var c=Math.abs(t-e);if(c<this.burstCount){var u=this.burstMedias.storeIds.slice(e,t),d=h.a.createFromStoreIds(u,Le);return s.a.resolve(d)}return s.a.resolve(this.burstMedias)},commitBurstPromotionAlterations:function(e){var t=e;if(!Object.keys(t).length)return s.a.resolve();var n=y.arrayPool,i=n.getAutodisposingInstance(),r=n.getAutodisposingInstance(),o=n.getAutodisposingInstance(),l=this.burstMedias,c=l&&l.length;if(!c)return s.a.reject();for(var u=0;u<c;u++){var d=l.objectAt(u);if(d){d.retain(this,"preparing to commit burst alterations");var h=d.primaryAsset;if(h){if(h.retain(this,"preparing to commit burst alterations"),(r[u]=i[u]=h.compositeBurstFlags)&be.a.UNKNOWN.value)return s.a.reject();var p=t[d.pk];void 0!==p&&p!==h.isPromotedFromBurst&&(o[u]=p),d.release(this,"preparing to commit burst alterations"),h.release(this,"preparing to commit burst alterations")}}}if(!o.length)return s.a.resolve();for(var f=be.a.NOT_PICKED.value,g=be.a.AUTO_PICKED.value,m=be.a.USER_FAVORITE.value,_=be.a.STACK.value,v=be.a.FIRST_PICKED.value,b=0;b<c;b++){var w=i[b];w&_&&(w&=~_);var I=o[b];!0===I?(w|=m,w&=~f):!1===I&&((w&=~m)&g||(w|=f)),i[b]=w}for(var S=-1,C=0;C<c&&-1===S;C++){var E=i[C];E&v&&!(E&m)&&(S=C)}for(var A=0;A<c&&-1===S;A++){var O=i[A];O&g&&!(O&m)&&(S=A)}for(var T=0;T<c&&-1===S;T++)i[T]&m||(S=T);for(var M=0;M<c&&-1===S;M++)i[M]&v&&(S=M);for(var D=0;D<c&&-1===S;D++)i[D]&g&&(S=D);-1===S&&(S=0),i[S]|=_;for(var P=0;P<c;P++){var L=i[P];L!==r[P]&&l.objectAt(P).retain(this,"commit burst alterations").autorelease(this,"commit burst alterations").primaryAsset.retain(this,"commit burst alterations").autorelease(this,"commit burst alterations").setCompositeBurstFlags(L)}return a.n().commit()},isBurst:o.b(u.c("primaryAsset.isBurst")),isPromotedFromBurst:o.b(u.c("primaryAsset.isPromotedFromBurst")),isAutopickedInBurst:o.b(u.c("primaryAsset.isAutopickedInBurst")),_recordLoadTiming:p.h("derivativeDidLoad",(function(e){if(e&&!this._hasAlreadySeenFirstDerivative){this._hasAlreadySeenFirstDerivative=!0,Re++;var t=this.constructor.timingService;switch(Re){case 1:t&&t.report&&t.report("Load1");break;case 10:t&&t.report&&t.report("Load10");break;case 100:t&&t.report&&t.report("Load100")}}})),recover:function(){var e=this.primaryAsset;e.isDeleted=!1,e.isBurst&&this.recoverChildBurstMedias()},delete:function(){var e=this.primaryAsset;this.isPromotedFromBurst?e.setCompositeBurstFlags(be.a.NOT_PICKED.value):(e.isBurst&&this.deleteOrPermanentlyDeleteBurst(e,!0),e.isDeleted=!0)},updatePromotedItemsOnExpunge:function(e){var t=!1;e.forEach((function(e){e&&e.primaryAsset&&e.primaryAsset.burstId&&(e.primaryAsset.burstId="",e.primaryAsset.burstFlags=be.a.NOT_IN_BURST,e.primaryAsset.burstFlagsExt=be.a.NOT_IN_BURST,e.isPromotedFromBurst||(e.primaryAsset.isDeleted||(e.primaryAsset.isDeleted=!0),e.primaryAsset.isExpunged=!0),t=!0)})),t&&this._cwDataManager.commit()},updatePromotedItemsOnDelete:function(e){var t=!1;e.forEach((function(e){e&&!e.isPromotedFromBurst&&e.primaryAsset&&e.primaryAsset.burstId&&(e.primaryAsset.isDeleted=t=!0)})),t&&this._cwDataManager.commit()},permanentlyDelete:function(){var e=this.primaryAsset;e.isBurst&&this.deleteOrPermanentlyDeleteBurst(e,!1),e.isExpunged=!0},deleteOrPermanentlyDeleteBurst:function(e,t){var n=this,i=this.burstMedias.length;if(i)return this.loadBurstMediasForRange(0,i-1).then((function(){return t?n.updatePromotedItemsOnDelete(n.burstMedias):n.updatePromotedItemsOnExpunge(n.burstMedias)}));this._getBurstCount().then((function(){var e=n.burstMedias.length;return n.loadBurstMediasForRange(0,e-1).then((function(){return t?n.updatePromotedItemsOnDelete(n.burstMedias):n.updatePromotedItemsOnExpunge(n.burstMedias)}))}))},_cwDataManager:o.b((function(){return a.n()})),recoverChildBurstMedias:function(){var e=this;return Pe(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.burstMedias.length){t.next=5;break}return t.next=4,e._getBurstCount();case 4:n=e.burstMedias.length;case 5:return t.next=7,e.loadBurstMediasForRange(0,n-1);case 7:i=!1,e.burstMedias.forEach((function(e){if(e){var t=e.primaryAsset;t.isDeleted&&(t.isDeleted=!1,i=!0)}})),i&&e._cwDataManager.commit();case 10:case"end":return t.stop()}}),t)})))()},containerRelations:c.a.toMany({type:Oe.a}),_maintainDirtyDerivativeDimensionsOverride:p.h("areClientDerivativesDirty","dimensions",(function(e,t){e?ke[this.id]=t:delete ke[this.id]}))}),Re=0,xe=Me.a.shouldUseH2ForDerivativeLoading;function Ne(e,t){var n=ke[e.recordName];if(n)return n;var i=y.arrayPool.getAutodisposingInstance();return t&&e.resOriginalWidth?(e.originalOrientation>=5?i.push(e.resOriginalHeight,e.resOriginalWidth):i.push(e.resOriginalWidth,e.resOriginalHeight),i):e.resJPEGFullWidth?(i.push(e.resJPEGFullWidth,e.resJPEGFullHeight),i):e.resJPEGLargeWidth?(i.push(e.resJPEGLargeWidth,e.resJPEGLargeHeight),i):e.resJPEGMedWidth?(i.push(e.resJPEGMedWidth,e.resJPEGMedHeight),i):e.resJPEGThumbWidth?(i.push(e.resJPEGThumbWidth,e.resJPEGThumbHeight),i):e.dataClassType===Ie.a.AUDIO.value?(i.push(640,400),i):i}function Fe(e,t){var n=Ne(t,!1),i=n[0],r=n[1];if(!i||!r){var a=Ne(e,!0);i=a[0],r=a[1]}return i&&r?i/r:1}function Ve(e,t){var n=t.duration;return d.a(n)?me.a(n):""}Me.a.shouldChangeBackgroundCVWSUrlsToForeground&&ge.a.sharder.registerUrlTransform((function(e){return e.replace("https://cvws-proxy.icloud-content.com","https://cvws.icloud-content.com")})),xe?ge.a.sharder.configureOrigin({origin:"https://cvws.icloud-content.com",shardCount:1,maxRequestsPerShard:12,applyShardToOrigin:function(){return"https://cvws-h2.icloud-content.com"}}):ge.a.sharder.configureOrigin({origin:"https://cvws.icloud-content.com",shardCount:3,maxRequestsPerShard:4,applyShardToOrigin:function(e,t){var n=("00"+(t+1)).slice(-3),i=e.indexOf(".");return e.substring(0,i)+"-"+n+e.substring(i)}});var ke={}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var i=n(13),r=n(82),a=n(545),s=n(318),o=n(263),l=n(208),c=n(139),u=n(160),d=n(138),h=[],p={then:function(e,t){var n=this.internalPromise,i=m.createEmpty();return this.isExceptionHandlingEnabled&&(e&&(e=f(i,e),i._resolveHandler=e),t&&(t=f(i,t,!0),i._rejectHandler=t,this._hasRejectionHandler=t),this._linkNestedPromise(i)),i.internalPromise=n.then(e,t),i},catch:function(e){return this.then(null,e)},finally:function(e){var t=this.internalPromise,n=m.create();n._hasRejectionHandler=!1;var i=function(t){e(t),n.resolve(t)},r=function(t){e(t),n.rejectWithExceptionHandling(t)};return e&&this.isExceptionHandlingEnabled?t.then(f(n,i),f(n,r,!0)):e&&t.then(i,r),this._linkNestedPromise(n)},promiseState:null,isExceptionHandlingEnabled:!0,resolve:function(e){if(this.promiseState===m.PENDING)if(e===this&&Object(i.b)("Promise cannot resolve with itself "+this,this),e instanceof Promise||Object(r.a)(e,m))e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this));else if(Object(a.a)(e))try{e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this))}catch(t){this._rejectHandler(t)}else this._resolveHandler(e)},reject:function(e){this.promiseState===m.PENDING&&(this._rejectHandlerWasCalledDirectly=!0,this._rejectHandler(e))},rejectWithExceptionHandling:function(e){this.promiseState===m.PENDING&&(this._hasRejectionHandlerInChain()?this._rejectHandler(e):(this._exceptionWasThrown=!0,Object(s.b)((function(){throw e}))))},init:function(){var e=this,t=arguments;e.__s._$2LW$init.apply(e,t),this.promiseState=m.PENDING,void 0===this.internalPromise&&(this.internalPromise=this._createPromise())},_createPromise:function(){var e=this;return new Promise((function(t,n){e.isExceptionHandlingEnabled?(e._resolveHandler=f(e,t),e._rejectHandler=f(e,n,!0)):(e._resolveHandler=function(n){e.promiseState=m.RESOLVED.FULFILLED,t(n)},e._rejectHandler=function(t){e.promiseState=m.RESOLVED.REJECTED,n(t)})}))},internalPromise:void 0,_resolveHandler:null,_rejectHandler:null,_hasRejectionHandler:!1,_rejectHandlerWasCalledDirectly:!1,_exceptionWasThrown:!1,_nestedPromises:null,_parentPromise:null,_linkNestedPromise:function(e){return this._nestedPromises=this._nestedPromises||(this._nestedPromises=[]),this._nestedPromises.push(e),e._parentPromise=this,e},_hasRejectionHandlerInChain:function(e){for(var t=this;t;){if(t._hasRejectionHandler&&t._hasRejectionHandler!==e&&t.promiseState===m.PENDING)return!0;t=t._parentPromise}return function e(t){var n=t._nestedPromises;if(n)for(var i=0,r=n.length;i<r;i++){var a=n[i];if(a._hasRejectionHandler||e(a))return!0}return!1}(this)},__superMap:{_$2LW$init:"init"}};function f(e,t,n){var i;return i=function(){var a,l=0,c=0,u=arguments.length;h.length=u+l-c;for(var d=c,p=l;d<u;d++,p++)h[p]=arguments[d];var f=h;try{(a=Object(o.e)(t,this,f))&&Object(r.a)(a,m)&&e._linkNestedPromise(a)}catch(_){var g=e._hasRejectionHandlerInChain(i);if(!Object(s.a)().exceptionWasHandled)throw g||(e._exceptionWasThrown=!0,Object(s.b)((function(){throw _}))),_}return e.promiseState=n?m.RESOLVED.REJECTED:m.RESOLVED.FULFILLED,a}}var g=Object(d.b)("PROMISE_STATES",(function(e){e("PENDING"),e("RESOLVED",(function(e){e("FULFILLED"),e("REJECTED")}))})),m=u.a.extend(g.toStaticMixin(),p,{staticMembers:{wrap:function(e){return e instanceof Promise?this.wrapPromise(e):Object(a.a)(e)?this.resolve(e):Object(l.a)(e)?this.wrapFunction(e):void Object(i.b)("CW.Promise.wrap can only be used with functions or thenables",e)},wrapPromise:function(e){return this.create({internalPromise:e})},wrapFunction:function(e){Object(l.a)(e)||Object(i.b)("CW.Promise.wrapFunction can only be used with a function.",e);var t=this;return function(){var n=t.create(),i=arguments;return Object(c.a)(function(){try{var t=e.apply(this,i);n.resolve(t)}catch(r){n.rejectWithExceptionHandling(r)}}.bind(this),0),n}},invokeFunction:function(e,t){var n=this.wrapFunction(e);return n.call(n,t)},createEmpty:function(){return this.create({internalPromise:null})},waterfall:function(e,t){var n=void 0!==t,i=n?this.invokeFunction(_(t)):void 0;if(0===e.length)return i||this.resolve();var r,a=0,s=e.length;for(n||(a=1,i=this.invokeFunction(_(e[0])));a<s;a++)r=_(e[a]),i=i.then(this.wrapFunction(r));return i},sequence:function(e){var t=[];if(0===e.length)return this.resolve(t);for(var n,i=function(e){t.push(e)},r=1,a=e.length,s=this.invokeFunction(_(e[0])).then(i);r<a;r++)n=_(e[r]),s=s.then(this.wrapFunction(n)).then(i);return s.then(_(t))},concurrent:function(e,t){if(t=t||1,0===e.length)return this.resolve([]);if(e.length<=t)return this.all(e);var n=this,i=this.create(),r=[],a=[],s=e;return function e(){for(var o,l,c;a.length<t&&s.length>0;)o=_(s.shift()),l=n.invokeFunction(o).then((function(t){r.push(t),c=a.indexOf(this),a.splice(c,1),e()})).catch(i.reject.bind(i)),a.push(l);a.length||s.length||i.resolve(r)}(),i},all:function(){return this.resolve(Promise.all.apply(Promise,arguments))},race:function(){return this.resolve(Promise.race.apply(Promise,arguments))},resolve:function(){var e=this.create();return e.resolve.apply(e,arguments),e},reject:function(){var e=this.create();return e.reject.apply(e,arguments),e},allSettled:function(e){return Array.isArray(e)||(e=Array.from(e)),this.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))})))},__QUALIFIED_CLASS_NAME__:"CorePromise"}});function _(e){return Object(l.a)(e)?e:function(){return e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var i=n(138),r=n(40),a=n(123),s=n(200),o=n(15),l=n(74),c=n(389),u=Object(i.b)("GestureRecognizerState",(function(e){e("Possible"),e("Failed"),e("Ended"),e("Began"),e("Changed"),e("Cancelled")})),d=u.Possible,h=u.Failed,p=r.a.extend(a.a,s.a,{delegate:c.a,event:"",shouldPreventDefault:!0,location:null,ignore:function(e){this.sequence.gestureRecognizerIgnoredPointerId(this,e.pointerId)},isEnabled:!0,state:Object(o.d)({type:u,defaultValue:d,set:function(e){if(this._isDone&&e!==h)throw new Error("GestureRecognizer: cannot set `state`. The state machine has already finished.");var t=this._stateMachine.next(e),n=t.value;n&&(e=n),t.done&&!this._isDone&&(this._isDone=!0),this._state=e;var i=this.sequence;return i&&i.gestureRecognizerStateChanged(this,e),this._state}}),view:null,pointerDown:l.a.define(),pointerMove:l.a.define(),pointerUp:l.a.define(),pointerCancel:l.a.define(),reset:function(){this._isDone=!1,this.sequence=null,this._initializeStateMachine()},shouldBegin:function(){return this.delegate.gestureRecognizerShouldBegin(this)},shouldReceive:function(e){return"click"!==e.type&&this.delegate.gestureRecognizerShouldReceive(this,e)},shouldRecognizeSimultaneouslyWith:function(e){return this.delegate.gestureRecognizerShouldRecognizeSimultaneouslyWith(this,e)},shouldRequireFailureOf:function(e){return this.delegate.gestureRecognizerShouldRequireFailureOf(this,e)},shouldBeRequiredToFailBy:function(e){return this.delegate.gestureRecognizerShouldBeRequiredToFailBy(this,e)},gestureWasRecognized:function(){var e=this.event;if(!e)throw new Error("GestureRecognizer: event may not be empty");this.view.sendEvent(e,this)},stateGenerator:null,_initializeStateMachine:function(){this._stateMachine=this.stateGenerator(this),this._stateMachine.next(),this.state=d},init:function(){var e=this,t=arguments;this._stateMachine=this.stateGenerator(this),this._stateMachine.next(),e.__s._$5Io$init.apply(e,t)},initFromPool:function(){var e=this,t=arguments;this._initializeStateMachine(),e.__s._$5KA$initFromPool.apply(e,t)},didEnterPool:function(){this.reset();var e=this.constructor.prototype;this.isEnabled=e.isEnabled,this.shouldPreventDefault=e.shouldPreventDefault,this.__s._$5Px$didEnterPool.call(this)},dispose:function(){this._isDone=!1,this.__s._$5SI$dispose.call(this)},_stateMachine:null,_isDone:!1,sequence:Object(o.d)({strong:!0}),__superMap:{_$5Io$init:"init",_$5KA$initFromPool:"initFromPool",_$5Px$didEnterPool:"didEnterPool",_$5SI$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GestureRecognizer"}})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(172))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var i=n(117);i.b(i.c(),{"Share.DisplayNames.Facebook":"Facebook","Share.DisplayNames.Email":"Mail","Share.Validation.NotEnoughPhotos":"Not enough photos","Share.Validation.NotEnoughVideos":"Not enough videos","Share.Validation.TooManyPhotos":"Too many photos","Share.Validation.TooManyVideos":"Too many videos","Share.Validation.MailNotEnabled":"iCloud Mail is not enabled for this account.","Share.Validation.FileSizeLimitExceeded":"Items are larger than %{maxMegabytes} MB.","Share.Validation.VideoSharingDisabled":"Videos cannot be shared at this time.","Share.Validation.BrowserOutOfDate":"Browser is out of date.","Share.Message.Selection.1":"Share 1 item to","Share.Message.Selection.More":"Share %{itemNum} items to","Toolbar.Privacy":"Privacy…","Toolbar.Album":"Album…","Button.Post":"Post","Button.Continue":"Continue","Button.Cancel":"Cancel","Button.Not.You":"Not you?","Facebook.iCloudPermissions":"iCloud needs permission to share to Facebook.","Facebook.UserName":"%{firstName} %{lastName}","Facebook.MessagePlaceholder":"Type message here…","Facebook.CharacterLimitWarning":"%{length} of %{maxLength} characters","Facebook.Error.Message":"Can’t share To Facebook","Facebook.Error.Description":"An error occurred. Please try posting again.","Facebook.Cannot.Connect.Message":"Can’t connect to Facebook.","Facebook.Cannot.Connect.Description":"There was a problem while communicating with Facebook.","Facebook.Cannot.Login.Message":"Can’t log in to Facebook.","Facebook.Cannot.Login.Description":"There was a problem while connecting to Facebook.","Facebook.Cannot.Logout.Message":"Can’t log out of Facebook.","Facebook.Cannot.Logout.Description":"There was a problem while connecting to Facebook.","Facebook.Login":"You need to log in to Facebook to share.","Facebook.Login.Photos.1":"You need to log in to Facebook to share this photo.","Facebook.Login.Photos.More":"You need to log in to Facebook to share these photos.","Facebook.Login.Videos.1":"You need to log in to Facebook to share this video.","Facebook.Login.Videos.More":"You need to log in to Facebook to share these videos.","Facebook.Login.Photos.1.Videos.1":"You need to log in to Facebook to share this photo and video.","Facebook.Login.Photos.1.Videos.More":"You need to log in to Facebook to share this photo and these videos.","Facebook.Login.Photos.More.Videos.1":"You need to log in to Facebook to share these photos and this video.","Facebook.Login.Photos.More.Videos.More":"You need to log in to Facebook to share these photos and videos.","Facebook.PostToAlbum.Failed.Message":"Can’t share to Facebook.","Facebook.PostToAlbum.Upload.InProgress":"Posting to Facebook in progress. If you leave, any incomplete uploads will be canceled.","Facebook.PostToAlbum.1.Failed":"Posting of your item to Facebook failed.","Facebook.PostToAlbum.Some.Failed":"Some of your items failed to post to Facebook.","Facebook.PostToAlbum.All.Failed":"Posting of your items to Facebook failed.","Facebook.Timeline":"Timeline","Facebook.ConfirmCancel.Message":"Are you sure you want to cancel?","Facebook.ConfirmCancel.Description":"You have entered text. If you cancel, your message will be lost. Do you want to cancel anyway?","Facebook.ConfirmCancel.Cancel":"Cancel","Facebook.ConfirmCancel.Continue":"Continue","Facebook.ExplainLogout.Message":"Log out from Facebook","Facebook.ExplainLogout.Description":"To change accounts, log out of the existing account from Facebook.","Facebook.ExplainLogout.Cancel":"Cancel","Facebook.ExplainLogout.OpenFacebook":"Open Facebook","Share.VendorButton.Disabled":"%{vendorName} is not available.","Email.Cannot.Share.Message":"Can’t share via iCloud Mail","Email.Cannot.Share.Description":"An error occurred. Please try sharing again.","Alert.OK.Button.Title":"OK"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return p}));var i=n(40),r=n(220),a=n(20),s=n(7),o=n(313),l=i.a.extend(a.b,r.a,{DEFAULT_LOCALE:"en-us",_locales:{},_rtlLocales:["ar-sa","iw-il"],getRegistryFor:function(e){var t=this._locales[e]&&this._locales[e];return t||(t=this._locales[e]={}),t},addValuesFor:function(e,t){for(var n=this.getRegistryFor(e),i=Object.keys(t),r=0,a=i.length;r<a;r++){var s=i[r];n[s]=t[s]}},locale:Object(s.b)("en-us"),isRTL:Object(s.b)({readOnly:!0,dependencies:["locale"],get:Object.assign((function(){var e=this.locale;return c._rtlLocales.indexOf(e)>-1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return c._rtlLocales.indexOf(r)>-1}})}),getValue:function(e,t){var n=this._getValue(e,t);return n?t?Object(o.a)(n,t):n:e},hasValue:function(e){return!!this._getValue(e)},_getValue:function(e,t){var n=this.locale,i=this.getRegistryFor(n),r=i[e];if(!r)for(var a=n.split(/-|_/),s=0,o=a.length;s<o+1;s++){a.pop();var l=a.join("-");if(r=(i=this.getRegistryFor(l))[e])break}if(!r){var c=this.getRegistryFor(this.DEFAULT_LOCALE),u=this.DEFAULT_LOCALE.split(/-|_/)[0],d=this.getRegistryFor(u);r=c[e]||d[e]}return r},staticMembers:{__QUALIFIED_CLASS_NAME__:"Locale"}}),c=l.sharedInstance,u=function(e,t){return c.addValuesFor(e,t)},d=function(e,t){return c.getValue(e,t)},h=function(e){c.locale=e},p=function(){return c.locale};if(window.__CW_BUILD_INFO){var f=window.__CW_BUILD_INFO.locale;h(f)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Zone",(function(){return _}));var i=n(178),r=n(42),a=n(277),s=n(481),o=n(796),l=n(409),c=n(482),u=n(799),d=n(801),h=n(133),p=n(156),f=n(286),g=n(802),m=n(816),_=i.a.extend({mixinDependencies:[s.a,o.a,l.a,c.a,u.a,d.a,m.a],staticMembers:{_defaultOwnerRecordName:null,setDefaultOwnerRecordName:function(e){this._defaultOwnerRecordName=e},getPrimaryKey:function(e){return f.a.getZoneIdString(e)},getOwnerRecordNameFromPrimaryKey:function(e){var t=f.a.getOwnerRecordNameFromZoneIdString(e);return"_defaultOwner"===t&&this._defaultOwnerRecordName?this._defaultOwnerRecordName:t},getZoneNameFromPrimaryKey:function(e){return f.a.getZoneNameFromFromZoneIdString(e)},getPartsFromPrimaryKey:function(e){return{ownerRecordName:_.getOwnerRecordNameFromPrimaryKey(e),zoneName:_.getZoneNameFromPrimaryKey(e)}},getPrimaryKeyFromParts:function(e){var t=e.ownerRecordName;return"_defaultOwner"===t&&this._defaultOwnerRecordName&&(t=this._defaultOwnerRecordName),this.getPrimaryKey({ownerRecordName:t,zoneName:e.zoneName})},findByZoneID:function(e){var t=_.getPrimaryKey(e);return _.find(t)},getDataValuesFromServiceValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=r.n(),a=n.__s._$1MH$getDataValuesFromServiceValues.call(n,e,t);return a.originalScope=a.scope,a.pk=_.getPrimaryKey(a.zoneID),a.syncTokenLastUpdated=Date.now(),!0===i.isRecordOwnedByCurrentUser(a)&&(a.scope=CloudKit.DatabaseScope.PRIVATE),a},updateSyncToken:function(e,t){var n=r.n(),i=n.readDataForPrimaryKey(_,e),a=Object.assign({},i,{syncToken:t,syncTokenLastUpdated:Date.now()});return n.loadData(_,a,!1)},fetchRecordZoneChanges:function(e){return this.performOperation("fetchRecordZoneChanges",e)},fetchRecords:function(e){return this.performOperation("fetchRecords",e)},generateZipURLForRecords:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.find(e),r=i.scope;return this.performOperation(g.b,Object.assign({},n,{zonePK:e,scope:r,archiveName:t}))},__superMap:{_$1MH$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Zone"},scope:i.c({readOnly:!0}),originalScope:i.c({readOnly:!0}),zoneID:Object(p.f)({readOnly:!0,type:f.a}),syncToken:Object(h.c)({readOnly:!0}),syncTokenLastUpdated:i.c({readOnly:!0}),database:a.a.toOne({type:"Database"}),delete:function(e){var t=this,n=arguments;return this.deleted=!0,t.__s._$2aZ$delete.apply(t,n)},deleted:Object(h.c)({defaultValue:!1}),updateSyncToken:function(e){return _.updateSyncToken(this.getPrimaryKey(),e)},fetchRecordZoneChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.fetchRecordZoneChanges(Object.assign({zonePK:this.pk,syncToken:this.syncToken},e))},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.load(Object.assign({},e,{scope:this.scope}))},__superMap:{_$2aZ$delete:"delete"}})},function(e,t,n){},function(e,t,n){"use strict";function i(e){return"object"===typeof e&&null!==e&&e.constructor===Object&&!e.isClass}n.d(t,"a",(function(){return i}))},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(13),r=n(687),a=n(77),s={mixinDependencies:[r.a,a.b],initializeClass:function(){var e=o(this),t=this.constructor;t.isAbstract=!!e,t.missingRequires=e,this.__s._$uM$initializeClass.call(this)},staticMembers:{initializeClass:function(){var e=o(this);this.isAbstract=this.isAbstract||!!e,this.missingRequires+=e,this.__s._$12U$initializeClass.call(this)},__superMap:{_$12U$initializeClass:"initializeClass"}},init:function(e){this.constructor.isAbstract?Object(i.b)(this+" cannot be instantiated because it is abstract. Missing keys: "+this.constructor.missingRequires):this.__s._$19r$init.call(this,e)},__superMap:{_$uM$initializeClass:"initializeClass",_$19r$init:"init"}};function o(e){var t=e.getMetadataByType(l),n="";for(var i in t)t[i].validate(e,i)||(n+="\n    "+i);return n}var l=a.a.extend({validate:function(e,t){return t in e},requiresSupport:s,isOnlyMetadataForKey:!1,allowedOnClass:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"Required"}})},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i={WILLSEND:"willSend",SENT:"didSend",SUCCEEDED:"didSucceed",FAILED:"didFail",COMPLETED:"didComplete",ABORTED:"didAbort",FINALIZED:"didFinalize",UNSENT:"unsent",SENDING:"sending",TIMEDOUT:"timedout",PROGRESS:"didProgress"},r={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE"}},function(e,t,n){"use strict";function i(e){return null!==e&&void 0!==e}n.d(t,"a",(function(){return i}))},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var i=n(128);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n(280),r=n(313),a={group:"GROUP: ",debug:"DEBUG: ",info:"INFO:  ",warn:"WARN:  ",error:"ERROR: "},s={debug:4,info:3,warn:2,error:1,group:1,none:0},o=function(){function e(e){this.messagePrefix=null,this.outputMessagePrefix=null,this.recordedMessagePrefix=null,this.logOutputLevel="warn",this.logRecordingLevel="debug",this.recordedLogMessagesMaximumLength=500,this._recordedLogMessagesEnd=-1,this.reporter=console,this._recordedLogMessages=[],this._indentationLevel=0,e&&(this.reporter=e)}var t=e.prototype;return t.debug=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("debug",arguments)},t.info=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("info",arguments)},t.warn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("warn",arguments)},t.error=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._handleMessage("error",arguments)},t.group=function(e){this._handleMessage("group",arguments),"none"!==this.logRecordingLevel&&this._indentationLevel++},t.groupEnd=function(){this._outputMessage("groupEnd","");var e=this.logRecordingLevel;this._indentationLevel>0&&"none"!==e&&this._indentationLevel--},t.outputRecordedLogMessages=function(){for(var e=this._orderedRecordedLogMessages(),t=0;t<e.length;t++)this._outputMessage("log",e[t])},t.stringifyRecordedLogMessages=function(){return this._orderedRecordedLogMessages().join("\n")},t._orderedRecordedLogMessages=function(){var e=[],t=this._recordedLogMessages||[],n=this.recordedLogMessagesMaximumLength-1,i=this._recordedLogMessagesEnd,r=i;if(t.length>0)do{e.push(t[r]),r=0===r?n:r-1}while(t[r]&&r!==i);return e.reverse()},t._handleMessage=function(e,t){var n=this._shouldOutputType(e),i=this._shouldRecordType(e);if(n||i){var a=(this.messagePrefix||"")+r.a.apply(this,t);n&&this._outputMessage(e,a,t),i&&this._recordMessage(e,a)}},t._shouldOutputType=function(e){return s[e]<=s[this.logOutputLevel]},t._shouldRecordType=function(e){return s[e]<=s[this.logRecordingLevel]},t._outputMessage=function(e,t,n){var r=this.reporter,a=r?r[e]:null,s=this.outputMessagePrefix||"";if(a){var o=[];n&&n.length>1&&(o=Object(i.a)(n,0,1));try{var l;(l=Function.prototype.call).call.apply(l,[a,r,s+t].concat(o))}catch(c){Function.prototype.call.call(a,r,s+t,"Cycle argument")}}},t._recordMessage=function(e,t){var n=this._recordedLogMessages,i=this._createRecordedMessageString(e,t),r=this.recordedLogMessagesMaximumLength-1,a=this._recordedLogMessagesEnd,s=a===r?0:a+1;n[s]=i,this._recordedLogMessagesEnd=s},t._createRecordedMessageString=function(e,t){var n=function(e){(!e||e<0)&&(e=0);var t,n="";for(t=0;t<e;++t)n+="    ";return n}(this._indentationLevel),i=(new Date).toUTCString()+":  ",r=a[e];return n+i+(this.recordedMessagePrefix||"")+r+t},e}();o.LOG_LEVEL_NONE="none",o.LOG_LEVEL_GROUP="group",o.LOG_LEVEL_DEBUG="debug",o.LOG_LEVEL_INFO="info",o.LOG_LEVEL_WARN="warn",o.LOG_LEVEL_ERROR="error";var l=new o},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g}));var i=n(40),r=n(139),a=n(13),s=i.a.extend({_desiredClass:null,_pool:null,_activeInstanceCount:0,init:function(e){this._pool=[],this.__s._$JX$init.call(this),this._desiredClass=e},getInstance:function(){var e=this._pool.pop()||this.createInstance();return e._cwPoolDisposed=!1,this._activeInstanceCount++,e},getAutodisposingInstance:function(){var e=this.getInstance();return this.autodispose(e),e},autodispose:function(e){e._cwAutodisposePoolOwner||(e._cwAutodisposePoolOwner=this,o.push(e),l||(l=Object(r.a)(c,0)))},autodisposeInstance:function(){return this.autodispose.apply(this,arguments)},createInstance:function(){var e=this._desiredClass;return e.isClass?e.create():new e},disposeInstance:function(e){e._cwAutodisposePoolOwner&&Object(a.b)("Manually disposing auto-disposing instance to pool: "+this),e._cwPoolDisposed&&Object(a.b)("Over-disposing to pool: "+this),e._cwPoolDisposed=!0,this._activeInstanceCount--,this._pool.push(e)},__superMap:{_$JX$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Pool"}}),o=[],l=null,c=function(){for(var e=o.length;e--;){var t=o[e],n=t._cwAutodisposePoolOwner;delete t._cwAutodisposePoolOwner,n.disposeInstance(t)}o.length=0,l=null},u=s.extend({createInstance:function(){return[]},getInstance:function(){var e=this,t=arguments,n=e.__s._$1HB$getInstance.apply(e,t);return n.length&&Object(a.b)("ArrayPool#getInstance is returning an array of length > 0. This indicates usage of a disposed instance."),n},getWrapperInstance:function(e){var t=this.getInstance();return t[0]=e,t},getWrapperAutodisposingInstance:function(e){var t=this.getAutodisposingInstance();return t[0]=e,t},getInstanceFromSlice:function(e,t,n){var i=e.length;n=void 0===n?i:n,(t=void 0===t?0:t)<0&&(t=Math.max(i+t,0)),n<0&&(n=Math.max(i+n,0));for(var r=this.getInstance(),a=t;a<n&&a<i;a++)r.push(e[a]);return r},disposeInstance:function(e){var t=this,n=arguments;t.__s._$1Y5$disposeInstance.apply(t,n),e.length=0},__superMap:{_$1HB$getInstance:"getInstance",_$1Y5$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ArrayPool"}}),d=s.extend({createInstance:function(){return{}},disposeInstance:function(e){var t=this,n=arguments;for(var i in t.__s._$1gj$disposeInstance.apply(t,n),e)e.hasOwnProperty(i)&&delete e[i]},__superMap:{_$1gj$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObjectPool"}}),h=s.extend({createInstance:function(){return new Image},disposeInstance:function(e){var t=this,n=arguments;t.__s._$1n0$disposeInstance.apply(t,n),e.removeAttribute("src")},__superMap:{_$1n0$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImagePool"}}),p=s.extend({createInstance:function(){return document.createElement("canvas")},disposeInstance:function(e){var t=this,n=arguments;t.__s._$1ze$disposeInstance.apply(t,n),e.width=e.height=0},__superMap:{_$1ze$disposeInstance:"disposeInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CanvasPool"}}),f=u.create(),g=d.create();h.create(),p.create()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c}));var i=n(277),r=n(178),a=n(17),s=r.b.extend({downstreamNodeManagerClass:r.b.prototype.downstreamNodeManagerClass.extend({isCacheable:!0}),upstreamNodeManagerClass:r.b.prototype.upstreamNodeManagerClass.extend({calculateValueForNode:function(e,t,n){var i=this,r=arguments,a=i.__s._$DB$calculateValueForNode.apply(i,r);if(void 0===a){var s=this.property,o=this.key;a!==s.getRawValueForObject(e,o)&&(s.clearCachedValueForObject(e,o),a=s._encodeValue(e,o,a),s.setRawValueForObject(e,o,a))}return a},__superMap:{_$DB$calculateValueForNode:"calculateValueForNode"}}),initializeNodeFlags:function(){var e=this,t=arguments;e.__s._$Pd$initializeNodeFlags.apply(e,t),this.downstreamNodeFlags&=~a.a.PULL_ON_FLUSH},defaultModelValue:void 0,dataKey:void 0,serviceKey:void 0,init:function(e){var t,n=this,i=arguments;if(e){var r=e.defaultValue,a=void 0===r?this.defaultModelValue:r;t=a,e.defaultValue=void 0}this.defaultModelValue=t,n.__s._$aX$init.apply(n,i),null===this.dataKey&&(this.dataKey=void 0),null===this.serviceKey&&(this.serviceKey=void 0)},_materializeValue:function(e,t,n){var i=this.__s._$gu$_materializeValue.call(this,e,t,n);return void 0!==i?i:this.defaultModelValue},getRawValueForObject:function(e,t){var n=this.dataKey,i=void 0===n?t:n,r=e.getDataHash();if(void 0!==r)return r[i]},__superMap:{_$Pd$initializeNodeFlags:"initializeNodeFlags",_$aX$init:"init",_$gu$_materializeValue:"_materializeValue"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CachingModelProperty"}}).extend({serviceValueGetter:function(e,t){return e[t]},serviceValueSetter:function(e,t,n){return e[t]=n},getDataValueFromServiceValue:void 0,getServiceValueFromDataValue:void 0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableModelProperty"}});function o(e){return s.create(e)}var l=s.extend.apply(s,i.c.mixins.concat([{staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableToOneRelationshipProperty"}}]));function c(e){return l.create(e)}i.b.mixins.concat([{staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializableToManyRelationshipProperty"}}])},function(e,t,n){var i=n(108),r=n(491),a=n(180),s=n(363),o=n(495),l=n(596),c=r("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||s;e.exports=function(e){return a(c,e)||(o&&a(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n(208),r=n(120),a=n(299),s=n(13),o=n(160),l=n(311),c=o.a.extend({items:null,name:null,id:null,init:function(e){this.__s._$Si$init.call(this,e),this.items=[],this.id=u,u++},toStaticMixin:function(){var e={};return this.items.forEach((function(t){t.level||(e[t.name]=t)})),{staticMembers:e}},getItemForValue:function(e){return this.items.find((function(t){return t.value===e}))||null},toString:function(){return"[CW.Enum.Group: "+this.name+"]"},retain:function(){return this},release:function(){return this},autorelease:function(){return this},__superMap:{_$Si$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumGroup"}}),u=1;function d(e,t){var n,o,u,d=c.create({name:e}),h=d.items;if(Object(i.a)(t))t(function e(t,n){var i=1;return function(r,a){var s=null;n?(s=n.createSubitem(r),n.items.push(s)):s=l.a.create({name:r,value:i,parent:null,level:0,group:t});var o=s.fullName.replace(/\./g,"");return t.items.push(s),t[o]=s,n&&(n[r]=s),i+=1,a&&a(e(t,s)),s}}(d,null));else if(Object(r.a)(t))for(var p in t)n=l.a.create({name:p,value:t[p],group:d}),h.push(n),d[p]=n;else if(Object(a.a)(t))for(o=0,u=t.length;o<u;o++){var f=t[o];n=l.a.create({name:f,value:o,group:d}),h.push(n),d[f]=n}else Object(s.b)("Cannot create enum group. Invalid value",{name:e,obj:t});return d}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(221);function r(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return setTimeout.apply(void 0,[Object(i.a)(e),t].concat(r))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("ContainerSortType",{MANUAL:0,CREATION_DATE:1,LAST_MODIFIED_DATE:2,IMPORT_DATE:3,TRASH_DATE:4,TITLE:5})},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n(13),r=0,a=function(e){if(null===e)return"_null";if(void 0===e)return"_undefined";if(e.hasOwnProperty("_cwGUID"))return e._cwGUID;var t=typeof e;switch(t){case"number":Object.is(e,-0)&&(e="-0");case"string":case"boolean":return t+e;case"object":case"function":var n=t+ ++r;return o.value=n,Object.defineProperty(e,"_cwGUID",o),n;default:Object(i.b)("unrecognized object type",{object:e,type:t})}return null},s=function(){r=0},o={value:"",enumerable:!1,writable:!1,configurable:!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"Callback",(function(){return o}));var i=n(13),r=n(196),a=-1,s=++r.f.typeCount,o={memory:r.f,typeId:s,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Callback: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return a>0?(e=a,0===(a=this.memory.INT_32[e>>2])&&i.b("Next free item is NULL; this is not right.")):(e=r.b(16,8),this.count++),this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,this.memory.INT_32[e+12>>2]=-1,this.activeCount++,e},allocArray:function(e){var t=16*e,n=r.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=a,a=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=a,a=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),r.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,o.free(this.memory.INT_32[e+12>>2]),this.memory.INT_32[e+12>>2]=-1)},clearShallow:function(e){e<0||(this.memory.INT_32[e+0>>2]=0,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=-1,this.memory.INT_32[e+12>>2]=-1)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return r.e(e,t,4),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n,i;i=(n=this.memory.INT_32[e+12>>2])>0?o.clone(n):-1,this.memory.INT_32[e+12>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var i={method:this.memory.INT_32[e+0>>2],owner:function(){var i=this.memory.INT_32[e+4>>2];return i>0?n(188).Animation.dump(i,t):null}.bind(this)(),previousCallback:function(){var n=this.memory.INT_32[e+8>>2];return n>0?o.dump(n,t):null}.bind(this)(),nextCallback:function(){var n=this.memory.INT_32[e+12>>2];return n>0?o.dump(n,t):null}.bind(this)()};return t.pop(),i},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+16*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),a=0;a<n;a++){var s=e[a],o=i+8+16*a;r.e(s,o,4),t?this.freeShallow(s):this._cloneFieldsFrom(o,s)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+16*r},itemAtIndex:function(e,t){return e+8+16*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getMethod:function(e){return this.memory.INT_32[e+0>>2]},setMethod:function(e,t){this.memory.INT_32[e+0>>2]=t},getOwner:function(e){return this.memory.INT_32[e+4>>2]},setOwner:function(e,t){this.memory.INT_32[e+4>>2],this.memory.INT_32[e+4>>2]=t},takeOwner:function(e){var t=this.memory.INT_32[e+4>>2];return this.memory.INT_32[e+4>>2]=-1,t},getPreviousCallback:function(e){return this.memory.INT_32[e+8>>2]},setPreviousCallback:function(e,t){this.memory.INT_32[e+8>>2],this.memory.INT_32[e+8>>2]=t},takePreviousCallback:function(e){var t=this.memory.INT_32[e+8>>2];return this.memory.INT_32[e+8>>2]=-1,t},getNextCallback:function(e){return this.memory.INT_32[e+12>>2]},setNextCallback:function(e,t){var n=this.memory.INT_32[e+12>>2];this.memory.INT_32[e+12>>2]=t,n>0&&o.free(n)},takeNextCallback:function(e){var t=this.memory.INT_32[e+12>>2];return this.memory.INT_32[e+12>>2]=-1,t}};r.g(o),r.h(o.typeId,o)},function(e,t,n){var i=n(91);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var i=n(244),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i,r=n(504),a=n(145),s=n(108),o=n(128),l=n(180),c=n(372),u=n(213),d=n(216),h=n(163).f,p=n(245),f=n(292),g=n(134),m=n(363),_=s.Int8Array,v=_&&_.prototype,b=s.Uint8ClampedArray,y=b&&b.prototype,w=_&&p(_),I=v&&p(v),S=Object.prototype,C=S.isPrototypeOf,E=g("toStringTag"),A=m("TYPED_ARRAY_TAG"),O=r&&!!f&&"Opera"!==c(s.opera),T=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D=function(e){return o(e)&&l(M,c(e))};for(i in M)s[i]||(O=!1);if((!O||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},O))for(i in M)s[i]&&f(s[i],w);if((!O||!I||I===S)&&(I=w.prototype,O))for(i in M)s[i]&&f(s[i].prototype,I);if(O&&p(y)!==I&&f(y,I),a&&!l(I,E))for(i in T=!0,h(I,E,{get:function(){return o(this)?this[A]:void 0}}),M)s[i]&&u(s[i],A,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:T&&A,aTypedArray:function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(C.call(w,e))return e}else for(var t in M)if(l(M,i)){var n=s[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var i in M){var r=s[i];r&&l(r.prototype,e)&&delete r.prototype[e]}I[e]&&!n||d(I,e,n?t:O&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,r;if(a){if(f){if(n)for(i in M)(r=s[i])&&l(r,e)&&delete r[e];if(w[e]&&!n)return;try{return d(w,e,n?t:O&&_[e]||t)}catch(o){}}for(i in M)!(r=s[i])||r[e]&&!n||d(r,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||l(M,t)},isTypedArray:D,TypedArray:w,TypedArrayPrototype:I}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return T}));var i=n(13),r=n(552),a=n(214),s=n(461),o=n(82),l=n(51),c=n(285),u=n(15),d=n(55),h=n(64),p=n(17),f=n(20),g=n(712),m=n(711),_=n(714),v=n(7),b=n(551),y=n(457);function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=y.a.INSERT,S=y.a.REMOVE,C=c.a.extend(f.b,m.a,b.a,{staticMembers:{INSERT:I,REMOVE:S,shouldAutomaticallySubclass:!0,__QUALIFIED_CLASS_NAME__:"ObservableArray"},isObservable:!0,firstItem:Object(v.b)({dependencies:["contentsDidChangeUntracked"],writeDependencies:[],get:function(){return this.objectAt(0)}}),lastItem:Object(v.b)({dependencies:["length","contentsDidChangeUntracked"],writeDependencies:[],get:Object.assign((function(){return this.objectAt(this.length-1)}),{__CW__getter:function(e,t,n,i){return this.objectAt(i.internalGet(this,t[0+n])-1)}})}),itemsWillChange:function(){this._ignoreCount>0||(p.a.pause(),this.changes||(this.changes=this.changesClass.acquire(this)))},itemsWereInserted:function(e,t){if(!(this._ignoreCount>0)&&!(t<=0)){var n,i,r=this.changes;if(A(this)){var a=e+(t-1);for(n=e;n<=a;n++)r.recordInsertion(n,this._array[n])}else r.lengthDelta+=t;var s,o,l=this._iterators;for(i=l.length,n=0;n<i;n++)(s=l[n]).shouldObserveChanges&&(o=s.position)>=e&&(s.position=o+t)}},itemsWillBeRemoved:function(e,t){if(!(this._ignoreCount>0)&&!(t<=0)){var n,i=this.changes,r=e+t;if(A(this))for(n=r-1;n>=e;n--)i.recordRemoval(n,this._array[n]);else i.lengthDelta-=t;var a,s,o,l=this._internalLength===t,c=this._iterators;for(n=0,a=c.length;n<a;n++)(s=c[n]).shouldObserveChanges&&(o=s.position,l?(s.position=void 0,s.wasRemoved=!0):o>=e&&(o<r?(s.position=void 0,s.wasRemoved=!0):s.position=o-t))}},itemsDidChange:function(){this._ignoreCount>0||(this.notifyIfNecessary(),p.a.resume())},notifyIfNecessary:function(){0===this._batchCount&&function(e){var t=e.changes;e.contentsDidChangeUntracked(),t&&(t.length||0!==t.lengthDelta)&&e._shouldFireLengthChange&&(0!==t.lengthDelta&&e.propertyChanged("length"),e.contentsDidChange(t))}(this)},_shouldFireLengthChange:!0,length:Object(v.b)({writeDependencies:["contentsDidChange","contentsDidChangeUntracked"],cacheable:!1,set:Object.assign((function(){var e=this,t=arguments;if(this._shouldFireLengthChange=!1,e.__s._$2vx$set.apply(e,t),this._shouldFireLengthChange=!0,0===this._batchCount){this.contentsDidChangeUntracked=void 0;var n=this.changes;n&&(this.contentsDidChange=n)}}),{__CW__setter:function(e,t,n,i,r){var a=this,s=arguments;if(this._shouldFireLengthChange=!1,a.__s._$2vx$set.apply(a,s),this._shouldFireLengthChange=!0,0===this._batchCount){n[1+i]=void 0;var o=this.changes;o&&(n[0+i]=o)}}}),didChange:function(){},__superMap:{_$2vx$set:"set"},writeDependencySetPathMap:[!1,!1]}),sort:function(){var e=this,t=arguments;this.beginBatchedChanges();var n=e.__s._$38w$sort.apply(e,t);return this.endBatchedChanges(),n},addEach:function(){var e=this,t=arguments;this.beginBatchedChanges();var n=e.__s._$3Bh$addEach.apply(e,t);return this.endBatchedChanges(),n},reverse:function(){var e=this,t=arguments;this.beginBatchedChanges();var n=e.__s._$3ES$reverse.apply(e,t);return this.endBatchedChanges(),n},changes:Object(u.d)(),changesClass:O,_batchCount:0,beginBatchedChanges:function(){this._batchCount++},endBatchedChanges:function(){this._batchCount--,this.notifyIfNecessary(),this._batchCount<0&&Object(i.b)("Mismatched batched changes in observable array: "+this,{array:this}),this.notifyEverythingChangedIfNecessary()},swap:function(){var e=this,t=arguments;this.beginBatchedChanges();var n=e.__s._$3dr$swap.apply(e,t);return this.endBatchedChanges(),n},move:function(){var e=this,t=arguments;this.beginBatchedChanges();var n=e.__s._$3hn$move.apply(e,t);return this.endBatchedChanges(),n},contentsDidChange:Object(f.i)({didPropagate:function(){if(0===this._batchCount){var e=this.changes;e&&(this.changesClass.returnToPool(e),this.changes=null)}}}),iteratorClass:g.a,serializer:Object(v.b)(),_iterators:Object(d.c)(Array),_registerIterator:function(e){this._iterators.push(e)},_unregisterIterator:function(e){Object(r.a)(e,this._iterators)},contentsDidChangeUntracked:Object(f.i)(),HandleProviderClass:_.a,encodedHandleFor:function(e){var t=this.encodedIndexOf(e);return this.startHandle.atDistance(t)},_ignoreCount:0,beginIgnoringChanges:function(){this._ignoreCount++},endIgnoringChanges:function(){this._ignoreCount--,0===this._ignoreCount&&(this._notifyEverythingChanged=!0,this.notifyEverythingChangedIfNecessary())},notifyEverythingChangedIfNecessary:function(){0===this._batchCount&&this._notifyEverythingChanged&&(this.propertyChanged("length"),this.everythingChanged())},everythingChanged:Object(f.i)({didPropagate:function(){this._notifyEverythingChanged=!1}}),__superMap:{_$38w$sort:"sort",_$3Bh$addEach:"addEach",_$3ES$reverse:"reverse",_$3dr$swap:"swap",_$3hn$move:"move"}}),E=[];function A(e){var t=e.downstreamNodes.contentsDidChange,n=p.a.getChildrenIDs(t,E).length>0;return E.length=0,n}function O(e){this.owner=e}O.fromArrays=function(e,t,n){var i=new O(n),r=n&&n.encode||a.a;if(!e||0===e.length){for(var o=0,l=t.length;o<l;o++)i.recordInsertion(o,r.call(n,t[o],o));return i}if(!t||0===t.length){for(var c=0,u=e.length;c<u;c++)i.recordRemoval(c,r.call(n,e[c],c));return i}for(var d=Math.min(e.length,t.length),h=0;h<d;h++)Object(s.a)(e[h],t[h])||(i.recordRemoval(h,r.call(n,e[h],h)),i.recordInsertion(h,r.call(n,t[h],h)));var p=t.length-e.length;if(p>0)for(var f=d;f<t.length;f++)i.recordInsertion(f,r.call(n,t[f],f));else if(p<0)for(var g=d;g<e.length;g++)i.recordRemoval(g,r.call(n,e[g],g));return i},O.prototype=Object.create(Array.prototype),O.prototype.lengthDelta=0,O.prototype.recordInsertion=function(e,t){this.push(D(this.owner,e,t,I)),this.lengthDelta++},O.prototype.recordRemoval=function(e,t){this.push(D(this.owner,e,t,S)),this.lengthDelta--},O.prototype.applyChanges=function(e){var t=this.length,n=Object(o.a)(e,c.a),i=Object(o.a)(e,C);if(n){i&&e.beginBatchedChanges();for(var r=0;r<t;r++){var a=this[r];a.operation===S?e.encodedSplice(a.index,1):e.encodedSplice(a.index,0,a.encodedItem)}i&&e.endBatchedChanges()}else for(var s=0;s<t;s++){var l=this[s];l.operation===S?e.splice(l.index,1):e.splice(l.index,0,l.item)}return e},O.prototype.reverseChanges=function(e){var t=this.length,n=Object(o.a)(e,c.a),i=Object(o.a)(e,C);if(n){i&&e.beginBatchedChanges();for(var r=t-1;r>=0;r--){var a=this[r];a.operation===S?e.encodedSplice(a.index,0,a.encodedItem):e.encodedSplice(a.index,1)}i&&e.endBatchedChanges()}else for(var s=t-1;s>=0;s--){var l=this[s];l.operation===S?e.splice(l.index,0,l.item):e.splice(l.index,1)}return e},O.prototype.clear=function(){for(var e=this.length;e--;){var t=this[e];delete this[e],t.reset(),P.length<L&&P.push(t)}this.length=0,this.lengthDelta=0},O.prototype.toString=function(){return"[ArrayChangeList("+this.length+"): "+this.join(", ")+"]"},O.prototype.get=function(e){return this[e]},O.prototype.set=function(e,t){return this[e]=t},O.prototype.objectAt=function(e){return this[e]};var T=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var r=i.prototype;return r.recordInsertion=function(t,n){Object(h.f)(n,this,"StrongArrayChangeList: strong referencing change item"),e.prototype.recordInsertion.call(this,t,n)},r.recordRemoval=function(t,n){Object(h.f)(n,this,"StrongArrayChangeList: strong referencing change item"),e.prototype.recordRemoval.call(this,t,n)},r.clear=function(){for(var t=this.length;t--;){var n=this[t];Object(h.e)(n.item,this,"StrongArrayChangeList: strong referencing change item")}e.prototype.clear.call(this)},i}(O);function M(e,t,n,i){this._sourceArray=e,this.index=t,this.encodedItem=n,this.operation=i}function D(e,t,n,i){if(P.length>0){var r=P.pop();return r._sourceArray=e,r.index=t,r.encodedItem=n,r.operation=i,r}return new M(e,t,n,i)}M.prototype.reset=function(){this._sourceArray=null,this.encodedItem=null,this.index=null,this.operation=null},M.prototype.toString=function(){return"["+this.operation+"@"+this.index+":"+this.item+"]"},Object.defineProperty(M.prototype,"item",{get:function(){var e=this.encodedItem,t=this.index,n=this._sourceArray;return n&&n.decode&&(e=n.decode(e,t)),e},set:l.a}),Object.defineProperty(M.prototype,"object",{get:function(){return this.item},set:l.a});var P=[],L=100;O.pool=[],T.pool=[],O.acquire=function(e){if(this.pool.length){var t=this.pool.pop();return t.owner=e,t}return new this(e)},O.returnToPool=function(e){e.clear(),e.owner=null,this.pool.push(e)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return _})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"f",(function(){return I})),n.d(t,"b",(function(){return C})),n.d(t,"j",(function(){return A})),n.d(t,"m",(function(){return T})),n.d(t,"l",(function(){return D})),n.d(t,"i",(function(){return L})),n.d(t,"k",(function(){return x})),n.d(t,"h",(function(){return F})),n.d(t,"g",(function(){return V}));var i=n(1354),r=n(133),a=n(130),s=n(329),o=n(1319),l=n(359),c=new DOMParser,u=!1;var d=n(178),h=d.a.extend({fileChecksum:d.c({readOnly:!0}),size:d.c({readOnly:!0}),referenceChecksum:d.c({readOnly:!0}),wrappingKey:d.c({readOnly:!0}),downloadURL:d.c({readOnly:!0}),staticMembers:{__QUALIFIED_CLASS_NAME__:"Asset"}}),p=(n(138).b("ReferenceAction",{NONE:"NONE",DELETE_SELF:"DELETE_SELF",VALIDATE:"VALIDATE"}),function(e,t){var n=e.fields[t];return n instanceof Object?n.value:void 0}),f=function(e,t,n){if(void 0!==n){var i=e.fields[t];return(void 0===i?e.fields[t]={}:i).value=n}},g=function(e){if("string"===typeof e)try{return decodeURIComponent(escape(atob(e)))}catch(t){return atob(e)}},m=function(e){if("string"===typeof e)try{return btoa(unescape(encodeURIComponent(e)))}catch(t){return btoa(e)}},_=r.a.extend({serviceValueGetter:p,serviceValueSetter:f,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKModelProperty"}});function v(e){return _.create(e)}var b=r.b.extend({serviceValueGetter:p,serviceValueSetter:f,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKNonPKToOneRelationshipProperty"}}).extend({type:h,embedded:!0,getServiceValueFromDataValue:function(e){return e instanceof Object&&void 0!==e.dataToUpload?e.dataToUpload:e},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKAssetModelProperty"}});function y(e){return b.create(e)}var w=r.a.extend({serviceValueGetter:function(e){return e.zoneID},serviceValueSetter:function(e,t,n){return e.zoneID=n},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKModelZoneIDProperty"}});function I(e){return w.create(e)}var S=_.extend({getDataValueFromServiceValue:function(e){return 1===e},getServiceValueFromDataValue:function(e){return e?1:0},staticMembers:{__QUALIFIED_CLASS_NAME__:"BoolFromIntCKModelProperty"}});function C(e){return S.create(e)}function E(e){return _.extend({type:e,decode:function(e,t){return t.items.find((function(t){return t.value===e}))}})}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(e).create(t)}var O=_.extend({getDataValueFromServiceValue:g,getServiceValueFromDataValue:m,staticMembers:{__QUALIFIED_CLASS_NAME__:"StringFromEncryptedCKModelProperty"}}),T=function(e){return O.create(e)},M=_.extend({decode:g,encode:m,staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyStringFromEncryptedCKModelProperty"}}),D=function(e){return M.create(e)},P=_.extend({getDataValueFromServiceValue:function(e){if("string"===typeof e)return function(e){if(s.a(e)){u||(s.f(a.b),u=!0);var t=l.b.resetWithString(e);return o.a(t)}return function(e){if(e){for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;if(null!==t){var n=t.firstElementChild;if(null!==n){for(var i={},r=n.firstElementChild;null!==r;r=r.nextElementSibling)if("key"===r.nodeName){var a=r.nextElementSibling;a&&(i[r.textContent]=a.textContent)}return i}}}}(function(e){if("string"===typeof e){var t;try{(t=c.parseFromString(e,"application/xml"))&&t.firstChild&&!t.getElementsByTagName("parsererror")[0]||(t=void 0)}catch(n){t=void 0}return t}}(e))}(g(e))},readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"DecodedPListFromEncryptedCKModelProperty"}}),L=function(e){return P.create(e)},R=_.extend({getDataValueFromServiceValue:g,decode:i.a.read,readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ExifFromEncryptedCKModelProperty"}}),x=function(e){return R.create(e)},N=_.extend({serviceSubKey:void 0,serviceValueGetter:function(e,t){var n=p(e,t);return n&&n[this.serviceSubKey]},serviceValueSetter:void 0,readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"CKSubModelProperty"}}),F=function(e){return N.create(e)};function V(e,t,n){var i={};for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],s=Object.assign({serviceKey:e,serviceSubKey:a},n),o=F(s);i[r]=o}return i}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return I}));var i=n(13),r=n(51),a=n(298),s=n(263),o=n(346),l=n(347),c=n(200),u=0,d={isClass:!0,name:null,isNamed:null,mixins:[],ancestors:[],superclass:null,create:function(){var e=new this.Constructor;return e.init.apply(e,arguments),e._baseInitCalled||Object(i.b)("Base init was never invoked. Overridden init methods must always call `super()`."),e.isInitialized=!0,e},mixinWasApplied:r.a,isInitialized:!0,extend:function(){var e=Object.create(this),t=e.prototype=Object.create(e.prototype);e.isInitialized=!1,t.isInitialized=!1,e.mixins=e.mixins.slice();var n=function(){};return n.prototype=t,e.Constructor=n,t.constructor=e,e.ancestors=this.ancestors.slice(),e.ancestors.push(this),e.superclass=this,p(e,arguments),e._baseInitCalled=!1,t._baseInitCalled=!1,e.init(),e._baseInitCalled||Object(i.b)("Base init was never invoked. Overridden init methods must always call `super()`."),e.isInitialized=!0,e},init:function(){this._baseInitCalled=!0},hasMixin:function(e){return this.mixins.indexOf(e)>=0},subclassOf:function(e){return this.ancestors.indexOf(e)>=0},kindOf:function(e){return!!e&&(this.hasMixin(e)||this.subclassOf(e)||this===e)},toString:function(){return"[Class "+Object(a.a)(this)+"]"},toJSON:function(){return this.toString()},prototype:{_cwGUID:"",init:function(e){arguments.length>1&&Object(i.b)("Default initializer supports at most one argument. If you would like to apply a mixin it should be done when calling .extend()."),w(this,e),this.trackReferences&&m(this),this._baseInitCalled=!0},_baseInitCalled:!1,_metadataKeysForCreate:null,isObject:!0,isInitialized:!0,isDisposing:!1,isDisposed:!1,_retainCount:0,retain:function(e,t){this.isDisposed&&Object(i.b)("Cannot retain an object that has already been disposed.",{object:this,type:this.constructor.name,referencer:e,description:t}),this._retainCount++,this._trackRetain(e,t);var n=this._autoreleaseForTransferToken;return isNaN(n)||(this._autoreleaseForTransferToken=NaN,Object(s.a)(this,n)),this},release:function(e,t){var n=--this._retainCount,r=this._autoreleaseForTransferToken;return isNaN(r)||(this._autoreleaseForTransferToken=NaN),this._trackRelease(e,t),n<0&&Object(i.b)("Cannot release an object more times than it has been retained.",{object:this,type:this.constructor.name,referencer:e,description:t,referenceTracker:this.referenceTracker,overreleasedReference:this.overreleasedReference}),0===n&&(this.cleanup(),this._baseCleanupCalled||Object(i.b)("Base cleanup was never invoked. Overridden cleanup methods must always call `$super()`.",this),this._baseCleanupCalled=!1,this._captureDisposingObjectForPool(),this.isPooled?(this.didEnterPool(),this._baseDidEnterPoolCalled||Object(i.b)("Base didEnterPool was never invoked. Overridden didEnterPool methods must always call `$super()`.",this),this._baseDidEnterPoolCalled=!1):(this.isDisposing=!0,this.dispose(),this._baseDisposeCalled||Object(i.b)("Base dispose was never invoked. Overridden dispose methods must always call `$super()`.",this),this.isDisposing=!1,this.isDisposed=!0)),this},autorelease:function(e,t){return Object(s.b)(this,e,t),this},_autoreleaseForTransfer:function(e,t){return this._autoreleaseForTransferToken=Object(s.b)(this,e,t),this},_autoreleaseForTransferToken:NaN,trackReferences:!1,referenceTracker:null,overreleasedReference:null,cleanup:function(){!function(e){var t=e._weakReferences;if(t){var n,i,r,a,s=t.length,o=I._bestBatchSetterClass.begin();for(n=0;n<s;n+=3)(r=t[n])&&(i=t[n+1],a=t[n+2],i.call(r,a,o));o.end(),t.length=0}}(this),this._baseCleanupCalled=!0},didEnterPool:function(){this._baseDidEnterPoolCalled=!0},dispose:function(){this._baseDisposeCalled=!0},_baseCleanupCalled:!1,_baseDidEnterPoolCalled:!1,_baseDisposeCalled:!1,_captureDisposingObjectForPool:r.a,registerWeakReference:function(e,t,n){var i,r=this._weakReferences;if(r){var a=this._weakReferenceAvailableIndicesLength;a>=0?(i=this._weakReferenceAvailableIndices[a],this._weakReferenceAvailableIndicesLength=a-1):i=r.length+1}else r=this._weakReferences=[],this._weakReferenceAvailableIndices=[],this._weakReferenceAvailableIndicesLength=-1,i=1;return r[i-1]=e,r[i]=t,r[i+1]=n,i},deregisterWeakReference:function(e){var t=this._weakReferences;t[e-1]||(e===u?Object(i.b)("Attempted to deregister the null weak reference token.",this):Object(i.b)("Cannot deregister a weak reference that wasn't registered or was previously deregistered.",this)),t[e-1]=t[e]=t[e+1]=null,this._weakReferenceAvailableIndices[++this._weakReferenceAvailableIndicesLength]=e},_weakReferences:null,_weakReferenceAvailableIndices:null,_weakReferenceAvailableIndicesLength:-1,_trackRetain:r.a,_trackRelease:r.a,hasMixin:function(e){return this.constructor.hasMixin(e)},instanceOf:function(e){if(!e)return!1;if(e.isClass){var t=e&&e.Constructor;return!!t&&this instanceof t}return this.hasMixin(e)}}};Object.defineProperties(d,{name:{get:function(){return Object(a.a)(this)}},isNamed:{get:function(){return this.hasOwnProperty("__QUALIFIED_CLASS_NAME__")}}});var h=function(){};function p(e,t){var n,r,a=t.length;for(n=0;n<a;n++)(r=t[n])||Object(i.b)("Error: attempting to mixin undefined as a mixin to "+e.toString()+"."),r.isClass&&Object(i.b)("Error: attempting to mixin class "+r.toString()+" as a mixin to "+e.toString()+". Cannot use classes as mixins.",{class:e,mixin:r}),e.hasMixin(r)||f(e,r);return e}function f(e,t){var n,i,r;return(n=t.mixinDependencies)&&p(e,n),e.mixins.push(t),g(e,i=t.staticMembers),w(e,i),g(r=e.prototype,t),w(r,t),e.mixinWasApplied(t),e}function g(e,t){if(t){var n=t.__superMap,i=e.__s;for(var r in i=i?Object.create(i):{},n){var a=n[r];i[r]=e[a]}e.__s=i}}function m(e){e._trackRetain=_,e._trackRelease=v,e.referenceTracker={}}h.prototype=d.prototype,d.Constructor=h,d.prototype.constructor=d;var _=function(e,t){var n=b(this.referenceTracker,e,t),i=++n.referenceCount;n.highestReferenceCount=Math.max(i,n.highestReferenceCount);var r=y();n.timestamps.push(r)},v=function(e,t){var n=b(this.referenceTracker,e,t),i=--n.referenceCount,r=0-y();n.timestamps.push(r),i<0&&(n.hasOverreleased=!0,this.overreleasedReference=n)};function b(e,t,n){var i=t?Object(a.a)(t):"Unknown referencer",r=n?n+" - "+i:i,s=e[r];return s||(s=e[r]={descriptor:r,referenceCount:0,highestReferenceCount:0,timestamps:[],hasOverreleased:!1}),s}var y=function(){var e=Date.now();return function(){return(Date.now()-e)/1e3}}();function w(e,t){if(t){var n=Object.getOwnPropertyNames(t);n.push.apply(n,Object.getOwnPropertySymbols(t));for(var i=n.length,r=0;r<i;r++){var a=n[r];if("staticMembers"!==a&&"mixinDependencies"!==a){for(var s=t[a];s&&s.initializeMember;)s=s.initializeMember(e,a);void 0!==s&&(e[a]=s)}}}}var I=d.extend(c.a,{staticMembers:{begin:function(){var e=this.create();return e.retain(e,S),e._isReady=!0,e},_bestBatchSetterClass:null,init:function(){var e=this,t=arguments;e.__s._$BNp$init.apply(e,t),this._bestBatchSetterClass=this},__superMap:{_$BNp$init:"init"},__QUALIFIED_CLASS_NAME__:"NonObservableBatchSetter"},begin:function(){Object(i.b)("BatchSetter Begin must be called on the class, reusing BatchSetter objects is not allowed.")},set:function(e,t,n){this._isReady||Object(i.b)("BatchSetter Begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Path: %{path})",{path:t,object:e,value:n}),e&&t||Object(i.b)("BatchSetter Set requires a path and an object. (Path: %{path}, Object: %{object})",{path:t,object:e,value:n});var r={rootObject:e,path:t,value:n};return this._toSetArray.push(r),this},setIfChanged:function(e,t,n){return this._isReady||Object(i.b)("BatchSetter.begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Path: %{path}, Object: %{object})",{path:t,object:e,value:n}),n!==this._getOldValue(e,t)&&this.set(e,t,n),this},end:function(){this._performSet(this._toSetArray),this._toSetArray.length=0,this._isReady=!1;var e=this._pointerTuple;e[0]=e[1]=null,this.release(this,S)},init:function(){var e=this,t=arguments;e.__s._$C5h$init.apply(e,t),this._toSetArray=[],this._pointerTuple=new Array(2)},_isReady:!1,_toSetArray:null,_pointerTuple:null,_performSet:function(e){for(var t=this._pointerTuple,n=0,i=e.length;n<i;n++){var r=e[n],a=r.value,s=this._resolvePointer(r,t);s[0][s[1]]=a}},_resolvePointer:function(e,t){for(var n=Object(o.a)(e.path),i=e.rootObject,r=n.length,a=0;a<r-1;a++)i=i[n[a]];return t[0]=i,t[1]=n[r-1],t},_getOldValue:function(e,t){for(var n=this._toSetArray,i=n.length-1;i>=0;i--){var r=n[i],a=r.rootObject,s=r.path,o=r.value;if(a===e&&s===t)return o}return Object(l.a)(e,t)},__superMap:{_$C5h$init:"init"}}),S="BatchSetter: self-reference for the duration"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(221);function r(e,t,n,r){return e.addEventListener(t,Object(i.a)(n),r||!1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(15),r=n(452).a.extend({metadataType:i.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredProperty"}})},function(e,t,n){var i=n(145),r=n(590),a=n(129),s=n(251),o=Object.defineProperty;t.f=i?o:function(e,t,n){if(a(e),t=s(t,!0),a(n),r)try{return o(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m}));var i=n(40),r=n(55),a=n(138),s=n(20),o=n(17),l=n(13),c=n(461),u=n(265),d=n(323),h=n(465),p=n(42),f=n(239),g=i.a.extend(s.b,{staticMembers:{getStoreIdForPrimaryKey:function(e,t){return e||Object(l.b)("CW.Data.Store.getStoreIdForPrimaryKey: No model class provided.",{store:this}),t||Object(l.b)("CW.Data.Store.getStoreIdForPrimaryKey: No primary key provided.",{store:this,modelClass:e}),this.getPrimaryKeysToStoreIds(e)[t]||this.registerPrimaryKey(e,t)},setPrimaryKeyForStoreId:function(e,t){e||Object(l.b)("CW.Data.Store.setPrimaryKeyForStoreId: No storeId provided.",{store:this}),t||Object(l.b)("CW.Data.Store.setPrimaryKeyForStoreId: No primary key provided.",{store:this});var n=g.getModelClassForStoreId(e);n||Object(l.b)("CW.Data.Store.setPrimaryKeyForStoreId: No model class could be found for storeId: %{storeId}",{store:this,storeId:e}),this.registerPrimaryKey(n,t,e)},getModelClassForStoreId:function(e){return g.storeIdsToModelClass[e]},getPrimaryKeyForStoreId:function(e){return g.storeIdsToPrimaryKey[e]},getPrimaryKeysToStoreIds:function(e){var t=e.primaryKeysToStoreIds;if(!t){var n=this.modelClassToPrimaryKeysToStoreIds;(t=n.get(e))||(t={},n.set(e,t)),e.primaryKeysToStoreIds=t}return t},storeIdsToModelClass:{},storeIdsToPrimaryKey:{},modelClassToPrimaryKeysToStoreIds:new Map,resetStoreIds:function(){for(var e=this.storeIdsToModelClass,t=0,n=Object.values(e);t<n.length;t++)n[t].primaryKeysToStoreIds=null;this.storeIdsToModelClass={},this.storeIdsToPrimaryKey={},this.modelClassToPrimaryKeysToStoreIds=new Map},registerPrimaryKey:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++_,i=this.storeIdsToPrimaryKey,r=i[n];if(t===r)return n;var a=this.getPrimaryKeysToStoreIds(e);return a[t]=n,this.storeIdsToModelClass[n]=e,r&&delete a[r],i[n]=t,n},__QUALIFIED_CLASS_NAME__:"Store"},autocommit:!1,forkOnRead:!1,commit:function(){Object(l.b)("CW.Store#commit is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},commitStoreIds:function(e){Object(l.b)("CW.Store#commitStoreIds is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},commitPrimaryKeys:function(e,t){Object(l.b)("CW.Store#commitPrimaryKeys is not implemented. Only stores mixing in CW.DataManager may commit at this time.")},MergeStrategy:void 0,getStoreStatus:function(e,t){e||Object(l.b)("CW.Data.Store#getStoreStatus: No model class provided.",{store:this}),t||Object(l.b)("CW.Data.Store#getStoreStatus: No primary key provided.",{store:this,modelClass:e});var n=this.constructor.getStoreIdForPrimaryKey(e,t);if(this.isDataForked(n)){var i=m.DIRTY,r=this._changes,a=r&&r.getChangeForStoreId(n),s=a&&a.changeType;return s===p.d.WRITE.CREATE?i.CREATED:s===p.d.WRITE.UPDATE?i.UPDATED:s===p.d.WRITE.DESTROY?i.DESTROYED:i.READ}return null===this.readData(n)?m.CLEAN.DESTROYED:m.CLEAN},getModel:function(e,t){e||Object(l.b)("CW.Data.Store#getModel: No model class provided.",{store:this}),t||Object(l.b)("CW.Data.Store#getModel: No primary key provided.",{store:this,modelClass:e});var n=this.constructor.getStoreIdForPrimaryKey(e,t);if(this.hasDataFor(n))return this.materializeModel(n)},getAllModels:function(e){var t=this;e||Object(l.b)("CW.Data.Store#getAllModels: No model class provided.",{store:this});var n=Array.from(Object.values(this.constructor.getPrimaryKeysToStoreIds(e))).filter((function(e){return t.hasDataFor(e)}));return f.a.createFromStoreIds(n,e,this)},materializeModel:function(e){e||Object(l.b)("CW.Data.Store#materializedModel: No store ID provided.",{store:this});var t=this._materializedModels,n=t[e];if(!n&&this.hasDataFor(e)){var i=this.constructor.getModelClassForStoreId(e);i||Object(l.b)("CW.Data.Store#materializeModel: No model class defined for store ID: `"+e+"`",{store:this,storeId:e}),this.constructor.getPrimaryKeyForStoreId(e)||Object(l.b)("CW.Data.Store#materializeModel: No primary key defined for store ID: `"+e+"`",{store:this,modelClass:i,storeId:e}),n=i.createWithStore(this,e),t[e]=n}return n&&n.isPooled&&n.constructor.reclaim(n),n},getExistingModel:function(e){return this._materializedModels[e]},hasExistingModel:function(e){return!!this.getExistingModel(e)},linkModel:function(e,t,n){var i,r;e||Object(l.b)("CW.Data.Store#linkModel: No model provided.",{store:this}),t||(r=e.constructor,void 0!==(i=e.getPrimaryKey())&&null!==i||!n||(i=n[r.getDataKeyForKey(r.primaryKey)]),t=this.constructor.getStoreIdForPrimaryKey(r,i));var a=e._cwStore;if(a){if(a===this)return;Object(l.b)("CW.Data.Store#linkModel: Model has previously been linked to a store.",{store:this,storeId:t,model:e,primaryKey:i,previousStore:a,newStore:this})}this.hasDataFor(t)||(this.writeData(t,n||e.getDataHash()),delete e.__cwDataHash),e._cwStore=this;var s=this._materializedModels;s[t]&&Object(l.b)("CW.Data.Store#linkModel: Attempting to register model that already exists.",{store:this,storeId:t,modelClass:r,primaryKey:i,previousRegisteredModel:s[t],newRegisteredModel:e}),s[t]=e,e._cwStoreId=t},unlinkModel:function(e){e||Object(l.b)("CW.Data.Store#unlinkModel: No model provided.",{store:this}),e._cwStore=null;var t=this._materializedModels;t&&delete t[e._cwStoreId],e._cwStoreId=null},deleteModels:function(e,t){var n;if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n=this.constructor.getStoreIdForPrimaryKey(e,a),this.deleteData(n)}else n=this.constructor.getStoreIdForPrimaryKey(e,t),this.deleteData(n);this.dataDidChange()},dataDidChange:Object(s.i)(),didChangeDataForStoreIds:function(e){var t=this;if(e&&0!==e.length&&function(e){var t=e.downstreamNodes.dataDidChangeForPrimaryKeys;o.a.getChildrenIDs(t,v);var n=v.length>0;return v.length=0,n}(this)){var n=e.reduce((function(e,n){var i=t.constructor.getPrimaryKeyForStoreId(n),r=t.constructor.getModelClassForStoreId(n);return e.has(r)?e.get(r).add(i):e.set(r,new Set([i])),e}),new Map);this.dataDidChangeForPrimaryKeys(n)}},dataDidChangeForPrimaryKeys:Object(s.i)(),readData:function(e){if(this.forkOnRead){this._forkIfNeeded(e);var t=this._materializedModels[e];t&&t.propertyChanged("storeStatus")}return this._dataHashes[e]},readDataForPrimaryKey:function(e,t){var n=this.constructor.getStoreIdForPrimaryKey(e,t);return this.readData(n)},readOriginalData:function(e){var t=this._originalDataHashes;if(t)return t[e]},willWriteData:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._forkIfNeeded(e,t)},didWriteData:function(e){this.recordChangeToData(e),this.didChangeDataForStoreIds([e])},writeData:function(e,t){this.willWriteData(e,!1),this._dataHashes[e]=t,this.didWriteData(e)},writeDataForPrimaryKey:function(e,t,n){var i=this.constructor.getStoreIdForPrimaryKey(e,t);this.writeData(i,n)},writeDataProperty:function(e,t,n){var i=this._dataHashes;if(this.hasDataFor(e)){var r=i[e][t];if(Object(c.a)(r,n))return}this.willWriteData(e);var a=i[e];a||(a=i[e]={}),a[t]=n,this.didWriteData(e)},updateData:function(e,t){if(this.hasDataFor(e)){this.willWriteData(e);var n=this._dataHashes[e];for(var i in t)n[i]=t[i];this.didWriteData(e)}else this.writeData(e,t)},resetData:function(e){delete this._dataHashes[e];var t=this._originalDataHashes;t&&delete t[e],this._changes&&this._changes.removeChangeForStoreId(e),this.didChangeDataForStoreIds([e])},resetAllData:function(){for(var e=this._dataHashes,t=Object.keys(e),n=0,i=t.length;n<i;n++)delete e[t[n]];delete this._originalDataHashes,this.didChangeDataForStoreIds(t)},deleteData:function(e){return this.writeData(e,null)},hasDataFor:function(e){return!!this._dataHashes[e]},isDataForked:function(e){return this._dataHashes.hasOwnProperty(e)},_dataHashes:Object(r.c)(Object),_materializedModels:Object(r.c)(Object),_originalDataHashes:null,_autocommitOnChange:Object(s.h)("dataDidChange",(function(){this.autocommit&&this._changes&&this._changes.length>0&&this.commit()})),_forkIfNeeded:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isDataForked(e)){var n=this._dataHashes,i=n[e],r=this._originalDataHashes||(this._originalDataHashes={});return r[e]=Object(u.a)(i),n[e]=i&&t?Object(u.a)(i):{},!0}return!1},recordChangeToData:function(e){if(!e)throw Object(l.b)("Recording changes in Store for non-existent storeId",{storeId:e});var t=this.readOriginalData(e),n=this.readData(e),i=h.a.create(e,t,n);(this._changes||(this._changes=d.a.create())).recordChange(i);var r=this._materializedModels[e];return r&&r.propertyChanged("storeStatus"),i},_changes:null}),m=Object(a.b)("STATUS",(function(e){e("CLEAN",(function(e){e("DESTROYED")})),e("DIRTY",(function(e){e("READ"),e("CREATED"),e("UPDATED"),e("DESTROYED")}))})),_=0,v=[]},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(40),r=n(220),a=n(20),s=n(441),o=n(13),l=n(161),c=n(317),u=i.a.extend(a.b,r.a,{staticMembers:{booleanProperty:c.a.booleanProperty,numberProperty:c.a.numberProperty,stringProperty:c.a.stringProperty,enumProperty:c.a.enumProperty,__QUALIFIED_CLASS_NAME__:"Config"},_config_debugValues:null,_config_urlValues:null,_config_defaultValues:null,_shouldWriteChangesToSessionStorage:!1,init:function(){this._config_defaultValues={},this._config_urlValues=Object.create(this._config_defaultValues),this._config_debugValues=Object.create(this._config_urlValues),this.__s._$1It$init.call(this),this.constructor===u?Object(o.b)("CW.Config cannot be instantiated directly, must subclass."):this.constructor.storageKey||Object(o.b)("Must define a `storageKey` static member for CW.Config subclasses."),this._computedStorageKey="Apple:Config:"+this.constructor.storageKey,d.call(this),p.call(this)&&this.didLoadConfigFromSessionStorage(),this._shouldWriteChangesToSessionStorage=!0,Object(l.a)(window,"hashchange",d.bind(this))},didLoadConfigFromSessionStorage:function(){},setFromString:function(e,t){this.set(e,this.getMetadata(e).parse(t))},typeOf:function(e){return this.getMetadata(e).configType},dump:function(e){e||(e="");var t=this._config_debugValues,n=this._config_urlValues,i="",r="",a="",s=[],o=this.getMetadataByType(c.a);for(i in o)o.hasOwnProperty(i)&&(r=e+i+": ",a="",t.hasOwnProperty(i)&&(a+=this.getDebugValue(i)+" (Debug); "),n.hasOwnProperty(i)&&(a+=this.getURLValue(i)+" (URL); "),a+=this.getDefaultValue(i)+" (Default)",s.push(r+a));return s.join("\n")},getDefaultValue:function(e){return void 0!==this._config_defaultValues[e]?this._config_defaultValues[e]:this.getMetadata(e).getForObject(this,e)},setDefaultValue:function(e,t){this._config_defaultValues[e]=t,this.propertyChanged(e)},getURLValue:function(e){if(this._config_urlValues.hasOwnProperty(e))return this._config_urlValues[e]},getDebugValue:function(e){if(this._config_debugValues.hasOwnProperty(e))return this._config_debugValues[e]},clearDebugValues:function(){var e=this.getMetadataByType(c.a);for(var t in e)e.hasOwnProperty(t)&&this.set(t,void 0)},writeToSessionStorage:function(){this._shouldWriteChangesToSessionStorage&&this._computedStorageKey&&h.setItem(this._computedStorageKey,JSON.stringify(this._config_debugValues))},__superMap:{_$1It$init:"init"}});function d(){var e=function(e){var t={};if("#cw_config:"!==e.substr(0,"#cw_config:".length))return t;var n,i,r,a,s=(e=e.substr("#cw_config:".length)).split("&"),o=s.length;for(i=0;i<o;i++){var l=(n=s[i]).indexOf("=");l<0?(r=n,a="true"):(r=n.substr(0,l),a=n.substr(l+1)),r=decodeURIComponent(r),a=decodeURIComponent(a),t[r]=a}return t}(window.location.hash);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],i=this.getMetadata(t);i&&(void 0!==(n=i.parse(n))?this._config_urlValues[t]=n:delete this._config_urlValues[t],this.propertyChanged(t))}}var h=s.b.get("sharedInstance");function p(){var e=h.getItem(this._computedStorageKey),t=this._config_defaultValues,n=!1;if(e)try{for(var i in e=JSON.parse(e))e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(this.set(i,e[i]),n=!0)}catch(r){}return n}},function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var i=n(156),r=n(7),a=n(127),s=n(287),o=n(11);function l(e,t){return r.b({readOnly:!0,dependencies:[e],get:function(){return this[e]===t}})}function c(e,t){return r.b({dependencies:e,readOnly:!0,get:function(){for(var n=0,i=e.length;n<i;n++){var r=e[n],s=this.getPath(r);if(a.a(s))return s}return t}})}function u(e){var t,n;return Object.assign(((t={})[e+"Width"]=i.e({readOnly:!0}),t[e+"Height"]=i.e({readOnly:!0}),t[e+"FileType"]=i.e({readOnly:!0}),t[e+"Fingerprint"]=i.e({readOnly:!0}),t[e+"MimeType"]=i.e({readOnly:!0,serviceKey:e+"FileType",getDataValueFromServiceValue:function(e){return e&&Object(s.c)(e)}}),t),i.g(e+"Res",((n={})[e+"ResSize"]="size",n[e+"ResDownloadUrl"]="downloadURL",n)))}function d(e,t){for(var n={},i=0,r=t.length;i<r;i++){var a=e+t[i];Object.assign(n,u(a))}return n}var h=i.a.extend({ProtobufClass:void 0,getDataValueFromServiceValue:function(e){var t=o.util.base64,n=new Uint8Array(t.length(e));return t.decode(e,n,0),this.ProtobufClass.decode(n).toJSON()},readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"DecodedProtobufFromEncryptedCKModelProperty"}}),p=function(e){return h.create(e)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(452),r=n(7),a=i.a.extend({metadataType:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredObservableProperty"}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(212);e.exports=function(e){return Object(i(e))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return V}));var i=n(20),r=n(748),a=n(17),s=n(7),o=n(282),l=n(253),c=n(155),u=n(40),d=n(98),h=n(15),p=n(311),f=n(138),g=n(13),m=n(265),_=n(401),v=n(550),b=n(82),y=n(208),w=n(214),I=n(42),S=n(563),C=n(322),E=n(248),A=n(239),O=n(165),T=new Map,M=u.a.extend(i.b,r.a,S.a,{staticMembers:{getStoreIdForPrimaryKey:function(e){return O.a.getStoreIdForPrimaryKey(this,e)},setPrimaryKeyForStoreId:function(e,t){return O.a.setPrimaryKeyForStoreId(e,t)},replacePrimaryKeyInStore:function(e,t){var n=this.getStoreIdForPrimaryKey(e);return this.setPrimaryKeyForStoreId(n,t)},primaryKeysToStoreIds:null,find:function(e,t){return e||Object(g.b)("CW.Data.Model.find: No primary key provided.",{modelClass:this}),(t=t||Object(I.n)())||Object(g.b)("CW.Data.Model.find: No store provided and no Data Manager has been created.",{modelClass:this,primaryKey:e}),t.getModel(this,e)},findAll:function(e){return(e=e||Object(I.n)())||Object(g.b)("CW.Data.Model.findAll: No store provided and no Data Manager has been created.",{modelClass:this}),e.getAllModels(this)},findByPrimaryKeys:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.n)(),i=n.constructor,r=e.map((function(e){return i.getStoreIdForPrimaryKey(t,e)}));return A.a.createFromStoreIds(r,this,n)},findOrCreatePlaceholder:function(e,t){e||Object(g.b)("CW.Data.Model.findOrCreatePlaceholder: No primary key provided.",{modelClass:this});var n=this.find(e,t);return n||(n=this.createPlaceholder(e,t)),n},createFromDataHash:function(e,t,n){if(!e)return this.createWithStore(t,n);var i=Object(m.a)(e);return i[D]=!0,this.create(i,t,n)},createWithStore:function(e,t){return this.create(null,e,t)},createPlaceholder:function(e,t){var n;e||Object(g.b)("CW.Data.Model.createPlaceholder: No primary key provided.",{modelClass:this});var i=Object(I.n)();i||Object(g.b)("CW.Data.Model.createPlaceholder: No Data Manager has been created.",{modelClass:this,primaryKey:e});var r=((n={})[this.getDataKeyForKey(this.primaryKey)]=e,n);return i.loadData(this,r,!0),this.find(e,t||i)},createEmbedded:function(e,t,n){a.a.pause();var i=this.create();return i._cwParent=e,i._cwParentKey=t,i._cwParentIndex=n,i.retain(),a.a.resume(),i},hasMaterializedInstance:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.n)(),n=this.getStoreIdForPrimaryKey(e);return t.hasExistingModel(n)},performOperation:function(e,t){e||Object(g.b)("CW.Data.Model.performOperation: No operation name provided.",{modelClass:this,operationType:this,operationContext:t});var n=Object(I.n)();return n||Object(g.b)("CW.Data.Model.performOperation: No Data Manager has been created.",{modelClass:this,operationType:this,operationName:e,operationContext:t}),n.performOperation({type:this,operation:{type:e,context:t||{}}})},load:function(e,t){e||Object(g.b)("CW.Data.Model.load: No primary key(s) provided.",{modelClass:this});var n,i,r=Object(I.n)();if(r||Object(g.b)("CW.Data.Model.load: No Data Manager has been created.",{modelClass:this,primaryKey:e}),t)return this.performOperation(I.d.READ.LOAD,{primaryKeys:e});if(Array.isArray(e)){for(var a,s,o=A.a.create(e,this),l=0,c=e.length;l<c;l++){var u=e[l];r.getNetworkStatus(this,u)!==C.a.IDLE&&(a=a||[],(i=r.getActiveTransactions(this,u))&&i.length>0)?a.push.apply(a,i):r.getLoadStatus(this,u)!==E.a.LOADED&&(s=s||[]).push(u)}if(s){var h=this.performOperation(I.d.READ.LOAD,{primaryKeys:s});(a=a||[]).push(h)}return n=d.a.create(),a?d.a.all(a).then((function(){n.resolve(o)}),(function(e){n.reject(e)})):(n.resolve(o),n)}return r.getNetworkStatus(this,e)!==C.a.IDLE&&(n=d.a.create(),(i=r.getActiveTransactions(this,e))&&i.length>0)?d.a.all(i).then(function(){n.resolve(this.find(e))}.bind(this),(function(e){n.reject(e)})):r.getLoadStatus(this,e)===E.a.LOADED?d.a.resolve(this.find(e)):this.performOperation(I.d.READ.LOAD,{primaryKeys:e})},loadAll:function(){return this.performOperation(I.d.READ.LIST)},destroy:function(e,t){e||Object(g.b)("CW.Data.Model.destroy: No primary key(s) provided.",{modelClass:this}),(t=t||Object(I.n)())||Object(g.b)("CW.Data.Model.destroy: No store provided and no Data Manager has been created.",{modelClass:this,primaryKeys:e}),t.deleteModels(this,e)},getKeyForDataKey:function(e){e||Object(g.b)("CW.Data.Model.getKeyForDataKey: No data key provided.",{modelClass:this});var t=this.__cwDataKeyMap;return t&&t[e]||e},getDataKeyForKey:function(e){e||Object(g.b)("CW.Data.Model.getDataKeyForKey: No key provided.",{modelClass:this});var t=this.prototype.getMetadata(e);return t&&t.dataKey||e},primaryKey:null,init:function(){var e=this,t=arguments;e.__s._$6ox$init.apply(e,t),this.primaryKeysToStoreIds=null,Object(I.q)().push(this)},_setKeyForDataKey:function(e,t){var n=this.__cwDataKeyMap;(n?this.hasOwnProperty("__cwDataKeyMap")?n:this.__cwDataKeyMap=Object.create(n):this.__cwDataKeyMap={})[t]=e},_registerDataActionHandler:function(e,t){T.set(e,t)},__superMap:{_$6ox$init:"init"},__QUALIFIED_CLASS_NAME__:"Model"},networkStatus:Object(s.b)({get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#networkStatus: No primary key.",{modelClass:this.constructor,model:this});var t=Object(I.n)();return t||Object(g.b)("CW.Data.Model#networkStatus: No Data Manager has been created.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getNetworkStatus(this.constructor,e)}}),loadStatus:Object(s.b)({get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#loadStatus: No primary key.",{modelClass:this.constructor,model:this});var t=Object(I.n)();return t||Object(g.b)("CW.Data.Model#loadStatus: No Data Manager has been created.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getLoadStatus(this.constructor,e)}}),storeStatus:Object(s.b)({cacheable:!1,get:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#storeStatus: No primary key.",{modelClass:this.constructor,model:this});var t=this._cwStore;return t||Object(g.b)("CW.Data.Model#storeStatus: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:e}),t.getStoreStatus(this.constructor,e)}}),isStoreModel:Object(h.d)({readOnly:!0,get:function(){return!!this._cwStore}}),parentModel:Object(h.d)({readOnly:!0,get:function(){return this._cwParent}}),isEmbeddedModel:Object(h.d)({readOnly:!0,get:function(){return!!this.parentModel}}),embeddedKeyPathArray:Object(h.d)({readOnly:!0,get:function(){if(this.isEmbeddedModel){for(var e=[],t=this;t.isEmbeddedModel;)e=[t._cwParentKey],void 0!==t._cwParentIndex&&e.push(t._cwParentIndex),t=t._cwParent;return e}}}),embeddedKeyPath:Object(h.d)({readOnly:!0,get:function(){return this.embeddedKeyPathArray.join(".")}}),embeddedRoot:Object(h.d)({readOnly:!0,get:function(){for(var e=this;e.isEmbeddedModel;)e=e._cwParent;return e}}),hasDataForKey:function(e){var t=this.getDataHash();return t&&void 0!==t[e]},load:function(){var e=this.getPrimaryKey();return e||Object(g.b)("CW.Data.Model#load: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.load(e)},reload:function(){var e=this.getPrimaryKey();return e||Object(g.b)("CW.Data.Model#reload: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.load(e,!0)},save:function(){var e=this._cwStore;return e||Object(g.b)("CW.Data.Model#save: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:this.getPrimaryKey()}),e.commit()},saveWithoutRelated:function(){var e=this._cwStore;return e||Object(g.b)("CW.Data.Model#save: No store linked to model.",{modelClass:this.constructor,model:this,primaryKey:this.getPrimaryKey()}),e.commitStoreIds(this._cwStoreId)},reset:function(){this.isStoreModel||Object(g.b)("CW.Data.Model.reset: Cannot reset a non-store model.",{modelClass:this.constructor,model:this}),this._cwStore.resetData(this._cwStoreId)},destroy:function(){var e=this.getPrimaryKey();e||Object(g.b)("CW.Data.Model#destroy: No primary key.",{modelClass:this.constructor,model:this}),this.constructor.destroy(e,this._cwStore)},replaceData:function(e){var t=this.getDataHash(),n=this._cwStore;n?n.writeData(this._cwStoreId,e):this.__cwDataHash=e;var i=this.getDataHash(),r=Object(_.a)(t,i);if(r){var a={diff:Object(_.a)(t,e),originalData:t,updatedData:this.getDataHash()},s=Object(v.a)([],r.added,r.removed,r.updated);this._notifyOnDataAction(s,a)}},updateData:function(e){var t=Object(m.a)(this.getDataHash()),n=this._cwStore;if(n)n.updateData(this._cwStoreId,e);else{var i=this.getDataHash();for(var r in e)i[r]=e[r]}var a=this.getDataHash(),s={diff:Object(_.a)(t,a),originalData:t,updatedData:a};this._notifyOnDataAction(Object.keys(e),s)},_notifyOnDataAction:function(e,t){a.a.pause();for(var n=this.constructor,i=0,r=e.length;i<r;i++){var s=n.getKeyForDataKey(e[i]),o=this.getMetadata(s);if(o){var l=T.get(o.constructor);l?l(this,s,t):this.propertyChanged(s)}}a.a.resume()},toJSON:function(){return Object(m.a)(this.getDataHash())},_cwStore:null,_cwStoreId:null,_cwParent:null,_cwParentKey:null,getDataHash:function(){var e=this._cwParent;if(e){var t=this._cwParentKey,n=this._cwParentIndex,i=e.getDataHash();if(!i)return;return(i=i[t])&&void 0!==n&&(i=i[n]),i}var r=this._cwStore;return r?r.readData(this._cwStoreId):this.__cwDataHash||(this.__cwDataHash={})},getPrimaryKey:function(){var e=this.constructor.primaryKey;return e||Object(g.b)("CW.Data.Model#getPrimaryKey: No primary key property defined.",{modelClass:this.constructor,model:this}),this.get(e)},init:function(e,t,n){var i,r;if(e)if(e[D])delete e[D],i=e;else{var a=this.getMetadataByType(P);for(var s in i={},r=Object(m.a)(e),a){var o=a[s],l=o.dataKey||s,c=r[s];void 0!==c&&(i[l]=o._encodeValue(this,l,c),delete r[s])}}t?this._cwStore||t.linkModel(this,n,i):this.__cwDataHash=i,this.__s._$D1R$init.call(this,r)},dispose:function(){var e=this,t=arguments,n=this._cwStore;n&&n.unlinkModel(this),e.__s._$D61$dispose.apply(e,t)},notifyOfDataChange:function(){var e;this.dataDidChange.apply(this,arguments),this.isEmbeddedModel&&(e=this._cwParent).notifyOfDataChange.apply(e,arguments)},propertyChanged:function(e){var t=this.getMetadata(e);if(t){var n=t.clearCachedValueForObject;n&&n.call(t,this,e),this.__s._$DJU$propertyChanged.call(this,e)}},dataDidLoad:Object(i.i)(),dataDidChange:Object(i.i)(),_dataDidChangeDidFire:Object(i.g)("dataDidChange",(function(){var e=this._cwStore;e&&e.dataDidChange()})),__superMap:{_$D1R$init:"init",_$D61$dispose:"dispose",_$DJU$propertyChanged:"propertyChanged"}}),D=Symbol("PURE_MODEL_DATA"),P=s.a.extend({requiresSupport:M,type:null,isPrimaryKey:!1,dataKey:null,encode:null,decode:null,setInitialValueForObject:function(e,t,n){var i=this,r=arguments;void 0!==n&&Object(g.b)("Initial values are not supported on ModelProperties: "+e+"#"+t,{object:e,key:t,initialValue:n}),i.__s._$Dzq$setInitialValueForObject.apply(i,r)},downstreamNodeManagerClass:o.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=a.a.getStateIDForNode(t);a.a._sanitizeNodeID(i)>0&&a.a.getValueForNode(i)}var r=this.key,s=this.property,o=s.getRawValueForObject(e,r);return s._materializeValue(e,r,o)},isCacheable:!1}),upstreamNodeManagerClass:l.b.extend({calculateValueForNode:function(e,t,n){var i;if(n){var r=a.a.getStateIDForNode(t);(i=this.pullDataFromParent(t,r))===l.a&&(i=a.a.getDataForNode(t))}else i=a.a.getStateDataForNode(t);var s=this.key,o=this.property;return i!==o._getCachedValueForObject(e,s)&&(o.clearCachedValueForObject(e,s),i=o._encodeValue(e,s,i),o.setRawValueForObject(e,s,i)),i},notifyNode:function(e,t){var n=this.key,i=a.a.getDataForNode(t);e.dataDidChange(n,i)}}),init:function(e){var t=this,n=arguments;e&&void 0!==e.defaultValue&&(this._hadDefaultValue=!0,delete e.defaultValue),t.__s._$EaG$init.apply(t,n)},initializeNodeFlags:function(){var e=this,t=arguments;e.__s._$EbF$initializeNodeFlags.apply(e,t),this.upstreamNodeFlags|=a.a.PULL_ON_FLUSH|a.a.NOTIFY},setRawValueForObject:function(e,t,n){if(t=this.dataKey||t,e.isStoreModel)e._cwStore.writeDataProperty(e._cwStoreId,t,n);else if(e.isEmbeddedModel){for(var i=e._cwParent,r=i;r.isEmbeddedModel;)r=r._cwParent;var a=r._cwStore,s=r._cwStoreId;a&&a.willWriteData(s);var o=e.getDataHash();o||Object(g.b)("Can't write value for key to undefined data hash",{key:t,value:n,object:e,type:e.constructor}),o[t]=n,a&&a.didWriteData(s),i.notifyOfDataChange()}else{var l=e.getDataHash();l||Object(g.b)("Can't write value for key to undefined data hash",{key:t,value:n,object:e,type:e.constructor}),l[t]=n}return n},getRawValueForObject:function(e,t){var n,i=this.dataKey||t,r=e.getDataHash();return r&&(n=r[i]),void 0===n?null:n},_encodeValue:function(e,t,n){var i,r,a,s=e.__cwMaterializedValues,o=s&&s[t],l=Object(b.a)(n,M);return o&&l&&(function(e){var t=e._cwParent;t||Object(g.b)("CW.Data.Model#detachFromParent: Model is not attached to a parent.",{embeddedModel:e});var n=t.getDataHash(),i=e._cwParentKey;e.__cwDataHash=n[i],n[i]=null,e._cwParent=null,e._cwParentKey=null,e.release()}(o),this.clearCachedValueForObject(e,t)),l?(r=n,a=t,(i=e)||Object(g.b)("CW.Data.ModelProperty#attachToParent: No parent model provided.",{embeddedModel:r,parentKey:a}),r||Object(g.b)("CW.Data.ModelProperty#attachToParent: No embedded model provided.",{parentModel:i,parentKey:a}),a||Object(g.b)("CW.Data.ModelProperty#attachToParent: No parent key provided.",{parentModel:i,embeddedModel:r}),i.getDataHash()[a]=r.getDataHash(),r._cwParent=i,r._cwParentKey=a,delete r.__cwDataHash,r.retain(),this._setCachedValueForObject(e,t,n),n=n.getDataHash()):Object(b.a)(n,p.a)&&(n=n.value),Object(y.a)(this.encode)&&(n=this.encode.call(e,n)),n&&n.toJSON?n.toJSON():n},_materializeValue:function(e,t,n){var i=this._getCachedValueForObject(e,t);if(void 0!==i)return i;var r=this.type,a=(Object(y.a)(this.decode)?this.decode:function(e,t){var n=String(e).toLowerCase();return e===Boolean||"boolean"===n?L:e===String||"string"===n?R:e===Array||"array"===n||e===c.b||"cw.observablearray"===n||t instanceof Array?x:e===Date||"date"===n?N:Object(b.a)(e,f.a)?F:w.a}(r,n)).call(e,n,r),s=a!==n;if(Object(b.a)(a,c.b)){var o=this.dataKey||t;a.listen("contentsDidChange",(function(n){var i=e.getDataHash()[o];i||(i=e.getDataHash()[o]=[]),n.context.forEach((function(e){e.operation===c.b.INSERT?i.splice(e.index,0,e.item):i.splice(e.index,1)})),e.notifyOfDataChange(t,a)}))}return s&&(this._setCachedValueForObject(e,t,a),a&&a.retain&&a.retain()),a},clearCachedValueForObject:function(e,t){var n=this._getCachedValueForObject(e,t);n&&n.release&&n.release(),e.__cwMaterializedValues&&delete e.__cwMaterializedValues[t]},_getCachedValueForObject:function(e,t){var n=e.__cwMaterializedValues;return n&&n[t]},_setCachedValueForObject:function(e,t,n){var i=e.__cwMaterializedValues;return i||(i=e.__cwMaterializedValues={}),i[t]=n},wasRegistered:function(e,t){var n=this,i=arguments,r=this.type;r&&(this.type=null),n.__s._$Gqn$wasRegistered.apply(n,i),r&&(this.type=r);var a=e.constructor,s=this.dataKey;if(s&&s!==t&&a._setKeyForDataKey(t,s),this.isPrimaryKey){var o=a.primaryKey;o&&o!==t&&Object(g.b)("CW.Data.ModelProperty#wasRegistered: Models cannot define multiple primary keys.",{existingPrimaryKey:o,newPrimaryKey:t,modelClass:a}),a.primaryKey=t}this._hadDefaultValue&&Object(g.b)("Default values are not supported on ModelProperties: "+e+"#"+t,{object:e,key:t})},_hadDefaultValue:!1,__superMap:{_$Dzq$setInitialValueForObject:"setInitialValueForObject",_$EaG$init:"init",_$EbF$initializeNodeFlags:"initializeNodeFlags",_$Gqn$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModelProperty"}});function L(e){return!!e}function R(e){return null===e?null:void 0!==e?String(e):void 0}function x(e){return c.b.create(e)}function N(e){return"string"===typeof e&&(e=Date.parse(e)),e?new Date(e):null}function F(e,t){return t.getItemForValue(e)}var V=function(e){return"object"!==typeof e&&(e={defaultValue:e}),P.create(e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return I}));var i=n(25),r=n(42),a=n(286),s=["JPEGThumb","JPEGMed","JPEGLarge","JPEGFull","VidSmall","VidMed","VidFull","OriginalVidCompl","OriginalAlt","Original"],o={VidMed:"VidSmall",VidFull:"VidMed",JPEGMed:"JPEGThumb",JPEGLarge:"JPEGMed",JPEGFull:"JPEGLarge"},l={JPEGMicrothumb:22500,JPEGThumb:172800,JPEGMed:3145728,JPEGLarge:15728640,JPEGFull:1/0,VidSmall:307200,VidMed:921600,VidFull:1/0},c=Object.keys(l).filter((function(e){return e.startsWith("JPEG")})).map((function(e){return{name:e,maxArea:l[e]}})).sort((function(e,t){return e.maxArea-t.maxArea})),u=Object.keys(l).filter((function(e){return e.startsWith("Vid")})).map((function(e){return{name:e,maxArea:l[e]}})).sort((function(e,t){return e.maxArea-t.maxArea})),d=["JPEGThumb",l.JPEGThumb,"JPEGMed",l.JPEGMed,"JPEGLarge",l.JPEGLarge,"JPEGFull",1/0],h=["VidSmall",l.VidSmall,"VidMed",l.VidMed,"VidFull",1/0],p=function(e){for(var t,n=0;t=c[n];n++)if(e/1.2<=t.maxArea)return t.name},f=function(e){for(var t,n=0;t=u[n];n++)if(e/1.2<=t.maxArea)return t.name},g=1.2;function m(e,t,n){var i=o[t||e];return!(!i||n["res"+i+"ResDownloadUrl"])&&n["res"+e+"Width"]*n["res"+e+"Height"]>l[i]}function _(e,t,n){var i,r=2===t||-1!==e.indexOf("Vid")?h:1===t?d:null;if(r&&n)for(var a=0,s=r.length;a<s;a++){var o=r[a];if(n<=r[a+1]*g){i=o;break}}return i}function v(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a="res"+e,s=t[a+"Width"],l=t[a+"Height"],c=s*l,u=i.dataClassType,d=_(e,u,c),h=m(e,e,t),p=d!==e&&m(e,d,t);if(h||p){var f=p?o[d]:o[e],g={cause:"missingDerivative",missingType:f,location:t===n?"ASSET":"MASTER"};r.push(g)}}function b(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r="res"+e;if((!t[r+"Width"]||!t[r+"Height"])&&"audio"!==String(t[r+"MimeType"]).slice(0,5)){var a={cause:"height/width",derivativeName:e,width:t[r+"Width"],height:t[r+"Height"],byteSize:t[r+"ResSize"],mimeType:t[r+"MimeType"],location:t===n?"ASSET":"MASTER"};i.push(a)}}function y(e,t){return!e&&(t.push({cause:"allDerivativesMissing",location:"MASTER"}),!0)}function w(e){var t=e&&e.type&&e.type.name;return t?e&&"PREDEFINED_SMART"===e.type.name&&"DELETED"===e.recordName?e.recordName:t:"PREDEFINED_SMART"}var I={inspectDerivativesForBadApples:function(e,t,n){var o=r.n();if(!a.a.isSameZoneID(t.zoneID,o.cplZoneID))return!1;for(var l=i.arrayPool.getInstance(),c=e;c;c=c===e?t:null){for(var u,d=!1,h=0;u=s[h];h++)c["res"+u+"ResDownloadUrl"]&&(d=!0,b(u,c,e,l),v(u,c,e,t,l));c===t&&y(d,l)}var p=l.length>0;return p&&this.reportToSplunk(e,t,l,n),i.arrayPool.disposeInstance(l),p},reportToSplunk:function(e,t,n,i){var r=Array.from(new Set(n.map((function(e){return e.cause})))).join(" "),a=i,s=this.constructor.feedbackService;s&&s.report("invalidDerivativeInfo",{recordNameAsset:e.recordName,recordNameMaster:t.recordName,causes:r,derivativeIssues:n,containerType:w(s.routeSelected),allKnownDerivatives:a&&a.map((function(e){return{derivativeName:e.derivativeName,width:e.width,height:e.height,byteSize:e.byteSize,mimeType:e.mimeType,location:e.reflectsEdits?"ASSET":"MASTER"}}))})}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"Animation",(function(){return l}));var i=n(13),r=n(196),a=n(144),s=-1,o=++r.f.typeCount,l={memory:r.f,typeId:o,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Animation: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return s>0?(e=s,0===(s=this.memory.INT_32[e>>2])&&i.b("Next free item is NULL; this is not right.")):(e=r.b(16,8),this.count++),this.memory.INT_32[e+0>>2]=-1,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0,this.activeCount++,e},allocArray:function(e){var t=16*e,n=r.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=s,s=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=s,s=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),r.c(e),this.arrayCount--)},clear:function(e){if(!(e<0)){var t,n=null;n=this.getAnimatorType(e),t=this.memory.INT_32[e+0>>2],n&&t>0&&n.free(t),this.setAnimatorType(e,null),this.memory.INT_32[e+0>>2]=-1,a.Callback.free(this.memory.INT_32[e+4>>2]),this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0}},clearShallow:function(e){e<0||(this.memory.INT_32[e+0>>2]=-1,this.memory.INT_32[e+4>>2]=-1,this.memory.INT_32[e+8>>2]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+16*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return r.e(e,t,4),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n=-1,i=-1;i=(n=this.memory.INT_32[e+0>>2])>0?this.getAnimatorType(t).clone(n):-1,this.memory.INT_32[e+0>>2]=i,i=(n=this.memory.INT_32[e+4>>2])>0?a.Callback.clone(n):-1,this.memory.INT_32[e+4>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={animator:function(){var n=this.memory.INT_32[e+0>>2];return n>0?this.getAnimatorType(e).dump(n,t):null}.bind(this)(),firstCallback:function(){var n=this.memory.INT_32[e+4>>2];return n>0?a.Callback.dump(n,t):null}.bind(this)(),animatorType:this.memory.INT_32[e+8>>2]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+16*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),a=0;a<n;a++){var s=e[a],o=i+8+16*a;r.e(s,o,4),t?this.freeShallow(s):this._cloneFieldsFrom(o,s)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+16*r},itemAtIndex:function(e,t){return e+8+16*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getAnimator:function(e){return this.memory.INT_32[e+0>>2]},setAnimator:function(e,t,n){var i=this.memory.INT_32[e+0>>2];this.memory.INT_32[e+0>>2]=t;var r=this.getAnimatorType(e);r&&i>0&&i!==t&&r.free(i),this.setAnimatorType(e,n)},takeAnimator:function(e){var t=this.memory.INT_32[e+0>>2];return this.memory.INT_32[e+0>>2]=-1,t},getFirstCallback:function(e){return this.memory.INT_32[e+4>>2]},setFirstCallback:function(e,t){var i=this.memory.INT_32[e+4>>2];this.memory.INT_32[e+4>>2]=t,i>0&&n(144).Callback.free(i)},takeFirstCallback:function(e){var t=this.memory.INT_32[e+4>>2];return this.memory.INT_32[e+4>>2]=-1,t},getAnimatorType:function(e){var t=this.memory.INT_32[e+8>>2];return r.d(t)},setAnimatorType:function(e,t){t=t?t.typeId:-1,this.memory.INT_32[e+8>>2]=t}};r.g(l),r.h(l.typeId,l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n(1),n(0),n(2),n(11);var i=n(156),r=n(7),a=n(451),s=n(269),o=n(210),l=n(411),c=n(486),u=n(205),d=n(138),h=d.b("AssetVideoComplementVisibilityState",{DEFAULT:0,HIDDEN:1,EVALUATED:2,EXPLICIT:4,FULL_EDITING_SUPPORT:8}),p=d.b("FigEXIFCustomRenderedValue",{NotCustom:0,Custom:1,HDRImage:2,HDRPlusEV0_HDRImage:3,HDRPlusEV0_EV0Image:4,PanoramaImage:6,SDOFImage:7,SDOFPlusOriginal_SDOFImage:8,SDOFPlusOriginal_OriginalImage:9}),f=n(807),g=n(805),m=n(584),_=n(586),v=n(360),b=n(167),y=n(806),w=v.a.extend({mixinDependencies:[g.a,_.a,m.a,y.a],staticMembers:{CK_RECORD_TYPE:"CPLAsset",isContentDifferent:function(e,t){for(var n=["resJPEGFullFingerprint","resJPEGMedFingerprint","resJPEGThumbFingerprint","resVidFullFingerprint","resVidMedFingerprint","resVidSmallFingerprint","resSidecarFingerprint"],i=0,r=n.length;i<r;i++){var a=n[i];if(e[a]!==t[a])return!0}return!1},getDataValuesFromServiceValues:function(e){var t=this,n=arguments,i=t.__s._$m4$getDataValuesFromServiceValues.apply(t,n),r=i._locationV2Enc,a=i._locationEnc,s=void 0===a?r:a;if(void 0!==s){var o=s.lat,l=s.lon;void 0!==o&&void 0!==l&&(i.locationLatitude=parseFloat(o),i.locationLongitude=parseFloat(l))}return i._receiptTimestamp=Date.now(),i},areLoadDataCallsAlwaysComplete:!0,__superMap:{_$m4$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Asset"},masterRefRecordName:i.h({serviceKey:"masterRef",serviceSubKey:"recordName",readOnly:!0}),_adjustmentRenderType:i.e({serviceKey:"adjustmentRenderType",readOnly:!0}),adjustmentRenderTypes:r.b({readOnly:!0,dependencies:["_adjustmentRenderType"],get:Object.assign((function(){return I(this._adjustmentRenderType||0,4).map((function(e){return s.a.getItemForValue(e)}))}),{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n])||0,4).map((function(e){return s.a.getItemForValue(e)}))}})}),livePhotoEffectType:r.b({readOnly:!0,dependencies:["adjustmentRenderTypes"],get:Object.assign((function(){if(this.isLivePhoto){var e=this.adjustmentRenderTypes[0];return Object(f.b)(e)}}),{__CW__getter:function(e,t,n,i){if(this.isLivePhoto){var r=i.internalGet(this,t[0+n])[0];return Object(f.b)(r)}}})}),assetDate:i.e({readOnly:!0}),addedDate:i.e({readOnly:!0}),dateExpunged:i.e({readOnly:!0,defaultValue:1/0}),isFavorite:i.b(),isHidden:i.b(),orientation:i.j(c.a,{readOnly:!0,defaultValue:c.a.NORMAL}),duration:i.e({readOnly:!0}),_assetSubtype:i.j(u.a,{serviceKey:"assetSubtype",readOnly:!0}),_assetSubtypeV2:i.j(u.a,{serviceKey:"assetSubtypeV2",readOnly:!0}),assetSubtype:Object(b.d)(["_assetSubtypeV2","_assetSubtype"],u.a.NONE),assetHDRType:i.j(l.a,{readOnly:!0}),burstFlags:i.e(),burstFlagsExt:i.e(),burstId:i.e(),isBurst:r.b({readOnly:!0,dependencies:["burstId","compositeBurstFlags"],get:Object.assign((function(){return!!this.burstId&&Boolean(this.compositeBurstFlags&o.a.STACK.value)}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&Boolean(i.internalGet(this,t[1+n])&o.a.STACK.value)}})}),compositeBurstFlags:r.b({dependencies:["burstFlags","burstFlagsExt"],readOnly:!0,get:Object.assign((function(){return 31&this.burstFlags|2147483616&this.burstFlagsExt}),{__CW__getter:function(e,t,n,i){return 31&i.internalGet(this,t[0+n])|2147483616&i.internalGet(this,t[1+n])}})}),setCompositeBurstFlags:function(e){a.a.begin().set(this,"burstFlags",2147483616&this.burstFlags|31&e).set(this,"burstFlagsExt",31&this.burstFlagsExt|2147483616&e).end()},isPromotedFromBurst:r.b({readOnly:!0,dependencies:["compositeBurstFlags"],get:Object.assign((function(){return Boolean(this.compositeBurstFlags&o.a.USER_FAVORITE.value)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&o.a.USER_FAVORITE.value)}})}),isAutopickedInBurst:r.b({readOnly:!0,dependencies:["compositeBurstFlags"],get:Object.assign((function(){return Boolean(this.compositeBurstFlags&o.a.AUTO_PICKED.value)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&o.a.AUTO_PICKED.value)}})}),burstTypes:r.b({readOnly:!0,dependencies:["burstFlags","burstFlagsExt"],get:Object.assign((function(){var e=this.burstFlags,t=this.burstFlagsExt,n=[];return e&&(n=n.concat(this._burstFlagsTypes)),t&&(n=n.concat(this._burstFlagsExtTypes)),n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=[];return r&&(s=s.concat(this._burstFlagsTypes)),a&&(s=s.concat(this._burstFlagsExtTypes)),s}})}),_burstFlagsTypes:r.b({readOnly:!0,dependencies:["burstFlags"],get:Object.assign((function(){return I(this.burstFlags,6)}),{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n]),6)}})}),_burstFlagsExtTypes:r.b({readOnly:!0,dependencies:["burstFlagsExt"],get:Object.assign((function(){return I(this.burstFlagsExt,6)}),{__CW__getter:function(e,t,n,i){return I(i.internalGet(this,t[0+n]),6)}})}),promoteBurstAsset:function(){if(this.isBurst&&this.burstFlags){var e=this._burstFlagsTypes.filter((function(e){return e!==o.a.STACK.value})).concat([o.a.USER_FAVORITE.value]);this.burstFlags=e.reduce((function(e,t){return e|t}))}},captionEnc:i.l(),_locationEnc:i.i({serviceKey:"locationEnc"}),_locationV2Enc:i.i({serviceKey:"locationV2Enc"}),locationLatitude:i.e({readOnly:!0}),locationLongitude:i.e({readOnly:!0}),adjustmentType:i.e({readOnly:!0}),isEdited:r.b({readOnly:!0,dependencies:["resJPEGFullResDownloadUrl","resJPEGLargeResDownloadUrl","resJPEGMedResDownloadUrl","resJPEGThumbResDownloadUrl","resVidFullResDownloadUrl","resVidMedResDownloadUrl","resVidSmallResDownloadUrl","resSidecarResDownloadUrl"],get:Object.assign((function(){return!!this.resJPEGFullResDownloadUrl||!!this.resJPEGLargeResDownloadUrl||!!this.resJPEGMedResDownloadUrl||!!this.resJPEGThumbResDownloadUrl||!!this.resVidFullResDownloadUrl||!!this.resVidMedResDownloadUrl||!!this.resVidSmallResDownloadUrl||!!this.resSidecarResDownloadUrl}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])||!!i.internalGet(this,t[1+n])||!!i.internalGet(this,t[2+n])||!!i.internalGet(this,t[3+n])||!!i.internalGet(this,t[4+n])||!!i.internalGet(this,t[5+n])||!!i.internalGet(this,t[6+n])||!!i.internalGet(this,t[7+n])}})}),timeZoneOffset:i.e({readOnly:!0,type:"integer"}),isLivePhoto:r.b({readOnly:!0,dependencies:["vidComplDurValue"],get:Object.assign((function(){return this.vidComplDurValue>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),livePhotoKeyFrameDisplayTime:r.b({readOnly:!0,dependencies:["vidComplDispValue","vidComplDispScale"],get:Object.assign((function(){return this.vidComplDispValue/this.vidComplDispScale}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),livePhotoDuration:r.b({readOnly:!0,dependencies:["vidComplDurValue","vidComplDurScale"],get:Object.assign((function(){return this.vidComplDurValue/this.vidComplDurScale}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),vidComplDurValue:i.e({readOnly:!0}),vidComplDurScale:i.e({readOnly:!0}),vidComplDispValue:i.e({readOnly:!0}),vidComplDispScale:i.e({readOnly:!0}),vidComplVisibilityState:i.e({readOnly:!0}),isLivePhotoPlayEnabled:r.b({readOnly:!0,dependencies:["vidComplVisibilityState"],get:Object.assign((function(){var e=this.vidComplVisibilityState&h.FULL_EDITING_SUPPORT.value,t=this.vidComplVisibilityState&h.EXPLICIT.value,n=this.vidComplVisibilityState&h.HIDDEN.value;return e?!t:!n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])&h.FULL_EDITING_SUPPORT.value,a=i.internalGet(this,t[0+n])&h.EXPLICIT.value,s=i.internalGet(this,t[0+n])&h.HIDDEN.value;return r?!a:!s}})}),isSDOF:r.b({readOnly:!0,dependencies:["customRenderedValue","adjustmentRenderTypes"],get:Object.assign((function(){var e=this.customRenderedValue,t=-1!==this.adjustmentRenderTypes.indexOf(s.a.PORTRAIT);return e===p.SDOFImage||e===p.SDOFPlusOriginal_SDOFImage||t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=-1!==i.internalGet(this,t[1+n]).indexOf(s.a.PORTRAIT);return r===p.SDOFImage||r===p.SDOFPlusOriginal_SDOFImage||a}})}),isSDOFOriginal:r.b({readOnly:!0,dependencies:["customRenderedValue"],get:Object.assign((function(){return this.customRenderedValue===p.SDOFPlusOriginal_OriginalImage}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===p.SDOFPlusOriginal_OriginalImage}})}),customRenderedValue:i.j(p,{readOnly:!0}),videoFrameRate:i.e({readOnly:!0}),resVidHDRMedRes:i.e({readOnly:!0})});function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;if(e<2)return[e];for(var n=[],i=0;i<t;i++){var r=1<<i;e&r&&n.push(r)}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CTRL:17,OPTION:18,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,SPACE:32,PAGEUP:33,PAGEDOWN:34,INSERT:45,CMD:91,COMMA:188,EQUALS:187,MINUS:189,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,DIGIT_0:48,DIGIT_1:49,DIGIT_2:50,DIGIT_3:51,DIGIT_4:52,DIGIT_5:53,DIGIT_6:54,DIGIT_7:55,DIGIT_8:56,DIGIT_9:57}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f}));var i=n(130),r=n(15),a=n(359),s=n(800),o=n(303);function l(e){var t=o.a.MarkerSegments.SOI;if(e instanceof a.a)return e.jumpTo(0).uint16===t;if(e instanceof globalThis.DataView&&e.byteLength>1)return e.getUint16(0)===t;if(e instanceof globalThis.ArrayBuffer){var n=new globalThis.DataView(e);return n.byteLength>1&&n.getUint16(0)===t}return!1}function c(e){return 1229531648===e||1296891946!==e&&null}function u(e){return 1165519206===e}function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=n||{},a=e.uint16;if(null===a)return r;for(var o=e.cursor,l=0;l<a;l++){e.cursor=o+l*s.a;var c=e.uint16,u=t[c];if(u){var d=h(e,i&&"Orientation"===u);r[u]=d.length>1?d:d[0]}}return r}function h(e){var t,n,r,a,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.uint16,l=e.uint32,c=e.uint32;switch(o){case 1:case 7:for(l<5?e.rewind(4):e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=e.uint8,s&&(e.rewind(1),e.uint8=0);return t;case 2:for(l<5?e.rewind(4):e.jumpTo(c),a="",n=0,r=l-1;n<r;n++)a+=e.nextChar;return s&&i.b.warn("Could not zero string value in Exif tag."),a;case 3:for(l<3?e.rewind(4):e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=e.uint16,s&&(e.rewind(2),e.uint16=0);return t;case 4:for(1===l?e.rewind(4):e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=e.uint32,s&&(e.rewind(4),e.uint32=0);return t;case 5:for(e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=[e.uint32,e.uint32],s&&(e.rewind(8),e.uint32=0,e.uint32=1);return t;case 9:for(1===l?e.rewind(4):e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=e.int32,s&&(e.rewind(4),e.int32=0);return t;case 10:for(e.jumpTo(c),t=[],n=0;n<l;n++)t[n]=[e.int32,e.int32],s&&(e.rewind(8),e.int32=0,e.int32=1);return t}}function p(e,t,n){return r.d({readOnly:!0,get:function(){return this.raw[e]||this.raw[n+e]||("undefined"===typeof t?null:t)}})}function f(e,t){return r.d({readOnly:!0,get:function(){var n=this.raw[e];return"undefined"===typeof n?"undefined"===typeof t?null:t:Array.isArray(n)?n[0]/n[1]:n}})}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return N}));var i=n(160),r=n(536),a=n(201),s=n(13),o=n(120),l=n(130),c={"animation-duration":"s","animation-delay":"s","animation-iteration-count":"","column-count":"",columns:"","font-size-adjust":"","font-weight":"",opacity:"",order:"",orphans:"","tab-size":"","transition-delay":"s","transition-duration":"s",widows:"","z-index":"","flex-grow":"","flex-shrink":""},u=a.a.sharedInstance,d={translate:{subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){A<2&&Object(s.b)("When adding a `translate` transform, at least two arguments (for X and Y) are required.")}},translateDevicePixels:{transform:"translate",subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){A<2&&Object(s.b)("When adding a `translate` transform, at least two arguments (for X and Y) are required.");for(var e=0;e<A;e++){var t=E[e],n=u.ceilToDevicePixelRatio(t);E[e]=n}}},scale:{subkeys:"scaleX scaleY scaleZ".split(" "),defaultUnit:"",processArgs:function(){1===A&&(A=2,E[1]=E[0])}},rotate:{subkeys:"rotateX rotateY rotateZ".split(" "),defaultUnit:"deg",processArgs:function(){2===A&&Object(s.b)("When adding a `rotate` transform, either one or three arguments (for Z-only or X, Y, Z) are required."),1===A&&(A=3,E[2]=E[0],E[0]=E[1]=void 0)}},skew:{subkeys:"skewX skewY".split(" "),defaultUnit:"deg",processArgs:function(){}},matrix:{subkeys:[],_name:"matrix",_requiredArgs:6,processArgs:function(){d.matrix3d.processArgs.call(this)}},matrix3d:{subkeys:[],_name:"matrix3d",_requiredArgs:16,processArgs:function(){var e,t,n=1===A&&E[0];if(n&&Array.isArray(n))for(A=n.length,e=0;e<A;e++)E[e]=n[e];for(A!==this._requiredArgs&&Object(s.b)("When adding a `"+this._name+"` transform, exactly "+this._requiredArgs+" arguments are required."),e=0;e<A;e++)t=E[e],isNaN(t)&&Object(s.b)("All arguments to `"+this._name+"` must be numbers."),E[e]=(+t).toFixed(15)}}},h=function(){var e,t,n,i,r,a,s={};for(e in d)for(n=(t=d[e]).defaultUnit,a=(i=t.subkeys).length,r=0;r<a;r++)s[i[r]]=n;return s}(),p=i.a.extend(r.a,{element:null,_unflushedStyles:null,_unflushedStyleKeys:null,_unflushedStyleKeysLen:0,_pauseCount:0,init:function(e){this.element=e,this._unflushedStyles={},this._unflushedStyleKeys=[],this.__s._$25x$init.call(this)},set:function(e,t){if(Object(o.a)(e))return this._setWithHash(e);t=function(e,t){if(0!==t&&!t)return"";if(!isNaN(t)){var n=c[e];return void 0===n&&(n="px"),t+n}return t}(e,t),e=m(e);var n=this._unflushedStyles;return n[e]||(this._unflushedStyleKeys[this._unflushedStyleKeysLen++]=e),n[e]=t,this._flushStylesToElement(),this},get:function(e){return e=C(e)+e,function(e,t){var n;(n=e._computedStyle)||(n=e._computedStyle=document.defaultView.getComputedStyle(e,null));var i=n.getPropertyValue(t);return!i&&y[t]&&(i=y[t](n)||i),i}(this.element,e)},getInline:function(e){return e=m(e),this.element.style[e]},clear:function(e){return e?this.set(e,void 0):this._clearAll()},transform:function(e){if(!arguments.length)return this._partialTransformString=null,this.set("transform","");var t,n,i,r,a,s,o=d[e],l=this._partialTransformString||"";if(this._partialTransformString=null,o){var c=o.transform||e;for(t=o.subkeys,n=o.defaultUnit,A=(a=arguments.length)-1,r=1;r<a;r++)E[r-1]=arguments[r];if(o.processArgs(),t.length>=A)for(r=0;r<A;r++)void 0!==(i=E[r])&&(isNaN(i)||(i+=n),s=t[r],T[s]&&("rotateZ"!==s||T.rotateX||T.rotateY||(s="rotate"),l+=(r?" ":"")+s+"("+i+")"));else for(l+=c+"(",r=0;r<A;r++)l+=(i=E[r])+(r<A-1?", ":")")}else void 0!==(i=arguments[1])&&T[e]&&(isNaN(i)||(i+=h[e]),"rotateZ"!==e||T.rotateX||T.rotateY||(e="rotate"),l+=e+"("+i+")");return this.set("transform",l),g.styleInstance=this,g._partialTransformString=l+" ",g},layerBack:function(){return this.translateZ(0)},forceRedraw:function(){var e=this.element,t=e.parentNode;if(t){var n=e.nextSibling;t.removeChild(e),t.insertBefore(e,n)}return this},layerBackIf:function(e){return this.translateZ(e?0:void 0)},pause:function(){return this._pauseCount++,this},resume:function(){return--this._pauseCount<=0&&(this._pauseCount=0),this._hasUnflushedStyles&&this._flushStylesToElement(),this},_setWithHash:function(e){for(var t in this.pause(!0),e)e.hasOwnProperty(t)&&this.set(t,e[t]);return this.resume(!0),this},_clearAll:function(){return this.element.style.cssText="",this},_flushStylesToElement:function(){if(this._pauseCount)this._hasUnflushedStyles=!0;else{var e,t,n=this.element.style,i=this._unflushedStyles,r=this._unflushedStyleKeys,a=this._unflushedStyleKeysLen;for(e=0;e<a;e++)t=r[e],r[e]=void 0,n[t]=i[t],i[t]=void 0;this._unflushedStyleKeysLen=0}},__superMap:{_$25x$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Style"}}),f=function(){var e={transform:!0,layerBack:!0,layerBackIf:!0},t=function(t){e[t]=!0};return Object.keys(d).forEach(t),Object.keys(h).forEach(t),e}();!function(){var e=p.prototype,t=[],n=function(e){return function(){for(var n=t.length=arguments.length+1,i=n-1;i>=1;i--)t[i]=arguments[i-1];return t[0]=e,this.transform.apply(this,t)}};for(var i in d)e[i]=n(i);for(var r in h)e[r]=n(r)}();var g=function(){var e={styleInstance:null,_partialTransformString:null},t=p.prototype,n=function(e){return f[e]?function(){var t=this.styleInstance;return t._partialTransformString=this._partialTransformString,t[e].apply(t,arguments)}:function(){var t=this.styleInstance;return t[e].apply(t,arguments)}};for(var i in t)t.hasOwnProperty(i)&&t[i]instanceof Function&&"_"!==i[0]&&"constructor"!==i&&!e[i]&&(e[i]=n(i));return e}();function m(e){return v(e=C(e)+e)}var _={};function v(e){var t=_[e];if(t)return t;if(!e)return"";0!==e.indexOf("-ms-")&&0!==e.indexOf("-webkit-")||(e=e.substring(1));var n,i=e,r=i.length;for(n=0;n<r;n++)"-"===i[n]&&n<r-1&&(i=i.substring(0,n)+i[n+1].toUpperCase()+i.substring(n+2),r--);return _[e]=i,i}var b=["style","variant","weight","size","family"],y={font:function(e){for(var t="",n=0,i=b.length;n<i;n++){var r=b[n],a=e.getPropertyValue("font-"+r);if(a&&(t&&(t+=" "),t+=a,"size"===r)){var s=e.getPropertyValue("line-height");s&&(t+="/"+s)}}return t}},w=["","-ms-","-moz-","-webkit-","-o-"],I={},S=document.createElement("div");function C(e){var t=I[e];if(void 0!==t)return t;e.match(O)&&Object(s.b)('Attempting to set style "'+e+"\". Use the dashed form of the style's name instead.");var n,i,r=w.length,a=!1;for(n=0;n<r;n++)if(i=w[n],"string"===typeof S.style[v(i+e)]){a=!0,i&&w.length>2&&(w=["",i]);break}return a?I[e]=i:l.b.warn("Using unsupported style "+e+"."),a?i:""}var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0,O=/[A-Z]/,T={};function M(){var e;for(e in h)h.hasOwnProperty(e)&&(T[e]=!0);var t=p.create(document.createElement("div"));for(e in T)if(T.hasOwnProperty(e)){var n=t.transform(e,1).getInline("transform");n&&"none"!==n||(T[e]=!1),t.transform()}}M();var D=T,P=M,L=function(){var e=p.create(),t=e.pause,n=e.resume;return e.pause=function(e){if(e)return t.call(this);Object(s.b)("Cannot `pause` the shared CW.UI.Style instance.")},e.resume=function(e){if(e)return n.call(this);Object(s.b)("Cannot `resume` the shared CW.UI.Style instance.")},e}();function R(e,t,n){if(e){var i=arguments.length;if(!(i>1))return e._cwStyleProxy||(e._cwStyleProxy=p.create(e));var r=e._cwStyleProxy,a=r||Object.assign(L,{element:e});3===i&&a.set(t,n),2===i&&a.set(t),r||(L.element=null)}}var x=C("transform")+"transform";function N(e,t,n){e[x]="translate("+u.ceilToDevicePixelRatio(t)+"px, "+u.ceilToDevicePixelRatio(n)+"px)"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n(199),r=n(544),a={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},s=r.a.extend({staticMembers:{nativePropertiesToCopy:Object(i.b)(["pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary"]),eventPropertiesToCopy:Object(i.b)(["pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary"]),__QUALIFIED_CLASS_NAME__:"PointerEvent"},pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",isPrimary:!1})},function(e,t,n){"use strict";function i(e){return"string"===typeof e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return I})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return A})),n.d(t,"d",(function(){return O}));var i=0,r=0,a=null,s=null,o=null,l=null,c=null,u=null,d=null,h=new Float64Array(1),p=null,f={INT_8:a,INT_16:s,INT_32:o,UINT_8:l,UINT_16:c,UINT_32:u,FLOAT_32:d,FLOAT_64:h,typeCount:0};function g(e){p=new ArrayBuffer(e);var t=new Float64Array(p);t.set(h),h=t,f.INT_8=a=new Int8Array(p),f.INT_16=s=new Int16Array(p),f.INT_32=o=new Int32Array(p),f.UINT_8=l=new Uint8Array(p),f.UINT_16=c=new Uint16Array(p),f.UINT_32=u=new Uint32Array(p),f.FLOAT_32=d=new Float32Array(p),f.FLOAT_64=h=new Float64Array(p),r=e}function m(e,t){var n=i=Math.ceil(i/t)*t;for(i+=e;i>r;)g(2*r);return n}g(8388608),m(128,128);for(var _=new Int32Array(32),v=0;v<32;v++)_[v]=-1;function b(e){return Math.ceil(Math.log(e)/Math.LN2)}function y(e){var t=e+8,n=b(t);t=Math.pow(2,n);var i=_[n],r=-1;return i>=0?(i=o[1+((r=i)>>2)],_[n]=i):(r=m(t,8),o[r>>2]=t),r<=0&&CW.fatalError("Allocated a bad block"),r}function w(e){e<=0&&CW.fatalError("Tried to free a block that doesn't exist");var t=b(o[e>>2]);o[1+(e>>2)]=_[t],_[t]=e}function I(e,t,n){var i=e>>2,r=i+n,a=0,s=0;for(a=i,s=t>>2;a<r;a++,s++)o[s]=o[a]}var S=[];function C(e){S.push(e)}var E=[{}];function A(e,t){E[e]=t}function O(e){return E[e]}},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return o}));var i=n(166),r=n(7),a=n(567),s=n(328),o=i.a.extend({mixinDependencies:[a.a],staticMembers:{storageKey:"derivatives"},maxConcurrentImageRequestCount:i.a.numberProperty(24),enableDerivativeCache:i.a.booleanProperty(!0),enableDerivativeDownsampling:i.a.booleanProperty(!0),enableDerivativeTranscodingService:i.a.booleanProperty(!0),enableDerivativeTranscodingServiceForVideos:i.a.booleanProperty(!0),enableDerivativeTranscodingServiceForSubThumbImages:i.a.booleanProperty(!0),offscreeninessThresholdForHighLatency:i.a.numberProperty(1),maxStoredMegapixelsMouse:i.a.numberProperty(100),maxStoredMegapixelsInBackgroundMouse:i.a.numberProperty(40),maxStoredMegapixelsTouch:i.a.numberProperty(30),maxStoredMegapixelsInBackgroundTouch:i.a.numberProperty(13),maxStoredMegapixelsHalfLife:i.a.numberProperty(5e3),maxStoredMegapixelsLinearBleed:i.a.numberProperty(1),derivativeRequestFeedbackReportProbability:i.a.numberProperty(1),derivativeBlacklistingLimit:i.a.numberProperty(2),derivativeUrlExpiry:18e5,maxStoredMegapixels:r.b({readOnly:!0,dependencies:["_isTouch","maxStoredMegapixelsTouch","maxStoredMegapixelsMouse"],get:Object.assign((function(){return this._isTouch?this.maxStoredMegapixelsTouch:this.maxStoredMegapixelsMouse}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),maxStoredMegapixelsInBackground:r.b({readOnly:!0,dependencies:["_isTouch","maxStoredMegapixelsInBackgroundTouch","maxStoredMegapixelsInBackgroundMouse"],get:Object.assign((function(){return this._isTouch?this.maxStoredMegapixelsInBackgroundTouch:this.maxStoredMegapixelsInBackgroundMouse}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),_isTouch:r.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===s.a.TOUCH}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===s.a.TOUCH}})}),_debug_backfillDerivativeTranscodingUrlTemplates:i.a.booleanProperty(!1)}).create()},function(e,t,n){"use strict";var i=n(632);e.exports=function(e){return function(){if(i&&"object"===typeof window.console&&"function"===typeof console[e])return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var i=n(449),r=n(120),a=n(348),s=n(390),o=n(13),l=n(127),c=n(160),u=n(316),d="[CW.Property#extendedForAccumulatorDefaultValue] Cannot extend property.",h=[],p=c.a.extend({init:function(e){var t=this;this.value=Object(i.a)(arguments),t.__s._$f7$init.call(t)},value:null,initializeMember:function(e,t){var n,i=e[t],c=this.value;if(Array.isArray(i))n=i.concat.apply(i,c);else if(Object(r.a)(i))c.every(r.a)?(Object(a.a)(h,c,1,0),h[0]=i,n=s.a.apply(null,h)):Object(o.b)(d+" The default value of the superclass property is a hash, but the subclass does not provide a hash.",{value:c,property:this});else if(Object(u.a)(i))c.every(r.a)?n=i.extend.apply(i,c):Object(o.b)(d+" The default value of the superclass property is a class, but the subclass does not provide a hash.",{value:c,property:this});else if(Object(l.a)(i))Object(o.b)(d+" This property class returned a default value that is not valid for aggregation.  It must be either an array or a hash object.",{property:this,previousValue:i});else if(c.every(r.a))n=s.a.apply(null,c);else if(c.every(Array.isArray)){Object(a.a)(h,c,0,1);var p=c[0];n=p.concat.apply(p,h)}else Object(o.b)(d+" If the default value of the superclass property is "+i+", the subclass must provide a hash or an array.",{value:c,property:this});return n},__superMap:{_$f7$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Accumulator"}}),f=function(){return p.create.apply(p,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),r={staticMembers:{_pool:null,init:function(){var e=this,t=arguments;this._pool=[],e.__s._$7M$init.apply(e,t)},maxPoolSize:200,create:function(){var e,t=this,n=this._pool,i=n.length;return i>0?(e=n.pop()).isPooled=!1:e=t.__s._$EI$create.call(t),e.retain(this,"CW._Poolable.create"),e.initFromPool.apply(e,arguments),e._autoreleaseForTransfer(this,"CW._Poolable.create"),e},_returnInstanceToPool:function(e){var t=this._pool;t.length>=this.maxPoolSize||(t.push(e),e.isPooled=!0)},__superMap:{_$7M$init:"init",_$EI$create:"create"}},retain:function(){var e=this,t=arguments;return this.isPooled&&Object(i.b)("Attempted to retain pooled object.",this),e.__s._$PX$retain.apply(e,t)},release:function(){var e=this,t=arguments;return this.isPooled&&Object(i.b)("Attempted to release pooled object.",this),e.__s._$Rz$release.apply(e,t)},_captureDisposingObjectForPool:function(){this.constructor._returnInstanceToPool(this)},isPooled:!1,initFromPool:function(e){for(var t in arguments.length>1&&Object(i.b)("Default poolable initializer supports at most one argument. If you would like to apply a mixin it should be done when calling .extend()."),e)this[t]=e[t]},__superMap:{_$PX$retain:"retain",_$Rz$release:"release"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(40),r=n(220),a=n(15),s=n(55),o=n(214),l=n(161),c=n(221),u=n(20),d=n(7),h=n(209),p=n(309);function f(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var g=[{name:"dppx",multiple:1},{name:"dpi",multiple:window.screen.logicalXDPI||96}],m="",_=NaN,v=!1;!function(){if(window.matchMedia)for(var e,t,n=0;e=g[n];n++){var i="(min-resolution: 1"+(t=e.name)+")",r=window.matchMedia(i),a=r?r.media:null;if(a&&-1!==a.indexOf("min-resolution"))return v=!0,m=t,void(_=e.multiple)}}();var b=i.a.extend(u.b,r.a,{isMac:void 0,isWindows:void 0,isiOS:void 0,osMajorVersion:void 0,osMinorVersion:void 0,isiPhone:void 0,isiPad:void 0,isDesktopClassTablet:void 0,isiPhoneLikeDevice:void 0,isiPadLikeDevice:void 0,devicePixelRatio:Object(d.b)({get:function(){return this._devicePixelRatio||(this._devicePixelRatio=this._getDevicePixelRatio())},readOnly:!0,didChange:function(e){this.roundToDevicePixelRatio=this._roundToDevicePixel(e),this.floorToDevicePixelRatio=this._floorToDevicePixel(e),this.ceilToDevicePixelRatio=this._ceilToDevicePixel(e)}}),roundToDevicePixelRatio:o.a,_roundToDevicePixel:function(e){return function(t){return Math.round(t*e)/e}},floorToDevicePixelRatio:o.a,_floorToDevicePixel:function(e){return function(t){return Math.floor(t*e)/e}},ceilToDevicePixelRatio:o.a,_ceilToDevicePixel:function(e){return function(t){return Math.ceil(t*e)/e}},_getDevicePixelRatio:function(){var e=this.stubWindow;return e.devicePixelRatio||e.screen.deviceXDPI/e.screen.logicalXDPI||1},_devicePixelRatio:NaN,isRetina:void 0,hardwareConcurrency:Object(a.d)({readOnly:!0,defaultValue:function(){return navigator.hardwareConcurrency||void 0}}),canvasSupportsImageSmoothingQuality:Object(a.d)({readOnly:!0,defaultValue:function(){if(this._canvasSupportsImageSmoothingQuality)return this._canvasSupportsImageSmoothingQuality;void 0!=document.createElement("canvas").getContext("2d").imageSmoothingQuality?this._canvasSupportsImageSmoothingQuality=!0:this._canvasSupportsImageSmoothingQuality=!1}}),pointer:Object(d.b)("none"),init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=void 0===t?window:t,i=e.navigator,r=void 0===i?navigator:i,a=e.document,s=(void 0===a&&document,e.userAgent),o=void 0===s?r.userAgent:s,c=e.eventCapabilities,u=void 0===c?p.c:c,d=f(e,["window","navigator","document","userAgent","eventCapabilities"]),h=this;this.stubWindow=n,h.__s._$39K$init.call(h,d);var g,m,_,v,b,y=o.toLowerCase(),w=!!/mac/.test(y)&&!/like mac/.test(y),I=w&&u.isTouchSupported,S=w&&!I,C=!!/windows/.test(y),E=y.match(/\b(iPad|iPhone|iPod)\b.*\bOS (\d+)_(\d+)/i);if(this.isMac=S,this.isWindows=C,I)g=!1,m=_=!0;else if(E){var A=E[1];m="ipad"===A,_=(g="iphone"===A||"ipod"===A)||m}else g=m=_=!1;if(this.isiPhone=g,this.isiPhoneLikeDevice=g,this.isiPad=m,this.isDesktopClassTablet=I,this.isiPadLikeDevice=m,this.isiOS=_,I)v="13",b="0";else if(S){var O=y.match(/mac os x (\d+)[ _.](\d+)/);O&&(v=O[1],b=O[2])}else if(C){var T=y.match(/windows[ a-z]+?(\d+)[ _.](\d+)/);T&&(v=T[1],b=T[2])}else _&&(v=E[2],b=E[3]);v&&(this.osMajorVersion=parseInt(v,10)),b&&(this.osMinorVersion=parseInt(b,10)),this.isRetina=n.devicePixelRatio>1,this._updateDevicePixelRatio(),Object(l.a)(n,"resize",this._updateDevicePixelRatio.bind(this),!1),this._listenForPointerChange()},_updateDevicePixelRatio:function(){if(h.a.getPath("sharedInstance.isFirefox")){var e=this._forceWindowResizeNotificationCanvas;e||((e=this._forceWindowResizeNotificationCanvas=document.createElement("canvas")).width=1,e.height=1,this._forceWindowResizeNotificationCanvasContext=e.getContext("2d"),e.classList.add("ff-force-window-resize-notification"),e.style.position="fixed",e.style.left="-1000px",e.style.top="-1000px",document.body.appendChild(e));try{this._forceWindowResizeNotificationCanvasContext.measureText("Blah")}catch(n){}}var t=this._getDevicePixelRatio();t!==this._devicePixelRatio&&(this._devicePixelRatio=t,this._detectChangeAwayFromDPR(t),this.propertyChanged("devicePixelRatio"))},_detectChangeAwayFromDPR:function(e){var t=this.stubWindow;if(t.matchMedia){var n,i=.001*Math.round(e/.001),r=i+.001,a=i-.001,s=Object(c.a)(this._updateDevicePixelRatio.bind(this)),o=this._dprQueryListCache||(this._dprQueryListCache={}),l=this._activeMediaQueryListPair,u=o[i];u||(u=o[i]={},n="(-webkit-min-device-pixel-ratio: "+a+"), (min--moz-device-pixel-ratio: "+a+")"+(v?", (min-resolution: "+a*_+m+")":""),u.lowerBound=t.matchMedia(n),n="(-webkit-max-device-pixel-ratio: "+r+"), (max--moz-device-pixel-ratio: "+r+")"+(v?", (max-resolution: "+r*_+m+")":""),u.upperBound=t.matchMedia(n)),u!==l&&(l&&(l.lowerBound.removeListener(s),l.upperBound.removeListener(s)),u.lowerBound.addListener(s),u.upperBound.addListener(s),this._activeMediaQueryListPair=u)}},_listenForPointerChange:function(){this.stubWindow.matchMedia&&(this._listenForPointerQuality("none"),this._listenForPointerQuality("coarse"),this._listenForPointerQuality("fine"))},_listenForPointerQuality:function(e){var t=this,n=this.stubWindow.matchMedia("(pointer: "+e+")"),i=function(n){n.matches&&(t.pointer=e)};n.addListener(i),this._pointerQueries.push([n,i]),i(n)},_pointerQueries:Object(s.c)(Array),_dprQueryListCache:null,_resMultiple:_,cleanup:function(){this.__s._$5sh$cleanup.call(this),this._pointerQueries.forEach((function(e){var t=e[0],n=e[1];return t.removeListener(n)}))},__superMap:{_$39K$init:"init",_$5sh$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Device"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return y}));var i=n(40),r=n(15),a=n(349),s=n(214),o=n(312),l=n(300),c=n(7),u=n(704),d=n(705),h=n(548),p=n(353),f=n(297),g=n(706),m=n(720),_=n(527),v=n(721),b=n(722),y=i.a.extend(o.b,l.a,f.a,u.a,d.a,h.a,g.a,m.a,_.b,v.a,b.a,p.a,{init:function(e){var t=this,n=arguments;(e&&e.isRootView||this.isRootView)&&(this._isAttached=!1),t.__s._$yn$init.apply(t,n)},staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaRole",attributes:{},attribute:"role"},"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabel",attributes:{},attribute:"aria-label"},"aria-labelledby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledBy",attributes:{},attribute:"aria-labelledby"},"aria-describedby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedBy",attributes:{},attribute:"aria-describedby"},"aria-disabled":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDisabled",attributes:{},attribute:"aria-disabled"},"aria-hidden":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaHidden",attributes:{},attribute:"aria-hidden"},"aria-controls":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaControls",attributes:{},attribute:"aria-controls"},"data-testid":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"testID",attributes:{},attribute:"data-testid"}}}},__QUALIFIED_CLASS_NAME__:"View"},nextResponder:Object(r.d)({get:function(e){return e||this.parent}}),isRootView:!1,isAttached:Object(c.b)({dependencies:["parent.isAttached"],get:Object.assign((function(e){return Object(a.a)(e)?e:Boolean(this.getPath("parent.isAttached"))}),{__CW__getter:function(e,t,n,i){return Object(a.a)(e)?e:Boolean(i.internalGetPath(this,t[0+n]))}}),set:s.a}),parent:Object(c.b)(),parentKey:Object(c.b)(),ariaRole:Object(c.b)(),ariaLabel:Object(c.b)(),ariaLabelledBy:Object(c.b)(),ariaDescribedBy:Object(c.b)(),ariaDisabled:Object(c.b)(),ariaHidden:Object(c.b)(),ariaControls:Object(c.b)(),testID:Object(c.b)(),__superMap:{_$yn$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l}));var i=n(55),r=n(221),a=n(25),s=i.a.extend({function:void 0,exceptionWrapped:!1,disposeGuarded:!0,allowedOnClass:!0,init:function(e){var t="object"===typeof e?e:a.objectPool.getAutodisposingInstanceWithProperties("function",e);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.__s._$11A$init.call(this,this.function)},boundFunctionInstantiator:function(e,t,n){var i=this.function,a=this.disposeGuarded?function(){if(!n.isDisposed)return i.apply(n,arguments)}:function(){return i.apply(n,arguments)};return this.exceptionWrapped?r.a(a):a},wasRegistered:function(){var e=this,t=arguments;e.__s._$1FF$wasRegistered.apply(e,t),this.instantiate=this.boundFunctionInstantiator},__superMap:{_$11A$init:"init",_$1FF$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BoundFunction"}});function o(){return s.define.apply(s,arguments)}function l(e){return s.define("object"===typeof e?Object.assign({},e,{exceptionWrapped:!0}):{function:e,exceptionWrapped:!0})}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=1e8,r="bplist0",a="YnBsaXN0M"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("AssetSubtype",{NONE:0,PHOTO_PANORAMA:1,PHOTO_SUPPORTING_VIDEO:2,PHOTO_SCREENSHOT:3,VIDEO_SLOWMO:100,VIDEO_TIMELAPSE:101})},function(e,t,n){var i=n(290),r=n(362),a=n(173),s=n(146),o=n(368),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=5==e||d;return function(p,f,g,m){for(var _,v,b=a(p),y=r(b),w=i(f,g,3),I=s(y.length),S=0,C=m||o,E=t?C(p,I):n?C(p,0):void 0;I>S;S++)if((h||S in y)&&(v=w(_=y[S],S,b),e))if(t)E[S]=v;else if(v)switch(e){case 3:return!0;case 5:return _;case 6:return S;case 2:l.call(E,_)}else if(u)return!1;return d?-1:c||u?u:E}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Record",(function(){return D})),n(1),n(0),n(2);var i=n(178),r=n(42),a=n(239),s=n(277),o=n(481),l=n(796),c=n(409),u=n(133),d=n(799),h=n(482),p=n(51),f=n(55),g=n(283),m=n(25),_=n(203);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b=m.Pool,y=m.setPool,w=p.a,I=function(){function e(){this.reset()}var t=e.prototype;return t.willDisposeToPool=function(){this._notifySubscriptionWillDispose(this),this.reset()},t.reset=function(){this.callback=w,this.thisArg=void 0,this.pk=void 0,this._notifySubscriptionWillDispose=w},t.retain=function(){return b.retainInstance(this),this},t.release=function(){return b.releaseInstance(this),this},t.autorelease=function(){return b.autoreleaseInstance(this),this},e}(),S=b.extend({disposeInstance:function(e){var t=this,n=arguments;return e.willDisposeToPool(),t.__s._$Dx$disposeInstance.apply(t,n)},__superMap:{_$Dx$disposeInstance:"disposeInstance"}}).create(I),C={staticMembers:{handleDataHashChangeForPrimaryKey:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this._subscriptionSetsByPK[e];r&&r.forEach((function(e){return e.callback.apply(e,n)}),this)},subscribeToChangeNotificationsForPrimaryKey:function(e,t,n){this._ensureDMListenerForDataHashChangeSubscriptions();var i=S.getInstance();return i.callback=t,i.thisArg=n,i.pk=e,i._notifySubscriptionWillDispose=this._unregisterSubscription,this._registerSubscription(i),i},_ensureDMListenerForDataHashChangeSubscriptions:function(){var e=this,t=this.prototype,n=t.hasOwnProperty("_dmsWithDHCSListeners")&&t._dmsWithDHCSListeners||(t._dmsWithDHCSListeners=new WeakSet),i=r.n();i&&!n.has(i)&&(n.add(i),i.listen("dataDidChangeForPrimaryKeys",(function(t){var n=t&&t.context.get(e);if(n)for(var i,r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(i=r()).done;){var a=i.value;e.handleDataHashChangeForPrimaryKey(a)}})))},_subscriptionSetsByPK:f.c(Object),_registerSubscription:function(e){var t=e.pk,n=this._subscriptionSetsByPK;(n[t]||(n[t]=y.getInstance())).add(e)},_unregisterSubscription:_.b((function(e){var t=e.pk,n=this._subscriptionSetsByPK,i=n[t];i&&(i.delete(e),i.size||(y.disposeInstance(i),delete n[t]))})),init:function(){var e=this,t=arguments;e.__s._$1WO$init.apply(e,t),this.handleDataHashChangeForPrimaryKey!==C.staticMembers.handleDataHashChangeForPrimaryKey&&g.a.observe("application.dataManager",this._ensureDMListenerForDataHashChangeSubscriptions.bind(this))},__superMap:{_$1WO$init:"init"}}},E=n(156),A=n(286),O=n(118);function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return M(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var D=i.a.extend({mixinDependencies:[o.a,l.a,c.a,h.a,d.a,C],staticMembers:{_isAbstract:!0,recordModelClasses:[],recordModelClassesByType:{},init:function(){var e=this,t=arguments;e.__s._$Pb$init.apply(e,t);var n=this.hasOwnProperty("_isAbstract")&&!0===this._isAbstract;n||(D.recordModelClassesByType[this.CK_RECORD_TYPE]=this,D.recordModelClasses.push(this))},getModelClassForRecordType:function(e){return this.recordModelClassesByType[e]},getPrimaryKey:function(e,t){return this.getPrimaryKeyWithZonePK(e.pk,t)},getPrimaryKeyWithZonePK:function(e,t){return e+" "+t},getZonePrimaryKeyFromPrimaryKey:function(e){var t=e.indexOf(" ");return e.substring(0,t)},getRecordNameFromPrimaryKey:function(e){var t=e.lastIndexOf(" ");return e.substring(t+1)},getPartsFromPrimaryKey:function(e){return{zone:this.getZonePrimaryKeyFromPrimaryKey(e),recordName:this.getRecordNameFromPrimaryKey(e)}},getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName;return this.getPrimaryKeyWithZonePK(t,n)},createFromDataHash:function(e){var t=this,n=arguments;return void 0===e.recordType&&(e.recordType=this.CK_RECORD_TYPE),t.__s._$1ea$createFromDataHash.apply(t,n)},getDataValuesFromServiceValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=n.__s._$1mD$getDataValuesFromServiceValues.call(n,e,t),a=r.n(),s=a.readDataForPrimaryKey(O.Zone,i.zone);return i.zoneID=s.zoneID,i.pk=this.getPrimaryKeyWithZonePK(s.pk,i.recordName),i},loadFromZone:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.map((function(t){return n.getPrimaryKey(e,t)}));return this.load(Object.assign({primaryKeys:r},i))},listFromZone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.list(Object.assign({zonePK:e.pk},t))},isPrimaryKeyForZone:function(e,t){return e.startsWith(t)&&" "===e[t.length]},getAllRecordsByClassForZonePK:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.n(),i={},a=T(this.recordModelClasses);!(t=a()).done;){var s=t.value;i[s.name]=this.getAllRecordsForClassAndZonePK(s,e,n)}return i},getAllRecordsForClassAndZonePK:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.n(),s=i.constructor.getPrimaryKeysToStoreIds(e),o=Object.keys(s),l=o.filter((function(e){return n.isPrimaryKeyForZone(e,t)})),c=l.map((function(e){return s[e]})),u=c.filter((function(e){return i.hasDataFor(e)}));return a.a.createFromStoreIds(u,e,this)},load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,i=arguments,r=t.primaryKeys,a=n.__s._$3A9$load.apply(n,i);return a.then((function(t){for(var n=e._syncTokenWhenLoadedByPK,i=0,a=r.length;i<a;i++){var s=r[i],o=e.getZonePrimaryKeyFromPrimaryKey(s),l=O.Zone.getDataHashForPrimaryKey(o).syncToken;n[e.getStoreIdForPrimaryKey(s)]=l}return t}))},getIsLoadedAndStillValidForContext:function(e){var t=this,n=arguments,i=r.n(),a=i.constructor.getStoreIdForPrimaryKey(this,e),s=this._syncTokenWhenLoadedByPK[a];if("string"===typeof s){var o=this.getDataHashForStoreId(a,i);if(!o)return t.__s._$3cR$getIsLoadedAndStillValidForContext.apply(t,n);var l=O.Zone.getDataHashForPrimaryKey(o.zone);return s===l.syncToken}return t.__s._$3cR$getIsLoadedAndStillValidForContext.apply(t,n)},_syncTokenWhenLoadedByPK:{},__superMap:{_$Pb$init:"init",_$1ea$createFromDataHash:"createFromDataHash",_$1mD$getDataValuesFromServiceValues:"getDataValuesFromServiceValues",_$3A9$load:"load",_$3cR$getIsLoadedAndStillValidForContext:"getIsLoadedAndStillValidForContext"},__QUALIFIED_CLASS_NAME__:"Record"},recordName:Object(u.c)({readOnly:!0}),recordType:Object(u.c)({readOnly:!0}),recordChangeTag:Object(u.c)({readOnly:!0}),zone:s.a.toOne({readOnly:!0,strong:!0,type:O.Zone}),zoneID:Object(E.f)({readOnly:!0,type:A.a}),getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=this.recordName,r=this.recordType,a=this.recordChangeTag;return n.__s._$4Ox$getServiceValuesFromDataValues.call(n,e,Object.assign(t,{recordName:i,recordType:r,recordChangeTag:a}))},__superMap:{_$4Ox$getServiceValuesFromDataValues:"getServiceValuesFromDataValues"}})},function(e,t,n){"use strict";function i(e){return e instanceof Function||!(!e||"function"!==typeof e||e instanceof Element)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(40),r=n(220),a=n(55),s=n(20),o=n(7),l=n(161),c=n(696),u=i.a.extend(r.a,s.b,{init:function(e){var t=e&&e.userAgent;t?delete e.userAgent:t=window.navigator.userAgent,t=t.toLowerCase();var n,i,r,a,s,o=/\sedge\//.test(t),c=!o&&/fxios/.test(t),u=!o&&!c&&/chrome|crios/.test(t),d=!o&&!c&&!u&&/safari/.test(t),h=c||!o&&!u&&!d&&/firefox/.test(t),p=!o&&!u&&!d&&!h&&/trident|msie/.test(t),f=o,g=!f&&/applewebkit/.test(t)&&!/edge/.test(t),m=!f&&!g&&/trident/.test(t),_=!f&&!g&&!m&&/gecko/.test(t);o?(n=t.match(/(?:edge).(\d+)\.(\d+)/),a=t.match(/(?:edge).(\d+)/)):(n=t.match(/(?:chrome|crios|version|firefox|fxios|msie|rv).(\d+)\.(\d+)/),a=t.match(/(?:applewebkit|gecko|trident).(\d+)/));var v=o||p;n&&(i=parseInt(n[1],10),r=parseInt(n[2],10)),a&&(s=parseInt(a[1])),this.__s._$tC$init.call(this,{isChrome:u,isSafari:d,isSafari12OrLower:d&&i<13,isFirefox:h,isEdge:o,isIE:p,isEdgeOrIE:v,isIE9OrLower:p&&i<10,isIE8OrLower:p&&i<9,majorVersion:i,minorVersion:r,isEdgeHTML:f,isWebKit:g,isGecko:_,isTrident:m,engineMajorVersion:s}),Object(l.a)(window,"online",this.updateNetworkConnectionStatus.bind(this)),Object(l.a)(window,"offline",this.updateNetworkConnectionStatus.bind(this)),this.updateNetworkConnectionStatus()},updateNetworkConnectionStatus:function(){this.isOffline=!window.navigator.onLine},isOffline:Object(o.b)(),isChrome:void 0,isFirefox:void 0,isEdge:void 0,isIE:void 0,isEdgeOrIE:void 0,isIE9OrLower:void 0,isIE8OrLower:void 0,isSafari:void 0,majorVersion:void 0,minorVersion:void 0,isEdgeHTML:void 0,isWebKit:void 0,isGecko:void 0,isTrident:void 0,engineMajorVersion:void 0,window:Object(o.b)({strong:!0,defaultValue:Object(a.c)(c.a)}),__superMap:{_$tC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Browser"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("AssetBurstFlag",{NOT_IN_BURST:0,UNKNOWN:1,NOT_PICKED:2,AUTO_PICKED:4,USER_FAVORITE:8,STACK:16,FIRST_PICKED:32})},function(e,t,n){var i=n(145),r=n(413),a=n(271),s=n(232),o=n(251),l=n(180),c=n(590),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=s(e),t=o(t,!0),c)try{return u(e,t)}catch(n){}if(l(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(145),r=n(163),a=n(271);e.exports=i?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(130),r=n(280),a=n(265),s=n(562),o=n(93),l={windowCount:0,windowApplications:{},openWindowApplication:function(e,t,n){var i=this._getNextWindowId();e=this._addInstanceIdToURL(e,i);var r=window.open(e,t,n);return this.windowApplications[i]={window:r},i},_addInstanceIdToURL:function(e,t){var n="&";return-1===e.indexOf("#")&&(n="#"),e+n+"instanceId="+t},_getNextWindowId:function(){return"generating a new id",i.b.debug("WindowApplication: generating a new id"),"window_"+this.windowCount++},windowApplicationIsRegistered:function(e){return!!this.windowApplications[e]},passWindowApplicationMessage:function(e,t){var n=this.windowApplications[e];if(n){var l=r.a(arguments);if(l=l.slice(2,l.length),n.didInitialize){var c={isCloudOSMessage:!0,methodName:t,args:l,isWindowApplicationMessage:!0};try{var u=n.window.CK.currentApplication;if(u)u._windowMessageWasReceived(a.a(c));else{var d=s.a.create({window:n.window,origin:o.a.getPath("cloudOSApplication.driver").getIOChannelOrigin()});d.sendMessage(c)}}catch(h){i.b.warn("postMessage: CK.WindowApplication "+e+" not properly loaded?")}}else this._registerWindowApplicationMessage(e,t,l)}else i.b.warn("Could not find a COSK.Utils.windowApplications with instanceId "+e)},windowApplicationDidInitialize:function(e){var t=this.windowApplications[e];t?t.didInitialize=!0:i.b.warn("There is no windowApplication for "+e)},passPendingWindowApplicationMessages:function(e){var t,n,i,r,a=this.windowApplications[e];if(a&&(t=a.messages))for(n=0,i=t.length;n<i;n++){var s=[e,(r=t[n]).method];this.passWindowApplicationMessage.apply(this,s.concat(r.args))}},_registerWindowApplicationMessage:function(e,t,n){var i,r=this.windowApplications[e];r&&((i=r.messages)||(i=[],r.messages=i),i.push({method:t,args:n}))},resolveInstanceIfNeeded:function(e){var t=this.windowApplications;if(!t[e])for(var n in t)if(t[n].window===e)return n;return e}}},function(e,t,n){var i=n(108),r=n(213),a=n(180),s=n(489),o=n(490),l=n(217),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,o){var l=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,h=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||r(n,"name",t),u(n).source=d.join("string"==typeof t?t:"")),e!==i?(l?!h&&e[t]&&(c=!0):delete e[t],c?e[t]=n:r(e,t,n)):c?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||o(this)}))},function(e,t,n){var i,r,a,s=n(592),o=n(108),l=n(128),c=n(213),u=n(180),d=n(414),h=n(364),p=o.WeakMap;if(s){var f=new p,g=f.get,m=f.has,_=f.set;i=function(e,t){return _.call(f,e,t),t},r=function(e){return g.call(f,e)||{}},a=function(e){return m.call(f,e)}}else{var v=d("state");h[v]=!0,i=function(e,t){return c(e,v,t),t},r=function(e){return u(e,v)?e[v]:{}},a=function(e){return u(e,v)}}e.exports={set:i,get:r,has:a,enforce:function(e){return a(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var i=n(214),r=n(51),a=n(346),s=n(82),o=n(319),l=n(20),c=n(7);function u(e,t){for(var n=i.a;t.parent;)n=e._getNodeHandler(t).generateLookupFunction(t,n),t=t.parent;return n}function d(e,t){return t(e)}function h(e,t,n,i){var o,h,p,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.a,g=t.name,m=e.prototype,_="_"+g+"OutletObserver",v=m.getMetadataByType(l.d);if(v.hasOwnProperty(_)){var b=v[_];o=b.transforms,h=b.paths,p=b.sideEffects}else{o=[],h=[],p=[];var y="_render"+g+"Outlet";m[y]=function(e){for(var t=h.length,n=this.element,i=[],r=0;r<t;r++)i[r]=d(n,h[r]);(this[y]=function(e){for(var n=0;n<t;n++){var r=o[n].call(this,i[n],e);r&&(i[n]=r),p[n].call(this,r,e)}}).call(this,e)};var w=Object(a.a)(g)[0];Object(s.a)(m.getMetadata(w),c.a)||(i||(i={}),i.outletProperty=!0,m.registerMetadata(w,c.a.define(i)));var I=function(e){this[y](e)};I.displayName=g+" template outlet observer";var S=Object(l.h)({inputs:[g],callback:I});S.transforms=o,S.paths=h,S.sideEffects=p,m.registerMetadata(_,S),e._outletWasRegistered(w)}var C=t.attributes;if(C){var E=C.signal;E&&m.registerMetadata(E,Object(l.h)(_,r.a))}o.push(n),p.push(f),h.push(u(e,t))}function p(e){if(e.hasOwnProperty("validvalues")){var t=Object(o.a)(e.validvalues);return function(e){if(t[e])return e}}if(e.hasOwnProperty("truevalue")){var n=e.truevalue;if(e.hasOwnProperty("falsevalue")){var i=e.falsevalue;return function(e){return e?n:i}}return function(e){if(e)return n}}return f}var f=function(e){return e};function g(e,t,n){var i=u(e,n);e.prototype.registerMetadata(t,Object(c.b)({readOnly:!0,dependencies:["element"],get:Object.assign((function(){return d(this.element,i)}),{__CW__getter:function(e,t,n,r){return d(r.internalGet(this,t[0+n]),i)}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(15),r={staticMembers:{sharedInstance:Object(i.d)({get:function(){return this.hasOwnProperty("_sharedInstance")&&this._sharedInstance||(this._sharedInstance=this.create())},set:function(e){this._sharedInstance=e}})},dispose:function(){var e=this,t=arguments;this.constructor._sharedInstance===this&&delete this.constructor._sharedInstance,e.__s._$Oz$dispose.apply(e,t)},__superMap:{_$Oz$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(386),r=n(318),a=[];function s(e){var t=Object(i.a)(e);return t||((t=function(){var t=0,n=0,i=arguments.length;a.length=i+t-n;for(var s=n,o=t;s<i;s++,o++)a[o]=arguments[s];var l=a;return Object(r.b)(e,l,this)})._exceptionHandling_wrappedFunction=!0,t._exceptionHandling_inputFunction=e,e._exceptionHandling_wrappedFunction=t,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(40),r=n(200),a=n(15),s=n(355),o=i.a.extend(r.a,{itemsChanges:Object(a.d)({strong:!0}),invalidateItemAt:function(e){var t=this.invalidItems;t||(t=this.invalidItems=s.a.create()),t.add(e)},invalidItems:Object(a.d)({strong:!0}),sectionsChanges:Object(a.d)({strong:!0}),invalidateSectionAt:function(e){var t=this.invalidSections;t||(t=this.invalidSections=s.a.create()),t.add(e)},invalidSections:Object(a.d)({strong:!0}),movedBy:Object(a.d)({strong:!0}),sizeChangedBy:Object(a.d)({strong:!0}),itemShown:Object(a.d)({strong:!0}),itemShownAt:Object(a.d)({strong:!0}),itemScrolledTo:Object(a.d)({strong:!0}),everythingChanged:!1,layoutMetricsChanged:Object(a.d)({strong:!0}),collectionChanged:!1,didEnterPool:function(){var e=this,t=arguments;this.itemsChanges=null,this.invalidItems=null,this.sectionsChanges=null,this.invalidSections=null,this.movedBy=null,this.sizeChangedBy=null,this.itemShown=null,this.itemShownAt=null,this.itemScrolledTo=null,this.everythingChanged=!1,this.layoutMetricsChanged=null,this.collectionChanged=!1,e.__s._$cv$didEnterPool.apply(e,t)},toString:function(){var e=this,t=arguments,n="["+e.__s._$e1$toString.apply(e,t)+" ";return this.itemsChanges&&(n+="itemsChanges("+this.itemsChanges.lengthDelta+") "),this.invalidItems&&(n+="invalidItems("+this.invalidItems.size+") "),this.sectionsChanges&&(n+="sectionsChanges("+this.sectionsChanges.lengthDelta+") "),this.invalidSections&&(n+="invalidSections("+this.invalidSections.size+") "),this.movedBy&&(n+="movedBy("+this.movedBy.toString()+") "),this.sizeChangedBy&&(n+="sizeChangedBy("+this.sizeChangedBy.toString()+") "),this.everythingChanged&&(n+="everythingChanged "),this.layoutMetricsChanged&&(n+="layoutMetricsChanged("+this.layoutMetricsChanged.toArray().join(", ")+") "),this.collectionChanged&&(n+="collectionChanged "),this.itemShown&&(n+="itemShown "),this.itemShownAt&&(n+="itemShownAt("+this.itemShownAt.toString()+") "),n+"]"},__superMap:{_$cv$didEnterPool:"didEnterPool",_$e1$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InvalidationContext"}})},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return s}));var i=n(801),r=n(156),a=n(360),s=a.a.extend({mixinDependencies:[i.a],staticMembers:{CK_RECORD_TYPE:"CPLContainerRelation",RECORD_NAME_RE:/^(\S+)-IN-(\S+)$/,isWellFormedRecordName:function(e){return s.RECORD_NAME_RE.test(e)},getItemAndContainerFromRecordName:function(e){var t=e.match(s.RECORD_NAME_RE);if(t)return{itemId:t[1],containerId:t[2]}},getPartsFromPrimaryKey:function(e){var t=this,n=arguments,i=t.__s._$c1$getPartsFromPrimaryKey.apply(t,n),r=this.getItemAndContainerFromRecordName(i.recordName);return Object.assign(i,r)},getPrimaryKeyFromParts:function(e){return"string"===typeof e.recordName?this.__s._$lz$getPrimaryKeyFromParts.call(this,e):this.__s._$lz$getPrimaryKeyFromParts.call(this,{zone:e.zone,recordName:this.getRecordNameForItemInContainer(e.itemId,e.containerId)})},getRecordNameForItemInContainer:function(e,t){return e+"-IN-"+t},findForItemInContainer:function(e,t,n){var i=this.getRecordNameForItemInContainer(t,n),r=a.a.getPrimaryKeyWithZonePK(e,i);return this.find(r)},__superMap:{_$c1$getPartsFromPrimaryKey:"getPartsFromPrimaryKey",_$lz$getPrimaryKeyFromParts:"getPrimaryKeyFromParts"},__QUALIFIED_CLASS_NAME__:"ContainerRelation"},containerId:r.e({readOnly:!0}),itemId:r.e({readOnly:!0}),position:r.e({readOnly:!0}),isKeyAsset:r.b({readOnly:!0})})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n(1),n(0),n(2),n(11);var i=n(156),r=n(7),a=n(486),s=n(250),o=n(808),l=n(138).b("MediaMetaDataType",{CGImageProperties:"CGImageProperties",AVAssetProxy:"AVAssetProxy"}),c=n(805),u=n(584),d=n(586),h=n(360),p=n(167),f=n(806),g=h.a.extend(Object.assign({mixinDependencies:[c.a,d.a,u.a,f.a],staticMembers:{CK_RECORD_TYPE:"CPLMaster",getDataValuesFromServiceValues:function(){var e=this,t=arguments,n=e.__s._$TW$getDataValuesFromServiceValues.apply(e,t);return n&&(n._receiptTimestamp=Date.now()),n},__superMap:{_$TW$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"Master"},itemType:i.e({readOnly:!0}),codec:i.e({readOnly:!0}),isHEICImage:r.b({readOnly:!0,dependencies:["itemType"],get:Object.assign((function(){var e=this.itemType;return"public.heic"===e||"public.heif"===e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return"public.heic"===r||"public.heif"===r}})}),isHEVCVideo:r.b({readOnly:!0,dependencies:["codec"],get:Object.assign((function(){return"hevc"===String(this.codec).toLowerCase()}),{__CW__getter:function(e,t,n,i){return"hevc"===String(i.internalGet(this,t[0+n])).toLowerCase()}})}),dataClassType:i.j(s.a,{readOnly:!0,defaultValue:s.a.IMAGE}),mediaMetaDataType:i.j(l,{readOnly:!0}),mediaMetaDataEnc:i.k({readOnly:!0}),filenameEnc:i.l({readOnly:!0}),originalOrientation:i.j(a.a,{readOnly:!0,defaultValue:a.a.NORMAL}),importedBy:i.j(o.a,{readOnly:!0,defaultValue:o.a.UNKNOWN}),videoFrameRate:i.e({readOnly:!0}),resVidHDRMedRes:i.e({readOnly:!0})},Object(p.a)("resOriginal"),Object(p.a)("resOriginalAlt"),Object(p.a)("resOriginalVidCompl")))},function(e,t,n){var i=n(145),r=n(91),a=n(180),s=Object.defineProperty,o={},l=function(e){throw e};e.exports=function(e,t){if(a(o,e))return o[e];t||(t={});var n=[][e],c=!!a(t,"ACCESSORS")&&t.ACCESSORS,u=a(t,0)?t[0]:l,d=a(t,1)?t[1]:void 0;return o[e]=!!n&&!r((function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,u,d)}))}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c}));var i={PARSE_ERROR:-32700,INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,INTERNAL_ERROR:-32603},r=function(e,t,n){this.message=e,this.code=t,this.data=n};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var a=function(e){this.code=i.PARSE_ERROR,this.name="Parse error",this.message=e};a.prototype=Object.create(r.prototype),a.prototype.constructor=a;var s=function(e){this.code=i.INVALID_REQUEST,this.name="Invalid request",this.message=e};s.prototype=Object.create(r.prototype),s.prototype.constructor=s;var o=function(e){this.code=i.METHOD_NOT_FOUND,this.name="Method not found",this.message=e};o.prototype=Object.create(r.prototype),o.prototype.constructor=o;var l=function(e){this.code=i.INVALID_PARAMS,this.name="Invalid params",this.message=e};l.prototype=Object.create(r.prototype),l.prototype.constructor=l;var c=function(e){this.code=i.INTERNAL_ERROR,this.name="Internal error",this.message=e};c.prototype=Object.create(r.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var i=n(160),r=n(200),a=n(120),s={DEFAULT:0,FORCE_FIRE:1,SKIP_FIRE:2},o=i.a.extend(r.a,{didFire:!1,_fireState:!1,previousValues:null,context:null,type:"",initFromPool:function(e){e&&Object(a.a)(e)&&(this.type=e.type||"",this.didFire=e.didFire||!1,this.forceFire=e.forceFire||!1,this.previousValues=e.previousValues||null,this.context=e.context||null,this._fireState=e._fireState||s.DEFAULT)},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignalEvent"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("CPLOperationTypes",(function(e){e("Media",(function(e){e("LoadKey"),e("BatchLoadKey"),e("BurstCount"),e("BurstList")})),e("Container",(function(e){e("BatchLoad"),e("CountItemsInIndex")}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return Y}));var i=n(20),r=n(7),a=n(55),s=n(280),o=n(17),l=n(256),c=n(13),u=n(351),d=n(51),h=n(196),p=n(188),f=n(144),g=-1,m=++h.f.typeCount,_={memory:h.f,typeId:m,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"Variable: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return g>0?(e=g,0===(g=this.memory.INT_32[e>>2])&&c.b("Next free item is NULL; this is not right.")):(e=h.b(64,8),this.count++),this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,this.memory.INT_32[e+48>>2]=-1,this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0,this.activeCount++,e},allocArray:function(e){var t=64*e,n=h.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=g,g=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=g,g=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),h.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,p.Animation.free(this.memory.INT_32[e+48>>2]),this.memory.INT_32[e+48>>2]=-1,p.Animation.free(this.memory.INT_32[e+52>>2]),this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0)},clearShallow:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.INT_32[e+40>>2]=0,this.memory.INT_32[e+44>>2]=-1,this.memory.INT_32[e+48>>2]=-1,this.memory.INT_32[e+52>>2]=-1,this.memory.INT_32[e+56>>2]=-1,this.memory.UINT_8[e+60>>0]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+64*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+64*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return h.e(e,t,16),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){var n=-1,i=-1;i=(n=this.memory.INT_32[e+48>>2])>0?p.Animation.clone(n):-1,this.memory.INT_32[e+48>>2]=i,i=(n=this.memory.INT_32[e+52>>2])>0?p.Animation.clone(n):-1,this.memory.INT_32[e+52>>2]=i},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={offset:this.memory.FLOAT_64[e+0>>3],finalValue:this.memory.FLOAT_64[e+8>>3],velocity:this.memory.FLOAT_64[e+16>>3],acceleration:this.memory.FLOAT_64[e+24>>3],value:this.memory.FLOAT_64[e+32>>3],dataFlowNode:this.memory.INT_32[e+40>>2],nextScheduledVariable:function(){var n=this.memory.INT_32[e+44>>2];return n>0?_.dump(n,t):null}.bind(this)(),baseAnimation:function(){var n=this.memory.INT_32[e+48>>2];return n>0?p.Animation.dump(n,t):null}.bind(this)(),animation:function(){var n=this.memory.INT_32[e+52>>2];return n>0?p.Animation.dump(n,t):null}.bind(this)(),previousScheduledVariable:function(){var n=this.memory.INT_32[e+56>>2];return n>0?_.dump(n,t):null}.bind(this)(),flags:this.memory.UINT_8[e+60>>0]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+64*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),r=0;r<n;r++){var a=e[r],s=i+8+64*r;h.e(a,s,16),t?this.freeShallow(a):this._cloneFieldsFrom(s,a)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+64*r},itemAtIndex:function(e,t){return e+8+64*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getOffset:function(e){return this.memory.FLOAT_64[e+0>>3]},setOffset:function(e,t){this.memory.FLOAT_64[e+0>>3]=t},getFinalValue:function(e){return this.memory.FLOAT_64[e+8>>3]},setFinalValue:function(e,t){this.memory.FLOAT_64[e+8>>3]=t},getVelocity:function(e){return this.memory.FLOAT_64[e+16>>3]},setVelocity:function(e,t){this.memory.FLOAT_64[e+16>>3]=t},getAcceleration:function(e){return this.memory.FLOAT_64[e+24>>3]},setAcceleration:function(e,t){this.memory.FLOAT_64[e+24>>3]=t},getValue:function(e){return this.memory.FLOAT_64[e+32>>3]},setValue:function(e,t){this.memory.FLOAT_64[e+32>>3]=t},getDataFlowNode:function(e){return this.memory.INT_32[e+40>>2]},setDataFlowNode:function(e,t){this.memory.INT_32[e+40>>2]=t},getNextScheduledVariable:function(e){return this.memory.INT_32[e+44>>2]},setNextScheduledVariable:function(e,t){this.memory.INT_32[e+44>>2],this.memory.INT_32[e+44>>2]=t},takeNextScheduledVariable:function(e){var t=this.memory.INT_32[e+44>>2];return this.memory.INT_32[e+44>>2]=-1,t},getBaseAnimation:function(e){return this.memory.INT_32[e+48>>2]},setBaseAnimation:function(e,t){var n=this.memory.INT_32[e+48>>2];this.memory.INT_32[e+48>>2]=t,n>0&&p.Animation.free(n)},takeBaseAnimation:function(e){var t=this.memory.INT_32[e+48>>2];return this.memory.INT_32[e+48>>2]=-1,t},getAnimation:function(e){return this.memory.INT_32[e+52>>2]},setAnimation:function(e,t){var n=this.memory.INT_32[e+52>>2];this.memory.INT_32[e+52>>2]=t,n>0&&p.Animation.free(n)},takeAnimation:function(e){var t=this.memory.INT_32[e+52>>2];return this.memory.INT_32[e+52>>2]=-1,t},getPreviousScheduledVariable:function(e){return this.memory.INT_32[e+56>>2]},setPreviousScheduledVariable:function(e,t){this.memory.INT_32[e+56>>2],this.memory.INT_32[e+56>>2]=t},takePreviousScheduledVariable:function(e){var t=this.memory.INT_32[e+56>>2];return this.memory.INT_32[e+56>>2]=-1,t},getFlags:function(e){return this.memory.UINT_8[e+60>>0]},setFlags:function(e,t){this.memory.UINT_8[e+60>>0]=t},getWantsFreed:function(e){return 1&this.memory.UINT_8[e+60>>0]},setWantsFreed:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=1:n&=-2,this.memory.UINT_8[e+60>>0]=n},getIsScheduled:function(e){return 2&this.memory.UINT_8[e+60>>0]},setIsScheduled:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=2:n&=-3,this.memory.UINT_8[e+60>>0]=n},getIsInFrame:function(e){return 4&this.memory.UINT_8[e+60>>0]},setIsInFrame:function(e,t){var n=this.memory.UINT_8[e+60>>0];t?n|=4:n&=-5,this.memory.UINT_8[e+60>>0]=n}};h.g(_),h.h(_.typeId,_);var v=-1,b=Date.now(),y=!1,w=-1,I=-1,S=[],C=-1,E=[],A=!1,O=!1;function T(){if(A)O=!0;else{A=!0,y=!1;var e,t=-1,n=Date.now(),i=Math.max(n-b,1);for(E.length=0,t=w;t>0;)G(e=f.Callback.getMethod(t),n),t=f.Callback.getNextCallback(e);for(var r=v,a=-1;r>0;)E.push(r),_.setIsScheduled(r,!1),_.setIsInFrame(r,!0),a=_.getNextScheduledVariable(r),_.setPreviousScheduledVariable(r,-1),_.setNextScheduledVariable(r,-1),r=a;v=-1;var s=0,l=E.length;for(s=0;s<l;s++)r=E[s],_.getWantsFreed(r)||P(r,i);for(o.a.pause(),s=0;s<l;s++)r=E[s],_.setIsInFrame(r,!1),_.getWantsFreed(r)?V(r):o.a.setNodeToDirtyFromParent(_.getDataFlowNode(r));for(o.a.resume(),t=I;t>0;)G(e=f.Callback.getMethod(t),n),t=f.Callback.getNextCallback(e);A=!1,O&&(O=!1,T())}}function M(){y||(b=Date.now(),y=!0,l.a((function(){T()})))}function D(e){if(_.getIsScheduled(e)){var t=_.getPreviousScheduledVariable(e),n=_.getNextScheduledVariable(e);t>0?_.setNextScheduledVariable(t,n):v=n,n>0&&_.setPreviousScheduledVariable(n,t),_.setIsScheduled(e,!1)}}function P(e,t){var n=_.getAnimation(e);if(!(n<1)){var i=p.Animation.getAnimator(n);i<1&&c.b("No animator in animation"),p.Animation.getAnimatorType(n).tick(i,e,t)}}var L=[],R=0;function x(e,t){var n=_.getAnimation(e);if(n!==t){var i,r=R>0?L[--R]:[],a=0;if(n>0&&n!==_.getBaseAnimation(e)){var s=p.Animation.getAnimator(n);s<1&&c.b("No animator in the old animation"),p.Animation.getAnimatorType(n).stop(s,e);for(var o=p.Animation.getFirstCallback(n);o>0;)a=f.Callback.getMethod(o),r.push(a),o=f.Callback.getNextCallback(o);p.Animation.setFirstCallback(n,-1)}if(_.setValue(e,F(e)),_.setOffset(e,0),t>0){var l=p.Animation.getAnimator(t);l<1&&c.b("No animator in the new animation"),p.Animation.getAnimatorType(t).start(l,e)}_.setAnimation(e,t);for(var u=0;u<r.length;u++)G(a=r[u],e),U(a);(i=r).length=0,L[R++]=i}}function N(e){_.setVelocity(e,0),_.setAcceleration(e,0),x(e,_.getBaseAnimation(e))}function F(e){return _.getValue(e)+_.getOffset(e)}function V(e){if(_.getIsInFrame(e))_.setWantsFreed(e,!0);else{D(e),N(e);var t=_.getDataFlowNode(e);o.a.freeNode(t),_.free(e)}}var k=u.a.extend({isCacheable:!0,calculateValueForNode:function(e,t){return _.getValue(e)}}).create();function B(e,t){var n=p.Animation.alloc();return p.Animation.setAnimator(n,e,t),n}function j(e){var t=C;t>=0?(C=S[t],S[t]=e):(t=S.length,S.push(e));var n=f.Callback.alloc();return f.Callback.setMethod(n,t),n}function U(e){S[e]=C,C=e}function G(e,t){S[e](t)}var H={frame:T,requestFrame:M,requestFrameForVariable:function(e){_.getIsScheduled(e)||(v>0&&_.setPreviousScheduledVariable(v,e),_.setNextScheduledVariable(e,v),v=e,_.setIsScheduled(e,!0),M())},cancelRequestedFrameForVariable:D,addPreFrameCallback:function(e){var t=j(e),n=w;return f.Callback.setNextCallback(t,n),n>0&&f.Callback.setPreviousCallback(n,t),w=t,t},removePreFrameCallback:function(e){var t=f.Callback.getPreviousCallback(e),n=f.Callback.takeNextCallback(e),i=f.Callback.getMethod(e);n>0&&f.Callback.setPreviousCallback(n,t),t>0?f.Callback.setNextCallback(t,n):(w=n,f.Callback.free(e)),U(i)},addPostFrameCallback:function(e){var t=j(e),n=w;return f.Callback.setNextCallback(t,n),n>0&&f.Callback.setPreviousCallback(n,t),w=t,t},removePostFrameCallback:function(e){var t=f.Callback.getPreviousCallback(e),n=f.Callback.takeNextCallback(e),i=f.Callback.getMethod(e);n>0&&f.Callback.setPreviousCallback(n,t),t>0?f.Callback.setNextCallback(t,n):(I=n,f.Callback.free(e)),U(i)},setAnimationForVariable:x,stopAnimatingVariable:N,getValueForVariable:F,setValueForVariable:function(e,t){N(e),_.setValue(e,t),_.setFinalValue(e,t),o.a.setNodeToDirtyFromParent(_.getDataFlowNode(e))},rebaseCurrentValueForVariable:function(e,t){_.setOffset(e,t-_.getValue(e))},getFinalValueForVariable:function(e){return _.getFinalValue(e)+_.getOffset(e)},rebaseFinalValueForVariable:function(e,t){_.setOffset(e,t-_.getFinalValue(e))},performFrameForVariable:P,allocVariable:function(){var e=_.alloc(),t=o.a.allocNode(k,e);return _.setDataFlowNode(e,t),e},freeVariable:V,getDataFlowNodeForVariable:function(e){return _.getDataFlowNode(e)},createAnimationWithAnimator:B,addCallbackToAnimation:function(e,t){"function"!==typeof t&&c.b("addCallbackToAnimation expected a callback");var n=j(t),i=p.Animation.takeFirstCallback(e);return f.Callback.setNextCallback(n,i),i>0&&f.Callback.setPreviousCallback(i,n),p.Animation.setFirstCallback(e,n),n},defineAnimator:function(e,t){t.createData||c.b("An implementation of createData must be passed to defineAnimator");var n=Object.create(e),i=++h.f.typeCount;return Object.assign(n,{typeId:i,freeData:d.a,tick:d.a,start:d.a,stop:d.a,free:function(t){this.freeData(t),e.free(t)},createAnimation:function(){var e=this.createData.apply(this,arguments);return B(e,this)}},t),h.h(i,n),n}},W=-1,$=++h.f.typeCount,z={memory:h.f,typeId:$,count:0,activeCount:0,arrayCount:0,dumpStats:function(){return"SmoothAnimatorData: "+this.count+"; "+this.activeCount+" active"},alloc:function(){var e=-1;return W>0?(e=W,0===(W=this.memory.INT_32[e>>2])&&c.b("Next free item is NULL; this is not right.")):(e=h.b(128,8),this.count++),this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0,this.activeCount++,e},allocArray:function(e){var t=128*e,n=h.a(t);return this.memory.INT_32[1+(n>>2)]=e,this._initArray(n),this.arrayCount++,n},free:function(e){e<0||(this.clear(e),this.memory.INT_32[e>>2]=W,W=e,this.activeCount--)},freeShallow:function(e){e<0||(this.clearShallow(e),this.memory.INT_32[e>>2]=W,W=e,this.activeCount--)},freeArray:function(e){e<0||(this._disposeArray(e),h.c(e),this.arrayCount--)},clear:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0)},clearShallow:function(e){e<0||(this.memory.FLOAT_64[e+0>>3]=0,this.memory.FLOAT_64[e+8>>3]=0,this.memory.FLOAT_64[e+16>>3]=0,this.memory.FLOAT_64[e+24>>3]=0,this.memory.FLOAT_64[e+32>>3]=0,this.memory.FLOAT_64[e+40>>3]=0,this.memory.FLOAT_64[e+48>>3]=0,this.memory.FLOAT_64[e+56>>3]=0,this.memory.FLOAT_64[e+64>>3]=0)},_disposeArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+128*n;this.clear(i)}},_initArray:function(e){if(!(e<0))for(var t=this.memory.INT_32[1+(e>>2)],n=0;n<t;n++){var i=e+8+128*n;this.clearShallow(i)}},clone:function(e){var t=this.alloc();return h.e(e,t,32),this._cloneFieldsFrom(t,e),t},_cloneFieldsFrom:function(e,t){},dump:function(e,t){if(t||(t=[]),t.indexOf(e)>=0)return"Circular reference";t.push(e);var n={duration:this.memory.FLOAT_64[e+0>>3],elapsedTime:this.memory.FLOAT_64[e+8>>3],startValue:this.memory.FLOAT_64[e+16>>3],endValue:this.memory.FLOAT_64[e+24>>3],startVelocity:this.memory.FLOAT_64[e+32>>3],startAcceleration:this.memory.FLOAT_64[e+40>>3],startJerk:this.memory.FLOAT_64[e+48>>3],startSnap:this.memory.FLOAT_64[e+56>>3],startCrackle:this.memory.FLOAT_64[e+64>>3]};return t.pop(),n},dumpArray:function(e,t){for(var n=this.memory.INT_32[1+(e>>2)],i=[],r=0;r<n;r++)i.push(this.dump(e+8+128*r,t));return{array:i,length:n,allocatedSpace:this.memory.INT_32[e>>2]}},arrayFromJSArray:function(e,t){for(var n=e.length,i=this.allocArray(n),r=0;r<n;r++){var a=e[r],s=i+8+128*r;h.e(a,s,32),t?this.freeShallow(a):this._cloneFieldsFrom(s,a)}return i},putArrayIntoJSArray:function(e,t,n){var i=this.memory.INT_32[1+(e>>2)];t.length=i;for(var r=0;r<i;r++)t[r]=e+8+128*r},itemAtIndex:function(e,t){return e+8+128*t},lengthForArray:function(e){return this.memory.INT_32[1+(e>>2)]},getDuration:function(e){return this.memory.FLOAT_64[e+0>>3]},setDuration:function(e,t){this.memory.FLOAT_64[e+0>>3]=t},getElapsedTime:function(e){return this.memory.FLOAT_64[e+8>>3]},setElapsedTime:function(e,t){this.memory.FLOAT_64[e+8>>3]=t},getStartValue:function(e){return this.memory.FLOAT_64[e+16>>3]},setStartValue:function(e,t){this.memory.FLOAT_64[e+16>>3]=t},getEndValue:function(e){return this.memory.FLOAT_64[e+24>>3]},setEndValue:function(e,t){this.memory.FLOAT_64[e+24>>3]=t},getStartVelocity:function(e){return this.memory.FLOAT_64[e+32>>3]},setStartVelocity:function(e,t){this.memory.FLOAT_64[e+32>>3]=t},getStartAcceleration:function(e){return this.memory.FLOAT_64[e+40>>3]},setStartAcceleration:function(e,t){this.memory.FLOAT_64[e+40>>3]=t},getStartJerk:function(e){return this.memory.FLOAT_64[e+48>>3]},setStartJerk:function(e,t){this.memory.FLOAT_64[e+48>>3]=t},getStartSnap:function(e){return this.memory.FLOAT_64[e+56>>3]},setStartSnap:function(e,t){this.memory.FLOAT_64[e+56>>3]=t},getStartCrackle:function(e){return this.memory.FLOAT_64[e+64>>3]},setStartCrackle:function(e,t){this.memory.FLOAT_64[e+64>>3]=t}};h.g(z),h.h(z.typeId,z);var K,q=H.defineAnimator(z,{createData:function(e,t,n){var i=this.alloc();return this.setDuration(i,t),this.setEndValue(i,e),this.setStartValue(i,void 0===n?Number.MAX_VALUE:n),i},start:function(e,t){this.setElapsedTime(e,0);var n=this.getStartValue(e);n===Number.MAX_VALUE&&(n=_.getValue(t));var i=this.getEndValue(e),r=i-n,a=this.getDuration(e),s=_.getVelocity(t),o=_.getAcceleration(t),l=(10*r-3*a*(o*a+2*s))/Math.pow(a,3),c=(a*(3*o*a+8*s)-15*r)/Math.pow(a,4),u=(6*r-a*(o*a+3*s))/Math.pow(a,5);this.setStartValue(e,n),this.setStartVelocity(e,s),this.setStartAcceleration(e,o),this.setStartJerk(e,l),this.setStartSnap(e,c),this.setStartCrackle(e,u),_.setFinalValue(t,i),H.requestFrameForVariable(t)},tick:function(e,t,n){if((n+=this.getElapsedTime(e))<this.getDuration(e)){var i,r=this.getStartValue(e),a=this.getStartVelocity(e),s=this.getStartAcceleration(e),o=this.getStartJerk(e),l=this.getStartSnap(e),c=this.getStartCrackle(e);i=r+a*n+s*Math.pow(n,2)+o*Math.pow(n,3)+l*Math.pow(n,4)+c*Math.pow(n,5);var u=a+2*s*n+3*o*Math.pow(n,2)+4*l*Math.pow(n,3)+5*c*Math.pow(n,4),d=2*s+6*o*n+12*l*Math.pow(n,2)+20*c*Math.pow(n,3);_.setValue(t,i),_.setVelocity(t,u),_.setAcceleration(t,d),H.requestFrameForVariable(t)}else _.setValue(t,this.getEndValue(e)),_.setVelocity(t,0),_.setAcceleration(t,0),H.stopAnimatingVariable(t);this.setElapsedTime(e,n)},stop:function(e,t){}}),Q={mixinDependencies:[i.b],isAnimating:r.b({readOnly:!0,dependencies:["animationsInProgress"],get:Object.assign((function(){return this.animationsInProgress>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),animationsInProgress:r.b(0),_animatedVariables:a.c(Array),dispose:function(){for(var e=this,t=arguments,n=this._animatedVariables,i=0,r=n.length;i<r;i++)H.freeVariable(n[i]);e.__s._$D1$dispose.apply(e,t)},animate:function(e,t,n,i){return this.animateWithAnimator(e,q,t,n,i)},animateWithAnimator:function(e,t,n){var i=s.a(arguments,0,2),r=n,a=null,o=i[i.length-1],l=typeof o;"function"!==l&&"undefined"!==l&&null!==o||(a=i.pop());var c=this.getAdaptedCurrentValueForTarget(e,r);i.push(c),r=this.processTargetValue(e,r),i[0]=r;var u=t.createAnimation.apply(t,i);return this.animateWithAnimation(e,u,a),u},animateWithAnimation:function(e,t,n){var i=o.a.getContextForNode(this.downstreamNodes[e]);return n&&H.addCallbackToAnimation(t,n),this.set("animationsInProgress",this.get("animationsInProgress")+1),H.addCallbackToAnimation(t,function(){this.set("animationsInProgress",this.get("animationsInProgress")-1)}.bind(this)),H.setAnimationForVariable(i,t),t},getAdaptedCurrentValueForTarget:function(e,t){var n=this._properties[e].adaptStartingLocationForTarget,i=o.a.getContextForNode(this.downstreamNodes[e]),r=H.getValueForVariable(i);return n&&(r=n(this,e,r,t)),r},processTargetValue:function(e,t){var n=t,i=this._properties[e].set;return i&&(n=i(this,e,n)),n},resetAnimation:function(e){var t=this._properties[e],n=t.get,i=t.set,r=o.a.getContextForNode(this.downstreamNodes[e]);if(n||i){var a=H.getValueForVariable(r);n&&(a=n.call(this,this,e,a)),i&&(a=i.call(this,this,e,a)),H.setValueForVariable(r,a)}else H.stopAnimatingVariable(r)},getFinalValue:function(e){var t=o.a.getContextForNode(this.downstreamNodes[e]),n=H.getFinalValueForVariable(t),i=this._properties[e].get;return i&&(n=i.call(this,this,e,n)),n},rebaseCurrentValue:function(e,t){var n=o.a.getContextForNode(this.downstreamNodes[e]);H.rebaseCurrentValueForVariable(n,t)},rebaseFinalValue:function(e,t){var n=o.a.getContextForNode(this.downstreamNodes[e]);H.rebaseFinalValueForVariable(n,t)},__superMap:{_$D1$dispose:"dispose"}};K=r.a.extend({init:function(e,t){this.defaultValue=e,this.priority=t,this.get||(this.usesBuiltinGet=!0),this.set||(this.usesBuiltinSet=!0),this.__s._$2Hi$init.call(this,e)},initForObject:function(e,t){var n=H.allocVariable(),i=H.getDataFlowNodeForVariable(n);H.setValueForVariable(n,this.defaultValue),e.downstreamNodes[t]=i,e._animatedVariables.push(n)},setInitialValueForObject:function(){},wasRegistered:function(e){this.finalGetForObject=this.usesBuiltinGet?this.getForObject:this.getForObjectWithGetter,this.finalSetForObject=this.usesBuiltinSet?this.setForObject:this.setForObjectWithSetter,this.setUpNativeAccessors(e)},getForObjectWithGetter:function(e,t){var n=o.a.getContextForNode(e.downstreamNodes[t]);return this.get(e,t,H.getValueForVariable(n))},setForObjectWithSetter:function(e,t,n){var i=o.a.getContextForNode(e.downstreamNodes[t]);H.set(i,this.set(e,t,n))},getForObject:function(e,t){var n=e.downstreamNodes;if(n){var i=o.a.getContextForNode(n[t]);return H.getValueForVariable(i)}},setForObject:function(e,t,n){var i=e.downstreamNodes;if(i){var r=o.a.getContextForNode(i[t]);H.setValueForVariable(r,n)}},setUpNativeAccessors:function(e){var t=this,n=this.key;Object.defineProperty(e,n,{get:function(){return t.getForObject(this,n)},set:function(e){return t.setForObject(this,n,e)},configurable:!0})},requiresSupport:Q,__superMap:{_$2Hi$init:"init"}});var Y=function(e){return K.create(e)}},function(e,t,n){var i=n(362),r=n(212);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(594),r=n(180),a=n(600),s=n(163).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||s(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(212),r=/"/g;e.exports=function(e,t,n,a){var s=String(i(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(a).replace(r,"&quot;")+'"'),o+">"+s+"</"+t+">"}},function(e,t,n){var i=n(91);e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t,n){"use strict";e.exports={EventEmitterMicro:n(1043)}},function(e,t,n){"use strict";var i,r=n(1142),a=function(e,t){t=t||{},this.baseLinkPath=t.baseLinkPath,t.dialogDimensions&&(this.dialogDimensions=t.dialogDimensions),t.id&&(this.id=t.id),t.preventDialog&&(this.preventDialog=t.preventDialog),this.normalizeData=e};(i=a.prototype).dataAttributeName="network-action",i.id="network-action",i.normalizeData=function(e){return e},i.dialogDimensions={width:500,height:500},i.generateLinkURL=function(e){var t=this.normalizeData(e),n=r.stringify(t),i=this.baseLinkPath;return n.length>0&&(i=i+"?"+n),i},i.generateLink=function(e,t){var n=this.generateLinkURL(e);return(t=t||document.createElement("A")).setAttribute("href",n),t.setAttribute("target","_blank"),t.setAttribute("data-"+this.dataAttributeName,this.id),this.enhanceLinkEngagement(t,n),t},i.generateDialog=function(e){var t=this.generateLinkURL(e);this._triggerDialog(t)},i.enhanceLinkEngagement=function(e,t){t=t||e.getAttribute("href"),e.addEventListener("click",this._onLinkEngaged.bind(this,t))},i.getDialogOptions=function(){var e,t="status=1",n={width:this.dialogDimensions.width,height:this.dialogDimensions.height};for(e in n.top=(window.screen.availHeight-n.height)/2,n.left=(window.screen.availWidth-n.width)/2,n)n.hasOwnProperty(e)&&(t+=", "+e+"="+n[e]);return t},i.getDialogDebugData=function(e){return{data:this.normalizeData(e),dialogUrl:this.generateLinkURL(e)}},i._triggerDialog=function(e){this.preventDialog?window.location.href=e:window.open(e,"_blank",this.getDialogOptions())},i._onLinkEngaged=function(e,t){t.preventDefault(),this._triggerDialog(e)},e.exports=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(386),r=function(e,t,n,r){return e.removeEventListener(t,Object(i.a)(n)||n,r||!1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(314),r=n(15),a=n(98),s=n(155),o=n(7),l=n(281),c=n(13),u=n(82),d=n(301),h=n(753),p=n(42);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return g(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m=s.b.extend(i.a,{store:Object(r.d)(),modelClass:Object(r.d)(),loadObjectAt:function(e){var t=this.objectAt(e);return t?t.load():a.a.reject("No object at index: "+e)},loadAll:function(){for(var e=this,t=new Map,n=0,i=this.length;n<i;n++){var r=this.modelClassForObjectAt(n),s=t.get(r)||[];t.set(r,s),s.push(this.primaryKeyForObjectAt(n))}if(1===t.size){var o=t.entries().next().value,l=o[0],c=o[1];return l.load(c)}for(var u,d=[],h=f(t.entries());!(u=h()).done;){var p=u.value,g=p[0],m=p[1];d.push(g.load(m))}return a.a.all(d).then((function(){return e}))},storeIdForObjectAt:function(e){return this._array[e]},modelClassForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.constructor.getModelClassForStoreId(t)},primaryKeyForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.constructor.getPrimaryKeyForStoreId(t)},storeDataForObjectAt:function(e){var t=this.storeIdForObjectAt(e);return this.store.readData(t)},isObjectAtIndexMaterialized:function(e){var t=this.storeIdForObjectAt(e);return this.store.hasExistingModel(t)},storeIds:Object(o.b)({dependencies:["length"],readOnly:!0,get:function(){return Object(l.b)(this._array)}}),spliceStoreIds:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._array.splice.apply(this._array,arguments)},addEach:function(e){var t=this,n=arguments;if(!e||e.constructor!==m)return t.__s._$1cO$addEach.apply(t,n);if(this.constructor!==m)return t.__s._$1cO$addEach.apply(t,n);var i=e._array,r=this.length,a=i.length;this.itemsWillChange(),this.itemsWillBeInserted(r,a);var s=this._array;s.length+=a;for(var o=0;o<a;o++)s[o+r]=i[o];this.itemsWereInserted(r,a),this.itemsDidChange()},filter:function(e,t){e||Object(c.b)("CW.Data.ModelArray#filter: No filter function provided: %{modelArray}",{modelArray:this});var n,i,r=this.store;r||Object(c.b)("CW.Data.ModelArray#filter: Model arrays must be store backed to be filtered: %{modelArray}",{filterFunction:e,modelArray:this});for(var a=!0,s=[],o=0,l=this.length;o<l;o++){var u=this.storeIdForObjectAt(o),d=this.modelClassForObjectAt(o),h=this.store.getExistingModel(u),p=void 0;if(!h){p=(n=n||new Map).get(d);var g=this.storeDataForObjectAt(o);p||(p=d.create().retain(this,"filter: tempModel")),n.set(d,p),p.replaceData(g)}e.call(t,h||p,o,this)&&(s.push(u),i&&i!==d&&(a=!1),i=d)}if(n)for(var m,_=f(n.values());!(m=_()).done;)m.value.release(this,"filter: tempModel");return this.constructor.createFromStoreIds(s,a?i:null,r)},clone:function(){return this.constructor.createFromStoreIds(this._array,this.modelClass,this.store)},serializer:Object(o.b)((function(){return h.a.create({store:this.store,modelClass:this.modelClass})})),staticMembers:{createFromStoreIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=this.create(void 0,t,n);return i._array=e.slice(),i},createFromIterable:function(e){var t,n,i,r=!0;if(Object(u.a)(e,m))return e.clone();var a=e.map((function(e,a){var s=e._cwStore,o=e.constructor;i&&i!==o&&(r=!1),i=o,t=t||s,n=n||t.constructor,t!==s&&Object(c.b)("CW.Data.ModelArray.createFromIterable: Expected a model in "+t+" but found a model in "+s+" at index "+a);var l=e.getPrimaryKey();return n.getStoreIdForPrimaryKey(o,l)}));return Array.isArray(a)||(a=a.toArray()),Object(d.a)(a)&&Object(c.b)("CW.Data.ModelArray.createFromIterable: Cannot create from an empty iterable"),this.createFromStoreIds(a,r?i:null,t)},__QUALIFIED_CLASS_NAME__:"ModelArray"},init:function(e,t,n){this.modelClass=t,this.store=n||Object(p.n)(),this.__s._$47l$init.call(this,e)},constructNewInstance:function(){return this.constructor.create([],this.modelClass,this.store)},indexOf:function(e){var t=this._array;return t?t.indexOf(e._cwStoreId):-1},__superMap:{_$1cO$addEach:"addEach",_$47l$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(40),r=n(320),a=n(15),s=n(394),o=n(314),l=n(20),c=n(7),u=n(13),d=n(763);function h(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=i.a.extend(r.a,{init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._firstRange,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t?t.start:NaN,i=this;this._source=e,this._range=t,this._index=n,i.__s._$9_$init.call(i)},_source:null,_range:null,_index:NaN,isValid:Object(a.d)({readOnly:!0,get:function(){return!!this._range}}),encodedValue:Object(a.d)({readOnly:!0,get:function(){return this._index}}),moveToNext:function(){var e=this._index,t=this._range;e===t.end?e=(t=this._range=t.next)?t.start:NaN:e++,this._index=e},clone:function(){return this.constructor.create(this._source,this._range,this._index)},__superMap:{_$9_$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexIterator"}}),g=i.a.extend(r.a,{init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._firstRange,n=this;this._source=e,this._range=t,n.__s._$P4$init.call(n)},_source:null,_range:null,isValid:Object(a.d)({readOnly:!0,get:function(){return!!this._range}}),value:Object(a.d)({readOnly:!0,get:function(){return this.encodedValue}}),encodedValue:Object(a.d)({readOnly:!0,get:function(){return this._range}}),moveToNext:function(){this.isValid&&(this._range=this._range.next)},clone:function(){return this.constructor.create(this._source,this._range)},__superMap:{_$P4$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexRangeIterator"}}),m=i.a.extend(l.b,s.a,d.a,o.a,{init:function(){var e=this,t=arguments;this._firstRange=null,e.__s._$mx$init.apply(e,t)},length:Object(c.b)({cacheable:!0,get:function(){for(var e=this._firstRange,t=0;e;)t+=e.end-e.start+1,e=e.next;return t}}),iteratorClass:Object(a.d)(f),toArray:function(e){for(var t,n,i,r=e||[],a=this._firstRange;a;){for(n=a.start,i=a.end,t=n;t<=i;t++)r.push(t);a=a.next}return r},clear:function(){for(var e=this._firstRange,t=null;e;)t=e.next,e.next=null,e.start=e.end=-1,e=t;this._firstRange=null,this.propertyChanged("length")},add:function(e,t){var n=this.encode(e),i=void 0!==t?this.encode(t):void 0;return this.encodedAdd(n,i)},encodedAdd:function(e,t){if(void 0===t)t=e;else if(t<e){var n=[t,e];e=n[0],t=n[1]}for(var i=this._firstRange,r=null,a=0;i&&!(i.end>=e);)r=i,i=i.next;if(i&&i.start<=t){var s=Math.min(i.start,e),o=Math.max(i.end,t);a+=i.start-s,a+=o-i.end,i.start=s,i.end=o}else i=new _(e,t,i||null),a=t-e+1,r?r.next=i:this._firstRange=i;r&&r.end>=i.start-1&&(a-=r.end-i.start+1,r.end=i.end,r.next=i.next,i=r);var l=i;for(i=i.next;i&&i.start<=l.end+1;)l.end=Math.max(l.end,i.end),a-=Math.min(t,i.end)-Math.max(e,i.start)+1,l.next=i.next,i=i.next;return this.propertyChanged("length"),a},remove:function(e,t){return this.encodedRemove(this.encode(e),t?this.encode(t):void 0)},encodedRemove:function(e,t){if(void 0===t)t=e;else if(t<e){var n=[t,e];e=n[0],t=n[1]}for(var i=this._firstRange,r=null,a=0;i&&!(i.start>t);){if(i.end>=e)if(i.start>=e&&i.end<=t)r?r.next=i.next:this._firstRange=i.next,a+=i.end-i.start+1;else{var s,o,l=i.start,c=Math.min(i.end,e-1),u=Math.max(i.start,t+1),d=i.end,h=i.next;a+=Math.min(t,i.end)-Math.max(e,i.start)+1,c-l>=0&&(s=new _(l,c,h),r?r.next=s:this._firstRange=s,r=i=s),d-u>=0&&(o=new _(u,d,h),r?r.next=o:this._firstRange=o,r=i=o)}r=i,i=i.next}return this.propertyChanged("length"),a},contains:function(e,t){return this.encodedContains(this.encode(e),t?this.encode(t):void 0)},encodedContains:function(e,t){void 0===t&&(t=e);for(var n=this._firstRange;n;){if(n.start<=e&&n.end>=t)return!0;n=n.next}return!1},containsSome:function(e,t){Object(u.b)("not implemented")},rangeStart:function(e){var t=this._rangeForIndex(e);return t?t.start:-1},rangeEnd:function(e){var t=this._rangeForIndex(e);return t?t.end:-1},lastIndexBefore:function(e){for(var t,n=this._firstRange,i=-1,r=e-1;n&&!(n.start>r);)t=n,n=n.next;return t&&(i=Math.min(r,t.end)),i},firstIndexAfter:function(e){for(var t=this._firstRange,n=-1,i=e+1;t&&!(t.end>=i);)t=t.next;return t&&(n=Math.max(i,t.start)),n},itemsInsertedAtIndex:function(e,t){for(var n=this._firstRange;n;)this._updateRangeForInsertion(n,e,t),n=n.next;this.remove(e,e+t-1)},itemsRemovedAtIndex:function(e,t){for(var n=this._firstRange,i=null;n;)this._updateRangeForRemoval(n,e,t),n.end>=n.start?i&&i.end>=n.start-1&&(i.end=n.end,i.next=n.next):i?i.next=n.next:this._firstRange=n.next,i=n,n=n.next;this.propertyChanged("length")},_updateRangeForInsertion:function(e,t,n){e.start>=t&&(e.start+=n),e.end>=t&&(e.end+=n)},_updateRangeForRemoval:function(e,t,n){var i=t+n-1;e.start>=t&&(e.start<=i?e.start=t:e.start-=n),e.end>=t&&(e.end<=i?e.end=t-1:e.end-=n)},_rangeForIndex:function(e){for(var t=this._firstRange;t;){if(t.start<=e&&t.end>=e)return t;t=t.next}return null},ranges:function(){return g.create(this)},union:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++)for(var a,s=r[i],o=h(s.ranges());!(a=o()).done;){var l=a.value,c=l.start,u=l.end;this.add(c,u)}return this},difference:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(v,this)},clone:function(){return m.create().union(this)},__superMap:{_$mx$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexSet"}});function _(e,t,n){this.start=e,this.end=t,this.next=n}function v(e,t){for(var n=e.ranges(),i=t.ranges(),r=function(){var e=null,t=null,n=null;return function(i){if(null===e)e=i;else{var r=e.value,a=i.value;if(e.oppositeOn&&(r+=1),i.oppositeOn&&(a-=1),r<=a){var s=new _(r,a,null);null===t?(n=s,t=s):t.end===s.start-1?t.end=s.end:(t.next=s,t=s)}e=null}return n}}(),a=null,s=!1,o=!1;n.isValid||i.isValid;){var l=b(n,s),c=b(i,o);null===l||null!==c&&(c<l||!(c>l)&&s)?(a=r({value:c,oppositeOn:s}),o&&i.moveToNext(),o=!o):(a=r({value:l,oppositeOn:o}),s&&n.moveToNext(),s=!s)}return function(e){var t=m.create();return t._firstRange=e,t}(a)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.isValid?t?e.value.end:e.value.start:null}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!1},function(e,t,n){var i=n(594),r=n(108),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(180),r=n(173),a=n(414),s=n(503),o=a("IE_PROTO"),l=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return S}));var i=n(138),r=n(40),a=n(15),s=n(55),o=n(476),l=n(201),c=n(127),u=n(51),d=n(740),h=n(7),p=n(278),f=n(262),g=n(20),m=n(254),_=n(577),v=n(576),b=Object(i.b)("ListPosition",(function(e){e("Top"),e("Bottom")})),y=v.a.extend({rowHeight:Object(h.b)(30),rowSpacing:Object(h.b)(0),topPadding:Object(h.b)(0),bottomPadding:Object(h.b)(0),initialPosition:Object(h.b)({defaultValue:b.Top,type:b}),minimumSizePosition:Object(h.b)({defaultValue:b.Top,type:b}),shouldStickAtTop:Object(h.b)(!1),shouldStickAtBottom:Object(h.b)(!1),topInset:Object(h.b)(0),hideableTopHeight:Object(h.b)(0),hideableBottomHeight:Object(h.b)(0),shouldStartHidden:Object(h.b)(!0),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListLayoutMetrics"}}),w=p.a.create().retain(window,"initial retain"),I=f.a.create().retain(window,"initial retain"),S=r.a.extend(_.a,g.b,{staticMembers:{LayoutMetricsClass:y,__QUALIFIED_CLASS_NAME__:"ListLayoutDelegate"},isAtEnd:null,_distancePastEnd:0,setUpInitialCell:function(e,t,n){var i=e.layoutMetrics.initialPosition;return i===b.Top?this.setUpFirstCell(e,t,n):i===b.Bottom?this.setUpLastCell(e,t,n):void 0},setUpFirstCell:function(e,t,n){if(!t)return null;var i=t.startHandle.retain(this,"setUpFirstCell");if(!i.isValid)return i.release(this,"setUpFirstCell"),null;var r=this.cellForHandle(i).retain(this,"setUpFirstCell");i.release(this,"setUpFirstCell");var a=this.topForCell(e,r),s=e.layoutMetrics;s.shouldStartHidden||(a+=s.hideableTopHeight);var o=r.isLaidOut;return this.layOutCellInDirection(e,r,1,a,1,this.leftForCell(e,r)),n&&(r.isLaidOut=o),r.autorelease(this,"setUpFirstCell")},setUpLastCell:function(e,t,n){if(!t)return null;var i=t.handleProvider.endHandle.retain(this,"setUpLastCell");if(!i.isValid)return i.release(this,"setUpLastCell"),null;var r=this.cellForHandle(i).retain(this,"setUpLastCell");i.release(this,"setUpLastCell");var a=e.viewportHeight-this.spaceBelowCell(e,r),s=e.layoutMetrics;s.shouldStartHidden||(a-=s.hideableBottomHeight);var o=r.isLaidOut;return this.layOutCellInDirection(e,r,-1,a,1,this.leftForCell(e,r)),n&&(r.isLaidOut=o),r.autorelease(this,"setUpLastCell")},_findCellForItemInDirection:function(e,t,n,i){for(n=n.next;n.isValid;){if(n.value===t)return this.cellForHandle(n).retain().autorelease();n=n.atDistance(i)}return null},_findCellForItem:function(e,t,n,i){var r=n.find((function(e){return e.handle.value===i}));return r||((r=this._findCellForItemInDirection(e,i,n.objectAt(0).handle,-1))?r:r=this._findCellForItemInDirection(e,i,n.lastItem.handle,1))},getCellForItem:function(e,t,n,i){var r=this._findCellForItem(e,t,n,i);if(!r)return null;if(r.retain(),n.contains(r))return r;var a=n.objectAt(0),s=this.topForCell(e,a)-a.y;return this.layOutCellInDirection(e,r,1,this.topForCell(e,r)-s,1,this.leftForCell(e,r)),r.autorelease()},layOutCellsInDirection:function(e,t,n,i,r){for(var a=n,s=e.viewportBounds,o=i>0,l=!1;;){var u=a;if(a=this.positionNextCell(e,u,i),!Object(c.a)(a))return r;if(a.retain(this,"layOutCellsInDirection"),this.cellIsVisible(e,s,a))l=!0,this.isCellAnchorable(a)&&(r=!0);else if(l&&r||u.y*i>0)return a.release(this,"layOutCellsInDirection"),a.isLaidOut=!1,r;o?t.push(a):t.unshift(a),a.release(this,"layOutCellsInDirection")}},cellIsVisible:function(e,t,n){return n.intersects(t)},_visibleCells:Object(a.d)({strong:!0,defaultValue:Object(s.c)(o.a)}),_previousVisibleCells:Object(a.d)({strong:!0,defaultValue:Object(s.c)(o.a)}),acquireVisibleCells:function(e,t,n){var i=this._visibleCells.retain(this,"acquireVisibleCells: swapping visibleCells"),r=this._previousVisibleCells.retain(this,"acquireVisibleCells: swapping visibleCells");return this._visibleCells=r,this._previousVisibleCells=i,i.length=0,i.release(this,"acquireVisibleCells: swapping visibleCells"),r.release(this,"acquireVisibleCells: swapping visibleCells"),i},reusePreviousVisibleCells:function(e,t,n,i,r){for(var a=e.viewportBounds,s=i.length,o=0;o<s;o++){var l=i.objectAt(o);l.isReusable||l.invalidate()}var c=r.movedBy;c&&this.handleMovedBy(c.x,c.y,e,t,n,i);var u=r.itemShown;if(u){var d=r.itemShownAt,h=d.x,p=d.y;this.handleShowItem(u,h,p,e,t,n,i)}var f=r.itemScrolledTo;f&&this.handleScrollToItem(f,e,t,n,i);var g=r.sizeChangedBy;g&&this.handleSizeChangedBy(g.width,g.height,e,t,n,i),r.everythingChanged&&this.handleEverythingChanged(e,t,n,i,r),r.collectionChanged&&this.invalidateOtherCells(i);var m=r.itemsChanges;m&&this.handleItemsChanges(m,e,t,n,i,r);var _=r.invalidItems;_&&this.handleInvalidItems(_,e,t,n,i,r);var v=r.layoutMetricsChanged;v&&this.handleLayoutMetricsChanged(v,e,t,n,i,r);for(var b=!1,y=!1,w=0;w<s;w++){var I=i.objectAt(w);!y&&I.isReusable&&I.isLaidOut&&this.cellIsVisible(e,a,I)?(I.retain(this,"reusePreviousVisibleCells: retaining reused cells"),n.push(I),I.release(this,"reusePreviousVisibleCells: retaining reused cells"),b=!0):b?(y=!0,I.isLaidOut=!1):I.isLaidOut=!1}},handleLayoutMetricsChanged:function(e,t,n,i,r,a){var s=t.layoutMetrics;if(e.contains("rowHeight")){this.invalidateOtherCells(r);var o=this.topMostItem(t,r);this.recoverLayoutFromCell(t,o)}else if(e.contains("rowSpacing")){var l=this.topMostItem(t,r);this.invalidateOtherCells(r,l)}else if(e.contains("hideableTopHeight")){if(s.shouldStartHidden&&this.isAtEnd===b.Top&&s.initialPosition===b.Top){var c=this.setUpFirstCell(t,n,!0);this.invalidateOtherCells(r,c)}}else if(e.contains("hideableBottomHeight")){if(s.shouldStartHidden&&this.isAtEnd===b.Bottom&&s.initialPosition===b.Bottom){var u=this.setUpLastCell(t,n,!0);this.invalidateOtherCells(r,u)}}else this.handleEverythingChanged(t,n,i,r,a)},recoverLayoutFromCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=t.handle;i.wasRemoved||i.isValid&&this.layOutCellInDirection(e,t,1,n.y,1,n.x)},handleEverythingChanged:function(e,t,n,i,r){if(this.invalidateOtherCells(i),!this.isAtEnd){var a=this.topMostValidItem(e,i);if(!a)return;a.retain(this,"handleEverythingChanged: first valid cell"),this.recoverLayoutFromCell(e,a),a.release(this,"handleEverythingChanged: first valid cell")}},handleInvalidItems:function(e,t,n,i,r,a){e.forEach((function(e){var t=this.cellForHandle(e).retain(this,"handleInvalidItems: invalid cell");t.invalidate(),t.release(this,"handleInvalidItems: invalid cell")}),this);for(var s=r.length,o=0;o<s;o++){var l=r.objectAt(o);e.contains(l.handle)&&l.invalidate()}},invalidateOtherCells:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e.objectAt(i);r!==t&&r.invalidate()}},handleItemsChanges:function(e,t,n,i,r,a){this.handleEverythingChanged(t,n,i,r,a)},handleCollectionChanged:function(e,t,n,i,r){var a=this.setUpInitialCell(e,t);a&&(a.retain(this,"handleCollectionChanged"),n.push(a),a.release(this,"handleCollectionChanged"),this.isAtEnd=e.layoutMetrics.initialPosition,this._distancePastEnd=0)},endOffset:function(e,t,n){var i=this.isAtEnd,r=this._distancePastEnd,a=0,s=e.layoutMetrics;if(i===b.Top){var o=s.hideableTopHeight;r=Math.min(r,o);var l=this.topMostLaidOutItem(e,n);(a=-this._distancePastTop(e,l))>0&&!s.shouldStickAtTop?a=0:a+=r}else if(i===b.Bottom){var c=s.hideableBottomHeight;r=Math.min(r,c);var u=this.bottomMostLaidOutItem(e,n);(a=this._distancePastBottom(e,u))<0&&!s.shouldStickAtBottom?a=0:a-=r}return a},moveCellsBy:function(e,t,n,i){for(var r=0,a=i.length;r<a;r++){var s=i.objectAt(r);s.isLaidOut&&s.moveBy(e,t,n)}},handleMovedBy:function(e,t,n,i,r,a){this.moveCellsBy(n,e,t,a)},handleShowItem:function(e,t,n,i,r,a,s){var o=this.cellForHandleIfPresent(e);if(o){if(o.retain(this,"handleShowItem: target cell"),o.isLaidOut)return this.moveCellsBy(i,0,n-o.y,s),void o.release(this,"handleShowItem: target cell");o.release(this,"handleShowItem: target cell")}this.invalidateOtherCells(s)},handleScrollToItem:function(e,t,n,i,r){var a=this.cellForHandleIfPresent(e);if(a){if(a.retain(this,"handleScrollToItem: target cell"),a.isLaidOut){var s=this.minimumTopOffsetForCell(t,a),o=t.viewportBounds.bottom-this.minimumBottomOffsetForCell(t,a);return a.y<s?this.moveCellsBy(t,0,s-a.y,r):a.bottom>o&&this.moveCellsBy(t,0,o-a.bottom,r),void a.release(this,"handleScrollToItem: target cell")}a.release(this,"handleScrollToItem: target cell")}this.invalidateOtherCells(r)},handleSizeChangedBy:function(e,t,n,i,r,a){0!==e&&a.forEach((function(e){e.width=n.viewportWidth,e.size=null}))},initializeVisibleCells:function(e,t,n,i,r){if(r.collectionChanged)this.handleCollectionChanged(e,t,n,i,r);else{if(i.length>0&&t.startHandle.isValid)if(r.itemsChanges||r.everythingChanged){var a=this.handleNoPreviouslyValidCells(e,t,n,i,r);a.retain(this,"initializeVisibleCells: newCell"),n.push(a),a.release(this,"initializeVisibleCells: newCell")}else if(r.itemShown)this.initializeItemShown(e,t,n,r);else if(r.itemScrolledTo)this.initializeItemScrolledTo(e,t,n,i,r);else{var s=this.topMostItem(e,i);if(s){s.retain(this,"initializeVisibleCells: previous topMostItem");var o,l=e.viewportBounds,c=l.x-s.x,u=l.y-s.y,d=0;u>0?d=1:u<0?d=-1:c>0?d=1:c<0&&(d=-1),s.handle.hasHandleAtDistance(d)?o=this.setUpCellAtDistance(e,t,s,c,u):(this.recoverLayoutFromCell(e,s),o=s),o.retain(this,"initializeVisibleCells: setUpCellAtDistance"),s.release(this,"initializeVisibleCells: previous topMostItem"),o.isLaidOut&&n.push(o),o.release(this,"initializeVisibleCells: setUpCellAtDistance")}}if(0===n.length){var h=this.setUpInitialCell(e,t);if(h){var p=this.isAtEnd=e.layoutMetrics.initialPosition,f=this._distancePastEnd;p===b.Top?h.y+=f:p===b.Bottom&&(h.y-=f),h.retain(this,"initializeVisibleCells: setUpInitialCell"),n.push(h),h.release(this,"initializeVisibleCells: setUpInitialCell")}}}},initializeItemShown:function(e,t,n,i){var r=i.itemShown,a=this.cellForHandle(r).retain(this,"initializeItemShown: cell"),s=i.itemShownAt.y;void 0===s?this.layOutCellAtTop(e,a):this.layOutCellInDirection(e,a,1,s,1,this.leftForCell(e,a)),n.push(a),a.release(this,"initializeItemShown: cell")},layOutCellAtTop:function(e,t){var n=this.minimumTopOffsetForCell(e,t);this.layOutCellInDirection(e,t,1,n,1,this.leftForCell(e,t))},minimumTopOffsetForCell:function(e,t){return t.handle.hasPrevious?0:this.topForCell(e,t)},layOutCellAtBottom:function(e,t){var n=this.minimumBottomOffsetForCell(e,t);this.layOutCellInDirection(e,t,-1,e.viewportBounds.bottom-n,1,this.leftForCell(e,t))},minimumBottomOffsetForCell:function(e,t){return t.handle.hasNext?0:this.spaceBelowCell(e,t)},initializeItemScrolledTo:function(e,t,n,i,r){var a=r.itemScrolledTo,s=this.cellForHandle(a).retain(this,"initializeItemScrolledTo: cell"),o=this.topMostItem(e,i);o?this.topForCell(e,s)<=this.topForCell(e,o)?this.layOutCellAtTop(e,s):this.layOutCellAtBottom(e,s):this.layOutCellAtTop(e,s),n.push(s),s.release(this,"initializeItemScrolledTo: cell")},handleNoPreviouslyValidCells:function(e,t,n,i,r){var a,s=this.topMostItem(e,i);if(!s){var o=this.setUpInitialCell(e,t);return this.isAtEnd=e.layoutMetrics.initialPosition,this._distancePastEnd=0,o}if(e.layoutMetrics.initialPosition===b.Top){var l=this.topForCell(e,s)-s.y,c=this.setUpFirstCell(e,t,!0);c.y-=l,a=this.setUpCellAtDistance(e,t,c,0,l)}else{var u=this.spaceBelowCell(e,s)-(s.bottom-e.viewportHeight),d=this.setUpLastCell(e,t,!0);d.y-=u,a=this.setUpCellAtDistance(e,t,d,0,u)}return a},_distancePastBottom:function(e,t){return l.a.sharedInstance.floorToDevicePixelRatio(e.viewportHeight)-l.a.sharedInstance.floorToDevicePixelRatio(t.bottom+this.spaceBelowCell(e,t))},_distancePastTop:function(e,t){return l.a.sharedInstance.floorToDevicePixelRatio(t.y-this.topForCell(e,t))},checkForMinimumSize:function(e,t){var n=this.topMostLaidOutItem(e,t),i=this._distancePastTop(e,n),r=i>=0,a=this.bottomMostLaidOutItem(e,t),s=this._distancePastBottom(e,a);if(r&&s>=0){var o=e.layoutMetrics;o.minimumSizePosition===b.Top?(this.isAtEnd=b.Top,this._distancePastEnd=i):o.minimumSizePosition===b.Bottom&&(this.isAtEnd=b.Bottom,this._distancePastEnd=s)}},completeVisibleCells:function(e,t,n,i){var r=!!n.find(this.isCellAnchorable),a=this.layOutCellsInDirection(e,n,n.objectAt(0),-1,r),s=this.layOutCellsInDirection(e,n,n.lastItem,1,r||a);if(!1!==r||!1!==a||!1!==s)if(i.movedBy||i.itemShown||i.itemScrolledTo){var o=e.layoutMetrics,c=null,u=0,d=this.topMostItem(e,n),h=this._distancePastTop(e,d),p=h>=0,f=this.bottomMostItem(e,n),g=this._distancePastBottom(e,f),m=g>=0;m&&p&&(o.minimumSizePosition===b.Top?m=!1:o.minimumSizePosition===b.Bottom&&(p=!1)),m?(c=b.Bottom,u=g):p&&(c=b.Top,u=h),this.isAtEnd=c,this._distancePastEnd=u}else{var _;for(this.checkForMinimumSize(e,n);Math.abs(l.a.sharedInstance.floorToDevicePixelRatio(_=this.endOffset(e,t,n)))>0;)this.moveCellsBy(e,0,_,n),_>0?this.layOutCellsInDirection(e,n,n.objectAt(0),-1,!0):this.layOutCellsInDirection(e,n,n.lastItem,1,!0)}},verticalScan:1/0,horizontalScan:1/0,setUpCellAtDistance:function(e,t,n,i,r){var a=this.horizontalScan,s=this.verticalScan;if(Math.abs(i)>a||Math.abs(r)>s)return this.estimateCellAtDistance(e,t,n,i,r);var o,l=isFinite(a)||isFinite(s),c=0;if(r>0)c=1;else if(r<0)c=-1;else if(i>0)c=1;else{if(!(i<0))return n.isLaidOut||this.recoverLayoutFromCell(e,n),n;c=-1}if(w.x=n.x+i,w.y=n.y+r,l){var u=e.viewportBounds;I.x=u.x-a,I.y=u.y-s,I.width=u.width+2*a,I.height=u.height+2*s}for(n.retain();null!==(o=this.positionNextCell(e,n,c));){if(o.retain(),o.containsPoint(w)||c<0&&o.y<=w.y||c>0&&o.y>=w.y||l&&!o.intersects(I))return n.release(),o.autorelease();n.release(),o.isLaidOut=!1,n=o}return c>0?this.setUpLastCell(e,t):this.setUpFirstCell(e,t)},estimateCellAtDistance:u.a,verticalSpacingForCellTypes:function(e,t,n){return"item"===t&&"item"===n?e.layoutMetrics.rowSpacing:0},positionNextCell:function(e,t,n){var i=t.handle.atDistance(n).retain();if(!i.isValid)return i.release(),null;var r,a=this.cellForHandle(i).retain();return i.release(),r=n>0?this.verticalSpacingForCellTypes(e,t.cellType,a.cellType):this.verticalSpacingForCellTypes(e,a.cellType,t.cellType),this.positionAdjacentCell(e,t,a,n,r).autorelease()},positionAdjacentCell:function(e,t,n,i,r){var a;return t.retain(),n.retain(),a=i>0?t.bottom+r:t.y-r,t.release(),this.layOutCellInDirection(e,n,i,a,1,this.leftForCell(e,n)),n.autorelease()},layOutCellInDirection:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=this.sizeForCell(e,t),o=t.height=s.height;n>0?t.y=i:n<0&&(t.y=i-o);var l=t.width=s.width;return r>0?t.x=a:r<0&&(t.x=a-l),t.isLaidOut=!0,t},sizeForCell:function(e,t){var n=t.size;return n||(n=t.size=this[this.sizeKeyByCellType[t.cellType]](e,t)),n},estimatedSizeForCell:function(e,t){var n=this.estimatedSizeKeyByCellType;if(!n){n={};var i=this.sizeKeyByCellType;for(var r in i)n[r]="estimated"+Object(d.a)(i[r])}var a=t.size;return a||(a=t.size=this[n[t.cellType]](e,t)),a},sizeKeyByCellType:{item:"sizeForItem"},estimatedSizeKeyByCellType:null,sizeForItem:function(e,t){return m.a.create({height:e.layoutMetrics.rowHeight,width:e.viewportWidth})},leftForCell:function(e,t){return 0},topForCell:function(e,t){for(var n=e.layoutMetrics,i=t.handle,r=-1;i.isValid;)i=i.previous,r++;return(r=Math.max(r,0))*(n.rowHeight+n.rowSpacing)+n.topPadding+n.topInset-n.hideableTopHeight},spaceBelowCell:function(e,t){for(var n=e.layoutMetrics,i=t.handle,r=-1;i.isValid;)i=i.next,r++;return(r=Math.max(r,0))*(n.rowHeight+n.rowSpacing)+n.bottomPadding-n.hideableBottomHeight},topMostItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusable)},topMostLaidOutItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusableAndLaidOut)},topMostValidItem:function(e,t){return this.topMostAnchor(e,t,this._isCellReusableAndValid)},bottomMostItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusable)},bottomMostLaidOutItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusableAndLaidOut)},bottomMostValidItem:function(e,t){return this.bottomMostAnchor(e,t,this._isCellReusableAndValid)},topMostAnchor:function(e,t,n){var i=this,r=t.find((function(e){return i.isCellPreferredAnchor(e)&&n.call(i,e)}));return r||(r=t.find((function(e){return i.isCellAnchorable(e)&&n.call(i,e)}))),r},bottomMostAnchor:function(e,t,n){var i=this,r=t.findLast((function(e){return i.isCellPreferredAnchor(e)&&n.call(i,e)}));return r||(r=t.findLast((function(e){return i.isCellAnchorable(e)&&n.call(i,e)}))),r},_isCellReusable:function(e){return e.isReusable},_isCellReusableAndLaidOut:function(e){return e.isReusable&&e.isLaidOut},_isCellReusableAndValid:function(e){var t=e.handle;return t.isValid&&!t.wasRemoved},isCellAnchorable:function(e){return"item"===e.cellType},isCellPreferredAnchor:function(e){return this.isCellAnchorable(e)},computeSpaceAroundViewport:function(e){var t=e.spaceAroundViewport,n=e.visibleCells,i=0,r=0,a=e.layoutMetrics,s=e.viewportHeight,o=a.hideableTopHeight,l=a.hideableBottomHeight,c=this.topMostItem(e,n),u=0,d=0;c&&(d=this.topForCell(e,c),u=c.y);var h=this.bottomMostItem(e,n),p=0,f=0;h&&(f=this.spaceBelowCell(e,h),p=h.bottom);var g,m,_=Math.min(s,d+f+p-u);_<s&&a.minimumSizePosition===b.Bottom?(g=s-_,m=s):(g=0,m=_),i=d-u+g,r=f-(m-p);var v=_+o<=s;a.minimumSizePosition===b.Bottom&&v||(i+=o);var y=_+l<=s;return a.minimumSizePosition===b.Top&&y||(r+=l),t.beginBatchSet().set("left",0).set("right",0).set("top",i).set("bottom",r).end(),t}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var i=n(55),r=n(392),a=n(20),s=n(120),o=n(13),l=n(51),c=n(195),u=n(299),d=n(281),h=n(319),p=n(390),f={mixinDependencies:[n(353).a],staticMembers:{init:function(e){this.__s._$1JC$init.call(this,e);var t,n=this.template;if(n){Object(s.a)(n)||Object(o.b)("Template must be a $template");var i=0;!this.hasOwnProperty("template")&&n.classes&&(i=n.classes.length);var r=this._templateExtensionsArray;if(r){for(var c=r.length,u=0;u<c;u++)n=g(n,r[u]);this.template=n,delete this._templateExtensionsArray,(t=r).length=0,C.push(t)}var d=n.classes;if(d)for(var h=i,p=d.length;h<p;h++)if("string"===typeof d[h]){this.className=!1;break}this.registerOutletAndSubOutlets(n);var f=this._handledOutlets,m=this.superclass._handledOutlets,_=this.prototype;for(var v in m)if(m[v]&&!f[v])if(_.getMetadata(v).outletProperty)Object(o.b)("Template error: template redefined with missing outlet: %{outletName}. If you are implementing this property in a different way, you may suppress this error by redefining the property in your subclass.",{outletName:v});else{var b="_"+v+"OutletObserver";_.registerMetadata(b,Object(a.h)(v,l.a))}}},_templateExtensionsArray:null,mixinWasApplied:function(){var e=this.templateExtensions;if(e){var t=this._templateExtensionsArray;t||(t=this._templateExtensionsArray=C.length>0?C.pop():[]),t.push(e),delete this.templateExtensions}},template:{type:"ELEMENT",tagname:"div"},templateExtensions:null,_nodeHandlers:{},_getNodeHandler:function(e){var t=e.type.toLowerCase(),n=this._nodeHandlers[t];return t&&!n&&Object(o.b)("No handler for template node type: "+t),n},registerOutletAndSubOutlets:function(e,t){if(Object(c.a)(e))return e;var n=this._getNodeHandler(e),i=n.register;i&&(e.parent=t,i.call(n,this,e))},renderNodeAndSubNodes:function(e,t){if(Object(c.a)(e))return e;var n=this._getNodeHandler(e),i=n.render;return i||Object(o.b)("No render handler for template node type: "+e.type),i.call(n,this,t,e)},_handledOutlets:Object(i.c)(Object),_outletWasRegistered:function(e){this._handledOutlets[e]=!0},__superMap:{_$1JC$init:"init"}},init:function(e){var t=this,n=arguments,i=this.element=this.generateElementNode();i.view=this,t.__s._$3eM$init.apply(t,n)},_getRenderedTemplate:function(e,t){var n=e._renderedValue;return n||(n=e._renderedValue=r.a.create()),n.get(t)},generateElementNode:function(){var e=this.constructor.template;if(e){var t=this.document,n=this._getRenderedTemplate(e,t);return n||(n=this.constructor.renderNodeAndSubNodes(e,t),e._renderedValue.set(t,n)),n.cloneNode(!0)}},__superMap:{_$3eM$init:"init"}};function g(e,t){var n=m(e);for(var i in t){var r=t[i];if(Object(u.a)(r))for(var a=r.length,l=0;l<a;l++)I(n,i,r[l]);else Object(s.a)(r)?I(n,i,r):Object(o.b)("Template extension must be a $template or an array of $templates.")}return n}function m(e){return Object(d.b)(e,y)}var _=Object(h.a)(["attribute","attributes","children","classes","data","falsevalue","index","name","namespace","property","styles","tagname","truevalue","type","unit"]),v=Object(h.a)(["styles","classes","attributes","children"]);function b(e,t){return v[t]?w:y}function y(e,t,n){return _[n]?Object(d.b)(e,b(0,n)):d.a}function w(e,t,n){return Object(d.b)(e,b(0,n))}function I(e,t,n){n=m(n);var i=function(e){var t=e._namesCache;return t||(e._namesCache=t=function e(t,n){if(t){var i=t.name;if(i){var r=n[i];r&&t!==r?Object(o.b)("invalid node name: '"+i+"' is already used"):n[i]=t}var a=t.children;if(a)for(var s=a.length,l=0;l<s;l++){e(a[l],n)}return n}}(e,{root:e})),t}(e)[t];i||Object(o.b)("unable to find outlet with name "+t+" to extend"),"ext"!==n.tagname&&(i.tagname=n.tagname),i.attributes=Object(p.a)(i.attributes,n.attributes),i.styles=Object(p.a)(i.styles,n.styles),i.children=S(i.children,n.children),i.classes=S(i.classes,n.classes)}function S(){for(var e,t=arguments.length,n=0;n<t;n++){var i=arguments[n];i&&(e=e?e.concat(i):i)}return e}var C=[]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(138),r=Object(i.b)("LOAD_STATUS",(function(e){e("NOT_LOADED"),e("LOADED"),e("ERRORED")}))},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.IOS="IOS",e.ANDROID="ANDROID",e.WINDOWS="WINDOWS",e.MAC="MAC",e.LINUX="LINUX",e.CHROMEOS="CHROMEOS",e.UNKNOWN="UNKNOWN"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("DataClassType",{UNKNOWN:0,IMAGE:1,MOVIE:2,AUDIO:3})},function(e,t,n){var i=n(128);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=n(1046)(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n(160),r=n(51),a=n(13),s=n(82),o=n(17),l=n(351),c={},u=l.a.extend({debugType:"Base",key:null,init:function(e){e&&(this.property=e,this.key=e.key,this.set=e._transformedSet,this.internalGet=e.internalGet,this.validateType=e._validateType,this._valueOffsetCount=1,this.setterReturnArray=new Array(e.writeDependencies?e.writeDependencies.length:e.dependencies?e.dependencies.length:0),this.clearReturnArray(this.setterReturnArray)),this.dependencyCollector=[],this.__s._$fe$init.call(this)},property:null,isCacheable:!0,validateType:null,reference:null,set:null,internalGet:null,_valueOffsetCount:0,setUpNode:r.a,validateDescendantDownstreamNodeManager:function(e,t,n){e.property!==this.property&&Object(a.b)("A property\u2019s upstream node may only connect to the downstream node for the same property (key: %{key}, downstream property key: {%downstreamKey}). \u2026If you get this error, please contact the CoreWeb team, as you\u2019ve discovered a unicorn.",{key:this.key,downstreamKey:e.key})},willRemoveChildFromNode:function(e,t,n){o.a.getValueForNode(t)},wasDirtiedByParent:function(e,t,n,i){this._manageForWasDirtiedByParent(i,e)},_manageForWasDirtiedByParent:r.a,wasDirtiedBySelf:function(e,t,n,i){this._manageForWasDirtiedBySelf(n,i,e)},_manageForWasDirtiedBySelf:r.a,calculateValueForNode:function(e,t,n){var r,l=o.a.getDataForNode(t);if(n){var u=o.a.getStateIDForNode(t);if((r=this.pullDataFromParent(t,u))===c)return l}else r=o.a.getStateDataForNode(t),o.a.setStateDataForNode(void 0,t);var d=this.setterReturnArray,h=this.set.call(e,r,l,d,0,this.property);if(!this.validateType(h)){var p=this.property.type;Object(s.a)(h,i.a)?Object(a.b)('Type error: cannot set value `%{value}` (an instance of %{constructor}) to observable property "%{key}" of %{object} which expected a %{type}. (Note that `set` may have been called on a downstream property.)',{object:e,key:this.key,value:h,constructor:h.constructor,setValue:r,type:p}):Object(a.b)('Type error: cannot set value `%{value}` to observable property "%{key}" of %{object} which expected a %{type}. (Note that `set` may have been called on a downstream property.)',{object:e,key:this.key,value:h,setValue:r,type:p})}return this.passValuesToChildren(t,d,h),this.clearReturnArray(d),this._manageForCalculateValueForNode(h,r,e),h},_manageForCalculateValueForNode:r.a,pullDataFromParent:function(e,t){if(o.a.getStateDataForNode(e)===c){var n=o.a.getManagerForNode(t).property,i=n.key;n.dependencies!==n.writeDependencies?Object(a.b)("Infinite loop detected in the %{property} observable property. This is likely because you are attempting to get the write dependency '%{key}' inside your setter.",{key:this.key,property:i}):Object(a.b)("Infinite loop detected in the %{property} observable property. Try adding a writeDependencies array that contains only the dependencies you actually write to (not %{key}).",{key:this.key,property:i})}return o.a.setStateDataForNode(c,e),t<0&&Object(a.b)("Couldn't tell which parent set the upstream node (%{node})",{node:e}),o.a.getValueForNode(t),o.a.getStateDataForNode(e)},clearReturnArray:function(e){for(var t=e.length,n=0;n<t;n++)e[n]=c},passValuesToChildren:function(e,t,n){var i=this.dependencyCollector;o.a.getChildrenIDs(e,i);for(var r=this._valueOffsetCount,a=t.length,s=0;s<a;s++){var l=i[s+r];t[s]!==c&&l>=0&&o.a.getStateIDForNode(l)===e&&o.a.passValueToNode(t[s],l)}o.a.passValueToNode(n,i[0])},dependencyCollector:null,setterReturnArray:null,addDebugInfoForNode:function(e,t,n){t.type=this.debugType+" Upstream Node",t.object=e,t.key=this.key,t.toString=function(){return e+"."+this.key+" (Upstream)"},t.name=t.toString()},__superMap:{_$fe$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamNodeManager"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var i=n(123),r=n(77),a=n(162),s=n(40),o=n(200),l=n(313),c=n(264),u=n(20),d=n(7),h={mixinDependencies:[i.a],width:Object(r.c)(a.a),height:Object(r.c)(a.a),toString:function(){var e=this,t=arguments;return e.__s._$8e$toString.apply(e,t)+Object(l.a)("{ width: %{width}, height: %{height} }",this)},__superMap:{_$8e$toString:"toString"}},p=s.a.extend(u.b,h,o.a,{initFromPool:function(e,t){var n=this,i=arguments;if(Object(c.a)(t))return this.width=e,this.height=t,n.__s._$Fw$initFromPool.call(n);n.__s._$Fw$initFromPool.apply(n,i)},didEnterPool:function(){var e=this,t=arguments;this.width=0,this.height=0,e.__s._$I3$didEnterPool.apply(e,t)},width:Object(d.b)(0),height:Object(d.b)(0),__superMap:{_$Fw$initFromPool:"initFromPool",_$I3$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Size"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return g}));var i=n(40),r=n(55),a=n(15),s=n(300),o=n(312),l=n(20),c=n(7),u=n(78),d=n(349),h=n(13),p=n(552),f=n(202),g=i.a.extend(l.b,s.a,o.a,{_childViewControllers:Object(r.c)(Array),parent:Object(c.b)(null),_isViewLoaded:!1,isViewLoaded:Object(a.d)({readOnly:!0,get:function(){return this._isViewLoaded}}),_isAttached:void 0,isAttached:Object(c.b)({dependencies:["parent.isAttached"],defaultValue:!1,readOnly:!0,get:Object.assign((function(){var e=this._isAttached;return Object(d.a)(e)?e:Boolean(this.getPath("parent.isAttached"))}),{__CW__getter:function(e,t,n,i){var r=this._isAttached;return Object(d.a)(r)?r:Boolean(i.internalGetPath(this,t[0+n]))}})}),_setIsAttached:function(e){this._isAttached=e,this.propertyChanged("isAttached")},isRootViewController:!1,_view:null,view:Object(c.b)({readOnly:!0,strong:!0,get:function(){return this.loadView(),this._view}}),presentingViewController:null,viewClass:f.a,dispose:function(){var e=this,t=arguments,n=this._childViewControllers,i=0,r=n.length;for(i=0;i<r;i++)n[i].parent=null,n[i].release(this,"holding as a childViewController");this.unloadView(!0),e.__s._$1Nd$dispose.apply(e,t)},loadView:function(){if(!this._isViewLoaded){this.viewWillLoad();var e=this.createView();e.beginBatchSet().set("viewController",this).set("nextResponder",this).set("focusParent",this).end(),this._view=e,this._isViewLoaded=!0,this._loadChildViews(e),this.viewDidLoad(e)}},viewWillLoad:function(){},viewDidLoad:function(e){},viewWillUnload:function(e){},viewDidUnload:function(){},createView:function(){return this.viewClass.create({isRootView:this.isRootViewController})},unloadView:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._isViewLoaded){var t=this._view;this.viewWillUnload(t),t.beginBatchSet().set("viewController",null).set("nextResponder",null).set("focusParent",null).end(),this._view=null,this._isViewLoaded=!1,e||this.propertyChanged("view"),this.viewDidUnload()}},willMoveToParentViewController:function(e){e&&e.isAttached&&!this.isAttached?this.willAttach():!e&&this.isAttached&&this.willDetach()},didMoveToParentViewController:function(e){e&&e.isAttached?this.didAttach():e||this.didDetach()},willAttach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].willAttach()},didAttach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].didAttach()},willDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].willDetach()},didDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;e<n;e++)t[e].didDetach()},addChildViewController:function(e,t){var n=this._childViewControllers;e.parent&&Object(h.b)("Cannot add view controller because it is already a child of a view controller",{parent:this,child:e}),n.push(e),t?(t.set(e,"parent",this),t.set(e,"focusParent",this)):(e.parent=this,e.focusParent=this),e.retain(this,"holding as a childViewController")},removeChildViewController:function(e,t){var n=this._childViewControllers;n.indexOf(e)<0&&Object(h.b)("Cannot remove view controller because it is not a child of this view controller",{parent:this,child:e}),t?(t.set(e,"parent",null),t.set(e,"focusParent",null)):(e.parent=null,e.focusParent=null),e.release(this,"holding as a childViewController"),Object(p.a)(e,n)},_loadChildViews:function(e){for(var t=this._childViewControllers,n=0;n<t.length;n++){var i=t[n],r=i._destinationViewOutlet;r&&e.setPath(r,i.view)}},defaultFocusChild:Object(u.c)("view"),focusAsLeaf:function(){var e=this,t=arguments,n=e.__s._$4QT$focusAsLeaf.apply(e,t);return n&&this.view.focus(),n},nextResponder:Object(a.d)({get:function(e){if(e)return e;var t=this.view;return t?t.parent:null}}),performAction:function(e){var t=this.targetViewControllerForAction(e,this);if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t[e].apply(t,i)}Object(h.b)("CW.ViewController"+e+" No view controller in hierarchy implements "+e+".",{viewController:this})},canPerformAction:function(e,t){var n=this,i=arguments,r=this[e];switch(e){case"showViewController":case"showDetailViewController":case"presentViewController":case"dismissViewController":return"function"===typeof r&&r!==g.prototype[e];default:return n.__s._$59d$canPerformAction.apply(n,i)}},targetViewControllerForAction:function(e,t){var n=null;if(this.canPerformAction(e,t))n=this;else{var i=this.nextResponder;i&&(n=i.targetViewControllerForAction(e,t))}return n},showViewController:function(e){this.performAction("showViewController",e)},showDetailViewController:function(e){this.performAction("showDetailViewController",e)},presentViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.presentingViewController=this,this.performAction("presentViewController",e,t)},dismissViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.performAction("dismissViewController",e,t)},dismiss:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.presentingViewController;if(t)return t.dismissViewController(this,e);Object(h.b)("CW.ViewController#dismiss The view controller has no presentingViewController.",{viewController:this})},__superMap:{_$1Nd$dispose:"dispose",_$4QT$focusAsLeaf:"focusAsLeaf",_$59d$canPerformAction:"canPerformAction"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewController"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(221),r=function(e){return window.requestAnimationFrame(Object(i.a)(e))}},function(e,t,n){"use strict";n(1),n(0),n(2),n(11),n.d(t,"a",(function(){return p}));var i=n(130),r=n(207),a=n(156),s=n(189),o=n(223),l=n(258),c=n(224),u=n(97),d=n(65),h=Array.from(new Set([].concat(c.a.serviceKeys,s.a.serviceKeys))).sort(),p={systemContainerItemServiceKeys:h,containerItemServiceKeys:Array.from(new Set([].concat(h,o.a.serviceKeys))).sort(),getDesiredKeys:function(e,t){return e.isPredefinedSmartAlbum?this.systemContainerItemServiceKeys:this.containerItemServiceKeys},getRawHashesForRecordsByType:function(e,t,n){var a=[],l=[],d={},h=[],p=[],f=[];if(Array.isArray(t))for(var g=0,m=t.length;g<m;g++){var _=t[g],v=_.recordType;switch(v){case c.a.CK_RECORD_TYPE:var b=c.a.getDataValuesFromServiceValues(_,{zone:e});h.push(b),d[b.recordName]=b;break;case s.a.CK_RECORD_TYPE:var y=s.a.getDataValuesFromServiceValues(_,{zone:e});p.push(y);var w=y.pk,I=w;a.push(I);var S=u.a.getRawHash(I,n);S.master=r.Record.getPrimaryKeyWithZonePK(e,y.masterRefRecordName),S.asset=w,l.push(S);break;case o.a.CK_RECORD_TYPE:var C=o.a.getDataValuesFromServiceValues(_,{zone:e});f.push(C);break;default:i.b.warn("Media/List: Ignoring unknown recordType="+v);continue}}return{mediaPKs:a,mediaHashes:l,masterHashes:h,assetHashes:p,containerRelationHashes:f}},getIsContainerRecordUsable:function(e){return this.getIsContainerAlbumTypeUsable(e)},getIsRecordNameAProjectRootFolder:function(e){return e===d.a.PROJECT_ROOT_RECORD_NAME},getIsContainerAlbumTypeUsable:function(e){var t=a.d(e,"albumType");return this.getIsAlbumTypeUsable(t)},getIsAlbumTypeUsable:function(e){return e===l.a.NORMAL.value||e===l.a.FOLDER.value||e===l.a.PREDEFINED_SMART.value}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("ContainerType",{NORMAL:0,SMART:1,FACE:2,FOLDER:3,PREDEFINED_SMART:4,REFERENCING:5,USER_SMART:6})},function(e,t,n){var i=n(163).f,r=n(180),a=n(134)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var i=n(77),r=n(162),a=n(40),s=n(384),o=n(313),l=n(82),c=n(20),u=n(278),d=n(254),h=n(78),p=n(7),f={mixinDependencies:[d.b],origin:Object(i.c)(r.a),top:Object(i.c)(r.a),bottom:Object(i.c)(r.a),left:Object(i.c)(r.a),right:Object(i.c)(r.a),isAbove:function(e){return this.bottom<=e.top},isBelow:function(e){return this.top>=e.bottom},isLeftOf:function(e){return this.right<=e.left},isRightOf:function(e){return this.left>=e.right},intersects:function(e){return!this.isAbove(e)&&!this.isBelow(e)&&!this.isRightOf(e)&&!this.isLeftOf(e)},containsPoint:function(e){var t=e.x,n=e.y;return t>=this.left&&t<this.right&&n>=this.top&&n<this.bottom},toString:function(){var e=this,t=arguments;return e.__s._$14B$toString.apply(e,t)+Object(o.a)("{ origin: (%{x},%{y}) size: (%{width}, %{height}) }",this)},__superMap:{_$14B$toString:"toString"}},g=a.a.extend(c.b,f,{_origin:null,init:function(e){var t=this,n=arguments;if(Object(l.a)(e,f))return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,t.__s._$1NE$init.call(t);t.__s._$1NE$init.apply(t,n)},origin:Object(p.b)({dependencies:["x","y"],strong:!0,get:Object.assign((function(){var e=this.y,t=this.x,n=this._origin;return n?(n.set("x",t),n.set("y",e)):n=this._origin=u.a.create({x:t,y:e}),n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]),s=this._origin;return s?(s.set("x",a),s.set("y",r)):s=this._origin=u.a.create({x:a,y:r}),s}}),set:Object.assign((function(e){Object(s.a)(e)||(e=u.a.create(e)),this.x=e.x,this.y=e.y,this._origin=e}),{__CW__setter:function(e,t,n,i,r){Object(s.a)(e)||(e=u.a.create(e)),n[0+i]=e.x,n[1+i]=e.y,this._origin=e}}),writeDependencySetPathMap:[!1,!1]}),x:Object(p.b)(),y:Object(p.b)(),width:Object(p.b)(),height:Object(p.b)(),top:Object(p.b)({binding:Object(h.c)("y"),readOnly:!0}),bottom:Object(p.b)({readOnly:!0,cacheable:!0,dependencies:["height","y"],get:Object.assign((function(){return this.y+this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])+i.internalGet(this,t[0+n])}})}),left:Object(p.b)({binding:Object(h.c)("x"),readOnly:!0,cacheable:!0}),right:Object(p.b)({readOnly:!0,cacheable:!0,dependencies:["width","x"],get:Object.assign((function(){return this.x+this.width}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])+i.internalGet(this,t[0+n])}})}),__superMap:{_$1NE$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Rect"}})},function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var i=n(13);function r(e,t,n){a();var i=e.apply(t,n);return s(),i}function a(){d[u++]=p}function s(){for(var e=d[u-1];p>e;)l(--p);u--}function o(e,t,n){return 0===u&&(a(),setTimeout(s,0)),h[p]=e,p++}function l(e){var t=h[e];h[e]=null,t&&t.release(void 0,void 0)}function c(e,t){h[t]!==e&&Object(i.b)("CW.Utils._cancelAutorelease: attempted to cancel autorelease for a different object",{object:e}),l(t)}var u=0,d=[],h=[],p=0;"undefined"!==typeof window&&window},function(e,t,n){"use strict";function i(e){return"number"===typeof e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(281);function r(e){return Object(i.b)(e,i.b)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(51),r=n(13),a=n(263),s=function(e,t){var n=l.pop()||d();n.workFunc=e||i.a,n.thisArg=t,n._shouldReleaseOnRun=h;for(var r=n.args,a=2,s=arguments.length;a<s;a++)r[a-2]=arguments[a];return n.callback},o=function(){h=!0;var e=s.apply(void 0,arguments);return h=!1,e.retain(),e},l=[],c=[],u=function(){r.b("Attempting to invoke a recycled function while it is pooled.")},d=function(){var e={};e.workFunc=u,e.thisArg=null,e.args=[],e.retainCount=0;var t=e.callback=function(){c.length=0,c.push.apply(c,e.args),c.push.apply(c,arguments);var n=e.workFunc.apply(e.thisArg,c);return e._shouldReleaseOnRun&&(e._shouldReleaseOnRun=!1,t.release()),n};return t.retain=function(){return e.workFunc===u&&r.b("Attempting to retain a recycled function while it is pooled."),e.retainCount++,t},t.release=function(){return--e.retainCount||(e.args.length=0,e.thisArg=null,e.workFunc=u,l.push(e)),e.retainCount<0&&r.b("Attempting to overrelease a recycled bound function."),t},t.autorelease=function(){return a.b(this),this},e},h=!1},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("SizeClass",{COMPACT:"COMPACT",REGULAR:"REGULAR"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(42),r=n(13),a=n(98),s=n(139),o=n(798);function l(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var c={retryDelayTimes:[5e3,1e4,15e3,3e4],shouldThrowMaxRetryFatalError:!0,retryRequest:function(e,t){var n,c=this;return(n=regeneratorRuntime.mark((function n(){var l,u,d,h,p,f,g,m,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=i.n().feedbackService,u=t._retryCount,h=d=void 0===u?0:u,t._retryCount=++d,p=d>c.retryDelayTimes.length,l&&l.report("ckRetryCount",{retryErrorCode:e.ckErrorCode,retryAfterValue:e.retryAfter,retryOperationType:String(t.type),retryUUID:e.uuid,retryCount:d,retryCountMaxReached:p}),!p){n.next=12;break}if(!1!==c.shouldThrowMaxRetryFatalError){n.next=10;break}throw new o.a(e);case 10:return r.b("Retry-able error",e),n.abrupt("return");case 12:return f=e.retryAfter,g=Number.isSafeInteger(f)&&f>0,m=g?1e3*f:c.retryDelayTimes[h],_=a.a.create(),s.a((function(){c.action(t).then((function(e){return _.resolve(e)})).catch((function(e){return _.reject(e)}))}),m),n.abrupt("return",_);case 19:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){l(a,i,r,s,o,"next",e)}function o(e){l(a,i,r,s,o,"throw",e)}s(void 0)}))})()},contextError:function(e,t){var n=this,i=arguments;if(e.ckErrorCode===CloudKit.CKError.ATOMIC_ERROR)return this.retryRequest(e,t);n.__s._$sM$contextError.apply(n,i)},serverError:function(e,t){return this.retryRequest(e,t)},__superMap:{_$sM$contextError:"contextError"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("AdjustmentRenderType",{UNDEFINED:0,AUTOLOOP:1,PORTRAIT:2,LONG_EXPOSURE:4,MIRROR:8})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(51),r=n(348),a=n(13),s=function(e,t){var n=c();return n.workFunc=e||i.a,n.thisArg=t,Object(r.a)(n.args,arguments,0,2),n.callback},o=[],l=function(){Object(a.b)("Cannot call a single-use-bound function more than once.")};function c(){return o.pop()||function(){var e={};return e.workFunc=l,e.thisArg=null,e.args=[],e.callback=function(){e.args.push.apply(e.args,arguments),e.workFunc.apply(e.thisArg,e.args),u(e)},e}()}function u(e){e.args.length=0,e.thisArg=null,e.workFunc=l,o.push(e)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i,r=n(129),a=n(597),s=n(493),o=n(364),l=n(598),c=n(488),u=n(414)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}p=i?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):function(){var e,t=c("iframe");return t.style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F}();for(var e=s.length;e--;)delete p.prototype[s[e]];return p()};o[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=r(e),n=new d,d.prototype=null,n[u]=e):n=p(),void 0===t?n:a(n,t)}},function(e,t,n){"use strict";var i=n(91);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var i=n(129),r=n(218),a=n(134)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[a])?t:r(n)}},function(e,t,n){"use strict";var i=n(22),r=n(108),a=n(145),s=n(514),o=n(147),l=n(418),c=n(293),u=n(271),d=n(213),h=n(146),p=n(609),f=n(626),g=n(251),m=n(180),_=n(372),v=n(128),b=n(272),y=n(292),w=n(305).f,I=n(627),S=n(206).forEach,C=n(334),E=n(163),A=n(211),O=n(217),T=n(420),M=O.get,D=O.set,P=E.f,L=A.f,R=Math.round,x=r.RangeError,N=l.ArrayBuffer,F=l.DataView,V=o.NATIVE_ARRAY_BUFFER_VIEWS,k=o.TYPED_ARRAY_TAG,B=o.TypedArray,j=o.TypedArrayPrototype,U=o.aTypedArrayConstructor,G=o.isTypedArray,H=function(e,t){for(var n=0,i=t.length,r=new(U(e))(i);i>n;)r[n]=t[n++];return r},W=function(e,t){P(e,t,{get:function(){return M(this)[t]}})},$=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},z=function(e,t){return G(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return z(e,t=g(t,!0))?u(2,e[t]):L(e,t)},q=function(e,t,n){return!(z(e,t=g(t,!0))&&v(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)};a?(V||(A.f=K,E.f=q,W(j,"buffer"),W(j,"byteOffset"),W(j,"byteLength"),W(j,"length")),i({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:K,defineProperty:q}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,o=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,g=r[o],m=g,_=m&&m.prototype,E={},A=function(e,t){P(e,t,{get:function(){return function(e,t){var n=M(e);return n.view[l](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=M(e);n&&(i=(i=R(i))<0?0:i>255?255:255&i),r.view[u](t*a+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};V?s&&(m=t((function(e,t,n,i){return c(e,m,o),T(v(t)?$(t)?void 0!==i?new g(t,f(n,a),i):void 0!==n?new g(t,f(n,a)):new g(t):G(t)?H(m,t):I.call(m,t):new g(p(t)),e,m)})),y&&y(m,B),S(w(g),(function(e){e in m||d(m,e,g[e])})),m.prototype=_):(m=t((function(e,t,n,i){c(e,m,o);var r,s,l,u=0,d=0;if(v(t)){if(!$(t))return G(t)?H(m,t):I.call(m,t);r=t,d=f(n,a);var g=t.byteLength;if(void 0===i){if(g%a)throw x("Wrong length");if((s=g-d)<0)throw x("Wrong length")}else if((s=h(i)*a)+d>g)throw x("Wrong length");l=s/a}else l=p(t),r=new N(s=l*a);for(D(e,{buffer:r,byteOffset:d,byteLength:s,length:l,view:new F(r)});u<l;)A(e,u++)})),y&&y(m,B),_=m.prototype=b(j)),_.constructor!==m&&d(_,"constructor",m),k&&d(_,k,o),E[o]=m,i({global:!0,forced:m!=g,sham:!V},E),"BYTES_PER_ELEMENT"in m||d(m,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in _||d(_,"BYTES_PER_ELEMENT",a),C(o)}):e.exports=function(){}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return y}));var i=n(199),r=n(64),a=n(282),s=n(17),o=n(155),l=n(82),c=n(120),u=n(13),d=n(51),h=n(195),p=n(566),f=n(178),g=n(565),m=n(42),_={toOne:function(e){return v.create(e)},toMany:function(e){return b.create(e)}},v=f.b.extend({embedded:!1,_encodeValue:function(e,t,n){return this.encode?this.encode(n):(Object(l.a)(n,f.a)?(i=n.constructor,this.embedded?((e.__cwMaterializedValues||(e.__cwMaterializedValues={}))[t]=n,n.retain(),n=n.toJSON()):n=n.getPrimaryKey()):i=Object(c.a)(n)&&n.type&&n.id?(n=n.id).type:this.type,i?(e.__relationshipTypes||(e.__relationshipTypes={}))[t]=i:Object(u.b)("CW.Data.ToOneRelationshipProperty#_encodeValue: Unable to determine type for: `"+n+"`."),n);var i},getType:function(e,t){var n=e.__relationshipTypes;return n&&n[t]||this.type},hasMaterializedInstance:function(e,t){if(this.embedded)return!!this._getCachedValueForObject(e,t);var n=e._cwStore,i=y(this.getType(e,t),e.constructor),r=e.getDataHash();if(!r)return!1;var a=r[this.dataKey||t];return i.hasMaterializedInstance(a,n)},_materializeValue:function(e,t,n){var i=e.__cwMaterializedValues,r=i&&i[t];if(r)return r;if(!n)return null;if(this.decode)return this.decode(n);var a=y(this.getType(e,t),e.constructor);return a||Object(u.b)("CW.Data.ToOneRelationshipProperty#_materializeValue: Unable to determine model class for: `"+n+"`."),this.embedded?(i||(i=e.__cwMaterializedValues={}),i[t]=a.createEmbedded(e,this.dataKey||t)):a.findOrCreatePlaceholder(n,e._cwStore)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ToOneRelationshipProperty"}}),b=f.b.extend({embedded:!1,upstreamNodeManagerClass:Object(i.b)({nodeWillFree:function(e){var t=e.__cwMaterializedValues,n=t&&t[this.key];n&&(Object(r.e)(n,e,"ToManyRelationshipProperty: releasing materialized RelationshipArray"),t[this.key]=null)}}),downstreamNodeManagerClass:a.a.extend({calculateValueForNode:function(e,t,n,i){n&&s.a._sanitizeNodeID(i)>0&&s.a.getValueForNode(i);var r=this.key,a=this.property.getRawValueForObject(e,r);return this.property._materializeValue(e,r,a)}}),_encodeValue:function(e,t,n){return n},_materializeValue:function(e,t,n){var i=e.__cwMaterializedValues||(e.__cwMaterializedValues={}),r=i[t];if(r)return r.hasBackingData?r:void 0;var a,s={type:y(this.type,e.constructor),relatedObject:e,relationshipKey:this.dataKey||t};if(this.embedded)a=p.a.create(n,s);else{if(n&&n.length>0)for(var o=0,u=n.length;o<u;o++){var d=n[o];Object(l.a)(d,f.a)?n[o]=d.getPrimaryKey():Object(c.a)(d)&&d.id&&(n[o]=d.id)}a=g.a.create(n,s,e._cwStore)}return i[t]=a,a.hasBackingData?a:void 0},clearCachedValueForObject:d.a,strong:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ToManyRelationshipProperty"}});function y(e,t){var n;return e&&e.isClass?n=e:"(self)"===e||"self"===e?n=t:Object(h.a)(e)&&(n=Object(m.o)(e)),n||Object(u.b)("CW.Data.Relationship: Unable to compute class for relationship type: `"+e+"`."),n}f.a._registerDataActionHandler(b,(function(e,t,n){var i=e[t];i.contentsDidChangeUntracked();var r=n.originalData[t]||[],a=n.updatedData[t]||[],s=o.a.fromArrays(r,a,i);i.contentsDidChange(s)}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var i=n(123),r=n(77),a=n(40),s=n(200),o=n(264),l=n(313),c=n(20),u=n(171),d=n(7),h={mixinDependencies:[i.a],x:Object(r.c)(u.a),y:Object(r.c)(u.a)},p=a.a.extend(c.b,h,s.a,{initFromPool:function(e,t){var n=this,i=arguments;if(Object(o.a)(e))return this.x=e,this.y=t,n.__s._$DV$initFromPool.call(n);n.__s._$DV$initFromPool.apply(n,i)},didEnterPool:function(){var e=this,t=arguments;this.x=0,this.y=0,e.__s._$FU$didEnterPool.apply(e,t)},x:Object(d.b)(0),y:Object(d.b)(0),toString:function(){var e=this,t=arguments;return Object(l.a)("["+e.__s._$L4$toString.apply(e,t)+"(%{x}, %{y}) ]",this)},__superMap:{_$DV$initFromPool:"initFromPool",_$FU$didEnterPool:"didEnterPool",_$L4$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Point2D"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var i=n(123),r=n(74),a=n(40),s=n(55),o=n(98),l=n(221),c={mixinDependencies:[i.a],action:r.a.create()},u=a.a.extend(c,{dependencies:Object(s.c)([]),run:function(e){var t=this,n=e.initializerPromises,i=this.constructor,r=n.get(i);if(r)return r;var a=this.dependencies.map((function(t){return t.create().run(e)}));return r=o.a.all(a).then((function(){return t.action(e)})).catch(Object(l.a)((function(e){throw e}))),n.set(i,r),r},staticMembers:{__QUALIFIED_CLASS_NAME__:"AppInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(348),r=[];function a(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),r.length=0,Object(i.a)(r,e,t,n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(299),r=n(120),a=n(385),s=function(e,t){var n;if(Object(i.a)(e)){var s=Object(a.a)(e);if(t){for(var l=s.length,c=0,u=0;u<l;u++)(n=t.call(this,s[u],t,u))!==o&&(s[c]=n,c++);c!==l&&(s.length=c)}return s}if(Object(r.a)(e)){for(var d=Object.create(Object.getPrototypeOf(e)),h=Object.keys(e),p=h.length,f=0;f<p;f++){var g=h[f];t?(n=t.call(this,e[g],t,g))!==o&&(d[g]=n):d[g]=e[g]}return d}return e},o={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(160),r=n(51),a=n(82),s=n(13),o=n(17),l=n(351).a.extend({debugType:"Base",property:null,key:null,init:function(e){this.property=e,this.key=e.key,this.get=e._transformedGet,this.internalGet=e.internalGet,void 0!==e.cacheable&&(this.isCacheable=e.cacheable),this.dependencyCount=e.dependencies?e.dependencies.length:0,this.readOnly=e.readOnly,this.reference=e.reference,this.collectors=[],this.collectorsCount=0,this.validateType=e._validateType,e.isDependentComputedProperty&&(this._validateNewParent=r.a,this.isDependentComputedProperty=!0),this.__s._$ll$init.call(this)},isDependentComputedProperty:!1,readOnly:!1,validateType:null,get:null,internalGet:null,setUpNode:r.a,calculateValueForNode:function(e,t,n){var r=o.a.getDataForNode(t),l=this.getCollector();o.a.getParentIDs(t,l);for(var c=o.a.getValueForNode(l[0]),u=1;u<l.length;u++)l[u-1]=l[u];l[l.length-1]=o.a.NULL_INDEX;var d=this.get.call(e,c,l,0,this.property);if(this.releaseCollector(l),!this.validateType(d)){var h=this.property.type;Object(a.a)(d,i.a)?Object(s.b)('Type error: cannot return %{value} (an instance of %{constructor}) from observable property "%{key}" of %{object} which expected a %{type}. Value passed type check at `set` time, but was transformed inappropriately by an upstream property\u2019s getter or setter.',{object:e,key:this.key,value:d,constructor:d.constructor,type:h}):Object(s.b)('Type error: cannot return value %{value} from observable property "%{key}" of %{object} which expected a %{type}. Value passed type check at `set` time, but was transformed inappropriately by an upstream property\u2019s getter or setter.',{object:e,key:this.key,value:d,type:h})}return this._manageForCalculateValueForNode(e,r,d),d},_manageForCalculateValueForNode:r.a,didAddParentToNode:function(e,t,n){this._validateNewParent(t,n)},_validateNewParent:function(e,t){o.a.getManagerForNode(t).validateDescendantDownstreamNodeManager(this,e,t)},validateDescendantDownstreamNodeManager:r.a,_throwValidationError:function(e,t,n){Object(s.b)(n,{reference:e.reference,parentReference:this.reference,key:e.key,object:o.a.getContextForNode(t),parentKey:this.key,property:e.property})},dependencyCount:null,collectors:null,collectorsCount:0,getCollector:function(){return this.collectorsCount>0?this.collectors[--this.collectorsCount]:new Array(this.dependencyCount)},releaseCollector:function(e){var t,n=this.dependencyCount;for(t=0;t<n;t++)e[t]=null;this.collectors[this.collectorsCount++]=e},addDebugInfoForNode:function(e,t,n){t.type=this.debugType+" Downstream Node",t.object=e,t.key=this.key,t.toString=function(){return e+"."+this.key+" (Downstream)"},t.name=t.toString()},__superMap:{_$ll$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamNodeManager"}})},function(e,t,n){"use strict";n(1),n(2),n(0),n.d(t,"a",(function(){return E}));var i=n(40),r=n(526),a=n(138),s=n(15),o=n(98),l=n(55),c=n(127),u=n(51),d=n(221),h=n(13),p=n(318),f=n(20),g=n(7),m=n(78),_=n(300),v=n(201),b=n(737),y=n(698),w=n(736),I=n(396),S=v.a.sharedInstance,C=function(e){var t=E&&E.application;if(t)return t.handleException.apply(t,arguments)},E=i.a.extend(f.b,_.a,r.b,{staticMembers:{application:Object(g.b)({weak:!0}),states:Object(a.b)("AppStates",(function(e){e("NEW"),e("INITIALIZING"),e("READY")})),isExceptionHandlingEnabled:Object(s.d)({defaultValue:null,get:function(e){if(Object(c.a)(e))return e;if(!E.application){var t=this.exceptionHandler;if(!t||t===C)return!1}return!0}}),exceptionHandler:C,__QUALIFIED_CLASS_NAME__:"Application"},handleException:u.a,state:null,run:Object(d.a)((function(){var e=this;this.state=E.states.INITIALIZING;var t=this.Initializers.map((function(t){return t.create().run(e)}));return o.a.all(t).then((function(t){return e.state=E.states.READY,t})).catch(Object(d.a)((function(e){throw e})))})),Initializers:Object(l.c)([y.a,w.a,b.a]),initializerPromises:Object(l.c)(Map),rootElement:window.document.body,primaryInteractionMode:Object(g.b)({readOnly:!0,binding:Object(m.c)("_cw_primaryInteractionMode")}),_cw_primaryInteractionMode:Object(g.b)({readOnly:!0,defaultValue:S.isiPhone||S.isiPad||"coarse"===S.pointer?I.a.TOUCH:(S.pointer,I.a.MOUSE)}),rootViewController:Object(g.b)({defaultValue:null,strong:!0}),_paneManager:Object(g.b)(),nextResponder:Object(s.d)({get:function(){return this.rootResponder}}),rootResponder:null,presentViewController:function(e){return this._paneManager.presentViewController(e)},dismissViewController:function(e){return this._paneManager.dismissViewController(e)},addPane:function(e){this.get("_paneManager").addPane(e)},removePane:function(e){this.get("_paneManager").removePane(e)},bringToFront:function(e){this.get("_paneManager").removePane(e)},activePane:Object(g.b)({binding:Object(m.c)("_paneManager.activePane"),readOnly:!0}),topFocusablePane:Object(g.b)({binding:Object(m.c)("_paneManager.topFocusablePane"),readOnly:!0}),topFocusLayer:Object(g.b)({binding:Object(m.c)("_paneManager.topFocusLayer"),readOnly:!0}),appHasFocus:Object(g.b)({binding:Object(m.c)("_paneManager.appHasFocus"),readOnly:!0}),writeTextToAriaLiveRegion:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",n=window.document.getElementById("cw-aria-live-region");n.setAttribute("aria-live",t),n.textContent=e},init:function(){var e=this,t=arguments;E.application&&Object(h.b)("Only one application may be instantiated per JS context."),e.__s._$4Tb$init.apply(e,t),this.state=E.states.NEW,E.application=this},__superMap:{_$4Tb$init:"init"}});Object(p.c)(E)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(160),r=n(51),a=i.a.extend({nodeType:"",generateLookupFunction:function(e,t){return function(n){return n=n.childNodes[e.index],t(n)}},initializeMember:function(e,t){var n=this.nodeType.toLowerCase();e._nodeHandlers[n]=this},render:r.a,register:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"TemplateHandler"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(299),r=n(385),a=n(82),s=n(550),o=n(265),l=n(13),c=n(40),u=n(15),d=n(354),h=n(458),p=c.a.extend(h.a,{staticMembers:{from:function(e){return this.create(e)},__QUALIFIED_CLASS_NAME__:"CoreArray"},shouldDoPostInitProcessing:Object(u.d)(!0),init:function(e){var t,n=this,s=arguments,o=!1;Object(i.a)(e)?t=Object(r.a)(e):Object(a.a)(e,d.a)?t=e.toArray():(t=[],o=!0),this._array=t,o?n.__s._$dh$init.apply(n,s):n.__s._$dh$init.call(n),this.shouldDoPostInitProcessing&&this.postInitProcessing()},postInitProcessing:function(){var e=this._array;if(e){var t=this.serializer;if(e&&t&&t.encode)for(var n=0,i=e.length;n<i;n++)e[n]=t.encode(e[n],n)}},appendArrays:function(){g.length=0,g[0]=1/0;for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];Object(s.a)(g,n)}return this.insertAt.apply(this,g),this},_array:null,encodedRawSplice:function(e,t){var n=arguments.length-2;this.itemsWillChange(),t>0&&this.itemsWillBeRemoved(e,t),n>0&&this.itemsWillBeInserted(e,n);var i=this._array.splice.apply(this._array,arguments);return t>0&&this.itemsWereRemoved(e,t),n>0&&this.itemsWereInserted(e,n),this.itemsDidChange(),i},encodedObjectAt:function(e){return this._array[e]},length:Object(u.d)({get:f,set:function(e){e<0&&Object(l.b)("Invalid length %{length}. Must be a non-negative integer.",{length:e,object:this});var t,n=this._internalLength,i=e-n;0!==i&&(this.itemsWillChange(),i>0?this.itemsWillBeInserted(n,i):i<0&&(t=n- -1*i,this.itemsWillBeRemoved(t,-i)),this._array.length=e,i>0?this.itemsWereInserted(n,i):i<0&&this.itemsWereRemoved(t,-i),this.itemsDidChange());return e}}),_internalLength:Object(u.d)({readOnly:!0,get:f}),shallowCopy:function(){return this.constructor.create(Object(r.a)(this._array))},toJSON:function(){return Object(o.a)(this._array)},encodedPush:function(){var e,t=arguments.length,n=this.length;if(0===t)return n;this.itemsWillChange(),this.itemsWillBeInserted(n,t);var i=(e=this._array).push.apply(e,arguments);return this.itemsWereInserted(n,t),this.itemsDidChange(),i},clear:function(){var e=this.length;return this.itemsWillChange(),this.itemsWillBeRemoved(0,e),this._array.length=0,this.itemsWereRemoved(0,e),this.itemsDidChange(),this},removeAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.length;return e<0&&(e=n+e)<0&&(e=0),e<n&&e>=0&&(this.itemsWillChange(),this.itemsWillBeRemoved(e,t),this._array.splice(e,t),this.itemsWereRemoved(e,t),this.itemsDidChange()),this},encodedPop:function(){var e=this.length-1;this.itemsWillChange(),this.itemsWillBeRemoved(e,1);var t=this._array.pop();return this.itemsWereRemoved(e,1),this.itemsDidChange(),t},encodedSetIndex:function(e,t){var n=this.length;if(e<n)e<0&&(e=n+e)<0&&(e=0),this.itemsWillChange(),this.itemsWillBeRemoved(e,1),this.itemsWillBeInserted(e,1),this._array[e]=t,this.itemsWereRemoved(e,1),this.itemsWereInserted(e,1),this.itemsDidChange();else{var i=n,r=e-i+1;this.itemsWillChange(),this.itemsWillBeInserted(i,r),this._array[e]=t,this.itemsWereInserted(i,r),this.itemsDidChange()}return this},encodedShift:function(){this.itemsWillChange(),this.itemsWillBeRemoved(0,1);var e=this._array.shift();return this.itemsWereRemoved(0,1),this.itemsDidChange(),e},encodedUnshift:function(){var e,t=arguments.length;if(0===t)return this.length;this.itemsWillChange(),this.itemsWillBeInserted(0,t);var n=(e=this._array).unshift.apply(e,arguments);return this.itemsWereInserted(0,t),this.itemsDidChange(),n},dispose:function(){this.__s._$2RU$dispose.call(this),this._array=null},__superMap:{_$dh$init:"init",_$2RU$dispose:"dispose"}});function f(){return this._array&&this._array.length||0}var g=[]},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(40),r=n(15),a=i.a.extend({staticMembers:{getZoneIdString:function(e){return e.ownerRecordName+":"+e.zoneName},getFromZonePK:function(e){var t=e.split(":");return{ownerRecordName:t[0],zoneName:t[1]}},getOwnerRecordNameFromZoneIdString:function(e){var t=e.indexOf(":");return e.substring(0,t)},getZoneNameFromFromZoneIdString:function(e){var t=e.indexOf(":");return e.substring(t+1)},isSameZoneID:function(e,t){return e.ownerRecordName===t.ownerRecordName&&e.zoneName===t.zoneName},__QUALIFIED_CLASS_NAME__:"ZoneID"},ownerRecordName:r.d(),zoneName:r.d("_defaultZone")})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o}));var i={"com.adobe.pdf":[["pdf"],["application/pdf"]],"com.compuserve.gif":[["gif"],["image/gif"]],"com.microsoft.bmp":[["bmp"],["image/bmp"]],"com.microsoft.ico":[["ico"],["image/vnd.microsoft.icon"]],"org.oasis-open.opendocument.image":[["odi"],["application/vnd.oasis.opendocument.image"]],"org.oasis-open.opendocument.image-template":[["oti"],["application/vnd.oasis.opendocument.image-template"]],"com.apple.garageband.project":[["band","gbProj"],[]],"com.adobe.photoshop-image":[["psd"],["image/photoshop","image/x-photoshop","image/psd","application/photoshop","image/vnd.adobe.photoshop"]],"com.adobe.illustrator.ai-image":[["ai"],[]],"com.truevision.tga-image":[["tga"],["image/targa","image/tga","application/tga"]],"com.sgi.sgi-image":[["sgi"],["image/sgi"]],"com.ilm.openexr-image":[["exr"],[]],"com.kodak.flashpix-image":[["fpx"],["image/fpx","application/vnd.fpx"]],"public.heif":[["heif"],["image/heif"]],"public.heic":[["heic"],["image/heic"]],"public.avci":[["avci"],["image/avci"]],"com.j2.efx-fax":[["efx"],["image/efax"]],"com.digidesign.sd2-audio":[["sd2"],[]],"com.microsoft.waveform-audio":[["wav","wave","bwf"],["audio/wav","audio/wave","audio/x-wav","audio/vnd.wave"]],"com.microsoft.advanced-systems-format":[["asf"],["video/x-ms-asf"]],"com.microsoft.windows-media-wm":[["wm"],["video/x-ms-wm"]],"com.microsoft.windows-media-wmv":[["wmv"],["video/x-ms-wmv"]],"com.microsoft.windows-media-wmp":[["wmp"],["video/x-ms-wmp"]],"com.microsoft.windows-media-wma":[["wma"],["video/x-ms-wma"]],"com.microsoft.advanced-stream-redirector":[["asx"],["video/x-ms-asx"]],"com.microsoft.windows-media-wmx":[["wmx"],["video/x-ms-wmx"]],"com.microsoft.windows-media-wvx":[["wvx"],["video/x-ms-wvx"]],"com.microsoft.windows-media-wax":[["wax"],["video/x-ms-wax"]],"com.real.realaudio":[["ram","ra"],["audio/x-pn-realaudio","audio/x-realaudio","audio/vnd.rn-realaudio"]],"com.soundblaster.soundfont":[["sf2"],[]],"org.xiph.flac":[["flac"],["audio/flac"]],"com.avid.open-media-framework":[["omf"],[]],"com.adobe.flash.video":[["flv","f4v","f4p","f4a","f4b"],["video/x-flv"]],"org.khronos.collada.digital-asset-exchange":[["dae"],[]],"com.adobe.raw-image":[["dng"],["image/x-adobe-dng"]],"com.dxo.raw-image":[["dxo"],["image/x-dxo-dxo"]],"com.canon.crw-raw-image":[["crw"],["image/x-canon-crw"]],"com.canon.cr2-raw-image":[["cr2"],[]],"com.epson.raw-image":[["erf"],["image/x-epson-erf"]],"com.fuji.raw-image":[["raf"],[]],"com.hasselblad.fff-raw-image":[["fff"],[]],"com.hasselblad.3fr-raw-image":[["3fr"],[]],"com.kodak.raw-image":[["dcr"],[]],"com.konicaminolta.raw-image":[["mrw"],[]],"com.leafamerica.raw-image":[["mos"],[]],"com.leica.pwl-raw-image":[["pwl"],["image/x-leica-pwl"]],"com.nikon.raw-image":[["nef"],[]],"com.nikon.nrw-raw-image":[["nrw"],["image/x-nikon-nrw"]],"com.olympus.raw-image":[["orf"],[]],"com.panasonic.raw-image":[["raw"],[]],"com.panasonic.rw2-raw-image":[["rw2"],[]],"com.leica.raw-image":[["raw"],[]],"com.samsung.raw-image":[["srw"],[]],"com.leica.rwl-raw-image":[["rwl"],[]],"com.pentax.raw-image":[["pef"],[]],"com.sony.raw-image":[["srf"],[]],"com.sony.arw-raw-image":[["arw"],[]],"com.sony.sr2-raw-image":[["sr2"],["image/x-sony-sr2"]],"com.olympus.sr-raw-image":[["orf"],["image/x-olympus-sr"]],"com.olympus.or-raw-image":[["orf"],["image/x-olympus-or"]],"com.phaseone.raw-image":[["iiq"],[]],"com.apple.finder.pictclipping":[["pictclipping"],[]],"public.jpeg":[["jpeg","jpg","jpe"],["image/jpeg","image/jpg"]],"public.jpeg-2000":[["jp2","jpf","jpx","j2k","j2c"],["image/jp2"]],"public.tiff":[["tiff","tif"],["image/tiff"]],"com.apple.pict":[["pict","pct","pic"],["image/pict","image/x-pict","image/x-macpict"]],"com.apple.macpaint-image":[["pntg"],[]],"public.png":[["png"],["image/png"]],"public.svg-image":[["svg","svgz"],["image/svg+xml"]],"com.apple.quicktime-image":[["qtif","qti"],["image/x-quicktime"]],"com.apple.icns":[["icns"],[]],"public.xbitmap-image":[["xbm"],["image/x-xbitmap"]],"public.mpo-image":[["mpo"],[]],"ca.mcgill.mni.bic.mnc":[["mnc","minc"],[]],"com.apple.quicktime-movie":[["mov","qt"],["video/quicktime"]],"public.mpeg":[["mpg","mpeg","mpe","m75","m15"],["video/mpeg","video/mpg","video/x-mpeg","video/x-mpg"]],"public.mpeg-2-video":[["m2v"],["video/mpeg2","video/mpeg2-video"]],"public.mpeg-4":[["mp4","mpg4"],["video/mp4","video/mp4v-es"]],"com.apple.m4v-video":[["m4v"],["video/x-m4v"]],"public.dv-movie":[["dv","dif"],["video/x-dv"]],"public.avi":[["avi","vfw"],["video/avi","video/msvideo","video/x-msvideo"]],"public.3gpp":[["3gp","3gpp","sdv"],["video/3gpp","audio/3gpp"]],"public.3gpp2":[["3g2","3gp2"],["video/3gpp2","audio/3gpp2"]],"public.flc-animation":[["flc","fli","cel"],["video/flc"]],"public.avchd-collection":[["avchd"],[]],"com.apple.audio-unit-preset":[["aupreset"],[]],"public.mp2":[["mp2"],[]],"public.mp3":[["mp3","mpga"],["audio/mpeg","audio/mpeg3","audio/mpg","audio/mp3","audio/x-mpeg","audio/x-mpeg3","audio/x-mpg","audio/x-mp3"]],"public.m3u-playlist":[["m3u","m3u8"],["audio/mpegurl","audio/x-mpegurl","application/vnd.apple.mpegurl"]],"public.pls-playlist":[["pls"],["audio/x-scpls"]],"public.mpeg-4-audio":[["mp4","mpg4"],["audio/mp4","audio/mp4a-latm"]],"com.apple.m4a-audio":[["m4a"],["audio/x-m4a"]],"com.apple.mpeg-4-ringtone":[["m4r"],["audio/x-m4r"]],"com.apple.protected-mpeg-4-audio":[["m4p","m4b"],[]],"public.ulaw-audio":[["ul","ulw","ulaw"],[]],"public.au-audio":[["au","snd"],["audio/basic"]],"public.aifc-audio":[["aifc","aiff","aif","cdda"],["audio/aiff","audio/x-aiff"]],"public.aiff-audio":[["aiff","aif"],["audio/aiff","audio/x-aiff"]],"public.midi-audio":[["midi","mid","smf","kar"],["audio/midi","audio/x-midi"]],"public.downloadable-sound":[["dls"],["audio/dls"]],"com.apple.coreaudio-format":[["caf"],[]],"public.ac3-audio":[["ac3"],["audio/ac3"]],"public.enhanced-ac3-audio":[["eac3","ec3"],["audio/eac3"]],"org.3gpp.adaptive-multi-rate-audio":[["amr"],["audio/amr"]],"public.aac-audio":[["aac","adts"],["audio/aac","audio/x-aac"]],"com.apple.itunes.audible":[["aa","aax"],["audio/audible","audio/x-pn-audibleaudio","audio/x-audible"]],"com.apple.localized-pdf-bundle":[["lpdf"],[]]},r=function(){var e=Object.create(null);for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t][1][0];n&&(e[t]=n)}return e}(),a=function(){var e=Object.create(null);for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t][0][0];n&&(e[t]=n)}return e}(),s=function(){var e=Object.create(null);for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[r[t]]=a[t]);return e}();function o(e){return r[e]||"application/octet-stream"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i,r=n(98),a=n(208),s=n(221),o=["then","catch","finally"],l=r.a.extend(i={staticMembers:{mixinWasApplied:function(e){if(e===i)for(var t,n=0;t=o[n];n++)this.prototype[t]=c(this.prototype[t])}}},{staticMembers:{__QUALIFIED_CLASS_NAME__:"Promise"}});function c(e){return function(){return e.apply(this,d(arguments,u,h))}}function u(e){return Object(a.a)(e)?Object(s.a)(e):e}function d(e,t,n){var i=e.length;n.length!==i&&(n.length=i);for(var r=0;r<i;r++)n[r]=t(e[r],r);return n}var h=[]},function(e,t,n){var i=n(244),r=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):a(n,t)}},function(e,t,n){var i=n(218);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(134),r=n(272),a=n(163),s=i("unscopables"),o=Array.prototype;void 0==o[s]&&a.f(o,s,{configurable:!0,value:r(null)}),e.exports=function(e){o[s][e]=!0}},function(e,t,n){var i=n(129),r=n(607);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(a){}return function(n,a){return i(n),r(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(129),r=n(499),a=n(146),s=n(290),o=n(371),l=n(605),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,u,d){var h,p,f,g,m,_,v,b=s(t,n,u?2:1);if(d)h=e;else{if("function"!=typeof(p=o(e)))throw TypeError("Target is not iterable");if(r(p)){for(f=0,g=a(e.length);g>f;f++)if((m=u?b(i(v=e[f])[0],v[1]):b(e[f]))&&m instanceof c)return m;return new c(!1)}h=p.call(e)}for(_=h.next;!(v=_.call(h)).done;)if("object"==typeof(m=l(h,b,v.value,u))&&m&&m instanceof c)return m;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){return e.call(this,t,n)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._initialize=function(){this._onClick=this._onClick.bind(this)},a._addViewListeners=function(){this._initialize(),this._view.on("click",this._onClick)},a._onClick=function(e){},a.destroy=function(){this._view.off("click",this._onClick)},r}(n(378));e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return O}));var i=n(13),r=n(17),a=n(282),s=n(253),o=n(351),l=n(7),c=[],u=[],d=[],h=[],p=[],f=[],g=[],m=0,_=[],v=0;function b(){var e;return e=v>0?_[--v]:m++,c[e]=r.a.NULL_INDEX,u[e]=void 0,h[e]=void 0,d[e]=r.a.NULL_INDEX,p[e]=r.a.NULL_INDEX,f[e]=r.a.NULL_INDEX,g[e]=r.a.NULL_INDEX,e}var y=o.a.extend({staticMembers:{init:function(){var e=this,t=arguments;e.__s._$1wK$init.apply(e,t),this.managers={}},instanceFor:function(e,t){var n=this.managers[t];return n||(n=this.managers[t]=this.create(e,t)),n},__superMap:{_$1wK$init:"init"},__QUALIFIED_CLASS_NAME__:"ChainedLookupNodeManager"},type:"ChainedLookupNodeManager",lookupID:"",init:function(e,t){this.__s._$2LQ$init.call(this),this.lookupID=this.type+": "+t,this.key=e,this.lookupPath=t},setUpForObject:function(e,t,n){var i=t.downstreamNodes,a=this.lookupID,s=r.a._sanitizeNodeID(i[a]);if(s<0){i[a]=s=t.allocNode(this,r.a.PULL_ON_FLUSH|r.a.FREE);var o=b();c[o]=n,r.a.addChildToNode(s,n,!0),r.a.setDataForNode(o,s)}return s},calculateValueForNode:function(e,t,n){var i=r.a.getDataForNode(t),a=h[r.a.getValueForNode(c[i])];r.a.getParentIDs(t,I);var s=I[1];if(a!==u[i]){if(s>=0&&r.a.removeChildFromNode(t,s),s=r.a.NULL_INDEX,a){var o=this.key,l=a.downstreamNodes;l&&(s=r.a._sanitizeNodeID(l[o])),s>=0?r.a.addChildToNode(t,s,!1):T(this.key,this.lookupPath,a)}u[i]=a}return h[i]=s>0?r.a.getValueForNode(s):void 0,i},nodeWillFree:function(e,t){var n;n=r.a.getDataForNode(t),c[n]=r.a.NULL_INDEX,d[n]=r.a.NULL_INDEX,u[n]=void 0,h[n]=void 0,p[n]=r.a.NULL_INDEX,f[n]=r.a.NULL_INDEX,g[n]=r.a.NULL_INDEX,_[v++]=n},addDebugInfoForNode:function(e,t,n){t.type=this.type,t.object=e,t.key=this.lookupID,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},__superMap:{_$2LQ$init:"init"}}),w=y.extend({staticMembers:{instanceFor:function(e){var t=this.managers[e];return t||(t=this.managers[e]=this.create(e)),t},__QUALIFIED_CLASS_NAME__:"ChainedLookupRootNodeManager"},type:"ChainedLookupRootNodeManager",init:function(e){this.__s._$4NT$init.call(this,e,e)},setUpForObject:function(e,t){var n,a=t.downstreamNodes,s=this.lookupID,o=r.a._sanitizeNodeID(a[s]);if(o<0){(n=r.a._sanitizeNodeID(a[this.key]))<0&&Object(i.b)("Chained binding could not look up key on object (key: "+this.key+", object: "+t+").",{key:this.key,object:t}),a[s]=o=t.allocNode(this,r.a.PULL_ON_FLUSH|r.a.FREE);var l=b();r.a.setDataForNode(l,o),u[l]=t,r.a.addChildToNode(o,n,!0)}return o},calculateValueForNode:function(e,t,n){var i=r.a.getDataForNode(t);r.a.getParentIDs(t,I);var a=I[0],s=r.a.getValueForNode(a);return h[i]=s,i},__superMap:{_$4NT$init:"init"}}),I=[0,0],S=[0],C=o.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=r.a.getDataForNode(t),a=g[i];r.a.getValueForNode(a),r.a.getParentIDs(t,I);var s,o=I[1];return r.a._sanitizeNodeID(o)>0&&(s=r.a.getValueForNode(o)),s}return r.a.getStateDataForNode(t)},isCacheable:!1,addDebugInfoForNode:function(e,t,n){t.type="ChainedLookupProxyNode (downstream)",t.object=e,t.key="[downstream proxy]",t.toString=function(){return this.object+"[downstream proxy]"},t.name=t.toString()},validateDescendantDownstreamNodeManager:function(e,t,n){r.a.getParentIDs(n,I);var i=I[1];i!==r.a.NULL_INDEX&&r.a.getManagerForNode(i).validateDescendantDownstreamNodeManager(e,t,i)},didAddParentToNode:function(e,t,n,i){if(1!==i){r.a.getChildrenIDs(t,S);var s=S[0];if(s!==r.a.NULL_INDEX){var o=r.a.getManagerForNode(s);o.isDependentComputedProperty||o.instanceOf(a.a)&&r.a.getManagerForNode(n).validateDescendantDownstreamNodeManager(o,s,n)}}}}).create(),E=s.b.extend({calculateValueForNode:function(e,t,n){var i=r.a.getDataForNode(t);r.a.getChildrenIDs(t,S);var a,o=S[0];if(!r.a.isValidNodeID(o))return i;if(n){var l=r.a.getStateIDForNode(t);a=this.pullDataFromParent(t,l)}else a=r.a.getStateDataForNode(t);return a!==s.a&&r.a.passValueToNode(a,o),i},addDebugInfoForNode:function(e,t,n){t.type="ChainedLookupProxyNode (upstream)",t.object=e,t.key="[upstream proxy]",t.toString=function(){return this.object+"[upstream proxy]"},t.name=t.toString()}}).create(),A=y.extend({type:"ChainedLookupTerminalNodeManager",connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){r.a.addChildToNode(e,t,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){r.a.addChildToNode(e,t,!1)},disconnectProxyNodeFromLookupUpNodes:function(e,t){r.a.removeChildFromNode(e,t)},getDownstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,i=r.a._sanitizeNodeID(t[n]),a=r.a.getDataForNode(i);return p[a]},getUpstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,i=r.a._sanitizeNodeID(t[n]),a=r.a.getDataForNode(i);return f[a]},setUpForObject:function(e,t,n,i){var a,s,o,l=t.downstreamNodes,u=this.lookupID,d=r.a._sanitizeNodeID(l[u]);return d<=0&&(l[u]=d=t.allocNode(this,r.a.PULL_ON_FLUSH|r.a.FREE|r.a.RELATIONSHIPS),a=b(),r.a.setDataForNode(a,d),g[a]=d,c[a]=n,s=t.allocNode(C,r.a.RELATIONSHIPS),l["Downstream Proxy for "+u]=s,p[a]=s,r.a.setDataForNode(a,s),r.a.addChildToNode(s,d,!1),o=t.allocNode(E,r.a.RELATIONSHIPS),t.upstreamNodes["Upstream Proxy for "+u]=o,f[a]=o,r.a.setDataForNode(a,o),this._shouldFlushUpstream=!!i,r.a.addChildToNode(d,n,!0)),d},getPreviouslyProxiedDownstreamNode:function(e){return r.a.getParentIDs(e,I),I[1]},calculateValueForNode:function(e,t,n){var i=r.a.getDataForNode(t),a=h[r.a.getValueForNode(c[i])],s=u[i];if(a!==s){u[i]=a;var o=this.key,l=f[i],g=p[i],m=this.getPreviouslyProxiedDownstreamNode(g),_=d[i];if(s&&(d[i]=r.a.NULL_INDEX,this.disconnectFromPreviousProperty(s,o,_,m,l,g)),a){var v,b,y=a.downstreamNodes;y&&(v=r.a._sanitizeNodeID(y[o])),(y=a.upstreamNodes)&&(b=r.a._sanitizeNodeID(y[o])),this.hookUpToNewProperty(a,o,b,v,l,g),d[i]=b}}return this._shouldFlushUpstream=!1,i},disconnectFromPreviousProperty:function(e,t,n,i,r,a){a>=0&&i>=0&&this.disconnectProxyNodeFromLookupUpNodes(a,i),r>=0&&n>=0&&this.disconnectProxyNodeFromLookupUpNodes(n,r)},hookUpToNewProperty:function(e,t,n,i,r,a){i>0?(n>0&&this.connectUpstreamProxyNodeToLookedUpNodes(n,r,this._shouldFlushUpstream),this.connectDownstreamProxyNodeToLookedUpNodes(a,i)):T(this.key,this.lookupPath,e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChainedLookupTerminalNodeManager"}}),O=A.extend({init:function(e,t){t+="Downstream",this.__s._$B5c$init.call(this,e,t)},connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){r.a.addChildToNode(t,e,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){r.a.addChildToNode(t,e,!0)},getPreviouslyProxiedDownstreamNode:function(e){return r.a.getChildrenIDs(e,S),S[0]},disconnectProxyNodeFromLookupUpNodes:function(e,t){r.a.removeChildFromNode(t,e)},disconnectFromPreviousProperty:function(e,t){e.isDisposed||e.unbind(t)},hookUpToNewProperty:function(e,t,n,i,a,s){var o=this,c=arguments,u=e.getMetadataByType(l.a)[t];u||T(this.key,this.lookupPath,e),u._disconnectNodes(i,n),u._configurePropertyAsBound(i,n),o.__s._$Bmt$hookUpToNewProperty.apply(o,c),r.a.triggerFlush()},nodeWillFree:function(e,t){var n=this.key,i=r.a.getDataForNode(t),a=u[i];a&&!a.isDisposed&&a.unbind(n),this.__s._$Bz3$nodeWillFree.call(this,e,t)},__superMap:{_$B5c$init:"init",_$Bmt$hookUpToNewProperty:"hookUpToNewProperty",_$Bz3$nodeWillFree:"nodeWillFree"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamChainedLookupTerminalNodeManager"}});function T(e,t,n){var r;r=n&&n.constructor?"an instance of "+n.constructor.toString():n?n+"":"a missing object ("+n+")",Object(i.b)("Attempted to bind or observe a non-observable property: '"+e+"' on "+r+", via path '"+t+"'.",{key:e,lookupPath:t,object:n})}},function(e,t,n){"use strict";n(0),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var i=n(120),r=n(353),a=n(284),s=n(247),o=n(219),l=n(193),c=a.a.extend({nodeType:"ELEMENT",register:function(e,t,n){if(!n){var i=t.name;i&&Object(o.b)(e,i,t)}var r,a,s=t.classes;if(s){var l=s.length;for(a=0;a<l;a++)e.registerOutletAndSubOutlets(s[a],t)}var c=t.styles;if(c)for(r in c)e.registerOutletAndSubOutlets(c[r],t);var u=t.attributes;if(u)for(r in u){var d=u[r];e.registerOutletAndSubOutlets(d,t)}var h=t.children;if(h){var p=h.length;for(a=0;a<p;a++){var f=h[a];f.index=a,e.registerOutletAndSubOutlets(f,t)}}},render:function(e,t,n){var r,a,s=n.namespace,o=n.tagname,c=s?t.createElementNS(s,o):t.createElement(o),u=n.classes;if(u){var d=c.classList,h=u.length;for(a=0;a<h;a++){var p=e.renderNodeAndSubNodes(u[a],t);p&&d.add(p)}}var f=n.styles;if(f)for(r in f)Object(l.c)(c,r,e.renderNodeAndSubNodes(f[r],t));var g=n.attributes;if(g)for(r in g){var m,_=g[r];(m=Object(i.a)(_)?_.namespace:null)?c.setAttributeNS(m,r,e.renderNodeAndSubNodes(_,t)):c.setAttribute(r,e.renderNodeAndSubNodes(_,t))}var v=n.children;if(v){var b=v.length;for(a=0;a<b;a++){var y=v[a];y.index=a,c.appendChild(e.renderNodeAndSubNodes(y,t))}}return c},staticMembers:{__QUALIFIED_CLASS_NAME__:"_ElementHandler"}}),u={mixinDependencies:[s.a,r.a],staticMembers:{handler:c.create()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(143);function r(e){return a(e.constructor)||a(e)||"<object>"}function a(e){var t=e.__QUALIFIED_CLASS_NAME__;if(t)return e.hasOwnProperty("__QUALIFIED_CLASS_NAME__")||(e.isClass&&!e.isInitialized?t+="(Uninitialized subclass "+Object(i.b)(e)+")":t+="(Anonymous subclass "+Object(i.b)(e)+")"),t}},function(e,t,n){"use strict";function i(e){return!!Array.isArray(e)||!!e&&"[object Arguments]"===Object.prototype.toString.call(e)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(77),r=n(55),a=n(20),s=n(82),o=n(13),l=n(454),c=n(391),u=n(542),d=n(352),h={mixinDependencies:[a.b,i.b,u.a],init:function(){var e=this,t=this,n=arguments;t.__s._$11h$init.apply(t,n);var i=this.gestureRecognizers;i&&(i instanceof Set||(this.gestureRecognizers=new Set(i)),this.gestureRecognizers.forEach((function(t){t.retain(e,"ResponderSupport#gestureRecognizers"),t.view=e})))},handleEvent:function(e){if(this.isDisposed)return!1;for(var t=!1,n=this[e],i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];if(n&&(t=n.call.apply(n,[this].concat(r))),!t){var s=this._specialEventHandlers;if(s){var o=s[e];o&&(t=o.call.apply(o,[this].concat(r)))}}return t},handleGestureRecognition:function(e){var t=this.gestureRecognizers;if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return d.a.addGestureRecognizersWithEvent.apply(d.a,[e].concat(i,[t]))}return!1},gestureRecognizers:null,addGestureRecognizer:function(e){e.retain(this,"ResponderSupport#gestureRecognizers");var t=this.gestureRecognizers;if(t||(this.gestureRecognizers=t=new Set),t.has(e))throw new Error("ResponderSupport: attempted to register the same gesture recognizer twice.");e.view=this,t.add(e)},removeGestureRecognizer:function(e){var t=this.gestureRecognizers;if(!t||!t.has(e))throw new Error("ResponderSupport: attempted to deregister a gesture recognizer that was never registered.");d.a.cancelGestureRecognizer(e),t.delete(e),e.release(this,"ResponderSupport#gestureRecognizers")},_registeredShortcuts:Object(r.c)(Object),registerShortcutKeyCombo:function(e,t,n){var i=(Object(s.a)(e,c.a)?e:c.a.create(e)).toString(),r=this._registeredShortcuts;r[i]&&Object(o.b)("Shortcut already registered for `"+e+"` on "+this),t||Object(o.b)("Cannot register shortcut for `"+e+"`, because no action was provided");var a=typeof t;"function"!==a&&("string"===a?"function"!==typeof(t=this[t])&&Object(o.b)("Cannot register shortcut for `"+e+"`, because the action is not a function"):Object(o.b)("Cannot register shortcut for `"+e+"`, because the action is not a function")),r[i]={action:t,context:n},(this._specialEventHandlers||(this._specialEventHandlers={})).keyDown=this.triggerShortcutIfExists},triggerShortcutIfExists:function(e){var t=l.a.sharedInstance,n=this._registeredShortcuts,i=t.activeKeys.toString(),r=t.activeKeySequence,a=r.toString(),s=n[i]||n[a];return!!s&&(n[a]&&r.clear(),s.action.call(this,s.context),!0)},pointerOver:null,pointerDown:null,pointerMove:null,pointerUp:null,pointerOut:null,pointerEnter:null,pointerLeave:null,wheel:null,__superMap:{_$11h$init:"init"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(299),r=n(195);function a(e){if(!e)return!0;if(Object(i.a)(e)||Object(r.a)(e))return!e.length;if(e._isCwCollection)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return _}));var i=n(123),r=n(20),a=n(15),s=n(55),o=n(321),l=n(161),c=n(238),u=n(74),d=n(7),h=n(13),p=n(203),f=n(25),g=n(324),m={mixinDependencies:[i.a,r.b],staticMembers:{initialPollingDelay:2e3,numberOfPollsBetweenDelayDoublings:3,currentPollingDelay:a.d({readOnly:!0,get:function(){return this._currentPollingDelay||this.initialPollingDelay}}),getPollingDelayAfterPollCount:function(e){return this.initialPollingDelay*Math.pow(2,e/this.numberOfPollsBetweenDelayDoublings)},_pollingTimer:a.d(s.c(o.a.extend({action:"_pollPollingInstances",getDelayAfterFireCount:function(e){var t=this.owner,n=t.getPollingDelayAfterPollCount(e);return t._currentPollingDelay=n,n}}))),_resetPollingTimerIfAppropriate:Object(p.b)((function(){var e=this._pollingTimer,t=this._currentlyPollingInstances.size>0;(!t||e.fireCount>0)&&e.stop(),t&&e.start(),this._toggleEventListenersToPollingTimer()})),_currentlyPollingInstances:a.d((function(){return new g.b("being polled in PollableSupport")})),_toggleEventListenersToPollingTimer:function(){var e=this._pollingTimer.isRunning;if(this._hasPollingResetEventListeners!==(this._hasPollingResetEventListeners=e)){var t=e?l.a:c.a;t(document,"pointerdown",this._resetPollingTimerIfAppropriate),t(document,"mousemove",this._resetPollingTimerIfAppropriate),t(document,"keypress",this._resetPollingTimerIfAppropriate),t(document,"touchstart",this._resetPollingTimerIfAppropriate)}},_addPollingInstance:function(e){this._currentlyPollingInstances.add(e),this._resetPollingTimerIfAppropriate()},_removePollingInstance:function(e){this._currentlyPollingInstances.remove(e),this._resetPollingTimerIfAppropriate()},_pollPollingInstances:function(){this.pollInstances(f.arrayPool.getAutodisposingInstanceFromSlice(this._currentlyPollingInstances.items))},pollInstances:u.a.define()},isPolling:d.b({readOnly:!0,dependencies:["_beginPollingCount"],get:Object.assign((function(){return this._beginPollingCount>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}}),didChange:function(e){this.isPollingNonObservable=e}}),isPollingNonObservable:void 0,beginPolling:function(){var e=Boolean(this._beginPollingCount);this._beginPollingCount++,e||this.constructor._addPollingInstance(this)},endPolling:function(){if(this._beginPollingCount--,this._beginPollingCount<0)throw new h.a("PollableSupport#endPolling called more times than beginPolling was called.");this._beginPollingCount||this.constructor._removePollingInstance(this)},_beginPollingCount:d.b(0),cleanup:function(){var e=this,t=arguments;this.isPolling&&h.b("PollableSupport-mixing object is being released for the final time while still polling."),e.__s._$2Iu$cleanup.apply(e,t)},__superMap:{_$2Iu$cleanup:"cleanup"}},_={mixinDependencies:[m],staticMembers:{init:function(){var e=this,t=arguments;e.__s._$2NR$init.apply(e,t)},pollInstances:function(e){this.load(e.map((function(e){return e.getPrimaryKey()})),!0)},__superMap:{_$2NR$init:"init"}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={MarkerSegments:{SOI:65496,APP0:65504,APP1:65505,APP2:65506,DQT:65499,DHT:65476,DRI:65501,SOF:65472,SOS:65498,EOI:65497},Tiff:{34665:"ExifOffset",34853:"GPSOffset",40965:"InteroperabilityOffset",274:"Orientation",271:"Make",272:"Model",305:"Software",256:"ImageWidth",257:"ImageLength",270:"ImageDescription"},Exif:{40962:"PixelXDimension",40963:"PixelYDimension",34675:"ICCProfile",40961:"ColorSpace",41987:"WhiteBalance",33437:"FNumber",37383:"MeteringMode",37386:"FocalLength",34855:"ISOSpeedRatings",37377:"ShutterSpeed",33434:"ExposureTime",37380:"ExposureBiasValue",37500:"MakerNote",42036:"LensModel"},GPS:{1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude"},AppleMakerNotes:{10:"HDRImageType",11:"BurstUUID",17:"LivePhotosUUID"}}},function(e,t,n){"use strict";n(1),n(0),n(2),n(11),n.d(t,"a",(function(){return c}));var i=n(207),r=n(482),a=n(65),s=n(167),o=n(809);function l(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var c=i.Record.extend({mixinDependencies:[r.a],staticMembers:{CK_RECORD_TYPE:"CPLLibraryInfo",getRecordNameForZoneNameAndIndexID:function(e,t){return e+"-0000-CI-"+t},getPrimaryKeyFromContainerPK:function(e){var t=a.a.find(e);return this.getPrimaryKeyFromContainer(t)},getPrimaryKeyFromContainer:function(e){var t=e.zone,n=e.recordName,i=e.type,r=a.a.getQueryIndexCountId(n,i),s=this.getRecordNameForZoneNameAndIndexID(t.zoneID.zoneName,r);return this.getPrimaryKeyWithZonePK(t.pk,s)},loadFromContainerPKs:function(e){var t=this;return this.load({primaryKeys:e.map((function(e){return t.getPrimaryKeyFromContainerPK(e)}))})},getRankRangeFromDates:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function i(){var a,s,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.loadFromContainerPKs([e]);case 2:if(!((a=i.sent)&&a.length>0)){i.next=9;break}return s=a.objectAt(0),o=s.cplAssetDistribution,l=r.getRankFromCPLAssetDistribution(o,t,!1),c=r.getRankFromCPLAssetDistribution(o,n,!0),i.abrupt("return",{startRank:l,endRank:c});case 9:case"end":return i.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){l(a,n,r,s,o,"next",e)}function o(e){l(a,n,r,s,o,"throw",e)}s(void 0)}))})()},getRankFromCPLAssetDistribution:function(e,t,n){for(var i=e.buckets,r=0,a=i.length-1;a>=0;a--){var s=i[a],o=s.bucketStart,l=s.count,c=parseInt(l,10);if(o<t){if(n){r+=c;break}break}r+=c}return Math.max(r-1,0)},__QUALIFIED_CLASS_NAME__:"CountInfo"},cplAssetDistribution:Object(s.c)({ProtobufClass:o.a})})},function(e,t,n){var i=n(595),r=n(493).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(251),r=n(163),a=n(271);e.exports=function(e,t,n){var s=i(t);s in e?r.f(e,s,a(0,n)):e[s]=n}},function(e,t,n){var i=n(364),r=n(128),a=n(180),s=n(163).f,o=n(363),l=n(373),c=o("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){s(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},onFreeze:function(e){return l&&p.REQUIRED&&d(e)&&!a(e,c)&&h(e),e}};i[c]=!0},function(e,t,n){"use strict";(function(e){var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function a(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(1220),i.base64=n(1221),i.EventEmitter=n(1222),i.float=n(1223),i.inquire=n(1224),i.utf8=n(1225),i.pool=n(1226),i.LongBits=n(1227),i.global="undefined"!==typeof window&&window||"undefined"!==typeof e&&e||"undefined"!==typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(i.global.process&&i.global.process.versions&&i.global.process.versions.node),i.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"===typeof e||e instanceof String},i.isObject=function(e){return e&&"object"===typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"===typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=a,i.ProtocolError=a("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}}).call(this,n(172))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o}));var i=n(40);function r(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var a={Pointer:"pointer",Touch:"touch",Mouse:"mouse",None:"none"},s=i.a.extend({init:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.window,i=void 0===n?window:n,s=t.navigator,o=void 0===s?navigator:s,l=t.document,c=void 0===l?document:l,u=r(t,["window","navigator","document"]),d=this,h=this.isPointerSupported="PointerEvent"in i,p="createTouch"in c||"Touch"in i;this.isTouchSupported=h?o.maxTouchPoints>0:p,this.isMouseSupported="onmousedown"in c,this.isMouseWheelSupported="onwheel"in c||"onmousewheel"in c,this.isInputSupported=!0,d.__s._$eB$init.call(d,u),e=this.isPointerSupported?a.Pointer:this.isTouchSupported?a.Touch:this.isMouseSupported?a.Mouse:a.None,this.pointerEventClass=e},pointerEventClass:a.None,isPointerSupported:!1,isTouchSupported:!1,isMouseSupported:!1,isMouseWheelSupported:!1,isInputSupported:!1,__superMap:{_$eB$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EventCapabilities"}}),o=s.create()},function(e,t,n){"use strict";n(0),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n(6);var i=n(309),r=n(7),a=n(15),s=n(470),o=n(202).a.extend(s.a,{supportsDragScroll:Object(a.d)(!i.c.get("isTouchSupported")),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"thumb",classes:["cw-scroll-indicator-thumb"]}],name:"track",classes:["cw-scroll-indicator-track"]}],classes:["cw-scroll-indicator"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isShowing",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},className:"cw-ui-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"ScrollIndicatorView"},eventCoordinateKey:null,thumbPositionKey:null,minThumbSize:Object(r.b)(20),minThumbOutsideSize:Object(r.b)(10),overscrollShrinkFactor:Object(r.b)(2),thickness:Object(r.b)({readOnly:!0,dependencies:["thicknessKey","element","isAttached"],get:Object.assign((function(){var e=this.thicknessKey,t=this.element;return e&&t&&this.isAttached?t.getBoundingClientRect()[e]:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a&&i.internalGet(this,t[2+n])?a.getBoundingClientRect()[r]:0}})}),thicknessKey:Object(r.b)(),beginMargin:Object(r.b)(6),endMargin:Object(r.b)(6),totalEndMargin:Object(r.b)({readOnly:!0,dependencies:["inset","endMargin"],get:Object.assign((function(){var e=this.inset;return this.endMargin+e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])+r}})}),size:Object(r.b)({readOnly:!0,dependencies:["scrollSize","beginMargin","totalEndMargin"],get:Object.assign((function(){return this.scrollSize-this.beginMargin-this.totalEndMargin}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),otherScrollIndicator:Object(r.b)(),inset:Object(r.b)({readOnly:!0,dependencies:["otherScrollIndicator.isShowing","otherScrollIndicator.thickness"],get:Object.assign((function(){return this.getPath("otherScrollIndicator.isShowing")?this.getPath("otherScrollIndicator.thickness"):0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):0}})}),scrollMin:Object(r.b)(0),totalSize:Object(r.b)(0),scrollSize:Object(r.b)(0),scrollPosition:Object(r.b)(0),isShowing:Object(r.b)({readOnly:!0,dependencies:["scrollSize","totalSize"],get:Object.assign((function(){return this.scrollSize<this.totalSize&&this.totalSize!==1/0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGet(this,t[1+n])&&i.internalGet(this,t[1+n])!==1/0}})}),relativeScrollPosition:Object(r.b)({dependencies:["scrollMin","scrollPosition"],writeDependencies:["scrollPosition"],get:Object.assign((function(){return this.scrollPosition-this.scrollMin}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])}}),set:Object.assign((function(e){this.scrollPosition=e+this.scrollMin}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e+this.scrollMin}}),writeDependencySetPathMap:[!1]}),scrollProportion:Object(r.b)({readOnly:!0,dependencies:["scrollSize","totalSize"],get:Object.assign((function(){return this.scrollSize/this.totalSize}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),minThumbProportion:Object(r.b)({readOnly:!0,dependencies:["size","minThumbSize"],get:Object.assign((function(){return this.minThumbSize/this.size}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n])}})}),minThumbOutsideProportion:Object(r.b)({readOnly:!0,dependencies:["size","minThumbOutsideSize"],get:Object.assign((function(){return this.minThumbOutsideSize/this.size}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n])}})}),thumbProportion:Object(r.b)({readOnly:!0,dependencies:["scrollProportion","minThumbProportion"],get:Object.assign((function(){return Math.max(this.scrollProportion,this.minThumbProportion)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),sizeAdjustment:Object(r.b)({readOnly:!0,dependencies:["scrollProportion","thumbProportion"],get:Object.assign((function(){return(1-this.scrollProportion)/(1-this.thumbProportion)}),{__CW__getter:function(e,t,n,i){return(1-i.internalGet(this,t[0+n]))/(1-i.internalGet(this,t[1+n]))}})}),adjustedSize:Object(r.b)({readOnly:!0,dependencies:["totalSize","sizeAdjustment"],get:Object.assign((function(){return this.totalSize*this.sizeAdjustment}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),thumbSize:Object(r.b)({readOnly:!0,dependencies:["thumbProportion","relativeScrollPosition","minThumbOutsideProportion","scrollProportion","overscrollShrinkFactor","totalSize","scrollSize","adjustedSize"],get:Object.assign((function(){var e=this.relativeScrollPosition;if(e<0){var t=-e/this.adjustedSize;return 100*Math.max(this.minThumbOutsideProportion,this.scrollProportion-this.overscrollShrinkFactor*t)}var n=this.totalSize-this.scrollSize;if(e>n){var i=(e-n)/this.adjustedSize;return 100*Math.max(this.minThumbOutsideProportion,this.scrollProportion-this.overscrollShrinkFactor*i)}return 100*this.thumbProportion}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(r<0){var a=-r/i.internalGet(this,t[7+n]);return 100*Math.max(i.internalGet(this,t[2+n]),i.internalGet(this,t[3+n])-i.internalGet(this,t[4+n])*a)}var s=i.internalGet(this,t[5+n])-i.internalGet(this,t[6+n]);if(r>s){var o=(r-s)/i.internalGet(this,t[7+n]);return 100*Math.max(i.internalGet(this,t[2+n]),i.internalGet(this,t[3+n])-i.internalGet(this,t[4+n])*o)}return 100*i.internalGet(this,t[0+n])}})}),thumbPosition:Object(r.b)({readOnly:!0,dependencies:["adjustedSize","relativeScrollPosition","scrollSize","totalSize","thumbSize"],get:Object.assign((function(){var e=this.relativeScrollPosition;return e<0?0:e>this.totalSize-this.scrollSize?100-this.thumbSize:e/this.adjustedSize*100}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r<0?0:r>i.internalGet(this,t[3+n])-i.internalGet(this,t[2+n])?100-i.internalGet(this,t[4+n]):r/i.internalGet(this,t[0+n])*100}})}),_dragPointerId:null,_dragStartPixel:null,_dragStartThumbPosition:null,pointerUp:function(e){var t=this,n=arguments;if(!this.get("supportsDragScroll"))return!1;t.__s._$3Nz$pointerUp.apply(t,n);var i=e.pointerId;return this._dragPointerId===i&&(this._dragPointerId=null,this._dragStartPixel=null,this._dragStartThumbPosition=null,!0)},pointerDown:function(e){var t=this,n=arguments;if(!this.get("supportsDragScroll"))return!1;t.__s._$3Tc$pointerDown.apply(t,n);var i=this.get("thumb");if(e.target===i){var r=e.pointerId;this._dragPointerId=r,this._dragStartPixel=e[this.eventCoordinateKey],this._dragStartThumbPosition=this.get("relativeScrollPosition")/this.get("totalSize")}else{var a=i.getBoundingClientRect()[this.thumbPositionKey];e[this.eventCoordinateKey]<a?this.pageUp():this.pageDown()}return!0},pointerMove:function(e){var t=this,n=arguments;if(!this.get("supportsDragScroll"))return!1;if(this._dragPointerId!==e.pointerId)return!1;t.__s._$3k1$pointerMove.apply(t,n);var i=e[this.eventCoordinateKey],r=i-this._dragStartPixel,a=this.get("size");return this.scrollTo(100*(this._dragStartThumbPosition+r/a*this.get("sizeAdjustment"))),!0},__superMap:{_$3Nz$pointerUp:"pointerUp",_$3Tc$pointerDown:"pointerDown",_$3k1$pointerMove:"pointerMove"}}),l=o.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["vertical"]},track:{type:"ELEMENT",tagname:"ext",styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"top"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"bottom"}}},thumb:{type:"ELEMENT",tagname:"ext",styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"top"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"height"}}}},className:"cw-ui-vertical-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"VerticalScrollIndicatorView"},eventCoordinateKey:"clientY",thumbPositionKey:"top",thicknessKey:"width",pageUp:function(){this.get("parent").pageUp()},pageDown:function(){this.get("parent").pageDown()},scrollTo:function(e){this.get("parent").scrollTo(void 0,e)}}),c=o.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["horizontal"]},track:{type:"ELEMENT",tagname:"ext",styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"left"},right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"right"}}},thumb:{type:"ELEMENT",tagname:"ext",styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"left"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"width"}}}},className:"cw-ui-horizontal-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"HorizontalScrollIndicatorView"},eventCoordinateKey:"clientX",thumbPositionKey:"left",thicknessKey:"height",pageUp:function(){this.get("parent").pageLeft()},pageDown:function(){this.get("parent").pageRight()},scrollTo:function(e){this.get("parent").scrollTo(e,void 0)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n(13),r=n(160),a=[4278190080,4294901760,4294967040,4294967280,4294967295],s=[24,16,8,4,0],o=r.a.extend({name:null,value:null,level:null,parent:null,group:null,fullValue:null,fullName:null,hasLevel:!1,retain:function(){return this},release:function(){return this},autorelease:function(){return this},init:function(e){this.__s._$17J$init.call(this,e);var t=this.name,n=this.value,r=this.parent,a=this.level,o=(this.hasLevel="number"===typeof this.level)?n<<s[a]:null;r&&!r.hasLevel&&Object(i.b)(this+" Cannot init. parent does not have an assigned level"),this.items=[],this._flags={},this.fullValue=r?r.fullValue+o:o,this.fullName=r?r.fullName+"."+t:t,this._nextSubitemValue=0},flagAs:function(){for(var e=arguments.length,t=this._flags,n=0;n<e;n++)t[arguments[n]]=!0;return this},flagged:function(e){return!!this._flags[e]},equals:function(e){return this.group===e.group&&e.fullValue===this.fullValue},subitemOf:function(e){return this.level>e.level&&this.group===e.group&&(this.fullValue&a[e.level])===e.fullValue},superitemOf:function(e){return this.level<e.level&&this.group===e.group&&(e.fullValue&a[this.level])===this.fullValue},contains:function(e){return this.equals(e)||e.subitemOf(this)},createSubitem:function(e){return o.create({name:e,value:this._getNextSubitemValue(),parent:this,level:this.level+1,group:this.group})},toString:function(){return this._toString(!1)},toJSON:function(){return""+this},toStringFull:function(){return this._toString(!0)},_toString:function(e){var t=this.group,n=t?t.name:"CW.Enum.Item",i=e||!t?" <"+function(e){var t=e.toString(16).toUpperCase();return t.length%2!==0&&(t="0"+t),t.match(/\d\d/g).join(" ")}(this.fullValue)+">":"";return"["+n+": "+this.fullName+i+"]"},_getNextSubitemValue:function(){return this._nextSubitemValue++,this._nextSubitemValue},__superMap:{_$17J$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumItem"}});function l(e,t){return o.create({name:e,value:t,level:0})}o.prototype.substateOf=o.prototype.subitemOf,o.prototype.superstateOf=o.prototype.superitemOf},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var i=n(82),r=n(51),a=n(139),s=n(20),o=n(7),l=n(78),c=n(300),u={mixinDependencies:[s.b,c.a],defaultFocusChildren:Object(o.b)(),isFocused:Object(o.b)({readOnly:!0,dependencies:["isInFocusedBranch","focusedChild"],get:Object.assign((function(){return this.isInFocusedBranch&&!this.focusedChild}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),descendantHasFocus:Object(o.b)({readOnly:!0,dependencies:["isInFocusedBranch","focusedChild"],get:Object.assign((function(){return this.isInFocusedBranch&&!!this.focusedChild}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!!i.internalGet(this,t[1+n])}})}),isFocusable:Object(o.b)(!1),isFocusablePane:Object(o.b)(!0),shouldFocusPaneOnAttach:Object(o.b)(!0),isFocusedPane:Object(o.b)({readOnly:!0,dependencies:["focusParent.isFocusedLayer"],get:Object.assign((function(){return this.getPath("focusParent.isFocusedLayer")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isInTheFocusedPane:Object(o.b)({readOnly:!0,dependencies:["focusParent.isInTheFocusedPane","isFocusedPane"],get:Object.assign((function(){return!!this.isFocusedPane||!!this.getPath("focusParent.isInTheFocusedPane")}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[1+n])||!!i.internalGetPath(this,t[0+n])}})}),inheritsFocusLayer:Object(o.b)(!1),isInFocusableLayer:Object(o.b)(Object(l.c)("focusParent.isInFocusableLayer")),isInFocusedLayer:Object(o.b)(Object(l.c)("focusParent.isInFocusedLayer")),isInFocusedBranch:Object(o.b)({readOnly:!0,dependencies:["isInFocusedLayer","isFocusedInParent","focusParent.isInFocusedBranch"],get:Object.assign((function(){var e=this.isInFocusedLayer,t=this.isFocusedInParent,n=this.getPath("focusParent.isInFocusedBranch");return e&&t&&n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]);return r&&a&&s}})}),isFocusedInParent:Object(o.b)({dependencies:["focusParent.focusedChild"],readOnly:!0,get:Object.assign((function(){var e=this.getPath("focusParent.focusedChild");return this.isRootViewController||e===this}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.isRootViewController||r===this}})}),focusResponder:Object(o.b)({dependencies:["focusedChild","focusedChild.focusResponder"],readOnly:!0,get:Object.assign((function(){return this.focusedChild&&this.focusedChild.focusResponder||(this.isFocusable?this:null)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n])||(this.isFocusable?this:null)}})}),parent:Object(o.b)(null),focusParent:Object(o.b)({dependencies:["parent"],writeDependencies:[],get:Object.assign((function(e){var t=e||this.parent;return Object(i.a)(t,u)?t:void 0}),{__CW__getter:function(e,t,n,r){var a=e||r.internalGet(this,t[0+n]);return Object(i.a)(a,u)?a:void 0}}),set:function(e){return e}}),focusedChild:Object(o.b)(),_focusInTree:function(){if(this.isInFocusedBranch)return!0;if(!this.isInFocusableLayer)return!1;var e=this.focusParent;return e.focusedChild=this,e._focusInTree()},focus:function(e){if(!this.isInFocusableLayer&&(this.sendEvent("appGainedFocusability"),!this.isInFocusableLayer))return!1;if(!e&&this.isInFocusedBranch)return this.focusAsLeaf();var t=!1;return(t=this.reFocus())||(t=this.focusDefault()),t||(t=this.focusAsLeaf()),t},focusAsLeaf:function(){return!!this.isFocusable&&(this.focusedChild=null,this._focusInTree(),this.sendEvent("appWantsFocus"),this.isFocused)},reFocus:function(){var e=this.focusResponder;return!(!e||e===this)&&e.focus()},focusDefault:function(){var e=this.defaultFocusChildren;if(e)for(var t=0,n=e.length;t<n;t++){var r=e.objectAt(t);if(r&&Object(i.a)(r,u)&&r.focus())return!0}var a=this.defaultFocusChild;return!!a&&a.focus()},_blurInTree:function(){if(!this.isInFocusedBranch)return!0;if(!this.isInFocusableLayer)return!1;var e=this.focusParent;return!e||!this.isFocusedInParent||(e._blurInTree(),e.focusedChild=null,!0)},blur:function(){return!(!this.isInFocusableLayer&&(this.sendEvent("appGainedFocusability"),!this.isInFocusableLayer))&&this._blurInTree()},didFocus:r.a,didBlur:r.a,defaultFocusChild:Object(o.b)(),isFocusedLayer:Object(o.b)({readOnly:!0,defaultValue:!1}),_wasFocused:!1,isFocusedDidChange:Object(s.h)("isFocused",(function(e){e?(this._wasFocused=!0,this.didFocus()):this._wasFocused&&(this._wasFocused=!1,this.didBlur())})),didReceiveFocus:function(e){var t=!1;return null===e.relatedTarget&&(this.sendEvent("appGainedFocusability"),t=!0),this.isInFocusableLayer&&this.isFocusable||this.sendEvent("focusReleasedInApp"),this.isFocused||this.focus(t),!0},didReceiveBlur:function(e){return null!==e.relatedTarget||document.hasFocus()||this.sendEvent("appLostFocus"),!0}},d=null,h=null;function p(){d&&d.focus(),d=null,h=null}var f={mixinDependencies:[u],tabIndex:Object(o.b)(0),_previousDefaultFocusElement:Object(o.b)(),tabIndexObserver:Object(s.h)({inputs:["isFocusable","tabIndex","defaultFocusElement"],callback:function(e,t,n){var i=this._previousDefaultFocusElement;i&&i.removeAttribute("tabIndex"),this._previousDefaultFocusElement=n,n&&(e?n.setAttribute("tabIndex",t):n.removeAttribute("tabIndex"))}}),focusAsLeaf:function(){var e=this,t=arguments,n=e.__s._$4eU$focusAsLeaf.apply(e,t);if(n){var i=this.defaultFocusElement;h||(h=Object(a.a)(p,0)),d=i}return n},blur:function(){var e=this,t=arguments,n=e.__s._$4po$blur.apply(e,t);if(n){var i=this.defaultFocusElement;i&&i.blur()}return n},defaultFocusElement:Object(o.b)({binding:Object(l.c)("element"),readOnly:!0}),didFocus:function(){},__superMap:{_$4eU$focusAsLeaf:"focusAsLeaf",_$4po$blur:"blur"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=/\s/g;function r(e,t){return e.replace(/%\{(.*?)\}/g,(function(n,r){if(!t)throw new Error('Cannot use named parameters with `fmt` without a data object. String: "'+e+'"');return function(e,t,n){var r,a,s,o=(e=e.replace(i,"")).indexOf(":");if(o>-1&&(r=e.substr(o+1),e=e.substr(0,o)),a=t[e],s=t[e+"Formatter"])a=s(a,r);else if(r)throw new Error("fmt() was given a formatting string, but key '"+e+"' has no formatter for the string: \""+n+'"');return a&&a.toString?a.toString():a}(r,t,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(74),a=n(77),s={mixinDependencies:[i.a],clone:Object(a.c)(r.a)}},function(e,t,n){"use strict";function i(e){return null===e||"object"!==typeof e&&"function"!==typeof e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(e){return!(!e||!e.isClass)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(7),r=n(282),a=n(17),s=n(253),o=n(13),l=n(120),c=i.a.extend({staticMembers:{booleanProperty:function(e){return u.create(e)},numberProperty:function(e){return d.create(e)},stringProperty:function(e){return h.create(e)},enumProperty:function(e,t){return p.create(e,t)},__QUALIFIED_CLASS_NAME__:"ConfigProperty"},downstreamNodeManagerClass:r.a.extend({calculateValueForNode:function(e,t,n){if(n){var i=a.a.getStateIDForNode(t);i>0&&a.a.getValueForNode(i)}var r=e._config_debugValues[this.key];return void 0===r&&(r=this.get.call(e)),r},debugType:"Config"}),upstreamNodeManagerClass:s.b.extend({calculateValueForNode:function(e,t,n){var i,r=this.key;if(n){var s=a.a.getStateIDForNode(t);a.a.setStateDataForNode(void 0,t),a.a.getValueForNode(s)}void 0===(i=a.a.getStateDataForNode(t))?delete e._config_debugValues[r]:e._config_debugValues[r]=i},debugType:"Config"}),wasRegistered:function(){var e=this,t=arguments;e.__s._$vb$wasRegistered.apply(e,t),this.readOnly=!1},setInitialValueForObject:function(e,t,n){this.usesBuiltinGet?e._config_defaultValues[t]=n:e._config_defaultValues[t]=void 0},didChange:function(e){this.writeToSessionStorage&&this.writeToSessionStorage()},__superMap:{_$vb$wasRegistered:"wasRegistered"}}),u=c.extend({type:"boolean",configType:"boolean",parse:function(e){return"boolean"===typeof e?e:"true"===e},staticMembers:{__QUALIFIED_CLASS_NAME__:"BooleanConfigProperty"}}),d=c.extend({type:"number",configType:"number",parse:function(e){return e=parseFloat(e),isNaN(e)?void 0:e},staticMembers:{__QUALIFIED_CLASS_NAME__:"NumberConfigProperty"}}),h=c.extend({type:"string",configType:"string",parse:function(e){return e+""},staticMembers:{__QUALIFIED_CLASS_NAME__:"StringConfigProperty"}}),p=c.extend({configType:"enum",allowedValues:null,parse:function(e){if(""!==e){var t=this.allowedValues;if(t.indexOf(e)>-1)return e;Object(o.b)("Not a recognized value in enum: "+e,{value:e,allowedValues:t})}},init:function(e,t){var n=this;1===arguments.length&&Object(l.a)(e)?n.__s._$1ZQ$init.call(n,e):(this.allowedValues=e,n.__s._$1ZQ$init.call(n,t))},__superMap:{_$1ZQ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnumConfigProperty"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(540),r=n(263);function a(e,t,n){if(d){if(c.isExceptionHandlingFatal)return;d=!1}if(u)return e.apply(n,t);if(!c.isExceptionHandlingEnabled)return Object(r.e)(e,n,t);u=!0;try{return Object(r.e)(e,n,t)}catch(s){var a=i.a;a.length>0&&(a.push(s.context),a.reverse(),s.context=a.slice(),a.length=0),c.exceptionHandler(s),c.exceptionWasHandled=!0,c.isExceptionHandlingFatal&&(d=!0)}finally{u=!1}}function s(e){c=e||l}function o(){return c}var l={isExceptionHandlingEnabled:!1},c=l,u=!1,d=!1},function(e,t,n){"use strict";function i(e){for(var t={},n=e.length,i=0;i<n;i++)t[e[i]]=!0;return t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(314),r=n(123),a=n(74),s=n(162),o=n(77),l=n(15),c={done:!1,value:null},u={mixinDependencies:[r.a,i.a],next:function(){return c.value=this.value,c.done=!this.isValid,this.moveToNext(),c},moveToNext:Object(o.c)(a.a),isValid:Object(o.c)(s.a),value:Object(l.d)({get:function(){return this.source.decode(this.encodedValue)},set:function(e){return this.encodedValue=this.source.encode(e),e}}),encodedValue:Object(o.c)(s.a),source:Object(l.d)()};u[Symbol.iterator]=function(){return this}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(40),r=n(15),a=n(139),s=n(20),o=n(556),l=n(78),c=n(7),u=i.a.extend(s.b,o.a,{target:Object(l.c)("owner"),delay:0,timesToFire:1,delays:null,fireCount:0,isRunning:!1,isPaused:!1,timeUntilFire:Object(r.d)({readOnly:!0,get:function(){return this.isRunning?this.isPaused?1/0:this._nextFiringTime-Date.now():NaN}}),start:function(){return this.isRunning||(this.isRunning=!0,this._nextFiringTime=Date.now(),this._scheduleNextFiringOrStop()),this},restart:function(){return this.stop(),this.start(),this},stop:function(){return this.isRunning?(this._handle&&(clearTimeout(this._handle),this._handle=null),this.fireCount=0,this.isRunning=!1,this.isPaused&&(this.isPaused=!1,this._pauseCount=0,this._timeRemainingAtPause=NaN),this):this},pause:function(){return this.isRunning?(this._pauseCount++,1===this._pauseCount&&(this._timeRemainingAtPause=this.get("timeUntilFire"),this.isPaused=!0,this._nextFiringTime=NaN,clearTimeout(this._handle),this._handle=null),this):this},resume:function(){return this.isRunning?(this._pauseCount--,0===this._pauseCount&&(this._nextFiringTime=Date.now()+this._timeRemainingAtPause,this._handle=Object(a.a)(d,Math.max(0,this._timeRemainingAtPause),this),this._timeRemainingAtPause=NaN,this.isPaused=!1),this._pauseCount<0&&(this._pauseCount=0),this):this},fastForward:function(e){return this.isRunning?e<0?this.rewind(-e):(0===e||(e||(e=this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause-=e:(this._nextFiringTime-=e,clearTimeout(this._handle),this._handle=Object(a.a)(d,Math.max(0,this._nextFiringTime-Date.now()),this))),this):this},rewind:function(e){return this.isRunning?e<0?this.fastForward(-e):(0===e||(e||(e=this.getDelayAfterFireCount(this.fireCount)-this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause+=e:(this._nextFiringTime+=e,clearTimeout(this._handle),this._handle=Object(a.a)(d,Math.max(0,this._nextFiringTime-Date.now()),this))),this):this},getDelayAfterFireCount:function(e){var t=this.delays;return t?t[Math.min(t.length-1,e)]:e>=this.timesToFire?1/0:this.delay},fire:function(){this.callAction(this)},owner:Object(c.b)(),_handle:null,_nextFiringTime:NaN,_pauseCount:0,_timeRemainingAtPause:NaN,_getRunningTimeUntilNextFiring:function(){return this.isPaused?this._timeRemainingAtPause:this.get("timeUntilFire")},_scheduleNextFiringOrStop:function(){if(this.isRunning){var e=this.getDelayAfterFireCount(this.fireCount);if(e<1/0){var t=this._nextFiringTime+=e;this._handle=Object(a.a)(d,Math.max(0,t-Date.now()),this)}else this.stop()}},dispose:function(){var e=this,t=arguments;this.stop(),e.__s._$4Dr$dispose.apply(e,t)},__superMap:{_$4Dr$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Timer"}}),d=function(e){e.fireCount++,e.callAction(),e._scheduleNextFiringOrStop()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(138),r=Object(i.b)("STATUS",(function(e){e("ACTIVE",(function(e){e("QUEUED"),e("TRANSMITTING")})),e("IDLE")}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(285),r=n(15),a=n(42),s=n(239),o=i.a.extend({storeIds:Object(r.d)({readOnly:!0,get:function(){var e=this._storeIdsArray;if(!e){if(0===this.length)return;e=this._storeIdsArray=this.toArray().map((function(e){return e.storeId}))}return e}}),models:Object(r.d)({readOnly:!0,get:function(){var e=this._modelArray;return e||(e=this._modelArray=s.a.createFromStoreIds(this.storeIds,null,Object(a.n)())),e}}),operation:Object(r.d)({readOnly:!0,get:function(){var e=this.length;if(1===e)return this.objectAt(0).operation;if(e>1){var t=this._bulkOperation;return t||(t=this._bulkOperation={type:a.d.WRITE.BULK,context:{changes:this}}),t}}}),merge:function(e){for(var t,n=e.createIterator().retain();t=n.value;)this.recordChange(t),n.moveToNext();return n.release(),this},recordChange:function(e){var t=e.storeId,n=this._changesByStoreId||(this._changesByStoreId={}),i=n[t];if(i>=0){var r=this.objectAt(i);this.setIndex(i,r.merge(e))}else this.push(e),n[t]=this.length-1,this._invalidateCaches();return e},getChangeForStoreId:function(e){var t=(this._changesByStoreId||(this._changesByStoreId={}))[e];if(t>=0)return this.objectAt(t)},removeChangeForStoreId:function(e){var t=this._changesByStoreId;if(t){var n=t[e];if(n>=0){var i=this.objectAt(n);for(var r in this.splice(n,1),delete t[e],this._invalidateCaches(),t){var a=t[r];a>n&&(t[r]=a-1)}return i}}},_modelArray:Object(r.d)({type:s.a}),_storeIdsArray:Object(r.d)({type:Array}),_invalidateCaches:function(){this._modelArray=null,this._storeIdsArray=null},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChangeSet"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i={},r=function(e){e!==i&&this.init.apply(this,arguments)};Object.assign(r.prototype,{init:function(){this.items=[],this._indexMap=new Map},toArray:function(){return this.items.slice()},add:function(e){if(!e)throw new Error("Cannot add nonexistents to a FastArraySet.");var t=this.items,n=this._indexMap,i=n.get(e);return!(i>=0)&&(i=t.length++,n.set(e,i),t[i]=e,!0)},remove:function(e){if(!e)return!1;var t=this.items,n=this._indexMap,i=n.get(e);if(void 0===i)return!1;var r,a=t.length;return i!==a&&(r=t[a-1],t[i]=r,n.set(r,i)),n.delete(e),t[a-1]=null,--t.length,!0},clear:function(){for(var e=this.items,t=this._indexMap,n=e.length,i=0;i<n;i++)t.delete(e[i]),e[i]=null;e.length=0},contains:function(e){return(e&&this._indexMap.get(e))>=0},clone:function(){var e=new this.constructor;return e.addSet(this),e},subtractSet:function(e){for(var t=e.length,n=e.items,i=0;i<t;i++)this.remove(n[i]);return this},intersectSet:function(e){for(var t=this.items,n=t.length,i=0;i<n;i++){var r=t[i];e.contains(r)||this.remove(r)}return this},addSet:function(e){for(var t=e.length,n=e.items,i=0;i<t;i++)this.add(n[i]);return this}}),Object.defineProperty(r.prototype,"oneItem",{get:function(){var e=this.items;return e[e.length-1]},set:function(){throw new Error("Cannot assign `oneItem` to a FastArraySet")}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.items.length},set:function(){throw new Error("Cannot assign `length` to a FastArraySet")}}),Object.defineProperty(r.prototype,"size",{get:function(){return this.items.length},set:function(){throw new Error("Cannot assign `size` to a FastArraySet")}});var a=function(e){e!==i&&this.init.apply(this,arguments)};!function(){var e=a.prototype=new r(i);e.constructor=a;var t=e.init;e.init=function(e){return this.retainReason=e,t.call(this)};var n=e.add;e.add=function(e){var t=n.call(this,e);return t&&e&&e.retain&&e.retain(this,this.retainReason||"residing in FastStrongArraySet"),t};var s=e.remove;e.remove=function(e){var t=s.call(this,e);return t&&e&&e.release&&e.release(this,this.retainReason||"occupying FastStrongArraySet"),t};var o=e.clear;e.clear=function(){for(var e=this.items,t=0,n=e.length;t<n;t++){var i=e[t];i&&i.release&&i.release(this,this.retainReason||"occupying FastStrongArraySet")}return o.call(this)}}()},function(e,t,n){"use strict";n.r(t),n(1),n(0),n(2),n(11),n.d(t,"MediaListOperationHandler",(function(){return O}));var i=n(483),r=n(268),a=n(207),s=n(13),o=n(42),l=n(239),c=n(797),u=n(140),d=n(257),h=n(65),p=n(223),f=n(224),g=n(189),m=n(97),_=n(330);function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function y(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var w=CloudKit.QueryFilterComparator.EQUALS,I=i.a.STRING.name,S=i.a.INT64.name,C=i.a.TIMESTAMP.name,E=_.a.minMediasForRangeRequest,A=_.a.maxMediasForRangeRequest,O=c.a.extend({mixinDependencies:[r.a],staticMembers:{avgRecordsPerItemForPairs:2,avgRecordsPerItemForTriples:3,itemsMin:E,itemsMax:A,_getRecordsLimit:function(e,t){var n=t in h.a.PredefinedName;return 1===e?e*(n?2:3):Math.max(Math.min(e,O.itemsMax),O.itemsMin)*(n?this.avgRecordsPerItemForPairs:this.avgRecordsPerItemForTriples)|0},QueryType:{RANK:"RANK",DATE:"DATE",POSITION:"POSITION"},getQueryFilterBy:function(e,t,n){switch(n){case O.QueryType.RANK:return[{fieldName:"startRank",comparator:w,fieldValue:{value:e,type:S}},{fieldName:"direction",comparator:w,fieldValue:{value:e<=t?"ASCENDING":"DESCENDING",type:I}}];case O.QueryType.POSITION:return[{fieldName:"startPosition",comparator:w,fieldValue:{value:e,type:S}},{fieldName:"endPosition",comparator:w,fieldValue:{value:t,type:S}}];case O.QueryType.DATE:return[{fieldName:"startDate",comparator:w,fieldValue:{value:e,type:C}},{fieldName:"endDate",comparator:w,fieldValue:{value:t,type:C}}];default:throw new s.a("Media/List: Improper use of API: unexpected queryType value="+n)}},__QUALIFIED_CLASS_NAME__:"MediaListOperationHandler"},handlesType:o.d.READ.LIST,action:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var r,s,c,_,b,y,w,I,S,C,E,A,T,M,D,P,L,R,x,N,F,V,k,B,j,U,G,H,W,$,z,K,q,Q,Y,Z,X,J,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,ge,me,_e,ve,be,ye,we,Ie,Se,Ce;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.context,s=r.containerPK,n.next=4;break;case 4:c=h.a.find(s),_=c.zone,b=c.recordName,y=r.first,w=r.last,I=r.hydrationLevel,S=r.limit,C=r.queryType,E=void 0===C?O.QueryType.RANK:C,A=r.sortType,T=void 0===A?c.sortType||u.a.MANUAL:A,M=r.sortAscending,D=void 0===M?c.sortAscending:M,n.next=9;break;case 9:P=E===O.QueryType.RANK,L=o.n(),R=L.getDatabaseForScope(_.scope).databaseInstance,x=h.a.getQueryItemListRecordType(b,T),N=I.value<m.a.HydrationLevel.FULL.value,F=d.a.getDesiredKeys(c,I),V=y<=w?1:-1,k=Math.abs(w-y)+1,B=Math.min(k,S||Number.MAX_SAFE_INTEGER),j=T===u.a.MANUAL,G=(U=P&&(j?!D:D))?c.medias.length-1-y:y,H=U?c.medias.length-1-w:w,W={recordType:x,filterBy:O.getQueryFilterBy(G,H,E)},($=h.a.getQueryItemListFilterBy(b))&&W.filterBy.push($),z={zoneID:_.zoneID,desiredKeys:F,resultsLimit:O._getRecordsLimit(S||B,b)},n.prev=26,K=W,q=0,Q=[];case 30:return n.next=32,R.performQuery(K,z);case 32:if((Y=n.sent).hasErrors)for(Z=v(Y.errors);!(X=Z()).done;)J=X.value,i.handleError(J,e,t);for(ee=d.a.getRawHashesForRecordsByType(_.pk,Y.records,I),te=ee.mediaPKs,ne=ee.mediaHashes,ie=ee.masterHashes,re=ee.assetHashes,ae=ee.containerRelationHashes,se=y+q*V,q+=ne.length,O.N?++O.N:O.N=1,L.loadData(p.a,ae,N),L.loadData(f.a,ie,N),L.loadData(g.a,re,N),oe=0,le=ae.length;oe<le;oe++)for(ce=ae[oe],ue=ce.recordName,de=ce.itemId,he=0,pe=ne.length;he<pe;he++)fe=ne[he],L.readDataForPrimaryKey(g.a,fe.asset).recordName===de&&(ge=fe.containerRelations,me=void 0===ge?fe.containerRelations=[]:ge,_e=a.Record.getPrimaryKeyWithZonePK(_.pk,ue),me.push(_e));return n.next=45,L.loadData(m.a,ne,N);case 45:ve=n.sent,Q.push.apply(Q,ve),P&&(ye=c.getDataHash(),we=ye.medias,Ie={pk:c.pk,medias:Array.isArray(we)?[].concat(we):[]},Se=te,c.isRecentlyDeletedAlbum&&ne.length>we.length&&(Se=te.slice(0,we.length)),(be=Ie.medias).splice.apply(be,[se,Se.length].concat(Se)),L.loadData(h.a,Ie,!0)),K=Y,q<B&&(Ce=B-q,z.resultsLimit=O._getRecordsLimit(Ce,b));case 50:if(!0===K.moreComing&&q<B){n.next=30;break}case 51:return n.abrupt("return",l.a.createFromStoreIds(Q,m.a,L));case 54:return n.prev=54,n.t0=n.catch(26),n.abrupt("return",i.handleError(n.t0,e,t));case 57:case"end":return n.stop()}}),n,null,[[26,54]])})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){y(a,i,r,s,o,"next",e)}function o(e){y(a,i,r,s,o,"throw",e)}s(void 0)}))})()}})},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var i=n(40),r=n(20),a=n(220),s=n(7),o=n(283),l=n(209),c=n(400),u=n(117),d=n(568),h=n(267),p=i.a.extend({mixinDependencies:[r.b,a.a],sizeClassHorizontal:s.b(o.a.bindingFor("application.sizeClassHorizontal")),sizeClassVertical:s.b(o.a.bindingFor("application.sizeClassVertical")),sizeClass:s.b({dependencies:["sizeClassHorizontal","sizeClassVertical"],readOnly:!0,type:h.a,get:Object.assign((function(){var e=this.sizeClassHorizontal;return this.sizeClassVertical===h.a.COMPACT||e===h.a.COMPACT?h.a.COMPACT:h.a.REGULAR}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])===h.a.COMPACT||r===h.a.COMPACT?h.a.COMPACT:h.a.REGULAR}})}),orientationType:s.b(),_orientationTypeMaintainer:r.h({inputs:[l.a.sharedInstance.window.bindingFor("width"),l.a.sharedInstance.window.bindingFor("height")],callback:function(e,t){var n=d.a.LANDSCAPE;t>e&&(n=d.a.PORTRAIT),c.a(this,"orientationType",n)}}),primaryInteractionMode:s.b(o.a.bindingFor("application.primaryInteractionMode")),isRTL:s.b(u.a.sharedInstance.bindingFor("isRTL")),staticMembers:{__QUALIFIED_CLASS_NAME__:"EnvironmentVariablesService"}}),f=p.sharedInstance},function(e,t,n){"use strict";function i(e,t,n,i,r,a,s){var o=e;"fit"===o&&(o=!1),"cover"===o&&(o=!0),o=Boolean(o);var l,c,u,d,h,p=arguments.length;6!==p&&(s=p-1),2===s||3===s?(c=t.height,l=t.width,d=n.height,u=n.width,h=i):(l=t,c=n,u=i,d=r,h=a),c=c||0,(l=l||0)||c||(l=c=1),d=d||0,(u=u||0)||d||(u=d=1);var f=l/c,g=u/d,m=o?f<g:f>g;return(h=h||{}).width=m?u:d*f,h.height=m?u/f:d,h}n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}));var r=function(e,t,n,r,a){return i(!1,e,t,n,r,a,arguments.length)},a=function(e,t,n,r,a){return i(!0,e,t,n,r,a,arguments.length)};function s(e,t,n,i,r,s,l,c){isNaN(r)&&(r=.5),isNaN(s)&&(s=.5),(isNaN(l)||l<1)&&(l=1);var u=c||{},d=a(e,t,n,i,o);return u.uncroppedSourceWidth=d.width*l,u.uncroppedSourceHeight=d.height*l,u.cropWidth=n/u.uncroppedSourceWidth*e,u.cropHeight=i/u.uncroppedSourceHeight*t,u.cropX=r*(e-u.cropWidth),u.cropY=s*(t-u.cropHeight),u}var o={}},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.MOUSE="MOUSE",e.TOUCH="TOUCH"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f}));var i,r,a=n(359),s=n(204),o=function(){};function l(e){if(!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.every((function(t){return"function"===typeof e[t]}))}(e,"warn","error"))throw new Error("Supplied logger function must support `warn` and `error` methods.");i=e.warn,r=e.error}var c={get warn(){return i||o},get error(){return r||o}};function u(e){return"string"===typeof e?e.slice(0,s.b.length)===s.b||e.slice(0,s.a.length)===s.a:e===a.b?e.charactersInRange(0,6)===s.a:e instanceof globalThis.DataView?(a.b.reset(e),a.b.charactersInRange(0,6)===s.a):e instanceof globalThis.ArrayBuffer&&(a.b.reset(new globalThis.DataView(e)),a.b.charactersInRange(0,6)===s.a)}function d(e){var t=e.length;return t<26?null:(e.jumpTo(t-26),{offsetSize:e.uint8,objectRefSize:e.uint8,numObjects:e.uint64,topObject:e.uint64,tableOffset:e.uint64})}function h(e,t){e.jumpTo(t.tableOffset);for(var n=[],i=0,r=t.numObjects;i<r;i++)switch(t.offsetSize){case 1:n.push(e.uint8);break;case 2:n.push(e.uint16);break;case 4:n.push(e.uint32);break;default:return c.warn("BPlist: unknown offset size: "+t.offsetSize),null}return n}var p={0:function(e,t){return 9===t||8!==t&&(0===t||15===t||c.warn("BPlist: unhandled simple type: 0x"+t),null)},1:function(e,t){var n=e.stream,i=Math.pow(2,t);if(i>=s.c)return c.warn("BPlist: Integer length exceeds "+s.c+" bytes"),null;if(n.fastForward(1),i>4){for(var r="",a=0;a<i;a++)r+=n.uint8.toString(16);return parseInt(r,16)}return n.uint(i)},2:function(e,t){var n=e.stream,i=Math.pow(2,t);return i>=s.c?(c.warn("BPlist: real number length exceeds "+s.c+" bytes"),null):(n.fastForward(1),4===i?n.float32:8===i?n.float64:null)},3:function(e,t){3!==t&&c.warn("BPlist: unknown date type: "+t+" bytes");var n=e.stream.fastForward(1).float64;return new Date(9783072e5+1e3*n)},4:function(e,t){var n=e.stream,i=n.cursor,r=t,a=1;if(15===t){var o=m(n.fastForward(1));a=o[0],r=o[1]}return r>s.c?(c.error("BPlist: array size is beyond MAX."),null):n.jumpTo(i+a).sliceAsDataView(r)},5:g(),6:g(!0),8:function(e,t){var n=t+1;return n>=s.c?(c.warn("BPlist: UID length exceeds "+s.c+" bytes"),null):e.stream.uint(n)},10:function(e,t){var n=e.stream,i=n.cursor,r=e.trailer.objectRefSize,a=t,o=1;if(15===t){var l=m(n.fastForward(1));o=l[0],a=l[1]}if(a*r>s.c)return c.error("BPlist: array size is beyond MAX."),null;for(var u=[],d=0;d<a;d++){var h=n.jumpTo(i+o+d*r).uint(r);u[d]=f(e,h)}return u},13:function(e,t){var n=e.stream,i=n.cursor,r=e.trailer.objectRefSize,a=t,o=1;if(15===t){var l=m(n.fastForward(1));o=l[0],a=l[1]}if(2*a*r>s.c)return c.error("BPlist: dictionary size is beyond MAX."),null;for(var u={},d=0;d<a;d++){var h=n.jumpTo(i+o+d*r).uint(r),p=n.jumpTo(i+o+a*r+d*r).uint(r),g=f(e,h),_=f(e,p);u[g]=_}return u}};function f(e,t){var n=e.offsets[t],i=e.stream;i.cursor=n;var r=i.first4BitsAt(n),a=i.last4BitsAt(n),s=p[r];return s?s(e,a):(c.warn("BPlist: unknown type 0x"+r.toString(16)),null)}function g(e){var t=Boolean(e);return function(e,n){var i=e.stream,r=i.cursor,a=t?2*n:n;if(a>=s.c)return c.warn("BPlist: String length exceeds "+s.c+" bytes"),null;var o=1;if(15===n){var l=m(i.fastForward(1));o=l[0],a=l[1]}i.jumpTo(r+o);for(var u=[],d=0;d<a;d++){var h=t?i.uint16:i.uint8;u.push(h)}return u.length?u.reduce((function(e,t,n){var i=e;return 1===n&&(i=String.fromCodePoint(e)),i+String.fromCodePoint(t)})):null}}function m(e){var t=e.uint8,n=(240&t)/16;1!==n&&c.warn("BPlist: unexpected length-int type! 0x"+n.toString(16));var i=15&t,r=Math.pow(2,i);return[2+r,e.uint(r)]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(166),r=i.a.extend({staticMembers:{storageKey:"cpl"},EXPUNGE_DATE_OFFSET:2592e6,indexingStatePollingInterval:i.a.numberProperty(15e3),shouldUseH2ForDerivativeLoading:i.a.booleanProperty(!1),shouldChangeBackgroundCVWSUrlsToForeground:i.a.booleanProperty(!0),minMediasForRangeRequest:i.a.numberProperty(10),maxMediasForRangeRequest:i.a.numberProperty(30),numRangeRequestsToPrefetchForMoments:i.a.numberProperty(2)}).create()},function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n(40),r=n(55),a=n(15),s=n(220),o=n(120),l=n(82),c=n(759),u=n(388),d=n(20),h=n(117),p=n(132),f={0:"INCOMPATIBLE",1:"COMPATIBLE",Infinity:"SUBMITTABLE"},g=i.a.extend({_results:r.c(Array),_notes:r.c(Array),incompatibleReasonStrings:r.c(Array),validity:a.d({readOnly:!0,get:function(){return Math.min(1/0,Math.min.apply(Math,this._results))}}),report:a.d({readOnly:!0,get:function(){var e=this.validity,t="Validation result: ";return t+=f[e],(t+="\n\t"+this._notes.join("\n\t")).trim()}}),record:function(e,t,n){this._results.push(e);for(var i=f[e]+": ";i.length<14;)i+=" ";this._notes.push(i+t||"Unknown Reason"),n&&this.incompatibleReasonStrings.push(n)},reset:function(){this._results.length=this._notes.length=0},staticMembers:{__QUALIFIED_CLASS_NAME__:"ValidationResults"}}),m=p.a.extend({createInstance:function(){return g.create()},disposeInstance:function(e){var t=this,n=arguments;t.__s._$WD$disposeInstance.apply(t,n),e.reset()},__superMap:{_$WD$disposeInstance:"disposeInstance"}}).create(),_=i.a.extend(s.a,{staticMembers:{SUBMITTABLE:1/0,COMPATIBLE:1,INCOMPATIBLE:0,__QUALIFIED_CLASS_NAME__:"Validator"},isOptional:!1,init:function(){var e=this,t=arguments,n=this.validate;this.validate=function(e,t){if(t){if((null===e||void 0===e)&&this.isOptional)return;return n.call(this,e,t)}return(t=this.validationResultsForShareData(e)).validity},e.__s._$10t$init.apply(e,t)},validationResultsForShareData:function(e){var t=g.create();return this.validate(e,t),t},validate:function(e,t){if(o.a(e))for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this[n];l.a(r,_)&&r.validate(i,t)}},__superMap:{_$10t$init:"init"}});function v(e){return a.d({defaultValue:e,get:function(e){return e},set:function(e){return c.a(e,_)?e.create():e}})}function b(e,t,n,i,r,a){var s={staticMembers:{mixinWasApplied:function(o){if(o===s){var l=this.prototype.validate;this.prototype.validate=function(s,o){if(Array.isArray(s)){s.length<this[n]&&o.record(0,e+" array length is not at least "+this[i]+".",this[r]),s.length>this[i]&&o.record(0,e+" array length exceeds "+this[i]+".",this[a]);for(var c=[],u=[],d=0;d<s.length;d++){var h=m.getInstance();l.call(this,s[d],h),c.push(h.validity),u.push(h.report),m.disposeInstance(h)}for(var p=Math.min(this[t],s.length),g={},_=[],v=0;v<c.length;v++){var b=c[v];1===(g[b]=1+(0|g[b]))&&_.push(b)}_.sort(P);for(var y=_.length-1;y>0;y--)g[_[y-1]]+=g[_[y]];for(var w=p?0:1/0,I=0;I<_.length;I++){var S=_[I];S>w&&g[S]>=p&&(w=S)}var C,E=g[w],A=f[w].toLowerCase();C=p?p<this[t]?e+" array had all items which were "+A+" or better.":E===p?e+" array contained the required "+p+" "+A+"-or-better "+(1===p?"item":"items")+".":e+" array contained "+E+" "+A+"-or-better "+(1===E?"item":"items")+" (only "+p+" required).":e+" array had no items (e.g. nothing to force a validity downgrade).",C+="\n\t"+u.map((function(t,n){return"\t"+e+"["+n+"]: "+t.split("\n").join("\n\t\t")})).join("\n\t"),o.record(w,C.trim())}else o.record(0,e+" data is not an array.")}}}}};return n=n||"minLength",i=i||"maxLength",r=r||"tooFewString",a=a||"tooManyString",s[t=t||"satisfactionCount"]=1/0,s[n]=0,s[i]=1/0,s[r]=void 0,s[a]=void 0,s}var y=_.extend({maxLength:1/0,init:function(e){"number"===typeof e&&(e={maxLength:e}),this.__s._$3PE$init.call(this,e)},validate:function(e,t){var n=this,i=arguments;n.__s._$3QM$validate.apply(n,i),"string"!==typeof e&&t.record(0,"Data that should be a string is not."),e&&e.length>this.maxLength&&t.record(0,"String length "+e.length+" exceeds "+this.maxLength+".")},__superMap:{_$3PE$init:"init",_$3QM$validate:"validate"},staticMembers:{__QUALIFIED_CLASS_NAME__:"StringValidator"}}),w=y.extend({validate:function(e){var t=this,n=arguments,i=t.__s._$3Xf$validate.apply(t,n);return e===u.b(e)?Math.min(i,1/0):0},__superMap:{_$3Xf$validate:"validate"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HTMLValidator"}}),I=_.extend({maxLength:1/0,init:function(e){"number"===typeof e&&(e={maxLength:e}),this.__s._$3fi$init.call(this,e)},validate:function(e,t){var n=this,i=arguments;n.__s._$3gq$validate.apply(n,i),D(e)||t.record(0,"Data that should be binary is not."),e.length>this.maxLength&&t.record(0,"Data length "+e.length+" exceeds "+this.maxLength)},__superMap:{_$3fi$init:"init",_$3gq$validate:"validate"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BytesValidator"}}),S=_.extend({stringType:"Media",url:v(y.extend({isOptional:!0})),bytes:v(I.extend({isOptional:!0})),maxFileSize:1/0,allowedMimeTypes:[void 0,null,"image/png","image/jpeg","image/gif","image/tiff","video/mp4"],maxWidth:1/0,maxHeight:1/0,allowsGeo:!0,fileSizeOf:function(e){return e.fileSize||e.bytes&&e.bytes.length||e.width*e.height*3*.2|0},validate:function(e,t){var n=this,i=arguments;n.__s._$3wr$validate.apply(n,i),e?(e.url&&e.bytes&&t.record(0,this.stringType+" includes both bytes and a URL, which may contradict each other."),e.url||e.bytes||t.record(1,this.stringType+" includes neither a URL nor bytes."),e.bytes&&e.fileSize&&e.fileSize!==e.bytes.length&&t.record(0,this.stringType+" includes both bytes and a fileSize, but the sizes do not match."),e.url&&!e.fileSize&&t.record(1/0,this.stringType+" with only a URL lacks a fileSize. File size is unknown."),-1===this.allowedMimeTypes.indexOf(e.mimeType)&&t.record(0,this.stringType+" has disallowed mimeType "+e.mimeType+"."),this.fileSizeOf(e)>this.maxFileSize&&t.record(0,this.stringType+" file size "+this.fileSizeOf(e)+" exceeds "+this.maxFileSize+"."),(e.width>this.maxWidth||e.height>this.maxHeight)&&t.record(0,this.stringType+" dimensions "+e.width+"x"+e.height+" exceed "+this.maxWidth+"x"+this.maxHeight+"."),this.allowsGeo||!1===e.hasGeo||t.record(1,this.stringType+" does not confirm that it lacks GPS data.")):t.record(0,this.stringType+" is nonexistent.")},__superMap:{_$3wr$validate:"validate"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaValidator"}}),C={mixinDependencies:[b("MultiResolution","resolutionSatisfactionCount","minResolutionCount","maxResolutionCount")],resolutionSatisfactionCount:1,minResolutionCount:1,maxResolutionCount:1/0,validate:function(e,t){var n=this,i=arguments;n.__s._$4ur$validate.apply(n,i)},__superMap:{_$4ur$validate:"validate"}},E=S.extend({stringType:"Image",allowedMimeTypes:S.prototype.allowedMimeTypes.filter((function(e){return!e||"image/"===e.slice(0,6)})),staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageValidator"}}),A=E.extend(C,{staticMembers:{__QUALIFIED_CLASS_NAME__:"MultiResolutionImageValidator"}}),O=S.extend({stringType:"Video",allowedMimeTypes:S.prototype.allowedMimeTypes.filter((function(e){return!e||"video/"===e.slice(0,6)})),staticMembers:{__QUALIFIED_CLASS_NAME__:"VideoValidator"}}),T=O.extend(C,{staticMembers:{__QUALIFIED_CLASS_NAME__:"MultiResolutionVideoValidator"}}),M=_.extend(d.b,{staticMembers:{Types:{String:y,HTML:w,Bytes:I,Image:E,Video:O,MultiResolutionImageValidator:A,MultiResolutionVideoValidator:T},__QUALIFIED_CLASS_NAME__:"ShareDataValidator"},images:v(A.extend(b("Images"),{isOptional:!0,tooFewString:h.d("Share.Validation.NotEnoughPhotos"),tooManyString:h.d("Share.Validation.TooManyPhotos")})),videos:v(T.extend(b("Videos"),{isOptional:!0,tooFewString:h.d("Share.Validation.NotEnoughVideos"),tooManyString:h.d("Share.Validation.TooManyVideos")})),validate:function(e,t){var n=this,i=arguments;o.a(e)||t.record(0,"The share data is not a hash."),n.__s._$5eq$validate.apply(n,i)},__superMap:{_$5eq$validate:"validate"}});function D(e){for(var t=[Blob,ArrayBuffer,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],n=0,i=t.length;n<i;n++)if(e instanceof t[n])return!0;return!1}function P(e,t){return e-t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _e})),n(1),n(0),n(4),n(6),n(2),n(71),n(67),n(72),n(66);var i=n(7),r=n(55),a=n(78),s=n(209),o=n(99),l=n(20),c=n(193),u=n(139),d=n(199),h=n(1313),p=n(804),f=n(1269),g=n(1284),m=n(580),_=n(466),v=n(203),b=n(356),y=n(328),w=n(405),I=n(1243),S=n(201),C=n(15),E=n(231),A=n(1268),O=n(25),T=n(327),M=n(1292),D=n(202),P=n(200),L=n(51),R=n(1242),x=n(790),N=n(155),F=n(407),V=D.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"badges"}],classes:["badges-container-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"is-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"BadgesContainerView"},badges:i.b(),isHidden:i.b()}),k=V.extend({staticMembers:{className:"bottom-right-badges-view",__QUALIFIED_CLASS_NAME__:"BottomRightBadgesView"}}),B={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"bottomRightBadgesView"}]}}},areBottomRightBadgesVisible:i.b(!0),bottomRightBadgesView:i.b({readOnly:!0,strong:!0,dependencies:["bottomRightBadges.length"],get:Object.assign((function(){return this.getPath("bottomRightBadges.length")>0?this._bottomRightBadgesView:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>0?this._bottomRightBadgesView:void 0}})}),bottomRightBadgeViewClasses:i.b([]),bottomRightBadges:F.b({source:"bottomRightBadgeViewClasses",desiredOutputType:N.b,outputForInput:function(e){return e.create({presenterView:this})}}),_bottomRightBadgesView:i.b({readOnly:!0,strong:!0,get:function(){return k.create({badges:this.bindingFor("bottomRightBadges"),isHidden:this.bindingFor("shouldHideMainDerivative")})}}),_setPositionOnBottomRightBadges:l.h({inputs:["bottomRightBadgesView","pinnedImageRight","pinnedImageBottom","areBottomRightBadgesVisible"],callback:function(e,t,n,i){if(void 0!==e){var r=t+10,a=n+10;c.c(this._bottomRightBadgesView.element).set("position","absolute").set("right",r).set("bottom",a).set("visibility",i?"visible":"hidden")}}})},j=V.extend({staticMembers:{className:"top-left-badges-view",__QUALIFIED_CLASS_NAME__:"TopLeftBadgesView"}}),U=y.a.TOUCH,G={isPinchZoomInProgress:i.b(),unzoomedZoomLevel:i.b(),zoomLevel:i.b(),shouldHideMainDerivative:i.b(),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"topLeftBadgesView"}]}}},topLeftBadgesView:i.b({readOnly:!0,strong:!0,dependencies:["topLeftBadges.length"],get:Object.assign((function(){return this.getPath("topLeftBadges.length")>0?this._topLeftBadgesView:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>0?this._topLeftBadgesView:void 0}})}),topLeftBadgeViewClasses:i.b([]),topLeftBadges:F.b({source:"topLeftBadgeViewClasses",desiredOutputType:N.b,outputForInput:function(e){return e.create({presenterView:this})}}),_topLeftSortedBadges:i.b({readOnly:!0,strong:!0,dependencies:["topLeftBadges","topLeftBadges.contentsDidChange"],get:Object.assign((function(){var e=this.topLeftBadges.toArray();return e.sort((function(e,t){return(e.badgeOrder||0)-(t.badgeOrder||0)})),N.b.create(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]).toArray();return r.sort((function(e,t){return(e.badgeOrder||0)-(t.badgeOrder||0)})),N.b.create(r)}})}),_topLeftBadgesView:i.b({readOnly:!0,strong:!0,get:function(){return j.create({badges:this.bindingFor("_topLeftSortedBadges"),isHidden:this.bindingFor("_isTopLeftBadgesViewHidden")})}}),_isTopLeftBadgesViewHidden:i.b({readOnly:!0,dependencies:["shouldHideMainDerivative","isPinchZoomInProgress","primaryInteractionMode","zoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){return this.shouldHideMainDerivative||this.isPinchZoomInProgress||this.primaryInteractionMode===U&&this.zoomLevel!==this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])===U&&i.internalGet(this,t[3+n])!==i.internalGet(this,t[4+n])}})}),_setPositionOnTopLeftBadges:l.h({inputs:["topLeftBadgesView","topLeftBadgesView.isAttached","pinnedImageLeft","pinnedImageTop","primaryInteractionMode"],callback:function(e,t,n,i,r){if(void 0!==e&&t){var a,s,o=this._topLeftBadgesView.element,l=o.offsetWidth,u=o.offsetHeight;r===U&&(l+7<n||u+7<i)?(a=7,s=7):(a=n+10,s=i+10),c.c(o).set("position","absolute").set("left",a).set("top",s)}}})},H=D.a.extend({mixinDependencies:[P.a,R.a,x.a,B,G],staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["pok-media-presenter-view"]},__QUALIFIED_CLASS_NAME__:"MediaPresenterView"},media:i.b({strong:!0}),isAloneInParent:i.b(!0),isTargetInParent:i.b(!0),isShowingInParent:i.b(!0),isSteadyInParent:i.b(!0),isBackgroundablySteadyInParent:i.b(!0),isSteadilyAloneInParent:i.b({readOnly:!0,dependencies:["isSteadyInParent","isAloneInParent"],get:Object.assign((function(){return this.isSteadyInParent&&this.isAloneInParent}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),isBackgroundablySteadilyAloneInParent:i.b({readOnly:!0,dependencies:["isBackgroundablySteadyInParent","isAloneInParent"],get:Object.assign((function(){return this.isBackgroundablySteadyInParent&&this.isAloneInParent}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),wantsUIControl:i.b({readOnly:!0,dependencies:["wantsFullUIControl","isZoomedIn"],get:Object.assign((function(){return this.wantsFullUIControl||this.isZoomedIn}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),wantsFullUIControl:i.b(!1),canZoom:i.b(!1),minZoomLevel:i.b(NaN),maxZoomLevel:i.b(NaN),zoomSteps:i.b(null),zoomLevel:i.b({dependencies:["unzoomedZoomLevel","canZoom"],get:Object.assign((function(e){return e&&this.canZoom?e:this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return e&&i.internalGet(this,t[1+n])?e:i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){if(!this.canZoom)return NaN;var t=this.unzoomedZoomLevel;return isNaN(t)||Math.abs(e-t)/t<.01?NaN:e},didChange:L.a}),unzoomedZoomLevel:i.b(NaN),isZoomed:i.b({readOnly:!0,dependencies:["canZoom","zoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){return!!this.canZoom&&this.zoomLevel!==this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n])}})}),isZoomedIn:i.b({readOnly:!0,dependencies:["isZoomed","zoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){return!!this.isZoomed&&this.zoomLevel>this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])>i.internalGet(this,t[2+n])}})}),initFromPool:function(e){this.__s._$2S8$initFromPool.call(this),this.media=e},cleanup:function(){var e=this,t=arguments;this.media=null,this.zoomLevel=0,e.__s._$2Uu$cleanup.apply(e,t)},__superMap:{_$2S8$initFromPool:"initFromPool",_$2Uu$cleanup:"cleanup"}}),W=n(382),$=n(567),z=W.a.extend({mixinDependencies:[$.a],renewVisibility:function(){var e=this,t=arguments;this.primaryInteractionMode!==y.a.TOUCH?e.__s._$9n$renewVisibility.apply(e,t):this._opacity=0},__superMap:{_$9n$renewVisibility:"renewVisibility"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HiddenTouchHorizontalScrollIndicatorView"}}),K=W.c.extend({mixinDependencies:[$.a],renewVisibility:function(){var e=this,t=arguments;this.primaryInteractionMode!==y.a.TOUCH?e.__s._$Ho$renewVisibility.apply(e,t):this._opacity=0},__superMap:{_$Ho$renewVisibility:"renewVisibility"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HiddenTouchVerticalScrollIndicatorView"}}),q=H.extend(w.a,I.a,E.a,A.a).extend({horizontalScrollIndicatorClass:z,verticalScrollIndicatorClass:K,horizontalScrollIndicator:i.b(),verticalScrollIndicator:i.b(),_unzoomPhotoWhenPhotoExitsView:l.h("isAttached",(function(e){e||this.zoomToFitWithoutAnimation()})),dpr:i.b(S.a.sharedInstance.bindingFor("devicePixelRatio")),translationX:i.b(),imageLeft:i.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign((function(){return this._zoomedImagePosition[0]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageTop:i.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign((function(){return this._zoomedImagePosition[1]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),imageWidth:i.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign((function(){return this._zoomedImageDimensions[0]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageHeight:i.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign((function(){return this._zoomedImageDimensions[1]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),pinnedImageLeft:i.b({readOnly:!0,dependencies:["insetLeft","imageLeft"],get:Object.assign((function(){return Math.max(this.insetLeft,this.imageLeft)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageRight:i.b({readOnly:!0,dependencies:["viewportWidth","pinnedImageLeft","pinnedImageWidth"],get:Object.assign((function(){return this.viewportWidth-this.pinnedImageLeft-this.pinnedImageWidth}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageTop:i.b({readOnly:!0,dependencies:["insetTop","imageTop"],get:Object.assign((function(){return Math.max(this.insetTop,this.imageTop)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageBottom:i.b({readOnly:!0,dependencies:["viewportHeight","pinnedImageTop","pinnedImageHeight"],get:Object.assign((function(){return this.viewportHeight-this.pinnedImageTop-this.pinnedImageHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageWidth:i.b({readOnly:!0,dependencies:["insetWidth","imageWidth"],get:Object.assign((function(){return Math.min(this.insetWidth,this.imageWidth)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageHeight:i.b({readOnly:!0,dependencies:["insetHeight","imageHeight"],get:Object.assign((function(){return Math.min(this.insetHeight,this.imageHeight)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),zoomAnimationDuration:C.d(200),defaultMinZoomLevel:i.b(.5),minZoomLevel:i.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMinZoomLevel"],get:Object.assign((function(){return Math.min(this.defaultMinZoomLevel,this.unzoomedZoomLevel)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[1+n]),i.internalGet(this,t[0+n]))}})}),defaultMaxZoomLevel:i.b(4),maxZoomLevel:i.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMaxZoomLevel"],get:Object.assign((function(){return Math.max(this.unzoomedZoomLevel,this.defaultMaxZoomLevel)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),bestEffort100PercentZoomLevel:i.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel"],get:Object.assign((function(){return Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,1))}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),Math.min(i.internalGet(this,t[1+n]),1))}})}),zoomSteps:i.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){var e=this._zoomSteps_lastRet;e&&(this._zoomSteps_lastRet=null,O.arrayPool.disposeInstance(e));var t=this.minZoomLevel,n=this.maxZoomLevel,i=this.unzoomedZoomLevel;if(!t||!n||!i)return null;for(var r=O.arrayPool.getInstanceFromParams(t),a=Math.log(2),s=Math.log(n)/a,o=t===i,l=Math.ceil(Math.log(t)/a);l<s;l++){var c=Math.pow(2,l),u=2*c/3,d=3*c/2;u<1&&u>t&&(Math.abs(u-i)>=.01?r.push(u):(o||r.push(i),o=!0)),Math.abs(c-i)>=.01?r.push(c):(o||r.push(i),o=!0),d>1&&d<n&&(Math.abs(d-i)>=.01?r.push(d):(o||r.push(i),o=!0))}return!o&&i>t&&i<n&&(r.push(i),r.sort(X)),r[r.length-1]!==n&&r.push(n),this._zoomSteps_lastRet=r}),{__CW__getter:function(e,t,n,i){var r=this._zoomSteps_lastRet;r&&(this._zoomSteps_lastRet=null,O.arrayPool.disposeInstance(r));var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]);if(!a||!s||!o)return null;for(var l=O.arrayPool.getInstanceFromParams(a),c=Math.log(2),u=Math.log(s)/c,d=a===o,h=Math.ceil(Math.log(a)/c);h<u;h++){var p=Math.pow(2,h),f=2*p/3,g=3*p/2;f<1&&f>a&&(Math.abs(f-o)>=.01?l.push(f):(d||l.push(o),d=!0)),Math.abs(p-o)>=.01?l.push(p):(d||l.push(o),d=!0),g>1&&g<s&&(Math.abs(g-o)>=.01?l.push(g):(d||l.push(o),d=!0))}return!d&&o>a&&o<s&&(l.push(o),l.sort(X)),l[l.length-1]!==s&&l.push(s),this._zoomSteps_lastRet=l}})}),nextHigherZoomLevel:i.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign((function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.max(this.zoomLevel,this._animTargetZoomLevel||-1/0),n=0;n<e.length;n++)if(e[n]>t+1e-5)return e[n];return NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||-1/0),s=0;s<r.length;s++)if(r[s]>a+1e-5)return r[s];return NaN}})}),nextLowerZoomLevel:i.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign((function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.min(this.zoomLevel,this._animTargetZoomLevel||1/0),n=e.length-1;n>=0;n--)if(e[n]<t-1e-5)return e[n];return NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||1/0),s=r.length-1;s>=0;s--)if(r[s]<a-1e-5)return r[s];return NaN}})}),zoomInOneStep:function(){var e=this.nextHigherZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomOutOneStep:function(){var e=this.nextLowerZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomTo1:function(){var e=this.bestEffort100PercentZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomToFit:function(){var e=this.unzoomedZoomLevel;e&&(this._animTargetZoomLevel=e)},slowZoomToFit:function(){var e=this.unzoomedZoomLevel,t=this.zoomAnimationDuration;this.zoomAnimationDuration=400,e&&(this._animTargetZoomLevel=e),this.zoomAnimationDuration=t},zoomToFitWithoutAnimation:function(){this.isZoomed&&(this.zoomLevel=void 0)},zoomToLevel:function(e){this._animTargetZoomLevel=e},slowZoomToLevel:function(e){var t=this.zoomAnimationDuration;this.zoomAnimationDuration=400,this._animTargetZoomLevel=e,this.zoomAnimationDuration=t},toggleZoom:function(){var e=this.bestEffort100PercentZoomLevel,t=this.unzoomedZoomLevel,n=this._animTargetZoomLevel===t||this.zoomLevel===t?e:t;n&&(this._animTargetZoomLevel=n)},clearZoomOffsets:function(){if(0!==this.zoomOffsetLeft&&this.canScrollX){var e=this.scrollX+this.zoomOffsetLeft;e>0&&e<this.scrollRangeX&&(this.scrollX=e,this.zoomOffsetLeft=0)}if(0!==this.zoomOffsetTop&&this.canScrollY){var t=this.scrollY+this.zoomOffsetTop;t>0&&t<this.scrollRangeY&&(this.scrollY=t,this.zoomOffsetTop=0)}0!==this.zoomOffsetLeft&&this.animate("zoomOffsetLeft",0,200),0!==this.zoomOffsetTop&&this.animate("zoomOffsetTop",0,200)},_animatedZoomLevel:E.b(0),_animTargetZoomLevel:i.b(0),_animateZoomLevel:l.h("_animTargetZoomLevel",(function(e){var t=this.zoomAnimationDuration;e!==this._animatedZoomLevel&&this.animate("_animatedZoomLevel",e,t)})),_updateRealZoomLevelToAnimation:l.h("_animatedZoomLevel",(function(e){e&&(this._isWritingZoomLevel=!0,this.zoomLevel!==e&&(this.zoomLevel=e),this._isWritingZoomLevel=!1)})),_updateAnimationToRealZoomLevel:l.h("zoomLevel",(function(e){this._isWritingZoomLevel||(this._animTargetZoomLevel!==e&&(this._animTargetZoomLevel=e),this._animatedZoomLevel!==e&&(this._animatedZoomLevel=e))})),unzoomedZoomLevel:i.b({readOnly:!0,dependencies:["insetWidth","insetHeight","media.width","media.height"],get:Object.assign((function(){var e=this.insetWidth,t=this.insetHeight,n=this.getPath("media.width"),i=this.getPath("media.height"),r=T.d(n,i,e,t,Q),a=Math.round(Math.min(n,r.width)),s=Math.round(Math.min(i,r.height));return a&&s?r.height%1?a/n:s/i:NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]),l=T.d(s,o,r,a,Q),c=Math.round(Math.min(s,l.width)),u=Math.round(Math.min(o,l.height));return c&&u?l.height%1?c/s:u/o:NaN}})}),width:a.c("viewportWidth"),height:a.c("viewportHeight"),scrollRangeX:i.b({readOnly:!0,dependencies:["imageWidth","insetLeft","insetRight","viewportWidth"],get:Object.assign((function(){return Math.max(0,this.imageWidth+this.insetLeft+this.insetRight-this.viewportWidth)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollRangeY:i.b({readOnly:!0,dependencies:["imageHeight","insetTop","insetBottom","viewportHeight"],get:Object.assign((function(){return Math.max(0,this.imageHeight+this.insetTop+this.insetBottom-this.viewportHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollMaxX:i.b({readOnly:!0,dependencies:["scrollRangeX","viewportWidth"],get:Object.assign((function(){return this.scrollRangeX+this.viewportWidth}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),scrollMaxY:i.b({readOnly:!0,dependencies:["scrollRangeY","viewportHeight"],get:Object.assign((function(){return this.scrollRangeY+this.viewportHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),_zoomedImageDimensions:i.b({readOnly:!0,dependencies:["media.width","media.height","zoomLevel","isZoomed","insetWidth","insetHeight"],get:Object.assign((function(){var e=this._zoomedImageDimensions_lastOwnRet;e&&(O.arrayPool.disposeInstance(e),this._zoomedImageDimensions_lastOwnRet=null);var t=this.getPath("media.width"),n=this.getPath("media.height"),i=this.zoomLevel,r=this.insetWidth,a=this.insetHeight;if(!r||!a||!i||!t||!n)return Y;var s=t*i,o=n*i;this.isZoomed?(s<=r&&(s=2*Math.round(s/2)),o<=a&&(o=2*Math.round(o/2))):(s=Math.round(s),o=Math.round(o));var l=O.arrayPool.getInstance();return l[0]=s,l[1]=o,this._zoomedImageDimensions_lastOwnRet=l}),{__CW__getter:function(e,t,n,i){var r=this._zoomedImageDimensions_lastOwnRet;r&&(O.arrayPool.disposeInstance(r),this._zoomedImageDimensions_lastOwnRet=null);var a=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[5+n]);if(!l||!c||!o||!a||!s)return Y;var u=a*o,d=s*o;i.internalGet(this,t[3+n])?(u<=l&&(u=2*Math.round(u/2)),d<=c&&(d=2*Math.round(d/2))):(u=Math.round(u),d=Math.round(d));var h=O.arrayPool.getInstance();return h[0]=u,h[1]=d,this._zoomedImageDimensions_lastOwnRet=h}})}),_zoomedImagePosition:i.b({readOnly:!0,dependencies:["imageWidth","imageHeight","insetLeft","insetTop","insetWidth","insetHeight","scrollX","scrollY","zoomOffsetLeft","zoomOffsetTop"],get:Object.assign((function(){var e=this._zoomedImagePosition_lastOwnRet;e&&(O.arrayPool.disposeInstance(e),this._zoomedImagePosition_lastOwnRet=null);var t=this.imageWidth,n=this.imageHeight,i=this.insetWidth,r=this.insetHeight;if(!t||!n||!i||!r)return Z;var a=this.insetLeft,s=this.insetTop,o=this.scrollX,l=this.scrollY,c=t<=i?a+Math.round(i/2-t/2):a-o,u=n<=r?s+Math.round(r/2-n/2):s-l,d=O.arrayPool.getInstance();return d[0]=c-this.zoomOffsetLeft,d[1]=u-this.zoomOffsetTop,this._zoomedImagePosition_lastOwnRet=d}),{__CW__getter:function(e,t,n,i){var r=this._zoomedImagePosition_lastOwnRet;r&&(O.arrayPool.disposeInstance(r),this._zoomedImagePosition_lastOwnRet=null);var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[5+n]);if(!a||!s||!o||!l)return Z;var c=i.internalGet(this,t[2+n]),u=i.internalGet(this,t[3+n]),d=i.internalGet(this,t[6+n]),h=i.internalGet(this,t[7+n]),p=a<=o?c+Math.round(o/2-a/2):c-d,f=s<=l?u+Math.round(l/2-s/2):u-h,g=O.arrayPool.getInstance();return g[0]=p-i.internalGet(this,t[8+n]),g[1]=f-i.internalGet(this,t[9+n]),this._zoomedImagePosition_lastOwnRet=g}})}),_validateScrollOnContentOrContainerResize:l.h("scrollMaxX","scrollMaxY","width","height",(function(e,t,n,i){e&&t&&n&&i&&this.validateScrollPosition()})),scrollXFraction:i.b({readOnly:!0,dependencies:["scrollX","scrollRangeX"],get:Object.assign((function(){return this.scrollX/this.scrollRangeX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),scrollYFraction:i.b({readOnly:!0,dependencies:["scrollY","scrollRangeY"],get:Object.assign((function(){return this.scrollY/this.scrollRangeY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),canScrollX:i.b(a.c("canScrollHorizontally")),canScrollY:i.b(a.c("canScrollVertically")),_defaultZoomAnchorX:i.b({dependencies:["mouseX","insetCenterX"],readOnly:!0,get:Object.assign((function(){return this.mouseX||this.insetCenterX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),desiredZoomAnchorX:i.b(),zoomAnchorX:C.d({readOnly:!0,get:function(){return void 0!==this.desiredZoomAnchorX?this.desiredZoomAnchorX:this._defaultZoomAnchorX}}),_defaultZoomAnchorY:i.b({dependencies:["mouseY","insetCenterY"],readOnly:!0,get:Object.assign((function(){return this.mouseY||this.insetCenterY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),desiredZoomAnchorY:i.b(),zoomAnchorY:C.d({readOnly:!0,get:function(){return void 0!==this.desiredZoomAnchorY?this.desiredZoomAnchorY:this._defaultZoomAnchorY}}),zoomOffsetLeft:E.b(0),zoomOffsetTop:E.b(0),allowImageOffsetWhileZooming:i.b(!1),_correctScrollPositionForImageSizeChange:l.h("imageLeft","imageTop","imageWidth","imageHeight","isZoomed",M.a((function(){var e=this.imageTop,t=this.imageLeft,n=this.imageWidth,i=this.imageHeight,r=this.isZoomed,a=this._cspfzc_last_imageTop,s=this._cspfzc_last_imageLeft,o=this._cspfzc_last_imageWidth,l=this._cspfzc_last_imageHeight;if(this._cspfzc_last_imageTop=e,this._cspfzc_last_imageLeft=t,this._cspfzc_last_imageWidth=n,this._cspfzc_last_imageHeight=i,r&&n!==o&&i!==l){var c=this.zoomAnchorX,u=this.zoomAnchorY,d=t-(c-(c-s)/o*n),h=e-(u-(u-a)/l*i),p=this.allowImageOffsetWhileZooming&&!this.canScrollX,f=this.allowImageOffsetWhileZooming&&!this.canScrollY,g=d,m=h;p&&(g=0,this.zoomOffsetLeft+=.9*d),f&&(m=0,this.zoomOffsetTop+=.9*h),(g||m)&&this.attemptScrollBy(g,m),this._cspfzc_last_imageLeft=this.imageLeft,this._cspfzc_last_imageTop=this.imageTop}}))),handleScroll:function(e){var t=this,n=arguments;if(!e||!e.shiftKey&&!e.altKey)return t.__s._$BDc$handleScroll.apply(t,n);this.zoomLevel=Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,this.zoomLevel*(1+e.deltaY/100)))},_maintainOwnElementPositionStyling:l.h("translationX",(function(e){this.style.translateDevicePixels(e||0,0).layerBack()})),__superMap:{_$BDc$handleScroll:"handleScroll"}}).extend({gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return e!==this.scrollGestureRecognizer?t.__s._$BS3$gestureRecognizerShouldReceive.apply(t,n):Boolean(this.canScrollX||this.canScrollY)},__superMap:{_$BS3$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"},staticMembers:{__QUALIFIED_CLASS_NAME__:"VisualPresenterView"}}),Q={},Y=[NaN,NaN],Z=[NaN,NaN];function X(e,t){return e-t}var J=n(1271),ee=n(487),te=J.a.extend(ee.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["pok-progress-pie"],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"shouldShow",truevalue:"1",falsevalue:"0",attributes:{},unit:null,property:"opacity"}}}},__QUALIFIED_CLASS_NAME__:"SpecialPPVProgressPieView"},presenterView:i.b(),init:function(){var e=this,t=arguments;e.__s._$HF$init.apply(e,t),this.style.set("transition","opacity 0.2s")},progress:i.b({readOnly:!0,dependencies:["presenterView.imageDerivativeLoader.totalProgress","canShow"],get:Object.assign((function(){return this.canShow?.25+.75*(this.getPath("presenterView.imageDerivativeLoader.totalProgress")||0):0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?.25+.75*(i.internalGetPath(this,t[0+n])||0):0}})}),shouldShowError:a.c("presenterView.imageDerivativeLoader.shouldShowError"),requiresDerivativeToShow:i.b(!0),canShow:i.b({readOnly:!0,dependencies:["requiresDerivativeToShow","presenterView.isBackgroundablySteadilyAloneInParent","presenterView.derivative"],get:Object.assign((function(){return this.presenterView.isBackgroundablySteadilyAloneInParent&&(!this.requiresDerivativeToShow||this.presenterView.derivative)}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])&&(!i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n]))}})}),shouldShow:i.b({readOnly:!0,dependencies:["renderedProgress","shouldShowError","canShow"],writeDependencies:[],get:Object.assign((function(){return(this.renderedProgress<1||this.shouldShowError)&&this.canShow}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])<1||i.internalGet(this,t[1+n]))&&i.internalGet(this,t[2+n])}})}),color:i.b("white"),unfilledColor:i.b("rgba(0, 0, 0, 0.2)"),shadowColor:i.b("rgba(0, 0, 0, 0.2)"),size:i.b(25),__superMap:{_$HF$init:"init"}}),ne=te.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["pok-center-large"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"left",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"top",attributes:{},unit:"px",property:"top"}}}},__QUALIFIED_CLASS_NAME__:"SpecialLargePPVProgressPieView"},requiresDerivativeToShow:i.b(!1),color:i.b("rgba(0, 0, 0, 0.1)"),unfilledColor:i.b("transparent"),shadowColor:i.b("transparent"),size:i.b({readOnly:!0,dependencies:["presenterView.imageWidth","presenterView.insetWidth","presenterView.imageHeight","presenterView.insetHeight"],get:Object.assign((function(){return Math.round(.2*Math.min(this.getPath("presenterView.imageWidth"),this.getPath("presenterView.insetWidth"),this.getPath("presenterView.imageHeight"),this.getPath("presenterView.insetHeight")))}),{__CW__getter:function(e,t,n,i){return Math.round(.2*Math.min(this.getPath("presenterView.imageWidth"),i.internalGetPath(this,t[1+n]),i.internalGetPath(this,t[2+n]),i.internalGetPath(this,t[3+n])))}})}),left:i.b({readOnly:!0,dependencies:["size","presenterView.insetCenterX"],get:Object.assign((function(){return Math.round(this.getPath("presenterView.insetCenterX")-this.size/2)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGetPath(this,t[1+n])-i.internalGet(this,t[0+n])/2)}})}),top:i.b({readOnly:!0,dependencies:["size","presenterView.insetCenterY"],get:Object.assign((function(){return Math.round(this.getPath("presenterView.insetCenterY")-this.size/2)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGetPath(this,t[1+n])-i.internalGet(this,t[0+n])/2)}})})}),ie=n(117),re=n(791);var ae={};function se(e,t,n){if(le[e]&&le[e][t]&&le[e][t][n])return le[e][t][n];var i=n?Math.round(12*e):Math.round(10*e),r=oe.font="400 "+i+"px "+c.c(document.body).get("font-family"),a=oe.measureText(t);le[e]||(le[e]={}),le[e][t]||(le[e][t]={});var s=n?16:0,o=n?25*e:16*e,l=n?6:3;return le[e][t][n]={width:(l+s)*e+Math.round(a.width)+l*e,height:Math.round(o),textWidth:a.width,textHeight:.73*i,textFont:r}}var oe=document.createElement("canvas").getContext("2d"),le={},ce="data:image/svg+xml;base64,"+re.a.encodeFromString(String(n(1304)).trim()),ue=new Image;ue.src=ce;var de=D.a.extend(ee.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",classes:["pok-canvas-badge"],name:"badgeElement",attributes:{width:"0",height:"0"}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"CanvasBadgeView"},isHidden:i.b(),displayString:i.b(),icon:i.b(),_maintainBadgeElement:l.h({inputs:["isAttached","presenterView.dpr"],callback:function(e,t){if(e){var n=this.displayString,i=this.badgeElement,r=this.icon;if(this._lastRenderedBadgeDPR!==t){this._lastRenderedBadgeDPR=t,this._lastRenderedBadgeDisplayString=n;var a=se(t,n,!0);i.width=a.width,i.height=a.height,function(e,t,n,i,r,a){var s=ae[i]?ae[i][r]&&ae[i][r][a]:void 0;if(!s){ae[i]||(ae[i]={}),ae[i][r]||(ae[i][r]={});var o=document.createElement("canvas"),l=o.getContext("2d");ae[i][r][a]=o,s=o;var c=se(i,r,a);o.width=c.width,o.height=c.height,function(e,t,n,i,r,a){var s=se(i,r,a),o=s.width,l=s.height,c=3*i;e.beginPath(),e.moveTo(0+c,0),e.arcTo(0+o,0,0+o,0+l,c),e.arcTo(0+o,0+l,0,0+l,c),e.arcTo(0,0+l,0,0,c),e.arcTo(0,0,0+o,0,c),e.closePath(),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill();var u=a?6:3;if(u*=i,a)if("SDOF"===a){var d=Math.ceil(ue.height*i),h=Math.ceil(ue.width*i),p=25*i/2-d/2;e.drawImage(ue,Math.round(p),p,h,d)}else{var f=1*i,g=12*i,m=10*i,_=0+u,v=0+l/2-m/2|0,b=g-4*f,y=m-4*f;e.fillStyle="rgb(0, 0, 0)";for(var w=0;w<3;w++)e.fillRect(_+2*w*f,v+2*w*f,b,f),e.fillRect(_+2*w*f,v+2*w*f+f,f,y-f);e.fillRect(_+4*f+f,v+m-f,b-f,f),e.fillRect(_+g-f,v+m-y+f,f,y-2*f)}e.font=s.textFont,e.fillStyle="rgb(0, 0, 0)",e.fillText(r,0+o-u-s.textWidth,0+(l+s.textHeight)/2)}(l,0,0,i,r,a)}e.drawImage(s,t,n)}(i.getContext("2d"),0,0,t,n,r),c.c(i).set("transform-origin","0 0").scale(1/t,1/t),c.c(this.element).set("width",a.width/t).set("height",a.height/t)}}}})}),he=de.extend({displayString:i.b(ie.d("Badge.HDR")),icon:i.b("HDR"),isHidden:i.b({readOnly:!0,dependencies:["presenterView.media.isHdr"],get:Object.assign((function(){return!this.getPath("presenterView.media.isHdr")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"HDRBadgeView"}}),pe=de.extend({displayString:i.b(ie.d("Badge.SDOF")),icon:i.b("SDOF"),isHidden:i.b({readOnly:!0,dependencies:["presenterView.media.isSDOF"],get:Object.assign((function(){return!this.getPath("presenterView.media.isSDOF")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SDOFBadgeView"}}),fe=n(389),ge=n(1283),me={mixinDependencies:[fe.a,$.a],unzoomedZoomLevel:i.b(),zoomLevel:i.b(),maxZoomLevel:i.b(),canZoom:i.b(),init:function(){var e=this,t=arguments;e.__s._$Bt$init.apply(e,t),this.pinchToZoomGR=ge.a.extend({unzoomedZoomLevel:this.bindingFor("unzoomedZoomLevel"),currentZoomLevel:this.bindingFor("zoomLevel"),maxAllowedZoomLevel:this.bindingFor("maxZoomLevel")}).create({event:"pinchToZoom",delegate:this}),this.addGestureRecognizer(this.pinchToZoomGR)},pinchToZoomGR:C.d({strong:!0}),isPinchZoomInProgress:i.b(),pinchToZoom:function(e){var t=e.state,n=e.pinchZoomLevel,i=e.anchorPoint;if(t===o.b.Began&&(this.allowImageOffsetWhileZooming=!0),t===o.b.Ended)this.allowImageOffsetWhileZooming=!1,n!==this.zoomLevel&&this.zoomToLevel(n),this.clearZoomOffsets();else{var r=this._convertAnchorPointToView(i);this.desiredZoomAnchorX=r.x,this.desiredZoomAnchorY=r.y,this.zoomLevel=n}this.isPinchZoomInProgress=t===o.b.Began||t===o.b.Changed},doubleTapZoom:function(e){var t;if(this.zoomIsAllowed())if(this.zoomLevel===this.unzoomedZoomLevel){var n=this._convertAnchorPointToView(e);this.desiredZoomAnchorX=n.x,this.desiredZoomAnchorY=n.y,t=Math.min(this.maxZoomLevel,3*this.unzoomedZoomLevel),this.slowZoomToLevel(t)}else this.slowZoomToFit()},_convertAnchorPointToView:function(e){var t=this.element.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}},zoomIsAllowed:function(){return this.primaryInteractionMode===y.a.TOUCH&&this.canZoom},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return!(e===this.pinchToZoomGR&&!this.zoomIsAllowed())&&n.__s._$1G5$gestureRecognizerShouldReceive.apply(n,i)},__superMap:{_$Bt$init:"init",_$1G5$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},_e=q.extend(me).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["pok-main-canvas"],name:"_tiledCanvasElement"},{type:"ELEMENT",tagname:"div",classes:["pok-derivative-container"],name:"derivativeContainer"}],classes:["pok-derivative-display-elements-positioner"],name:"derivativeDisplayElementsPositioner"}],classes:["pok-derivative-display-elements-clipper"],name:"derivativeDisplayElementsClipper"},{type:"VIEWOUTLET",tagname:"view",name:"largeProgressPieView"}],classes:["pok-photo-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideMainDerivative",truevalue:"hide-main-derivative",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotoPresenterView"},prettyPaintDelay:150,_lastPaintTime:0,canHoldDerivatives:i.b(!0),shouldHideMostProminentDisplayOfMediaWithPK:i.b(),isParallaxEffectEnabled:i.b(!1),shouldHideMainDerivative:i.b({readOnly:!0,dependencies:["media.pk","shouldHideMostProminentDisplayOfMediaWithPK"],get:Object.assign((function(){return this.getPath("media.pk")===this.shouldHideMostProminentDisplayOfMediaWithPK}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===i.internalGet(this,t[1+n])}})}),canvas:i.b({readOnly:!0,dependencies:["_tiledCanvasElement"],get:Object.assign((function(){var e=this._tiledCanvasElement;if(!e)return e;var t=new f.a(e);return t.width=t.height=0,t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return r;var a=new f.a(r);return a.width=a.height=0,a}})}),offscreeniness:i.b(),imageDerivativeLoader:i.b({strong:!0,defaultValue:r.c(h.a.extend({shouldCorrectForDevicePixelRatio:!0,width:a.c("owner.imageWidth"),height:a.c("owner.imageHeight"),offscreeniness:a.c("owner.offscreeniness"),derivativeRequestReason:i.b({readOnly:!0,dependencies:["owner.isZoomed"],get:Object.assign((function(){return this.getPath("owner.isZoomed")?p.a.ONEUP_MAIN_DISPLAY_ZOOM:p.a.ONEUP_MAIN_DISPLAY}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?p.a.ONEUP_MAIN_DISPLAY_ZOOM:p.a.ONEUP_MAIN_DISPLAY}})}),media:i.b({readOnly:!0,dependencies:["owner.canHoldDerivatives","owner.media"],get:Object.assign((function(){return this.getPath("owner.canHoldDerivatives")?this.getPath("owner.media"):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):void 0}})}),areRequestsAllowed:i.b({readOnly:!0,dependencies:["owner.isSteadyInParent","owner.isBackgroundablySteadyInParent"],get:Object.assign((function(){return this.getPath("owner.isSteadyInParent")||this.getPath("owner.isBackgroundablySteadyInParent")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),allowsShrinking:i.b({readOnly:!0,dependencies:["owner.isShowingInParent"],get:Object.assign((function(){return!this.getPath("owner.isShowingInParent")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),priority:i.b({readOnly:!0,dependencies:["owner.isTargetInParent","offscreeniness"],get:Object.assign((function(){return this.getPath("owner.isTargetInParent")?105e3:115e3+(this.offscreeniness||0)}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?105e3:115e3+(i.internalGet(this,t[1+n])||0)}})})}))}),derivative:i.b(a.c("imageDerivativeLoader.derivative")),shouldRenderUsingImageApproach:i.b({readOnly:!0,dependencies:["derivative","derivative.internalImageUser","media.cannotHaveImageDerivative"],get:Object.assign((function(){if(this.getPath("media.cannotHaveImageDerivative"))return!1;var e=this.derivative;if(!e)return!0;var t=s.a.sharedInstance;if(t.isEdge||t.isIE)return!1;if(e.geometricLength>3072&&!t.isChrome)return!1;if(t.isSafari||t.isFirefox)return!1;if("IMG"!==e.getPath("element.tagName"))return!1;var n=this.getPath("derivative.internalImageUser");return!n||n===this}),{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[2+n]))return!1;var r=i.internalGet(this,t[0+n]);if(!r)return!0;var a=s.a.sharedInstance;if(a.isEdge||a.isIE)return!1;if(r.geometricLength>3072&&!a.isChrome)return!1;if(a.isSafari||a.isFirefox)return!1;if("IMG"!==r.getPath("element.tagName"))return!1;var o=i.internalGetPath(this,t[1+n]);return!o||o===this}})}),init:function(){var e=this,t=arguments;e.__s._$22u$init.apply(e,t),this.oneUpDoubleTapGR=g.a.create({event:"oneUpDoubleTap",delegate:this}),this.addGestureRecognizer(this.oneUpDoubleTapGR)},cleanup:function(){var e=this,t=arguments;this._isCleaningUpForPool=!0,this._ul_canvasCSSWidth=this._ul_canvasCSSHeight=this._ul_canvasXScale=this._ul_canvasYScale=this._ul_canvasLeft=this._ul_canvasTop=this._ul_derivativeId=this._ul_isZoomed=this._ul_dpr=this._ul_canvasWidth=this._ul_canvasHeight=void 0,clearTimeout(this._prettyPaintTimeout),this._lastPaintTime=0,this.canZoom=!1,this.canvas.width=this.canvas.height=0,e.__s._$2FA$cleanup.apply(e,t),this._isCleaningUpForPool=!1},oneUpDoubleTap:function(e){e.state===o.b.Ended&&(this.shouldHideMainDerivative||(this.primaryInteractionMode!==y.a.TOUCH?this.sendEvent("userDidDoubleTapInOneUp"):this.doubleTapZoom(e.location)))},pointerDown:function(e){return this.sendEvent("userDidPointerDownInOneUp"),!1},_raiseCanZoomWhenAppropriate:l.h("unzoomedZoomLevel","derivative",(function(){if(!this._isCleaningUpForPool)return void 0!==this.overrideZoom?this.overrideZoom:void(this.derivative&&!this.canZoom&&(this.canZoom=!0))})),imageSizeTracker:i.b({strong:!0,defaultValue:r.c(m.a,{zeroSpeedCutoff:3,emaHalfLife:.2})}),_provideDeltaToImageSizeTracker:l.h("imageWidth","imageHeight",(function(e,t){var n=e+t,i=this._pdtist_last_imageSize;this._pdtist_last_imageSize=n;var r=n-i;r&&this.imageSizeTracker.handleDelta(r)})),isImageSizeStationary:i.b(a.c("imageSizeTracker.isStationary")),isRenderDisabled:function(){return!this.media},_renderSelfWhenNeeded:l.h("imageLeft","imageTop","imageWidth","imageHeight","derivative","isZoomed","dpr","isShowingInParent","isBackgroundablySteadyInParent","isImageSizeStationary","shouldRenderUsingImageApproach",(function(){this.renderSelfSoon()})),renderSelfSoon:function(){this._renderSelfTimeout&&_.a(this._renderSelfTimeout),this._renderSelfTimeout=_.b(this._renderSelfNow)},_renderSelfNow:v.b((function(){this._renderSelfTimeout=null,this.renderSelf()})),renderSelf:function(){clearTimeout(this._prettyPaintTimeout);var e=this.imageWidth,t=this.imageHeight,n=this.isShowingInParent,i=this.isBackgroundablySteadyInParent;if(e&&t&&(n||i)){var r=this.isRenderDisabled(),a=this.shouldRenderUsingImageApproach,s=!r&&!a;this.canvas.style.display=s?"block":"none",s?this._renderSelfWithCanvas():this.canvas.width=this.canvas.height=0;var o=!r&&a;this.derivativeContainer.style.display=o?"block":"none",o&&this._renderSelfWithImage()}},_renderSelfWithImage:function(){var e,t,n=this.derivativeContainer,i=c.c(n),r=this.imageWidth,a=this.imageHeight,s=this.imageLeft,o=this.imageTop,l=this.derivative,u=this.isZoomed,d=this.dpr;!l||!u&&this.isImageSizeStationary?(e=Math.min(Math.ceil(d*r),l?l.physicalWidth:1/0),t=Math.min(Math.ceil(d*a),l?l.physicalHeight:1/0)):(e=l.physicalWidth,t=l.physicalHeight);var h=e/d,p=t/d,f=r/h,g=a/p,m=s,_=o;i.set("position","absolute").set("background-color","#eeeeee").set("transform-origin","0 0").set("width",h).set("height",p).layerBack().translateDevicePixels(m,_).scale(f,g)},_maintainDerivativeContainerContents:l.h({inputs:["derivative","shouldRenderUsingImageApproach"],callback:function(e,t){var n=t&&e;if(!n||n.internalImageUser!==this){var i=this._appendedImagelike;i&&(i.parentNode.removeChild(i),i.style.cssText="",i.release(this));var r=this._appendedImagelike=n&&n.checkOutAppendableImagelike(this).retain(this);r&&(r.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%;",this.derivativeContainer.appendChild(r))}}}),_maintainDerivativeOffsetForParallaxEffect:l.h({inputs:["isParallaxEffectEnabled","translationX","insetLeft","insetRight","imageLeft","imageTop","imageWidth","imageHeight","pinnedImageLeft","pinnedImageRight"],callback:function(e,t,n,i,r,a,s,o,l,u){var d=this.derivativeDisplayElementsPositioner,h=this.derivativeDisplayElementsClipper;if(!e)return c.c(d).clear("transform").clear("left").clear("top"),void c.c(h).clear("overflow").clear("left").clear("top").clear("width").clear("height");var p=(t=t||0)<0?n-(l-Math.abs(t)):i-(u-Math.abs(t)),f=(t<0?1:-1)*Math.max(0,p*(1/8));c.c(d),c.c(d).translateX(f).layerBack().set("left",-r).set("top",-a),c.c(h).set("overflow","hidden").set("left",r).set("top",a).set("width",s).set("height",o)}}),_renderSelfWithCanvas:function(){var e,t,n=this.canvas,i=c.c(n),r=this.imageWidth,a=this.imageHeight,s=this.imageLeft,o=this.imageTop,l=this.derivative,d=this.isZoomed,h=this.dpr,p=n.getContext("2d");!l||!d&&this.isImageSizeStationary?(e=Math.min(Math.ceil(h*r),l?l.physicalWidth:1/0),t=Math.min(Math.ceil(h*a),l?l.physicalHeight:1/0)):(e=l.physicalWidth,t=l.physicalHeight);var f=e/h,g=t/h,m=r/f,_=a/g,v=s,y=o,w=!1,I=!1;this._ul_canvasCSSWidth!==(this._ul_canvasCSSWidth=f)&&(w=I=!0),this._ul_canvasCSSHeight!==(this._ul_canvasCSSHeight=g)&&(w=I=!0),this._ul_canvasXScale!==(this._ul_canvasXScale=m)&&(w=!0),this._ul_canvasYScale!==(this._ul_canvasYScale=_)&&(w=!0),this._ul_canvasLeft!==(this._ul_canvasLeft=v)&&(w=!0),this._ul_canvasTop!==(this._ul_canvasTop=y)&&(w=!0),w&&(I&&n.setCSSSize(f,g),i.set("position","absolute").set("transform-origin","0 0").set("width",f).set("height",g).layerBack().translateDevicePixels(v,y).scale(m,_));var S=n.width!==e||n.height!==t,C=S;C=C||I;var E=l&&l.derivativeId,A=Date.now()-this._lastPaintTime<this.prettyPaintDelay;if(this._ul_derivativeId!==(this._ul_derivativeId=E)&&(C=!0),this._ul_isZoomed!==(this._ul_isZoomed=d)&&(C=!0),this._ul_dpr!==(this._ul_dpr=h)&&(C=!0),this._ul_canvasWidth!==(this._ul_canvasWidth=e)&&(C=!0),this._ul_canvasHeight!==(this._ul_canvasHeight=t)&&(C=!0),this._ul_getsPrettyPaint!==(this._ul_getsPrettyPaint=A)&&(C=!0),C){S?(n.width=e,n.height=t):p.clearRect(0,0,e,t);var O=!1;if(l)O=l.drawIntoContextUsingCustomDrawImage(p,b.b.avoidingWorkIf(A),0,0,e,t)||O;else{var T=p.createRadialGradient(e/2,t*(.5+.5*this.unloadedGradientVerticalCenterOffsetFraction),0,e/2,t/2,Math.max(e,t)/1.5);T.addColorStop(0,this.unloadedGradientCenterColor),T.addColorStop(1,this.unloadedGradientOuterColor),p.fillStyle=T,p.fillRect(0,0,e,t)}this._lastPaintTime=Date.now(),O&&(this._prettyPaintTimeout=u.a(this._renderSelfNow,this.prettyPaintDelay))}},unloadedGradientVerticalCenterOffsetFraction:-1/3,unloadedGradientCenterColor:"#f8f8f8",unloadedGradientOuterColor:"#ddd",largeProgressPieView:i.b({readOnly:!0,strong:!0,dependencies:["isSteadilyAloneInParent","media.renderableImageDerivativeInfos","_largeProgressPieView","derivative"],get:Object.assign((function(){var e=!this.derivative&&this.isSteadilyAloneInParent&&this.getPath("media.renderableImageDerivativeInfos");return e&&(e=e&&e.length),e?this._largeProgressPieView:null}),{__CW__getter:function(e,t,n,i){var r=!i.internalGet(this,t[3+n])&&i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]);return r&&(r=r&&r.length),r?i.internalGet(this,t[2+n]):null}})}),_largeProgressPieView:i.b({readOnly:!0,strong:!0,get:function(){return ne.create({presenterView:this})}}),bottomRightBadgeViewClasses:d.b([te]),topLeftBadgeViewClasses:d.b([he,pe]),_badgeInsetFromLeft:i.b(10),__superMap:{_$22u$init:"init",_$2FA$cleanup:"cleanup"}})},function(e,t,n){var i=n(241);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){"use strict";var i=n(243),r=n(163),a=n(134),s=n(145),o=a("species");e.exports=function(e){var t=i(e),n=r.f;s&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(216);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){var i=n(212),r="["+n(422)+"]",a=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),o=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},function(e,t,n){"use strict";var i=n(129);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";e.exports=function(e,t,n){return t?(n=n||/{([^{}]*)}/g,e.replace(n,(function(e,n){var i=t[n];return"string"===typeof i||"number"===typeof i||"boolean"===typeof i?i:e}))):e}},function(e,t,n){"use strict";var i,r=n(1078),a=n(1079),s=window.document.documentElement;try{i=window.top.document.documentElement}catch(d){i=s}var o=n(634),l={},c=function(e){var t,n;try{t=e||i.getAttribute("lang")}catch(r){t=s.getAttribute("lang")}if(t)switch(t.toLowerCase()){case"es-418":n="es-LA";break;case"pt":n="pt-BR";break;default:n=t}else n="en-US";return n},u=function(e){return e=c(e),void 0!==l[e]};e.exports={getLanguage:c,getTranslation:function(e){var t=c((e=e||{}).lang);if(u(t))return e.callback?(e.callback(l[t]),null):l[t];if(!e.callback)throw new Error("To use Localization.getTranslation you must either pass a callback or ensure the translation is ready via Localization.translationReady");var n=e.basePath||"/global/ac_media_player/scripts/ac_media_languages/",i=r[t]?n+r[t]:n+r["en-US"],s=a,d=function(){l[t]=s,e.callback(s)};return e.forceEnglishLabels?(d(),l[t]):(o.get(i,{success:function(n){try{s=Object.assign(s,JSON.parse(n)),l[t]=s,e.callback(s)}catch(i){d()}},error:d}),null)},translationReady:u}},function(e,t,n){"use strict";var i=n(252).os,r=n(642).original,a=n(432),s=n(433);function o(){var e=a.getWindow();return!r()&&!e.orientation||i.windows}e.exports=s(o),e.exports.original=o},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var i=n(384),r=n(40),a=n(319),s=n(455),o=["is-","are-","has-"],l=Object(a.a)(["isConnected","isInitialized","isDisposed","isAbstract","propertiesAreInitialized","window"]),c={},u=function(e,t,n){n=n||"";var r=Object(i.a)(e),a=r?l:c;for(var s in e)if(!a[s]&&"_"!==s[0]&&e.hasOwnProperty(s)){var o=r?e.get(s):e[s];d(s,o,t,n)}},d=function(e,t,n,i){i=i||"";var r=typeof t;if("boolean"===r){for(var a,l,c=Object(s.a)(e),u=0;a=o[u];u++)l=a.length,c.substring(0,l)===a&&(c=c.substring(l));c&&n.classList.toggle(c,t)}else{if("object"===r||"function"===r){var d=t&&t.toString;d!==h&&d!==p&&d!==f||(t=null)}var g=i+Object(s.a)(e);t||0===t?n.setAttribute(g,""+t):n.removeAttribute(g)}},h=Object.prototype.toString,p=Function.prototype.toString,f=r.a.prototype.toString},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var i=n(138),r=n(55),a=n(139),s=n(209),o=n(201),l=n(775),c=n(99),u=Object(i.b)("ModifierKeys",(function(e){e("Shift"),e("Ctrl"),e("Option"),e("Meta"),e("Cmd"),e("Win")}));u.Alt=u.Option;var d=c.b.Ended,h=c.b.Failed,p=c.a.extend({initFromPool:function(){var e=this,t=arguments;e.__s._$MX$initFromPool.apply(e,t);var n=this.modifiers;n instanceof Set||(this.modifiers=new Set(n))},numberOfTapsRequired:1,modifiers:Object(r.c)(Set),shouldPreventDefault:!1,targetElement:null,stateGenerator:l.a,maxDelayBetweenTaps:300,maxDurationOfTaps:500,dragThreshold:100,_tapCount:0,_handlingPointerId:NaN,_lockedCursor:!1,shouldReceive:function(e){var t=this,n=arguments;return!(!this.isModifierValid(e)||!isNaN(this._handlingPointerId))&&("click"!==e.type||0!==e.detail||s.a.sharedInstance.isIE?t.__s._$17j$shouldReceive.apply(t,n):this.delegate.gestureRecognizerShouldReceive(this,e))},shouldRequireFailureOf:function(e){var t=this,n=arguments;return e.instanceOf(p)&&this.modifiers.size<e.modifiers.size||t.__s._$1GQ$shouldRequireFailureOf.apply(t,n)},isModifierValid:function(e){var t=this.modifiers;if(t.has(u.Shift)&&!e.shiftKey)return!1;if(t.has(u.Ctrl)&&!e.ctrlKey)return!1;var n=o.a.sharedInstance,i=n.isWindows;return!(n.isMac&&!t.has(u.Ctrl)&&e.ctrlKey)&&!(t.has(u.Option)&&!e.altKey)&&!(t.has(u.Meta)&&!e.metaKey)&&!(t.has(u.Cmd)&&!e.metaKey&&!i)&&!(t.has(u.Win)&&!e.metaKey&&i)},_failTimerId:NaN,_startFailTimer:function(e){var t=this;this._failTimerId=Object(a.a)((function(){t.state=h}),e)},_cancelTimer:function(){var e=this._failTimerId;isNaN(e)||(clearTimeout(e),this._failTimerId=NaN)},pointerDown:function(e){0===this._tapCount&&(this.location={x:e.clientX,y:e.clientY},this.targetElement=e.target),this._handlingPointerId=e.pointerId,this._cancelTimer(),0===this._tapCount&&(this.view.sendEvent("lockCursor",this.getPath("view.style.cursor")),this._lockedCursor=!0),this.numberOfTapsRequired>1&&this._startFailTimer(this.maxDurationOfTaps)},isEventTooFar:function(e){var t=this.location,n=t.x,i=t.y,r=e.clientX,a=e.clientY;return Math.pow(r-n,2)+Math.pow(a-i,2)>this.dragThreshold},shouldFailGesture:function(e){return this.isEventTooFar(e)},pointerMove:function(e){this.shouldFailGesture(e)&&(this.state=h)},pointerUp:function(e){this._cancelTimer(),this.shouldFailGesture(e)?this.state=h:(this._tapCount++,this._tapCount>=this.numberOfTapsRequired?this.state=d:this._startFailTimer(this.maxDelayBetweenTaps)),this._handlingPointerId=NaN},pointerCancel:function(e){this.state=h},click:function(e){this.pointerDown(e),this.pointerUp(e)},dispose:function(){this._cancelTimer(),this._lockedCursor&&this.view.sendEvent("releaseCursor"),this.__s._$2V4$dispose.call(this)},didEnterPool:function(){var e=this,t=arguments,n=this.constructor.prototype,i=this.modifiers;i.clear(),this.numberOfTapsRequired=n.numberOfTapsRequired,e.__s._$2c_$didEnterPool.apply(e,t)},reset:function(){this.__s._$2db$reset.call(this),this._cancelTimer(),this.location=null,this._tapCount=0,this._handlingPointerId=NaN,this.targetElement=null,this._lockedCursor&&this.view.sendEvent("releaseCursor"),this._lockedCursor=!1},__superMap:{_$MX$initFromPool:"initFromPool",_$17j$shouldReceive:"shouldReceive",_$1GQ$shouldRequireFailureOf:"shouldRequireFailureOf",_$2V4$dispose:"dispose",_$2c_$didEnterPool:"didEnterPool",_$2db$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TapGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e){for(var t=[],n=/((?:(?:\\\\)*|(?:\\\.)|[^\\.])+)(?:\.|$)/g,r=e.length;n.lastIndex<r;){var a=n.exec(e);0===(a=a[1]).length&&Object(i.b)("Cannot parse a property path with an empty component ('%{path}').",{path:e}),a=(a=a.replace(/\\\./g,".")).replace(/\\\\/g,"\\"),t.push(a)}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(533),r=n(534),a=n(532);function s(e,t){var n=Object(a.a)(t,e);if(n)return Object(i.a)(n,Object(r.a)(t))}},function(e,t,n){"use strict";function i(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=n);var r=t.length;e.length=r+n-i;for(var a=i,s=n;a<r;a++,s++)e[s]=t[a];return e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(e){return"boolean"===typeof e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(280),r=n(13),a=n(448);function s(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var l=Object(i.a)(arguments,0,1),c="_cw_boundFunction_"+Object(a.a)(arguments);null!==t&&void 0!==t||o(t);var u=t[c];return u||(u=t[c]=e.bind.apply(e,l),t[c]||o(t)),u}function o(e){Object(r.b)("CW.Utils.bindFunction cannot bind a function to a primitive or frozen object ("+e+" in this case). Use `Function#bind` instead.")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(160),r=n(51),a=i.a.extend({debugType:"Base",isCacheable:!0,calculateValueForNode:null,previousValueWasReplaced:r.a,flushNode:r.a,notifyNode:r.a,didAddParentToNode:r.a,didRemoveParentFromNode:r.a,didAddChildToNode:r.a,didRemoveChildFromNode:r.a,willRemoveChildFromNode:r.a,willRemoveParentFromNode:r.a,validateDescendantDownstreamNodeManager:r.a,wasDirtiedByParent:r.a,wasDirtiedBySelf:r.a,nodeWillFree:r.a,addDebugInfoForNode:r.a,staticMembers:{__QUALIFIED_CLASS_NAME__:"NodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(40),r=n(200),a=n(55),s=n(99),o=n(542),l=n(194),c=n(347);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return d(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var f=s.b.Possible,g=s.b.Began,m=s.b.Changed,_=s.b.Ended,v=s.b.Failed,b=s.b.Cancelled,y=["pointerUp","pointerCancel","click"],w=function(){function e(){this._map=new Map}var t=e.prototype;return t.get=function(){var e=this._map;return e.get.apply(e,arguments)},t.set=function(){var e=this._map;return e.set.apply(e,arguments)},t.add=function(e,t){var n=this._map,i=n.get(e);i||(i=new Set,n.set(e,i)),i.add(t)},t.has=function(e,t){var n=this._map.get(e);return!!n&&n.has(t)},t.hasAny=function(e){var t=this._map.get(e);return!!t&&t.size>0},t.delete=function(e,t){var n=this._map,i=n.get(e);i&&(i.delete(t),0===i.size&&n.delete(e))},t.deleteAll=function(e){this._map.delete(e)},t.clear=function(){this._map.clear()},t.keys=function(){return this._map.keys()},t.values=function(){return this._map.values()},t.entries=function(){return this._map.entries()},p(e,[{key:"size",get:function(){return this._map.size}}]),e}(),I=function(){function e(){this._map=new w,this._reverseMap=new w}var t=e.prototype;return t.add=function(e,t){var n=this._map,i=this._reverseMap;n.add(e,t),i.add(t,e)},t.get=function(e){return this._map.get(e)},t.getKeys=function(e){return this._reverseMap.get(e)},t.has=function(e,t){return this._map.has(e,t)},t.hasKey=function(e){return this._map.hasAny(e)},t.hasValue=function(e){return this._reverseMap.hasAny(e)},t.delete=function(e,t){var n=this._map,i=this._reverseMap;n.delete(e,t),i.delete(t,e)},t.deleteKey=function(e){var t=this._map,n=this._reverseMap,i=t.get(e);i&&(i.forEach((function(t){return n.delete(t,e)})),t.deleteAll(e))},t.deleteValue=function(e){var t=this._map,n=this._reverseMap,i=n.get(e);i&&(i.forEach((function(n){return t.delete(n,e)})),n.deleteAll(e))},t.clear=function(){var e=this._map,t=this._reverseMap;e.clear(),t.clear()},t.keys=function(){return this._map.keys()},t.values=function(){return this._reverseMap.keys()},t.entries=function(){return this._map.entries()},p(e,[{key:"sizeKeys",get:function(){return this._map.size}},{key:"sizeValues",get:function(){return this._reverseMap.size}}]),e}(),S=i.a.extend(r.a,{staticMembers:{_sequences:Object(a.c)(Set),addGestureRecognizersWithEvent:function(e,t,n){if("pointerDown"===e||"click"===e){if("click"===e){var i=t;t=l.a.create({nativeEvent:i,type:"click",pointerId:-1})}for(var r,a=u(this._sequences);!(r=a()).done;){var s=r.value;s.retain(this,"GestureRecognitionEventSequence#handleEvent: existing sequence");var o=s.addGestureRecognizersWithEvent(n,t);if(s.release(this,"GestureRecognitionEventSequence#handleEvent: existing sequence"),o)return!0}var c=this.create().retain(this,"GestureRecognitionEventSequence#handleEvent: new sequence"),d=c.addGestureRecognizersWithEvent(n,t);return d&&this._sequences.add(c),c.release(this,"GestureRecognitionEventSequence#handleEvent: new sequence"),d}},handleEvent:function(e,t){if("pointerDown"!==e&&"click"!==e)return!1;if("click"===e){var n=t;t=l.a.create({nativeEvent:n,type:"click",pointerId:-1})}for(var i,r=t.pointerId,a=u(this._sequences);!(i=a()).done;){var s=i.value;if(s.gestureRecognizersByPointerId.hasKey(r))return s.handleEvent(e,t),!0}return!1},cancelGestureRecognizer:function(e){e.state=v,e.reset()},__QUALIFIED_CLASS_NAME__:"GestureRecognitionEventSequence"},gestureRecognizers:Object(a.c)(Set),addGestureRecognizersWithEvent:function(e,t){var n=this,i=t.pointerId,r=this.gestureRecognizers,a=this.gestureRecognizersByPointerId,s=this.gestureRecognizerFailureDependencies;if(!a.hasKey(i)&&r.size){for(var o,l=u(r);!(o=l()).done;){var c=o.value;this._isGestureRecognizerAllowedToHandleEvents(c)&&c.shouldReceive(t)&&this._gestureRecognizerIsInterestedInPointerId(c,i)}if(!a.hasKey(i))return!1}var d=Array.from(e).filter((function(e){return e.isEnabled&&!e.sequence})).filter((function(e){return e.shouldReceive(t)}));if(d.forEach((function(e){return n._gestureRecognizerIsInterestedInPointerId(e,i)})),0===d.length)return a.hasKey(i);for(var h,p=u(d);!(h=p()).done;){var g=h.value;r.add(g),g.sequence=this;for(var m,_=!1,b=u(r);!(m=b()).done;){var y=m.value;if(y!==g&&((g.shouldRequireFailureOf(y)||y.shouldBeRequiredToFailBy(g))&&s.add(g,y),y.shouldRequireFailureOf(g)||g.shouldBeRequiredToFailBy(y))){var w=y.state;if(w!==f&&w!==v){_||(g.state=v,_=!0);continue}s.add(y,g)}}}return!0},handleEvent:function(e,t){var n=this,i=this.gestureRecognizers,r=this.gestureRecognizerFailureDependencies,a=t.pointerId;this._isHandlingEvent=!0,i.forEach((function(i){if(n._isGestureRecognizerAllowedToHandleEvents(i)&&n._isGestureRecognizerInterestedInEvent(i,t)){i[e](t);var a=i.state;Object(c.a)(t,"targetView.needsDefaultTouch")||!i.shouldPreventDefault||a!==g&&a!==m&&a!==_||r.hasKey(i)||t.preventDefault()}})),this._isHandlingEvent=!1,this._flushPendingStateChanges(),this.isPooled||y.includes(e)&&(this.gestureRecognizersByPointerId.deleteKey(a),this.releasePointerCapture(a))},_pendingStateChanges:Object(a.c)(Set),_flushPendingStateChanges:function(){var e=this,t=this._pendingStateChanges;t.forEach((function(t){e.isPooled||e.gestureRecognizerStateChanged(t,t.state)})),t.clear()},gestureRecognizerStateChanged:function(e,t){if(this._isHandlingEvent)this._pendingStateChanges.add(e);else switch(t){case b:this._callActionIfAllowed(e);case v:this._gestureRecognizerDidFail(e),this._cleanupGestureRecognizer(e);break;case g:case m:case _:this._callActionIfAllowed(e);break;default:throw new Error("GestureRecognitionEventSequence#gestureRecognizerStateChanged: invalid state "+t)}},gestureRecognizerIgnoredPointerId:function(e,t){var n=this.gestureRecognizersByPointerId;n.delete(t,e),n.hasKey(t)||this.releasePointerCapture(t)},gestureRecognizerFailureDependencies:Object(a.c)(I),gestureRecognizersByPointerId:Object(a.c)(I),cleanup:function(){var e=this;this.gestureRecognizers.forEach((function(t){return e._cleanupGestureRecognizer(t)})),this.gestureRecognizersByPointerId.clear(),this.gestureRecognizerFailureDependencies.clear(),this._begunGestureRecognizers.clear(),this._pendingStateChanges.clear(),this._isHandlingEvent=!1,this.constructor._sequences.delete(this),this.__s._$57i$cleanup.call(this)},_cleanupGestureRecognizer:function(e){var t=this.gestureRecognizersByPointerId,n=t.getKeys(e);if(t.deleteValue(e),n)for(var i,r=u(n);!(i=r()).done;){var a=i.value;t.hasKey(a)||this.releasePointerCapture(a)}this.gestureRecognizerFailureDependencies.deleteValue(e),this.gestureRecognizers.delete(e),this._pendingStateChanges.delete(e),e.reset()},_begunGestureRecognizers:Object(a.c)(Set),_gestureRecognizerDidBegin:function(e){var t=this._begunGestureRecognizers;if(!t.has(e)){t.add(e);var n=this.gestureRecognizerFailureDependencies;Array.from(this.gestureRecognizers).filter((function(t){return t!==e})).filter((function(t){return!C(e,t)})).filter((function(t){return!n.has(t,e)})).forEach((function(e){return e.state=v}))}},_gestureRecognizerDidFail:function(e){var t=this,n=this.gestureRecognizerFailureDependencies,i=n.getKeys(e);n.deleteValue(e),i&&i.forEach((function(e){n.hasKey(e)||t._callActionIfAllowed(e)}))},_gestureRecognizerIsInterestedInPointerId:function(e,t){var n=this.gestureRecognizersByPointerId;n.hasKey(t)||this.setPointerCapture(t),n.add(t,e)},_isGestureRecognizerInterestedInEvent:function(e,t){return this.gestureRecognizersByPointerId.has(t.pointerId,e)},_isGestureRecognizerAllowedToHandleEvents:function(e){var t=e.state;return t===f||t===g||t===m},_callActionIfAllowed:function(e){var t=e.state;t!==f&&t!==v&&(this.gestureRecognizerFailureDependencies.hasKey(e)||(e.gestureWasRecognized(),t!==g&&t!==m||this._gestureRecognizerDidBegin(e),t===_&&(Array.from(this.gestureRecognizers).filter((function(t){return t!==e})).filter((function(t){return!C(e,t)})).forEach((function(e){return e.state=v})),this._cleanupGestureRecognizer(e))))},__superMap:{_$57i$cleanup:"cleanup"}});function C(e,t){return!!e.shouldRecognizeSimultaneouslyWith(t)||!!t.shouldRecognizeSimultaneouslyWith(e)}["sendEvent","getPointerCapture","setPointerCapture","releasePointerCapture"].forEach((function(e){S.prototype[e]=function(){o.a[e].apply(this,arguments)}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n(0);var i=n(20),r=n(7),a=n(127),s=n(455),o=n(15),l=n(700),c=n(193),u={mixinDependencies:[i.b],staticMembers:{className:Object(o.d)({get:function(e){if(Object(a.a)(e)&&this.hasOwnProperty("_className"))return e;if(!this.superclass.kindOf(u))return!1;if(!this.isNamed)return!1;var t=Object(s.a)(this.name.replace(/\$[0-9]+$/,"")).replace(/\./g,"-");return this._className=t}}),shouldInheritClassNames:!0,_classNamesFromJSClassHierarchyCache:null,_getClassNamesFromJSClassHierarchy:function(){if(this.hasOwnProperty("_classNamesFromJSClassHierarchyCache")&&this._classNamesFromJSClassHierarchyCache)return this._classNamesFromJSClassHierarchyCache;var e;if(this.kindOf(u)){if(!1!==this.className&&""!==this.className&&(e=[this.className]),this.shouldInheritClassNames){var t=this._getClassNamesFromJSClassHierarchy.call(this.superclass);e=e?e.concat(t):t}}else e=[];return this._classNamesFromJSClassHierarchyCache=e}},document:document,element:Object(r.b)(),style:Object(r.b)({readOnly:!0,dependencies:["element"],get:Object.assign((function(){return Object(c.c)(this.element)}),{__CW__getter:function(e,t,n,i){return Object(c.c)(i.internalGet(this,t[0+n]))}})}),rect:Object(o.d)({readOnly:!0,get:function(){var e=this.element;return Object(l.a)(e)}}),origin:Object(o.d)({readOnly:!0,get:function(){var e=this.rect;return e?{x:e.left,y:e.top}:null}}),additionalClassNames:Object(r.b)({readOnly:!0}),_suppressApplicationOfClassNamesToElement:!0,_applyClassNamesToElement:Object(i.h)("element","additionalClassNames",(function(e,t){if(e&&!this._suppressApplicationOfClassNamesToElement){var n=this.element.classList;t&&n.add.apply(n,t);var i=this.constructor._getClassNamesFromJSClassHierarchy();i.length&&n.add.apply(n,i)}})),init:function(){var e=this,t=arguments;e.__s._$1_C$init.apply(e,t),this._suppressApplicationOfClassNamesToElement=!1,this._applyClassNamesToElement()},__superMap:{_$1_C$init:"init"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(13),r=n(123),a=n(162),s=n(546),o={mixinDependencies:[r.a,s.a],length:a.a.define(),toArray:function(){for(var e=this.createIterator().retain(),t=[],n=0;e.get("isValid");){var i=e.get("value");t[n++]=i,e.moveToNext()}return e.release(),t},encodedToArray:function(){for(var e=this.createIterator().retain(),t=[],n=0;e.isValid;){var i=e.encodedValue;t[n++]=i,e.moveToNext()}return e.release(),t},reduce:function(e,t,n){var r,a,s=this.createIterator().retain();for(arguments.length>=2?(r=t,a=0):s.isValid?(r=s.value,s.moveToNext(),a=1):Object(i.b)("reduce of empty array with no initial value");s.isValid;){var o=s.value;r=e.call(n,r,o,a++,this),s.moveToNext()}return s.release(),r},find:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),r;n.moveToNext()}n.release()},every:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(!e.call(t,r,i++,this))return n.release(),!1;n.moveToNext()}return n.release(),!0},some:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),!0;n.moveToNext()}return n.release(),!1},forEach:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");e.call(t,r,i++,this),n.moveToNext()}n.release()},contains:function(e){return this.encodedContains(this.encode(e))},encodedContains:function(e){for(var t=this.createIterator().retain();t.isValid;){if(t.encodedValue===e)return t.release(),!0;t.moveToNext()}return t.release(),!1},_isCwCollection:!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(40),r=n(394),a=n(314),s=n(55),o=n(15),l=n(143),c=n(449),u=n(20),d=n(752),h=n(7);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=i.a.extend(r.a,a.a,u.b,{init:function(){var e=this,t=arguments;e.__s._$Hb$init.apply(e,t),this._previousSerializer=this.serializer},_map:Object(s.c)(Object),length:Object(o.d)({readOnly:!0,defaultValue:0}),size:Object(o.d)({readOnly:!0,get:function(){return this.length}}),encodedAdd:function(e){var t=Object(l.b)(e),n=this._map;return!n.hasOwnProperty(t)&&(n[t]=e,this._length++,!0)},encodedRemove:function(e){var t=Object(l.b)(e),n=this._map;return!!n.hasOwnProperty(t)&&(delete n[t],this._length--,!0)},clear:function(){var e=this._map;for(var t in e)e.hasOwnProperty(t)&&delete e[t];this._length=0},has:function(){return this.contains.apply(this,arguments)},encodedContains:function(e){var t=Object(l.b)(e);return this._map.hasOwnProperty(t)},iteratorClass:Object(o.d)({readOnly:!0,defaultValue:d.a}),encodedToArray:function(){var e=this._map;return Object.keys(e).map((function(t){return e[t]}))},clone:function(){return this.constructor.create({serializer:this.serializer,_map:Object(c.a)(this._map),length:this.length})},serializer:Object(h.b)(),_previousSerializer:null,_reencodeItemsWhenSerializerChanges:Object(u.h)({inputs:["serializer"],notifyOnCreate:!1,callback:function(e){var t=this._previousSerializer;if(t!==e){var n=this.encodedToArray();t&&(n=n.map((function(e){return t.decode(e)}))),e&&(n=n.reduce((function(t,n){try{t.push(e.encode(n))}catch(i){}return t}),[])),this.clear();for(var i,r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(i=r()).done;){var a=i.value;this.encodedAdd(a)}}this._previousSerializer=e}}),__superMap:{_$Hb$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreSet"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var i=n(13),r=n(130),a=n(758),s=n(569),o=[],l=!1,c=!1,u=function(e,t){if(h>0||a.a.isProbablySVGImage(t)){var n=0,u=1,d=arguments.length;o.length=d+n-u;for(var p=u,f=n;p<d;p++,f++)o[f]=arguments[p];var g=o;return e.drawImage.apply(e,g),!0}var m=l,_=c;l=c=!1;var v,b,y,w,I,S,C,E,A=t.naturalWidth||t.width,O=t.naturalHeight||t.height;switch(arguments.length-1){case 3:v=0,b=0,y=A,w=O,I=arguments[2],S=arguments[3],C=A,E=O;break;case 5:v=0,b=0,y=A,w=O,I=arguments[2],S=arguments[3],C=arguments[4],E=arguments[5];break;case 9:v=arguments[2],b=arguments[3],y=arguments[4],w=arguments[5],I=arguments[6],S=arguments[7],C=arguments[8],E=arguments[9];break;default:i.b("Invalid arguments sent to `drawImageSmooth`.")}var T=C/y,M=E/w;if(!(A>0)||!(O>0))return r.b.warn("Source image provided to drawImageSmooth was not loaded, or otherwise had no valid dimensions."),!0;if(!(C>=0)||!(E>=0))return r.b.warn("Destination rectangle provided to drawImageSmooth has invalid dimensions of "+C+" by "+E+"."),!0;if(!C||!E)return!0;var D,P=Math.max(T,M),L=Math.pow(2,Math.ceil(Math.log(P)/Math.log(2)));if(L>=1){for(n=0,u=1,d=arguments.length,o.length=d+n-u,p=u,f=n;p<d;p++,f++)o[f]=arguments[p];var R=o;return e.drawImage.apply(e,R),!0}if(m){var x=t[D="_cachedSmoothDownsample_from"+v+","+b+","+y+","+w+"@"+L+"x"];if(x)return e.drawImage(x,0,0,x.width,x.height,I,S,C,E),!0}if(_){for(n=0,u=1,d=arguments.length,o.length=d+n-u,p=u,f=n;p<d;p++,f++)o[f]=arguments[p];var N=o;return e.drawImage.apply(e,N),!1}for(var F,V=1,k=y,B=w,j=Math.pow(2,Math.ceil(Math.log(k)/Math.log(2))),U=Math.pow(2,Math.ceil(Math.log(B)/Math.log(2)));V>L;){V/=2;var G=F||t;(F=Object(s.a)(j*V,U*V))._context.drawImage(G,t===G?v:0,t===G?b:0,window.oldW=k,window.oldH=B,0,0,k=Math.ceil(k/2),B=Math.ceil(B/2))}if(m){var H=document.createElement("canvas");H.width=k,H.height=B,H.getContext("2d").drawImage(F,0,0),t[D]=H}return e.drawImage(F,0,0,k,B,I,S,C,E),!0};u.usingCache=function(){return l=!0,this},u.avoidingWorkIf=function(e){return c=Boolean(e),this};var d={enable:function(){--h<0&&i.b("Unmatched `DrawImageSmooth.enable()`.")},disable:function(){h++}},h=0},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(78),r=n(7),a=n(20),s=n(209),o=n(17),l={mixinDependencies:[n(403).a],viewportWidth:i.c("measuredViewportWidth"),viewportHeight:i.c("measuredViewportHeight"),isViewportSizeDOMReadingEnabled:r.b(!0),measuredViewportWidth:r.b({readOnly:!0,get:function(){return this._measuredViewportWidth}}),_measuredViewportWidth:0,measuredViewportHeight:r.b({readOnly:!0,get:function(){return this._measuredViewportHeight}}),_measuredViewportHeight:0,_measureViewport:a.h("isAttached","isViewportSizeDOMReadingEnabled",s.a.sharedInstance.window.bindingFor("width"),s.a.sharedInstance.window.bindingFor("height"),(function(e,t){t&&this.measureViewport()})),measureViewport:function(){var e,t,n=this.element;n&&this.isAttached?(e=n.offsetWidth,t=n.offsetHeight):(e=0,t=0);var i=this._measuredViewportWidth!==(this._measuredViewportWidth=e),r=this._measuredViewportHeight!==(this._measuredViewportHeight=t);o.a.pause(),i&&this.propertyChanged("measuredViewportWidth"),r&&this.propertyChanged("measuredViewportHeight"),o.a.resume()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(220),a=n(15),s=n(209),o=n(818),l=i.a.extend(r.a,{browserName:a.d({readOnly:!0,get:function(){var e=s.a.sharedInstance,t=e.isEdge,n=e.isChrome,i=e.isSafari,r=e.isFirefox,a=e.isIE;return t?"Edge":n?"Chrome":i?"Safari":r?"Firefox":a?"IE":"UnknownBrowser"}}),deviceHostName:a.d({readOnly:!0,get:function(){return o.a.sharedInstance.current.toString()}}),browserVersion:a.d({readOnly:!0,get:function(){var e=s.a.sharedInstance,t=e.majorVersion,n=e.minorVersion;return void 0!==n?t+"."+n:t}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PlatformInfo"}})},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=DataView.prototype,a=[1,r.getInt8,r.setInt8],s=[1,r.getUint8,r.setUint8],o=[2,r.getInt16,r.setInt16],l=[2,r.getUint16,r.setUint16],c=[4,r.getInt32,r.setInt32],u=[4,r.getUint32,r.setUint32],d=[4,r.getFloat32,r.setFloat32],h=[8,r.getFloat64,r.setFloat64],p=function(){function e(){this._dv=null,this.offset=0,this.cursor=0,this.le=!1}var t,n,r=e.prototype;return r.reset=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(e instanceof globalThis.DataView))throw new Error("`dataView` argument is not an instance of DataView, can not create ByteStream");return this._dv=e,this.le=n,this.offset=t,this.cursor=t,this},r.resetWithString=function(e){for(var t=e.length,n=new globalThis.ArrayBuffer(t),i=new globalThis.DataView(n),r=0;r<t;r++)i.setUint8(r,e.charCodeAt(r));return this.reset(i)},r.resetWithBase64=function(e){if("string"!==typeof e)throw new Error("Input is not a string, can not reset Bytestream");if(!globalThis.atob)throw new Error("Platform does not support `atob`");var t=globalThis.atob(e);return this.resetWithString(t)},r.slice=function(e){var t=this.cursor,n=t+e>this.length?this.length:t+e;return this._dv.buffer.slice(t,n)},r.sliceAsDataView=function(e){var t=this.slice(e);return new globalThis.DataView(t)},r.uint=function(e){for(var t=this.cursor,n=t+e,i=0,r=t;r<n;r++)i<<=8,i|=255&this.uint8;return i},r.first4BitsAt=function(e){return(240&this._safeRead(s,e))>>4},r.last4BitsAt=function(e){return 15&this._safeRead(s,e)},r.charactersInRange=function(e,t){for(var n=this.cursor,i=this.cursor=e<0?0:e,r=t<this.length?t+1-i:this.length-i,a="",s=0;s<r;s++)a+=this.nextChar;return this.cursor=n,a},r.jumpTo=function(e){var t=this.cursor=this.offset+e;return t<0&&(this.cursor=0),t>=this.length&&(this.cursor=this.length-1),this},r.rewind=function(e){return(this.cursor-=e)<0&&(this.cursor=0),this},r.fastForward=function(e){var t=this.length;return(this.cursor+=e)>=t&&(this.cursor=t-1),this},r._safeRead=function(e,t){var n="undefined"===typeof t?this.cursor:t;return n+e[0]>this.length?null:e===s||e===a?e[1].call(this._dv,n):e[1].call(this._dv,n,this.le)},r._safeWrite=function(e,t,n){var i="undefined"===typeof t?this.cursor:t;return i+e[0]>this.length?null:e===s||e===a?e[2].call(this._dv,i,n):e[2].call(this._dv,i,n,this.le)},t=e,(n=[{key:"uint8",get:function(){return this._safeRead(s,this.cursor++)},set:function(e){this._safeWrite(s,this.cursor++,e)}},{key:"int8",get:function(){return this._safeRead(a,this.cursor++)},set:function(e){this._safeWrite(a,this.cursor++,e)}},{key:"uint16",get:function(){var e=this.cursor+=2;return this._safeRead(l,e-2)},set:function(e){var t=this.cursor+=2;this._safeWrite(l,t-2,e)}},{key:"int16",get:function(){var e=this.cursor+=2;return this._safeRead(o,e-2)},set:function(e){var t=this.cursor+=2;this._safeWrite(o,t-2,e)}},{key:"uint32",get:function(){var e=this.cursor+=4;return this._safeRead(u,e-4)},set:function(e){var t=this.cursor+=4;this._safeWrite(u,t-4,e)}},{key:"int32",get:function(){var e=this.cursor+=4;return this._safeRead(c,e-4)},set:function(e){var t=this.cursor+=4;this._safeWrite(c,t-4,e)}},{key:"float32",get:function(){var e=this.cursor+=4;return this._safeRead(d,e-4)},set:function(e){var t=this.cursor+=4;this._safeWrite(d,t-4,e)}},{key:"uint64",get:function(){return this.fastForward(4).uint32}},{key:"float64",get:function(){var e=this.cursor+=8;return this._safeRead(h,e-8)},set:function(e){var t=this.cursor+=8;this._safeWrite(h,t-8,e)}},{key:"nextChar",get:function(){return String.fromCharCode(this.uint8)}},{key:"length",get:function(){return this._dv.byteLength}}])&&i(t.prototype,n),e}(),f=new p},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return a}));var i=n(207),r=n(156),a=i.Record.extend({staticMembers:{_isAbstract:!0,__QUALIFIED_CLASS_NAME__:"Record"},isDeleted:r.b(),isExpunged:r.b(),dateExpunged:r.e({readOnly:!0}),remappedRef:r.h({serviceKey:"remappedRef",serviceSubKey:"recordName",readOnly:!0})})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var i={renderableImageDerivativeInfos:{parentSubset:"derivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return Boolean(e.genericType===this.constructor.Type.IMAGE&&e.reflectsEdits===t&&a(e.mimeType))},postProcess:function(){var e,t=function(t){return Boolean(t.genericType===e.Type.IMAGE&&a(t.mimeType))};return function(n,i,a){if(!n.length){var s=this.constructor.feedbackService,o=this.constructor.FeedbackErrorType;s&&o&&s.reportError({errorType:o.WEB_SERVICE.value,errorState:"Had to fall back to unedited IMAGE derivative(s) for display."}),e||(e=this.constructor),r(i,t,n)}}}()},renderableVideoDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return Boolean(e.genericType===this.constructor.Type.VIDEO&&e.reflectsEdits===t&&a(e.mimeType))},postProcess:function(){var e,t=function(t){return Boolean(t.genericType===e.Type.VIDEO&&a(t.mimeType))};return function(n,i,a){if(!n.length){var s=this.constructor.feedbackService,o=this.constructor.FeedbackErrorType;s&&o&&this.constructor.feedbackService.reportError({errorType:o.WEB_SERVICE.value,errorState:"Had to fall back to unedited VIDEO derivative(s) for display."}),e||(e=this.constructor),r(i,t,n)}}}()},renderableUneditedImageDerivativeInfos:{parentSubset:"derivativeInfos",filter:function(e){return Boolean(e.genericType===this.constructor.Type.IMAGE&&!e.reflectsEdits&&a(e.mimeType))}},renderableUneditedVideoDerivativeInfos:{parentSubset:"serverDerivativeInfos",filter:function(e){return Boolean(e.genericType===this.constructor.Type.VIDEO&&!e.reflectsEdits&&a(e.mimeType))}},originalDerivativeInfos:{parentSubset:"serverDerivativeInfos",filter:function(e){return e.isOriginal}},originalVideoDerivativeInfos:{parentSubset:"originalDerivativeInfos",filter:function(e){return e.genericType===this.constructor.Type.VIDEO}},emailableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return Boolean(e.genericType===t&&e.reflectsEdits===n)}},downloadableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return Boolean((e.genericType===t||e.isOriginal)&&e.reflectsEdits===n)}}};function r(e,t,n){n.length&&(n.length=0);for(var i=e.length,r=0;r<i;r++){var a=e[r];t(a)&&n.push(a)}return n}var a=function(){var e=document.createElement("video"),t={};return function(n){var i=n.slice(0,5);if("image"===i)return"image/jpeg"===n||"image/png"===n||"image/gif"===n||"image/bmp"===n;if("video"===i||"audio"===i){var r=t[n];if(void 0!==r||!e.canPlayType)return r||!1;var a=e.canPlayType(n);return t[r]="maybe"===a||"probably"===a}return!1}}();function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"application/pdf"===e||t&&n||a(e)}},function(e,t,n){var i=n(91),r=n(241),a="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var i=n(232),r=n(146),a=n(289),s=function(e){return function(t,n,s){var o,l=i(t),c=r(l.length),u=a(s,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){var i=n(91),r=/#|\.prototype\./,a=function(e,t){var n=o[s(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){var i=n(595),r=n(493);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(128),r=n(333),a=n(134)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(91),r=n(134),a=n(496),s=r("species");e.exports=function(e){return a>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports={}},function(e,t,n){var i=n(372),r=n(370),a=n(134)("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i=n(500),r=n(241),a=n(134)("toStringTag"),s="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),a))?n:s?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var i=n(91);e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var i=n(128),r=n(241),a=n(134)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t){var n=function(){function e(e){this._listeners={},this.el=e}var t=e.prototype;return t.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]);var n={originalCb:t,args:[e,function(e){t(e)}].concat(Array.from(arguments).slice(2))};this._listeners[e].push(n),this.el.addEventListener.apply(this.el,n.args)},t.off=function(e,t){var n=this._listeners[e],i=-1;if(n.find((function(e){return i++,e.originalCb===t}))){var r=n[i];this.el.removeEventListener.apply(this.el,r.args),n.splice(i,1)}},t.replaceElement=function(e){var t=this;Object.keys(this._listeners).forEach((function(n){t._listeners[n].forEach((function(n){t.el.removeEventListener.apply(t.el,n.args),e.addEventListener.apply(e,n.args)}))})),this.el=e},t.once=function(e,t){var n=this;this.on(e,(function i(){t(),n.off(e,i)}))},t.trigger=function(e,t){var n=new CustomEvent(e,{detail:t});this.el.dispatchEvent(n)},e}();e.exports=n},function(e,t,n){"use strict";e.exports=n(198)("log")},function(e,t,n){"use strict";e.exports=function(e,t){var n;return t?{width:(n=e.getBoundingClientRect()).width,height:n.height}:{width:e.offsetWidth,height:e.offsetHeight}}},function(e,t){e.exports=function(e,t){this._player=t.player,this._view=e,this._addViewListeners&&this._addViewListeners(),this._addPlayerListeners&&this._addPlayerListeners()}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return I})),n.d(t,"b",(function(){return S})),n(1);var i=n(40),r=n(55),a=n(221),s=n(161),o=n(238),l=n(13),c=n(51),u=n(130),d=n(82),h=n(309),p=n(454),f=n(194),g=n(300),m=n(543);function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b=i.a.extend(g.a,{application:null,events:null,init:function(e){var t=e&&e.element;if(t){var n=window.document,i=t;t===n&&(i=n.body),this._cursorLockElement=i,delete e.element}if(this.__s._$aV$init.call(this,e),this._eventListeners=new Map,this.events)for(var r,s=_(this.events);!(r=s()).done;)for(var o=r.value,l=o.handlers,c=o.useCapture,u=0,d=Object.entries(l);u<d.length;u++){var h=d[u],p=h[0],f=h[1],g=Object(a.a)(f.bind(this));this._eventListeners.set(p,[g,{capture:c||!1,passive:!1}])}t&&this.addEventListenersToElement(t)},addEventListenersToElement:function(e){var t=window.document;!t||e!==t.body&&e!==t.documentElement||(e=window.document),y(e),this._listenedElements.push(e);for(var n,i=_(this._eventListeners.entries());!(n=i()).done;){var r=n.value,a=r[0],o=r[1],l=o[0],c=o[1];Object(s.a)(e,a,l,c)}},prependEventListenerToElement:function(e,t,n,i){var r=this._listenedElements.indexOf(e)>=0;r&&this._removeEventListener(e,t),Object(s.a)(e,t,n,i),r&&this._addEventListener(e,t)},_addEventListener:function(e,t){if(this._eventListeners.has(t)){var n=this._eventListeners.get(t),i=n[0],r=n[1];Object(s.a)(e,t,i,r)}},_removeEventListener:function(e,t){if(this._eventListeners.has(t)){var n=this._eventListeners.get(t),i=n[0],r=n[1];Object(o.a)(e,t,i,r)}},_listenedElements:Object(r.c)(Array),_eventListeners:null,dispatchEvent:function(e){e||Object(l.b)("RootResponder#dispatchEvent requires an event.");var t,n,i=e.cwType;"keyDown"!==i&&"keyUp"!==i||p.a.sharedInstance[i](e),"pointerDown"===i&&p.a.sharedInstance.syncMetaKeyStateFromEvent(e),"number"===typeof e.pointerId&&(t=this.getPointerCapture(e.pointerId));var r=I(e);if(e.targetView=r,this._synthesizePointerMoveEventsIfNecessary(e),t){if(!function(e,t){var n=t.cwType;if("pointerUp"===n||"pointerCancel"===n||"pointerMove"===n)return!0;var i=w(t.target);return!i||e.get("element")===i}(t,e))return;n=t}else(n=r)||(n=this.getPath("application.topFocusLayer.focusResponder"));n||(n=this),this.willDispatchEvent(e);var a=!1;if(e.bubbles?a=Object(m.a)(n,i,e):n.handleEvent&&(E[0]=i,E[1]=e,a=n.handleEvent.apply(n,E),E[0]="",E[1]=null),this.didDispatchEvent(e,a),e.pointerType===f.b.TOUCH&&("pointerUp"===i||"pointerCancel"===i)){if(!r||!r.isDisposed){var s=f.a.create({nativeEvent:e,cwType:"pointerOut",target:e.target});this.dispatchEvent(s)}for(var o=r;o&&!o.isDisposed;){var c=f.a.create({cwType:"pointerLeave",bubbles:!1,target:o.element});this.dispatchEvent(c),o=o.parent}}return a},_synthesizePointerMoveEventsIfNecessary:function(e){var t,n=e.cwType;if("pointerOut"===n&&this._checkIfPointerLeft(e),"pointerMove"===n&&this._dispatchPointerEnterOrLeave(e,e.targetView),e.pointerType===f.b.TOUCH&&"pointerDown"===n)for(t=e.targetView;t;){var i=f.a.create({cwType:"pointerEnter",bubbles:!1,target:t.element});this.dispatchEvent(i);var r=f.a.create({target:t.element,bubbles:!1,cwType:"pointerOver"});this.dispatchEvent(r),t=t.parent}},_checkIfPointerLeft:function(e){for(var t=e.relatedTarget,n=this._listenedElements,i=n.length,r=0;r<i;r++)if(n[r].contains(t))return;return this._pointerLeft(e)},_previousPointerMoveView:null,_previousViewAncestors:Object(r.c)(Array),_previousViewAncestorsSwap:Object(r.c)(Array),_pointerLeft:function(e){return this._dispatchPointerEnterOrLeave(e,null),!1},_dispatchPointerEnterOrLeave:function(e,t){if(t!==this._previousPointerMoveView){var n=this._previousViewAncestorsSwap;n.length=0;for(var i=t;i;)n.push(i),i=i.parent;for(var r,a=n.length-1,s=this._previousViewAncestors,o=s.length-1;s[o]===n[a]&&o>=0&&a>=0;)o--,a--;for(r=0;r<=o;r++){var l=s[r];if(!l.isDisposed){var c=f.a.create({cwType:"pointerLeave",bubbles:!1,target:l.element});this.dispatchEvent(c)}}for(r=0;r<=a;r++){var u=n[r],d=f.a.create({cwType:"pointerEnter",bubbles:!1,target:u.element});this.dispatchEvent(d)}this._previousViewAncestors=n,this._previousViewAncestorsSwap=s,this._previousPointerMoveView=t}},willDispatchEvent:c.a,didDispatchEvent:c.a,lockCursor:function(e){var t;switch(e){case"default":t="cw-global-cursor-default";break;case"pointer":t="cw-global-cursor-pointer";break;case"horizontal-resize":t="cw-global-cursor-horizontal-resize";break;case"vertical-resize":t="cw-global-cursor-vertical-resize"}var n=this._cursorLockElement;t&&n.classList.add(t),this._cursorLockClassName=t,Object(s.a)(n,"selectstart",C)},releaseCursor:function(){var e=this._cursorLockClassName,t=this._cursorLockElement;e&&t.classList.remove(e),this._cursorLockClassName=null,Object(o.a)(t,"selectstart",C)},__superMap:{_$aV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootResponder"}}),y=function(e){if(h.c.isPointerSupported){var t=window.document;e===t&&(e=t.body);var n=e.style;n?(n.msTouchAction="none",n.touchAction="none"):u.b.warn("Could not attach `touch-action` property to the `RootResponder`\u2019s element. Some touch events will be handled by default browser behavior instead of going to the `RootResponder`.")}};function w(e){return Object(d.a)(e,window.SVGElementInstance)?e.correspondingElement:e}function I(e){return S(w(e.target))}function S(e){for(var t;e&&!(t=e.view);)e=e.parentNode;return t}function C(e){return e.preventDefault&&e.preventDefault(),!1}var E=new Array(2)},function(e,t,n){"use strict";n(6),n(0),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d}));var i=n(7),r=n(20),a=n(321),s=n(15),o=n(400),l=n(310),c={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEnlarged",truevalue:"cw-scroll-indicator-enlarged",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInstantlyEnlarged",truevalue:"cw-scroll-indicator-instantly-enlarged",attributes:{}}],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_opacity",attributes:{},unit:null,property:"opacity"},visibility:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_isVisible",truevalue:"",falsevalue:"hidden",attributes:{},unit:null,property:"visibility"}}}}},scrollIndicatorShouldFade:Object(i.b)(!0),scrollIndicatorShouldEnlarge:Object(i.b)(!0),shouldShowScrollIndicatorIfSizeChanged:Object(i.b)(!1),fadeDelay:500,fadeTime:200,FPS:60,_opacity:0,isEnlarged:Object(i.b)(!1),_isVisible:Object(i.b)({readOnly:!0,dependencies:["_opacity"],get:Object.assign((function(){return 0!==this._opacity}),{__CW__getter:function(e,t,n,i){return 0!==i.internalGet(this,t[0+n])}})}),_maintainEnlargedState:Object(r.h)("scrollIndicatorShouldEnlarge","_isVisible","isBeingHovered",(function(e,t,n){if(e){var i=!1;t&&(i=n||this.get("isEnlarged")),Object(o.a)(this,"isEnlarged",i),i||(this.isInstantlyEnlarged=!1)}else Object(o.a)(this,"isEnlarged",!1)})),_handleThumbProportionChange:Object(r.h)("thumbProportion",(function(){this.shouldShowScrollIndicatorIfSizeChanged&&this.renewVisibility()})),didScroll:function(e){!this.get("_isVisible")&&e&&this._boundingClientRectHitTest(e)&&(Object(o.a)(this,"isBeingHovered",!0),this.scrollIndicatorShouldEnlarge&&(this.isInstantlyEnlarged=!0)),this.renewVisibility()},_boundingClientRectHitTest:function(e){var t=this.get("element").getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return n>=0&&n<=t.width&&i>=0&&i<=t.height},_handleHoverStateChange:Object(r.h)("isBeingHovered",(function(e){this.renewVisibility()})),_handleAttachOrDetach:Object(r.h)("isAttached",(function(e){e?this.get("_isVisible")&&this.renewVisibility():this.renewVisibility()})),renewVisibility:function(){this._fadeOutAnimationTimer.stop(),this._fadeOutTimer.stop();var e=this.get("scrollIndicatorShouldFade");this.get("isAttached")?(this.set("_opacity",1),e&&!this.get("isBeingHovered")&&this._fadeOutTimer.start()):this.set("_opacity",e?0:1)},_showOrFadeOnShouldFadeChange:Object(r.h)("scrollIndicatorShouldFade",(function(){this.renewVisibility()})),_fadeOutTimer:Object(s.d)({strong:!0,defaultValue:function(){return a.a.create({delay:this.fadeDelay,action:"beginFadeOut",target:this})}}),_fadeOutAnimationTimer:Object(s.d)({strong:!0,defaultValue:function(){return a.a.create({delay:1e3/this.FPS,action:"fadeStep",target:this,timesToFire:this.fadeTime/1e3*this.FPS})}}),beginFadeOut:function(){return this._fadeOutAnimationTimer.start(),!0},fadeStep:function(e){return this.set("_opacity",1-e.fireCount/e.timesToFire),!0}},u=l.a.extend(c,{staticMembers:{className:"cw-ui-fading-horizontal-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FadingHorizontalScrollIndicatorView"}}),d=l.c.extend(c,{staticMembers:{className:"cw-ui-fading-vertical-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FadingVerticalScrollIndicatorView"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(529),r=1,a=function(e){this.items=[],this.name=e,this.id=r,r++};function s(e,t){var n=new a(e),r=function e(t,n){var r=1;return function(a,s){var o=null,l=(o=n?n.createSubstate(a):new i.a(a,r,null,0,t)).fullName.replace(".","");t.items.push(o),t[l]=o,n&&(n[a]=o),r+=1,s&&s(e(t,o))}}(n,null);t(r);for(var s=n.items,o=s.length,l=0;l<o;l++)Object.freeze(s[l]);return Object.freeze(n),n}},function(e,t,n){"use strict";function i(e){return!(!e||!e.isObject)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t,n){return Array.prototype.slice.call(e,0|t,n)}},function(e,t,n){"use strict";function i(e){var t=e._exceptionHandling_wrappedFunction;return t?!0===t?e:t:null}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(55),a=n(20),s=n(7),o=n(195),l=n(120),c=n(388),u=n(13),d=i.a.extend(a.b,{staticMembers:{shouldUseFormEncoding:!1,components:Object(r.c)(["protocol","auth","hostname","port","pathname","query","hash"]),componentFormatters:{protocol:function(e){return e+(v[e]?"":"//")},auth:function(e){return e+"@"},port:function(e){return":"+e}},componentCleaners:{protocol:function(e){return e.replace("//","")},auth:function(e){return e.replace("@","")}},parse:function(e){var t,n,i,r,a,s=e.match(h),o={},l=this.components;for(i=0,r=l.length;i<r;i++)(t=s[i+1])&&(n=l[i],a=this.componentCleaners[n],o[n]=a?a(t):t);return o},parseQuery:function(e,t){var n={};if(!Object(o.a)(e))return n;if(""===(e=e.replace(p,"")))return n;t=void 0===t?this.shouldUseFormEncoding:t;for(var i=e.split("&"),r=0,a=i.length;r<a;r++){var s,l=i[r].split("="),c=l[0],u=l[1];_.test(c)&&(c=c.replace(_,""),s=!0),u=this.parseValue(y(u,t));var d=n[c];d?(Array.isArray(d)?d.push(u):d=[d,u],u=d):s&&(u=[u]),n[c]=u}return n},parseValue:function(e){if(e&&f.test(e)){for(var t=(e=e.split(",")).length-1;t>=0;t--)e[t]=w(e[t]);return e}return w(e)},formatQuery:function(e,t){if(!Object(l.a)(e))return e;t=void 0===t?this.shouldUseFormEncoding:t;var n,i,r,a,s=Object.keys(e),o="";for(r=0,a=s.length;r<a;r++)i=e[n=s[r]],r>0&&(o+="&"),o+=b(n,t),null!==i&&void 0!==i&&(o+="="+(i=b(this.formatValue(i),t)));return r>0?"?"+o:""},formatValue:function(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--)e[t]=I(e[t]);return e.join(",")}return I(e)},init:function(){var e=this,t=arguments;e.__s._$31u$init.apply(e,t),this.prototype.registerMetadata("href",Object(s.b)({dependencies:this.components}))},__superMap:{_$31u$init:"init"},__QUALIFIED_CLASS_NAME__:"URL"},protocol:Object(s.b)(null),auth:Object(s.b)(null),hostname:Object(s.b)(null),port:Object(s.b)({defaultValue:null,set:function(e){return parseInt(e,10)}}),pathname:Object(s.b)(null),query:Object(s.b)(null),hash:Object(s.b)(null),href:Object(s.b)({readOnly:!0,get:function(){var e,t,n,i,r,a="",s=this.constructor.components,o=arguments[3],l=arguments[1],c=arguments[2];for(t=0,n=s.length;t<n;t++)i=s[t],(e=o.internalGet(this,l[t+c]))&&(a+=(r=this.constructor.componentFormatters[i])?r(e):e);return a}}),host:Object(s.b)({readOnly:!0,dependencies:["port","hostname"],get:Object.assign((function(){var e=this.port,t=this.hostname;return e&&(t=(t||"")+":"+e),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a=(a||"")+":"+r),a}})}),origin:Object(s.b)({readOnly:!0,dependencies:["host","protocol"],get:Object.assign((function(){var e=this.host,t=this.protocol;return t&&(e=this.constructor.componentFormatters.protocol(t)+(e||"")),e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return a&&(r=this.constructor.componentFormatters.protocol(a)+(r||"")),r}})}),path:Object(s.b)({readOnly:!0,dependencies:["query","pathname"],get:Object.assign((function(){var e=this.query,t=this.pathname;return e&&(t=(t||"")+e),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a=(a||"")+r),a}})}),queryObject:Object(s.b)({dependencies:["query"],get:Object.assign((function(){return this.constructor.parseQuery(this.query)}),{__CW__getter:function(e,t,n,i){return this.constructor.parseQuery(i.internalGet(this,t[0+n]))}}),set:Object.assign((function(e){this.query=this.constructor.formatQuery(e)}),{__CW__setter:function(e,t,n,i,r){n[0+i]=this.constructor.formatQuery(e)}}),writeDependencySetPathMap:[!1]}),isInDomain:function(e){var t=this.hostname;if(!t||""===e)return!1;var n=new RegExp("(^|\\.)"+Object(c.c)(e)+"$","i");return!!t.match(n)},setQueryParameter:function(e,t){return this.query?(this.removeQueryParameter(e),this.appendQueryParameter(e,t)):this.appendQueryParameter(e,t)},appendQueryParameter:function(e,t){var n=this.query||"?";return"?"!==n&&(n+="&"),n+=b(e)+(null!==t&&void 0!==t?"="+b(this.constructor.formatValue(t),this.constructor.shouldUseFormEncoding):""),this.query=n,this},removeQueryParameter:function(e){var t=this.query;if(!t)return this;var n=this._regexpForQueryParameterKey(e),i=t.replace(n,""),r=i[0];return i?"?"!==r&&("&"===r&&(i=i.substr(1)),i="?"+i):i=null,this.query=i,this},getQueryParameter:function(e){var t=this.query;if(t){var n=this._regexpForQueryParameterKey(e).exec(t);if(n){var i=n[3];return void 0===i?null:y(i)}}},_regexpForQueryParameterKey:function(e){var t=Object(c.c)(e)+"|"+Object(c.c)(b(e));return new RegExp("(^|\\?|&)("+t+")(?:=([^&]*))?(?=&|$)","g")},setMultipleQueryParameters:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setQueryParameter(t,e[t]);return this},init:function(e){if(Object(o.a)(e))e=this.constructor.parse(e);else if(e&&e.constructor===Location){for(var t,n,i={},r=this.constructor.components,a=0,s=r.length;a<s;a++)"query"===(n=t=r[a])&&(t="search"),i[n]=e[t];e=i}else e&&!Object(l.a)(e)&&Object(u.b)("A URL object cannot be created with the data provided",e);this.__s._$6ID$init.call(this,e)},toString:function(){return this.href},toJSON:function(){return""+this},__superMap:{_$6ID$init:"init"}}),h=/^(.*?:\/\/)?([^:/?]*:?[^:/?]*@+)?([^:/?]*):?(\d*)?([^?#]*)?(\??[^#]*)(#?.*)?$/,p=/^\?/,f=/,/,g=/%20/g,m=/\+/g,_=/\[\]$/,v={"mailto:":!0},b=function(e,t){var n=encodeURIComponent(""+e);return t?n.replace(g,"+"):n},y=function(e,t){if(!e)return e;var n=decodeURIComponent(""+e);return t?n.replace(m," "):n};function w(e){try{return JSON.parse(e)}catch(t){return e}}function I(e){return""+e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d}));var i=/[&<>]/g,r=/[&<>'"]|((((j|v[^\w ]*b|l[^\w ]*i[^\w ]*v[^\w ]*e).*)?)+(?:[^\w ]*\w)+[^\w ]*s[^\w ]*c[^\w ]*r[^\w ]*i[^\w ]*p[^\w ]*t[^\w ]*:)/gi,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s=/[-/\\^$*+?.()|[\]{}]/g;function o(e){return a[e]||""}function l(e,t,n){if(!e)return"";if("string"!==typeof e)try{e=e.toString()}catch(i){return""}return e.replace(t,n)}function c(e){return l(e,i,o)}function u(e){return l(e,r,o)}function d(e){return l(e,s,"\\$&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(123),r=n(194),a={mixinDependencies:[i.a],gestureRecognizerShouldBegin:function(e){return!0},gestureRecognizerShouldReceive:function(e,t){return t.pointerType!==r.b.MOUSE||0===t.button},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){return!1},gestureRecognizerShouldRequireFailureOf:function(e,t){return!1},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){return!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=[],a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=arguments.length;0===a&&Object(i.b)("[CW.Utils#merge] Must provides objects to merge");var s=1,o=0,l=arguments.length;r.length=l+s-o;for(var c=o,u=s;c<l;c++,u++)r[u]=arguments[c];var d=r;return d[0]={},Object.assign.apply(this,d)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(15),a=n(319),s=n(13),o=n(190),l=Object(a.a)([o.a.SHIFT,o.a.CTRL,o.a.OPTION,o.a.CMD]),c=i.a.extend({init:function(e){var t=this,n=arguments;"string"===typeof e?(t.__s._$FC$init.call(t),this._initFromString(e)):t.__s._$FC$init.apply(t,n)},getKeyCode:function(e){var t=e.trim().toUpperCase();return o.a[t]||t.charCodeAt(0)},add:function(e){this.addKey(e)},addKey:function(e){l[e]?this._addModifier(e):this._addSequencedKey(e)},delete:function(e){this.removeKey(e)},removeKey:function(e){l[e]?this._removeModifier(e):this._removeSequencedKey(e)},clear:function(){this.modifiers&&(this.modifiers.length=0),this.keys&&(this.keys.length=0)},toString:function(){var e="";return this.modifiers&&(e+=this.modifiers.sort().join("+")+":"),this.keys&&(e+=this.keys.join(",")),e},contains:function(e){return l[e]?!!this.modifiers&&this.modifiers.includes(e):!!this.keys&&this.keys.includes(e)},has:function(e){return this.contains(e)},length:Object(r.d)({readOnly:!0,get:function(){return(this.keys?this.keys.length:0)+(this.modifiers?this.modifiers.length:0)}}),_initFromString:function(e){var t,n,i,r;if(/\+/.test(e))for(n=0,i=(t=e.split("+")).length;n<i;n++){var a=this.getKeyCode(t[n]);l[a]?this._addModifier(a):(r&&Object(s.b)("Invalid key sequence: "+e+". Key sequences do not support pressing two (non-modifier) keys at the same time"),r=!0,this._addSequencedKey(a))}else for(n=0,i=(t=e.split(/\s/)).length;n<i;n++)this._addSequencedKey(this.getKeyCode(t[n]))},_addModifier:function(e){(this.modifiers||(this.modifiers=[])).push(e)},_addSequencedKey:function(e){(this.keys||(this.keys=[])).push(e)},_removeModifier:function(e){this.modifiers&&(this.modifiers=this.modifiers.filter((function(t){return t!==e})))},_removeSequencedKey:function(e){this.keys&&(this.keys=this.keys.filter((function(t){return t!==e})))},__superMap:{_$FC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeySequence"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(13),r=n(354),a=n(40),s=n(547),o=n(702),l=n(703),c=n(15),u=n(77),d=n(55),h=c.a.extend({get:function(){return this._map.size},staticMembers:{__QUALIFIED_CLASS_NAME__:"SizeProperty"}});function p(e){return this._map.has(e)}function f(e){return this._map.delete(e)}var g=a.a.extend(r.a,{_map:Object(d.c)(Map),get:function(e){return this.decode(this.encodedGet(e))},encodedGet:function(e){return this._map.get(e)},set:function(e,t){return this.encodedSet(e,this.encode(t))},encodedSet:function(e,t){return this._map.set(e,t),this},encodedContains:function(e){for(var t=this.values().retain();t.isValid;){if(e===t.encodedValue)return t.release(),!0;t.moveToNext()}return t.release(),!1},forEach:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;e.call(t,i[1],i[0],this),n.moveToNext()}n.release()},reduce:function(e,t,n){var r,a=this.createIterator().retain();for(arguments.length>=2?r=t:a.isValid?(r=a.value[1],a.moveToNext()):Object(i.b)("reduce of empty array with no initial value");a.isValid;){var s=a.value;r=e.call(n,r,s[1],s[0],this),a.moveToNext()}return a.release(),r},find:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(e.call(t,i[1],i[0],this))return n.release(),i;n.moveToNext()}n.release()},every:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(!e.call(t,i[1],i[0],this))return n.release(),!1;n.moveToNext()}return n.release(),!0},some:function(e,t){for(var n=this.createIterator().retain();n.isValid;){var i=n.value;if(e.call(t,i[1],i[0],this))return n.release(),!0;n.moveToNext()}return n.release(),!1},containsKey:p,has:p,removeKey:f,delete:f,clear:function(){this._map.clear()},length:Object(u.c)(h),size:Object(u.c)(h),iteratorClass:Object(c.d)({readOnly:!0,defaultValue:s.a}),keys:function(){return o.a.create(this)},values:function(){return l.a.create(this)},entries:function(){return s.a.create(this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CoreMap"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(320),r=n(74),a=n(162),s=n(77),o={mixinDependencies:[i.a],value:Object(s.c)(a.a),remove:Object(s.c)(r.a),add:Object(s.c)(r.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(127),r=n(120),a=n(264),s=n(299),o=n(82),l=n(354),c=n(123),u=n(74),d=n(77),h={mixinDependencies:[c.a,l.a],init:function(e){var t,n,c=this,u=arguments;if(1!==arguments.length)for(c.__s._$K7$init.call(c),t=0,n=arguments.length;t<n;t++)this.add(arguments[t]);else if(!Object(i.a)(e)||Object(r.a)(e))c.__s._$K7$init.apply(c,u);else if(Object(a.a)(e))for(c.__s._$K7$init.call(c),t=0,n=e;t<n;t++)this.add(void 0);else if(Object(s.a)(e))for(c.__s._$K7$init.call(c),t=0,n=e.length;t<n;t++)this.add(e[t]);else Object(o.a)(e,l.a)?(c.__s._$K7$init.call(c),this.addEach(e)):(c.__s._$K7$init.call(c),this.add(e))},add:function(e){return this.encodedAdd(this.encode(e))},encodedAdd:Object(d.c)(u.a),addEach:function(e){e.forEach(this.add,this)},remove:function(e){return this.encodedRemove(this.encode(e))},encodedRemove:Object(d.c)(u.a),delete:function(){return this.remove.apply(this,arguments)},removeEach:function(e){e.forEach(this.remove,this)},constructNewInstance:function(){return this.constructor.create()},filter:function(e,t){for(var n=this.constructNewInstance(),i=this.createIterator().retain(),r=0;i.isValid;){r++;var a=i.value;!0===e.call(t,a,r,this)&&n.add(a),i.moveToNext()}return i.release(),n},__superMap:{_$K7$init:"init"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(40),r=n(220),a=i.a.extend(r.a,{generate:function(e,t,n){for(var i in n=n||this.createEventHandler,t){var r=t[i];e[r]=n(i,r)}return e},createEventHandler:function(e,t){return function(n){try{n.cwType=e}catch(i){throw new Error("error handling event of type "+e+" registered to "+t)}this.dispatchEvent(n)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"HandlerGenerator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Object.freeze({MOUSE:"MOUSE",TOUCH:"TOUCH"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(130),r={trace:!1,logTrace:function(e){(this.trace||window.TRACE_ALL)&&i.b.debug(this+" "+e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(195),r=n(13),a=n(130),s=n(40),o=n(558),l=n(220),c=s.a.extend(l.a,o.a,{contentType:"application/json",encode:function(e){if(!Object(i.a)(e))try{e=JSON.stringify(e)}catch(t){Object(r.b)("Could not encode object to JSON.",{object:e,error:t})}return e},decode:function(e){if(Object(i.a)(e))try{e=JSON.parse(e)}catch(t){a.b.warn("Could not decode string as JSON",e),e=null}return e},staticMembers:{__QUALIFIED_CLASS_NAME__:"JSONSerializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(20),a=n(7),s=n(13),o=n(143),l=n(560),c=i.a.extend(r.b,{staticMembers:{setAsMirror:function(e,t){e.didChange=function(){t.setMultipleValues({bytesTotal:e.get("bytesTotal"),bytesTransferred:e.get("bytesTransferred"),isDeterminate:e.get("isDeterminate")})}},__QUALIFIED_CLASS_NAME__:"NetworkProgress"},init:function(){var e=this,t=arguments;e.__s._$P9$init.apply(e,t),this._children=[],this._childListeners={},this.set("childPropertiesToObserve",["bytesTransferred","bytesTotal","isDeterminate"])},isComposite:Object(a.b)({defaultValue:!1}),addChild:function(e){e.instanceOf(c)||Object(s.b)("Must provide a Progress instance.");for(var t=this,n=Object(o.b)(e),i=t._childListeners,r=this.childPropertiesToObserve,a=function(e){t.childDidChange()},l=0,u=r.length;l<u;l++){var d=r[l],h=i[n]||[],p=e.observe(d,a);h.push(p),i[n]=h}this._children.push(e),this.set("isComposite",!0),this.childDidChange()},removeChild:function(e){var t=this._children;e.instanceOf(c)||Object(s.b)("Must provide a Progress instance.");var n=this._childListeners[Object(o.b)(e)];n&&n.forEach((function(e){e.disconnect()}));var i=t.indexOf(e);-1!==i&&t.splice(i,1),0===t.length&&(this.set("isComposite",!1),this.setMultipleValues({bytesTotal:0,bytesTransferred:0,isDeterminate:!1})),this.childDidChange()},removeChildren:function(){for(var e;e=this._children.pop();)this.removeChild(e)},childDidChange:Object(r.i)(),childPropertiesToObserve:null,bytesTransferred:Object(a.b)({defaultValue:0}),bytesTotal:Object(a.b)({defaultValue:0}),isDeterminate:Object(a.b)({defaultValue:!1}),setMultipleValues:function(e){var t=this.beginBatchSet();for(var n in e)e.hasOwnProperty(n)&&t.set(n,e[n]);t.end()},bitRateString:Object(a.b)({readOnly:!0,dependencies:["bytesPerSecond"],get:Object.assign((function(){return(Object(l.a)(this.bytesPerSecond)+"ps").replace("bytes","B")}),{__CW__getter:function(e,t,n,i){return(Object(l.a)(i.internalGet(this,t[0+n]))+"ps").replace("bytes","B")}})}),bytesPerSecond:Object(a.b)({readOnly:!0,dependencies:["bytesTransferred","percentComplete"],get:Object.assign((function(){var e=this.get("_startTime"),t=Date.now();"undefined"===typeof e&&(this.set("_startTime",t),e=t);var n=(t-e)/1e3;return 0===n?0:this.bytesTransferred/n}),{__CW__getter:function(e,t,n,i){var r=this.get("_startTime"),a=Date.now();"undefined"===typeof r&&(this.set("_startTime",a),r=a);var s=(a-r)/1e3;return 0===s?0:i.internalGet(this,t[0+n])/s}})}),percentComplete:Object(a.b)({readOnly:!0,dependencies:["bytesTotal","bytesTransferred","isDeterminate"],get:Object.assign((function(){var e=this.bytesTransferred,t=this.bytesTotal;return t&&0!==t?e/t:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&0!==a?r/a:0}})}),toString:function(){return("[Progress Instance #"+Object(o.b)(this)+"] "+100*this.get("percentComplete")+"% ("+this.get("bytesTransferred")+" of "+this.get("bytesTotal")+") "+(this.get("isDeterminate")?"":"???")).trim()},didChange:Object(r.i)(),_startTime:null,_valuesDidChange:Object(r.h)("bytesTransferred","bytesTotal","isDeterminate",(function(){this.didChange(arguments)})),_children:null,_childListeners:null,_calculateCompositeChildValues:Object(r.h)("childDidChange",(function(){if(this.get("isComposite")){for(var e=this.get("childPropertiesToObserve"),t=this._children,n={},i=0,r=e.length;i<r;i++){var a=e[i];n[a]||(n[a]=0);for(var s=0,o=t.length;s<o;s++){var l=t[s];n[a]+=l.get(a)}}this.setMultipleValues(n),t.length||this.set("isComposite",!1)}})),__superMap:{_$P9$init:"init"}})},function(e,t,n){"use strict";function i(e,t,n){return n!==e.get(t)&&e.set(t,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(461),r=n(319);function a(e,t,n){var a,s,o;if(e===t||!e&&!t)return!1;if(e&&!t)s=Object.keys(e);else if(!e&&t)o=Object.keys(t);else{var l,c=null;n&&(c=Object(r.a)(n));var u,d,h,p,f={};for(l in s=[],a=[],e)f[l]=!0,c&&c[l]||(u=Object.prototype.hasOwnProperty.call(e,l),d=e[l],h=Object.prototype.hasOwnProperty.call(t,l),p=t[l],!h&&u||void 0===p&&void 0!==d?s.push(l):Object(i.a)(d,p)||a.push(l));for(l in o=[],t)f[l]||o.push(l)}return!!(o&&0!==o.length||s&&0!==s.length||a&&0!==a.length)&&{updated:a||[],removed:s||[],added:o||[]}}},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n(221),r=function(e){var t=o++,n=t-l;c[n]=e;var i=arguments.length;if(i>1){for(var r=d.pop()||[],a=1;a<i;a++)r[a-1]=arguments[a];u[n]=r}return s||(s=!0,Promise.resolve().then(p)),t},a=function(e){var t=e-l;c[t]=void 0;var n=u[t];n&&(u[t]=void 0,h(n))},s=!1,o=1,l=1,c=[],u=[],d=[],h=function(e){e.length=0,d.push(e)},p=i.a((function(){var t;s=!1;var n=c.length;if(n){for(t=0;t<n;t++){var i=c[t];if(i){var r=u[t];r?(i.apply(e,r),h(r)):i()}}var a=n;for(n=c.length,t=a;t<n;t++){var o=t-a;c[o]=c[t],u[o]=u[t],c[t]=void 0,u[t]=void 0}c.length=u.length=n-a,l+=a}}))}).call(this,n(172))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(20),r=n(7),a={mixinDependencies:[i.b],viewportWidth:r.b(0),viewportHeight:r.b(0)}},function(e,t,n){"use strict";n(6),n(0),n(4),n.d(t,"a",(function(){return a}));var i=n(7),r=n(310),a={mixinDependencies:[n(405).a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"verticalScrollIndicator"},{type:"VIEWOUTLET",tagname:"view",name:"horizontalScrollIndicator"}]}}},hasVerticalScrollIndicator:Object(i.b)(!0),hasHorizontalScrollIndicator:Object(i.b)(!0),horizontalScrollIndicatorClass:r.a,verticalScrollIndicatorClass:r.c,scrollIndicatorOptions:{},topInset:Object(i.b)(0),scrollIndicatorTopMargin:Object(i.b)(6),scrollIndicatorTotalTopMargin:Object(i.b)({dependencies:["topInset","scrollIndicatorTopMargin"],readOnly:!0,get:Object.assign((function(){return this.topInset+this.scrollIndicatorTopMargin}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),scrollIndicatorBottomMargin:Object(i.b)(6),scrollIndicatorLeftMargin:Object(i.b)(6),scrollIndicatorRightMargin:Object(i.b)(6),verticalScrollIndicator:Object(i.b)({readOnly:!0,strong:!0,dependencies:["hasVerticalScrollIndicator"],downstreamBindings:{otherScrollIndicator:"(owner).horizontalScrollIndicator",scrollMin:"(owner).scrollMinY",scrollSize:"(owner).height",totalSize:"(owner).scrollHeight",scrollPosition:"(owner).scrollY",beginMargin:"(owner).scrollIndicatorTotalTopMargin",endMargin:"(owner).scrollIndicatorBottomMargin"},get:Object.assign((function(){return this.hasVerticalScrollIndicator?this.verticalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.verticalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}})}),horizontalScrollIndicator:Object(i.b)({readOnly:!0,strong:!0,dependencies:["hasHorizontalScrollIndicator"],downstreamBindings:{otherScrollIndicator:"(owner).verticalScrollIndicator",scrollMin:"(owner).scrollMinX",scrollSize:"(owner).width",totalSize:"(owner).scrollWidth",scrollPosition:"(owner).scrollX",beginMargin:"(owner).scrollIndicatorLeftMargin",endMargin:"(owner).scrollIndicatorRightMargin"},get:Object.assign((function(){return this.hasHorizontalScrollIndicator?this.horizontalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.horizontalScrollIndicatorClass.create(this.scrollIndicatorOptions):null}})})}},function(e,t,n){"use strict";n(4),n.d(t,"a",(function(){return C}));var i=n(15),r=n(77),a=n(55),s=n(7),o=n(20),l=n(262),c=n(256),u=n(350),d=n(130),h=n(474),p=n(777),f=n(309),g=n(300),m=n(389),_=n(447),v=n(194),b=n(345),y=n(99),w=n(776),I=n(472),S=s.a.extend({readOnly:!0,cacheable:!1,get:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])},staticMembers:{__QUALIFIED_CLASS_NAME__:"SizeProperty"}}),C={mixinDependencies:[o.b,g.a,m.a,I.a],init:function(){var e=this,t=arguments;e.__s._$Wp$init.apply(e,t);var n=this.scrollGestureRecognizer=_.a.create({event:"updateScroll",delegate:this});this.addGestureRecognizer(n)},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return(!this.hasMomentum||e===this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer?t.pointerType===v.b.TOUCH||t.pointerType===v.b.PEN:n.__s._$jO$gestureRecognizerShouldReceive.apply(n,i))},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return e===this.scrollGestureRecognizer?!!t.instanceOf(b.b)&&!(t.view!==this&&!this.element.contains(t.view.element))&&!this.hasMomentum:n.__s._$ux$gestureRecognizerShouldRequireFailureOf.apply(n,i)},_lastTranslation:{x:0,y:0},updateScroll:function(e){var t=e.state,n=e.translation,i=this._lastTranslation,r=this.normalizedX,a=this.normalizedY;this._lastTranslation=n;var s=i.x-n.x,o=i.y-n.y,l=0;this.canScrollHorizontally&&(l=this._calculatePositionWithStretch(s,r,this.normalizedMaxX,this.width));var c=0;if(this.canScrollVertically&&(c=this._calculatePositionWithStretch(o,a,this.normalizedMaxY,this.height)),this.scrollBy(l,c),t===y.b.Ended){this._lastTranslation={x:0,y:0};var u=e.velocity;Math.abs(u.y)<.175&&(u.y=0),Math.abs(u.x)<.175&&(u.x=0),u.y*=-1,u.x*=-1,this.beginMomentumScroll(u)}},_calculatePositionWithStretch:function(e,t,n,i){var r=t+e,a=E(r,0,n,i),s=Math.sign(e)*Math.min(Math.abs(r-a),Math.abs(e));return e-s+s/2.5},supportsTouchScroll:Object(i.d)(f.c.isTouchSupported),mayUseVerticalScrollingAsHorizontal:Object(i.d)(),processWheelEvent:function(e){this.mayUseVerticalScrollingAsHorizontal&&e.deltaY&&(e.deltaX+=e.deltaY,e.deltaY=0)},wheel:function(e){this.nativeScrollIsEnabled&&this.shouldTrackNativeScroll&&this.tearDownNativeScrollTracking();var t=e.deltaX,n=e.deltaY,i=t>0?this.scrollMaxX-this.width-this.scrollX:this.scrollX-this.scrollMinX,r=n>0?this.scrollMaxY-this.height-this.scrollY:this.scrollY-this.scrollMinY;if(i<=0&&r<=0)return!1;e.preventDefault();var a=this._deferredScrollEvent;a?(a.deltaX+=t,a.deltaY+=n,a.nativeEvent=e):((a=this._deferredScrollEvent=w.a.create({deltaX:t,deltaY:n,nativeEvent:e})).retain(this,"retain during scroll deferral"),this._scrollRAF||(this._scrollRAF=Object(c.a)(Object(u.a)(this._flushAccumulatedWheelDeltas,this))))},_flushAccumulatedWheelDeltas:function(){var e=this._deferredScrollEvent;this._cleanUpCurrentScrollAccumulation(),e&&(this.bubbleScroll(e),this.overflowX=this.overflowY=0)},_cleanUpCurrentScrollAccumulation:function(){var e=this._deferredScrollEvent;e&&(this._deferredScrollEvent=null,e.autorelease(this,"retain during scroll deferral"));var t=this._scrollRAF;t&&(this._scrollRAF=null,cancelAnimationFrame(t))},dispose:function(){var e=this,t=arguments;this._cleanUpCurrentScrollAccumulation(),e.__s._$2v2$dispose.apply(e,t)},overflowX:Object(s.b)(0),overflowY:Object(s.b)(0),bubbleScroll:function(e){var t=this;for(e.deltaX=e.deltaX+this.overflowX,e.deltaY=e.deltaY+this.overflowY;!e.isEmpty;){for(;t&&!t.handleScroll;)t=t.nextResponder;if(!t)break;t.handleScroll(e),t=t.nextResponder}this.overflowX=e.deltaX,this.overflowY=e.deltaY},scrollX:Object(s.b)(0),normalizedX:Object(s.b)({readOnly:!0,dependencies:["scrollX","scrollMinX"],get:Object.assign((function(){return this.scrollX-this.scrollMinX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollY:Object(s.b)(0),normalizedY:Object(s.b)({readOnly:!0,dependencies:["scrollY","scrollMinY"],get:Object.assign((function(){return this.scrollY-this.scrollMinY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollMinX:Object(s.b)(0),scrollMaxX:Object(s.b)(0),normalizedMaxX:Object(s.b)({readOnly:!0,dependencies:["scrollMaxX","scrollMinX"],get:Object.assign((function(){return this.scrollMaxX-this.scrollMinX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollMinY:Object(s.b)(0),scrollMaxY:Object(s.b)(0),normalizedMaxY:Object(s.b)({readOnly:!0,dependencies:["scrollMaxY","scrollMinY"],get:Object.assign((function(){return this.scrollMaxY-this.scrollMinY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),scrollHeight:Object(r.c)(S,{dependencies:["scrollMinY","scrollMaxY"]}),scrollWidth:Object(r.c)(S,{dependencies:["scrollMinX","scrollMaxX"]}),height:Object(s.b)(0),width:Object(s.b)(0),canScrollVertically:Object(s.b)({readOnly:!0,dependencies:["scrollHeight","height"],get:Object.assign((function(){return this.scrollHeight>this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),canScrollHorizontally:Object(s.b)({readOnly:!0,dependencies:["scrollWidth","width"],get:Object.assign((function(){return this.scrollWidth>this.width}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),handleScroll:function(e){var t=this.scrollX,n=this.scrollY,i=e.deltaX,r=e.deltaY,a=(i>0?this.scrollMaxX-this.width:this.scrollMinX)-t,s=(r>0?this.scrollMaxY-this.height:this.scrollMinY)-n,o=e.consumeX(a),l=e.consumeY(s);this.attemptScrollByForEvent(o,l,e)},attemptScrollBy:function(e,t){this.stopMomentumScroll();var n=this._attemptScrollBy(e,t);return this.didScrollBy&&this.didScrollBy(e,t),n},attemptScrollByForEvent:function(e,t,n){n.isMomentumScroll||this.stopMomentumScroll();var i=this._attemptScrollBy(e,t);return this.didScrollBy&&this.didScrollBy(e,t,n),i},_attemptScrollBy:function(e,t){var n=this.scrollX,i=n+e;e=(i=E(i,this.scrollMinX,this.scrollMaxX,this.width))-n;var r=this.scrollY,a=r+t;return t=(a=E(a,this.scrollMinY,this.scrollMaxY,this.height))-r,(e||t)&&this._scrollBy(e,t),0!==e||0!==t},validateScrollPosition:function(){var e=0;if(!this._s_isValidatingScrollPosition){this._s_isValidatingScrollPosition=!0;for(var t=!1;this._attemptScrollBy(0,0);)if(t=!0,e++>10){d.b.warn("Could not validate scroll position.Minimums: "+this.scrollMinX+","+this.scrollMinY+".Maximums: "+this.scrollMaxX+","+this.scrollMaxY+".Current: "+this.scrollX+", "+this.scrollY);break}return this._s_isValidatingScrollPosition=!1,t}},scrollBy:function(e,t){this.stopMomentumScroll(),this._internalScrollBy(e,t)},_internalScrollBy:function(e,t){this.canScrollHorizontally||(e=0),this.canScrollVertically||(t=0),this._scrollBy(e,t),this.didScrollBy&&this.didScrollBy(e,t)},_scrollBy:function(e,t){e&&(this.scrollX+=e),t&&(this.scrollY+=t)},didScrollBy:null,pageUp:function(){this.attemptScrollBy(0,-this.height)},pageDown:function(){this.attemptScrollBy(0,this.height)},pageLeft:function(){this.attemptScrollBy(-this.width,0)},pageRight:function(){this.attemptScrollBy(this.width,0)},scrollTo:function(e,t){var n=0;void 0!==e&&(e/=100,n=this.scrollX,n=this.scrollWidth*e+this.scrollMinX-n);var i=0;void 0!==t&&(t/=100,i=this.scrollY,i=this.scrollHeight*t+this.scrollMinY-i),this.attemptScrollBy(n,i)},viewport:Object(s.b)({strong:!0,defaultValue:Object(a.c)(l.a)}),_updateViewport:Object(o.h)("viewport","scrollX","scrollY","width","height",(function(e,t,n,i,r){e.beginBatchSet().set("x",t).set("y",n).set("width",i).set("height",r).end()})),scrollToRect:function(e){var t=this.viewport,n=0;e.isLeftOf(t)?n=e.x-t.x:e.isRightOf(t)&&(n=e.right-t.right);var i=0;e.isAbove(t)?i=e.y-t.y:e.isBelow(t)&&(i=e.bottom-t.bottom),this.attemptScrollBy(n,i)},hasMomentum:Object(s.b)({readOnly:!0,get:function(){return 0!==this._momentumRAF}}),_xAnimation:null,_yAnimation:null,_previousTimestamp:NaN,_momentumRAF:0,beginMomentumScroll:function(e){var t=this._previousTimestamp=performance.now(),n=e.x,i=e.y;this.canScrollHorizontally&&(this._xAnimation=new h.a({initialTimestamp:t,initialVelocity:Math.abs(n),direction:n<0?-1:1})),this.canScrollVertically&&(this._yAnimation=new h.a({initialTimestamp:t,initialVelocity:Math.abs(i),direction:i<0?-1:1})),this._momentumRAF=Object(c.a)(Object(u.a)(this._momentumTick,this)),this.propertyChanged("hasMomentum")},stopMomentumScroll:function(){var e=this._momentumRAF;0!==e&&(cancelAnimationFrame(e),this._momentumRAF=0,this.propertyChanged("hasMomentum"))},_getAnimationDelta:function(e,t,n,i,r,a){var s=e.positionDelta(t,n),o=i+s,l=E(o,0,r,a),c=e.velocityAtTime(n),u=o-l;return e instanceof h.a&&0!==u?[s,new p.a({initialPosition:u,initialOffset:u,initialTimestamp:n,initialVelocity:c})]:Math.abs(c)<=.01?[l-o,null]:[s,e]},_momentumTick:function(){var e,t,n=this._xAnimation,i=this._yAnimation,r=this.width,a=this.height,s=this.normalizedX,o=this.normalizedY,l=this.normalizedMaxX,d=this.normalizedMaxY,h=this._previousTimestamp,p=performance.now();this._previousTimestamp=p;var f=0;if(this.canScrollHorizontally){var g=this._getAnimationDelta(n,h,p,s,l,r);f=g[0],e=g[1]}var m=0;if(this.canScrollVertically){var _=this._getAnimationDelta(i,h,p,o,d,a);m=_[0],t=_[1]}this._internalScrollBy(f,m),e||t?this._momentumRAF=Object(c.a)(Object(u.a)(this._momentumTick,this)):(this._momentumRAF=0,this.propertyChanged("hasMomentum")),e&&(this._xAnimation=e),t&&(this._yAnimation=t)},__superMap:{_$Wp$init:"init",_$jO$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$ux$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$2v2$dispose:"dispose"}};function E(e,t,n,i){var r=Math.min(e,n-i);return Math.max(r,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(15),r=n(578).a.extend({value:Object(i.d)({get:function(){return this.key.value}}),key:Object(i.d)({strong:!0}),handle:Object(i.d)({get:function(){return this.key}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ItemCell"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var i=n(7),r=n(13),a=n(298),s=n(20),o=n(82),l=n(155),c=n(350),u=n(143),d=n(316),h=n(25),p=n(787),f=i.a.extend({readOnly:!0,desiredOutputType:null,source:null,sourceWillNeverBeObservable:!1,retainsInputs:!0,retainsOutputs:!0,outputForInput:function(e){return e},inputDidEnter:function(e,t){},inputDidExit:function(e){},outputDidEnter:function(e){},outputDidExit:function(e){},inputDidMutate:function(e,t,n,i){if(this[i._key_lastReturnedValueWasObservableArray]){var r=this[i._key_lastReturnedValue];r.beginBatchedChanges();for(var a,s=0;!isNaN(a=n[s]);s++)r.splice(a,1,t);r.endBatchedChanges()}else this.propertyChanged(i.key)},init:function(e){var t=this,n=arguments,i=e.source,a=e.dependencies;(!i||a&&1!==a.length)&&r.b("Must include exactly one dependency binding at `source` on MappedArrayProperty."),e.dependencies=[i],t.__s._$33K$init.apply(t,n)},wasRegistered:function(e,t){var n=this,i=arguments,r=a.a(e);this._inputRetainReasonName="input to MappedArrayProperty `"+t+"` on "+r,this._outputRetainReasonName="output from MappedArrayProperty `"+t+"` on "+r;var u="_mappedArrayProperty_at_"+t+"_";if(this._key_inputsByInputGuid=u+"inputsByInputGuid",this._key_outputsByOutputGuid=u+"outputsByOutputGuid",this._key_outputsByInputGuid=u+"outputsByInputGuid",this._key_knownInputGuids=u+"knownInputGuids",this._key_knownInputGuids_hash=u+"knownInputGuids_hash",this._key_knownOutputGuids=u+"knownOutputGuids",this._key_knownOutputGuids_hash=u+"knownOutputGuids_hash",this._key_lastReturnedValue=u+"lastReturnedValue",this._key_lastReturnedValueWasObservableArray=u+"lastReturnedValueWasObservableArray",this._key_outputCountsByOutputGuid=u+"outputCountsByOutputGuid",this._key_knownInputFirstIndices=u+"knownInputFirstIndices",this._key_knownInputDupeMap=u+"knownInputDupeMap",this._key_isDisposed=u+"isDisposed",this._key_notifyChangeFunc=u+"notifyChangeFunc",!this.sourceWillNeverBeObservable){var d=u+"inputsContentsDidChangeObserver";e.registerMetadata(u+"inputsContentsDidChangeObserverMaintenanceObserver",s.h(this.source,(function(e){var n=this[d];n&&(n.disconnect(),n.release(this,"mappedArrayProperty invalidation from contentsDidChange"),this[d]=null),o.a(e,l.b)&&(this[d]=e.listen("contentsDidChange",c.a(this.propertyChanged,this,t)).retain(this,"mappedArrayProperty invalidation from contentsDidChange"))})))}n.__s._$4GP$wasRegistered.apply(n,i)},get:function(e,t,n,i){var r,a,s,c,d,p,f=i,g=this[f._key_isDisposed]?null:f.internalGet(this,t[0+n]),_=Array.isArray(g)?Array:g?g.constructor:null,v=null;if(g&&g.objectAt){for(var b=(v=h.arrayPool.getInstance()).length=g.length;b--;)v[b]=g.objectAt(b);g=v}var y=!1;g||(y=!0,g=h.arrayPool.getInstance());var w=this[f._key_knownInputGuids];w&&(this[f._key_knownInputGuids]=null);var I=this[f._key_knownInputGuids_hash];I&&(this[f._key_knownInputGuids_hash]=null);var S=this[f._key_knownOutputGuids];S&&(this[f._key_knownOutputGuids]=null);var C=this[f._key_knownOutputGuids_hash];C&&(this[f._key_knownOutputGuids_hash]=null);var E=this[f._key_lastReturnedValue];E&&(m.autodisposeInstance(E),this[f._key_lastReturnedValue]=E=null);var A=this[f._key_outputCountsByOutputGuid];A&&(h.objectPool.disposeInstance(A),this[f._key_outputCountsByOutputGuid]=A=null);var O=this[f._key_knownInputFirstIndices];O&&(h.objectPool.disposeInstance(O),this[f._key_knownInputFirstIndices]=O=null);var T=this[f._key_knownInputDupeMap];T&&(h.arrayPool.disposeInstance(T),this[f._key_knownInputDupeMap]=null),this[f._key_lastReturnedValueWasObservableArray]=void 0;var M=this[f._key_inputsByInputGuid]||(this[f._key_inputsByInputGuid]={}),D=this[f._key_outputsByInputGuid]||(this[f._key_outputsByInputGuid]={}),P=this[f._key_outputsByOutputGuid]||(this[f._key_outputsByOutputGuid]={}),L=f.desiredOutputType||_,R=m.getInstanceOf(L),x=o.a(R,l.b),N=L===Array;x&&R.beginBatchedChanges();var F=h.arrayPool.getInstance(),V=h.arrayPool.getInstance(),k=h.objectPool.getInstance(),B=h.objectPool.getInstance();for(A=h.objectPool.getInstance(),a=g.length,r=0;r<a;r++)s=g[r],c=u.b(s),d=D.hasOwnProperty(c)?D[c]:f.outputForInput.call(this,g[r]),p=u.b(d),N?R[r]=d:R.setIndex(r,d),k[c]||(k[c]=!0,F.push(c)),B[p]||(B[p]=!0,V.push(p)),A[p]=1+(A[p]||0),M[c]=s,D[c]=d,P[p]=d;for(a=F.length,r=0;r<a;r++)c=F[r],I&&I[c]||f._inputDidEnter.call(this,f,M[c]);for(a=w?w.length:0,r=0;r<a;r++)c=w[r],k&&k[c]||(f._inputDidExit.call(this,f,M[c]),delete M[c],delete D[c]);for(a=V.length,r=0;r<a;r++)p=V[r],C&&C[p]||f._outputDidEnter.call(this,f,P[p]);for(a=S?S.length:0,r=0;r<a;r++)p=S[r],B&&B[p]||(f._outputDidExit.call(this,f,P[p]),delete P[p]);if(w&&h.arrayPool.disposeInstance(w),I&&h.objectPool.disposeInstance(I),S&&h.arrayPool.disposeInstance(S),C&&h.objectPool.disposeInstance(C),y&&(h.arrayPool.disposeInstance(g),h.arrayPool.disposeInstance(F),h.objectPool.disposeInstance(k),m.disposeInstance(R),h.arrayPool.disposeInstance(V),h.objectPool.disposeInstance(B),h.objectPool.disposeInstance(A),g=F=k=R=V=B=A=null),this[f._key_knownInputGuids]=F,this[f._key_knownInputGuids_hash]=k,this[f._key_lastReturnedValue]=R,this[f._key_knownOutputGuids]=V,this[f._key_knownOutputGuids_hash]=B,this[f._key_outputCountsByOutputGuid]=A,R){this[f._key_lastReturnedValueWasObservableArray]=x;var j=h.arrayPool.getAutodisposingInstanceFromMap(g,u.b),U=this[f._key_knownInputFirstIndices]=h.objectPool.getInstance(),G=this[f._key_knownInputDupeMap]=h.arrayPool.getInstance();for(G.length=j.length,r=j.length-1;r>=0;r--){var H=U[c=j[r]]||0;G[r]=H,U[c]=r}}return v&&(h.arrayPool.disposeInstance(v),v=g=null),R&&x&&R.endBatchedChanges(),R},_inputDidMutate:function(e,t){var n=this[e._key_outputsByInputGuid],i=u.b(t),r=n[i],a=e.outputForInput.call(this,t);if(a!==r){n[i]=a;var s=this[e._key_outputsByOutputGuid],o=this[e._key_outputCountsByOutputGuid],l=this[e._key_knownOutputGuids],c=this[e._key_knownOutputGuids_hash],d=h.arrayPool.getAutodisposingInstance(),f=this[e._key_knownInputDupeMap],g=this[e._key_knownInputFirstIndices][i];do{d.push(g),g=f[g]}while(g>0);var m=u.b(r),_=o[m],v=u.b(a),b=o[v]||0,y=d.length;b||(s[v]=a,c[v]=!0,l.push(v),e._outputDidEnter.call(this,e,a)),o[m]=_-=y,o[v]=b+=y,_||(delete s[m],delete c[m],Object(p.c)(l,m),e._outputDidExit.call(this,e,r)),e.inputDidMutate.call(this,t,a,d,e)}},_inputDidEnter:function(e,t){var n=this[e._key_notifyChangeFunc]||(this[e._key_notifyChangeFunc]=e._inputDidMutate.bind(this,e));e.retainsInputs&&t&&t.retain&&t.retain(this,e._inputRetainReasonName),e.inputDidEnter.call(this,t,n)},_inputDidExit:function(e,t){e.inputDidExit.call(this,t),e.retainsInputs&&t&&t.release&&t.release(this,e._inputRetainReasonName)},_outputDidEnter:function(e,t){e.retainsOutputs&&t&&t.retain&&t.retain(this,e._outputRetainReasonName),e.outputDidEnter.call(this,t)},_outputDidExit:function(e,t){e.outputDidExit.call(this,t),e.retainsOutputs&&t&&t.release&&t.release(this,e._outputRetainReasonName)},_disposeMappedArrayProperty:function(e){this[e._key_isDisposed]=!0,e.get.call(this,void 0,null,NaN,e),this[e._key_isDisposed]=void 0},disposeForObject:function(e,t){var n=this,i=arguments;this._disposeMappedArrayProperty.call(e,this),n.__s._$ALQ$disposeForObject.apply(n,i)},__superMap:{_$33K$init:"init",_$4GP$wasRegistered:"wasRegistered",_$ALQ$disposeForObject:"disposeForObject"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MappedArrayProperty"}});function g(){return f.define.apply(f,arguments)}var m={getInstanceOf:function(e){return this._getPoolForArrayClass(e).getInstance()},disposeInstance:function(e){var t=this._getPoolForArrayClass(e.constructor);o.a(e,l.b)?t.autodisposeInstance(e):t.disposeInstance(e)},autodisposeInstance:function(e){this._getPoolForArrayClass(e.constructor).autodisposeInstance(e)},_getPoolForArrayClass:function(e){if(!d.a(e))return h.arrayPool;var t=u.b(e);return this._arrayPools[t]||(this._arrayPools[t]=h.Pool.extend({createInstance:function(){return e.create()},disposeInstance:function(e){var t=this,n=arguments;e.clear(),t.__s._$ArH$disposeInstance.apply(t,n)},__superMap:{_$ArH$disposeInstance:"disposeInstance"}}).create())},_arrayPools:{}}},function(e,t,n){"use strict";n.r(t),n.d(t,"CollapseFunction",(function(){return a})),n.d(t,"collapser",(function(){return s}));var i=n(77),r=n(589),a=i.a.extend({requiresSupport:r.a,priority:0,call:function(){return 0},getFunctionForObject:function(e){var t=this.call.bind(e);return t.priority=this.priority,t.category=this.category,t},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollapseFunction"}}),s=function(e,t,n){return a.create({priority:e,call:t,category:n})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(15),r=n(133),a={staticMembers:{isSerializableModel:!0,serializableModelPropertyMap:i.d({readOnly:!0,get:function(){var e=this._serializableModelPropertyMap;return void 0===e?this._serializableModelPropertyMap=this._getSerializableModelPropertyMap():e}}),_getSerializableModelPropertyMap:function(){var e=this.prototype.getMetadataByType(r.a),t={};for(var n in e)t[n]=e[n];return t},_serializableModelPropertyMap:void 0,serializableModelPropertyNames:i.d({readOnly:!0,get:function(){var e=this._serializableModelPropertyNames;return void 0===e?this._serializableModelPropertyNames=this._getSerializableModelPropertyNames():e}}),_getSerializableModelPropertyNames:function(){var e=this.serializableModelPropertyMap;return Object.getOwnPropertyNames(e)},_serializableModelPropertyNames:void 0,serviceKeys:i.d({readOnly:!0,get:function(){var e=this._serviceKeys;return void 0===e?this._serviceKeys=this._getServiceKeys():e}}),_getServiceKeys:function(){for(var e=new Set,t=this.serializableModelPropertyNames,n=this.serializableModelPropertyMap,i=0,a=t.length;i<a;i++){var s=t[i],o=n[s];if(o instanceof r.a.Constructor){var l=o.dataKey,c=void 0===l?s:l,u=o.serviceKey,d=void 0===u?c:u;e.add(d)}}return Array.from(e).sort()},_serviceKeys:void 0,getDataValuesFromServiceValues:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializableModelPropertyNames,i=this.serializableModelPropertyMap,r=0,a=n.length;r<a;r++){var s=n[r],o=i[s],l=o.dataKey,c=void 0===l?s:l,u=o.serviceKey,d=void 0===u?c:u,h=o.serviceValueGetter(e,d),p="function"===typeof o.getDataValueFromServiceValue?o.getDataValueFromServiceValue(h,e):h;void 0===p&&c in t||(t[c]=p)}return t},getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=void 0!==n;void 0===t.fields&&(t.fields={});for(var r=this.serializableModelPropertyNames,a=this.serializableModelPropertyMap,s=0,o=r.length;s<o;s++){var l=r[s],c=a[l],u=c.dataKey,d=void 0===u?l:u;if(!i||n.includes(d)){var h=c.serviceKey,p=void 0===h?d:h,f=e[d],g="function"===typeof c.getServiceValueFromDataValue?c.getServiceValueFromDataValue(f,e):f;!i&&c.readOnly||"function"!==typeof c.serviceValueSetter||c.serviceValueSetter(t,p,g)}}return t}},getServiceValuesFromDataValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.constructor.getServiceValuesFromDataValues(this.getDataHash(),t,e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(20),a=n(200),s=n(7),o=n(139),l=n(17),c=n(467),u=n(266),d=i.a.extend(r.b,a.a,c.a).extend({derivativeRequestReason:void 0,priority:1/0,offscreeniness:void 0,derivative:s.b({strong:!0}),derivativeId:r.h("derivative",(function(e){this.derivativeId=e?e.derivativeId:void 0})),derivativeURL:r.h("derivative",(function(e){this.derivativeURL=e?e.url:void 0})),request:s.b({strong:!0}),progress:s.b({readOnly:!0,binding:"request.progress"}),_didBeginWantingCancel:void 0,_smdls_willDispose:void 0,_dlm_hasSkipped:!1,_dlm_isInvalid:!1,initFromPool:function(e){this.__s._$17H$initFromPool.call(this),this.derivative=e||void 0},resolve:function(){this.__s._$1Ac$resolve.call(this,this.derivative)},cancel:function(){var e=this,t=arguments;this.isFinalized||(this._didBeginWantingCancel&&this._didBeginWantingCancel(this),this.request=void 0,e.__s._$1GA$cancel.apply(e,t))},cleanup:function(){var e=this,t=arguments,n="Keeping derivative around waiting for async function to continue",i=this.derivative;i&&(i.retain(this,n),o.a(u.a(i.release,i,this,n),0)),this._smdls_willDispose&&this._smdls_willDispose(this),l.a.pause(),this._didBeginWantingCancel=void 0,this._smdls_willDispose=void 0,this._dlm_hasSkipped=!1,this._dlm_isInvalid=!1,this.priority=1/0,this.offscreeniness=void 0,this.derivativeRequestReason=void 0,this.request=void 0,this.derivative=void 0,l.a.resume(),e.__s._$1o9$cleanup.apply(e,t)},__superMap:{_$17H$initFromPool:"initFromPool",_$1Ac$resolve:"resolve",_$1GA$cancel:"cancel",_$1o9$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DerivativeLoadRef"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("AssetHdrType",{NONE:0,HDR:1,HDREV0:2,EV0:3,UNKNOWN:4})},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=function(e,t){return e-t},r=function(e,t){return t-e};function a(e,t,n,i,r){var a=e.length;if(0===a)return 0;for(var s=0,o=r?r.call(e,t,e):t,l=0;l<a;l++){var c=i?i.call(e,l,e):e[l];if(void 0!==c){var u=n(o,r?r.call(e,c,e):c);if(u<=0&&s>=0)return l;s=u}}return a}function s(e,t,n){var i=e.length;if(!(i<=1)){for(var r=new Map,a=new Array(i),s=0;s<i;s++){var o=e[s],l=n(o);a[s]=l,r.set(l,o)}a.sort(t);for(var c=0;c<i;c++)e[c]=r.get(a[c])}}},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!i.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(491),r=n(363),a=i("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,n){var i=n(134)("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(o){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(o){}return n}},function(e,t,n){"use strict";var i=n(232),r=n(291),a=n(370),s=n(217),o=n(501),l=s.set,c=s.getterFor("Array Iterator");e.exports=o(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var i=n(218),r=n(173),a=n(362),s=n(146),o=function(e){return function(t,n,o,l){i(n);var c=r(t),u=a(c),d=s(c.length),h=e?d-1:0,p=e?-1:1;if(o<2)for(;;){if(h in u){l=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(l=n(l,u[h],h,c));return l}};e.exports={left:o(!1),right:o(!0)}},function(e,t,n){"use strict";var i=n(108),r=n(145),a=n(504),s=n(213),o=n(335),l=n(91),c=n(293),u=n(244),d=n(146),h=n(609),p=n(864),f=n(245),g=n(292),m=n(305).f,_=n(163).f,v=n(498),b=n(259),y=n(217),w=y.get,I=y.set,S=i.ArrayBuffer,C=S,E=i.DataView,A=E&&E.prototype,O=Object.prototype,T=i.RangeError,M=p.pack,D=p.unpack,P=function(e){return[255&e]},L=function(e){return[255&e,e>>8&255]},R=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},x=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},N=function(e){return M(e,23,4)},F=function(e){return M(e,52,8)},V=function(e,t){_(e.prototype,t,{get:function(){return w(this)[t]}})},k=function(e,t,n,i){var r=h(n),a=w(e);if(r+t>a.byteLength)throw T("Wrong index");var s=w(a.buffer).bytes,o=r+a.byteOffset,l=s.slice(o,o+t);return i?l:l.reverse()},B=function(e,t,n,i,r,a){var s=h(n),o=w(e);if(s+t>o.byteLength)throw T("Wrong index");for(var l=w(o.buffer).bytes,c=s+o.byteOffset,u=i(+r),d=0;d<t;d++)l[c+d]=u[a?d:t-d-1]};if(a){if(!l((function(){S(1)}))||!l((function(){new S(-1)}))||l((function(){return new S,new S(1.5),new S(NaN),"ArrayBuffer"!=S.name}))){for(var j,U=(C=function(e){return c(this,C),new S(h(e))}).prototype=S.prototype,G=m(S),H=0;G.length>H;)(j=G[H++])in C||s(C,j,S[j]);U.constructor=C}g&&f(A)!==O&&g(A,O);var W=new E(new C(2)),$=A.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||o(A,{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},{unsafe:!0})}else C=function(e){c(this,C,"ArrayBuffer");var t=h(e);I(this,{bytes:v.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},E=function(e,t,n){c(this,E,"DataView"),c(e,C,"DataView");var i=w(e).byteLength,a=u(t);if(a<0||a>i)throw T("Wrong offset");if(a+(n=void 0===n?i-a:d(n))>i)throw T("Wrong length");I(this,{buffer:e,byteLength:n,byteOffset:a}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},r&&(V(C,"byteLength"),V(E,"buffer"),V(E,"byteLength"),V(E,"byteOffset")),o(E.prototype,{getInt8:function(e){return k(this,1,e)[0]<<24>>24},getUint8:function(e){return k(this,1,e)[0]},getInt16:function(e){var t=k(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=k(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return x(k(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return x(k(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(k(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(k(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){B(this,1,e,P,t)},setUint8:function(e,t){B(this,1,e,P,t)},setInt16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){B(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){B(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){B(this,4,e,N,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){B(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});b(C,"ArrayBuffer"),b(E,"DataView"),e.exports={ArrayBuffer:C,DataView:E}},function(e,t,n){"use strict";var i=n(22),r=n(108),a=n(366),s=n(216),o=n(307),l=n(294),c=n(293),u=n(128),d=n(91),h=n(415),p=n(259),f=n(420);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),_=g?"set":"add",v=r[e],b=v&&v.prototype,y=v,w={},I=function(e){var t=b[e];s(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof v||!(m||b.forEach&&!d((function(){(new v).entries().next()})))))y=n.getConstructor(t,e,g,_),o.REQUIRED=!0;else if(a(e,!0)){var S=new y,C=S[_](m?{}:-0,1)!=S,E=d((function(){S.has(1)})),A=h((function(e){new v(e)})),O=!m&&d((function(){for(var e=new v,t=5;t--;)e[_](t,t);return!e.has(-0)}));A||((y=t((function(t,n){c(t,y,e);var i=f(new v,t,y);return void 0!=n&&l(n,i[_],i,g),i}))).prototype=b,b.constructor=y),(E||O)&&(I("delete"),I("has"),g&&I("get")),(O||C)&&I(_),m&&b.clear&&delete b.clear}return w[e]=y,i({global:!0,forced:y!=v},w),p(y,e),m||n.setStrong(y,e,g),y}},function(e,t,n){var i=n(128),r=n(292);e.exports=function(e,t,n){var a,s;return r&&"function"==typeof(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&r(e,s),e}},function(e,t){var n=Math.expm1,i=Math.exp;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:i(e)-1}:n},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,n){"use strict";var i=n(242),r=n(108),a=n(91);e.exports=i||!a((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete r[e]}))},function(e,t,n){"use strict";var i=n(218),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";var i=n(337),r=n(510),a=RegExp.prototype.exec,s=String.prototype.replace,o=a,l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1];(l||u||c)&&(o=function(e){var t,n,r,o,d=this,h=c&&d.sticky,p=i.call(d),f=d.source,g=0,m=e;return h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(f="(?: "+f+")",m=" "+m,g++),n=new RegExp("^(?:"+f+")",p)),u&&(n=new RegExp("^"+f+"$(?!\\s)",p)),l&&(t=d.lastIndex),r=a.call(h?n:d,m),h?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:l&&r&&(d.lastIndex=d.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=o},function(e,t,n){var i=n(244),r=n(212),a=function(e){return function(t,n){var a,s,o=String(r(t)),l=i(n),c=o.length;return l<0||l>=c?e?"":void 0:(a=o.charCodeAt(l))<55296||a>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):a:e?o.slice(l,l+2):s-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){"use strict";n(623);var i=n(216),r=n(91),a=n(134),s=n(425),o=n(213),l=a("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=a("replace"),h=!!/./[d]&&""===/./[d]("a","$0"),p=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=a(e),g=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=g&&!r((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!g||!m||"replace"===e&&(!c||!u||h)||"split"===e&&!p){var _=/./[f],v=n(f,""[e],(function(e,t,n,i,r){return t.exec===s?g&&!r?{done:!0,value:_.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),b=v[0],y=v[1];i(String.prototype,e,b),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}d&&o(RegExp.prototype[f],"sham",!0)}},function(e,t,n){"use strict";var i=n(426).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i=n(241),r=n(425);e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var a=n.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t){e.exports=90},function(e,t,n){"use strict";var i=n(1082),r=function(){this.events={}},a=r.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new i(e)),this.events[e].cancelAnimationFrame},e.exports=new r},function(e,t,n){"use strict";e.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},function(e,t,n){"use strict";e.exports=function(e){var t;return function(){return"undefined"===typeof t&&(t=e.apply(this,arguments)),t}}},function(e,t,n){"use strict";var i=n(236).EventEmitterMicro,r=n(637),a=n(644),s=n(645),o=n(1101);function l(e){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=e||document,r(this._context,"keydown",this._DOMKeyDown,!0),r(this._context,"keyup",this._DOMKeyUp,!0),i.call(this)}var c=l.prototype=s(i.prototype);c.onDown=function(e,t){return this.on("keydown:"+e,t)},c.onceDown=function(e,t){return this.once("keydown:"+e,t)},c.offDown=function(e,t){return this.off("keydown:"+e,t)},c.onUp=function(e,t){return this.on("keyup:"+e,t)},c.onceUp=function(e,t){return this.once("keyup:"+e,t)},c.offUp=function(e,t){return this.off("keyup:"+e,t)},c.isDown=function(e){return e+="",this._keysDown[e]||!1},c.isUp=function(e){return!this.isDown(e)},c.destroy=function(){return a(this._context,"keydown",this._DOMKeyDown,!0),a(this._context,"keyup",this._DOMKeyUp,!0),this._keysDown=null,this._context=null,i.prototype.destroy.call(this),this},c._DOMKeyDown=function(e){var t=this._normalizeKeyboardEvent(e),n=t.keyCode+="";this._trackKeyDown(n),this.trigger("keydown:"+n,t)},c._DOMKeyUp=function(e){var t=this._normalizeKeyboardEvent(e),n=t.keyCode+="";this._trackKeyUp(n),this.trigger("keyup:"+n,t)},c._normalizeKeyboardEvent=function(e){return new o(e)},c._trackKeyUp=function(e){this._keysDown[e]&&(this._keysDown[e]=!1)},c._trackKeyDown=function(e){this._keysDown[e]||(this._keysDown[e]=!0)},e.exports=l},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return I}));var i=n(13),r=n(195),a=n(349),s=n(120),o=n(82),l=n(350),c=n(264),u=n(127),d=n(51),h=n(138),p=n(311);function f(e,t){var n,i;e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n=e,i=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(n,i)}var g,m=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.providedTypes=void 0,this.types=void 0,this.validators=void 0;var n=e.length;if(!Array.isArray(e)||n<=1)throw new i.a("Must provide 2 or more types to a union/intersection type",{providedTypes:e});for(var r=0;r<n;r++){var a=e[r];if(!t){if(void 0===a)throw new i.a("Cannot create intersection with undefined",{providedTypes:e,index:r});if(null===a)throw new i.a("Cannot create intersection with null",{providedTypes:e,index:r})}if("any"===a)throw new i.a("Cannot create union/intersection with any",{providedTypes:e,index:r})}this.providedTypes=e}var t=e.prototype;return t.toString=function(){return this.types||this._processTypes(),this.types.map((function(e){return e.toString()})).join(", ")},t._processTypes=function(){for(var e=this.providedTypes,t=[],n=[],r=0,a=e.length;r<a;r++){var s=e[r];if(null!=s){var o=S(s);n.push(o);var l=w(o);if(!l)throw new i.a("Cannot get validator for unrecognized type: "+o,{providedTypes:e,types:n,validators:t,index:r});t.push(l)}}this.validators=t,this.types=n},e}(),_=function(e){function t(t){return e.call(this,t,!0)||this}f(t,e);var n=t.prototype;return n.validate=function(e){return this.validators||this._processTypes(),this.validators.some((function(t){return t(e)}))},n.toString=function(){return"union of "+e.prototype.toString.call(this)},t}(m),v=function(e){function t(t){return e.call(this,t,!1)||this}f(t,e);var n=t.prototype;return n.validate=function(e){return this.validators||this._processTypes(),this.validators.every((function(t){return t(e)}))},n.toString=function(){return"intersection of "+e.prototype.toString.call(this)},t}(m);function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _(t)}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new v(t)}function w(e){var t,n,i;if("integer"===e)t=E;else if("number"===e)t=C;else if("string"===e)t=r.a;else if("boolean"===e)t=a.a;else if("hash"===e)t=s.a;else if(Object(o.a)(e,m))t=Object(l.a)(e.validate,e);else if(Object(o.a)(e,h.a))i=e,t=function(e){return Object(o.a)(e,p.a)&&i.items.some((function(t){return t.contains(e)}))};else if(e.isClass)t=function(e){return function(t){var n;return t.isObject&&((n=t.constructor)===e||n.subclassOf(e))}}(e);else if("function"===(n=typeof e)||g(e))t=function(e){return function(t){return t instanceof e}}(e);else{if("object"!==n)return;t=function(e){return function(t){return t.hasMixin&&t.hasMixin(e)}}(e)}return function(e){return function(t){return!Object(u.a)(t)||e.call(this,t)}}(t)}function I(e){var t=e.type;if(null!==t&&"any"!==t){var n=S(t,e);n!==t&&(e.type=n);var r=w(n);if(!r)throw new i.a('Cannot create property "%{key}" with unknown type `%{type}`.',{property:e,key:e.key,type:n});"integer"!==n&&"number"!==n&&"string"!==n&&"boolean"!==n||(e.typeIsPrimitive=!0),e._validateType=r}}function S(e,t){switch(void 0===e&&Object(i.b)('Error defining property "%{key}". You must specify a type.',{property:t,key:t.key}),e){case Number:e="number";break;case String:e="string";break;case Boolean:e="boolean";break;case"object":e=Object;break;case"function":e=Function}return e}function C(e){return Object(c.a)(e)&&!Number.isNaN(e)}function E(e){return(0|e)===e||Number.isInteger(e)}g="function"!==typeof XMLHttpRequest?function(e){return e.prototype&&e.prototype.constructor}:d.a},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(40),r=n(220),a=n(13),s=n(130),o=i.a.extend(r.a,{init:function(e){e||Object(a.b)("Storage#init requires a storage type."),this.__s._$Iw$init.call(this),this.storageType=e},storageType:null,getItem:function(e,t){var n=u(this.storageType);return n&&n.getItem?(t&&(e=t+"."+e),n.getItem(e)):null},setItem:function(e,t,n){var i=u(this.storageType);if(i&&i.setItem){n&&(e=n+"."+e);try{return i.setItem(e,t),!0}catch(r){}}return!1},getKeys:function(e){var t=u(this.storageType),n=[];if(t){var i=(e=e?e+".":"").length,r=function(t){return 0===t.indexOf(e)},a=function(e){return e.substring(i)};if(void 0!==t.length&&"function"===typeof t.key)for(var s=0,o=t.length;s<o;s++){var l=t.key(s);r(l)&&n.push(a(l))}else n=Object.keys(t).filter(r).map(a)}return n},removeItem:function(e,t){var n=u(this.storageType);if(n&&n.removeItem){t&&(e=t+"."+e);try{return n.removeItem(e),!0}catch(i){}}return!1},clear:function(e){var t=u(this.storageType);if(t){if(e){for(var n=this.getKeys(e),i=0,r=n.length;i<r;i++)this.removeItem(n[i],e);return!0}try{return t.clear(),!0}catch(a){}}return!1},__superMap:{_$Iw$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"StorageManager"}}),l=o.extend({init:function(){this.__s._$1hX$init.call(this,"localStorage")},__superMap:{_$1hX$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LocalStorage"}}),c=o.extend({init:function(){this.__s._$1mn$init.call(this,"sessionStorage")},__superMap:{_$1mn$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SessionStorage"}});function u(e){try{return window[e]}catch(t){s.b.warn("Could not get storage object for %@: %@",e,t)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(64),r=n(691),a=n(17),s=r.a.extend({debugType:"Strong",init:function(){var e=this,t=arguments;e.__s._$DJ$init.apply(e,t),this._referenceDescriptorComputedCache="Observable strong ref for `"+this.key+"` (downstream cached value)"},_referenceDescriptorComputedCache:void 0,_manageForCalculateValueForNode:function(e,t,n){Object(i.f)(n,e,this._referenceDescriptorComputedCache)},previousValueWasReplaced:function(e,t,n){Object(i.e)(n,e,this._referenceDescriptorComputedCache)},nodeWillFree:function(e,t){Object(i.e)(a.a.getDataForNode(t),e,this._referenceDescriptorComputedCache)},__superMap:{_$DJ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamStrongNodeManager"}}),o=s.extend({debugType:"Strong Computed",init:function(){var e=this,t=arguments;e.__s._$gV$init.apply(e,t),this._referenceDescriptorComputedCache="Observable strong ref for `"+this.key+"` (downstream cached computed value)"},__superMap:{_$gV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamStrongComputedNodeManager"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(40),r=n(7),a=n(78),s={mixinDependencies:[n(312).a],isInFocusableLayer:Object(r.b)(Object(a.c)("isFocusableLayer")),isInFocusedLayer:Object(r.b)(Object(a.c)("isFocusedLayer")),isInFocusedBranch:Object(r.b)({readOnly:!0,dependencies:["isInFocusedLayer"],get:Object.assign((function(){return this.isInFocusedLayer}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),isFocusableLayer:Object(r.b)({readOnly:!1,defaultValue:!1}),wantsFocus:Object(r.b)(Object(a.c)("parent.wantsFocus")),isFocusedLayer:Object(r.b)({readOnly:!0,dependencies:["isFocusableLayer","wantsFocus"],get:Object.assign((function(){return this.isFocusableLayer&&this.wantsFocus}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),focusResponder:Object(r.b)({dependencies:["focusedChild","focusedChild.focusResponder","isFocusableLayer"],readOnly:!0,get:Object.assign((function(){return this.isFocusableLayer?this.focusedChild&&this.focusedChild.focusResponder||(this.isFocusable?this:null):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])?i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n])||(this.isFocusable?this:null):null}})}),_previousFocusableLayerState:!1},o=i.a.extend(s,{staticMembers:{__QUALIFIED_CLASS_NAME__:"FocusLayer"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var i=n(40),r=n(15),a=n(464),s=n(397),o=n(383),l=Object(o.b)("Channel",(function(e){e("Closing"),e("Closed"),e("Opening"),e("Opened"),e("FatalError")})),c=l.Closing,u=l.Closed,d=l.Opening,h=l.Opened,p=l.FatalError,f=i.a.extend(s.a,a.a,{window:r.d({readOnly:!0,get:function(){return this._window}}),state:r.d({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(l)}}),init:function(e){e.window||this.fatalError("Cannot open channel. Requires window");var t=e.window;delete e.window,this.__s._$XZ$init.call(this,e),this._window=t,this.registerStateEnumGroup(l,u,p)},open:function(){this.transitionFromStateToState(u,d),this.willOpen()},close:function(){this.transitionFromStateToState(h,c),this.willClose()},willOpen:function(){},didOpen:function(){this.transitionFromStateToState(d,h)},willClose:function(){},didClose:function(){this.transitionFromStateToState(c,u)},__superMap:{_$XZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseChannel"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var i=n(446),r=n(766),a=n(7),s=n(20),o=n(199),l=n(202),c=1,u=l.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"alertIcon",classes:["alert-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}],classes:["message"],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledByID",attributes:{},attribute:"id"},tabindex:"0"}},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["description"],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedByID",attributes:{},attribute:"id"},tabindex:"0"}}],name:"contentWrapper",classes:["alert-text-container"]}],classes:["alert-main-content"]},{type:"VIEWOUTLET",tagname:"view",name:"accessoryView",classes:["alert-accessory-view"]}],classes:["main-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasText",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttonViews",classes:["alert-button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasMoreThanTwoButtons",truevalue:"has-more-than-two-buttons",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasOtherButton",truevalue:"has-other-button",attributes:{}}]}],classes:["cw-alert",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_alertStyleClassName",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"AlertContentView"},ariaLabelledByID:Object(a.b)({readOnly:!0,get:function(){return"alert-m-"+ ++c}}),ariaDescribedByID:Object(a.b)({readOnly:!0,get:function(){return"alert-d-"+c++}}),message:Object(a.b)(),description:Object(a.b)(),iconNames:Object(a.b)(),alertStyle:Object(a.b)(),_alertStyleClassName:Object(a.b)({readOnly:!0,dependencies:["alertStyle"],get:Object.assign((function(){return this.alertStyle?this.alertStyle.value:""}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).value:""}})}),_hasText:Object(a.b)({readOnly:!0,dependencies:["message","description"],get:Object.assign((function(){return Boolean(this.message||this.description)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),_hasMoreThanTwoButtons:Object(a.b)({dependencies:["buttonViews","buttonViews.contentsDidChange"],type:Boolean,readOnly:!0,get:Object.assign((function(){var e=this.buttonViews;return void 0!==e&&e.length>2}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&r.length>2}})}),_hasOtherButton:Object(a.b)({dependencies:["buttonViews","buttonViews.contentsDidChange"],type:Boolean,readOnly:!0,get:Object.assign((function(){var e=this.buttonViews;return void 0!==e&&e.length>1&&(e.length>2||!0!==e.objectAt(1).isAlternate)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&r.length>1&&(r.length>2||!0!==r.objectAt(1).isAlternate)}})}),_iconNamesDidChange:Object(s.h)({inputs:["iconNames"],callback:function(e){var t=this.get("alertIcon");this._originalClassName?t.className=this._originalClassName:this._originalClassName=t.className,e&&(e instanceof Array?e.forEach((function(e){t.classList.add(e)})):t.classList.add(e))}}),disableAllButtons:function(){this.buttonViews.forEach((function(e){e.isDisabled=!0}))},enableAllButtons:function(){this.buttonViews.forEach((function(e){e.isDisabled=!1}))},buttonViews:Object(a.b)()}),d=i.b.extend({additionalClassNames:Object(o.b)(["cw-ui-alert-view","cw-alert-modal"]),buttonDidActivate:function(e){this.sendEvent("alertWillDismiss"),this.contentView&&this.contentView.disableAllButtons(),this.animateClosed()},dismissOnEscape:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"AlertView"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(7),r=n(20),a=n(202),s=n(139),o=n(190),l=250,c=a.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["cw-modal-dialog-background",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOpen",truevalue:"is-open",falsevalue:"is-closing",attributes:{}}]}},className:"cw-ui-modal-dialog",__QUALIFIED_CLASS_NAME__:"ModalDialog"},contentView:Object(i.b)(),isFocusable:!0,tabIndex:-1,dismissOnEscape:Object(i.b)(!0),animationDuration:l,isOpen:Object(i.b)(),animateOpen:function(e){this.isOpen=!0,e&&Object(s.a)(e,this.animationDuration)},animateClosed:function(e){var t=this;this.isOpen=!1,Object(s.a)((function(){t.sendEvent("modalDialogDidDismiss"),"function"===typeof e&&e()}),this.animationDuration)},_isAttachedDidChange:Object(r.h)("isAttached",(function(e){e&&this.animateOpen()})),pointerUp:function(e){e.targetView&&(this.contentView.element.contains(e.targetView.element)?this.sendEvent("modalContentWasClicked",this):this.sendEvent("modalBackgroundWasClicked",this))},keyDown:function(e){if(!this.dismissOnEscape||e.keyCode!==o.a.ESC)return!1;this.animateClosed()},hide:function(){this.sendEvent("dismissModalDialog")}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g}));var i=n(15),r=n(55),a=n(473),s=n(99);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return l(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var c=s.b.Began,u=s.b.Changed,d=s.b.Ended,h=s.b.Failed,p=100;function f(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)}var g=s.a.extend({_correctedStartingLocation:null,translation:Object(i.d)({get:function(){var e=this.location,t=this._correctedStartingLocation;return e&&t?{x:e.x-t.x,y:e.y-t.y}:{x:NaN,y:NaN}},set:function(e){var t=this.location,n=this._correctedStartingLocation;t&&n&&(n.x=t.x-e.x,n.y=t.y-e.y)}}),velocity:Object(i.d)({readOnly:!0,get:function(){for(var e,t={x:0,y:0},n=function(){var n=e.value,i=n.length-1;if(0===i)return"continue";var r=n.reduce((function(e,t,r){if(r===i)return e;var a=n[r+1],s=t.timestamp-a.timestamp,o=Math.min(s,p-e.elapsedTime),l=t.x-a.x,c=t.y-a.y,u=o/s;return e.x+=l*u,e.y+=c*u,e.elapsedTime+=o,e}),{x:0,y:0,elapsedTime:0}),a=r.x,s=r.y,o=r.elapsedTime,l={x:a/o,y:s/o};f(l)>f(t)&&(t=l)},i=o(this._trackedPointerLocations.values());!(e=i()).done;)n();return t}}),location:Object(i.d)({get:function(){for(var e,t=0,n=0,i=this._trackedPointerLocations,r=o(i.values());!(e=r()).done;){var a=e.value[0];t+=a.x,n+=a.y}var s=i.size;return{x:t/=s,y:n/=s}}}),stateGenerator:a.a,_trackedPointerLocations:Object(r.c)(Map),_updatePointerLocation:function(e){var t=e.pointerId,n=e.clientX,i=e.clientY,r=this._trackedPointerLocations,a=performance.now(),s=r.get(t);if(s){var o=s[0];a===o.timestamp?(o.x=n,o.y=i):s.unshift({x:n,y:i,timestamp:a})}else s=[],r.set(t,s),s.unshift({x:n,y:i,timestamp:a});for(var l=a-p,c=s.length-1;c>=0;c--)if(s[c].timestamp>=l){s.splice(c+2);break}},pointerDown:function(e){if(0===this._trackedPointerLocations.size){this._updatePointerLocation(e);var t=this.location;this._correctedStartingLocation=t,this.state=c}else{var n=this.translation;this._updatePointerLocation(e),this.translation=n,this.state=u}},pointerMove:function(e){this._updatePointerLocation(e),this.state=u},pointerUp:function(e){this._updatePointerLocation(e);var t=this._trackedPointerLocations;if(1===t.size)this.state=d;else{var n=this.translation;t.delete(e.pointerId),this.translation=n,this.state=u}},pointerCancel:function(e){this.state=h},reset:function(){this.__s._$2ha$reset.call(this),this._trackedPointerLocations.clear(),this._correctedStartingLocation=null},__superMap:{_$2ha$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PanGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(13),r=n(143),a=n(299),s=n(315),o=[],l=function(e,t){var n,r,l,u,d=0|t,h="";if(Object(a.a)(e)){for(n=e.length,r=0;r<n;r++)r&&(h+=","),h+=c(e[r],d);return"["+h+"]"}if(e._isCwCollection&&e.objectAt){for(n=e.length,r=0;r<n;r++)r&&(h+=","),h+=c(e.objectAt(r),d);return"["+h+"]"}if(!Object(s.a)(e)){for(l in u=o.length,e)e.hasOwnProperty(l)&&o.push(l);for(o.sort(),n=o.length,r=u;r<n;r++)r!==u&&(h+=","),h+='"'+(l=o[r])+'":'+c(e[l],d);return o.length=u,"{"+h+"}"}return Object(i.b)("Object expected in call to `guidForContents`.",e),null},c=function(e,t){return t>0&&!Object(s.a)(e)?l(e,t-1):'"'+Object(r.b)(e)+'"'}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(281).b},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={toString:function(){return"CW.ITSELF"}};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(160),r=n(17),a=i.c.extend({staticMembers:{init:function(){var e=this,t=arguments;e.__s._$H4$init.apply(e,t),i.c._bestBatchSetterClass=this,this._bestBatchSetterClass=this},__superMap:{_$H4$init:"init"},__QUALIFIED_CLASS_NAME__:"BatchSetter"},init:function(){var e=this,t=arguments;e.__s._$Oo$init.apply(e,t),this._toSetObservableArray=[]},end:function(){var e=this,t=arguments;e.__s._$QW$end.apply(e,t),this._toSetObservableArray.length=0},_toSetObservableArray:null,_performSet:function(e){if(0!==e.length){for(var t=this._toSetObservableArray,n=this._pointerTuple,i=0,a=e.length;i<a;i++){var s=e[i],o=s.value,l=this._resolvePointer(s,n),c=l[0],u=l[1],d=c.upstreamNodes?c.upstreamNodes[u]:void 0;d?(t.push(o),t.push(d)):c[u]=o}t.length>0&&r.a.setValuesForNodes.apply(this,t)}},__superMap:{_$Oo$init:"init",_$QW$end:"end"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(82),r=n(77),a=n(123).b.extend({metadataType:null,validate:function(e,t){if(!e.hasMixin||!e.hasMixin(r.b))return!1;var n=e.getMetadata(t);return Object(i.a)(n,this.metadataType)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredMetadata"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(40),r=n(82),a=i.a.extend({staticMembers:{nativePropertiesToCopy:["ctrlKey","shiftKey","altKey","metaKey","relatedTarget"],eventPropertiesToCopy:["bubbles","cwType","ctrlKey","shiftKey","altKey","metaKey","relatedTarget","nativeEvent"],__QUALIFIED_CLASS_NAME__:"CoreEvent"},init:function(e){var t=this,n=arguments;if(e){if(Object(r.a)(e,this.constructor))return s(this,e,this.constructor.eventPropertiesToCopy),void t.__s._$SG$init.call(t);var i=e.nativeEvent;i&&s(this,i,this.constructor.nativePropertiesToCopy)}t.__s._$SG$init.apply(t,n),this.cwType||(this.cwType=this.type)},bubbles:!0,cwType:null,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,relatedTarget:null,nativeEvent:null,preventDefault:function(){this.nativeEvent.preventDefault()},stopPropagation:function(){this.nativeEvent.stopPropagation()},__superMap:{_$SG$init:"init"}});function s(e,t,n){for(var i=0,r=n.length;i<r;i++){var a=n[i],s=t[a];void 0!==s&&(e[a]=s)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(40),r=n(220),a=n(15),s=n(55),o=n(20),l=n(7),c=n(139),u=n(391),d=n(190),h=i.a.extend(r.a,o.b,{timeToKeepKeySequence:1e3,activeKeySequence:Object(a.d)({readOnly:!0,get:function(){return this._keySequence||(this._keySequence=u.a.create())}}),activeKeys:Object(l.b)({readOnly:!0,defaultValue:function(){return u.a.create()}}),_activeKeyLocations:Object(s.c)(Object),keyDown:function(e){this._timer&&(clearTimeout(this._timer),delete this._timer);var t=this.activeKeySequence,n=e.which;t.addKey(n);var i=this._activeKeyLocations,r=this.activeKeys.contains(n),a=1<<e.location;i[n]|=a,r||(this.activeKeys.addKey(n),this.propertyChanged("activeKeys")),this.syncMetaKeyStateFromEvent(e)},keyUp:function(e){var t=this._keySequence;if(t){this._timer&&clearTimeout(this._timer),this._timer=Object(c.a)((function(){t.clear()}),this.timeToKeepKeySequence);var n=e.which,i=this._activeKeyLocations,r=~(1<<e.location);(i[n]&=r)||(this.activeKeys.removeKey(n),this.propertyChanged("activeKeys"))}},syncMetaKeyStateFromEvent:function(e){var t=d.a.SHIFT,n=d.a.CMD,i=d.a.OPTION,r=d.a.CTRL,a=this.activeKeys,s=this.activeKeySequence,o=e.shiftKey,l=e.metaKey,c=e.altKey,u=e.ctrlKey,h=1<<e.location;!1===o&&(a.has(t)||s.has(t))&&this.keyUp({which:t,location:h}),!1===l&&(a.has(n)||s.has(n))&&this.keyUp({which:n,location:h}),!1===c&&(a.has(i)||s.has(i))&&this.keyUp({which:i,location:h}),!1===u&&(a.has(r)||s.has(r))&&this.keyUp({which:r,location:h})},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeyManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(143);function r(e,t,n){if(!e)return f;t||null===t||!1===t||(t=a);var s=t||n?Object(i.b)(t)+p+e+p+!!n:e,_=g[s];if(_)return _;if(Array.isArray(t))return g[s]=function(e,t,n){var a=function(e){var t=Object(i.b)(e),n=m[t];if(n)return n;var r=e.map((function(e){return"i"===e[0]&&c(e[1])?"I"+e.substring(1):null})).filter(Boolean);return e=e.concat(r),m[t]=new RegExp(e.join("|"),"g")}(t),s=e.match(a);if(!s||!s.length)return r(e,null,n);for(var o=e.split(a),l=r(o[0]),d=0,p=s.length;d<p;d++){var f=s[d];n||(f=f.toLowerCase());var g=o[d+1];g&&(g=r(g,null,n)),l+=(l&&h)+f,g&&(l+=(u(g[0])?h:"")+g)}return l}(e,t,n);var v,b,y,w,I,S=e.length,C="";for(v=0;v<S;v++)b=e[v-1],w=(y=e[v]).toLowerCase(),I=e[v+1],b&&d(y)&&d(b)&&(!c(b)&&c(y)||o(b)&&u(y)||I&&c(b)&&c(y)&&l(I))?C+=h+w:C+=w;return g[s]=C}var a=["iOS","iPhone","iPad","iPod","WebKit"];function s(e,t){var n=e.charCodeAt(0),i=t.charCodeAt(0),r={};return function(e){var t=r[e];if(void 0!==t)return t;var a=e.charCodeAt(0);return r[e]=a>=n&&a<=i}}var o=s("0","9"),l=s("a","z"),c=s("A","Z"),u=function(e){return l(e)||c(e)},d=function(e){return u(e)||o(e)},h="-",p="#",f="",g={},m={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(701).a.extend({_iterator:null,clone:function(){return this.constructor.create(this._map,this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseMapIterator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(138),r=Object(i.b)("ArrayChangeOperation",(function(e){e("INSERT"),e("REMOVE")}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(51),r=n(127),a=n(13),s=n(549),o=n(394),l=n(459),c=n(123),u=n(707),d=n(74),h=n(162),p=n(77),f=n(15),g={mixinDependencies:[c.a,o.a,u.a],lastItem:Object(f.d)({get:function(){return this.objectAt(this.length-1)},set:function(e){return this.setIndex(this.length-1,e),e}}),firstItem:Object(f.d)({get:function(){return this.objectAt(0)},set:function(e){return this.setIndex(0,e),e}}),push:function(){for(var e=this.length,t=this.serializer,n=e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];if(t&&t.encode)for(var s=0,o=r.length;s<o;s++)r[s]=t.encode(r[s],s+n);return this.encodedPush.apply(this,r)},encodedPush:function(){for(var e=this.length,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.encodedRawSplice.apply(this,[e,0].concat(n)),e+n.length},pop:function(){var e=this.length-1;return this.decode(this.encodedPop(),e)},encodedPop:function(){var e=this.length-1;return this.encodedRawSplice(e,1)[0]},unshift:function(){for(var e=this.serializer,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(e&&e.encode)for(var r=0,a=n.length;r<a;r++)n[r]=e.encode(n[r],r);return this.encodedUnshift.apply(this,n)},encodedUnshift:function(){for(var e=this.length,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.encodedRawSplice.apply(this,[0,0].concat(n)),e+n.length},shift:function(){return this.decode(this.encodedShift(),0)},encodedShift:function(){return this.encodedRawSplice(0,1)[0]},insertAt:function(e){for(var t=this.serializer,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(t&&t.encode)for(var a=0,s=i.length;a<s;a++)i[a]=t.encode(i[a],a+e);return this.encodedInsertAt.apply(this,[e].concat(i))},encodedInsertAt:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.encodedSplice.apply(this,[e,0].concat(n)),this},removeAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.encodedSplice(e,t),this},add:function(e){return this.push(e),!0},encodedAdd:function(e){return this.encodedPush(e),!0},remove:function(e){return this.encodedRemove(this.encode(e))},encodedRemove:function(e){var t=this.encodedIndexOf(e);return-1!==t&&(this.removeAt(t,1),!0)},slice:function(e,t){var n=this.get("length");if(0===n)return[];e=void 0===e?0:_(e,n);for(var i=(t=void 0===t||t>n?n:_(t,n))-e,r=new Array(i),a=0;a<i;a++)r[a]=this.objectAt(a+e);return r},indexOf:function(e,t){return this.encodedIndexOf(this.encode(e),t)},encodedIndexOf:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.length,i=t=_(t,n);i<n;i++)if(this.encodedObjectAt(i)===e)return i;return-1},contains:v,encodedContains:b,includes:v,encodedIncludes:b,lastIndexOf:function(e,t){return this.encodedLastIndexOf(this.encode(e),t)},encodedLastIndexOf:function(e,t){for(var n=this.length,i=t=void 0===t?n-1:_(t,n);i>=0;i--)if(this.encodedObjectAt(i)===e)return i;return-1},splice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._validateSpliceArguments.apply(this,[this.rawSplice].concat(t))},encodedSplice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._validateSpliceArguments.apply(this,[this.encodedRawSplice].concat(t))},_validateSpliceArguments:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var s=this._internalLength;t<0?(t=s+t)<0&&(t=0):t>s&&(t=s);var o=arguments.length;return(2===o||n+t>s)&&(n=s-t),3===o&&0===n?[]:e.call.apply(e,[this,t,n].concat(r))},itemsWillBeInserted:i.a,itemsWereInserted:i.a,itemsWillBeRemoved:i.a,itemsWereRemoved:i.a,itemsWillChange:i.a,itemsDidChange:i.a,rawSplice:function(e,t){for(var n,i=this.serializer,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];if(i&&(n=i.encode))for(var o=a.length,l=0;l<o;l++)a[l]=n.call(i,a[l],e+l);var c,u=this.encodedRawSplice.apply(this,[e,t].concat(a));if(i&&(c=i.decode))for(var d=u.length,h=0;h<d;h++)u[h]=c.call(i,u[h],e+h);return u},encodedRawSplice:Object(p.c)(d.a),objectAt:function(e){return this.decode(this.encodedObjectAt(e),e)},encodedObjectAt:Object(p.c)(d.a),iteratorClass:Object(f.d)({readOnly:!0,defaultValue:l.a}),createIteratorAt:function(e){return this.get("iteratorClass").create(this,e)},join:function(e){void 0===e&&(e=",");for(var t=this.get("length"),n="",i=0;i<t;i++){var a=this.objectAt(i);0!==i&&(n+=e),Object(r.a)(a)&&(n+=a.toString())}return n},toString:function(){return this.join(", ")},reverse:function(){for(var e=this.get("length")-1,t=0;t<e;t++,e--)this.swap(t,e);return this},setIndex:function(e,t){return this.encodedSetIndex(e,this.encode(t,e))},encodedSetIndex:function(e,t){return e>this.length&&(this.length=e+1),this.encodedSplice(e,1,t),this},swap:function(e,t){var n=this.encodedObjectAt(t);return this.encodedSetIndex(t,this.encodedObjectAt(e)),this.encodedSetIndex(e,n),this},move:function(e,t){var n=this.encodedRawSplice(e,1)[0];return this.encodedRawSplice(t,0,n),this},sort:function(e){return e||(e=m),function e(t,n,i,r){if(!(r-i+1<=1)){var a=Math.floor((i+r)/2);a=function(e,t,n,i,r){var a=e.objectAt(r);for(e.swap(r,i),r=i;n<i;){t(e.objectAt(n),a)<=0?n++:e.swap(n,--i)}return e.swap(r,i),i}(t,n,i,r,a),e(t,n,i,a-1),e(t,n,a+1,r)}}(this,e,0,this.get("length")-1),this},reduce:function(e,t,n){var i,r=0,s=this.length;arguments.length>=2?i=t:s>0?(i=this.objectAt(0),r=1):Object(a.b)("reduce of empty array with no initial value");for(var o=r;o<s;o++)i=e.call(n,i,this.objectAt(o),o,this);return i},find:function(e,t){for(var n=this.get("length"),i=0;i<n;i++){var r=this.objectAt(i);if(e.call(t,r,i,this))return r}},findLast:function(e,t){for(var n=this.get("length")-1;n>=0;n--){var i=this.objectAt(n);if(e.call(t,i,n,this))return i}},findIndex:function(e,t){for(var n=this.get("length"),i=0;i<n;i++){var r=this.objectAt(i);if(e.call(t,r,i,this))return i}return-1},binarySearch:function(e){for(var t=this,n=s.a,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return n.apply(void 0,[0,this.length-1,function(e){return t.objectAt(e)},e].concat(r))},clear:function(){return this.encodedRawSplice(0,this.length),this},map:function(e,t){for(var n=this.constructNewInstance(),i=0,r=this.get("length");i<r;i++){var a=e.call(t,this.objectAt(i),i,this);n.setIndex(i,a)}return n},_internalLength:h.a.define()};function m(e,t){return void 0===t?void 0===e?0:-1:void 0===e?1:(e=String(e))<(t=String(t))?-1:e>t?1:0}function _(e,t){e<0&&(e=t+e);var n=t-1;return e>n?e=n:e<0&&(e=0),e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.encodedContains(this.encode(e),t)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return-1!==this.encodedIndexOf(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(393),a=n(709),s=n(15),o=n(200),l=i.a.extend(a.a,r.a,o.a,{initFromPool:function(e,t){this.__s._$Eg$initFromPool.call(this),this.set("source",e),this.set("position",t||0)},didEnterPool:function(){this.set("source",null),this.set("position",NaN),this.__s._$IR$didEnterPool.call(this)},source:Object(s.d)(),value:Object(s.d)({get:function(){return this.source.decode(this.encodedValue,this.position)},set:function(e){return this.encodedValue=this.source.encode(e,this.position),e}}),encodedValue:Object(s.d)({get:function(){return this.source.encodedObjectAt(this.position)},set:function(e){return this.source.encodedSetIndex(this.position,e),e}}),isValid:Object(s.d)({readOnly:!0,get:function(){var e=this.get("position");return e>=0&&e<this.get("length")}}),length:Object(s.d)({readOnly:!0,get:function(){return this.getPath("source.length")}}),clone:function(){return this.constructor.create(this.get("source"),this.get("position"))},remove:function(){return!!this.isValid&&(this.get("source").removeAt(this.get("position")),!0)},add:function(e){var t=this.get("source"),n=t.get("length"),i=this.get("position")+1;t.insertAt(i,e);var r=t.get("length")!==n;return r&&this.set("position",Math.min(i,n)),r},__superMap:{_$Eg$initFromPool:"initFromPool",_$IR$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListIterator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(452),r=n(20),a=i.a.extend({metadataType:r.f,staticMembers:{__QUALIFIED_CLASS_NAME__:"RequiredSignal"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e,t,n,s){if(e===t)return!0;var o,l,c;if(a[typeof e]||a[typeof t])return!1;if(null===e||null===t)return!1;if(n||(n=e.constructor),s||(s=t.constructor),n!==s)return!1;if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Object){var u=0;for(o in e)if(++u,(l=e[o])!==(c=t[o])){if(a[typeof l])return!1;if(!r(l,c))return!1}for(o in t)--u;return 0===u}if(n===Array){var d=e.length;if(d!==t.length)return!1;for(var h=d-1;h>=0;--h)if((l=e[h])!==(c=t[h])){if(a[typeof l])return!1;if(!r(l,c))return!1}return!0}var p=n.name&&n.name.length?n.name:String(n);return Object(i.b)("Unsupported type for 'deepEqual': "+p),null}var a={string:!0,number:!0,boolean:!0,undefined:!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),r=n(279).a.extend({action:function(e){e.rootElement||Object(i.b)("Must provide a `rootElement`")},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootElementInitializer"}})},function(e,t,n){"use strict";n(1),n.d(t,"a",(function(){return c}));var i=n(381),r=n(795),a=n(13),s=n(386),o=n(279),l=n(462),c=o.a.extend({dependencies:[l.a],action:function(e){if(!e.rootElement)return Object(a.b)("Application has no rootElement defined");var t=e.rootElement;t===window.document.body&&(t=window.document);var n=t.addEventListener,o=t.removeEventListener,l=e.rootResponder=i.a.create({application:e,element:t,events:r.a});return t.addEventListener=function(e,i,r){var a=Object(s.a)(i);return a?n.call(t,e,a,r):l.prependEventListenerToElement(t,e,i,r)},t.removeEventListener=function(e,n,i){var r=Object(s.a)(n);return r&&(n=r),o.call(t,e,n,i)},e},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootResponderInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=n(127),a={mixinDependencies:[n(397).a],registerStateEnumGroup:function(e,t,n){var i=this._segs_registeredGroups;i||(i=this._segs_registeredGroups={}),i[e.id]||(i[e.id]={stateEnumGroup:e,currentState:t,fatalErrorState:n})},fatalErrorIfNotInState:function(e){var t=this._segs_registeredGroups[e.group.id];t||i.b("No state enum group registered for "+e);var n,a=t.currentState,s=t.fatalErrorState||null,o=arguments.length;for(n=0;n<o;n++)if(arguments[n].contains(a))return;s&&this.setState(s);var l=r.a(a)&&r.a(a.fullName)?a.fullName:"[unknown state]",c=1==o?" ":" either ",u=[];for(n=0;n<o;n++)u.push(arguments[n].fullName);var d=" Cannot perform operation. Expected state "+l+" to"+c+"be: "+u.join(", ");i.b(d,{source:this})},setState:function(e){var t=this._segs_registeredGroups[e.group.id];t||i.b("No state enum group registered for "+e);var n=t.currentState;t.currentState=e,this.logTrace("changed state from <"+n.fullName+"> to <"+e.fullName+">")},getCurrentStateForStateEnumGroup:function(e){var t=this._segs_registeredGroups[e.id];return t||i.b("No state enum group registered for "+e.name),t.currentState},transitionFromStateToState:function(e,t){this.fatalErrorIfNotInState(e),this.setState(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(15),a=n(401),s=n(42),o=n(165),l=i.a.extend({storeId:Object(r.d)({readOnly:!0}),originalData:Object(r.d)({readOnly:!0}),newData:Object(r.d)({readOnly:!0}),changeType:Object(r.d)({readOnly:!0,get:function(){var e=this._changeType;return e||(e=this.originalData?this.newData?s.d.WRITE.UPDATE:s.d.WRITE.DESTROY:s.d.WRITE.CREATE,this._changeType=e),e}}),operation:Object(r.d)({readOnly:!0,get:function(){var e=this._operation;return e||(e=this._operation={type:this.modelClass,operation:{context:this,type:this.changeType}}),e}}),model:Object(r.d)({readOnly:!0,get:function(){return Object(s.n)().materializeModel(this.storeId)}}),primaryKey:Object(r.d)({readOnly:!0,get:function(){return o.a.getPrimaryKeyForStoreId(this.storeId)}}),modelClass:Object(r.d)({readOnly:!0,get:function(){return o.a.getModelClassForStoreId(this.storeId)}}),diff:Object(r.d)({readOnly:!0,get:function(){return Object(a.a)(this.originalData,this.newData)}}),init:function(e,t,n,i){this.__s._$k5$init.call(this),this._storeId=e,this._originalData=t,this._newData=n,i&&(this._operation=i)},merge:function(e){return this.constructor.create(this.storeId,this.originalData,Object.assign(this.newData||{},e.newData))},reverse:function(){return this.constructor.create(this.storeId,Object.assign({},this.newData),Object.assign({},this.originalData))},__superMap:{_$k5$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DataChange"}})},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n(40),r=n(402),a=function(e){return r.b.apply(this,arguments)},s=function(e){return r.a.apply(this,arguments)},o=[],l=[],c=[],u=(i.a.extend({release:function(){var e=this,t=arguments;u(),e.__s._$1J4$release.apply(e,t)},__superMap:{_$1J4$release:"release"}}).create().retain(),function(){var t,n,i=o.length;if(i){for(t=0;t<i;t++){var r=o[t];if(r){var a=l[t];a?(r.apply(e,a),(n=a).length=0,c.push(n)):r()}}var s=i;for(i=o.length,t=s;t<i;t++){var u=t-s;o[u]=o[t],l[u]=l[t],o[t]=void 0,l[t]=void 0}o.length=l.length=i-s}})}).call(this,n(172))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r=n(15),a=n(13),s=n(280),o=n(139),l=n(203),c=n(25),u={PENDING:-1,RESOLVED:0,REJECTED:1,state:r.d({get:function(){return this._thenableState},set:function(e){this._thenableState=e,e===this.PENDING&&this._setDefaults()}}),_isScheduled:!1,isFinalized:r.d({readOnly:!0,get:function(){return this._thenableState!==this.PENDING}}),isCanceled:r.d({readOnly:!0,get:function(){return Boolean(this._thenableState===this.REJECTED&&this._thenableResult[0]&&"cancel"===this._thenableResult[0].name)}}),init:function(){var e=this,t=arguments;this._thenableCallbacks=[],this._finalCallbacks=[],this._thenableResult=[],e.__s._$Kg$init.apply(e,t),this._setDefaults()},_setDefaults:function(){this._thenableState=this.PENDING,this._thenableResult.length=0},_recycleReusableCallbackArrays:function(){for(var e=this._thenableCallbacks.length;e--;)c.arrayPool.disposeInstance(this._thenableCallbacks[e]);this._thenableCallbacks.length=0,this._finalCallbacks.length=0},cleanup:function(){var e=this,t=arguments;this._thenableState===this.PENDING&&a.b("Disposing unresolved thenable."),this._unscheduleTimedRejection(),this._setDefaults(),this._recycleReusableCallbackArrays(),e.__s._$XY$cleanup.apply(e,t)},then:function(e,t){this._thenableCallbacks.push(c.arrayPool.getInstanceFromParams.apply(c.arrayPool,arguments)),this._thenableState!==this.PENDING&&this._scheduleThenableCallbacks()},catch:function(e){this.then(null,e)},finally:function(e){this._finalCallbacks.push(e),this._thenableState!==this.PENDING&&this._scheduleThenableCallbacks()},thenSync:function(e,t){if(this._thenableState===this.PENDING)this.then.apply(this,arguments);else{var n=arguments[this._thenableState];if(n){var i=s.a(this._thenableResult,0,0);i.push(!0),n.apply(void 0,i)}}},resolve:function(e){if(this._unscheduleTimedRejection(),!this.isFinalized){this._thenableResult.length=arguments.length;for(var t=0,n=arguments.length;t<n;t++)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.RESOLVED,this._scheduleThenableCallbacks()}},reject:function(e){if(this._unscheduleTimedRejection(),!this.isFinalized){this._thenableResult.length=arguments.length;for(var t=0,n=arguments.length;t<n;t++)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.REJECTED,this._scheduleThenableCallbacks()}},rejectAfterTimeout:function(e,t){this._unscheduleTimedRejection(),this.isFinalized||(this.retain(this,"self-retaining during scheduled rejection timeout"),this._scheduledRejectionTimeout=o.a(this._performScheduledRejection,e,arguments))},_unscheduleTimedRejection:function(){this._scheduledRejectionTimeout&&(clearTimeout(this._scheduledRejectionTimeout),this._scheduledRejectionTimeout=null,this.release(this,"self-retaining during scheduled rejection timeout"))},_performScheduledRejection:Object(l.b)((function(e){this.reject.apply(this,s.a(e,0,1))})),cancel:function(){this.reject(d)},_scheduleThenableCallbacks:function(e){this._isScheduled||(this._isScheduled=!0,this.retain(this,"self-retaining while firing callbacks"),h.push(this),i||(i=o.a(p,0)))},_fireThenableCallbacksWrapper:function(){this._isScheduled=!1,this._thenableState!==this.PENDING&&(this._fireThenableCallbacks(),this._recycleReusableCallbackArrays()),this.release(this,"self-retaining while firing callbacks")},_fireThenableCallbacks:function(){for(var e=0;e<this._thenableCallbacks.length;e++){var t=this._thenableCallbacks[e][this._thenableState];t&&t.apply(void 0,this._thenableResult)}for(var n=0;n<this._finalCallbacks.length;n++){var i=this._finalCallbacks[n];i&&i.apply(void 0,this._thenableResult)}},__superMap:{_$Kg$init:"init",_$XY$cleanup:"cleanup"}},d=new Error("canceled");d.name="cancel";var h=[],p=function(){i=void 0;var e=c.arrayPool.getAutodisposingInstanceFromSlice(h);h.length=0;for(var t=0;t<e.length;t++)e[t]._fireThenableCallbacksWrapper()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(570),r=n(155),a=r.b.extend(i.a,{changesClass:r.c,staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongObservableArray"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return s})),n(3);var i=n(202),r=n(470),a=n(7),s=i.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["title"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-button",__QUALIFIED_CLASS_NAME__:"Button"},title:Object(a.b)(""),tooltip:Object(a.b)(""),hasLeftIcon:Object(a.b)(!1),hasRightIcon:Object(a.b)(!1)})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return f}));var i=n(450),r=n(55),a=n(300),s=n(312),o=n(190),l=n(556),c=n(7),u=n(20),d=n(139),h=n(764),p=n(765),f={mixinDependencies:[h.a,a.a,l.a,p.a,s.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPointerFocused",truevalue:"cw-is-pointer-focused",falsevalue:"",attributes:{}}],attributes:{"aria-haspopup":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaHasPopup",attributes:{},attribute:"aria-haspopup"},"aria-owns":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaOwns",attributes:{},attribute:"aria-owns"}}}}},isPointerActivationDisabled:Object(c.b)({readOnly:!0,binding:"isDisabled"}),isPointerFocused:Object(c.b)({type:Boolean,readOnly:!0,dependencies:["isFocused","_mayBePointerFocused"],get:Object.assign((function(){return this._mayBePointerFocused&&this.isFocused}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n])}})}),_mayBePointerFocused:Object(c.b)({type:Boolean,defaultValue:!1}),action:Object(c.b)({type:"string",defaultValue:"wasActivated"}),context:Object(c.b)({defaultValue:i.a}),contextKeys:Object(r.c)(["context"]),keyEquivalent:Object(c.b)({didChange:function(e){e&&this.sendEvent("registerKeyEquivalent",this)}}),isAttachedDidChange:Object(u.h)("isAttached",(function(e){e&&this.keyEquivalent&&this.sendEvent("registerKeyEquivalent",this)})),performKeyEquivalent:function(e){var t=this.keyEquivalent,n=e.keyCode,i=n===t;return(i=i||t.some&&t.some((function(e){return e===n})))&&this.triggerButtonAction()},pointerDown:function(e){var t=this,n=arguments,i=t.__s._$31g$pointerDown.apply(t,n);return e.preventDefault(),!this.isDisabled&&this.isFocusable&&(this._mayBePointerFocused=!0),i},keyUp:function(e){e.which!==o.a.SPACE||this.isDisabled||this.triggerButtonAction()},didBlur:function(){var e=this,t=arguments;this._mayBePointerFocused=!1,e.__s._$3Cp$didBlur.apply(e,t)},pointerActivate:function(e){var t=this,n=arguments;t.__s._$3GX$pointerActivate.apply(t,n),this.triggerButtonAction()},delayAction:!1,triggerButtonAction:function(){return!this.isDisabled&&(this.sendEvent("buttonWillActivate",this),this.delayAction?Object(d.a)(this._actuallyTriggerButtonAction.bind(this),0):this._actuallyTriggerButtonAction(),!0)},_actuallyTriggerButtonAction:function(){if(this.target)this.callAction();else{for(var e=[this.action],t=this.contextKeys,n=0,i=t.length;n<i;n++)e.push(this[t[n]]);this.sendEvent.apply(this,e)}this.sendEvent("buttonDidActivate",this)},ariaRole:"button",ariaHasPopup:Object(c.b)(),ariaOwns:Object(c.b)(),__superMap:{_$31g$pointerDown:"pointerDown",_$3Cp$didBlur:"didBlur",_$3GX$pointerActivate:"pointerActivate"}}},function(e,t,n){"use strict";n(1),n(0),n(2),n(5),n.d(t,"a",(function(){return d}));var i=n(255),r=n(530),a=n(193),s=n(51),o=n(768),l=n(77),c=n(7),u=n(769),d=i.a.extend(o.a,{_appendedContentController:Object(l.c)(r.a,"contentView"),show:function(){var e=this,t=arguments;return this._appendedContentController=this.contentController,e.__s._$16d$show.apply(e,t)},hide:function(){var e=this,t=arguments;return this._appendedContentController=null,e.__s._$19K$hide.apply(e,t)},contentController:Object(c.b)({strong:!0}),viewClass:u.a,owningViewController:Object(c.b)(),wheel:function(e){e.stopPropagation()},willAttach:function(){var e=this,t=arguments,n=this.getPath("view.element");if(n){var i=Object(a.c)(n);return this._originalVisibility=i.get("visibility"),i.set("visibility","hidden"),e.__s._$1Uc$willAttach.apply(e,t)}},didAttach:function(){var e=this,t=arguments;this.willAppear();var n=this.getPath("view.element");if(n)return Object(a.c)(n,{visibility:this._originalVisibility}),this._originalVisibility=null,this.didAppear(),e.__s._$1c5$didAttach.apply(e,t)},willAppear:s.a,didAppear:s.a,_originalVisibility:null,__superMap:{_$16d$show:"show",_$19K$hide:"hide",_$1Uc$willAttach:"willAttach",_$1c5$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopupViewController"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(123),r=n(74),a=n(15),s=n(161),o=n(238),l=n(20),c=n(171),u=n(201),d=n(193);function h(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n(4);var f={mixinDependencies:[{mixinDependencies:[i.a,l.b],scrollBy:r.a.define(),element:c.a.define(),isAttached:c.a.define(),scrollX:c.a.define(),scrollMinX:c.a.define(),width:c.a.define(),scrollWidth:c.a.define(),scrollY:c.a.define(),scrollMinY:c.a.define(),height:c.a.define(),scrollHeight:c.a.define()}],shouldTrackNativeScroll:u.a.sharedInstance.isiPad,nativeScrollIsEnabled:!1,scrollContainer:Object(a.d)({get:function(){return this.element}}),setUpSizerElement:function(e){this.element&&this.element.appendChild&&"function"===typeof this.element.appendChild&&this.element.appendChild(e)},tearDownSizerElement:function(e){this.element.removeChild(e)},init:function(){var e=this,t=arguments;e.__s._$sk$init.apply(e,t),this.shouldTrackNativeScroll&&this._setUpNativeScrollTracking()},dispose:function(){var e=this,t=arguments;this.shouldTrackNativeScroll&&this.tearDownNativeScrollTracking(),e.__s._$zZ$dispose.apply(e,t)},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return(!this.nativeScrollIsEnabled||e!==this.scrollGestureRecognizer)&&n.__s._$12i$gestureRecognizerShouldReceive.apply(n,i)},nativeScrollX:Object(a.d)({defaultValue:0,type:"number"}),nativeScrollY:Object(a.d)({defaultValue:0,type:"number"}),_setUpNativeScrollTracking:function(){this.nativeScrollIsEnabled||(this._setUpSizerElement(),this._setUpObservers(),this._setUpScrollListener(),this._syncScrollPositions(),this.nativeScrollIsEnabled=!0)},tearDownNativeScrollTracking:function(){this.nativeScrollIsEnabled&&(this._tearDownSizerElement(),this._tearDownObservers(),this._tearDownScrollListener(),this._syncScrollPositions(),this.nativeScrollIsEnabled=!1)},_setUpSizerElement:function(){if(!this._sizerElement){var e=this._sizerElement=document.createElement("div");e.classList.add("cw-native-scroll-sizer"),Object.assign(e.style,{position:"absolute",top:"0",left:"0","z-index":"-1"}),this.setUpSizerElement(e),(this._sizerObserver=l.c.create(this,{inputs:["scrollWidth","scrollHeight"],callback:function(e,t){var n=this._sizerElement;n&&Object(d.c)(n,{width:e,height:t})}})).connect()}},_setUpObservers:function(){this._scrollObservers||(this._scrollObservers=[l.c.create(this,{inputs:["isAttached"],callback:function(e){e&&(this.scrollContainer.scrollLeft=this.nativeScrollX,this.scrollContainer.scrollTop=this.nativeScrollY)}}),l.c.create(this,{inputs:["hasMomentum","scrollX","scrollMinX","width","scrollWidth"],callback:function(e,t,n,i,r){if(!0!==e){var a=Math.round(t-n);a!==this.nativeScrollX&&(this.nativeScrollX=a,this.scrollContainer.scrollLeft=a,this.viewController&&this.viewController.update&&"function"===typeof this.viewController.update&&this.viewController.update())}}}),l.c.create(this,{inputs:["hasMomentum","scrollY","scrollMinY","height","scrollHeight"],callback:function(e,t,n,i,r){if(!0!==e){var a=Math.round(t-n);a!==this.nativeScrollY&&(this.nativeScrollY=a,this.scrollContainer.scrollTop=a,this.viewController&&this.viewController.update&&"function"===typeof this.viewController.update&&this.viewController.update())}}})]);for(var e,t=h(this._scrollObservers);!(e=t()).done;)e.value.connect()},_setUpScrollListener:function(){this.updateForNativeScroll=this.updateForNativeScroll.bind(this),Object(s.a)(this.scrollContainer,"scroll",this.updateForNativeScroll,!0)},_tearDownSizerElement:function(){this.tearDownSizerElement(this._sizerElement),this._sizerElement=null,this._sizerObserver.disconnect(),this._sizerObserver=null},_tearDownObservers:function(){for(var e,t=h(this._scrollObservers);!(e=t()).done;)e.value.disconnect()},_tearDownScrollListener:function(){Object(o.a)(this.scrollContainer,"scroll",this.updateForNativeScroll,!0)},_syncScrollPositions:function(){this.nativeScrollX=this.scrollX,this.nativeScrollY=this.scrollY},updateForNativeScroll:function(){if(this.isAttached){var e=this.scrollContainer,t=e.scrollLeft,n=e.scrollTop,i=e.scrollWidth,r=e.scrollHeight,a=i-this.width,s=r-this.height,o=Math.max(0,Math.min(t,a)),l=Math.max(0,Math.min(n,s)),c=o-this.nativeScrollX,u=l-this.nativeScrollY;0===c&&0===u||(this.nativeScrollX=o,this.nativeScrollY=l,this.scrollBy(c,u),this.didScrollBy&&this.didScrollBy(c,u))}},__superMap:{_$sk$init:"init",_$zZ$dispose:"dispose",_$12i$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(99),r=regeneratorRuntime.mark(d),a=i.b.Possible,s=i.b.Began,o=i.b.Changed,l=i.b.Ended,c=i.b.Failed,u=i.b.Cancelled;function d(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void(n.next=2);case 2:if((t=n.sent)===a){n.next=5;break}throw new Error("ContinuousGestureRecognizer: state must be initialized to Possible.");case 5:return void(n.next=7);case 7:if((t=n.sent)!==c){n.next=12;break}return n.abrupt("return");case 12:if(t!==s){n.next=40;break}if(e.shouldBegin()){n.next=15;break}return n.abrupt("return",c);case 15:return void(n.next=18);case 18:if((t=n.sent)!==u){n.next=23;break}return n.abrupt("return");case 23:if(t!==c){n.next=27;break}return n.abrupt("return",u);case 27:if(t!==o){n.next=31;break}return n.abrupt("continue",15);case 31:if(t!==l){n.next=35;break}return n.abrupt("return");case 35:throw new Error("GestureRecognizer: invalid state "+t+" for ContinuousGestureRecognizer after Began or Changed. Must be either Changed, Cancelled, or Ended.");case 36:n.next=15;break;case 38:n.next=41;break;case 40:throw new Error("GestureRecognizer: invalid state "+t+" for ContinuousGestureRecognizer after Possible. Must be either Began or Failed.");case 41:case"end":return n.stop()}}),r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(475);function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=Math.log(.998),s=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var s=i.prototype;return s.calculatePositionAtTime=function(e){return this.initialVelocity*(Math.pow(.998,e)-1)/a},s.calculateVelocityAtTime=function(e){return this.initialVelocity*Math.pow(.998,e)},s.calculateTimeAtPosition=function(e){if(0===e)return[0];var t=this.initialVelocity;return[Math.log(e*a/t+1)/a]},i}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialTimestamp,n=void 0===t?0:t,i=e.initialPosition,r=void 0===i?0:i,a=e.initialVelocity,s=void 0===a?0:a,o=e.direction,l=void 0===o?1:o;this.initialTimestamp=n,this.initialPosition=r,this.initialVelocity=s,this.direction=l}var t=e.prototype;return t.positionAtTime=function(e){return this.initialPosition+this.direction*this.calculatePositionAtTime(e-this.initialTimestamp)},t.positionDelta=function(e,t){return this.direction*(this.calculatePositionAtTime(t-this.initialTimestamp)-this.calculatePositionAtTime(e-this.initialTimestamp))},t.velocityAtTime=function(e){return this.direction*this.calculateVelocityAtTime(e-this.initialTimestamp)},t.timeAtPosition=function(e){var t=this;return this.calculateTimeAtPosition(this.direction*(e-this.initialPosition)).map((function(e){return t.initialTimestamp+e}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(285),r=n(570),a=i.a.extend(r.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongArray"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return a})),n(12);var i=n(202),r=n(7),a=i.a.extend({additionalClassNames:["cw-list-item-view"],content:Object(r.b)(),layout:Object(r.b)(),layoutMetrics:Object(r.b)(),staticMembers:{className:"cw-ui-collections-list-item-view",__QUALIFIED_CLASS_NAME__:"ListItemView"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),r=function(){i.b("getStack is included in production code. This build cannot ship.");var e=(new Error).stack;if(!e)try{throw new i.a}catch(t){e=t.stack}return"STACK\n"+(e=String(e)).substring(1+e.indexOf("\n",e.indexOf("getStack")))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(7),r=n(17),a=n(98),s=n(256),o=n(15),l=n(20),c=n(813),u=n(231),d=n(582),h=n(266),p=n(25),f=c.a.extend(u.a,{duration:250,transitionProgress:i.b(0),tween:d.d,isHandheld:!1,animationInfo:i.b(),startAnimation:function(){if(this.isHandheld){var e=this.getTransitionees(),t=e.fromVC,n=e.toVC;r.a.pause(),t&&(t.handheldViewControllerTransition=this),n&&(n.handheldViewControllerTransition=this),r.a.resume()}else this.animateToTarget()},animateToTarget:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=a.a.create();return this.animationInfo={ownerTransition:this,startTime:performance.now(),duration:this.duration,tween:this.tween,initialProgress:this.transitionProgress,targetProgress:e,timeoutHandle:void 0,handleFrame:function(){var e=this.tween(Math.max(0,Math.min(1,(performance.now()-this.startTime)/this.duration)));this.ownerTransition.transitionProgress=e*this.targetProgress+(1-e)*this.initialProgress,e<1?this.timeoutHandle=s.a(Object(h.a)(this.handleFrame,this)):(this.stop(),this.ownerTransition.animationDidFinish(),t.resolve())},stop:function(){cancelAnimationFrame(this.timeoutHandle),this.timeoutHandle=void 0,this.ownerTransition.animationInfo=void 0}},this.animationInfo.handleFrame(),t},animationDidFinish:function(){var e=this,t=arguments;if(this.isHandheld){var n=this.getTransitionees(),i=n.fromVC,a=n.toVC;r.a.pause(),i&&(i.handheldViewControllerTransition=void 0),a&&(a.handheldViewControllerTransition=void 0),r.a.resume()}return e.__s._$1Y9$animationDidFinish.apply(e,t)},getTransitionees:function(){var e=this.fromView,t=this.fromViewController,n=this.toView,i=this.toViewController;return p.objectPool.getAutodisposingInstanceWithProperties("fromView",e&&!e.isDisposed?e:void 0,"toView",n&&!n.isDisposed?n:void 0,"fromVC",t&&!t.isDisposed?t:void 0,"toVC",i&&!i.isDisposed?i:void 0)},startValue:o.d(0),endValue:o.d(1),toViewAnimationProperty:u.b(NaN),fromViewAnimationProperty:u.b(NaN),_toViewAnimationObserver:l.g({inputs:["toViewAnimationProperty"],callback:function(e){var t=this.toView;t&&!t.isDisposed&&this.applyStyle(t,e)}}),_fromViewAnimationObserver:l.g({inputs:["fromViewAnimationProperty"],callback:function(e){var t=this.fromView;t&&!t.isDisposed&&this.applyStyle(t,e)}}),performDetachedViewSpecificAnimation:function(e,t,n,i,r){var o=this;e.retain(),n!==this[t]?this[t]=n:this.propertyChanged(t);var l=a.a.create(),c=function(){e.release(),l.resolve()};return s.a((function(){return o.animate(t,i,r,c)})),l},applyStyle:function(e,t){},__superMap:{_$1Y9$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseTransition"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(20),r=n(479).a.extend({startAnimation:function(){var e=this,t=arguments,n=this.getTransitionees(),i=n.fromView,r=n.toView;return i&&i.style.set("z-index",1),r&&r.style.set("z-index",0),r&&r.style.clear("opacity"),e.__s._$8I$startAnimation.apply(e,t)},animationDidFinish:function(){var e=this,t=arguments,n=this.getTransitionees(),i=n.fromView,r=n.toView;return i&&i.style.clear("z-index"),r&&r.style.clear("z-index"),i&&i.style.clear("opacity"),e.__s._$Cl$animationDidFinish.apply(e,t)},_updateToTransitionProgress:i.g("transitionProgress",(function(e){var t=this.getTransitionees().fromView;t&&t.style.set("opacity",1-e)})),__superMap:{_$8I$startAnimation:"startAnimation",_$Cl$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseOpacityTransition"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(42),r={staticMembers:{getDataHashForPrimaryKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.n();return t.readDataForPrimaryKey(this,e)},getDataHashForStoreId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.n();return t.readData(e)},peek:function(e){return i.n().peekModel(this,e)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(98),r=n(42),a=n(322),s=n(248),o=n(13),l=n(7);function c(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){c(a,i,r,s,o,"next",e)}function o(e){c(a,i,r,s,o,"throw",e)}s(void 0)}))}}var d={staticMembers:{load:function(e){var t=this;if("string"===typeof e)return this.load({primaryKeys:[e]});if(Array.isArray(e))return this.load({primaryKeys:e});var a=e.primaryKeys,s=n(207).Record,o=s.getZonePrimaryKeyFromPrimaryKey(a[0]);if(a.some((function(e){return s.getZonePrimaryKeyFromPrimaryKey(e)!==o})))return this._loadFromMultipleZones(e);var l=!0===e.isForcedFetch?e:Object.assign({},e,{primaryKeys:a.filter((function(n){return t.getIsLoadNeededForContext(n,e)}))});return 0===l.primaryKeys.length?i.a.resolve(this.findByPrimaryKeys(a)):this.performOperation(r.d.READ.LOAD,l)},reload:function(e){return this.load(Object.assign({},e,{isForcedFetch:!0}))},getNetworkStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.n();return t.getNetworkStatus(this,e)},getIsLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getNetworkStatus(e);return t!==a.a.IDLE},getIsLoadingAndStillValidForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getNetworkStatus(e);return this.getIsLoading(e,n)},getLoadingPromiseForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.n(),a=n.transactionProcessor.getActiveTransactions(this,e);return i.a.all(a)},getLoadStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.n();return t.getLoadStatus(this,e)},getIsLoaded:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLoadStatus(e);return t===s.a.LOADED},getIsLoadedAndStillValidForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getLoadStatus(e);return this.getIsLoaded(e,n)},getIsLoadNeededForContext:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getLoadStatus(e);return!0===t.isForcedFetch||!this.getIsLoadedAndStillValidForContext(e,t,n)},_loadFromMultipleZones:function(e){var t=this;return u(regeneratorRuntime.mark((function a(){var s,l,c,u,d,h,p,f,g,m;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s=[],l={},c=n(207),u=c.Record,d=e.primaryKeys,h=0,p=d.length;h<p;h++)f=d[h],g=u.getZonePrimaryKeyFromPrimaryKey(f),(l[g]||(s[s.length]=l[g]=Object.assign({},e,{primaryKeys:[]}))).primaryKeys.push(f);return(m=r.n().findNestedOperationHandlerForOperation({type:t,operation:{type:r.d.READ.LOAD,context:e}}))&&m.mergeMultipleLoadReturnValues||o.b("The load operation handler does not support multi-zone loads."),a.t0=m,a.next=10,i.a.all(s.map((function(e){return t.load(e)})));case 10:return a.t1=a.sent,a.t2=Object.assign({},e),a.abrupt("return",a.t0.mergeMultipleLoadReturnValues.call(a.t0,a.t1,a.t2));case 13:case"end":return a.stop()}}),a)})))()}},load:function(){var e=arguments,t=this;return u(regeneratorRuntime.mark((function n(){var i,r,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:{},r=t.constructor,a=t.getPrimaryKey(),t.networkStatus,s=r.getNetworkStatus(a),!r.getIsLoadingAndStillValidForContext(a,i,s)){n.next=11;break}return n.next=9,r.getLoadingPromiseForContext(a,i);case 9:n.next=14;break;case 11:if(!r.getIsLoadNeededForContext(a,i,t.loadStatus)){n.next=14;break}return n.next=14,r.load(Object.assign({},i,{primaryKeys:[a]}));case 14:return n.abrupt("return",t);case 15:case"end":return n.stop()}}),n)})))()},reload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.load(Object.assign({},e,{isForcedFetch:!0}))},isLoading:l.b({dependencies:["networkStatus","loadStatus"],readOnly:!0,get:Object.assign((function(){return this.constructor.getIsLoading(this.getPrimaryKey(),this.networkStatus)&&!this.constructor.getIsLoaded(this.getPrimaryKey(),this.loadStatus)}),{__CW__getter:function(e,t,n,i){return this.constructor.getIsLoading(this.getPrimaryKey(),i.internalGet(this,t[0+n]))&&!this.constructor.getIsLoaded(this.getPrimaryKey(),i.internalGet(this,t[1+n]))}})}),isLoaded:l.b({dependencies:["loadStatus"],readOnly:!0,get:Object.assign((function(){return this.constructor.getIsLoaded(this.getPrimaryKey(),this.loadStatus)}),{__CW__getter:function(e,t,n,i){return this.constructor.getIsLoaded(this.getPrimaryKey(),i.internalGet(this,t[0+n]))}})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("DbWsFieldType",{STRING:"STRING",TIMESTAMP:"TIMESTAMP",BYTES:"BYTES",ENCRYPTED_BYTES:"ENCRYPTED_BYTES",LOCATION:"LOCATION",ASSETID:"ASSETID",INT64:"NUMBER_INT64",DOUBLE:"NUMBER_DOUBLE",REFERENCE:"REFERENCE",STRING_LIST:"STRING_LIST",TIMESTAMP_LIST:"TIMESTAMP_LIST",BYTES_LIST:"BYTES_LIST",ENCRYPTED_BYTES_LIST:"ENCRYPTED_BYTES_LIST",LOCATION_LIST:"LOCATION_LIST",ASSETID_LIST:"ASSETID_LIST",INT64_LIST:"INT64_LIST",DOUBLE_LIST:"DOUBLE_LIST",REFERENCE_LIST:"REFERENCE_LIST",PACKAGE:"PACKAGE",UNKNOWN_NUMBER:"NUMBER_ANY",UNKNOWN_LIST:"EMPTY_LIST"})},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return I})),n.d(t,"e",(function(){return E})),n.d(t,"d",(function(){return O}));var i=n(139),r=n(7),a=n(20),s=n(248),o=n(17),l=n(98),c=n(120),u=n(13),d=n(280),h=n(25),p=n(203),f=n(179),g=n(287),m=n(361),_=n(197),v=/\$\{f\}/g,b={mixinDependencies:[f.c],staticMembers:{derivativeInfoPool:h.Pool.create(Object),isURLExpiryTooSoon:function(e){return e.urlExpiry<Date.now()},synthesizeDerivativeInfo:function(e,t,n,i){for(var r=this.derivativeInfoPool.getInstance(),a=w.length;a--;){var s=w[a];r[s]=e[s]}return r.width=t,r.height=n,r.byteSize=e.byteSize*t*n/(e.width*e.height)|0,r.fileName=r.url=r.downloadUrl=r.downloadGeostrippedUrl=r.urlExpiry=null,r.isOriginal=!1,i&&r.outdateCount++,this.computeDerivativeInfoFields(r),r.synthesizedFromDerivativeId=e.synthesizedFromDerivativeId||e.derivativeId,r.derivativeName=void 0,r},computeDerivativeInfoFields:function(e){for(var t,n=0;t=S[n];n++)e[t]=I[t].call(e)},mediaPKForDerivativeId:function(e){var t;if(e&&"["===e[11]){var n=e.indexOf("]");n>12&&(t=e.slice(12,n))}return t},materializedMediaForDerivativeId:function(e){return this.peek(this.mediaPKForDerivativeId(e))},isDerivativeSubsetKey:function(e){return m.a.hasOwnProperty(this.propertyKeyForDerivativeSubset(e))},propertyKeyForDerivativeSubset:function(e){return e+"DerivativeInfos"},blacklistDerivative:p.b((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4,n=M[e]=M[e]+1||1;if(1===n){var r=this.materializedMediaForDerivativeId(e);r&&r.propertyChanged("staticDerivativeInfos")}var a=D[e]=D[e]+1||1;a<_.a.derivativeBlacklistingLimit&&t<1/0&&i.a(this.unblacklistDerivative,t,e)})),unblacklistDerivative:p.b((function(e){if(!(--M[e]>=1)){delete M[e];var t=this.materializedMediaForDerivativeId(e);t&&t.propertyChanged("staticDerivativeInfos")}}))},areClientDerivativesDirty:r.b(!1),cleanup:function(){var e=this,t=arguments;return this.areClientDerivativesDirty=!1,e.__s._$34N$cleanup.apply(e,t)},_invalidateStaticDerivativeInfos:a.g("primaryMaster.dataDidChange","primaryAsset.dataDidChange",(function(){var e=this._isdi_lastAssetValues||h.objectPool.getInstance(),t=this._isdi_lastMasterValues||h.objectPool.getInstance();h.objectPool.autodisposeInstance(e),h.objectPool.autodisposeInstance(t);for(var n=this._isdi_lastAssetValues=h.objectPool.getInstance(),i=this._isdi_lastMasterValues=h.objectPool.getInstance(),r=this._isdi_keySuffixes||(this._isdi_keySuffixes=["ResDownloadUrl","Width","Height","ResSize","FileType","MimeType"]),a=this.primaryAsset,s=this.primaryMaster,o=a?a.getDataHash():h.objectPool.getAutodisposingInstance(),l=s?s.getDataHash():h.objectPool.getAutodisposingInstance(),c=!1,u=o;u;u=u===o?l:null)for(var d=u===o?e:t,p=u===o?n:i,g=0,m=f.b.length;g<m;g++)for(var _,v,b="res"+f.b[g];_=r[v];v++){var y=b+_,w=p[y]=u[y];c||w===d[y]||(c=!0)}c&&this.propertyChanged("staticDerivativeInfos")})),staticDerivativeInfos:r.b({readOnly:!0,dependencies:["primaryMaster.geostrippedURLs","primaryAsset.geostrippedURLs","primaryMaster.filenameEnc","baseFileName","pk","genericType","isHEVCVideo","isHEICImage","areClientDerivativesDirty"],get:Object.assign((function(){var e=this.constructor,t=this.primaryAsset,n=this.primaryMaster,i=e.derivativeInfoPool,r=this._staticDerivativeInfos_lastRet;if(r&&(r.forEach(i.disposeInstance,i),h.arrayPool.autodisposeInstance(r)),!t||!n)return this._staticDerivativeInfos_lastRet=null;var a=h.arrayPool.getInstance();if(this.areClientDerivativesDirty)return this._staticDerivativeInfos_lastRet=a;for(var s,o=!1,l=this.pk,c=this.genericType,u=this.isHEVCVideo,d=this.isHEICImage,p=t.getDataHash(),m=n.getDataHash(),b=t.geostrippedURLs,y=n.geostrippedURLs,w=this.getPath("primaryMaster.filenameEnc"),I=this.baseFileName,S=p;S;S=S===p?m:null)for(var C=0,E=f.b.length;C<E;C++){var D=f.b[C],P="res"+D,x=S[P+"ResDownloadUrl"];if(x){var N=S===p?b:y,F=N?N[P+"ResGeostrippedDownloadUrl"]:"";if(!N||F){var V=i.getInstance(),k="Original"===D,B=k||L.test(D),j=B&&(u||d),U=B&&S.originalOrientation>=5,G=S[P+(U?"Height":"Width")],H=S[P+(U?"Width":"Height")];V.derivativeName=D,V.mediaPK=l,V.width=G,V.height=H,V.byteSize=S[P+"ResSize"],V.urlExpiry=(S._receiptTimestamp||Date.now())+_.a.derivativeUrlExpiry,V.isOriginal=B,V.reflectsEdits=S===p,V.isDynamic=!1;var W=S[P+"FileType"],$=S[P+"MimeType"],z=g.b[W],K=k&&w?w:z?I+"."+z:I,q=encodeURIComponent(K),Q=x.replace(v,q),Y=F.replace(v,q),Z=void 0,X=void 0;if("com.apple.quicktime-movie"===W){Z=j?"application/octet-stream":"video/mp4";var J=g.a[Z],ee=J?I+"."+J:I;X=x.replace(v,encodeURIComponent(ee))}else Z=$,X=Q;V.downloadUrl=Q,V.downloadGeostrippedUrl=Y,V.rawUrl=x,V.url=X,V.uti=W,V.mimeType=Z,V.baseFileName=I,V.fileName=K,V.isHighEfficiencyCodec=j,V.genericType=k?c:B?R.test(D)?e.Type.VIDEO:c:O(Z,e),V.outdateCount=0|T[l],this.constructor.computeDerivativeInfoFields(V),M[V.derivativeId]||(G&&H||Z.startsWith("audio/"))&&(a.push(V),o=o||s&&A(s,V)>0,s=V)}}}return o&&a.sort(A),this._staticDerivativeInfos_lastRet=a}),{__CW__getter:function(e,t,n,i){var r=this.constructor,a=this.primaryAsset,s=this.primaryMaster,o=r.derivativeInfoPool,l=this._staticDerivativeInfos_lastRet;if(l&&(l.forEach(o.disposeInstance,o),h.arrayPool.autodisposeInstance(l)),!a||!s)return this._staticDerivativeInfos_lastRet=null;var c=h.arrayPool.getInstance();if(i.internalGet(this,t[8+n]))return this._staticDerivativeInfos_lastRet=c;for(var u,d=!1,p=i.internalGet(this,t[4+n]),m=i.internalGet(this,t[5+n]),b=i.internalGet(this,t[6+n]),y=i.internalGet(this,t[7+n]),w=a.getDataHash(),I=s.getDataHash(),S=a.geostrippedURLs,C=s.geostrippedURLs,E=i.internalGetPath(this,t[2+n]),D=i.internalGet(this,t[3+n]),P=w;P;P=P===w?I:null)for(var x=0,N=f.b.length;x<N;x++){var F=f.b[x],V="res"+F,k=P[V+"ResDownloadUrl"];if(k){var B=P===w?S:C,j=B?B[V+"ResGeostrippedDownloadUrl"]:"";if(!B||j){var U=o.getInstance(),G="Original"===F,H=G||L.test(F),W=H&&(b||y),$=H&&P.originalOrientation>=5,z=P[V+($?"Height":"Width")],K=P[V+($?"Width":"Height")];U.derivativeName=F,U.mediaPK=p,U.width=z,U.height=K,U.byteSize=P[V+"ResSize"],U.urlExpiry=(P._receiptTimestamp||Date.now())+_.a.derivativeUrlExpiry,U.isOriginal=H,U.reflectsEdits=P===w,U.isDynamic=!1;var q=P[V+"FileType"],Q=P[V+"MimeType"],Y=g.b[q],Z=G&&E?E:Y?D+"."+Y:D,X=encodeURIComponent(Z),J=k.replace(v,X),ee=j.replace(v,X),te=void 0,ne=void 0;if("com.apple.quicktime-movie"===q){te=W?"application/octet-stream":"video/mp4";var ie=g.a[te],re=ie?D+"."+ie:D;ne=k.replace(v,encodeURIComponent(re))}else te=Q,ne=J;U.downloadUrl=J,U.downloadGeostrippedUrl=ee,U.rawUrl=k,U.url=ne,U.uti=q,U.mimeType=te,U.baseFileName=D,U.fileName=Z,U.isHighEfficiencyCodec=W,U.genericType=G?m:H?R.test(F)?r.Type.VIDEO:m:O(te,r),U.outdateCount=0|T[p],this.constructor.computeDerivativeInfoFields(U),M[U.derivativeId]||(z&&K||te.startsWith("audio/"))&&(c.push(U),d=d||u&&A(u,U)>0,u=U)}}}return d&&c.sort(A),this._staticDerivativeInfos_lastRet=c}})}),dynamicDerivativeInfos:r.b({readOnly:!0,dependencies:["staticDerivativeInfos"],get:Object.assign((function(){if(!V)return null;var e=this.constructor,t=this.staticDerivativeInfos,n=e.derivativeInfoPool,i=this._dynamicDerivativeInfos_lastRet;if(i&&(i.forEach(n.disposeInstance,n),h.arrayPool.autodisposeInstance(i)),!t)return this._dynamicDerivativeInfos_lastRet=null;for(var r,a,s=h.arrayPool.getInstance(),o=!1,l=h.objectPool.getAutodisposingInstance(),c=h.objectPool.getAutodisposingInstance(),u=0;a=t[u];u++)(a.reflectsEdits?c:l)[a.derivativeName]=a;for(var d,p=e.Type,_=!1;void 0!==_;_=!_||void 0){for(var b,y=(_?this.primaryAsset:this.primaryMaster).getDataHash(),w=void 0,I=void 0,S=void 0,C=t.length-1;(!w||!I)&&(b=t[C]);C--)b.reflectsEdits===_&&(S=(w=b.width)*(I=b.height));if(S)for(var E,O=_?c:l,T=0;E=k[T];T++){var D=O[E];if(!D||!Object(m.c)(D.mimeType)){var P=F[E];if(S>=P.minSourceArea){for(var L,R=P.uti,x=P.mimeType,B=P.wantsLargestSource,j=P.minSourceArea,U=P.unnecessaryWithSameUTI,G=P.unnecessaryWithSameMIMEType,H=P.urlTemplateKeys,W=p[P.genericTypeKey],$=B?-1:1,z=void 0,K=void 0,q=B?H.length-1:0;!K&&(L=H[q]);q+=$){var Q=y[L],Y=O[N[L]];!(Q&&Y&&Y.reflectsEdits===_&&Y.genericType===W&&Y.width*Y.height>=j)||U&&Y.uti===R||G&&Y.mimeType===x||(K=Y,z=Q)}if(K&&z){var Z=n.getInstance(),X=K.width,J=K.height,ee=X*J,te=Math.sqrt(Math.min(f.d[E],ee)/ee),ne=Math.round(te*X),ie=Math.round(te*J),re=Math.max(ne,ie),ae=ne*ie,se=K.baseFileName,oe=g.b[R],le=oe?se+"."+oe:se,ce=g.a[x],ue=ce?se+"."+ce:se;Z.derivativeName=E,Z.mediaPK=d||(d=this.pk),Z.width=ne,Z.height=ie,Z.byteSize=Math.round(K.byteSize*ae/ee*(1+.5*(1-ae/ee))*(K.isHighEfficiencyCodec?2:1)),Z.urlExpiry=K.urlExpiry,Z.isOriginal=!1,Z.reflectsEdits=_,Z.isDynamic=!0,Z.downloadUrl=z.replace(v,encodeURIComponent(le)).replace("${m}",re),Z.downloadGeostrippedUrl="",Z.rawUrl=void 0,Z.url=z.replace(v,encodeURIComponent(ue)).replace("${m}",re),Z.uti=R,Z.mimeType=x,Z.baseFileName=se,Z.fileName=le,Z.isHighEfficiencyCodec=!1,Z.genericType=W,Z.outdateCount=K.outdateCount,this.constructor.computeDerivativeInfoFields(Z),Z.transcodeSourceDerivativeId=K.derivativeId,M[Z.derivativeId]||(s.push(Z),o=o||r&&A(r,Z)>0,r=Z)}}}}}return o&&s.sort(A),this._dynamicDerivativeInfos_lastRet=s}),{__CW__getter:function(e,t,n,i){if(!V)return null;var r=this.constructor,a=i.internalGet(this,t[0+n]),s=r.derivativeInfoPool,o=this._dynamicDerivativeInfos_lastRet;if(o&&(o.forEach(s.disposeInstance,s),h.arrayPool.autodisposeInstance(o)),!a)return this._dynamicDerivativeInfos_lastRet=null;for(var l,c,u=h.arrayPool.getInstance(),d=!1,p=h.objectPool.getAutodisposingInstance(),_=h.objectPool.getAutodisposingInstance(),b=0;c=a[b];b++)(c.reflectsEdits?_:p)[c.derivativeName]=c;for(var y,w=r.Type,I=!1;void 0!==I;I=!I||void 0){for(var S,C=(I?this.primaryAsset:this.primaryMaster).getDataHash(),E=void 0,O=void 0,T=void 0,D=a.length-1;(!E||!O)&&(S=a[D]);D--)S.reflectsEdits===I&&(T=(E=S.width)*(O=S.height));if(T)for(var P,L=I?_:p,R=0;P=k[R];R++){var x=L[P];if(!x||!Object(m.c)(x.mimeType)){var B=F[P];if(T>=B.minSourceArea){for(var j,U=B.uti,G=B.mimeType,H=B.wantsLargestSource,W=B.minSourceArea,$=B.unnecessaryWithSameUTI,z=B.unnecessaryWithSameMIMEType,K=B.urlTemplateKeys,q=w[B.genericTypeKey],Q=H?-1:1,Y=void 0,Z=void 0,X=H?K.length-1:0;!Z&&(j=K[X]);X+=Q){var J=C[j],ee=L[N[j]];!(J&&ee&&ee.reflectsEdits===I&&ee.genericType===q&&ee.width*ee.height>=W)||$&&ee.uti===U||z&&ee.mimeType===G||(Z=ee,Y=J)}if(Z&&Y){var te=s.getInstance(),ne=Z.width,ie=Z.height,re=ne*ie,ae=Math.sqrt(Math.min(f.d[P],re)/re),se=Math.round(ae*ne),oe=Math.round(ae*ie),le=Math.max(se,oe),ce=se*oe,ue=Z.baseFileName,de=g.b[U],he=de?ue+"."+de:ue,pe=g.a[G],fe=pe?ue+"."+pe:ue;te.derivativeName=P,te.mediaPK=y||(y=this.pk),te.width=se,te.height=oe,te.byteSize=Math.round(Z.byteSize*ce/re*(1+.5*(1-ce/re))*(Z.isHighEfficiencyCodec?2:1)),te.urlExpiry=Z.urlExpiry,te.isOriginal=!1,te.reflectsEdits=I,te.isDynamic=!0,te.downloadUrl=Y.replace(v,encodeURIComponent(he)).replace("${m}",le),te.downloadGeostrippedUrl="",te.rawUrl=void 0,te.url=Y.replace(v,encodeURIComponent(fe)).replace("${m}",le),te.uti=U,te.mimeType=G,te.baseFileName=ue,te.fileName=he,te.isHighEfficiencyCodec=!1,te.genericType=q,te.outdateCount=Z.outdateCount,this.constructor.computeDerivativeInfoFields(te),te.transcodeSourceDerivativeId=Z.derivativeId,M[te.derivativeId]||(u.push(te),d=d||l&&A(l,te)>0,l=te)}}}}}return d&&u.sort(A),this._dynamicDerivativeInfos_lastRet=u}})}),serverDerivativeInfos:r.b({readOnly:!0,dependencies:["staticDerivativeInfos","dynamicDerivativeInfos"],get:Object.assign((function(){var e=this.staticDerivativeInfos,t=this._serverDerivativeInfos_lastRet;if(t&&h.arrayPool.autodisposeInstance(t),!e)return this._serverDerivativeInfos_lastRet=null;var n=this.dynamicDerivativeInfos;if(!n||!n.length)return this._serverDerivativeInfos_lastRet=null,e;for(var i=h.arrayPool.getInstance(),r=0,a=0,s=n.length,o=e.length;r<s||a<o;){var l=e[a],c=n[r];l&&(!c||A(l,c)<0)?(i.push(l),a++):c&&(i.push(c),r++)}return this._serverDerivativeInfos_lastRet=i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=this._serverDerivativeInfos_lastRet;if(a&&h.arrayPool.autodisposeInstance(a),!r)return this._serverDerivativeInfos_lastRet=null;var s=i.internalGet(this,t[1+n]);if(!s||!s.length)return this._serverDerivativeInfos_lastRet=null,r;for(var o=h.arrayPool.getInstance(),l=0,c=0,u=s.length,d=r.length;l<u||c<d;){var p=r[c],f=s[l];p&&(!f||A(p,f)<0)?(o.push(p),c++):f&&(o.push(f),l++)}return this._serverDerivativeInfos_lastRet=o}})}),earliestDerivativeURLExpiry:r.b({readOnly:!0,dependencies:["serverDerivativeInfos"],get:Object.assign((function(){var e=this.serverDerivativeInfos;if(!e||!e.length)return-1/0;for(var t,n=1/0,i=0;t=e[i];i++)t.urlExpiry<n&&(n=t.urlExpiry);return n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r||!r.length)return-1/0;for(var a,s=1/0,o=0;a=r[o];o++)a.urlExpiry<s&&(s=a.urlExpiry);return s}})}),_inspectAssetMasterPairForBadApples:a.h({inputs:["primaryAsset.loadStatus","primaryMaster.loadStatus"],callback:function(e,t){if(e===s.a.LOADED&&t===s.a.LOADED){var n=this.serverDerivativeInfos,i=this.primaryAsset,r=this.primaryMaster,a=i.getDataHash(),o=r.getDataHash();this.inspectDerivativesForBadApples(a,o,n)}}}),serverDerivativeInfosByDerivativeId:y("serverDerivativeInfos"),derivativeInfos:r.b({readOnly:!0,cacheable:!0,dependencies:["serverDerivativeInfos","serverDerivativeInfosByDerivativeId","untrackedDerivativeDidLoad","untrackedDerivativeDidUnload"],get:Object.assign((function(){var e=this.serverDerivativeInfos,t=this.serverDerivativeInfosByDerivativeId,n=this._derivativeInfos_lastRet;if(n&&h.arrayPool.autodisposeInstance(n),!e||!t)return this._derivativeInfos_lastRet=null;var i=this._loadedDerivativeSet;if(!i)return this._derivativeInfos_lastRet=null,e;for(var r,a=h.arrayPool.getInstance(),s=e,o=h.arrayPool.getAutodisposingInstance(),l=i&&i.items,c=0|T[this.pk],u=0;r=l[u];u++)t[r.derivativeId]||r.outdateCount!==c||o.push(r);o.length>1&&o.sort(A);for(var d=0,p=0,f=o.length,g=s.length;d<f||p<g;){var m=s[p],_=o[d];m&&(!_||A(m,_)<0)?(a.push(m),p++):_&&(a.push(_),d++)}return this._derivativeInfos_lastRet=a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this._derivativeInfos_lastRet;if(s&&h.arrayPool.autodisposeInstance(s),!r||!a)return this._derivativeInfos_lastRet=null;var o=this._loadedDerivativeSet;if(!o)return this._derivativeInfos_lastRet=null,r;for(var l,c=h.arrayPool.getInstance(),u=r,d=h.arrayPool.getAutodisposingInstance(),p=o&&o.items,f=0|T[this.pk],g=0;l=p[g];g++)a[l.derivativeId]||l.outdateCount!==f||d.push(l);d.length>1&&d.sort(A);for(var m=0,_=0,v=d.length,b=u.length;m<v||_<b;){var y=u[_],w=d[m];y&&(!w||A(y,w)<0)?(c.push(y),_++):w&&(c.push(w),m++)}return this._derivativeInfos_lastRet=c}})}),untrackedDerivativeDidLoad:a.i(),untrackedDerivativeDidUnload:a.i(),derivativeInfosByDerivativeId:y("derivativeInfos"),getDerivativeInfoSubset:function(e){return this[this.constructor.propertyKeyForDerivativeSubset(e||"renderableImage")]},resetDerivatives:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pk;T[t]=1+(0|T[t]),o.a.pause(),this.areClientDerivativesDirty=e,this.propertyChanged("dimensions"),this.propertyChanged("staticDerivativeInfos"),this.derivativesWereReset(),o.a.resume()},derivativesWereReset:a.i(),fetchDerivativeInfo:function(e){var t=this;this.retain(this);var n=l.a.create(),i=n.finally((function(){t.release(t)})),r=function(){n.reject(new Error("Failed to load media."))},a=function(i){var r=e(t);return r?t.constructor.isURLExpiryTooSoon(r)?"expired":(n.resolve(r),"successful"):(i&&n.reject(new Error("No derivativeInfo found.")),"nonexistent")};return"successful"===a(!1)||this.load().then((function(){if(t.propertyChanged("staticDerivativeInfos"),"expired"===a(!0))return t.reload().then((function(){t.propertyChanged("staticDerivativeInfos"),"expired"===a(!0)&&n.reject(new Error("After Media reload, derivativeInfo is still expired."))}),r)}),r),i},getDerivativeInfosForDownload:function(e,t,n,i,r,a,s){if(c.a(e)){var o=e;return this.getDerivativeInfosForDownload(Boolean(o.wantsOriginalFormats),Boolean(o.wantsMostCompatibleFormats),Boolean(o.wantsEditedVersions),Boolean(o.wantsUneditedVersions),Boolean(o.wantsLivePhotoVideoComplement),Boolean(o.allowsLocationMetadata),Boolean(o.isDeviceH265Compatible))}e||t||u.b("wantsOriginalFormats and wantsMostCompatibleFormats were both passed false. One must be true."),n||i||u.b("wantsEditedVersions and wantsUneditedVersions were both passed false. One must be true.");for(var l=this.serverDerivativeInfos,d=h.arrayPool.getAutodisposingInstance(),p=h.mapPool.getAutodisposingInstance(),f=this.isLivePhoto,g=this.genericType,m=this.constructor.Type,_=m.IMAGE,v=m.VIDEO,b=!1,y=!1,w=!0;!0===w||!1===w||void 0===w;w=!w&&(!1===w?void 0:null))if((void 0!==w||b||y)&&(!0!==w||n)&&(!1!==w||i)){for(var I=!1,S=!1,C=!0;!0===C||!1===C||void 0===C;C=!C&&(!1===C?void 0:null))if((void 0!==C||I||S)&&(!0!==C||e)&&(!1!==C||t)){var E=g===_,A=g===v||f&&r,O=this._searchDerivativeInfos(l,d,p,_,v,C,w,E,A,a,s);I=E=Boolean(O%2),S=A=Boolean(O/2|0)}b=I,y=S}return d},_searchDerivativeInfos:function(e,t,n,i,r,a,s,o,l,c,u){for(var d,h=e.length-1;d=e[h];h--)if((c||d.downloadGeostrippedUrl)&&(void 0===s||d.reflectsEdits===s)){var p=Object(m.b)(d.mimeType,d.isHighEfficiencyCodec,u),f=d.isOriginal;if(void 0===a||a&&f||!a&&p){var g=d.genericType;(l||a&&f)&&g===r&&(l=!1,n.get(d)||t.push(d),n.set(d,!0)),(o||a&&f)&&g===i&&(o=!1,n.get(d)||t.push(d),n.set(d,!0))}}return o+2*l},_debug_listDerivatives:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"server",n=this[this.constructor.propertyKeyForDerivativeSubset(t)];return"\n\nDERIVATIVES:\n\n"+n.map((function(t){return t.derivativeId.replace("derivative",t.derivativeName).replace(" ["+e.pk+"]","")})).join("\n")+"\n\n"},__superMap:{_$34N$cleanup:"cleanup"}};function y(e){var t="_objectVersionOf_"+e+"_lastRet";return r.b({readOnly:!0,dependencies:[e],get:function(e,n,i,r){var a=r.internalGet(this,n[0+i]),s=h.objectPool;if(this[t]&&s.disposeInstance(this[t]),!a)return this[t]=null;for(var o=s.getInstance(),l=0;l<a.length;l++){var c=a[l];o[c.derivativeId]=c}return this[t]=o}})}Object.keys(m.a).forEach((function(e){var t=m.a[e],n="_"+e+"_lastRet";b[e]=r.b({readOnly:!0,dependencies:[t.parentSubset].concat(t.additionalDependencies||[]),get:function(e,i,a,s){var o=s.internalGet(this,i[0+a]),l=r.a.getDependencyValuesAsTempArray(this,i,a,s),c=this[n];if(c&&h.arrayPool.autodisposeInstance(c),!o)return this[n]=null;for(var u=d.a(l,1,1),p=h.arrayPool.getInstance(),f=o.length,g=0;g<f;g++){var m=u[0]=o[g];t.filter.apply(this,u)&&p.push(m)}if(t.postProcess){var _=d.a(l,2,1);_[0]=p,_[1]=o,t.postProcess.apply(this,_)}return this[n]=p}})}));var w=["derivativeName","mediaPK","width","height","byteSize","genericType","uti","mimeType","isOriginal","reflectsEdits","isDynamic","urlExpiry","rawUrl","url","downloadUrl","downloadGeostrippedUrl","baseFileName","fileName","isHighEfficiencyCodec","outdateCount"],I={derivativeId:function(){return"derivative ["+this.mediaPK+"] ["+this.width+"x"+this.height+"] ["+this.mimeType+"]"+(this.isOriginal?" [original]":"")+(this.reflectsEdits?" [edited]":"")+(this.isDynamic?" [dynamic]":"")+(this.outdateCount?" ["+this.outdateCount+" outdate"+(1!==this.outdateCount?"s":"")+"]":"")},synthesizedFromDerivativeId:function(){},transcodeSourceDerivativeId:function(){},geometricLength:function(){return Math.max(this.width,this.height)}},S=Object.keys(I),C=w.concat(S);function E(e,t){for(var n,i=e||P,r=0;n=C[r];r++)t[n]=i[n]}function A(e,t){return e.geometricLength-t.geometricLength||Number(e.isOriginal)-Number(t.isOriginal)||e.byteSize-t.byteSize}var O=function(){var e={};return function(t,n){var i=e[t];if(i)return i;var r=t.substring(0,t.indexOf("/")+1||t.length),a="application/pdf"===t||"image/"===r?n.Type.IMAGE:"video/"===r||"audio/"===r?n.Type.VIDEO:n.Type.OTHER;return e[t]=n.genericTypeForSpecificType(a)}}(),T={},M={},D={},P={},L=/Original/,R=/Vid/,x={genericTypeKey:"IMAGE",urlTemplateKeys:["dynamicTemplateURLFromJPEGThumb","dynamicTemplateURLFromOriginal"],mimeType:"image/jpeg",uti:"public.jpeg"},N={dynamicTemplateURLFromJPEGThumb:"JPEGThumb",dynamicTemplateURLFromJPEGFull:"JPEGFull",dynamicTemplateURLFromOriginal:"Original",dynamicTemplateURLFromOriginalVidCompl:"OriginalVidCompl"},F={JPEGMicrothumb:Object.assign({},x,{minSourceArea:f.d.JPEGMicrothumb*f.a,urlTemplateKeys:["dynamicTemplateURLFromJPEGThumb"]}),JPEGThumb:Object.assign({},x,{minSourceArea:f.d.JPEGThumb*f.a}),JPEGMed:Object.assign({},x,{minSourceArea:f.d.JPEGMed*f.a}),JPEGLarge:Object.assign({},x,{minSourceArea:f.d.JPEGLarge*f.a}),JPEGFull:Object.assign({},x,{minSourceArea:0,wantsLargestSource:!0,unnecessaryWithSameUTI:!0,urlTemplateKeys:["dynamicTemplateURLFromJPEGThumb","dynamicTemplateURLFromJPEGFull","dynamicTemplateURLFromOriginal"]}),VidFull:Object.assign({},{genericTypeKey:"VIDEO",urlTemplateKeys:["dynamicTemplateURLFromOriginalVidCompl","dynamicTemplateURLFromOriginal"],mimeType:"video/mp4",uti:"com.apple.quicktime-movie"},{minSourceArea:0,wantsLargestSource:!0,unnecessaryWithSameMIMEType:!0})};_.a.enableDerivativeTranscodingServiceForVideos||(delete F.VidSmall,delete F.VidMed,delete F.VidFull),_.a.enableDerivativeTranscodingServiceForSubThumbImages||delete F.JPEGMicrothumb;var V,k=Object.keys(F);_.a.observe("enableDerivativeTranscodingService",(function(){return V=_.a.enableDerivativeTranscodingService}))},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return f}));var i=n(40),r=n(200),a=n(20),s=n(123),o=n(15),l=n(13),c=n(17),u=n(171),d=n(7),h=n(74),p=n(484),f=i.a.extend(r.a,a.b,s.a).extend({isCacheableInStore:o.d({readOnly:!0,get:function(){return Boolean(this.isLoaded&&this._stopgap_shouldCache)}}),_stopgap_shouldCache:!0,staticMembers:{create:function(e,t){var i=this,r=arguments;if(this!==f)return i.__s._$dk$create.apply(i,r);e||l.b("Attempting to get derivative without providing a derivativeId or derivativeInfo.");var a=e.derivativeId||e,s=e===a?t.findOrCreatePlaceholder(t.mediaPKForDerivativeId(a)).derivativeInfoForDerivativeId(a):e;switch(s||l.b("Could not find derivativeInfo object for derivative. The Media is likely unloaded."),s.genericType){case t.Type.IMAGE:return n(686).imageDerivativeStore.getItem(s,t);case t.Type.VIDEO:return n(1310).videoDerivativeStore.getItem(s,t);default:l.b("Attempting to get derivative of unknown type "+s.genericType)}},__superMap:{_$dk$create:"create"},__QUALIFIED_CLASS_NAME__:"Derivative"},initFromPool:function(e,t){this.__s._$1GX$initFromPool.call(this);var n=t.findOrCreatePlaceholder(e.mediaPK);c.a.pause(),this.media=n,Object(p.e)(e,this),c.a.resume(),n.addDerivative(this)},cleanup:function(){var e=this,t=arguments,n=this.media;n.removeDerivative(this),this._stopgap_shouldCache=!0,c.a.pause(),this.media=null,Object(p.e)(null,this),c.a.resume(),e.__s._$1WS$cleanup.apply(e,t)},element:u.a.create(),rectInElement:u.a.create(),isLoaded:u.a.create(),physicalGeometricLength:d.b({readOnly:!0,dependencies:["physicalWidth","physicalHeight"],get:Object.assign((function(){return Math.max(this.physicalWidth,this.physicalHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),physicalWidth:d.b({readOnly:!0,dependencies:["rectInElement"],get:Object.assign((function(){var e=this.rectInElement;return e?e.width:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.width:0}})}),physicalHeight:d.b({readOnly:!0,dependencies:["rectInElement"],get:Object.assign((function(){var e=this.rectInElement;return e?e.height:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.height:0}})}),media:d.b({strong:!0}),_notifyIsLoaded:a.h("isLoaded","media",(function(e,t){e&&t&&t.derivativeMayHaveLoaded(this)})),derivativeId:d.b({didChange:function(e){this.__derivativeId_for_toString__=e}}),_load:h.a.create(),resetForChangeset:function(){this._stopgap_shouldCache=!1},toString:function(){var e=this,t=arguments,n=e.__s._$28K$toString.apply(e,t);return this.isInitialized?n.slice(0,-1)+":"+this.__derivativeId_for_toString__+n.slice(-1):n},__superMap:{_$1GX$initFromPool:"initFromPool",_$1WS$cleanup:"cleanup",_$28K$toString:"toString"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("AssetOrientation",{UNKNOWN:0,NORMAL:1,FLIP_HORIZONTALLY:2,ROTATE_180:3,FLIP_VERTICALLY:4,TRANSPOSE:5,ROTATE_90:6,TRANSVERSE:7,ROTATE_270:8})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(7),r={presenterView:i.b(),badgeOrder:i.b(0)}},function(e,t,n){var i=n(108),r=n(128),a=i.document,s=r(a)&&r(a.createElement);e.exports=function(e){return s?a.createElement(e):{}}},function(e,t,n){var i=n(108),r=n(213);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(591),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(242),r=n(591);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(243),r=n(305),a=n(494),s=n(129);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(91);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(e,t,n){var i,r,a=n(108),s=n(497),o=a.process,l=o&&o.versions,c=l&&l.v8;c?r=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,t,n){var i=n(243);e.exports=i("navigator","userAgent")||""},function(e,t,n){"use strict";var i=n(173),r=n(289),a=n(146);e.exports=function(e){for(var t=i(this),n=a(t.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>o;)t[o++]=e;return t}},function(e,t,n){var i=n(134),r=n(370),a=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[a]===e)}},function(e,t,n){var i={};i[n(134)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){"use strict";var i=n(22),r=n(502),a=n(245),s=n(292),o=n(259),l=n(213),c=n(216),u=n(134),d=n(242),h=n(370),p=n(606),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=u("iterator"),_=function(){return this};e.exports=function(e,t,n,u,p,v,b){r(n,t,u);var y,w,I,S=function(e){if(e===p&&T)return T;if(!g&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",E=!1,A=e.prototype,O=A[m]||A["@@iterator"]||p&&A[p],T=!g&&O||S(p),M="Array"==t&&A.entries||O;if(M&&(y=a(M.call(new e)),f!==Object.prototype&&y.next&&(d||a(y)===f||(s?s(y,f):"function"!=typeof y[m]&&l(y,m,_)),o(y,C,!0,!0),d&&(h[C]=_))),"values"==p&&O&&"values"!==O.name&&(E=!0,T=function(){return O.call(this)}),d&&!b||A[m]===T||l(A,m,T),h[t]=T,p)if(w={values:S("values"),keys:v?T:S("keys"),entries:S("entries")},b)for(I in w)(g||E||!(I in A))&&c(A,I,w[I]);else i({target:t,proto:!0,forced:g||E},w);return w}},function(e,t,n){"use strict";var i=n(606).IteratorPrototype,r=n(272),a=n(271),s=n(259),o=n(370),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=r(i,{next:a(1,n)}),s(e,c,!1,!0),o[c]=l,e}},function(e,t,n){var i=n(91);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},function(e,t,n){var i=n(146),r=n(506),a=n(212),s=Math.ceil,o=function(e){return function(t,n,o){var l,c,u=String(a(t)),d=u.length,h=void 0===o?" ":String(o),p=i(n);return p<=d||""==h?u:(l=p-d,(c=r.call(h,s(l/h.length))).length>l&&(c=c.slice(0,l)),e?u+c:c+u)}};e.exports={start:o(!1),end:o(!0)}},function(e,t,n){"use strict";var i=n(244),r=n(212);e.exports="".repeat||function(e){var t=String(r(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var i,r,a,s=n(108),o=n(91),l=n(241),c=n(290),u=n(598),d=n(488),h=n(620),p=s.location,f=s.setImmediate,g=s.clearImmediate,m=s.process,_=s.MessageChannel,v=s.Dispatch,b=0,y={},w=function(e){if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},I=function(e){return function(){w(e)}},S=function(e){w(e.data)},C=function(e){s.postMessage(e+"",p.protocol+"//"+p.host)};f&&g||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},g=function(e){delete y[e]},"process"==l(m)?i=function(e){m.nextTick(I(e))}:v&&v.now?i=function(e){v.now(I(e))}:_&&!h?(a=(r=new _).port2,r.port1.onmessage=S,i=c(a.postMessage,a,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||o(C)||"file:"===p.protocol?i="onreadystatechange"in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),w(e)}}:function(e){setTimeout(I(e),0)}:(i=C,s.addEventListener("message",S,!1))),e.exports={set:f,clear:g}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){"use strict";var i=n(91);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var i=n(374);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(134)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},function(e,t,n){var i=n(91),r=n(422);e.exports=function(e){return i((function(){return!!r[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||r[e].name!==e}))}},function(e,t,n){var i=n(108),r=n(91),a=n(415),s=n(147).NATIVE_ARRAY_BUFFER_VIEWS,o=i.ArrayBuffer,l=i.Int8Array;e.exports=!s||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!a((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||r((function(){return 1!==new l(new o(2),1,void 0).length}))},function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=n(1042),s=n(375),o=n(1044),l=n(1045).create,c=n(252),u=n(1066),d=n(1076),h=n(339),p=n(1080),f=n(1081),g=n(1091),m=n(1092)(),_=n(340)()&&!n(642)(),v=n(1093)(),b=c.browser.safari&&c.os.ios,y=c.browser.safari&&c.os.osx,w=c.browser.chrome,I=c.browser.edge,S=n(1095),C=n(376),E=n(1096),A=n(1097),O=n(1098),T=n(1099),M=n(646),D=n(1103),P=n(1105),L=n(651);C("@marcom/ac-video version: "+L.toString());var R=function(e){var t,n;function R(t){var n;n=e.call(this,t)||this,t=t||{},n.el=t.el||document.createElement("div"),n._elementEmitter=new s(n.el),n.VERSION=L,n.options=t,n._controlsFactory=t.controlsFactory,n._urlOptimizer=t.urlOptimizer,y&&n.el.classList.add("safari-fix-zindex");try{var r=window.top;n._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)||Math.min(r.innerWidth,1280)}catch(a){n._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)}return n._lastResize=0,n._lastMouseCoords={},n.el.classList.add("ac-video-player"),n.el.classList.add("idle-state"),n._isLive=t.live,n._isDvr=t.dvr,n._isLive&&n._useLiveMode(t.dvr),n._videoImpl=l(t,n.el),n._isResponsive=t.responsive,n._isResponsive&&(n._breakpointDetect=new O({el:n.el,player:i(n),breakpoints:S,addClass:!0})),n._supportsInlineVideo=_||!(v&&b),n._cachedPiPMode=n.isPictureInPicture(),n._cachedReadyState=n.getReadyState(),n._cachedVisibleTracksLength=0,n.el.appendChild(n._videoImpl.getRenderElement()),(t.poster||"undefined"===typeof t.poster)&&(n._initPoster(t.poster),t.autoplay||"undefined"===typeof t.preload||"none"!==t.preload&&"metadata"!==t.preload&&!1!==t.preload||n._poster.show()),n._bindMethods(),n._addEventListeners(),_&&(n._keyboardControl=T({player:i(n),threesixty:t.threesixty,keyboardTarget:t.keyboardTarget})),t.controls&&n._initUIComponents(),n._initErrorView(),t.parentElement&&t.parentElement.appendChild(n.el),n._chapterEmitter=new o(t),n.refreshSize=n.refreshSize.bind(i(n)),n._refreshSizeTimeout=setTimeout(n.refreshSize,0),window.addEventListener("DOMContentLoaded",n.refreshSize),n}n=e,(t=R).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var x=R.prototype;return x._bindMethods=function(){this._onStart=this._onStart.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onCaptionsChanged=this._onCaptionsChanged.bind(this),this._onPlay=this._onPlay.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onError=this._onError.bind(this),this._forwardEvent=this._forwardEvent.bind(this),this._onPresentationModeChanged=this._onPresentationModeChanged.bind(this),this._forwardFullScreenChangeEvent=this._forwardNamedEvent.bind(this,"fullscreen:change"),this._forwardEnterFullScreenEvent=this._forwardNamedEvent.bind(this,"enterfullscreen"),this._forwardExitFullScreenEvent=this._forwardNamedEvent.bind(this,"exitfullscreen"),this._onDurationChange=this._onDurationChange.bind(this),this._forwardReadyStateChange=this._forwardReadyStateChange.bind(this),this._showControls=this._showControls.bind(this),this._hideControls=this._hideControls.bind(this),this._raiseControls=this._raiseControls.bind(this),this._lowerControls=this._lowerControls.bind(this),this._onPlayPromiseError=this._onPlayPromiseError.bind(this),this._onPlayPromiseResolved=this._onPlayPromiseResolved.bind(this),this._onChapterChange=this._onChapterChange.bind(this),this.refreshSize=this.refreshSize.bind(this)},x._addEventListeners=function(){for(var e=0,t=E.length;e<t;e++)this._videoImpl.on(E[e],this._forwardEvent);for(e=0,t=A.length;e<t;e++)this._videoImpl.on(A[e],this._forwardReadyStateChange);this._videoImpl.on("timeupdate",this._onTimeUpdate),this._videoImpl.on("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.on("durationchange",this._onDurationChange),this._videoImpl.on("addtrack",this._forwardEvent),this._videoImpl.on("change",this._forwardEvent),this._videoImpl.on("change",this._onCaptionsChanged),this._videoImpl.on("removetrack",this._forwardEvent),this._videoImpl.on("loadedmetadata",this.refreshSize),this._videoImpl.on("loadeddata",this.refreshSize),this._videoImpl.on("play",this._onPlay),_?(u.on("enterfullscreen",this._forwardEnterFullScreenEvent),u.on("exitfullscreen",this._forwardExitFullScreenEvent),u.on("enterfullscreen",this._forwardFullScreenChangeEvent),u.on("exitfullscreen",this._forwardFullScreenChangeEvent),this.on("fullscreen:change",this._onFullscreenChange)):b&&(this._videoImpl.on("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.on("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.on("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.on("webkitendfullscreen",this._forwardFullScreenChangeEvent),v&&this.on("fullscreen:change",this._onFullscreenChange)),this._chapterEmitter&&this._chapterEmitter.on("change",this._onChapterChange),this._videoImpl.on("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.on("PlayPromiseResolved",this._onPlayPromiseResolved),this._videoImpl.on("error",this._onError)},x._onPlayPromiseResolved=function(){this.trigger("PlayPromiseResolved")},x._removeEventListeners=function(){for(var e=0,t=E.length;e<t;e++)this._videoImpl.off(E[e],this._forwardEvent);for(e=0,t=A.length;e<t;e++)this._videoImpl.off(A[e],this._forwardReadyStateChange);this._videoImpl.off("timeupdate",this._onTimeUpdate),this._videoImpl.off("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.off("durationchange",this._onDurationChange),_?(u.off("enterfullscreen",this._forwardEnterFullScreenEvent),u.off("exitfullscreen",this._forwardExitFullScreenEvent),u.off("enterfullscreen",this._forwardFullScreenChangeEvent),u.off("exitfullscreen",this._forwardFullScreenChangeEvent)):c.os.ios&&(this._videoImpl.off("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.off("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.off("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.off("webkitendfullscreen",this._forwardFullScreenChangeEvent)),this._chapterEmitter&&this._chapterEmitter.off("change",this._onChapterChange),this._videoImpl.off("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.off("loadedmetadata",this.refreshSize),this._videoImpl.off("loadeddata",this.refreshSize),window.removeEventListener("DOMContentLoaded",this.refreshSize)},x._forwardReadyStateChange=function(){var e=this.getReadyState();(e>this._cachedReadyState||0===e)&&(this._cachedReadyState=e,this.trigger("readystatechange",{readyState:e}))},x._forwardEvent=function(e){C(e.type+" time:"+this.getCurrentTime()),this.trigger(e.type)},x._forwardNamedEvent=function(e){C(e+" time:"+this.getCurrentTime()),this.trigger(e)},x._onPlayPromiseError=function(){C("play() Promise rejected, probably because the browser is blocking autoplay"),this.el.classList.add("initial-play"),this._showStartState(),this._poster.show(),this.once("play",this._onPlay)},x._onCaptionsChanged=function(e){var t=this.getVisibleTextTracks().length;t>0&&0===this._cachedVisibleTracksLength?this.trigger("texttrackshow"):0===t&&this._cachedVisibleTracksLength>0&&this.trigger("texttrackhide"),this._cachedVisibleTracksLength=t},x._onTimeUpdate=function(){this.trigger("timeupdate",{currentTime:this.getCurrentTime()})},x.load=function(e,t,n,i){if(this._setError(!1),this.refreshSize(),this._started=!1,Array.isArray(e)||(e=[e]),t&&!Array.isArray(t)&&(t=[{src:t}]),this._cachedReadyState=0,i||(i=this.options),this._urlOptimizer){t||(t=e.map(this._urlOptimizer.getCaptionsSource).filter((function(e){return!!e})));var r=this.getVisibleTextTracks();r&&r.length&&t&&t.length&&(t[0].mode="showing");var a=i.maxWidth||this._calcMaxWidth();e=e.map(function(e){return this._urlOptimizer.getVideoSource(e,a,null,{urlOptimizeHls:this.options.urlOptimizeHls})}.bind(this))}var s=i&&i.thumbnails||this._urlOptimizer&&this._urlOptimizer.getThumbnailImageSource(e[0]);this.once("play",this._onPlay),(this.options.autoplay&&_||this.getEnded())&&this.once("loadstart",function(){this.play()}.bind(this)),i||(i=this.options),i&&this._poster&&this.setPoster(i.poster),this._poster&&this._poster.show(),this.controls&&this.controls.sharingModule&&(i.sharing?this.controls.sharingModule.setData(i.sharing):this.controls.sharingModule.setData(null)),void 0!==i.live&&(this._isLive=i.live,this._useLiveMode(i.dvr)),this._hideEndState(),this._videoImpl.load(e,t,n),this.controls&&this.controls.overlays?this.controls.overlays.setData(s):this.controls&&this.once("controlsready",function(){this.controls.overlays&&this.controls.overlays.setData(s)}.bind(this)),this.controls&&this.controls.endState?this.controls.endState.setData(i.endState):this.controls&&this.once("controlsready",function(){this.controls.endState&&this.controls.endState.setData(i.endState)}.bind(this))},x._calcMaxWidth=function(){return this.el.parentElement?this.el.parentElement.clientWidth:this._maxWidth},x._isActiveArea=function(e){for(;e!==this.el;){if(e.hasAttribute("data-acv-active-area"))return!0;e=e.parentNode}return!1},x._onPresentationModeChanged=function(e){this._forwardEvent(e);var t=this.isPictureInPicture();this._cachedPiPMode!==t&&(this._cachedPiPMode=t,C("pictureinpicture:change to "+t),this.trigger("pictureinpicture:change"))},x._onDurationChange=function(e){(this._isDvr||this.getDuration()>3600)&&this.el.classList.add("longform"),this.refreshSize()},x.appendTo=function(e){e.appendChild(this.el),this.refreshSize()},x.getTextTracks=function(){return Array.prototype.slice.call(this._videoImpl.getTextTracks())},x.getVisibleTextTracks=function(){var e=Array.prototype.slice.call(this._videoImpl.getTextTracks());return e&&e.length&&(e=e.filter((function(e){return"showing"===e.mode}))),e},x.getFullScreenElement=function(){return _?this.el:this.getMediaElement()},x.getFullScreenEnabled=function(){return u.fullscreenEnabled(this.getFullScreenElement())},x.isFullscreen=function(){return _?u.fullscreenElement()===this.getFullScreenElement():this._videoImpl.isFullscreen()},x.requestFullscreen=function(){if(!this.isFullscreen()){this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willenter",{type:"enter"}),this._lastResize=Date.now(),g(this._updateFullscreenId);var e=this;this._updateFullscreenId=f((function t(){e.refreshSize(),e._updateFullscreenId=f(t)})),w?setTimeout(function(){this._lastResize=Date.now(),u.requestFullscreen(this.getFullScreenElement())}.bind(this),300):u.requestFullscreen(this.getFullScreenElement())}},x.exitFullscreen=function(){this.isFullscreen()&&(this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willexit",{type:"exit"}),w?setTimeout(function(){u.exitFullscreen(this.getFullScreenElement())}.bind(this),300):u.exitFullscreen(this.getFullScreenElement()))},x._onFullscreenChange=function(){this._lastResize=Date.now(),this.controls&&(this.controls.el.display="",this._hideControls()),this._preventUserInteraction=!0,setTimeout(function(){g(this._updateFullscreenId),this._preventUserInteraction=!1,this.refreshSize()}.bind(this),750),this.refreshSize()},x.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},x._initUIComponents=function(){this._controlsFactory?(this._instantiateDefaultCustomUIControls(),_?this.el.appendChild(this._blockade.el):(this.controls.el.classList.add("mobile"),this.setControls(!0))):this.setControls(!0)},x._showControls=function(){this._controlsVisible=!0,this.el.classList.remove("initial-play"),this.el.classList.add("user-hover")},x._hideControls=function(){this._controlsVisible=!1,this.el.classList.remove("user-hover"),this.hideCaptionsSelector()},x._raiseControls=function(){this._controlsVisible=!0,this.el.classList.remove("mouse-leave")},x._lowerControls=function(){this._controlsVisible=!1,this.el.classList.add("mouse-leave"),this.hideCaptionsSelector()},x._onControlsReady=function(){this.options.autoplay&&_||this._showStartState()},x._showStartState=function(){this.controls&&this.controls.el.classList.add("start-state"),this._poster&&this._poster.show(),_||D(this.getMediaElement())},x._hideStartState=function(){this.controls&&this.controls.el.classList.remove("start-state"),this._poster&&this._poster.hide(),_||P(this.getMediaElement())},x._showEndState=function(){this.controls&&(this.controls.mainControlsElement?this.controls.mainControlsElement.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)):this.el.contains(document.activeElement)&&!this.controls.sharingModule.el.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)),this.controls.el.classList.add("end-state")),this._poster&&this._poster.show(),D(this.getMediaElement())},x._hideEndState=function(){this.controls&&this.controls.el.classList.remove("end-state"),_||P(this.getMediaElement())},x._createBlockade=function(){this._blockade=new s(document.createElement("div")),this._blockade.el.classList.add("ac-video-blockade")},x._instantiateDefaultCustomUIControls=function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,enableMainControls:_,basePath:this.options.localizationBasePath,forceEnglishLabels:this.options.forceEnglishLabels,template:this.options.template,readyCallback:function(){this._onControlsReady(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=M({player:this,keyboardControl:this._keyboardControl,controlsTimeoutDuration:this.options.controlsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls},x._onPlay=function(){this._started||(this.el.classList.remove("idle-state"),this.once("timeupdate",this._onStart,function(){return this.getCurrentTime()>0&&!this.getPaused()}.bind(this)))},x.isCaptionsSelectorShowing=function(){return this.controls.el.classList.contains("captions-selector-showing")},x.showCaptionsSelector=function(){this.controls.el.classList.add("captions-selector-showing")},x.hideCaptionsSelector=function(){this.controls.el.classList.remove("captions-selector-showing")},x._onStart=function(){this._started=!0,this.el.classList.add("initial-play"),this._poster&&this._poster.hide(),this.controls&&(this._hideStartState(),this._hideEndState()),this.once("ended",this._onEnded)},x._onEnded=function(){this.isFullscreen()&&this.exitFullscreen(),this.controls&&(this._hideStartState(),this._showEndState()),setTimeout(function(){this.once("timeupdate",function(){this.getEnded()?this._onEnded():this._onStart()}.bind(this))}.bind(this),300),this._poster&&this._poster.show(),this._started=!1},x._initPoster=function(e){this._poster=d({player:this,video:this._videoImpl,useNativePoster:!1===this.options.controls,is2x:m,src:e}),this._poster.el&&this.el.appendChild(this._poster.el),this.options.autoplay||this._poster.show()},x._initErrorView=function(){this._errorView=new p,this.el.appendChild(this._errorView.el)},x._useLiveMode=function(e){this._isLive?(this.el.classList.add("ac-video-live"),e&&!I&&this.el.classList.add("ac-video-live-dvr")):(this.el.classList.remove("ac-video-live"),this.el.classList.remove("ac-video-live-dvr"))},x.once=function(t,n,i){if(arguments.length<3||"object"===typeof i)e.prototype.once.apply(this,arguments);else{var r=arguments,a=Array.prototype.slice.call(arguments,2),s=function(){a.every((function(e){return!!e()}))&&(r[1].apply(this,r),this.off(r[0],s))}.bind(this);this.on(r[0],s)}},x.getMediaElement=function(){return this._videoImpl.getMediaElement()},x.play=function(){var e=this;this.el.classList.remove("idle-state");var t=this._videoImpl.getCurrentTime();C("play called"),!this._videoImpl.getError()||0!==t&&!isNaN(t)?this._videoImpl.play():setTimeout((function(){e._errorView.focus()}),1e3)},x.pause=function(){this._videoImpl.pause()},x.seek=function(e){this.setCurrentTime.apply(this,arguments)},x.addTextTrack=function(e){this._videoImpl.addTextTrack(e)},x.getReadyState=function(){return this._videoImpl.getMediaElement().readyState},x.getPreload=function(){return this._videoImpl.getPreload()},x.setPoster=function(e){this._poster.setSrc(e)},x.getPoster=function(){this._poster.getSrc()},x.getVolume=function(){return this._videoImpl.getVolume()},x.getMuted=function(){return this._videoImpl.getMuted()},x.getCurrentTime=function(){return this._videoImpl.getCurrentTime()},x.getDuration=function(){return this._videoImpl.getDuration()},x.getPaused=function(){return this._videoImpl.getPaused()},x.getEnded=function(){return this._videoImpl.getEnded()},x.getBufferedPercentage=function(){var e=this.getCurrentTime(),t=this.getDuration();if(isNaN(t)||t===1/0)return 0;var n=this._videoImpl.getBuffered();if(n.length)for(var i=0;i<n.length;i++)if(n.start(i)<=e&&n.end(i)>e)return n.end(i)/t*100;return e/t*100},x.setCurrentTime=function(e){return this._videoImpl.setCurrentTime(e)},x.goToLive=function(){this._videoImpl.goToLive&&this._videoImpl.goToLive()},x.isDvr=function(){return this._isDvr&&!I},x.setVolume=function(e){return this.trigger("uservolumechange"),this._videoImpl.setVolume(e)},x.setMuted=function(e){this.trigger("uservolumechange"),this._videoImpl.setMuted(e)},x.setSrc=function(e){this._videoImpl.setSrc(e)},x.getCurrentSrc=function(){return this._videoImpl.getCurrentSrc()},x.setControls=function(e){return this._videoImpl.setControls(e)},x.getMediaHeight=function(){return this._videoImpl.getMediaElement().videoHeight},x.getMediaWidth=function(){return this._videoImpl.getMediaElement().videoWidth},x.supportsPictureInPicture=function(){return this._videoImpl.supportsPictureInPicture()},x.isPictureInPicture=function(){return this._videoImpl.isPictureInPicture()},x.setPictureInPicture=function(e){return this._videoImpl.setPictureInPicture(e)},x.supportsAirPlay=function(){return this._videoImpl.supportsAirPlay()},x.isLive=function(){return this._isLive},x.refreshSize=function(){this._breakpointDetect?this._breakpointDetect.refresh():(this._currentBreakpoint&&this.el.classList.remove(this._currentBreakpoint.name),this._currentBreakpoint=O.getBreakpointFromElement(this.el,S),this.el.classList.add(this._currentBreakpoint.name)),this._videoImpl&&this._videoImpl.refreshSize()},x._setError=function(e){e?this.el.classList.add("media-error"):this.el.classList.remove("media-error")},x._onError=function(e){var t=this._videoImpl.getError();if(this._started)C("ERROR: an error occured during playback, but we'll try to recover. Error code "+(t?t.message:"unknown"));else if(this._setError(!0),this.controls){var n;if(e.message)n=e.message;else{if(!h.translationReady())return void h.getTranslation({callback:this._onError.bind(this,e),forceEnglishLabels:this.options.forceEnglishLabels});n=h.getTranslation().error}this._poster.show(),this._errorView.setText(n)}},x._onChapterChange=function(e){this.trigger("chapter:change")},x.getChapters=function(){return this._chapterEmitter.chapters},x.setChapters=function(e){this._chapterEmitter.chapters=e},x.getChapterForTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._chapterEmitter.getChapterForTime(e,t)},x.isStalled=function(){return this._videoImpl.isStalled()},x.destroy=function(){this._removeEventListeners(),this.controls&&(this.controls.destroy(),this.controls=null),this._poster&&(this._poster.destroy(),this._poster=null),this._controlsInteraction&&(this._controlsInteraction.destroy(),this._controlsInteraction=null),this._keyboardControl&&this._keyboardControl.destroy(),this.el.innerHTML="",this._breakpointDetect&&this._breakpointDetect.destroy(),this._chapterEmitter&&this._chapterEmitter.destroy(),this._blockade&&(this._blockade=null),this._videoImpl.destroy(),this._videoImpl=null,clearTimeout(this._refreshSizeTimeout),a.prototype.destroy.call(this)},R}(a);R.LOADEDMETADATA=1,R.LOADEDDATA=2,R.CANPLAY=3,R.CANPLAYTHROUGH=4,e.exports=R},function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=n(375),s=n(1051),o=n(376),l=window.document,c=n(252).browser.safari?4:3,u=function(e){var t,n;function a(t){var n,r=t&&t.mediaElement?t.mediaElement:l.createElement("video");return(n=e.call(this,r)||this).el=r,n.options=t||{},n._textTracks=s(t),n._initElement(),n._forwardCaptionEvent=n._forwardCaptionEvent.bind(i(n)),n._onTextTrackChangeAfterLoad=n._onTextTrackChangeAfterLoad.bind(i(n)),n._textTracksEmitter=n.getTextTracksEventEmitter(),n._textTracksEmitter.on("addtrack",n._onTextTrackChangeAfterLoad),n._textTracksEmitter.on("addtrack",n._forwardCaptionEvent),n._textTracksEmitter.on("change",n._forwardCaptionEvent),n._textTracksEmitter.on("removetrack",n._forwardCaptionEvent),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var u=a.prototype;return u._initElement=function(){this.el.classList.add("ac-video-media-controller"),null!==this.options.crossorigin&&this.el.setAttribute("crossorigin",this.options.crossorigin?this.options.crossorigin:"anonymous"),this.el.setAttribute("preload",this.options.preload||"auto"),this.el.setAttribute("x-webkit-airplay","")},u._forwardCaptionEvent=function(e){this.trigger(e.type)},u.load=function(e,t,n){n&&(e=e.map((function(e){return e+"#t="+n}))),this.el.textTracks.length&&(this._cachedVisibleTracks=Array.from(this.el.textTracks).filter((function(e){return"showing"===e.mode}))),this._createSourceTags(e),this._createTextTrackTags(t),this.el.load()},u._createSourceTags=function(e){this.el.removeAttribute("src"),this.el.innerHTML="";var t=0,n=e.length;for(n&&this.el.setAttribute("src",e[0]);t<n;t++){var i=l.createElement("source");i.src=e[t],this.el.appendChild(i)}},u._playPromiseRejected=function(){this.trigger("PlayPromiseError")},u.play=function(){try{var e=this.el.play();e&&"function"===typeof e.catch&&(e.catch(function(t){this._playPromise===e&&this._playPromiseRejected()}.bind(this)),e.then(function(){this.trigger("PlayPromiseResolved")}.bind(this),(function(e){o(e)}))),this._playPromise=e}catch(t){o(t)}},u.refreshSize=function(){},u.pause=function(){this._playPromise=null,this.el.pause()},u.addTextTrack=function(e){this._addTextTrackTag(e)},u.removeTextTrack=function(e){this._removeTextTrackTag(e)},u.getRenderElement=function(){return this.getMediaElement()},u.getMediaElement=function(){return this.el},u._createTextTrackTags=function(){return this._textTracks.create.apply(this,arguments)},u._addTextTrackTag=function(){return this._textTracks.add.apply(this,arguments)},u._removeTextTrackTag=function(){return this._textTracks.remove.apply(this,arguments)},u.getTextTracks=function(){return this._textTracks.get.apply(this,arguments)},u.getTextTracksEventEmitter=function(){return this._textTracks.getEmitter.apply(this,arguments)},u.getReadyState=function(){return this.el.readyState},u.getPreload=function(){return this.el.preload},u.setPreload=function(e){return this.el.preload=e},u.setPoster=function(e){e?this.el.poster=e:this.el.removeAttribute("poster")},u.getVolume=function(){return this.el.volume},u.getMuted=function(){return this.el.muted},u.getPaused=function(){return this.el.paused},u.getCurrentTime=function(){return this.el.currentTime},u.getDuration=function(){return this.el.duration},u.setCurrentTime=function(e){return this.el.currentTime=e},u.setVolume=function(e){return this.el.volume=e},u.setMuted=function(e){this.el.muted=e,e?this.el.setAttribute("muted",""):this.el.removeAttribute("muted")},u.getEnded=function(){return this.el.ended},u.getError=function(){return this.el.error},u.setSrc=function(e){this.el.childNodes.length&&e===this._getSrcNode().url||this._createSourceTags([e])},u.advanceLiveStream=function(){},u.getCurrentSrc=function(){return this.el.src},u._getSrcNode=function(){return this.el.childNodes[0]},u._onTextTrackChangeAfterLoad=function(){var e=this;if(this._cachedVisibleTracks){if(!this._cachedVisibleTracks.length)for(var t=0,n=Array.from(this.el.textTracks);t<n.length;t++)n[t].mode="hidden";this._cachedVisibleTracks.forEach((function(t){var n=Array.from(e.el.textTracks).find((function(e){return t.language===e.language}));n&&(n.mode="showing")}))}},u.setControls=function(e){e?(this.el.setAttribute("controls",""),this.el.removeAttribute("aria-hidden")):(this.el.removeAttribute("controls"),this.el.setAttribute("aria-hidden","true"))},u.isFullscreen=function(){return this.el.webkitDisplayingFullscreen},u.supportsPictureInPicture=function(){return"function"===typeof this.el.webkitSetPresentationMode},u.isPictureInPicture=function(){return"picture-in-picture"===this.el.webkitPresentationMode},u.setPictureInPicture=function(e){this.supportsPictureInPicture()&&this.el.webkitSetPresentationMode(e?"picture-in-picture":"inline")},u.supportsAirPlay=function(){return!!window.WebKitPlaybackTargetAvailabilityEvent},u.canPlayType=function(e){return this.el.canPlayType(e)},u.getBuffered=function(){return this.el.buffered},u.isStalled=function(){return this.getReadyState()<c},u.destroy=function(){this._playPromise=null,this._textTracksEmitter&&(this._textTracksEmitter.off("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.off("addtrack",this._onTextTrackChangeAfterLoad),this._textTracksEmitter.off("change",this._forwardCaptionEvent),this._textTracksEmitter.off("removetrack",this._forwardCaptionEvent)),this._textTracks&&this._textTracks.destroy.call(this),this._textTracks=null,this._textTracksEmitter=null,this.el=null},a}(a);e.exports=u},function(e,t,n){"use strict";var i=n(338),r={addLeadingZero:function(e,t){if(t=t||2,e<10||t>2)for(e=String(e);e.length<t;)e="0"+e;return e},formatTime:function(e,t,n){return isNaN(e)?"00:00":(e=this.splitTime(Math.floor(e),t,function(e){return this.addLeadingZero(e,n)}.bind(this)),i(t>=3600?"{PN}{hours}:{minutes}:{seconds}":"{PN}{minutes}:{seconds}",{PN:e.negativeModifier,hours:e.hours,minutes:e.minutes,seconds:e.seconds}))},splitTime:function(e,t,n){n=n||function(e){return e};var i={negativeModifier:"",hours:0,minutes:0,seconds:0};if(isNaN(e))return i;for(var r in i.negativeModifier=e<0?"-":"",e=Math.abs(e),i.hours=t>=3600?Math.floor(e/3600):0,i.minutes=i.hours?Math.floor(e/60%60):Math.floor(e/60),i.seconds=e%60,i)"number"===typeof i[r]&&"hours"!==r&&(i[r]=n(i[r]));return i},stringToNumber:function(e){for(var t=0,n=e.split(":");n.length;)3===n.length?t+=3600*parseFloat(n.shift()):2===n.length?t+=60*parseFloat(n.shift()):t+=parseFloat(n.shift());return t}};e.exports=r},function(e,t){},function(e,t,n){"use strict";var i=n(637),r=n(638);e.exports=function(e,t,n,a){return t=r(e,t),i(e,t,n,a)}},function(e,t,n){"use strict";function i(e){return"x"===e?window.scrollX||window.pageXOffset:window.scrollY||window.pageYOffset}function r(e,t,n){return"x"===t?n?i("x"):e.scrollLeft:n?i("y"):e.scrollTop}e.exports=function(e,t){var n=typeof e;t="string"===n?e:t;var i=(e=e&&"string"!==n?e:window)===window;return t&&/^[xy]$/i.test(t)?r(e,t,i):{x:r(e,"x",i),y:r(e,"y",i)}}},function(e,t,n){"use strict";var i=n(1141),r=n(1146),a=n(1147),s=n(1148),o=n(1149),l=n(1150),c=n(1151),u=n(1152),d=n(1153),h=n(1154),p=n(1155),f=n(1156);e.exports={FACEBOOK_SHARE:i,PINTEREST_SHARE:r,TUMBLR_SHARE:a,TWITTER_FAVORITE:s,TWITTER_REPLY:o,TWITTER_RETWEET:l,TWITTER_TWEET:c,WEIBO_SHARE:u,QQWEIBO_SHARE:d,QZONE_SHARE:h,RENREN_SHARE:p,EMAIL_SHARE:f}},function(e,t,n){"use strict";e.exports=11},function(e,t,n){"use strict";e.exports=1},function(e,t,n){"use strict";var i=n(663);e.exports=function(e,t){return!!i(e)&&("number"===typeof t?e.nodeType===t:-1!==t.indexOf(e.nodeType))}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(123),r=n(74),a={mixinDependencies:[i.a],isExceptionHandlingEnabled:!1,isExceptionHandlingFatal:!0,exceptionHandler:r.a.define(),exceptionWasHandled:!1},s={mixinDependencies:[i.a],staticMembers:Object.assign({},a)};delete s.staticMembers.mixinDependencies},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(20),r=n(284),a=n(247),s=n(219),o=n(13),l=Symbol(),c={mixinDependencies:[i.b,a.a],staticMembers:{handler:r.a.create({nodeType:"DATAOUTLET",register:function(e,t){var n,i=Object(s.a)(t),r=t.attributes.escape;n="false"===r?function(e,t){t=i(t),e.innerHTML=null==t?"":t}:"dangerous"===r?function(e,t){var n=i(t);if(null!==n&&void 0!==n&&!0!==n[l])throw new o.a("All values passed to unescaped templates must be wrapped in hashes and flagged",{hash:n,rawValue:t,span:e});n&&null!=n.value?e.innerHTML=n.value:e.innerHTML=""}:function(e,t){t=i(t),e.data=null==t?"":t},Object(s.c)(e,t,n)},render:function(e,t,n){var i=n.attributes.escape;return"false"===i||"dangerous"===i?t.createElement("span"):t.createTextNode("\u200b")}})}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var i=n(733),r=n(194),a={touchstart:function(e){s(this,"pointerDown",e)},touchmove:function(e){s(this,"pointerMove",e)},touchend:function(e){s(this,"pointerUp",e),c(e.changedTouches)},touchcancel:function(e){s(this,"pointerCancel",e),c(e.changedTouches)}};function s(e,t,n){for(var i=n.changedTouches,r=i.length,a=0;a<r;a++)l(e,n,t,i[a])}var o={};function l(e,t,n,a,s){var c=a.identifier,u=e.getPointerCapture(c);u?s=u.element:s||function(e,t,n,i){var r=n.identifier,a=o[r];a!==i&&(a&&l(e,t,"pointerOut",n,a),i&&(a&&l(e,t,"pointerOver",n,i),o[r]=i))}(e,t,a,s=function(e){var t=e.clientX,n=e.clientY;return document.elementFromPoint(t,n)}(a));var d=r.a.create({cwType:n,pointerId:a.identifier,nativeEvent:t,pointerType:r.b.TOUCH,target:s});Object(i.a)(a,d,"screenX","screenY","clientX","clientY"),e.dispatchEvent(d)}function c(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];delete o[i.identifier]}}function u(){for(var e in o)delete o[e]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(739),r=[4278190080,4294901760,4294967040,4294967280,4294967295],a=[24,16,8,4,0],s=function(e,t,n,i,r){this.name=e,this.value=t,this.level=i,this.parent=n||null,this.group=r||null;var s=t<<a[i];this.fullValue=n?n.fullValue+s:s,this.fullName=n?n.fullName+"."+e:e,this._nextSubstateValue=function(){var e=0;return function(){return e+=1}}(),r||Object.freeze(this)},o=s.prototype;function l(e,t){return new s(e,t,null,0)}o.equals=function(e){return e.fullValue===this.fullValue},o.substateOf=function(e){return!(this.level<=e.level)&&(this.fullValue&r[e.level])===e.fullValue},o.superstateOf=function(e){return!(this.level>=e.level)&&(e.fullValue&r[this.level])===this.fullValue},o.contains=function(e){return this.equals(e)||e.substateOf(this)},o.createSubstate=function(e){return new s(e,this._nextSubstateValue(),this,this.level+1,this.group)},o.toString=function(){var e=this.group,t=e?e.name+" State":"StateEnum",n=e?"":" <"+Object(i.a)(this.fullValue,!0)+">";return"["+t+": "+this.fullName+n+"]"}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(7),r=n(20),a=n(451),s=n(13),o=n(255),l=i.a.extend({type:o.a,init:function(e){var t=this,n=arguments;return"string"===typeof e?t.__s._$cl$init.call(t,{viewOutlet:e}):t.__s._$cl$init.apply(t,n)},initializeMember:function(e,t){var n=this,i=arguments,a=n.__s._$hM$initializeMember.apply(n,i),s=this,o="_"+t+"DidChange",l="_"+t,c="_"+t+"_view";return this._internalValueKey=l,this._internalViewKey=c,e.registerMetadata(o,Object(r.h)(t,t+".view",(function(e,t){s.childViewControllerDidChange(this,e,t)}))),a},childViewControllerDidChange:function(e,t,n){var i=e[this._internalValueKey],r=e[this._internalViewKey];e[this._internalValueKey]=t,e[this._internalViewKey]=n,i===t&&r===n||this.transition.call(e,i,r,t,n,this)},inheritFrom:function(e){var t=this,n=arguments;t.__s._$zz$inheritFrom.apply(t,n),this.viewOutlet||(this.viewOutlet=e.viewOutlet)},transition:function(e,t,n,i,r){e&&e.retain(),n&&n.retain();var o=r.viewOutlet;if(o||Object(s.b)("ChildViewController expects a `viewOutlet` to write to"),n&&(n._destinationViewOutlet=o),e!==n){e&&e.willMoveToParentViewController(null),n&&n.willMoveToParentViewController(this);var l=a.a.begin();e!==n&&this._isViewLoaded&&l.set(this.view,o,i),e&&this.removeChildViewController(e,l),n&&this.addChildViewController(n,l),l.end(),e&&e.didMoveToParentViewController(null),n&&n.didMoveToParentViewController(this)}else t!==i&&this._isViewLoaded&&(this.view[o]=i);e&&e.release(),n&&n.release()},__superMap:{_$cl$init:"init",_$hM$initializeMember:"initializeMember",_$zz$inheritFrom:"inheritFrom"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildViewControllerProperty"}}),c=function(e){return l.define.apply(l,arguments)}},function(e,t,n){"use strict";n(1),n(0),n(3),n(5),n(2),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return _}));var i=n(255),r=n(470),a=n(190),s=n(82),o=n(13),l=n(7),c=n(155),u=n(55),d=n(15),h=n(445),p=n(469),f=n(767),g=n(770),m=i.a.extend({viewClass:h.a,view:Object(l.b)({downstreamBindings:{iconNames:"(owner).iconNames",message:"(owner).message",description:"(owner).description",alertStyle:"(owner).alertStyle",accessoryView:"(owner).accessoryView",buttonViews:"(owner).buttonViews"}}),iconNames:Object(l.b)(),message:Object(l.b)(),description:Object(l.b)(),alertStyle:Object(l.b)(),accessoryView:Object(l.b)(),buttonViews:Object(l.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"AlertContentController"}}),_=f.a.extend({staticMembers:{show:function(e){var t=this.create(e);return t.show(),t},__QUALIFIED_CLASS_NAME__:"AlertViewController"},message:Object(l.b)(),description:Object(l.b)(),iconNames:Object(l.b)(),alertStyle:Object(l.b)(g.a.ALERT),accessoryView:Object(l.b)({strong:!0,didChange:function(e){if(e){e.alertView=this.view;var t=this._previousAccessoryView;t&&(t.alertView=null,this._previousAccessoryView=e)}}}),buttons:Object(l.b)({type:c.b}),primaryButton:Object(l.b)({set:function(e){if(e)return e.isPrimary=!0,this.createButton(e)}}),alternateButton:Object(l.b)({set:function(e){if(e)return e.isAlternate=!0,this.createButton(e)}}),otherButton:Object(l.b)({set:function(e){if(e)return e._isOther=!0,this.createButton(e)}}),createButtonView:function(e){return p.a.create(e)},createButton:function(e){if(e){!1===Object(s.a)(e,r.a)&&(e=this.createButtonView(e));var t=e.element.classList;return!0===e.isPrimary&&(t.add("primary"),void 0===e.keyEquivalent&&(e.keyEquivalent=a.a.RETURN)),!0===e.isAlternate&&(!0===e.isPrimary&&Object(o.b)("AlertButton cannot be configured as both `isPrimary` and `isAlternate`.",{button:e}),t.add("alternate"),void 0===e.keyEquivalent&&(e.keyEquivalent=a.a.ESC)),!0===e.isDestructive&&t.add("destructive"),e._isOther&&t.add("other"),e}},viewClass:h.b,contentController:Object(l.b)({defaultValue:Object(u.c)(m),downstreamBindings:{iconNames:"(owner).iconNames",message:"(owner).message",description:"(owner).description",alertStyle:"(owner).alertStyle",accessoryView:"(owner).accessoryView",buttonViews:"(owner).buttonViews"}}),_previousAccessoryView:Object(d.d)({strong:!0}),_buttonViewsArray0:Object(d.d)({get:function(){return c.b.create()}}),_buttonViewsArray1:Object(d.d)({get:function(){return c.b.create()}}),_currentlyUsingButtonViewsArray1:!0,buttonViews:Object(l.b)({readOnly:!0,dependencies:["primaryButton","alternateButton","otherButton","buttons","buttons.contentsDidChange"],get:Object.assign((function(){var e=this,t=this.primaryButton,n=this.alternateButton,i=this.otherButton,r=this.buttons;r&&(t||n||i)&&Object(o.b)("Cannot use `primaryButton`/`alternateButton`/`otherButton` API in conjunction with the `buttons[]` API.",{primaryButton:t,alternateButton:n,otherButton:i,buttons:r});var a=this._currentlyUsingButtonViewsArray1,s=a?this._buttonViewsArray0:this._buttonViewsArray1;return s.length=0,r?r.forEach((function(t){t&&s.push(e.createButton(t))})):(t&&s.push(t),n&&s.push(n),i&&s.push(i)),this._currentlyUsingButtonViewsArray1=!a,s}),{__CW__getter:function(e,t,n,i){var r=this,a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),l=i.internalGet(this,t[2+n]),c=i.internalGet(this,t[3+n]);c&&(a||s||l)&&Object(o.b)("Cannot use `primaryButton`/`alternateButton`/`otherButton` API in conjunction with the `buttons[]` API.",{primaryButton:a,alternateButton:s,otherButton:l,buttons:c});var u=this._currentlyUsingButtonViewsArray1,d=u?this._buttonViewsArray0:this._buttonViewsArray1;return d.length=0,c?c.forEach((function(e){e&&d.push(r.createButton(e))})):(a&&d.push(a),s&&d.push(s),l&&d.push(l)),this._currentlyUsingButtonViewsArray1=!u,d}})})})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(533),r=function(e,t){for(var n,r,a=0,s=t;s&&-1!==(r=e.indexOf(".",a));)n=e.substring(a,r),s=Object(i.a)(s,n),a=r+1;return s}},function(e,t,n){"use strict";function i(e,t){if(e)return e[t]}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.substring(e.lastIndexOf(".")+1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(123),r=n(74),a={mixinDependencies:[i.a],message:"",validate:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(74),a=n(77),s={mixinDependencies:[i.a],get:Object(a.c)(r.a),set:Object(a.c)(r.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(13),r=n(160),a=n(200),s=r.a.extend(a.a,{staticMembers:{begin:function(e){var t=this.create();return t.retain(t,o),t._isReady=!0,t._rootObject=e,t._batchSetter=this._beginBatchSetter(),t},_beginBatchSetter:function(){return r.c.begin()},__QUALIFIED_CLASS_NAME__:"BatchSetterForNonObservableObject"},begin:function(){Object(i.b)("BatchSetterForObject Begin must be called on the class, reusing BatchSetterForObject objects is not allowed.")},_rootObject:null,set:function(e,t){return this._batchSetter.set(this._rootObject,e,t),this},setIfChanged:function(e,t){return this._batchSetter.setIfChanged(this._rootObject,e,t),this},end:function(){this._batchSetter.end(),this._batchSetter=null,this._rootObject=null,this.release(this,o)}}),o="BatchSetterForObject: self-reference for the duration"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=n(17),a=n(253).b.extend({debugType:"ReadOnly",flushNode:function(e,t){var n=r.a.getStateDataForNode(t),a=r.a.getStateIDForNode(t);Object(i.b)("Cannot write to read-only property: "+this.key,{object:e,value:n,parentID:a})},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamReadOnlyNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(64),r=n(282).a.extend({debugType:"Weak",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference===i.a&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a weak and a strong property together.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamWeakNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(541),r=[];r.toJSON=function(){if(this.length<=1)return this[0];for(var e=[],t=0,n=this.length;t<n;t++)e.push("*** Context "+(t+1)+": ***\n"+Object(i.a)(this[t]));return e.join("\n")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(315),r=function(e){var t="";try{var n=e&&e.toJSON&&e.toJSON()||e;t=Object(i.a)(n)?""+n:JSON.stringify(n)}catch(o){var r={};for(var s in e)r[s]=a(e,s);t=JSON.stringify(r)}return t};function a(e,t){var n=e[t];if(Object(i.a)(n))return n;var r="";try{var a=n&&n.toJSON&&n.toJSON()||n;r=Object(i.a)(a)?""+a:JSON.stringify(a)}catch(s){try{r=n+" (could not `JSON.stringify()`)"}catch(o){r="(cannot stringify value)"}}return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(123),r=n(15),a=n(74),s=n(13),o=n(543),l={mixinDependencies:[i.a],nextResponder:Object(r.d)(),sendEvent:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.a.apply(void 0,[this,e].concat(n))},handleEvent:a.a.define(),canPerformAction:function(e,t){var n=this[e];return Boolean(n)},getPointerCapture:function(e){return"number"!==typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),c[e]},setPointerCapture:function(e){"number"!==typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),c[e]=this},releasePointerCapture:function(e){"number"!==typeof e&&Object(s.b)("Pointer capture only possible on pointerIds which are numbers",{pointerId:e,responder:this}),c[e]===this&&delete c[e]}},c={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=n(352);function a(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];t||Object(i.b)("CW.Responder.sendEvent: Must receive an event.",{targetResponder:e,context:a});for(var o=e,l=!1,c=!1;o&&!o.isDisposed;){if(o.handleEvent&&!c){var u,d=(u=o).handleEvent.apply(u,[t].concat(a));if(d||void 0===d){l=!0;break}}var h=o.handleGestureRecognition;if(h){var p=h.call.apply(h,[o,t].concat(a));p&&(c=!0)}o=o.nextResponder}return c?(r.a.handleEvent.apply(r.a,[t].concat(a)),!0):l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(199),r=n(453).a.extend({staticMembers:{nativePropertiesToCopy:Object(i.b)(["screenX","screenY","clientX","clientY","offsetY","offsetX","x","y","button","buttons","detail","target"]),eventPropertiesToCopy:Object(i.b)(["screenX","screenY","clientX","clientY","offsetY","offsetX","x","y","button","buttons","detail","target"]),__QUALIFIED_CLASS_NAME__:"CoreMouseEvent"},init:function(e){if(this.__s._$I9$init.call(this,e),e){var t=e.nativeEvent;if(t&&!this.target){var n=t.srcElement;n&&(this.target=n)}}},screenX:0,screenY:0,clientX:0,clientY:0,offsetX:0,offsetY:0,button:0,buttons:0,detail:0,target:null,targetView:null,__superMap:{_$I9$init:"init"}})},function(e,t,n){"use strict";function i(e){return e&&"function"===typeof e.then}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(162),a=n(77),s={mixinDependencies:[i.a],createIterator:function(){return this.iteratorClass.create(this)},iteratorClass:Object(a.c)(r.a),serializer:null,encode:function(e,t){var n=this.serializer;return n&&n.encode&&(e=n.encode(e,t)),e},decode:function(e,t){var n=this.serializer;return n&&n.decode&&(e=n.decode(e,t)),e}};s[Symbol.iterator]=function(){return this.createIterator()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(456),r=n(393),a=n(15),s=i.a.extend(r.a,{init:function(e,t){t||(t=e._map.entries()),this.__s._$A4$init.call(this,e,t)},add:function(e){var t=this,n=arguments,i=e[0],r=e[1],a=this.source;if(a.has(i))return!1;var s=t.__s._$DJ$add.apply(t,n);return a.set(i,r),s},remove:function(){if(this.isValid){var e=this.value;return this.source.delete(e[0]),this.moveToNext(),e}},value:Object(a.d)({readOnly:!1,set:function(e){var t=this.source,n=this._container.value;return t.delete(n[0]),this.add(e),e}}),__superMap:{_$A4$init:"init",_$DJ$add:"add"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapEntryIterator"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return u}));var i=n(20),r=n(143),a=n(55),s=n(297),o=n(284),l=n(247),c=n(219),u={mixinDependencies:[i.b,l.a,s.a],__classNameOutlet_addedHash:Object(a.c)(Object),staticMembers:{handler:o.a.create({nodeType:"CLASSNAMEOUTLET",generateLookupFunction:function(e,t){return function(e){return e=e.classList,t(e)}},register:function(e,t){var n=Object(c.a)(t),i="__templateObserver__previous"+t.name+Object(r.b)(t),a=Object(r.b)(t.parent);Object(c.c)(e,t,(function(e,t){var r=this.__classNameOutlet_addedHash[a]=this.__classNameOutlet_addedHash[a]||{},s=this[i];s&&(r[s]--,0===r[s]&&e.remove(s));var o=n(t);o&&(r[o]=r[o]||0,0===r[o]&&e.add(o),r[o]++),this[i]=o}))}})}}},function(e,t,n){"use strict";function i(e,t,n,i){if(t<e)return-1;for(var r=arguments.length,a=new Array(r>4?r-4:0),s=4;s<r;s++)a[s-4]=arguments[s];for(var o,l=new Array(2).concat(a);e<t;){o=e+(t-e>>1),l[0]=n(o),l[1]=o;var c=i.apply(void 0,l);if(0===c)return o;c<0?t=o-1:e=o+1}if(e===t&&e!==o){l[0]=n(e),l[1]=e;var u=i.apply(void 0,l);if(0===u)return e}return-1}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!1;if(e){if(!Array.isArray(e)){var s=e._isCwCollection&&e.objectAt;s||(a=!0)}}else a=!0;a&&Object(i.b)("CW.Utils.appendArrays expects an array and got: "+e);for(var o=1,l=arguments.length;o<l;o++){var c=arguments[o],u=e.length,d=c.length,h=0,p=u;if(c._isCwCollection&&c.objectAt)for(;h<d;h++,p++)e.splice(p,0,c.objectAt(h));else for(;h<d;h++,p++)e.splice(p,0,c[h])}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(15),r=n(7),a={startHandle:Object(i.d)({readOnly:!0,get:function(){return this.handleProvider.startHandle}}),HandleProviderClass:null,handleProviderDelegate:Object(r.b)(),delegate:Object(r.b)(),handleProvider:Object(r.b)({strong:!0,readOnly:!0,get:function(){return this.HandleProviderClass.create({source:this,delegate:this.bindingFor("handleProviderDelegate")})}}),handleFor:function(e){return this.encodedHandleFor(this.encode(e))},encodedHandleFor:function(e){for(var t=this.startHandle.retain(this,"HandleSupport#encodedHandleFor");t.encodedValue!==e&&t.isValid;){var n=t.next.retain(this,"HandleSupport#encodedHandleFor");t.release(this,"HandleSupport#encodedHandleFor"),t=n}return t.autorelease(this,"HandleSupport#encodedHandleFor")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e,t){if((r=t)&&"function"===typeof r.remove)t.remove(e);else if(Array.isArray(t)){var n=t.indexOf(e);n>=0&&t.splice(n,1)}else Object(i.b)("removeItemFromArray: argument array must be an Array or implement a remove method");var r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(162),r=n(716).a.extend({endHandle:i.a.define(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseBidirectionalHandleProvider"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(74),r=n(15),a=n(162),s={mixinDependencies:[n(719).a],atDistance:function(e){for(var t=Math.sign(e),n=this.retain(this,"atDistance: current handle"),i=0;i!==e;i+=t){var r=t>0?n.next:n.previous;r.retain(this,"atDistance: current handle"),n.release(this,"atDistance: current handle"),n=r}return n.autorelease(this,"atDistance: current handle")},hasHandleAtDistance:i.a.define(),end:Object(r.d)({get:function(){return this._provider.endHandle}}),previous:a.a.define(),hasPrevious:a.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={staticMembers:{init:function(){var e=this,t=arguments,n=this.prototype;n._removalHandlers=Object.create(n._removalHandlers),e.__s._$EG$init.apply(e,t)},_registerRemovalHandler:function(e,t){this.prototype._removalHandlers[e]=t},__superMap:{_$EG$init:"init"}},_removalHandlers:{},_removeChildView:function(e,t){return this._removalHandlers[e].removeChildView(this,e,t)},dispose:function(){var e=this,t=arguments;for(var n in this._removalHandlers)this._removalHandlers[n].disposeOutlet(this,n);e.__s._$au$dispose.apply(e,t)},__superMap:{_$au$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(195),r=n(13),a=n(20),s=n(7),o={mixinDependencies:[a.b],target:Object(s.b)(),action:Object(s.b)(),callAction:function(){var e=this.action,t=this.target||this;Object(i.a)(e)||Object(r.b)("An action must be a method name only (as a string)",this);var n=t[e];n&&n.call||Object(r.b)("CW.TargetAction: The specified target did not respond to the action `"+e+"`.",this),n.call(t,this)}}},function(e,t,n){"use strict";n(1),n.d(t,"a",(function(){return o}));var i=n(13),r=n(279),a=n(463),s=n(735),o=r.a.extend({dependencies:[a.a,s.a],action:function(e){var t=e.get("rootViewController");t||Object(i.b)("Must provide a `rootViewController`"),t.isClass&&(t=t.create(),e.set("rootViewController",t))},staticMembers:{__QUALIFIED_CLASS_NAME__:"RootViewControllerInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(123),r=n(74),a={mixinDependencies:[i.a],encode:r.a.create(),decode:r.a.create()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,r=n(161),a=n(13),s=n(139),o=n(120),l=n(221),c=n(51),u=n(20),d=n(15),h=n(744),p=n(126),f=n(746),g=h.a.extend(u.b,{staticMembers:{_TransportClass:Object(d.d)({get:function(e){return e||XMLHttpRequest||m}}),supportsCORS:Object(d.d)({readOnly:!0,get:function(e){if("boolean"===typeof e)return e;try{e=!!("withCredentials"in new this._TransportClass)}catch(t){e=!1}return this._supportsCORS=e}}),__QUALIFIED_CLASS_NAME__:"XHR"},mimeType:null,prepare:function(e,t){var n=e.__transport,i=e.get("url").get("href"),a=!e._synchronous;n.open(e.get("method"),i,a),n.withCredentials=e.get("useCredentialsIfCrossOrigin"),n.addEventListener("readystatechange",_);var s=this.get("mimeType");return n.overrideMimeType&&s&&n.overrideMimeType(s),n.upload&&e.uploadProgress&&!t&&Object(r.a)(n.upload,"progress",v.bind(this,e,"uploadProgress")),e.progress&&!t&&Object(r.a)(n,"progress",v.bind(this,e,"progress")),function(e,t){if(!t||!Object(o.a)(t))return e;var n,i,r,a=Object.keys(t);for(i=0,r=a.length;i<r;i++)n=a[i],e.setRequestHeader(n,t[n])}(n,e.get("headers")),this.configureTimeout(e),n},abort:function(e){var t,n=this,i=arguments;e&&(t=e.__transport)||Object(a.b)("Attempted to abort an XHR request that was never sent",e),t.removeEventListener&&t.removeEventListener("readystatechange",_),n.__s._$1TR$abort.apply(n,i)},handleResponse:function(e,t){var n=this,i=arguments;this.clearTimeout(e),n.__s._$1WD$handleResponse.apply(n,i)},configureTimeout:function(e){var t=e.get("timeout");t&&(e._timer=Object(s.a)(this.handleTimeout.bind(this,e),t))},clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e&&e._timer&&(clearTimeout(e._timer),delete e._timer)})),computeStatuses:function(e){var t=e.status,n=Math.floor(t/100),r=Math.floor(t%100/10),a=t%10;return i||(i={}),i[t]?i[t]:i[t]=0===t?[t,p.b.FAILED,p.b.COMPLETED]:[t,n+"**",""+n+r+"*","*"+r+"*","*"+r+a,"**"+a,2===n?p.b.SUCCEEDED:p.b.FAILED,p.b.COMPLETED]},createResponse:function(e){return f.a.create(e?{status:e.status,encodedBody:e.responseText,headers:e.getAllResponseHeaders()}:null)},finalize:function(e){var t,n=this,i=arguments;e&&(t=e.__transport)||Object(a.b)("Error while finalizing an XHR request - no internal transport",e),t.removeEventListener&&t.removeEventListener("readystatechange",_),this.clearTimeout(e),n.__s._$2JJ$finalize.apply(n,i)},__superMap:{_$1TR$abort:"abort",_$1WD$handleResponse:"handleResponse",_$2JJ$finalize:"finalize"}});function m(){Object(a.b)("Your browser does not support sending requests")}var _=Object(l.a)((function(){var e=this._cw_request,t=e.get("transport");4===this.readyState&&t.handleResponse(e,this)}));function v(e,t,n){var i=e[t];if(i){var r=!i.__lastWriteTime;i.__lastWriteTime=i.__lastWriteTime||Date.now();var a=i.__lastWriteTime,s=Date.now()-a;r||s>80?(i.setMultipleValues({bytesTransferred:n.loaded,bytesTotal:n.total,isDeterminate:n.lengthComputable}),i.__lastWriteTime=Date.now()):r?Object(c.a)(1):Object(c.a)(2)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e,t){if(("number"!==typeof e||"undefined"!==typeof t&&"number"!==typeof t)&&Object(i.b)("Must only provide numbers as params."),0===e)return"0 bytes";var n="undefined"===typeof t?2:t,r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,r)).toFixed(n)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}},function(e,t,n){"use strict";function i(e,t,n){null===n||void 0===n?delete e[t]:e[t]=n}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(209),r=n(749).a.extend({willOpen:function(){this.didOpen()},willClose:function(){this.didClose()},sendMessage:function(e){var t=this.get("window"),n=this.get("origin");i.a.get("sharedInstance").get("isIE9OrLower")&&(e=JSON.stringify(e)),t.postMessage(e,n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCOutputChannel"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(160),r=n(13),a=i.a.extend({head:null,tail:null,length:0,insertBetween:function(e,t,n){return n&&t||Object(r.b)("_DoublyLinkedList: invalid insertion",{item:e,next:n,prev:t}),t._nextDoublyLinkedItem=e,e._previousDoublyLinkedItem=t,e._nextDoublyLinkedItem=n,e._owningDoublyLinkedList=this,n._previousDoublyLinkedItem=e,this.length++,e},remove:function(e){var t=e._previousDoublyLinkedItem,n=e._nextDoublyLinkedItem,i=this.head,r=this.tail;if(n&&t&&i&&r)return this.length--,e===i&&e===r?this.head=this.tail=null:(e===i?this.head=n:e===r&&(this.tail=t),n._previousDoublyLinkedItem=t,t._nextDoublyLinkedItem=n),e._nextDoublyLinkedItem=null,e._previousDoublyLinkedItem=null,e._owningDoublyLinkedList=null,e},push:function(e){return this.insertBetween(e,this.tail||e,this.head||e),this.tail=e,this.head||(this.head=e),this},pop:function(){return this.remove(this.tail)},unshift:function(e){return this.insertBetween(e,this.tail||e,this.head||e),this.head=e,this.tail||(this.tail=e),this},shift:function(){return this.remove(this.head)},staticMembers:{__QUALIFIED_CLASS_NAME__:"_DoublyLinkedList"}});a.prototype.enqueue=a.prototype.unshift,a.prototype.dequeue=a.prototype.pop;var s={mixinDependencies:[{_nextDoublyLinkedItem:null,_previousDoublyLinkedItem:null,_owningDoublyLinkedList:null}],staticMembers:{maxUnusedInstanceCount:200,shouldKeepInstanceAlive:function(e){return!0},shouldKeepFlushingCacheQueue:function(e){return e.length>this.maxUnusedInstanceCount},flushCacheQueue:function(){for(var e=this._keepaliveQueue;this.shouldKeepFlushingCacheQueue(e);){var t=e.dequeue();t._isInKeepaliveQueue=!1,t.release(this,l)}},_keepaliveQueue:null,init:function(){var e=this,t=arguments;this._keepaliveQueue=a.create(),e.__s._$1qT$init.apply(e,t)},create:function(){var e=this,t=arguments,n=e.__s._$1xE$create.apply(e,t);return n.retain(this,o),n},_enqueueInstanceForEviction:function(e){this.shouldKeepInstanceAlive(e)?(this._keepaliveQueue.enqueue(e),e.retain(this,l),e._isInKeepaliveQueue=!0,e.release(this,o),this.flushCacheQueue()):e.release(this,o)},_rescueInstanceFromEviction:function(e){return this._keepaliveQueue.remove(e),e._isInKeepaliveQueue=!1,e.retain(this,o),e.release(this,l),e},__superMap:{_$1qT$init:"init",_$1xE$create:"create"}},_isInKeepaliveQueue:!1,retain:function(e,t){var n=this,i=arguments,r=n.__s._$2WC$retain.apply(n,i);return this._isInKeepaliveQueue&&e!==this.constructor&&t!==o?this.constructor._rescueInstanceFromEviction(this):r},release:function(){var e=this,t=arguments,n=e.__s._$2hH$release.apply(e,t);return 1!==this._retainCount||this._isInKeepaliveQueue||this.constructor._enqueueInstanceForEviction(this),n},__superMap:{_$2WC$retain:"retain",_$2hH$release:"release"}},o="CW._CacheableSupport self-reference: Not queued for eviction.",l="CW._CacheableSupport self-reference: queued for eviction."},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);function r(e,t){if(e||Object(i.b)("findHandlerForOperationType must receive a type"),t)for(var n=0,a=t.length;n<a;n++){var s=t[n],o=s.handlesType;if(o===e||!o&&r(e,s.nestedOperationHandlers))return s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(127),r=n(82),a=n(13),s=n(120),o=n(15),l=n(55),c=n(7),u=n(178),d=n(239),h=n(165),p=d.a.extend({relatedObject:Object(o.d)({weak:!0}),relationshipKey:Object(o.d)(),hasBackingData:Object(o.d)({readOnly:!0,get:function(){var e=this.relatedObject;return!(!e||!e.getDataHash())}}),_array:Object(o.d)({get:function(){if(this.hasBackingData){var e=this.relatedObject,t=this.relationshipKey;return e.getDataHash()[t]}},set:function(e){if(this.hasBackingData)return this.relatedObject.getDataHash()[this.relationshipKey]=e,e}}),_storeIdCache:Object(l.c)(Map),serializer:function(){var e=this;return{encode:function(t){return Object(i.a)(t)?(Object(r.a)(t,u.a)?(t.constructor!==e.modelClass&&Object(a.b)("Invalid Model type %{type}, expected %{configured}",{type:t.constructor,configured:e.modelClass}),t=t.getPrimaryKey()):Object(s.a)(t)&&(t.hasOwnProperty("id")&&t.hasOwnProperty("type")||Object(a.b)("Foreign object tuple must contain keys 'id' and 'type'",{value:t})),t):t},decode:function(t){if(!Object(i.a)(t))return t;var n=e.storeIdForForeignObjectReference(t),r=e.store,a=r.materializeModel(n);if(a)return a;var s=r.constructor.getModelClassForStoreId(n),o=r.constructor.getPrimaryKeyForStoreId(n);return s.createPlaceholder(o,r)}}},shouldDoPostInitProcessing:!1,init:function(e,t,n){t&&t.type?t&&t.relationshipKey?t&&t.relatedObject||Object(a.b)("No relationship object provided in options",{options:t}):Object(a.b)("No relationship key provided in options",{options:t}):Object(a.b)("No model type provided in options",{options:t});var i=t.relationshipKey,r=t.relatedObject;this.__s._$1kd$init.call(this,e,t.type,n),this.relationshipKey=i,this.relatedObject=r;var s=r.__cwMaterializedValues;s||(s=r.__cwMaterializedValues={}),s[i]&&Object(a.b)("A CW.Data.RelationshipArray instance already exists for this relationship",{relatedObject:r,relationshipKey:i,cache:s}),s[i]=this,this.retain("Model#__cwMaterializedValues cache"),this.shouldDoPostInitProcessing=!0,this.postInitProcessing()},itemsWillChange:function(){var e=this,t=arguments;this._array||(this._array=[]),e.__s._$26k$itemsWillChange.apply(e,t),this.store&&this.store._forkIfNeeded(this.relatedObject._cwStoreId)},itemsDidChange:function(){var e=this,t=arguments;if(this.store){var n=this.relatedObject._cwStoreId;n&&this.store.recordChangeToData(n)}e.__s._$2FX$itemsDidChange.apply(e,t),this.relatedObject.notifyOfDataChange()},storeIdForForeignObjectReference:function(e){if(!Object(i.a)(e))return e;var t=this._storeIdCache.get(e);if(void 0===t){var n=e,r=this.modelClass;Object(s.a)(e)&&(n=e.id,r=e.type),t=h.a.getStoreIdForPrimaryKey(r,n),this._storeIdCache.set(e,t)}return t},storeIdForObjectAt:function(e){if(this._array){var t=this._array[e];return t&&this.storeIdForForeignObjectReference(t)}},storeIds:Object(c.b)({dependencies:["length"],readOnly:!0,get:function(){if(!this._array)return[];var e=this.storeIdForForeignObjectReference.bind(this);return this._array.map(e)}}),spliceStoreIds:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=2,s=arguments.length;a<s;a++){var o=this.store.constructor.getPrimaryKeyForStoreId(arguments[a]),l=this.store.constructor.getModelClassForStoreId(o);l!==this.modelClass&&(o={id:o,type:l}),arguments[a]=o}return this._array||(this._array=[]),this._array.splice.apply(this._array,arguments)},objectAt:function(){var e=this,t=arguments;return this._array&&e.__s._$2x4$objectAt.apply(e,t)},encodedObjectAt:function(){var e=this,t=arguments;return this._array&&e.__s._$2ys$encodedObjectAt.apply(e,t)},constructNewInstance:function(){var e={relatedObject:this.relatedObject,relationshipKey:this.relationshipKey,type:this.modelClass};return this.constructor.create([],e,this.store)},filter:function(e,t){e||Object(a.b)("CW.Data.RelationshipArray#filter: No filter function provided: %{relationshipArray}",{relationshipArray:this});var n=this.store;n||Object(a.b)("CW.Data.RelationshipArray#filter: Model arrays must be store backed to be filtered: %{relationshipArray}",{filterFunction:e,relationshipArray:this});var i,r=this.modelClass;r||Object(a.b)("CW.Data.RelationshipArray#filter: No model class defined on model array: %{relationshipArray}",{filterFunction:e,relationshipArray:this,store:n});for(var s=[],o=0,l=this.length;o<l;o++){var c=this.storeIdForObjectAt(o),u=this.store.getExistingModel(c);if(!u){var h=this.storeDataForObjectAt(o);i||(i=r.create().retain(this,"filter: tempModel")),i.replaceData(h)}e.call(t,u||i,o,this)&&s.push(c)}return i&&i.release(this,"filter: tempModel"),d.a.createFromStoreIds(s,r,n)},indexOf:function(e){var t=this._array;return t&&Object(r.a)(e,this.modelClass)?t.indexOf(e.getPrimaryKey()):-1},__superMap:{_$1kd$init:"init",_$26k$itemsWillChange:"itemsWillChange",_$2FX$itemsDidChange:"itemsDidChange",_$2x4$objectAt:"objectAt",_$2ys$encodedObjectAt:"encodedObjectAt"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RelationshipArray"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(155),r=n(82),a=n(265),s=n(13),o=n(15),l=n(178),c=n(239).a.extend({relatedObject:Object(o.d)(),relationshipKey:Object(o.d)(),_embeddedCache:Object(o.d)(),shouldDoPostInitProcessing:!1,hasBackingData:Object(o.d)({readOnly:!0,get:function(){var e=this.relatedObject;return!(!e||!e.getDataHash())}}),_array:Object(o.d)({get:function(){if(this.hasBackingData){var e=this.relatedObject,t=this.relationshipKey;return e.getDataHash()[t]}},set:function(e){if(this.hasBackingData)return this.relatedObject.getDataHash()[this.relationshipKey]=e,e}}),init:function(e,t,n){var i=t.relatedObject,a=t.relationshipKey,s=t.type,o=e&&e.length||0,c=this._embeddedCache=new Array(o),u=this;this.serializer={encode:function(e,t){return Object(r.a)(e,l.a)&&(e=e.getDataHash()),e},decode:function(e,t){if(!e)return e;if(void 0===t)return s.create(e);var n=c[t];if(void 0!==n)return n;var i=s.createEmbedded(u.relatedObject,u.relationshipKey,t);return c[t]=i,i}},this.__s._$1Fp$init.call(this,e,s,n),this.relatedObject=i,this.relationshipKey=a,this.listen("contentsDidChange",(function(e){0!==e.context.length&&i.notifyOfDataChange()})),this.retain("Model#__cwMaterializedValues cache"),this.postInitProcessing()},postInitProcessing:function(){var e=this._array;if(e)for(var t,n,i=this._embeddedCache||(this._embeddedCache=[]),a=0,s=e.length;a<s;a++)t=e[a],Object(r.a)(t,l.a)&&(n=t.getDataHash(),t.isEmbeddedModel||this._embedModel(t,a),i[a]=t,e[a]=n)},constructNewInstance:function(){return i.b.create({serializer:this.serializer})},itemsWillChange:function(){var e=this,t=arguments;this._array||(this._array=[]),e.__s._$1rN$itemsWillChange.apply(e,t);var n=this.relatedObject.embeddedRoot;n.isStoreModel&&n._cwStore._forkIfNeeded(n._cwStoreId)},itemsDidChange:function(){var e=this,t=arguments;e.__s._$1wm$itemsDidChange.apply(e,t);var n=this.relatedObject.embeddedRoot;n.isStoreModel&&n._cwStore.recordChangeToData(n._cwStoreId)},itemsWillBeRemoved:function(e,t){var n=this,i=arguments;if(n.__s._$21X$itemsWillBeRemoved.apply(n,i),0!==t){for(var r=this._embeddedCache,s=e+t,o=e;o<s;o++){var l=r[o];l&&(l.__cwDataHash=Object(a.a)(l.getDataHash()),l._cwParent=l._cwParentKey=l._cwParentIndex=void 0)}r.splice(e,t)}},itemsWillBeInserted:function(e,t){var n=this,i=arguments;if(n.__s._$2Db$itemsWillBeInserted.apply(n,i),0!==t){var r=this._embeddedCache;u[0]=e,u[1]=0,r.splice.apply(r,u),u.length=2}},itemsWereRemoved:function(e,t){var n=this,i=arguments;if(n.__s._$2N5$itemsWereRemoved.apply(n,i),0!==t){var r=this._embeddedCache,a=this.relatedObject&&this.relatedObject.getDataHash(),s=a&&a[this.relationshipKey];if(s){var o,l,c,u=t;for(o=e,l=s.length;o<l;o++)(c=r[o])&&(c._cwParentIndex-=u)}}},itemsWereInserted:function(e,t){var n=this,i=arguments;if(n.__s._$2bH$itemsWereInserted.apply(n,i),0!==t){var r=this._embeddedCache,a=this.relatedObject,s=this.relationshipKey,o=a&&a.getDataHash(),l=o&&o[s];if(l)for(var c,u=l.length,d=e+t,h=e;h<u;h++)(c=r[h])&&(h<d?this._embedModel(c,h):c._cwParentIndex+=t)}},_embedModel:function(e,t){var n=e.parentModel;if(n&&n!==this.relatedObject&&Object(s.b)("Trying to embed a model that already has a different parent",{model:e,parent:n}),!n){n=this.relatedObject;var i=this.relationshipKey;e._cwParent=n,e._cwParentKey=i,e._cwParentIndex=t,e.__cwDataHash=void 0}return e},rawSplice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this,s=arguments;return this._cacheValues.apply(this,i),a.__s._$3Ej$rawSplice.apply(a,s)},push:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=arguments;return this._cacheValues.apply(this,t),i.__s._$3G9$push.apply(i,r)},unshift:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=arguments;return this._cacheValues.apply(this,t),i.__s._$3Hd$unshift.apply(i,r)},insertAt:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this,a=arguments;return this._cacheValues.apply(this,n),r.__s._$3JE$insertAt.apply(r,a)},setIndex:function(e,t){var n=this,i=arguments;return this._cacheValues(t),n.__s._$3Ki$setIndex.apply(n,i)},_cacheValues:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.length;u.length=i+2;for(var a=0;a<i;a++){var s=t[a];Object(r.a)(s,l.a)&&(u[a+2]=s)}},filter:function(){Object(s.b)("Filter cannot be used safely on an embedded relationship array, use filterCloned instead.",{source:this})},filterCloned:function(e,t){var n=[],r=this.relatedObject,a=this.relationshipKey,s=r&&r.getDataHash(),o=s&&s[a];if(o)for(var l=this.modelClass,c=l.create(),u=0,d=o.length;u<d;u++){var h=o[u];c.replaceData(h),e.call(t,c,u,o)&&n.push(l.createFromDataHash(h))}return i.b.create(n)},indexOf:function(e){var t=this._array;return t&&Object(r.a)(e,this.modelClass)?t.indexOf(e.getDataHash()):-1},isObjectAtIndexMaterialized:function(e){var t=this._embeddedCache;return t&&!!t[e]},__superMap:{_$1Fp$init:"init",_$1rN$itemsWillChange:"itemsWillChange",_$1wm$itemsDidChange:"itemsDidChange",_$21X$itemsWillBeRemoved:"itemsWillBeRemoved",_$2Db$itemsWillBeInserted:"itemsWillBeInserted",_$2N5$itemsWereRemoved:"itemsWereRemoved",_$2bH$itemsWereInserted:"itemsWereInserted",_$3Ej$rawSplice:"rawSplice",_$3G9$push:"push",_$3Hd$unshift:"unshift",_$3JE$insertAt:"insertAt",_$3Ki$setIndex:"setIndex"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EmbeddedRelationshipArray"}}),u=[0,0]},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return a}));var i=n(7),r=n(326),a={orientationType:i.b(r.b.bindingFor("orientationType")),primaryInteractionMode:i.b(r.b.bindingFor("primaryInteractionMode")),sizeClass:i.b(r.b.bindingFor("sizeClass")),sizeClassHorizontal:i.b(r.b.bindingFor("sizeClassHorizontal")),sizeClassVertical:i.b(r.b.bindingFor("sizeClassVertical")),isRTL:i.b(r.b.bindingFor("isRTL"))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"};Object.freeze(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(143),r=n(139),a=n(266),s=n(25);function o(e,t,n){var r="canvas_"+e+"x"+t+(arguments.length>2?"_"+i.b(n):""),a=u[r];a||((a=s.canvasPool.getInstance()).width=e,a.height=t),l(a,r,e,t);var o=a._context||(a._context=a.getContext("2d"));return o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,e,t),a}function l(e,t,n,i){if(u[t]||(u[t]=e),!p[n]||!p[i]){var s=h[t];s?clearTimeout(d[t]):s=h[t]=Object(a.a)(c,void 0,t),d[t]=r.a(s,500)}}function c(e){s.canvasPool.disposeInstance(u[e]),delete u[e],delete h[e],delete d[e]}var u=Object.create(null),d=Object.create(null),h=Object.create(null),p=function(){for(var e=Object.create(null),t=0;t<=Math.log(512)/Math.log(2);t++)e[Math.pow(2,t)]=!0;return e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(64);function r(e,t){for(var n=e+t,r=e;r<n;r++)Object(i.f)(this.objectAt(r),this,"StrongArray: item retain")}function a(e,t){for(var n=e+t,r=e;r<n;r++)Object(i.d)(this.objectAt(r),this,"StrongArray: item retain")}var s={strong:!0,init:function(){var e=this,t=arguments;e.__s._$AM$init.apply(e,t),r.call(this,0,this.length)},itemsWereInserted:function(e,t){var n=this,i=arguments;r.call(this,e,t),n.__s._$D3$itemsWereInserted.apply(n,i)},itemsWillBeRemoved:function(e,t){var n=this,i=arguments;a.call(this,e,t),n.__s._$F4$itemsWillBeRemoved.apply(n,i)},dispose:function(){a.call(this,0,this.length),this.__s._$Gj$dispose.call(this)},__superMap:{_$AM$init:"init",_$D3$itemsWereInserted:"itemsWereInserted",_$F4$itemsWillBeRemoved:"itemsWillBeRemoved",_$Gj$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(123),r=n(74),a=n(171),s=n(460),o={mixinDependencies:[i.a],connect:r.a.define(),disconnect:r.a.define(),isDisconnected:a.a.define(),incomingMessage:s.a.define(),outgoingMessage:s.a.define(),send:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(398),a=n(74),s=n(20),o=n(7),l=n(127),c=n(571),u=n(772),d=i.a.extend(s.b,{channel:Object(o.b)({type:c.a}),messageFormatter:u.a.sharedInstance,serializer:r.a.sharedInstance,shouldHandleMessage:a.a.define(),handleMessage:a.a.define(),incomingMessageListener:Object(s.h)("channel.incomingMessage",(function(e){if(e){var t=this.serializer.decode(e.context);Object(l.a)(t)&&this.shouldHandleMessage(t)&&this.handleMessage(t)}})),staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcBase"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(40),r=n(20),a=n(7),s=n(171),o=n(13),l=n(161),c=n(238),u=n(571),d=n(774),h=i.a.extend(r.b,u.a,{autoconnect:!0,isDisconnected:Object(a.b)({readOnly:!0,get:function(){return this._isDisconnected}}),incomingMessage:Object(r.i)(),outgoingMessage:Object(r.i)(),outgoingWindow:s.a.define(),remoteOrigin:Object(a.b)({type:"string"}),_isDisconnected:!0,_messageHandler:null,connect:function(){this.isDisconnected&&(this.outgoingWindow&&this.outgoingWindow.postMessage||Object(o.b)("The `outgoingWindow` must be configured and support `postMessage()`"),Object(l.a)(window,"message",this._messageHandler),this._isDisconnected=!1,this.propertyChanged("isDisconnected"))},disconnect:function(){this.isDisconnected||(Object(c.a)(window,"message",this._messageHandler),this._isDisconnected=!0,this.propertyChanged("isDisconnected"))},init:function(){var e=this,t=arguments;this._messageHandler=p.bind(this),e.__s._$1At$init.apply(e,t)},send:function(e){this.isDisconnected&&Object(o.b)("Cannot send message because the channel has not been connected.",this);var t=this.remoteOrigin;t||Object(o.b)("Cannot send message without `remoteOrigin` specified.",this),this.outgoingWindow.postMessage(e,t),this.outgoingMessage(e)},outgoingWindowDidChange:Object(r.h)("outgoingWindow",(function(e){e?this.autoconnect&&this.connect():this.disconnect()})),__superMap:{_$1At$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowPostMessageChannel"}});function p(e){var t=e.originalEvent,n=(t||e).origin,i=this.outgoingWindow,r=e.source,a=i===r;try{a||(a=i.actualOutgoingWindow===r)}catch(s){a=!1}a&&Object(d.a)(n,this.remoteOrigin)&&this.incomingMessage((t||e).data)}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return l}));var i=n(201),r=n(202),a=n(7),s=n(20),o=n(256),l=r.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"canvas",classes:["cw-spinner-view"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"width"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}},attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-ui-spinner-view",__QUALIFIED_CLASS_NAME__:"SpinnerView"},size:Object(a.b)(32),color:"#000000",image:Object(a.b)({set:function(e){if("string"===typeof e){var t=new Image;return t.src=e,t}return e}}),tooltip:Object(a.b)(null),period:600,tickCount:12,tickReach:.54375,tickWidth:(12-90/255)/64,isVisible:Object(a.b)(!0),isAnimating:Object(a.b)({readOnly:!0,dependencies:["isVisible","isAttached"],get:Object.assign((function(){return this.isVisible&&this.isAttached}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),drawStep:function(e){this._currentStep=e;var t=this._canvas,n=this._context,r=this.size*i.a.sharedInstance.devicePixelRatio;r!==t.width||r!==t.height?t.width=t.height=r:n.clearRect(0,0,r,r),this._backingSize=r,n.save(),n.translate(r/2,r/2),n.rotate(2*e*Math.PI/this.tickCount),this.image?this._drawImageContent():this._drawGeneratedContent(),n.restore()},drawTick:function(e,t,n){var i=this.tickReach*t/2,r=this.tickWidth*t/2;!function(e,t,n,i,r,a){a=Math.min(i/2,r/2,void 0===a?1/0:a),e.beginPath(),e.moveTo(t+a,n),e.arcTo(t+i,n,t+i,n+r,a),e.arcTo(t+i,n+r,t,n+r,a),e.arcTo(t,n+r,t,n,a),e.arcTo(t,n,t+i,n,a),e.closePath(),e.fill()}(e,-r/2,-t/2,r,i)},_tickOpacities:{12:[1,.90196,.76078,.65098,.54118,.43137,.38039,.32157,.25882,.21961,.2,.16863]},_animationFrameId:0,_backingSize:0,init:function(e){var t=this,n=arguments;t.__s._$28_$init.apply(t,n),this._canvas=this.element,this._context=this._canvas.getContext("2d")},dispose:function(){var e=this,t=arguments;cancelAnimationFrame(this._animationFrameId),e.__s._$2D7$dispose.apply(e,t)},_startOrStopAnimation:Object(s.h)("isAnimating",(function(e){if(e){if(this._animStartTime)return;this._animStartTime=Date.now(),this.drawStep(0),this._tick()}else this._animStartTime=null,cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this.isInitialized&&this.drawStep(0)})),_tick:function(){if(this.isAnimating){this._animationFrameId=Object(o.a)(this._tick.bind(this));var e=this.tickCount,t=this.period/e,n=((Date.now()-this._animStartTime)/t|0)%e;n!==this._currentStep&&this.drawStep(n)}},_drawImageContent:function(){var e=this.image,t=this._context,n=this._backingSize;t.drawImage(e,-n/2,-n/2,n,n)},_drawGeneratedContent:function(){var e=this._context,t=this._backingSize,n=this.tickCount;e.fillStyle=this.color;for(var i=0;i<n;i++)e.globalAlpha=this._opacityForTickOfCount(i,n),this.drawTick(e,t),e.rotate(-2*Math.PI/n);e.globalAlpha=1},_opacityForTickOfCount:function(e,t){var n=this._tickOpacities[t];if(n)return n[e];var i=2/t,r=e/(t-1),a=Math.pow(r,.6),s=.7*(.5-.5*Math.cos(a*Math.PI))+.3*a;return s*i+1*(1-s)},__superMap:{_$28_$init:"init",_$2D7$dispose:"dispose"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(246).a.extend({topForCell:function(e,t){var n=e.layoutMetrics;return t.handle.position*(n.rowHeight+n.rowSpacing)+n.topPadding+n.topInset-n.hideableTopHeight},verticalScan:1024,horizontalScan:1024,estimateCellAtDistance:function(e,t,n,i,r){var a=e.layoutMetrics,s=n.handle,o=s.position,l=Math.round(r/(a.rowHeight+a.rowSpacing))+o;l<0&&(l=0);var c=t.length;l>=c&&(l=c-1),s=s.at(l);var u=this.cellForHandle(s).retain(),d=this.topForCell(e,n)-n.y;return this.layOutCellInDirection(e,u,1,this.topForCell(e,u)-d,1,this.leftForCell(e,u)),u.autorelease()},_findCellForItem:function(e,t,n,i){var r=n.find((function(e){return e.handle.value===i}));if(r)return r.retain();var a=t.indexOf(i);if(-1===a)return null;var s=t.startHandle.at(a);return this.cellForHandle(s).retain()},spaceBelowCell:function(e,t){var n=e.layoutMetrics,i=t.handle;return(i.maximumPosition-i.position)*(n.rowHeight+n.rowSpacing)+n.bottomPadding-n.hideableBottomHeight},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexedListLayoutDelegate"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(40),r=n(20),a=i.a.extend(r.b,{staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionLayoutMetrics"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(20),r=n(7),a=n(123),s=n(77),o=n(74),l=n(55),c=n(392),u=n(576),d=n(406),h={staticMembers:{LayoutMetricsClass:u.a},mixinDependencies:[a.a,i.b],setUpInitialCell:Object(s.c)(o.a),setUpFirstCell:Object(s.c)(o.a),setUpLastCell:Object(s.c)(o.a),getCellForItem:Object(s.c)(o.a),getHandleForItem:function(e,t,n){return t&&t.handleFor(n)},initializeVisibleCells:Object(s.c)(o.a),completeVisibleCells:Object(s.c)(o.a),finalizeVisibleCells:function(e,t,n,i){},setUpCellAtDistance:Object(s.c)(o.a),computeSpaceAroundViewport:Object(s.c)(o.a),reusePreviousVisibleCells:o.a.define(),cellClass:Object(r.b)(d.a),_cellTypesMap:Object(l.c)(Map),_cellMapForCellType:function(e){var t=this._cellTypesMap,n=t.get(e);return n||(n=c.a.create(),t.set(e,n)),n},cellForHandleIfPresent:function(e,t){return void 0===t&&(t="item"),this._cellMapForCellType(t).get(e)},cellForHandle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"item",n=this._cellMapForCellType(t),i=n.get(e);return i||((i=this.createCellFor(e,t)).key=e,i.cellType=t,n.set(e,i)),i.registerWeakReference(this,this._cellWasDisposed,i),i.retain(this,"cellForHandle: initial retain + autorelease").autorelease(this,"cellForHandle: initial retain + autorelease")},cellClassKeysByCellType:{item:"cellClass"},createCellFor:function(e,t){return this[this.cellClassKeysByCellType[t]].create(this)},_cellWasDisposed:function(e){this._cellMapForCellType(e.cellType).removeKey(e.key)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(200),a=n(15),s=n(262),o=n(13),l=i.a.extend(r.a,s.b,{initFromPool:function(e){this._owner=e,this.__s._$7n$initFromPool.call(this)},cleanup:function(){var e=this,t=arguments;this.invalidate(),e.__s._$8t$cleanup.apply(e,t)},didEnterPool:function(){this._owner=null,this.wasLaidOut=!1,this.key=null,this._properties.value.readOnly||(this.value=null),this.x=-1,this.y=-1,this.width=-1,this.height=-1,this.scrollX=0,this.scrollY=0,this.__s._$HH$didEnterPool.call(this)},key:Object(a.d)(),value:Object(a.d)(),x:Object(a.d)(-1),y:Object(a.d)(-1),width:Object(a.d)(-1),height:Object(a.d)(-1),top:Object(a.d)({readOnly:!0,get:function(){return this.y}}),bottom:Object(a.d)({readOnly:!0,get:function(){return this.y+this.height}}),left:Object(a.d)({readOnly:!0,get:function(){return this.x}}),right:Object(a.d)({readOnly:!0,get:function(){return this.x+this.width}}),origin:Object(a.d)({readOnly:!0,get:function(){Object(o.b)("CW.Cell#origin not implemented")}}),cellType:"item",toString:function(){return this.__s._$kJ$toString.call(this)+"cellType: "+this.cellType+" x: "+this.x+" y: "+this.y+" width: "+this.width+" height: "+this.height},_owner:null,wasLaidOut:!1,isLaidOut:!1,isReusable:Object(a.d)({readOnly:!0,defaultValue:!0}),moveBy:function(e,t,n){this.x+=t,this.y+=n},invalidate:function(){this.size=null,this.isLaidOut=!1},size:Object(a.d)({strong:!0}),rect:Object(a.d)({get:function(){return this}}),copyTo:function(e){e.size=this.size,e.x=this.x,e.y=this.y,e.height=this.height,e.width=this.width},__superMap:{_$7n$initFromPool:"initFromPool",_$8t$cleanup:"cleanup",_$HH$didEnterPool:"didEnterPool",_$kJ$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionCell"}})},function(e,t,n){"use strict";n(0),n(4),n.d(t,"a",(function(){return s}));var i=n(785),r=n(472),a=n(193),s=i.a.extend({itemViewDidMove:function(e,t){var n=e.element.style,i=t.width,s=t.height,o=t.x,l=t.y,c=this.presentingView;c&&c.hasMixin(r.a)&&(o+=c.nativeScrollX,l+=c.nativeScrollY),Object(a.d)(n,o,l),n.width=i+"px",n.height=s+"px"},itemViewDidExit:function(e){var t=e.element.style;Object(a.d)(t,-1e4,-1e4)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AbsolutelyPositionedPresenter"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(20),a=n(200),s=n(15),o=n(7),l=n(256),c=n(756),u=n(203),d=i.a.extend(r.b,a.a,c.b).extend({zeroSpeedCutoff:1e-5,emaHalfLife:1,lastDelta:s.d({defaultValue:0,isRevertible:!0}),_lastDeltaDate:s.d({defaultValue:0,isRevertible:-1/0}),speed:o.b({defaultValue:0,isRevertible:!0}),velocity:o.b({defaultValue:0,isRevertible:!0}),emaSpeed:o.b({defaultValue:0,isRevertible:!0}),emaVelocity:o.b({defaultValue:0,isRevertible:!0}),isStationary:o.b(!0),_isStationary:o.b({readOnly:!0,dependencies:["emaSpeed"],get:Object.assign((function(){return!this.emaSpeed}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}}),didChange:function(e){this.isStationary=e}}),handleDelta:function(e){var t=this._lastDeltaDate,n=Date.now(),i=n-t||1/0;this._lastDeltaDate=n;var r=e/i*1e3;this.velocity=r,this.speed=Math.abs(r),this._runAveragingFrame(NaN,!0)},_runAveragingFrame:Object(u.b)((function(e,t){window.cancelAnimationFrame(this._averagingFrameId);var n=!1,i=60*this.emaHalfLife,r=Math.pow(10,Math.log(.5)/i),a=this.emaVelocity,s=a*r+(t?this.velocity:0)*(1-r);Math.abs(s)>this.zeroSpeedCutoff?(a!==s&&(this.emaVelocity=s),n=!0):0!==a&&(this.emaVelocity=0);var o=this.emaSpeed,c=o*r+(t?this.speed:0)*(1-r);Math.abs(c)>this.zeroSpeedCutoff?(o!==c&&(this.emaSpeed=c),n=!0):0!==o&&(this.emaSpeed=0),n&&(this._averagingFrameId=l.a(this._runAveragingFrame))})),cleanup:function(){var e=this,t=arguments;window.cancelAnimationFrame(this._averagingFrameId),this.revertRevertibleProperties(),e.__s._$1t9$cleanup.apply(e,t)},__superMap:{_$1t9$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MotionTracker"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var i=n(40),r=n(200),a=n(13),s=n(467),o=i.a.extend(r.a,s.a,{initFromPool:function(){var e=this,t=arguments;e.__s._$4H$initFromPool.apply(e,t),this.retain(this,"basic thenable self-retain from init through first callbacks")},_fireThenableCallbacksWrapper:function(){var e=this,t=arguments;e.__s._$7E$_fireThenableCallbacksWrapper.apply(e,t),this._hasReleasedInitialRetain||(this._hasReleasedInitialRetain=!0,this.release(this,"basic thenable self-retain from init through first callbacks"))},cleanup:function(){var e=this,t=arguments;this._hasReleasedInitialRetain=!1,e.__s._$Ca$cleanup.apply(e,t)},__superMap:{_$4H$initFromPool:"initFromPool",_$7E$_fireThenableCallbacksWrapper:"_fireThenableCallbacksWrapper",_$Ca$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Thenable"}}),l=i.a.extend(s.a,{init:function(){var e=this,t=arguments;e.__s._$GW$init.apply(e,t),this.retain(this,"permanent self-retain")},cancel:a.b.bind(void 0,"Cannot cancel a shared thenable."),__superMap:{_$GW$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SharedThenable"}})},function(e,t,n){"use strict";function i(e){return e}function r(e){return d(.25,.1,.25,1,e)}function a(e){return d(.42,0,1,1,e)}function s(e){return d(0,0,.58,1,e)}function o(e){return d(.42,0,.58,1,e)}function l(e){return e*e}function c(e){return 1-(1-e)*(1-e)}function u(e){return.5-.5*Math.cos(Math.PI*e)}function d(e,t,n,i,r){var a,s,o,l,c,u,d=Math.max(0,Math.min(1,r)),h=3*e,p=3*(n-e)-h,f=1-h-p,g=3*t,m=3*(i-t)-g,_=1-g-m;for(o=d,u=0;u<8;u++){if(l=((f*o+p)*o+h)*o-d,Math.abs(l)<1e-6)return((_*o+m)*o+g)*o;if(c=(3*f*o+2*p)*o+h,Math.abs(c)<1e-6)break;o-=l/c}if((o=d)<(a=0))return((_*a+m)*a+g)*a;if(o>(s=1))return((_*s+m)*s+g)*s;for(;a<s;){if(l=((f*o+p)*o+h)*o,Math.abs(l-d)<1e-6)return((_*o+m)*o+g)*o;d>l?a=o:s=o,o=.5*(s-a)+a}return((_*o+m)*o+g)*o}n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return d}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(15),r=n(99),a={areStateUpdatesPaused:0,state:i.d({defaultValue:r.a.prototype._properties.state.defaultValue,set:function(e){var t=this,n=arguments;if(!this.areStateUpdatesPaused)return t.__s._$6R$set.apply(t,n);this._pausedState=e},get:function(){var e=this,t=arguments;return this.areStateUpdatesPaused?this._pausedState:e.__s._$8I$get.apply(e,t)},__superMap:{_$6R$set:"set",_$8I$get:"get"}}),pauseStateChanges:function(){this.areStateUpdatesPaused||(this._pausedState=this.state),this.areStateUpdatesPaused++},resumeStateChanges:function(){this.areStateUpdatesPaused--,this.areStateUpdatesPaused||(this.state!==this._pausedState&&(this.state=this._pausedState),this._pausedState=void 0)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var i,r=n(7),a=n(98),s=n(139),o=n(451),l=n(1312),c={hasGeostrippedURLs:r.b({readOnly:!0,dependencies:["primaryMaster.geostrippedURLs","primaryAsset.geostrippedURLs"],get:Object.assign((function(){return Boolean(this.getPath("primaryMaster.geostrippedURLs")&&this.getPath("primaryAsset.geostrippedURLs"))}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})}),fetchGeostrippedURLs:function(){return a.a.all([this.primaryMaster.fetchGeostrippedURLs(),this.primaryAsset.fetchGeostrippedURLs()])}},u={geostrippedURLs:r.b(),fetchGeostrippedURLs:function(){return this._geostrippedURLFetchPromise?this._geostrippedURLFetchPromise:(d.push(this),i||(i=s.a(h,50)),this._geostrippedURLFetchPromise=a.a.create())},dataDidLoad:function(){var e=this,t=arguments;return this.geostrippedURLs=null,e.__s._$Tl$dataDidLoad.apply(e,t)},__superMap:{_$Tl$dataDidLoad:"dataDidLoad"}},d=[];function h(){var e=d;i=null,d=[],l.a.fetch(e.map((function(e){return e.recordName}))).then((function(t){for(var n=o.a.begin(),i=0;i<t.length;i++){var r=t[i],a=e[i];n.set(a,"geostrippedURLs",{resJPEGThumbResGeostrippedDownloadUrl:r.resJPEGThumbRes&&r.resJPEGThumbRes.value.downloadURL,resJPEGMedResGeostrippedDownloadUrl:r.resJPEGMedRes&&r.resJPEGMedRes.value.downloadURL,resJPEGLargeResGeostrippedDownloadUrl:r.resJPEGLargeRes&&r.resJPEGLargeRes.value.downloadURL,resJPEGFullResGeostrippedDownloadUrl:r.resJPEGFullRes&&r.resJPEGFullRes.value.downloadURL,resVidSmallResGeostrippedDownloadUrl:r.resVidSmallRes&&r.resVidSmallRes.value.downloadURL,resVidMedResGeostrippedDownloadUrl:r.resVidMedRes&&r.resVidMedRes.value.downloadURL,resVidFullResGeostrippedDownloadUrl:r.resVidFullRes&&r.resVidFullRes.value.downloadURL,resOriginalResGeostrippedDownloadUrl:r.resOriginalRes&&r.resOriginalRes.value.downloadURL,resOriginalAltResGeostrippedDownloadUrl:r.resOriginalAltRes&&r.resOriginalAltRes.value.downloadURL,resOriginalVidComplResGeostrippedDownloadUrl:r.resOriginalVidComplRes&&r.resOriginalVidComplRes.value.downloadURL})}n.end();for(var s,l=0;s=e[l];l++)s._geostrippedURLFetchPromise.resolve(),s._geostrippedURLFetchPromise=null}),(function(){for(var t,n=0;t=e[n];n++){var i;(i=t._geostrippedURLFetchPromise).reject.apply(i,arguments),t._geostrippedURLFetchPromise=null}}))}},function(e,t,n){"use strict";n(1),n(0),n(2),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(347),r=n(283),a=n(264),s=n(25),o=n(197);function l(e){var t=i.a(r.a,"application.feedbackService");if(t){var n,l=e.derivativeTimeToFirstByte,u=a.a(l);u&&(e.duration=l,n=s.objectPool.getAutodisposingInstanceWithProperties("duration",l)),t.report("derivativeRequest",e,!1,u),t.report("derivativeRequestFrom"+e.derivativeRequestReason,n,!1,u);var d=e.derivativeOffscreeninessAtSend>o.a.offscreeninessThresholdForHighLatency?"Background":"Foreground";if(e.derivativeIsTranscoded){var h=e.derivativeTranscodeSourceDerivativeNameNominal||"Unknown";t.report("derivativeTranscoder"+d+"RequestFrom"+h,n,!1,u)}else t.report("derivativeNontranscoder"+d+"Request",n,!1,u);c(e.xhrStatus,e.duration)}}function c(e,t){var n=i.a(r.a,"application.feedbackService");if(n){var a,o=Math.floor(e/100);switch(o){case 0:a=".timeout";break;case 2:a="";break;default:a="."+o+"xx"}var l=s.objectPool.getAutodisposingInstanceWithProperties("duration",t);n.report("cvws"+a,l,!1,!0)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(563),r=n(178),a=n(17),s={mixinDependencies:[i.a],staticMembers:{_modelPropertyKeys:void 0,_fakeDataHash:void 0,init:function(){var e,t=this,n=arguments;t.__s._$6S$init.apply(t,n);var i=[],a=this.prototype.getMetadataByType(r.b);for(var s in a)i.push(s);this._modelPropertyKeys=Object.freeze(i),this._fakeDataHash=((e={})[this.primaryKey]="",e)},shouldCache:!0,__superMap:{_$6S$init:"init"}},initFromPool:function(e,t,n){if(t){a.a.pause(),t&&t.linkModel(this,n,e);for(var i=this.constructor._modelPropertyKeys,r=0,s=i.length;r<s;r++)this.propertyChanged(i[r]);a.a.resume()}else this.replaceData(e)},cleanup:function(){var e=this,t=arguments,n=this._cwStore;n&&n.unlinkModel(this),e.__s._$SR$cleanup.apply(e,t)},__superMap:{_$SR$cleanup:"cleanup"}}},function(e,t,n){"use strict";n(1),n(0),n(3),n(5),n(2),n.d(t,"a",(function(){return b})),n(116);var i=n(93),r=n(40),a=n(20),s=n(117),o=n(13),l=n(7),c=n(161),u=n(214),d=n(531),h=n(15),p=n(130),f=n(139),g=n(316),m=n(331),_=n(270),v=n(288),b=r.a.extend(a.b,{staticMembers:{displayName:null,vendorName:null,shareDataValidator:m.a,validateShareData:function(e){return this.shareDataValidator.sharedInstance.validate(e)},validationResultsForShareData:function(e){return this.shareDataValidator.sharedInstance.validationResultsForShareData(e)},isEnabledForBrowser:!0,notEnabledForBrowserString:s.d("Share.Validation.BrowserOutOfDate"),isEnabledForUser:!0,notEnabledForUserString:"",reasonsNotEnabledWithShareData:function(e){var t=null;this.isEnabledForUser||(t=t||[]).push(this.notEnabledForUserString),this.isEnabledForBrowser||(t=t||[]).push(this.notEnabledForBrowserString);var n=this.validationResultsForShareData(e);return n.validity||(t=t||[],n.incompatibleReasonStrings.length?t.push.apply(t,n.incompatibleReasonStrings):t.push(this.genericIncompatibleReasonString)),t},genericIncompatibleReasonString:"Some items can't be shared.",init:function(){var e=this,t=arguments;!I||this.displayName&&this.vendorName||o.b("Must configure a UX-friendly `displayName` on all subclasses of VendorExtension."),I=!0,this.prototype.registerMetadata("canSubmit",l.b({readOnly:!0,dependencies:this.prototype.canSubmit_dependencies,get:this.prototype.canSubmit_getter})),e.__s._$1Rl$init.apply(e,t)},LOADING:"loading",READY:"ready",SUBMITTING:"submitting",FAILED:"failed",FINISHED:"finished",CANCELED:"canceled",getImage:function(e){if(!e||"video"===(e.mimeType+"").substring(0,5))return v.a.reject();var t=v.a.create(),n=e.imageExample||(e.imageExample=new Image);return y(n)?t.resolve(n):(c.a(n,"load",t.resolve.bind(t,n)),c.a(n,"error",t.reject.bind(t,null)),n.src||(n.src=e.url)),t._shareData=n._shareData=e,t},getLoadedImage:function(e){if(!w(e))return null;var t=e.imageExample;return t&&(t._shareData=e),t},getLoadedMediaResForSize:function(e,t,n){return this.getMediaResForSize(e,t,n,w)},getSmallestMediaRes:function(e,t){return this.getMediaResForSize(e,0,0,t)},getLargestMediaRes:function(e,t){return this.getMediaResForSize(e,1/0,1/0,t)},getMediaResForSize:function(e,t,n,i){if(!e)return null;for(var r=e.length,a=null,s=0;s<r;s++){var o=e[s];!o||i&&!i(o)||(!a||a.width<t&&a.height<n&&o.width>a.width&&o.height>a.height||o.width>=t&&o.height>=n&&o.width<a.width&&o.height<a.height)&&(a=o)}return a},getImageForSize:function(e,t,n,i){return this.getImage(this.getMediaResForSize(e,t,n,i))},getLoadedImageForSize:function(e,t,n,i){return this.getLoadedImage(this.getLoadedMediaResForSize(e,t,n,i))},__superMap:{_$1Rl$init:"init"},__QUALIFIED_CLASS_NAME__:"VendorExtension"},maximumAllowedLoadTime:1/0,shareData:l.b({get:function(e){return e||{}},set:u.a}),alertViewControllerClass:d.b,errorAlertViewControllerClass:h.d({defaultValue:null,get:function(e){return e||this.alertViewControllerClass},set:function(e){return e}}),shareDataValidationResults:l.b({readOnly:!0,dependencies:["shareData"],get:Object.assign((function(){return this.constructor.shareDataValidator.sharedInstance.validationResultsForShareData(this.shareData)}),{__CW__getter:function(e,t,n,i){return this.constructor.shareDataValidator.sharedInstance.validationResultsForShareData(i.internalGet(this,t[0+n]))}})}),isShareDataSubmittable:l.b({readOnly:!0,dependencies:["shareDataValidity"],get:Object.assign((function(){return this.shareDataValidity>=m.a.SUBMITTABLE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>=m.a.SUBMITTABLE}})}),isShareDataCompatible:l.b({readOnly:!0,dependencies:["shareDataValidity"],get:Object.assign((function(){return this.shareDataValidity>=m.a.COMPATIBLE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>=m.a.COMPATIBLE}})}),shareDataValidity:l.b({readOnly:!0,dependencies:["shareDataValidationResults"],get:Object.assign((function(){return this.shareDataValidationResults.validity}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).validity}})}),state:l.b({defaultValue:function(){return this.constructor.LOADING},didChange:function(e){p.b.info("Extension is "+e+".")}}),isSubmitting:l.b({readOnly:!0,dependencies:["state"],get:Object.assign((function(){return this.state===this.constructor.SUBMITTING}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===this.constructor.SUBMITTING}})}),isStateFinal:l.b({readOnly:!0,dependencies:["state"],get:Object.assign((function(){var e=this.state;return e===this.constructor.CANCELED||e===this.constructor.FAILED||e===this.constructor.FINISHED}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r===this.constructor.CANCELED||r===this.constructor.FAILED||r===this.constructor.FINISHED}})}),init:function(){var e=this,t=arguments;e.__s._$4UD$init.apply(e,t),this.retain(this,"self-hold during own lifecycle"),f.a(Object(_.a)(this._loadDependencies,this))},_loadDependencies:function(){var e=this;this.retain(this,"self-hold for _loadDependencies");var t=!1,n=function(){t||(t=!0,e.autorelease(e,"self-hold for _loadDependencies"),e.loadingDidFail())};this.maximumAllowedLoadTime<1/0&&f.a(n,this.maximumAllowedLoadTime),this.loadDependencies().then((function(){t||(t=!0,e.autorelease(e,"self-hold for _loadDependencies"),e.loadingDidComplete())})).catch(n)},loadDependencies:function(){return v.a.resolve()},loadingDidComplete:function(){this.state=this.constructor.READY},loadingDidFail:function(){this.terminate()},terminate:function(){this.state!==this.constructor.FINISHED&&this.state!==this.constructor.CANCELED&&(this.state=this.constructor.FAILED),this.autorelease(this,"self-hold during own lifecycle")},submit:function(){this.canSubmit||o.b("Can't submit while shareData is not yet suitable for submission."),this.state=this.constructor.SUBMITTING},canSubmit_getter:function(){return this.isShareDataSubmittable},canSubmit_dependencies:["isShareDataSubmittable"],_recordStats:function(e,t){var n=i.a.cloudOSService;n&&n.recordStat(e,t)},showErrorAlertDialogWithStat:function(e,t){var n=this.constructor.vendorName+"ErrorAlertShown";this._recordStats(n,{errorType:n,errorTitle:e.message,errorDescription:e.description,errorData:t&&t.error?JSON.stringify(t.error):""}),this._showErrorAlertDialog(e)},_showErrorAlertDialog:function(e){this.__showAlertDialog(e,this.errorAlertViewControllerClass)},_showAlertDialog:function(e){this.__showAlertDialog(e,this.alertViewControllerClass)},__showAlertDialog:function(e,t){g.a(t)&&t.prototype.show||o.b("Invalid AlertViewController Class(es) set on VendorExtension");for(var n,i=Object.keys(e),r=0,a=i.length;r<a;r++)if(i[r].match(/\w+Button/)){n=!0;break}n||(e.primaryButton={title:s.d("Alert.OK.Button.Title")}),t.create(e).show()},__superMap:{_$4UD$init:"init"}});function y(e){return e instanceof Image?e.src&&e.complete:e instanceof HTMLCanvasElement}function w(e){return!!e&&y(e.imageExample)}var I=!1},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n(13),r=n(199),a=n(117),s=n(331),o=1e6,l=function(e,t){var r="Only videos and images arrays are currently supported for EmailExtension. Received type "+t;return Array.isArray(e)||i.b(r),"images"===t?n(679).EmailExtension.getLargestMediaRes(e):"videos"===t?n(679).EmailExtension.getSmallestMediaRes(e,(function(e){return"video"===(e.mimeType+"").substring(0,5)})):void i.b(r)},c=s.a.extend({images:r.b({allowsGeo:!1}),videos:r.b({allowsGeo:!1}),totalAttachmentByteSizeLimit:20*o,validate:function(e,t){var n=this,i=arguments;if(n.__s._$Vw$validate.apply(n,i),e){var r,s,c,d=this.totalAttachmentByteSizeLimit,h=0,p=[];for(e.images&&(r=e.images.map((function(e){return l(e,"images")})),p.push.apply(p,r)),e.videos&&(s=e.videos.map((function(e){return l(e,"videos")})),p.push.apply(p,s)),c=0;c<p.length;c++){var f=p[c];if(!f)return void t.record(this.constructor.INCOMPATIBLE,"Attached media has no suitable resolutions.");if((h+=f.fileSize)>d){var g=this.totalAttachmentByteSizeLimit/o,m="Email attachments exceed the maximum size limit of "+g+" megabytes.";u.maxMegabytes=g;var _=a.d("Share.Validation.FileSizeLimitExceeded",u);return void t.record(this.constructor.INCOMPATIBLE,m,_)}}}},__superMap:{_$Vw$validate:"validate"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EmailShareDataValidator"}}),u={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={init:function(){var e=this,t=arguments,i=this.getMetadataByType(n(408).CollapseFunction),r=[];for(var a in i){var s=i[a].getFunctionForObject(this);this[a]=s,r.push(s)}this.layoutCollapseFunctions=r,e.__s._$C2$init.apply(e,t)},__superMap:{_$C2$init:"init"}}},function(e,t,n){var i=n(145),r=n(91),a=n(488);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(108),r=n(489),a=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=a},function(e,t,n){var i=n(108),r=n(490),a=i.WeakMap;e.exports="function"===typeof a&&/native code/.test(r(a))},function(e,t,n){var i=n(180),r=n(492),a=n(211),s=n(163);e.exports=function(e,t){for(var n=r(t),o=s.f,l=a.f,c=0;c<n.length;c++){var u=n[c];i(e,u)||o(e,u,l(t,u))}}},function(e,t,n){var i=n(108);e.exports=i},function(e,t,n){var i=n(180),r=n(232),a=n(365).indexOf,s=n(364);e.exports=function(e,t){var n,o=r(e),l=0,c=[];for(n in o)!i(s,n)&&i(o,n)&&c.push(n);for(;t.length>l;)i(o,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var i=n(495);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(145),r=n(163),a=n(129),s=n(367);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=s(t),o=i.length,l=0;o>l;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var i=n(243);e.exports=i("document","documentElement")},function(e,t,n){var i=n(232),r=n(305).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(t){return s.slice()}}(e):r(i(e))}},function(e,t,n){var i=n(134);t.f=i},function(e,t,n){"use strict";var i=n(173),r=n(289),a=n(146),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),o=a(n.length),l=r(e,o),c=r(t,o),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?o:r(u,o))-c,o-l),h=1;for(c<l&&l<c+d&&(h=-1,c+=d-1,l+=d-1);d-- >0;)c in n?n[l]=n[c]:delete n[l],l+=h,c+=h;return n}},function(e,t,n){"use strict";var i=n(333),r=n(146),a=n(290);e.exports=function e(t,n,s,o,l,c,u,d){for(var h,p=l,f=0,g=!!u&&a(u,d,3);f<o;){if(f in s){if(h=g?g(s[f],f,n):s[f],c>0&&i(h))p=e(t,n,h,r(h.length),p,c-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=h}p++}f++}return p}},function(e,t,n){"use strict";var i=n(206).forEach,r=n(273),a=n(225),s=r("forEach"),o=a("forEach");e.exports=s&&o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var i=n(290),r=n(173),a=n(605),s=n(499),o=n(146),l=n(306),c=n(371);e.exports=function(e){var t,n,u,d,h,p,f=r(e),g="function"==typeof this?this:Array,m=arguments.length,_=m>1?arguments[1]:void 0,v=void 0!==_,b=c(f),y=0;if(v&&(_=i(_,m>2?arguments[2]:void 0,2)),void 0==b||g==Array&&s(b))for(n=new g(t=o(f.length));t>y;y++)p=v?_(f[y],y):f[y],l(n,y,p);else for(h=(d=b.call(f)).next,n=new g;!(u=h.call(d)).done;y++)p=v?a(d,_,[u.value,y],!0):u.value,l(n,y,p);return n.length=y,n}},function(e,t,n){var i=n(129);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(s){var a=e.return;throw void 0!==a&&i(a.call(e)),s}}},function(e,t,n){"use strict";var i,r,a,s=n(245),o=n(213),l=n(180),c=n(134),u=n(242),d=c("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(r=s(s(a)))!==Object.prototype&&(i=r):h=!0),void 0==i&&(i={}),u||l(i,d)||o(i,d,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var i=n(128);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var i=n(232),r=n(244),a=n(146),s=n(273),o=n(225),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),h=o("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!h;e.exports=p?function(e){if(u)return c.apply(this,arguments)||0;var t=i(this),n=a(t.length),s=n-1;for(arguments.length>1&&(s=l(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:c},function(e,t,n){var i=n(244),r=n(146);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var i=n(163).f,r=n(272),a=n(335),s=n(290),o=n(293),l=n(294),c=n(501),u=n(334),d=n(145),h=n(307).fastKey,p=n(217),f=p.set,g=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,i){o(e,u,t),f(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=i&&l(i,e[c],e,n)})),p=g(t),m=function(e,t,n){var i,r,a=p(e),s=_(e,t);return s?s.value=n:(a.last=s={index:r=h(t,!0),key:t,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=s),i&&(i.next=s),d?a.size++:e.size++,"F"!==r&&(a.index[r]=s)),e},_=function(e,t){var n,i=p(e),r=h(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return a(u.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=p(this),n=_(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),d?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=p(this),i=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!_(this,e)}}),a(u.prototype,n?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&i(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,n){var i=t+" Iterator",r=g(t),a=g(i);c(e,t,(function(e,t){f(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},function(e,t){var n=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:n(1+e)}},function(e,t,n){var i=n(128),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t,n){var i=n(108),r=n(336).trim,a=n(422),s=i.parseFloat,o=1/s(a+"-0")!==-1/0;e.exports=o?function(e){var t=r(String(e)),n=s(t);return 0===n&&"-"==t.charAt(0)?-0:n}:s},function(e,t,n){var i=n(108),r=n(336).trim,a=n(422),s=i.parseInt,o=/^[+-]?0[Xx]/,l=8!==s(a+"08")||22!==s(a+"0x16");e.exports=l?function(e,t){var n=r(String(e));return s(n,t>>>0||(o.test(n)?16:10))}:s},function(e,t,n){var i=n(241);e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var i=n(145),r=n(91),a=n(367),s=n(494),o=n(413),l=n(173),c=n(362),u=Object.assign,d=Object.defineProperty;e.exports=!u||r((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=a(u({},t)).join("")}))?function(e,t){for(var n=l(e),r=arguments.length,u=1,d=s.f,h=o.f;r>u;)for(var p,f=c(arguments[u++]),g=d?a(f).concat(d(f)):a(f),m=g.length,_=0;m>_;)p=g[_++],i&&!h.call(f,p)||(n[p]=f[p]);return n}:u},function(e,t,n){var i=n(145),r=n(367),a=n(232),s=n(413).f,o=function(e){return function(t){for(var n,o=a(t),l=r(o),c=l.length,u=0,d=[];c>u;)n=l[u++],i&&!s.call(o,n)||d.push(e?[n,o[n]]:o[n]);return d}};e.exports={entries:o(!0),values:o(!1)}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(108);e.exports=i.Promise},function(e,t,n){var i=n(497);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){var i,r,a,s,o,l,c,u,d=n(108),h=n(211).f,p=n(241),f=n(508).set,g=n(620),m=d.MutationObserver||d.WebKitMutationObserver,_=d.process,v=d.Promise,b="process"==p(_),y=h(d,"queueMicrotask"),w=y&&y.value;w||(i=function(){var e,t;for(b&&(e=_.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(n){throw r?s():a=void 0,n}}a=void 0,e&&e.enter()},b?s=function(){_.nextTick(i)}:m&&!g?(o=!0,l=document.createTextNode(""),new m(i).observe(l,{characterData:!0}),s=function(){l.data=o=!o}):v&&v.resolve?(c=v.resolve(void 0),u=c.then,s=function(){u.call(c,i)}):s=function(){f.call(d,i)}),e.exports=w||function(e){var t={fn:e,next:void 0};a&&(a.next=t),r||(r=t,s()),a=t}},function(e,t,n){var i=n(129),r=n(128),a=n(424);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(22),r=n(425);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(e,t,n){"use strict";var i=n(426).charAt,r=n(217),a=n(501),s=r.set,o=r.getterFor("String Iterator");a(String,"String",(function(e){s(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=o(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var i=n(497);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},function(e,t,n){var i=n(985);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var i=n(173),r=n(146),a=n(371),s=n(499),o=n(290),l=n(147).aTypedArrayConstructor;e.exports=function(e){var t,n,c,u,d,h,p=i(e),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,_=a(p);if(void 0!=_&&!s(_))for(h=(d=_.call(p)).next,p=[];!(u=h.call(d)).done;)p.push(u.value);for(m&&f>2&&(g=o(g,arguments[2],2)),n=r(p.length),c=new(l(this))(n),t=0;n>t;t++)c[t]=m?g(p[t],t):p[t];return c}},function(e,t,n){"use strict";var i=n(335),r=n(307).getWeakData,a=n(129),s=n(128),o=n(293),l=n(294),c=n(206),u=n(180),d=n(217),h=d.set,p=d.getterFor,f=c.find,g=c.findIndex,m=0,_=function(e){return e.frozen||(e.frozen=new v)},v=function(){this.entries=[]},b=function(e,t){return f(e.entries,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=g(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,c){var d=e((function(e,i){o(e,d,t),h(e,{type:t,id:m++,frozen:void 0}),void 0!=i&&l(i,e[c],e,n)})),f=p(t),g=function(e,t,n){var i=f(e),s=r(a(t),!0);return!0===s?_(i).set(t,n):s[i.id]=n,e};return i(d.prototype,{delete:function(e){var t=f(this);if(!s(e))return!1;var n=r(e);return!0===n?_(t).delete(e):n&&u(n,t.id)&&delete n[t.id]},has:function(e){var t=f(this);if(!s(e))return!1;var n=r(e);return!0===n?_(t).has(e):n&&u(n,t.id)}}),i(d.prototype,n?{get:function(e){var t=f(this);if(s(e)){var n=r(e);return!0===n?_(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return g(this,e,t)}}:{add:function(e){return g(this,e,!0)}}),d}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var i=n(91),r=n(134),a=n(242),s=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){"use strict";n(416);var i=n(22),r=n(243),a=n(630),s=n(216),o=n(335),l=n(259),c=n(502),u=n(217),d=n(293),h=n(180),p=n(290),f=n(372),g=n(129),m=n(128),_=n(272),v=n(271),b=n(1027),y=n(371),w=n(134),I=r("fetch"),S=r("Headers"),C=w("iterator"),E=u.set,A=u.getterFor("URLSearchParams"),O=u.getterFor("URLSearchParamsIterator"),T=/\+/g,M=Array(4),D=function(e){return M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(T," "),n=4;try{return decodeURIComponent(t)}catch(i){for(;n;)t=t.replace(D(n--),P);return t}},R=/[!'()~]|%20/g,x={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return x[e]},F=function(e){return encodeURIComponent(e).replace(R,N)},V=function(e,t){if(t)for(var n,i,r=t.split("&"),a=0;a<r.length;)(n=r[a++]).length&&(i=n.split("="),e.push({key:L(i.shift()),value:L(i.join("="))}))},k=function(e){this.entries.length=0,V(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},j=c((function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:b(A(e).entries),kind:t})}),"Iterator",(function(){var e=O(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),U=function(){d(this,U,"URLSearchParams");var e,t,n,i,r,a,s,o,l,c=arguments.length>0?arguments[0]:void 0,u=this,p=[];if(E(u,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:k}),void 0!==c)if(m(c))if("function"===typeof(e=y(c)))for(n=(t=e.call(c)).next;!(i=n.call(t)).done;){if((s=(a=(r=b(g(i.value))).next).call(r)).done||(o=a.call(r)).done||!a.call(r).done)throw TypeError("Expected sequence with length 2");p.push({key:s.value+"",value:o.value+""})}else for(l in c)h(c,l)&&p.push({key:l,value:c[l]+""});else V(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},G=U.prototype;o(G,{append:function(e,t){B(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=A(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var n,i=A(this),r=i.entries,a=!1,s=e+"",o=t+"",l=0;l<r.length;l++)(n=r[l]).key===s&&(a?r.splice(l--,1):(a=!0,n.value=o));a||r.push({key:s,value:o}),i.updateURL()},sort:function(){var e,t,n,i=A(this),r=i.entries,a=r.slice();for(r.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=A(this).entries,i=p(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),s(G,C,G.entries),s(G,"toString",(function(){for(var e,t=A(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(F(e.key)+"="+F(e.value));return n.join("&")}),{enumerable:!0}),l(U,"URLSearchParams"),i({global:!0,forced:!a},{URLSearchParams:U}),a||"function"!=typeof I||"function"!=typeof S||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return arguments.length>1&&(m(t=arguments[1])&&(n=t.body,"URLSearchParams"===f(n)&&((i=t.headers?new S(t.headers):new S).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=_(t,{body:v(0,String(n)),headers:v(0,i)}))),r.push(t)),I.apply(this,r)}}),e.exports={URLSearchParams:U,getState:A}},function(e,t,n){"use strict";var i=!1,r=window||self;try{i=!!r.localStorage.getItem("f7c9180f-5c45-47b4-8de4-428015f096c0")}catch(a){}e.exports=i},function(e,t,n){"use strict";var i=n(1055),r=n(1056),a=function(e,t){"function"===typeof t.destroy&&t.destroy(),"function"===typeof e.destroy&&e.destroy()},s=function(e){for(;e.length;)e.shift().destroy()},o=function(e){for(var t in e)e.hasOwnProperty(t)&&(s(e[t]),delete e[t])},l=function(e,t,n){var s=i(e,t.view),o=r(s,t.behavior,n);return{view:s,behavior:o,destroy:a.bind(null,s,o)}};e.exports=function(e,t,n){var i={};for(var r in t)if(t.hasOwnProperty(r)&&"object"===typeof t[r]){var a=t[r],s=t.elementClassPrefix?"."+t.elementClassPrefix+"-"+a.className:"."+a.className,c=e.querySelectorAll(s);i[r]=[];for(var u=0,d=c.length;u<d;u++)i[r].push(l(c[u],a,n))}return{components:i,destroy:o.bind(null,i)}}},function(e,t,n){"use strict";var i=n(1058),r={complete:function(e,t){},error:function(e,t){},method:"GET",headers:{},success:function(e,t,n){},timeout:5e3},a={ajax:function(e,t){t=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}({},r,t),"//"===e.substr(0,2)&&(e=window.location.protocol+e);var n=i(e);return n.open(t.method,e),n.setTransportHeaders(t.headers),n.setReadyStateChangeHandlers(t.complete,t.error,t.success),n.setTimeout(t.timeout,t.error,t.complete),n.send(t.data),n},get:function(e,t){return t.method="GET",a.ajax(e,t)},head:function(e,t){return t.method="HEAD",a.ajax(e,t)},post:function(e,t){return t.method="POST",a.ajax(e,t)}};e.exports=a},function(e,t,n){"use strict";var i=function(){};i.create=function(){var e=function(){};return e.prototype=i.prototype,new e},i.prototype.open=function(e,t){e=e.toUpperCase(),this.xhr.open(e,t)},i.prototype.send=function(e){this.xhr.send(e)},i.prototype.setTimeout=function(e,t,n){this.xhr.ontimeout=function(){t(this.xhr,this.status),n(this.xhr,this.status)}.bind(this)},i.prototype.setTransportHeaders=function(e){for(var t in e)this.xhr.setRequestHeader(t,e[t])},e.exports=i},function(e,t){var n=function(){function e(e){this.el=e}return e.prototype.setText=function(e){this.el.innerHTML=e},e}();e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n,i){return e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n),e}},function(e,t,n){"use strict";var i=n(1070);e.exports=function(e,t){var n;return n="tagName"in e?e.tagName:e===window?"window":"document",i(t,n)||t}},function(e,t){e.exports={ENTERFULLSCREEN:"enterfullscreen",EXITFULLSCREEN:"exitfullscreen"}},function(e,t){e.exports={STANDARD:"standard",IOS:"ios"}},function(e,t,n){"use strict";e.exports={SharedInstance:n(1086)}},function(e,t,n){"use strict";var i=n(432),r=n(433);function a(){var e=i.getWindow(),t=i.getDocument(),n=i.getNavigator();return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch||n.maxTouchPoints>0||n.msMaxTouchPoints>0)}e.exports=r(a),e.exports.original=a},function(e,t,n){"use strict";var i=n(434),r=n(236).EventEmitterMicro,a=32,s=37,o=38,l=39,c=40,u=function(e){r.call(this),this._player=e.player,this._target=e.keyboardTarget||this._player.el,this._keyboard=new i(this._target),this._bindMethods(),this._addEventListeners()},d=r.prototype,h=u.prototype=Object.create(d);h._bindMethods=function(){this._onLeftArrowDown=this._onLeftArrowDown.bind(this),this._onRightArrowDown=this._onRightArrowDown.bind(this),this._onUpArrowDown=this._onUpArrowDown.bind(this),this._onDownArrowDown=this._onDownArrowDown.bind(this),this._onSpaceBarUp=this._onSpaceBarUp.bind(this),this._onSpaceBarDown=this._onSpaceBarDown.bind(this),this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._boundKeyboardInteraction={},[a,s,l,o,c].forEach(function(e){this._boundKeyboardInteraction[e]=this._onKeyboardInteraction.bind(this,e)}.bind(this))},h._addEventListeners=function(){[a,s,l,o,c].forEach(function(e){this._keyboard.onDown(e,this._boundKeyboardInteraction[e])}.bind(this)),this._keyboard.onDown(a,this._onSpaceBarDown),this._keyboard.onDown(s,this._onLeftArrowDown),this._keyboard.onDown(l,this._onRightArrowDown),this._keyboard.onDown(o,this._onUpArrowDown),this._keyboard.onDown(c,this._onDownArrowDown),this._player.on("durationchange",this._onDurationChange)},h._removeEventListeners=function(){[a,s,l,o,c].forEach(function(e){this._keyboard.offDown(e,this._boundKeyboardInteraction[e])}.bind(this)),this._boundKeyboardInteraction=null,this._keyboard.offDown(a,this._onSpaceBarDown),this._keyboard.offUp(a,this._onSpaceBarUp),this._keyboard.offDown(s,this._onLeftArrowDown),this._keyboard.offDown(l,this._onRightArrowDown),this._keyboard.offDown(o,this._onUpArrowDownDown),this._keyboard.offDown(c,this._onDownArrowDown),this._player.off("durationchange",this._onDurationChange)},h._onKeyboardInteraction=function(){this._triggerKeyboardInteraction()},h._triggerKeyboardInteraction=function(){this.trigger("keyboardinteraction")},h._onDurationChange=function(){var e=this._player.getDuration();this._interval=e>=60?10:e>=20?5:1},h._onLeftArrowDown=function(e){if(!this._player.isLive()){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();var t=this._player.getCurrentTime();isNaN(t)||this._player.seek(Math.max(t-this._interval,0))}},h._onRightArrowDown=function(e){if(!this._player.isLive()){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();var t=this._player.getCurrentTime();isNaN(t)||this._player.seek(Math.min(t+this._interval,this._player.getDuration()))}},h._onUpArrowDown=function(e){if(!e.target.hasAttribute("aria-checked")){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();var t=this._player.getMuted()?0:this._player.getVolume(),n=Math.min(1,t+.1);this._player.setVolume(n),this._player.setMuted(!1)}},h._onDownArrowDown=function(e){if(!e.target.hasAttribute("aria-checked")){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();var t=this._player.getMuted()?0:this._player.getVolume(),n=Math.max(0,t-.1);this._player.setVolume(n),this._player.setMuted(0===Math.round(10*n))}},h._onSpaceBarDown=function(e){"BUTTON"!==e.target.tagName&&"button"!==e.target.getAttribute("role")&&(this._keyboard.offDown(a,this._onSpaceBarDown),this._keyboard.onUp(a,this._onSpaceBarUp))},h._onSpaceBarUp=function(){this._keyboard.offUp(a,this._onSpaceBarUp),this._player.getPaused()?this._player.play():this._player.pause(),this._keyboard.onDown(a,this._onSpaceBarDown)},h.destroy=function(){this._removeEventListeners(),this._keyboard.destroy(),d.destroy.call(this)},e.exports=u},function(e,t,n){"use strict";e.exports=function(e,t,n,i){return e.removeEventListener?e.removeEventListener(t,n,!!i):e.detachEvent("on"+t,n),e}},function(e,t,n){"use strict";var i=function(){};e.exports=function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(null===e||"object"!==typeof e)throw new TypeError("Object prototype may only be an Object.");return"function"===typeof Object.create?Object.create(e):(i.prototype=e,new i)}},function(e,t,n){var i=n(252),r=i.os.ios||i.os.android,a=n(647),s=n(648),o=n(1102);e.exports=function(e){return e.threesixty?r?new o(e):new s(e):new a(e)}},function(e,t){var n=function(){function e(e){this._player=e.player,this.el=this._player.el,this._showControls=e.showControls,this._hideControls=e.hideControls,this._raiseControls=e.raiseControls,this._lowerControls=e.lowerControls,this._sendMouseDown=e.sendMouseDown,this._controls=this._player.controls,this._controlsVisible=e.controlsVisible,this._controlsTimeoutDuration=e.controlsTimeoutDuration,this._keyboardControl=e.keyboardControl,this._lastMouseCoords={},this._elementEmitter=e.elementEmitter,this._bindMethods(),this._addEventListeners()}var t=e.prototype;return t._bindMethods=function(){this._onUserInteraction=this._onUserInteraction.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onFullscreenWillExit=this._onFullscreenWillExit.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onUserInteractionTimeout=this._onUserInteractionTimeout.bind(this)},t._addEventListeners=function(){this._controls.el.addEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.addEventListener("click",this._onClick,!0),this._player.on("fullscreen:change",this._onFullscreenChange),this._player.on("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.addEventListener("mouseleave",this._onMouseLeave):this._controls.el.addEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction),this._elementEmitter.on("focusin",this._onFocusIn),this._elementEmitter.on("focusout",this._onFocusOut)},t._removeEventListeners=function(){this._controls.el.removeEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.removeEventListener("click",this._onClick,!0),this._player.off("fullscreen:change",this._onFullscreenChange),this._player.off("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.removeEventListener("mouseleave",this._onMouseLeave):this._controls.el.removeEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.off("keyboardinteraction",this._onUserInteraction),this._elementEmitter.off("focusin",this._onFocusIn),this._elementEmitter.off("focusout",this._onFocusOut)},t._shouldIgnoreUserInteraction=function(e){return!!(e&&"focusin"!==e.type&&e.target&&this._isActiveArea(e.target))},t._onUserInteraction=function(e,t){!e||"click"!==e.type&&"focusin"!==e.type||this._player.isCaptionsSelectorShowing()&&!e.target.classList.contains("controls-text-tracks-toggle-button")&&"radio"!==e.target.getAttribute("role")&&"radiogroup"!==e.target.getAttribute("role")&&this._player.hideCaptionsSelector(),!this._player.getCurrentSrc()||this._preventUserInteraction||!t&&e&&"mousemove"===e.type&&this._lastMouseCoords.x===e.screenX&&this._lastMouseCoords.y===e.screenY||(e&&e.pageX&&(this._lastMouseCoords={x:e.screenX,y:e.screenY}),this._showControls(),this._raiseControls(),clearTimeout(this._userInteractionTimeout),this._shouldIgnoreUserInteraction(e)||(this._userInteractionTimeout=window.setTimeout(this._onUserInteractionTimeout,this._controlsTimeoutDuration)))},t._onUserInteractionTimeout=function(){this._hideControls()},t._onMouseLeave=function(e){window.clearTimeout(this._userInteractionTimeout),this._hideControls(),this._lowerControls(),this._lastMouseCoords={}},t._onMouseOut=function(e){this._controls.el.contains(e.target)||e.target===this._controls.el||this._onMouseLeave()},t._isActiveArea=function(e){for(;e!==this.el;){if(e.hasAttribute("data-acv-active-area"))return!0;e=e.parentNode}return!1},t._onClick=function(e){this._hasFocus=!1,this._onUserInteraction(e)},t._onFullscreenWillExit=function(){this.controls&&(this.controls.el.display="none")},t._onFullscreenChange=function(){var e=this;this.controls&&(this.controls.el.display=""),this._hideControls(),this._lowerControls(),this._preventUserInteraction=!0,this._fullscreenChangeTimeout=setTimeout((function(){e._preventUserInteraction=!1,e._player.refreshSize()}),750),this._player.refreshSize()},t._onFocusIn=function(e){clearTimeout(this._focusOutTimer),this._focusOutTimer=null,this._hasFocus=!0,this._onUserInteraction(e)},t._onFocusOut=function(e){var t=this;this._focusOutTimer=setTimeout((function(){t._hasFocus&&!t.el.contains(document.activeElement)&&(t._hasFocus=!1,t._hideControls(),t._lowerControls())}),100)},t.destroy=function(){clearTimeout(this._focusOutTimer),clearTimeout(this._fullscreenChangeTimeout),clearTimeout(this._userInteractionTimeout),this._removeEventListeners()},e}();e.exports=n},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._showCompass=t.showCompass,n._hideCompass=t.hideCompass,n._threesixtyElementsTimeoutDuration=t.threesixtyElementsTimeoutDuration||3e3,n._dragEndThreshold=500,n._mouseDownPosition=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._bindMethods=function(){e.prototype._bindMethods.call(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onDragging=this._onDragging.bind(this),this._onClick=this._onClick.bind(this)},a._addEventListeners=function(){e.prototype._addEventListeners.call(this),this._controls.el.addEventListener("mousedown",this._onMouseDown),this._controls.el.addEventListener("click",this._onClick)},a._removeEventListeners=function(){e.prototype._removeEventListeners.call(this),this._controls.el.removeEventListener("mousedown",this._onMouseDown)},a._onUserInteraction=function(t){this._userWasRecentlyDragging||t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||this._dragging||(this._showCompass(),clearTimeout(this._userHideMouse),e.prototype._onUserInteraction.call(this))},a._onUserInteractionTimeout=function(){var t=this;e.prototype._onUserInteractionTimeout.call(this),clearTimeout(this._userHideMouse),this._userHideMouse=setTimeout((function(){t._hideCompass()}),this._threesixtyElementsTimeoutDuration)},a._onDragging=function(e){var t=this;!this._dragging&&this._isActiveArea(e.target)||(this._dragging=!0,this._player.el.classList.add("dragging"),this._player.el.classList.add("recently-dragging"),this._recentDragTimeout=setTimeout((function(){t._dragging&&(t._hideControls(),t._userWasRecentlyDragging=!0,clearTimeout(t._dragTimer),t._dragTimer=setTimeout((function(){t._userWasRecentlyDragging=!1,t._player.el.classList.remove("recently-dragging")}),t._dragEndThreshold))}),30),clearTimeout(this._userInteractionTimeout),clearTimeout(this._userHideMouse))},a._isDraggable=function(e){return-1!==[this._player.controls.compass.el,this._player.controls.playButtonElement].indexOf(e)||this._player.controls.compass.el.contains(e)},a._onMouseDown=function(e){this._isActiveArea(e.target)&&this._controlsVisible()&&!this._isDraggable(e.target)||!this._isPlayingState()||(this._showControls(),clearTimeout(this._userHideMouse),clearTimeout(this._recentDragTimeout),this._player.el.classList.remove("dragging"),this._player.el.classList.remove("recently-dragging"),this._mouseDownPosition={x:e.x,y:e.y},window.addEventListener("mouseup",this._onMouseUp),window.addEventListener("mousemove",this._onDragging),this._sendMouseDown(e))},a._onMouseUp=function(e){window.removeEventListener("mousemove",this._onDragging),window.removeEventListener("mouseup",this._onMouseUp),this._dragging&&this._onUserInteractionTimeout(),this._player.el.contains(e.target)||this._hideCompass(),this._player.el.classList.remove("dragging"),this._dragging=!1},a._onMouseLeave=function(t){e.prototype._onMouseLeave.call(this),this._userWasRecentlyDragging=!1,this._dragging||(clearTimeout(this._userHideMouse),this._hideCompass())},a._onClick=function(e){this._player.controls.compass.el.contains(e.target)&&this._userWasRecentlyDragging&&e.stopPropagation(),e.target!==this._player.controls.playButtonElement.parentElement&&e.target!==this._controls.el.firstElementChild||null===this._mouseDownPosition||this._mouseDownPosition.x!==e.x||this._mouseDownPosition.y!==e.y||(this._mouseDownPosition=null,this._mouseDownTime=1/0,this._dragging=!1,this._userWasRecentlyDragging=!1,clearTimeout(this._dragTimer),clearTimeout(this._recentDragTimeout))},a._isPlayingState=function(){return!this._player.controls.el.classList.contains("start-state")&&!this._player.controls.el.classList.contains("end-state")},r}(n(647));e.exports=r},function(e,t,n){"use strict";e.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},function(e,t,n){"use strict";var i=n(1104),r=function(){this.focusableSelectors=i.selectors},a=r.prototype;a.isFocusableElement=function(e,t,n){return!(t&&!this._isDisplayed(e))&&(i.nodeName[e.nodeName]?!e.disabled:!e.contentEditable||(n=n||parseFloat(e.getAttribute("tabindex")),!isNaN(n)))},a.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var n=e.getAttribute("tabindex");return n=parseFloat(n),isNaN(n)?this.isFocusableElement(e,t,n):n>=0},a._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},a.getTabbableElements=function(e,t){for(var n=e.querySelectorAll(this.focusableSelectors),i=n.length,r=[],a=0;a<i;a++)this.isTabbableElement(n[a],t)&&r.push(n[a]);return r},a.getFocusableElements=function(e,t){for(var n=e.querySelectorAll(this.focusableSelectors),i=n.length,r=[],a=0;a<i;a++)this.isFocusableElement(n[a],t)&&r.push(n[a]);return r},e.exports=new r},function(e,t,n){"use strict";e.exports=n(1107)},function(e,t,n){"use strict";var i=n(653),r=n(654),a=n(1109),s=n(636),o=n(1110),l=n(1112),c=n(1122),u=n(1123),d=n(1124),h=n(1125),p=n(1126),f=n(1127),g=n(1128),m=n(1129),_=n(1132),v=n(1133),b=n(1134),y=n(1192),w=n(1193),I=n(1194),S=n(1195),C=n(1196);e.exports={back30Seconds:{className:"back-30-seconds-button",view:{classDef:i}},gotoLive:{className:"progress-dvr-label-container",view:{classDef:a,options:{states:{initial:"not-live",on:"live",off:"not-live"},labels:{initial:"livestream",on:"livestream",off:"livestream"}}},behavior:{classDef:w}},fullScreen:{className:"full-screen-button",view:{classDef:a,options:{states:{initial:"fullscreen-unsupported",on:"is-fullscreen",off:""},labels:{initial:"fullscreen",on:"exitfullscreen",off:"fullscreen"}}},behavior:{classDef:g}},toggleMuteVolume:{className:"toggle-mute-volume-button",view:{classDef:a,options:{states:{initial:[],on:["is-muted"],off:[]}}},behavior:{classDef:u}},playPauseContainer:{className:"play-pause-button-container",view:{classDef:r,options:{states:{playing:["is-playing"],paused:[],ended:["is-ended"]}}},behavior:{classDef:d}},pictureInPictureToggle:{className:"picture-in-picture-button",view:{classDef:a,options:{states:{initial:["picture-in-picture-unsupported"],on:["is-picture-in-picture"],off:[]},labels:{initial:"pictureinpicture",on:"exitpictureinpicture",off:"pictureinpicture"}}},behavior:{classDef:h}},captionsToggle:{className:"text-tracks-toggle-button",view:{classDef:a,options:{states:{initial:["no-text-tracks"],on:["text-tracks-visible"],off:[]}}},behavior:{classDef:p}},captionsSelector:{className:"captions-selector",view:{classDef:o},behavior:{classDef:f}},airplayToggle:{className:"airplay-button",view:{classDef:a,options:{states:{initial:["airplay-unsupported"],on:["airplay-active"],off:[]}}},behavior:{classDef:y}},elapsedTimeIndicator:{className:"elapsed-time",view:{classDef:s}},remainingTimeIndicator:{className:"remaining-time",view:{classDef:s}},progressBar:{className:"progress-indicator",view:{classDef:l,options:{template:S,min:0,max:1,mixins:[I],orientation:"horizontal"}},behavior:{classDef:m}},volumeLevel:{className:"volume-level-indicator",view:{classDef:l,options:{template:C,min:0,max:100,mixins:[I],orientation:"vertical"}},behavior:{classDef:_}},sharing:{className:"sharing-button",view:{classDef:r,options:{states:{initial:["sharing-unsupported"],on:["is-sharing"],off:[]}}},behavior:{classDef:v}},socialShare:{className:"social-tray",view:{classDef:c,options:{}},behavior:{classDef:b}}}},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){return e.call(this,t)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r}(n(375));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._states=n.states||{},i._labels=n.labels,i._focusTarget=i.el.querySelector("button")||i.el,i._states&&i._states.initial&&i.setState("initial"),i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r.prototype.setState=function(e){this._currentState&&this._currentState!==e&&this._states[this._currentState].length&&this.el.classList.remove(this._states[this._currentState]),this._currentState=e,this._labels&&this._labels[this._currentState]&&(this._focusTarget.value=this._labels[this._currentState],this._focusTarget.setAttribute("aria-label",this._labels[this._currentState])),this._states[e].length&&this.el.classList.add(this._states[e])},r}(n(653));e.exports=r},function(e,t,n){"use strict";var i=n(377),r=n(520);e.exports=function(e,t){var n;if(t){var a=r(),s=e.getBoundingClientRect();n={top:s.top+a.y,right:s.right+a.x,bottom:s.bottom+a.y,left:s.left+a.x}}else{var o=i(e);for(n={top:e.offsetTop,right:o.width,bottom:o.height,left:e.offsetLeft};e=e.offsetParent;)n.top+=e.offsetTop,n.left+=e.offsetLeft;n.right+=n.left,n.bottom+=n.top}var l=document.documentElement.offsetTop,c=document.documentElement.offsetLeft;return{top:n.top+l,right:n.right+c,bottom:n.bottom+l,left:n.left+c}}},function(e,t,n){"use strict";var i=n(377),r=n(657);e.exports=function(e,t){var n=r(e,t),a=i(e,t);return{x:n.x/a.width,y:n.y/a.height}}},function(e,t,n){"use strict";var i=n(658);e.exports=function(e,t){var n=window.innerWidth,r=window.innerHeight,a=i(e,t),s={x:a.right-a.left,y:a.bottom-a.top};return a.top<0&&(s.y+=a.top),a.bottom>r&&(s.y-=a.bottom-r),a.left<0&&(s.x+=a.left),a.right>n&&(s.x-=a.right-n),s.x=s.x<0?0:s.x,s.y=s.y<0?0:s.y,s}},function(e,t,n){"use strict";var i=n(655),r=n(520);e.exports=function(e,t){var n;if(t)return{top:(n=e.getBoundingClientRect()).top,right:n.right,bottom:n.bottom,left:n.left};n=i(e);var a=r();return{top:n.top-a.y,right:n.right-a.x,bottom:n.bottom-a.y,left:n.left-a.x}}},function(e,t){e.exports=function(e){var t=new Set;return e.filter((function(e){return!(t.has(e.label)||"subtitles"!==e.kind&&"captions"!==e.kind&&e.kind)&&(t.add(e.label),!0)}))}},function(e,t){t.arrayToObject=function(e){for(var t={},n=0,i=e.length;n<i;++n)"undefined"!==typeof e[n]&&(t[n]=e[n]);return t},t.merge=function(e,n){if(!n)return e;if("object"!==typeof n)return Array.isArray(e)?e.push(n):e[n]=!0,e;if("object"!==typeof e)return[e].concat(n);Array.isArray(e)&&!Array.isArray(n)&&(e=t.arrayToObject(e));for(var i=Object.keys(n),r=0,a=i.length;r<a;++r){var s=i[r],o=n[s];e[s]?e[s]=t.merge(e[s],o):e[s]=o}return e},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.compact=function(e,n){if("object"!==typeof e||null===e)return e;var i=(n=n||[]).indexOf(e);if(-1!==i)return n[i];if(n.push(e),Array.isArray(e)){for(var r=[],a=0,s=e.length;a<s;++a)"undefined"!==typeof e[a]&&r.push(e[a]);return r}var o=Object.keys(e);for(a=0,s=o.length;a<s;++a){var l=o[a];e[l]=t.compact(e[l],n)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";n(1163);var i=Object.prototype.hasOwnProperty;e.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach((function(e){if(null!=e)for(var n in e)i.call(e,n)&&(t[n]=e[n])})),t}},function(e,t){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=t||0,i=0;if(n<0&&(n=this.length+t-1)<0)throw"Wrapped past beginning of array while looking up a negative start index.";for(i=0;i<this.length;i++)if(this[i]===e)return i;return-1})},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.nodeType)}},function(e,t,n){"use strict";e.exports=8},function(e,t,n){"use strict";e.exports=3},function(e,t,n){"use strict";var i=n(338),r=n(517),a=n(339),s=n(633),o=n(340)(),l=n(1197),c=n(1202),u=n(1205),d=n(1206),h=n(1207),p=n(1210),f=function(e){this._initialize(e)},g=f.prototype;g._initialize=function(e){this.el=e.element||document.createElement("div"),this._basePath=e.basePath,this._forceEnglishLabels=e.forceEnglishLabels,this.el.style.display="none",this._template=e.template||p,this._templateData=e.templateData||Object.assign({elementClassPrefix:"controls"}),this._destroyed=!1,this._localize().then(function(){this._destroyed||(this._initUIComponents(e),this.el.style.display=""),"function"===typeof e.readyCallback&&e.readyCallback()}.bind(this))},g._localize=function(){return new Promise(function(e){a.getTranslation({callback:function(t){e(t)}.bind(this),basePath:this._basePath,forceEnglishLabels:this._forceEnglishLabels})}.bind(this)).then(function(e){this._templateData=Object.assign(this._templateData,e)}.bind(this))},g._renderTemplateMarkup=function(){var e=i(this._template,this._templateData);this.el.innerHTML=e},g._initDesktopControls=function(e,t){this._componentCollection=s(e,h(t,{elementClassPrefix:this._templateData.elementClassPrefix,elapsedTimeIndicator:{behavior:{observe:{source:this._player,events:["loadstart","timeupdate","seeking","seeked","durationchange"],update:function(e){if(this._player.isDvr()){var t=this._player.getCurrentTime();e.setText(isNaN(t)?"0:00:00":r.formatTime(t,1/0,2))}else e.setText(r.formatTime(this._player.getCurrentTime(),this._player.getDuration()))}.bind(this)}}},remainingTimeIndicator:{behavior:{observe:{source:this._player,events:["timeupdate","seeking","seeked","durationchange"],update:function(e){e.setText(r.formatTime(this._player.getCurrentTime()-this._player.getDuration(),this._player.getDuration()))}.bind(this)}}},volumeLevel:{view:{options:{value:this._player.getMuted()?0:100*this._player.getVolume()}}},playPauseContainer:{view:{options:{labels:{playing:this._templateData.pause,paused:this._templateData.play,ended:this._templateData.replay}}}},fullScreen:{view:{options:{labels:{initial:this._templateData.fullscreen,on:this._templateData.exitfullscreen,off:this._templateData.fullscreen}}}},pictureInPictureToggle:{view:{options:{labels:{initial:this._templateData.pictureinpicture,on:this._templateData.exitpictureinpicture,off:this._templateData.pictureinpicture}}}}}),{player:this._player,localization:this._templateData})},g._initUIComponents=function(e){this._player=e.player;var t=this.el,n=e.components;t.classList.add(e.className||"ac-video-controls"),this._renderTemplateMarkup();var i=t.querySelector(".main-controls-container");i&&(e.enableMainControls?(i.classList.add("control-bar-skin-default"),this.mainControlsElement=i):i.parentElement.removeChild(i));var r=t.querySelector(".end-state-container");r&&(this.endState=new c(Object.assign({},{el:r,player:this._player},e.endState))),e.threesixty&&(this.compass=new u({rootElement:t,player:this._player})),this._initDesktopControls(t,n);var a=this._componentCollection.components.socialShare;this.sharingModule=a&&a.length?a[0].behavior.sharingModule:null,this._componentCollection.components.progressBar.length&&(this.scrubberView=this._componentCollection.components.progressBar[0].view),this.playButtonElement=this.el.querySelector(".controls-play-pause-button"),o&&e.enableMainControls&&(this.overlays=new l({el:this.el.querySelector(".ac-video-overlay-container"),player:this._player})),this._loadingIndicator=new d({player:this._player,el:this.el.querySelector(".loading-indicator-container")})},g.destroy=function(){this._componentCollection&&(this._componentCollection.destroy(),this._componentCollection=null),this._loadingIndicator&&(this._loadingIndicator.destroy(),this._loadingIndicator=null),this.overlays&&this.overlays.destroy(),this._destroyed=!0,this._player=null,this._templateData=null},e.exports=f},function(e,t,n){"use strict";e.exports=d;var i,r=n(308),a=r.LongBits,s=r.base64,o=r.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new i})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,a.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=a.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=a.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=a.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var _=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){i=e,d.create=h(),i._configure()}},function(e,t,n){"use strict";e.exports=l;var i,r=n(308),a=r.LongBits,s=r.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new i(e):c(e)})(e)}:c};function d(){var e=new a(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw o(this,8);return new a(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e,l.create=u(),i._configure();var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ObjectStore",(function(){return d}));var i=n(40),r=n(55),a=n(448),s=n(143),o=n(316),l=n(13),c=n(324),u=n(755),d=i.a.extend({staticMembers:{Support:{isCacheableInStore:!0,isActiveOutsideStore:!1,ownerObjectStore:null,_objectStore_retainCount:0,retain:function(){var e=this,t=arguments,n=e.__s._$LQ$retain.apply(e,t);return this._retainInStore(),n},release:function(){var e=this,t=arguments,n=this._releaseInStore(),i=e.__s._$Nx$release.apply(e,t);return n&&!this.ownerObjectStore&&delete this.ownerObjectStore,i},_retainInStore:function(){if(1===this._objectStore_retainCount++){this.isActiveOutsideStore||(this.isActiveOutsideStore=!0);var e=this.ownerObjectStore;e&&e._handleInitialExternalRetainOfItem(this)}},_releaseInStore:function(){var e=--this._objectStore_retainCount;if(1!==e)return 0===e;var t=this.ownerObjectStore;return t&&(this.isActiveOutsideStore&&(this.isActiveOutsideStore=!1),t._handleFullExternalReleaseOfItem(this)),0===e},_cleanUpObjectStoreSupport:function(){this.isActiveOutsideStore&&(this.isActiveOutsideStore=!1)},cleanup:function(){var e=this,t=arguments;this._cleanUpObjectStoreSupport(),e.__s._$uj$cleanup.apply(e,t)},__superMap:{_$LQ$retain:"retain",_$Nx$release:"release",_$uj$cleanup:"cleanup"}},__QUALIFIED_CLASS_NAME__:"ObjectStore"},maxCachedItemCount:500,itemClass:null,items:null,cachedItems:null,_storeMap:r.c(Object),computeStoreKey:function(){return a.a(arguments)},init:function(e){var t=this,n=arguments,i=s.b(this);this._storeKeyKey="_"+i+"_storeKey",this.items=new c.a,this.cachedItems=new u.a,o.a(e)?(this.itemClass=e,t.__s._$2Wi$init.call(t)):t.__s._$2Wi$init.apply(t,n),this._ownItemClass=this.itemClass.extend(this.constructor.Support,{ownerObjectStore:this})},peekItem:function(){return this._peekItem(this.computeStoreKey.apply(this,arguments))},_peekItem:function(e){return this._storeMap[e]||null},getItem:function(){var e=this.computeStoreKey.apply(this,arguments),t=this._peekItem(e);if(t)return t;var n=this._ownItemClass;return(t=n.create.apply(n,arguments))[this._storeKeyKey]=e,this.items.add(t),this._storeMap[e]=t,t._objectStore_retainCount||(this.cachedItems.unshift(t),this.itemDidEnterCache(t)),t.retain(this,"Ownership by ObjectStore"),t},purgeItem:function(e){this.cachedItems.contains(e)||l.b("Cannot purge item that is not cached.");var t=e[this._storeKeyKey];e[this._storeKeyKey]=void 0,delete this._storeMap[t],this.items.remove(e),this.cachedItems.remove(e),this.itemDidLeaveCache(e),e.release(this,"Ownership by ObjectStore")},disownItem:function(e){if(e.willBeDisownedByStore&&e.willBeDisownedByStore(),e.ownerObjectStore=null,this.cachedItems.contains(e))this.purgeItem(e);else{var t=e[this._storeKeyKey];e[this._storeKeyKey]=void 0,delete this._storeMap[t],this.items.remove(e),e.release(this,"Ownership by ObjectStore")}},_handleInitialExternalRetainOfItem:function(e){this.cachedItems.remove(e),this.itemDidLeaveCache(e)},_handleFullExternalReleaseOfItem:function(e){this.cachedItems.unshift(e),this.itemDidEnterCache(e),e.isCacheableInStore?this.pruneCache():this.purgeItem(e)},itemDidEnterCache:function(e){},itemDidLeaveCache:function(e){},pruneCache:function(){if(!this._isPruningCache){for(this._isPruningCache=!0;this.cachedItems.length&&!this.isCacheSizeAcceptable();)this.purgeItem(this.getLeastValuableCachedItem());this._isPruningCache=!1}},isCacheSizeAcceptable:function(){return this.cachedItems.length<=this.maxCachedItemCount},getLeastValuableCachedItem:function(){return this.cachedItems.lastItem},__superMap:{_$2Wi$init:"init"}})},function(e,t,n){"use strict";function i(){if(!(window.setImmediate instanceof Function&&window.clearImmediate instanceof Function)){var e=!1,t=1,n=1,i=[],r=[],a=window.location.origin,s=[],o=function(e){e.length=0,s.push(e)};window.setImmediate=function(o){var l=t++,c=l-n;i[c]=o;var u=arguments.length;if(u>1){for(var d=s.pop()||[],h=1;h<u;h++)d[h-1]=arguments[h];r[c]=d}return e||(e=!0,window.postMessage(void 0,a)),l},window.clearImmediate=function(e){var t=e-n;i[t]=void 0;var a=r[t];a&&(r[t]=void 0,o(a))},window.addEventListener("message",(function(){var t;e=!1;var a=i.length;if(a){for(t=0;t<a;t++){var s=i[t];if(s){var l=r[t];l?(s.apply(this,l),o(l)):s()}}var c=a;for(a=i.length,t=c;t<a;t++){var u=t-c;i[u]=i[t],r[u]=r[t],i[t]=void 0,r[t]=void 0}i.length=r.length=a-c,n+=c}}),!0)}}n.r(t),n.d(t,"default",(function(){return i})),i()},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 32"><polyline fill="none" stroke-width="3" points="17.5,31 2.5,16 17.5,1 "/></svg>\n'},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var i=n(345),r=n(99),a=n(473),s=n(389),o={mixinDependencies:[s.a],gestureRecognizerShouldActivateButton:function(e,t){var n=e.view.element,i=t.target;return n===i||n.contains(i)}},l=r.b.Began,c=r.b.Changed,u=i.b.extend({stateGenerator:a.a,delegate:Object.assign({},s.a,o),willGestureSucceed:!1,shouldAllowMovementOutsideTarget:!1,pointerDown:function(e){var t=this,n=arguments;this.willGestureSucceed=this._willGestureSucceed(e),t.__s._$hi$pointerDown.apply(t,n),this.state=l},pointerMove:function(e){var t=this,n=arguments;this.willGestureSucceed=this._willGestureSucceed(e),t.__s._$lJ$pointerMove.apply(t,n);var i=this.state;i!==l&&i!==c||(this.state=c)},pointerUp:function(e){var t=this,n=arguments;this.willGestureSucceed=this._willGestureSucceed(e),t.__s._$tC$pointerUp.apply(t,n)},_willGestureSucceed:function(e){return this.delegate.gestureRecognizerShouldActivateButton(this,e)},shouldFailGesture:function(e){var t=this,n=arguments;return this.shouldAllowMovementOutsideTarget&&1===this.numberOfTapsRequired?"pointerUp"===e.cwType&&!this._willGestureSucceed(e):t.__s._$_C$shouldFailGesture.apply(t,n)},reset:function(){this.willGestureSucceed=!1,this.__s._$10T$reset.call(this)},didEnterPool:function(){var e=this,t=arguments;this.shouldAllowMovementOutsideTarget=!1,e.__s._$126$didEnterPool.apply(e,t)},__superMap:{_$hi$pointerDown:"pointerDown",_$lJ$pointerMove:"pointerMove",_$tC$pointerUp:"pointerUp",_$_C$shouldFailGesture:"shouldFailGesture",_$10T$reset:"reset",_$126$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ButtonTapGestureRecognizer"}})},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[107]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[99]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[106]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[105]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[98]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[78]}).call(this,n(172))},function(e,t,n){"use strict";n.r(t),n(1),n(0),n(3),n(5),n(2),n(116),n.d(t,"EmailExtension",(function(){return m}));var i=n(93),r=n(788),a=n(117),s=n(15),o=n(7),l=n(20),c=n(139),u=n(55),d=n(130),h=n(221),p=n(588),f=n(587),g=n(270),m=f.a.extend({staticMembers:{vendorName:"Email",buttonClassName:"vendor-sharing-email-button",displayName:a.d("Share.DisplayNames.Email"),shareDataValidator:p.a,isEnabledForUser:s.d({get:function(){return!(!i.a.currentUser||!i.a.currentUser.isServiceActive("mail"))}}),notEnabledForUserString:a.d("Share.Validation.MailNotEnabled"),__QUALIFIED_CLASS_NAME__:"EmailExtension"},composeWindowIsOpen:o.b(!1),_hasAttachedUrls:s.d(!1),_showErrorDialogIfWeGiveUpTryingToSubmit:l.h("isShareDataSubmittable",(function(e){this._geoStripTimeout||e||(this._geoStripTimeout=c.a(Object(g.a)((function(){this&&!this._hasAttachedUrls&&(this._hasAttachedUrls=!0,this.showErrorAlertDialogWithStat({message:a.d("Email.Cannot.Share.Message"),description:a.d("Email.Cannot.Share.Description")}),c.a(Object(g.a)(this.terminate,this),500))}),this),2500))})),init:function(){var e=this,t=arguments;e.__s._$jY$init.apply(e,t),this.composeEmailController.openWindow(),this.composeWindowIsOpen=!0},composeEmailController:u.c(r.a.extend({body:s.d("<br><br>")})),shareDataDidChange:l.h("composeWindowIsOpen","isShareDataSubmittable","state",(function(){this.composeWindowIsOpen&&this.isShareDataSubmittable&&this.state===this.constructor.READY&&!this._hasAttachedUrls&&(this._hasAttachedUrls=!0,this.submit())})),submit:function(){var e=this,t=arguments;d.b.debug("Email Extension submitting data to compose window"),e.__s._$1Em$submit.apply(e,t),h.a(this._populateComposeWindow).call(this),c.a(Object(g.a)(this._didPopulateComposeWindow,this),500)},_populateComposeWindow:function(){var e,t,n,i=this.composeEmailController,r=this.shareData,a=[];r.images&&(t=r.images.map((function(e){return Object(p.b)(e,"images")})),a.push.apply(a,t)),r.videos&&(n=r.videos.map((function(e){return Object(p.b)(e,"videos")})),a.push.apply(a,n)),e=a.map((function(e){return e?{fileName:e.fileName,url:e.url,type:e.mimeType,size:e.fileSize}:null})).filter((function(e){return!!e})),i.addAttachments(e),i.populateFields()},_didPopulateComposeWindow:function(){this.state=this.constructor.FINISHED,this.terminate()},terminate:function(){var e=this,t=arguments;e.__s._$1eB$terminate.apply(e,t),clearTimeout(this._geoStripTimeout),this.state!==this.constructor.FINISHED&&(this.composeEmailController.closeWindow(),this.composeWindowIsOpen=!1)},__superMap:{_$jY$init:"init",_$1Em$submit:"submit",_$1eB$terminate:"terminate"}})},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[79]}).call(this,n(172))},function(e,t,n){"use strict";n.r(t),n.d(t,"AdornmentProperty",(function(){return o})),n.d(t,"adornmentProperty",(function(){return l}));var i=n(7),r=n(13),a=n(20),s=n(792),o=i.a.extend({appliesImmediately:!1,strong:!0,requiresSupport:s.a,adornmentClass:void 0,init:function(e){var t=!e||e.isClass?{adornmentClass:e}:e;this.__s._$Qn$init.call(this,t),this.readOnly&&r.b("PhotoItemViewAdornmentProperty cannot be read-only.")},wasRegistered:function(e,t){var n=this,i=arguments;n.__s._$UY$wasRegistered.apply(n,i);var s=this.adornmentClass;if(s){var o=s.existenceDependenciesOnHost;o&&o.length&&e.registerMetadata("_existenceDependencyListener_for_"+t,a.g({inputs:o,callback:function(){this._reevaluateAdornmentExistenceNeed(t)}}));for(var l,c=[].concat(s.prototype.requiresHostMixins,s.requiresHostMixins),u=0;l=c[u];u++)e.hasMixin(l)||r.b("Adornment host lacks required mixin.",{adornmentClass:s,mixin:l})}},didChange:function(){},__superMap:{_$Qn$init:"init",_$UY$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AdornmentProperty"}}),l=o.define.bind(o)},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__145.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__134.svg"},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000" viewBox="0 0 19 15">\n    <polyline points="18.012908935546875,2 6.54241943359375,12.891815185546875 2,8.348480224609375"/>\n</svg>\n'},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[80]}).call(this,n(172))},function(e,t,n){"use strict";n.r(t),n.d(t,"imageDerivativeStore",(function(){return C})),n(1),n(0),n(2);var i=n(20),r=n(143),a=n(15),s=n(55),o=n(321),l=n(161),c=n(669),u=n(25),d=n(203),h=n(7),p=n(13),f=(n(193),n(139),n(238),n(402)),g=n(266),m=(n(327),n(356)),_=n(485),v=n(817),b=[],y=_.a.extend({isLoaded:h.b({readOnly:!0,dependencies:["element"],get:Object.assign((function(){return Boolean(this.element)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),element:h.b(),imageBitmap:null,drawableEntity:a.d({readOnly:!0,get:function(){return this.imageBitmap||this.element}}),drawIntoContext:function(e,t,n,i,r,a,s,o,l){return this.drawIntoContextUsingCustomDrawImage(e,w,t,n,i,r,a,s,o,l,arguments.length+1)},drawIntoContextUsingCustomDrawImage:function(e,t,n,i,r,a,s,o,l,c,u){var d=this.rectInElement;d||p.b("Attempting to draw an ImageDerivative that is not ready.");var h=d.width,f=d.height,g=(u||arguments.length)-1;return g<9&&(s=n,o=i,l=r||h,c=a||f,n=0,i=0,r=h,a=f),n+=d.x,i+=d.y,t(e,this.drawableEntity,n,i,r,a,s,o,l,c)},rectInElement:h.b({readOnly:!0,dependencies:["element"],get:Object.assign((function(){var e=this.element;if(!e)return null;var t=this._reusableRect||(this._reusableRect={});return t.x=t.y=0,t.width=e.naturalWidth||e.width,t.height=e.naturalHeight||e.height,t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a=this._reusableRect||(this._reusableRect={});return a.x=a.y=0,a.width=r.naturalWidth||r.width,a.height=r.naturalHeight||r.height,a}})}),toCanvas:function(){if(this.isLoaded){var e=u.canvasPool.getInstance();return e.width=this.physicalWidth,e.height=this.physicalHeight,this.drawIntoContext(e.getContext("2d"),0,0),e}},toAppendableImagelike:function(){if(this.isLoaded){var e=this.cssCanvasContextID;if(!e)return this.toCanvas();var t=u.divPool.getInstance();t.width=this.physicalWidth,t.height=this.physicalHeight;var n=t.style;return n.backgroundSize="cover",n.backgroundRepeat="none",n.pointerEvents="none",n.backgroundImage="-webkit-canvas("+e+")",t}},cssCanvasContextID:a.d({get:function(){var e=this._cssCanvasContextId;if(e)return e;e="cssCanvasContext_for_"+r.b(this);var t=document.getCSSCanvasContext&&document.getCSSCanvasContext("2d",e,this.physicalWidth,this.physicalHeight);return t?(this.drawIntoContext(t,0,0),this._cssCanvasContext=t,this._cssCanvasContextId=e,e):void 0},set:function(e){void 0!==e&&p.b("To clear the CSS Canvas Context, assign `undefined` to it.");var t=this._cssCanvasContext;t&&(t.canvas.width=t.canvas.height=0),this._cssCanvasContext=this._cssCanvasContextId=void 0}}),checkOutAppendableImagelike:function(e){if(this.isLoaded){var t=this.canCheckOutInternalImage,n=t?this.element:this.toAppendableImagelike();return this.markImageAsCheckedOut(n),t&&(this.internalImageUser=e||!0),n}},internalImageUser:h.b(),canCheckOutInternalImage:h.b({readOnly:!0,dependencies:["element","rectInElement","internalImageUser"],get:Object.assign((function(){if(this.internalImageUser)return!1;var e=this.element,t=this.rectInElement;return(e.naturalWidth||e.width)===t.width&&(e.naturalHeight||e.height)===t.height}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n]))return!1;var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return(r.naturalWidth||r.width)===a.width&&(r.naturalHeight||r.height)===a.height}})}),markImageAsCheckedOut:function(e){e.checkedOutFromImageDerivative||(e._id_retainCount=0,e.checkedOutFromImageDerivative=this,e.retain=this._retainCheckedOutImage,e.release=this._releaseCheckedOutImage,e.autorelease=this._autoreleaseCheckedOutImage)},_unmarkImageAsCheckedOut:function(e){delete e.checkedOutFromImageDerivative,delete e._id_retainCount,delete e.retain,delete e.release,delete e.autorelease},_retainCheckedOutImage:function(){return this._id_retainCount++,this},_releaseCheckedOutImage:function(){return--this._id_retainCount||this.checkedOutFromImageDerivative._handleFinalReleaseOfCheckedOutImage(this),this},_autoreleaseCheckedOutImage:function(){return f.b(g.a(this.release,this)),this},_handleFinalReleaseOfCheckedOutImage:function(e){this._unmarkImageAsCheckedOut(e),this.isDisposed||e!==this.element||(this.internalImageUser=null),this._giveElementBackToAppropriatePoolIfUnused(e)},_giveElementBackToAppropriatePoolIfUnused:function(e){if(!e.checkedOutFromImageDerivative&&(this.isDisposed||e!==this.element)){e instanceof HTMLDivElement&&(delete e.width,delete e.height,e.style.cssText="");var t=u.Pool.getInstanceInfo(e);t&&t.ownerPool.disposeInstance(e)}},cleanup:function(){var e=this,t=arguments,n=this.element;n&&(this.element=null,this._giveElementBackToAppropriatePoolIfUnused(n)),this.internalImageUser=null;var i=this.imageBitmap;i&&(this.imageBitmap=null,i.close()),this.cssCanvasContextID=void 0,e.__s._$3Mw$cleanup.apply(e,t)},resetForChangeset:function(){var e=this,t=arguments;v.a.cancelAllRefsForDerivativeId(this.derivativeId),e.__s._$3Pi$resetForChangeset.apply(e,t)},createResampledDerivative:function(e,t,i){if(this.isLoaded){var r=e/this.physicalGeometricLength;if(!t&&r>=1)return null;var a=u.canvasPool.getInstance(),s=Math.round(this.physicalWidth*r),o=Math.round(this.physicalHeight*r);(t||I).call(this,a,s,o);var l=this.media.constructor,c=l.synthesizeDerivativeInfo(this,a.width,a.height,i),d=n(686).imageDerivativeStore.getItem(c,l).retain(this);return d.element=a,d.release(this),d}},_load:function(e){return v.a.makeRequestForDerivative(this,e)},_debug_display:function(e,t,n){},__superMap:{_$3Mw$cleanup:"cleanup",_$3Pi$resetForChangeset:"resetForChangeset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivative"}}),w=function(e){var t=0,n=1,i=arguments.length;b.length=i+t-n;for(var r=n,a=t;r<i;r++,a++)b[a]=arguments[r];var s=b;return e.drawImage.apply(e,s)},I=function(e,t,n){e.width=t,e.height=n,this.drawIntoContextUsingCustomDrawImage(e.getContext("2d"),m.b,0,0,t,n)},S=n(197),C=c.ObjectStore.extend(i.b,{init:function(){var e=this,t=arguments;e.__s._$4T$init.apply(e,t),u.canvasPool.canvasMemoryReductionTasks.push(this._reduceFootprint)},itemClass:y.extend({_currentPixelCountContribution:0,_pixelCountDidChange:i.h("rectInElement",(function(e){if(this.isInitialized){var t=e&&e.width*e.height|0;this.ownerObjectStore._livingPixelCount+=t-this._currentPixelCountContribution,this._currentPixelCountContribution=t,this.ownerObjectStore.pruneCache()}}))}),computeStoreKey:function(e,t){return e.derivativeId+r.b(t)},_livingPixelCount:0,externalPixelCount:0,isCacheSizeAcceptable:function(){return!!S.a.enableDerivativeCache&&this._livingPixelCount<=this._maxPixelCount-this.externalPixelCount},pruneCache:function(){var e=this,t=arguments;e.__s._$l1$pruneCache.apply(e,t),this._pc_lastLPC<(this._pc_lastLPC=this._livingPixelCount)&&this.cacheSizeIncreased()},cacheSizeIncreased:i.i(),_unadjustedMaxPixelCount:a.d({defaultValue:1e6*S.a.maxStoredMegapixels,set:function(e){return this.__unadjustedMaxPixelCount=e,this.isInitialized&&this.pruneCache(),e}}),_maxPixelCount:a.d({get:function(){return this._unadjustedMaxPixelCount*this._footprintReductionFactor}}),_cacheBleeder:s.c(o.a.extend({delay:1e3,timesToFire:1/0,_beginCacheBleed:i.h("appDidBecomeSuspended","windowDidBlur",(function(e,t){!e&&!t||this.isRunning||(this._targetPixelCount=1e6*S.a.maxStoredMegapixelsInBackground,this._currentAmountOverTarget=this.owner._unadjustedMaxPixelCount-this._targetPixelCount,this.start())})),_reinstateCacheLimit:i.h("appDidBecomeActive","windowDidFocus",(function(e,t){(e||t)&&(this.stop(),this.owner._unadjustedMaxPixelCount=1e6*S.a.maxStoredMegapixels)})),callAction:function(){this._currentAmountOverTarget/=Math.pow(2,this.delay/S.a.maxStoredMegapixelsHalfLife),this._currentAmountOverTarget-=1e6*S.a.maxStoredMegapixelsLinearBleed;var e=this._targetPixelCount+this._currentAmountOverTarget;e<this._targetPixelCount&&(e=this._targetPixelCount,this.stop()),this.owner._unadjustedMaxPixelCount=e},appDidBecomeSuspended:i.i(),appDidBecomeActive:i.i(),windowDidBlur:i.i(),windowDidFocus:i.i(),init:function(){var e=this,t=arguments;e.__s._$1fs$init.apply(e,t),l.a(window,"blur",this.windowDidBlur.bind(this)),l.a(window,"focus",this.windowDidFocus.bind(this))},__superMap:{_$1fs$init:"init"}})),_reduceFootprint:d.b((function(){this._footprintReductionFactor/=2,this.pruneCache()})),_footprintReductionFactor:1,_debug_statsString:function(){var e,t=this.items,n=this.cachedItems,i=this._maxPixelCount,r=this.externalPixelCount,a=function(e){return e?e.toArray().reduce((function(e,t){return e+t.physicalWidth*t.physicalHeight}),0):0},s=function(e){return e?e.length:0},o=function(e){return(e/1e4|0)/100+" MP"};return"Total Derivative Storage: "+s(t)+" derivative"+(1===s(t)?"":"s")+(r?", plus externals":"")+".\nTotal Pixel Area: "+o(a(t)+r)+".\n    Retained: "+(s(t)-s(n))+" derivative"+(1===s(t)?"":"s")+" ("+o(a(t)-a(n))+").\n    Purgeable: "+s(e=n)+" derivative"+(1===s(t)?"":"s")+" ("+o(a(e))+").\n    External: ? derivatives ("+o(r)+").\nCache limit: "+o(i)+".\n"},_debug_showAllDerivatives:function(){},_debug_showAllCachedDerivatives:function(){},__superMap:{_$4T$init:"init",_$l1$pruneCache:"pruneCache"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivativeStore"}}).create()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),r={staticMembers:{init:function(e){return this.isAbstract&&!this.hasOwnProperty("isAbstract")&&(this.isAbstract=!1),this.__s._$EA$init.call(this,e)},isAbstract:!0,__superMap:{_$EA$init:"init"}},init:function(e){this.constructor.isAbstract?Object(i.b)("this class cannot be instantiated because it is abstract"):this.__s._$Ke$init.call(this,e)},__superMap:{_$Ke$init:"init"}}},function(e,t,n){"use strict";function i(e,t,n){if(e)return e[t]=n,e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(64),r=n(17),a=n(538).a.extend({debugType:"ReadOnly Strong",nodeWillFree:function(e,t){var n=r.a.getDataForNode(t);Object(i.e)(n,e,"Observable strong ref for `"+this.key+"` (read-only default value)")},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamReadOnlyStrongNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(64),r=n(17),a=n(253).b.extend({debugType:"Strong",init:function(e){var t=this,n=arguments;t.__s._$9V$init.apply(t,n);var i=this.key;this._stateArrayReferenceDescriptor="Observable strong ref for `"+i+"` (upstream state preprocessing storage)",this._ownValueReferenceDescriptor="Observable strong ref for `"+i+"` (upstream own-value storage)"},_manageForWasDirtiedByParent:function(e,t){Object(i.e)(e,t,this._stateArrayReferenceDescriptor)},_manageForWasDirtiedBySelf:function(e,t,n){var r=this._stateArrayReferenceDescriptor;Object(i.f)(e,n,r),Object(i.e)(t,n,r)},_manageForCalculateValueForNode:function(e,t,n){Object(i.f)(e,n,this._ownValueReferenceDescriptor),Object(i.e)(t,n,this._stateArrayReferenceDescriptor)},previousValueWasReplaced:function(e,t,n){Object(i.e)(n,e,this._ownValueReferenceDescriptor)},nodeWillFree:function(e,t){var n=r.a.getStateDataForNode(t),a=r.a.getDataForNode(t);Object(i.e)(n,e,this._stateArrayReferenceDescriptor),Object(i.e)(a,e,this._ownValueReferenceDescriptor)},_stateArrayReferenceDescriptor:void 0,_ownValueReferenceDescriptor:void 0,__superMap:{_$9V$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamStrongNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(64),r=n(282).a.extend({debugType:"Strong",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference===i.c&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a weak and a strong property together.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseDownstreamStrongNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(64),r=n(17),a=n(539).a.extend({debugType:"Weak Computed",_manageForCalculateValueForNode:function(e,t,n){var r=this.key,a=e._weakReferenceTokens[r];Object(i.h)(t,a),e._weakReferenceTokens[r]=Object(i.g)(n,e,e.weaklyReferencedObjectWasDisposed,r)},nodeWillFree:function(e,t){var n=this.key,a=e._weakReferenceTokens[n],s=r.a.getDataForNode(t);Object(i.h)(s,a)},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamWeakComputedNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(64),r=n(282).a.extend({debugType:"Unsafe",validateDescendantDownstreamNodeManager:function(e,t,n){e.reference!==i.b&&this._throwValidationError(e,t,"Illegal binding (reference strength) from `%{key}` (to `%{parentKey}`): You cannot bind a %{reference} property up to an unsafe one.")},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownstreamUnsafeNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(64),r=n(17),a=n(253).b.extend({calculateValueForNode:function(e,t,n,a){var s=this,o=arguments,l=this.key,c=e._weakReferenceTokens,u=c[l],d=r.a.getDataForNode(t);Object(i.h)(d,u);var h=s.__s._$L7$calculateValueForNode.apply(s,o);return c[l]=Object(i.g)(h,e,e.weaklyReferencedObjectWasDisposed,l),h},nodeWillFree:function(e,t){var n=this.key,a=e._weakReferenceTokens[n],s=r.a.getDataForNode(t);Object(i.h)(s,a)},__superMap:{_$L7$calculateValueForNode:"calculateValueForNode"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UpstreamWeakRootValueNodeManager"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(537),r=n(451),a=i.a.extend({staticMembers:{_beginBatchSetter:function(){return r.a.begin()},__QUALIFIED_CLASS_NAME__:"BatchSetterForObject"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(262),r=n(161),a=i.a.extend({init:function(){var e=this,t=this,n=arguments;this.width=window.innerWidth,this.height=window.innerHeight,t.__s._$8B$init.apply(t,n);var i=function(){return e.updateDimensions()};Object(r.a)(window,"resize",i),Object(r.a)(window.document,"DOMContentLoaded",i)},x:0,y:0,width:0,height:0,updateDimensions:function(){this.beginBatchSet().setIfChanged("width",window.innerWidth).setIfChanged("height",window.innerHeight).end()},__superMap:{_$8B$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BrowserWindow"}})},function(e,t,n){"use strict";function i(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n(2),n(1),n(0),n.d(t,"a",(function(){return l}));var i=n(279),r=n(699),a=n(462),s=n(463),o=n(557),l=i.a.extend({staticMembers:{paneManagerClass:r.a,__QUALIFIED_CLASS_NAME__:"PaneManagerInitializer"},dependencies:[a.a,s.a,o.a],action:function(e){var t=this.constructor.paneManagerClass.create({isRootViewController:!0,application:e});e._paneManager=t,t.willAttach(),e.rootElement.appendChild(t.view.element),t._setIsAttached(!0),t.view.isAttached=!0,t.didAttach(),t.addPane(e.rootViewController)}})},function(e,t,n){"use strict";n(1),n(0),n.d(t,"a",(function(){return g})),n(2);var i=n(209),r=n(15),a=n(98),s=n(55),o=n(443),l=n(381),c=n(7),u=n(321),d=n(78),h=n(255),p=n(202),f=n(13),g=h.a.extend(o.b,{viewClass:p.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"panes"}],classes:["cw-pane-container"]}}}}),application:null,nextResponder:Object(r.d)({get:function(){return this.application}}),wantsFocus:Object(c.b)({defaultValue:!0}),presentViewController:function(e){return this.addPane(e),a.a.resolve()},dismissViewController:function(e){return this.removePane(e),a.a.resolve()},addPane:function(e){e||Object(f.b)("Must pass a pane to addPane"),e.retain();var t=this._paneStack;-1!==t.indexOf(e)&&Object(f.b)("Cannot add duplicate pane onto stack",{pane:e}),e.willMoveToParentViewController(this),null===e.presentingViewController&&(e.presentingViewController=this),this.view.panes.push(e.view),this.addChildViewController(e),this._addFocusLayerToPane(e),t.push(e),this.propertyChanged("activePane"),e.shouldFocusPaneOnAttach&&e.focus(),e.didMoveToParentViewController(this),e.release()},_addFocusLayerToPane:function(e){var t=this._paneStack,n=t.length;if(e.inheritsFocusLayer&&0!==n){for(var i,r=n-1;r>=0;r--){var a=t[r];if(a.isFocusablePane){i=a.focusParent;break}}i||Object(f.b)("Cannot find a focus layer to inherit",{pane:e,paneStack:t}),e.focusParent=i}else{var s=o.a.create().retain(this,"A new focus layer managed by the PaneManager");s.parent=this,e.focusParent=s}e.focusParent.defaultFocusChild=e},removePane:function(e){e||Object(f.b)("Must pass a pane to removePane"),e.retain();var t=this._paneStack;0===t.length&&Object(f.b)("Cannot remove pane from empty pane stack",{pane:e});var n=t.indexOf(e);-1===n&&Object(f.b)("Cannot remove pane; not a current pane",{pane:e}),e.willMoveToParentViewController(null),e.presentingViewController=null,t.splice(n,1),this.view.panes.remove(e.view),this.removeChildViewController(e),this.propertyChanged("activePane"),this._removeFocusLayerFromPane(e),e.didMoveToParentViewController(null),e.release()},_removeFocusLayerFromPane:function(e){var t=e.focusParent,n=this.topFocusLayer;t!==n&&t?t.release(this,"A new focus layer managed by the PaneManager"):n&&n!==this&&(n.defaultFocusChild=this.topFocusablePane),e.focusParent=null},bringToFront:function(e){var t=this._paneStack,n=t.indexOf(e);-1===n&&Object(f.b)("Cannot bring to front; not a current pane",{pane:e}),t.splice(n,1),t.push(e),this.propertyChanged("activePane")},activePane:Object(c.b)({cacheable:!1,readOnly:!0,get:function(){var e=this._paneStack;return e[e.length-1]}}),focusTopFocusLayer:function(){var e=this.topFocusLayer;(!e.isFocusedLayer||!e.focus(!0))&&m()},topFocusablePane:Object(c.b)({cacheable:!1,readOnly:!0,dependencies:["activePane"],get:function(){for(var e=this._paneStack,t=e.length-1;t>=0;t--){var n=e[t];if(n.isFocusablePane)return n}return this}}),topFocusLayer:Object(c.b)({cacheable:!1,readOnly:!0,dependencies:["activePane"],get:function(){for(var e=this._paneStack,t=e.length-1;t>=0;t--){var n=e[t];if(n.isFocusablePane)return n.focusParent}return this},didChange:function(e){var t=this._previousTopFocusLayer;if(t&&(t._previousFocusableLayerState=t.isFocusableLayer,t.isFocusableLayer=!1),e){var n=e._previousFocusableLayerState;e.isFocusableLayer=n}this._previousTopFocusLayer=e,this.focusTopFocusLayer()}}),_previousTopFocusLayer:null,focusReleasedInApp:function(){var e=i.a.sharedInstance;return e.isIE||e.isFirefox?this._focusReleasedTimer.start():(this.wantsFocus=!1,m()),!0},_focusReleasedTimer:Object(r.d)(Object(s.c)(u.a,{delay:0,action:"_checkActiveElementAgainstFocusResponderAndKillBrowserFocus"})),_checkActiveElementAgainstFocusResponderAndKillBrowserFocus:function(){this._checkActiveElementAgainstFocusResponder(!0)},appHasFocus:Object(c.b)({binding:Object(d.c)("topFocusLayer.isFocusableLayer"),readOnly:!0}),appLostFocus:function(){var e=i.a.sharedInstance;return e.isIE||e.isFirefox?this._appLostFocusTimer.start():this.topFocusLayer.isFocusableLayer=!1,!0},_appLostFocusTimer:Object(r.d)(Object(s.c)(u.a,{delay:0,action:"_checkActiveElementAgainstFocusResponder"})),_checkActiveElementAgainstFocusResponder:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.activeElement,n=Object(l.b)(t),i=this.topFocusLayer.focusResponder;n===i&&document.hasFocus()||(this.topFocusLayer.isFocusableLayer=!1,e&&m())},appGainedFocusability:function(){return this.topFocusLayer.isFocusableLayer=!0,!0},appWantsFocus:function(){return this.wantsFocus=!0,!0},didReceiveFocus:function(e){return null===e.relatedTarget&&this.appGainedFocusability(),this.focusTopFocusLayer(),!0},_paneStack:Object(s.c)(Array),staticMembers:{__QUALIFIED_CLASS_NAME__:"PaneManager"}});function m(){var e,t=i.a.sharedInstance;if(t.isIE||t.isEdge)try{(e=document.activeElement)&&e.blur&&e.blur()}catch(n){}else(e=document.activeElement)&&e.blur&&e.blur()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=n(130);function a(e){e||Object(i.b)("An element is required to be able to measure it");var t=e.getBoundingClientRect();return void 0===t.x&&(t.x=t.left),void 0===t.y&&(t.y=t.top),0!==t.height||0!==t.width||document.body.contains(e)?t:(r.b.error("Tried to measure an element that is not in the document",e),null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(82),r=n(40),a=n(320),s=n(15),o=r.a.extend(a.a,{_index:0,_original:null,_queue:null,_references:null,_clones:null,init:function(e,t){if(this.source=e,this.__s._$Rx$init.call(this),Object(i.a)(t,this.constructor)){this._original=t._original,this._container=t._container;var n=this._index=t._index;(this._clones=t._clones).push(this),this._queue=t._queue,(this._references=t._references)[n]++}else this._clones=[this],this._queue=[],this._references=[1],this._original=t,this.moveToNext()},moveToNext:function(){if(this._isValid){var e,t=this._index,n=this._queue,i=this._references;if(e=t<n.length?n[t]:this._advanceOriginal(),0===--i[t]&&0===t){i.shift(),n.shift();for(var r=this._clones,a=0,s=r.length;a<s;a++)r[a].index--}else t++;i[t]++,this._index=t,this._container=e}},add:function(e){if(this.isValid){var t,n=this._queue;if(0===n.length||!n[n.length-1].done)do{t=this._advanceOriginal()}while(!t.done)}return this._container={done:!1,value:e},!0},_advanceOriginal:function(){var e=this._original.next();return this._references.push(0),this._queue.push(e),e},_container:null,isValid:Object(s.d)({readOnly:!0,defaultValue:!0,get:function(){return!this._container.done}}),value:Object(s.d)({readOnly:!0,get:function(){return this.source.decode(this._container.value)}}),encodedValue:Object(s.d)({readOnly:!0,get:function(){return this._container.value}}),clone:function(){return this.constructor.create(this,this)},__superMap:{_$Rx$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"NativeIteratorWrapper"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(456),r=n(393),a=n(15),s=i.a.extend(r.a,{init:function(e,t){t||(t=e._map.keys()),this.__s._$9M$init.call(this,e,t)},add:function(e,t){var n=this,i=arguments,r=this.source;if(r.has(e))return!1;var a=n.__s._$Bn$add.apply(n,i);return r.set(e,t),a},remove:function(){if(this.isValid){var e=this.value;return this.source.delete(e),this.moveToNext(),e}},value:Object(a.d)({readOnly:!1,set:function(e){var t=this.source,n=this._container.value,i=t.get(n);return t.delete(n),this.add(e,i),e}}),__superMap:{_$9M$init:"init",_$Bn$add:"add"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapKeyIterator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(456).a.extend({init:function(e,t){t||(t=e._map.values()),this.__s._$88$init.call(this,e,t)},__superMap:{_$88$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MapValueIterator"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return o}));var i=n(20),r=n(297),a=n(284),s=n(247),o={mixinDependencies:[i.b,s.a,r.a],staticMembers:{handler:a.a.create({nodeType:"ATTRIBUTE",render:function(e,t,n){return n.value}})}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return d}));var i=n(20),r=n(78),a=n(214),s=n(82),o=n(297),l=n(284),c=n(247),u=n(219),d={mixinDependencies:[i.b,c.a,o.a],staticMembers:{handler:l.a.create({nodeType:"ATTRIBUTEOUTLET",generateLookupFunction:function(e,t){return a.a},register:function(e,t){var n=t.attribute,i=Object(u.a)(t);Object(u.c)(e,t,(function(e,t){null===(t=i(t))||void 0===t||t.toString===Object.prototype.toString||t.toString===Function.prototype.toString?e.removeAttribute(n):e.setAttribute(n,t)}))},render:function(e,t,n){var i=e.prototype[n.name];return null!=(i=Object(s.a)(i,r.a)?"":i)?i:""}})}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return m}));var i=n(392),r=n(155),a=n(20),s=n(13),o=n(346),l=n(82),c=n(247),u=n(297),d=n(555),h=n(219),p=i.a.create(),f=[],g=u.b.extend({nodeType:"MULTIVIEWOUTLET",register:function(e,t){var n=t.name;n||Object(s.b)("View template error: multi-view outlets (`<views>`) must specify a name (like `<views name='foo'>`).",{ViewClass:e}),Object(o.a)(n).length>1&&Object(s.b)("View template error: multi-view outlets (`<views>`) must have a single key name. '%{name}' is a path.",{ViewClass:e,name:n}),t.children&&t.children.length>0&&Object(s.b)("View template error: multi-view outlets (`<views>`) may not have child elements",{ViewClass:e}),this.__s._$br$register.call(this,e,t,!0);var i=t.contentsDidChangeNode=Object(c.b)(t);i.parent=t.parent,i.name=n+".contentsDidChange";e._registerRemovalHandler(n,this),Object(h.c)(e,t,(function(e,t){for(var i;i=e.firstChild;)v.call(this,n,e,i.view,i);if(t)for(var r=t.length,a=0;a<r;a++){var s=t.objectAt(a);i=s.element,_.call(this,n,e,s)}}),{get:function(e){return e||(e=r.b.create()),e},set:function(e){return Object(l.a)(r.b,e)||(e=r.b.create(e)),e}}),Object(h.c)(e,i,(function(e,t){if(t&&!this._isCleaningUpOutlets){var i,a,s=t.context;!function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n],a=i.item;a.hasOwnProperty("_changeRefCount")||(a._changeRefCount=0),i.operation===r.b.REMOVE?a._changeRefCount--:a._changeRefCount++}}(s);var o,l=s.length;for(o=0;o<l;o++){var c=s.objectAt(o);if(i=c.object,c.operation===r.b.REMOVE&&i.hasOwnProperty("_changeRefCount")&&i._changeRefCount<0)v.call(this,n,e,i,i.element),delete i._changeRefCount;else if(i.hasOwnProperty("_changeRefCount")&&i._changeRefCount>0){var u=c.index;a=e.childNodes[u],p.set(i,u),_.call(this,n,e,i,a),delete i._changeRefCount}}this._isCleaningUpOutlets=!0;var d,h=this.get(n);for(o=0,l=h.length;o<l;o++){i=h.objectAt(o);var g=p.get(i);void 0!==g&&o!==g&&f.push(o)}if(f.length>0){for(h.beginBatchedChanges(),o=0,l=f.length;o<l;o++)h.removeAt(f[o]);h.endBatchedChanges(),f.length=0}for(p.clear(),this._isCleaningUpOutlets=!1,o=h.length-1;o>=0;o--){var m=(i=h.objectAt(o)).element;b(e,m,d),d=m}}}))},render:function(e,t,n){var i=this,r=arguments,a=n.attributes;if(a&&a.tagName){var s=a.tagName;delete a.tagName,n.tagname=s}else"views"===n.tagname&&(n.tagname="div");return i.__s._$2LA$render.apply(i,r)},removeChildView:function(e,t,n){var i=e[t];i.removeAt(i.indexOf(n))},disposeOutlet:function(e,t){if(e.getMetadata(t).readOnly||e.isDisposing){var n=e[t];if(!n||n.isDisposed)return;for(var i=0,r=n.length;i<r;i++){var a=n.objectAt(i);a&&!a.isDisposed&&(a.parent=null,a.parentKey="")}}else e[t]=null},__superMap:{_$br$register:"register",_$2LA$render:"render"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MultiViewOutletHandler"}}),m={mixinDependencies:[a.b,c.a,d.a],staticMembers:{handler:g.create()},_isCleaningUpOutlets:!1};function _(e,t,n,i){var r=n.parent;!r||r===this&&n.parentKey===e||r._removeChildView(n.parentKey,n);var a=n.element;return t.insertBefore(a,i||null),n.parent=this,n.parentKey=e,a}function v(e,t,n,i){return n&&!n.isDisposed&&(n.parent=null,n.parentKey=""),t.removeChild(i),i}function b(e,t,n){!n&&t===e.lastChild||n&&t===n.previousSibling||e.insertBefore(t,n||null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(708),r=n(394),a=n(74),s=n(77),o={mixinDependencies:[i.a,r.a],createIterator:function(){return this.createIteratorAt(0)},createIteratorAtEnd:function(){return this.createIteratorAt(this.get("length")-1)},createIteratorAt:Object(s.c)(a.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(74),r=n(77),a={mixinDependencies:[n(546).a],createIteratorAtEnd:Object(r.c)(i.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(710),r=n(162),a=n(77),s=n(15),o={mixinDependencies:[i.a],position:Object(s.d)(0),countAfter:Object(s.d)({readOnly:!0,get:function(){return this.get("length")-this.get("position")-1}}),countBefore:Object(s.d)({readOnly:!0,get:function(){return this.get("position")}}),moveTo:function(e){return this.set("position",e),this},length:Object(a.c)(r.a),moveBy:function(e){return this.moveTo(this.get("position")+e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(74),r=n(77),a=n(320),s={done:!1,value:null},o={mixinDependencies:[a.a],moveToNext:Object(r.c)(i.a,{requiredKey:"moveBy",default:function(){return this.moveBy(1)}}),moveToPrevious:Object(r.c)(i.a,{requiredKey:"moveBy",default:function(){return this.moveBy(-1)}}),previous:function(){return s.value=this.get("value"),s.done=this.get("isValid"),this.moveBy(-1),s},moveBy:Object(r.c)(i.a,{requiredKey:["moveToNext","moveToPrevious"],default:function(e){if(e>0)for(;0!==e--;)this.moveToNext();else if(e<0)for(;0!==e++;)this.moveToPrevious();return this}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(123),r=n(354),a=n(171),s=n(460),o={mixinDependencies:[i.a,r.a],contentsDidChange:s.a.define(),length:a.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(459),r=n(20),a=n(713),s=n(7),o=i.a.extend(a.a,r.b,{position:Object(s.b)(),source:Object(s.b)(),isValid:Object(s.b)({dependencies:["wasRemoved","source.length","position"],get:Object.assign((function(){var e=this,t=arguments;return!this.wasRemoved&&e.__s._$E3$get.apply(e,t)}),{__CW__getter:function(e,t,n,i){var r=this,a=arguments;return!i.internalGet(this,t[0+n])&&r.__s._$E3$get.apply(r,a)}}),__superMap:{_$E3$get:"get"}}),value:Object(s.b)({dependencies:["position","source","wasRemoved"],writeDependencies:[],get:Object.assign((function(){var e=this,t=arguments;return this.wasRemoved?this._previousValue:e.__s._$JS$get.apply(e,t)}),{__CW__getter:function(e,t,n,i){var r=this,a=arguments;return i.internalGet(this,t[2+n])?this._previousValue:r.__s._$JS$get.apply(r,a)}}),set:function(e){var t=this,n=arguments;if(this.wasRemoved)return this._previousValue=e,e;var i=this.shouldObserveChanges;this.shouldObserveChanges=!1;var r=t.__s._$P3$set.apply(t,n);return this.shouldObserveChanges=i,r},__superMap:{_$JS$get:"get",_$P3$set:"set"}}),remove:function(){var e=this,t=arguments,n=this.shouldObserveChanges;this.shouldObserveChanges=!1;var i=e.__s._$TK$remove.apply(e,t);return this.shouldObserveChanges=n,this.propertyChanged("value"),i},initFromPool:function(){var e=this,t=arguments;e.__s._$WG$initFromPool.apply(e,t),this.source._registerIterator(this)},cleanup:function(){this.wasRemoved=!1,this.source._unregisterIterator(this),this.__s._$ZQ$cleanup.call(this)},wasRemoved:Object(s.b)(!1),_previousValue:Object(s.b)(),moveTo:function(){var e=this,t=arguments;return this.wasRemoved=!1,e.__s._$e8$moveTo.apply(e,t)},__superMap:{_$TK$remove:"remove",_$WG$initFromPool:"initFromPool",_$ZQ$cleanup:"cleanup",_$e8$moveTo:"moveTo"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ObservableArrayIterator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(320),r=n(77),a=n(20),s=n(171),o={mixinDependencies:[i.a,a.b],isValid:Object(r.c)(s.a),wasRemoved:Object(r.c)(s.a),shouldObserveChanges:!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(55),r=n(715),a=n(20),s=n(717),o=n(457),l=r.a.extend(a.b,{HandleClass:s.a,_handles:Object(i.c)(Array),_allHandles:Object(i.c)(Set),cachedHandleAt:function(e){var t=this._handles[e];if(t)return t},at:function(e){var t=this.cachedHandleAt(e);return t||(t=this._createHandle(e),this._registerHandle(t),t.retain(this,"initial retain").autorelease(this,"initial retain"))},_createHandle:function(e){return this.HandleClass.create(this.source,this,e)},handlesDidUpdate:Object(a.g)("source.contentsDidChange",(function(e){var t=this,n=e.context;if(n){var i=this._handles,r=n.length,a=n.lengthDelta,s=this.source.length-a;i.length<s&&(i.length=s);for(var l=0,c=function(){for(var e=n[l],a=e.operation,s=e.index,c=0,d=void 0;d=e.index,!(++l>=r)&&a===(e=n[l]).operation;)if(u=e.index-d,0===c){if(1!==u&&-1!==u)break;c=u}else if(u!==c)break;var h=d;if(h<s){var p=h;h=s,s=p}var f=++h-s;if(a===o.a.REMOVE)i.length-f===0?i.length=0:i.splice(s,f),t._allHandles.forEach((function(e){return e._applyRemove(s,h,f)}));else{if(0===i.length)i.length=f;else for(var g=0,m=f;g<m;g+=32768){var _=Math.min(m-g,32768),v=[s,0];v.length=2+_,i.splice.apply(i,v)}t._allHandles.forEach((function(e){return e._applyInsert(s,f)}))}};l<r;){var u;c()}}})),_registerHandle:function(e){e.isValid&&(e.registerWeakReference(this,this._handleWasDisposed,e),this._allHandles.add(e),this._handles[e.position]=e)},_handleWasDisposed:function(e){e.wasRemoved||(this._handles[e.position]=void 0),this._allHandles.delete(e)},everythingChanged:Object(a.g)("source.everythingChanged",(function(){var e=this._handles;this._allHandles.forEach((function(t){t._applyRemove(t.position,t.position+1,0),e[t.position]=void 0})),e.length=this.source.length})),staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListHandleProvider"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(74),r=n(15),a=n(553).a.extend({at:i.a.define(),startHandle:Object(r.d)({readOnly:!0,get:function(){return this.at(0)}}),endHandle:Object(r.d)({readOnly:!0,get:function(){return this.at(this.source.length-1)}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseRandomAccessHandleProvider"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(15),a=n(162),s=n(20),o=n(7),l=i.a.extend(s.b,{HandleClass:Object(r.d)({readOnly:!0}),source:Object(r.d)({weak:!0}),startHandle:a.a.define(),delegate:Object(o.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseHandleProvider"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(200),a=n(15),s=n(55),o=n(718),l=i.a.extend(r.a,o.a,{initFromPool:function(e,t,n){n=n||0,this.encodedValue=e.encodedObjectAt(n),this._position=n,this.__s._$HC$initFromPool.call(this,e,t)},didEnterPool:function(){this._wasRemoved=!1,this.encodedValue=void 0,this._position=NaN,this._formerPosition=NaN,this._removalListeners.clear(),this.__s._$Lj$didEnterPool.call(this)},atDistance:function(e){var t=this,n=arguments;if(this._wasRemoved){var i=this._formerPosition;return e>0?this.at(i+e-1):e<0?this.at(i+e):this}return t.__s._$Xo$atDistance.apply(t,n)},hasHandleAtDistance:function(e){var t=this,n=arguments;if(this._wasRemoved){var i=this._formerPosition;return e>0?this.hasHandleAt(i+e-1):!(e<0)||this.hasHandleAt(i+e)}return t.__s._$kH$hasHandleAtDistance.apply(t,n)},encodedValue:Object(a.d)({strong:!0}),position:Object(a.d)({readOnly:!0,defaultValue:NaN}),maximumPosition:Object(a.d)({readOnly:!0,get:function(){return this.source.length-1}}),wasRemoved:Object(a.d)({readOnly:!0,defaultValue:!1}),_formerPosition:NaN,hasHandleAt:function(e){return e>=0&&e<=this.maximumPosition},_handleRemove:function(){var e=this,t=this._removalListeners;t.forEach((function(t){return t._handleWasRemoved(e)})),t.clear()},_applyRemove:function(e,t,n){if(this._wasRemoved){var i=this._formerPosition;if(i<e)return;this._formerPosition=i<t?e:i-n}else{var r=this._position;if(r<e)return;r<t?(this._formerPosition=e,this._wasRemoved=!0,this._handleRemove()):this._position=r-n}},_removalListeners:Object(s.c)(Set),_listenForRemoval:function(e){this._removalListeners.add(e)},_unlistenForRemoval:function(e){this._removalListeners.delete(e)},_applyInsert:function(e,t){if(this._wasRemoved){var n=this._formerPosition;if(n<e)return;this._formerPosition=n+t}else{var i=this._position;if(i<e)return;this._position=i+t}},__superMap:{_$HC$initFromPool:"initFromPool",_$Lj$didEnterPool:"didEnterPool",_$Xo$atDistance:"atDistance",_$kH$hasHandleAtDistance:"hasHandleAtDistance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedListHandle"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(74),r=n(162),a=n(15),s={mixinDependencies:[n(554).a],at:function(e){return this._provider.at(e)},hasHandleAt:i.a.define(),position:r.a.define(),maximumPosition:r.a.define(),atDistance:function(e){return this.at(this.position+e)},hasHandleAtDistance:function(e){return this.hasHandleAt(this.position+e)},previous:Object(a.d)({get:function(){return this.atDistance(-1)}}),hasPrevious:Object(a.d)({get:function(){return this.hasHandleAtDistance(-1)}}),next:Object(a.d)({get:function(){return this.atDistance(1)}}),hasNext:Object(a.d)({get:function(){return this.hasHandleAtDistance(1)}}),start:Object(a.d)({readOnly:!0,get:function(){return this._provider.startHandle}}),end:Object(a.d)({readOnly:!0,get:function(){return this._provider.endHandle}}),isValid:Object(a.d)({readOnly:!0,get:function(){var e=this.position;return e>=0&&e<=this.maximumPosition}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(162),a=n(15),s={mixinDependencies:[i.a],isValid:r.a.define(),wasRemoved:r.a.define(),value:Object(a.d)({readOnly:!0,get:function(){return this.source.decode(this.encodedValue,this.position)}}),encodedValue:r.a.define(),start:Object(a.d)({get:function(){return this._provider.startHandle}}),next:r.a.define(),isAdjacentTo:function(e){return this.next===e||e.next===this},hasNext:r.a.define(),init:function(e,t){this.source=e,this._provider=t,this.__s._$28Q$init.call(this)},initFromPool:function(e,t){this.source=e,this._provider=t,this.__s._$2B9$initFromPool.call(this)},didEnterPool:function(){this.source=null,this._provider=null,this.__s._$2D0$didEnterPool.call(this)},source:Object(a.d)({strong:!0}),_provider:Object(a.d)(),__superMap:{_$28Q$init:"init",_$2B9$initFromPool:"initFromPool",_$2D0$didEnterPool:"didEnterPool"}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return u}));var i=n(214),r=n(20),a=n(297),s=n(284),o=n(247),l=n(219),c=n(193),u={mixinDependencies:[r.b,o.a,a.a],staticMembers:{handler:s.a.create({nodeType:"STYLEOUTLET",generateLookupFunction:function(e,t){return i.a},register:function(e,t){var n=t.unit||"",i=t.property,r=Object(l.a)(t);Object(l.c)(e,t,(function(e,t){t=r(t),n&&null!=t&&(t+=n),Object(c.c)(e,i,t)}))}})}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return r}));var i=n(284),r={mixinDependencies:[n(247).a],staticMembers:{handler:i.a.create({nodeType:"TEXT",render:function(e,t,n){return t.createTextNode(n.data)}})}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return u}));var i=n(20),r=n(13),a=n(346),s=n(284),o=n(247),l=n(555),c=n(219),u={mixinDependencies:[i.b,o.a,l.a],staticMembers:{handler:s.a.create({nodeType:"VIEWOUTLET",register:function(e,t){var n=t.name;n||Object(r.b)("View template error: view outlets (`<view>`) must specify a name (like `<view name='foo'>`).",{ViewClass:e}),Object(a.a)(n).length>1&&Object(r.b)("View template error: view outlets (`<view>`) must have a single key name. '%{name}' is a path.",{ViewClass:e,name:n}),t.parent||Object(r.b)("View template error: view outlets (`<view>`) may not be the root element in your template.",{ViewClass:e});var i="_previous_"+n;e._registerRemovalHandler(n,this),Object(c.c)(e,t,(function(e,t){var n=e.parentNode,i=e;return t?i=t.element:e.__cw__isTemplatePlaceholder__||(i=d(this.document)),i!==e&&n.replaceChild(i,e),i}),void 0,(function(e,t){var r=this[i];if(t!==r){if(r&&!r.isDisposed){var a=r.parent,s=r.parentKey;a===this&&s===n&&(r.isDisposed||(r.parent=null,r.parentKey=""))}if(t){var o=t.parent;o&&o._removeChildView(t.parentKey,t),t.parent=this,t.parentKey=n}this[i]=t}}))},render:function(e,t,n){return d(t)},removeChildView:function(e,t,n){e[t]=null},disposeOutlet:function(e,t){if(e.getMetadata(t).readOnly||e.isDisposing){var n=e[t];if(!n||n.isDisposed)return;n.parent=null,n.parentKey=""}else e[t]=null}})}};function d(e){var t=e.createElement("div");return t.__cw__isTemplatePlaceholder__=!0,t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(395),r={};i.a.get("sharedInstance").generate(r,{keyDown:"keydown",keyPress:"keypress",keyUp:"keyup",compositionStart:"compositionstart",compositionUpdate:"compositionupdate",compositionEnd:"compositionend"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(725),r=n(395),a={};r.a.get("sharedInstance").generate(a,{didReceiveFocus:"focus",didReceiveBlur:"blur"},(function(e){return function(t){var n=i.a.create({nativeEvent:t});n.cwType=e,this.dispatchEvent(n)}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(199),r=n(453).a.extend({staticMembers:{nativePropertiesToCopy:Object(i.b)(["target"]),eventPropertiesToCopy:Object(i.b)(["target"]),__QUALIFIED_CLASS_NAME__:"FocusEvent"},cwForceBubble:!0,target:null})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(395),r={};i.a.get("sharedInstance").generate(r,{beforeInput:"beforeinput",input:"input",selectionDidChange:"select"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(395),r={};i.a.get("sharedInstance").generate(r,{dragStart:"dragstart",dragEnter:"dragenter",dragOver:"dragover",dragLeave:"dragleave",drag:"drag",drop:"drop",dragEnd:"dragend"});var a=r.dragover;r.dragover=function(e){a.apply(this,arguments),e.preventDefault()};var s=r.drop;r.drop=function(e){s.apply(this,arguments),e.preventDefault()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={change:function(e){e.cwType="change",this.dispatchEvent(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(730),r="onwheel"in document||"WheelEvent"in window?"wheel":"mousewheel",a={};a[r]=function(e){(e=i.a.create({nativeEvent:e})).cwType="wheel",this.dispatchEvent(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(731),r=n(199),a=n(544).a.extend({staticMembers:{eventPropertiesToCopy:Object(r.b)(["deltaX","deltaY"]),__QUALIFIED_CLASS_NAME__:"WheelEvent"},init:function(e){if(this.__s._$Am$init.call(this,e),e){var t=e.nativeEvent;if(t){var n=i.a.sharedInstance.deltaMultiplierForScrollEvent(t);"mousewheel"===t.type?(this.deltaX=t.wheelDeltaX,this.deltaY=t.wheelDeltaY||t.wheelDelta):(this.deltaX=t.deltaX,this.deltaY=t.deltaY),this.deltaY=this.deltaY||0,this.deltaX=this.deltaX||0,this.deltaY*=n,this.deltaX*=n}}},deltaX:0,deltaY:0,__superMap:{_$Am$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(40),r=n(220),a=n(209),s=i.a.extend(r.a,{deltaMultiplierForScrollEvent:function(e){var t=1;e&&"mousewheel"===e.type&&(t=-1/40);var n=a.a.get("sharedInstance");return n.isWebKit&&n.engineMajorVersion>=538?t=1:n.isSafari?t=-1/3:n.isFirefox&&(t=.5,e&&1===e.deltaMode&&(t=40)),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Scrolling"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={};["pointerOver","pointerDown","pointerMove","pointerUp","pointerOut","pointerCancel","click"].forEach((function(e){i[e.toLowerCase()]=function(t){t.cwType=e,this.dispatchEvent(t)}}))},function(e,t,n){"use strict";function i(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a,s,o=arguments.length;for(a=2;a<o;a++)t[s=arguments[a]]=e[s];return t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(194),r={},a={pointerOver:"mouseover",pointerDown:"mousedown",pointerMove:"mousemove",pointerUp:"mouseup",pointerOut:"mouseout",pointerCancel:"mousecancel"},s=function(e){return function(t){var n=i.a.create({cwType:e,nativeEvent:t,pointerType:i.b.MOUSE,width:1,height:1});this.dispatchEvent(n)}};for(var o in a)r[a[o]]=s(o)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(98),r=n(13),a=n(161),s=n(238),o=n(279).a.extend({action:function(e){if(window.__CW_BLOBS_READY)return i.a.resolve();var t=i.a.create(),n=function(){t.resolve()},o=function(e){t.reject(e.data||Object(r.b)("Failed to preload images in SpritePreloader"))};return Object(a.a)(window,"__CW_SPRITE_LOADED",n),Object(a.a)(window,"__CW_SPRITE_ERROR",o),t.finally((function(){Object(s.a)(window,"__CW_SPRITE_LOADED",n),Object(s.a)(window,"__CW_SPRITE_ERROR",o)}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"SpritePreloader"}})},function(e,t,n){"use strict";n(1),n.d(t,"a",(function(){return o}));var i=n(279),r=n(462),a=n(463),s=n(557),o=i.a.extend({dependencies:[r.a,a.a,s.a],action:function(e){var t=window.document.createElement("div");t.innerHTML='<div id="cw-aria-live-region" aria-live="polite"></div>';var n=t.firstChild;n.style.cssText="position:fixed; top:-1px; width:1px; height:1px; overflow:hidden;",e.rootElement.appendChild(n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AriaLiveRegionInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(117),r=n(738),a=n(344),s=n(279).a.extend({appDocumentElement:window.document.documentElement,action:function(e){var t=this.appDocumentElement;Object(r.a)(t);var n=i.a.sharedInstance;n.observe("locale",(function(e){Object(a.b)("lang",e,t)})),n.observe("isRTL",(function(e){var n=e?"rtl":"ltr";Object(a.b)("dir",n,t)})),t.setAttribute("data-primary-interaction-mode",e.primaryInteractionMode.toLowerCase())},staticMembers:{__QUALIFIED_CLASS_NAME__:"DocumentElementInitializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(209),r=n(201),a=n(344);function s(e,t){Object(a.a)(t||r.a.get("sharedInstance"),e,"data-"),Object(a.a)(t||i.a.get("sharedInstance"),e,"data-")}},function(e,t,n){"use strict";function i(e,t){var n="";t=!!t;for(var i=0;i<=7;i++)t&&i>0&&i%2===0&&(n+=" "),n+="0123456789ABCDEF"[(e&4026531840>>>4*i)>>>4*(7-i)];return n}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n(15),r=n(98),a=n(82),s=n(13),o=n(561),l=n(130),c=n(7),u=n(20),d=n(126),h=n(742),p=n(399),f=n(387),g=n(559),m=n(743),_=h.a.extend({staticMembers:{nextRequestSequenceNumber:1,requestLoggingLevel:null,__QUALIFIED_CLASS_NAME__:"Request"},URLClass:f.a,url:Object(c.b)({get:function(){return this._urlObject},set:function(e){var t;if(e){var n=this.URLClass;t=Object(a.a)(e,n)?e:n.create(e)}this._urlObject=t}}),method:d.a.GET,useCredentialsIfCrossOrigin:!1,bodySerializer:Object(i.d)(m.a.sharedInstance),response:Object(c.b)(),responseSerializer:Object(i.d)({get:function(){return this._responseSerializer||this.get("serializer")}}),isCrossDomain:Object(i.d)({readOnly:!0,get:function(){var e=this.get("url");if(!e)return!1;var t=e.get("protocol"),n=e.get("host");if(!n)return!1;var i=window.location;return i.protocol!==t||i.host!==n}}),transport:Object(i.d)({get:function(e){return e||g.a.get("sharedInstance")}}),allowsCredentialsInURL:!1,shouldTrackUploadProgress:Object(c.b)({defaultValue:!1,didChange:function(){this.state!==d.b.UNSENT&&Object(s.b)("Cannot change `shouldTrackUploadProgress` once a request is sent.")}}),shouldTrackProgress:Object(c.b)({defaultValue:!1,didChange:function(){this.state!==d.b.UNSENT&&Object(s.b)("Cannot change `shouldTrackProgress` once a request is sent.")}}),uploadProgress:Object(c.b)({readOnly:!0,dependencies:["shouldTrackUploadProgress"],get:Object.assign((function(){return this.shouldTrackUploadProgress?p.a.create():null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?p.a.create():null}})}),progress:Object(c.b)({readOnly:!0,dependencies:["shouldTrackProgress"],get:Object.assign((function(){return this.shouldTrackProgress?p.a.create():null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?p.a.create():null}})}),_fireDidProgress:Object(u.g)("progress.didChange","uploadProgress.didChange",(function(){this.triggerStatusEvent(d.b.PROGRESS)})),headers:Object(i.d)(),setHeader:function(e,t){var n=this.get("headers");if(!n){if(null==t)return;n={}}Object(o.a)(n,e,t),this.set("headers",n)},setMultipleHeaders:function(e){var t=this.get("headers")||{};for(var n in e)Object(o.a)(t,n,e[n]);this.set("headers",t)},removeHeader:function(e){this.setHeader(e,null)},on:function(e,t){b(this,e,t)},onStatus:function(e,t){/^[\d*]{3}$/.test(e)?b(this,e,t):Object(s.b)(e+" is an invalid status code listener for request",this)},delegate:null,sequenceNumber:Object(i.d)({readOnly:!0,defaultValue:function(){return this.constructor.nextRequestSequenceNumber++}}),sentAt:null,willSend:null,didSend:null,didProgress:null,didSucceed:null,didAbort:null,didFail:null,didComplete:null,shouldFinalizeWithResponse:null,_logRequestIfAppropriate:function(){this.sentAt=window.performance.now();var e,t=this.constructor.requestLoggingLevel;t&&(e=this.get("bodyShouldBeLogged")?this.get("encodedBody")||"(empty)":"(omitted)",l.b[t]("--\x3e Request "+this.get("sequenceNumber")+": "+this.get("method")+" to "+this.getPath("url.href")+", headers: "+(this.get("headers")||"(empty)")+", body: "+e))},bodyShouldBeLogged:!1,_logResponseIfAppropriate:function(){var e=this.constructor.requestLoggingLevel,t=this.get("sequenceNumber");if(e)if(this.get("state")!==d.b.TIMEDOUT){var n,i=this.get("response"),r=window.performance.now()-this.sentAt;n=this.get("bodyShouldBeLogged")?i.get("encodedBody")||"(empty)":"(omitted)",l.b[e]("<-- Response "+t+": "+i.get("status")+" ("+r+"ms), headers: "+(i.get("headers")||"(empty)")+", body: "+n)}else l.b[e]("<-- Response "+t+": (timed out)")},send:function(){var e=this._promise=r.a.create();return v(this),e},sendSynchronously:function(){this.get("timeout")&&Object(s.b)("Cannot send a synchronous request with a timeout",this),v(this,!0)},abort:function(){if(this.get("state")===d.b.SENDING){var e=this.get("transport");this.get("method")!==d.a.GET&&l.b.warn("A non-GET network request was aborted. Data may have already been changed on the server.",this),e.abort(this),this.set("state",d.b.ABORTED),this.triggerStatusEvent(d.b.ABORTED),this.finalize()}},triggerStatusEvent:function(e){var t,n,i,r,a=this.get("delegate")||this,s=this._statusEventListeners;if(e===d.b.SENT&&this._logRequestIfAppropriate(),e===d.b.COMPLETED&&this._logResponseIfAppropriate(),(n=a[e])&&n.call&&n.call(a,this),s&&(t=s[e]))for(i=0,r=t.length;i<r;i++)(n=t[i])&&n(this);var o=this._promise;o&&(e===d.b.SUCCEEDED?(this._promise=void 0,o.resolve(this.response)):e===d.b.FAILED&&(this._promise=void 0,o.reject(this.response)))},triggerStatusEvents:function(){for(var e=0,t=arguments.length;e<t;e++)this.triggerStatusEvent(arguments[e])},finalize:function(){this._isFinalized=!0,this.get("transport").finalize(this),this.triggerStatusEvent(d.b.FINALIZED),delete this._statusEventListeners},toJSON:function(){return this.getPropertiesAsObject("url","method","body","headers","response")},_promise:Object(i.d)()});function v(e,t){(e.get("state")!==d.b.UNSENT||e._isFinalized)&&Object(s.b)("Cannot send a request more than once",e);var n=e.get("url");n?n.get("auth")&&!e.get("allowsCredentialsInURL")&&Object(s.b)("This request is not allowed to use authentication",e):Object(s.b)("Cannot send a request without a URL",e);var i=e.get("transport");e.set("state",d.b.SENDING),e._synchronous=t,i.send(e)}function b(e,t,n){var i=e._statusEventListeners||(e._statusEventListeners={});(i[t]||(i[t]=[])).push(n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(40),r=n(15),a=n(398),s=n(20),o=n(7),l=n(126),c=0,u=i.a.extend(s.b,{id:Object(r.d)({get:function(){return this._id||(this._id=++c)}}),body:null,bodySerializer:Object(r.d)(a.a.sharedInstance),timeout:null,state:Object(o.b)(l.b.UNSENT),staticMembers:{__QUALIFIED_CLASS_NAME__:"Message"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(398).a.extend({encode:function(e){var t=this,n=arguments;return e instanceof Blob||ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:t.__s._$B2$encode.apply(t,n)},decode:function(e){var t=this,n=arguments;return e instanceof Blob||ArrayBuffer.isView(e)||e instanceof ArrayBuffer?e:t.__s._$Gc$decode.apply(t,n)},__superMap:{_$B2$encode:"encode",_$Gc$decode:"decode"},staticMembers:{__QUALIFIED_CLASS_NAME__:"XHRBodySerializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(13),a=n(130),s=n(126),o=n(745),l=i.a.extend(o.a,{staticMembers:{_TransportClass:null,__QUALIFIED_CLASS_NAME__:"BaseTransport"},send:function(e,t){var n;e||Object(r.b)("No request to send",this),t?n=e.__transport:(e._retryCount=0,(n=e.__transport=new this.constructor._TransportClass)._cw_request=e,e.triggerStatusEvent(s.b.WILLSEND)),this.prepare(e,t);var i=this.getBodyText(e);n.send(i),t||e._synchronous||e.triggerStatusEvent(s.b.SENT)},getBodyText:function(e){var t=e.get("bodySerializer"),n=e.get("body");return t&&(n=t.encode(n)),n},abort:function(e){e||Object(r.b)("No request to abort",this);var t=e.__transport;t?t.abort():a.b.warn("Cannot abort request because it is not in transit",e)},handleResponse:function(e,t){var n=this.createResponse(t);if(this._shouldFinalizeWithResponse(e,n)){e.set("response",n),e.set("state",s.b.COMPLETED);var i=this.computeStatuses(t);e._synchronous&&e.triggerStatusEvent(s.b.SENT),i&&e.triggerStatusEvents.apply(e,i),e.finalize()}},_shouldFinalizeWithResponse:function(e,t){var n=!0;if(e.shouldFinalizeWithResponse){var i=e._pendingRetryCallback=function(){i===e._pendingRetryCallback&&(delete e._pendingRetryCallback,e._retryCount++,this.send(e,!0))}.bind(this);n=e.shouldFinalizeWithResponse(t,i,e._retryCount)}return n},handleTimeout:function(e){this.abort(e);var t=this.createResponse(null);t.status=s.b.TIMEDOUT,this._shouldFinalizeWithResponse(e,t)&&(e.set("response",t),e.set("state",s.b.TIMEDOUT),e.triggerStatusEvent(s.b.FAILED),e.triggerStatusEvent(s.b.COMPLETED),e.finalize())},finalize:function(e){e&&(e.__transport&&(delete e.__transport._cw_request,delete e.__transport),delete e._pendingRetryCallback,e._retryCount=0)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(51),r=n(123),a=n(220),s=n(74),o={mixinDependencies:[r.a,a.a],prepare:s.a.create(),send:s.a.create(),abort:s.a.create(),createResponse:s.a.create(),computeStatuses:s.a.create(),finalize:i.a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(40),r=n(747),a=n(15),s=i.a.extend(r.a,{status:0,headers:"",body:Object(a.d)({get:function(){return this._cachedBody||(this._cachedBody=this.deserialize(this.get("encodedBody")))}}),encodedBody:Object(a.d)(),toJSON:function(){return this.getPropertiesAsObject("status","headers","encodedBody")},_cachedBody:Object(a.d)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Response"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(398),r=n(15),a={serializer:Object(r.d)((function(){return i.a.get("sharedInstance")})),serializedProperties:null,serialize:function(){var e=this.get("serializedProperties"),t=this.get("serializer"),n={};if(e)for(var i=0,r=e.length;i<r;i++){var a=e[i];n[a]=this.get(a)}return t.encode(n)},deserialize:function(e){return e?this.get("serializer").decode(e):null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(15),r=n(20),a=n(7),s={mixinDependencies:[r.b],errors:Object(a.b)(),validate:function(e){var t,n,r,a,s,o=this.getMetadataByType(i.a),l=Object.keys(o),c=!0;e&&(l=Array.isArray(e)?e:[e]);var u={};for(t in o)if(o.hasOwnProperty(t)&&-1!==l.indexOf(t)){if(!(r=(n=o[t]).validators))continue;for(s=0;s<r.length;s++)(a=r[s]).validate(n.getForObject(this),t,this)||(void 0===u[t]&&(u[t]=[]),u[t].push(a.message),c=!1)}return this.errors=u,c}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(15),r=n(13),a=n(444).a.extend({origin:i.d({readOnly:!0}),init:function(e){this.__s._$3k$init.call(this,e),e.origin||r.b("Cannot create output channel. Requires origin")},sendMessage:function(e){},__superMap:{_$3k$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseOutputChannel"}})},function(e,t,n){"use strict";function i(e){return e=e||new a(16),r(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}n.d(t,"a",(function(){return i}));var r,a=Uint8Array||Array;r="undefined"!==typeof crypto&&crypto.getRandomValues?function(e){window.crypto.getRandomValues(e)}:function(e){for(var t,n,i,r=0;r<16;)for(n=Math.random(),t=0;t<4;r++,t++)i=0|(n*=256),e[r]=i,n-=i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e){var t,n,r="";for(t=0;t<16;t++)n=e[t],r+=i[n>>4],r+=i[15&n],3!==t&&5!==t&&7!==t&&9!==t||(r+="-");return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(40),r=n(393),a=n(15),s=n(143),o=n(385),l=i.a.extend(r.a,{source:null,_map:null,_keys:null,init:function(e,t){this.source=e;var n=this._map=e._map;this._keys=t||Object.keys(n),this.__s._$92$init.call(this)},moveToNext:function(){return this._keys.pop(),this},isValid:Object(a.d)({readOnly:!0,get:function(){return!!this._keys.length}}),_getCurrentItem:function(){var e=this._keys;return this._map[e[e.length-1]]},value:Object(a.d)({get:function(){return this.source.decode(this.encodedValue)},set:function(e){this.encodedValue=this.source.encode(e)}}),encodedValue:Object(a.d)({get:function(){return this._getCurrentItem()},set:function(e){var t=this._getCurrentItem();return this.source.encodedRemove(t),this.source.encodedAdd(e),this._keys.pop(),this._keys.push(Object(s.b)(e)),e}}),clone:function(){return this.constructor.create(this.source,Object(o.a)(this._keys))},remove:function(){var e=this.get("value"),t=this.source.remove(e);return this.moveToNext(),t},add:function(e){return this._keys.pop(),this._keys.push(Object(s.b)(e)),this.source.add(e)},__superMap:{_$92$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SetIterator"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(558),a=n(20),s=n(7),o=n(127),l=n(82),c=n(120),u=n(178),d=i.a.extend(a.b,r.a,{store:Object(s.b)(),modelClass:Object(s.b)(),encode:function(e){if(!Object(o.a)(e))return e;var t=this.store.constructor;return Object(l.a)(e,u.a)?t.getStoreIdForPrimaryKey(e.constructor,e.getPrimaryKey()):Object(c.a)(e)?t.getStoreIdForPrimaryKey(e.type,e.id):t.getStoreIdForPrimaryKey(this.modelClass,e)},decode:function(e){return Object(o.a)(e)?this.store.materializeModel(e):e},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModelStoreIdSerializer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(40),r=n(13),a=n(564),s=i.a.extend({handlerResolver:a.a,handlesType:null,nestedOperationHandlers:null,action:function(e,t){var n=e&&e.operation;if(n){"function"!==typeof this.handlerResolver&&Object(r.b)("OperationHandler#handlerResolver must be a function",{operationHandler:this,handlerResolver:this.handlerResolver});var i=n.type,a=this.handlerResolver(i,this.get("nestedOperationHandlers"));return a||Object(r.b)("CW.Data.OperationHandler#action found no sub-handler to handle sub-operation: %{operationType} - %{subOperationType}",{subOperationType:n.type,operationType:e.type}),a.action(n,t)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"OperationHandler"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){this.init()};Object.assign(i.prototype,{firstItem:null,lastItem:null,length:0,init:function(){this._nextMap=new Map,this._prevMap=new Map},itemBeforeItem:function(e){return this._prevMap.get(e)},itemAfterItem:function(e){return this._nextMap.get(e)},unshift:function(e,t){var n=this._nextMap,i=this._prevMap;if(n.has(e)){if(!t)return;this.remove(e)}var r=this.firstItem;n.set(e,r),i.set(e,null),r&&i.set(r,e),this.firstItem=e,this.length++,1===this.length&&(this.lastItem=e)},shift:function(){var e=this.firstItem;return e&&this.remove(e),e},push:function(e,t){var n=this._nextMap,i=this._prevMap;if(n.has(e)){if(!t)return;this.remove(e)}var r=this.lastItem;i.set(e,r),n.set(e,null),r&&n.set(r,e),this.lastItem=e,this.length++,1===this.length&&(this.firstItem=e)},pop:function(){var e=this._nextMap,t=this._prevMap;if(0===this.length)return null;var n=this.lastItem,i=this.lastItem=t.get(n)||null;return i?e.set(i,null):this.firstItem=null,this.length--,e.delete(n),t.delete(n),n},remove:function(e){var t=this._nextMap,n=this._prevMap;if(!t.has(e))return!1;var i=n.get(e),r=t.get(e);return i&&t.set(i,r),r&&n.set(r,i),this.lastItem===e&&(this.lastItem=i||null),this.firstItem===e&&(this.firstItem=r||null),this.length--,t.delete(e),n.delete(e),!0},clear:function(){var e,t=this._nextMap,n=this._prevMap,i=this.firstItem;for(this.firstItem=this.lastItem=null,this.length=0;i;)e=t.get(i),t.delete(i),n.delete(i),i=e},contains:function(e){return this._nextMap.has(e)},toArray:function(){var e=this._arrayRepresentation||(this._arrayRepresentation=[]);e.length=0;var t=this.firstItem,n=this._nextMap;if(!t)return e;do{e.push(t)}while(t=n.get(t));return e}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c}));var i=n(15),r=n(120),a=n(7),s={init:function(){var e=this,t=arguments,n=this._revertiblePropertyValues={},r=this._revertiblePropertyKeys=[],a=this.getMetadataByType(i.a);for(var s in a){var o=a[s];o&&o.isRevertible&&(n[s]=this[s],r.push(s))}e.__s._$Jk$init.apply(e,t)},revertRevertibleProperties:function(e){for(var t=this._revertiblePropertyValues,n=this._revertiblePropertyKeys,i=0,r=n.length;i<r;i++){var a=n[i];e&&Object.prototype.hasOwnProperty.call(e,a)||(this[a]=t[a])}},__superMap:{_$Jk$init:"init"}},o={mixinDependencies:[s],cleanup:function(){var e=this,t=arguments;this.revertRevertibleProperties(),e.__s._$ZA$cleanup.apply(e,t)},__superMap:{_$ZA$cleanup:"cleanup"}};function l(e){var t=r.a(e)?e:{defaultValue:e};return t.isRevertible=!0,i.d(t)}function c(e){var t=r.a(e)?e:{defaultValue:e};return t.isRevertible=!0,a.b(t)}},function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href;if(-1!==e.indexOf("://"))return e;var n=t.indexOf("://");if(-1===n)throw new Error("`baseUrl` has no origin.");if("/"===e[0]){var i=t.slice(0,n)+"://",r=t.slice(0,(t.indexOf("/",i.length)+1||t.length+1)-1);return r+e}var a=t.slice(0,(t.indexOf("#")+1||t.length+1)-1),s=a.slice(0,(a.indexOf("?")+1||a.length+1)-1),o=s.slice(0,s.lastIndexOf("/")+1);return o+e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=function(e){if(!e)return!1;var t=e._DrawImageSVGAlpha_isSVG;return!0===t||!1===t?t:"IMG"===e.tagName&&/^data:image\/svg|\.svg\?|\.svg$/.test(e.src)},r=document.createElement("canvas"),a=r.getContext("2d");r.width=2,r.height=1;var s=new Image;s.addEventListener("load",(function(){var e={};try{a.globalAlpha=.5,a.drawImage(s,0,0),e.correctsGlobalAlpha=a.getImageData(0,0,2,1).data[3]>192,a.fillStyle="black",a.fillRect(0,0,2,1),a.globalCompositeOperation="destination-in",a.drawImage(s,0,0),e.correctsGlobalCompositeOperation=a.getImageData(0,0,2,1).data[7]>64}catch(t){e.correctsEverything=!0}Object.keys(e).some((function(t){return e[t]}))&&function(e){var t=[],n=CanvasRenderingContext2D.prototype.drawImage,r=e.correctsGlobalAlpha||e.correctsEverything,a=e.correctsGlobalCompositeOperation||e.correctsEverything;CanvasRenderingContext2D.prototype.drawImage=function(e,c,u,d,h,p,f,g,m){if(!i(e))return n.apply(this,arguments);if((!r||1===this.globalAlpha)&&(!a||"source-over"===this.globalCompositeOperation))return n.apply(this,arguments);e._DrawImageSVGAlpha_bitmapCache||e.addEventListener("load",l);var _,v=arguments.length;3===v&&(v=5,d=e.naturalWidth||e.width,h=e.naturalHeight||e.height),5===v&&(_=s(d,h)),9===v&&(_=s(c,u,d,h,g,m));var b=e._DrawImageSVGAlpha_bitmapCache||(e._DrawImageSVGAlpha_bitmapCache={}),y=b[_];if(!y){var w=(y=b[_]=t.pop()||document.createElement("canvas")).getContext("2d");5===v&&(y.width=Math.ceil(d),y.height=Math.ceil(h),n.call(w,e,0,0,d,h)),9===v&&(y.width=Math.ceil(g),y.height=Math.ceil(m),n.call(w,e,c,u,d,h,0,0,g,m));var I=b.currentCacheKeys||(b.currentCacheKeys=[]);I.unshift(_),o(b,4)}5===v&&n.call(this,y,c,u),9===v&&n.call(this,y,p,f)};var s=function(){return Array.prototype.join.call(arguments,",")},o=function(e,n){var i=e.currentCacheKeys;if(i)for(;i.length>n;){var r=i.pop(),a=e[r];a.width=a.height=0,t.push(a),delete e[r]}},l=function(){var e=this._DrawImageSVGAlpha_bitmapCache;e&&o(e,0)}}(e)})),s.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMXB4IiBoZWlnaHQ9IjJweCIgdmlld0JveD0iMCAwIDEgMiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMSAyIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PC9zdmc+";var o={isProbablySVGImage:i}},function(e,t,n){"use strict";function i(e,t){return e&&e.kindOf&&e.kindOf(t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){i(s,r,a,o,l,"next",e)}function l(e){i(s,r,a,o,l,"throw",e)}o(void 0)}))}}function a(e,t,n,i,r,a,s,o){var u,d,h,p,f,g=n,m=i;for(r||(r=0),a||(a=0),s||(s=0),o||(o=l);;){if(u=(m+g)/2,(d=s?c(o,u,s,n,i):u)<=g||d>=m){var _=s?c(o,g,s,n,i):g,v=s?c(o,m,s,n,i):m;void 0===f&&(f=e.call(this,_)-t),void 0===p&&(p=e.call(this,v)-t);var b=Math.max(0,0===p?0:p/a),y=Math.max(0,0===f?0:-f/r);b===y&&(b=p-a,y=-f-r),d=_>v?NaN:b>y?_:v;break}if((h=e.call(this,d)-t)>a)m=u,p=h;else{if(!(h<-r))break;g=u,f=h}}return d}function s(e,t,n,i,r,a,s,l){return o.apply(this,arguments)}function o(){return(o=r(regeneratorRuntime.mark((function e(t,n,i,r,a,s,o,u){var d,h,p,f,g,m,_,v,b,y,w,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=i,h=r,a||(a=0),s||(s=0),o||(o=0),u||(u=l);case 6:if(p=(h+d)/2,!((f=o?c(u,p,o,i,r):p)<=d||f>=h)){e.next=29;break}if(b=o?c(u,d,o,i,r):d,y=o?c(u,h,o,i,r):h,void 0!==v){e.next=18;break}return e.next=15,t.call(this,b);case 15:e.t0=e.sent,e.t1=n,v=e.t0-e.t1;case 18:if(void 0!==_){e.next=24;break}return e.next=21,t.call(this,y);case 21:e.t2=e.sent,e.t3=n,_=e.t2-e.t3;case 24:return w=Math.max(0,0===_?0:_/s),I=Math.max(0,0===v?0:-v/a),w===I&&(w=_-s,I=-v-a),f=b>y?NaN:w>I?b:y,e.abrupt("break",46);case 29:return e.next=31,t.call(this,f);case 31:if(g=e.sent,!((m=g-n)>s)){e.next=38;break}h=p,_=m,e.next=44;break;case 38:if(!(m<-a)){e.next=43;break}d=p,v=m,e.next=44;break;case 43:return e.abrupt("break",46);case 44:e.next=6;break;case 46:return e.abrupt("return",f);case 47:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var l=function(){var e=Math.round,t=1.1;try{t=e(t)}catch(n){}return 1===t?e:function(e){return Math.round(e)}}(),c=function(e,t,n,i,r){var a=e(t/n)*n;return a<i?Math.ceil(i/n)*n:a>r?Math.floor(r/n)*n:a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n(7),r=n(448),a=n(13),s=n(208),o=n(25),l=n(266),c=i.a.extend({shouldExposeRejectionErrors:!1,getIdentifierForDependencies:function(){return r.a(o.arrayPool.getAutodisposingInstanceFromParams.apply(o.arrayPool,arguments))},init:function(){var e=this,t=arguments;e.__s._$fJ$init.apply(e,t),this.readOnly||a.b("AyncObservableProperty must be readOnly."),this.get||a.b("AsyncObservableProperty must be configured with a getter method.")},wasRegistered:function(e,t){var n=this,i=arguments;this.asyncGetter=this.get,this.get=this._syncShieldedGetter;var r="_asyncObservableProperty_at_"+t+"_";this._key_workingState=r+"workingState",n.__s._$tm$wasRegistered.apply(n,i)},_syncShieldedGetter:function(e,t,n,i){for(var r=this,a=o.arrayPool.getAutodisposingInstance(),c=0,d=i.dependencies&&i.dependencies.length;c<d;c++)a[c]=i.internalGet(this,t[c+n]);var p=i.getIdentifierForDependencies.apply(this,a),f=this[i._key_workingState];if(f&&f.inputIdentifier!==p&&(o.objectPool.disposeInstance(f),f=this[i._key_workingState]=void 0),!f){(f=this[i._key_workingState]=o.objectPool.getInstance()).inputIdentifier=p,f.hasFinalResult=!1,f.finalResult=void 0,f.hasIntermediateResult=!1,f.intermediateResult=void 0,f.hasError=!1,f.error=void 0;var g=f.workingStateID=++h,m=i.asyncGetter.call(this,Object(l.b)(u,void 0,f).retain().autorelease(),t,n,i);m&&s.a(m.then)?m.then((function(e){if(!r.isDisposed){var t=r[i._key_workingState];t&&t.workingStateID===g&&(f.finalResult=e,f.hasFinalResult=!0,r.propertyChanged(i.key))}}),(function(e){if(!r.isDisposed){var t=r[i._key_workingState];t&&t.workingStateID===g&&(f.error=e,f.hasError=!0,r.propertyChanged(i.key))}})):(f.finalResult=m,f.hasFinalResult=!0)}return f.hasFinalResult?f.finalResult:f.hasError&&i.shouldExposeRejectionErrors?f.error:f.hasIntermediateResult?f.intermediateResult:void 0},__superMap:{_$fJ$init:"init",_$tm$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AsyncObservableProperty"}});function u(e,t){e.hasIntermediateResult=!0,e.intermediateResult=t}function d(){return c.define.apply(c,arguments)}var h=0},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(240);function r(e){var t=i.a.create(e).ranges();return Array.from(t).map((function(e){return[e.start,e.end]}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(77),a=n(74),s={mixinDependencies:[i.a],itemsInsertedAtIndex:Object(r.c)(a.a),itemsRemovedAtIndex:Object(r.c)(a.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(20),r=n(7),a=n(78),s=n(312),o=n(214),l=Symbol("NOT_SET"),c={mixinDependencies:[i.b,s.a],controlElement:Object(r.b)({get:function(e){return e||this.element}}),isDisabled:Object(r.b)({defaultValue:!1,didChange:function(e){var t=this.controlElement;t&&(e?t.setAttribute("disabled",!0):t.removeAttribute("disabled"))}}),isFocusable:Object(r.b)({dependencies:["isDisabled"],writeDependencies:[],defaultValue:l,get:Object.assign((function(e){return e!==l?e:!this.isDisabled}),{__CW__getter:function(e,t,n,i){return e!==l?e:!i.internalGet(this,t[0+n])}}),set:o.a}),ariaDisabled:Object(a.c)("isDisabled")}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return s}));var i=n(7),r=n(20),a=n(209),s={mixinDependencies:[n(353).a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingPressed",truevalue:"cw-being-pressed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingHovered",truevalue:"cw-being-hovered",attributes:{}}]}}},isBeingPressed:Object(i.b)(!1),isBeingHovered:Object(i.b)(!1),isPointerActivationDisabled:Object(i.b)(!1),pointerActivate:function(e){},pointerHitTest:function(e){var t=document.elementFromPoint(e.clientX,e.clientY);return this.element.contains(t)},pointerDown:function(e){return!this.isPointerActivationDisabled&&0===e.button&&!!this.pointerHitTest(e)&&(this.setPointerCapture(e.pointerId),this.updateHoverPressState(e),!0)},pointerOut:function(e){return this.updateHoverPressState(e),!1},pointerOver:function(e){return this.updateHoverPressState(e),!1},pointerUp:function(e){var t=!1;if(this.getPointerCapture(e.pointerId)!==this?t=!0:this.pointerHitTest(e)?(this.isDisabled||0!==e.button)&&(t=!0):t=!0,t)return this.releasePointerCapture(e.pointerId),this.updateHoverPressState(e),!1;this.releasePointerCapture(e.pointerId);var n=this.isBeingPressed;return this.updateHoverPressState(e),n&&this.pointerActivate(e),!0},click:function(e){0!==e.detail||a.a.sharedInstance.isIE||this.pointerActivate(e)},pointerMove:function(e){return this.updateHoverPressState(e),this.getPointerCapture(e.pointerId)===this},setPointerCapture:function(e){var t=this,n=arguments;return this._capturedPointerId=e,this.sendEvent("lockCursor",this.getPath("style.cursor")),t.__s._$21T$setPointerCapture.apply(t,n)},releasePointerCapture:function(e){var t=this,n=arguments;return this._capturedPointerId=NaN,this.sendEvent("releaseCursor"),t.__s._$27m$releasePointerCapture.apply(t,n)},cancelPointerInteraction:function(){var e=this._capturedPointerId;isNaN(e)||this.releasePointerCapture(e),this.beginBatchSet().setIfChanged("isBeingPressed",!1).setIfChanged("isBeingHovered",!1).end()},updateHoverPressState:function(e){var t=Boolean("pointerOut"!==e.cwType&&this.pointerHitTest(e)),n=this.getPointerCapture(e.pointerId)===this,i=this.isPointerActivationDisabled;this.beginBatchSet().setIfChanged("isBeingPressed",n&&t&&!i).setIfChanged("isBeingHovered",(n||t)&&!i).end()},_releasePointerCaptureWhenUnattached:Object(r.h)("isAttached","isPointerActivationDisabled",(function(e,t){e&&!t||this.cancelPointerInteraction()})),dispose:function(){var e=this,t=arguments;this.cancelPointerInteraction(),e.__s._$2d5$dispose.apply(e,t)},__superMap:{_$21T$setPointerCapture:"setPointerCapture",_$27m$releasePointerCapture:"releasePointerCapture",_$2d5$dispose:"dispose"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(7),r={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["cw-modal-dialog"],attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"modalDialogRole",attributes:{},attribute:"role"},"aria-labelledby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabelledByID",attributes:{},attribute:"aria-labelledby"},"aria-describedby":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaDescribedByID",attributes:{},attribute:"aria-describedby"},tabindex:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tabIndex",attributes:{},attribute:"tabindex"}}}}},isFocusable:!0,tabIndex:Object(i.b)(-1),ariaLabelledByID:Object(i.b)(),ariaDescribedByID:Object(i.b)(),modalDialogRole:Object(i.b)("dialog")}},function(e,t,n){"use strict";n(1),n(0),n(5),n(2),n.d(t,"a",(function(){return a}));var i=n(471),r=n(446),a=i.a.extend({modalDialogDidDismiss:function(){this.hide()},dismissModalDialog:function(){this.view&&this.view.instanceOf(r.b)&&this.view.animateClosed()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalDialogViewController"}})},function(e,t,n){"use strict";n(1),n(2),n(0),n.d(t,"a",(function(){return s}));var i=n(7),r=n(98),a=n(283),s={show:function(){return this.isAttached?r.a.resolve():this.paneManager.presentViewController(this)},hide:function(){return this.isAttached?this.paneManager.dismissViewController(this):r.a.resolve()},toggle:function(){return this.isAttached?this.hide.apply(this,arguments):this.show.apply(this,arguments)},paneManager:Object(i.b)({readOnly:!0,binding:a.a.bindingFor("application")}),isActivePane:Object(i.b)({readOnly:!0,dependencies:["paneManager.activePane"],get:Object.assign((function(){return this===this.getPath("paneManager.activePane")}),{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),keyDown:function(e){var t=this._keyEquivalentViews;if(!t)return!1;for(var n=t.length;n--;){var i=t[n];!i.isDisposed&&i.isAttached&&i.keyEquivalent||t.splice(n,1)}return t.some((function(t){return t&&t.performKeyEquivalent&&t.performKeyEquivalent(e)}))},registerKeyEquivalent:function(e){var t=this._keyEquivalentViews||(this._keyEquivalentViews=[]);-1===t.indexOf(e)&&t.push(e)}}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return i})),n(5);var i=n(202).a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}]}},className:"cw-ui-popup-view",__QUALIFIED_CLASS_NAME__:"PopupView"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(138),r=Object(i.b)("AlertStyle",{ALERT:"alert",ACTION_SHEET:"action-sheet"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(40),r=n(51),a=n(20),s=n(7),o=i.a.extend(a.b,{target:Object(s.b)(),targetLayout:Object(s.b)(),targetIsHidden:Object(s.b)(!1),recomputeLayoutIfNecessary:r.a,shouldMeasure:Object(s.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"LayoutMeasurer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(220),a=n(264),s=n(120),o=n(228),l=n(773),c=i.a.extend(r.a,l.a,{jsonRpcVersion:"2.0",generateCallMessageFor:function(e){for(var t={jsonrpc:this.jsonRpcVersion,id:d(),method:e},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(t.params=i),t},generateNotificationMessageFor:function(e){for(var t={jsonrpc:this.jsonRpcVersion,method:e},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(t.params=i),t},generateErrorMessageFor:function(e,t){var n=t.code;Object(a.a)(n)||(n=o.a.INTERNAL_ERROR);var i=t.message,r=t.data,l={jsonrpc:this.jsonRpcVersion,id:e,error:{code:n,message:i}};return Object(s.a)(r)&&(l.error.data=r),l},generateResultMessageFor:function(e,t){return{jsonrpc:this.jsonRpcVersion,id:e,result:t}},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcMessageFormatterV2"}}),u=0;function d(){return"CW.JsonRpcMessageFormatterV2:"+ ++u}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(123),r=n(74),a={mixinDependencies:[i.a],jsonRpcVersion:"0",generateCallMessageFor:r.a.define(),generateErrorMessageFor:r.a.define(),generateNotificationMessageFor:r.a.define(),generateResultMessageFor:r.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(301),r=n(387);function a(e,t){if("*"===e||"*"===t)return!0;var n=r.a.parse(e),a=r.a.parse(t);if(Object(i.a)(n.protocol)||Object(i.a)(a.protocol)||n.protocol!==a.protocol)return!1;if(Object(i.a)(n.hostname)||Object(i.a)(a.hostname)||n.hostname!==a.hostname)return!1;if(e===t)return!0;var s=n.port;Object(i.a)(s)&&(s="https:"===n.protocol?"443":"80");var o=a.port;return Object(i.a)(o)&&(o="https:"===a.protocol?"443":"80"),s===o}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(99),r=regeneratorRuntime.mark(l),a=i.b.Possible,s=i.b.Ended,o=i.b.Failed;function l(e){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:if((t=e.sent)===a){e.next=5;break}throw new Error("DiscreteGestureRecognizer: state must be initialized to Possible.");case 5:return void(e.next=7);case 7:if((t=e.sent)!==o){e.next=12;break}return e.abrupt("return");case 12:if(t!==s){e.next=16;break}return e.abrupt("return");case 16:throw new Error("GestureRecognizer: invalid state "+t+" for DiscreteGestureRecognizer after Possible. Must be either Ended or Failed.");case 17:case"end":return e.stop()}}),r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(453),r=n(15),a=i.a.extend({deltaX:Object(r.d)(0),deltaY:Object(r.d)(0),consumeX:s("deltaX"),consumeY:s("deltaY"),isEmpty:Object(r.d)({get:function(){return 0===this.get("deltaX")&&0===this.get("deltaY")}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ScrollEvent"}});function s(e){return function(t){var n,i,r=this.get(e);return void 0===t?t=r:(n=t,i=r,t=Math.abs(n)<Math.abs(i)?n:i),this.set(e,r-t),t}}},function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}));var r=function(e){var t,n;function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.initialOffset,r=void 0===i?0:i,a=n.initialPosition,s=void 0===a?0:a;return(t=e.call(this,Object.assign({},n,{initialPosition:s-r}))||this).initialOffset=r,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a.calculatePositionAtTime=function(e){var t=1e3*this.initialVelocity;e/=1e3;var n=Math.exp(-11.25*e);return(this.initialOffset+t*e)*n},a.calculateVelocityAtTime=function(e){var t=1e3*this.initialVelocity,n=-11.25*(e/=1e3);return Math.exp(n)*((1+n)*t+-11.25*this.initialOffset)/1e3},a.calculateTimeAtPosition=function(e){throw new Error("BounceAnimationg#calculateTimeAtPosition: not implemented")},r}(n(475).a)},function(e,t,n){"use strict";n(0),n(4),n(6),n(10),n(12),n.d(t,"a",(function(){return p}));var i=n(404),r=n(472),a=n(193),s=n(199),o=n(55),l=n(7),c=n(579),u=n(779),d=n(575),h=n(477),p=u.a.extend({viewClass:Object(s.b)({additionalClassNames:Object(s.b)(["cw-list-view"]),mixinDependencies:[i.a]}),view:Object(l.b)({downstreamBindings:{topInset:"(owner).layoutMetrics.topInset"}}),layoutDelegate:Object(o.c)(d.a),collection:Object(l.b)(),presenter:Object(l.b)({defaultValue:Object(o.c)(c.a.extend({itemViewDidMove:function(e,t){var n=e.element.style,i=t.width,s=t.height,o=t.x,l=t.y,c=this.presentingView;c&&c.hasMixin(r.a)&&(o+=c.nativeScrollX,l+=c.nativeScrollY),Object(a.d)(n,o,l),n.width=i===this.owner.viewportWidth?"100%":i+"px",n.height=s+"px"}})),downstreamBindings:{itemViewClass:"(owner).itemViewClass"}}),itemViewClass:Object(l.b)({readOnly:!0,defaultValue:h.a}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListViewController"}})},function(e,t,n){"use strict";n(0),n(4),n(10),n.d(t,"a",(function(){return w}));var i=n(7),r=n(355),a=n(20),s=n(254),o=n(278),l=n(209),c=n(255),u=n(780),d=n(781),h=n(13),p=n(120),f=n(127),g=n(318),m=n(15),_=n(55),v=n(783),b=n(782),y=n(222),w=c.a.extend(u.a,d.a,{staticMembers:{createCollection:function(e){Object(h.b)("CollectionViewController#createCollection called on a class with no implementation.")},updateCollection:function(e,t){Object(h.b)("CollectionViewController#updateCollection called on a class with no implementation.")},__QUALIFIED_CLASS_NAME__:"CollectionViewController"},viewClass:b.a,init:function(e){var t=this,n=arguments,r=this.layoutMetrics,a=r,s=this.layoutDelegate.LayoutMetricsClass;Object(p.a)(r)?r=s.create(r):Object(f.a)(r)||(r=s.create()),a!==r&&(this.layoutMetrics=r),t.__s._$2RX$init.apply(t,n),r=this.layoutMetrics;var o=[],l=[],c=this._previousLayoutMetrics;for(var u in r.getMetadataByType(i.a))l.push(u),c[u]=r[u],o.push("layoutMetrics."+u);this._layoutMetricsKeys=l,o.push("_updateWhenContentsChange"),this._layoutMetricsObserver=this.observe({inputs:o,notifyOnCreate:!1,callback:this._updateWhenLayoutMetricsChange})},_layoutMetricsKeys:null,_previousLayoutMetrics:Object(m.d)({strong:!0,defaultValue:Object(_.c)(Object)}),_changedKeys:Object(m.d)({strong:!0,defaultValue:Object(_.c)(r.a)}),_layoutMetricsObserver:null,_updateWhenLayoutMetricsChange:function(){var e=this._changedKeys;e.clear();for(var t=this._layoutMetricsKeys,n=t.length,i=this._previousLayoutMetrics,r=this.layoutMetrics,a=0;a<n;a++){var s=t[a],o=r[s];o!==i[s]&&(e.add(s),i[s]=o)}0!==e.size&&this.update(y.a.create({layoutMetricsChanged:e}))},viewportWidth:Object(i.b)(0),viewportHeight:Object(i.b)(0),layoutMetrics:Object(i.b)({strong:!0}),layoutController:Object(i.b)({strong:!0,defaultValue:Object(_.c)(v.a),downstreamBindings:{collection:"(owner).collection",viewportWidth:"(owner).viewportWidth",viewportHeight:"(owner).viewportHeight",layoutDelegate:"(owner).layoutDelegate",presenter:"(owner).presenter",layoutMetrics:"(owner).layoutMetrics"}}),_updateWhenContentsChange:Object(a.g)("collection.contentsDidChange","collection.handleProvider.handlesDidUpdate",(function(e){e&&this.update(y.a.create({itemsChanges:e.context}))})),_updateWhenCollectionChanges:Object(a.g)("collection",(function(e){this.update(y.a.create({collectionChanged:!0}))})),layoutDelegate:Object(i.b)({strong:!0}),contentSize:Object(i.b)({strong:!0,dependencies:["collection","collection.contentsDidChangeUntracked","layoutController.spaceAroundViewport"],readOnly:!0,get:Object.assign((function(){var e=this.layoutController,t=this.collection,n=this.layoutDelegate;if(e.visibleCells.length>0){var i=this.getPath("layoutController.spaceAroundViewport"),r=this.viewportWidth+i.left+i.right,a=this.viewportHeight+i.top+i.bottom;return s.a.create(r,a)}if(t&&t.length>0){var o=n.setUpFirstCell(e,t).retain(this,"CollectionViewController#contentSize: cell"),l=o.bottom+n.spaceBelowCell(e,o),c=s.a.create(o.width,l);return o.release(this,"CollectionViewController#contentSize: cell"),c}return s.a.create(0,0)}),{__CW__getter:function(e,t,n,i){var r=this.layoutController,a=i.internalGet(this,t[0+n]),o=this.layoutDelegate;if(r.visibleCells.length>0){var l=i.internalGetPath(this,t[2+n]),c=this.viewportWidth+l.left+l.right,u=this.viewportHeight+l.top+l.bottom;return s.a.create(c,u)}if(a&&a.length>0){var d=o.setUpFirstCell(r,a).retain(this,"CollectionViewController#contentSize: cell"),h=d.bottom+o.spaceBelowCell(r,d),p=s.a.create(d.width,h);return d.release(this,"CollectionViewController#contentSize: cell"),p}return s.a.create(0,0)}})}),presenter:Object(i.b)({strong:!0,downstreamBindings:{views:"(owner).view.itemViews",layoutMetrics:"(owner).layoutMetrics",presentingView:"(owner).view"}}),layoutContext:l.a.sharedInstance.window,_measureViewport:Object(a.h)({inputs:["isAttached","view.isAttached","layoutContext.width","layoutContext.height"],callback:function(e,t){e&&t?this.measureViewport():this.update(y.a.create({everythingChanged:!0}))}}),measureViewport:function(){if(this.isAttached){var e=this.view;if(e){var t=e.element,n=1,i=1;t&&(n=t.offsetWidth,i=t.offsetHeight);var r=this.viewportWidth,a=this.viewportHeight;r===n&&a===i||(this.beginBatchSet().set("viewportWidth",n).set("viewportHeight",i).end(),n>0&&i>0&&(this._changedWhileHidden?(this.update(y.a.create({everythingChanged:!0})),this._changedWhileHidden=!1):this.update(y.a.create({sizeChangedBy:s.a.create({width:n-r,height:i-a})})),this.updateScrollBounds()))}}},collection:Object(i.b)({strong:!0}),update:function(e){if(this.isViewLoaded){var t=this.viewportWidth,n=this.viewportHeight;if(0!==n&&0!==t){var i=this.view;i.height=n,i.width=t,this.layoutController.update(e)}else this._changedWhileHidden=!0}},_changedWhileHidden:!1,_update:function(){Object(g.b)(this.update,arguments,this)},updateScrollBounds:Object(a.h)("layoutController.spaceAroundViewport.left","layoutController.spaceAroundViewport.top","layoutController.spaceAroundViewport.right","layoutController.spaceAroundViewport.bottom",(function(e,t,n,i){if(void 0!==e&&void 0!==n&&void 0!==t&&void 0!==i){var r=this.viewportHeight,a=-e,s=n+this.viewportWidth,o=-t,l=i+r;this.view.beginBatchSet().set("scrollMinX",a).set("scrollMaxX",s).set("scrollMinY",o).set("scrollMaxY",l).end()}})),scrollBy:function(e,t){var n=y.a.create();n.movedBy=o.a.create(e,t),this.update(n)},didScroll:function(e,t){this.scrollBy(-e,-t)},showItem:function(e,t,n){this.layoutController.showItem(e,t,n)},scrollToItem:function(e){this.layoutController.scrollToItem(e)},scrollToHandle:function(e){this.layoutController.scrollToHandle(e)},__superMap:{_$2RX$init:"init"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(20),r=n(7),a=n(262),s=n(55),o={mixinDependencies:[i.b],layoutContext:Object(r.b)({strong:!0,type:a.b,defaultValue:Object(s.c)(a.a)})}},function(e,t,n){"use strict";n(4),n.d(t,"a",(function(){return o}));var i=n(199),r=n(190),a=n(13),s=n(405),o={viewClass:Object(i.b)({isFocusable:!0}),init:function(){var e=this,t=arguments;e.__s._$D1$init.apply(e,t),this.view.hasMixin(s.a)||Object(a.b)("KeyboardScrollViewControllerSupport cannot be used on a ViewController where the view lacks ScrollSupport.")},keyDown:function(e){var t,n=!0;switch(e.keyCode){case r.a.SPACE:t=e.shiftKey?"scrollToPreviousPage":"scrollToNextPage";break;case r.a.PAGEUP:t="scrollToPreviousPage";break;case r.a.PAGEDOWN:t="scrollToNextPage";break;case r.a.HOME:t="scrollToFirstPage";break;case r.a.END:t="scrollToLastPage";break;default:n=!1}return n&&(this.sendEvent(t,e),e.preventDefault()),n||"function"===typeof this.__s._$VY$keyDown&&!!this.__s._$VY$keyDown.call(this,e)},scrollToPreviousPage:function(){this.view.pageUp()},scrollToNextPage:function(){this.view.pageDown()},scrollToFirstPage:function(){this.view.scrollTo(void 0,0)},scrollToLastPage:function(){this.view.scrollTo(void 0,100)},__superMap:{_$D1$init:"init",_$VY$keyDown:"keyDown"}}},function(e,t,n){"use strict";n(0),n(4),n.d(t,"a",(function(){return d})),n(10);var i=n(202),r=n(405),a=n(353),s=n(15),o=n(55),l=n(40),c=n(7),u=n(468),d=i.a.extend(r.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"itemViews",classes:["cw-collection-item-container","cw-scrolling-container"]}],classes:["cw-collection-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"nativeScrollIsEnabled",truevalue:"cw-native-scrolling",attributes:{}}]}},className:"cw-ui-collections-collection-view",__QUALIFIED_CLASS_NAME__:"CollectionView"},_scrollContainer:null,scrollContainer:Object(s.d)({get:function(){return this._scrollContainer||(this._scrollContainer=this.element.getElementsByClassName("cw-collection-item-container")[0])}}),_sizerView:void 0,setUpSizerElement:function(e){var t=this._sizerView=h.create({element:e});this.itemViews.push(t)},tearDownSizerElement:function(){this.itemViews.remove(this._sizerView)},focusedChild:Object(c.b)({get:function(e){if(!e||!e.isPooledInDom)return e},set:function(e){return e}}),_scrollBy:function(e,t){this.sendEvent("didScroll",e,t)},itemViews:Object(c.b)({strong:!0,defaultValue:Object(o.c)(u.a)})}),h=l.a.extend(a.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"ElementView"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(20),r=n(7),a=n(17),s=n(262),o=n(278),l=n(40),c=n(55),u=n(285),d=n(130),h=n(13),p=n(222),f=n(784),g=l.a.extend(i.b,{collection:Object(r.b)(),layoutDelegate:Object(r.b)({strong:!0}),layoutMetrics:Object(r.b)({strong:!0}),presenter:Object(r.b)({strong:!0}),viewportWidth:Object(r.b)(1024),viewportHeight:Object(r.b)(768),horizontalOverdraw:Object(r.b)(0),verticalOverdraw:Object(r.b)(0),_updateViewportBounds:Object(i.h)("viewportWidth","viewportHeight","horizontalOverdraw","verticalOverdraw",(function(e,t,n,i){var r=this.viewportBounds;a.a.pause(),r.x=-n,r.y=-i,r.width=e+2*n,r.height=t+2*i,a.a.resume()})),viewportBounds:Object(r.b)({strong:!0,defaultValue:function(){return s.a.create({x:-this.horizontalOverdraw,y:-this.verticalOverdraw})}}),spaceAroundViewport:Object(r.b)({strong:!0,defaultValue:Object(c.c)(f.a)}),visibleCells:Object(r.b)({strong:!0,defaultValue:u.a.create().retain(window,"shared visibleCells initial value")}),_tmp_cellsArray:Object(c.c)(Array),showItem:function(e,t,n){var i=this.collection.handleFor(e);if(i.isValid){var r=o.a.create(t,n);this.update(p.a.create({itemShown:i,itemShownAt:r}))}else d.b.warn("LayoutController: Attempted to scroll to item not in collection",{item:e})},scrollToItem:function(e){var t=this.collection.handleFor(e);this.scrollToHandle(t)},scrollToHandle:function(e){e.isValid&&!e.wasRemoved?this.update(p.a.create({itemScrolledTo:e})):d.b.warn("LayoutController: Attempted to scroll to handle not in collection",{handle:e,handlePosition:e.position,handleIsValid:e.isValid,handleWasRemoved:e.wasRemoved})},rectForItem:function(e){var t=this.visibleCells;if(0===t.length)return null;var n=this.layoutDelegate.getCellForItem(this,this.collection,t,e);return n?n.rect:void 0},_beginUpdate:function(e,t,n){return this._isUpdating&&Object(h.b)("LayoutController cannot update while an update is already in progress.",{invalidationContext:e}),this._isUpdating=!0,n||Object(h.b)("LayoutController#_beginUpdate: layoutDelegate is required",{invalidationContext:e}),n.acquireVisibleCells(this,t,e)},_finishUpdate:function(e,t,n,i,r){this.visibleCells=r,this._handleItemEnters(r),this._handleItemMoves(r),this._handleItemExits(i),i.clear(),this._isUpdating=!1,this.computeSpaceAroundViewport(e)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a.create({everythingChanged:!0});e.retain(this,"LayoutController#update: invalidationContext");var t=this.collection,n=this.layoutDelegate;if(n){var i=this._beginUpdate(e,t,n),r=this.visibleCells;r&&r.length>0&&n.reusePreviousVisibleCells(this,t,i,r,e),0===i.length&&n.initializeVisibleCells(this,t,i,r,e),0!==i.length&&n.completeVisibleCells(this,t,i,e),n.finalizeVisibleCells(this,t,i,e),this._finishUpdate(e,t,n,r,i),e.release(this,"LayoutController#update: invalidationContext")}else e.release(this,"LayoutController#update: invalidationContext")},_handleItemExits:function(e){var t,n,i=e.length,r=this._tmp_cellsArray;for(r.length=0,t=0;t<i;t++)(n=e.objectAt(t)).isLaidOut||r.push(n);var a=this.presenter;for(a.cellsWillExit(r),i=r.length,t=0;t<i;t++)(n=r[t]).wasLaidOut=!1,a.cellDidExit(n);a.cellsDidExit(r)},_handleItemEnters:function(e){var t,n,i=e.length,r=this._tmp_cellsArray;for(r.length=0,t=0;t<i;t++)(n=e.objectAt(t)).wasLaidOut||r.push(n);var a=this.presenter;for(a.cellsWillEnter(r),i=r.length,t=0;t<i;t++)n=r[t],a.cellDidEnter(n),n.wasLaidOut=!0;a.cellsDidEnter(r),r.length=0},_handleItemMoves:function(e){var t=this.presenter;t.cellsWillMove(e);for(var n=0,i=e.length;n<i;n++){var r=e.objectAt(n);t.cellDidMove(r)}t.cellsDidMove(e)},computeSpaceAroundViewport:function(e){var t=this.spaceAroundViewport;return a.a.pause(),0===this.visibleCells.length?(t.left=0,t.right=0,t.top=0,t.bottom=0):(t=this.layoutDelegate.computeSpaceAroundViewport(this,e),this.spaceAroundViewport=t),a.a.resume(),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"CollectionLayoutController"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(40),r=n(20),a=n(7),s=i.a.extend(r.b,{left:Object(a.b)(0),top:Object(a.b)(0),right:Object(a.b)(0),bottom:Object(a.b)(0),isEstimated:Object(a.b)(!1),toString:function(){var e=this.left,t=this.top,n=this.right,i=this.bottom;return this.__s._$hH$toString.call(this)+" { left: "+e+", top: "+t+", right: "+n+", bottom: "+i+" }"},__superMap:{_$hH$toString:"toString"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SpaceAroundViewport"}})},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return g}));var i=n(20),r=n(7),a=n(15),s=n(55),o=n(476),l=n(285),c=n(40),u=n(202),d=n(13),h=n(82),p=n(786),f={mixinDependencies:[i.b],mappedViews:Object(a.d)({strong:!0,defaultValue:Object(s.c)(o.a)}),activeViews:Object(a.d)({strong:!0,defaultValue:Object(s.c)(l.a)}),viewsToCells:Object(a.d)({strong:!0,defaultValue:Object(s.c)(Map)}),cellsToViews:Object(a.d)({strong:!0,defaultValue:Object(s.c)(Map)}),pools:Object(a.d)({strong:!0,defaultValue:Object(s.c)(Map)}),viewForCell:function(e,t){var n=this.cellsToViews.get(e);if(!n){if(!t)return null;n=this._getViewOfClass(t),this.cellsToViews.set(e,n),this.viewsToCells.set(n,e)}return n},cellForView:function(e){return this.viewsToCells.get(e)},releaseViewForItem:function(e){var t=this.cellsToViews.get(e);t||Object(d.b)("No view for cell"),this._releaseView(t,e),this._poolView(t)},releaseView:function(e){var t=this.viewsToCells.get(e);e||Object(d.b)("No cell for view"),this._releaseView(e,t),this._poolView(e)},_getViewOfClass:function(e){var t,n=this.pools.get(e);return n||(n=[],this.pools.set(e,n)),n.length>0?t=n.pop():(t=this.viewForViewClass(e),this.mappedViews.push(t)),t.isPooledInDom=!1,this.activeViews.push(t),t},viewForViewClass:function(e){return e.create()},_releaseView:function(e,t){this.activeViews.remove(e),this.cellsToViews.delete(t),this.viewsToCells.delete(e)},_poolView:function(e){this.pools.get(e.constructor).push(e),e.isPooledInDom=!0}},g=c.a.extend(f,p.a,{itemViewClass:Object(r.b)(u.a),_oldItemViewClass:null,_clearItemViewCache:Object(i.h)("itemViewClass",(function(e){var t=this._oldItemViewClass;t&&this.replaceViewsOfClass(t),this._oldItemViewClass=e})),replaceViewsOfClass:function(e){for(var t=this.activeViews,n=t.length-1;n>=0;n--){var i=t.objectAt(n);if(Object(h.a)(i,e)){var r=this.viewsToCells.get(i);this.cellDidExit(r),this.cellDidEnter(r)}}},views:Object(r.b)(),presentingView:Object(r.b)({type:u.a}),dataProperty:"content",viewClassKeysByCellType:{item:"itemViewClass"},itemViewClassForItem:function(e){var t=e.cellType,n=this.viewClassKeysByCellType[t],i=this[n];return i||Object(d.b)('ItemViewPresenter: no view class for cell type "%{cellType}" and view class key "%{viewClassKey}"',{cellType:t,viewClassKey:n}),i},viewForViewClass:function(e){return e.create({layoutMetrics:this.bindingFor("layoutMetrics")})},cellDidEnter:function(e){var t=this.viewForCell(e,this.itemViewClassForItem(e));this.itemViewDidEnter(t,e),t.isAttached||this.views.push(t),t.layout=e},cellDidMove:function(e){var t=this.viewForCell(e);t&&this.itemViewDidMove(t,e)},cellDidExit:function(e){var t=this.viewForCell(e);this.itemViewDidExit(t,e),this.releaseViewForItem(e)},itemViewDidEnter:function(e,t){e.set(this.dataProperty,t.value)},itemViewDidMove:function(e,t){},itemViewDidExit:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ItemViewPresenter"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(20),r=n(7),a=n(123),s=n(77),o=n(74),l={mixinDependencies:[a.a,i.b],layoutMetrics:Object(r.b)({strong:!0}),cellsWillEnter:function(e){},cellDidEnter:Object(s.c)(o.a),cellsDidEnter:function(e){},cellsWillMove:function(e){},cellDidMove:Object(s.c)(o.a),cellsDidMove:function(e){},cellsWillExit:function(e){},cellDidExit:Object(s.c)(o.a),cellsDidExit:function(e){}}},function(e,t,n){"use strict";function i(e,t,n){var i=e.length;n.length!==i&&(n.length=i);for(var r=0;r<i;r++)n[r]=t(e[r],r);return n}function r(e,t){for(var n=0,i=e.length,r=0;r<i-n;r++)if(e[r]===t&&(n++,r--),n){var a=r+1;e[a]=e[a+n]}e.length-=n}function a(e,t){return e-t}n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(13),a=n(15),s=n(117),o=n(215),l=n(93),c=i.a.extend({init:function(){var e=this,t=arguments;this._attachments=[],e.__s._$4m$init.apply(e,t)},_windowInstanceId:null,openWindow:function(){l.a.get("currentUser").isServiceActive("mail")?this._windowInstanceId=o.a.openWindowApplication(this.get("_mailComposeURL"),"","width=810,height=677,status=no,toolbar=no"):r.b("Trying to compose email for user without active mail service")},closeWindow:function(){var e,t;this._windowInstanceId&&(e=o.a.windowApplications[this._windowInstanceId])&&(t=e.window)&&t.close()},_mailComposeURL:a.d({readOnly:!0,get:function(){var e=s.c();s.a.sharedInstance.isRTL&&(e=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return"https://"+window.location.hostname+"/message/current/"+e+"/index.html#compose?willPM=true"}}),to:a.d(""),cc:a.d(""),bcc:a.d(""),subject:a.d(""),body:a.d(""),addAttachment:function(e,t,n,i){this.get("_attachments").push({fileName:e,type:t,size:n,url:i})},_attachments:null,addAttachments:function(e){this._attachments=this._attachments.concat(e)},populateFields:function(){this.get("hasValidAttachments")||r.b("You must supply property `type` (mime-type) for every attachment.");var e={to:this.get("to"),subject:this.get("subject"),body:this.get("body"),cc:this.get("cc"),bcc:this.get("bcc"),attachments:this._attachments,appName:l.a.cloudOSApplication.capitalizedName};o.a.passWindowApplicationMessage(this._windowInstanceId,"populateFields",e)},hasValidAttachments:a.d({readOnly:!0,get:function(){var e=this._attachments;if(e)for(var t=0,n=e.length;t<n;t++)if(!e[t].type)return!1;return!0}}),__superMap:{_$4m$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ComposeEmailController"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(20),a=n(7),s=n(139),o=n(256),l=n(25),c=i.a.extend(r.b,{owner:a.b(),priority:1/0,value:a.b(),targetValue:a.b(),allowsDowngrades:!0,defersDowngrades:!1,incrementsDowngrades:void 0,allowsCrossgrades:!0,defersCrossgrades:!1,allowsUpgrades:!0,defersUpgrades:!1,incrementsUpgrades:void 0,comparator:function(e,t){return e===t?0:e<t?-1:1},reset:function(){this._isResetting=!0,this._maintainValue(),this._isResetting=!1},init:function(){var e=this,t=arguments,n=arguments[0]||l.objectPool.getAutodisposingInstance();this._prefs=[("allowsDowngrades"in n?n:this).allowsDowngrades,("defersDowngrades"in n?n:this).defersDowngrades,("allowsCrossgrades"in n?n:this).allowsCrossgrades,("defersCrossgrades"in n?n:this).defersCrossgrades,("allowsUpgrades"in n?n:this).allowsUpgrades,("defersUpgrades"in n?n:this).defersUpgrades],this._initialValue=this.value,e.__s._$22U$init.apply(e,t)},_scheduleUpdate:function(){this._isScheduled=!0,d.push(this),f()},_maintainValue:r.h("targetValue",(function(e){var t=this.value,n=this._isResetting?this._initialValue:t;if(e===n)return this._isResetting&&t!==n&&(this.value=n),this._wantsScheduledUpdate=!1,void(this._wantsTargetValue=void 0);if(void 0===n)return this._wantsScheduledUpdate=!1,this._wantsTargetValue=void 0,void(t!==e&&(this.value=e));var i=this.comparator(e,n),r=this._prefs,a=2*(i+1),s=r[a+0],o=r[a+1];s&&(o?(this._wantsScheduledUpdate=!0===o||Date.now()+o,this._wantsTargetValue=e,this._isScheduled||this._scheduleUpdate(),t!==n&&(this.value=n)):(this._wantsScheduledUpdate=!1,this._wantsTargetValue=void 0,t!==e&&(this.value=e)))})),__superMap:{_$22U$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ValueRatchet"}}),u=function(){var e;if(h=null,p&&(clearTimeout(p),p=null),d.length){var t=l.arrayPool.getAutodisposingInstanceFromFilter(d,m);d.length=0,d.push.apply(d,t),d.sort(g);var n=Date.now(),i=n+2,r=l.arrayPool.getAutodisposingInstance();do{if(e=d.pop())if(e._wantsScheduledUpdate>n)r.push(e);else if(e._isScheduled=!1,e._wantsScheduledUpdate){var a=e._wantsTargetValue;e._wantsScheduledUpdate=!1,e._wantsTargetValue=void 0,e.value=a}}while(d.length&&i>Date.now());if(d.push.apply(d,r),d.length&&!r.length)f();else if(r.length){for(var o=1/0,c=0;e=d[c];c++){var u=e._wantsScheduledUpdate;u>=!0&&o>u&&(o=u)}p=s.a(f,o-Date.now())}}},d=[],h=null,p=null,f=function(){h||(h=o.a(u))},g=function(e,t){return-(e.priority-t.priority)},m=function(e){return e&&!e.isDisposed}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(7),r=n(20),a={mixinDependencies:[n(403).a],isViewportSizeDOMWritingEnabled:i.b(!0),_renderViewportSize:r.h("viewportWidth","viewportHeight","isViewportSizeDOMWritingEnabled",(function(e,t,n){this.style.set("width",n?e:void 0).set("height",n?t:void 0)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),r={hasNativeSupport:"undefined"!==typeof atob,decodeToBytes:function(e){return this.hasNativeSupport?l(atob(e)):this._jsDecodeToBytes(e)},encodeFromBytes:function(e){return this.hasNativeSupport?btoa(c(e)):this._jsEncodeFromBytes(e)},decodeToString:function(e){if(this.hasNativeSupport)return atob(e);var t=c(this._jsDecodeToBytes(e,a));return a.length=0,t},encodeFromString:function(e){if(this.hasNativeSupport)return btoa(e);var t=this._jsEncodeFromBytes(l(e,a));return a.length=0,t},_jsDecodeToBytes:function(e,t){var n=e.length,i="="===e[n-2]?2:"="===e[n-1]?1:0,r=Math.ceil(3*n/4)-i;t&&(t.length=r);var a,s,l,c,u=t||(Uint8Array?new Uint8Array(r):new Array(r));if(!e)return u;for(var d=0,h=0;h<n;h+=4)a=o[e.charAt(h)],s=o[e.charAt(h+1)],l=o[e.charAt(h+2)],c=o[e.charAt(h+3)],u[d++]=a<<2|s>>4,64!==l&&(u[d++]=(15&s)<<4|l>>2),64!==c&&(u[d++]=(3&l)<<6|c);return u},_jsEncodeFromBytes:function(e){var t,n,i,r="",a=e.length,o=8*a;for(t=0;t<a;t+=3)n=8*t,i=e[t]<<16|e[t+1]<<8|e[t+2],r+=s[i>>>18],r+=s[i>>>12&63],r+=n+12<=o?s[i>>>6&63]:"=",r+=n+18<=o?s[i>>>0&63]:"=";return r}},a=[],s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=function(){for(var e={},t=0,n=s.length;t<n;t++)e[s[t]]=t;return e}();function l(e,t){var n=e.length;t&&(t.length=n);var r,a,s=t||(Uint8Array?new Uint8Array(n):new Array(n));for(r=0;r<n;r++)a=e.charCodeAt(r),s[r]=a,a>255&&Object(i.b)("Only strings containing 8-bit character codes (<= 255) may be encoded as Base64.");return s}function c(e){var t,n="",i=e.length;for(t=0;t<i;t++)n+=String.fromCharCode(e[t]);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,r=n(20),a=n(51),s=n(7),o=n(55),l=n(256),c=n(324),u=(n(793),n(466)),d=n(203),h=n(25),p={mixinDependencies:[r.b,{}],staticMembers:{init:function(){var e=this,t=arguments;e.__s._$DI$init.apply(e,t);var n=this.prototype,i=n._adornmentKeys=[],r=n._lazyAdornmentKeys=[],a=n._immediateAdornmentKeys=[],s=n._adornmentClasses={},o=n._adornmentProperties=n.getMetadataByType(_());for(var l in o)if(!Object.prototype.hasOwnProperty(l)){var c=o[l],u=c.adornmentClass;u&&(s[l]=u,i.push(l),(c.appliesImmediately?a:r).push(l))}},__superMap:{_$DI$init:"init"}},adornmentWasAdded:a.a,adornmentWillBeRemoved:a.a,canAcceptNewLazyAdornments:s.b(!0),canAcceptAllLazyAdornments:s.b(!1),init:function(){var e=this,t=arguments;e.__s._$pZ$init.apply(e,t),this.ensureImmediateAdornmentExistences(),this.ensureLazyAdornmentNonexistences()},cleanup:function(){var e=this,t=arguments;this.ensureLazyAdornmentNonexistences(),f.remove(this),e.__s._$11K$cleanup.apply(e,t)},forEachAdornment:function(e,t){for(var n,i=this._adornmentKeys,r=this._adornments,a=0;n=i[a];a++){var s=r[n];s&&e.call(t,s)}},ensureAdornmentExistence:function(e){var t=this._adornments;if(t[e])return!1;var n=this._adornmentClasses[e].create(this);return n.willBeAddedToParent(),this[e]=t[e]=n,this.adornmentWasAdded(e,n),n.wasAddedToParent(),!0},ensureAdornmentNonexistence:function(e,t){var n=this._adornments;this._adornmentProperties[e].appliesImmediately||t||(this._adornmentExistenceNeeds[e]=void 0,this._needsAdditionalLazyAdornments=!0);var i=n[e];return!!i&&(this.adornmentWillBeRemoved(e),i.willBeRemovedFromParent(),this[e]=n[e]=void 0,i.wasRemovedFromParent(),!0)},ensureImmediateAdornmentExistences:function(){for(var e,t=this._immediateAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentExistence(e)},ensureImmediateAdornmentNonexistences:function(){for(var e,t=this._immediateAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentNonexistence(e)},ensureLazyAdornmentExistences:function(){this._needsAdditionalLazyAdornments=!1;for(var e,t=this._lazyAdornmentKeys,n=this._adornmentClasses,i=this._adornmentExistenceNeeds,r=0;e=t[r];r++){var a=n[e].shouldExistInHost(this);i[e]=a,a&&this.ensureAdornmentExistence(e)}},ensureLazyAdornmentNonexistences:function(){for(var e,t=this._lazyAdornmentKeys,n=0;e=t[n];n++)this.ensureAdornmentNonexistence(e)},ensureAdornmentExistences:function(){this.ensureImmediateAdornmentExistences(),this.ensureLazyAdornmentExistences()},ensureAdornmentNonexistences:function(){this.ensureImmediateAdornmentNonexistences(),this.ensureLazyAdornmentNonexistences()},ensureNextLazyAdornmentExistence:function(){for(var e,t=this._lazyAdornmentKeys,n=this._adornmentExistenceNeeds,i=this._adornmentClasses,r=!1,a=0;(e=t[a])&&!r;a++){var s=n[e];if(void 0===s){var o=i[e];s=n[e]=Boolean(o.shouldExistInHost(this))}!1!==s&&!0===s&&this.ensureAdornmentExistence(e)&&(r=!0)}return e||(this._needsAdditionalLazyAdornments=!1),r},_reevaluateAdornmentExistenceNeed:function(e){var t=this._adornmentExistenceNeeds,n=t[e];void 0!==n?(!1===n&&(n=t[e]=void 0,this._needsAdditionalLazyAdornments=!0),!0===n&&((n=t[e]=Boolean(this._adornmentClasses[e].shouldExistInHost(this)))||this.ensureAdornmentNonexistence(e,!0))):this._needsAdditionalLazyAdornments=!0},_adornments:o.c(Object),_adornmentExistenceNeeds:o.c(Object),_needsAdditionalLazyAdornments:s.b(!1),_shouldBeQueuedForAdditionalLazyAdornments:s.b({readOnly:!0,dependencies:["canAcceptAllLazyAdornments","canAcceptNewLazyAdornments","_needsAdditionalLazyAdornments"],get:Object.assign((function(){return!this.canAcceptAllLazyAdornments&&this.canAcceptNewLazyAdornments&&this._needsAdditionalLazyAdornments}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])}}),didChange:function(e){e?(f.add(this),g()):f.remove(this)}}),_shouldNowInstantlyAddAllLazyAdornments:s.b({readOnly:!0,dependencies:["canAcceptAllLazyAdornments","canAcceptNewLazyAdornments","_needsAdditionalLazyAdornments"],get:Object.assign((function(){return this.canAcceptAllLazyAdornments&&this.canAcceptNewLazyAdornments&&this._needsAdditionalLazyAdornments}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])}}),didChange:function(e){e&&(this._lazyAdornmentNeedResponseTimeout||(this._lazyAdornmentNeedResponseTimeout=Object(u.b)(this._instantlyAddAdditionalLazyAdornments)))}}),_instantlyAddAdditionalLazyAdornments:Object(d.b)((function(){this._lazyAdornmentNeedResponseTimeout=void 0,this.isPooled||this.isDisposed||this._shouldNowInstantlyAddAllLazyAdornments&&this.ensureLazyAdornmentExistences()})),__hasAdornmentHostSupport__:!0,__superMap:{_$pZ$init:"init",_$11K$cleanup:"cleanup"}},f=new c.a;function g(){i||(i=l.a(m))}function m(){i=void 0;for(var e,t=h.arrayPool.getAutodisposingInstanceFromSlice(f.items),n=0,r=performance.now();(e=t[n])&&n<10&&(n<1||performance.now()<r+.5);n++)e.ensureNextLazyAdornmentExistence();n<t.length&&g()}var _=function(){var e;return function(){return e||(e=n(681).AdornmentProperty)}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(15),r=n(478),a=n(25),s={_sl_selfLog:null,includesStacksWithSelfLogging:!1,activeSelfLogger:null,selfLoggingIndentStartingPrefix:"BEGIN",selfLoggingIndentEndingPrefix:"END",activeLoggingName:null,selfLogOnlyStrings:!0,cumulativeSelfLog:i.d({readOnly:!0,get:function(){var e=function(e){return Array.isArray(e)?o(e):e};return function(){return this._sl_selfLog.map(e).join("\n")}}()}),selfLog:function(){if(arguments.length){var e=new Date,t="."+("00"+Number(e)%1e3).slice(-3),n=e.toTimeString();n=n.substring(0,n.indexOf(" "))+t;var i=this.selfLoggingIndentEndingPrefix,s=String(arguments[0]);s.slice(0,i.length)===i&&this._sl_indentLevel--;var l=a.arrayPool.getAutodisposingInstance();l.push(n+":");for(var c=0;c<this._sl_indentLevel;c++)l.push("    ");l.push.apply(l,arguments);var u=this.selfLoggingIndentStartingPrefix;s.slice(0,u.length)===u&&this._sl_indentLevel++,this.includesStacksWithSelfLogging&&l.push("\n"+Object(r.a)()),this._sl_selfLog=this._sl_selfLog||[],this._sl_selfLog.push(this.selfLogOnlyStrings?o(l):l);var d=this.activeSelfLogger;d&&(l.unshift(this.activeLoggingName||this.toString(),"at"),this._logEntry(l,d))}else this._showSelfLog()},_sl_indentLevel:0,_showSelfLog:function(){this._sl_selfLog.forEach(this._logEntryToConsole,this)},_logEntryToConsole:function(e){this._logEntry(e,globalThis.console.log)},_logEntry:function(e,t){if(Array.isArray(e))try{t.apply(console,e)}catch(n){t.call(console,o(e))}else t.call(console,e)},initFromPool:function(){var e=this,t=arguments;this.selfLog("BEGIN initFromPool from SelfLogging downwards."),e.__s._$1vZ$initFromPool.apply(e,t),this.selfLog("END initFromPool from SelfLogging downwards.")},init:function(){var e=this,t=arguments;this.selfLog("BEGIN init from SelfLogging downwards."),e.__s._$1yH$init.apply(e,t),this.selfLog("END init from SelfLogging downwards.")},cleanup:function(){var e=this,t=arguments;this.selfLog("BEGIN cleanup from SelfLogging downwards."),e.__s._$1_y$cleanup.apply(e,t),this.selfLog("END cleanup from SelfLogging downwards.")},__superMap:{_$1vZ$initFromPool:"initFromPool",_$1yH$init:"init",_$1_y$cleanup:"cleanup"}},o=function(e){for(var t=String(e[0]),n=e.length,i=1;i<n;i++)t+=" "+e[i];return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(345),r=n(139),a=n(99),s=n(583),o=n(203),l=i.b.extend(s.a).extend({requiredHoldDuration:500,pointerDown:function(){var e=this,t=arguments;return this._longPressTimeout=r.a(this._finishLongTapGesture,this.requiredHoldDuration),e.__s._$9I$pointerDown.apply(e,t)},pointerUp:function(){var e=this,t=arguments;this.pauseStateChanges();var n=e.__s._$Ah$pointerUp.apply(e,t);return this.state=a.b.Failed,this.resumeStateChanges(),n},_finishLongTapGesture:Object(o.b)((function(){var e=this;this.sequence.gestureRecognizers.forEach((function(t){t!==e&&(t.state=a.b.Failed)})),this.state=a.b.Ended})),reset:function(){var e=this,t=arguments;return clearTimeout(this._longPressTimeout),this._longPressTimeout=void 0,e.__s._$KS$reset.apply(e,t)},__superMap:{_$9I$pointerDown:"pointerDown",_$Ah$pointerUp:"pointerUp",_$KS$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LongPressGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,r=n(309),a=n(728),s=n(727),o=n(724),l=n(726),c=n(723),u=n(734),d=n(732),h=n(528),p=n(729),f=[{handlers:c.a,useCapture:!1},{handlers:o.a,useCapture:!0},{handlers:l.a,useCapture:!1},{handlers:s.a,useCapture:!1},{handlers:a.a,useCapture:!1},{handlers:{contextmenu:function(e){e.cwType="contextMenu",this.dispatchEvent(e)}},useCapture:!1}];switch(r.c.isMouseWheelSupported&&f.push({handlers:p.a,useCapture:!1}),r.c.pointerEventClass){case r.b.Pointer:i=d.a;break;case r.b.Touch:i=h.b;break;case r.b.Mouse:i=u.a}i&&f.push({useCapture:!1,handlers:i})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(42),r={staticMembers:{createPlaceholder:function(e,t){var n=i.n(),r=this.getPlaceholderDataHashFromPrimaryKey(e);return n.loadData(this,r,!0),this.find(e,t||n)},getPlaceholderDataHashFromPrimaryKey:function(e){return Object.assign({pk:e},this.getPartsFromPrimaryKey(e))},getPartsFromPrimaryKey:function(e){return JSON.parse(e)},getPrimaryKeyFromParts:function(e){return JSON.stringify(e)}},pk:n(178).c({isPrimaryKey:!0,readOnly:!0})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(754),r=n(13),a=globalThis.CloudKit,s=i.a.extend({retryRequestInterval:5e3,handleError:function(e,t,n){var i=e.ckErrorCode;if(!i)throw e;switch(i){case a.CKError.CONFLICT:return this.conflict(e,t,n);case a.CKError.ACCESS_DENIED:return this.accessDenied(e,t,n);case a.CKError.ATOMIC_ERROR:return this.contextError(e,t,n);case a.CKError.AUTHENTICATION_FAILED:case a.CKError.AUTHENTICATION_REQUIRED:case a.CKError.AUTH_PERSIST_ERROR:return this.authenticationError(e,t,n);case a.CKError.BAD_REQUEST:return this.clientError(e,t,n);case a.CKError.CONFIGURATION_ERROR:return this.configError(e,t,n);case a.CKError.EXISTS:return this.exists(e,t,n);case a.CKError.INTERNAL_ERROR:return this.serverError(e,t,n);case a.CKError.INVALID_ARGUMENTS:return this.clientError(e,t,n);case a.CKError.NETWORK_ERROR:return this.serverError(e,t,n);case a.CKError.NOT_FOUND:return this.contextError(e,t,n);case a.CKError.QUOTA_EXCEEDED:return this.quotaExceeded(e,t,n);case a.CKError.SERVICE_UNAVAILABLE:case a.CKError.THROTTLED:case a.CKError.TRY_AGAIN_LATER:case a.CKError.UNEXPECTED_SERVER_RESPONSE:return this.serverError(e,t,n);case a.CKError.UNIQUE_FIELD_ERROR:return this.contextError(e,t,n);case a.CKError.UNKNOWN_ERROR:return this.serverError(e,t,n);case a.CKError.VALIDATING_REFERENCE_ERROR:case a.CKError.ZONE_NOT_FOUND:return this.contextError(e,t,n);default:throw e}},contextError:function(e,t,n){r.b("CloudKit error - fatal",e,t)},conflict:function(e,t,n){r.b("CloudKit conflict (op-lock) error",e,t)},exists:function(e,t,n){r.b("CloudKit error - record exists",e,t)},accessDenied:function(e,t,n){r.b("CloudKit error - access denied",e,t)},authenticationError:function(e,t,n){r.b("CloudKit Authentication Error",e,t)},clientError:function(e,t,n){r.b("Client Error",e,t)},serverError:function(e,t,n){r.b("Server error",e,t)},quotaExceeded:function(e,t,n){r.b("CloudKit error - user has exceeded quota",e,t)},configError:function(e,t,n){r.b("CloudKit JS is not being configured correctly.",e,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKOperationHandler"}})},function(e,t,n){"use strict";function i(e){var t="function"===typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return r(e,arguments,o(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,e)})(e)}function r(e,t,n){return(r=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return l}));var l=function(e){var t,n;function i(){var t;return t=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),i.prototype),t.type="RetryableError",t}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i}(i(Error))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(42),r={staticMembers:{list:function(e){return this.performOperation(i.d.READ.LIST,e)},relist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.list(Object.assign({},e,{isForcedFetch:!0}))},loadAll:function(){return this.list.apply(this,arguments)}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=2,r=12},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(42),r={staticMembers:{delete:function(e){return this.performOperation(i.d.WRITE.DESTROY,e)}},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.delete(Object.assign({primaryKeys:[this.getPrimaryKey()]},e))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n(42),r=n(797),a=n(118),s=n(268);function o(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var l="ZipPrepareOperationType",c=r.a.extend({mixinDependencies:[s.a],handlesType:l,action:function(e,t){var n,r=this;return(n=regeneratorRuntime.mark((function n(){var s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=e.context,o=s.zonePK,l=s.scope,c=s.desiredKeys,u=s.includeRecords,d=s.excludeRecords,h=s.pluginFields,p=s.shareName,f=s.archiveName,n.next=11;break;case 5:if("string"===typeof o){n.next=7;break}throw new TypeError("Expected zonePK to be a string");case 7:if(g=Array.isArray(u),m=Array.isArray(d),(g||m)&&(!g||!m)){n.next=11;break}throw new TypeError("Only one of includeRecords or excludeRecords can be specified");case 11:return _={ownerRecordName:a.Zone.getOwnerRecordNameFromPrimaryKey(o),zoneName:a.Zone.getZoneNameFromPrimaryKey(o)},v={zoneID:_,desiredKeys:c,pluginFields:h,includeRecords:u,excludeRecords:d,shareName:p,archiveName:f},b=i.n(),y=b.getDatabaseForScope(l).databaseInstance,n.prev=15,n.next=18,y.prepareZipDownload(v);case 18:if((w=n.sent).hasErrors)for(I=w.errors,S=0;S<I.length;S++)r.handleError(I[S],e,t);return n.abrupt("return",w.downloadURL);case 23:return n.prev=23,n.t0=n.catch(15),n.abrupt("return",r.handleError(n.t0,e,t));case 26:case"end":return n.stop()}}),n,null,[[15,23]])})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){o(a,i,r,s,l,"next",e)}function l(e){o(a,i,r,s,l,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZipPrepareOperation"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("OperationGroupEnum",{RESOURCE_PREFETCH:"Resource Prefetch",RESOURCE_DOWNLOAD:"Resource Download"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("DerivativeRequestReason",{ONEUP_MAIN_DISPLAY:"OneUpMainDisplay",ONEUP_MAIN_DISPLAY_ZOOM:"OneUpMainDisplayZoom",ONEUP_MAIN_DISPLAY_PREFETCH:"OneUpMainDisplayPrefetch",ONEUP_THUMBSTRIP:"OneUpThumbstrip",ONEUP_VIDCOMPL_PREFETCH:"OneUpVidComplPrefetch",ONEUP_NONHLS_VIDEO_PLAYBACK_BEGIN:"OneUpNonHlsVideoPlaybackBegin",GRID_ASSET:"GridAsset",GRID_ASSET_PREFETCH:"GridAssetPrefetch",GRID_VIDCOMPL_PLAYBACK:"GridVidComplPlayback",GRID_CONTAINER:"GridContainer",GRID_CONTAINER_PREFETCH:"GridContainerPrefetch",GRID_CONTAINER_SCRUB:"GridContainerScrub",CONTAINER_LIST_ICON:"ContainerListIcon",CMM_SHARE_PLACARD:"CmmSharePlacard",CMM_GENERATE_SHARE_PLACARD_PREVIEW:"CmmGenerateSharePlacardPreview",CMM_SHAREBACK_TOAST_FOOTER:"CmmShareBackToastFooter"})},function(e,t,n){"use strict";n(11),n.d(t,"a",(function(){return r}));var i=n(167),r=Object.assign({},Object(i.b)("resJPEG",["Full","Large","Med","Thumb"]),Object(i.b)("resVid",["Full","Med","Small"]),Object(i.a)("resSidecar"))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={staticMembers:{getDataValuesFromServiceValues:function(e){var t=this,n=arguments,i=t.__s._$D4$getDataValuesFromServiceValues.apply(t,n),r=e.pluginFields;if(r){var a=r.dynamic_resOriginalResScaledTemplate,s=r.dynamic_resJPEGFullResScaledTemplate,o=r.dynamic_resJPEGThumbResScaledTemplate,l=r.dynamic_resVidComplResScaledTemplate,c=r.dynamic_HLSPlaylistURL;a&&(i.dynamicTemplateURLFromOriginal=a.value),s&&(i.dynamicTemplateURLFromJPEGFull=s.value),o&&(i.dynamicTemplateURLFromJPEGThumb=o.value),l&&(i.dynamicTemplateURLFromOriginalVidCompl=l.value),c&&(i.hlsMasterPlaylistUrl=c.value)}return i},__superMap:{_$D4$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"}},hlsMasterPlaylistUrl:n(178).c()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(138),r=n(269),a=i.b("LivePhotoEffectType",{BOUNCE:"bounce",EXPOSURE:"exposure",LIVE:"live",LOOP:"loop"}),s=function(e){switch(e){case r.a.AUTOLOOP:return a.LOOP;case r.a.LONG_EXPOSURE:return a.EXPOSURE;case r.a.MIRROR:return a.BOUNCE;default:return a.LIVE}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(138).b("MasterImportSource",{UNKNOWN:0,BACK_CAMERA:1,FRONT_CAMERA:2,PHOTO_KIT:3,CAMERA_CONNECTION_KIT:4,PHOTOS_APP:5,INGEST_SERVICE_CLIENT:6,MOMENT_SHARE:7})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(11),r=i.Reader,a=i.Writer,s=i.util,o=i.roots.default||(i.roots.default={}),l=o.CPLAssetDistribution=function(){function e(e){if(this.oldBuckets=[],this.buckets=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.oldBuckets=s.emptyArray,e.prototype.bucketWidth=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.buckets=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.oldBuckets&&e.oldBuckets.length)for(var n=0;n<e.oldBuckets.length;++n)o.CPLAssetDistribution.TimeBucket.encode(e.oldBuckets[n],t.uint32(10).fork()).ldelim();if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&t.uint32(16).int64(e.bucketWidth),null!=e.buckets&&e.buckets.length)for(var i=0;i<e.buckets.length;++i)o.CPLAssetDistribution.TimeBucket.encode(e.buckets[i],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new o.CPLAssetDistribution;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.oldBuckets&&i.oldBuckets.length||(i.oldBuckets=[]),i.oldBuckets.push(o.CPLAssetDistribution.TimeBucket.decode(e,e.uint32()));break;case 2:i.bucketWidth=e.int64();break;case 3:i.buckets&&i.buckets.length||(i.buckets=[]),i.buckets.push(o.CPLAssetDistribution.TimeBucket.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.oldBuckets&&e.hasOwnProperty("oldBuckets")){if(!Array.isArray(e.oldBuckets))return"oldBuckets: array expected";for(var t=0;t<e.oldBuckets.length;++t){var n=o.CPLAssetDistribution.TimeBucket.verify(e.oldBuckets[t]);if(n)return"oldBuckets."+n}}if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&!s.isInteger(e.bucketWidth)&&!(e.bucketWidth&&s.isInteger(e.bucketWidth.low)&&s.isInteger(e.bucketWidth.high)))return"bucketWidth: integer|Long expected";if(null!=e.buckets&&e.hasOwnProperty("buckets")){if(!Array.isArray(e.buckets))return"buckets: array expected";for(var i=0;i<e.buckets.length;++i){var r=o.CPLAssetDistribution.TimeBucket.verify(e.buckets[i]);if(r)return"buckets."+r}}return null},e.fromObject=function(e){if(e instanceof o.CPLAssetDistribution)return e;var t=new o.CPLAssetDistribution;if(e.oldBuckets){if(!Array.isArray(e.oldBuckets))throw new TypeError(".CPLAssetDistribution.oldBuckets: array expected");t.oldBuckets=[];for(var n=0;n<e.oldBuckets.length;++n){if("object"!==typeof e.oldBuckets[n])throw new TypeError(".CPLAssetDistribution.oldBuckets: object expected");t.oldBuckets[n]=o.CPLAssetDistribution.TimeBucket.fromObject(e.oldBuckets[n])}}if(null!=e.bucketWidth&&(s.Long?(t.bucketWidth=s.Long.fromValue(e.bucketWidth)).unsigned=!1:"string"===typeof e.bucketWidth?t.bucketWidth=parseInt(e.bucketWidth,10):"number"===typeof e.bucketWidth?t.bucketWidth=e.bucketWidth:"object"===typeof e.bucketWidth&&(t.bucketWidth=new s.LongBits(e.bucketWidth.low>>>0,e.bucketWidth.high>>>0).toNumber())),e.buckets){if(!Array.isArray(e.buckets))throw new TypeError(".CPLAssetDistribution.buckets: array expected");t.buckets=[];for(var i=0;i<e.buckets.length;++i){if("object"!==typeof e.buckets[i])throw new TypeError(".CPLAssetDistribution.buckets: object expected");t.buckets[i]=o.CPLAssetDistribution.TimeBucket.fromObject(e.buckets[i])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.oldBuckets=[],n.buckets=[]),t.defaults)if(s.Long){var i=new s.Long(0,0,!1);n.bucketWidth=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.bucketWidth=t.longs===String?"0":0;if(e.oldBuckets&&e.oldBuckets.length){n.oldBuckets=[];for(var r=0;r<e.oldBuckets.length;++r)n.oldBuckets[r]=o.CPLAssetDistribution.TimeBucket.toObject(e.oldBuckets[r],t)}if(null!=e.bucketWidth&&e.hasOwnProperty("bucketWidth")&&("number"===typeof e.bucketWidth?n.bucketWidth=t.longs===String?String(e.bucketWidth):e.bucketWidth:n.bucketWidth=t.longs===String?s.Long.prototype.toString.call(e.bucketWidth):t.longs===Number?new s.LongBits(e.bucketWidth.low>>>0,e.bucketWidth.high>>>0).toNumber():e.bucketWidth),e.buckets&&e.buckets.length){n.buckets=[];for(var a=0;a<e.buckets.length;++a)n.buckets[a]=o.CPLAssetDistribution.TimeBucket.toObject(e.buckets[a],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.TimeBucket=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.oldStartTime=0,e.prototype.oldEndTime=0,e.prototype.oldCount=0,e.prototype.bucketStart=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.count=s.Long?s.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&t.uint32(8).int32(e.oldStartTime),null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&t.uint32(16).int32(e.oldEndTime),null!=e.oldCount&&e.hasOwnProperty("oldCount")&&t.uint32(24).int32(e.oldCount),null!=e.bucketStart&&e.hasOwnProperty("bucketStart")&&t.uint32(32).int64(e.bucketStart),null!=e.count&&e.hasOwnProperty("count")&&t.uint32(40).int64(e.count),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new o.CPLAssetDistribution.TimeBucket;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.oldStartTime=e.int32();break;case 2:i.oldEndTime=e.int32();break;case 3:i.oldCount=e.int32();break;case 4:i.bucketStart=e.int64();break;case 5:i.count=e.int64();break;default:e.skipType(7&a)}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&!s.isInteger(e.oldStartTime)?"oldStartTime: integer expected":null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&!s.isInteger(e.oldEndTime)?"oldEndTime: integer expected":null!=e.oldCount&&e.hasOwnProperty("oldCount")&&!s.isInteger(e.oldCount)?"oldCount: integer expected":null==e.bucketStart||!e.hasOwnProperty("bucketStart")||s.isInteger(e.bucketStart)||e.bucketStart&&s.isInteger(e.bucketStart.low)&&s.isInteger(e.bucketStart.high)?null==e.count||!e.hasOwnProperty("count")||s.isInteger(e.count)||e.count&&s.isInteger(e.count.low)&&s.isInteger(e.count.high)?null:"count: integer|Long expected":"bucketStart: integer|Long expected"},e.fromObject=function(e){if(e instanceof o.CPLAssetDistribution.TimeBucket)return e;var t=new o.CPLAssetDistribution.TimeBucket;return null!=e.oldStartTime&&(t.oldStartTime=0|e.oldStartTime),null!=e.oldEndTime&&(t.oldEndTime=0|e.oldEndTime),null!=e.oldCount&&(t.oldCount=0|e.oldCount),null!=e.bucketStart&&(s.Long?(t.bucketStart=s.Long.fromValue(e.bucketStart)).unsigned=!1:"string"===typeof e.bucketStart?t.bucketStart=parseInt(e.bucketStart,10):"number"===typeof e.bucketStart?t.bucketStart=e.bucketStart:"object"===typeof e.bucketStart&&(t.bucketStart=new s.LongBits(e.bucketStart.low>>>0,e.bucketStart.high>>>0).toNumber())),null!=e.count&&(s.Long?(t.count=s.Long.fromValue(e.count)).unsigned=!1:"string"===typeof e.count?t.count=parseInt(e.count,10):"number"===typeof e.count?t.count=e.count:"object"===typeof e.count&&(t.count=new s.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.oldStartTime=0,n.oldEndTime=0,n.oldCount=0,s.Long){var i=new s.Long(0,0,!1);n.bucketStart=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.bucketStart=t.longs===String?"0":0;if(s.Long){var r=new s.Long(0,0,!1);n.count=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.count=t.longs===String?"0":0}return null!=e.oldStartTime&&e.hasOwnProperty("oldStartTime")&&(n.oldStartTime=e.oldStartTime),null!=e.oldEndTime&&e.hasOwnProperty("oldEndTime")&&(n.oldEndTime=e.oldEndTime),null!=e.oldCount&&e.hasOwnProperty("oldCount")&&(n.oldCount=e.oldCount),null!=e.bucketStart&&e.hasOwnProperty("bucketStart")&&("number"===typeof e.bucketStart?n.bucketStart=t.longs===String?String(e.bucketStart):e.bucketStart:n.bucketStart=t.longs===String?s.Long.prototype.toString.call(e.bucketStart):t.longs===Number?new s.LongBits(e.bucketStart.low>>>0,e.bucketStart.high>>>0).toNumber():e.bucketStart),null!=e.count&&e.hasOwnProperty("count")&&("number"===typeof e.count?n.count=t.longs===String?String(e.count):e.count:n.count=t.longs===String?s.Long.prototype.toString.call(e.count):t.longs===Number?new s.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(123),r=n(171),a={mixinDependencies:[i.a],iframeView:r.a.define(),host:r.a.define()}},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return l}));var i=n(202),r=n(548),a=n(7),s=n(574),o=n(55),l=(n(68),i.a.extend(r.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"    "},{type:"VIEWOUTLET",tagname:"view",name:"loadingView"},{type:"TEXT",data:"    "},{type:"ELEMENT",tagname:"iframe",name:"iframe",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isActive",truevalue:"",falsevalue:"cw-hidden",attributes:{}}],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appId",attributes:{},attribute:"id"},src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"src",attributes:{},attribute:"src"}}}],classes:["hosted-application"]},className:"hak-hosted-application-view",__QUALIFIED_CLASS_NAME__:"HostedApplicationView"},appId:a.b({type:"string"}),src:a.b({type:"string"}),isActive:a.b({type:"boolean"}),loadingView:a.b({type:s.a,defaultValue:o.c(s.a.extend({isVisible:a.b({readOnly:!0,dependencies:["isActive"],get:Object.assign((function(){return!this.isActive}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isActive:a.b({type:"boolean"})})),downstreamBindings:{isActive:"(owner).isActive"}})}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(40),r=n(55),a=n(98),s=n(15),o=n(130),l=i.a.extend({transition:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"TransitionCancelled"}}),c=i.a.extend({promise:r.c(a.a),wasCancelled:!1,parentViewController:s.d(null),fromViewController:s.d(null),toViewController:s.d(null),fromView:s.d(null),toView:s.d(null),isRunning:s.d(!1),delegate:s.d(null),delegateContext:s.d(null),init:function(){var e=this,t=arguments;e.__s._$cB$init.apply(e,t);var n=this.parentViewController,i=this.fromViewController,r=this.toViewController;i&&i.retain(this,"holding during a transition away from this VC"),r&&r.retain(this,"holding during a transition to this VC"),n.retain(this,"holding during a transition within this VC")},run:function(){var e,t=this.delegate;t&&(e=this.delegateContext||t,t.transitionWillStart.call(e,this)),this.isRunning=!0;var n=this.parentViewController,i=this.fromViewController,r=this.toViewController,a=this.fromView,s=this.toView;return o.b.info("Beginning transition from "+i+" to "+r),i!==r?(i&&i.willMoveToParentViewController(null,this),r&&r.willMoveToParentViewController(n,this),a!==s?(this.stopConflictingTransitions(),this.markViews(),this.start(),r&&r.parent!==n&&n.addChildViewController(r)):this.didFinish()):a!==s&&(this.stopConflictingTransitions(),this.markViews(),this.start()),this.promise},start:function(){this.notifyDidMoveToViewController()},notifyDidMoveToViewController:function(){var e,t,n;e=this.parentViewController,t=this.fromViewController,n=this.toViewController,this.toView&&n&&t!==n&&n.didMoveToParentViewController(e,this)},markViews:function(){this.fromView&&(this.fromView.__anim_transition=this),this.toView&&(this.toView.__anim_transition=this)},unmarkViews:function(){this.fromView&&this.fromView.__anim_transition===this&&(this.fromView.__anim_transition=null),this.toView&&this.toView.__anim_transition===this&&(this.toView.__anim_transition=null)},stopConflictingTransitions:function(){var e=this.fromViewController,t=this.fromView,n=this.toViewController,i=this.toView;t&&(t.__anim_transition&&t.__anim_transition.stopTransitioningViewController(e),t.__anim_transition=null),i&&(i.__anim_transition&&i.__anim_transition.stopTransitioningViewController(n),i.__anim_transition=null)},stopTransitioningViewController:function(e){this.toViewController===e&&(this.promise.catch((function(){})),this.promise.reject(l.create({transition:this})),this.wasCancelled=!0,this.toViewController=null,this.toView=null),this.fromViewController===e&&(this.fromViewController=null,this.fromView=null)},didFinish:function(){var e=this.parentViewController,t=this.fromViewController,n=this.toViewController;t!==n&&t&&(e.removeChildViewController(t),t.didMoveToParentViewController(null,this)),this.isRunning=!1;var i=this.delegate;if(i){var r=this.delegateContext||i;i.transitionDidFinish.call(r,this)}this.unmarkViews(),t&&t.release(this,"holding during a transition away from this VC"),n&&n.release(this,"holding during a transition to this VC"),e.release(this,"holding during a transition within this VC"),this.wasCancelled||this.promise.resolve(this)},__superMap:{_$cB$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewControllerTransition"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(13),r=n(139),a=n(812).a.extend({viewsOutlet:null,_viewsArray:null,start:function(){var e=this.viewsOutlet,t=this.parentViewController.view.get(e);t||i.b("ViewsArrayViewControllerTransition expects a `viewsOutlet` property"),this._viewsArray=t,this.fromView;var n=this.toView;n&&(t.add(n),this.notifyDidMoveToViewController()),this.startAnimation()},startAnimation:function(){var e=this;r.a((function(){e.animationDidFinish()}))},animationDidFinish:function(){if(!this.animationIsFinished){this.animationIsFinished=!0;var e=this.fromView;e&&this._viewsArray.remove(e),this.didFinish()}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewsArrayViewControllerTransition"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return ke})),n(1),n(0),n(4),n(6),n(3),n(2),n(79),n(11),n(28),n(31),n(32),n(30),n(66),n(71),n(67),n(72),n(90);var i,r=n(469),a=n(7),s=n(20),o=n(78),l=n(55),c=n(321),u=n(574),d=n(214),h=n(17),p=n(567),f=n(1268),g=n(1276),m=n(267),_=n(328),v=n(389),b=n(15),y=n(99),w=n(256),I=n(347),S=n(194),C=n(1282),E=n(25),A=n(760),O=n(203),T={mixinDependencies:[v.a],init:function(){var e=this,t=arguments;e.__s._$Va$init.apply(e,t),this.navigationSwipeGR=this.navigationSwipeGRClass.create({delegate:this}),this.addGestureRecognizer(this.navigationSwipeGR)},navigationSwipeGRClass:C.a.extend(s.b,{event:"navigationSwipe",pansHorizontally:!0,cancelsVertically:!0,view:a.b(),initialStraddleIndex:void 0,currentStraddleIndex:void 0,_slideAnimationInfo:void 0,_hasBegunOnce:!1,_isDOMLockingActive:!1,_lastSeenDOMLockingStraddleIndex:void 0,_lastSeenDOMLockingStraddleMotionDirection:void 0,canReceiveNewStartingEventsAfterLastEndingEvent:!0,maxStraddleIndex:a.b({readOnly:!0,dependencies:["view.collection.length"],get:Object.assign((function(){return this.getPath("view.collection.length")-1}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-1}})}),userIndicatedStraddleIndex:b.d({readOnly:!0,get:function(){return this.initialStraddleIndex-this.snappedTranslationSinceClinching.x/this.view.straddleInterval}}),boundedUserIndicatedStraddleIndex:b.d({readOnly:!0,get:function(){return Math.max(0,Math.min(this.maxStraddleIndex,this.userIndicatedStraddleIndex))}}),roundedUserIndicatedStraddleIndex:b.d({readOnly:!0,get:function(){return Math.round(this.boundedUserIndicatedStraddleIndex)}}),rubberBandedUserIndicatedStraddleIndex:b.d({readOnly:!0,get:function(){return this.userIndicatedStraddleIndex*(1/3)+this.boundedUserIndicatedStraddleIndex*(1-1/3)}}),currentIndexVelocity:b.d({readOnly:!0,get:function(){var e=-this.velocity.x/this.view.straddleInterval*1e3;return Math.abs(e)>.01?e:0}}),location:b.d({get:function(){var e=this,t=arguments;return this._trackedPointerLocations.delete("_hack_entry"),this._trackedPointerLocations.size?e.__s._$1UM$get.apply(e,t):{x:NaN,y:NaN}},__superMap:{_$1UM$get:"get"}}),pointerDown:function(){var e=this,t=arguments;this.pauseStateChanges();var n=e.__s._$1Wc$pointerDown.apply(e,t);return this._hasBegunOnce&&(this.state=y.b.Changed,this._stopAnimatingSlide()),this._hasBegunOnce=!0,this.initialStraddleIndex=this.currentStraddleIndex||this.view.fractionalMediaIndex,this.resumeStateChanges(),n},pointerMove:function(){var e=this,t=arguments,n=e.__s._$1hk$pointerMove.apply(e,t),i=this.rubberBandedUserIndicatedStraddleIndex;return isNaN(i)||(this.currentStraddleIndex=i),this.view.isNavigationSwipeGestureInProgress&&this._activateDOMLockingIfDirectionChanged(i),n},pointerUp:function(){var e=this,t=arguments;this.pauseStateChanges();var n=this.rubberBandedUserIndicatedStraddleIndex!==this.roundedUserIndicatedStraddleIndex,i=n?this._getSlideAnimationInfo():void 0;this._trackedPointerLocations.set("_hack_entry",void 0);var r=e.__s._$2C0$pointerUp.apply(e,t);return n?(this._startAnimatingSlideWithInfo(i),this.state=y.b.Changed,this._deactivateDOMLocking()):this.state=y.b.Cancelled,this.resumeStateChanges(),r},_activateDOMLockingIfDirectionChanged:function(e){if(!this._isDOMLockingActive){var t=this._lastSeenDOMLockingStraddleIndex;this._lastSeenDOMLockingStraddleIndex=e<=1/0?e:void 0;var n=e-t,i=n<0?-1:n>0?1:0,r=this._lastSeenDOMLockingStraddleMotionDirection;this._lastSeenDOMLockingStraddleMotionDirection=i,r&&i&&r!==i&&this._activateDOMLocking()}},_activateDOMLocking:function(){if(!this._isDOMLockingActive){this._isDOMLockingActive=!0;var e=Math.round(this.initialStraddleIndex);this.view.mediaIndicesWithProactivelyPrerenderedViews.length=0,this.view.mediaIndicesWithProactivelyPrerenderedViews.push(e-1,e,e+1),this.view.propertyChanged("mediaIndicesWithProactivelyPrerenderedViews")}},_deactivateDOMLocking:function(){this._isDOMLockingActive&&(this._isDOMLockingActive=!1,this.view.mediaIndicesWithProactivelyPrerenderedViews.length=0,this.view.propertyChanged("mediaIndicesWithProactivelyPrerenderedViews"))},reset:function(){var e=this,t=arguments;this._stopAnimatingSlide(),this._deactivateDOMLocking(),this.initialStraddleIndex=void 0,this.currentStraddleIndex=void 0,this._slideAnimationInfo=void 0,this._hasBegunOnce=!1,this._isDOMLockingActive=!1,this._lastSeenDOMLockingStraddleIndex=void 0,this._lastSeenDOMLockingStraddleMotionDirection=void 0,e.__s._$3CX$reset.apply(e,t)},DEFAULT_HALF_LIFE:.04,MAX_HALF_LIFE:.07,MIN_HALF_LIFE:.03,BIG_HALF_LIFE:1e9,VELOCITY_LINEAR_DECAY:.05,_getUnrestrainedRestingFractionalStraddleIndexForSlide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentStraddleIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_HALF_LIFE;return e+this._getSlideDisplacementAtTime(1/0,t,n)},_getDestinationIndexForSlide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentStraddleIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=Math.round(e),i=t<-1/3,r=t>1/3,a=e<n,s=e>n,o=Math.max(0,Math.min(this.maxStraddleIndex,i&&a?n-1:!i&&a||!r&&s?n:r&&s?n+1:n)),l=!1;return l?Math.max(0,Math.min(this.maxStraddleIndex,Math.round(this._getUnrestrainedRestingFractionalStraddleIndexForSlide(e,t,this.DEFAULT_HALF_LIFE)))):o},_getSlideDuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentIndexVelocity,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.DEFAULT_HALF_LIFE;if(!e||!t)return 0;var n=this.VELOCITY_LINEAR_DECAY,i=Math.abs(e);return t>this.BIG_HALF_LIFE?i/n:t*this._lambertW0(i*Math.log(2)/t/n)/Math.log(2)},_getSlideDisplacementAtTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentIndexVelocity,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_HALF_LIFE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._getSlideDuration(t,n);if(!t||!n)return 0;var r=this.VELOCITY_LINEAR_DECAY,a=Math.abs(t),s=t<0?-1:t>0?1:0,o=i;if(e>o&&(e=o),n>this.BIG_HALF_LIFE)return s*(a*e-r*e*e/2);var l=Math.log(.5)/n;return s*(a*(Math.pow(Math.E,e*l)-1)/l-r*e*e/2)},_getSlideDistanceAtTime:function(){var e,t=(e=E.arrayPool).getAutodisposingInstanceFromParams.apply(e,arguments);return t[1]=Math.abs(t[1]),this._getSlideDisplacementAtTime.apply(this,t)},_lambertW0:function(e){return e<-1/Math.E?NaN:A.b(this._lambertW0_inverseFunc||(this._lambertW0_inverseFunc=function(e){return e*Math.pow(Math.E,e)}),e,-1,1+Math.log(Math.max(e,1)))},_getBestEffortSlide:function(e,t){var n=this,i=this.MAX_HALF_LIFE,r=this.MIN_HALF_LIFE,a=Math.abs(e),s=a/e,o=Math.abs(t),l=o/t,c=E.objectPool.getAutodisposingInstance();if(s!==l)return c.velocityHalfLife=0,c.duration=0,c.achievedDisplacement=0,c;var u=this._getSlideDuration(a,r),d=this._getSlideDistanceAtTime(1/0,a,r,u);if(d>o)return c.velocityHalfLife=r,c.duration=u,c.achievedDisplacement=s*d,c;var h=this._getSlideDuration(a,i),p=this._getSlideDistanceAtTime(1/0,a,i,h);return p<o?(c.velocityHalfLife=i,c.duration=h,c.achievedDisplacement=s*p,c):(c.velocityHalfLife=A.b((function(e){return n._getSlideDistanceAtTime(1/0,a,e)}),o,r,i),c.duration=this._getSlideDuration(a,c.velocityHalfLife),c.achievedDisplacement=s*this._getSlideDistanceAtTime(1/0,a,c.velocityHalfLife),c)},_getDisplacementCorrectionAfterTime:function(e,t,n,i){return this._displacementCorrectionTweens[i].call(this,e/t)*n},_displacementCorrectionTweens:{"-1":function(e){return.5-.5*Math.cos(Math.PI*e)},0:function(e){return 1-(1-e)*(1-e)},1:function(e){return 1-(1-e)*(1-e)}},_getSlideAnimationInfo:function(){var e,t=this,n=this.currentStraddleIndex,i=this.currentIndexVelocity,r=this._getDestinationIndexForSlide(n,i),a=r-n,s=a<0?-1:a>0?1:0,o=this._getBestEffortSlide(i,a),l=o.duration,c=o.achievedDisplacement,u=o.velocityHalfLife,d=i,h=i<0?-1:i>0?1:0;if(h===s&&s){var p=A.b((function(e){return t._getSlideDistanceAtTime(1/0,e,t.MAX_HALF_LIFE)}),Math.abs(a),0,5),f=this._getSlideDuration(p,this.MAX_HALF_LIFE);e=Math.abs(d)<p?f:l}else e=.2*Math.sqrt(Math.abs(a)/.2);var g=a-c,m=(g<0?-1:g>0?1:0)*h;return{initialVelocity:i,initialStraddleIndex:n,destinationStraddleIndex:r,velocityHalfLife:u,slideDuration:l,correctionDuration:e,totalDuration:Math.max(l,e),displacementCorrection:g,displacementCorrectionDirectionAgreement:m,startTime:performance.now()/1e3,timeoutHandle:void 0}},_startAnimatingSlideWithInfo:function(e){this._slideAnimationInfo&&this._stopAnimatingSlide(),this._slideAnimationInfo=e,e.timeoutHandle=w.a(this._handleSlideAnimationFrame)},_stopAnimatingSlide:function(){this._slideAnimationInfo&&(cancelAnimationFrame(this._slideAnimationInfo.timeoutHandle),this._slideAnimationInfo=void 0)},_handleSlideAnimationFrame:O.b((function(){var e=this._slideAnimationInfo;if(e){var t=e.startTime,n=e.slideDuration,i=e.totalDuration,r=e.correctionDuration,a=e.initialVelocity,s=e.velocityHalfLife,o=e.initialStraddleIndex,l=e.displacementCorrection,c=e.displacementCorrectionDirectionAgreement;cancelAnimationFrame(e.timeoutHandle),e.timeoutHandle=void 0;var u=performance.now()/1e3-t;u<=i?(this.currentStraddleIndex=o+this._getSlideDisplacementAtTime(u,a,s,n)+this._getDisplacementCorrectionAfterTime(u,r,l,c),this.state=y.b.Changed,e.timeoutHandle=w.a(this._handleSlideAnimationFrame)):(this.currentStraddleIndex=e.destinationStraddleIndex,this._stopAnimatingSlide(),this.state=y.b.Ended)}})),__superMap:{_$1Wc$pointerDown:"pointerDown",_$1hk$pointerMove:"pointerMove",_$2C0$pointerUp:"pointerUp",_$3CX$reset:"reset"}}),navigationSwipe:function(e){var t=e.state;if(t===y.b.Changed||t===y.b.Ended){var n=e.currentStraddleIndex;n<=1/0&&(this.fractionalMediaIndex=n)}this.propertyChanged("isNavigationSwipeGestureInProgress")},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return!(e!==this.navigationSwipeGR||!this.element.contains(t.view.element)||this===t.view)||(t!==this.navigationSwipeGR||!this.element.contains(e.view.element)||this===e.view)&&n.__s._$DrN$gestureRecognizerShouldRequireFailureOf.apply(n,i)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return(e!==this.navigationSwipeGR||!this.element.contains(t.view.element)||this===t.view)&&(!(t!==this.navigationSwipeGR||!this.element.contains(e.view.element)||this===e.view)||n.__s._$E7q$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i))},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return(e!==this.navigationSwipeGR||!this.handheldViewControllerTransition&&!(I.a(t,"nativeEvent.targetTouches.length")>1)&&t.pointerType!==S.b.MOUSE)&&n.__s._$EB4$gestureRecognizerShouldReceive.apply(n,i)},isNavigationSwipeGestureInProgress:a.b({readOnly:!0,get:function(){var e=this.getPath("navigationSwipeGR.state");return e===y.b.Began||e===y.b.Changed}}),__superMap:{_$Va$init:"init",_$DrN$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$E7q$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$EB4$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},M=n(1318).b.extend({duration:200,isHandheld:!0,handheldTranslationProgress:void 0,pointerLocations:void 0,staticMembers:{__QUALIFIED_CLASS_NAME__:"TentativePhotoZoomTransition"}}).extend({calculateFloatingZoomRectForTransitionProgress:function(e,t,n){var i=this.handheldTranslationProgress;if(!i){var r,a={left:this.floatingZoomedImage.x,top:this.floatingZoomedImage.y,width:this.floatingZoomedImage.width,height:this.floatingZoomedImage.height},s=t,o=this.animationInfo.initialProgress,l=this.animationInfo.targetProgress,c=0===l;return c&&(s=e),r=c?1-n/o:(n-o)/(l-o),this.__s._$nx$calculateFloatingZoomRectForTransitionProgress.call(this,a,s,r)}var u=1;i.y>0&&(u=Math.cos(Math.atan(i.y/200)),u=this._floatByLinearlyInterpolatingFloats(1,u,.5),u=Math.min(1,u));var d=e.width*u,h=e.height*u,p=this._transformWithResistance(i.x,20),f=(e.width-d)*((this.pointerLocations[0].x-e.left)/e.width),g=i.y>0?0:100,m=this._transformWithResistance(i.y,g);return{left:e.left+p+f,top:e.top+m,width:d,height:h}},_transformWithResistance:function(e,t){return 0===t?e:t*Math.log(1+Math.abs(e)/t)*Math.sign(e)},_floatByLinearlyInterpolatingFloats:function(e,t,n){return(1-n)*e+n*t},__superMap:{_$nx$calculateFloatingZoomRectForTransitionProgress:"calculateFloatingZoomRectForTransitionProgress"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TentativeSwipePhotoZoomTransition"}}),D={mixinDependencies:[v.a],handheldViewControllerTransition:a.b(),init:function(){var e=this,t=arguments;e.__s._$HE$init.apply(e,t),this.exitSwipeGR=this.exitSwipeGRClass.create({delegate:this,event:"exitSwipe",minimumTranslationForClinch:5,pansVertically:!0,cancelsHorizontally:!0}),this.addGestureRecognizer(this.exitSwipeGR)},exitSwipeGRClass:C.a,exitSwipe:function(e){var t=e.state;if((t===y.b.Began||t===y.b.Changed)&&!this.handheldViewControllerTransition){if(!e.hasClinched)return;if(e.translationUponClinch&&e.translationUponClinch.y<0||e._trackedPointerLocations.size>1)return void this._failSwipeAction();this._lastSwipeYVelocity=0,this.sendEvent("tentativelyPopViewController",M)}if(t===y.b.Changed){var n=this.handheldViewControllerTransition;if(n){this._lastSwipeYVelocity=e.velocity.y;var i=e.translation.x,r=e.translation.y;n.pointerLocations=[e.location],n.handheldTranslationProgress={x:i,y:r};var a=r/this.viewportHeight;n.transitionProgress!==a?n.transitionProgress=a:n.updateZoomRectedImage()}}t!==y.b.Ended&&t!==y.b.Cancelled&&t!==y.b.Failed||this._finishSwipeAnimation(),this.propertyChanged("isExitSwipeGestureInProgress")},_failSwipeAction:function(){this.exitSwipeGR.state=y.b.Failed,this.propertyChanged("isExitSwipeGestureInProgress")},_finishSwipeAnimation:function(){var e=this.handheldViewControllerTransition,t=this.exitSwipeGR;if(e){e.handheldTranslationProgress=void 0;var n=this._lastSwipeYVelocity<0||t.translation.y<0&&this._lastSwipeYVelocity<.1,i=n?0:1,r=e.getTransitionees(),a=r.fromVC,s=r.toVC;n&&(s.navItem.shouldHideTabBar=!0),e.animateToTarget(i).then((function(){n&&(a.incomingTransitionClass=void 0,s.sendEvent("pushViewController",a,!1),a.incomingTransitionClass=a.constructor.prototype.incomingTransitionClass,s.navItem.shouldHideTabBar=!1)}))}},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return e===this.exitSwipeGR&&t===this.navigationSwipeGR||n.__s._$1ls$gestureRecognizerShouldRequireFailureOf.apply(n,i)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return(e!==this.navigationSwipeGR||t!==this.exitSwipeGR)&&n.__s._$1qi$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i)},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return(e!==this.exitSwipeGR||!(this.handheldViewControllerTransition&&!this.isExitSwipeGestureInProgress)&&!(I.a(t,"nativeEvent.targetTouches.length")>1)&&t.pointerType!==S.b.MOUSE&&this.zoomLevel===this.unzoomedZoomLevel&&!this.getPath("targetMediaView.isLivePhotoPlayerVisible")&&!this.getPath("targetMediaView.wantsShowingVideo"))&&n.__s._$1tl$gestureRecognizerShouldReceive.apply(n,i)},isExitSwipeGestureInProgress:a.b({readOnly:!0,get:function(){var e=this.getPath("exitSwipeGR.state"),t=this.getPath("exitSwipeGR.hasClinched");return(e===y.b.Began||e===y.b.Changed)&&t}}),__superMap:{_$HE$init:"init",_$1ls$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$1qi$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$1tl$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},P=n(202),L=n(127),R=n(51),x=n(283),N=n(143),F=n(40),V=n(200),k=n(97),B=n(1321),j=n(804),U=n(1242),G=n(1267),H=n(789),W=n(407),$=n(669),z=n(582),K=n(266),q=n(1275),Q=n(82),Y=n(199),Z=n(221),X=n(451),J=n(139),ee=n(193),te=n(794),ne=n(1233),ie=n(803),re=n(197),ae=n(585),se=n(179),oe=n(807),le=n(487),ce=P.a.extend(le.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",styles:{display:"block"},name:"lpkBadge"}]},className:"pok-live-photos-badge-view",__QUALIFIED_CLASS_NAME__:"LivePhotosBadgeView"},init:function(){var e=this,t=arguments;e.__s._$7d$init.apply(e,t);var n=globalThis.LivePhotosKit;n&&(this._badge=new n.LivePhotoBadge({element:this.lpkBadge,borderRadius:3}))},_badge:null,badgeOrder:a.b(-1),progress:a.b(0),shouldShowError:a.b(!1),_didAttach:s.h("isAttached",(function(e){e&&this._badge&&this.resetBadge()})),_onProgressChange:s.h("progress","shouldShowError",(function(e,t){this._badge&&(this._badge.shouldShowError=t,this._badge.progress=e)})),playLivePhoto:s.i(),stopLivePhoto:s.i(),attachPlayerInstance:function(e){var t=e.__internalLPKPlayer__;this._badge&&this._badge.attachPlayerInstance(t)},resetBadge:function(){this._badge&&this._badge.reset()},updateBadgeText:function(e){this._badge.updateBadgeText(e)},__superMap:{_$7d$init:"init"}}),ue=n(332),de=ue.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-live-photo-container"],name:"livePhotoContainer"}],classes:["pok-live-photo-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInLivePhotoMode",truevalue:"pok-showing-live-photo",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"LivePhotoPresenterView"},lpkBadge:a.b({readOnly:!0,dependencies:["media.primaryAsset.isLivePhotoPlayEnabled","topLeftBadges","topLeftBadges.contentsDidChange"],get:Object.assign((function(){if(this.getPath("media.primaryAsset.isLivePhotoPlayEnabled")){var e=this.topLeftBadges;if(e)for(var t=0;t<e.length;t++){var n=e.objectAt(t);if(Q.a(n,ce))return n}}}),{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])){var r=i.internalGet(this,t[1+n]);if(r)for(var a=0;a<r.length;a++){var s=r.objectAt(a);if(Q.a(s,ce))return s}}}})}),topLeftBadgeViewClasses:Y.b([ce]),_playLivePhoto:s.g("lpkBadge.playLivePhoto",(function(){this._wantsButLacksLPPPlayback=!0})),_stopLivePhoto:s.h("lpkBadge.stopLivePhoto",(function(){this._wantsButLacksLPPPlayback=!1,this.livePhotoPlayer&&this.livePhotoPlayer.beginFinishingPlaybackEarly()})),_wantsButLacksLPPPlayback:a.b(!1),init:function(){var e=this,t=this,n=arguments;this._propagateLPPStatus=Z.a((function(t,n,i,r,a,s){X.a.begin().setIfChanged(e,"_lpp_progress",t).setIfChanged(e,"_lpp_errorCount",n&&n.length).setIfChanged(e,"_lpp_isPlaying",i).setIfChanged(e,"_lpp_videoWidth",r).setIfChanged(e,"_lpp_videoHeight",a).setIfChanged(e,"_lpp_canPlay",s).end()})),this.oneUpLivePhotoLongTapGR=te.a.create({event:"oneUpLivePhotoLongTap",delegate:this}),this.addGestureRecognizer(this.oneUpLivePhotoLongTapGR),t.__s._$1BM$init.apply(t,n)},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){var n=this,i=arguments;return e===this.oneUpLivePhotoLongTapGR||t===this.oneUpLivePhotoLongTapGR||n.__s._$1HU$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(n,i)},isInLivePhotoMode:a.b({readOnly:!0,dependencies:["isBackgroundablySteadilyAloneInParent","isImageSizeStationary","canHoldDerivatives","imageDerivativeLoader.derivative","imageDerivativeLoader.isComplete","media.primaryAsset.isLivePhotoPlayEnabled"],get:Object.assign((function(){return Boolean(void 0!==globalThis.LivePhotosKit&&this.isBackgroundablySteadilyAloneInParent&&this.isImageSizeStationary&&this.canHoldDerivatives&&this.getPath("imageDerivativeLoader.derivative")&&this.getPath("imageDerivativeLoader.isComplete")&&this.getPath("media.primaryAsset.isLivePhotoPlayEnabled"))}),{__CW__getter:function(e,t,n,i){return Boolean(void 0!==globalThis.LivePhotosKit&&i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])&&i.internalGetPath(this,t[3+n])&&i.internalGetPath(this,t[4+n])&&i.internalGetPath(this,t[5+n]))}})}),wantsUIControl:a.b({readOnly:!0,dependencies:[].concat(ue.a.prototype._properties.wantsUIControl.dependencies,["isLivePhotoPlayerVisible","effectType"]),get:function(){var e,t=this,n=arguments;return this.isLivePhotoPlayerVisible&&(e=this.effectType)!==oe.a.BOUNCE&&e!==oe.a.LOOP||t.__s._$1nj$get.apply(t,n)},__superMap:{_$1nj$get:"get"}}),isLivePhotoPlayerVisible:a.b({readOnly:!0,dependencies:["livePhotoPlayer","_lpp_isPlaying"],get:Object.assign((function(){return Boolean(this._lpp_isPlaying&&this.livePhotoPlayer)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n]))}}),didChange:function(e){e&&this._sendLivePhotoPlaybackStat()}}),isRenderDisabled:function(){var e=this,t=arguments;return e.__s._$1_w$isRenderDisabled.apply(e,t)||this.isLivePhotoPlayerVisible},_rerenderSelfWhenLPPVisibilityChanges:s.h("isLivePhotoPlayerVisible",(function(){var e=this.isRenderDisabled();this._rswlppvc_last_isRenderDisabled!==(this._rswlppvc_last_isRenderDisabled=e)&&this.renderSelfSoon()})),effectType:a.b({readOnly:!0,dependencies:["media.primaryAsset.livePhotoEffectType"],get:Object.assign((function(){return this.getPath("media.primaryAsset.livePhotoEffectType")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}}),didChange:function(e){if(e){var t=this.lpkBadge;t&&t.updateBadgeText(e.value)}}}),livePhotoPlayer:a.b({readOnly:!0,dependencies:["isInLivePhotoMode"],get:Object.assign((function(){return!i&&globalThis.LivePhotosKit&&((i=globalThis.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),this.isInLivePhotoMode?i:null}),{__CW__getter:function(e,t,n,r){return!i&&globalThis.LivePhotosKit&&((i=globalThis.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),r.internalGet(this,t[0+n])?i:null}}),didChange:function(e){var t=this.livePhotoContainer,n=this._lastLivePhotoPlayer;if(n!==e){if(this._lastLivePhotoPlayer=e,n){n.parentNode===t&&t.removeChild(n);var i=this._statusObserverKeyOnLPP&&n[this._statusObserverKeyOnLPP];i&&i.disconnect()}if(e){var r=e.parentNode;r&&r!==t&&r.removeChild(e),t.appendChild(e);var a=this.media,s=a.derivativeInfoForGeometricLength(Math.min(800,this.getPath("imageDerivativeLoader.perfectGeometricLength")),"renderableVideo");s?(this.lpkBadge.attachPlayerInstance(e),e.setProperties({caption:a.caption,effectType:this.effectType.value,photo:this.derivative.element,videoSrc:s.url+"&og="+encodeURIComponent(ie.a.RESOURCE_DOWNLOAD.value)}),this._sendVidComplDerivativeRequestStat(s),this._playbackCountSinceVidComplAcquisition=0,this._statusObserverKeyOnLPP||(this._statusObserverKeyOnLPP="_statusObserverFor_"+N.b(this)),e[this._statusObserverKeyOnLPP]?e[this._statusObserverKeyOnLPP].connect():e[this._statusObserverKeyOnLPP]=e.observe("loadProgress","errors","isPlaying","videoWidth","videoHeight","canPlay",this._propagateLPPStatus),this.lpkBadge.resetBadge()):this._propagateLPPStatus(0,E.arrayPool.getAutodisposingInstanceFromParams("NO_DERIVATIVE_ERROR"))}}}}),_lpp_progress:a.b(),_lpp_errorCount:a.b(),_lpp_isPlaying:a.b(),_lpp_videoWidth:a.b(),_lpp_videoHeight:a.b(),_lpp_canPlay:a.b(),_playLPPOnceAble:s.h("livePhotoPlayer","_lpp_canPlay","_lpp_isPlaying","_wantsButLacksLPPPlayback",(function(e,t,n,i){var r=this,a=Boolean(e&&t&&!n&&i);Boolean(this._plppoa_last_shouldPlayNowResult)!==(this._plppoa_last_shouldPlayNowResult=a)&&a&&(this._wantsButLacksLPPPlayback=!1,J.a((function(){r.livePhotoPlayer&&r._lpp_canPlay&&r.livePhotoPlayer.play()}),0))})),feedbackService:a.b(x.a.bindingFor("application.feedbackService")),_maintainLivePhotoPlayerStyling:s.h("imageLeft","imageTop","imageWidth","imageHeight","_lpp_videoWidth","_lpp_videoHeight","isLivePhotoPlayerVisible","livePhotoPlayer","livePhotoContainer",(function(e,t,n,i,r,a,s,o,l){if(!s)return l.style.display="none",void(o?(o.style.display="none",o.style.width=o.style.height="0px",this._mlpps_lppSize!==(this._mlpps_lppSize=0)&&o.updateSize()):this._mlpps_lppSize=0);var c=Math.min(n,r),u=Math.min(i,a);o.style.display=l.style.display="",o.style.width=l.style.width=c+"px",o.style.height=l.style.width=u+"px",l.style.transformOrigin="0 0",l.style.position="absolute",ee.c(l).layerBack().translateDevicePixels(e,t).scale(n/c,i/u),this._mlpps_lppSize!==(this._mlpps_lppSize=1e5*c+u)&&o.updateSize()})),_updateBadge:s.h("_lpp_progress","_lpp_errorCount",(function(e,t){if(this.lpkBadge){if(this.lpkBadge.shouldShowError=Boolean(t),1===e&&0===this.lpkBadge.progress)return;this.lpkBadge.progress=e}})),_userLocaleChanged:s.h(x.a.bindingFor("application.userLocale"),(function(e){return globalThis.LivePhotosKit.Localization.locale=e})),oneUpLivePhotoLongTap:function(){this.oneUpLivePhotoLongTapGR.state===y.b.Ended&&this._playLivePhoto()},_sendVidComplDerivativeRequestStat:function(e){var t=re.a.derivativeRequestFeedbackReportProbability;if(this.feedbackService&&(t>=1||t>=0&&Math.random()<t)){var n=k.a.find(e.mediaPK),i=n&&n.serverDerivativeInfosByDerivativeId,r=i&&i[e.transcodeSourceDerivativeId],a=r?r.width*r.height:void 0;ae.a(Object.assign({derivativeRequestReason:j.a.ONEUP_VIDCOMPL_PREFETCH.value,derivativeApproxArea:ne.a(e.width*e.height),derivativeNameByArea:se.f(e.width*e.height),derivativeNameNominal:e.derivativeName,derivativeApproxByteSize:ne.a(e.byteSize),derivativeUTI:e.uti,derivativeMIMETypeForWebClient:e.mimeType,derivativeIsTranscoded:e.isDynamic,derivativeRequestReportProbability:t,derivativeOffscreeninessAtSend:1},r?{derivativeTranscodeSourceApproxByteSize:ne.a(r.byteSize),derivativeTranscodeSourceApproxDerivativeArea:ne.a(a),derivativeTranscodeSourceDerivativeNameByArea:se.e(a/1.2),derivativeTranscodeSourceDerivativeNameNominal:r.derivativeName,derivativeTranscodeSourceUTI:r.uti}:{}))}},_sendLivePhotoPlaybackStat:function(){var e=++this._playbackCountSinceVidComplAcquisition,t=this.feedbackService;t&&t.report(1===e?"livePhotoPlayback":"livePhotoExtraPlayback")},__superMap:{_$1BM$init:"init",_$1HU$gestureRecognizerShouldRecognizeSimultaneouslyWith:"gestureRecognizerShouldRecognizeSimultaneouslyWith",_$1_w$isRenderDisabled:"isRenderDisabled"}}),he=n(138),pe=n(42),fe=n(201),ge=n(1272),me=n(327),_e=n(1273),ve=n(402),be=n(1355),ye=P.a.extend(le.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"durationString",attributes:{}}],name:"durationBadgeElement",classes:["pok-duration-badge",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEmpty",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"DurationBadgeView"},durationString:a.b({readOnly:!0,dependencies:["presenterView.media.durationString"],get:Object.assign((function(){return this.getPath("presenterView.media.durationString")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isEmpty:a.b({readOnly:!0,dependencies:["durationString"],get:Object.assign((function(){return!this.durationString}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})})}),we=_.a.TOUCH,Ie=Boolean(document.createElement("video").canPlayType("application/vnd.apple.mpegurl")),Se=he.b("VideoPlaybackMode",{CRABS:"crabs",HLS_NATIVE:"hlsNative",HLS_JS:"hlsJs"}),Ce=he.b("VideoElementError",{MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED"}),Ee={1:Ce.MEDIA_ERR_ABORTED,2:Ce.MEDIA_ERR_NETWORK,3:Ce.MEDIA_ERR_DECODE,4:Ce.MEDIA_ERR_SRC_NOT_SUPPORTED},Ae=ue.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"centerView"},{type:"ELEMENT",tagname:"div",name:"typeBadgeElement",classes:["pok-type-badge",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_specificTypeClass",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isTypeBadgeVisible",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageLeft",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageTop",attributes:{},unit:"px",property:"top"}}},{type:"ELEMENT",tagname:"div",name:"videoContainerElement",classes:["pok-video-container"]}],classes:["pok-video-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShowingVideo",truevalue:"pok-showing-video",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isActuallyPresentingAudio",truevalue:"pok-showing-audio",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"playbackModeClass",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"VideoPresenterView"},videoPlayer:void 0,bottomRightBadgeViewClasses:Y.b([ye]),wantsShowingVideo:a.b(!1),canZoom:!1,overrideZoom:!1,videoPlayerError:a.b({didChange:function(e){var t=this;if(e){var n=pe.n().feedbackService;if(n){var i;if(this.videoPlayer){var r=this.videoPlayer.getMediaElement();r&&(i=r.error)}var a=this.isUsingHls?void 0:this.preferredCrabsVideoDerivativeInfo,s=this.getPath("media.serverDerivativeInfosByDerivativeId"),o=a&&s&&s[a.transcodeSourceDerivativeId],l=this.getPath("media.originalVideoDerivativeInfos.0"),c=function(e,n){var i;return n?((i={})[e+"MIMEType"]=n.mimeType,i[e+"UTI"]=n.uti,i[e+"ApproxBitrateMbps"]=ne.a(8*n.byteSize/1e6/(t.getPath("media.primaryAsset.duration")/1e3)),i[e+"IsTranscoded"]=n.isDynamic,i[e+"IsHighEfficiencyCodec"]=n.isHighEfficiencyCodec,i[e+"ReflectsEdits"]=n.reflectsEdits,i[e+"ApproxArea"]=ne.a(n.width*n.height),i):{}};n.report("videoPlayerError",Object.assign({videoPlaybackMode:this.getPath("playbackMode.value")||"",videoElementErrorType:i&&I.a(Ee[i.code],"value")||"",videoElementErrorMessage:i&&i.message||""},this._sanitizedError(e),{recoveryMode:this.getPath("crabsRecoveryMode")},c("videoCrabsDerivative",a),c("videoCrabsDerivativeTranscodeSource",o),c("videoOriginal",l)))}this.destroyVideoPlayer()}}}),_sanitizedError:function(e){return{videoPlayerErrorType:I.a(e,"event.type")||"",videoPlayerErrorDetails:I.a(e,"event.details")||"",videoPlayerErrorIsFatal:I.a(e,"event.fatal")||"",videoPlayerErrorResponseStatus:I.a(e,"event.response.code")||"",videoPlayerErrorResponseText:I.a(e,"event.response.text")||"",_Photos_hls_interception:I.a(e,"_Photos_hls_interception")||""}},isShowingError:a.b({readOnly:!0,dependencies:["wantsShowingVideo","videoPlayerError","videoUrl"],get:Object.assign((function(){return Boolean(this.wantsShowingVideo&&this.videoPlayerError||!this.videoUrl)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])||!i.internalGet(this,t[2+n]))}})}),canBeShowingVideo:a.b({readOnly:!0,dependencies:["videoUrl","videoPlayerError"],get:Object.assign((function(){return Boolean(this.videoUrl&&!this.videoPlayerError)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n]))}})}),isShowingVideo:a.b({readOnly:!0,dependencies:["wantsShowingVideo","canBeShowingVideo"],get:Object.assign((function(){return Boolean(this.wantsShowingVideo&&this.canBeShowingVideo)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n]))}})}),areBottomRightBadgesVisible:a.b({dependencies:["isShowingVideo"],readOnly:!0,get:Object.assign((function(){return!this.isShowingVideo}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isActuallyPresentingAudio:a.b({readOnly:!0,dependencies:["media.specificType"],get:Object.assign((function(){return this.getPath("media.specificType")===k.a.Type.AUDIO}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===k.a.Type.AUDIO}})}),unloadedGradientVerticalCenterOffsetFraction:a.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?0:-1/3}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?0:-1/3}})}),unloadedGradientCenterColor:a.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?"#555":"#f8f8f8"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#555":"#f8f8f8"}})}),unloadedGradientOuterColor:a.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?"#333":"#ddd"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#333":"#ddd"}})}),centerView:a.b({readOnly:!0,dependencies:["isShowingVideo","isShowingError","playButtonView","errorView"],get:Object.assign((function(){return this.isShowingError?this.errorView:this.isShowingVideo?this.isActuallyPresentingAudio?this.bigSpeakerView:null:this.playButtonView}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[3+n]):i.internalGet(this,t[0+n])?this.isActuallyPresentingAudio?this.bigSpeakerView:null:i.internalGet(this,t[2+n])}})}),_recoverPlayback:function(e){if(!this.crabsRecoveryMode){var t;this.crabsRecoveryMode=!0,this.videoPlayer&&(t=this.videoPlayer.getCurrentTime()),this.destroyVideoPlayer(),this._resetVideo(),this.enterVideoModeAndPlay(t);var n=pe.n().feedbackService;n&&n.report("videoPlayerReload",Object.assign({currentTimeRecoverable:Boolean(t)},this._sanitizedError(e)))}},crabsRecoveryMode:a.b(!1),subdomainFlags:b.d({readOnly:!0,get:function(){return{hlsEnabled:!0,recoveryEnabled:!0}}}),canUseHlsJs:a.b({readOnly:!0,get:function(){return window.Hls&&window.Hls.isSupported()}}),hlsMasterPlaylistUrl:a.b({readOnly:!0,dependencies:["media","media.hlsMasterPlaylistUrl","crabsRecoveryMode"],get:Object.assign((function(){if(!this.crabsRecoveryMode)return this.subdomainFlags.hlsEnabled?this.getPath("media.hlsMasterPlaylistUrl"):void 0}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[2+n]))return this.subdomainFlags.hlsEnabled?i.internalGetPath(this,t[1+n]):void 0}})}),preferredCrabsVideoDerivativeInfo:a.b({readOnly:!0,dependencies:["media.renderableVideoDerivativeInfos"],get:function(){return this.getPath("media.renderableVideoDerivativeInfos.0")}}),videoUrl:a.b({readOnly:!0,dependencies:["hlsMasterPlaylistUrl","canUseHlsJs","preferredCrabsVideoDerivativeInfo"],get:Object.assign((function(){var e=this.hlsMasterPlaylistUrl,t=this.canUseHlsJs;return e&&(t||Ie)?e:this.getPath("preferredCrabsVideoDerivativeInfo.url")}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a||Ie)?r:this.getPath("preferredCrabsVideoDerivativeInfo.url")}})}),isUsingHls:a.b({readOnly:!0,dependencies:["hlsMasterPlaylistUrl","videoUrl"],get:Object.assign((function(){var e=this.videoUrl;return e?this.hlsMasterPlaylistUrl===e:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r?i.internalGet(this,t[0+n])===r:void 0}})}),isUsingHlsJs:a.b({readOnly:!0,dependencies:["isUsingHls","canUseHlsJs"],get:Object.assign((function(){return this.isUsingHls&&this.canUseHlsJs}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),playbackMode:a.b({readOnly:!0,dependencies:["isUsingHls","isUsingHlsJs"],get:Object.assign((function(){return this.isUsingHls?this.isUsingHlsJs?Se.HLS_JS:Se.HLS_NATIVE:Se.CRABS}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])?Se.HLS_JS:Se.HLS_NATIVE:Se.CRABS}})}),playbackModeClass:a.b({readOnly:!0,dependencies:["playbackMode"],get:function(){var e=this.getPath("playbackMode.value");return void 0!==e?"playback-mode-"+e:""}}),playButtonView:a.b(l.c(r.a.extend({additionalClassNames:["pok-video-play-button"],action:"enterVideoModeAndPlay"}))),errorView:a.b(l.c(P.a.extend({additionalClassNames:["pok-video-error-view"],staticMembers:{template:{type:"ELEMENT",tagname:"canvas"}},renderSelf:s.h({inputs:["isAttached",fe.a.sharedInstance.bindingFor("devicePixelRatio"),"parent.insetLeft","parent.insetTop","parent.insetWidth","parent.insetHeight","parent.imageLeft","parent.imageTop","parent.imageWidth","parent.imageHeight","parent.derivative"],callback:function(e,t,i,r,a,s,o,l,c,u){if(e&&a&&s&&c&&u){var d=ge.b(n(685));if(d){var h=me.d(d.naturalWidth,d.naturalHeight,Math.min(.9*(c-40),125),Math.min(.9*(u-40),125),E.objectPool.getAutodisposingInstance()),p=E.objectPool.getAutodisposingInstance();p.width=h.width+40,p.height=h.height+40;var f=20*t,g=p.width,m=p.height,_=i+a/2-g/2,v=r+s/2-m/2,b=Math.ceil(g*t),y=Math.ceil(m*t),w=this.element,I=w.getContext("2d");w.width!==b||w.height!==y?(w.width=b,w.height=y):I.clearRect(0,0,b,y);var S=this._workCanvas||(this._workCanvas=E.canvasPool.getInstance()),C=S.getContext("2d");S.width!==b||S.height!==y?(S.width=b,S.height=y):C.clearRect(0,0,b,y);var A=this.getPath("parent.media"),O=A&&A.getBestLoadedDerivative(0,"renderableImage");if(O){var T=Math.round(6*t),M=this._derivativeCanvas||(this._derivativeCanvas=E.canvasPool.getInstance()),D=M.getContext("2d"),P=Math.round(b/T),L=Math.round(y/T);M.width===P&&M.height===L||(M.width=P,M.height=L);var R=O.rectInElement;O.drawIntoContext(D,(_-o)/c*R.width,(v-l)/u*R.height,g/c*R.width,m/u*R.height,0,0,M.width,M.height),_e.a(D,Math.ceil(10*t/T),2,void 0,!0),C.drawImage(M,0,0,b,y)}else C.fillStyle="#eee",C.fillRect(0,0,b,y);C.fillStyle="rgba(255, 255, 255, 0.6)",C.fillRect(0,0,b,y),C.globalCompositeOperation="destination-in",C.drawImage(d,f,f,b-2*f,y-2*f),C.globalCompositeOperation="source-over",I.shadowColor="rgba(0, 0, 0, 0.6)",I.shadowBlur=10*t,I.shadowOffsetY=4*t,I.drawImage(S,0,0),this.style.set("position","absolute").set("left",0).set("top",0).set("transform-origin","0 0").translateDevicePixels(_,v).scale(1/t)}else ge.a(n(685)).then(K.a(this.renderSelf,this))}}}),dispose:function(){var e=this,t=arguments;return this._workCanvas&&(E.canvasPool.disposeInstance(this._workCanvas),this._workCanvas=null),this._derivativeCanvas&&(E.canvasPool.disposeInstance(this._derivativeCanvas),this._derivativeCanvas=null),e.__s._$6ob$dispose.apply(e,t)},__superMap:{_$6ob$dispose:"dispose"}}))),bigSpeakerView:a.b(l.c(P.a.extend({additionalClassNames:["pok-big-speaker-view"]}))),isTypeBadgeVisible:a.b({readOnly:!0,dependencies:["_specificTypeClass","bigSpeakerView","centerView"],get:Object.assign((function(){return Boolean(this._specificTypeClass&&this.bigSpeakerView!==this.centerView)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n]))}})}),_videoPlayTimeout:void 0,enterVideoModeAndPlay:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.claimVideoPlayer(),this.wantsShowingVideo=!0;var n=this.videoUrl,i=this.videoPlayer;n&&(this._videoPlayTimeout=ve.b((function(){i._Photos_currentVideoUrl!==n&&e._loadVideoPlayer(i,n,t),i._Photos_currentVideoUrl=n,i.play(),void 0===e._playbackButtonTimestamp&&(e._playbackButtonTimestamp=performance.now())})))},_sentPlaybackStat:!1,_recordPlaybackStat:O.b((function(){var e=this;if(!this._sentPlaybackStat){var t=pe.n().feedbackService;if(t){this._sentPlaybackStat=!0;var n=this.isUsingHls?void 0:this.preferredCrabsVideoDerivativeInfo,i=this.getPath("media.serverDerivativeInfosByDerivativeId"),r=n&&i&&i[n.transcodeSourceDerivativeId],a=this.getPath("media.originalVideoDerivativeInfos.0"),s=function(t,n){var i;return n?((i={})[t+"MIMEType"]=n.mimeType,i[t+"UTI"]=n.uti,i[t+"ApproxBitrateMbps"]=ne.a(8*n.byteSize/1e6/(e.getPath("media.primaryAsset.duration")/1e3)),i[t+"IsTranscoded"]=n.isDynamic,i[t+"IsHighEfficiencyCodec"]=n.isHighEfficiencyCodec,i[t+"ReflectsEdits"]=n.reflectsEdits,i[t+"ApproxArea"]=ne.a(n.width*n.height),i):{}};t.report("videoPlayerStart",Object.assign({videoPlaybackMode:this.getPath("playbackMode.value")||"",recoveryMode:this.getPath("crabsRecoveryMode")},s("videoCrabsDerivative",n),s("videoCrabsDerivativeTranscodeSource",r),s("videoOriginal",a)))}}})),_playbackButtonTimestamp:void 0,_sentPlayTimingStat:!1,_recordPlayTimingStat:O.b((function(){var e=pe.n().feedbackService;if(e){this._sentPlayTimingStat=!0;var t=performance.now()-this._playbackButtonTimestamp;e.report("videoPlaybackTiming",{videoPlaybackMode:this.getPath("playbackMode.value")||"",recoveryMode:this.crabsRecoveryMode,millisecondsSinceButtonPressed:t})}})),exitVideoModeAndClean:function(){this.wantsShowingVideo=!1,this.relinquishVideoPlayer(),this.crabsRecoveryMode=!1},claimVideoPlayer:function(){window.Hls&&(window.Hls._Photos_vpvOwner=this),this._sentPlaybackStat=!1,this._playbackButtonTimestamp=void 0,this._sentPlayTimingStat=!1;var e=this.hlsMasterPlaylistUrl&&this.canUseHlsJs?be.a.videoPlayerHls:be.a.videoPlayerStatic,t=this.videoPlayer;t!==e&&(t&&t!==e&&this.relinquishVideoPlayer(),this.videoPlayer=e,e._Photos_vpvOwner&&e._Photos_vpvOwner.exitVideoModeAndClean(),e._Photos_vpvOwner=this,e.appendTo(this.videoContainerElement),this._attachListeners(e))},relinquishVideoPlayer:function(){ve.a(this._videoPlayTimeout);var e=this.videoPlayer;window.Hls&&(window.Hls._Photos_vpvOwner=void 0),e&&(this._detachListeners(e),e._Photos_removeFromParent(),e._Photos_vpvOwner=void 0,this.videoPlayer=void 0)},destroyVideoPlayer:function(){ve.a(this._videoPlayTimeout);var e=this.videoPlayer;window.Hls&&(window.Hls._Photos_vpvOwner=void 0),e&&(this._detachListeners(e),e._Photos_removeFromParent(),this.videoPlayer=void 0,be.a.destroyPlayer(e))},togglePlayback:function(){if(this.isShowingError)this.wantsShowingVideo=!1;else if(this.wantsShowingVideo){var e=this.videoPlayer;e&&(e.getPaused()?e.play():e.pause())}else this.enterVideoModeAndPlay()},gestureRecognizerShouldReceive:function(e,t){for(var n=this,i=arguments,r=t.target;r;){if(r===this.videoContainerElement)return!1;r=r.parentNode}return n.__s._$9Nu$gestureRecognizerShouldReceive.apply(n,i)},_loadVideoPlayer:function(e,t,n){e.load([t],[],n)},_attachListeners:function(e){e.on("ended",this._endedPlaying),e.on("play",this._recordPlaybackStat),e.on("timeupdate",this._timeUpdate),e._vpv_receivedVideoPlayerError=this._receivedVideoPlayerError},_detachListeners:function(e){e.off("ended",this._endedPlaying),e.off("play",this._recordPlaybackStat),e.off("timeupdate",this._timeUpdate),e._vpv_receivedVideoPlayerError=void 0},_stopVideo:function(){this.videoPlayer&&(this.videoPlayer.pause(),this.videoPlayer.seek(0))},_resetVideo:function(){ve.a(this._videoPlayTimeout),X.a.begin().setIfChanged(this,"wantsShowingVideo",!1).setIfChanged(this,"videoPlayerError",void 0).end(),this._stopVideo()},_resetWhenHides:s.h("isShowingInParent","isAttached",(function(e,t){e&&t||this._resetVideo()})),_endedPlaying:O.b((function(){this._resetVideo()})),_timeUpdate:O.b((function(e){!this._sentPlayTimingStat&&e.currentTime>0&&this._recordPlayTimingStat()})),_receivedVideoPlayerError:O.b((function(e){this.subdomainFlags.recoveryEnabled&&e.event&&e._Photos_hls_interception&&("networkError"===e.event.type||"mediaError"===e.event.type)?this.crabsRecoveryMode||this.playbackMode!==Se.HLS_JS||this._recoverPlayback(e):void 0===e._Photos_hls_interception&&(this.videoPlayerError=e)})),_layOutCenterView:s.h("insetLeft","insetTop","insetWidth","insetHeight","centerView","centerView.isAttached","errorView",(function(e,t,n,i,r,a,s){if(r&&a&&r!==s){var o=r._vpv_centerViewWidth||(r._vpv_centerViewWidth=r.element.offsetWidth),l=r._vpv_centerViewHeight||(r._vpv_centerViewHeight=r.element.offsetHeight);o&&l&&r.style.set("left",e+n/2-o/2).set("top",t+i/2-l/2)}})),_specificTypeClass:a.b({readOnly:!0,dependencies:["media.specificType","primaryInteractionMode"],get:Object.assign((function(){var e=this.getPath("media.specificType");return e!==k.a.Type.VIDEO&&(this.primaryInteractionMode!==we||e!==k.a.Type.SLOWMO&&e!==k.a.Type.TIMELAPSE)||(e=void 0),e?e.value:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r!==k.a.Type.VIDEO&&(i.internalGet(this,t[1+n])!==we||r!==k.a.Type.SLOWMO&&r!==k.a.Type.TIMELAPSE)||(r=void 0),r?r.value:""}})}),_layOutVideoContainer:s.h({inputs:["imageLeft","imageTop","imageWidth","imageHeight","videoContainerElement","isAttached","isShowingVideo","isActuallyPresentingAudio"],callback:function(e,t,n,i,r,a,s,o){if(a&&r){var l=ee.c(r);l.set("position","absolute").set("left",e).set("top",t).set("width",n).set("height",i).set("transition","opacity 150ms").set("opacity",s?1:0).set("background",o?"":"rgba(0, 0, 0, 0.5)"),s?(l.set("visibility","visible"),this._unscheduleVideoContainerHide()):this._scheduleVideoContainerHide()}}}),_scheduleVideoContainerHide:function(){this._videoContainerHideTimeout||(this._videoContainerHideTimeout=J.a(this._hideVideoContainer,150))},_unscheduleVideoContainerHide:function(){clearTimeout(this._videoContainerHideTimeout),this._videoContainerHideTimeout=null},_hideVideoContainer:O.b((function(){this._unscheduleVideoContainerHide(),this.videoContainerElement&&ee.c(this.videoContainerElement).set("visibility","hidden")})),cleanup:function(){var e=this,t=arguments;this._resetVideo(),this.relinquishVideoPlayer(),this._unscheduleVideoContainerHide(),e.__s._$BLL$cleanup.apply(e,t)},__superMap:{_$9Nu$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$BLL$cleanup:"cleanup"}}),Oe=P.a.extend({mixinDependencies:[p.a,U.a,G.a],owner:a.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"attachedPresenterViewsOutlet"}],classes:["pok-oneup-view"]},__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpView"},collection:a.b(),prerenderDistance:a.b(3),preloadDistance:a.b(12),isPreloadEnabled:a.b(!0),isFocusable:!0,feedbackService:a.b(),customPresenterViewModifications:a.b(),shouldHideMostProminentDisplayOfMediaWithPK:a.b(),desiredMedia:a.b({strong:!0}),fractionalMediaIndex:a.b(),targetMediaIndex:a.b({readOnly:!0,dependencies:["fractionalMediaIndex"],get:Object.assign((function(){var e=this.fractionalMediaIndex;return isNaN(e)?void 0:Math.round(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return isNaN(r)?void 0:Math.round(r)}})}),alternateMediaIndex:a.b({readOnly:!0,dependencies:["fractionalMediaIndex","targetMediaIndex"],get:Object.assign((function(){var e=this.fractionalMediaIndex,t=this.targetMediaIndex;return e<t?t-1:e>t?t+1:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r<a?a-1:r>a?a+1:void 0}})}),targetMedia:a.b({strong:!0,dependencies:["collection","targetMediaIndex"],get:Object.assign((function(){var e=this.collection,t=this.targetMediaIndex;return e&&t>=0&&t<=e.length?e.objectAt(t):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a>=0&&a<=r.length?r.objectAt(a):void 0}}),writeDependencies:["fractionalMediaIndex"],set:Object.assign((function(e){var t=this.collection,n=t&&e?t.indexOf(e):-1;this.fractionalMediaIndex=-1!==n?n:void 0}),{__CW__setter:function(e,t,n,i,r){var a=this.collection,s=a&&e?a.indexOf(e):-1;n[0+i]=-1!==s?s:void 0}}),writeDependencySetPathMap:[!1]}),alternateMedia:a.b({readOnly:!0,strong:!0,dependencies:["collection","alternateMediaIndex"],get:Object.assign((function(){var e=this.collection,t=this.alternateMediaIndex;return e&&t>=0&&t<=e.length?e.objectAt(t):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a>=0&&a<=r.length?r.objectAt(a):void 0}})}),_maintainTargetMediaByDesiredMediaAndCollectionChanges:s.h("desiredMedia","collection","collection.contentsDidChangeUntracked","collection.everythingChanged",(function(e,t){if(t&&t.length&&e)if(-1===t.indexOf(e)){var n=Math.max(0,Math.min(this.fractionalMediaIndex,t.length-1));n!==this.fractionalMediaIndex?this.fractionalMediaIndex=n:this.propertyChanged("fractionalMediaIndex")}else this.targetMedia!==e&&(this.targetMedia=e);else this.fractionalMediaIndex=void 0})),_maintainDesiredMediaByTargetMedia:s.h("targetMedia","isNavigationSwipeGestureInProgress",(function(e,t){if(e&&(this.desiredMedia!==e&&(this.desiredMedia=e),!t)){var n=this.feedbackService;n&&n.report("oneUpViewed")}})),straddleDisplacement:a.b({readOnly:!0,dependencies:["fractionalMediaIndex","targetMediaIndex"],get:Object.assign((function(){var e=this.fractionalMediaIndex;return void 0!==e?e-this.targetMediaIndex:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r?r-i.internalGet(this,t[1+n]):void 0}})}),isStraddlingIndices:a.b({readOnly:!0,dependencies:["straddleDisplacement"],get:Object.assign((function(){return Boolean(this.straddleDisplacement)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),thumbExpansionInfos:a.b({readOnly:!0,dependencies:["fractionalMediaIndex","transition.displayProgress","transition.sourceIndex","transition.targetIndex"],get:Object.assign((function(){var e=this._thumbExpansionInfos_lastRet;if(e){for(var t,n=0;t=e[n];n++)E.objectPool.autodisposeInstance(t);E.arrayPool.autodisposeInstance(e)}var i=this.fractionalMediaIndex,r=this.getPath("transition.displayProgress"),a=this.getPath("transition.sourceIndex"),s=this.getPath("transition.targetIndex"),o=this._thumbExpansionInfos_lastRet=E.arrayPool.getInstance();if(isNaN(i))return o;if(i!==Math.round(i)||void 0===r||void 0===a||void 0===s){var l=Math.floor(i),c=Math.ceil(i),u=E.objectPool.getInstanceWithProperties("index",l,"amount",1-i%1),d=E.objectPool.getInstanceWithProperties("index",c,"amount",i%1);u.amount?o.push(u):E.objectPool.disposeInstance(u),d.amount?o.push(d):E.objectPool.disposeInstance(d)}else{var h=E.objectPool.getInstanceWithProperties("index",a,"amount",1-r),p=E.objectPool.getInstanceWithProperties("index",s,"amount",r);h.amount?o.push(h):E.objectPool.disposeInstance(h),p.amount?o.push(p):E.objectPool.disposeInstance(p)}return o}),{__CW__getter:function(e,t,n,i){var r=this._thumbExpansionInfos_lastRet;if(r){for(var a,s=0;a=r[s];s++)E.objectPool.autodisposeInstance(a);E.arrayPool.autodisposeInstance(r)}var o=i.internalGet(this,t[0+n]),l=i.internalGetPath(this,t[1+n]),c=i.internalGetPath(this,t[2+n]),u=i.internalGetPath(this,t[3+n]),d=this._thumbExpansionInfos_lastRet=E.arrayPool.getInstance();if(isNaN(o))return d;if(o!==Math.round(o)||void 0===l||void 0===c||void 0===u){var h=Math.floor(o),p=Math.ceil(o),f=E.objectPool.getInstanceWithProperties("index",h,"amount",1-o%1),g=E.objectPool.getInstanceWithProperties("index",p,"amount",o%1);f.amount?d.push(f):E.objectPool.disposeInstance(f),g.amount?d.push(g):E.objectPool.disposeInstance(g)}else{var m=E.objectPool.getInstanceWithProperties("index",c,"amount",1-l),_=E.objectPool.getInstanceWithProperties("index",u,"amount",l);m.amount?d.push(m):E.objectPool.disposeInstance(m),_.amount?d.push(_):E.objectPool.disposeInstance(_)}return d}})}),apparentFractionalMediaIndex:a.b({readOnly:!0,dependencies:["fractionalMediaIndex","thumbExpansionInfos"],get:Object.assign((function(){var e=this.thumbExpansionInfos,t=this.fractionalMediaIndex;if(!e||!e.length)return t;for(var n,i=0,r=0,a=0;n=e[a];a++)r+=n.amount,i+=n.amount*n.index;return i/r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!r||!r.length)return a;for(var s,o=0,l=0,c=0;s=r[c];c++)l+=s.amount,o+=s.amount*s.index;return o/l}})}),straddleGapFactor:a.b(.022),straddleGapPixels:a.b(22),straddleInterval:a.b({readOnly:!0,dependencies:["insetWidth","straddleGapFactor","straddleGapPixels"],get:Object.assign((function(){return Math.ceil(this.insetWidth*(1+this.straddleGapFactor)+this.straddleGapPixels)}),{__CW__getter:function(e,t,n,i){return Math.ceil(i.internalGet(this,t[0+n])*(1+i.internalGet(this,t[1+n]))+i.internalGet(this,t[2+n]))}})}),targetMediaView:a.b({readOnly:!0,strong:!0,dependencies:["targetMedia"],get:Object.assign((function(){return this._viewForMedia(this.targetMedia)}),{__CW__getter:function(e,t,n,i){return this._viewForMedia(i.internalGet(this,t[0+n]))}})}),desiredMediaView:a.b(o.c("targetMediaView")),alternateMediaView:a.b({readOnly:!0,strong:!0,dependencies:["alternateMedia"],get:Object.assign((function(){return this._viewForMedia(this.alternateMedia)}),{__CW__getter:function(e,t,n,i){return this._viewForMedia(i.internalGet(this,t[0+n]))}})}),transition:a.b({strong:!0,readOnly:!0,dependencies:["alternateMediaView","targetMediaView"],get:Object.assign((function(){var e,t=this._transition_lastRet,n=this._transition_lastAMV,i=this._transition_lastTMV,r=this.alternateMediaView,a=this.targetMediaView;return e=n||r||!i||!a?void 0:t&&t.targetView===a&&t.progress<1?t:i!==a?this.getTransitionFromViewToView(i,a):void 0,this._transition_lastRet=e,this._transition_lastAMV=r,this._transition_lastTMV=a,e}),{__CW__getter:function(e,t,n,i){var r,a=this._transition_lastRet,s=this._transition_lastAMV,o=this._transition_lastTMV,l=i.internalGet(this,t[0+n]),c=i.internalGet(this,t[1+n]);return r=s||l||!o||!c?void 0:a&&a.targetView===c&&a.progress<1?a:o!==c?this.getTransitionFromViewToView(o,c):void 0,this._transition_lastRet=r,this._transition_lastAMV=l,this._transition_lastTMV=c,r}}),didChange:function(e){var t=this._transition_lastObservedVal;if(t!==e){if(t&&1!==t.progress&&t.finish(),e){var n=t?t.speedMultiplier:1,i=this._transition_lastStartTime||void 0,r=(this._transition_lastStartTime=performance.now())-i;e.speedMultiplier*=r<e.duration?n+.25:n,e.start()}this._transition_lastObservedVal=e}}}),_transition_lastRet:b.d({strong:!0}),_transition_lastAMV:b.d({strong:!0}),_transition_lastTMV:b.d({strong:!0}),_transition_lastObservedVal:b.d({strong:!0}),shouldAvoidTransitions:a.b(),_shouldAvoidTransitions:a.b({dependencies:["shouldAvoidTransitions"],get:Object.assign((function(e){return Boolean(e||this.shouldAvoidTransitions)}),{__CW__getter:function(e,t,n,i){return Boolean(e||i.internalGet(this,t[0+n]))}}),writeDependencies:[],set:d.a}),shouldStickToUnobtrusiveTransitions:a.b(),_shouldStickToUnobtrusiveTransitions:a.b({dependencies:["shouldStickToUnobtrusiveTransitions"],get:Object.assign((function(e){return Boolean(e||this.shouldStickToUnobtrusiveTransitions)}),{__CW__getter:function(e,t,n,i){return Boolean(e||i.internalGet(this,t[0+n]))}}),writeDependencies:[],set:d.a}),isTransitioning:a.b({readOnly:!0,dependencies:["transition"],get:Object.assign((function(){return Boolean(this.transition)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),visibleAttachedChildPresenterViews:a.b({readOnly:!0,dependencies:["targetMediaView","alternateMediaView","transition.sourceView","transition.targetView"],get:Object.assign((function(){var e=this._vacpv_lastRet;return e&&E.arrayPool.autodisposeInstance(e),this._vacpv_lastRet=E.arrayPool.getInstanceFromFilter(E.arrayPool.getAutodisposingInstanceFromUniquesOfParams(this.targetMediaView,this.alternateMediaView,this.getPath("transition.sourceView"),this.getPath("transition.targetView")),L.a)}),{__CW__getter:function(e,t,n,i){var r=this._vacpv_lastRet;return r&&E.arrayPool.autodisposeInstance(r),this._vacpv_lastRet=E.arrayPool.getInstanceFromFilter(E.arrayPool.getAutodisposingInstanceFromUniquesOfParams(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]),i.internalGetPath(this,t[2+n]),i.internalGetPath(this,t[3+n])),L.a)}})}),attachedChildPresenterViews:a.b({readOnly:!0,dependencies:["visibleAttachedChildPresenterViews","proactivelyPrerenderedViews"],get:Object.assign((function(){var e=this._acpv_lastRet;e&&E.arrayPool.autodisposeInstance(e);var t=E.arrayPool.getAutodisposingInstanceFromSlice(this.visibleAttachedChildPresenterViews);t.push.apply(t,this.proactivelyPrerenderedViews);var n=E.arrayPool.getAutodisposingInstanceFromUniquesOfArray(t),i=E.arrayPool.getInstanceFromFilter(n,L.a);return this._acpv_lastRet=i}),{__CW__getter:function(e,t,n,i){var r=this._acpv_lastRet;r&&E.arrayPool.autodisposeInstance(r);var a=E.arrayPool.getAutodisposingInstanceFromSlice(i.internalGet(this,t[0+n]));a.push.apply(a,i.internalGet(this,t[1+n]));var s=E.arrayPool.getAutodisposingInstanceFromUniquesOfArray(a),o=E.arrayPool.getInstanceFromFilter(s,L.a);return this._acpv_lastRet=o}})}),_attachAndDetachChildPresenterViews:s.h("attachedChildPresenterViews","attachedPresenterViewsOutlet",(function(e,t){if(e&&t){for(var n=0;n<t.length;n++){var i=t.objectAt(n);e.includes(i)||(t.remove(i),n--)}for(var r,a=0;r=e[a];a++)t.includes(r)||t.add(r)}})),_handleTransitionCompletion:s.g("transition.didFinish",(function(e){e&&this.propertyChanged("transition")})),getTransitionFromViewToView:function(e,t){var n=this.collection;if(n&&e&&t&&e!==t&&!this._shouldAvoidTransitions){var i=n.indexOf(e.media),r=n.indexOf(t.media);if(-1===i&&(i=void 0),-1===r&&(r=void 0),this._shouldStickToUnobtrusiveTransitions)return Pe.create(e,t,i,r);var a=(i>=0&&r===i+1?1:r>=0&&r===i-1?-1:0)*Math.max(5,.02*this.viewportWidth);return Le.create(e,t,i,r,a)}},zoomLevel:a.b(o.c("targetMediaView.zoomLevel")),unzoomedZoomLevel:a.b({readOnly:!0,binding:o.c("targetMediaView.unzoomedZoomLevel")}),minZoomLevel:a.b({readOnly:!0,binding:o.c("targetMediaView.minZoomLevel")}),maxZoomLevel:a.b({readOnly:!0,binding:o.c("targetMediaView.maxZoomLevel")}),zoomSteps:a.b({readOnly:!0,binding:o.c("targetMediaView.zoomSteps")}),isZoomed:a.b({readOnly:!0,binding:o.c("targetMediaView.isZoomed")}),canZoom:a.b({readOnly:!0,binding:o.c("targetMediaView.canZoom")}),cannotZoom:a.b({readOnly:!0,dependencies:["canZoom"],get:Object.assign((function(){return!this.canZoom}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),zoomInOneStepIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomInOneStep instanceof Function&&e.zoomInOneStep()}},zoomOutOneStepIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomOutOneStep instanceof Function&&e.zoomOutOneStep()}},zoomTo1IfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomTo1 instanceof Function&&e.zoomTo1()}},zoomToFitIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.zoomToFit instanceof Function&&e.zoomToFit()}},toggleZoomIfPossible:function(){if(this.isSteady){var e=this.targetMediaView;e&&e.toggleZoom instanceof Function&&e.toggleZoom()}},shouldUIBeClear:a.b(o.c("targetMediaView.wantsUIControl")),shouldAllUIBeClear:a.b(o.c("targetMediaView.wantsFullUIControl")),isSteady:a.b(o.c("_isSteady_ratchet.value")),_isSteady_ratchet:a.b({strong:!0,defaultValue:l.c(H.a.extend({defersUpgrades:200,value:!1,targetValue:a.b({readOnly:!0,dependencies:["owner.isTransitioning","owner._isNotingChildPresenterViewsUpdate","owner.isExitSwipeGestureInProgress"],get:Object.assign((function(){return!this.getPath("owner.isTransitioning")&&!this.getPath("owner._isNotingChildPresenterViewsUpdate")&&!this.getPath("owner.isExitSwipeGestureInProgress")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])&&!i.internalGetPath(this,t[1+n])&&!i.internalGetPath(this,t[2+n])}})})}))}),isBackgroundablySteady:a.b(o.c("_isBackgroundablySteady_ratchet.value")),_isBackgroundablySteady_ratchet:a.b({strong:!0,defaultValue:l.c(H.a.extend({defersUpgrades:200,value:!1,targetValue:a.b({readOnly:!0,dependencies:["owner.isSteady","owner.thumbnailsStripView.isScrollActivityInProgress","owner.isNavigationSwipeGestureInProgress"],get:Object.assign((function(){return this.getPath("owner.isSteady")&&!this.getPath("owner.thumbnailsStripView.isScrollActivityInProgress")&&!this.getPath("owner.isNavigationSwipeGestureInProgress")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&!i.internalGetPath(this,t[1+n])&&!i.internalGetPath(this,t[2+n])}})}),_goFalseOnViewportSizeChange:s.h("owner.insetWidth","owner.insetHeight",(function(){this.reset()}))}))}),_deferSteadinessRatchets:s.h("straddleDisplacement",(function(){this._isNotingChildPresenterViewsUpdate=!0,this._isNotingChildPresenterViewsUpdate=!1})),_isNotingChildPresenterViewsUpdate:a.b(!1),shouldEnsureOwnMediaRanges:a.b(!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.canEnsureRange&&n.ensureRange(e,t)},_ensureRangeIfPossible:G.b((function(){if(!this.isDisposed&&!this.isDisposing&&this.shouldEnsureOwnMediaRanges){var e=this.collection;if(e&&e.length){var t=this.targetMediaIndex,n=t-30,i=t+30;n=30*Math.floor(n/30),i=30*Math.ceil(i/30),n=Math.max(0,n),(i=Math.min(e.length-1,i))-n&&this.ensureMediaRange(n,i)}}}),500,!0),_loadMediaMetadata:s.h("targetMediaIndex","isPreloadEnabled",(function(e,t){t&&this._ensureRangeIfPossible()})),mediasWithLazilyPrerenderedViews:a.b({readOnly:!0,dependencies:["targetMedia","targetMediaIndex","collection","prerenderDistance"],get:Object.assign((function(){var e=this._mediasWithLazilyPrerenderedViews_lastRet;e&&(E.arrayPool.autodisposeInstance(e),e=this._mediasWithLazilyPrerenderedViews_lastRet=void 0);for(var t=E.arrayPool.getInstance(),n=this.targetMediaIndex,i=this.collection,r=this.prerenderDistance,a=this.targetMedia,s=!1,o=-r;o<=r;o++){var l=i&&i.objectAt(n+o);l&&t.push(l),l===a&&(s=!0)}return a&&!s&&t.push(a),this._mediasWithLazilyPrerenderedViews_lastRet=t}),{__CW__getter:function(e,t,n,i){var r=this._mediasWithLazilyPrerenderedViews_lastRet;r&&(E.arrayPool.autodisposeInstance(r),r=this._mediasWithLazilyPrerenderedViews_lastRet=void 0);for(var a=E.arrayPool.getInstance(),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[3+n]),c=i.internalGet(this,t[0+n]),u=!1,d=-l;d<=l;d++){var h=o&&o.objectAt(s+d);h&&a.push(h),h===c&&(u=!0)}return c&&!u&&a.push(c),this._mediasWithLazilyPrerenderedViews_lastRet=a}})}),lazyPrerenderedViewInstantiators:W.b({source:"mediasWithLazilyPrerenderedViews",outputForInput:function(e){var t=Re.create();return h.a.pause(),t.owner=this,t.media=e,h.a.resume(),t},didChange:R.a}),mediaIndicesWithProactivelyPrerenderedViews:a.b(l.c(Array)),proactivelyPrerenderedViews:a.b({readOnly:!0,dependencies:["mediaIndicesWithProactivelyPrerenderedViews","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:Object.assign((function(){var e=E.arrayPool.getInstanceFromFilter(E.arrayPool.getAutodisposingInstanceFromMap(this.mediaIndicesWithProactivelyPrerenderedViews,this._viewForMediaIndex,this),L.a);e.forEach(Ne);var t=this._mwppv_lastRet;return t&&(t.forEach(xe),E.arrayPool.autodisposeInstance(t)),this._mwppv_lastRet=e}),{__CW__getter:function(e,t,n,i){var r=E.arrayPool.getInstanceFromFilter(E.arrayPool.getAutodisposingInstanceFromMap(i.internalGet(this,t[0+n]),this._viewForMediaIndex,this),L.a);r.forEach(Ne);var a=this._mwppv_lastRet;return a&&(a.forEach(xe),E.arrayPool.autodisposeInstance(a)),this._mwppv_lastRet=r}})}),derivativePreloader:a.b({strong:!0,defaultValue:l.c(B.a.extend({derivativeRequestReason:j.a.ONEUP_MAIN_DISPLAY_PREFETCH,medias:a.b({readOnly:!0,dependencies:["owner.isPreloadEnabled","owner.targetMediaIndex","owner.collection","owner.collection.contentsDidChangeUntracked","owner.collection.everythingChanged","owner.preloadDistance"],get:Object.assign((function(){var e=this._mediasWithDerivatives_lastRet;if(e){for(var t=0,n=e.length;t<n;t++)e[t].release(this,"POK.OneUpView#derivativePreloader.medias");E.arrayPool.autodisposeInstance(e),e=this._mediasWithDerivatives_lastRet=void 0}if(this.getPath("owner.isPreloadEnabled")){var i=this.getPath("owner.collection");if(i&&!i.isDisposed){for(var r=E.arrayPool.getInstance(),a=this.getPath("owner.targetMediaIndex"),s=this.getPath("owner.preloadDistance"),o=-s;o<=s;o++){var l=i.objectAt(a+o);l&&(l.retain(this,"POK.OneUpView#derivativePreloader.medias"),r.push(l))}return this._mediasWithDerivatives_lastRet=r}}}),{__CW__getter:function(e,t,n,i){var r=this._mediasWithDerivatives_lastRet;if(r){for(var a=0,s=r.length;a<s;a++)r[a].release(this,"POK.OneUpView#derivativePreloader.medias");E.arrayPool.autodisposeInstance(r),r=this._mediasWithDerivatives_lastRet=void 0}if(i.internalGetPath(this,t[0+n])){var o=i.internalGetPath(this,t[2+n]);if(o&&!o.isDisposed){for(var l=E.arrayPool.getInstance(),c=i.internalGetPath(this,t[1+n]),u=i.internalGetPath(this,t[5+n]),d=-u;d<=u;d++){var h=o.objectAt(c+d);h&&(h.retain(this,"POK.OneUpView#derivativePreloader.medias"),l.push(h))}return this._mediasWithDerivatives_lastRet=l}}}})}),width:200,height:200,priority:125e3,offscreeninessBase:0,offscreeninessDeltaPerIndex:1,offscreeninessCenterIndex:a.b({readOnly:!0,dependencies:["medias","owner.targetMedia"],get:Object.assign((function(){var e=this.medias;return e?e.indexOf(this.getPath("owner.targetMedia")):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.indexOf(i.internalGetPath(this,t[1+n])):void 0}})})}))}),viewClassForMedia:function(e){var t=this.customPresenterViewModifications,n=this._unmodifiedViewClassForMedia(e);if(!n||!t)return n;var i=this._viewClassesByBasicClass,r=i.get(n);return r||(r=n.extend(t),i.set(n,r),r)},_viewClassesByBasicClass:l.c(Map),_unmodifiedViewClassForMedia:function(e){var t=e&&e.genericType,i=e&&e.specificType;return t&&i?i===k.a.Type.BURST&&this.primaryInteractionMode!==_.a.TOUCH?n(1311).BurstPresenterView:i===k.a.Type.LIVE_PHOTO?x.a.application.isLPKLoaded?de:ue.a:t===k.a.Type.IMAGE?ue.a:t===k.a.Type.VIDEO?Ae:null:null},_viewStoreForMedia:function(e){var t=this.viewClassForMedia(e);if(t){var n=this._viewStores||(this._viewStores={}),i=N.b(t);return n[i]||(n[i]=$.ObjectStore.create({computeStoreKey:function(e){return e&&e.pk},itemClass:t.extend($.ObjectStore.Support,{owner:a.b(this),isCacheableInStore:!1,translationXForStraddle:a.b({readOnly:!0,dependencies:["parent.straddleDisplacement","parent.straddleInterval","parent.isTransitioning","parent.targetMediaView","parent.alternateMediaView"],get:Object.assign((function(){if(!this.getPath("parent.isTransitioning")){var e=this.getPath("parent.straddleDisplacement"),t=this.getPath("parent.straddleInterval");if(!isNaN(e)&&!isNaN(t))return this.getPath("parent.targetMediaView")===this?t*-e:this.getPath("parent.alternateMediaView")===this?t*((e>0?1:-1)-e):void 0}}),{__CW__getter:function(e,t,n,i){if(!i.internalGetPath(this,t[2+n])){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);if(!isNaN(r)&&!isNaN(a))return i.internalGetPath(this,t[3+n])===this?a*-r:i.internalGetPath(this,t[4+n])===this?a*((r>0?1:-1)-r):void 0}}})}),translationXForTransition:a.b(),translationX:a.b({readOnly:!0,dependencies:["translationXForStraddle","translationXForTransition","isShowingInParent"],get:Object.assign((function(){return this.isShowingInParent?(this.translationXForStraddle||0)+(this.translationXForTransition||0):-1e4}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])?(i.internalGet(this,t[0+n])||0)+(i.internalGet(this,t[1+n])||0):-1e4}})}),isParallaxEffectEnabled:a.b({readOnly:!0,dependencies:["parent.targetMediaView","parent.alternateMediaView","parent.isNavigationSwipeGestureInProgress"],get:Object.assign((function(){return this.getPath("parent.isNavigationSwipeGestureInProgress")&&(this===this.getPath("parent.targetMediaView")||this===this.getPath("parent.alternateMediaView"))}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[2+n])&&(this===i.internalGetPath(this,t[0+n])||this===i.internalGetPath(this,t[1+n]))}})}),isAloneInParent:a.b({readOnly:!0,dependencies:["isTargetInParent","parent.alternateMediaView","parent.isTransitioning"],get:Object.assign((function(){return this.getPath("isTargetInParent")&&!this.getPath("parent.isTransitioning")&&!this.getPath("parent.alternateMediaView")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGetPath(this,t[2+n])&&!i.internalGetPath(this,t[1+n])}})}),isTargetInParent:a.b({readOnly:!0,dependencies:["parent.targetMediaView"],get:Object.assign((function(){return this===this.getPath("parent.targetMediaView")}),{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),isShowingInParent:a.b({readOnly:!0,dependencies:["parent.visibleAttachedChildPresenterViews"],get:Object.assign((function(){var e=this.getPath("parent.visibleAttachedChildPresenterViews");return e&&e.includes(this)}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.includes(this)}})}),isSteadyInParent:o.c("owner.isSteady"),isBackgroundablySteadyInParent:o.c("owner.isBackgroundablySteady"),canHoldDerivatives:o.c("owner.isAttached"),shouldHideMostProminentDisplayOfMediaWithPK:o.c("parent.shouldHideMostProminentDisplayOfMediaWithPK"),baseInsetsProvider:o.c("owner"),viewportWidth:o.c("owner.viewportWidth"),viewportHeight:o.c("owner.viewportHeight"),offscreeniness:a.b({readOnly:!0,dependencies:["isShowingInParent","owner.collection","owner.collection.contentsDidChangeUntracked","owner.targetMediaIndex","owner.prerenderDistance","media"],get:Object.assign((function(){if(this.isShowingInParent)return 0;var e=this.getPath("owner.targetMediaIndex");if(e>=0){var t=this.media;if(t){var n=this.getPath("owner.collection");if(n&&n.length){for(var i=this.getPath("owner.prerenderDistance"),r=1;r<=i;r++)if(n.objectAt(e+r)===t||n.objectAt(e-r)===t)return r;return i+1}}}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return 0;var r=i.internalGetPath(this,t[3+n]);if(r>=0){var a=i.internalGet(this,t[5+n]);if(a){var s=i.internalGetPath(this,t[1+n]);if(s&&s.length){for(var o=i.internalGetPath(this,t[4+n]),l=1;l<=o;l++)if(s.objectAt(r+l)===a||s.objectAt(r-l)===a)return l;return o+1}}}}})})})}))}},_viewForMedia:function(e){var t=this._viewStoreForMedia(e);if(t)return t.getItem(e).retain(this,"retain/autorelease in _viewForMedia").autorelease(this,"retain/autorelease in _viewForMedia")},_viewForMediaIndex:function(e){if(e>=0){var t=this.collection;if(t&&e<t.length)return this._viewForMedia(t.objectAt(e))}},goToNext:function(){this.jumpBy(1)},goToPrevious:function(){this.jumpBy(-1)},goToNextUnobtrusively:function(){this._shouldStickToUnobtrusiveTransitions=!0,this.goToNext(),this._shouldStickToUnobtrusiveTransitions=!1},goToPreviousUnobtrusively:function(){this._shouldStickToUnobtrusiveTransitions=!0,this.goToPrevious(),this._shouldStickToUnobtrusiveTransitions=!1},jumpBy:function(e){this.getPath("collection.length"),this.fractionalMediaIndex=Math.max(0,Math.min(this.getPath("collection.length")-1,this.targetMediaIndex+e)),this.sendEvent("oneUpViewDidNavigateInternally")},canGoToNext:a.b({readOnly:!0,dependencies:["targetMediaIndex","collection.length"],get:Object.assign((function(){return this.targetMediaIndex<this.getPath("collection.length")-1}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGetPath(this,t[1+n])-1}})}),canGoToPrevious:a.b({readOnly:!0,dependencies:["targetMediaIndex"],get:Object.assign((function(){return this.targetMediaIndex>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})})}),Te=Oe.ViewTransition=F.a.extend(s.b,V.a,{sourceView:a.b({strong:!0,didChange:R.a}),sourceIndex:a.b(),targetView:a.b({strong:!0,didChange:R.a}),targetIndex:a.b(),didFinish:s.i(),start:function(){},finish:function(){this.didFinish()},initFromPool:function(e,t,n,i){this.__s._$Jsr$initFromPool.call(this),h.a.pause(),this.sourceView=e,this.targetView=t,this.sourceIndex=n,this.targetIndex=i,h.a.resume()},cleanup:function(){var e=this,t=arguments;h.a.pause(),this.sourceView=void 0,this.targetView=void 0,this.sourceIndex=void 0,this.targetIndex=void 0,h.a.resume(),e.__s._$K0C$cleanup.apply(e,t)},__superMap:{_$Jsr$initFromPool:"initFromPool",_$K0C$cleanup:"cleanup"}}),Me=Oe.AnimatedTransition=Te.extend({duration:250,speedMultiplier:1,progress:a.b({defaultValue:0,get:d.a,set:function(e){return Math.max(0,Math.min(1,e))}}),displayProgress:a.b({readOnly:!0,dependencies:["progress"],get:Object.assign((function(){return z.d(this.progress)}),{__CW__getter:function(e,t,n,i){return z.d(i.internalGet(this,t[0+n]))}})}),start:function(){var e=this,t=arguments;e.__s._$KAS$start.apply(e,t),this._nextFrame()},finish:function(){var e=this,t=arguments;this._unscheduleNextFrame(),this.progress=1,this.update(this.displayProgress),this.cleanUpTransitionAfterFinish(),this.sourceView&&this.cleanUpView(this.sourceView),this.targetView&&this.cleanUpView(this.targetView),e.__s._$KJV$finish.apply(e,t)},_nextFrame:function(e){if(e){var t=e.rafID;if(E.objectPool.disposeInstance(e),t!==this._scheduledFrame)return}this._unscheduleNextFrame();var n=performance.now(),i=n-(this._lastTimestamp||n)||0;this._lastTimestamp=n,this.progress+=this.speedMultiplier*i/this.duration,this.update(this.displayProgress),this.progress<1?this._scheduleNextFrame():this.finish()},_scheduleNextFrame:function(){if(!this._scheduledFrame){var e=E.objectPool.getInstance();this._scheduledFrame=e.rafID=w.a(K.a(this._nextFrame,this,e))}},_unscheduleNextFrame:function(){this._scheduledFrame=void 0},cleanup:function(){var e=this,t=arguments;this._unscheduleNextFrame(),this._lastTimestamp=0,this.progress=0,this.speedMultiplier=1,e.__s._$L4u$cleanup.apply(e,t)},update:R.a,cleanUpTransitionAfterFinish:R.a,cleanUpView:R.a,__superMap:{_$KAS$start:"start",_$KJV$finish:"finish",_$L4u$cleanup:"cleanup"}}),De=Oe.CrossfadeTransition=Me.extend({start:function(){var e=this,t=arguments;this.targetView&&this.targetView.style.set("background-color","white"),e.__s._$LB5$start.apply(e,t)},update:function(e){var t=this,n=arguments;t.__s._$LC1$update.apply(t,n),this.sourceView&&this.sourceView.style.set("z-index",1),this.targetView?this.targetView.style.set("z-index",2).set("opacity",e):this.sourceView.style.set("opacity",1-e)},cleanUpView:function(e){var t=this,n=arguments;t.__s._$LIJ$cleanUpView.apply(t,n),e.style.clear("background-color"),e.style.clear("opacity"),e.style.clear("z-index")},__superMap:{_$LB5$start:"start",_$LC1$update:"update",_$LIJ$cleanUpView:"cleanUpView"}}),Pe=De.extend({duration:96,staticMembers:{__QUALIFIED_CLASS_NAME__:"FastCrossfadeTransition"}}),Le=Oe.CrossfadeSlideTransition=De.extend({distanceX:0,initFromPool:function(e,t,n,i,r){var a=this,s=arguments;this.distanceX=r||0,a.__s._$LSf$initFromPool.apply(a,s)},update:function(e){var t=this,n=arguments;t.__s._$LTb$update.apply(t,n);var i=3,r=Math.pow(Math.max(0,Math.min(1,(1/this.speedMultiplier-1/i)/(1-1/i))),.8),a=this.sourceView,s=this.targetView,o=this.distanceX;a&&(a.translationXForTransition=e*-o*r),s&&(s.translationXForTransition=(1-e)*o*r)},cleanUpView:function(e){var t=this,n=arguments;t.__s._$Ll3$cleanUpView.apply(t,n),e.translationXForTransition=void 0,e.style.clear("transform")},__superMap:{_$LSf$initFromPool:"initFromPool",_$LTb$update:"update",_$Ll3$cleanUpView:"cleanUpView"}}),Re=q.a.extend({delay:500,media:a.b(),canHaveInstance:o.c("owner.isSteady"),hypotheticalInstance:a.b({readOnly:!0,dependencies:["media","media.specificType","owner","owner.collection"],get:Object.assign((function(){var e=this.media,t=this.owner;if(e&&t)return t._viewForMedia(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);if(r&&a)return a._viewForMedia(r)}})}),cleanup:function(){var e=this,t=arguments;this.media=void 0,e.__s._$Lxb$cleanup.apply(e,t)},__superMap:{_$Lxb$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyPresenterViewInstantiator"}}),xe=function(e){return e.release()},Ne=function(e){return e.retain()},Fe=n(815),Ve=r.a.extend({staticMembers:{className:"pok-next-prev-button",__QUALIFIED_CLASS_NAME__:"NextPrevButton"},isEnabled:a.b(),isDisabled:a.b({readOnly:!0,dependencies:["isEnabled"],get:Object.assign((function(){return!this.isEnabled}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_assignRepetitionAction:s.h("isBeingPressed","parent",(function(e,t){t&&(t.repetitionAction=e?this.action:"")})),_applyPointerEvents:s.h("parent.shouldUIBeClear",(function(e){this.style.set("pointer-events",e?"none":void 0)}))}),ke=Oe.extend({mixinDependencies:[p.a,f.a,T,D],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"detailsVCView"},{type:"VIEWOUTLET",tagname:"view",name:"nextButton"},{type:"VIEWOUTLET",tagname:"view",name:"prevButton"},{type:"VIEWOUTLET",tagname:"view",name:"thumbnailsStripView"},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["pok-main-oneup-view"]}},__QUALIFIED_CLASS_NAME__:"PhotosOneUpView"},shouldStickToUnobtrusiveTransitions:o.c("thumbnailsStripView.isScrollActivityInProgress"),isInSpinnerMode:a.b(),handheldViewControllerTransition:a.b(),isFocusable:!0,shouldEnsureOwnMediaRanges:a.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign((function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),isPreloadEnabled:a.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign((function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),_gated_targetMedia:g.b({strong:!0,changesProactivelyButSparsely:!0,source:"targetMedia",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_targetMedia=e}}),gated_targetMedia:a.b(),_gated_canZoom:g.b({changesProactivelyButSparsely:!0,source:"canZoom",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_canZoom=e}}),gated_canZoom:a.b(),canUpdateGatedProperties:a.b({readOnly:!0,dependencies:["thumbnailsStripView.scrollMotionTracker.isStationary","isSteady"],get:Object.assign((function(){return this.isSteady&&this.getPath("thumbnailsStripView.scrollMotionTracker.isStationary")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&i.internalGetPath(this,t[0+n])}})}),_nextButton:a.b({strong:!0,defaultValue:l.c(Ve.extend({additionalClassNames:["pok-next-button"],isEnabled:o.c("parent.canGoToNext"),action:"goToNext"}))}),nextButton:a.b({strong:!0,readOnly:!0,dependencies:["_nextButton","primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===_.a.MOUSE?this._nextButton:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===_.a.MOUSE?i.internalGet(this,t[0+n]):void 0}})}),_prevButton:a.b({strong:!0,defaultValue:l.c(Ve.extend({additionalClassNames:["pok-previous-button"],isEnabled:o.c("parent.canGoToPrevious"),action:"goToPrevious"}))}),prevButton:a.b({strong:!0,readOnly:!0,dependencies:["_prevButton","primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===_.a.MOUSE?this._prevButton:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===_.a.MOUSE?i.internalGet(this,t[0+n]):void 0}})}),repetitionAction:a.b(""),actionRepetitionTimer:a.b({strong:!0,defaultValue:l.c(c.a.extend({delays:[350,250,220,200,180,165,150,138,126,114,102,90,80,72,64],action:o.c("owner.repetitionAction"),_startOrStopWhenNecessary:s.h("action","owner.isAttached",(function(e,t){var n=this.isRunning,i=t&&e;n&&!i?this.stop():!n&&i?this.start():n&&i&&this.restart()}))}))}),_spinnerView:a.b({strong:!0,defaultValue:l.c(u.a.extend({owner:a.b(),color:"rgba(255, 255, 255, 1.0)",size:48,_updateLayout:s.h("owner.insetCenterX","owner.insetCenterY",(function(e,t){var n=this.size;this.style.translateDevicePixels(e-n/2,t-n/2).set("position","absolute")}))}))}),spinnerView:a.b({strong:!0,readOnly:!0,dependencies:["_spinnerView","isInSpinnerMode"],get:Object.assign((function(){return this.isInSpinnerMode?this._spinnerView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[0+n]):null}})}),thumbnailsStripView:a.b({strong:!0,defaultValue:l.c(Fe.a.extend({mixinDependencies:[p.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.baseInsetsProvider.insetBottom",attributes:{},unit:"px",property:"bottom"}}}}},ownerIndicatedThumbExpansionInfos:o.c("parent.thumbExpansionInfos"),ownerIndicatedApparentFractionalMediaIndex:o.c("parent.apparentFractionalMediaIndex"),collection:o.c("parent.collection"),viewportWidth:o.c("parent.viewportWidth"),_compactSizeTouchInteractionRules:{minimumHeight:45,maximumHeight:45,viewportHeight:45,allowsVerticalPanResize:!1,allowsRetractionDuringResize:!1},_regularSizeTouchInteractionRules:{minimumHeight:45,maximumHeight:100,viewportHeight:55,allowsVerticalPanResize:!0,allowsRetractionDuringResize:!1},_mouseInteractionRules:{minimumHeight:55,maximumHeight:200,viewportHeight:79,allowsVerticalPanResize:!0,allowsRetractionDuringResize:!0},_layoutAndInteractionRules:a.b({readOnly:!0,dependencies:["primaryInteractionMode","sizeClass"],get:Object.assign((function(){return this.primaryInteractionMode===_.a.MOUSE?this._mouseInteractionRules:this.sizeClass===m.a.REGULAR?this._regularSizeTouchInteractionRules:this._compactSizeTouchInteractionRules}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===_.a.MOUSE?this._mouseInteractionRules:i.internalGet(this,t[1+n])===m.a.REGULAR?this._regularSizeTouchInteractionRules:this._compactSizeTouchInteractionRules}})}),viewportHeight:a.b({defaultValue:NaN,dependencies:["_layoutAndInteractionRules"],get:Object.assign((function(e){return e>0?e:this._layoutAndInteractionRules.viewportHeight}),{__CW__getter:function(e,t,n,i){return e>0?e:i.internalGet(this,t[0+n]).viewportHeight}}),writeDependencies:[],set:d.a}),minimumHeight:a.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign((function(){return this._layoutAndInteractionRules.minimumHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).minimumHeight}})}),maximumHeight:a.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign((function(){return this._layoutAndInteractionRules.maximumHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).maximumHeight}})}),allowsVerticalPanResize:a.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign((function(){return this._layoutAndInteractionRules.allowsVerticalPanResize}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).allowsVerticalPanResize}})}),allowsRetractionDuringResize:a.b({readOnly:!0,dependencies:["_layoutAndInteractionRules"],get:Object.assign((function(){return this._layoutAndInteractionRules.allowsRetractionDuringResize}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).allowsRetractionDuringResize}})}),baseInsetHeight:a.b({readOnly:!0,dependencies:["viewportHeight","primaryInteractionMode"],get:Object.assign((function(){var e=this.viewportHeight;return Math.round(this.primaryInteractionMode===_.a.TOUCH?e-3:.84*e-4)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Math.round(i.internalGet(this,t[1+n])===_.a.TOUCH?r-3:.84*r-4)}})}),ensureMediaRange:function(e,t){return this.owner.ensureMediaRange(e,t)},_maintainHorizontalInsets:s.h("owner.insetLeft","owner.insetRight",(function(e,t){h.a.pause(),this.registerInsetLeft("ownerOneUp",e),this.registerInsetRight("ownerOneUp",t),h.a.resume()}))}))}),_adjustSelfForThumbnailsStripInset:s.h("thumbnailsStripView.retractedHeight",(function(e){this.registerInsetBottom(this.thumbnailsStripView,e)})),userDidPointerDownInOneUp:function(){this.getPath("thumbnailsStripView.hasMomentum")&&this.thumbnailsStripView.stopMomentumScroll()},thumbnailsStripDidSelectMediaIndex:function(e){e>=0&&e<this.getPath("collection.length")&&this.targetMediaIndex!==e&&(this.fractionalMediaIndex=e,this.sendEvent("oneUpViewDidNavigateInternally"))},_layOutButtons:s.h("insetLeft","insetTop","insetWidth","insetHeight","isAttached",(function(e,t,n,i,r){if(r&&this.nextButton&&this.prevButton){var a=this._buttonSize||(this._buttonSize=this.nextButton.element.offsetWidth);this._nextButtonCenterX=e+n-50-a/2,this._prevButtonCenterX=e+50+a/2,this._nextButtonCenterY=this._prevButtonCenterY=t+i/2,this.nextButton.style.set("left",this._nextButtonCenterX-a/2).set("top",this._nextButtonCenterY-a/2),this.prevButton.style.set("left",this._prevButtonCenterX-a/2).set("top",this._prevButtonCenterY-a/2)}})),_fadeButtons:s.h("mouseX","mouseY","insetLeft","insetWidth","insetTop","insetHeight","nextButton.isDisabled","prevButton.isDisabled","shouldUIBeClear",(function(e,t,n,i,r,a,s,o,l){if(this.nextButton&&this.prevButton){var c=t>r+35&&t<r+a-35;this.nextButton.style.set("opacity",!s&&!l&&c&&e>n+i-130?1:0),this.prevButton.style.set("opacity",!o&&!l&&c&&e<n+130?1:0)}}))})},function(e,t,n){"use strict";n.d(t,"a",(function(){return ie})),n(1),n(0),n(4),n(6),n(2),n(11);var i=n(7),r=n(78),a=n(55),s=n(20),o=n(789),l=n(202),c=n(405),u=n(1243),d=n(382),h=n(199),p=n(697),f=n(201),g=n(193),m=n(139),_=n(256),v=n(15),b=n(17),y=n(99),w=n(389),I=n(214),S=n(672),C=n(40),E=n(200),A=n(231),O=n(97),T=n(1242),M=n(790),D=n(1267),P=n(25),L=n(760),R=n(203),x=n(580),N=n(266),F=n(466),V=n(567),k=n(1254),B=n(1268),j=n(1282),U=n(583),G=n(1280),H=n(328),W=n(51),$=n(1322),z=n(804),K=n(327),q=n(1272),Q={},Y=C.a.extend(E.a,s.b,$.b).extend({ownerStripView:i.b(null),mediaIndex:i.b(NaN),substrip:i.b({strong:!0}),isBeingPressed:i.b(!1),leftInSubstrip:i.b(NaN),topInSubstrip:i.b(0),widthInSubstrip:i.b({dependencies:["ownerStripView.thumbWidth"],get:Object.assign((function(e){return e||this.getPath("ownerStripView.thumbWidth")}),{__CW__getter:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])}}),writeDependencies:[],set:I.a}),heightInSubstrip:i.b(r.c("ownerStripView.thumbHeight")),derivativeContainerWidth:r.c("ownerStripView.thumbWidth"),derivativeContainerHeight:r.c("ownerStripView.thumbHeight"),derivativeRequestReason:z.a.ONEUP_THUMBSTRIP,shouldCorrectDerivativeForDevicePixelRatio:!0,shouldDerivativeCoverContainer:!0,wantsDownsampledDerivatives:!0,media:i.b({readOnly:!0,strong:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign((function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),initFromPool:function(e,t,n,i,r){this.__s._$aJ$initFromPool.call(this),b.a.pause(),this.ownerStripView=e,this.mediaIndex=t,this.detectDerivativeOffscreeninessAndPriority(e,t,n,i,r),b.a.resume()},cleanup:function(){var e=this,t=arguments;b.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.substrip=null,this.isBeingPressed=!1,this.leftInSubstrip=NaN,this.widthInSubstrip=void 0,this.derivativeOffscreeniness=void 0,this.derivativePriority=void 0,b.a.resume(),e.__s._$mX$cleanup.apply(e,t)},detectDerivativeOffscreeninessAndPriority:function(e,t,n,i,r){var a,s,o=t>=0?t:this.mediaIndex,l=e||this.ownerStripView;if(o>=0){var c=n>=0?n:l.firstVisibleThumbIndex,u=i>=0?i:l.lastVisibleThumbIndex,d=r>=0?r:l.centerThumbIndex;if(c>=0&&d>=c&&u>=d)if(o>=c&&o<=u)a=0;else{var h=Math.max(u-c,2*(d-c),2*(u-d));a=Math.max(o-u,c-o)/h}d>=0&&(s=111e3+Math.abs(d-o))}a!==this.derivativeOffscreeniness&&(this.derivativeOffscreeniness=a),s!==this.derivativePriority&&(this.derivativePriority=s)},render:s.h({inputs:["substrip","derivative","leftInSubstrip","topInSubstrip","widthInSubstrip","heightInSubstrip","isBeingPressed","ownerStripView","media.specificType"],callback:function(e,t,i,r,a,s,o,l,c){if(e&&l&&!isNaN(i+r+a+s)){var u=c===O.a.Type.AUDIO;if(t){var d=K.a(t.physicalWidth,t.physicalHeight,a,s,void 0,void 0,void 0,Q);t.drawIntoContext(e.context,d.cropX,d.cropY,d.cropWidth,d.cropHeight,i,r,a,s)}else e.context.clearRect(i,r,a,s),e.context.fillStyle=u?"rgba(0, 0, 0, 0.66666666667)":"rgba(0, 0, 0, 0.06666666667)",e.context.fillRect(i,r,a,s),u&&q.a(n(1305)).thenSync(N.a(this._drawAudioBadge,this,e,i,r,a,s));this.doAdditionalRendering(e,t,i,r,a,s),o&&(e.context.fillStyle="rgba(0, 0, 0, 0.15)",e.context.fillRect(i,r,a,s)),e.context.clearRect(i,r,1,s)}}}),_drawAudioBadge:function(e,t,n,i,r,a,s,o){if(o){var l=K.d(a.naturalWidth,a.naturalHeight,.7*i,.6*r,P.objectPool.getAutodisposingInstance()),c=l.width,u=l.height;e.context.globalAlpha=.5,e.context.drawImage(a,t+i/2-c/2,n+r/2-u/2,c,u),e.context.globalAlpha=1}else this.render()},doAdditionalRendering:W.a,__superMap:{_$aJ$initFromPool:"initFromPool",_$mX$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbnailsStripThumbRenderer"}}),Z=l.a.extend(c.a,u.a,T.a,M.a,D.a,A.a).extend({owner:i.b(),shouldTrackNativeScroll:!1,shouldRenderInsetsToScrollIndicators:!1,horizontalScrollIndicatorClass:d.a.extend({scrollIndicatorShouldEnlarge:!1,numberOfStripWidthsTillWeShowTheThumb:5,stripWidth:i.b(),viewportWidth:i.b(),renewVisibility:function(){var e=this,t=arguments;this.stripWidth<this.viewportWidth*this.numberOfStripWidthsTillWeShowTheThumb?this._opacity=0:e.__s._$sA$renewVisibility.apply(e,t)},__superMap:{_$sA$renewVisibility:"renewVisibility"}}),horizontalScrollIndicator:i.b({downstreamBindings:{stripWidth:"(owner).stripWidth",viewportWidth:"(owner).viewportWidth"}}),additionalClassNames:h.b(["pok-thumbnails-strip-view"]),collection:i.b(),baseInsetHeight:i.b(r.c("viewportHeight")),thumbAspectRatio:i.b(47/84),thumbRendererClass:Y,baseInsetTop:i.b({readOnly:!0,dependencies:["baseInsetBottom","baseInsetHeight","viewportHeight"],get:Object.assign((function(){return this.viewportHeight-this.baseInsetBottom-this.baseInsetHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])-i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),baseInsetBottom:i.b({readOnly:!0,dependencies:["viewportHeight","baseInsetHeight"],get:Object.assign((function(){return Math.ceil((this.viewportHeight-this.baseInsetHeight)/2)}),{__CW__getter:function(e,t,n,i){return Math.ceil((i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/2)}})}),substripWidth:i.b({readOnly:!0,dependencies:["substripHeight"],get:Object.assign((function(){return J(Math.max(256,4*this.substripHeight))}),{__CW__getter:function(e,t,n,i){return J(Math.max(256,4*i.internalGet(this,t[0+n])))}})}),substripHeight:i.b({readOnly:!0,dependencies:["thumbHeight"],get:Object.assign((function(){return J(this.thumbHeight)}),{__CW__getter:function(e,t,n,i){return J(i.internalGet(this,t[0+n]))}})}),thumbHeight:i.b(r.c("insetHeight")),thumbWidth:i.b({readOnly:!0,dependencies:["thumbHeight","thumbAspectRatio"],get:Object.assign((function(){return Math.round(this.thumbHeight*this.thumbAspectRatio)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),thumbsPerGroup:i.b({readOnly:!0,dependencies:["thumbWidth","substripWidth"],get:Object.assign((function(){return Math.floor(this.substripWidth/this.thumbWidth)}),{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n]))}})}),thumbCount:i.b({readOnly:!0,dependencies:["collection.length"],get:Object.assign((function(){return Math.floor(this.getPath("collection.length"))}),{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGetPath(this,t[0+n]))}})}),expandThumb:function(e,t,n){isNaN(this.scrollX)&&(n=0);var i=this.thumbExpansionsByMediaIndex,r=i[e];if(!r){if(!t)return;r=i[e]=X.create(this,e,n?0:t)}n?r.getFinalValue("expansionAmount")!==t&&r.animate("expansionAmount",t,n):r.expansionAmount=t},expandThumbs:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.arrayPool.getAutodisposingInstance(),n=arguments.length>1?arguments[1]:void 0,i=P.setPool.getAutodisposingInstance(),r=0;e=t[r];r++)this.expandThumb(e.index,e.amount,n),i.add(e.index);this.unexpandAllThumbs(n,i)},unexpandAllThumbs:function(e,t){if(this.updateToThumbExpansionsSoon(),isNaN(t)||(t=P.setPool.getAutodisposingInstanceFromParams(t)),e||t)for(var n,i=this.thumbExpansions,r=0;n=i[r];r++){var a=n.mediaIndex;t&&t.has(a)||this.expandThumb(a,0,e)}else p.a(this.thumbExpansionsByMediaIndex)},thumbExpansions:i.b({readOnly:!0,dependencies:["thumbExpansionsByMediaIndex"],get:Object.assign((function(){var e=this._thumbExpansions_lastRet;e&&(this._thumbExpansions_lastRet=null,P.arrayPool.disposeInstance(e));var t=P.arrayPool.getInstance(),n=this.thumbExpansionsByMediaIndex,i=P.arrayPool.getInstance();for(var r in n)if(n.hasOwnProperty(r)){var a=parseInt(r,10);isNaN(a)||i.push(a)}i.sort(te);for(var s=0,o=i.length;s<o;s++)t.push(n[i[s]]);return this._thumbExpansions_lastRet=t}),{__CW__getter:function(e,t,n,i){var r=this._thumbExpansions_lastRet;r&&(this._thumbExpansions_lastRet=null,P.arrayPool.disposeInstance(r));var a=P.arrayPool.getInstance(),s=i.internalGet(this,t[0+n]),o=P.arrayPool.getInstance();for(var l in s)if(s.hasOwnProperty(l)){var c=parseInt(l,10);isNaN(c)||o.push(c)}o.sort(te);for(var u=0,d=o.length;u<d;u++)a.push(s[o[u]]);return this._thumbExpansions_lastRet=a}})}),thumbExpansionsByMediaIndex:i.b({readOnly:!0,dependencies:["collection.contentsDidChangeUntracked","collection.everythingChanged"],get:function(){return this._thumbExpansionsByMediaIndex}}),_thumbExpansionsByMediaIndex:a.c(Object),width:r.c("viewportWidth"),height:r.c("viewportHeight"),scrollMaxY:r.c("viewportHeight"),scrollMaxX:i.b({readOnly:!0,dependencies:Array.from(new Set(["stripWidth","thumbCount","viewportWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){return Math.round(this.stripWidth-.5*this.widthInStripForThumbIndex(0)-.5*this.widthInStripForThumbIndex(this.thumbCount-1))+this.viewportWidth}}),leftInStripForThumbIndex:function(e){for(var t,n,i=this.thumbExpansions,r=this.thumbWidth,a=0,s=-1,o=0;(t=i&&i[o])&&(n=t.mediaIndex)<e;o++)a+=(n-s-1)*r,a+=t.widthInStrip,s=n;return a+(e-s-1)*r},centerInStripForThumbIndex:function(e){return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)/2},widthInStripForThumbIndex:function(e){var t=this.thumbExpansionsByMediaIndex[e];return t?t.widthInStrip:this.thumbWidth},thumbIndexForLeftInStrip:function(e){return e>=0&&e<this.stripWidth?L.b.call(this,this.leftInStripForThumbIndex,e,0,this.thumbCount-1,.01,0,1):NaN},thumbIndexForPointInView:function(e,t){return 1===arguments.length&&(t=e.y,e=e.x),t>=this.stripTop&&t<this.stripTop+this.stripHeight?this.thumbIndexForLeftInStrip(e-this.stripLeft):NaN},thumbIndexForPointOnPage:function(e,t){1===arguments.length&&(t=e.y,e=e.x);var n=this.rect;return n?this.thumbIndexForPointInView(e-n.left,t-n.top):NaN},rectInStripForThumbIndex:function(e){if(!(e>=0&&e<this.thumbCount))return null;var t=P.objectPool.getAutodisposingInstance();return t.x=this.leftInStripForThumbIndex(e),t.y=0,t.width=this.widthInStripForThumbIndex(e),t.height=this.thumbHeight,t},rectInViewForThumbIndex:function(e){var t=this.rectInStripForThumbIndex(e);return t&&(t.x+=this.stripLeft,t.y+=this.stripTop),t},fractionalCenterThumbIndexForStripLeft:function(e){var t=this.thumbCount,n=this.insetCenterX-e,i=this.thumbIndexForLeftInStrip(n),r=this.rectInStripForThumbIndex(i);if(!r)return NaN;var a,s,o,l=r.x+r.width/2;if(n===l)return i;if(n>l){if(i+1>=t)return i;var c=this.rectInStripForThumbIndex(i+1);s=l,o=c.x+c.width/2,a=i}else{if(0===i)return i;var u=this.rectInStripForThumbIndex(i-1);s=u.x+u.width/2,o=l,a=i-1}return a+(n-s)/(o-s)},stripLeftToAchieveFractionalCenterThumbIndex:function(e){if(isNaN(e))return NaN;if(!this.thumbCount)return NaN;e=Math.max(0,Math.min(this.thumbCount-1,e));var t=Math.floor(e),n=Math.ceil(e),i=this.rectInStripForThumbIndex(t),r=i.x+i.width/2;if(n!==t){var a=e-t;r=(1-a)*r+a*((i=this.rectInStripForThumbIndex(n)).x+i.width/2)}return this.insetCenterX-r},stripLeftForScrollX:function(e){return this.insetCenterX?this.insetCenterX-this.centerInStripForThumbIndex(0)-e:NaN},scrollXForStripLeft:function(e){return this.insetCenterX?this.insetCenterX-this.centerInStripForThumbIndex(0)-e:NaN},dpr:i.b(f.a.sharedInstance.bindingFor("devicePixelRatio")),fractionalCenterThumbIndex:i.b({dependencies:Array.from(new Set(["stripLeft","thumbCount","insetCenterX","stripWidth","thumbCount","thumbExpansions","thumbWidth","thumbCount","thumbHeight","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){return this.fractionalCenterThumbIndexForStripLeft(this.stripLeft)},writeDependencies:["stripLeft"],set:Object.assign((function(e){var t=Math.round(this.stripLeftToAchieveFractionalCenterThumbIndex(e));isNaN(t)||(this.scrollIsIntended++,this.stripLeft=t,this.scrollIsIntended--)}),{__CW__setter:function(e,t,n,i,r){var a=Math.round(this.stripLeftToAchieveFractionalCenterThumbIndex(e));isNaN(a)||(this.scrollIsIntended++,n[0+i]=a,this.scrollIsIntended--)}}),writeDependencySetPathMap:[!1]}),stripLeft:i.b({dependencies:Array.from(new Set(["scrollX","dpr","insetCenterX","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex"])),get:function(){var e=this.dpr;return Math.round(this.stripLeftForScrollX(this.scrollX)*e)/e},writeDependencies:["scrollX"],set:Object.assign((function(e){if(this.insetCenterX){var t=this.scrollXForStripLeft(e),n=this.dpr;this.scrollIsIntended++,this.scrollX=Math.round(t*n)/n,this.scrollIsIntended--}}),{__CW__setter:function(e,t,n,i,r){if(this.insetCenterX){var a=this.scrollXForStripLeft(e),s=this.dpr;this.scrollIsIntended++,n[0+i]=Math.round(a*s)/s,this.scrollIsIntended--}}}),writeDependencySetPathMap:[!1]}),stripTop:i.b(r.c("insetTop")),stripWidth:i.b({readOnly:!0,dependencies:Array.from(new Set(["thumbCount","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","thumbExpansions","thumbWidth"])),get:function(){var e=this.thumbCount-1;return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)}}),stripHeight:i.b(r.c("thumbHeight")),overdrawDistance:i.b({readOnly:!0,dependencies:[],get:function(){return 0}}),firstVisibleStripPixel:i.b({readOnly:!0,dependencies:["thumbWidth","stripLeft","overdrawDistance"],get:Object.assign((function(){return this.thumbWidth?Math.max(0,-this.stripLeft-this.overdrawDistance):NaN}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Math.max(0,-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])):NaN}})}),lastVisibleStripPixel:i.b({readOnly:!0,dependencies:["stripWidth","firstVisibleStripPixel","viewportWidth","overdrawDistance"],get:Object.assign((function(){return-1+Math.min(this.stripWidth,this.firstVisibleStripPixel+this.viewportWidth+2*this.overdrawDistance)}),{__CW__getter:function(e,t,n,i){return-1+Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+2*i.internalGet(this,t[3+n]))}})}),firstVisibleThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["firstVisibleStripPixel","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.firstVisibleStripPixel)}}),lastVisibleThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["lastVisibleStripPixel","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.lastVisibleStripPixel)}}),thumbPreparationPad:i.b({readOnly:!0,dependencies:["viewportWidth","thumbWidth"],get:Object.assign((function(){return Math.max(40,Math.min(100,this.viewportWidth/this.thumbWidth|0))}),{__CW__getter:function(e,t,n,i){return Math.max(40,Math.min(100,i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])|0))}})}),firstPreparedThumbIndex:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","thumbPreparationPad"],get:Object.assign((function(){return Math.max(0,this.firstVisibleThumbIndex-this.thumbPreparationPad)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))}})}),lastPreparedThumbIndex:i.b({readOnly:!0,dependencies:["thumbCount","lastVisibleThumbIndex","thumbPreparationPad"],get:Object.assign((function(){return Math.min(this.thumbCount-1,this.lastVisibleThumbIndex+this.thumbPreparationPad)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n])-1,i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n]))}})}),firstGuaranteedIndexInThumbRenderers:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign((function(){return this.firstVisibleThumbIndex-this.firstPreparedThumbIndex}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),lastGuaranteedIndexInThumbRenderers:i.b({readOnly:!0,dependencies:["lastVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign((function(){return this.lastVisibleThumbIndex-this.firstPreparedThumbIndex}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),appendedSubstripPool:i.b({strong:!0,defaultValue:a.c(P.Pool.extend({createInstance:function(){var e=P.canvasPool.getInstance();g.c(e).set("position","absolute");var t=document.createElement("div");return t.appendChild(e),g.c(t).set("position","absolute").set("overflow","hidden").set("z-index",100),t._canvas=e,t.context=e.getContext("2d"),t._deallocBuffer=function(){t.setBackingSize(0,0,1)},t._deallocBufferSoon=function(){t._abortBufferDealloc(),t._bufferDeallocTimeout=m.a(t._deallocBuffer,1e3)},t._abortBufferDealloc=function(){return!!t._bufferDeallocTimeout&&(clearTimeout(t._bufferDeallocTimeout),t._bufferDeallocTimeout=null,!0)},t._retainCount=0,t.retain=function(){t._retainCount++},t.release=function(){--t._retainCount||this.disposeInstance(t)}.bind(this),t.setBackingSize=function(n,i,r){if(n!==this._backingWidth||i!==this._backingHeight||r!==this._backingDPR){this._isBufferClearSinceLastResize=!0,this._backingWidth=n,this._backingHeight=i,this._backingDPR=r;var a=e.width=Math.ceil(n*r),s=e.height=Math.ceil(i*r);1!==r&&t.context.scale(a/n,s/i),g.c(e).set("width",n).set("height",i),g.c(t).set("width",n).set("height",i)}else this._isBufferClearSinceLastResize&&(this._isBufferClearSinceLastResize=!1)},t.setPosition=function(e,t){this._effectiveLeft=e,this._effectiveTop=t},t.setSize=function(n,i){var r=this._backingWidth-n,a=this._backingHeight-i;g.c(e).translateDevicePixels(r,a).layerBack(),g.c(t).translateDevicePixels(t._effectiveLeft-r,t._effectiveTop-a).layerBack()},this.owner.element.appendChild(t),t},getInstance:function(){var e=this,t=arguments,n=e.__s._$BxF$getInstance.apply(e,t);return n._abortBufferDealloc()&&(n._backingWidth&&n._backingHeight&&n.context.clearRect(0,0,n._backingWidth,n._backingHeight),n._isBufferClearSinceLastResize=!0),n},disposeInstance:function(e){var t=this,n=arguments;e._willDispose&&(e._willDispose(),delete e._willDispose),e._deallocBufferSoon(),g.c(e).translate(-1e4,-1e4).layerBack(),t.__s._$CFG$disposeInstance.apply(t,n)},dispose:function(){for(var e=this,t=arguments;this.pooledInstanceCount;){var n=this.getInstance();n._canvas.style.cssText="",P.canvasPool.disposeInstance(n._canvas),delete n._canvas,delete n.context,delete n._deallocBuffer,delete n._deallocBufferSoon,delete n._bufferDeallocTimeout,delete n._abortBufferDealloc,delete n.retain,delete n._retainCount,delete n.release,delete n.setBackingSize,delete n._isBufferClearSinceLastResize,delete n._backingWidth,delete n._backingHeight,delete n._backingDPR,delete n.setPosition,delete n._effectiveLeft,delete n._effectiveTop,delete n.setSize}e.__s._$CcE$dispose.apply(e,t)},__superMap:{_$BxF$getInstance:"getInstance",_$CFG$disposeInstance:"disposeInstance",_$CcE$dispose:"dispose"}}))}),isShowingSomePortionOfStrip:i.b({readOnly:!0,dependencies:["lastPreparedThumbIndex","firstPreparedThumbIndex"],get:Object.assign((function(){return this.lastPreparedThumbIndex-this.firstPreparedThumbIndex>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])>0}})}),thumbRenderers:i.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex","lastVisibleThumbIndex","lastPreparedThumbIndex","firstGuaranteedIndexInThumbRenderers","lastGuaranteedIndexInThumbRenderers"],get:Object.assign((function(){var e=this.thumbRendererClass,t=this._thumbRenderers_lastRet,n=this.firstPreparedThumbIndex,i=this._thumbRenderers_lastFirstIndex,r=this.lastPreparedThumbIndex,a=this._thumbRenderers_lastLastIndex,s=this.firstVisibleThumbIndex,o=this._thumbRenderers_lastFirstVisibleIndex,l=this.lastVisibleThumbIndex,c=this._thumbRenderers_lastLastVisibleIndex,u=this.centerThumbIndex;if(Object.is(n,i)&&Object.is(r,a)&&Object.is(s,o)&&Object.is(l,c))return t;var d=P.arrayPool.getInstance();if(this._thumbRenderers_lastRet=d,this._thumbRenderers_lastFirstIndex=n,this._thumbRenderers_lastLastIndex=r,this._thumbRenderers_lastFirstVisibleIndex=o,this._thumbRenderers_lastLastVisibleIndex=c,!t||isNaN(i)||isNaN(a)||isNaN(n)||isNaN(r)){for(var h=0,p=t&&t.length;h<p;h++){var f=t[h];f&&f.release(this,"in thumbRenderers")}for(var g=s;g<=l;g++)d[g-n]=e.create(this,g,s,l,u).retain(this,"in thumbRenderers")}else{for(var m=i,_=Math.min(n-1,a);m<=_;m++){var v=t[m-i];v&&v.release(this,"in thumbRenderers")}for(var b=n,y=Math.min(i-1,r);b<=y;b++)b>=s&&b<=l&&(d[b-n]=e.create(this,b,s,l,u).retain(this,"in thumbRenderers"));for(var w=Math.max(n,i),I=Math.min(r,a);w<=I;w++){var S=t[w-i];!S&&w>=s&&w<=l&&(S=e.create(this,w,s,l,u).retain(this,"in thumbRenderers")),d[w-n]=S,S&&S.detectDerivativeOffscreeninessAndPriority(this,w,s,l,u)}for(var C=Math.max(a+1,n);C<=r;C++)C>=s&&C<=l&&(d[C-n]=e.create(this,C,s,l,u).retain(this,"in thumbRenderers"));for(var E=Math.max(r+1,i);E<=a;E++){var A=t[E-i];A&&A.release(this,"in thumbRenderers")}}return t&&P.arrayPool.disposeInstance(t),this._schedulePassiveThumbRendererMaintenance(),d}),{__CW__getter:function(e,t,n,i){var r=this.thumbRendererClass,a=this._thumbRenderers_lastRet,s=i.internalGet(this,t[1+n]),o=this._thumbRenderers_lastFirstIndex,l=i.internalGet(this,t[3+n]),c=this._thumbRenderers_lastLastIndex,u=i.internalGet(this,t[0+n]),d=this._thumbRenderers_lastFirstVisibleIndex,h=i.internalGet(this,t[2+n]),p=this._thumbRenderers_lastLastVisibleIndex,f=this.centerThumbIndex;if(Object.is(s,o)&&Object.is(l,c)&&Object.is(u,d)&&Object.is(h,p))return a;var g=P.arrayPool.getInstance();if(this._thumbRenderers_lastRet=g,this._thumbRenderers_lastFirstIndex=s,this._thumbRenderers_lastLastIndex=l,this._thumbRenderers_lastFirstVisibleIndex=d,this._thumbRenderers_lastLastVisibleIndex=p,!a||isNaN(o)||isNaN(c)||isNaN(s)||isNaN(l)){for(var m=0,_=a&&a.length;m<_;m++){var v=a[m];v&&v.release(this,"in thumbRenderers")}for(var b=u;b<=h;b++)g[b-s]=r.create(this,b,u,h,f).retain(this,"in thumbRenderers")}else{for(var y=o,w=Math.min(s-1,c);y<=w;y++){var I=a[y-o];I&&I.release(this,"in thumbRenderers")}for(var S=s,C=Math.min(o-1,l);S<=C;S++)S>=u&&S<=h&&(g[S-s]=r.create(this,S,u,h,f).retain(this,"in thumbRenderers"));for(var E=Math.max(s,o),A=Math.min(l,c);E<=A;E++){var O=a[E-o];!O&&E>=u&&E<=h&&(O=r.create(this,E,u,h,f).retain(this,"in thumbRenderers")),g[E-s]=O,O&&O.detectDerivativeOffscreeninessAndPriority(this,E,u,h,f)}for(var T=Math.max(c+1,s);T<=l;T++)T>=u&&T<=h&&(g[T-s]=r.create(this,T,u,h,f).retain(this,"in thumbRenderers"));for(var M=Math.max(l+1,o);M<=c;M++){var D=a[M-o];D&&D.release(this,"in thumbRenderers")}}return a&&P.arrayPool.disposeInstance(a),this._schedulePassiveThumbRendererMaintenance(),g}})}),_schedulePassiveThumbRendererMaintenance:function(){this._passiveThumbRendererMaintenanceTimeout||(this._passiveThumbRendererMaintenanceTimeout=_.a(this._passivelyAddSomeThumbRenderers))},_passivelyAddSomeThumbRenderers:R.b((function(){if(!this.isDisposed){this._passiveThumbRendererMaintenanceTimeout=null;var e=this.thumbRenderers,t=this.thumbRendererClass,n=this.firstPreparedThumbIndex,i=this.lastPreparedThumbIndex,r=this.firstVisibleThumbIndex,a=this.lastVisibleThumbIndex,s=this.centerThumbIndex,o=performance.now(),l=r-1,c=a+1;do{if(l>=n&&!e[l-n]&&(e[l-n]=t.create(this,l,r,a,s).retain(this,"in thumbRenderers")),c<=i&&!e[c-n]&&(e[c-n]=t.create(this,c,r,a,s).retain(this,"in thumbRenderers")),c++,--l<n&&c>i)break}while(performance.now()-o<.2);(l>n||c<i)&&this._schedulePassiveThumbRendererMaintenance()}})),scrollAnimationTargetIndex:A.b(0),_scrollToAnimationTarget:s.g("scrollAnimationTargetIndex",(function(e){this.isAnimatingScroll&&!isNaN(e)&&(this.scrollIsIntended++,this.fractionalCenterThumbIndex=e,this.scrollIsIntended--)})),isAnimatingScroll:i.b({readOnly:!0,dependencies:["isAnimating"],get:Object.assign((function(){return this.isAnimating}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),animateScrollToThumbIndex:function(e,t){isNaN(this.scrollX)?this.scrollAnimationTargetIndex=e:(this.isAnimatingScroll&&!isNaN(this.scrollAnimationTargetIndex)||(this.scrollAnimationTargetIndex=this.fractionalCenterThumbIndex),this.animate("scrollAnimationTargetIndex",e,t))},gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return e===this.scrollGestureRecognizer||t.__s._$Gkp$gestureRecognizerShouldReceive.apply(t,n)},handleScroll:function(e){var t=this,n=arguments;return e.deltaX=e.deltaX+e.deltaY,t.__s._$GsB$handleScroll.apply(t,n)},_scrollBy:function(){var e=this,t=arguments;this.userScrollIsIntended++;var n=e.__s._$H31$_scrollBy.apply(e,t);return this.userScrollIsIntended--,n},scrollIsIntended:0,userScrollIsIntended:i.b(0),_scrollIsIntended:v.d({get:function(){return Boolean(this.scrollIsIntended||this.userScrollIsIntended)}}),scrollMotionTracker:i.b({strong:!0,defaultValue:a.c(x.a,{zeroSpeedCutoff:3,emaHalfLife:1/4})}),didScrollBy:function(e){var t=this,n=arguments;this.scrollMotionTracker.handleDelta(e),t.__s._$HLG$didScrollBy.apply(t,n)},isMovingSlowEnoughForLoads:i.b(r.c("_isMovingSlowEnoughForLoads_ratchet.value")),_isMovingSlowEnoughForLoads_ratchet:i.b({strong:!0,defaultValue:a.c(o.a.extend({defersUpgrades:500,targetValue:i.b({readOnly:!0,dependencies:["owner.scrollMotionTracker.emaSpeed"],get:Object.assign((function(){return!(this.getPath("owner.scrollMotionTracker.emaSpeed")>1e3)}),{__CW__getter:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])>1e3)}})})}))}),centerThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["insetCenterX","stripLeft","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft)}}),centerMediaIndex:i.b(r.c("centerThumbIndex")),centermostThumbIndex:i.b({readOnly:!0,dependencies:Array.from(new Set(["insetCenterX","stripLeft","stripWidth","thumbCount","thumbExpansions","thumbWidth"])),get:function(){return this.thumbIndexForLeftInStrip(Math.max(0,Math.min(this.stripWidth-1,this.insetCenterX-this.stripLeft)))}}),centermostMediaIndex:i.b(r.c("centermostThumbIndex")),centerMedia:i.b({readOnly:!0,dependencies:["centerThumbIndex","collection","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:Object.assign((function(){var e=this.collection;return e&&e.objectAt(this.centerThumbIndex)||null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r&&r.objectAt(i.internalGet(this,t[0+n]))||null}})}),_rerender:s.h("stripLeft","stripTop","stripWidth","dpr","thumbRenderers",(function(){if(!this._rerender_isRespondingNeedlessly){if(this._rerender_isRespondingNeedlessly=!0,this._scrollIsIntended){var e=this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft),t=this.rectInViewForThumbIndex(e);this._anchorThumbIndex=e,this._anchorThumbOffsetFromCenter=t?Math.round(t.x+t.width/2-this.insetCenterX):NaN}else{var n=this._anchorThumbIndex,i=this.rectInViewForThumbIndex(n),r=(i?Math.round(i.x+i.width/2-this.insetCenterX):NaN)-this._anchorThumbOffsetFromCenter;r&&(this.scrollX+=r,this.scrollXDidGainCorrectiveScrollAmount(r))}this.renderStripSoon(),this._rerender_isRespondingNeedlessly=!1}})),renderStrip:function(){var e=this.stripLeft,t=this.stripTop,n=this.stripWidth,i=this.thumbRenderers;if(!isNaN(t+e)&&n&&i&&i.length){for(var r=this.dpr,a=this.substripWidth,s=this.substripHeight,o=this.thumbWidth,l=this.thumbHeight,c=this.thumbsPerGroup,u=this.thumbExpansions||ne,d=this.appendedSubstripPool,h=this.firstGuaranteedIndexInThumbRenderers,p=this.lastGuaranteedIndexInThumbRenderers,f=this.centerThumbIndex,g=this.firstPreparedThumbIndex,m=this.firstVisibleThumbIndex,_=this.lastVisibleThumbIndex,v=NaN,y=null,w=null,I=0;y=u[I]||null;I++){if(y.mediaIndex>=m){v=I;break}w=y}for(var S=P.mapPool.getInstance(),C=P.arrayPool.getInstance(),E=0,A=h,O=p;A<=O;A++){var T=i[A],M=T.mediaIndex,D=NaN,L=y&&y.mediaIndex===M;L?(D=M,w=y,y=u[++v]):D=Math.max(Math.floor(M/c)*c,w?w.mediaIndex+1:0);var R=(M-D)*o,x=L?w.drawnWidthInStrip:o,F=this._weakSubstripMap[D];if(F||((F=this._weakSubstripMap[D]=d.getInstance())._willDispose=N.a(ee,void 0,this._weakSubstripMap,D)),!S.get(F)){S.set(F,!0);var V=e+this.leftInStripForThumbIndex(D)+(L?w.sideGapInStrip:0);F.setBackingSize(a,s,r),F.setPosition(V,t)}C[E-2]!==F&&(C.push(F),E+=2),C[E-1]=R+x,b.a.pause(),T.substrip=F,T.leftInSubstrip=R,T.widthInSubstrip=x,T.isRenderDisabled=F._isBufferClearSinceLastResize,T.detectDerivativeOffscreeninessAndPriority(this,M,m,_,f),b.a.resume(),T.isRenderDisabled&&(T.isRenderDisabled=!1,T.render())}for(var k=0,B=h-1;k<=B;k++){var j=i[k];j&&(j.substrip&&(j.substrip=null),j.derivativePriority=111e3+Math.abs(f-(k+g)))}for(var U=p+1,G=i.length-1;U<=G;U++){var H=i[U];H&&(H.substrip&&(H.substrip=null),H.derivativePriority=111e3+Math.abs(f-(U+g)))}P.mapPool.disposeInstance(S);for(var W=0;W<E;W+=2)C[W].setSize(C[W+1],l);P.arrayPool.disposeInstance(C),this._ensureRangeIfPossible()}},_ensureRangeIfPossible:D.b((function(){if(!this.isDisposed&&!this.isDisposing&&this.isMovingSlowEnoughForLoads){var e=this.collection;if(e&&e.length){var t=this.firstPreparedThumbIndex,n=this.lastPreparedThumbIndex,i=n-t;t=t-2*i-20,n=n+2*i+20,t=30*Math.floor(t/30),n=30*Math.ceil(n/30),t=Math.max(0,t),(n=Math.min(e.length-1,n))-t&&this.ensureMediaRange(t,n)}}}),500,!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.canEnsureRange&&n.ensureRange(e,t)},_reattemptEnsureRangeOnceAgainMovingSlowEnoughForLoads:s.h("isMovingSlowEnoughForLoads",(function(e){e&&this._ensureRangeIfPossible()})),updateToThumbExpansionsSoon:function(){this._thumbExpansionsUpdateTimeout||(this._thumbExpansionsUpdateTimeout=F.b(this.updateToThumbExpansionsNow))},updateToThumbExpansionsNow:R.b((function(){F.a(this._thumbExpansionsUpdateTimeout),this._thumbExpansionsUpdateTimeout=void 0,!0===this.isAttached&&this.propertyChanged("thumbExpansionsByMediaIndex")})),renderStripSoon:function(){this._renderStripTimeout&&F.a(this._renderStripTimeout),this._renderStripTimeout=F.b(this._renderStripNow)},_renderStripNow:R.b((function(){this._renderStripTimeout=null,this.renderStrip()})),_weakSubstripMap:a.c(Object),_applyInsetsToScrollIndicator:s.h("insetLeft","insetRight",(function(e,t){var n=this.horizontalScrollIndicator;n&&n.style.set("margin-right",t).set("margin-left",e).set("position","absolute")})),__superMap:{_$Gkp$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$GsB$handleScroll:"handleScroll",_$H31$_scrollBy:"_scrollBy",_$HLG$didScrollBy:"didScrollBy"}}).extend({mixinDependencies:[V.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",name:"centerArrow",classes:["pok-center-arrow"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"hasCenterArrow",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}}]}}},hasCenterArrow:i.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===H.a.MOUSE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===H.a.MOUSE}})}),centerArrowHeight:i.b({readOnly:!0,dependencies:["isAttached","hasCenterArrow"],get:Object.assign((function(){var e=this.isAttached,t=this.hasCenterArrow;return e&&t?this._cte_permanentlyCachedRet||(this._cte_permanentlyCachedRet=this.centerArrow.offsetHeight):0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?this._cte_permanentlyCachedRet||(this._cte_permanentlyCachedRet=this.centerArrow.offsetHeight):0}}),didChange:function(e){this.registerInsetTop("centerArrowHeight",e)}}),_maintainCenterArrowPosition:s.h("insetCenterX","insetTopCenterTop",(function(){g.c(this.centerArrow).translateDevicePixels(this.insetCenterX,this.insetTopCenterTop)}))}).extend({scrollXDidGainCorrectiveScrollAmount:function(e){this.isScrollGestureInProgress&&this._initialPosition&&(this._initialPosition.x+=e)},isScrollGestureInProgress:i.b({readOnly:!0,dependencies:["hasMomentum"],get:Object.assign((function(){if(this.hasMomentum)return!0;var e=this.getPath("scrollGestureRecognizer.state");return e===y.b.Began||e===y.b.Changed}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=this.getPath("scrollGestureRecognizer.state");return r===y.b.Began||r===y.b.Changed}})}),updateScroll:function(){var e=this,t=arguments;e.__s._$PMb$updateScroll.apply(e,t),this.propertyChanged("isScrollGestureInProgress")},__superMap:{_$PMb$updateScroll:"updateScroll"}}).extend(k.a,w.a,B.a,{viewportHeight:79,minimumHeight:i.b(55),maximumHeight:i.b(200),retractionDuration:150,allowsVerticalPanResize:i.b(!0),allowsRetractionDuringResize:i.b(!0),isResizePanGestureInProgress:i.b({readOnly:!0,dependencies:[],get:function(){var e=this.getPath("resizePanGR.state");return e===y.b.Began||e===y.b.Changed}}),retractionAttachment:"bottom",init:function(){var e=this,t=arguments;e.__s._$Q4p$init.apply(e,t),this.resizePanGR=this.resizePanGRClass.create({delegate:this}),this.addGestureRecognizer(this.resizePanGR)},resizePanGR:i.b({strong:!0}),resizePanGRClass:j.a.extend(s.b,U.a,{view:i.b(),hasClinchedVertically:i.b(),event:"resizePan",pansVertically:!0,cancelsHorizontally:!0,minimumHeight:i.b(r.c("view.minimumHeight")),maximumHeight:i.b(r.c("view.maximumHeight")),allowsRetraction:i.b(r.c("view.allowsRetractionDuringResize")),userIndicatedViewportHeight:i.b(),initialViewportHeight:i.b(),_rubberBandAnimationInfo:void 0,boundedViewportHeight:i.b({readOnly:!0,dependencies:["minimumHeight","maximumHeight","userIndicatedViewportHeight"],get:Object.assign((function(){return Math.max(this.minimumHeight,Math.min(this.maximumHeight,this.userIndicatedViewportHeight))}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),Math.min(i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n])))}})}),rubberBandedViewportHeight:i.b({readOnly:!0,dependencies:["boundedViewportHeight","userIndicatedViewportHeight","minimumHeight","maximumHeight"],get:Object.assign((function(){var e=this.boundedViewportHeight,t=this.userIndicatedViewportHeight;if(e===t)return e;var n=this.minimumHeight,i=this.maximumHeight;if(t<n){var r=.2*i,a=n-t;return n-r*(1-Math.pow(Math.E,-a/r/2))}if(t>i){var s=.5*i,o=t-i;return i+s*(1-Math.pow(Math.E,-o/s/6))}return e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r===a)return r;var s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]);if(a<s){var l=.2*o,c=s-a;return s-l*(1-Math.pow(Math.E,-c/l/2))}if(a>o){var u=.5*o,d=a-o;return o+u*(1-Math.pow(Math.E,-d/u/6))}return r}})}),indicatedViewportHeight:i.b({dependencies:["allowsRetraction","boundedViewportHeight","rubberBandedViewportHeight"],get:Object.assign((function(e){return e||Math.round(this.allowsRetraction?Math.max(this.boundedViewportHeight,this.rubberBandedViewportHeight):this.rubberBandedViewportHeight)}),{__CW__getter:function(e,t,n,i){return e||Math.round(i.internalGet(this,t[0+n])?Math.max(i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n])):i.internalGet(this,t[2+n]))}}),writeDependencies:[],set:I.a}),indicatedRetraction:i.b({readOnly:!0,dependencies:["allowsRetraction","userIndicatedViewportHeight","minimumHeight"],get:Object.assign((function(){return Boolean(this.allowsRetraction&&this.userIndicatedViewportHeight<this.minimumHeight/2)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])<i.internalGet(this,t[2+n])/2)}})}),indicatedViewportHeightIsValid:i.b({readOnly:!0,dependencies:["indicatedViewportHeight","boundedViewportHeight"],get:Object.assign((function(){return this.indicatedViewportHeight===this.boundedViewportHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===i.internalGet(this,t[1+n])}})}),indicatedCursor:i.b({readOnly:!0,dependencies:["hasClinchedVertically","indicatedViewportHeight","minimumHeight","maximumHeight","allowsRetraction"],get:Object.assign((function(){return this.hasClinchedVertically?this.indicatedViewportHeight>this.maximumHeight?"s-resize":this.indicatedViewportHeight<this.minimumHeight?this.allowsRetraction?"row-resize":"n-resize":isNaN(this.indicatedViewportHeight)?void 0:"row-resize":void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])>i.internalGet(this,t[3+n])?"s-resize":i.internalGet(this,t[1+n])<i.internalGet(this,t[2+n])?i.internalGet(this,t[4+n])?"row-resize":"n-resize":isNaN(i.internalGet(this,t[1+n]))?void 0:"row-resize":void 0}})}),pointerDown:function(){var e=this,t=arguments;return this.userIndicatedViewportHeight=this.initialViewportHeight=this.view.viewportHeight,e.__s._$SkL$pointerDown.apply(e,t)},pointerMove:function(){var e=this,t=arguments,n=e.__s._$Sl_$pointerMove.apply(e,t);return this.userIndicatedViewportHeight=this.initialViewportHeight-this.snappedTranslation.y,n},pointerUp:function(){var e=this,t=arguments;this.pauseStateChanges();var n=e.__s._$Srh$pointerUp.apply(e,t);return this.indicatedViewportHeightIsValid||(this.state=y.b.Changed,this._rubberBandAnimationInfo={initialViewportHeight:this.indicatedViewportHeight,finalViewportHeight:this.boundedViewportHeight,startTime:performance.now(),duration:20*Math.sqrt(Math.abs(this.boundedViewportHeight-this.indicatedViewportHeight)),timeoutHandle:void 0},this._handleRubberBandAnimationFrame()),this.resumeStateChanges(),n},_rubberBandTween:function(e){return 1-(1-e)*(1-e)},_handleRubberBandAnimationFrame:R.b((function(){var e=this._rubberBandAnimationInfo;if(e){cancelAnimationFrame(e.timeoutHandle),e.timeoutHandle=void 0;var t=performance.now()-e.startTime,n=Math.max(0,Math.min(1,t/e.duration));if(n<1){var i=this._rubberBandTween(n);this.indicatedViewportHeight=e.finalViewportHeight*i+e.initialViewportHeight*(1-i),this.state=y.b.Changed,e.timeoutHandle=_.a(this._handleRubberBandAnimationFrame)}else this.indicatedViewportHeight=e.finalViewportHeight,this.state=y.b.Ended}})),reset:function(){var e=this,t=arguments;return this.userIndicatedViewportHeight=void 0,this.indicatedViewportHeight=void 0,this.initialViewportHeight=void 0,this._rubberBandAnimationInfo=void 0,e.__s._$TwR$reset.apply(e,t)},__superMap:{_$SkL$pointerDown:"pointerDown",_$Sl_$pointerMove:"pointerMove",_$Srh$pointerUp:"pointerUp",_$TwR$reset:"reset"}}),resizePan:function(e){var t=e.state;t===y.b.Changed&&(this.viewportHeight=e.indicatedViewportHeight,this[e.indicatedRetraction?"retract":"unretract"](this.retractionDuration)),t!==y.b.Failed&&t!==y.b.Cancelled||(this.viewportHeight=e.initialViewportHeight,this.unretract(this.retractionDuration)),this.propertyChanged("isResizePanGestureInProgress")},gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return!(e===this.resizePanGR&&!this.allowsVerticalPanResize)&&t.__s._$UJg$gestureRecognizerShouldReceive.apply(t,n)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return(e!==this.resizePanGR||t!==this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer&&t===this.resizePanGR||n.__s._$URD$gestureRecognizerShouldRequireFailureOf.apply(n,i))},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return e===this.resizePanGR&&t===this.scrollGestureRecognizer||(e!==this.scrollGestureRecognizer||t!==this.resizePanGR)&&n.__s._$UYn$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i)},_hasOwnResizeCursor:i.b({readOnly:!0,dependencies:["mouseY","insetTop"],get:Object.assign((function(){return this.mouseY<this.insetTop}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGet(this,t[1+n])}}),didChange:function(e){this.style.set("cursor",e?"row-resize":void 0)}}),_maintainResizeCursorLockStyling:s.h("resizePanGR.indicatedCursor",(function(e){G.d(this._cursorLockHandle),this._cursorLockHandle=void 0,e&&(this._cursorLockHandle=G.b("* { cursor: "+e+" !important; }"))})),__superMap:{_$Q4p$init:"init",_$UJg$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$URD$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$UYn$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}}).extend(S.b,{canThumbnailButtonTapCapturePointer:!1,init:function(){var e=this,t=arguments;e.__s._$U_j$init.apply(e,t),this.thumbnailButtonTapGR=this.thumbnailButtonTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.thumbnailButtonTapGR)},thumbnailButtonTapGRClass:S.a.extend(U.a,{event:"thumbnailButtonTap",shouldAllowMovementOutsideTarget:!0,tappedThumbnailButtonIndex:void 0,_hasClinchedVertically:!1,_horizontalTravelThreshold:3,_verticalTravelThreshold:4,_isLocationOnPageWithinTappedThumbnailButtonRect:function(e,t){var n=this.view.thumbIndexForPointOnPage(e,t),i=this.tappedThumbnailButtonIndex>=0?this.tappedThumbnailButtonIndex:this.tappedThumbnailButtonIndex=n;return n>=0&&n===i},pointerMove:function(e){var t=this,n=arguments;this.pauseStateChanges();var i=t.__s._$VN8$pointerMove.apply(t,n),r=Math.abs(e.clientY-this.location.y)>this._verticalTravelThreshold,a=Math.abs(e.clientX-this.location.x)>this._horizontalTravelThreshold,s=this.canThumbnailButtonTapCapturePointer&&!this.view.allowsVerticalPanResize,o=this._hasClinchedVertically||(this._hasClinchedVertically=!!s&&r);return o||!a&&!r||(this.state=y.b.Cancelled),this.resumeStateChanges(),i},reset:function(){var e=this,t=arguments;return this.tappedThumbnailButtonIndex=void 0,this._hasClinchedVertically=!1,e.__s._$ViX$reset.apply(e,t)},__superMap:{_$VN8$pointerMove:"pointerMove",_$ViX$reset:"reset"}}),thumbnailButtonTap:function(e){var t=e.state,n=this.thumbRenderers[e.tappedThumbnailButtonIndex-this.firstPreparedThumbIndex];t!==y.b.Began&&t!==y.b.Changed||n&&(n.isBeingPressed=e.willGestureSucceed),t!==y.b.Ended&&t!==y.b.Failed&&t!==y.b.Cancelled||(t===y.b.Ended&&e.willGestureSucceed&&this.sendEvent("thumbnailsStripDidSelectMediaIndex",e.tappedThumbnailButtonIndex),n&&(n.isBeingPressed=!1))},gestureRecognizerShouldActivateButton:function(e,t){var n=this,i=arguments;return e!==this.thumbnailButtonTapGR?n.__s._$W4_$gestureRecognizerShouldActivateButton.apply(n,i):e._isLocationOnPageWithinTappedThumbnailButtonRect(t.clientX,t.clientY)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return e===this.resizePanGR&&t===this.thumbnailButtonTapGR||(e!==this.thumbnailButtonTapGR||t!==this.resizePanGR)&&(e!==this.thumbnailButtonTapGR||t!==this.scrollGestureRecognizer)&&(e===this.scrollGestureRecognizer&&t===this.thumbnailButtonTapGR||n.__s._$WJN$gestureRecognizerShouldRequireFailureOf.apply(n,i))},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return(e!==this.resizePanGR||t!==this.thumbnailButtonTapGR)&&(e===this.thumbnailButtonTapGR&&t===this.resizePanGR||e===this.thumbnailButtonTapGR&&t===this.scrollGestureRecognizer||(e!==this.scrollGestureRecognizer||t!==this.thumbnailButtonTapGR)&&n.__s._$WVR$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i))},__superMap:{_$U_j$init:"init",_$W4_$gestureRecognizerShouldActivateButton:"gestureRecognizerShouldActivateButton",_$WJN$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$WVR$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}}).extend({_momentarilySuspendDerivativeCreations:function(){this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):O.a.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=m.a(this._resumeDerivativeCreations,250)},_resumeDerivativeCreations:R.b({disposeGuarded:!1,function:function(){this._resumeDerivativeCreationsTimeout=null,O.a.resumeDerivativeCreations()}}),renderStrip:function(){var e=this,t=arguments;e.__s._$Whi$renderStrip.apply(e,t),this._momentarilySuspendDerivativeCreations()},__superMap:{_$Whi$renderStrip:"renderStrip"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasicThumbnailsStripView"}}),X=C.a.extend(s.b,E.a,A.a).extend({ownerStripView:i.b(null),mediaIndex:i.b(NaN),expansionAmount:A.b(0),media:i.b({readOnly:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign((function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),mediaAspectRatio:i.b({readOnly:!0,dependencies:["media.aspectRatio"],get:Object.assign((function(){return this.getPath("media.aspectRatio")||1}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||1}})}),drawnWidthInStrip:i.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.thumbWidth","mediaAspectRatio","ownerStripView.thumbHeight","ownerStripView.dpr","ownerStripView.substripWidth"],get:Object.assign((function(){var e=Math.min(this.getPath("ownerStripView.substripWidth"),this.mediaAspectRatio*this.getPath("ownerStripView.thumbHeight")),t=this.expansionAmount,n=(1-t)*this.getPath("ownerStripView.thumbWidth")+t*e,i=this.getPath("ownerStripView.dpr");return Math.round(n*i)/i}),{__CW__getter:function(e,t,n,i){var r=Math.min(i.internalGetPath(this,t[5+n]),i.internalGet(this,t[2+n])*i.internalGetPath(this,t[3+n])),a=i.internalGet(this,t[0+n]),s=(1-a)*i.internalGetPath(this,t[1+n])+a*r,o=i.internalGetPath(this,t[4+n]);return Math.round(s*o)/o}}),writeDependencies:[]}),widthInStrip:i.b({readOnly:!0,dependencies:["drawnWidthInStrip","sideGapInStrip"],get:Object.assign((function(){return this.drawnWidthInStrip+2*this.sideGapInStrip}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+2*i.internalGet(this,t[1+n])}})}),sideGapInStrip:i.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.insetBottom","ownerStripView.dpr"],get:Object.assign((function(){var e=Math.round(this.expansionAmount*Math.max(10,this.getPath("ownerStripView.insetBottom"))),t=this.getPath("ownerStripView.dpr");return Math.round(e*t)/t}),{__CW__getter:function(e,t,n,i){var r=Math.round(i.internalGet(this,t[0+n])*Math.max(10,i.internalGetPath(this,t[1+n]))),a=i.internalGetPath(this,t[2+n]);return Math.round(r*a)/a}}),writeDependencies:[]}),_notifyOwnerOfChanges:s.h({inputs:["mediaAspectRatio","expansionAmount","mediaIndex"],callback:function(e,t,n){var i=this.ownerStripView;if(i){if(this._nOOC_last_mediaIndex!==n){var r=i.thumbExpansionsByMediaIndex;delete r[this._nOOC_last_mediaIndex],r[n]=this,this._nOOC_last_mediaIndex=n}i.updateToThumbExpansionsSoon()}}}),_retainSelfWhileNeeded:s.h("expansionAmount","isAnimating",(function(e,t){var n=Boolean(e||t);!this._rswn_hasRetain&&n&&this.retain(this,"expansion self-retain"),this._rswn_hasRetain&&!n&&this.autorelease(this,"expansion self-retain"),this._rswn_hasRetain=n})),initFromPool:function(e,t,n){this.__s._$YrV$initFromPool.call(this),this.retain(this,"initial self-retain"),this.autorelease(this,"initial self-retain"),b.a.pause(),this.ownerStripView=e,this.mediaIndex=t,this.expansionAmount=n,b.a.resume()},cleanup:function(){var e=this,t=arguments;this._nOOC_last_mediaIndex=NaN;var n=this.ownerStripView;n&&(delete n.thumbExpansionsByMediaIndex[this.mediaIndex],n.updateToThumbExpansionsSoon()),b.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.expansionAmount=0,b.a.resume(),e.__s._$Z8n$cleanup.apply(e,t)},__superMap:{_$YrV$initFromPool:"initFromPool",_$Z8n$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbExpansion"}});function J(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function ee(e,t){delete e[t]}function te(e,t){return e-t}var ne=[],ie=Z.extend({BASE_DURATION:250,ownerIndicatedThumbExpansionInfos:i.b(),ownerIndicatedApparentFractionalMediaIndex:i.b(),isBeingScrolledByUserWithUnattachedDelta:i.b({readOnly:!0,dependencies:["userScrollIsIntended","isScrollGestureInProgress"],get:Object.assign((function(){return Boolean(this.userScrollIsIntended&&!this.isScrollGestureInProgress)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n]))}})}),hasRecentlyBeenScrolledByUserWithUnattachedDelta:i.b(r.c("_hasRecentlyBeenScrolledByUserWithUnattachedDelta_ratchet.value")),_hasRecentlyBeenScrolledByUserWithUnattachedDelta_ratchet:i.b({strong:!0,defaultValue:a.c(o.a.extend({defersDowngrades:250,targetValue:r.c("owner.isBeingScrolledByUserWithUnattachedDelta")}))}),isScrollActivityInProgress:i.b({readOnly:!0,dependencies:["isScrollGestureInProgress","hasRecentlyBeenScrolledByUserWithUnattachedDelta"],get:Object.assign((function(){return Boolean(this.isScrollGestureInProgress||this.hasRecentlyBeenScrolledByUserWithUnattachedDelta)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),hasRecentlyBeenAnimatingOrScrolledByUserDirectly:i.b(r.c("_hasRecentlyBeenAnimatingOrScrolledByUserDirectly_ratchet.value")),_hasRecentlyBeenAnimatingOrScrolledByUserDirectly_ratchet:i.b({strong:!0,defaultValue:a.c(o.a.extend({defersDowngrades:1,targetValue:i.b({readOnly:!0,dependencies:["owner.isScrollActivityInProgress","owner.isAnimatingScroll"],get:Object.assign((function(){return this.getPath("owner.isScrollActivityInProgress")||this.getPath("owner.isAnimatingScroll")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})})}))}),_trackOwnerIndicatedStateWhileUserIsNotScrolling:s.h("hasRecentlyBeenAnimatingOrScrolledByUserDirectly","ownerIndicatedApparentFractionalMediaIndex","ownerIndicatedThumbExpansionInfos",(function(){this.hasRecentlyBeenAnimatingOrScrolledByUserDirectly||this.ownerIndicatedApparentFractionalMediaIndex>=0&&(this.scrollIsIntended++,this.fractionalCenterThumbIndex=this.ownerIndicatedApparentFractionalMediaIndex,this.scrollIsIntended--,this.expandThumbs(this.ownerIndicatedThumbExpansionInfos))})),_animateBackToOwnerIndicatedStateAfterUserFinishesScrolling:s.h("isScrollActivityInProgress",(function(e){e||(this.animateScrollToThumbIndex(this.ownerIndicatedApparentFractionalMediaIndex,this.BASE_DURATION),this.expandThumbs(this.ownerIndicatedThumbExpansionInfos,this.BASE_DURATION))})),_selectMediaDuringScroll:s.h("centermostMediaIndex",(function(e){(this.isBeingScrolledByUserWithUnattachedDelta||this.isScrollGestureInProgress)&&(e>=0&&this.sendEvent("thumbnailsStripDidSelectMediaIndex",e),this.unexpandAllThumbs(this.BASE_DURATION))})),staticMembers:{__QUALIFIED_CLASS_NAME__:"TargetAwareThumbnailsStripView"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(7),r=n(42),a=n(239),s={mixinDependencies:[{staticMembers:{storeItemDidChange:n(51).a},init:function(e,t,n){var i=this,r=arguments;if(i.__s._$FN$init.apply(i,r),void 0===n){var a=this._cwStoreId;"number"===typeof a&&this.constructor.storeItemDidChange(a,!1)}},__superMap:{_$FN$init:"init"}}],staticMembers:{allModels:i.b({readOnly:!0,get:function(){var e=r.n();return a.a.create([],this,e)}}),storeItemDidChange:function(e,t){var n=this.allModels,i=n._array.indexOf(e);t?i>=0&&n.encodedSplice(i,1):-1===i?n.encodedPush(e):n.encodedSetIndex(i,e)},findAll:function(){return this.allModels}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n(1),n(0),n(2);var i=n(40),r=n(20),a=n(55),s=n(7),o=n(15),l=n(13),c=n(139),u=n(130),d=n(17),h=n(1235),p=n(324),f=n(203),g=n(25),m=n(410),_=n(138),v=n(209),b=n(208),y=n(200),w=n(161),I=n(42),S=n(238),C=n(1354),E=n(756),A=n(266),O=n(1233),T=n(179),M=n(197),D=n(803),P=n(585),L=[function(){return 0},function(){return 150+300*Math.random()},function(){return 500+1e3*Math.random()}],R=_.b("State",{UNLOADED:"unloaded",LOADING:"loading",PREPARING:"preparing",LOADED:"loaded",ERRORED:"errored"}),x=globalThis.URL||globalThis.webkitURL,N=v.a.sharedInstance.isSafari&&6===v.a.sharedInstance.majorVersion,F=b.a((new Image).decode),V=i.a.extend(y.a,r.b,E.b).extend({usesXHR:!0,staticMembers:{State:R,__QUALIFIED_CLASS_NAME__:"ImageRequest"},state:s.b({isRevertible:!0,defaultValue:R.UNLOADED,didChange:function(e){var t=this._lastState;this._lastState=e,e===R.LOADED&&this._dlm_didFinish&&this._dlm_didFinish(this),e===R.ERRORED&&this._dlm_didFail&&this._dlm_didFail(this),e!==R.UNLOADED||!this._dlm_wasCanceled||t!==R.LOADING&&t!==R.PREPARING||this._dlm_wasCanceled(this)}}),url:s.b({isRevertible:!0,defaultValue:""}),progress:s.b({isRevertible:!0,defaultValue:NaN}),image:s.b({isRevertible:!0,defaultValue:null}),imageBitmap:s.b({isRevertible:!0,defaultValue:null}),mimeType:o.d({isRevertible:!0,defaultValue:null}),shouldCheckOrientation:o.d({isRevertible:!0,defaultValue:!1}),_remainingLoadAttemptCount:o.d({isRevertible:!0,defaultValue:3}),_totalLoadAttemptsMade:o.d({readOnly:!0,get:function(){return 3-this._remainingLoadAttemptCount}}),_shouldUseArrayBufferModeOnXHR:o.d({readOnly:!0,get:function(){return this.shouldCheckOrientation||N}}),_internalImage:null,_exifOrientation:o.d({isRevertible:!0,defaultValue:NaN}),_xhr:o.d((function(){return new XMLHttpRequest})),_dlm_didFinish:o.d({isRevertible:!0,defaultValue:null}),_dlm_didFail:o.d({isRevertible:!0,defaultValue:null}),_dlm_wasCanceled:o.d({isRevertible:!0,defaultValue:null}),_dlm_refGroup:o.d({isRevertible:!0,weak:!0,defaultValue:null}),_dlm_winningRef:o.d({isRevertible:!0,weak:!0,defaultValue:null}),_dlm_derivative:o.d({isRevertible:!0,defaultValue:null,strong:!0}),_xhrSentTimestamp:o.d({isRevertible:!0,defaultValue:void 0}),_timeToFirstByte:o.d({isRevertible:!0,defaultValue:void 0}),offscreeninessAtSend:o.d({isRevertible:!0,defaultValue:void 0}),priorityAtSend:o.d({isRevertible:!0,defaultValue:void 0}),offscreeniness:o.d({get:function(){var e=this._dlm_refGroup;return e&&e.length&&Math.min.apply(Math,g.arrayPool.getAutodisposingInstanceFromMap(e.items,U))||0}}),finalURLTransform:function(e){return e+"&og="+encodeURIComponent(D.a[this.offscreeninessAtSend<=M.a.offscreeninessThresholdForHighLatency?"RESOURCE_DOWNLOAD":"RESOURCE_PREFETCH"].value)},cleanup:function(){var e=this,t=arguments;this.reset(),e.__s._$2Rm$cleanup.apply(e,t)},reset:function(){this._cleanUpXHR(),this.state===R.PREPARING&&this._cleanUpAndGiveBackInternalImage();var e=this.image;e instanceof Image&&g.imagePool.disposeInstance(e),e instanceof HTMLCanvasElement&&g.canvasPool.disposeInstance(e);var t=this.imageBitmap;t&&t.close(),this.revertRevertibleProperties()},open:function(e,t,n){this.state!==R.UNLOADED&&this.reset(),this.url=e,this.mimeType=t,this.shouldCheckOrientation=n,n&&"image/jpeg"!==t&&l.b("We incorrectly think we need to check orientation on non-jpeg images.")},send:function(){this.state=R.LOADING,this.offscreeninessAtSend=this.offscreeniness,this.priorityAtSend=this.getPath("_dlm_winningRef.priority"),this.usesXHR||this.shouldCheckOrientation?this._sendWithXHR():this._sendWithImage()},_sendWithXHR:function(e){var t=this._xhr;t.open("GET",this.finalURLTransform(this.url),!0),t.responseType=this._shouldUseArrayBufferModeOnXHR?"arraybuffer":"blob",w.a(t,"readystatechange",this._handleXHRReadyStateChange),w.a(t,"progress",this._handleXHRProgress),e>0?this._delayedSendTimeout=c.a(this._physicallySendXHR,e):this._physicallySendXHR(),this._remainingLoadAttemptCount--},_physicallySendXHR:f.b((function(){this._xhrSentTimestamp=Date.now(),this._xhr.send(null)})),_sendWithImage:function(e){this.state=R.PREPARING,this._exifOrientation=1,e>0?this._delayedSendTimeout=c.a(A.a(this._loadImageFromSrc,this,this.url),e):this._loadImageFromSrc(this.url)},_handleXHRReadyStateChange:f.b((function(){if(this.state===R.LOADING){var e=this._xhr;return e.readyState>=2&&200!==e.status?this._xhrLoadDidFail():4===e.readyState&&200===e.status?this._xhrLoadDidFinish():void 0}})),_handleXHRProgress:f.b((function(e){this.state===R.LOADING&&(!this._timeToFirstByte&&this._xhrSentTimestamp&&(this._timeToFirstByte=Date.now()-this._xhrSentTimestamp),this.progress=e.lengthComputable?e.loaded/e.total:NaN)})),_loadDidFail:function(){this.state=R.ERRORED;var e=this.getPath("_dlm_winningRef.derivative");if(e){var t=e.derivativeId,n=e.media;n&&t&&c.a(n.constructor.blacklistDerivative,500,t)}},_xhrLoadDidFail:function(){var e,t=this._xhr,n=t.status;if(this._remainingLoadAttemptCount>0&&n>=500&&520!==n&&(t.getAllResponseHeaders&&-1!==String(t.getAllResponseHeaders()).toLowerCase().indexOf("retry-after")&&(e=Math.floor(1e3*parseFloat(t.getResponseHeader("Retry-After")))),!e)){var i=L[this._totalLoadAttemptsMade];e=Math.floor(i&&i())}var r=Date.now()-this._xhrSentTimestamp;if(Object(P.b)(n,r),this._cleanUpXHR(),e>0)this._sendWithXHR(e);else{var a=I.n().feedbackService;if(a){var s=this.getPath("_dlm_winningRef.derivative.isDynamic")||!1;a.report("cvwsRequestFailure",{totalLoadAttemptsMade:this._totalLoadAttemptsMade,xhrStatus:n,derivativeIsTranscoded:s})}this._loadDidFail()}},_cleanUpXHR:function(){clearTimeout(this._delayedSendTimeout);var e=this._xhr;S.a(e,"readystatechange",this._handleXHRReadyStateChange),S.a(e,"progress",this._handleXHRProgress),e.abort()},_xhrLoadDidFinish:function(){var e,t;if((j>=1||j>=0&&Math.random()<j)&&(e=this._dlm_derivative)&&(t=this._dlm_winningRef)){var n=e.width*e.height,i=Date.now()-this._xhrSentTimestamp,r=this.getPath("_xhr.response.size")||this.getPath("_xhr.response.byteLength"),a=e.getPath("media.serverDerivativeInfosByDerivativeId"),s=a&&a[e.transcodeSourceDerivativeId],o=s?s.width*s.height:void 0,l=t.derivativeRequestReason,c=l&&l.value?l.value:l||void 0;Object(P.a)(Object.assign({derivativeRequestReason:c,derivativeApproxArea:O.a(n),derivativeNameByArea:Object(T.e)(n),derivativeNameNominal:e.derivativeName,derivativeApproxByteSize:O.a(r),derivativeTimeToFirstByte:this._timeToFirstByte||i,derivativeTimeToComplete:i,derivativeUTI:e.uti,derivativeMIMETypeForWebClient:e.mimeType,derivativeIsTranscoded:e.isDynamic,derivativeTotalLoadAttemptsMade:this._totalLoadAttemptsMade,derivativeOffscreeninessAtSend:this.offscreeninessAtSend,derivativeOffscreeninessAtReceipt:this.offscreeniness,derivativeLoadRefPriorityAtSend:this.priorityAtSend,derivativeRequestReportProbability:j},s?{derivativeTranscodeSourceApproxByteSize:O.a(s.byteSize),derivativeTranscodeSourceApproxDerivativeArea:O.a(o),derivativeTranscodeSourceDerivativeNameByArea:Object(T.e)(o/1.2),derivativeTranscodeSourceDerivativeNameNominal:s.derivativeName,derivativeTranscodeSourceUTI:s.uti}:{},{xhrStatus:this.getPath("_xhr.status")}))}if(this.state=R.PREPARING,this._shouldUseArrayBufferModeOnXHR){var u=this._xhr.response,d=1;if(this.shouldCheckOrientation){var h=C.a.readAndZeroOrientation(u);h&&(d=h.Orientation)}this._exifOrientation=d,this._loadImageFromArrayBuffer(u)}else this._exifOrientation=1,this._loadImageFromBlob(this._xhr.response)},_loadImageFromArrayBuffer:function(e){k[0]=e,B.type=this.mimeType,this._loadImageFromBlob(new Blob(k,B)),k[0]=null,B.type=null},_loadImageFromBlob:function(e){this._loadImageFromSrc(x.createObjectURL(e))},_loadImageFromSrc:function(e){var t=this._internalImage=g.imagePool.getInstance();w.a(t,"load",F?this._imageLoadDidReachDecodability:this._imageLoadDidFinish),w.a(t,"error",this._imageLoadDidFail),t.src=e},_imageLoadDidReachDecodability:f.b((function(){this.retain(this,"self-retain during async image decode"),this._internalImage.decode().then(this._imageDecodeDidFinish,this._imageDecodeDidFail)})),_imageDecodeDidFinish:f.c((function(){this.autorelease(this,"self-retain during async image decode"),this._imageLoadDidFinish()})),_imageDecodeDidFail:f.c((function(){this.autorelease(this,"self-retain during async image decode"),this._imageLoadDidFail()})),_imageLoadDidFinish:f.b((function(){this._cleanUpInternalImage(),1!==this._exifOrientation?this._useCanvasForFinalImage():this._useInternalImageForFinalImage(),this._entireLoadProcessDidFinish()})),_imageBitmapDidFinish:f.c((function(e){this.autorelease(this,"self-retain during async createImageBitmap"),this.imageBitmap=e,this._entireLoadProcessDidFinish()})),_imageBitmapDidFail:f.c((function(){this.autorelease(this,"self-retain during async createImageBitmap"),this._entireLoadProcessDidFinish()})),_entireLoadProcessDidFinish:function(){this.state=R.LOADED},_imageLoadDidFail:f.b((function(){this._cleanUpAndGiveBackInternalImage(),this._loadDidFail()})),_cleanUpInternalImage:function(){var e=this._internalImage;e&&(x.revokeObjectURL(e.src),S.a(e,"load",F?this._imageLoadDidReachDecodability:this._imageLoadDidFinish),S.a(e,"error",this._imageLoadDidFail))},_cleanUpAndGiveBackInternalImage:function(){this._internalImage&&(this._cleanUpInternalImage(),g.imagePool.disposeInstance(this._internalImage),this._internalImage=null)},_useInternalImageForFinalImage:function(){this.image=this._internalImage,this._internalImage=null},_useCanvasForFinalImage:function(){var e=g.canvasPool.getInstanceFromRotatedImage(this._internalImage,this._exifOrientation);g.imagePool.disposeInstance(this._internalImage),this._internalImage=null,this.image=e},__superMap:{_$2Rm$cleanup:"cleanup"}}),k=[null],B={},j=M.a.derivativeRequestFeedbackReportProbability,U=function(e){return e&&e.offscreeniness||0},G=i.a.extend(r.b,{priorityBucketSize:1e4,priorityBucketBlockableDuration:2500,imageRequestClass:V,sharder:a.c(h.a.extend({maxTotalConcurrentRequests:s.b(M.a.bindingFor("maxConcurrentImageRequestCount"))})),_pendingRefs:o.d((function(){return new p.b("ref pending in DLM#_pendingRefs")})),_loadingRefGroups:o.d((function(){return new p.b("ref group in DLM#_loadingRefGroups")})),_addRef:function(e){e.derivativeURL||l.b("Adding DerivativeLoadRef for derivative that lacks a URL.");var t=this._getLoadingRefGroupForRef(e);if(t)return e.request=t.items[0].request,void t.add(e);this._pendingRefs.add(e)},_cancelRef:f.b((function(e){var t=this._getLoadingRefGroupForRef(e);if(t)return t.remove(e),void(t.length||(this._loadingRefGroups.remove(t),this.scheduleLoad()));this._pendingRefs.remove(e)})),cancelAllRefsForDerivativeId:function(e){var t=this._getPendingRefsForDerivativeId(e).retain(),n=t.items;if(n.length){for(var i,r=g.arrayPool.getAutodisposingInstanceFromSlice(n),a=0;i=r[a];a++)this._cancelRef(i);t.release()}else if(t.release(),t=this._getLoadingRefGroupForDerivativeId(e))for(var s,o=g.arrayPool.getAutodisposingInstanceFromSlice(t.items),l=0;s=o[l];l++)this._cancelRef(s)},_getLoadingRefGroupForRef:function(e){return this._getLoadingRefGroupForDerivativeId(e.derivativeId)},_getLoadingRefGroupForDerivativeId:function(e){for(var t,n=this._loadingRefGroups.items,i=0;t=n[i];i++)if(t.items[0].derivativeId===e)return t},_getPendingRefsForDerivativeId:function(e){for(var t,n=H.getInstance(),i=this._pendingRefs.items,r=0;t=i[r];r++)t.derivativeId===e&&n.add(t);return n},_getMinLoadingPriority:function(e){for(var t,n=this.priorityBucketBlockableDuration,i=this._loadingRefGroups.items,r=1/0,a=0;t=i[a];a++)if(e-t._dateRequested<n)for(var s,o=t.items,l=0;s=o[l];l++){var c=s.priority;c<r&&(r=c)}return r},_getMinPendingPriority:function(){for(var e,t=1/0,n=this._pendingRefs.items,i=0;e=n[i];i++){var r=e.priority;r<t&&(t=r)}return t},_getBucketForPriority:function(e){var t=this.priorityBucketSize;return Math.ceil(e/t)*t},scheduleLoad:f.b((function(){this._scheduledLoadTimeout||(this._scheduledLoadTimeout=c.a(this.requestAsManyDerivativesAsPossible,50))})),requestAsManyDerivativesAsPossible:f.b((function(){clearTimeout(this._scheduledLoadTimeout),this._scheduledLoadTimeout=null;for(var e=this.requestAsManyDerivativesAsPossible,t=this.priorityBucketBlockableDuration,n=Date.now(),i=this._getMinLoadingPriority(n),r=this._getMinPendingPriority(),a=this._getBucketForPriority(Math.min(i,r)),s=this._pendingRefs,o=s.items;;){for(var l=1/0,d=null,h=void 0,p=0;h=o[p];p++){var f=h.priority;f>a||h._dlm_hasSkipped||h._dlm_isInvalid||(f<l||!d)&&(l=f,d=h)}if(!d)break;var m=d.derivativeURL;if(m){var _=this.sharder.allocateShardedURL(m);if(_){var v=this._getPendingRefsForDerivativeId(d.derivativeId),b=v.items,y=b[0].derivative,w=this.imageRequestClass.create();w.open(_,y.mimeType,"image/jpeg"===y.mimeType&&y.isOriginal),w._dlm_refGroup=v,w._dlm_winningRef=d,w._dlm_derivative=y,w._dlm_didFinish=this._imageRequestDidFinish,w._dlm_didFail=this._imageRequestDidFailOrWasCancelled,w._dlm_wasCanceled=this._imageRequestDidFailOrWasCancelled,w.send();for(var I=0;h=b[I];I++)h.request=w,h._dlm_hasSkipped&&(h._dlm_hasSkipped=!1),s.remove(h);v._dateRequested=n,v._unblockTimeout=c.a(e,t+1),this._loadingRefGroups.add(v)}else d._dlm_hasSkipped=!0}else d._dlm_isInvalid=!0}for(var S,C=0;S=o[C];C++)S._dlm_hasSkipped&&(S._dlm_hasSkipped=!1);for(var E,A=g.arrayPool.getAutodisposingInstance(),O=0;E=o[O];O++)E._dlm_isInvalid&&(E._dlm_isInvalid=!1,A.push(E),u.b.warn("Found a DerivativeLoadRef whose derivative had no URL. Avoided a crash, but the derivatives layer is likely being misused in some way. Derivative ID is "+(E?E.getPath("derivative.derivativeId"):void 0)));for(var T,M=0;T=A[M];M++)T.cancel()})),_imageRequestDidFinish:f.b((function(e){this.sharder.deallocateShardedURL(e.url);var t=e._dlm_refGroup,n=t&&t.items,i=e._dlm_derivative,r=e.image,a=e.imageBitmap;if(e.image=e.imageBitmap=null,d.a.pause(),i.element=r,i.imageBitmap=a,d.a.resume(),e._dlm_refGroup=null,e._dlm_derivative=null,n)for(var s,o=g.arrayPool.getAutodisposingInstanceFromSlice(n),l=0;s=o[l];l++)s.resolve();t&&this._loadingRefGroups.remove(t),this.scheduleLoad()})),_imageRequestDidFailOrWasCancelled:f.b((function(e){this.sharder.deallocateShardedURL(e.url);var t=e._dlm_refGroup,n=t&&t.items;if(e._dlm_refGroup=null,e._dlm_derivative=null,n)for(var i,r=g.arrayPool.getAutodisposingInstanceFromSlice(n),a=0;i=r[a];a++)i.reject(new Error("ImageRequest failed to obtain paintable image."));t&&this._loadingRefGroups.remove(t),this.scheduleLoad()})),makeRequestForDerivative:function(e,t){var n=t||m.a.create();return n.derivative=e,e.isLoaded?n.resolve():(n._didBeginWantingCancel=this._cancelRef,this._addRef(n),this.scheduleLoad()),n},_debug_stateString:function(){var e,t="DerivativeLoadManager State:",n=function(e){return e+" for "+e.derivativeId+" with priority="+e.priority};if(this._loadingRefGroups.items.length){t+="\n    In-flight derivative requests:";for(var i,r=0;i=this._loadingRefGroups.items[r];r++){t+="\n        "+(e=i.items[0].request)+" in state "+e.state;for(var a,s=0;a=i.items[s];s++)t+="\n            "+n(a)}}else t+="\n    No in-flight derivative requests.";if(this._pendingRefs.items.length){t+="\n    Pending DerivativeLoadRefs:";for(var o,l=0;o=this._pendingRefs.items[l];l++)t+="\n        "+n(o)}else t+="\n    No pending DerivativeLoadRefs.";return t},staticMembers:{__QUALIFIED_CLASS_NAME__:"DerivativeLoadManager"}}),H=G.prototype.rfsasPool=g.Pool.extend({_retainMethodForInstances:function(){return g.Pool.retainInstance(this),this},_releaseMethodForInstances:function(){return g.Pool.releaseInstance(this),this},_autoreleaseMethodForInstances:function(){return g.Pool.autoreleaseInstance(this),this},createInstance:function(){var e=new p.b("residing in DLM-pooled FastStrongArraySet");return e.retain=this._retainMethodForInstances,e.release=this._releaseMethodForInstances,e.autorelease=this._autoreleaseMethodForInstances,e},disposeInstance:function(e){var t=this,n=arguments;return e.clear(),t.__s._$5qg$disposeInstance.apply(t,n)},__superMap:{_$5qg$disposeInstance:"disposeInstance"}}).create(),W=G.create()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i,r=n(249);!function(e){e.PHONE="PHONE",e.TABLET="TABLET",e.DESKTOP="DESKTOP"}(i||(i={}));var a=n(328);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){this.platformType=function(){var e=window.navigator.userAgent;if(!e)throw new TypeError("Expected user agent!");return/ipad|ipod|iphone/i.test(e)?r.a.IOS:/android/i.test(e)?r.a.ANDROID:/mac/i.test(e)&&!/like mac/i.test(e)?"ontouchstart"in window||"createTouch"in window.document?r.a.IOS:r.a.MAC:/windows/i.test(e)?r.a.WINDOWS:/\bcros\b/i.test(e)?r.a.CHROMEOS:/\blinux\b/i.test(e)?r.a.LINUX:r.a.UNKNOWN}(),this.isAndroid=this.platformType===r.a.ANDROID,this.isWindows=this.platformType===r.a.WINDOWS,this.isMac=this.platformType===r.a.MAC,this.isiOS=this.platformType===r.a.IOS,this.primaryInteractionMode=this.isiOS||this.isAndroid?a.a.TOUCH:a.a.MOUSE,this.isTouch=this.primaryInteractionMode===a.a.TOUCH,this.isMouse=this.primaryInteractionMode===a.a.MOUSE,this.deviceType=this.isMouse?i.DESKTOP:Math.min(window.screen.width,window.screen.height)>667?i.TABLET:i.PHONE,this.isiPad=this.isiOS&&this.deviceType===i.TABLET,this.isiPhoneOriPod=this.isiOS&&this.deviceType===i.PHONE}var t,n,o;return t=e,o=[{key:"sharedInstance",get:function(){var t=e._sharedInstance;return void 0===t?this._sharedInstance=new e:t}}],(n=[{key:"current",get:function(){return this.platformType}}])&&s(t.prototype,n),o&&s(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n(1),n(0),n(3),n(5),n(2);var i=n(531),r=n(15),a=n(55),s=n(98),o=n(138),l=n(7),c=n(78),u=n(13),d=n(1234),h=n(387),p=n(1257),f=n(1241),g=n(1258),m=n(20),_=n(51),v=n(130),b=n(139),y=n(228),w=i.b.extend({promise:r.d(a.c(s.a)),_primaryButtonClicked:function(e){this._showAlertResponse("primary")},_alternateButtonClicked:function(e){this._showAlertResponse("alternate")},_otherButtonClicked:function(e){this._showAlertResponse("other")},_showAlertResponse:function(e){this.promise.resolve({buttonClicked:e})},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationAlertViewController"}}),I=o.b("HostedApplicationState",{NOT_STARTED:"NOT_STARTED",STARTING:"STARTING",BEFORE_INACTIVE:"BEFORE_INACTIVE",INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",BACKGROUND:"BACKGROUND"}),S={userInfo:l.b({type:Object,readOnly:!0,defaultValue:a.c(Object)}),processInfo:l.b({type:Object,readOnly:!0,defaultValue:a.c(Object)}),canShowAlert:l.b({type:Boolean,defaultValue:!0}),canReauthenticate:l.b({type:Boolean,defaultValue:!0}),canLaunchChildApp:l.b({type:Boolean,defaultValue:!0}),state:l.b({type:I,binding:c.c("_state"),readOnly:!0}),targetState:l.b({type:I,defaultValue:I.ACTIVE,didChange:function(){switch(this.targetState){case I.ACTIVE:case I.BACKGROUND:case I.NOT_STARTED:break;default:throw new u.a("HostedApplicationSupport: targetState can only be one of ACTIVE, BACKGROUND or NOT_STARTED.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:this._state})}}}),route:l.b({type:String,defaultValue:""}),url:l.b({type:String}),urlWithRoute:l.b({readOnly:!0,dependencies:["url","route"],get:Object.assign((function(){var e=this.url,t=this.route;return t?e+"#"+t:e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return a?r+"#"+a:r}})}),childAppClass:r.d({defaultValue:function(){return n(1256).HostedApplicationPopupViewController}}),childApps:r.d(a.c({})),appAlerts:r.d(a.c(Set)),parentApp:r.d({defaultValue:null,strong:!0}),appId:l.b({readOnly:!0,defaultValue:function(){return"I-"+d.a()}}),isAppRunning:l.b({type:Boolean,readOnly:!0,dependencies:["_state","_isIframeLoaded"],get:Object.assign((function(){var e=this._state,t=this._isIframeLoaded,n=I.NOT_STARTED,i=I.STARTING;return t&&e!==n&&e!==i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=I.NOT_STARTED,o=I.STARTING;return a&&r!==s&&r!==o}})}),isActive:l.b({dependencies:["_state"],readOnly:!0,get:Object.assign((function(){return this._state===I.ACTIVE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===I.ACTIVE}})}),hostAppOrigin:l.b({type:"string",dependencies:["url"],readOnly:!0,get:Object.assign((function(){return h.a.create(this.url).origin}),{__CW__getter:function(e,t,n,i){return h.a.create(i.internalGet(this,t[0+n])).origin}})}),channel:l.b({type:p.a,defaultValue:a.c(p.a),downstreamBindings:{remoteOrigin:"(owner).hostAppOrigin"}}),caller:l.b({type:f.a,defaultValue:a.c(f.a),downstreamBindings:{channel:"(owner).channel"}}),listener:l.b({type:g.a,defaultValue:a.c(g.a),downstreamBindings:{channel:"(owner).channel"}}),isReadyToReceiveMessages:m.i(),transition:_.a,authenticate:_.a,reauthenticate:_.a,didTimeout:function(){var e=this.iframeView,t=new u.a("HostedApplicationSupport: Timeout occurred on hosted app",{appId:e.appId,src:e.src});this.didEnd("UNCAUGHT_EXCEPTION",t)},didEnd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.parentApp,i=this.appId,r=this.childApps,a=this.appAlerts;for(var s in n&&!n.isDisposed&&n.isAppRunning&&this.parentApp.childAppDidEnd(i,e,t),r)if(r.hasOwnProperty(s)){var o=r[s];!o.isDisposed&&o.isAppRunning&&o.parentAppDidEnd()}if(a.forEach((function(e){!e.isDisposed&&e.isAttached&&(v.b.warn("HostedApplicationSupport: Force removing the alert because app ended."),e.hide(),a.delete(e))})),this._stop(),"UNCAUGHT_EXCEPTION"===e){var l=t.title,c=void 0===l?"Unknown Error":l,d="HostedApplicationSupport: App did end with UNCAUGHT_EXCEPTION: "+c;throw new u.a(d,{appId:this.appId,url:this.urlWithRoute,error:t})}},parentAppDidEnd:function(){this._state!==I.NOT_STARTED&&this.didEnd()},childAppDidBecomeActive:function(e){v.b.debug("HostedApplicationSupport: Notifying childAppDidBecomeActive()"),this.caller.sendNotification("childAppDidBecomeActive",e)},childAppDidEnd:function(e,t,n){v.b.debug("HostedApplicationSupport: Notifying childAppDidEnd()"),delete this.childApps[e],this.caller.sendNotification("childAppDidEnd",e,t,n)},init:function(){var e=this,t=arguments;e.__s._$4bh$init.apply(e,t),this.host.addHostedApplication(this);var n=this.appId,i=this.parentApp,r=this.processInfo;r.appId=n,i&&(r.parentHostedAppId=i.appId);var a=this.channel;void 0===a.remoteOrigin&&(a.remoteOrigin=this.hostAppOrigin),void 0===this.caller.channel&&(this.caller.channel=a),void 0===this.listener.channel&&(this.listener.channel=a),this.listener.registerProcedures([["isReadyToReceiveMessages","_isReadyToReceiveMessages"],["setTitle","_setTitle"],["didEnd","_didEnd"],["reportNonFatalError","_reportNonFatalError"],["sendApplicationPreferences","_sendApplicationPreferences"],["recordException","_recordException"],["willUnload","_willUnload"],["isReadyToTerminateDidChange","_isReadyToTerminateDidChange"],["reauthenticate","_reauthenticate"],["logOut","_logOut"],["reloadApplication","_reloadApplication"],["getHostingState","_getHostingState"],["openHelp","_openHelp"],["recordStat","_recordStat"],["beginStat","_beginStat"],["endStat","_endStat"],["setRoute","_setRoute"],["launchChildApp","_launchChildApp"],["showAlert","_showAlert"]],this)},dispose:function(){var e=this,t=arguments;v.b.debug("HostedApplicationSupport: dispose()"),this.host.removeHostedApplication(this),e.__s._$5Kg$dispose.apply(e,t)},didDetach:function(){var e=this,t=arguments;e.__s._$5U1$didDetach.apply(e,t),this._state!==I.NOT_STARTED&&this.didEnd()},becomeActive:function(){v.b.debug("HostedApplicationSupport: becomeActive");var e=I.ACTIVE,t=s.a.create();return C(this,e,(function(){return t.resolve()})),this.targetState!==e&&(this.targetState=e),t},enterBackground:function(){v.b.debug("HostedApplicationSupport: enterBackground");var e=I.BACKGROUND,t=s.a.create();return C(this,e,(function(){return t.resolve()})),this.targetState!==e&&(this.targetState=e),t},shouldRefreshData:function(){},hostingStateDidChange:function(e,t,n){},hostDidReceiveFocus:function(){},hostDidLoseFocus:function(){},relayEvent:function(){},routeDidUpdate:function(e){v.b.debug("HostedApplicationSupport: routeDidUpdate('"+e+"')"),this.isAppRunning&&this.caller.sendNotification("routeDidUpdate",e),this.route=e},_state:l.b({type:I,defaultValue:I.NOT_STARTED}),_isIframeLoaded:l.b({type:Boolean,readOnly:!0,dependencies:["channel.isDisconnected","isAttached"],get:Object.assign((function(){var e=this.channel;return this.isAttached&&e&&!e.isDisconnected}),{__CW__getter:function(e,t,n,i){var r=this.channel;return i.internalGet(this,t[1+n])&&r&&!r.isDisconnected}})}),_loadAndRunTimer:r.d(null),_isReadyToReceiveMessages:function(){v.b.debug("HostedApplicationSupport: Received isReadyToReceiveMessages"),this.isReadyToReceiveMessages()},_didEnd:function(e,t){var n=this;v.b.debug("HostedApplicationSupport: Received didEnd('"+e+"', '"+t+"')"),b.a((function(){!n.isDisposed&&n.isAppRunning&&n.didEnd(e,t)}),1)},_setTitle:function(){},_reportNonFatalError:function(){},_sendApplicationPreferences:function(){},_recordException:function(){},_isReadyToTerminateDidChange:function(){},_reauthenticate:function(){if(!this.canReauthenticate)throw v.b.debug("HostedApplicationSupport: Rejecting reauthenticate()"),new y.b("Did not have access to reauthenticate",2e3,{state:this._state.value});return v.b.debug("HostedApplicationSupport: Received reauthenticate()"),this.reauthenticate()},_logOut:function(e){v.b.debug("HostedApplicationSupport: Received logOut(shouldForce: "+e+")"),this.host.logOut(!!e)},_reloadApplication:function(){v.b.debug("HostedApplicationSupport: Received reloadApplication()"),this._reset();var e=s.a.create();return C(this,this.targetState,(function(){return e.resolve()})),e},_getHostingState:function(){},_openHelp:function(e){this.host.openHelp(e)},_recordStat:function(e,t){this.host.recordStat(e,t)},_beginStat:function(){},_endStat:function(){},_setRoute:function(e){this.route=e,this.host.setRouteForApp(this,e)},_launchChildApp:function(e){if(v.b.debug("HostedApplicationSupport: Received launchChildApp("+e+")"),!this.canLaunchChildApp)throw v.b.debug("HostedApplicationSupport: Rejecting launchChildApp()"),new y.b("Did not have access to launch child app.",2e3,{state:this._state.value});var t=this.childAppClass.create({url:e,host:this.host,parentApp:this}),n=t.appId;return this.childApps[n]=t,t.show(),n},_showAlert:function(e){var t=this;if(v.b.debug("HostedApplicationSupport: Received showAlert()"),!this.canShowAlert)throw v.b.debug("HostedApplicationSupport: Rejecting showAlert()"),new y.b("Did not have access to showAlert.",2e3,{state:this._state.value});e||u.b("HostedApplication#showAlert: params are mandatory.");var n=e.alertType,i=e.message,r=e.description,a=e.primaryButton,s=e.alternateButton,o=e.otherButton;i&&a||u.b("HostedApplication#showAlert: message, and primaryButton are mandatory.");var l=["small"];a.action="_primaryButtonClicked";var c=a.additionalClassNames=l.slice(0);c.push("default-action"),a.isDestructive&&c.push("destructive"),[s,o].forEach((function(e){e&&(c=e.additionalClassNames=l.slice(0),e.isDestructive&&c.push("destructive"))})),s&&(s.action="_alternateButtonClicked"),o&&(o.action="_otherButtonClicked");var d=w.show({iconNames:n,message:i,description:r,primaryButton:a,alternateButton:s,otherButton:o}),h=this.appAlerts;return h.add(d),d.promise.then((function(e){return t.isDisposed||h.delete(d),e}))},_start:function(){var e=this,t=this._state,n=I.NOT_STARTED,i=I.STARTING;if(t!==n)throw new u.a("HostedApplicationSupport: _start can only be called while NOT_STARTED.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:t});return this._state=i,s.a.invokeFunction((function(){return e.authenticate()})).then((function(){return!e.isDisposed&&e.isAttached&&e._load()})).then((function(){return!e.isDisposed&&e._isIframeLoaded&&e._run()}))},_stop:function(){var e=this._state,t=I.NOT_STARTED;if(e===t)throw new u.a("HostedApplicationSupport: _stop cannot be called when NOT_STARTED.",{hostedApplication:this,targetState:this.targetState,state:e});this.targetState=t,this._reset()},_reset:function(){this._stopLoadAndRunTimer(),this._unload(),this._state=I.NOT_STARTED},_startLoadAndRunTimer:function(){var e=this;if(this._loadAndRunTimer)throw new u.a("HostedApplicationSupport: _startLoadAndRunTimer cannot be called while another one is in flight.",{hostedApplication:this,url:this.urlWithRoute,timerId:this._loadAndRunTimer,targetState:this.targetState,state:this._state});this._loadAndRunTimer=b.a((function(){e.isDisposed||(e._loadAndRunTimer=null,e.didTimeout())}),3e4)},_stopLoadAndRunTimer:function(){this._loadAndRunTimer&&(globalThis.clearTimeout(this._loadAndRunTimer),this._loadAndRunTimer=null)},_load:function(){var e=s.a.create(),t=this.iframeView,n=this.channel,i=this.urlWithRoute;this._startLoadAndRunTimer();var r=this.listen("isReadyToReceiveMessages",(function(){v.b.debug("HostedApplicationSupport: Loaded iframe with src "+t.src),r.disconnect(),e.resolve()}));return n.bind("iframe",this.bindingFor("iframeView.iframe")),t.bind("appId",this.bindingFor("appId")),t.src=i,e},_unload:function(){var e=this.iframeView,t=this.channel;e.src="",e.unbind("appId"),t.unbind("iframe")},_run:function(){var e=this,t=this.userInfo,n=this.processInfo,i=this.host.hostInfo;return v.b.debug("HostedApplicationSupport: Calling run()"),this.caller.callRemoteProcedure("run",t,i,n).then((function(){!e.isDisposed&&e.isAttached&&(v.b.debug("HostedApplicationSupport: Received ack for run()"),e._stopLoadAndRunTimer(),e.urlWithRoute!==e.iframeView.src&&e.transceiver.sendNotification("routeDidUpdate",e.route),e._state=I.BACKGROUND)}))},_willEnterForeground:function(){var e=this;return v.b.debug("HostedApplicationSupport: Calling willEnterForeground()"),this._state=I.BEFORE_INACTIVE,this.caller.callRemoteProcedure("willEnterForeground").then((function(){v.b.debug("HostedApplicationSupport: Received ack for willEnterForeground()"),!e.isDisposed&&e.isAttached&&(e._state=I.INACTIVE)}))},_didBecomeActive:function(){v.b.debug("HostedApplicationSupport: Notifying didBecomeActive()"),this.caller.sendNotification("didBecomeActive");var e=this.parentApp,t=this.appId;e&&!e.isDisposed&&e.isAppRunning&&e.childAppDidBecomeActive(t),this._state=I.ACTIVE},_willResignActive:function(){v.b.debug("HostedApplicationSupport: Notifying willResignActive()"),this._state=I.INACTIVE,this.caller.sendNotification("willResignActive")},_didEnterBackground:function(){v.b.debug("HostedApplicationSupport: Notifying didEnterBackground()"),this.caller.sendNotification("didEnterBackground"),this._state=I.BACKGROUND},_becomeActive:function(){var e=this,t=I.BACKGROUND,n=this._state;if(n!==t)throw new u.a("HostedApplicationSupport: _becomeActive can only be called while ACTIVE.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:n});return v.b.debug("HostedApplicationSupport: _becomeActive"),this._willEnterForeground().then((function(){return!e.isDisposed&&e.isAppRunning&&e.transition(!0)})).then((function(){return!e.isDisposed&&e.isAppRunning&&e._didBecomeActive()}))},_enterBackground:function(){var e=this,t=I.ACTIVE,n=this._state;if(n!==t)throw new u.a("HostedApplicationSupport: _enterBackground can only be called while ACTIVE.",{hostedApplication:this,url:this.urlWithRoute,targetState:this.targetState,state:n});return v.b.debug("HostedApplicationSupport: _enterBackground"),s.a.invokeFunction((function(){return e._willResignActive()})).then((function(){return!e.isDisposed&&e.isAppRunning&&e.transition(!1)})).then((function(){return!e.isDisposed&&e.isAppRunning&&e._didEnterBackground()}))},_hostedApplicationStateObserver:m.h({inputs:["isAttached","_state","targetState"],callback:function(e,t,n){var i=I.NOT_STARTED,r=I.BACKGROUND,a=I.ACTIVE;if(e)if(n===r)switch(t){case i:this._start();break;case a:this._enterBackground()}else if(n===a)switch(t){case i:this._start();break;case r:this._becomeActive()}}}),__superMap:{_$4bh$init:"init",_$5Kg$dispose:"dispose",_$5U1$didDetach:"didDetach"}};function C(e,t,n){if(e.state===t)n();else var i=e.listen("state",(function(e){e===t&&(i.disconnect(),i=null,n())}))}},function(e,t,n){n(1352),n(1338),n(1335),n(1336),n(1340),n(1341),n(1342),n(1345),n(1346),n(1347),n(1334),n(1348),n(1343),n(1333),n(1344),n(1339),n(1332),n(1337),n(1331),n(1349),n(1350),n(1329),n(1328),n(1327),n(1325),n(821),n(1039),n(1040),e.exports=n(1308)},function(e,t,n){"use strict";n.r(t),n(822),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(840),n(841),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(416),n(849),n(850),n(851),n(852),n(853),n(854),n(855),n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(865),n(866),n(867),n(868),n(870),n(871),n(873),n(874),n(875),n(876),n(877),n(878),n(879),n(880),n(881),n(882),n(883),n(884),n(886),n(887),n(888),n(889),n(890),n(891),n(892),n(893),n(894),n(895),n(896),n(897),n(898),n(900),n(901),n(902),n(903),n(904),n(905),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(928),n(929),n(931),n(932),n(933),n(934),n(936),n(937),n(938),n(940),n(941),n(942),n(943),n(944),n(945),n(946),n(947),n(948),n(949),n(950),n(951),n(623),n(952),n(953),n(954),n(955),n(956),n(957),n(958),n(624),n(959),n(960),n(961),n(962),n(963),n(964),n(965),n(966),n(967),n(968),n(969),n(970),n(971),n(972),n(973),n(974),n(975),n(976),n(977),n(978),n(979),n(980),n(981),n(982),n(983),n(984),n(986),n(987),n(988),n(989),n(990),n(991),n(992),n(993),n(994),n(995),n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1006),n(1007),n(1008),n(1009),n(1010),n(1011),n(1012),n(1013),n(1014),n(1015),n(1016),n(1017),n(1018),n(1019),n(1020),n(1021),n(1022),n(1023),n(1024),n(1025),n(1028),n(631),n(1029),n(1030),n(1032),n(1034),n(1035),n(1037),n(1038)},function(e,t,n){"use strict";var i=n(22),r=n(108),a=n(243),s=n(242),o=n(145),l=n(495),c=n(596),u=n(91),d=n(180),h=n(333),p=n(128),f=n(129),g=n(173),m=n(232),_=n(251),v=n(271),b=n(272),y=n(367),w=n(305),I=n(599),S=n(494),C=n(211),E=n(163),A=n(413),O=n(213),T=n(216),M=n(491),D=n(414),P=n(364),L=n(363),R=n(134),x=n(600),N=n(233),F=n(259),V=n(217),k=n(206).forEach,B=D("hidden"),j=R("toPrimitive"),U=V.set,G=V.getterFor("Symbol"),H=Object.prototype,W=r.Symbol,$=a("JSON","stringify"),z=C.f,K=E.f,q=I.f,Q=A.f,Y=M("symbols"),Z=M("op-symbols"),X=M("string-to-symbol-registry"),J=M("symbol-to-string-registry"),ee=M("wks"),te=r.QObject,ne=!te||!te.prototype||!te.prototype.findChild,ie=o&&u((function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=z(H,t);i&&delete H[t],K(e,t,n),i&&e!==H&&K(H,t,i)}:K,re=function(e,t){var n=Y[e]=b(W.prototype);return U(n,{type:"Symbol",tag:e,description:t}),o||(n.description=t),n},ae=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},se=function(e,t,n){e===H&&se(Z,t,n),f(e);var i=_(t,!0);return f(n),d(Y,i)?(n.enumerable?(d(e,B)&&e[B][i]&&(e[B][i]=!1),n=b(n,{enumerable:v(0,!1)})):(d(e,B)||K(e,B,v(1,{})),e[B][i]=!0),ie(e,i,n)):K(e,i,n)},oe=function(e,t){f(e);var n=m(t),i=y(n).concat(de(n));return k(i,(function(t){o&&!le.call(n,t)||se(e,t,n[t])})),e},le=function(e){var t=_(e,!0),n=Q.call(this,t);return!(this===H&&d(Y,t)&&!d(Z,t))&&(!(n||!d(this,t)||!d(Y,t)||d(this,B)&&this[B][t])||n)},ce=function(e,t){var n=m(e),i=_(t,!0);if(n!==H||!d(Y,i)||d(Z,i)){var r=z(n,i);return!r||!d(Y,i)||d(n,B)&&n[B][i]||(r.enumerable=!0),r}},ue=function(e){var t=q(m(e)),n=[];return k(t,(function(e){d(Y,e)||d(P,e)||n.push(e)})),n},de=function(e){var t=e===H,n=q(t?Z:m(e)),i=[];return k(n,(function(e){!d(Y,e)||t&&!d(H,e)||i.push(Y[e])})),i};l||(T((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),n=function e(n){this===H&&e.call(Z,n),d(this,B)&&d(this[B],t)&&(this[B][t]=!1),ie(this,t,v(1,n))};return o&&ne&&ie(H,t,{configurable:!0,set:n}),re(t,e)}).prototype,"toString",(function(){return G(this).tag})),T(W,"withoutSetter",(function(e){return re(L(e),e)})),A.f=le,E.f=se,C.f=ce,w.f=I.f=ue,S.f=de,x.f=function(e){return re(R(e),e)},o&&(K(W.prototype,"description",{configurable:!0,get:function(){return G(this).description}}),s||T(H,"propertyIsEnumerable",le,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:W}),k(y(ee),(function(e){N(e)})),i({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=String(e);if(d(X,t))return X[t];var n=W(t);return X[t]=n,J[n]=t,n},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(d(J,e))return J[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!o},{create:function(e,t){return void 0===t?b(e):oe(b(e),t)},defineProperty:se,defineProperties:oe,getOwnPropertyDescriptor:ce}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue,getOwnPropertySymbols:de}),i({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(g(e))}}),$&&i({target:"JSON",stat:!0,forced:!l||u((function(){var e=W();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))}))},{stringify:function(e,t,n){for(var i,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(i=t,(p(t)||void 0!==e)&&!ae(e))return h(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!ae(t))return t}),r[1]=t,$.apply(null,r)}}),W.prototype[j]||O(W.prototype,j,W.prototype.valueOf),F(W,"Symbol"),P[B]=!0},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(108),s=n(180),o=n(128),l=n(163).f,c=n(593),u=a.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(h,u);var p=h.prototype=u.prototype;p.constructor=h;var f=p.toString,g="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(s(d,e))return"";var n=g?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:h})}},function(e,t,n){n(233)("asyncIterator")},function(e,t,n){n(233)("hasInstance")},function(e,t,n){n(233)("isConcatSpreadable")},function(e,t,n){n(233)("iterator")},function(e,t,n){n(233)("match")},function(e,t,n){n(233)("replace")},function(e,t,n){n(233)("search")},function(e,t,n){n(233)("species")},function(e,t,n){n(233)("split")},function(e,t,n){n(233)("toPrimitive")},function(e,t,n){n(233)("toStringTag")},function(e,t,n){n(233)("unscopables")},function(e,t,n){"use strict";var i=n(22),r=n(91),a=n(333),s=n(128),o=n(173),l=n(146),c=n(306),u=n(368),d=n(369),h=n(134),p=n(496),f=h("isConcatSpreadable"),g=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),m=d("concat"),_=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!g||!m},{concat:function(e){var t,n,i,r,a,s=o(this),d=u(s,0),h=0;for(t=-1,i=arguments.length;t<i;t++)if(_(a=-1===t?s:arguments[t])){if(h+(r=l(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,h++)n in a&&c(d,h,a[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(d,h++,a)}return d.length=h,d}})},function(e,t,n){var i=n(22),r=n(601),a=n(291);i({target:"Array",proto:!0},{copyWithin:r}),a("copyWithin")},function(e,t,n){"use strict";var i=n(22),r=n(206).every,a=n(273),s=n(225),o=a("every"),l=s("every");i({target:"Array",proto:!0,forced:!o||!l},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(22),r=n(498),a=n(291);i({target:"Array",proto:!0},{fill:r}),a("fill")},function(e,t,n){"use strict";var i=n(22),r=n(206).filter,a=n(369),s=n(225),o=a("filter"),l=s("filter");i({target:"Array",proto:!0,forced:!o||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(206).find,a=n(291),s=n(225),o=!0,l=s("find");"find"in[]&&Array(1).find((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("find")},function(e,t,n){"use strict";var i=n(22),r=n(206).findIndex,a=n(291),s=n(225),o=!0,l=s("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},function(e,t,n){"use strict";var i=n(22),r=n(602),a=n(173),s=n(146),o=n(244),l=n(368);i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),n=s(t.length),i=l(t,0);return i.length=r(i,t,t,n,0,void 0===e?1:o(e)),i}})},function(e,t,n){"use strict";var i=n(22),r=n(602),a=n(173),s=n(146),o=n(218),l=n(368);i({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),i=s(n.length);return o(e),(t=l(n,0)).length=r(t,n,n,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){"use strict";var i=n(22),r=n(603);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(e,t,n){var i=n(22),r=n(604);i({target:"Array",stat:!0,forced:!n(415)((function(e){Array.from(e)}))},{from:r})},function(e,t,n){"use strict";var i=n(22),r=n(365).includes,a=n(291);i({target:"Array",proto:!0,forced:!n(225)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(e,t,n){"use strict";var i=n(22),r=n(365).indexOf,a=n(273),s=n(225),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,c=a("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(e){return l?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(362),a=n(232),s=n(273),o=[].join,l=r!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(a(this),void 0===e?",":e)}})},function(e,t,n){var i=n(22),r=n(608);i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},function(e,t,n){"use strict";var i=n(22),r=n(206).map,a=n(369),s=n(225),o=a("map"),l=s("map");i({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(91),a=n(306);i({target:"Array",stat:!0,forced:r((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)a(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(22),r=n(417).left,a=n(273),s=n(225),o=a("reduce"),l=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!l},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(417).right,a=n(273),s=n(225),o=a("reduceRight"),l=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!l},{reduceRight:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(333),a=[].reverse,s=[1,2];i({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){"use strict";var i=n(22),r=n(128),a=n(333),s=n(289),o=n(146),l=n(232),c=n(306),u=n(134),d=n(369),h=n(225),p=d("slice"),f=h("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),m=[].slice,_=Math.max;i({target:"Array",proto:!0,forced:!p||!f},{slice:function(e,t){var n,i,u,d=l(this),h=o(d.length),p=s(e,h),f=s(void 0===t?h:t,h);if(a(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!a(n.prototype)?r(n)&&null===(n=n[g])&&(n=void 0):n=void 0,n===Array||void 0===n))return m.call(d,p,f);for(i=new(void 0===n?Array:n)(_(f-p,0)),u=0;p<f;p++,u++)p in d&&c(i,u,d[p]);return i.length=u,i}})},function(e,t,n){"use strict";var i=n(22),r=n(206).some,a=n(273),s=n(225),o=a("some"),l=s("some");i({target:"Array",proto:!0,forced:!o||!l},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(218),a=n(173),s=n(91),o=n(273),l=[],c=l.sort,u=s((function(){l.sort(void 0)})),d=s((function(){l.sort(null)})),h=o("sort");i({target:"Array",proto:!0,forced:u||!d||!h},{sort:function(e){return void 0===e?c.call(a(this)):c.call(a(this),r(e))}})},function(e,t,n){n(334)("Array")},function(e,t,n){"use strict";var i=n(22),r=n(289),a=n(244),s=n(146),o=n(173),l=n(368),c=n(306),u=n(369),d=n(225),h=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;i({target:"Array",proto:!0,forced:!h||!p},{splice:function(e,t){var n,i,u,d,h,p,m=o(this),_=s(m.length),v=r(e,_),b=arguments.length;if(0===b?n=i=0:1===b?(n=0,i=_-v):(n=b-2,i=g(f(a(t),0),_-v)),_+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(m,i),d=0;d<i;d++)(h=v+d)in m&&c(u,d,m[h]);if(u.length=i,n<i){for(d=v;d<_-i;d++)p=d+n,(h=d+i)in m?m[p]=m[h]:delete m[p];for(d=_;d>_-i+n;d--)delete m[d-1]}else if(n>i)for(d=_-i;d>v;d--)p=d+n-1,(h=d+i-1)in m?m[p]=m[h]:delete m[p];for(d=0;d<n;d++)m[d+v]=arguments[d+2];return m.length=_-i+n,u}})},function(e,t,n){n(291)("flat")},function(e,t,n){n(291)("flatMap")},function(e,t,n){"use strict";var i=n(22),r=n(108),a=n(418),s=n(334),o=a.ArrayBuffer;i({global:!0,forced:r.ArrayBuffer!==o},{ArrayBuffer:o}),s("ArrayBuffer")},function(e,t){var n=Math.abs,i=Math.pow,r=Math.floor,a=Math.log,s=Math.LN2;e.exports={pack:function(e,t,o){var l,c,u,d=new Array(o),h=8*o-t-1,p=(1<<h)-1,f=p>>1,g=23===t?i(2,-24)-i(2,-77):0,m=e<0||0===e&&1/e<0?1:0,_=0;for((e=n(e))!=e||e===1/0?(c=e!=e?1:0,l=p):(l=r(a(e)/s),e*(u=i(2,-l))<1&&(l--,u*=2),(e+=l+f>=1?g/u:g*i(2,1-f))*u>=2&&(l++,u/=2),l+f>=p?(c=0,l=p):l+f>=1?(c=(e*u-1)*i(2,t),l+=f):(c=e*i(2,f-1)*i(2,t),l=0));t>=8;d[_++]=255&c,c/=256,t-=8);for(l=l<<t|c,h+=t;h>0;d[_++]=255&l,l/=256,h-=8);return d[--_]|=128*m,d},unpack:function(e,t){var n,r=e.length,a=8*r-t-1,s=(1<<a)-1,o=s>>1,l=a-7,c=r-1,u=e[c--],d=127&u;for(u>>=7;l>0;d=256*d+e[c],c--,l-=8);for(n=d&(1<<-l)-1,d>>=-l,l+=t;l>0;n=256*n+e[c],c--,l-=8);if(0===d)d=1-o;else{if(d===s)return n?NaN:u?-1/0:1/0;n+=i(2,t),d-=o}return(u?-1:1)*n*i(2,d-t)}}},function(e,t,n){var i=n(22),r=n(147);i({target:"ArrayBuffer",stat:!0,forced:!r.NATIVE_ARRAY_BUFFER_VIEWS},{isView:r.isView})},function(e,t,n){"use strict";var i=n(22),r=n(91),a=n(418),s=n(129),o=n(289),l=n(146),c=n(274),u=a.ArrayBuffer,d=a.DataView,h=u.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(s(this),e);for(var n=s(this).byteLength,i=o(e,n),r=o(void 0===t?n:t,n),a=new(c(this,u))(l(r-i)),p=new d(this),f=new d(a),g=0;i<r;)f.setUint8(g++,p.getUint8(i++));return a}})},function(e,t,n){var i=n(22),r=n(418);i({global:!0,forced:!n(504)},{DataView:r.DataView})},function(e,t,n){var i=n(22),r=n(869);i({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},function(e,t,n){"use strict";var i=n(91),r=n(505).start,a=Math.abs,s=Date.prototype,o=s.getTime,l=s.toISOString;e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!i((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+r(a(e),n?6:4,0)+"-"+r(this.getUTCMonth()+1,2,0)+"-"+r(this.getUTCDate(),2,0)+"T"+r(this.getUTCHours(),2,0)+":"+r(this.getUTCMinutes(),2,0)+":"+r(this.getUTCSeconds(),2,0)+"."+r(t,3,0)+"Z"}:l},function(e,t,n){"use strict";var i=n(22),r=n(91),a=n(173),s=n(251);i({target:"Date",proto:!0,forced:r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=a(this),n=s(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var i=n(213),r=n(872),a=n(134)("toPrimitive"),s=Date.prototype;a in s||i(s,a,r)},function(e,t,n){"use strict";var i=n(129),r=n(251);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),"number"!==e)}},function(e,t,n){"use strict";var i=n(128),r=n(163),a=n(245),s=n(134)("hasInstance"),o=Function.prototype;s in o||r.f(o,s,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=a(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(145),r=n(163).f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/;i&&!("name"in a)&&r(a,"name",{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},function(e,t,n){var i=n(108);n(259)(i.JSON,"JSON",!0)},function(e,t,n){"use strict";var i=n(419),r=n(610);e.exports=i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},function(e,t,n){var i=n(22),r=n(611),a=Math.acosh,s=Math.log,o=Math.sqrt,l=Math.LN2;i({target:"Math",stat:!0,forced:!a||710!=Math.floor(a(Number.MAX_VALUE))||a(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?s(e)+l:r(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var i=n(22),r=Math.asinh,a=Math.log,s=Math.sqrt;i({target:"Math",stat:!0,forced:!(r&&1/r(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):a(t+s(t*t+1)):t}})},function(e,t,n){var i=n(22),r=Math.atanh,a=Math.log;i({target:"Math",stat:!0,forced:!(r&&1/r(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:a((1+e)/(1-e))/2}})},function(e,t,n){var i=n(22),r=n(507),a=Math.abs,s=Math.pow;i({target:"Math",stat:!0},{cbrt:function(e){return r(e=+e)*s(a(e),1/3)}})},function(e,t,n){var i=n(22),r=Math.floor,a=Math.log,s=Math.LOG2E;i({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-r(a(e+.5)*s):32}})},function(e,t,n){var i=n(22),r=n(421),a=Math.cosh,s=Math.abs,o=Math.E;i({target:"Math",stat:!0,forced:!a||a(710)===1/0},{cosh:function(e){var t=r(s(e)-1)+1;return(t+1/(t*o*o))*(o/2)}})},function(e,t,n){var i=n(22),r=n(421);i({target:"Math",stat:!0,forced:r!=Math.expm1},{expm1:r})},function(e,t,n){n(22)({target:"Math",stat:!0},{fround:n(885)})},function(e,t,n){var i=n(507),r=Math.abs,a=Math.pow,s=a(2,-52),o=a(2,-23),l=a(2,127)*(2-o),c=a(2,-126);e.exports=Math.fround||function(e){var t,n,a=r(e),u=i(e);return a<c?u*(a/c/o+1/s-1/s)*c*o:(n=(t=(1+o/s)*a)-(t-a))>l||n!=n?u*(1/0):u*n}},function(e,t,n){var i=n(22),r=Math.hypot,a=Math.abs,s=Math.sqrt;i({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,i,r=0,o=0,l=arguments.length,c=0;o<l;)c<(n=a(arguments[o++]))?(r=r*(i=c/n)*i+1,c=n):r+=n>0?(i=n/c)*i:n;return c===1/0?1/0:c*s(r)}})},function(e,t,n){var i=n(22),r=n(91),a=Math.imul;i({target:"Math",stat:!0,forced:r((function(){return-5!=a(4294967295,5)||2!=a.length}))},{imul:function(e,t){var n=+e,i=+t,r=65535&n,a=65535&i;return 0|r*a+((65535&n>>>16)*a+r*(65535&i>>>16)<<16>>>0)}})},function(e,t,n){var i=n(22),r=Math.log,a=Math.LOG10E;i({target:"Math",stat:!0},{log10:function(e){return r(e)*a}})},function(e,t,n){n(22)({target:"Math",stat:!0},{log1p:n(611)})},function(e,t,n){var i=n(22),r=Math.log,a=Math.LN2;i({target:"Math",stat:!0},{log2:function(e){return r(e)/a}})},function(e,t,n){n(22)({target:"Math",stat:!0},{sign:n(507)})},function(e,t,n){var i=n(22),r=n(91),a=n(421),s=Math.abs,o=Math.exp,l=Math.E;i({target:"Math",stat:!0,forced:r((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return s(e=+e)<1?(a(e)-a(-e))/2:(o(e-1)-o(-e-1))*(l/2)}})},function(e,t,n){var i=n(22),r=n(421),a=Math.exp;i({target:"Math",stat:!0},{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){n(259)(Math,"Math",!0)},function(e,t,n){var i=n(22),r=Math.ceil,a=Math.floor;i({target:"Math",stat:!0},{trunc:function(e){return(e>0?a:r)(e)}})},function(e,t,n){"use strict";var i=n(145),r=n(108),a=n(366),s=n(216),o=n(180),l=n(241),c=n(420),u=n(251),d=n(91),h=n(272),p=n(305).f,f=n(211).f,g=n(163).f,m=n(336).trim,_=r.Number,v=_.prototype,b="Number"==l(h(v)),y=function(e){var t,n,i,r,a,s,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=m(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(a=c.slice(2)).length,o=0;o<s;o++)if((l=a.charCodeAt(o))<48||l>r)return NaN;return parseInt(a,i)}return+c};if(a("Number",!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,I=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof I&&(b?d((function(){v.valueOf.call(n)})):"Number"!=l(n))?c(new _(y(t)),n,I):y(t)},S=i?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;S.length>C;C++)o(_,w=S[C])&&!o(I,w)&&g(I,w,f(_,w));I.prototype=v,v.constructor=I,s(r,"Number",I)}},function(e,t,n){n(22)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(e,t,n){n(22)({target:"Number",stat:!0},{isFinite:n(899)})},function(e,t,n){var i=n(108).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&i(e)}},function(e,t,n){n(22)({target:"Number",stat:!0},{isInteger:n(612)})},function(e,t,n){n(22)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(22),r=n(612),a=Math.abs;i({target:"Number",stat:!0},{isSafeInteger:function(e){return r(e)&&a(e)<=9007199254740991}})},function(e,t,n){n(22)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){n(22)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(22),r=n(613);i({target:"Number",stat:!0,forced:Number.parseFloat!=r},{parseFloat:r})},function(e,t,n){var i=n(22),r=n(614);i({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},function(e,t,n){"use strict";var i=n(22),r=n(244),a=n(615),s=n(506),o=n(91),l=1..toFixed,c=Math.floor,u=function e(t,n,i){return 0===n?i:n%2===1?e(t,n-1,i*t):e(t*t,n/2,i)};i({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}))},{toFixed:function(e){var t,n,i,o,l=a(this),d=r(e),h=[0,0,0,0,0,0],p="",f="0",g=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*h[n],h[n]=i%1e7,i=c(i/1e7)},m=function(e){for(var t=6,n=0;--t>=0;)n+=h[t],h[t]=c(n/e),n=n%e*1e7},_=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==h[e]){var n=String(h[e]);t=""===t?n:t+s.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*u(2,69,1))-69)<0?l*u(2,-t,1):l/u(2,t,1),n*=4503599627370496,(t=52-t)>0){for(g(0,n),i=d;i>=7;)g(1e7,0),i-=7;for(g(u(10,i,1),0),i=t-1;i>=23;)m(1<<23),i-=23;m(1<<i),g(1,1),m(2),f=_()}else g(0,n),g(1<<-t,0),f=_()+s.call("0",d);return d>0?p+((o=f.length)<=d?"0."+s.call("0",d-o)+f:f.slice(0,o-d)+"."+f.slice(o-d)):p+f}})},function(e,t,n){"use strict";var i=n(22),r=n(91),a=n(615),s=1..toPrecision;i({target:"Number",proto:!0,forced:r((function(){return"1"!==s.call(1,void 0)}))||!r((function(){s.call({})}))},{toPrecision:function(e){return void 0===e?s.call(a(this)):s.call(a(this),e)}})},function(e,t,n){var i=n(22),r=n(616);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(423),s=n(173),o=n(218),l=n(163);r&&i({target:"Object",proto:!0,forced:a},{__defineGetter__:function(e,t){l.f(s(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(423),s=n(173),o=n(218),l=n(163);r&&i({target:"Object",proto:!0,forced:a},{__defineSetter__:function(e,t){l.f(s(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var i=n(22),r=n(617).entries;i({target:"Object",stat:!0},{entries:function(e){return r(e)}})},function(e,t,n){var i=n(22),r=n(373),a=n(91),s=n(128),o=n(307).onFreeze,l=Object.freeze;i({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!r},{freeze:function(e){return l&&s(e)?l(o(e)):e}})},function(e,t,n){var i=n(22),r=n(294),a=n(306);i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return r(e,(function(e,n){a(t,e,n)}),void 0,!0),t}})},function(e,t,n){var i=n(22),r=n(91),a=n(232),s=n(211).f,o=n(145),l=r((function(){s(1)}));i({target:"Object",stat:!0,forced:!o||l,sham:!o},{getOwnPropertyDescriptor:function(e,t){return s(a(e),t)}})},function(e,t,n){var i=n(22),r=n(145),a=n(492),s=n(232),o=n(211),l=n(306);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=s(e),r=o.f,c=a(i),u={},d=0;c.length>d;)void 0!==(n=r(i,t=c[d++]))&&l(u,t,n);return u}})},function(e,t,n){var i=n(22),r=n(91),a=n(599).f;i({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:a})},function(e,t,n){var i=n(22),r=n(91),a=n(173),s=n(245),o=n(503);i({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!o},{getPrototypeOf:function(e){return s(a(e))}})},function(e,t,n){n(22)({target:"Object",stat:!0},{is:n(618)})},function(e,t,n){var i=n(22),r=n(91),a=n(128),s=Object.isExtensible;i({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isExtensible:function(e){return!!a(e)&&(!s||s(e))}})},function(e,t,n){var i=n(22),r=n(91),a=n(128),s=Object.isFrozen;i({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isFrozen:function(e){return!a(e)||!!s&&s(e)}})},function(e,t,n){var i=n(22),r=n(91),a=n(128),s=Object.isSealed;i({target:"Object",stat:!0,forced:r((function(){s(1)}))},{isSealed:function(e){return!a(e)||!!s&&s(e)}})},function(e,t,n){var i=n(22),r=n(173),a=n(367);i({target:"Object",stat:!0,forced:n(91)((function(){a(1)}))},{keys:function(e){return a(r(e))}})},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(423),s=n(173),o=n(251),l=n(245),c=n(211).f;r&&i({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(e){var t,n=s(this),i=o(e,!0);do{if(t=c(n,i))return t.get}while(n=l(n))}})},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(423),s=n(173),o=n(251),l=n(245),c=n(211).f;r&&i({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(e){var t,n=s(this),i=o(e,!0);do{if(t=c(n,i))return t.set}while(n=l(n))}})},function(e,t,n){var i=n(22),r=n(128),a=n(307).onFreeze,s=n(373),o=n(91),l=Object.preventExtensions;i({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!s},{preventExtensions:function(e){return l&&r(e)?l(a(e)):e}})},function(e,t,n){var i=n(22),r=n(128),a=n(307).onFreeze,s=n(373),o=n(91),l=Object.seal;i({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!s},{seal:function(e){return l&&r(e)?l(a(e)):e}})},function(e,t,n){n(22)({target:"Object",stat:!0},{setPrototypeOf:n(292)})},function(e,t,n){var i=n(500),r=n(216),a=n(930);i||r(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){"use strict";var i=n(500),r=n(372);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){var i=n(22),r=n(617).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},function(e,t,n){var i=n(22),r=n(613);i({global:!0,forced:parseFloat!=r},{parseFloat:r})},function(e,t,n){var i=n(22),r=n(614);i({global:!0,forced:parseInt!=r},{parseInt:r})},function(e,t,n){"use strict";var i,r,a,s,o=n(22),l=n(242),c=n(108),u=n(243),d=n(619),h=n(216),p=n(335),f=n(259),g=n(334),m=n(128),_=n(218),v=n(293),b=n(241),y=n(490),w=n(294),I=n(415),S=n(274),C=n(508).set,E=n(621),A=n(622),O=n(935),T=n(424),M=n(509),D=n(217),P=n(366),L=n(134),R=n(496),x=L("species"),N="Promise",F=D.get,V=D.set,k=D.getterFor(N),B=d,j=c.TypeError,U=c.document,G=c.process,H=u("fetch"),W=T.f,$=W,z="process"==b(G),K=!!(U&&U.createEvent&&c.dispatchEvent),q=P(N,(function(){if(y(B)===String(B)){if(66===R)return!0;if(!z&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!B.prototype.finally)return!0;if(R>=51&&/native code/.test(B))return!1;var e=B.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[x]=t,!(e.then((function(){}))instanceof t)})),Q=q||!I((function(e){B.all(e).catch((function(){}))})),Y=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;E((function(){for(var r=t.value,a=1==t.state,s=0;i.length>s;){var o,l,c,u=i[s++],d=a?u.ok:u.fail,h=u.resolve,p=u.reject,f=u.domain;try{d?(a||(2===t.rejection&&te(e,t),t.rejection=1),!0===d?o=r:(f&&f.enter(),o=d(r),f&&(f.exit(),c=!0)),o===u.promise?p(j("Promise-chain cycle")):(l=Y(o))?l.call(o,h,p):h(o)):p(r)}catch(g){f&&!c&&f.exit(),p(g)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&J(e,t)}))}},X=function(e,t,n){var i,r;K?((i=U.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},(r=c["on"+e])?r(i):"unhandledrejection"===e&&O("Unhandled promise rejection",n)},J=function(e,t){C.call(c,(function(){var n,i=t.value;if(ee(t)&&(n=M((function(){z?G.emit("unhandledRejection",i,e):X("unhandledrejection",e,i)})),t.rejection=z||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){C.call(c,(function(){z?G.emit("rejectionHandled",e):X("rejectionhandled",e,t.value)}))},ne=function(e,t,n,i){return function(r){e(t,n,r,i)}},ie=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,Z(e,t,!0))},re=function e(t,n,i,r){if(!n.done){n.done=!0,r&&(n=r);try{if(t===i)throw j("Promise can't be resolved itself");var a=Y(i);a?E((function(){var r={done:!1};try{a.call(i,ne(e,t,r,n),ne(ie,t,r,n))}catch(s){ie(t,r,s,n)}})):(n.value=i,n.state=1,Z(t,n,!1))}catch(s){ie(t,{done:!1},s,n)}}};q&&(B=function(e){v(this,B,N),_(e),i.call(this);var t=F(this);try{e(ne(re,this,t),ne(ie,this,t))}catch(n){ie(this,t,n)}},(i=function(e){V(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(B.prototype,{then:function(e,t){var n=k(this),i=W(S(this,B));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=z?G.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Z(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=F(e);this.promise=e,this.resolve=ne(re,e,t),this.reject=ne(ie,e,t)},T.f=W=function(e){return e===B||e===a?new r(e):$(e)},l||"function"!=typeof d||(s=d.prototype.then,h(d.prototype,"then",(function(e,t){var n=this;return new B((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return A(B,H.apply(c,arguments))}}))),o({global:!0,wrap:!0,forced:q},{Promise:B}),f(B,N,!1,!0),g(N),a=u(N),o({target:N,stat:!0,forced:q},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),o({target:N,stat:!0,forced:l||q},{resolve:function(e){return A(l&&this===a?B:this,e)}}),o({target:N,stat:!0,forced:Q},{all:function(e){var t=this,n=W(t),i=n.resolve,r=n.reject,a=M((function(){var n=_(t.resolve),a=[],s=0,o=1;w(e,(function(e){var l=s++,c=!1;a.push(void 0),o++,n.call(t,e).then((function(e){c||(c=!0,a[l]=e,--o||i(a))}),r)})),--o||i(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=W(t),i=n.reject,r=M((function(){var r=_(t.resolve);w(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},function(e,t,n){var i=n(108);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){"use strict";var i=n(22),r=n(242),a=n(619),s=n(91),o=n(243),l=n(274),c=n(622),u=n(216);i({target:"Promise",proto:!0,real:!0,forced:!!a&&s((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,o("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),r||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",o("Promise").prototype.finally)},function(e,t,n){var i=n(22),r=n(243),a=n(218),s=n(129),o=n(91),l=r("Reflect","apply"),c=Function.apply;i({target:"Reflect",stat:!0,forced:!o((function(){l((function(){}))}))},{apply:function(e,t,n){return a(e),s(n),l?l(e,t,n):c.call(e,t,n)}})},function(e,t,n){var i=n(22),r=n(243),a=n(218),s=n(129),o=n(128),l=n(272),c=n(939),u=n(91),d=r("Reflect","construct"),h=u((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),p=!u((function(){d((function(){}))})),f=h||p;i({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(e,t){a(e),s(t);var n=arguments.length<3?e:a(arguments[2]);if(p&&!h)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(c.apply(e,i))}var r=n.prototype,u=l(o(r)?r:Object.prototype),f=Function.apply.call(e,u,t);return o(f)?f:u}})},function(e,t,n){"use strict";var i=n(218),r=n(128),a=[].slice,s={},o=function(e,t,n){if(!(t in s)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";s[t]=Function("C,a","return new C("+i.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=a.call(arguments,1),s=function(){var i=n.concat(a.call(arguments));return this instanceof s?o(t,i.length,i):t.apply(e,i)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){var i=n(22),r=n(145),a=n(129),s=n(251),o=n(163);i({target:"Reflect",stat:!0,forced:n(91)((function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})})),sham:!r},{defineProperty:function(e,t,n){a(e);var i=s(t,!0);a(n);try{return o.f(e,i,n),!0}catch(r){return!1}}})},function(e,t,n){var i=n(22),r=n(129),a=n(211).f;i({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(r(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var i=n(22),r=n(128),a=n(129),s=n(180),o=n(211),l=n(245);i({target:"Reflect",stat:!0},{get:function e(t,n){var i,c,u=arguments.length<3?t:arguments[2];return a(t)===u?t[n]:(i=o.f(t,n))?s(i,"value")?i.value:void 0===i.get?void 0:i.get.call(u):r(c=l(t))?e(c,n,u):void 0}})},function(e,t,n){var i=n(22),r=n(145),a=n(129),s=n(211);i({target:"Reflect",stat:!0,sham:!r},{getOwnPropertyDescriptor:function(e,t){return s.f(a(e),t)}})},function(e,t,n){var i=n(22),r=n(129),a=n(245);i({target:"Reflect",stat:!0,sham:!n(503)},{getPrototypeOf:function(e){return a(r(e))}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var i=n(22),r=n(129),a=Object.isExtensible;i({target:"Reflect",stat:!0},{isExtensible:function(e){return r(e),!a||a(e)}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{ownKeys:n(492)})},function(e,t,n){var i=n(22),r=n(243),a=n(129);i({target:"Reflect",stat:!0,sham:!n(373)},{preventExtensions:function(e){a(e);try{var t=r("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},function(e,t,n){var i=n(22),r=n(129),a=n(128),s=n(180),o=n(91),l=n(163),c=n(211),u=n(245),d=n(271);i({target:"Reflect",stat:!0,forced:o((function(){var e=l.f({},"a",{configurable:!0});return!1!==Reflect.set(u(e),"a",1,e)}))},{set:function e(t,n,i){var o,h,p=arguments.length<4?t:arguments[3],f=c.f(r(t),n);if(!f){if(a(h=u(t)))return e(h,n,i,p);f=d(0)}if(s(f,"value")){if(!1===f.writable||!a(p))return!1;if(o=c.f(p,n)){if(o.get||o.set||!1===o.writable)return!1;o.value=i,l.f(p,n,o)}else l.f(p,n,d(0,i));return!0}return void 0!==f.set&&(f.set.call(p,i),!0)}})},function(e,t,n){var i=n(22),r=n(129),a=n(607),s=n(292);s&&i({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){r(e),a(t);try{return s(e,t),!0}catch(n){return!1}}})},function(e,t,n){var i=n(145),r=n(108),a=n(366),s=n(420),o=n(163).f,l=n(305).f,c=n(374),u=n(337),d=n(510),h=n(216),p=n(91),f=n(217).set,g=n(334),m=n(134)("match"),_=r.RegExp,v=_.prototype,b=/a/g,y=/a/g,w=new _(b)!==b,I=d.UNSUPPORTED_Y;if(i&&a("RegExp",!w||I||p((function(){return y[m]=!1,_(b)!=b||_(y)==y||"/a/i"!=_(b,"i")})))){for(var S=function(e,t){var n,i=this instanceof S,r=c(e),a=void 0===t;if(!i&&r&&e.constructor===S&&a)return e;w?r&&!a&&(e=e.source):e instanceof S&&(a&&(t=u.call(e)),e=e.source),I&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var o=s(w?new _(e,t):_(e,t),i?this:v,S);return I&&n&&f(o,{sticky:n}),o},C=function(e){e in S||o(S,e,{configurable:!0,get:function(){return _[e]},set:function(t){_[e]=t}})},E=l(_),A=0;E.length>A;)C(E[A++]);v.constructor=S,S.prototype=v,h(r,"RegExp",S)}g("RegExp")},function(e,t,n){var i=n(145),r=n(163),a=n(337),s=n(510).UNSUPPORTED_Y;i&&("g"!=/./g.flags||s)&&r.f(RegExp.prototype,"flags",{configurable:!0,get:a})},function(e,t,n){"use strict";var i=n(216),r=n(129),a=n(91),s=n(337),o=RegExp.prototype,l=o.toString,c=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u="toString"!=l.name;(c||u)&&i(RegExp.prototype,"toString",(function(){var e=r(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in o)?s.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var i=n(419),r=n(610);e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},function(e,t,n){"use strict";var i=n(22),r=n(426).codeAt;i({target:"String",proto:!0},{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(22),r=n(211).f,a=n(146),s=n(511),o=n(212),l=n(512),c=n(242),u="".endsWith,d=Math.min,h=l("endsWith");i({target:"String",proto:!0,forced:!(!c&&!h&&function(){var e=r(String.prototype,"endsWith");return e&&!e.writable}())&&!h},{endsWith:function(e){var t=String(o(this));s(e);var n=arguments.length>1?arguments[1]:void 0,i=a(t.length),r=void 0===n?i:d(a(n),i),l=String(e);return u?u.call(t,l,r):t.slice(r-l.length,r)===l}})},function(e,t,n){var i=n(22),r=n(289),a=String.fromCharCode,s=String.fromCodePoint;i({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var i=n(22),r=n(511),a=n(212);i({target:"String",proto:!0,forced:!n(512)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(427),r=n(129),a=n(146),s=n(212),o=n(428),l=n(429);i("match",1,(function(e,t,n){return[function(t){var n=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var s=r(e),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;for(var d,h=[],p=0;null!==(d=l(s,c));){var f=String(d[0]);h[p]=f,""===f&&(s.lastIndex=o(c,a(s.lastIndex),u)),p++}return 0===p?null:h}]}))},function(e,t,n){"use strict";var i=n(22),r=n(505).end;i({target:"String",proto:!0,forced:n(625)},{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(22),r=n(505).start;i({target:"String",proto:!0,forced:n(625)},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(22),r=n(232),a=n(146);i({target:"String",stat:!0},{raw:function(e){for(var t=r(e.raw),n=a(t.length),i=arguments.length,s=[],o=0;n>o;)s.push(String(t[o++])),o<i&&s.push(String(arguments[o]));return s.join("")}})},function(e,t,n){n(22)({target:"String",proto:!0},{repeat:n(506)})},function(e,t,n){"use strict";var i=n(427),r=n(129),a=n(173),s=n(146),o=n(244),l=n(212),c=n(428),u=n(429),d=Math.max,h=Math.min,p=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=i.REPLACE_KEEPS_$0,v=m?"$":"$0";return[function(n,i){var r=l(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,r,i):t.call(String(r),n,i)},function(e,i){if(!m&&_||"string"===typeof i&&-1===i.indexOf(v)){var a=n(t,e,this,i);if(a.done)return a.value}var l=r(e),p=String(this),f="function"===typeof i;f||(i=String(i));var g=l.global;if(g){var y=l.unicode;l.lastIndex=0}for(var w=[];;){var I=u(l,p);if(null===I)break;if(w.push(I),!g)break;""===String(I[0])&&(l.lastIndex=c(p,s(l.lastIndex),y))}for(var S,C="",E=0,A=0;A<w.length;A++){I=w[A];for(var O=String(I[0]),T=d(h(o(I.index),p.length),0),M=[],D=1;D<I.length;D++)M.push(void 0===(S=I[D])?S:String(S));var P=I.groups;if(f){var L=[O].concat(M,T,p);void 0!==P&&L.push(P);var R=String(i.apply(void 0,L))}else R=b(O,p,T,M,P,i);T>=E&&(C+=p.slice(E,T)+R,E=T+O.length)}return C+p.slice(E)}];function b(e,n,i,r,s,o){var l=i+e.length,c=r.length,u=g;return void 0!==s&&(s=a(s),u=f),t.call(o,u,(function(t,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(l);case"<":o=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>c){var d=p(u/10);return 0===d?t:d<=c?void 0===r[d-1]?a.charAt(1):r[d-1]+a.charAt(1):t}o=r[u-1]}return void 0===o?"":o}))}}))},function(e,t,n){"use strict";var i=n(427),r=n(129),a=n(212),s=n(618),o=n(429);i("search",1,(function(e,t,n){return[function(t){var n=a(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var a=r(e),l=String(this),c=a.lastIndex;s(c,0)||(a.lastIndex=0);var u=o(a,l);return s(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))},function(e,t,n){"use strict";var i=n(427),r=n(374),a=n(129),s=n(212),o=n(274),l=n(428),c=n(146),u=n(429),d=n(425),h=n(91),p=[].push,f=Math.min,g=!h((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,a);for(var o,l,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,h+"g");(o=d.call(g,i))&&!((l=g.lastIndex)>f&&(u.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&p.apply(u,o.slice(1)),c=o[0].length,f=l,u.length>=a));)g.lastIndex===o.index&&g.lastIndex++;return f===i.length?!c&&g.test("")||u.push(""):u.push(i.slice(f)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r,n):i.call(String(r),t,n)},function(e,r){var s=n(i,e,this,r,i!==t);if(s.done)return s.value;var d=a(e),h=String(this),p=o(d,RegExp),m=d.unicode,_=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),v=new p(g?d:"^(?:"+d.source+")",_),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===h.length)return null===u(v,h)?[h]:[];for(var y=0,w=0,I=[];w<h.length;){v.lastIndex=g?w:0;var S,C=u(v,g?h:h.slice(w));if(null===C||(S=f(c(v.lastIndex+(g?0:w)),h.length))===y)w=l(h,w,m);else{if(I.push(h.slice(y,w)),I.length===b)return I;for(var E=1;E<=C.length-1;E++)if(I.push(C[E]),I.length===b)return I;w=y=S}}return I.push(h.slice(y)),I}]}),!g)},function(e,t,n){"use strict";var i=n(22),r=n(211).f,a=n(146),s=n(511),o=n(212),l=n(512),c=n(242),u="".startsWith,d=Math.min,h=l("startsWith");i({target:"String",proto:!0,forced:!(!c&&!h&&function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}())&&!h},{startsWith:function(e){var t=String(o(this));s(e);var n=a(d(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return u?u.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";var i=n(22),r=n(336).trim;i({target:"String",proto:!0,forced:n(513)("trim")},{trim:function(){return r(this)}})},function(e,t,n){"use strict";var i=n(22),r=n(336).end,a=n(513)("trimEnd"),s=a?function(){return r(this)}:"".trimEnd;i({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},function(e,t,n){"use strict";var i=n(22),r=n(336).start,a=n(513)("trimStart"),s=a?function(){return r(this)}:"".trimStart;i({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("anchor")},{anchor:function(e){return r(this,"a","name",e)}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("big")},{big:function(){return r(this,"big","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("blink")},{blink:function(){return r(this,"blink","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("bold")},{bold:function(){return r(this,"b","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("fixed")},{fixed:function(){return r(this,"tt","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("fontcolor")},{fontcolor:function(e){return r(this,"font","color",e)}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("fontsize")},{fontsize:function(e){return r(this,"font","size",e)}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("italics")},{italics:function(){return r(this,"i","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("link")},{link:function(e){return r(this,"a","href",e)}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("small")},{small:function(){return r(this,"small","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("strike")},{strike:function(){return r(this,"strike","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("sub")},{sub:function(){return r(this,"sub","","")}})},function(e,t,n){"use strict";var i=n(22),r=n(234);i({target:"String",proto:!0,forced:n(235)("sup")},{sup:function(){return r(this,"sup","","")}})},function(e,t,n){n(275)("Float32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){var i=n(244);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){n(275)("Float64",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Int8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Int16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Int32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0)},function(e,t,n){n(275)("Uint16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(275)("Uint32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){"use strict";var i=n(147),r=n(601),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return r.call(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(206).every,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(498),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(e){return r.apply(a(this),arguments)}))},function(e,t,n){"use strict";var i=n(147),r=n(206).filter,a=n(274),s=i.aTypedArray,o=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("filter",(function(e){for(var t=r(s(this),e,arguments.length>1?arguments[1]:void 0),n=a(this,this.constructor),i=0,l=t.length,c=new(o(n))(l);l>i;)c[i]=t[i++];return c}))},function(e,t,n){"use strict";var i=n(147),r=n(206).find,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(206).findIndex,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(206).forEach,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(e){r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(514);(0,n(147).exportTypedArrayStaticMethod)("from",n(627),i)},function(e,t,n){"use strict";var i=n(147),r=n(365).includes,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(365).indexOf,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(108),r=n(147),a=n(416),s=n(134)("iterator"),o=i.Uint8Array,l=a.values,c=a.keys,u=a.entries,d=r.aTypedArray,h=r.exportTypedArrayMethod,p=o&&o.prototype[s],f=!!p&&("values"==p.name||void 0==p.name),g=function(){return l.call(d(this))};h("entries",(function(){return u.call(d(this))})),h("keys",(function(){return c.call(d(this))})),h("values",g,!f),h(s,g,!f)},function(e,t,n){"use strict";var i=n(147),r=i.aTypedArray,a=i.exportTypedArrayMethod,s=[].join;a("join",(function(e){return s.apply(r(this),arguments)}))},function(e,t,n){"use strict";var i=n(147),r=n(608),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(e){return r.apply(a(this),arguments)}))},function(e,t,n){"use strict";var i=n(147),r=n(206).map,a=n(274),s=i.aTypedArray,o=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("map",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(a(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var i=n(147),r=n(514),a=i.aTypedArrayConstructor;(0,i.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(a(this))(t);t>e;)n[e]=arguments[e++];return n}),r)},function(e,t,n){"use strict";var i=n(147),r=n(417).left,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(e){return r(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=n(417).right,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(e){return r(a(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=i.aTypedArray,a=i.exportTypedArrayMethod,s=Math.floor;a("reverse",(function(){for(var e,t=r(this).length,n=s(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this}))},function(e,t,n){"use strict";var i=n(147),r=n(146),a=n(626),s=n(173),o=n(91),l=i.aTypedArray;(0,i.exportTypedArrayMethod)("set",(function(e){l(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=s(e),o=r(i.length),c=0;if(o+t>n)throw RangeError("Wrong length");for(;c<o;)this[t+c]=i[c++]}),o((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var i=n(147),r=n(274),a=n(91),s=i.aTypedArray,o=i.aTypedArrayConstructor,l=i.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var n=c.call(s(this),e,t),i=r(this,this.constructor),a=0,l=n.length,u=new(o(i))(l);l>a;)u[a]=n[a++];return u}),a((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var i=n(147),r=n(206).some,a=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(e){return r(a(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(147),r=i.aTypedArray,a=i.exportTypedArrayMethod,s=[].sort;a("sort",(function(e){return s.call(r(this),e)}))},function(e,t,n){"use strict";var i=n(147),r=n(146),a=n(289),s=n(274),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(e,t){var n=o(this),i=n.length,l=a(e,i);return new(s(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,r((void 0===t?i:a(t,i))-l))}))},function(e,t,n){"use strict";var i=n(108),r=n(147),a=n(91),s=i.Int8Array,o=r.aTypedArray,l=r.exportTypedArrayMethod,c=[].toLocaleString,u=[].slice,d=!!s&&a((function(){c.call(new s(1))}));l("toLocaleString",(function(){return c.apply(d?u.call(o(this)):o(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!a((function(){s.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var i=n(147).exportTypedArrayMethod,r=n(91),a=n(108).Uint8Array,s=a&&a.prototype||{},o=[].toString,l=[].join;r((function(){o.call({})}))&&(o=function(){return l.call(this)});var c=s.toString!=o;i("toString",o,c)},function(e,t,n){"use strict";var i,r=n(108),a=n(335),s=n(307),o=n(419),l=n(628),c=n(128),u=n(217).enforce,d=n(592),h=!r.ActiveXObject&&"ActiveXObject"in r,p=Object.isExtensible,f=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},g=e.exports=o("WeakMap",f,l);if(d&&h){i=l.getConstructor(f,"WeakMap",!0),s.REQUIRED=!0;var m=g.prototype,_=m.delete,v=m.has,b=m.get,y=m.set;a(m,{delete:function(e){if(c(e)&&!p(e)){var t=u(this);return t.frozen||(t.frozen=new i),_.call(this,e)||t.frozen.delete(e)}return _.call(this,e)},has:function(e){if(c(e)&&!p(e)){var t=u(this);return t.frozen||(t.frozen=new i),v.call(this,e)||t.frozen.has(e)}return v.call(this,e)},get:function(e){if(c(e)&&!p(e)){var t=u(this);return t.frozen||(t.frozen=new i),v.call(this,e)?b.call(this,e):t.frozen.get(e)}return b.call(this,e)},set:function(e,t){if(c(e)&&!p(e)){var n=u(this);n.frozen||(n.frozen=new i),v.call(this,e)?y.call(this,e,t):n.frozen.set(e,t)}else y.call(this,e,t);return this}})}},function(e,t,n){"use strict";n(419)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(628))},function(e,t,n){var i=n(108),r=n(629),a=n(603),s=n(213);for(var o in r){var l=i[o],c=l&&l.prototype;if(c&&c.forEach!==a)try{s(c,"forEach",a)}catch(u){c.forEach=a}}},function(e,t,n){var i=n(108),r=n(629),a=n(416),s=n(213),o=n(134),l=o("iterator"),c=o("toStringTag"),u=a.values;for(var d in r){var h=i[d],p=h&&h.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(g){p[l]=u}if(p[c]||s(p,c,d),r[d])for(var f in a)if(p[f]!==a[f])try{s(p,f,a[f])}catch(g){p[f]=a[f]}}}},function(e,t,n){var i=n(22),r=n(108),a=n(508);i({global:!0,bind:!0,enumerable:!0,forced:!r.setImmediate||!r.clearImmediate},{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,n){var i=n(22),r=n(108),a=n(621),s=n(241),o=r.process,l="process"==s(o);i({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=l&&o.domain;a(t?t.bind(e):e)}})},function(e,t,n){"use strict";n(624);var i,r=n(22),a=n(145),s=n(630),o=n(108),l=n(597),c=n(216),u=n(293),d=n(180),h=n(616),p=n(604),f=n(426).codeAt,g=n(1026),m=n(259),_=n(631),v=n(217),b=o.URL,y=_.URLSearchParams,w=_.getState,I=v.set,S=v.getterFor("URL"),C=Math.floor,E=Math.pow,A=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,T=/\d/,M=/^(0x|0X)/,D=/^[0-7]+$/,P=/^\d+$/,L=/^[\dA-Fa-f]+$/,R=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,x=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\u0009\u000A\u000D]/g,V=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=B(t.slice(1,-1))))return"Invalid host";e.host=n}else if(K(e)){if(t=g(t),R.test(t))return"Invalid host";if(null===(n=k(t)))return"Invalid host";e.host=n}else{if(x.test(t))return"Invalid host";for(n="",i=p(t),r=0;r<i.length;r++)n+=$(i[r],U);e.host=n}},k=function(e){var t,n,i,r,a,s,o,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=l[i]))return e;if(a=10,r.length>1&&"0"==r.charAt(0)&&(a=M.test(r)?16:8,r=r.slice(8==a?1:2)),""===r)s=0;else{if(!(10==a?P:8==a?D:L).test(r))return e;s=parseInt(r,a)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=E(256,5-t))return null}else if(s>255)return null;for(o=n.pop(),i=0;i<n.length;i++)o+=n[i]*E(256,3-i);return o},B=function(e){var t,n,i,r,a,s,o,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&L.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,c>6)return;for(i=0;h();){if(r=null,i>0){if(!("."==h()&&i<4))return;d++}if(!T.test(h()))return;for(;T.test(h());){if(a=parseInt(h(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;d++}l[c]=256*l[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)o=l[c],l[c--]=l[u+s-1],l[u+--s]=o;else if(8!=c)return;return l},j=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=C(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,a=0;a<8;a++)0!==e[a]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=a),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},U={},G=h({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),H=h({},G,{"#":1,"?":1,"{":1,"}":1}),W=h({},H,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var n=f(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return d(z,e.scheme)},q=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Y=function(e,t){var n;return 2==e.length&&A.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Z=function(e){var t;return e.length>1&&Y(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},X=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Y(t[0],!0)||t.pop()},J=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},ie={},re={},ae={},se={},oe={},le={},ce={},ue={},de={},he={},pe={},fe={},ge={},me={},_e={},ve={},be={},ye={},we=function(e,t,n,r){var a,s,o,l,c,u=n||ee,h=0,f="",g=!1,m=!1,_=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(N,"")),t=t.replace(F,""),a=p(t);h<=a.length;){switch(s=a[h],u){case ee:if(!s||!A.test(s)){if(n)return"Invalid scheme";u=ne;continue}f+=s.toLowerCase(),u=te;break;case te:if(s&&(O.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(n)return"Invalid scheme";f="",u=ne,h=0;continue}if(n&&(K(e)!=d(z,f)||"file"==f&&(q(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,n)return void(K(e)&&z[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?u=pe:K(e)&&r&&r.scheme==e.scheme?u=ie:K(e)?u=oe:"/"==a[h+1]?(u=re,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=ve)}break;case ne:if(!r||r.cannotBeABaseURL&&"#"!=s)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==s){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,u=ye;break}u="file"==r.scheme?pe:ae;continue;case ie:if("/"!=s||"/"!=a[h+1]){u=ae;continue}u=le,h++;break;case re:if("/"==s){u=ce;break}u=_e;continue;case ae:if(e.scheme=r.scheme,s==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==s||"\\"==s&&K(e))u=se;else if("?"==s)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",u=be;else{if("#"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),u=_e;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=ye}break;case se:if(!K(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,u=_e;continue}u=ce}else u=le;break;case oe:if(u=le,"/"!=s||"/"!=f.charAt(h+1))continue;h++;break;case le:if("/"!=s&&"\\"!=s){u=ce;continue}break;case ce:if("@"==s){g&&(f="%40"+f),g=!0,o=p(f);for(var v=0;v<o.length;v++){var b=o[v];if(":"!=b||_){var y=$(b,W);_?e.password+=y:e.username+=y}else _=!0}f=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&K(e)){if(g&&""==f)return"Invalid authority";h-=p(f).length+1,f="",u=ue}else f+=s;break;case ue:case de:if(n&&"file"==e.scheme){u=ge;continue}if(":"!=s||m){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&K(e)){if(K(e)&&""==f)return"Invalid host";if(n&&""==f&&(q(e)||null!==e.port))return;if(l=V(e,f))return l;if(f="",u=me,n)return;continue}"["==s?m=!0:"]"==s&&(m=!1),f+=s}else{if(""==f)return"Invalid host";if(l=V(e,f))return l;if(f="",u=he,n==de)return}break;case he:if(!T.test(s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&K(e)||n){if(""!=f){var w=parseInt(f,10);if(w>65535)return"Invalid port";e.port=K(e)&&w===z[e.scheme]?null:w,f=""}if(n)return;u=me;continue}return"Invalid port"}f+=s;break;case pe:if(e.scheme="file","/"==s||"\\"==s)u=fe;else{if(!r||"file"!=r.scheme){u=_e;continue}if(s==i)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==s)e.host=r.host,e.path=r.path.slice(),e.query="",u=be;else{if("#"!=s){Z(a.slice(h).join(""))||(e.host=r.host,e.path=r.path.slice(),X(e)),u=_e;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=ye}}break;case fe:if("/"==s||"\\"==s){u=ge;break}r&&"file"==r.scheme&&!Z(a.slice(h).join(""))&&(Y(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),u=_e;continue;case ge:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Y(f))u=_e;else if(""==f){if(e.host="",n)return;u=me}else{if(l=V(e,f))return l;if("localhost"==e.host&&(e.host=""),n)return;f="",u=me}continue}f+=s;break;case me:if(K(e)){if(u=_e,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=i&&(u=_e,"/"!=s))continue}else e.fragment="",u=ye;else e.query="",u=be;break;case _e:if(s==i||"/"==s||"\\"==s&&K(e)||!n&&("?"==s||"#"==s)){if(".."===(c=(c=f).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(X(e),"/"==s||"\\"==s&&K(e)||e.path.push("")):J(f)?"/"==s||"\\"==s&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Y(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(s==i||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",u=be):"#"==s&&(e.fragment="",u=ye)}else f+=$(s,H);break;case ve:"?"==s?(e.query="",u=be):"#"==s?(e.fragment="",u=ye):s!=i&&(e.path[0]+=$(s,U));break;case be:n||"#"!=s?s!=i&&("'"==s&&K(e)?e.query+="%27":e.query+="#"==s?"%23":$(s,U)):(e.fragment="",u=ye);break;case ye:s!=i&&(e.fragment+=$(s,G))}h++}},Ie=function(e){var t,n,i=u(this,Ie,"URL"),r=arguments.length>1?arguments[1]:void 0,s=String(e),o=I(i,{type:"URL"});if(void 0!==r)if(r instanceof Ie)t=S(r);else if(n=we(t={},String(r)))throw TypeError(n);if(n=we(o,s,null,t))throw TypeError(n);var l=o.searchParams=new y,c=w(l);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(l)||null},a||(i.href=Ce.call(i),i.origin=Ee.call(i),i.protocol=Ae.call(i),i.username=Oe.call(i),i.password=Te.call(i),i.host=Me.call(i),i.hostname=De.call(i),i.port=Pe.call(i),i.pathname=Le.call(i),i.search=Re.call(i),i.searchParams=xe.call(i),i.hash=Ne.call(i))},Se=Ie.prototype,Ce=function(){var e=S(this),t=e.scheme,n=e.username,i=e.password,r=e.host,a=e.port,s=e.path,o=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",q(e)&&(c+=n+(i?":"+i:"")+"@"),c+=j(r),null!==a&&(c+=":"+a)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==o&&(c+="?"+o),null!==l&&(c+="#"+l),c},Ee=function(){var e=S(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(i){return"null"}return"file"!=t&&K(e)?t+"://"+j(e.host)+(null!==n?":"+n:""):"null"},Ae=function(){return S(this).scheme+":"},Oe=function(){return S(this).username},Te=function(){return S(this).password},Me=function(){var e=S(this),t=e.host,n=e.port;return null===t?"":null===n?j(t):j(t)+":"+n},De=function(){var e=S(this).host;return null===e?"":j(e)},Pe=function(){var e=S(this).port;return null===e?"":String(e)},Le=function(){var e=S(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Re=function(){var e=S(this).query;return e?"?"+e:""},xe=function(){return S(this).searchParams},Ne=function(){var e=S(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&l(Se,{href:Fe(Ce,(function(e){var t=S(this),n=String(e),i=we(t,n);if(i)throw TypeError(i);w(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ee),protocol:Fe(Ae,(function(e){var t=S(this);we(t,String(e)+":",ee)})),username:Fe(Oe,(function(e){var t=S(this),n=p(String(e));if(!Q(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=$(n[i],W)}})),password:Fe(Te,(function(e){var t=S(this),n=p(String(e));if(!Q(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=$(n[i],W)}})),host:Fe(Me,(function(e){var t=S(this);t.cannotBeABaseURL||we(t,String(e),ue)})),hostname:Fe(De,(function(e){var t=S(this);t.cannotBeABaseURL||we(t,String(e),de)})),port:Fe(Pe,(function(e){var t=S(this);Q(t)||(""==(e=String(e))?t.port=null:we(t,e,he))})),pathname:Fe(Le,(function(e){var t=S(this);t.cannotBeABaseURL||(t.path=[],we(t,e+"",me))})),search:Fe(Re,(function(e){var t=S(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",we(t,e,be)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(xe),hash:Fe(Ne,(function(e){var t=S(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",we(t,e,ye)):t.fragment=null}))}),c(Se,"toJSON",(function(){return Ce.call(this)}),{enumerable:!0}),c(Se,"toString",(function(){return Ce.call(this)}),{enumerable:!0}),b){var Ve=b.createObjectURL,ke=b.revokeObjectURL;Ve&&c(Ie,"createObjectURL",(function(e){return Ve.apply(b,arguments)})),ke&&c(Ie,"revokeObjectURL",(function(e){return ke.apply(b,arguments)}))}m(Ie,"URL"),r({global:!0,forced:!s,sham:!a},{URL:Ie})},function(e,t,n){"use strict";var i=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=Math.floor,o=String.fromCharCode,l=function(e){return e+22+75*(e<26)},c=function(e,t,n){var i=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;i+=36)e=s(e/35);return s(i+36*e/(e+38))},u=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,u=128,d=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(o(n));var p=i.length,f=p;for(p&&i.push("-");f<r;){var g=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=u&&n<g&&(g=n);var m=f+1;if(g-u>s((2147483647-d)/m))throw RangeError(a);for(d+=(g-u)*m,u=g,t=0;t<e.length;t++){if((n=e[t])<u&&++d>2147483647)throw RangeError(a);if(n==u){for(var _=d,v=36;;v+=36){var b=v<=h?1:v>=h+26?26:v-h;if(_<b)break;var y=_-b,w=36-b;i.push(o(l(b+y%w))),_=s(y/w)}i.push(o(l(_))),h=c(d,m,f==p),d=0,++f}}++d,++u}return i.join("")};e.exports=function(e){var t,n,a=[],s=e.toLowerCase().replace(r,".").split(".");for(t=0;t<s.length;t++)n=s[t],a.push(i.test(n)?"xn--"+u(n):n);return a.join(".")}},function(e,t,n){var i=n(129),r=n(371);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},function(e,t,n){"use strict";n(22)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t,n){"use strict";var i=n(22),r=n(145),a=n(245),s=n(292),o=n(272),l=n(163),c=n(271),u=n(294),d=n(213),h=n(217),p=h.set,f=h.getterFor("AggregateError"),g=function(e,t){var n=this;if(!(n instanceof g))return new g(e,t);s&&(n=s(new Error(t),a(n)));var i=[];return u(e,i.push,i),r?p(n,{errors:i,type:"AggregateError"}):n.errors=i,void 0!==t&&d(n,"message",String(t)),n};g.prototype=o(Error.prototype,{constructor:c(5,g),message:c(5,""),name:c(5,"AggregateError")}),r&&l.f(g.prototype,"errors",{get:function(){return f(this).errors},configurable:!0}),i({global:!0},{AggregateError:g})},function(e,t,n){n(1031)},function(e,t,n){n(22)({global:!0},{globalThis:n(108)})},function(e,t,n){n(1033)},function(e,t,n){"use strict";var i=n(22),r=n(218),a=n(424),s=n(509),o=n(294);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),i=n.resolve,l=n.reject,c=s((function(){var n=r(t.resolve),a=[],s=0,l=1;o(e,(function(e){var r=s++,o=!1;a.push(void 0),l++,n.call(t,e).then((function(e){o||(o=!0,a[r]={status:"fulfilled",value:e},--l||i(a))}),(function(e){o||(o=!0,a[r]={status:"rejected",reason:e},--l||i(a))}))})),--l||i(a)}));return c.error&&l(c.value),n.promise}})},function(e,t,n){"use strict";var i=n(22),r=n(218),a=n(243),s=n(424),o=n(509),l=n(294);i({target:"Promise",stat:!0},{any:function(e){var t=this,n=s.f(t),i=n.resolve,c=n.reject,u=o((function(){var n=r(t.resolve),s=[],o=0,u=1,d=!1;l(e,(function(e){var r=o++,l=!1;s.push(void 0),u++,n.call(t,e).then((function(e){l||d||(d=!0,i(e))}),(function(e){l||d||(l=!0,s[r]=e,--u||c(new(a("AggregateError"))(s,"No one promise resolved")))}))})),--u||c(new(a("AggregateError"))(s,"No one promise resolved"))}));return u.error&&c(u.value),n.promise}})},function(e,t,n){n(1036)},function(e,t,n){"use strict";var i=n(22),r=n(502),a=n(212),s=n(146),o=n(218),l=n(129),c=n(241),u=n(374),d=n(337),h=n(213),p=n(91),f=n(134),g=n(274),m=n(428),_=n(217),v=n(242),b=f("matchAll"),y=_.set,w=_.getterFor("RegExp String Iterator"),I=RegExp.prototype,S=I.exec,C="".matchAll,E=!!C&&!p((function(){"a".matchAll(/./)})),A=r((function(e,t,n,i){y(this,{type:"RegExp String Iterator",regexp:e,string:t,global:n,unicode:i,done:!1})}),"RegExp String",(function(){var e=w(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,i=function(e,t){var n,i=e.exec;if("function"==typeof i){if("object"!=typeof(n=i.call(e,t)))throw TypeError("Incorrect exec result");return n}return S.call(e,t)}(t,n);return null===i?{value:void 0,done:e.done=!0}:e.global?(""==String(i[0])&&(t.lastIndex=m(n,s(t.lastIndex),e.unicode)),{value:i,done:!1}):(e.done=!0,{value:i,done:!1})})),O=function(e){var t,n,i,r,a,o,c=l(this),u=String(e);return t=g(c,RegExp),void 0===(n=c.flags)&&c instanceof RegExp&&!("flags"in I)&&(n=d.call(c)),i=void 0===n?"":String(n),r=new t(t===RegExp?c.source:c,i),a=!!~i.indexOf("g"),o=!!~i.indexOf("u"),r.lastIndex=s(c.lastIndex),new A(r,u,a,o)};i({target:"String",proto:!0,forced:E},{matchAll:function(e){var t,n,i,r=a(this);if(null!=e){if(u(e)&&!~String(a("flags"in I?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(E)return C.apply(r,arguments);if(void 0===(n=e[b])&&v&&"RegExp"==c(e)&&(n=O),null!=n)return o(n).call(e,r)}else if(E)return C.apply(r,arguments);return t=String(r),i=new RegExp(e,"g"),v?O.call(i,t):i[b](t)}}),v||b in I||h(I,b,O)},function(e,t,n){"use strict";var i=n(22),r=n(212),a=n(374),s=n(337),o=n(134),l=n(242),c=o("replace"),u=RegExp.prototype;i({target:"String",proto:!0},{replaceAll:function e(t,n){var i,o,d,h,p,f,g,m,_=r(this);if(null!=t){if((i=a(t))&&!~String(r("flags"in u?t.flags:s.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(o=t[c]))return o.call(t,_,n);if(l&&i)return String(_).replace(t,n)}if(d=String(_),""===(h=String(t)))return e.call(d,/(?:)/g,n);if(p=d.split(h),"function"!==typeof n)return p.join(String(n));for(g=(f=p[0]).length,m=1;m<p.length;m++)f+=String(n(h,g,d)),g+=h.length+p[m].length,f+=p[m];return f}})},function(e,t,n){var i=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function o(e,t,n,i){var r=t&&t.prototype instanceof u?t:u,a=Object.create(r.prototype),s=new I(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var o=b(s,n);if(o){if(o===c)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=l(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}e.wrap=o;var c={};function u(){}function d(){}function h(){}var p={};p[r]=function(){return this};var f=Object.getPrototypeOf,g=f&&f(f(S([])));g&&g!==t&&n.call(g,r)&&(p=g);var m=h.prototype=u.prototype=Object.create(p);function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e,t){var i;this._invoke=function(r,a){function s(){return new t((function(i,s){!function i(r,a,s,o){var c=l(e[r],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,o)}),(function(e){i("throw",e,s,o)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,o)}))}o(c.arg)}(r,a,i,s)}))}return i=i?i.then(s,s):s()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=l(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=m.constructor=h,h.constructor=d,h[s]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(v.prototype),v.prototype[a]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var s=new v(o(t,n,i,r),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(m),m[s]="Generator",m[r]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=S,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=i}catch(r){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){"use strict";if(globalThis.performance||(globalThis.performance={}),!globalThis.performance.now){var i,r=globalThis.performance.timing;i=r&&r.navigationStart?r.navigationStart:Date.now(),globalThis.performance.now=function(){return Date.now()-i}}},function(e,t,n){"use strict";n.r(t),function(e){function i(){window.TextEncoder&&window.TextDecoder||(function(e){var t,n,i=String.fromCharCode,r=e.Uint8Array||Array,a=l.prototype,s=e.TextEncoder;function o(e){var t=0|e.charCodeAt(0);if(55296<=t&&t<=56319){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return i(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}return t<=2047?i(192|t>>>6,128|63&t):i(224|t>>>12,128|t>>>6&63,128|63&t)}function l(){}function c(e,t){var n=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,o),i=0|n.length,r=0,a=0,s=0,l=0|t.length,c=0|e.length;l<i&&(i=l);e:for(;r<i;r=r+1|0){switch((a=0|n.charCodeAt(r))>>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s=s+1|0;case 8:case 9:case 10:case 11:break;case 12:case 13:if((r+1|0)<l){s=s+1|0;break}case 14:if((r+2|0)<l){s=s+1|0;break}case 15:if((r+3|0)<l){s=s+1|0;break}default:break e}t[r]=a}return{written:r,read:c<s?c:s}}a.encode=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,o),n=0|t.length,i=new r(n),a=0;a<n;a=a+1|0)i[a]=0|t.charCodeAt(a);return i},a.encodeInto=c,s?(t=s.prototype).encodeInto||(n=new s,t.encodeInto=function(e,t){var i=0|e.length,r=0|t.length;if(i<(3+(r>>1)|0)){var a=n.encode(e);if((0|a.length)<r)return t.set(a),{read:i,written:0|a.length}}return c(e,t)}):e.TextEncoder=l}(typeof e==""+void 0?typeof self==""+void 0?this:self:e),function(e){var t=String.fromCharCode,n={}.toString,i=e.SharedArrayBuffer,r=i?n.call(i):"",a=e.Uint8Array,s=a||Array,o=n.call((a?ArrayBuffer:s).prototype);function l(e){var n=e.charCodeAt(0),i=1114112,r=0,a=0|e.length,s="";switch(n>>>4){case 12:case 13:r=(i=(31&n)<<6|63&e.charCodeAt(1))<128?0:2;break;case 14:r=(i=(15&n)<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2))<2048?0:3;break;case 15:n>>>3===30&&(r=(i=(7&n)<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|e.charCodeAt(3))<65536?0:4)}for(r&&(a<r?r=0:i<65536?s=t(i):i<1114112?s=t(55296+((i=i-65664|0)>>>10)|0,56320+(1023&i)|0):r=0);r<a;r=r+1|0)s+="\ufffd";return s}function c(e,t){}c.prototype.decode=function(e){var i=e&&e.buffer||e,c=n.call(i);if(c!==o&&c!==r&&void 0!==e)throw new TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var u=a?new s(i):i,d="",h=0,p=0|u.length;h<p;h=h+32768|0)d+=t.apply(0,u[a?"subarray":"slice"](h,h+32768|0));return d.replace(/[\xc0-\xff][\x80-\xbf]+|[\x80-\xff]/g,l)},e.TextDecoder||(e.TextDecoder=c)}(typeof e==""+void 0?typeof self==""+void 0?this:self:e))}n.d(t,"default",(function(){return i})),i()}.call(this,n(172))},function(e,t,n){},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.call(this)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a.once=function(t,n,i){if(i){var r=function(){n.apply(i,arguments)};e.prototype.once.apply(this,[t,r])}else e.prototype.once.apply(this,arguments)},a.on=function(t,n,i){if(arguments.length>2){this._boundListeners||(this._boundListeners={}),this._boundListeners[t]||(this._boundListeners[t]=[]);var r=n.bind(i);return this._boundListeners[t].push([n,i,r]),e.prototype.on.call(this,t,r)}return e.prototype.on.apply(this,arguments)},a.off=function(t,n,i){if(arguments.length>2)try{for(var r=this._boundListeners[t],a=r.length,s=0;s<a;s++)if(r[s][0]===n&&r[s][1]===i){var o=r.splice(s,1)[0];return e.prototype.off.call(this,t,o[2])}}catch(l){}return e.prototype.off.apply(this,arguments)},a.destroy=function(){this._boundListeners=void 0,e.prototype.destroy.call(this)},r}(n(236).EventEmitterMicro);e.exports=r},function(e,t,n){"use strict";function i(){this._events={}}var r=i.prototype;r.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},r.once=function(e,t){var n=this;this.on(e,(function i(r){n.off(e,i),void 0!==r?t(r):t()}))},r.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var n=this._events[e].indexOf(t);-1!==n&&this._events[e].splice(n,1)}},r.trigger=function(e,t){if(this.has(e))for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()},r.has=function(e){return e in this._events!==!1&&0!==this._events[e].length},r.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},e.exports=i},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._chapters=Array.from(t.chapters||[]),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var s,o,l=a.prototype;return l.addChapter=function(e){this._chapters.push(e),this._onChange()},l.removeChapter=function(e){for(var t=-1,n=0;n<this._chapters.length;n++)if(this._chapters[n].chapter===e){t=n;break}t>=0&&this._chapters.splice(t,1),this._onChange()},l._onChange=function(){this.trigger("change")},l.getChapterForTime=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this._chapters.length;n++){var i=this._chapters[n],r=i["start-time"];if(!i.duration||isNaN(i.duration)){if(this._chapters.length>n+1){var a=this._chapters[n+1];if(e>=r-t&&e<a["start-time"]-t)return i}else if(e>=r)return i}else if(r-t<=e&&e<r+i.duration-t)return i}return null},l.clearChapters=function(){this._chapters=[],this._onChange()},s=a,(o=[{key:"chapters",get:function(){return this._chapters},set:function(e){this._chapters=e,this._onChange()}}])&&i(s.prototype,o),a}(n(236).EventEmitterMicro);e.exports=a},function(e,t,n){"use strict";var i=n(252),r=i.browser.safari||i.browser.edge,a="MediaSource"in window&&!i.browser.edge&&!i.os.ios,s=function(){function e(){}return e.prototype.create=function(e,t){return!e.hls&&!function(e){return e.src&&-1!==e.src.indexOf(".m3u8")||e.sources&&e.sources[0]&&-1!==e.sources[0].indexOf(".m3u8")}(e)||r&&!1!==e.useNativeHls&&!e.dvr||!a?e.threesixty?new(n(1065))(Object.assign({},e,{parentElement:t})):new(n(516))(Object.assign({},e,{parentElement:t})):new(n(1049))(Object.assign({},e,{parentElement:t}))},e}();e.exports=new s},function(e,t,n){"use strict";var i=n(1047),r=n(1048);function a(e,t){if("function"===typeof e.parseVersion)return e.parseVersion(t);var n,i=e.version||e.userAgent;"string"===typeof i&&(i=[i]);for(var r,a=i.length,s=0;s<a;s++)if((r=t.match((n=i[s],new RegExp(n+"[a-zA-Z\\s/:]+([0-9_.]+)","i"))))&&r.length>1)return r[1].replace(/_/g,".");return!1}function s(e,t,n){for(var i,r,s=e.length,o=0;o<s;o++)if("function"===typeof e[o].test?!0===e[o].test(n)&&(i=e[o].name):n.ua.indexOf(e[o].userAgent)>-1&&(i=e[o].name),i){if(t[i]=!0,"string"===typeof(r=a(e[o],n.ua))){var l=r.split(".");t.version.string=r,l&&l.length>0&&(t.version.major=parseInt(l[0]||0),t.version.minor=parseInt(l[1]||0),t.version.patch=parseInt(l[2]||0))}else"edge"===i&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"===typeof e[o].parseDocumentMode&&(t.version.documentMode=e[o].parseDocumentMode()),t}return t}e.exports=function(e){var t={};return t.browser=s(r.browser,i.browser,e),t.os=s(r.os,i.os,e),t}},function(e,t,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},function(e,t,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&-1===e.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&-1===e.ua.indexOf("Android")}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=window.Hls,a=n(376),s=n(430),o=n(1050),l=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this)._src=null,n._hlsUrl=t.hlsUrl||"/ac/libs/hls.js/1.530.2/hls.js",n._hlsConfig=t.hlsConfig||{},n._initialize(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=l.prototype;return c._initialize=function(e){var t=this;"undefined"===typeof r&&(this._deferredQueue=[],o(this._hlsUrl).then((function(){r=window.Hls,t._initialize(e),t._deferredQueue.forEach((function(e){e()})),t._deferredQueue=null}))),this._debugHls=e.debugHls,this._enablePerformanceLogging=e.enablePerformanceLogging,this._onHlsError=this._onHlsError.bind(this),this._onDesiredRateChanged=this._onDesiredRateChanged.bind(this),this._onPlay=this._onPlay.bind(this),this.on("play",this._onPlay)},c._initHls=function(){if(this._hls){this._cachedVisibleTracks=Array.from(this.el.textTracks).filter((function(e){return"showing"===e.mode})),this._hls.off(r.Events.ERROR,this._onHlsError),this._hls.off(r.Events.DESIRED_RATE_CHANGED,this._onDesiredRateChanged),this._hls.destroy();var e=this.el.cloneNode(!1),t=this.el.muted;this.el.parentElement.replaceChild(e,this.el),this.replaceElement(e),this.el.muted=t,this.getTextTracksEventEmitter().replaceElement(this.el.textTracks)}this._hls=new r(Object.assign({debug:this._debugHls,enableWorker:!0,enableStreaming:!0,autoRecoverError:!0,enablePerformanceLogging:this._enablePerformanceLogging||!1,startPosition:-1},this._hlsConfig))},c.load=function(e,t){if(r){this._initHls(),this._hls.on(r.Events.ERROR,this._onHlsError),this._hls.on(r.Events.DESIRED_RATE_CHANGED,this._onDesiredRateChanged),this._src=e[0];var n=function(){this._mediaAttached=!0,this._hls.off(r.Events.MEDIA_ATTACHED,n),this.setSrc(e[0]),this._createTextTrackTags(t)}.bind(this);this._hls.on(r.Events.MEDIA_ATTACHED,n),this._hls.attachMedia(this.el)}else this._deferredQueue.push(this.load.bind(this,e,t))},c.setSrc=function(e){r?(this._hls||this._initHls(),this._src=e,this._manifestParsed=!1,this._hls.loadSource(e,{appData:{}}),this._hls.on(r.Events.MANIFEST_PARSED,this._boundManifestParsed=function(){this._manifestParsed=!0,this._hls.off(r.Events.MANIFEST_PARSED,this._boundManifestParsed),this._shouldPlay&&this.play()}.bind(this))):this._deferredQueue.push(this.setSrc.bind(this,e))},c.getCurrentSrc=function(){return this._src},c.canPlayType=function(t){return"vnd.apple.mpegURL"===t?e.prototype.canPlayType.call(this,"video/mp4"):e.prototype.canPlayType.call(this,t)},c._playPromiseRejected=function(){this._hls&&"undefined"!==typeof this._hls.desiredRate&&(this._hls.desiredRate=0),e.prototype._playPromiseRejected.call(this)},c._onPlay=function(){this._hls&&0===this._hls.desiredRate&&(this._hls.desiredRate=1)},c.getError=function(){return this.el.error||this._error},c.destroy=function(){this.off("play",this._onPlay),e.prototype.destroy.call(this),this._hls&&(this._hls.destroy(),this._hls=null)},c._onHlsError=function(e,t){!0===t.fatal&&("fragLoadError"===t.details?a("HLS JS threw a fatal fragLoadError error, but we'll try to let it recover because it probably can if the network/stream recovers"):(this._error=t.type,this.trigger("error",t)))},c._onDesiredRateChanged=function(e){0===this._hls.desiredRate?this.trigger("pause"):this.trigger("play")},c.play=function(){this._shouldPlay=!0,this._manifestParsed&&(this._mediaAttached||this.load([this._src]),e.prototype.play.call(this))},c.pause=function(){this._shouldPlay=!1,e.prototype.pause.call(this)},c.getPaused=function(){return this._hls&&"undefined"!==typeof this._hls.desiredRate?0===this._hls.desiredRate:e.prototype.getPaused.call(this)},c.isStalled=function(){return void 0!==this._hls.desiredRate&&1===this._hls.desiredRate&&this._hls.desiredRate!==this._hls.effectiveRate||e.prototype.isStalled.call(this)},c.goToLive=function(){this.setCurrentTime(Math.max(this._hls.liveSyncPosition,this.getDuration()-s/2))},l}(n(516));e.exports=l},function(e,t,n){"use strict";var i={};e.exports=function(e){return i[e]||(i[e]=new Promise((function(t,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=t,i.onerror=n;try{document.body.appendChild(i)}catch(r){n(r)}}))),i[e]}},function(e,t,n){"use strict";var i=n(252),r=!i.browser.ie&&!i.browser.edge;e.exports=function(e){var t;return t=!!(e=e||{}).hls||!e.threesixty&&("undefined"===typeof e.useNativeCaptions?r:e.useNativeCaptions),n(t?1052:1053)}},function(e,t,n){"use strict";var i,r=n(252);i=r.browser.safari?function(e,t){e.track.mode=t}:function(e,t){e.mode=t};var a=function(e){var t;if(e instanceof HTMLElement)this.el.appendChild(e);else{var n=document.createElement("track");n.src=e.src,n.kind="captions",n.srclang=e.srclang,"en"===n.srclang?n.label=e.label||"English":n.label=e.label||e.srclang&&e.srclang.toUpperCase()||"Unknown CC",r.browser.firefox?(t=this.el.textTracks.length,setTimeout(function(){this.el.appendChild(n),i(this.el.textTracks[t],e.mode||"hidden")}.bind(this),0)):r.os.android?(t=this.el.textTracks.length,this.el.appendChild(n),i(this.el.textTracks[t],e.mode||"hidden")):(this.el.appendChild(n),i(n,e.mode||"hidden"))}};e.exports={create:function(e){for(var t=0,n=e?e.length:0;t<n;t++){var i=e[t];a.call(this,i)}},add:a,get:function(){return this.el.textTracks},getEmitter:function(){if(!this._textTracksEmitter){var e=n(375);this._textTracksEmitter=new e(this.getTextTracks())}return this._textTracksEmitter},destroy:function(){}}},function(e,t,n){"use strict";var i=n(1054);e.exports={create:function(e){if(e)if(this._textTracksPolyfill){this._textTracksPolyfill.clearTracks();for(var t=0,n=e.length;t<n;t++)this._textTracksPolyfill.addTrack(e[t])}else this._textTracksPolyfill=new i({video:this,tracks:e,container:this._parentElement})},add:function(e){return this._textTracksPolyfill.addTrack(e)},get:function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill.getTextTracks()},getEmitter:function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill},destroy:function(){this._textTracksPolyfill.destroy(),this._textTracksPolyfill=null}}},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(633),a=n(1057),s=n(636),o=n(236).EventEmitterMicro,l={textTracksPolyfill:{className:"ac-video-player-text-track",view:{classDef:s,options:{}},behavior:{classDef:a}}},c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).container=t.container,n._video=t.video,n._initialize(t),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=a.prototype;return s._initialize=function(e){this._onTrackChange=this._onTrackChange.bind(this),this.el=document.createElement("div"),this.el.innerHTML=e.template||'<div class="ac-video-player-text-track"></div>',this.el.classList.add("ac-video-player-text-track-container"),this._tracks=e.tracks||[],this._textTrackComponent=r(this.el,l,{video:this._video})},s._onTrackChange=function(){this.trigger("change"),this.el.parentElement||(this._video.getRenderElement().parentElement.appendChild(this.el),this.el.firstElementChild.classList.add("is-visible"))},s.addTrack=function(e){this._tracks||(this._tracks=[]);var t=e.mode||"hidden",n=this._onTrackChange;Object.defineProperty(e,"mode",{get:function(){return t},set:function(e){t=e,n()},enumerable:!0,configurable:!0}),this._tracks.push(e),this.trigger("addtrack")},s.clearTracks=function(){this._tracks=[],this.trigger("removetrack"),this.trigger("change")},s.getTextTracks=function(){return this._tracks},s.trigger=function(t,n){return e.prototype.trigger.call(this,t,Object.assign({type:t},n||{}))},s.destroy=function(){this._textTrackComponent.destroy(),e.prototype.destroy.call(this)},a}(o);e.exports=c},function(e,t,n){"use strict";e.exports=function(e,t){return new t.classDef(e,t.options)}},function(e,t,n){"use strict";var i=function(e,t,n){return function(i){e[t](i,n)}};e.exports=function(e,t,n){return t.classDef?function(e,t,n){return new t.classDef(e,Object.assign(t.options||{},n||{}))}(e,t,n):function(e,t){var n=t.handlers||{},r={};for(var a in n)n.hasOwnProperty(a)&&e.on(a,r[a]=i(n,a,e));var s,o=t.observe;if(o){for(var l=o.update,c=o.source,u=c.on.bind(c)||c.addEventListener,d=c.off.bind(c)||c.removeEventListener,h=o.events,p=0,f=h.length,g=function(){l.call(o,e)};p<f;p++)u(a=h[p],g);s=function(){for(p=0;p<f;p++)a=h[p],d(a,g)}}return{destroy:function(){for(var t in r)r.hasOwnProperty(t)&&e.off(t,r[t]);s&&s()}}}(e,t)}},function(e,t,n){var i=n(634),r=n(1063),a=n(1064),s=function(){function e(e,t){this._view=e,this._video=t.video,this._refreshTracks=this._refreshTracks.bind(this),this._throttledRefreshCurrentCaption=r(this._refreshCurrentCaption.bind(this,300)),this._addTrackListeners()}var t=e.prototype;return t._addTrackListeners=function(){this._video.on("addtrack",this._refreshTracks),this._video.on("removetrack",this._refreshTracks),this._video.on("change",this._refreshTracks)},t._addVideoListeners=function(e){if(!e.cues){this._view.setText("");try{i.get(e.src,{complete:function(t){e.cues=a(t.responseText),this._addVideoListeners(e),this._refreshCurrentCaption()}.bind(this),error:function(e){}.bind(this)})}catch(t){}}this._video.on("loadstart",this._refreshTracks),this._video.on("timeupdate",this._throttledRefreshCurrentCaption)},t._removeVideoListeners=function(){this._video.off("loadstart",this._refreshTracks),this._video.off("timeupdate",this._throttledRefreshCurrentCaption)},t._refreshTracks=function(){var e=this._video.getTextTracks();e&&e.length&&(e=e.filter((function(e){return"showing"===e.mode}))),e.length?(this._activeTrack=e[0],this._addVideoListeners(this._activeTrack)):(this._activeTrack=null,this._removeVideoListeners()),this._refreshCurrentCaption()},t._getCurrentCaptionText=function(e){var t=this._activeTrack?this._activeTrack.cues:null;if(!t)return"";if(this._currentCaption&&this._currentCaption.startTime>=e&&this._currentCaption<=e)return this._currentCaption.text;for(var n,i=0,r=t.length;i<r;){if(t[i].startTime<=e&&t[i].endTime>=e)n=t[i];else if(t[i].startTime>=e)break;i++}return this._currentCaption=n,n?n.text:""},t._refreshCurrentCaption=function(){this._view.setText(this._getCurrentCaptionText(this._video.getCurrentTime()))},t.destroy=function(){this._removeVideoListeners()},e}();e.exports=s},function(e,t,n){"use strict";var i=n(1059),r=n(1060),a=/.*(?=:\/\/)/,s=/^.*:\/\/|\/.+$/g,o=window.XDomainRequest&&document.documentMode<10;e.exports=function(e,t){return new(o&&function(e){return!!e.match(a)&&e.replace(s,"")!==window.location.hostname}(e)?r:i)}},function(e,t,n){"use strict";var i=n(635),r=function(){this.xhr=new XMLHttpRequest};(r.prototype=i.create()).setReadyStateChangeHandlers=function(e,t,n){this.xhr.onreadystatechange=function(i){4===this.xhr.readyState&&(clearTimeout(this.timeout),this.xhr.status>=200&&this.xhr.status<300?(n(this.xhr.responseText,this.xhr.status,this.xhr),e(this.xhr,this.status)):(t(this.xhr,this.status),e(this.xhr,this.status)))}.bind(this)},e.exports=r},function(e,t,n){"use strict";var i=n(635),r=n(1061),a=function(){this.xhr=new XDomainRequest};(a.prototype=i.create()).setReadyStateChangeHandlers=function(e,t,n){this.xhr.onerror=function(){t(this.xhr,this.status),e(this.xhr,this.status)}.bind(this),this.xhr.onload=function(){n(this.xhr.responseText,this.xhr.status,this.xhr),e(this.xhr,this.status)}.bind(this)},a.prototype.send=function(e){e&&"object"===typeof e&&(e=r(e)),this.xhr.send(e)},a.prototype.setTransportHeaders=function(e){},e.exports=a},function(e,t,n){"use strict";var i=n(1062);e.exports=function(e){if("object"!==typeof e)throw new TypeError("toQueryParameters error: argument is not an object");return i(e,!1)}},function(e,t,n){"use strict";e.exports=function(e,t){var n="";if(e){var i=Object.keys(e),r=i.length-1;i.forEach((function(t,i){var a=e[t],s=(t=t.trim())+(a=null===(a=a&&"string"===typeof a?a.trim():a)?"":"="+a)+(i===r?"":"&");n=n?n.concat(s):s}))}return n&&!1!==t?"?"+n:n}},function(e,t,n){"use strict";e.exports=function(e,t){var n=null;return function(){null===n&&(e.apply(this,arguments),n=setTimeout((function(){n=null}),t))}}},function(e,t,n){"use strict";var i=n(517);e.exports=function(e){for(var t,n,r=e.split(/\n/),a=/([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}( --> ){1}([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}/,s=[],o=0,l=r.length;o<l;o++)if(n="",a.test(r[o])){for((t=r[o].split(" --\x3e "))[0]=t[0].split(":").length<3?"00:"+t[0]:t[0],t[1]=t[1].split(":").length<3?"00:"+t[1]:t[1];++o&&o<l&&!a.test(r[o]);)""!==r[o]&&(n+=r[o]+"<br />");n=n.substr(0,n.length-6),o<l&&o--,s.push({startTime:i.stringToNumber(t[0].split(" ")[0]),endTime:i.stringToNumber(t[1].split(" ")[0]),text:n})}return s}},function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=n(516),s=n(518),o=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._renderElement=document.createElement("div"),n._renderElement.classList.add("threesixty-video-container"),n.el.style.visibility="hidden",n.el.style.opacity=0,n._renderElement.appendChild(n.el),n._ac360=new s({el:n._renderElement,src:n.getMediaElement()}),n._ac360.on("error",function(){this._error="360_ERROR",this.trigger("error")}.bind(i(n))),n.sendMouseDown=n.sendMouseDown.bind(i(n)),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var o=a.prototype;return o.load=function(){this._ac360.setPos(0,0),e.prototype.load.apply(this,arguments)},o.play=function(){this.getEnded()&&this._ac360.setPos(0,0),e.prototype.play.call(this)},o.sendMouseDown=function(e){this._ac360.sendMouseDown(e)},o.getRenderElement=function(){return this._renderElement},o.get360=function(){return this._ac360},o.setControls=function(t){e.prototype.setControls.call(this,!1)},o.supportsPictureInPicture=function(){return!1},o.supportsAirPlay=function(){return!1},o.refreshSize=function(){this._ac360.refreshSize()},o.getError=function(){return this._error||e.prototype.getError.call(this)},a}(a);e.exports=o},function(e,t,n){"use strict";e.exports=n(1067)},function(e,t,n){"use strict";n(236).EventEmitterMicro;var i=n(1068).create();function r(){throw new Error("Error: Element missing. ac-fullscreen requires an element to be specified")}var a={requestFullscreen:function(e){return e||r(),i.requestFullscreen(e)},fullscreenEnabled:function(e){return e||r(),i.fullscreenEnabled(e)},fullscreenElement:function(){return i.fullscreenElement()},exitFullscreen:function(e){return e||r(),i.exitFullscreen(e)},getMode:function(){return i.mode},on:function(){return i.on.apply(i,arguments)},off:function(){return i.off.apply(i,arguments)},once:function(){return i.once.apply(i,arguments)}};e.exports=a},function(e,t,n){"use strict";var i=n(1069),r=n(1075);e.exports={create:function(){var e=r;return"webkitEnterFullscreen"in document.createElement("video")&&!("webkitRequestFullScreen"in document.createElement("div"))&&(e=i),e}}},function(e,t,n){"use strict";var i,r=n(519),a=n(236).EventEmitterMicro,s=n(639),o=n(640);r(document,"webkitbeginfullscreen",(function(e){l.trigger(s.ENTERFULLSCREEN,e)}),!0),r(document,"webkitendfullscreen",(function(e){i=void 0,l.trigger(s.EXITFULLSCREEN,e)}),!0);var l=new a;l.fullscreenEnabled=function(e){return!!e.webkitSupportsFullscreen},l.fullscreenElement=function(){return i},l.exitFullscreen=function(e){e&&"function"===typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()},l.requestFullscreen=function(e){"function"===typeof e.webkitEnterFullscreen&&e.webkitEnterFullscreen()},l.mode=o.IOS,e.exports=l},function(e,t,n){"use strict";var i=n(1071),r=n(1072),a=n(1073),s=n(1074),o={};e.exports=function e(t,n){var l,c,u;if(n=n||"div",t=t.toLowerCase(),n in o||(o[n]={}),t in(c=o[n]))return c[t];if(i(t,n))return c[t]=t;if(t in r)for(u=0;u<r[t].length;u++)if(l=r[t][u],i(l.toLowerCase(),n))return c[t]=l;for(u=0;u<s.evt.length;u++)if(l=s.evt[u]+t,i(l,n))return s.reduce(u),c[t]=l;return"window"!==n&&a.indexOf(t)?c[t]=e(t,"window"):c[t]=!1}},function(e,t,n){"use strict";var i={window:window,document:document};e.exports=function(e,t){var n;return e="on"+e,t in i||(i[t]=document.createElement(t)),e in(n=i[t])||"setAttribute"in n&&(n.setAttribute(e,"return;"),"function"===typeof n[e])}},function(e,t,n){"use strict";e.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},function(e,t,n){"use strict";e.exports=["transitionend","animationstart","animationend","animationiteration"]},function(e,t,n){"use strict";var i=["-webkit-","-moz-","-ms-"],r=["Webkit","Moz","ms"],a=["webkit","moz","ms"],s=function(){this.initialize()},o=s.prototype;o.initialize=function(){this.reduced=!1,this.css=i,this.dom=r,this.evt=a},o.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},e.exports=new s},function(e,t,n){"use strict";var i=n(519),r=n(236).EventEmitterMicro,a=n(639),s=n(640),o=new r;i(document,"fullscreenchange",(function(e){o.fullscreenElement()?function(e){o.trigger(a.ENTERFULLSCREEN,e)}(e):function(e){o.trigger(a.EXITFULLSCREEN,e)}(e)})),o.fullscreenEnabled=function(e){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},o.fullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement},o.exitFullscreen=function(e){var t;e&&"function"===typeof e.webkitExitFullscreen?e.webkitExitFullscreen():"function"===typeof document.exitFullscreen?t="exitFullscreen":"function"===typeof document.webkitExitFullscreen?t="webkitExitFullscreen":"function"===typeof document.webkitCancelFullScreen?t="webkitCancelFullScreen":"function"===typeof document.mozCancelFullScreen?t="mozCancelFullScreen":"function"===typeof document.msExitFullscreen&&(t="msExitFullscreen"),"function"===typeof document[t]&&document[t].call(document)},o.requestFullscreen=function(e){var t;"function"===typeof e.requestFullscreen?t="requestFullscreen":"function"===typeof e.webkitRequestFullscreen?t="webkitRequestFullscreen":"function"===typeof e.webkitRequestFullScreen?t="webkitRequestFullScreen":"function"===typeof e.mozRequestFullScreen?t="mozRequestFullScreen":"function"===typeof e.msRequestFullscreen&&(t="msRequestFullscreen"),"function"===typeof e[t]&&e[t].call(e)},o.mode=s.STANDARD,e.exports=o},function(e,t,n){var i=n(1077);e.exports=function(e){if(e.src=e.src||(e.is2x?"/ac/ac-video-posterframe/4.0/images/ac_video_poster_960x540_2x.jpg":"/ac/ac-video-posterframe/4.0/images/ac_video_poster_960x540.jpg"),e.useNativePoster){e.video.setPoster(e.src);var t,n=!1;return{show:function(){n=!0,t&&(e.video.setPoster(t),t=null)},hide:function(){n=!1},setSrc:function(i){n?i?e.video.setPoster(i):e.video.setPoster(e.src):t=i}}}return new i(e)}},function(e,t){var n=function(){function e(e){this.options=e,this._defaultSrc=e.src,this._initialize()}var t=e.prototype;return t._initialize=function(){var e=this.options.src;this.el=this.options.el||document.createElement("div"),this._imgElement=document.createElement("img"),this._imgElement.src=e,this._currentSrc=e,this._imgElement.alt="",this._onLoad=this._onLoad.bind(this),this._imgElement.addEventListener("load",this._onLoad),this.el.appendChild(this._imgElement),this.hide(),this.el.classList.add("ac-video-poster")},t.hide=function(){this.el.classList.add("ac-video-poster-hide")},t.show=function(){this.el.classList.remove("ac-video-poster-hide")},t.setSrc=function(e){var t=e||this._defaultSrc;t!==this._currentSrc&&(this._imgElement.style.display="none",this._imgElement.src=t,this._currentSrc=t)},t._onLoad=function(){this._imgElement.style.display=""},t.getSrc=function(){return this._imgElement.src},t.destroy=function(){this._imgElement.removeEventListener("load",this._onLoad),this._el=null},e}();e.exports=n},function(e,t,n){"use strict";e.exports={"bg-BG":"bg-BG.json","cs-CZ":"cs-CZ.json","el-GR":"el-GR.json","de-AT":"de-AT.json","de-CH":"de-CH.json","de-DE":"de-DE.json","de-LI":"de-LI.json","da-DK":"da-DK.json",en:"en.json","en-US":"en-US.json","en-AP":"en-AP.json","en-CA":"en-CA.json","en-GB":"en-GB.json","en-HK":"en-HK.json","en-IE":"en-IE.json","en-IN":"en-IN.json","en-KR":"en-KR.json","en-AU":"en-AU.json","en-NZ":"en-NZ.json","en-SG":"en-SG.json","en-ZA":"en-ZA.json",es:"es.json","es-LA":"es-LA.json","es-MX":"es-MX.json","es-ES":"es-ES.json","et-EE":"et-EE.json","fi-FI":"fi-FI.json",fr:"fr.json","fr-BE":"fr-BE.json","fr-CA":"fr-CA.json","fr-CH":"fr-CH.json","fr-FR":"fr-FR.json","hr-HR":"hr-HR.json","hu-HU":"hu-HU.json","it-IT":"it-IT.json",ja:"ja.json","ja-JP":"ja-JP.json","ko-KR":"ko-KR.json","lt-LT":"lt-LT.json","lv-LV":"lv-LV.json","nl-BE":"nl-BE.json","nl-NL":"nl-NL.json","no-NO":"no-NO.json","pl-PL":"pl-PL.json",pt:"pt.json","pt-BR":"pt-BR.json","pt-PT":"pt-PT.json","ro-RO":"ro-RO.json","ru-RU":"ru-RU.json","sk-SK":"sk-SK.json","sv-SE":"sv-SE.json","tr-TR":"tr-TR.json",zh:"zh.json","zh-CN":"zh-CN.json","zh-HK":"zh-HK.json","zh-TW":"zh-TW.json"}},function(e,t,n){"use strict";e.exports={backthirtyseconds:"Back 30 Seconds",playpause:"Play/Pause",play:"Play",pause:"Pause",togglemutevolume:"Toggle Mute Volume",mutevolume:"Mute Volume",minvolume:"Minimum Volume",adjustvolume:"Adjust Volume",fastreverse:"Fast Reverse",fastforward:"Fast Forward",fullvolume:"Full Volume",fullscreen:"Full Screen",exitfullscreen:"Exit Full Screen",airplay:"AirPlay",captionscontrol:"Closed Captions",captionsturnedon:"Closed Captions On",captionsturnedoff:"Closed Captions Off",subtitlescontrol:"Subtitles",subtitlesturnedon:"Subtitles On",subtitlesturnedoff:"Subtitles Off",sizescontrol:"Video Size",downloadcontrol:"Download Video",share:"Share",small:"Small",medium:"Medium",large:"Large",hd:"HD",ipod:"iPod/iPhone",mb:"MB",gb:"GB",tb:"TB",downloadquicktimetitle:"Get QuickTime.",downloadquicktimetext:"Download QuickTime to view this video. QuickTime is free for Mac + PC.",downloadquicktimebutton:"Download",downloadquicktimeurl:"http://www.apple.com/quicktime/download/",elapsed:"elapsed",remaining:"remaining",currenttimetext:"{minutes} minutes and {seconds} seconds",pictureinpicture:"Picture-in-Picture",exitpictureinpicture:"Exit Picture-in-Picture",closesharing:"Close Sharing",facebookshare:"Share to Facebook",twittershare:"Share to Twitter",copylink:"Copy Link",copyembed:"Copy Embed Code",copyarea:"Copy Link Text Area",selectlink:"Select Link Text",selectembed:"Select Embed Code",close:"Close",dismisscopy:"Dismiss Copy",replay:"Replay",live:"Live",livestream:"Live Streaming",newwindow:"Opens in New Window",threesixtyicon:"Return 360 Point of View to Origin",threesixtyleft:"Move 360 Point of View Left",threesixtyright:"Move 360 Point of View Right",threesixtyup:"Move 360 Point of View Up",threesixtydown:"Move 360 Point of View Down",error:"The video could not be played.",jumptochapter:"Jump to chapter",chapter:"{chaptertitle} Chapter {chaptertime}",minutesandseconds:"{minutes} minutes and {seconds} seconds",loading:"The video is loading",captionsoff:"Off"}},function(e,t){var n=function(){function e(e){this.el=document.createElement("div"),this.el.classList.add("error-state-wrapper")}var t=e.prototype;return t.setText=function(e){this._errorStr=e,this.render(),this._container=this.el.firstElementChild},t.focus=function(){this._container&&this._container.firstElementChild.focus()},t.render=function(){this.el.innerHTML='<div class="error-state-container" >\n\t\t\t<div tabindex="-1" role="text" class="error-state-message">'+this._errorStr+"</div>\n\t\t</div>\n\t\t"},e}();e.exports=n},function(e,t,n){"use strict";var i=n(431);e.exports=i.requestAnimationFrame("update")},function(e,t,n){"use strict";var i=n(1083),r=function(e){this.rafEmitter=new i,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=r.prototype;a.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),-1!==this._cancelFrameIdx&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},a._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},e.exports=r},function(e,t,n){"use strict";var i=n(1084),r=function(e){i.call(this,e)};(r.prototype=Object.create(i.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},e.exports=r},function(e,t,n){"use strict";var i,r=n(236).EventEmitterMicro,a=n(1085),s=n(1090);function o(e){e=e||{},r.call(this),this.id=s.getNewID(),this.executor=e.executor||a,this._reset(),this._willRun=!1,this._didDestroy=!1}(i=o.prototype=Object.create(r.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,r.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},e.exports=o},function(e,t,n){"use strict";var i=n(641).SharedInstance,r=n(1087);e.exports=i.share("ac-raf-executor:sharedRAFExecutorInstance","2.0.1",r)},function(e,t,n){"use strict";var i=window,r=i.AC,a=function(){var e={};return{get:function(t,n){var i=null;return e[t]&&e[t][n]&&(i=e[t][n]),i},set:function(t,n,i){return e[t]||(e[t]={}),e[t][n]="function"===typeof i?new i:i,e[t][n]},share:function(e,t,n){var i=this.get(e,t);return i||(i=this.set(e,t,n)),i},remove:function(t,n){var i=typeof n;if("string"!==i&&"number"!==i)e[t]&&(e[t]=null);else{if(!e[t]||!e[t][n])return;e[t][n]=null}}}}();r||(r=i.AC={}),r.SharedInstance||(r.SharedInstance=a),e.exports=r.SharedInstance},function(e,t,n){"use strict";var i;function r(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}n(1088),(i=r.prototype).subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(e,t){var n;for(n=0;n<this._subscriberArrayLength;n++)null!==this._subscribers[this._subscribersOrder[n]]&&!1===this._subscribers[this._subscribersOrder[n]]._didDestroy&&this._subscribers[this._subscribersOrder[n]].trigger(e,t)},i.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"===typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},i._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},i._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},e.exports=r},function(e,t,n){n(1089),function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}}()},function(e,t){Date.now||(Date.now=function(){return(new Date).getTime()})},function(e,t,n){"use strict";var i=n(641).SharedInstance,r=function(){this._currentID=0};r.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},e.exports=i.share("ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance","1.0.3",r)},function(e,t,n){"use strict";var i=n(431);e.exports=i.cancelAnimationFrame("update")},function(e,t,n){"use strict";var i=n(432);e.exports=function(){var e=i.getWindow();return"devicePixelRatio"in e&&e.devicePixelRatio>=1.5}},function(e,t,n){"use strict";var i=n(340).original,r=n(1094).original,a=n(433);function s(){return!i()&&!r()}e.exports=a(s),e.exports.original=s},function(e,t,n){"use strict";var i=n(340).original,r=n(432),a=n(433);function s(){var e=r.getWindow(),t=e.screen.width;return e.orientation&&e.screen.height<t&&(t=e.screen.height),!i()&&t>=600}e.exports=a(s),e.exports.original=s},function(e,t,n){"use strict";e.exports=[{name:"small",minWidth:0,maxWidth:569},{name:"medium",minWidth:570,maxWidth:779},{name:"large",minWidth:780,maxWidth:1/0}]},function(e,t,n){"use strict";e.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","ended","ratechange","durationchange","volumechange","addtrack","change","removetrack"]},function(e,t,n){"use strict";e.exports=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting","canplay","canplaythrough"]},function(e,t,n){"use strict";var i=n(236).EventEmitterMicro,r=function(e){i.call(this),this.el=e.el||document.body,this.breakpoints=e.breakpoints.sort((function(e,t){return e.minWidth-t.minWidth})),this._player=e.player,this._breakPointsLength=this.breakpoints.length,this._addClasses=e.addClass,this._addEventListeners(),this._onResize()},a=i.prototype,s=r.prototype=Object.create(a);s.constructor=r,s._addEventListeners=function(){var e=this;this._boundOnResize=function(){e._onResize.apply(e,arguments)},window.addEventListener("resize",this._boundOnResize),window.addEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._removeEventListeners=function(){window.removeEventListener("resize",this._boundOnResize),window.removeEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._onResize=function(e){var t=this.el.clientWidth,n=this._currentBreakpoint;if(!1!==e&&this._player.refreshSize(),!n||!r.widthInBreakpoint(t,n)){var i=r.getBreakpointFromWidth(t,this.breakpoints,n,this._breakPointsLength);this._addClasses&&(this._currentBreakpoint&&this.el.classList.remove(n.name),this.el.classList.add(i.name)),this._currentBreakpoint=i,this.trigger("breakpointchange",i)}},s.getCurrentBreakpoint=function(){return this._currentBreakpoint},s.refresh=function(){this._onResize(!1)},s.destroy=function(){this._removeEventListeners(),a.destroy.call(this)},r.getBreakpointFromElement=function(e,t){return r.getBreakpointFromWidth(e.clientWidth,t)},r.getBreakpointFromWidth=function(e,t,n,i){for(var r=0,a=i||t.length;r<a;r++){var s=t[r];if(s!==n&&e>=s.minWidth&&e<=s.maxWidth)return s}return null},r.widthInBreakpoint=function(e,t){return e>=t.minWidth&&e<=t.maxWidth},e.exports=r},function(e,t,n){"use strict";var i,r;e.exports=function(e){return e.threesixty?(i||(i=n(1100)),new i(e)):(r||(r=n(643)),new r(e))}},function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(643),a=["controls-toggle-mute-volume-button","controls-volume-level-indicator"],s=function(e){var t,n;function r(t){var n,i=(n=e.call(this,t)||this)._player.get360();return n._arrowControls=!i||i.arrowControls,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=r.prototype;return s._bindMethods=function(){e.prototype._bindMethods.call(this),this._onLeftArrowUp=this._onLeftArrowUp.bind(this),this._onRightArrowUp=this._onRightArrowUp.bind(this),this._onDownArrowUp=this._onDownArrowUp.bind(this),this._onUpArrowUp=this._onUpArrowUp.bind(this)},s._addEventListeners=function(){e.prototype._addEventListeners.call(this),this._keyboard.onUp(37,this._onLeftArrowUp),this._keyboard.onUp(39,this._onRightArrowUp),this._keyboard.onUp(38,this._onUpArrowUp),this._keyboard.onUp(40,this._onDownArrowUp)},s._removeEventListeners=function(){e.prototype._removeEventListeners.call(this),this._keyboard.offUp(37,this._onLeftArrowUp),this._keyboard.offUp(39,this._onRightArrowUp),this._keyboard.offUp(38,this._onUpArrowUp),this._keyboard.offUp(40,this._onDownArrowUp)},s._onLeftArrowDown=function(t){if(t.target.classList.contains("controls-progress-indicator"))return this._triggerKeyboardInteraction(),void e.prototype._onLeftArrowDown.call(this,t);this._arrowControls.leftArrowDown(t)},s._onRightArrowDown=function(t){if(t.target.classList.contains("controls-progress-indicator"))return this._triggerKeyboardInteraction(),void e.prototype._onRightArrowDown.call(this,t);this._arrowControls.rightArrowDown(t)},s._onUpArrowDown=function(t){if(t.target.classList.contains(a[0])||t.target.classList.contains(a[1]))return this._triggerKeyboardInteraction(),void e.prototype._onUpArrowDown.call(this,t);t.originalEvent.preventDefault(),this._arrowControls.upArrowDown(t)},s._onDownArrowDown=function(t){if(t.target.classList.contains(a[0])||t.target.classList.contains(a[1]))return this._triggerKeyboardInteraction(),void e.prototype._onDownArrowDown.call(this,t);t.originalEvent.preventDefault(),this._arrowControls.downArrowDown(t)},s._onLeftArrowUp=function(e){e.target.classList.contains("controls-progress-indicator")?this._triggerKeyboardInteraction():(e.originalEvent.preventDefault(),this._arrowControls.leftArrowUp(e))},s._onRightArrowUp=function(e){e.target.classList.contains("controls-progress-indicator")?this._triggerKeyboardInteraction():(e.originalEvent.preventDefault(),this._arrowControls.rightArrowUp(e))},s._onUpArrowUp=function(e){e.target.classList.contains("controls-progress-indicator")?this._triggerKeyboardInteraction():this._arrowControls.upArrowUp(e)},s._onDownArrowUp=function(e){e.target.classList.contains("controls-progress-indicator")?this._triggerKeyboardInteraction():this._arrowControls.downArrowUp(e)},s._onKeyboardInteraction=function(e){},s.destroy=function(){e.prototype.destroy.call(this)},r}(r);e.exports=s},function(e,t,n){"use strict";var i=["keyLocation"];function r(e){var t;for(t in this.originalEvent=e,e)-1===i.indexOf(t)&&"function"!==typeof e[t]&&(this[t]=e[t]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}r.prototype={preventDefault:function(){if("function"===typeof this.originalEvent.preventDefault)return this.originalEvent.preventDefault();this.originalEvent.returnValue=!1},stopPropagation:function(){return this.originalEvent.stopPropagation()}},e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._controlsVisible=t.controlsVisible,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._bindMethods=function(){e.prototype._bindMethods.call(this),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onClick=this._onClick.bind(this)},a._addEventListeners=function(){this._controls.el.addEventListener("touchstart",this._onTouchStart,{passive:!1}),this._controls.el.addEventListener("click",this._onClick),this._controls.el.addEventListener("focusin",this._onFocusIn),this._controls.el.addEventListener("focusout",this._onFocusOut)},a._removeEventListeners=function(){this._controls.el.removeEventListener("touchstart",this._onTouchStart),this._controls.el.removeEventListener("touchend",this._onTouchEnd),this._controls.el.removeEventListener("click",this._onClick),this._controls.el.removeEventListener("focusin",this._onFocusIn),this._controls.el.removeEventListener("focusout",this._onFocusOut)},a._onDragging=function(t){e.prototype._onDragging.call(this)},a._shouldIgnoreUserInteraction=function(e){return!1},a._onClick=function(e){e.target!==this._player.controls.compass.compassView&&(this._controlsVisible()?this._isActiveArea(e.target)||(this._hideControls(),this._hideCompass()):this._onUserInteraction(e))},a._onTouchStart=function(e){e.target!==this._player.controls.playButtonElement&&e.target!==this._controls.el.firstElementChild&&e.target!==this._player.controls.compass.compassView&&e.target!==this._player.controls.playButtonElement||(document.addEventListener("touchend",this._onTouchEnd),window.addEventListener("touchmove",this._onDragging),this._showCompass(),this._touchDownTime=Date.now(),this._sendMouseDown(e))},a._onTouchEnd=function(e){document.removeEventListener("touchend",this._onTouchEnd),window.removeEventListener("touchmove",this._onDragging),this._onMouseUp(e)},r}(n(648));e.exports=r},function(e,t,n){"use strict";var i=n(649),r=n(650),a=function(e,t){var n=e.getAttribute("data-original-"+t);n||(n=e.getAttribute(t)||"",e.setAttribute("data-original-"+t,n))};e.exports=function(e,t){if(r.isFocusableElement(e,t))a(e,"tabindex"),e.setAttribute("tabindex","-1");else for(var n=r.getTabbableElements(e,t),s=n.length;s--;)a(n[s],"tabindex"),n[s].setAttribute("tabindex","-1");a(e,i.HIDDEN),e.setAttribute(i.HIDDEN,"true")}},function(e,t,n){"use strict";e.exports={selectors:["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","[tabindex]","[contenteditable]"].join(","),nodeName:{INPUT:"input",SELECT:"select",TEXTAREA:"textarea",BUTTON:"button",OPTGROUP:"optgroup",OPTION:"option",MENUITEM:"menuitem",FIELDSET:"fieldset",OBJECT:"object",A:"a"}}},function(e,t,n){"use strict";var i=n(1106),r=n(649),a="data-original-",s=function(e,t){var n=e.getAttribute(a+t);null!==n&&(""===n?i(e,t):e.setAttribute(t,n),i(e,a+t))};e.exports=function(e){s(e,"tabindex"),s(e,r.HIDDEN);for(var t=e.querySelectorAll("["+a+"tabindex]"),n=t.length;n--;)s(t[n],"tabindex")}},function(e,t,n){"use strict";e.exports=function(e,t){var n;n=e instanceof NodeList?e:[].concat(e),t=Array.isArray(t)?t:[].concat(t),n.forEach((function(e){t.forEach((function(t){e.removeAttribute(t)}))}))}},function(e,t){e.exports={major:4,minor:4,patch:3,prerelease:2,toString:function(){return"4.4.3-2 (75c3017)"},toArray:function(){return[4,4,3]}}},function(e,t,n){"use strict";var i=n(340)();e.exports=function(e){var t;if(e?arguments.length>1&&(e=Object.assign.apply(null,Array.prototype.slice.apply(arguments))):e={},e.components||(e.components=n(652)),"undefined"===typeof e.controls&&(e.controls=!0),e.controlsImplementation||(e.controlsImplementation=n(666)),e.controlsFactory||(e.controlsFactory=n(1211)({controlsImplementation:e.controlsImplementation,components:e.components,template:e.controlsTemplate})),("undefined"!==typeof e.urlOptimizer&&!0===e.urlOptimizer||"true"===e.urlOptimizer)&&(e.urlOptimizer=n(1212)),e.sources||e.src?e.sources||(e.sources=e.src?[e.src]:[]):e.sources=[],e.autoplay=void 0!==e.autoplay?e.autoplay:i,e.controlsTimeoutDuration||(e.controlsTimeoutDuration=3e3),e.threesixty){e.threesixtyElementsTimeoutDuration||(e.threesixtyElementsTimeoutDuration=3e3);var r=n(1218);t=new r(e)}else{var a=n(515);t=new a(e)}var s={};return e.sharing&&(s.sharing=Object.assign({},e.sharing)),e.thumbnails&&(s.thumbnails=Object.assign({},e.thumbnails)),e.endState&&(s.endState=Object.assign({},e.endState)),e.sources&&e.sources.length&&(e.autoplay||!e.preload||"auto"===e.preload||!0===e.preload?t.load(e.sources,e.textTracks,e.startTime,s):t.setSrc(e.sources[0])),t}},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){return e.call(this,t,n)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r.prototype.setState=function(t){e.prototype.setState.call(this,t),"on"===this._currentState?this._focusTarget.setAttribute("aria-pressed",!0):this._focusTarget.setAttribute("aria-pressed",!1)},r}(n(654));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(375),a=n(434),s=n(1111),o=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).el=t,n._keyboard=new a(n.el),n._addEventListeners(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var o=r.prototype;return o._addEventListeners=function(){this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this.el.addEventListener("click",this._onClick),this._keyboard.onDown(s.ARROW_UP,this._onKeyDown),this._keyboard.onDown(s.ARROW_DOWN,this._onKeyDown)},o._removeEventListeners=function(){this.el.removeEventListener("click",this._onClick),this._keyboard.onDown(s.ARROW_UP,this._onKeyDown),this._keyboard.onDown(s.ARROW_DOWN,this._onKeyDown)},o.setItems=function(e){var t,n=this;this.el.innerHTML="",e.forEach((function(e){var i=document.createElement("li");i.setAttribute("role","radio"),"showing"===e.mode?(i.classList.add(e.mode),i.setAttribute("aria-checked","true"),i.setAttribute("tabIndex",0),t=i):(i.setAttribute("aria-checked","false"),i.setAttribute("tabIndex",-1)),i.innerText=e.label,i.acvMetadata=e,n.el.appendChild(i)})),t&&t.focus()},o._onKeyDown=function(e){var t=e.target,n=!1;parseInt(e.keyCode)===s.ARROW_DOWN?n=t.nextSibling:parseInt(e.keyCode)===s.ARROW_UP&&(n=t.previousSibling),n&&(this.trigger("ItemSelected",n.acvMetadata),e.preventDefault(),e.stopPropagation())},o._onClick=function(e){this.el!==e.target&&this.el.contains(e.target)&&this.trigger("ItemSelected",e.target.acvMetadata)},o.destroy=function(){this._removeEventListeners()},r}(r);e.exports=o},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},function(e,t,n){"use strict";var i=n(1113).Slider,r=n(1121),a=function(e,t){if(this.el=e,this._min=t.min||0,this._max=t.max||1,t.mixins)for(var n=t.mixins.slice(0);n.length;)Object.assign(this,n.pop());this._slider=new i(this.el,{template:t.template,min:this._min,max:this._max,step:isNaN(+this.el.getAttribute("step"))?this.el.getAttribute("step"):+this.el.getAttribute("step"),value:void 0!==t.value?t.value:+this.el.getAttribute("value"),orientation:t.orientation,renderedPosition:!0,keyboardContext:this.el}),this._onFocusChange=this._onFocusChange.bind(this),this._setHoveringValue=this._setHoveringValue.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onChapterClicked=this._onChapterClicked.bind(this),this._onChapterFocusIn=this._onChapterFocusIn.bind(this),this._onChapterFocusOut=this._onChapterFocusOut.bind(this),this._slider.el.addEventListener("blur",this._onFocusChange),this._slider.el.addEventListener("focus",this._onFocusChange),this._slider.el.addEventListener("mouseout",this._onFocusChange),this._onGrab=this._onGrab.bind(this),this._onRelease=this._onRelease.bind(this),this._slider.on("grab",this._onGrab),this._slider.on("release",this._onRelease),this._scrubbedEl=this.el.querySelector(".ac-slider-scrubbed"),this._notchEl=this.el.querySelector(".ac-slider-hover-notch"),this._chapterContainer=this.el.querySelector(".ac-slider-chapters-track"),this._axTrack=this.el.querySelector(".ac-slider-ax-track"),this._bufferedTrack=this.el.querySelector(".ac-slider-buffered"),this._notchEl&&(this._slider.el.addEventListener("mouseover",this._onMouseOver),this._slider.el.addEventListener("mouseleave",this._onMouseLeave),this._slider.el.addEventListener("mousemove",this._setHoveringValue)),this._axTrack&&(this._axTrack.tabIndex=0,this._slider.el.tabIndex=-1,this._slider.el.setAttribute("aria-hidden",""),this._slider.el.removeAttribute("aria-label"),this._slider.el.removeAttribute("role")),t.value&&requestAnimationFrame(function(){this._slider&&this.setValue(t.value)}.bind(this))},s=a.prototype;s.on=function(){return this._slider.on.apply(this._slider,arguments)},s.off=function(){return this._slider.off.apply(this._slider,arguments)},s.trigger=function(){return this._slider.trigger.apply(this._slider,arguments)},s.setValue=function(e){return this._axTrack&&this._axTrack.setAttribute("aria-valuenow",e),this._slider.setValue.call(this._slider,e)},s.setAriaValueText=function(e){this._axTrack?this._axTrack.setAttribute("aria-valuetext",e):this._slider.el.setAttribute("aria-valuetext",e)},s.setMin=function(e){this._min=e,this._slider.setMin(e)},s.setMax=function(e){this._max=e,this._slider.setMax(e)},s._onMouseOver=function(){this._slider.el.classList.add("hover")},s._onMouseLeave=function(){this._slider.el.classList.remove("hover")},s._onFocusChange=function(){setTimeout(function(){this.trigger("focuschange")}.bind(this),0)},s.isFocused=function(){return this._slider.el===document.activeElement&&this._hasFocusOutline()},s._hasFocusOutline=function(){return"none"!==getComputedStyle(this._slider.el).getPropertyValue("outline-style")},s.getValue=function(){return this._slider.getValue.apply(this._slider,arguments)},s.getMax=function(){return this._max},s.setScrubbedValue=function(){this._chapters&&this._checkCollisionsSetValue(),"horizontal"===this._slider.getOrientation()?this._scrubbedEl.style.left=this._slider.thumbElement.style.left:this._scrubbedEl.style.bottom=this._slider.thumbElement.style.bottom},s.setBufferedValue=function(e){this._bufferedTrack.style.left=e+"%"},s._checkCollisionsSetValue=function(){for(var e=0;e<this._chapters.length;e++){var t=this._chapters[e].el.children[0],n=parseInt(this._chapters[e].el.style.left)<this.getValue()/this.getMax()*100;this._setInlineBackgroundColor(!n,t)}},s._setHoveringValue=function(e){var t=this.getClientXValue(e,this._notchEl),n=t>this.getValue();this._notchEl.style.left=t/this.getMax()*100+"%",this._setInlineBackgroundColor(n,this._notchEl)},s._setInlineBackgroundColor=function(e,t){e?t.classList.remove("invert-element"):t.classList.add("invert-element")},s._onChapterClicked=function(e){this.trigger("chapter:click",e),this._slider.thumbElement.style.pointerEvents=""},s._onChapterFocusIn=function(e){this._notchEl.classList.add("hidden"),this._slider.thumbElement.style.pointerEvents="none",this.trigger("chapter:focusin",e)},s._onChapterFocusOut=function(e){this._notchEl.classList.remove("hidden"),this._slider.thumbElement.style.pointerEvents="",this.trigger("chapter:focusout",e)},s._onGrab=function(){this.forceCursorPointer(),this.setScrubbedValue()},s._onRelease=function(){this.disableForcedCursorPointer(),this.setScrubbedValue()},s.setChapters=function(e){var t=this;this._chapters&&this._chapters.forEach((function(e){e.off("click",t._onChapterClicked),e.off("focusin",t._onChapterFocusIn),e.off("focusout",t._onChapterFocusOut),e.off("mouseover",t._onChapterFocusIn),e.off("mouseout",t._onChapterFocusOut),e.destroy()})),this._chapterContainer.innerHTML="",this._chapters=[];for(var n=0;n<e.length;n++)if(e[n].startTime<100){var i=new r(e[n]);i.on("click",this._onChapterClicked),i.on("focusin",this._onChapterFocusIn),i.on("focusout",this._onChapterFocusOut),i.on("mouseover",this._onChapterFocusIn),i.on("mouseout",this._onChapterFocusOut),this._chapters.push(i),this._chapterContainer.appendChild(i.el)}},s.show=function(){this.el.classList.remove("ac-slider-inactive")},s.hide=function(){this.el.classList.add("ac-slider-inactive")},s.setState=function(e){this.el.classList.add(e)},s.clearState=function(e){this.el.classList.remove(e)},s.getClientXValue=function(e,t){return this._slider.getClientXValue(e,t)},s.destroy=function(){var e=this;this._chapters&&this._chapters.forEach((function(t){t.off("click",e._onChapterClicked),t.off("focusin",e._onChapterFocusIn),t.off("focusout",e._onChapterFocusOut),t.off("mouseover",e._onChapterFocusIn),t.off("mouseout",e._onChapterFocusOut),t.destroy()})),this._slider.el.removeEventListener("mousemove",this._setHoveringValue),this._slider.el.removeEventListener("mouseleave",this._onMouseOver),this._slider.el.removeEventListener("mouseout",this._onMouseLeave),this._slider.el.removeEventListener("blur",this._onFocusChange),this._slider.el.removeEventListener("focus",this._onFocusChange),this._slider.el.removeEventListener("mouseout",this._onFocusChange),this._slider.off("grab",this._onGrab),this._slider.off("release",this._onRelease),this._slider.destroy(),this._slider=null},e.exports=a},function(e,t,n){"use strict";e.exports.Slider=n(1114)},function(e,t,n){"use strict";var i=n(236).EventEmitterMicro,r=n(1115),a=n(434),s=n(1120),o={num:37,string:"ArrowLeft"},l={num:39,string:"ArrowRight"},c={num:40,string:"ArrowDown"},u=[o,l,c,l],d=function(e){if(e.which)return e.which;for(var t=e.key?e.key:e.code,n=0,i=u.length;n<i;n++)if(u[n].string===t)return u[n].num;return-1},h={min:0,max:1,step:1,value:0,orientation:"horizontal",renderedPosition:!1,template:s,keyboardMaxStepPercentage:.05,keyboardStepMultiplier:1.25,containerClass:"ac-slider-container",grabbedClass:"ac-slider-grabbed"},p=Object.keys(h),f=function(e,t){this.options=Object.assign({},h,t),this.model=Object.create(this.options),this.el=e;var n=void 0!==this.options.keyboardContext?this.options.keyboardContext:this.el;null!==n&&(this._keyboard=new a(n),this._keyDown={}),e.classList.add(this.model.containerClass),e.innerHTML=this.model.template,i.call(this),this._initialize()},g=f.prototype=Object.create(i.prototype);g._addGrabClass=function(){this.el.classList.add(this.model.grabbedClass)},g._removeGrabClass=function(){this.el.classList.remove(this.model.grabbedClass)},g._addEventListeners=function(){this._addEventListener(this.el,"mousedown",this._onMouseDown),this._addEventListener(this.el,"touchstart",this._onTouchStart),this._addEventListener(this.el,"mouseover",this._onMouseOver),this._addEventListener(this.el,"mouseleave",this._onMouseLeave),this._keyboard&&("horizontal"===this.model.orientation?(this._keyboard.onDown(l.num,this.stepUp),this._keyboard.onDown(o.num,this.stepDown)):(this._keyboard.onDown(c.num,this.stepDown),this._keyboard.onDown(38,this.stepUp)))},g._addEventListener=function(e,t,n,i){e.addEventListener(t,n,i)},g._bindMethods=function(){this._addGrabClass=this._addGrabClass.bind(this),this._removeGrabClass=this._removeGrabClass.bind(this),this.stepDown=this.stepDown.bind(this),this.stepUp=this.stepUp.bind(this),this._triggerRelease=this._triggerRelease.bind(this),this._preventDefault=this._preventDefault.bind(this),this._onMouseDown=this._bindMethod(this._onMouseDown,this),this._onTouchStart=this._bindMethod(this._onTouchStart,this),this._onMouseOver=this._bindMethod(this._onMouseOver,this),this._onMouseLeave=this._bindMethod(this._onMouseLeave,this),this._onTouchEnd=this._bindMethod(this._onTouchEnd,this),this._onMouseUp=this._bindMethod(this._onMouseUp,this),this._onMouseMove=this._bindMethod(this._onMouseMove,this),this._onTouchMove=this._bindMethod(this._onTouchMove,this)},g._bindMethod=function(e,t){return e.bind(t)},g._correctValueMinMax=function(e,t,n){return e>n&&(e=n),e<t&&(e=t),e},g._calculateStepsToValue=function(e,t){return Math.abs(e-t)},g._calculateMaxSteps=function(e,t){return Math.abs(t-e)},g._calculateStepsEqualToPercentage=function(e,t){return e/100*t},g._calculateNextStepInRange=function(e,t,n,i){var r=this._calculateMaxSteps(t,n),a=this._calculateStepsToValue(e,t),s=t+Math.floor(r/i)*i;return Math.min(s,t+Math.round(a/i)*i)},g._dispatchEvent=function(e,t){e.dispatchEvent(new CustomEvent(t))},g.disableUserControls=function(){this._removeEventListeners()},g.enableUserControls=function(){this._addEventListeners()},g._getNextValue=function(e,t,n,i){return e=this._correctValueMinMax(e,t,n),"auto"!==i&&(e=this._calculateNextStepInRange(e,t,n,i)),e},g.getOrientation=function(){return this.model.orientation},g.getValue=function(){return this.model.value},g.getMin=function(){return this.model.min},g.getMax=function(){return this.model.max},g.getStep=function(){return this.model.step},g.getClientXValue=function(e,t){var n=this._getClientXFromEvent(e),i=null!==t?r.getDimensions(t||this.thumbElement):{width:0,height:0},a=r.getDimensions(this.runnableTrackElement),s=(n-this.runnableTrackElement.getBoundingClientRect().left-Math.round(i.width/2))/(a.width-i.width)*100,o=this._calculateMaxSteps(this.getMin(),this.getMax()),l=this._calculateStepsEqualToPercentage(s,o);return this.getMin()+l},g.getClientYValue=function(e){var t=this._getClientYFromEvent(e),n=r.getDimensions(this.thumbElement),i=r.getDimensions(this.runnableTrackElement),a=r.getViewportPosition(this.runnableTrackElement,this.model.renderedPosition),s=(i.height-n.height-(t-a.top-n.height/2))/(i.height-n.height)*100,o=this._calculateMaxSteps(this.model.min,this.model.max),l=this._calculateStepsEqualToPercentage(s,o);return this.model.min+l},g.getClientValue=function(e){return e=e.originalEvent||e,"horizontal"===this.model.orientation?this.getClientXValue(e):this.getClientYValue(e)},g._getClientXFromEvent=function(e){return e.touches?e.touches[0].clientX:e.clientX},g._getClientYFromEvent=function(e){return e.touches?e.touches[0].clientY:e.clientY},g._initialize=function(){this._setNodeReferences(),this.setValue(this.model.value),this._bindMethods(),this._addEventListeners()},g._onMouseLeave=function(){this._preventDocumentMouseUpDispatch=!1},g._onMouseDown=function(e){this._addGrabClass(),this._addEventListener(document,"mouseup",this._onMouseUp),this._addEventListener(document,"mousemove",this._onMouseMove);var t=this.getClientValue(e);this.trigger("grab",this.getValue()),this.setValue(t)},g._onMouseUp=function(){this._removeGrabClass(),this._removeEventListener(document,"mouseup",this._onMouseUp),this._removeEventListener(document,"mousemove",this._onMouseMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"mouseup")},g._onMouseOver=function(){this._preventDocumentMouseUpDispatch=!0},g._onTouchEnd=function(){this._removeGrabClass(),this._removeEventListener(document,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchmove",this._onTouchMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"touchend")},g._onTouchStart=function(e){this._addGrabClass();var t=this.getClientValue(e);this._addEventListener(document,"touchend",this._onTouchEnd),this._addEventListener(document,"touchmove",this._onTouchMove,{passive:!1}),this.trigger("grab",this.getValue()),this.setValue(t)},g._onMouseMove=function(e){var t=this.getClientValue(e);this.setValue(t)},g._onTouchMove=function(e){e.preventDefault&&e.preventDefault();var t=this.getClientValue(e);this.setValue(t)},g._getElementOrientationOffsetValue=function(e,t){return"horizontal"===t?r.getDimensions(e).width:r.getDimensions(e).height},g._getAvailableRunnableTrack=function(e,t){return e-this._getElementOrientationOffsetValue(this.thumbElement,t)},g._getPercentageByValue=function(e,t){return(e=this._calculateStepsToValue(e,this.getMin()))/this._calculateMaxSteps(this.getMin(),this.getMax())*100},g._getPercentageOfRunnableTrack=function(e){var t=this.getOrientation(),n=this._getElementOrientationOffsetValue(this.runnableTrackElement,t),i=this._getAvailableRunnableTrack(n,t);return this._getPercentageByValue(e,this.getMax())/100*i/n*100},g._onChange=function(e){var t=this._getPercentageOfRunnableTrack(e);isNaN(t)||("horizontal"===this.getOrientation()?this.thumbElement.style.left=t+"%":this.thumbElement.style.bottom=t+"%",this.trigger("change",this.getValue()))},g._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(document,"touchend",this._onMouseUp)},g._removeEventListener=function(e,t,n){e.removeEventListener(t,n)},g._setNodeReferences=function(){this.runnableTrackElement=this.el.querySelector(".ac-slider-runnable-track"),this.thumbElement=this.el.querySelector(".ac-slider-thumb")},g.setOrientation=function(e){this._set("orientation",e)},g._triggerRelease=function(e){this._preventDefault(e),this.trigger("release",this.getValue()),this._keyDown[d(e)]=0},g._preventDefault=function(e){e.preventDefault(),e.stopPropagation()},g._step=function(e,t){this._preventDefault(e),this.el.focus();var n=this._keyDown[d(e)]||0;n?Math.abs(this._keyDown[d(e)])<Math.abs(this.model.max*this.model.keyboardMaxStepPercentage)&&(n*=this.model.keyboardStepMultiplier):(this.trigger("grab",this.getValue()),n="auto"!==(n=this.getStep())?n:this._cachedMaxStep,t||(n*=-1),this._keyboard.onceUp(d(e),this._triggerRelease)),this._keyDown[d(e)]=n,this.setValue(this.getValue()+n)},g.stepUp=function(e){this._step(e,!0)},g.stepDown=function(e){this._step(e,!1)},g.setValue=function(e){e=this._getNextValue(e,this.getMin(),this.getMax(),this.getStep()),this._set("value",e),this.el.setAttribute("aria-valuenow",e),this._onChange(e)},g.setMin=function(e){this._set("min",e),this.el.setAttribute("aria-valuemin",e)},g.setMax=function(e){this._set("max",e),this.el.setAttribute("aria-valuemax",e),this._cachedMaxStep=e/100},g.setStep=function(e){this._set("step",e)},g._set=function(e,t){if(p.indexOf(e)>-1&&this.model[e]!==t){var n=this.model[e];this.model[e]=t,this.trigger("change:model:"+e,{previous:n,current:t})}},g._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(this.el,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchend",this._onMouseUp),"horizontal"===this.model.orientation?(this._keyboard.offDown(l.num,this.stepUp),this._keyboard.offDown(o.num,this.stepDown),this._keyboard.offUp(o.num,this._triggerRelease),this._keyboard.offUp(l.num,this._triggerRelease)):(this._keyboard.offDown(c.num,this.stepDown),this._keyboard.offDown(38,this.stepUp),this._keyboard.offUp(c.num,this._triggerRelease),this._keyboard.offUp(38,this._triggerRelease))},g.destroy=function(){this._removeEventListeners(),this._keyboard&&this._keyboard.destroy(),i.prototype.destroy.call(this)},e.exports=f},function(e,t,n){"use strict";e.exports={getContentDimensions:n(1116),getDimensions:n(377),getMaxScrollPosition:n(1117),getPagePosition:n(655),getPercentInViewport:n(656),getPixelsInViewport:n(657),getPosition:n(1118),getScrollPosition:n(520),getViewportPosition:n(658),isInViewport:n(1119)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=1;return t&&(n=e.getBoundingClientRect().width/e.offsetWidth),{width:e.scrollWidth*n,height:e.scrollHeight*n}}},function(e,t,n){"use strict";function i(e,t){return"x"===t?e.scrollWidth-e.clientWidth:e.scrollHeight-e.clientHeight}e.exports=function(e,t){var n=typeof e;return t="string"===n?e:t,e=e&&"string"!==n&&e!==window?e:document.documentElement,t&&/^[xy]$/i.test(t)?i(e,t):{x:i(e,"x"),y:i(e,"y")}}},function(e,t,n){"use strict";var i=n(377);e.exports=function(e,t){var n,r,a,s,o,l,c;return t?(r=(n=e.getBoundingClientRect()).top,a=n.left,s=n.width,o=n.height,e.offsetParent&&(r-=(l=e.offsetParent.getBoundingClientRect()).top,a-=l.left)):(c=i(e,t),r=e.offsetTop,a=e.offsetLeft,s=c.width,o=c.height),{top:r,right:a+s,bottom:r+o,left:a}}},function(e,t,n){"use strict";var i=n(656),r=n(377);e.exports=function(e,t,n){var a=i(e,t);return n=function(e,t,n){var i={x:0,y:0};if(!t)return i;var a,s=typeof t;return t="number"===s||"string"===s?{x:t,y:t}:Object.assign(i,t),Object.keys(i).forEach((function(i){var s=t[i];("string"===typeof s||s>1)&&(a=a||r(e,n),s=(parseInt(s,10)||0)/("x"===i?a.width:a.height)),t[i]=s})),t}(e,n,t),a.y>0&&a.y>=n.y&&a.x>0&&a.x>=n.x}},function(e,t){e.exports='<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-thumb"></div>\n</div>'},function(e,t,n){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=n(236).EventEmitterMicro,s=n(338),o=n(339),l=function(e){var t,n;function a(t){var n;(n=e.call(this)||this).el=document.createElement("button"),n.el.className="ac-slider-chapter-container";var r=t.titles.find((function(e){return"en"===e.language}))||t.titles[0],a=o.getTranslation().chapter;n._chapterMarker=document.createElement("div"),n._chapterMarker.classList.add("ac-slider-chapter-marker"),"0%"===t.startTimeInPercentage&&n.el.classList.add("hidden-chapter"),n.el.style.left=t.startTimeInPercentage,n.el.setAttribute("data-acv-chapter-time",t["start-time"]),n.el.tabIndex=0,n._chapterData=t,n.el.appendChild(n._chapterMarker);var l=t["start-time"],c=Math.floor(l/60),u=Math.ceil(l%60);return n._span=document.createElement("span"),n._span.innerText=s(a,{chaptertitle:r.title,chaptertime:s(o.getTranslation().currenttimetext,{minutes:c,seconds:u})}),n.el.firstElementChild.appendChild(n._span),n._onClick=n._onClick.bind(i(n)),n._onMouseOver=n._onMouseOver.bind(i(n)),n._onMouseOut=n._onMouseOut.bind(i(n)),n._onFocusIn=n._onFocusIn.bind(i(n)),n._onFocusOut=n._onFocusOut.bind(i(n)),n._onMouseDown=n._onMouseDown.bind(i(n)),n.el.addEventListener("click",n._onClick),n.el.addEventListener("focusin",n._onFocusIn),n.el.addEventListener("focusout",n._onFocusOut),n.el.addEventListener("mouseover",n._onMouseOver),n.el.addEventListener("mouseout",n._onMouseOut),n.el.addEventListener("mousemove",n._onMouseMove),n.el.addEventListener("mousedown",n._onMouseDown),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var l=a.prototype;return l._onClick=function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click",this._chapterData)},l._onMouseOver=function(e){e.stopPropagation(),this.trigger("mouseover",this._chapterData)},l._onMouseOut=function(e){this.trigger("mouseout",this._chapterData)},l._onMouseMove=function(e){e.stopPropagation()},l._onMouseDown=function(e){e.stopPropagation()},l._onFocusIn=function(e){this.trigger("focusin",this._chapterData)},l._onFocusOut=function(e){this.trigger("focusout",this._chapterData)},l.destroy=function(){this.el.removeEventListener("click",this._onClick),this.el.removeEventListener("focusin",this._onFocusIn),this.el.removeEventListener("focusout",this._onFocusOut),this.el.removeEventListener("mouseover",this._onMouseOver),this.el.removeEventListener("mouseout",this._onMouseOut),this.el.removeEventListener("mousemove",this._onMouseMove)},a}(a);e.exports=l},function(e,t){var n=function(){function e(e){this.el=e}var t=e.prototype;return t.show=function(){this.el.classList.remove("hidden")},t.hide=function(){this.el.classList.add("hidden")},t.destroy=function(e){},e}();e.exports=n},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._updateState(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._updateState=function(){this._view.setState(this._player.getMuted()?"on":"off")},a._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("volumechange",this._updateState)},a._onClick=function(){this._player.getMuted()?(this._player.setMuted(!1),0===this._player.getVolume()&&this._player.setVolume(.1)):this._player.setMuted(!0)},a.destroy=function(){this._player.off("volumechange",this._updateState),e.prototype.destroy.call(this)},r}(n(295));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._setPlayingState(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._addPlayerListeners=function(){this._setPlayingState=this._setPlayingState.bind(this),this._player.on("play",this._setPlayingState),this._player.on("playing",this._setPlayingState),this._player.on("pause",this._setPlayingState),this._player.on("ended",this._setPlayingState)},a._onClick=function(){this._togglePlay()},a._setPlayingState=function(){this._player.getEnded()?this._view.setState("ended"):this._view.setState(this._player.getPaused()?"paused":"playing")},a._togglePlay=function(){this._player.getPaused()||this._player.getEnded()?this._player.play():this._player.pause()},a.destroy=function(){this._player.off("play",this._setPlayingState),this._player.off("pause",this._setPlayingState),this._player.off("playing",this._setPlayingState),this._player.off("ended",this._setPlayingState),e.prototype.destroy.call(this)},r}(n(295));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){return e.call(this,t,n)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._initialize=function(){this._updateButtonState=this._updateButtonState.bind(this),this._player.supportsPictureInPicture()&&(this._updateButtonState(),this._player.on("webkitpresentationmodechanged",this._updateButtonState)),e.prototype._initialize.call(this)},a._onClick=function(){this._player.setPictureInPicture(!this._player.isPictureInPicture())},a._updateButtonState=function(){this._view.setState(this._player.isPictureInPicture()?"on":"off")},a.destroy=function(){this._player.off("webkitpresentationmodechanged",this._updateButtonState),e.prototype.destroy.call(this)},r}(n(295));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(295),a=n(659),s=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._updateState(),i._allowMultiLanguageCaptions=!i._player.options.disableMultiLanguageCaptions,i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=r.prototype;return s._updateState=function(){var e=this._player.getVisibleTextTracks(),t=a(this._player.getTextTracks());e.length?this._view.setState("on"):t.length?this._view.setState("off"):this._view.setState("initial")},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},s._onClick=function(){var e=this._player.getVisibleTextTracks(),t=a(this._player.getTextTracks());t.length>1&&this._allowMultiLanguageCaptions?this._player.isCaptionsSelectorShowing()?this._player.hideCaptionsSelector():this._player.showCaptionsSelector():1===e.length?t[0].mode="hidden":t[0].mode="showing",setTimeout(this._updateState)},s.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),e.prototype.destroy.call(this)},r}(r);e.exports=s},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="__CC_DISABLE",a=n(378),s=n(252).browser,o=s.edge||s.ie||s.firefox,l=n(339),c=n(659),u=function(e){var t,n;function a(t,n){var i;return(i=e.call(this,t,n)||this)._updateState(),i}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=a.prototype;return s._addViewListeners=function(){this._onSelected=this._onSelected.bind(this),this._view.on("ItemSelected",this._onSelected)},s._updateState=function(){var e="showing",t=c(this._player.getTextTracks()).map((function(t){"showing"===t.mode&&(e="hidden");var n={label:t.label||t.language||t.srclang&&("en"===t.srclang.toLowerCase()?"English":t.srclang)||"Unknown CC",language:t.language};return Object.defineProperty(n,"mode",{get:function(){return t.mode},set:function(e){t.mode=e}}),n}));this._view.setItems([{label:l.getTranslation().captionsoff,language:r,mode:e}].concat(t))},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},s._onSelected=function(e){var t=e.detail;this._player.getVisibleTextTracks().forEach((function(e){e.mode="hidden"})),t.language!==r&&(t.mode="showing"),o&&this._player.getMediaElement().textTracks.dispatchEvent(new CustomEvent("change")),setTimeout(this._updateState)},s.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),this._view.off("ItemSelected",this._onSelected)},a}(a);e.exports=u},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._player.getFullScreenEnabled()&&i._updateState(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("fullscreen:change",this._updateState)},a._updateState=function(){this._view.setState(this._player.isFullscreen()?"on":"off")},a._onClick=function(){this._player.toggleFullscreen(!this._player.isFullscreen())},a.destroy=function(){this._player.off("fullscreen:change",this._updateState),e.prototype.destroy.call(this)},r}(n(295));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(378),a=n(338),s=n(1130),o=n(1131),l=n(430),c=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._player.isDvr()?i._liveStreamLookback=l:i._liveStreamLookback=0,i._visible=!1,i._ariaTextTemplate=n.localization.currenttimetext,i._onDurationChange(),i._refreshChapters(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=r.prototype;return c._addViewListeners=function(){this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._onChapterClicked=this._onChapterClicked.bind(this),this._onChapterFocusIn=this._onChapterFocusIn.bind(this),this._onChapterFocusOut=this._onChapterFocusOut.bind(this),this._view.on("grab",this._onSliderGrab),this._view.on("chapter:click",this._onChapterClicked),this._view.on("chapter:focusin",this._onChapterFocusIn),this._view.on("chapter:focusout",this._onChapterFocusOut)},c._addPlayerListeners=function(){this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onProgress=this._onProgress.bind(this),this._refreshChapters=this._refreshChapters.bind(this),this._onRAF=this._onRAF.bind(this),this._player.on("durationchange",this._onDurationChange),this._player.on("loadstart",this._onEnded),this._player.on("ended",this._onEnded),this._player.on("timeupdate",this._onTimeUpdate),this._player.on("progress",this._onProgress),this._player.on("play",this._onPlay),this._player.on("pause",this._onPause),this._player.on("ended",this._onEnded),this._player.on("chapters:change",this._refreshChapters)},c._onProgress=function(){this._view.setBufferedValue(this._player.getBufferedPercentage())},c._setIsPlaying=function(e){e?this._view.setState("is-playing"):this._view.clearState("is-playing")},c._onPlay=function(){this._setIsPlaying(!0),this._player.isLive()||(o(this._timeUpdateInterval),this._raf=s(this._onRAF))},c._onRAF=function(){this._onTimeUpdate(),this._timeUpdateInterval=s(this._onRAF)},c._onPause=function(){this._setIsPlaying(!1),o(this._raf),o(this._timeUpdateInterval),this._onTimeUpdate()},c._onEnded=function(){this._onPause(),this._updateSliderPosition(0)},c._onChapterClicked=function(e){this._player.setCurrentTime(e["start-time"])},c._onChapterFocusIn=function(e){this._chapterFocused=!0,this._player.controls.overlays.setPopUpPosition(e["start-time"])},c._onChapterFocusOut=function(e){this._chapterFocused=!1},c._refreshChapters=function(){var e=this._cachedDuration=Math.max(0,this._player.getDuration()-this._liveStreamLookback);e&&!isNaN(e)&&e!==Math.Infinity?this._view.setChapters(this._player.getChapters().map((function(t){var n=t["start-time"]/e*100;return Object.assign({},t,{startTimeInPercentage:n+"%",startTime:n})}))):this._view.setChapters([])},c._onSliderGrab=function(){this._chapterFocused||(this._player.off("timeupdate",this._onTimeUpdate),o(this._timeUpdateInterval),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease),this._onPause())},c._onSliderRelease=function(){this._chapterFocused||(this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("timeupdate",this._onTimeUpdate),this._player.getPaused()||this._onPlay())},c._getDuration=function(){return this._cachedDuration&&isNaN(this._cachedDuration)||(this._cachedDuration=Math.max(0,this._player.getDuration()-this._liveStreamLookback)),this._cachedDuration},c._getTimeAsPercent=function(){return this._player.getCurrentTime()/this._getDuration()},c._onDurationChange=function(){this._cachedDuration=Math.max(0,this._player.getDuration()-this._liveStreamLookback),this._updateSliderPosition(this._getTimeAsPercent()),this._player.getPaused()||this._onPlay(),this._refreshChapters(),0===this._cachedDuration||isNaN(this._cachedDuration)?this._view.hide():this._view.show()},c._onSliderChange=function(){if(!this._player.getEnded()&&!isNaN(this._getDuration())&&0!==this._getDuration()){var e=this._view.getValue();this._setPlayerCurrentTime(e*this._getDuration()),this._setAriaValueText(e*this._getDuration()),this._updateScrubbedValue()}},c._onTimeUpdate=function(){this._updateSliderPosition(this._getTimeAsPercent())},c._updateSliderPosition=function(e){this._view.setValue(e),this._setAriaValueText(e*this._getDuration()),this._updateScrubbedValue(),this._visible||isNaN(this._getDuration())||(this._view.show(),this._visible=!0)},c._setAriaValueText=function(e){var t=Math.floor(e/60),n=Math.ceil(e%60);this._view.setAriaValueText(a(this._ariaTextTemplate,{minutes:t,seconds:n}))},c._updateScrubbedValue=function(){this._view.setScrubbedValue()},c._setPlayerCurrentTime=function(e){this._player.setCurrentTime(e)},c._removeEventListeners=function(){this._player.chapters&&this._player.chapters.off("change",this._refreshChapters),this._player.off("durationchange",this._onDurationChange),this._player.off("loadstart",this._onEnded),this._player.off("ended",this._onEnded),this._player.off("timeupdate",this._onTimeUpdate),this._player.off("progress",this._onTimeUpdate),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab),this._view.off("chapter:click",this._onChapterClicked),this._view.off("chapter:focusin",this._onChapterFocusIn),this._view.off("chapter:focusout",this._onChapterFocusOut),this._player.off("play",this._onPlay),this._player.off("pause",this._onPause),this._player.off("ended",this._onPause),this._player.off("chapters:change",this._refreshChapters)},c.destroy=function(){this._removeEventListeners(),o(this._raf),o(this._timeUpdateInterval),this._view=null},r}(r);e.exports=c},function(e,t,n){"use strict";var i=n(431);e.exports=i.requestAnimationFrame("draw")},function(e,t,n){"use strict";var i=n(431);e.exports=i.cancelAnimationFrame("draw")},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._hideVolume(),i._updateSliderVolumeValue(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._addViewListeners=function(){this._showVolume=this._showVolume.bind(this),this._hideVolume=this._hideVolume.bind(this),this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._onFocusChange=this._onFocusChange.bind(this),this._view.on("grab",this._onSliderGrab),this._view.on("focuschange",this._onFocusChange)},a._addPlayerListeners=function(){this._updateSliderVolumeValue=this._updateSliderVolumeValue.bind(this),this._onUserVolumeChange=this._onUserVolumeChange.bind(this),this._player.once("durationchange",this._updateSliderVolumeValue),this._player.on("volumechange",this._updateSliderVolumeValue),this._player.on("uservolumechange",this._onUserVolumeChange)},a._onSliderGrab=function(){this._cachedVolume=this._player.getVolume(),this._player.off("volumechange",this._updateSliderVolumeValue),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease)},a._onSliderRelease=function(){this._setPlayerVolume(this._view.getValue()),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("volumechange",this._updateSliderVolumeValue)},a._onSliderChange=function(){var e=this._view.getValue();this._setPlayerVolume(e),this._view.setScrubbedValue()},a._setPlayerVolume=function(e){e?(this._player.setMuted(!1),this._player.setVolume(e/100)):(this._player.setMuted(!0),this._player.setVolume(this._cachedVolume))},a._showVolume=function(){this._view.show()},a._hideVolume=function(){this._view.hide()},a._onUserVolumeChange=function(){this._showVolume(),clearTimeout(this._hideVolumeTimer),this._view.isFocused()||(this._hideVolumeTimer=setTimeout(this._hideVolume,1e3))},a._onFocusChange=function(){this._view.isFocused()?this._showVolume():this._hideVolume()},a._updateSliderVolumeValue=function(){if(this._player.getMuted())this._view.setValue(0),this._view.setScrubbedValue();else{var e=this._player.getVolume();this._view.setValue(100*e),this._view.setScrubbedValue()}},a._removeEventListeners=function(){this._player.off("durationchange",this._updateSliderVolumeValue),this._player.off("volumechange",this._updateSliderVolumeValue),this._player.off("uservolumechange",this._onUserVolumeChange),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab)},a.destroy=function(){this._removeEventListeners()},r}(n(378));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._player.states&&i._updateState(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.states&&this._player.states.on("statechange",this._updateState)},a._updateState=function(){this._stateChanging=!1,this._view.setState("sharing"===this._player.states.getCurrentState()?"on":"off")},a._onClick=function(){this._stateChanging||("sharing"===this._player.states.getCurrentState()?(this._view.setState("off"),this._player.states.setState("none")):(this._view.setState("on"),this._player.states.setState("sharing")),this._stateChanging=!0)},a.destroy=function(){this._player.states&&this._player.states.off("statechange",this._updateState),e.prototype.destroy.call(this)},r}(n(295));e.exports=r},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(378),a=n(1135),s=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._updateState(),i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r.prototype._updateState=function(){this.sharingModule=new a(Object.assign({},{player:this._player,parentView:this._view})),this.sharingModule.setData(this._player.options.sharing),this._view.el.innerHTML="",this._view.el.appendChild(this.sharingModule.el)},r}(r);e.exports=s},function(e,t,n){"use strict";var i,r=n(1136),a=n(1137),s=n(376),o=n(1138),l=n(1139).Dialog,c=n(338),u=n(339),d=n(650);try{i=n(1161)}catch(m){s("ac-analytics-share failed to load, are you sure you've included it?")}var h=n(252).os,p=h.ios||h.android,f=function(e){this.el||this._initializeElement(e.el,e.template),this._player=e.player,this._parentView=e.parentView,this._clickedShareButton=null,this._container=this.el.querySelector(".container"),this._sharingButtonContainer=this.el.querySelector(".social-sharing-container"),this._facebookButton=this.el.querySelector(".acv-fb-share"),this._twitterButton=this.el.querySelector(".acv-tw-share"),this._copyLinkButton=this.el.querySelector(".copy-link"),this._copyEmbedCodeButton=this.el.querySelector(".copy-embed-code"),this._copyTextArea=this.el.querySelector(".copy-area"),this._copyCloseButton=this.el.querySelector(".textinput-close-button"),this._closeButton=this.el.querySelector(".close-button"),!1===e.analytics&&(i=null),p&&(this.el.firstChild.classList.add("mobile"),this._player.on("loadstart",function(){this._getClientWidth()>735&&this.el.firstChild.classList.add("mobile-large")}.bind(this))),this._bindMethods(),this._addEventListeners(),this._syncSocialShareHidden()},g=f.prototype;g._initializeElement=function(e,t){e?this.el=e:(this.el=document.createElement("div"),this._templateData=u.getTranslation(),this.el.innerHTML=c((t||r).toString(),this._templateData))},g.setData=function(e){if(e){if(this._parentView.show(),e.allowEmbed&&this.el.firstChild.classList.add("embed-enabled"),this._sharingUrl=e.originatorUrl||window.location.href,this._videoid=e.videoid,this._hideExtension=e.hideExtension,this._embedPath=e.embedpath||"https://www.apple.com/embed/",this._hideFacebook=e.hideFacebookShare||!1,this._hideTwitter=e.hideTwitterShare||!1,this._title=e.title||"Video Player",this._syncSocialShareHidden(),this._container.classList.remove("textarea-active"),i&&!1!==e.analytics&&e.videoid)try{this._initAnalyticsAttributes(e),this._analyticsObserver||(this._analyticsObserver=i({context:this.el}))}catch(t){s("ac-analytics-share failed to load, are you sure you've included it?")}}else this._parentView.hide()},g._bindMethods=function(){this._doFacebookShare=this._doSocialShare.bind(this,l.FACEBOOK_SHARE),this._doTwitterShare=this._doSocialShare.bind(this,l.TWITTER_TWEET),this._copyUrl=this._copyUrl.bind(this),this._copyEmbedCode=this._copyEmbedCode.bind(this),this._closeCopyArea=this._showTextArea.bind(this,!1),this._closeState=this._closeState.bind(this)},g._addEventListeners=function(){this._facebookButton&&this._facebookButton.addEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.addEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.addEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.addEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.addEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.addEventListener("click",this._closeState)},g._removeEventListeners=function(){this._facebookButton&&this._facebookButton.removeEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.removeEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.removeEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.removeEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.removeEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.removeEventListener("click",this._closeState)},g._syncSocialShareHidden=function(){this._facebookButton&&(this._hideFacebook?this._facebookButton.classList.add("hide-button"):this._facebookButton.classList.remove("hide-button")),this._twitterButton&&(this._hideTwitter?this._twitterButton.classList.add("hide-button"):this._twitterButton.classList.remove("hide-button"))},g._doSocialShare=function(e){this._clickedShareButton=null,this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._showTextArea(!1),l.create(e,{url:this._sharingUrl,title:this._title})},g._showTextArea=function(e){e?(this._container.classList.add("textarea-active"),o(this._copyTextArea),p||this._copyTextArea.setAttribute("readonly","")):(this._container.classList.remove("textarea-active"),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly"),this._clickedShareButton&&this._clickedShareButton.focus(),this._copyLinkButton.setAttribute("aria-label",this._templateData.copylink),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.copyembed))},g._copyUrl=function(){this._clearTextArea(),this._copyTextArea.value=this._sharingUrl,this._copyLinkButton.classList.add("active"),this._copyLinkButton.setAttribute("aria-label",this._templateData.selectlink),this._showTextArea(!0),this._clickedShareButton=this._copyLinkButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copylink),o(this._copyTextArea)},g._clearTextArea=function(){window.getSelection().removeAllRanges(),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly")},g._copyEmbedCode=function(){this._clearTextArea(),this._copyTextArea.value=c(a,{videoid:this._videoid,embedCodePath:this._embedPath,width:this._player.getMediaWidth(),height:this._player.getMediaHeight(),title:this._title,extension:this._hideExtension?"":".html"}),this._copyEmbedCodeButton.classList.add("active"),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.selectembed),this._showTextArea(!0),this._clickedShareButton=this._copyEmbedCodeButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copyembed),o(this._copyTextArea)},g._focusFirstButton=function(){this._firstButton||(this._firstButton=d.getTabbableElements(this._sharingButtonContainer)[0]),this._firstButton.focus()},g.show=function(){this._container.classList.add("showing")},g.hide=function(){this._clickedShareButton=null,this._showTextArea(!1),this._container.classList.remove("showing")},g._getClientHeight=function(){return this.el.clientHeight},g._getClientWidth=function(){return this.el.clientWidth},g.destroy=function(){this._removeEventListeners()},g._closeState=function(){this._showTextArea(!1),0===this._player.getCurrentTime()||this._player.getEnded()?this._player.states.setState("initial"):this._player.states.setState("none")},g._getAnalyticsSource=function(){return"drawer"},g._initAnalyticsAttributes=function(e){var t=[];this._facebookButton&&t.push({button:this._facebookButton,title:"facebook",events:"event85"}),this._twitterButton&&t.push({button:this._twitterButton,title:"twitter",events:"event84"}),this._copyLinkButton&&t.push({button:this._copyLinkButton,title:"copy-link",events:"event89"}),this._copyEmbedCodeButton&&t.push({button:this._copyEmbedCodeButton,title:"copy-embed-code",events:"event101"});var n=(-1!==(e.url&&e.url.indexOf(".m3u8"))?"m3u8":"mp4")+" via html5",i=this._getAnalyticsSource(),r=e.videoid,a=document.head.querySelectorAll('meta[property="analytics-track"]');a=a?a[0].getAttribute("content"):"",t.forEach(function(e){e.button.setAttribute("data-analytics-click",""),e.button.setAttribute("data-analytics-share",JSON.stringify({title:r,events:e.events,prop2:a+" - "+r+" - "+e.title,prop18:n,eVar49:document.referrer,eVar54:document.location.href,eVar55:a+" - "+r,eVar70:i}))}.bind(this))},e.exports=f},function(e,t){e.exports='<div class="sharing-state">\n    <div class="container" data-acv-active-area>\n        <div class="social-sharing-container">\n            <div class="sharing-button-container">\n                <button class="acv-fb-share ac-video-icon icon-share_fb" aria-label="{facebookshare}, {newwindow}"></button>\n                <button class="acv-tw-share ac-video-icon icon-share_twitter" aria-label="{twittershare}, {newwindow}"></button>\n                <button class="copy-link ac-video-icon icon-share_link" aria-label="{copylink}"></button>\n                <button class="copy-embed-code ac-video-icon icon-share_embed" aria-label="{copyembed}"></button>\n            </div>\n        </div>\n        <div class="textarea-container">\n            <span>\n                <input class="copy-area form-textbox form-textbox-text disabled" type="text" id="copy-link" aria-label="{copylink}"></input>\n                <button class="textinput-close-button ac-video-icon icon-share_close" aria-label="{dismisscopy}"></button>\n            </span>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<iframe src="{embedCodePath}{videoid}{extension}" width="{width}" height="{height}" title="{title}" allowfullscreen></iframe>'},function(e,t,n){"use strict";e.exports=function(e){if("function"===typeof e.select)e.select()||e.setSelectionRange(0,e.value.length);else{var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}}},function(e,t,n){"use strict";e.exports={Link:n(1140),Dialog:n(1158),Focus:n(1159),Debug:n(1160)}},function(e,t,n){"use strict";var i=n(521),r=n(1157);function a(){var e;for(e in this.types={},i)i.hasOwnProperty(e)&&(s[e]=e,this.addType(e,i[e].generateLink.bind(i[e])))}var s=a.prototype;s.create=function(e,t,n){t=t||{};var i=this.types[e];if(i)return i(t,n)},s.createFromAnchor=function(e){var t,n=e.getAttribute("data-network-action");for(t in i)if(i.hasOwnProperty(t)&&n===i[t].id)return void i[t].enhanceLinkEngagement(e);r.enhanceLinkEngagement(e)},s.addType=function(e,t){return this.types[e]=t,this},s.removeType=function(){return this.types[name]=null,this},e.exports=new a},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{u:e.url}}),{id:"facebook-share",baseLinkPath:"https://www.facebook.com/sharer/sharer.php",dialogDimensions:{width:555,height:368}})},function(e,t,n){e.exports=n(1143)},function(e,t,n){var i=n(1144),r=n(1145);e.exports={stringify:i,parse:r}},function(e,t,n){var i=n(660),r={delimiter:"&",indices:!0,stringify:function(e,t,n){if(i.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"===typeof e||"number"===typeof e||"boolean"===typeof e)return[encodeURIComponent(t)+"="+encodeURIComponent(e)];var a=[];if("undefined"===typeof e)return a;for(var s=Object.keys(e),o=0,l=s.length;o<l;++o){var c=s[o];a=!n.indices&&Array.isArray(e)?a.concat(r.stringify(e[c],t,n)):a.concat(r.stringify(e[c],t+"["+c+"]",n))}return a}};e.exports=function(e,t){var n="undefined"===typeof(t=t||{}).delimiter?r.delimiter:t.delimiter;t.indices="boolean"===typeof t.indices?t.indices:r.indices;var i=[];if("object"!==typeof e||null===e)return"";for(var a=Object.keys(e),s=0,o=a.length;s<o;++s){var l=a[s];i=i.concat(r.stringify(e[l],l,t))}return i.join(n)}},function(e,t,n){var i=n(660),r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,parseValues:function(e,t){for(var n={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),a=0,s=r.length;a<s;++a){var o=r[a],l=-1===o.indexOf("]=")?o.indexOf("="):o.indexOf("]=")+1;if(-1===l)n[i.decode(o)]="";else{var c=i.decode(o.slice(0,l)),u=i.decode(o.slice(l+1));n.hasOwnProperty(c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}}return n},parseObject:function(e,t,n){if(!e.length)return t;var i=e.shift(),a={};if("[]"===i)a=(a=[]).concat(r.parseObject(e,t,n));else{var s="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,o=parseInt(s,10),l=""+o;!isNaN(o)&&i!==s&&l===s&&o>=0&&o<=n.arrayLimit?(a=[])[o]=r.parseObject(e,t,n):a[s]=r.parseObject(e,t,n)}return a},parseKeys:function(e,t,n){if(e){var i=/(\[[^\[\]]*\])/g,a=/^([^\[\]]*)/.exec(e);if(!Object.prototype.hasOwnProperty(a[1])){var s=[];a[1]&&s.push(a[1]);for(var o=0;null!==(a=i.exec(e))&&o<n.depth;)++o,Object.prototype.hasOwnProperty(a[1].replace(/\[|\]/g,""))||s.push(a[1]);return a&&s.push("["+e.slice(a.index)+"]"),r.parseObject(s,t,n)}}}};e.exports=function(e,t){if(""===e||null===e||"undefined"===typeof e)return{};(t=t||{}).delimiter="string"===typeof t.delimiter||i.isRegExp(t.delimiter)?t.delimiter:r.delimiter,t.depth="number"===typeof t.depth?t.depth:r.depth,t.arrayLimit="number"===typeof t.arrayLimit?t.arrayLimit:r.arrayLimit,t.parameterLimit="number"===typeof t.parameterLimit?t.parameterLimit:r.parameterLimit;for(var n="string"===typeof e?r.parseValues(e,t):e,a={},s=Object.keys(n),o=0,l=s.length;o<l;++o){var c=s[o],u=r.parseKeys(c,n[c],t);a=i.merge(a,u)}return i.compact(a)}},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){var t={url:e.url,description:e.description};return e.media&&(t.media=e.media),t}),{id:"pinterest-share",baseLinkPath:"http://www.pinterest.com/pin/create/button",dialogDimensions:{width:750,height:450}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){var t={clickthru:e.url,caption:e.description};return e.media&&(t.source=e.media),t}),{id:"tumblr-share",baseLinkPath:"http://www.tumblr.com/share/photo",dialogDimensions:{width:450,height:432}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{tweet_id:e.messageId}}),{id:"twitter-favorite",baseLinkPath:"https://twitter.com/intent/favorite",dialogDimensions:{width:550,height:420}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){var t={in_reply_to:e.messageId};return e.hashtags&&(t.hashtags=e.hashtags),t}),{id:"twitter-reply",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{tweet_id:e.messageId}}),{id:"twitter-retweet",baseLinkPath:"https://twitter.com/intent/retweet",dialogDimensions:{width:550,height:420}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){var t={url:e.url,text:e.description};return e.hashtags&&(t.hashtags=e.hashtags),t}),{id:"twitter-tweet",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{url:e.url,title:e.title,pic:e.media}}),{id:"weibo-share",baseLinkPath:"http://service.weibo.com/share/share.php",dialogDimensions:{width:650,height:426}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{url:e.url,title:e.title,pic:e.media}}),{id:"qq-weibo-share",baseLinkPath:"http://v.t.qq.com/share/share.php",dialogDimensions:{width:658,height:506}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{url:e.url,title:e.title,pics:e.media,summary:e.description}}),{id:"qzone-share",baseLinkPath:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",dialogDimensions:{width:620,height:645}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return{url:e.url,title:e.title}}),{id:"renren-share",baseLinkPath:"http://www.connect.renren.com/share/sharer",dialogDimensions:{width:500,height:315}})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){var t={url:e.url};return e.title&&(t.subject=e.title),e.description?t.body=e.description+"\r\n\r\n"+e.url:t.body=e.url,t}),{id:"email-share",baseLinkPath:"mailto:",preventDialog:!0})},function(e,t,n){"use strict";var i=n(237);e.exports=new i((function(e){return e}),{baseLinkPath:""})},function(e,t,n){"use strict";var i=n(521);function r(){var e;for(e in this.types={},i)i.hasOwnProperty(e)&&(a[e]=e,this.addType(e,i[e].generateDialog.bind(i[e])))}var a=r.prototype;a.create=function(e,t){t=t||{};var n=this.types[e];if(n)return n(t)},a.addType=function(e,t){return this.types[e]=t,this},a.removeType=function(){return this.types[name]=null,this},e.exports=new r},function(e,t,n){"use strict";e.exports=function(e){if(window.getSelection){var t=window.getSelection();(n=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if(e.setSelectionRange)e.setSelectionRange(0,e.value.length);else if(document.body.createTextRange){var n;(n=document.body.createTextRange()).moveToElementText(e),n.select()}}},function(e,t,n){"use strict";var i=n(521);function r(){var e;for(e in this.types={},i)i.hasOwnProperty(e)&&(a[e]=e,this.addType(e,i[e].getDialogDebugData.bind(i[e])))}var a=r.prototype;a.create=function(e,t){t=t||{};var n=this.types[e];if(n)return n(t)},a.addType=function(e,t){return this.types[e]=t,this},a.removeType=function(){return this.types[name]=null,this},e.exports=new r},function(e,t,n){"use strict";var i=n(1162);e.exports=function(e){return new i(e)}},function(e,t,n){"use strict";var i,r=n(661),a=n(645),s=n(236).EventEmitterMicro,o=n(1164),l=n(519),c=n(1173),u=n(1174);try{i=n(518)}catch(g){u.log(g.message)}var d={dataAttribute:"analytics-share",interactionEvents:["click"],autoEnable:!0},h=function(e){e=e||{},this.options=r(d,e),s.call(this),this.elements=[],this.eventObserver=null,this.publishShareClick=this.publishShareClick.bind(this),this.options.autoEnable&&this.enable()},p=s.prototype,f=h.prototype=a(p);f.enable=function(){if(!i)return!1;this._createObserver(),this.bindEventListener()},f.disable=function(){if(!i)return!1;this.unbindEventListener()},f.bindEventListener=function(){var e;this.elements=this.populateElements(),e=this.elements.length;for(var t=0;t<e;t++)l(this.elements[t],"click",this.publishShareClick)},f.unbindEventListener=function(){for(var e=this.elements&&this.elements.length?this.elements.length:0,t=0;t<e;t++)c(this.elements[t],"click",this.publishShareClick)},f.populateElements=function(){return o("[data-"+this.options.dataAttribute+"]",this.options.context||document)},f.publishShareClick=function(e){var t=e.currentTarget,n=this.parseDataAttribute(t.getAttribute("data-"+this.options.dataAttribute));if("object"===typeof n){if(!n.title)return console.log("data-"+this.options.dataAttribute+" attribute must have a `title` property"),!1;this.trigger("click",n)}},f.parseDataAttribute=function(e){var t={};try{t=JSON.parse(e)}catch(g){console.log("data-"+this.options.dataAttribute+" must be a valid JSON string")}return t},f.destroy=function(){this.disable(),this.elements=[],this.eventObserver=null,this.publishShareClick=null,this.options=null},f._createObserver=function(){if(!i||!i.observer||!i.observer.Event)return!1;this.eventObserver=new i.observer.Event(this,this.options)},e.exports=h},function(e,t){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i,r=Object(this);if("function"!==typeof e)throw new TypeError("No function object passed to forEach.");var a=this.length;for(n=0;n<a;n+=1)i=r[n],e.call(t,i,n,r)})},function(e,t,n){"use strict";n(1165);var i=n(1166),r=n(1168),a="querySelectorAll"in document;e.exports=function(e,t){return t=t||document,i.parentNode(t,!0,"querySelectorAll","context"),i.selector(e,!0,"querySelectorAll"),a?Array.prototype.slice.call(t.querySelectorAll(e)):r(e,t)}},function(e,t){!function(){"use strict";var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,n){if(n="undefined"!==typeof n?n:this.length,"[object Array]"===Object.prototype.toString.call(this))return e.call(this,t,n);var i,r,a=[],s=this.length,o=t||0,l=n||s;if(n<0&&(l=s+n),(r=l-(o=o>=0?o:s+o))>0)if(a=new Array(r),this.charAt)for(i=0;i<r;i++)a[i]=this.charAt(o+i);else for(i=0;i<r;i++)a[i]=this[o+i];return a}}}()},function(e,t,n){"use strict";n(662);var i=n(663),r=n(664),a=n(522),s=n(1167),o=n(523),l=n(665),c=function(e,t){return!!i(e)&&("number"===typeof t?e.nodeType===t:-1!==t.indexOf(e.nodeType))},u=[o,s,a],d=[o,l,r];e.exports={parentNode:function(e,t,n,i){if(i=i||"node",(e||t)&&!c(e,u))throw new TypeError(n+": "+i+" must be an Element, Document, or Document Fragment")},childNode:function(e,t,n,i){if(i=i||"node",(e||t)&&!c(e,d))throw new TypeError(n+": "+i+" must be an Element, TextNode, or Comment")},selector:function(e,t,n,i){if(i=i||"selector",(e||t)&&"string"!==typeof e)throw new TypeError(n+": "+i+" must be a string")}}},function(e,t,n){"use strict";e.exports=9},function(e,t,n){"use strict";n(662);var i=n(1169),r=n(1170),a=n(1171),s=function(e,t){var n;if(t===document)return!0;for(n=e;(n=n.parentNode)&&i(n);)if(n===t)return!0;return!1},o=function(e){"recalc"in e?e.recalc(!1):document.recalc(!1),window.scrollBy(0,0)};e.exports=function(e,t){var n,i=document.createElement("style"),l="_ac_qsa_"+(Math.random()+"").slice(-6),c=[];for(t=t||document,document[l]=[],r(t)?t.appendChild(i):document.documentElement.firstChild.appendChild(i),i.styleSheet.cssText="*{display:recalc;}"+e+'{ac-qsa:expression(document["'+l+'"] && document["'+l+'"].push(this));}',o(t);document[l].length;)(n=document[l].shift()).style.removeAttribute("ac-qsa"),-1===c.indexOf(n)&&s(n,t)&&c.push(n);return document[l]=null,a(i),o(t),c}},function(e,t,n){"use strict";var i=n(524),r=n(523);e.exports=function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(524),r=n(522);e.exports=function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(1172);e.exports=function(e){return i.childNode(e,!0,"remove"),e.parentNode?e.parentNode.removeChild(e):e}},function(e,t,n){"use strict";var i=n(524),r=n(664),a=n(522),s=n(523),o=n(665),l=[s,o,r,a],c=[s,o,r],u=[s,a];e.exports={parentNode:function(e,t,n,r){if(r=r||"target",(e||t)&&!i(e,u))throw new TypeError(n+": "+r+" must be an Element, or Document Fragment")},childNode:function(e,t,n,r){if(r=r||"target",(e||t)&&!i(e,c))throw new TypeError(n+": "+r+" must be an Element, TextNode, or Comment")},insertNode:function(e,t,n,r){if(r=r||"node",(e||t)&&!i(e,l))throw new TypeError(n+": "+r+" must be an Element, TextNode, Comment, or Document Fragment")},hasParentNode:function(e,t,n){if(n=n||"target",!e.parentNode)throw new TypeError(t+": "+n+" must have a parentNode")}}},function(e,t,n){"use strict";var i=n(644),r=n(638);e.exports=function(e,t,n,a){return t=r(e,t),i(e,t,n,a)}},function(e,t,n){"use strict";e.exports={assert:n(1175),count:n(1176),countReset:n(1177),dir:n(1178),dirxml:n(1179),enabled:n(632),error:n(1180),group:n(1181),groupCollapsed:n(1182),groupEnd:n(1183),info:n(1184),log:n(376),profile:n(1185),profileEnd:n(1186),table:n(1187),time:n(1188),timeEnd:n(1189),trace:n(1190),warn:n(1191)}},function(e,t,n){"use strict";e.exports=n(198)("assert")},function(e,t,n){"use strict";e.exports=n(198)("count")},function(e,t,n){"use strict";e.exports=n(198)("countReset")},function(e,t,n){"use strict";e.exports=n(198)("dir")},function(e,t,n){"use strict";e.exports=n(198)("dirxml")},function(e,t,n){"use strict";e.exports=n(198)("error")},function(e,t,n){"use strict";e.exports=n(198)("group")},function(e,t,n){"use strict";e.exports=n(198)("groupCollapsed")},function(e,t,n){"use strict";e.exports=n(198)("groupEnd")},function(e,t,n){"use strict";e.exports=n(198)("info")},function(e,t,n){"use strict";e.exports=n(198)("profile")},function(e,t,n){"use strict";e.exports=n(198)("profileEnd")},function(e,t,n){"use strict";e.exports=n(198)("table")},function(e,t,n){"use strict";e.exports=n(198)("time")},function(e,t,n){"use strict";e.exports=n(198)("timeEnd")},function(e,t,n){"use strict";e.exports=n(198)("trace")},function(e,t,n){"use strict";e.exports=n(198)("warn")},function(e,t,n){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function a(t,n){var r;return(r=e.call(this,t,n)||this)._player.supportsAirPlay()&&(r._airplayStateChange=r._airplayStateChange.bind(i(r)),r._player.getMediaElement().addEventListener("webkitplaybacktargetavailabilitychanged",r._airplayStateChange),r._updateState=r._updateState.bind(i(r)),r._player.getMediaElement().addEventListener("webkitcurrentplaybacktargetiswirelesschanged",r._updateState)),r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var s=a.prototype;return s._airplayStateChange=function(e){"available"===e.availability?this._airplayAvailable=!0:this._airplayAvailable=!1,this._updateState()},s._updateState=function(){this._player.getMediaElement().webkitCurrentPlaybackTargetIsWireless?this._view.setState("on"):this._airplayAvailable?this._view.setState("off"):this._view.setState("initial")},s._onClick=function(){this._player.getMediaElement().webkitShowPlaybackTargetPicker()},s.destroy=function(){this._player.getMediaElement().removeEventListener("webkitplaybacktargetavailabilitychanged",this._airplayStateChange),this._player.getMediaElement().removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this._updateState),e.prototype.destroy.call(this)},a}(n(295));e.exports=a},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(295),a=n(430),s=function(e){var t,n;function r(t,n){var i;return(i=e.call(this,t,n)||this)._updateState=i._updateState.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i._player.on("timeupdate",i._updateState),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=r.prototype;return s._updateState=function(){this._player.getDuration()-this._player.getCurrentTime()<a?this._view.setState("on"):this._view.setState("off")},s._onClick=function(){this._player.goToLive()},s.destroy=function(){this._player.off("timeupdate",this._updateState),e.prototype.destroy.call(this)},r}(r);e.exports=s},function(e,t){e.exports={disableForcedCursorPointer:function(){document.body.classList.remove("cursor-pointer"),this.onSelectStartResumeDefault()},forceCursorPointer:function(){document.body.classList.add("cursor-pointer"),this.onSelectStartPreventDefault()},onSelectStartResumeDefault:function(){document.removeEventListener("selectstart",this.preventDefault)},onSelectStartPreventDefault:function(){document.addEventListener("selectstart",this.preventDefault)},preventDefault:function(e){e.preventDefault()}}},function(e,t){e.exports='\n<div class="ac-slider-ax-track" role="slider" aria-valuemin="0" aria-valuemax="1" ></div>\n<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-hover-track">\n\t\t<div class="ac-slider-hover-notch"></div>\n\t</div>\n\t<div class="ac-slider-thumb">\n\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t<div class="ac-slider-thumb-overlay"></div>\n\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-chapters-track"></div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-buffered"></div>\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>\n'},function(e,t){e.exports='\n<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-background"></div>\n\t<div class="ac-slider-thumb-wrapper">\n\t\t<div class="ac-slider-thumb">\n\t\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i=n(1198),r=function(e){this.el=e.el,this._player=e.player,this._popUp=new i(e),this.el.appendChild(this._popUp.el)},a=r.prototype;a.setData=function(e){this._popUp.setData(e)},a.show=function(){this.el.classList.remove("hidden"),this._popUp.show()},a.hide=function(){this.el.classList.add("hidden"),this._popUp.hide()},a.setPopUpPosition=function(e){this._popUp.setPopUpPosition(e)},a.destroy=function(){this._popUp.destroy()},e.exports=r},function(e,t,n){"use strict";var i=n(1199),r=n(517),a=n(1200),s=n(1201),o=n(430),l=function(e){this._player=e.player,this.el=document.createElement("div"),this.el.style.opacity="0",this.el.innerHTML=i,this._player.isDvr()?this._liveStreamLookback=o:this._liveStreamLookback=0,this._thumbnailHandler=new a({el:this.el.querySelector(".ac-video-trickplay-image"),player:this._player,numberOfImages:e.numberOfImages}),this._timeLabel=this.el.querySelector(".ac-video-trickplay-time"),this._chapterLabel=this.el.querySelector(".ac-video-trickplay-chapter-title"),this._bindMethods(),this._addEventListeners()},c=l.prototype;c._initPointerTracking=function(){this._scrubberView=this._player.controls.scrubberView,this._scrubberView&&(this._runnableTrack=this._scrubberView.el.querySelector(".ac-slider-runnable-track"),this._calcOffsets(),this._scrubberView.el.addEventListener("mouseover",this.show),this._scrubberView.el.addEventListener("mouseout",this.hide),this._scrubberView.el.addEventListener("focusin",this._onScrubberFocusIn),this._scrubberView.el.addEventListener("focusout",this._onScrubberFocusOut),this._scrubberView.el.addEventListener("mousedown",this._startScrubbing),this._scrubberView.el.addEventListener("mouseup",this._endScrubbing),this._scrubberView.el.addEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._player.on("resize",this._throttledCalcOffsets),window.addEventListener("resize",this._throttledCalcOffsets))},c._bindMethods=function(){this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._startScrubbing=this._startScrubbing.bind(this),this._endScrubbing=this._endScrubbing.bind(this),this._initPointerTracking=this._initPointerTracking.bind(this),this._onTrackerUpdate=this._onTrackerUpdate.bind(this),this._setThumbnail=this._setThumbnail.bind(this),this._calcOffsets=this._calcOffsets.bind(this),this._onScrubberFocusIn=this._onScrubberFocusIn.bind(this),this._onScrubberFocusOut=this._onScrubberFocusOut.bind(this),this._throttledCalcOffsets=s(this._calcOffsets,30)},c._startScrubbing=function(e){this._thumbnailHandler.el.classList.add("hidden"),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail),this._scrubberView.el.removeEventListener("mouseout",this.hide),document.addEventListener("mouseup",this._endScrubbing),document.addEventListener("mousemove",this._onTrackerUpdate)},c._endScrubbing=function(e){e.target===this._scrubberView.el&&this.hide(),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._scrubberView.el.addEventListener("mouseout",this.hide),document.removeEventListener("mouseup",this._endScrubbing),document.removeEventListener("mousemove",this._onTrackerUpdate),this._setThumbnail(e),this._thumbnailHandler.el.classList.remove("hidden")},c._calcOffsets=function(){this._onLoadedMetaData();var e=this._player.el.getBoundingClientRect();this._offsetLeft=e.left;var t=this._runnableTrack.getBoundingClientRect();this._leftBoundary=t.left-this._offsetLeft,this._rightBoundary=t.right-this._offsetLeft,this._imgWidth=this.el.firstElementChild.getBoundingClientRect().width},c._onLoadedMetaData=function(){var e=this._player.getMediaElement().videoWidth,t=this._player.getMediaElement().videoHeight,n=-1!==(this._player.getCurrentSrc()||"").indexOf("-tft-");this.el.classList.remove("square-video"),this.el.classList.remove("vertical-video"),this.el.classList.remove("tft-video"),n?(this.el.classList.add("tft-video"),this._thumbnailHandler.setVertical(!1)):e<t?(this.el.classList.add("vertical-video"),this._thumbnailHandler.setVertical(!0)):e===t?(this.el.classList.add("square-video"),this._thumbnailHandler.setVertical(!1)):this._thumbnailHandler.setVertical(!1)},c._addEventListeners=function(){this._player.on("durationchange",this._onDurationChange),this._player.once("controlsready",this._initPointerTracking),this._player.on("loadedmetadata",this._calcOffsets)},c._removeEventListeners=function(){this._player.off("durationchange",this._onDurationChange),this._player.off("controlsready",this._initPointerTracking),this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander),this._player.off("loadedmetadata",this._calcOffsets),this._player.off("resize",this._throttledCalcOffsets),window.removeEventListener("resize",this._throttledCalcOffsets),this._scrubberView.el.removeEventListener("mouseover",this.show),this._scrubberView.el.removeEventListener("mouseout",this.hide),this._scrubberView.el.removeEventListener("focusin",this._onScrubberFocusIn),this._scrubberView.el.removeEventListener("focusout",this._onScrubberFocusOut),this._scrubberView.el.removeEventListener("mouseout",this.hide),this._scrubberView.el.removeEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail),document.removeEventListener("mouseup",this._endScrubbing),document.removeEventListener("mousemove",this._onTrackerUpdate)},c._getDuration=function(){return this._cachedDuration&&isNaN(this._cachedDuration)||(this._cachedDuration=Math.max(0,this._player.getDuration()-this._liveStreamLookback)),this._cachedDuration},c.setPopUpPosition=function(e){this.show();var t=e/this.getDuration()*(this._rightBoundary-this._leftBoundary)-this._imgWidth/2-1,n=this._leftBoundary+t;this.el.firstElementChild.style.left=n+"px",this._time=e,this._timeLabel.innerText=r.formatTime(e,this._getDuration()),this._refreshChapter(),this._setThumbnail()},c._onScrubberFocusIn=function(e){if(e.target.classList.contains("ac-slider-chapter-container")){this._calcOffsets();var t=Array.from(e.target.parentElement.children).indexOf(e.target),n=this._player.getChapters()[t]["start-time"];this.setPopUpPosition(n),this.show()}},c._onScrubberFocusOut=function(e){this.hide()},c._onTrackerUpdate=function(e){this._calcOffsets();var t=Math.min(Math.max(e.clientX-this._offsetLeft,this._leftBoundary),this._rightBoundary);this.el.firstElementChild.style.left=t-this._imgWidth/2+"px";var n=this._scrubberView.getClientXValue(e);this._cachedTrackerUpdate=e,this._setTimeFromPercentPosition(Math.max(n,0))},c._onDurationChange=function(e){this._cachedDuration=Math.max(0,this._player.getDuration()-this._liveStreamLookback),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail()),this.el.style.opacity="1"},c._setThumbnail=function(e){this._thumbnailHandler.setTime(this._time,this._getDuration())},c._setTimeFromPercentPosition=function(e){var t=e/this._scrubberView.getMax();this._time=Math.min(t*this._getDuration(),this._getDuration());var n=r.formatTime(this._time,this._getDuration());this._timeLabel.innerText=n,this._refreshChapter()},c._refreshChapter=function(){var e=this._player.getChapterForTime(this._time,0);if(e&&e.titles.length){var t=e.titles.find((function(e){return"en"===e.language}))||e.titles[0];this._chapterLabel.innerText=t.title,this._chapterLabel.classList.remove("hidden")}else this._chapterLabel.classList.add("hidden")},c.setData=function(e){this.el.style.opacity="0",this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander),this._canPlayThroughHander=null),e&&this._player.getReadyState()>2?(this.el.style.opacity="1",this._thumbnailHandler.setData(e),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail())):(this._thumbnailHandler.setData(null),e?(this._canPlayThroughHander=this.setData.bind(this,e),this._player.on("canplaythrough",this._canPlayThroughHander),this._player.on("playing",this._canPlayThroughHander)):this.el.style.opacity="1"),this._onLoadedMetaData()},c.show=function(e){e&&this._onTrackerUpdate(e),this.el.firstElementChild.classList.remove("hidden")},c.hide=function(){this.el.firstElementChild.classList.add("hidden")},c.destroy=function(){this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander)),this._removeEventListeners(),this._throttledCalcOffsets&&this._throttledCalcOffsets.cancel(),this._scrubberView=null},e.exports=l},function(e,t){e.exports='<div class="ac-video-trickplay hidden" aria-hidden="true">\n    <div class="ac-video-trickplay-image">\n    </div>\n    <div class="ac-video-trickplay-chapter-title"></div>\n    <div class="ac-video-trickplay-time"></div>\n</div>'},function(e,t,n){"use strict";var i=function(e){this.el=e.el,this._player=e.player,this._imgWidth=e.imgWidth||144,this.el.style.backgroundSize=100*this._numberOfImages+"% 100%"},r=i.prototype;r.setVertical=function(e){this._imgWidth=e?81:144},r.getWidth=function(){return this._imgWidth},r.setData=function(e){if(!e)return this._imgUrl=null,void(this.el.style.backgroundImage="");if(e.url!==this._imgUrl){this._imgUrl=e.url,this._numberOfImages=parseInt(e.numberOfImages||120),this.el.style.backgroundSize=100*this._numberOfImages+"% 100%",this.el.style.backgroundImage="",this.el.classList.add("hidden");var t=this._loadImage(this._imgUrl).then(function(){this._imageLoadPromise===t&&(this.el.style.backgroundImage='url("'+this._imgUrl+'")',this._imageLoadPromise=null,this.el.classList.remove("hidden"))}.bind(this));this._imageLoadPromise=t}},r._loadImage=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){t()},i.onerror=function(){n()},i.src=e}))},r.setTime=function(e,t){var n=e/t,i=Math.min(Math.round(n*this._numberOfImages),this._numberOfImages-1)/(this._numberOfImages-1)*100;this.el.style.backgroundPositionX=i+"%"},r.destroy=function(){this._imageLoadPromise&&this._imageLoadPromise.cancel()},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){var n=null,i=function(){null===n&&(e.apply(this,arguments),n=setTimeout((function(){n=null}),t))};return i.cancel=function(){clearTimeout(n)},i}},function(e,t,n){"use strict";var i=n(1203),r=function(e){this.el=e.el,this._player=e.player,this._addItems(e.items||[])},a=r.prototype;a._addItems=function(e){this._items=[],e.forEach(function(e){var t=document.createElement("div");t.classList.add("end-state-item");var n=new i(Object.assign({},e,{el:t,player:this._player}));this.el.appendChild(t),this._items.push(n)}.bind(this))},a.setData=function(e){for(;this._items.length;)this._items.pop().destroy();this.el.innerHTML="",e?(this.el.classList.remove("hidden"),this._addItems(e.items)):this.el.classList.add("hidden")},a.destroy=function(){for(;this._items.length;)this._items.pop().destroy()},e.exports=r},function(e,t,n){"use strict";var i=n(1204),r=function(e){this.el=e.el,this.el.innerHTML=i,this._player=e.player,this._bindContent(e)},a=r.prototype;a._bindContent=function(e){if("link"===e.type||"video"===e.type){var t=this.el.querySelector(".end-state-link"),n=document.createElement("div");t.classList.remove("hidden"),n.classList.add("end-state-text-container"),n.innerText=e.label||"",t.href=e.url||"",t.appendChild(n),"link"===e.type?t.classList.add("icon","icon-after","icon-chevronright"):"video"===e.type&&t.classList.add("icon","icon-after","icon-playcircle"),this._bindAction(this.el,e)}},a._bindAction=function(e,t){"function"===typeof t.onclick?e.onclick=function(e){e.preventDefault(),t.onclick.call(null,e)}.bind(this):"video"===t.type&&t.url&&(e.onclick=function(e){e.preventDefault(),this._player.load(t.url,null,0,{})}.bind(this))},a.destroy=function(){},e.exports=r},function(e,t){e.exports='<a class="end-state-link hidden"></a>'},function(e,t,n){var i=n(434),r=n(252),a=r.os.ios||r.os.android,s=n(518),o=function(){function e(e){this._rootElement=e.rootElement,this._player=e.player,this._360=this._player.get360(),this.el=this._rootElement.querySelector(".compass-wrapper"),this.compassRing=this.el.querySelector(".compass-ring"),this.compassField=this.el.querySelector(".compass-field"),this.compass=this.el.querySelector(".compass"),this.compassArrows=this.el.querySelector(".compass-arrows"),this.compassArrowLeft=this.el.querySelector(".compass-arrow-left"),this.compassArrowRight=this.el.querySelector(".compass-arrow-right"),this.compassArrowTop=this.el.querySelector(".compass-arrow-top"),this.compassArrowBottom=this.el.querySelector(".compass-arrow-bottom"),this._keyboard=new i(this.el),this._arrowControls=this._player.get360().arrowControls,this._bindMethods(),this._addEventListeners()}var t=e.prototype;return t._bindMethods=function(){this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onCompassClick=this._onCompassClick.bind(this),this._onCompassMouseEnter=this._onCompassMouseEnter.bind(this),this._onCompassMouseLeave=this._onCompassMouseLeave.bind(this),this._onCompassFocusIn=this._onCompassFocusIn.bind(this),this._onCompassFocusOut=this._onCompassFocusOut.bind(this),this._onRotationTransitionEnd=this._onRotationTransitionEnd.bind(this),this._onCompassArrowsClick=this._onCompassArrowsClick.bind(this),this._on360PositionChange=this._on360PositionChange.bind(this),this._on360IconUpdate=this._on360IconUpdate.bind(this),this._transitionTiming=this._transitionTiming.bind(this)},t._addEventListeners=function(){this._player.once("controlsready",function(){a||(this.compass.addEventListener("mouseenter",this._onCompassMouseEnter),this.compass.addEventListener("mouseleave",this._onCompassMouseLeave)),this.el.addEventListener("focusin",this._onFocusIn),this.el.addEventListener("focusout",this._onFocusOut),this.compass.addEventListener("click",this._onCompassClick),this.compass.addEventListener("focusin",this._onCompassFocusIn),this.compass.addEventListener("focusout",this._onCompassFocusOut),this.compassArrows.addEventListener("click",this._onCompassArrowsClick),this._360.on(s.POSITION_CHANGE,this._on360PositionChange),this._360.on(s.ROTATION_START,this._transitionTiming),this._360.on(s.ROTATION_COMPLETE,this._onRotationTransitionEnd)}.bind(this))},t._removeEventListeners=function(){this.el.removeEventListener("focusin",this._onFocusIn),this.el.removeEventListener("focusout",this._onFocusOut),this.compass.removeEventListener("click",this._onCompassClick),this.compass.removeEventListener("focusin",this._onCompassFocusIn),this.compass.removeEventListener("focusout",this._onCompassFocusOut),this.compass.removeEventListener("mouseenter",this._onCompassMouseEnter),this.compass.removeEventListener("mouseleave",this._onCompassMouseLeave),this.compassArrows.removeEventListener("click",this._onCompassArrowsClick),this._360.off(s.POSITION_CHANGE,this._on360PositionChange),this._360.off(s.ROTATION_START,this._transitionTiming),this._360.off(s.ROTATION_COMPLETE,this._onRotationTransitionEnd)},t._showCompassArrows=function(){this.el.classList.add("show-arrows")},t._hideCompassArrows=function(){this.el.classList.remove("show-arrows")},t._onRotationTransitionEnd=function(){this._compassIsRotating=!1,this._360.off(s.ROTATION_UPDATE,this._on360IconUpdate)},t._transitionTiming=function(e){var t=e.time,n=this._get360HorizontalAngle();this._compassIsRotating=!0,this.compassRing.style.transition="transform "+t+"ms cubic-bezier(0.25,0.1,0,1)",this.compassField.style.transition="transform "+t+"ms cubic-bezier(0.25,0.1,0,1)",n>180||n<-180?(this.compassRing.style.transform="rotate(360deg)",this.compassField.style.transform="rotate(360deg)"):(this.compassRing.style.transform="rotate(0deg)",this.compassField.style.transform="rotate(0deg)")},t._on360IconUpdate=function(e){this.compassRing.style.transition="transform 0.1s ease",this.compassRing.style.transform="rotate("+e.currentPosition.lon+"deg)",this.compassField.style.transition="transform 0.1s ease",this.compassField.style.transform="rotate("+e.currentPosition.lon+"deg)"},t._onCompassClick=function(e){this._compassIsRotating||(this._player.get360().isAtOrigin?(this._360.on(s.ROTATION_UPDATE,this._on360IconUpdate),this._player.get360().oscillateLongitude()):this._player.panToOrigin())},t._onCompassArrowsClick=function(e){switch(e.target){case this.compassArrowLeft:this._arrowControls.leftArrowDown(e),this._arrowControls.leftArrowUp(e);break;case this.compassArrowRight:this._arrowControls.rightArrowDown(e),this._arrowControls.rightArrowUp(e);break;case this.compassArrowTop:this._arrowControls.upArrowDown(e),this._arrowControls.upArrowUp(e);break;case this.compassArrowBottom:this._arrowControls.downArrowDown(e),this._arrowControls.downArrowUp(e)}},t._onFocusIn=function(e){e.target!==this.compass&&this._showCompassArrows()},t._onFocusOut=function(e){this._hideCompassArrows()},t._onCompassFocusIn=function(e){this._rotateFieldOfViewToOrigin()},t._onCompassFocusOut=function(e){var t=this._get360HorizontalAngle();this.compassField.style.transform="rotate("+t+"deg)"},t._rotateFieldOfViewToOrigin=function(){var e=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",this.compassField.style.transform=e>180?"rotate(360deg)":e<-180?"rotate(-360deg)":"rotate(0deg)"},t._onCompassMouseEnter=function(e){this._hovering=!0,this._compassIsRotating||this._rotateFieldOfViewToOrigin()},t._onCompassMouseLeave=function(e){if(this._hovering=!1,!this._compassIsRotating){var t=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",this.compassField.style.transform="rotate("+t+"deg)"}},t._on360PositionChange=function(){var e=this._get360HorizontalAngle();this.compassRing.style.transition="none",this.compassRing.style.transform="rotate("+e+"deg)",this._hovering||(this.compassField.style.transition="none",this.compassField.style.transform="rotate("+e+"deg)")},t._get360HorizontalAngle=function(){return this._player.get360().position.lon%360},t.destroy=function(){this._removeEventListeners()},e}();e.exports=o},function(e,t,n){var i=n(339),r=function(){function e(e){var t=this;this._player=e.player,this.el=e.el,this.el.innerHTML='<div class="loading-indicator">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n\t\t<div></div>\n    </div>',this._ariaSpan=this._player.controls.el.querySelector("#loading-status"),this._ariaString="",i.getTranslation({callback:function(e){t._ariaString=e.loading,t._isShowing()&&(t._ariaSpan.innerText=t._ariaString)}}),this._showTimeoutDelay=void 0!==e.showTimeoutDelay?e.showTimeoutDelay:500,this._bindMethods(),this._addEventListeners()}var t=e.prototype;return t._bindMethods=function(){this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onSeeking=this._onSeeking.bind(this),this._onSeeked=this._onSeeked.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onError=this._onError.bind(this),this._doShow=this._doShow.bind(this),this._checkLoadingState=this._checkLoadingState.bind(this),this._onPlay=this._onPlay.bind(this),this._onMouseOut=this._onMouseOut.bind(this)},t._addEventListeners=function(){this._player.on("waiting",this.show),this._player.on("seeking",this._onSeeking),this._player.on("seeked",this._onSeeked),this._player.on("playing",this._onPlaying),this._player.on("ended",this._onEnded),this._player.on("canplaythrough",this._checkLoadingState),this._player.on("progress",this._checkLoadingState),this._player.on("error",this._onError),this._player.on("pause",this._onPause),this._player.on("timeupdate",this._checkLoadingState),this._player.on("play",this._onPlay),this._player.controls&&this._player.controls.el.addEventListener("mouseout",this._onMouseOut)},t._removeEventListeners=function(){this._player.off("waiting",this.show),this._player.off("seeking",this._onSeeking),this._player.off("seeked",this._onSeeked),this._player.off("playing",this._onPlaying),this._player.off("ended",this._onEnded),this._player.off("canplaythrough",this._checkLoadingState),this._player.off("progress",this._checkLoadingState),this._player.off("error",this._onError),this._player.off("pause",this._onPause),this._player.off("timeupdate",this._checkLoadingState),this._player.off("play",this._onPlay),this.el.removeEventListener("click",this._onClick),this._player.controls&&this._player.controls.el.removeEventListener("mouseout",this._onMouseOut)},t._onPause=function(){this._isPaused=this._player.getPaused(),this._isPaused&&this.hide()},t._onPlaying=function(){this._isPaused=this._player.getPaused(),this._started=!0,this._checkLoadingState()},t._onPlay=function(){!this._isPaused&&this._started||(this._isPaused=this._player.getPaused(),this._isPaused||(this._started=!0),this._isSeeking=!1,this._checkLoadingState(!0))},t._onSeeking=function(){this._isSeeking=!0,this.show()},t._onSeeked=function(){this._isSeeking=!1,this._checkLoadingState()},t._onEnded=function(){this._started=!1,this.hide()},t._onError=function(){this._started&&this.show(!0)},t._onMouseOut=function(){this._player.isStalled()||this._player.el.classList.remove("was-loading")},t.show=function(e){this._isPaused||(!0!==e&&this._started?(clearTimeout(this._showTimeout),this._showTimeout=setTimeout(this._doShow,this._showTimeoutDelay)):this._doShow())},t._checkLoadingState=function(e){!this._player.getEnded()&&this._started&&(this._player.isStalled()||this._isSeeking)?this.show(!0===e):this.hide()},t._isShowing=function(){return this._player.el.classList.contains("loading")},t._doShow=function(){this._player.el.classList.add("loading"),this._player.el.classList.remove("was-loading"),this._ariaSpan.innerText=this._ariaString},t.hide=function(){clearTimeout(this._showTimeout),this._isShowing()&&(this._player.el.classList.remove("loading"),this._player.el.classList.contains("user-hover")||this._player.el.classList.add("was-loading"),this._ariaSpan.innerText="")},t.destroy=function(){this._removeEventListeners()},e}();e.exports=r},function(e,t,n){"use strict";var i=n(1208);e.exports=function e(){var t=Array.prototype.slice.call(arguments);if(t.length<2)return i(t[0]);var n=i(t.shift(),!0),r=t.shift();for(var a in r)r.hasOwnProperty(a)&&(n.hasOwnProperty(a)&&"object"===typeof n[a]?"object"===typeof n[a]&&"object"===typeof r[a]&&(n[a]=e(n[a],r[a])):n[a]=r[a]);return t.length?e.apply(null,[n].concat(t)):n}},function(e,t,n){"use strict";n(1209);var i=n(661),r=Object.prototype.hasOwnProperty;e.exports=function(e,t){return t?function e(t,n){var i;for(i in n)r.call(n,i)&&(null===n[i]?t[i]=null:"object"===typeof n[i]?(t[i]=Array.isArray(n[i])?[]:{},e(t[i],n[i])):t[i]=n[i]);return t}({},e):i({},e)}},function(e,t){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})},function(e,t){e.exports='\n<div class="controls-container">\n\t<div class="{elementClassPrefix}-social-tray hidden"></div>\n\n\t<div class="center-button-container {elementClassPrefix}-play-pause-button-container">\n\t\t<div class="button-wrapper">\n\t\t\t<button type="button" class="ac-video-icon centered-button {elementClassPrefix}-play-pause-button {elementClassPrefix}-button no-autoplay" value="{playpause}" aria-label="{playpause}" role="button" tabindex="0" data-acv-active-area data-acv-draggable-area>\n\t\t\t\t<div class="loading-indicator-container"></div>\n\t\t\t</button>\n\t\t\t<span id=\'loading-status\' class="acv-visually-hidden" aria-live=\'polite\'></span>\n\t\t</div>\t\t\n\t</div>\n\n\t<div class="main-controls-container">\n\t\t<div class="ac-video-overlay-container"></div>\n\t\t<div class="main-controls">\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<div class="main-controls-item controls-volume">\n\t\t\t\t\t<button type="button" class="ac-video-icon {elementClassPrefix}-toggle-mute-volume-button {elementClassPrefix}-button" value="{togglemutevolume}" aria-label="{togglemutevolume}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t\t<div class="{elementClassPrefix}-volume-level-indicator" tabindex="0" aria-valuemin="0" aria-valuemax="100" min="0" max="100" aria-label="{adjustvolume}" role="slider" aria-orientation="vertical" step="0.05" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-text-tracks-toggle-button {elementClassPrefix}-button no-text-tracks" value="{captionscontrol}" aria-label="{captionscontrol}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t<div class="ac-video-captions-selector-container">\n\t\t\t\t\t<span class="ac-video-captions-selector-title">{subtitlescontrol}</span>\n\t\t\t\t\t<ul class="{elementClassPrefix}-captions-selector" role="radiogroup" aria-label="{subtitlescontrol}" data-acv-active-area></ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item controls-progress">\n\t\t\t\t<div class="controls-progress-time controls-progress-time-1">\n\t\t\t\t\t<div class="{elementClassPrefix}-elapsed-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{elapsed}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-elapsed-time">00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-bar">\n\t\t\t\t\t<div class="{elementClassPrefix}-buffered-indicator"></div>\n\t\t\t\t\t<div class="{elementClassPrefix}-progress-indicator ac-slider-inactive" aria-label="progress-indicator" role="slider" precision="float" min="0" max="1" step="0.0005" value="0" tabindex="0" aria-valuemax="1" aria-valuemin="0" aria-valuenow="{value}" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-time controls-progress-time-2">\n\t\t\t\t\t<div class="{elementClassPrefix}-remaining-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{remaining}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-remaining-time">-00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">-44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <div class="controls-progress-time controls-progress-dvr-label-container" role="button">\n                    \n                        <span class="live-stream-dvr-text">{live}</span>\n                    \n                </div>\t\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item live-stream">\n\t\t\t\t<span class="live-stream-text">{livestream}</span>\n\t\t\t</div>\n\t\t\t\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-airplay-button {elementClassPrefix}-button airplay-unsupported" value="{airplay}" aria-label="{airplay}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-picture-in-picture-button {elementClassPrefix}-button picture-in-picture-unsupported" value="{pictureinpicture}" aria-label="{pictureinpicture}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-full-screen-button {elementClassPrefix}-button fullscreen-unsupported" value="{fullscreen}" aria-label="{fullscreen}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t</div>\n\n\t<div class="end-state-wrapper">\n\t\t<div class="end-state-container"></div>\n\t</div>\n\n\n</div>\n\n<div class="compass-wrapper" data-acv-active-area>\n\t<div class="compass-background ac-video-icon"></div>\n\t<div class="compass-arrows">\n\t\t<button class="compass-arrow-top ac-video-icon" aria-label="{threesixtyup}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-right ac-video-icon" aria-label="{threesixtyright}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-bottom ac-video-icon" aria-label="{threesixtydown}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-left ac-video-icon" aria-label="{threesixtyleft}" role="button" tabindex="0"></button>\n\t</div>\n\t<div class="compass-field ac-video-icon"></div>\n\t<div class="compass-ring ac-video-icon"></div>\n\t<button class="compass" aria-label="{threesixtyicon}" role="button" tabindex="0"></button>\n</div>\n'},function(e,t,n){"use strict";var i={components:n(652),controlsImplementation:n(666)};e.exports=function(e){e=e||{};var t=Object.assign({},i,e);return{create:function(n){var r=Object.assign({},t,n);return r.components=e.components||i.components,new r.controlsImplementation(r)}}}},function(e,t,n){"use strict";e.exports=n(1213)},function(e,t,n){"use strict";var i=n(338),r=/_r[0-9].+\.mov$/,a=/_[0-9]+x[0-9].+\.mp4$/,s=/_[0-9]+x[0-9].+\.(mp4|m3u8)$/,o=/_[0-9]+x[0-9]*.+\.(mp4|m3u8)/,l=/_([0-9]+)x([0-9]+)/,c=/-tpl-.*-/,u=/-cc-[a-z].*-/,d=/-tft-.*-/,h=n(1214),p=n(1215),f=n(1216),g=n(1217),m=function(e,t){return e.find((function(e){return e.width===t.width&&(e.height=t.height)||e.width===t.height&&(e.height=t.width)}))};e.exports={getVideoSource:function(e,t,n,o){var c,u;l.test(e);var _,v={};if(v.width=parseInt(RegExp.$1,10),v.height=parseInt(RegExp.$2,10),e.match(d))c=f,u=1536;else if(v.width===v.height)c=h,u=1080;else if(e.match(r)||m(p,v))c=p,u=1280;else{if(!m(g,v))return e;c=g,u=1624}v.width<v.height&&(_=!0);var b,y=c[0].width,w=o&&o.maxWidth?Math.max(o.maxWidth,y):u;if(!e)throw"Must provide an url to optimize";if(void 0===t||isNaN(t))throw"Must provide a width";0===t&&(t=v.width),n&&(c=c.filter((function(e){return e.type===n}))),w<1920&&(c=c.filter((function(e){return e.width<=w}))),(b=_?c.reduce((function(e,n){return Math.abs(n.height-t)<Math.abs(e.height-t)?n:e})):c.reduce((function(e,n){return Math.abs(n.width-t)<Math.abs(e.width-t)?n:e}))).extension=e.indexOf(".m3u8")>=0?"m3u8":"mp4";var I="_{width}x{height}{suffix}.{extension}";_&&(I="_{height}x{width}{suffix}.{extension}");var S=a;return o&&o.urlOptimizeHls&&(S=s),e.match(S)?e.replace(S,i(I,b)):e.match(r)?e.replace(r,i(I,b)):e},getCaptionsSource:function(e){return e.match(u)?e.match(a)?{src:e.replace(a,"_cc.vtt"),srclang:"en"}:e.match(r)?{src:e.replace(r,"_cc.vtt"),srclang:"en"}:null:null},getThumbnailImageSource:function(e){return e.match(c)?{url:e.replace(o,"_thumbnails.jpg")}:null}}},function(e,t,n){"use strict";e.exports=[{width:480,height:480,type:"medium",suffix:""},{width:540,height:540,type:"medium",suffix:""},{width:720,height:720,type:"large",suffix:"h"},{width:720,height:720,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"h"}]},function(e,t,n){"use strict";e.exports=[{width:640,height:360,type:"medium",suffix:"h"},{width:848,height:480,type:"large",suffix:""},{width:960,height:540,type:"large",suffix:""},{width:1280,height:720,type:"large",suffix:"h"},{width:1280,height:720,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"h"}]},function(e,t,n){"use strict";e.exports=[{width:480,height:200,type:"medium",suffix:"h"},{width:768,height:320,type:"large",suffix:""},{width:960,height:400,type:"large",suffix:""},{width:1536,height:640,type:"large",suffix:"h"},{width:1536,height:640,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"h"}]},function(e,t,n){"use strict";e.exports=[{width:812,height:375,type:"medium",suffix:"h"},{width:1082,height:500,type:"large",suffix:""},{width:1218,height:563,type:"large",suffix:""},{width:1624,height:750,type:"large",suffix:"h"},{width:1624,height:750,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"h"}]},function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(515),a=n(646),s=n(252).os,o=s.ios||s.android||!n(340)(),l=function(e){var t,n;function r(t){var n;return n=e.call(this,t)||this,t.threesixty&&n.el.classList.add("threesixty-video"),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=r.prototype;return s._bindMethods=function(){e.prototype._bindMethods.call(this),this._showCompass=this._showCompass.bind(this),this._hideCompass=this._hideCompass.bind(this),this.panToOrigin=this.panToOrigin.bind(this)},s._addEventListeners=function(){e.prototype._addEventListeners.call(this)},s._removeEventListeners=function(){e.prototype._removeEventListeners.call(this),this.controls.compass.removeEventListener("click",this.panToOrigin)},s._showCompass=function(){this.el.classList.add("threesixty-ui")},s._hideCompass=function(){this.el.classList.remove("threesixty-ui")},s._instantiateDefaultCustomUIControls=function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,threesixty:!0,enableMainControls:!0,basePath:this.options.localizationBasePath,template:this.options.template,readyCallback:function(){this.options.autoplay&&!o||this._showStartState(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=a({player:this,keyboardControl:this._keyboardControl,threesixty:!0,controlsTimeoutDuration:this.options.controlsTimeoutDuration,threesixtyElementsTimeoutDuration:this.options.threesixtyElementsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,showCompass:this._showCompass,hideCompass:this._hideCompass,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls},s.panToOrigin=function(){this.get360().panToPosition({lat:0,lon:0})},s.get360=function(){return this._videoImpl.get360()},s.getFullScreenElement=function(){return this.el},s.getFullScreenEnabled=function(){return!o&&e.prototype.getFullScreenEnabled.call(this)},r}(r);e.exports=l},function(e,t,n){"use strict";var i=t;function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(667),i.BufferWriter=n(1228),i.Reader=n(668),i.BufferReader=n(1229),i.util=n(308),i.rpc=n(1230),i.roots=n(1232),i.configure=r,r()},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,s){n[i]=function(e){if(a)if(a=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(o){a&&(a=!1,s(o))}}))}},function(e,t,n){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),a=new Array(123),s=0;s<64;)a[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;i.encode=function(e,t,n){for(var i,a=null,s=[],o=0,l=0;t<n;){var c=e[t++];switch(l){case 0:s[o++]=r[c>>2],i=(3&c)<<4,l=1;break;case 1:s[o++]=r[i|c>>4],i=(15&c)<<2,l=2;break;case 2:s[o++]=r[i|c>>6],s[o++]=r[63&c],l=0}o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0)}return l&&(s[o++]=r[i],s[o++]=61,1===l&&(s[o++]=61)),a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))},i.decode=function(e,t,n){for(var i,r=n,s=0,o=0;o<e.length;){var l=e.charCodeAt(o++);if(61===l&&s>1)break;if(void 0===(l=a[l]))throw Error("invalid encoding");switch(s){case 0:i=l,s=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:t[n++]=(3&i)<<6|l,s=0}}if(1===s)throw Error("invalid encoding");return n-r},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},function(e,t,n){"use strict";function i(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function a(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function o(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:a,e.writeFloatBE=i?a:r,e.readFloatLE=i?s:o,e.readFloatBE=i?o:s}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),r=2*(i>>31)+1,a=i>>>23&255,s=8388607&i;return 255===a?s?NaN:r*(1/0):0===a?1401298464324817e-60*r*s:r*Math.pow(2,a-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,a),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,o)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function a(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function o(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:a,e.writeDoubleBE=i?a:r,e.readDoubleLE=i?s:o,e.readDoubleBE=i?o:s}():function(){function t(e,t,n,i,r,a){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,r,a+t),e(1/i>0?0:2147483648,r,a+n);else if(isNaN(i))e(0,r,a+t),e(2146959360,r,a+n);else if(i>17976931348623157e292)e(0,r,a+t),e((s<<31|2146435072)>>>0,r,a+n);else{var o;if(i<22250738585072014e-324)e((o=i/5e-324)>>>0,r,a+t),e((s<<31|o/4294967296)>>>0,r,a+n);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(o=i*Math.pow(2,-l))>>>0,r,a+t),e((s<<31|l+1023<<20|1048576*o&1048575)>>>0,r,a+n)}}}function n(e,t,n,i,r){var a=e(i,r+t),s=e(i,r+n),o=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+a;return 2047===l?c?NaN:o*(1/0):0===l?5e-324*o*c:o*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,o,4,0)}(),e}function r(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function a(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,a=[],s=0;t<n;)(i=e[t++])<128?a[s++]=i:i>191&&i<224?a[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[s++]=55296+(i>>10),a[s++]=56320+(1023&i)):a[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))},i.write=function(e,t,n){for(var i,r,a=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&56320===(64512&(r=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&r),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-a}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,a=null,s=i;return function(n){if(n<1||n>r)return e(n);s+n>i&&(a=e(i),s=0);var o=t.call(a,s,s+=n);return 7&s&&(s=1+(7|s)),o}}},function(e,t,n){"use strict";e.exports=r;var i=n(308);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var a=r.zero=new r(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return a;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"===typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):a},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?a:new r((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=a;var i=n(667);(a.prototype=Object.create(i.prototype)).constructor=a;var r=n(308);function a(){i.call(this)}function s(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}a._configure=function(){a.alloc=r._Buffer_allocUnsafe,a.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},a.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a.writeBytesBuffer,t,e),this},a.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},a._configure()},function(e,t,n){"use strict";e.exports=a;var i=n(668);(a.prototype=Object.create(i.prototype)).constructor=a;var r=n(308);function a(e){i.call(this,e)}a._configure=function(){r.Buffer&&(a.prototype._slice=r.Buffer.prototype.slice)},a.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},a._configure()},function(e,t,n){"use strict";t.Service=n(1231)},function(e,t,n){"use strict";e.exports=r;var i=n(308);function r(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,a,s){if(!a)throw TypeError("request must be specified");var o=this;if(!s)return i.asPromise(e,o,t,n,r,a);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(e,n){if(e)return o.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),s(e)}return o.emit("data",n,t),s(null,n)}o.end(!0)}))}catch(l){return o.emit("error",l,t),void setTimeout((function(){s(l)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,Math.floor(Math.log(e)/Math.log(10)+1e-9)-(t-1));return Math.round(e/n)*n}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,r=n(750),a=n(751);function s(){return i=Object(r.a)(i),Object(a.a)(i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(20),a=n(13),s=n(7),o=n(55),l=n(120),c=n(15),u=n(757),d=i.a.extend(r.b,{staticMembers:{originForURL:function(e){e||a.b("Nonexistent `url` is being attempted to be sharded.");var t=e.indexOf("://");-1===t&&a.b("Sharding for relative URLs is unsupported.");var n=e.indexOf("/",t+3);return e.substring(0,-1===n?e.length:n)},__QUALIFIED_CLASS_NAME__:"OriginSharder"},maxTotalConcurrentRequests:s.b(0),registerUrlTransform:function(e){this._incomingUrlTransforms.push(e)},_incomingUrlTransforms:o.c(Array),_totalInflightRequestCount:0,_shardProviders:o.c(Object),configureOrigin:function(e,t,n,i){if(l.a(e))return this.configureOrigin(e.origin,e.applyShardToOrigin,e.shardCount,e.maxRequestsPerShard);var r=this.constructor.originForURL(e);this._shardProviders[r]&&a.b("Cannot configure sharding options for an origin that has already been configured. Note that origins will be configured automatically with default settings if a request is made against them."),this._shardProviders[r]=h.create.apply(h,arguments)},allocateShardedURL:function(e){if(this._totalInflightRequestCount>=this.maxTotalConcurrentRequests)return null;for(var t,n=e,i=0;t=this._incomingUrlTransforms[i];i++)n=t.call(this,n);n=Object(u.a)(n);var r=this.constructor.originForURL(n),a=this._shardProviders[r]||(this._shardProviders[r]=h.create(r)),s=a.allocateShard();if(isNaN(s))return null;var o=a.shardedOriginForShardNumber(s);return this._shardProviders[o]||(this._shardProviders[o]=a),this._totalInflightRequestCount++,o+n.substring(r.length)},deallocateShardedURL:function(e){var t=this.constructor.originForURL(e),n=this._shardProviders[t];n||a.b("Attempting to deallocate a shard for a URL whose origin hasn't yet had a shard allocated in the first place."),n.deallocateShard(n.shardNumberForShardedOrigin(t)),this._totalInflightRequestCount--}}),h=i.a.extend({origin:"",shardCount:1,maxRequestsPerShard:6,init:function(e,t,n,i){this.origin=e,this._applyShardToOrigin=t||this._applyShardToOrigin,this.shardCount=n||this.shardCount,this.maxRequestsPerShard=i||this.maxRequestsPerShard,this.__s._$25H$init.call(this);for(var r=0;r<this.shardCount;r++)this.inflightRequestCounts[r]=0},shardedOriginForShardNumber:function(e){var t=this._shardedOriginsByShardNumber[e];return t||(t=this._applyShardToOrigin(this.origin,e),this._shardNumbersByShardedOrigin[t]&&a.b("Implementation for applyShardToOrigin maps two inputs to the same output. The function must be one-to-one in both directions."),this._shardedOriginsByShardNumber[e]=t,this._shardNumbersByShardedOrigin[t]=e),t},shardNumberForShardedOrigin:function(e){var t=this._shardNumbersByShardedOrigin[e];return void 0===t&&a.b("Must provide a sharded origin to find the corresponding shard number."),t},_applyShardToOrigin:function(e,t){return t>0&&a.b("Must provide implementation for applyShardToOrigin when configuring sharding options for "+this.origin+"."),e},_shardedOriginsByShardNumber:o.c(Array),_shardNumbersByShardedOrigin:o.c(Object),inflightRequestCounts:o.c(Array),inflightRequestCount:c.d({readOnly:!0,get:function(){for(var e=0,t=this.shardCount,n=this.inflightRequestCounts,i=0;i<t;i++)e+=n[i];return e}}),unusedCapacity:c.d({readOnly:!0,get:function(){return this.shardCount*this.maxRequestsPerShard-this.inflightRequestCount}}),allocateShard:function(){var e=this.inflightRequestCounts,t=Math.min.apply(Math,e);if(t===this.maxRequestsPerShard)return NaN;var n=e.indexOf(t);return e[n]++,n},deallocateShard:function(e){0===this.inflightRequestCounts[e]&&a.b("Attempting to deallocate shard that was not allocated."),this.inflightRequestCounts[e]--},__superMap:{_$25H$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ShardProvider"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return h}));var i=n(98),r=n(760),a=n(356),s=n(25);function o(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,l,"next",e)}function l(e){o(a,i,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg";return u(e,t,n,.75)}function u(e,t,n,i){return d.apply(this,arguments)}function d(){return(d=l(regeneratorRuntime.mark((function e(t,n,o,l){var c,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.objectPool.getInstance(),e.next=3,Object(r.a)((function(e){var n=s.canvasPool.getInstance(),r=Math.round((t.naturalWidth||t.width)*e),u=Math.round((t.naturalHeight||t.height)*e);n.width=r,n.height=u,Object(a.b)(n.getContext("2d"),t,0,0,r,u);var d=i.a.create();return n.toBlob((function(t){s.canvasPool.disposeInstance(n),c[e]=t,d.resolve(t.size)}),o,l),d}),n,0,1,.05*n,0,1/Math.max(t.width,t.height));case 3:return u=e.sent,d=c[u],s.objectPool.disposeInstance(c),e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n,i){var r=s.canvasPool.getAutodisposingInstanceAtSize(n||t.naturalWidth||t.width,i||t.naturalHeight||t.height),o=r.getContext("2d");Object(a.b)(o,t,0,0,r.width,r.height),o.globalCompositeOperation="difference",Object(a.b)(o,e,0,0,r.width,r.height),o.globalCompositeOperation="lighter";for(var l=0;l<6;l++)o.drawImage(r,0,0);o.globalCompositeOperation="source-over";var c=s.canvasPool.getAutodisposingInstance(),u=c.getContext("2d");c.width=c.height=1,Object(a.b)(u,r,0,0,1,1);var d=u.getImageData(0,0,1,1).data;return 765/(d[0]+d[1]+d[2])-1}n(1237)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s})),n(670);var i={type:void 0},r=[],a=function(e){return e.charCodeAt(0)};function s(){HTMLCanvasElement.prototype.toBlob instanceof Function||(HTMLCanvasElement.prototype.toBlob=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.92,s=this.toDataURL(t,n);globalThis.setImmediate((function(){var n=s.slice(s.indexOf(",")+1),o=atob(n),l=Uint8Array.from(o,a);r[0]=l,i.type=t;var c=new Blob(r,i);e(c),r[0]=void 0}))})}s()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(98),r=n(25),a=n(266);function s(e){var t=r.objectPool.getInstance(),n=t.promise=i.a.create(),s=t.fileReader=new FileReader;return s.onload=t.handleLoad=Object(a.b)(o,void 0,t).retain(),s.onerror=t.handleError=Object(a.b)(l,void 0,t).retain(),s.readAsArrayBuffer(e),n}var o=function(e,t){e.promise.resolve(t.target.result),c(e)},l=function(e,t){var n=new Error("Couldn\u2019t load blob to read as ArrayBuffer.");n.event=t,e.promise.reject(n),c(e)},c=function(e){e.fileReader.onload=e.fileReader.onerror=null,e.handleLoad.release(),e.handleError.release(),r.objectPool.disposeInstance(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){if(null===e)return"";var t=Math.round(e/1e3),n=t%60,i=t/60%60|0,a=t/3600|0;return 0===a&&0===i&&0===n&&e>0&&(n=1),a?a+":"+r(i)+":"+r(n):i+":"+r(n)},r=function(e){return("00"+e).slice(-2)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(262),r=n(7),a=n(20),s=n(55),o=n(256),l=n(771).a.extend({dispose:function(){var e=this,t=arguments;e.__s._$AY$dispose.apply(e,t),cancelAnimationFrame(this._scheduledMeasurement)},targetLayout:Object(s.c)(i.a),targetIsHidden:Object(r.b)({dependencies:["target.isAttached","_targetMeasurementFailed"],readOnly:!0,get:Object.assign((function(){return!this.getPath("target.isAttached")||this._targetMeasurementFailed}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_targetMeasurementFailed:Object(r.b)(!1),recomputeLayoutIfNecessary:Object(a.h)({inputs:["shouldMeasure"],callback:function(e){if(cancelAnimationFrame(this._scheduledMeasurement),this._targetMeasurementFailed=!1,e){var t=function(){var e=this.target,n=this.targetLayout,i=e.element;if(i){var r=i.getBoundingClientRect(),a=r.left,s=r.top,l=r.width,c=r.height;0===a&&0===s&&0===l&&0===c?this._targetMeasurementFailed=!0:(this._targetMeasurementFailed=!1,n.beginBatchSet().setIfChanged("x",a).setIfChanged("y",s).setIfChanged("width",l).setIfChanged("height",c).end())}this._scheduledMeasurement=Object(o.a)(t)}.bind(this);t()}}}),__superMap:{_$AY$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DOMLayoutMeasurer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(98),r=n(127),a=n(13),s=n(572).a.extend({callRemoteProcedure:function(e){var t,n=this.channel;l(n,e);for(var r=i.a.create(),a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var u=(t=this.messageFormatter).generateCallMessageFor.apply(t,[e].concat(s));return c(r,u.id,this),n.send(this.serializer.encode(u)),r},sendNotification:function(e){var t,n=this.channel;l(n,e);for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var s=(t=this.messageFormatter).generateNotificationMessageFor.apply(t,[e].concat(r));n.send(this.serializer.encode(s))},shouldHandleMessage:function(e){return!!e&&Object(r.a)(e.jsonrpc)&&e.jsonrpc===this.messageFormatter.jsonRpcVersion&&(Object(r.a)(e.result)||Object(r.a)(e.error))},handleMessage:function(e){var t=function(e,t){var n=o[e];if(n&&n[1]===t)return o[e]=void 0,n[0]}(e.id,this);if(t){if(Object(r.a)(e.result))return function(e,t){t.resolve(e.result)}(e,t),t;if(Object(r.a)(e.error))return function(e,t){t.reject(e.error)}(e,t),t}},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcCaller"}}),o={};function l(e,t){e&&!e.isDisconnected||Object(a.b)("Attempted to call `%{methodName}` without a connected channel.",{methodName:t,sender:this})}function c(e,t,n){o[t]&&o[t][1]===n&&Object(a.b)("A handler was already registered for response for message id",{messageId:t,handler:n}),o[t]=[e,n]}},function(e,t,n){"use strict";n(0),n(4),n(6),n.d(t,"a",(function(){return h}));var i=n(7),r=n(17),a=n(143),s=n(82),o=n(13),l=n(20),c=n(255),u=n(202),d=n(404),h={mixinDependencies:[n(403).a],baseInsetsProvider:i.b(),automaticInsetsRecipients:[],baseInsetTop:i.b(0),baseInsetLeft:i.b(0),baseInsetRight:i.b(0),baseInsetBottom:i.b(0),insetTop:i.b({readOnly:!0,dependencies:["baseInsetTop"],get:Object.assign((function(){return this.baseInsetTop+p(this._insetTops)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetTops)}})}),insetLeft:i.b({readOnly:!0,dependencies:["baseInsetLeft"],get:Object.assign((function(){return this.baseInsetLeft+p(this._insetLefts)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetLefts)}})}),insetRight:i.b({readOnly:!0,dependencies:["baseInsetRight"],get:Object.assign((function(){return this.baseInsetRight+p(this._insetRights)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetRights)}})}),insetBottom:i.b({readOnly:!0,dependencies:["baseInsetBottom"],get:Object.assign((function(){return this.baseInsetBottom+p(this._insetBottoms)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+p(this._insetBottoms)}})}),registerInsetTop:function(e,t){this._registerInset("top",e,t)},registerInsetLeft:function(e,t){this._registerInset("left",e,t)},registerInsetRight:function(e,t){this._registerInset("right",e,t)},registerInsetBottom:function(e,t){this._registerInset("bottom",e,t)},insetWidth:i.b({readOnly:!0,dependencies:["viewportWidth","insetLeft","insetRight"],get:Object.assign((function(){return Math.max(0,this.viewportWidth-this.insetLeft-this.insetRight)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n]))}})}),insetHeight:i.b({readOnly:!0,dependencies:["viewportHeight","insetTop","insetBottom"],get:Object.assign((function(){return Math.max(0,this.viewportHeight-this.insetTop-this.insetBottom)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n]))}})}),insetCenterX:i.b({readOnly:!0,dependencies:["insetLeft","insetWidth","viewportWidth"],get:Object.assign((function(){return Math.min(this.viewportWidth,Math.round(this.insetLeft+this.insetWidth/2))}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n]),Math.round(i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])/2))}})}),insetCenterY:i.b({readOnly:!0,dependencies:["insetTop","insetHeight","viewportHeight"],get:Object.assign((function(){return Math.min(this.viewportHeight,Math.round(this.insetTop+this.insetHeight/2))}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n]),Math.round(i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])/2))}})}),insetTopCenterTop:i.b({readOnly:!0,dependencies:["insetTop"],get:Object.assign((function(){return this.insetTop/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetLeftCenterLeft:i.b({readOnly:!0,dependencies:["insetLeft"],get:Object.assign((function(){return this.insetLeft/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetRightCenterRight:i.b({readOnly:!0,dependencies:["insetRight"],get:Object.assign((function(){return this.insetRight/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),insetBottomCenterBottom:i.b({readOnly:!0,dependencies:["insetBottom"],get:Object.assign((function(){return this.insetBottom/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),registerInsets:function(e,t,n,i,a){r.a.pause(),this.registerInsetTop(e,t),this.registerInsetLeft(e,n),this.registerInsetRight(e,i),this.registerInsetBottom(e,a),r.a.resume()},_registerInset:function(e,t,n){var i="inset"+e[0].toUpperCase()+e.slice(1),r="_"+i+"s",s=this[r];s||(s=this[r]=Object.create(null));var o=a.b(t),l=n>=0||n<0?n:0;s[o]!==l&&(s[o]=l,this.propertyChanged(i))},init:function(){var e=this,t=arguments;e.__s._$28M$init.apply(e,t),this._setUpInsetsRecipients()},_setUpInsetsRecipients:function(){(this.automaticInsetsRecipients||f).forEach(this._setUpInsetsRecipientAtPath,this)},_setUpInsetsRecipientAtPath:function(e){var t=e.replace(/\./g,"__"),n=t+"_recipientObject",i=t+"_insetTop",a=t+"_insetLeft",l=t+"_insetRight",c=t+"_insetBottom";this.observe(e,"insetTop","insetLeft","insetRight","insetBottom",(function(e,t,u,d,p){var f=this[n],g=f!==e;g&&(f&&f.registerInsets(this,0,0,0,0),this[n]=e),e&&(s.a(e,h)||o.b("Object set up as an Insets recipient lacks InsetsSupport."),r.a.pause(),(this[i]!==t||g)&&(this[i]=t,e.registerInsetTop(this,t)),(this[a]!==u||g)&&(this[a]=u,e.registerInsetLeft(this,u)),(this[l]!==d||g)&&(this[l]=d,e.registerInsetRight(this,d)),(this[c]!==p||g)&&(this[c]=p,e.registerInsetBottom(this,p)),r.a.resume())}))},_maintainBaseInsets:l.h({inputs:["baseInsetsProvider","baseInsetsProvider.insetTop","baseInsetsProvider.insetLeft","baseInsetsProvider.insetRight","baseInsetsProvider.insetBottom"],callback:function(e,t,n,i,a){var s=this._lastBIP,o=s!==e;o&&(s&&this.registerInsets(s,0,0,0,0),this._lastBIP=e),e&&(r.a.pause(),(this._lastBIT!==t||o)&&(this._lastBIT=t,this.registerInsetTop(e,t)),(this._lastBIL!==n||o)&&(this._lastBIL=n,this.registerInsetLeft(e,n)),(this._lastBIR!==i||o)&&(this._lastBIR=i,this.registerInsetRight(e,i)),(this._lastBIB!==a||o)&&(this._lastBIB=a,this.registerInsetBottom(e,a)),r.a.resume())}}),shouldRenderInsetsToScrollIndicators:i.b(!0),_automaticallyRenderInsetsToScrollIndicators:l.h("shouldRenderInsetsToScrollIndicators","insetTop","insetLeft","insetRight","insetBottom",(function(){this.shouldRenderInsetsToScrollIndicators&&this.renderInsetsToScrollIndicators()})),renderInsetsToScrollIndicators:function(){var e=this.instanceOf(c.a)?this.view:this;if(s.a(e,u.a)&&e.hasMixin(d.a)&&(this===e||!e.hasMixin(h))){var t=this.insetTop,n=this.insetLeft,i=this.insetRight,r=this.insetBottom,a=e.verticalScrollIndicator;a&&a.style.set("margin-right",i).set("margin-bottom",r).set("margin-top",t).set("position","absolute");var o=e.horizontalScrollIndicator;o&&o.style.set("margin-bottom",r).set("margin-right",i).set("margin-left",n).set("position","absolute")}},shouldRenderInsetsAsPositioning:i.b(!1),_automaticallyRenderInsetsAsPositioning:l.h("shouldRenderInsetsAsPositioning","insetTop","insetLeft","insetRight","insetBottom",(function(){this.shouldRenderInsetsAsPositioning&&this.renderInsetsAsPositioning()})),renderInsetsAsPositioning:function(){var e=this.instanceOf(c.a)?this.view:this;s.a(e,u.a)&&e.style.set("top",this.insetTop).set("left",this.insetLeft).set("right",this.insetRight).set("bottom",this.insetBottom)},__superMap:{_$28M$init:"init"}};function p(e){if(!e)return 0;var t=0;for(var n in e)t+=Number(e[n])||0;return t}var f=[]},function(e,t,n){"use strict";n(6),n(0),n(4),n.d(t,"a",(function(){return a}));var i=n(7),r=n(382),a={mixinDependencies:[n(404).a],horizontalScrollIndicatorClass:r.a,verticalScrollIndicatorClass:r.c,scrollIndicatorsShouldFade:Object(i.b)(!0),didScrollBy:function(e,t,n){if(e||n&&n.deltaX&&this.canScrollHorizontally){var i=this.horizontalScrollIndicator;i&&i.didScroll(n)}if(t||n&&n.deltaY&&this.canScrollVertically){var r=this.verticalScrollIndicator;r&&r.didScroll(n)}},showScrollIndicators:function(){var e=this.horizontalScrollIndicator;e&&e.renewVisibility();var t=this.verticalScrollIndicator;t&&t.renewVisibility()},createScrollIndicatorOptions:function(e){var t=this,n=arguments,i=t.__s._$jT$createScrollIndicatorOptions.apply(t,n);return i.scrollIndicatorShouldFade=this.bindingFor("scrollIndicatorsShouldFade"),i},__superMap:{_$jT$createScrollIndicatorOptions:"createScrollIndicatorOptions"}}},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21"><polygon stroke="none" points="10,0 11,0 11,10 21,10 21,11 11,11 11,21 10,21 10,11 0,11 0,10 10,10 "/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 43"><path stroke-width="2" fill="none" d="M25,10c0,0-3-9-12-9C5.8,1,1,6.9,1,12c0,4.1,1.4,7.4,4.2,10.2C5.2,22.2,25,42,25,42l19.8-19.8 C47.6,19.4,49,16.1,49,12c0-5.1-4.8-11-12-11C28,1,25,10,25,10z"/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 18"><path stroke="none" d="M0,0v18h22V0H0z M1,17V1h6v16H1z M21,17H8V1h13V17z"/><rect stroke="none" x="2" y="3" width="3.5" height="1"/><rect stroke="none" x="2" y="6" width="3.5" height="1"/><rect stroke="none" x="2" y="9" width="3.5" height="1"/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 50"><polyline fill="none" stroke-width="2" points="12,8 19,1 26,8 "/><line fill="none" stroke-width="2" x1="19" y1="1" x2="19" y2="34"/><polyline fill="none" stroke-width="2" points="24,15 37,15 37,49 1,49 1,15 14,15 "/></svg>\n'},function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 36"><rect x="6" y="6" stroke-width="0" fill-opacity="0.2" width="32" height="16"/><rect x="1" y="1" fill="none" stroke-width="2" width="42" height="34"/><line fill="none" stroke-width="2" x1="1" y1="27" x2="43" y2="27"/><rect x="4" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="10" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="30" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="36" y="28" stroke-width="0" fill-opacity="0.2" width="4" height="6"/><rect x="16" y="28" stroke-width="0" fill-opacity="0.2" width="12" height="6"/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 46"><polyline fill="none" stroke-width="2" points="0,7 9,7 34,7 "/><path fill="none" stroke-width="2" d="M9,6c0,0,0-2,0-3s1-2,2-2c1.7,0,10.3,0,12,0c1,0,2,1,2,2s0,3,0,3"/><line fill="none" stroke-width="2" x1="17" y1="12" x2="17" y2="40"/><line fill="none" stroke-width="2" x1="10" y1="12" x2="11.5" y2="40"/><line fill="none" stroke-width="2" x1="22.5" y1="40" x2="24" y2="12"/><path fill="none" stroke-width="2" d="M3,7c0,0,2,34,2,35c0,2,1,3,3,3c1,0,17,0,18,0c2,0,3-1,3-3c0-1,2-35,2-35"/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 48"><path fill="none" stroke-width="2" d="M34,33h8c5.5,0,8.7-4.7,8.8-9c0-5-3.8-8.9-7.8-9c-0.1,0,0-0.2,0-0.2c0-8.5-7.8-13.5-12.7-13.5c-5.6,0-9.9,3.1-12.2,7.2v0c-4.9-3.2-10.7,1.6-10.5,5.8v0c-4,0.6-6.3,5.7-6.2,9.2c0,3.4,1.9,9.5,9.8,9.5l9,0"/><line fill="none" stroke-width="2" x1="27" y1="16" x2="27" y2="48"/><polyline fill="none" stroke-width="2" points="35,24.5 27,16.5 19,24.5 "/></svg>\n'},function(e,t){e.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><circle fill="none" stroke-width="2" cx="22" cy="22" r="21"/><path fill="none" stroke-width="3" d="M22 28v-3c0-3.8 3.6-5.4 5-7 .7-.8 1-2 1-4 0-2.6-2.4-5.5-6-5.5-4.5 0-6 3.5-6 5.5"/><circle cx="22" cy="33.5" r="2"/></svg>'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 19"><polyline fill="none" stroke-width="3" points="1,1.5 16,16.5 31,1.5 "/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 50"><path fill="none" stroke-width="2"  d="M34,33h8c5.5,0,8.7-4.7,8.8-9c0-5-3.8-8.9-7.8-9c-0.1,0,0-0.2,0-0.2c0-8.5-7.8-13.5-12.7-13.5c-5.6,0-9.9,3.1-12.2,7.2v0c-4.9-3.2-10.7,1.6-10.5,5.8v0c-4,0.6-6.3,5.7-6.2,9.2c0,3.4,1.9,9.5,9.8,9.5l9,0"/><line fill="none" stroke-width="2"  x1="27" y1="16" x2="27" y2="48"/><polyline fill="none" stroke-width="2"  points="19,40.5 27,48.5 35,40.5 "/></svg>\n'},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(231),r=n(7),a=n(20),s={mixinDependencies:[n(403).a,i.a],retractionAttachment:r.b(null),retractionAmount:i.b(0),fadesWhileRetracting:r.b(!1),retractionAxis:r.b({readOnly:!0,dependencies:["retractionAttachment"],get:Object.assign((function(){switch(this.retractionAttachment){case"top":case"bottom":return"vertical";case"left":case"right":return"horizontal";default:return null}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"top":case"bottom":return"vertical";case"left":case"right":return"horizontal";default:return null}}})}),retractionDirection:r.b({readOnly:!0,dependencies:["retractionAttachment"],get:Object.assign((function(){switch(this.retractionAttachment){case"top":case"left":return-1;case"bottom":case"right":return 1;default:return 0}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"top":case"left":return-1;case"bottom":case"right":return 1;default:return 0}}})}),finalRetractionAmount:r.b({readOnly:!0,dependencies:["retractionAmount"],get:function(){return this.getFinalValue("retractionAmount")},writeDependencies:[]}),isFullyRetracted:r.b({readOnly:!0,dependencies:["retractionAmount"],get:Object.assign((function(){return 1===this.retractionAmount}),{__CW__getter:function(e,t,n,i){return 1===i.internalGet(this,t[0+n])}}),writeDependencies:[]}),isNotFullyRetracted:r.b({readOnly:!0,dependencies:["isFullyRetracted"],get:Object.assign((function(){return!this.isFullyRetracted}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),retractedWidth:r.b({readOnly:!0,dependencies:["retractionAmount","retractionAxis","viewportWidth"],get:Object.assign((function(){return"horizontal"!==this.retractionAxis?this.viewportWidth:Math.round((1-this.retractionAmount)*this.viewportWidth)}),{__CW__getter:function(e,t,n,i){return"horizontal"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),finalRetractedWidth:r.b({readOnly:!0,dependencies:["finalRetractionAmount","retractionAxis","viewportWidth"],get:Object.assign((function(){return"horizontal"!==this.retractionAxis?this.viewportWidth:Math.round((1-this.finalRetractionAmount)*this.viewportWidth)}),{__CW__getter:function(e,t,n,i){return"horizontal"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),retractedHeight:r.b({readOnly:!0,dependencies:["retractionAmount","retractionAxis","viewportHeight"],get:Object.assign((function(){return"vertical"!==this.retractionAxis?this.viewportHeight:Math.round((1-this.retractionAmount)*this.viewportHeight)}),{__CW__getter:function(e,t,n,i){return"vertical"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),finalRetractedHeight:r.b({readOnly:!0,dependencies:["finalRetractionAmount","retractionAxis","viewportHeight"],get:Object.assign((function(){return"vertical"!==this.retractionAxis?this.viewportHeight:Math.round((1-this.finalRetractionAmount)*this.viewportHeight)}),{__CW__getter:function(e,t,n,i){return"vertical"!==i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n]):Math.round((1-i.internalGet(this,t[0+n]))*i.internalGet(this,t[2+n]))}}),writeDependencies:[]}),retract:function(e){1!==this.getFinalValue("retractionAmount")&&(0===e||isNaN(this.retractionAmount)?this.retractionAmount=1:this.animate("retractionAmount",1,e||250))},unretract:function(e){0!==this.getFinalValue("retractionAmount")&&(0===e||isNaN(this.retractionAmount)?this.retractionAmount=0:this.animate("retractionAmount",0,e||250))},toggleRetraction:function(e){0!==this.getFinalValue("retractionAmount")?this.unretract(e):this.retract(e)},_applyRetractionAmount:a.h({inputs:["retractionDirection","retractedWidth","retractedHeight","viewportWidth","viewportHeight","retractionAmount","fadesWhileRetracting"],callback:function(e,t,n,i,r,a,s){this.style.translateX(e*(i-t)).translateY(e*(r-n)).set("opacity",s?1-a:void 0)}})}},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 32"><polyline fill="none" stroke-width="3" points="1.5,31 16.5,16 1.5,1 "/></svg>\n'},function(e,t,n){"use strict";n.r(t),n(1),n(0),n(3),n(5),n(2),n(68),n.d(t,"HostedApplicationPopupViewController",(function(){return h}));var i=n(471),r=n(7),a=n(255),s=n(55),o=n(78),l=n(810),c=n(819),u=n(811),d=n(1316),h=i.a.extend(l.a,c.a,{contentController:r.b({type:a.a,defaultValue:s.c(a.a.extend({viewClass:u.a,isActive:r.b(),view:r.b({downstreamBindings:{isActive:"(owner).isActive"}})})),downstreamBindings:{isActive:"(owner).isActive"}}),iframeView:r.b(o.c("contentController.view")),host:r.b({type:d.a}),didEnd:function(){var e=this,t=arguments;e.__s._$QZ$didEnd.apply(e,t),this.isAttached&&this.hide(this)},__superMap:{_$QZ$didEnd:"didEnd"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationPopupViewController"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(238),r=n(161),a=n(130),s=n(7),o=n(20),l=n(573).a.extend({iframe:Object(s.b)({set:function(e,t){return this._previousIFrame=t,e},didChange:function(e){var t=this._previousIFrame,n=this._iframeDidLoad;if(t&&e!==t&&(Object(i.a)(t,"load",n),this._iframeDidLoad=null),e&&!this.outgoingWindow){var a=this._iframeDidLoad=function(){this._iframeIsLoaded(),Object(i.a)(e,"load",this._iframeDidLoad),this._iframeDidLoad=null}.bind(this);Object(r.a)(e,"load",a)}}}),outgoingWindow:Object(s.b)({dependencies:["iframe","_iframeIsLoaded"],readOnly:!0,get:function(){var e=this.getPath("iframe.contentWindow");return e?{actualOutgoingWindow:e,postMessage:function(e,t){var n=this.actualOutgoingWindow;if(n.postMessage)return n.postMessage(e,t);a.b.warn("ChildWindowChannel: postMessage of "+e+" to detached iframe at "+t+" was ignored")}}:null}}),_iframeDidLoad:null,_iframeIsLoaded:Object(o.i)(),_previousIFrame:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildWindowChannel"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(98),r=n(127),a=n(130),s=n(13),o=n(228),l=n(572).a.extend({hasHandlerForProcedure:function(e){return Object(r.a)(u(e,this))},registerProcedure:function(e,t,n){!function(e,t,n,i){var r=i.channel,a=c.get(r);a||(a=new Map,c.set(r,a));var o=a.get(e);o&&Object(s.b)("A handler for `%{procedureName}` was already registered on this channel",{procedureName:e,registration:o}),a.set(e,{listener:i,target:t,handlerMethodName:n})}(e,t,n=n||e,this)},registerProcedures:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];Array.isArray(r)?this.registerProcedure(r[0],t,r[1]):this.registerProcedure(r,t)}},unregisterProcedure:function(e){var t=this.channel,n=c.get(t);n&&n.get(e).listener===this&&(n.delete(e),0===n.size&&n.delete(t))},unregisterProcedures:function(e){var t=this;e.forEach((function(e){t.unregisterProcedure(e)}))},unregisterAllProcedures:function(){var e=c.get(this.channel);if(e)for(var t,n=e.entries();t=n.next().value;){var i=t[0];t[1].listener===this&&e.delete(i)}},shouldHandleMessage:function(e){var t=this;return(Array.isArray(e)?e:[e]).filter((function(e){return e&&Object(r.a)(e.jsonrpc)&&e.jsonrpc===t.messageFormatter.jsonRpcVersion&&Object(r.a)(e.method)})).length>0},handleMessage:function(e){var t=this,n=Array.isArray(e),a=n?e:[e],s=i.a.wrapFunction(d),l=this.messageFormatter,c=[],u={};return a.forEach((function(e){var n=e.id,i=s(e,t).then((function(e){u[n]=function(e,t,n){if(Object(r.a)(t))return e.generateResultMessageFor(t,n)}(l,n,e)})).catch((function(e){if(u[n]=h(l,n,e),!(e instanceof o.b))throw e}));c.push(i)})),i.a.all(c).then((function(){return p(t,a,u,n)}),(function(e){throw p(t,a,u,n),e}))},dispose:function(){this.unregisterAllProcedures(),this.__s._$36r$dispose.call(this)},__superMap:{_$36r$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcListener"}}),c=new Map;function u(e,t){var n=c.get(t.channel);if(n){var i=n.get(e);if(i&&i.listener===t)return i}return null}function d(e,t){if(t.isDisposed)return new Promise((function(){}));var n=e.method,i=e.params,s=void 0===i?[]:i;if(Object(r.a)(s)&&!Array.isArray(s)){var l="JSON-RPC calls in JavaScript cannot support `params` as an Object, only as an Array";throw a.b.error(l,e),new o.d(l,{message:e})}var c=u(n,t);if(!c)throw a.b.error("The JSON-RPC registration was not found",e,t),new o.f("The JSON-RPC registration was not found",{message:e,listener:t});var d=c.target;if(!d)throw a.b.error("The JSON-RPC target was not found",e,t),new o.f("The JSON-RPC target was not found",{message:e,listener:t});var h=d[c.handlerMethodName];if(!h)throw a.b.error("The JSON-RPC method was not found",e,t),new o.f("The JSON-RPC method was not found",{message:e,listener:t});return h.call.apply(h,[d].concat(s))}function h(e,t,n){if(Object(r.a)(t))return e.generateErrorMessageFor(t,n)}function p(e,t,n,i){var a=e.messageFormatter,s=[];if(t.forEach((function(e){var t=e.id;if(Object(r.a)(t)){var i=n[t];if(!i){var l=new o.c("The JSON-RPC call was part of a batch which failed due to a fatal error thrown by another call.");i=h(a,t,l)}s.push(i)}})),s.length>0){var l=i?s:s[0];e.channel.send(e.serializer.encode(l))}}},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[108]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[101]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[104]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[100]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[103]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[102]}).call(this,n(172))},function(e,t,n){(function(t){e.exports=t.__CW_BLOB_URLS[97]}).call(this,n(172))},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15">\n\t<path d="M7,7H3v1h4v4h1V8h4V7H8V3H7V7z M7.5,15C3.4,15,0,11.6,0,7.5S3.4,0,7.5,0S15,3.4,15,7.5S11.6,15,7.5,15z"/>\n</svg>'},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var i=n(139),r=n(13),a=n(160),s=n(348),o={dispose:function(){var e=this,t=arguments;this._throttledFunctionKeys.forEach(this._cleanUpThrottledFunctionForDispose,this),e.__s._$62$dispose.apply(e,t)},_throttledFunctionDataForKey:function(e){var t="_"+e+"_throttledFunctionData",n=this.hasOwnProperty(t)&&this[t];return n||(n=this[t]=new d(this[t])),n},_cleanUpThrottledFunctionForDispose:function(e){this._fireThrottledFunctionIfNeeded(e);var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId)},_fireThrottledFunctionIfNeeded:function(e){var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId);var n=t.status;if(0!==n)if(1===n)t.status=0;else if(2===n){t.status=1;var r=t.args;if(t.func.apply(this,r),1===t.status)for(var a=r.length,s=0;s<a;s++)r[s]=null;t.timeoutId=i.a(l,t.time,this,e)}},__superMap:{_$62$dispose:"dispose"}},l=function(e,t){e||r.b("ThrottledFunction lost its object.",arguments),e._fireThrottledFunctionIfNeeded(t)},c=a.a.extend({requiresSupport:o,func:null,throttleTime:100,shouldAlwaysDefer:!1,init:function(e,t,n){this.func=e,void 0!==t&&(this.throttleTime=t),void 0!==n&&(this.shouldAlwaysDefer=n),this.__s._$ya$init.call(this)},initializeMember:function(e,t){e._throttledFunctionKeys=e._throttledFunctionKeys||[],e.hasOwnProperty("_throttledFunctionKeys")||(e._throttledFunctionKeys=e._throttledFunctionKeys.slice()),e._throttledFunctionKeys.push(t);var n=e._throttledFunctionDataForKey(t);n.time=this.throttleTime,n.shouldAlwaysDefer=this.shouldAlwaysDefer;var r=function(){var e=this._throttledFunctionDataForKey(t);(0!==e.status||(e.shouldAlwaysDefer||(e.status=1,e.func.apply(this,arguments)),e.timeoutId=i.a(l,e.time,this,t),e.shouldAlwaysDefer))&&(s.a(e.args,arguments,0,0),e.status=2)},a=this.func;return n.func=function(){var e=a.apply(this,arguments);e&&r.apply(this,arguments)},r},__superMap:{_$ya$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThrottledFunction"}}),u=function(e,t,n){return c.create.apply(c,arguments)},d=function(e){this.args=[],e&&Object.assign(this,e)};d.prototype={status:0,args:null,timeoutId:0,time:-1,shouldAlwaysDefer:!1,func:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(7),r=n(17),a={mouseX:i.b(NaN),mouseY:i.b(NaN),pointerMove:function(e){var t=this.element.getBoundingClientRect();return r.a.pause(),this.mouseX=e.clientX-t.left,this.mouseY=e.clientY-t.top,r.a.resume(),!1},pointerLeave:function(){return r.a.pause(),this.mouseX=this.mouseY=NaN,r.a.resume(),!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(201),r=n(193),a=n(315),s=n(130),o=n(25),l=[],c=function(e){if(e||(e=document.createElement("div")),"CANVAS"===e.tagName)return e.setCSSSize=_,g(e.getContext("2d")),e;for(var t,n=d.length;n--;)t=d[n],u.hasOwnProperty(t)&&(e[t]=u[t]);return h._init.call(e),e},u={maximumTileSize:1920,tileOverlap:10,_backingWidth:300,_backingHeight:150,getContext:function(e){if("2d"!==e)throw new Error("Only 2D canvases are supported by TiledCanvas.");return this._context||(this._context=new w(this),g(this._context)),this._context},toDataURL:function(){var e,t=this._canvases,n=t.length;if(1===n)return(e=t[0]).toDataURL.apply(e,arguments);var i,r,a=b.getInstance(),s=a._tc_context;for(a.width=this._backingWidth,a.height=this._backingHeight,i=0;i<n;i++)r=t[i],s.drawImage(r,r._tc_left,r._tc_top);var o=a.toDataURL.apply(a,arguments);return b.disposeInstance(a),o},setCSSSize:function(e,t){e=e||0===e?Math.round(e):void 0,t=t||0===t?Math.round(t):void 0,this._cssWidth=e,this._cssHeight=t,h._doSubcanvasLayout.call(this)},_tc_drawIntoContext:function(e,t,n,i,r,a,s,o,l){switch(arguments.length){case 3:a=t,s=n,o=i=this._backingWidth,l=r=this._backingHeight,t=0,n=0;break;case 5:a=t,s=n,o=i,l=r,t=0,n=0,i=this._backingWidth,r=this._backingHeight;break;case 9:break;default:throw new Error("Unexpected number of arguments passed to _tc_drawIntoContext.")}if(e!==this._context||!h._drawIntoOwnContext.call(this,t,n,i,r,a,s,o,l)){var c,u,d,p,f,g,m,_,v,b,y,w,I,S,C=this._canvases,E=C.length;for(c=0;c<E;c++)d=(u=C[c])._tc_left,p=u._tc_top,f=u._tc_width,g=u._tc_height,y=a+((m=Math.max(d,t))-t)/i*o,w=s+((_=Math.max(p,n))-n)/r*l,I=(v=Math.min(d+f,t+i)-m)*(o/i),S=(b=Math.min(p+g,n+r)-_)*(l/r),_-=p,(m-=d)>=0&&_>=0&&v>0&&b>0&&m+v<=u._tc_width&&_+b<=u._tc_height&&e.drawImage(u,m,_,v,b,y,w,I,S)}}},d=Object.keys(u),h={_init:function(){this._canvases=[],this._transformStack=[],this._currentTransform=[1,0,0,1,0,0],this._isTransformed=!1,Object.defineProperty(this,"width",p),Object.defineProperty(this,"height",f),h._doSubcanvasLayout.call(this,!0)},_doSubcanvasLayout:function(e){if(this._backingWidth&&this._backingHeight){var t,n,a,s,o,l,c,u,d=this._backingWidth,p=this._backingHeight,f=void 0===this._cssWidth?d:this._cssWidth,g=void 0===this._cssHeight?p:this._cssHeight,m=f/d,_=g/p,v=i.a.sharedInstance.devicePixelRatio,y=this.maximumTileSize,w=Math.ceil(this.tileOverlap/v)*v,I=Math.ceil(d/(y-w-1)),S=Math.ceil(p/(y-w-1)),C=Math.ceil((d/I+w|0)/v)*v,E=Math.ceil((p/S+w|0)/v)*v,A=this._canvases,O=S*I;for(t=0;t<O;t++)n=A[t]||(A[t]=b.getInstanceAndAppendToElement(this)),c=(o=t%I|0)*(C-w),o<I-1?a=C:c=d-(a=Math.ceil((d-c)/v)*v),u=(l=t/I|0)*(E-w),l<S-1?s=E:u=p-(s=Math.ceil((p-u)/v)*v),(e||a!==n.width)&&(n.width=a),s!==n.height&&(n.height=s),r.c(n).set("width",a/v).set("height",s/v).translate(c*m,u*_).scale(m*v,_*v),n._tc_left=c,n._tc_top=u,n._tc_width=a,n._tc_height=s;for(t=O;t<A.length;t++)(n=A[t])&&b.disposeInstance(n);A.length=O,h._applyCurrentTransformToContexts.call(this),r.c(this).set("width",f).set("height",g)}else h._clearBackingStores.call(this)},_clearBackingStores:function(){var e,t,n=this._canvases,i=n.length;for(e=0;e<i;e++)((t=n[e]).width||t.height)&&(t.width=t.height=0)},_setContextProperty:function(e,t){var n,i=this._canvases,r=i.length;for(n=0;n<r;n++)i[n]._tc_context[e]=t},_callContextMethod:function(e,t){var n,i,r,o=this._canvases,l=o.length;for(n=0;n<l;n++){var c;i=(c=o[n]._tc_context)[e].apply(c,t),n&&a.a(i)&&r!==i&&s.b.warn("Calling query method `"+e+"` on a context for a TiledCanvas instance, and the individual contexts are returning differing values."),r=i}return i},_takeContextDrawImage:function(e,t,n,i,r,a,s,o,l){switch(arguments.length){case 3:a=t,s=n,o=i=e.naturalWidth||e.width,l=r=e.naturalHeight||e.height,t=0,n=0;break;case 5:a=t,s=n,o=i,l=r,t=0,n=0,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;break;case 9:break;default:throw new Error("Unexpected number of arguments passed to _tc_drawIntoContext.")}var c,u,d,h,p,f,g=this._canvases,m=g.length;for(c=0;c<m;c++)d=(u=g[c])._tc_left,h=u._tc_top,p=u._tc_width,f=u._tc_height,(v(d,h,p,f,a,s,o,l)||this._isTransformed)&&u._tc_context.drawImage(e,t,n,i,r,a,s,o,l)},_drawIntoOwnContext:function(e,t,n,i,r,a,s,o){var l;if(!v(e,t,n,i,r,a,s,o)&&!this._isTransformed)return!1;if(1===this._canvases.length)return!1;var u=this._context,d=this._tiledTempBufferContext;d||(d=this._tiledTempBufferContext=(new c).getContext("2d"));var h=d.canvas,p=h.width=this._backingWidth,f=h.height=this._backingHeight;return(l=d).setTransform.apply(l,this._currentTransform),d.drawImage(this,e,t,n,i,r,a,s,o),this._isTransformed?(u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(h,0,0),u.restore()):(r=Math.max(0,r),s=Math.min(s,p-r),a=Math.max(0,a),o=Math.min(o,f-a),u.drawImage(h,r,a,s,o,r,a,s,o)),h.width=h.height=0,!0},_takeContextTransform:function(e,t,n,i,r,a){var s=this._currentTransform,o=s[0]*e+s[2]*t,l=s[1]*e+s[3]*t,c=s[0]*n+s[2]*i,u=s[1]*n+s[3]*i,d=s[0]*r+s[2]*a+s[4],p=s[1]*r+s[3]*a+s[5];s[0]=o,s[1]=l,s[2]=c,s[3]=u,s[4]=d,s[5]=p,h._applyCurrentTransformToContexts.call(this)},_takeContextSetTransform:function(e,t,n,i,r,a){var s=this._currentTransform;s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=r,s[5]=a;for(var o=this._transformStack;o.length;)y.disposeInstance(o.pop());h._applyCurrentTransformToContexts.call(this)},_takeContextSave:function(){var e=y.getInstanceForTransform(this._currentTransform);this._transformStack.push(e)},_takeContextRestore:function(){var e=this._transformStack.pop();e&&(y.disposeInstance(this._currentTransform),this._currentTransform=e,h._applyCurrentTransformToContexts.call(this))},_applyCurrentTransformToContexts:function(){var e=this._currentTransform;this._isTransformed=1!==e[0]||1!==e[3]||e[1]||e[2]||e[4]||e[5];var t,n,i,r=this._canvases,a=r.length;for(t=0;t<a;t++){var s;(i=(n=r[t])._tc_context).setTransform(1,0,0,1,0,0),i.translate(-n._tc_left,-n._tc_top),(s=i).transform.apply(s,e)}}},p={configurable:!1,enumerable:!0,get:function(){return this._backingWidth},set:function(e){this._backingWidth=0|e,h._doSubcanvasLayout.call(this,!0)}},f={configurable:!1,enumerable:!0,get:function(){return this._backingHeight},set:function(e){this._backingHeight=0|e,h._doSubcanvasLayout.call(this,!0)}},g=function(e){if(e.drawImage!==m)return e._preTiledAcceptanceDrawImage=e.drawImage,e.drawImage=m,e},m=function(e){if("DIV"!==e.tagName)return this._preTiledAcceptanceDrawImage.apply(this,arguments);var t,n=e._tc_drawIntoContext;if(n){var i=0,r=0,a=arguments.length;l.length=a+i-r;for(var s=r,o=i;s<a;s++,o++)l[o]=arguments[s];return(t=l)[0]=this,n.apply(e,t)}},_=function(e,t){r.c(this).set("width",e).set("height",t)},v=function(e,t,n,i,r,a,s,o){return e<r+s&&e+n>r&&t<a+o&&t+i>a},b=o.Pool.extend({createInstance:function(){var e=document.createElement("canvas");return e._tc_context=e.getContext("2d"),r.c(e).set("position","absolute").set("top",0).set("left",0).set("transform-origin","0 0"),e},disposeInstance:function(e){var t=this,n=arguments;t.__s._$ASp$disposeInstance.apply(t,n),e.width=e.height=0,e._tc_context.setTransform(1,0,0,1,0,0);var i=e.parentNode;i&&i.removeChild(e)},getInstanceAndAppendToElement:function(e){var t=this.getInstance();return e.appendChild(t),t},__superMap:{_$ASp$disposeInstance:"disposeInstance"}}).create(),y=o.Pool.extend({createInstance:function(){return new Array(6)},getInstanceForTransform:function(e,t,n,i,r,a){var s=this.getInstance();return 1===arguments.length&&(t=e[1],n=e[2],i=e[3],r=e[4],a=e[5],e=e[0]),s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=r,s[5]=a,s}}).create(),w=function(e){this.canvas=e};function I(e,t,n){var i={};for(var r in n)n.hasOwnProperty(r)&&"value"!==r&&"writable"!==r&&(i[r]=n[r]);i.get=function(){return this.canvas._canvases[0]._tc_context[t]},i.set=function(e){return h._setContextProperty.call(this.canvas,t,e),e},Object.defineProperty(e,t,i)}function S(e,t){e[t]=function(){return h._callContextMethod.call(this.canvas,t,arguments)}}w.prototype={constructor:w,canvas:null,save:function(){h._takeContextSave.call(this.canvas)},restore:function(){h._takeContextRestore.call(this.canvas)},transform:function(e,t,n,i,r,a){void 0===a&&this._throwTypeError("transform",6),h._takeContextTransform.call(this.canvas,e,t,n,i,r,a)},setTransform:function(e,t,n,i,r,a){void 0===a&&this._throwTypeError("setTransform",6),h._takeContextSetTransform.call(this.canvas,e,t,n,i,r,a)},translate:function(e,t){void 0===t&&this._throwTypeError("translate",2),h._takeContextTransform.call(this.canvas,1,0,0,1,e,t)},scale:function(e,t){void 0===t&&this._throwTypeError("scale",2),h._takeContextTransform.call(this.canvas,e,0,0,t,0,0)},rotate:function(e){void 0===e&&this._throwTypeError("rotate",1);var t=Math.sin(e),n=Math.cos(e);h._takeContextTransform.call(this.canvas,n,t,-t,n,0,0)},drawImage:function(){h._takeContextDrawImage.apply(this.canvas,arguments)},_throwTypeError:function(e,t){throw new TypeError("Failed to execute '"+e+"' on 'TiledCanvasContext': "+t+" argument"+(1===t?"":"s")+" required.")}},function(){var e,t,n,i=w.prototype,r=document.createElement("canvas").getContext("2d");for(t in r)if(!i.hasOwnProperty(t)&&"webkitImageSmoothingEnabled"!==t){if(!(e=Object.getOwnPropertyDescriptor(r,t)))try{e=Object.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype,t)}catch(a){}n=r[t],!e||!e.writable&&!e.set||n instanceof Function||I(i,t,e),n instanceof Function&&S(i,t)}}()},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 15.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1"\r\n\t id="svg2" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n\t xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="11px" height="13px"\r\n\t viewBox="-298.334 404.667 11 13" enable-background="new -298.334 404.667 11 13" xml:space="preserve">\r\n<g id="g10" transform="matrix(1.3333333,0,0,-1.3333333,0,29.333333)">\r\n\t<g id="g12">\r\n\t\t<g>\r\n\t\t\t<g id="g14">\r\n\t\t\t\t<g id="g20" transform="translate(10.3638,2.5005)">\r\n\t\t\t\t\t<path id="path22" fill="#231F20" d="M-229.614-292.566v3.474l2.999,1.736l0-3.473L-229.614-292.566z M-229.99-288.441\r\n\t\t\t\t\t\tl-2.999,1.737l2.999,1.737l3-1.737L-229.99-288.441z M-233.364-290.83v3.473l2.999-1.736l0-3.475L-233.364-290.83z\r\n\t\t\t\t\t\t M-226.427-286.161l-3,1.737c-0.348,0.202-0.776,0.202-1.125,0l-3-1.737c-0.348-0.201-0.562-0.575-0.562-0.978v-3.473\r\n\t\t\t\t\t\tc0-0.403,0.215-0.776,0.562-0.978l3-1.737c0.174-0.1,0.368-0.152,0.563-0.152c0.194,0,0.388,0.051,0.562,0.152l3,1.737\r\n\t\t\t\t\t\tc0.348,0.201,0.562,0.575,0.562,0.978v3.473C-225.864-286.736-226.078-286.363-226.427-286.161"/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t</g>\r\n</g>\r\n</svg>\r\n'},function(e,t,n){"use strict";n(0),n.d(t,"a",(function(){return u}));var i=n(231),r=n(202),a=n(7),s=n(201),o=n(20),l=n(214),c=n(569),u=r.a.extend(i.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",name:"canvas",styles:{position:"absolute",left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"negativePadding",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"negativePadding",attributes:{},unit:"px",property:"top"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"paddedSize",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"paddedSize",attributes:{},unit:"px",property:"height"}}}],classes:["tocw-progress-pie-view"],styles:{position:"absolute","pointer-events":"none",height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"width"}}},className:"to-cw-ui-progress-pie-view",__QUALIFIED_CLASS_NAME__:"ProgressPieView"},init:function(){var e=this,t=arguments;e.__s._$F8$init.apply(e,t),this._canvas=this.canvas,this._context=this._canvas.getContext("2d")},size:a.b(25),strokeWeight:a.b(.08),effectiveStrokeWeight:a.b({readOnly:!0,dependencies:["strokeWeight","size"],get:Object.assign((function(){var e=this.strokeWeight;return e<.25?e*this.size:e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r<.25?r*i.internalGet(this,t[1+n]):r}})}),color:a.b("white"),unfilledColor:a.b("rgba(0, 0, 0, 0.2)"),shadowBlur:a.b(3),shadowColor:a.b("rgba(0, 0, 0, 0.2)"),shadowOffsetY:a.b(2),shadowOffsetX:a.b(0),hasShadow:a.b({readOnly:!0,dependencies:["shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor"],get:Object.assign((function(){return(this.shadowOffsetX||this.shadowOffsetY||this.shadowBlur)&&!h(this.shadowColor)}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[0+n]))&&!h(i.internalGet(this,t[3+n]))}})}),progress:a.b(0),shouldShowError:a.b(!1),dpr:a.b(s.a.sharedInstance.bindingFor("devicePixelRatio")),padding:a.b({readOnly:!0,dependencies:["shadowBlur","shadowOffsetX","shadowOffsetY"],get:Object.assign((function(){return this.shadowBlur+Math.max(Math.abs(this.shadowOffsetX),Math.abs(this.shadowOffsetY))}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+Math.max(Math.abs(i.internalGet(this,t[1+n])),Math.abs(i.internalGet(this,t[2+n])))}})}),paddedSize:a.b({readOnly:!0,dependencies:["padding","size"],get:Object.assign((function(){return 2*this.padding+this.size}),{__CW__getter:function(e,t,n,i){return 2*i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),negativePadding:a.b({readOnly:!0,dependencies:["padding"],get:Object.assign((function(){return-this.padding}),{__CW__getter:function(e,t,n,i){return-i.internalGet(this,t[0+n])}})}),backingCenter:a.b({readOnly:!0,dependencies:["backingPaddedSize"],get:Object.assign((function(){return this.backingPaddedSize/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),backingRadius:a.b({readOnly:!0,dependencies:["backingSize"],get:Object.assign((function(){return this.backingSize/2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2}})}),backingSize:d("size",Math.floor),backingPaddedSize:d("paddedSize",Math.ceil),backingEffectiveStrokeWeight:d("effectiveStrokeWeight",Math.ceil),backingShadowBlur:d("shadowBlur",Math.ceil),backingShadowOffsetY:d("shadowOffsetY",Math.ceil),backingShadowOffsetX:d("shadowOffsetX",Math.ceil),renderedProgress:i.b(0),progressAnimationTime:500,_animateRenderedProgress:o.h("progress",(function(e){!e||1===e&&0===this.renderedProgress?this.renderedProgress=e:this.getFinalValue("renderedProgress")!==e&&this.animate("renderedProgress",e,this.progressAnimationTime)})),_redraw:o.h({inputs:["renderedProgress","shouldShowError","size","paddedSize","padding","hasShadow","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","color","unfilledColor","dpr"],callback:function(e,t,n,i,r,a,s,o,l,u,d,p,f){var g=this._canvas,m=this._context;if(g&&m&&n&&i&&r&&f){var _=Math.ceil(f*i);g.width!==_||g.height!==_?g.width=g.height=_:m.clearRect(0,0,_,_),m.save(),h(p)||this._drawUnfilledCircle(m),m.shadowBlur=a?this.backingShadowBlur:0,m.shadowOffsetX=a?this.backingShadowOffsetX:0,m.shadowOffsetY=a?this.backingShadowOffsetY:0,m.shadowColor=a?this.shadowColor:"transparent";var v=Object(c.a)(_,_),b=v.getContext("2d");this._drawOuterCircle(b),this.shouldShowError?this._drawErrorStroke(b):this._drawPie(b,e),b.globalCompositeOperation="source-in",b.fillStyle=this.color,b.fillRect(0,0,_,_),b.globalCompositeOperation="source-over",m.drawImage(v,0,0),m.restore()}}}),_drawUnfilledCircle:function(e){var t=this.backingCenter,n=this.backingCenter,i=this.backingRadius-this.backingEffectiveStrokeWeight/2;e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t,n-i),e.arc(t,n,i,0,2*Math.PI,!1),e.lineTo(t,n),e.fillStyle=this.unfilledColor,e.fill(),e.closePath(),e.restore()},_drawErrorStroke:function(e){var t=this.backingCenter,n=this.backingCenter,i=this.backingEffectiveStrokeWeight,r=this.backingRadius-i/2;e.save(),e.translate(t,n),e.rotate(Math.PI/4),e.fillStyle="black",e.fillRect(-r,-i/2,2*r,i),e.restore()},_drawPie:function(e,t){var n=this.backingCenter,i=this.backingCenter,r=this.backingRadius-this.backingEffectiveStrokeWeight/2,a=2*Math.PI*.75,s=(.75+t)*(2*Math.PI);e.save(),e.beginPath(),e.moveTo(n,i),e.lineTo(n,i-r),e.arc(n,i,r,a,s,!1),e.lineTo(n,i),e.fillStyle="black",e.fill(),e.closePath(),e.restore()},_drawOuterCircle:function(e){e.save(),e.beginPath(),e.arc(this.backingCenter,this.backingCenter,this.backingRadius,0,2*Math.PI),e.fillStyle="black",e.fill(),e.closePath(),e.beginPath(),e.arc(this.backingCenter,this.backingCenter,this.backingRadius-this.backingEffectiveStrokeWeight,0,2*Math.PI),e.fillStyle="black",e.globalCompositeOperation="destination-out",e.fill(),e.closePath(),e.restore()},__superMap:{_$F8$init:"init"}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return a.b({readOnly:!0,dependencies:[e,"dpr"],get:Object.assign((function(){return t(this[e]*this.dpr*n)/n}),{__CW__getter:function(i,r,a,s){return t(this[e]*s.internalGet(this,r[1+a])*n)/n}})})}function h(e){return"transparent"===e||"rgba(0,0,0,0)"===e.replace(/\s+/g,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(161),r=n(581);function a(e){var t=o[e];if(!t){var n=(t=o[e]=new Image)._thenable=r.a.create();i.a(t,"load",(function(){t.naturalWidth||t.width||(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),n.resolve(t)})),i.a(t,"error",n.reject.bind(n)),t.src=e}return t._thenable}function s(e){var t=o[e];return t&&t.complete&&t.naturalWidth?t:null}var o={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(130),r=n(356),a=n(25),s=function(e,t,n,s,c,u){if(e&&t){n&&!isNaN(n)||(n=2);var h,p="vertical"!==s,f="horizontal"!==s,g=e.getContext?e.getContext("2d"):e,m=e.getContext?e:e.canvas,_=0|m.width,v=0|m.height,b=0|n,y=0|(t=(t=Math.min(t,_,v))/b*.8+.2*t),w=2*y+1,I=4*_,S=y*I,C=4*y,E=C+4,A=S+I;try{h=g.getImageData(0,0,_,v)}catch(J){if(i.b.warn("Attempting to blur canvas contents, but unable to access image data, likely due to the canvas being tainted cross-origin. Falling back to color averaging via drawImage. Error: "+J),u)return;var O=a.canvasPool.getAutodisposingInstance();return O.width=O.height=1,Object(r.b)(O.getContext("2d"),m,0,0,1,1),g.clearRect(0,0,m.width,m.height),void g.drawImage(O,0,0,m.width,m.height)}var T,M,D,P,L,R,x,N,F,V,k,B,j,U,G,H,W,$,z,K,q,Q,Y=d(_,v),Z=h.data,X=Y.data;for(c||o(Z),K=1;K<=b;K++){if(p)for(Q=Z,Z=X,X=Q,k=0;k<v;k++){for(B=k*I,T=M=D=P=0,j=0;j<y;j++)T+=X[L=4*j+B],M+=X[L+1],D+=X[L+2],P+=X[L+3];for(j=0;j<_;j++)N=(x=(R=(L=4*j+B)+1)+1)+1,(H=y-j)<0&&(H=0),($=y-(_-1-j))<0&&($=0),G=w-H-$,V=L+C,q=!!$,(F=L-E)<B||(T-=X[F],M-=X[F+1],D-=X[F+2],P-=X[F+3]),q||(T+=X[V],M+=X[V+1],D+=X[V+2],P+=X[V+3]),Z[L]=T/G,Z[R]=M/G,Z[x]=D/G,Z[N]=P/G}if(f)for(Q=Z,Z=X,X=Q,j=0;j<_;j++){for(U=4*j,T=M=D=P=0,k=0;k<y;k++)T+=X[L=k*I+U],M+=X[L+1],D+=X[L+2],P+=X[L+3];for(k=0;k<v;k++)N=(x=(R=(L=U+(B=k*I))+1)+1)+1,(W=y-k)<0&&(W=0),(z=y-(v-1-k))<0&&(z=0),G=w-W-z,V=L+S,q=!!z,(F=L-A)<0||(T-=X[F],M-=X[F+1],D-=X[F+2],P-=X[F+3]),q||(T+=X[V],M+=X[V+1],D+=X[V+2],P+=X[V+3]),Z[L]=T/G,Z[R]=M/G,Z[x]=D/G,Z[N]=P/G}}c||l(Z),g.putImageData(h,0,0)}},o=function(e,t){t||(t=e);for(var n,i,r=0,a=e.length;r<a;r+=4)n=e[r+3]/255,t[r]=e[r]*n,t[i=r+1]=e[i]*n,t[i=r+2]=e[i]*n},l=function(e,t){t||(t=e);for(var n,i,r=0,a=e.length;r<a;r+=4)n=e[r+3]/255,t[r]=e[r]/n,t[i=r+1]=e[i]/n,t[i=r+2]=e[i]/n},c=document.createElement("canvas").getContext("2d"),u={},d=function(e,t){var n=u;return(n=(n=n[e]||(n[e]={}))[t]||(n[t]={})).buffer||(n.buffer=c.createImageData(e,t))}},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)return t[0];if(t.length>2)return i.apply(void 0,t.slice(0,t.length-2).concat([i(t[t.length-2],t.pop())]));var r=t[0],a=t[1],s=Object.assign({},r);for(var o in a){if(!Object.prototype.hasOwnProperty.call(a,o))return;var l=a[o],c=r[o];"object"!==typeof l||l.constructor!==Object&&l.constructor||"object"!==typeof c||c.constructor!==Object&&c.constructor||(l=i(c,l)),s[o]=l}return s}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(200),r=n(7),a=n(51),s=n(78),o=n(789).a.extend(i.a,{delay:!0,canHaveInstance:r.b(!0),hypotheticalInstance:r.b({readOnly:!0,dependencies:[],get:function(){}}),instance:r.b({readOnly:!0,strong:!0,dependencies:["hasInstance","hypotheticalInstance"],get:Object.assign((function(){return this.hasInstance?this.hypotheticalInstance:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):null}}),didChange:a.a}),hasInstance:r.b({readOnly:!0,binding:"value"}),allowsDowngrades:!1,init:function(){var e=this,t=arguments;this.defersUpgrades=this.delay,e.__s._$xy$init.apply(e,t)},value:!1,targetValue:s.c("canHaveInstance"),cleanup:function(){var e=this,t=arguments;this.owner=null,e.__s._$139$cleanup.apply(e,t)},initFromPool:function(){var e=this,t=arguments;this.reset(),e.__s._$183$initFromPool.apply(e,t)},__superMap:{_$xy$init:"init",_$139$cleanup:"cleanup",_$183$initFromPool:"initFromPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyDeferredWorker"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(7),r=n(13),a=i.a.extend({source:null,gate:null,readOnly:!0,get:function(e,t,n,i){var r=this[i._key_storedValue];if(r!==o&&!i.internalGet(this,t[1+n]))return r;var a=i.internalGet(this,t[0+n]);return a===r||(this[i._key_storedValue]=a),a},init:function(e){var t=this,n=arguments,i=e||l;this.dependencies=[i.source||this.source,i.gate||this.gate],t.__s._$1bU$init.apply(t,n);var a=this.source,s=this.gate;a&&s||r.b("GatedProxyProperty cannot wake up without both `source` and `gate`.")},wasRegistered:function(e,t){var n=this,i=arguments,r="_gatedProxyProperty_at_"+t+"_";this._key_storedValue=r+"storedValue",e[this._key_storedValue]=o,n.__s._$1t5$wasRegistered.apply(n,i)},__superMap:{_$1bU$init:"init",_$1t5$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GatedProxyProperty"}});function s(){return a.define.apply(a,arguments)}var o={},l={}},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__84.svg"},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48"><circle fill="#146FDF" stroke="#FFFFFF" stroke-width="2" cx="24" cy="24" r="23"/><polyline fill="none" stroke="#FFFFFF" stroke-width="2.5" points="12,25 19,32 35,16 "/></svg>\n'},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="218px" height="200px" viewBox="0 0 218 200" enable-background="new 0 0 218 200" xml:space="preserve"><path fill="chartreuse" d="M215.079,189.379C211.256,195.959,204.253,200,196.68,200H21.32c-7.573,0-14.577-4.041-18.401-10.621 c-3.824-6.578-3.895-14.705-0.187-21.35L90.414,10.948C94.188,4.185,101.295,0,109.001,0s14.812,4.185,18.586,10.948l87.681,157.082 C218.976,174.674,218.905,182.801,215.079,189.379z M121.928,69.675c0-7.138-5.787-12.924-12.928-12.924 c-7.139,0-12.928,5.786-12.928,12.924c0,0.731,0.178,2.14,0.178,2.14l8.944,66.201h0.008c0.424,1.71,1.957,2.98,3.797,2.98 s3.374-1.271,3.797-2.98l8.952-66.201C121.75,71.815,121.928,70.407,121.928,69.675z M109,153.094c-5.488,0-9.938,4.449-9.938,9.938 s4.449,9.938,9.938,9.938s9.938-4.449,9.938-9.938S114.488,153.094,109,153.094z"/></svg>\n'},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f}));var i=n(791),r=n(25).arrayPool,a=i.a;function s(e){if(!(e=String(e||"")))return 0;var t=++u;if(!document.body)return document.write('<style id="runtimeStylesheet'+t+'" type="text/css">'+e+"</style>"),t;var n=document.createElement("style");if(n.setAttribute("type","text/css"),n.setAttribute("id","runtimeStylesheet"+t),document.body.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var i=n.childNodes[0],r=document.createTextNode(e);i?n.replaceChild(r,i):n.appendChild(r)}return t}function o(e){d.push(e),c||(c=setTimeout(h))}function l(e){document.body?p("runtimeStylesheet"+e):setTimeout(p,0,"runtimeStylesheet"+e)}var c,u=0,d=[],h=function(){c=null,s(d.join("\n\n")),d.length=0},p=function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)};function f(){var e=r.getAutodisposingInstanceFromSlice(r.getAutodisposingInstanceFromParams.apply(r,arguments),0,-1).join(", "),t=arguments[arguments.length-1],n=a.encodeFromString(String(t).trim());o(e+" {\n        background-image: url('data:image/svg+xml;base64,"+n+"');\n    }")}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(447),r=n(99),a=n(15),s=n(13),o=n(583),l=i.a.extend(o.a).extend({minimumTranslationForClinch:3,translatesPriorToClinching:!1,requiresClinchToComplete:!0,pansHorizontally:!1,pansVertically:!1,pansBiaxially:!1,cancelsHorizontally:!1,cancelsVertically:!1,cancelsBiaxially:!1,hasClinchedHorizontally:!1,hasClinchedVertically:!1,hasClinchedBiaxially:!1,hasClinched:!1,pointerMove:function(){var e=this,t=arguments;if(this.hasClinched)return e.__s._$Cq$pointerMove.apply(e,t);this.pauseStateChanges();var n=e.__s._$Cq$pointerMove.apply(e,t),i=this.translation,a=i.x,s=i.y,o=Math.sqrt(a*a+s*s);if(o<this.minimumTranslationForClinch)return this.resumeStateChanges(),n;var l=this.pansHorizontally,u=this.cancelsHorizontally,d=this.pansVertically,h=this.cancelsVertically,p=this.pansBiaxially,f=this.cancelsBiaxially,g=180*Math.atan(Math.abs(s)/Math.abs(a))/Math.PI;return g<c(l||u,d||h,p||f)?(u&&(this.state=r.b.Cancelled),this.hasClinchedHorizontally=this.hasClinched=!0):g>90-c(d||h,l||u,p||f)?(h&&(this.state=r.b.Cancelled),this.hasClinchedVertically=this.hasClinched=!0):(f&&(this.state=r.b.Cancelled),this.hasClinchedBiaxially=this.hasClinched=!0),this.translationUponClinch=this.translation,this.resumeStateChanges(),n},pointerUp:function(){var e=this,t=arguments;return!this.hasClinched&&this.requiresClinchToComplete&&1===this._trackedPointerLocations.size?this.pointerCancel.apply(this,arguments):e.__s._$13m$pointerUp.apply(e,t)},reset:function(){this.__s._$14N$reset.call(this),this.hasClinched=this.hasClinchedHorizontally=this.hasClinchedVertically=this.hasClinchedBiaxially=!1,this.translationUponClinch=void 0},snapTranslationHashBasedOnClinchState:function(e){return this.hasClinchedHorizontally?{x:e.x,y:0}:this.hasClinchedVertically?{x:0,y:e.y}:this.translatesPriorToClinching||this.hasClinchedBiaxially?e:{x:0,y:0}},snappedTranslationSinceClinching:a.d({readOnly:!0,get:function(){return this.snapTranslationHashBasedOnClinchState(this.translationSinceClinching)}}),translationUponClinch:a.d(),translationSinceClinching:a.d({get:function(){var e=this.translationUponClinch;if(!e)return{x:0,y:0};var t=this.translation;return{x:t.x-e.x,y:t.y-e.y}}}),snappedTranslation:a.d({readOnly:!0,get:function(){return this.snapTranslationHashBasedOnClinchState(this.translation)}}),translation:a.d({get:function(){var e=this,t=arguments,n=this._snappedTranslationReference;return n?Object.assign({},n):e.__s._$1UZ$get.apply(e,t)},set:function(){var e=this,t=arguments;return this._snappedTranslationReference&&s.b("Trying to set translation while presenting snapped translation reference."),e.__s._$1YY$set.apply(e,t)},__superMap:{_$1UZ$get:"get",_$1YY$set:"set"}}),_isSnappingPrimaryTranslation:0,beginSnappingPrimaryTranslation:function(){0===this._isSnappingPrimaryTranslation&&(this._snappedTranslationReference=this.snappedTranslation),this._isSnappingPrimaryTranslation++},endSnappingPrimaryTranslation:function(){0===--this._isSnappingPrimaryTranslation&&(this._snappedTranslationReference=void 0)},__superMap:{_$Cq$pointerMove:"pointerMove",_$13m$pointerUp:"pointerUp",_$14N$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AxisSnappingPanGestureRecognizer"}});function c(e,t,n){return e&&t&&n?15:e&&t&&!n?45:e&&!t&&n?15:!e||t||n?!e&&t&&n||!e&&t&&!n||!e&&!t&&n||!(e||t||n)?1/0:s.b("Combinatorics is broken."):0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(99),r=n(20),a=n(473),s=n(7),o=n(55),l=n(15),c=i.a.extend(r.b).extend({stateGenerator:a.a,currentZoomLevel:s.b(),unzoomedZoomLevel:s.b(),maxAllowedZoomLevel:s.b(),_gestureStartZoomLevel:void 0,_trackedPointerLocations:o.c(Map),_maxPinchZoomLevel:l.d({get:function(){return Math.min(this.maxAllowedZoomLevel,4*this.unzoomedZoomLevel)}}),pointerDown:function(e){this._updatePointerLocation(e)},pointerMove:function(e){if(this._updatePointerLocation(e),2===this._trackedPointerLocations.size)this.state===i.b.Possible?(this._gestureStartZoomLevel=this.pinchZoomLevel,this.state=i.b.Began):this.state=i.b.Changed;else if(1===this._trackedPointerLocations.size){var t=this._trackedPointerLocations.values().next().value;Math.abs(t.currentX-t.initialX)>3&&(this.state=i.b.Failed)}},pointerUp:function(e){this._finishZoomGesture(e)},pointerCancel:function(e){this._finishZoomGesture(e)},_finishZoomGesture:function(e){this._updatePointerLocation(e,!0),this.state===i.b.Changed||this.state===i.b.Began?this.state=i.b.Ended:this.state=i.b.Failed},reset:function(){var e=this,t=arguments;this._trackedPointerLocations.clear(),e.__s._$12T$reset.apply(e,t)},pinchZoomLevel:l.d({readOnly:!0,get:function(){var e,t=this._gestureStartZoomLevel,n=this.state,r=this.currentZoomLevel,a=this.unzoomedZoomLevel,s=this._maxPinchZoomLevel;if(void 0===t)e=r;else if(n!==i.b.Began&&n!==i.b.Changed)e=Math.min(s,Math.max(r,a));else{var o=this._zoomScaleFactor;(e=t*o)<a&&o<1?(e=a-.5*(a-e),e=Math.max(.1*a,e)):e>s&&o>1&&(e=s+.5*(e-s))}return e}}),_zoomScaleFactor:l.d({readOnly:!0,get:function(){var e=this._getPointerDistances();return e?e.currentDistance/e.initialDistance:0}}),anchorPoint:l.d({get:function(){var e=0,t=0;if(this._getPointerDistances()){var n=this._getPointerDistances().initialMidpoint;e=n.x,t=n.y}return{x:e,y:t}}}),_updatePointerLocation:function(e,t){var n=e.pointerId,i=e.clientX,r=e.clientY;if(n){var a=this._trackedPointerLocations;if(t)a.delete(n);else{var s=a.get(n);(s||2!==a.size)&&(s||(s={initialX:i,initialY:r},a.set(n,s)),s.currentX=i,s.currentY=r)}}},_getPointerDistances:function(){var e=this._trackedPointerLocations;if(2===e.size){var t=e.values(),n=t.next().value,i=t.next().value,r=i.initialX-n.initialX,a=i.initialY-n.initialY,s=i.currentX-n.currentX,o=i.currentY-n.currentY;return{initialDistance:Math.sqrt(r*r+a*a),currentDistance:Math.sqrt(s*s+o*o),initialMidpoint:{x:(n.initialX+i.initialX)/2,y:(n.initialY+i.initialY)/2},currentMidpoint:{x:(n.currentX+i.currentX)/2,y:(n.currentY+i.currentY)/2}}}},__superMap:{_$12T$reset:"reset"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PinchToZoomGestureRecognizer"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(345).b.extend({numberOfTapsRequired:2,tapDistanceThreshold:50,isEventTooFar:function(e){var t=this,n=arguments;if("pointerUp"===e.cwType){var i=this.location,r=i.x,a=i.y,s=e.clientX,o=e.clientY,l=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-a,2));return l>this.tapDistanceThreshold}return t.__s._$Hy$isEventTooFar.apply(t,n)},__superMap:{_$Hy$isEventTooFar:"isEventTooFar"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DoubleTapGestureRecognizer"}})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){if(!e)return 0;var n=a[t]||(a[t]={});return n[e]||(r.font=t,n[e]=r.measureText(e).width)},r=document.createElement("canvas").getContext("2d"),a={}},function(e,t,n){"use strict";function i(e){var t=!1;return function(){if(!t){t=!0;var n=e.apply(this,arguments);return t=!1,n}}}n.d(t,"a",(function(){return i}))},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__146.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__144.png"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__143.png"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__142.png"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__141.png"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__140.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__138.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__137.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__136.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__135.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__133.svg"},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 15.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1"\n\t id="svg2" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"\n\t xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="11px" height="13px"\n\t viewBox="-298.334 404.667 11 13" enable-background="new -298.334 404.667 11 13" xml:space="preserve">\n<g id="g10" transform="matrix(1.3333333,0,0,-1.3333333,0,29.333333)">\n\t<g id="g12">\n\t\t<g>\n\t\t\t<g id="g14">\n\t\t\t\t<g id="g20" transform="translate(10.3638,2.5005)">\n\t\t\t\t\t<path id="path22" fill="#231F20" d="M-229.614-292.566v3.474l2.999,1.736l0-3.473L-229.614-292.566z M-229.99-288.441\n\t\t\t\t\t\tl-2.999,1.737l2.999,1.737l3-1.737L-229.99-288.441z M-233.364-290.83v3.473l2.999-1.736l0-3.475L-233.364-290.83z\n\t\t\t\t\t\t M-226.427-286.161l-3,1.737c-0.348,0.202-0.776,0.202-1.125,0l-3-1.737c-0.348-0.201-0.562-0.575-0.562-0.978v-3.473\n\t\t\t\t\t\tc0-0.403,0.215-0.776,0.562-0.978l3-1.737c0.174-0.1,0.368-0.152,0.563-0.152c0.194,0,0.388,0.051,0.562,0.152l3,1.737\n\t\t\t\t\t\tc0.348,0.201,0.562,0.575,0.562,0.978v3.473C-225.864-286.736-226.078-286.363-226.427-286.161"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</g>\n\t</g>\n</g>\n</svg>\n'},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__85.svg"},function(e,t){e.exports="/applications/photos/2204Project45/en-us/r$__81.svg"},function(e,t){e.exports='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21"><polygon stroke="none" points="10,0 11,0 11,10 21,10 21,11 11,11 11,21 10,21 10,11 0,11 0,10 10,10 "/></svg>\n'},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"CloudOSApplicationStateEnum",(function(){return Rt})),n.d(i,"Application",(function(){return Bt})),n.d(i,"BackwardCompatibleCK",(function(){return _e})),n.d(i,"BackwardCompatibleCloudOS",(function(){return be})),n.d(i,"BackwardCompatibleWindowApplication",(function(){return me.a})),n.d(i,"ApplicationLauncher",(function(){return Ig})),n.d(i,"BaseApplicationLauncher",(function(){return wg})),n.d(i,"WindowApplicationLauncher",(function(){return Fg})),n.d(i,"CloudOSServiceProtocol",(function(){return ye})),n.d(i,"ComposeEmailController",(function(){return Vg.a})),n.d(i,"RPCChannelStateEnum",(function(){return tt.b})),n.d(i,"RPCBaseChannel",(function(){return tt.a})),n.d(i,"RPCBaseInputChannel",(function(){return nt})),n.d(i,"RPCBaseOutputChannel",(function(){return kg.a})),n.d(i,"RPCInputChannel",(function(){return rt})),n.d(i,"RPCMessageEvent",(function(){return it})),n.d(i,"RPCOutputChannel",(function(){return st.a})),n.d(i,"AdditionalRequestParams",(function(){return Lg})),n.d(i,"ApplicationWindowProxy",(function(){return Sg})),n.d(i,"AuthorizationBagProviderProtocol",(function(){return Bg})),n.d(i,"CloudOSHost",(function(){return Og})),n.d(i,"KeyValueService",(function(){return Ng})),n.d(i,"KeyValueServiceProtocol",(function(){return jg})),n.d(i,"MockAuthorizationBagProvider",(function(){return Ug})),n.d(i,"MockRegionFormatProvider",(function(){return Pg})),n.d(i,"MockSetupService",(function(){return Gg})),n.d(i,"RegionFormatProviderProtocol",(function(){return Hg})),n.d(i,"RuntimeSetupService",(function(){return Rg})),n.d(i,"SetupServiceProtocol",(function(){return Wg})),n.d(i,"AuthBag",(function(){return $e})),n.d(i,"Environment",(function(){return Ye})),n.d(i,"QuotaInfo",(function(){return ze})),n.d(i,"ServiceInfo",(function(){return De})),n.d(i,"AppleIdEntryType",(function(){return He})),n.d(i,"User",(function(){return We})),n.d(i,"ContentVendorURL",(function(){return zg})),n.d(i,"Request",(function(){return Yg})),n.d(i,"RequestReportingSupport",(function(){return qg})),n.d(i,"RequestSupport",(function(){return Qg})),n.d(i,"ShardedURLSupport",(function(){return $g})),n.d(i,"URL",(function(){return Kg})),n.d(i,"UploadRequest",(function(){return Jg})),n.d(i,"EnumGroup",(function(){return le.a})),n.d(i,"createEnumGroup",(function(){return le.b})),n.d(i,"EnumGroupSupport",(function(){return se.a})),n.d(i,"EnumItem",(function(){return em.a})),n.d(i,"createEnumMainState",(function(){return em.b})),n.d(i,"EXIT_NON_FATAL",(function(){return ut})),n.d(i,"EXIT_FATAL_ERROR",(function(){return dt})),n.d(i,"EXIT_STARTUP_ERROR",(function(){return ht})),n.d(i,"EXIT_PCS_MISSING",(function(){return pt})),n.d(i,"EXIT_PCS_INVALID",(function(){return ft})),n.d(i,"ApplicationDriver",(function(){return gt})),n.d(i,"ApplicationDriverStateEnum",(function(){return ce})),n.d(i,"BaseApplicationDriver",(function(){return ge})),n.d(i,"TraceSupport",(function(){return oe.a})),n.d(i,"AccountMenuPopoverViewController",(function(){return ud})),n.d(i,"AccountMenuViewController",(function(){return cd})),n.d(i,"LogoutAlertViewController",(function(){return Cg})),n.d(i,"AccountMenuItemView",(function(){return od})),n.d(i,"AccountMenu",(function(){return ld})),n.d(i,"AppNameView",(function(){return sd})),n.d(i,"AppSwitcherButton",(function(){return rd})),n.d(i,"ChevronView",(function(){return zu})),n.d(i,"AccountNameButton",(function(){return hd})),n.d(i,"HelpButton",(function(){return fd})),n.d(i,"AccountView",(function(){return gd})),n.d(i,"CKRequest",(function(){return im})),n.d(i,"customCKRequest",(function(){return nm})),n.d(i,"FatalExceptionHandler",(function(){return bt})),n.d(i,"region",(function(){return Ke})),n.d(i,"Storage",(function(){return cm})),n.d(i,"addRootDomainQueryParameterHackAsAppropriate",(function(){return um})),n.d(i,"displayNameFor",(function(){return Ne})),n.d(i,"getUrlForServiceName",(function(){return dm})),n.d(i,"intToHexString",(function(){return hm.a})),n.d(i,"matchesFormatOfAppleId",(function(){return Ve})),n.d(i,"matchesFormatOfEmailAddress",(function(){return ke})),n.d(i,"matchesFormatOfPhoneNumberAppleId",(function(){return Be})),n.d(i,"matchesFormatOfPhoneNumber",(function(){return je})),n.d(i,"normalizePhoneNumber",(function(){return Ue})),n.d(i,"reloadWithReason",(function(){return pm})),n.d(i,"WindowApplication",(function(){return fm})),n.d(i,"globals",(function(){return ve.a})),n.d(i,"SizeClass",(function(){return Mt}));var r={};n.r(r),n.d(r,"AppInitializerProtocol",(function(){return yt.b})),n.d(r,"AppInitializer",(function(){return yt.a})),n.d(r,"Application",(function(){return G.a})),n.d(r,"Config",(function(){return h.a})),n.d(r,"ConfigProperty",(function(){return dD.a})),n.d(r,"CookieManager",(function(){return re})),n.d(r,"AriaLiveRegionInitializer",(function(){return hD.a})),n.d(r,"DocumentElementInitializer",(function(){return pD.a})),n.d(r,"PaneManagerInitializer",(function(){return fD.a})),n.d(r,"RootElementInitializer",(function(){return gD.a})),n.d(r,"RootResponderInitializer",(function(){return mD.a})),n.d(r,"RootViewControllerInitializer",(function(){return _D.a})),n.d(r,"SpritePreloader",(function(){return vD.a})),n.d(r,"InteractionMode",(function(){return bD.a})),n.d(r,"PaneManager",(function(){return yD.a})),n.d(r,"PaneSupport",(function(){return ah.a})),n.d(r,"Browser",(function(){return te.a})),n.d(r,"Device",(function(){return p.a})),n.d(r,"FileAPI",(function(){return Zg})),n.d(r,"Rendering",(function(){return wD})),n.d(r,"Scrolling",(function(){return ID.a})),n.d(r,"BrowserWindow",(function(){return SD.a})),n.d(r,"EventCapabilities",(function(){return CD.a})),n.d(r,"eventCapabilities",(function(){return CD.c})),n.d(r,"PointerEventClass",(function(){return CD.b})),n.d(r,"FileAPICapabilities",(function(){return AD})),n.d(r,"fileAPICapabilities",(function(){return OD})),n.d(r,"fontDetector",(function(){return TD})),n.d(r,"LinkCapabilities",(function(){return MD})),n.d(r,"linkCapabilities",(function(){return DD})),n.d(r,"serializeObjectToElement",(function(){return PD.a})),n.d(r,"serializePropertyToElement",(function(){return PD.b})),n.d(r,"serializePlatformInfoToElement",(function(){return LD.a})),n.d(r,"StorageManager",(function(){return RD.c})),n.d(r,"LocalStorage",(function(){return RD.a})),n.d(r,"SessionStorage",(function(){return RD.b})),n.d(r,"CollectionView",(function(){return C_.a})),n.d(r,"CollectionViewController",(function(){return Pm.a})),n.d(r,"CollectionCell",(function(){return _f.a})),n.d(r,"IndexSet",(function(){return kp.a})),n.d(r,"IndexTracker",(function(){return xD.a})),n.d(r,"InvalidationContext",(function(){return Gm.a})),n.d(r,"ItemCell",(function(){return km.a})),n.d(r,"CollectionLayoutController",(function(){return ND.a})),n.d(r,"SpaceAroundViewport",(function(){return FD.a})),n.d(r,"CollectionLayoutDelegateProtocol",(function(){return mf.a})),n.d(r,"CollectionLayoutMetrics",(function(){return VD.a})),n.d(r,"AbsolutelyPositionedPresenter",(function(){return Nm.a})),n.d(r,"ItemViewPresenter",(function(){return TO.a})),n.d(r,"CollectionPresenterProtocol",(function(){return kD.a})),n.d(r,"Justification",(function(){return Wm})),n.d(r,"FlowLayoutDelegate",(function(){return Km})),n.d(r,"LayoutDirection",(function(){return $m})),n.d(r,"IndexedListLayoutDelegate",(function(){return xm.a})),n.d(r,"ListPosition",(function(){return Um.c})),n.d(r,"ListLayoutMetrics",(function(){return Um.b})),n.d(r,"ListLayoutDelegate",(function(){return Um.a})),n.d(r,"ListViewController",(function(){return Ei.a})),n.d(r,"ListItemSelectionSupport",(function(){return Qp})),n.d(r,"ListSelectionPresenterSupport",(function(){return Rw})),n.d(r,"ListSelectionSupport",(function(){return xw})),n.d(r,"SelectInDirectionKeyDownHandlerSupport",(function(){return Pw})),n.d(r,"ListFooterView",(function(){return QA})),n.d(r,"ListHeaderView",(function(){return YA})),n.d(r,"ListItemView",(function(){return zp.a})),n.d(r,"CustomRowHeightSupport",(function(){return lA})),n.d(r,"FlatCollectionUpdateSupport",(function(){return BD})),n.d(r,"SupplementaryViewPresenterSupport",(function(){return ZA})),n.d(r,"SupplementaryViewSupport",(function(){return XA})),n.d(r,"OutlineHandle",(function(){return vc})),n.d(r,"OutlineHandleProvider",(function(){return bc})),n.d(r,"OutlineExpansionDelegateProtocol",(function(){return rc})),n.d(r,"OutlineRootArrayProxy",(function(){return yc})),n.d(r,"OutlineViewController",(function(){return oA})),n.d(r,"OutlineViewExpansionDelegate",(function(){return ac})),n.d(r,"OutlineViewPresenter",(function(){return sA})),n.d(r,"OutlineExpandableItemView",(function(){return rA})),n.d(r,"OutlineNonExpandableItemView",(function(){return aA})),n.d(r,"OutlineToggleView",(function(){return nA})),n.d(r,"SectionHandleProtocol",(function(){return LA})),n.d(r,"CollectionSectionLayoutSupport",(function(){return jm})),n.d(r,"SectionedCollectionAdapterProtocol",(function(){return DA})),n.d(r,"SectionedHandleProtocol",(function(){return RA})),n.d(r,"ListSectionHandle",(function(){return WD})),n.d(r,"SectionedListHandle",(function(){return $D})),n.d(r,"SectionedListAdapter",(function(){return qD})),n.d(r,"SectionedCollectionHandle",(function(){return xA})),n.d(r,"SectionedCollectionHandleProvider",(function(){return NA})),n.d(r,"SectionHandle",(function(){return VA})),n.d(r,"SectionHandleProvider",(function(){return kA})),n.d(r,"SectionedOrderedListAdapter",(function(){return HA})),n.d(r,"BaseSelectionController",(function(){return Jm})),n.d(r,"IdentitySelectionController",(function(){return cA})),n.d(r,"IndexedSelectionController",(function(){return i_})),n.d(r,"IndexedSelectionDelegateProtocol",(function(){return a_})),n.d(r,"SelectionDelegateProtocol",(function(){return Lm})),n.d(r,"SelectionDirections",(function(){return Ym})),n.d(r,"SelectionOperations",(function(){return Qm})),n.d(r,"SelectionSupportProtocol",(function(){return Rm})),n.d(r,"ModelStatus",(function(){return L.k})),n.d(r,"LOADED",(function(){return L.h})),n.d(r,"NOT_LOADED",(function(){return L.l})),n.d(r,"LOADING",(function(){return L.i})),n.d(r,"ERRORED",(function(){return L.e})),n.d(r,"MIXED_STATE",(function(){return L.j})),n.d(r,"DataOperation",(function(){return L.d})),n.d(r,"LOAD",(function(){return L.g})),n.d(r,"LIST",(function(){return L.f})),n.d(r,"CREATE",(function(){return L.b})),n.d(r,"UPDATE",(function(){return L.m})),n.d(r,"DESTROY",(function(){return L.c})),n.d(r,"BULK",(function(){return L.a})),n.d(r,"getModelClasses",(function(){return L.q})),n.d(r,"resetModelClasses",(function(){return L.u})),n.d(r,"getModelClassByName",(function(){return L.o})),n.d(r,"getModelClassMapping",(function(){return L.p})),n.d(r,"resetModelClassMapping",(function(){return L.t})),n.d(r,"getDataManager",(function(){return L.n})),n.d(r,"setDataManager",(function(){return L.v})),n.d(r,"resetDataManager",(function(){return L.s})),n.d(r,"resetAllData",(function(){return L.r})),n.d(r,"EmbeddedRelationshipArray",(function(){return QD.a})),n.d(r,"FastBulkLoadingSupport",(function(){return YD})),n.d(r,"Model",(function(){return Uf.a})),n.d(r,"ModelProperty",(function(){return Uf.b})),n.d(r,"modelProperty",(function(){return Uf.c})),n.d(r,"ModelArray",(function(){return Ac.a})),n.d(r,"ModelStoreIdSerializer",(function(){return eP.a})),n.d(r,"OperationHandler",(function(){return iv.a})),n.d(r,"findHandlerForOperationType",(function(){return tP.a})),n.d(r,"RelationshipArray",(function(){return nP.a})),n.d(r,"Relationship",(function(){return zt.a})),n.d(r,"ToOneRelationshipProperty",(function(){return zt.c})),n.d(r,"ToManyRelationshipProperty",(function(){return zt.b})),n.d(r,"getClassForRelationshipType",(function(){return zt.d})),n.d(r,"Branch",(function(){return iP})),n.d(r,"BranchingSupport",(function(){return sP})),n.d(r,"ChangeSet",(function(){return lP.a})),n.d(r,"DataChange",(function(){return cP.a})),n.d(r,"DataManager",(function(){return OP})),n.d(r,"createDataManager",(function(){return TP})),n.d(r,"LoadStatus",(function(){return jT.a})),n.d(r,"NetworkStatus",(function(){return IP.a})),n.d(r,"HardResetMergeStrategy",(function(){return rP})),n.d(r,"OverwriteMergeStrategy",(function(){return uP})),n.d(r,"Store",(function(){return jo.a})),n.d(r,"StoreStatus",(function(){return jo.b})),n.d(r,"ThreeWayChangeProtocol",(function(){return NP})),n.d(r,"ThreeWayMergeDelegateProtocol",(function(){return FP})),n.d(r,"ThreeWayMergeDelegateSupport",(function(){return NI})),n.d(r,"MERGE_DIRECTION",(function(){return FI})),n.d(r,"MERGE_FAILED_RESULT",(function(){return VI})),n.d(r,"MERGE_TYPE",(function(){return kI})),n.d(r,"threeWayMerge",(function(){return BI})),n.d(r,"ParallelTransactionProcessor",(function(){return CP})),n.d(r,"SerializedTransactionProcessor",(function(){return EP})),n.d(r,"Transaction",(function(){return pP})),n.d(r,"TransactionList",(function(){return wP})),n.d(r,"TransactionProcessor",(function(){return SP})),n.d(r,"_CacheableSupport",(function(){return VP.a})),n.d(r,"CoreEvent",(function(){return kP.a})),n.d(r,"FocusEvent",(function(){return BP.a})),n.d(r,"CoreMouseEvent",(function(){return jP.a})),n.d(r,"PointerType",(function(){return gl.b})),n.d(r,"PointerEvent",(function(){return gl.a})),n.d(r,"WheelEvent",(function(){return UP.a})),n.d(r,"FocusLayerSupport",(function(){return GP.b})),n.d(r,"FocusLayer",(function(){return GP.a})),n.d(r,"FocusSupport",(function(){return wh.a})),n.d(r,"ViewFocusSupport",(function(){return wh.b})),n.d(r,"ButtonTapGestureRecognizerDelegate",(function(){return qp.b})),n.d(r,"ButtonTapGestureRecognizer",(function(){return qp.a})),n.d(r,"GestureRecognitionEventSequence",(function(){return HP.a})),n.d(r,"GestureRecognizerStates",(function(){return L_.b})),n.d(r,"GestureRecognizer",(function(){return L_.a})),n.d(r,"GestureRecognizerDelegate",(function(){return Kp.a})),n.d(r,"VELOCITY_WINDOW_MS",(function(){return hT.b})),n.d(r,"PanGestureRecognizer",(function(){return hT.a})),n.d(r,"ModifierKeys",(function(){return Zp.a})),n.d(r,"TapGestureRecognizer",(function(){return Zp.b})),n.d(r,"continuousGestureRecognizerStateGenerator",(function(){return WP.a})),n.d(r,"discreteGestureRecognizerStateGenerator",(function(){return $P.a})),n.d(r,"changeHandler",(function(){return zP.a})),n.d(r,"dragDropHandler",(function(){return KP.a})),n.d(r,"focusHandler",(function(){return qP.a})),n.d(r,"HandlerGenerator",(function(){return QP.a})),n.d(r,"inputHandler",(function(){return YP.a})),n.d(r,"keyboardHandler",(function(){return ZP.a})),n.d(r,"mouseHandler",(function(){return XP.a})),n.d(r,"pointerHandler",(function(){return JP.a})),n.d(r,"touchHandler",(function(){return eL.b})),n.d(r,"clearAllTouchesHandler",(function(){return eL.a})),n.d(r,"wheelHandler",(function(){return tL.a})),n.d(r,"KeyCodes",(function(){return ml.a})),n.d(r,"KeyManager",(function(){return nu.a})),n.d(r,"KeySequence",(function(){return gb.a})),n.d(r,"ResponderProtocol",(function(){return nL.a})),n.d(r,"ResponderSupport",(function(){return Ti.a})),n.d(r,"RootResponder",(function(){return P_.a})),n.d(r,"findViewForEvent",(function(){return P_.c})),n.d(r,"findViewForElement",(function(){return P_.b})),n.d(r,"sendEvent",(function(){return Vp.a})),n.d(r,"supportedEvents",(function(){return iL.a})),n.d(r,"DateFormatter",(function(){return Hd})),n.d(r,"Locale",(function(){return s.a})),n.d(r,"addLocalizedValuesFor",(function(){return s.b})),n.d(r,"loc",(function(){return s.d})),n.d(r,"setLocale",(function(){return s.e})),n.d(r,"getLocale",(function(){return s.c})),n.d(r,"ChannelProtocol",(function(){return kr.a})),n.d(r,"ChildWindowChannel",(function(){return rL.a})),n.d(r,"ParentWindowChannel",(function(){return fo})),n.d(r,"WindowPostMessageChannel",(function(){return po.a})),n.d(r,"DownloadManager",(function(){return sL})),n.d(r,"IFrameDownloader",(function(){return xd})),n.d(r,"IFrameDownloadCompletionStatus",(function(){return Rd})),n.d(r,"LinkDownloader",(function(){return aL})),n.d(r,"Message",(function(){return Fy.a})),n.d(r,"JsonRpcMessageFormatterProtocol",(function(){return oL.a})),n.d(r,"JsonRpcBase",(function(){return ga.a})),n.d(r,"JsonRpcCaller",(function(){return jr.a})),n.d(r,"JSON_RPC_ERROR",(function(){return ma.a})),n.d(r,"JsonRpcError",(function(){return ma.b})),n.d(r,"JsonRpcParseError",(function(){return ma.g})),n.d(r,"JsonRpcInvalidRequestError",(function(){return ma.e})),n.d(r,"JsonRpcMethodNotFoundError",(function(){return ma.f})),n.d(r,"JsonRpcInvalidParamsError",(function(){return ma.d})),n.d(r,"JsonRpcInternalError",(function(){return ma.c})),n.d(r,"JsonRpcListener",(function(){return lL.a})),n.d(r,"JsonRpcMessageFormatterV2",(function(){return cL.a})),n.d(r,"RequestStatus",(function(){return kn.b})),n.d(r,"HTTP",(function(){return kn.a})),n.d(r,"NetworkProgress",(function(){return Fn.a})),n.d(r,"XHRBodySerializer",(function(){return uL.a})),n.d(r,"Request",(function(){return ae.a})),n.d(r,"Response",(function(){return vm.a})),n.d(r,"HttpStatusCodes",(function(){return mm})),n.d(r,"BaseTransport",(function(){return dL.a})),n.d(r,"TransportProtocol",(function(){return hL.a})),n.d(r,"XHR",(function(){return Jn.a})),n.d(r,"URL",(function(){return j.a})),n.d(r,"MimeType",(function(){return pL})),n.d(r,"FileValidator",(function(){return fL})),n.d(r,"UploadRequest",(function(){return Xg})),n.d(r,"hasSameOrigin",(function(){return gL.a})),n.d(r,"DataflowDebugger",(function(){})),n.d(r,"DOMInjector",(function(){return _L})),n.d(r,"EventGenerator",(function(){return bL})),n.d(r,"EventSimulator",(function(){return DL})),n.d(r,"InputEvent",(function(){return IL})),n.d(r,"KeyEvent",(function(){return SL})),n.d(r,"PointerCycle",(function(){return wL})),n.d(r,"nativeEvent",(function(){return OL})),n.d(r,"setUpBrowserEnvironment",(function(){return LL})),n.d(r,"AccessorProtocol",(function(){return RL.a})),n.d(r,"BaseMapIterator",(function(){return xL.a})),n.d(r,"BidirectionalIteratorProtocol",(function(){return NL.a})),n.d(r,"BidirectionallyIterableProtocol",(function(){return FL.a})),n.d(r,"CollectionProtocol",(function(){return VL.a})),n.d(r,"CoreArray",(function(){return Ai.a})),n.d(r,"CoreMap",(function(){return wc.a})),n.d(r,"IterableProtocol",(function(){return kL.a})),n.d(r,"IteratorProtocol",(function(){return BL.a})),n.d(r,"LinkedList",(function(){return HL})),n.d(r,"LinkedListIterator",(function(){return UL})),n.d(r,"ListProtocol",(function(){return jD.a})),n.d(r,"MapEntryIterator",(function(){return zL.a})),n.d(r,"MapKeyIterator",(function(){return KL.a})),n.d(r,"MapValueIterator",(function(){return qL.a})),n.d(r,"MutatorIteratorProtocol",(function(){return QL.a})),n.d(r,"NativeIteratorWrapper",(function(){return YL.a})),n.d(r,"OrderedListIterator",(function(){return jL.a})),n.d(r,"OrderedListProtocol",(function(){return fP.a})),n.d(r,"RandomAccessIterableProtocol",(function(){return ZL.a})),n.d(r,"RandomAccessIteratorProtocol",(function(){return XL.a})),n.d(r,"RollingArrayDelegateProtocol",(function(){return JL})),n.d(r,"RollingArray",(function(){return eR})),n.d(r,"StrongArray",(function(){return nR.a})),n.d(r,"StrongArraySupport",(function(){return iR.a})),n.d(r,"BatchSetterForNonObservableObject",(function(){return rR.a})),n.d(r,"NULL_WEAK_REFERENCE",(function(){return Jh.b})),n.d(r,"Class",(function(){return Jh.a})),n.d(r,"NonObservableBatchSetter",(function(){return Jh.c})),n.d(r,"CloneableProtocol",(function(){return aR.a})),n.d(r,"SimpleCloneableSupport",(function(){return cR})),n.d(r,"CoreObject",(function(){return P.a})),n.d(r,"EnumGroup",(function(){return we.a})),n.d(r,"createEnumGroup",(function(){return we.b})),n.d(r,"EnumItem",(function(){return mr.a})),n.d(r,"createEnumItem",(function(){return mr.b})),n.d(r,"ExceptionHandlerDelegateProtocol",(function(){return uR.a})),n.d(r,"StaticExceptionHandlerDelegateProtocol",(function(){return uR.b})),n.d(r,"ITSELF",(function(){return D_.a})),n.d(r,"Instance",(function(){return k.a})),n.d(r,"instance",(function(){return k.c})),n.d(r,"InstanceSupport",(function(){return k.b})),n.d(r,"Accumulator",(function(){return F.a})),n.d(r,"accumulator",(function(){return F.b})),n.d(r,"define",(function(){return nc.c})),n.d(r,"Metadata",(function(){return nc.a})),n.d(r,"MetadataSupport",(function(){return nc.b})),n.d(r,"VALUE_SENTINEL",(function(){return H.c})),n.d(r,"Property",(function(){return H.a})),n.d(r,"property",(function(){return H.d})),n.d(r,"PropertySupport",(function(){return H.b})),n.d(r,"STRONG",(function(){return sc.a})),n.d(r,"WEAK",(function(){return sc.c})),n.d(r,"UNSAFE",(function(){return sc.b})),n.d(r,"retainValueIfNeeded",(function(){return sc.f})),n.d(r,"releaseValueIfNeeded",(function(){return sc.e})),n.d(r,"autoreleaseValueIfNeeded",(function(){return sc.d})),n.d(r,"weaklyReferenceValueIfNeeded",(function(){return sc.g})),n.d(r,"weaklyUnreferenceValueIfNeeded",(function(){return sc.h})),n.d(r,"union",(function(){return dR.c})),n.d(r,"intersection",(function(){return dR.b})),n.d(r,"_selectPropertyTypeCheck",(function(){return dR.a})),n.d(r,"SubclassProperty",(function(){return pR})),n.d(r,"subclassProperty",(function(){return fR})),n.d(r,"SubclassFactorySupport",(function(){return gR})),n.d(r,"PromiseSupport",(function(){return Z.b})),n.d(r,"CorePromise",(function(){return Z.a})),n.d(r,"Abstract",(function(){return mR.a})),n.d(r,"Protocol",(function(){return Tn.a})),n.d(r,"Required",(function(){return Tn.b})),n.d(r,"RequiredMetadata",(function(){return _R.a})),n.d(r,"RequiredMethod",(function(){return Mn.a})),n.d(r,"RequiredProperty",(function(){return $n.a})),n.d(r,"JSONSerializer",(function(){return By.a})),n.d(r,"SerializationSupport",(function(){return vR.a})),n.d(r,"SerializerProtocol",(function(){return Tc.a})),n.d(r,"SharedInstance",(function(){return ie.a})),n.d(r,"SubclassFactoryProtocol",(function(){return hR})),n.d(r,"BaseValidator",(function(){return Ee})),n.d(r,"EmailValidator",(function(){return bR})),n.d(r,"LengthValidator",(function(){return yR})),n.d(r,"NotEmptyValidator",(function(){return wR})),n.d(r,"PatternValidator",(function(){return Ae})),n.d(r,"RangeValidator",(function(){return IR})),n.d(r,"ValidatorProtocol",(function(){return Ce.a})),n.d(r,"_ObjectPool",(function(){return SR})),n.d(r,"_Poolable",(function(){return uc.a})),n.d(r,"isCWClass",(function(){return Yr.a})),n.d(r,"isCoreObject",(function(){return Br.a})),n.d(r,"kindOf",(function(){return Rf.a})),n.d(r,"ArrayChangeOperation",(function(){return CR.a})),n.d(r,"CoreSet",(function(){return oi.a})),n.d(r,"BaseBidirectionalHandleProvider",(function(){return cc.a})),n.d(r,"BaseHandleProvider",(function(){return ER.a})),n.d(r,"BaseRandomAccessHandleProvider",(function(){return AR.a})),n.d(r,"BidirectionalHandleProtocol",(function(){return dc.a})),n.d(r,"HandleProtocol",(function(){return PA.a})),n.d(r,"HandleSupport",(function(){return mc.a})),n.d(r,"OrderedListHandle",(function(){return TA.a})),n.d(r,"OrderedListHandleProvider",(function(){return MA.a})),n.d(r,"RandomAccessHandleProtocol",(function(){return Vm.a})),n.d(r,"TreeHandle",(function(){return fc})),n.d(r,"TreeHandleDelegateSupport",(function(){return ic})),n.d(r,"TreeHandleProtocol",(function(){return hc})),n.d(r,"TreeHandleProvider",(function(){return gc})),n.d(r,"ObservableArray",(function(){return Wo.b})),n.d(r,"ArrayChangeList",(function(){return Wo.a})),n.d(r,"StrongArrayChangeList",(function(){return Wo.c})),n.d(r,"ObservableArrayIterator",(function(){return OR.a})),n.d(r,"ObservableArrayProxy",(function(){return oc})),n.d(r,"ObservableCollectionIteratorProtocol",(function(){return TR.a})),n.d(r,"ObservableCollectionProtocol",(function(){return MR.a})),n.d(r,"OrderedSet",(function(){return _P})),n.d(r,"SetIterator",(function(){return DR.a})),n.d(r,"StrongObservableArray",(function(){return Bf.a})),n.d(r,"TreeArrayProxy",(function(){return _c})),n.d(r,"BaseProcessor",(function(){return Ld})),n.d(r,"BatchSetter",(function(){return Zl.a})),n.d(r,"BatchSetterForObject",(function(){return PR.a})),n.d(r,"OWNER",(function(){return Oi.b})),n.d(r,"Binding",(function(){return Oi.a})),n.d(r,"binding",(function(){return Oi.c})),n.d(r,"ChainedLookupNodeManager",(function(){return LR.a})),n.d(r,"ChainedLookupRootNodeManager",(function(){return LR.b})),n.d(r,"ChainedLookupTerminalNodeManager",(function(){return LR.c})),n.d(r,"DownstreamChainedLookupTerminalNodeManager",(function(){return LR.d})),n.d(r,"Dataflow",(function(){return Pe.a})),n.d(r,"Point2DProtocol",(function(){return RR.b})),n.d(r,"Point2D",(function(){return RR.a})),n.d(r,"RectProtocol",(function(){return Ko.b})),n.d(r,"Rect",(function(){return Ko.a})),n.d(r,"SizeProtocol",(function(){return _l.b})),n.d(r,"Size",(function(){return _l.a})),n.d(r,"NodeManager",(function(){return xR.a})),n.d(r,"DownstreamNodeManager",(function(){return NR.a})),n.d(r,"DownstreamStrongNodeManager",(function(){return FR.b})),n.d(r,"DownstreamStrongComputedNodeManager",(function(){return FR.a})),n.d(r,"BaseDownstreamStrongNodeManager",(function(){return VR.a})),n.d(r,"DownstreamUnsafeNodeManager",(function(){return kR.a})),n.d(r,"DownstreamWeakComputedNodeManager",(function(){return jR.a})),n.d(r,"DownstreamWeakNodeManager",(function(){return UR.a})),n.d(r,"NOT_SET",(function(){return GR.a})),n.d(r,"UpstreamNodeManager",(function(){return GR.b})),n.d(r,"UpstreamReadOnlyNodeManager",(function(){return HR.a})),n.d(r,"UpstreamReadOnlyStrongNodeManager",(function(){return WR.a})),n.d(r,"UpstreamStrongNodeManager",(function(){return $R.a})),n.d(r,"UpstreamWeakRootValueNodeManager",(function(){return zR.a})),n.d(r,"Observable",(function(){return B.b})),n.d(r,"ObserverNodeManager",(function(){return B.e})),n.d(r,"ObserverMetadata",(function(){return B.d})),n.d(r,"Observer",(function(){return B.c})),n.d(r,"Listener",(function(){return B.a})),n.d(r,"observer",(function(){return B.h})),n.d(r,"listener",(function(){return B.g})),n.d(r,"SignalMetadata",(function(){return B.f})),n.d(r,"signal",(function(){return B.i})),n.d(r,"ObservableProperty",(function(){return V.a})),n.d(r,"observableProperty",(function(){return V.b})),n.d(r,"Processor",(function(){return xI})),n.d(r,"RequiredObservableProperty",(function(){return _u.a})),n.d(r,"RequiredSignal",(function(){return KR.a})),n.d(r,"OBSERVER_STATES",(function(){return qR.a})),n.d(r,"SignalEvent",(function(){return qR.b})),n.d(r,"TargetActionSupport",(function(){return E_.a})),n.d(r,"Timer",(function(){return Pd.a})),n.d(r,"ValidationSupport",(function(){return Se.a})),n.d(r,"benchmark",(function(){return QR})),n.d(r,"init",(function(){return YR})),n.d(r,"VerticalAlignment",(function(){return qo})),n.d(r,"HorizontalAlignment",(function(){return Qo})),n.d(r,"DOMLayoutMeasurer",(function(){return bl.a})),n.d(r,"DragOperation",(function(){return Dn})),n.d(r,"DragSourceProtocol",(function(){return ZR})),n.d(r,"DragTargetProtocol",(function(){return Rn})),n.d(r,"DragType",(function(){return Pn})),n.d(r,"dragDataContainer",(function(){return Ln})),n.d(r,"setDragImage",(function(){return XR})),n.d(r,"LayoutContextSupport",(function(){return JR.a})),n.d(r,"LayoutMeasurer",(function(){return ex.a})),n.d(r,"FadingScrollIndicatorSupport",(function(){return Dp.a})),n.d(r,"FadingScrollIndicator",(function(){return Pp.b})),n.d(r,"FadingHorizontalScrollIndicatorView",(function(){return Pp.a})),n.d(r,"FadingVerticalScrollIndicatorView",(function(){return Pp.c})),n.d(r,"ScrollEvent",(function(){return tx.a})),n.d(r,"ScrollIndicatorSupport",(function(){return nx.a})),n.d(r,"ScrollIndicatorView",(function(){return ix.b})),n.d(r,"VerticalScrollIndicatorView",(function(){return ix.c})),n.d(r,"HorizontalScrollIndicatorView",(function(){return ix.a})),n.d(r,"ScrollSupport",(function(){return Mp.a})),n.d(r,"NativeScrollSupport",(function(){return MO.a})),n.d(r,"ScrollView",(function(){return rx})),n.d(r,"KeyboardScrollViewControllerSupport",(function(){return lx.a})),n.d(r,"View",(function(){return In.a})),n.d(r,"ChildViewControllerProperty",(function(){return Ci.a})),n.d(r,"childViewControllerProperty",(function(){return Ci.b})),n.d(r,"ViewController",(function(){return fi.a})),n.d(r,"ArrowSupport",(function(){return cx})),n.d(r,"ButtonSupport",(function(){return ku.a})),n.d(r,"ControlSupport",(function(){return kl.a})),n.d(r,"DOMSupport",(function(){return mx.a})),n.d(r,"PointerActivationSupport",(function(){return Fu.a})),n.d(r,"RadioGroupSupport",(function(){return vh})),n.d(r,"AttributeNodeSupport",(function(){return _x.a})),n.d(r,"AttributeOutletSupport",(function(){return vx.a})),n.d(r,"ClassNameOutletSupport",(function(){return bx.a})),n.d(r,"_ElementHandler",(function(){return yx.b})),n.d(r,"ElementSupport",(function(){return yx.a})),n.d(r,"MultiViewOutletSupport",(function(){return wx.a})),n.d(r,"StyleOutletSupport",(function(){return Ix.a})),n.d(r,"TemplateHandler",(function(){return Sx.a})),n.d(r,"TemplateSupport",(function(){return Cx.a})),n.d(r,"copyTemplate",(function(){return Cx.b})),n.d(r,"IPromiseIEscapedAllUserInput",(function(){return Ex.a})),n.d(r,"TextNodeOutletSupport",(function(){return Ex.b})),n.d(r,"TextNodeSupport",(function(){return Ax.a})),n.d(r,"registerOutlet",(function(){return Ox.c})),n.d(r,"getBindingCalculator",(function(){return Ox.a})),n.d(r,"registerNode",(function(){return Ox.b})),n.d(r,"ViewOutletSupport",(function(){return Tx.a})),n.d(r,"_SharedViewOutletSupport",(function(){return Mx.a})),n.d(r,"measureElement",(function(){return $u.a})),n.d(r,"_allowedTransforms",(function(){return yl.a})),n.d(r,"_testTransforms",(function(){return yl.b})),n.d(r,"setStyle",(function(){return yl.c})),n.d(r,"translateDevicePixels",(function(){return yl.d})),n.d(r,"SelectAllKeyDownHandlerSupport",(function(){return Dw})),n.d(r,"MenuDividerItem",(function(){return Dx})),n.d(r,"MenuDividerItemCell",(function(){return Px})),n.d(r,"MenuItem",(function(){return Lx})),n.d(r,"MenuListLayoutMetrics",(function(){return Rx})),n.d(r,"MenuListViewController",(function(){return Hx})),n.d(r,"MenuViewController",(function(){return $x})),n.d(r,"MenuArrowPopoverView",(function(){return zx})),n.d(r,"ModalMenuArrowPopoverView",(function(){return Kx})),n.d(r,"DirectionalCollectionViewDelegateProtocol",(function(){return qx})),n.d(r,"MenuDelegateProtocol",(function(){return Nx})),n.d(r,"MenuDelegateSupport",(function(){return Fx})),n.d(r,"Direction",(function(){return xx})),n.d(r,"MenuDividerItemView",(function(){return Vx})),n.d(r,"MenuItemView",(function(){return kx})),n.d(r,"MenuListView",(function(){return jx})),n.d(r,"ScrollRepeaterButton",(function(){return Bx})),n.d(r,"OnRightLayout",(function(){return cl})),n.d(r,"OnLeftLayout",(function(){return ul})),n.d(r,"OnTopLayout",(function(){return dl})),n.d(r,"OnBottomLayout",(function(){return hl})),n.d(r,"PopoverLayout",(function(){return Yo})),n.d(r,"SplitLayout",(function(){return Yx})),n.d(r,"AlertStyle",(function(){return pl.a})),n.d(r,"AlertContentController",(function(){return wn.a})),n.d(r,"AlertViewController",(function(){return wn.b})),n.d(r,"MasterDetailViewController",(function(){return oN})),n.d(r,"ModalDialogViewController",(function(){return lN.a})),n.d(r,"PopoverViewController",(function(){return El})),n.d(r,"BestFitLayoutStrategy",(function(){return Al})),n.d(r,"FirstFitLayoutStrategy",(function(){return Ol})),n.d(r,"PopupViewController",(function(){return Cl.a})),n.d(r,"RadioGroupViewController",(function(){return uN})),n.d(r,"ReorderableSimpleListViewController",(function(){return dN})),n.d(r,"SimpleListViewController",(function(){return cN})),n.d(r,"ModalContentSupport",(function(){return pN.a})),n.d(r,"AXGrabToggleButton",(function(){return fN})),n.d(r,"AlertContentView",(function(){return Sn.a})),n.d(r,"AlertView",(function(){return Sn.b})),n.d(r,"ArrowPopoverAlignment",(function(){return Il})),n.d(r,"ArrowPopoverView",(function(){return Sl})),n.d(r,"Button",(function(){return Ho.a})),n.d(r,"CapacityMeterBarItemView",(function(){return mN})),n.d(r,"CapacityMeterLegendItemView",(function(){return _N})),n.d(r,"CapacityMeterView",(function(){return vN})),n.d(r,"Checkbox",(function(){return Ih})),n.d(r,"CircularProgressView",(function(){return bN})),n.d(r,"LabelView",(function(){return Sf})),n.d(r,"MasterDetailView",(function(){return sN})),n.d(r,"ModalArrowPopoverView",(function(){return R_})),n.d(r,"CSS_ANIMATION_DURATION",(function(){return yN.a})),n.d(r,"ModalDialog",(function(){return yN.b})),n.d(r,"PopoverView",(function(){return wl})),n.d(r,"PopupView",(function(){return wN.a})),n.d(r,"ProgressView",(function(){return IN})),n.d(r,"RadioButton",(function(){return bh})),n.d(r,"ResizeHandleView",(function(){return Xx})),n.d(r,"SVGView",(function(){return SN})),n.d(r,"SearchField",(function(){return AN})),n.d(r,"Segmented",(function(){return xu})),n.d(r,"SelectView",(function(){return ON})),n.d(r,"SliderView",(function(){return dp})),n.d(r,"SpinnerView",(function(){return Jc.a})),n.d(r,"SplitView",(function(){return eN})),n.d(r,"_computeSplitViewSizes",(function(){return rN})),n.d(r,"Switch",(function(){return TN})),n.d(r,"TextField",(function(){return Bl})),n.d(r,"ToggleButton",(function(){return Ru})),n.d(r,"TooltipContentView",(function(){return gN})),n.d(r,"BaseAnimation",(function(){return MN.a})),n.d(r,"BounceAnimation",(function(){return DN.a})),n.d(r,"BasFrictionAnimation",(function(){return PN.a})),n.d(r,"CatesFrictionAnimation",(function(){return xN})),n.d(r,"_binarySearchEngine",(function(){return Fm.a})),n.d(r,"appendArrays",(function(){return dP.a})),n.d(r,"argumentsAsTempArray",(function(){return gm.a})),n.d(r,"binarySearch",(function(){return NN})),n.d(r,"invertArray",(function(){return Vu.a})),n.d(r,"overwriteArray",(function(){return sR.a})),n.d(r,"removeItemFromArray",(function(){return et.a})),n.d(r,"sliceArrayLike",(function(){return ee.a})),n.d(r,"unique",(function(){return Gf})),n.d(r,"Base64",(function(){return dE.a})),n.d(r,"isValidIdentifierName",(function(){return VN})),n.d(r,"deepEqual",(function(){return Q.a})),n.d(r,"exists",(function(){return K.a})),n.d(r,"isArrayLike",(function(){return Zr.a})),n.d(r,"isBoolean",(function(){return kN.a})),n.d(r,"isEmpty",(function(){return Vn.a})),n.d(r,"isFunction",(function(){return Je.a})),n.d(r,"isHash",(function(){return g.a})),n.d(r,"isNumber",(function(){return m.a})),n.d(r,"isPrimitive",(function(){return BN.a})),n.d(r,"isString",(function(){return J.a})),n.d(r,"isThenable",(function(){return da.a})),n.d(r,"copy",(function(){return jN.b})),n.d(r,"DONTCOPY",(function(){return jN.a})),n.d(r,"copyProperties",(function(){return oR.a})),n.d(r,"deepCopy",(function(){return Me.a})),n.d(r,"shallowCopy",(function(){return vl.a})),n.d(r,"_multiContext",(function(){return UN.a})),n.d(r,"addEventListener",(function(){return Ze.a})),n.d(r,"createExceptionInfo",(function(){return sa})),n.d(r,"getErrorLineNumber",(function(){return aa})),n.d(r,"getExceptionHandlerWrapperIfWrapped",(function(){return GN.a})),n.d(r,"getTruncatedStack",(function(){return ra})),n.d(r,"invokeWithAdditionalExceptionContext",(function(){return HN})),n.d(r,"invokeWithExceptionHandler",(function(){return d.b})),n.d(r,"registerExceptionHandlerDelegate",(function(){return d.c})),n.d(r,"getCurrentExceptionHandlerDelegate",(function(){return d.a})),n.d(r,"removeEventListener",(function(){return Xe.a})),n.d(r,"requestAnimationFrame",(function(){return mu.a})),n.d(r,"setInterval",(function(){return pn})),n.d(r,"setTimeout",(function(){return X.a})),n.d(r,"stringifyExceptionContext",(function(){return vt.a})),n.d(r,"wrapWithExceptionHandler",(function(){return hn.a})),n.d(r,"FatalError",(function(){return _.a})),n.d(r,"fatalError",(function(){return _.b})),n.d(r,"IDENTITY",(function(){return Tl.a})),n.d(r,"NOOP",(function(){return U.a})),n.d(r,"bindFunction",(function(){return yh.a})),n.d(r,"getFullyQualifiedClassNameForObject",(function(){return q.a})),n.d(r,"guidFor",(function(){return Yl.b})),n.d(r,"_resetGUIDs",(function(){return Yl.a})),n.d(r,"guidForContents",(function(){return af.a})),n.d(r,"Logger",(function(){return u.a})),n.d(r,"logger",(function(){return u.b})),n.d(r,"flooredMod",(function(){return WN})),n.d(r,"clearObject",(function(){return v.a})),n.d(r,"diffObjects",(function(){return _m.a})),n.d(r,"get",(function(){return $N.a})),n.d(r,"getPath",(function(){return Gd.a})),n.d(r,"invertObject",(function(){return zN})),n.d(r,"iterateObject",(function(){return KN})),n.d(r,"keyFromPath",(function(){return qN.a})),n.d(r,"merge",(function(){return gi.a})),n.d(r,"objectFromPath",(function(){return QN.a})),n.d(r,"set",(function(){return YN.a})),n.d(r,"setIfChanged",(function(){return Ie.a})),n.d(r,"setOrDeleteValue",(function(){return ZN.a})),n.d(r,"bytesToHumanizedFormat",(function(){return XN.a})),n.d(r,"camelize",(function(){return Mm})),n.d(r,"capitalize",(function(){return z.a})),n.d(r,"characterCodeIsCJK",(function(){return Re})),n.d(r,"stringIsCJK",(function(){return xe})),n.d(r,"escapeHTML",(function(){return d_.b})),n.d(r,"escapeAttribute",(function(){return d_.a})),n.d(r,"escapeRegExp",(function(){return d_.c})),n.d(r,"fmt",(function(){return ne.a})),n.d(r,"hyphenate",(function(){return Dm.a})),n.d(r,"naturalComparator",(function(){return Zw})),n.d(r,"parsePath",(function(){return JN.a})),n.d(r,"diacriticMappingTable",(function(){return _v})),n.d(r,"removeDiacritics",(function(){return vv})),n.d(r,"utf16StringToCodePoints",(function(){return eF})),n.d(r,"utf8ArrayBufferToCodePoints",(function(){return tF})),n.d(r,"notImplemented",(function(){return nF})),n.d(r,"NotImplementedError",(function(){return iF})),n.d(r,"throwNotImplemented",(function(){return rF})),n.d(r,"createFlatArray",(function(){return aF})),n.d(r,"createSequentialArray",(function(){return sF})),n.d(r,"getInnerText",(function(){return oF})),n.d(r,"isSpied",(function(){return lF})),n.d(r,"netRetains",(function(){return hF})),n.d(r,"netReleases",(function(){return pF})),n.d(r,"netRetainsIfAny",(function(){return fF})),n.d(r,"netReleasesIfAny",(function(){return gF})),n.d(r,"spyIfNecessary",(function(){return uF})),n.d(r,"unspyIfNecessary",(function(){return dF})),n.d(r,"stubSuper",(function(){return mF})),n.d(r,"stubSuperIntoMockObject",(function(){return _F})),n.d(r,"testValues",(function(){return vF})),n.d(r,"uuidBytes",(function(){return bF.a})),n.d(r,"uuidBytesToString",(function(){return yF.a})),n.d(r,"uuidString",(function(){return Y.a})),n.d(r,"uuidStringsToBytes",(function(){return wF})),n.d(r,"invokeWithAutoreleaseFrame",(function(){return cF.e})),n.d(r,"beginAutoreleaseFrame",(function(){return cF.c})),n.d(r,"endAutoreleaseFrame",(function(){return cF.d})),n.d(r,"autoreleaseObject",(function(){return cF.b})),n.d(r,"_releaseImmediately",(function(){return cF.a})),n.d(r,"instanceOf",(function(){return pi.a})),n.d(r,"startFilteringErrors",(function(){return W})),n.d(r,"startFilteringUnhandledRejections",(function(){return $}));var a={};n.r(a),n.d(a,"AnimatedChildViewControllerProperty",(function(){return qT})),n.d(a,"animatedChildViewControllerProperty",(function(){return QT})),n.d(a,"BaseTransition",(function(){return YT.a})),n.d(a,"SlideUpTransition",(function(){return aM})),n.d(a,"SlideDownTransition",(function(){return sM})),n.d(a,"SlideLeftTransition",(function(){return oM})),n.d(a,"SlideRightTransition",(function(){return lM})),n.d(a,"BaseOpacityTransition",(function(){return cM.a})),n.d(a,"SlowOpacityTransition",(function(){return uM})),n.d(a,"MediumOpacityTransition",(function(){return dM})),n.d(a,"FastOpacityTransition",(function(){return hM})),n.d(a,"HorizontalSlideToFromTransition",(function(){return tM})),n.d(a,"VerticalSlideToTransition",(function(){return nM})),n.d(a,"ModalSlideUpTransition",(function(){return iM})),n.d(a,"ModalSlideDownTransition",(function(){return rM})),n.d(a,"AnimatedChildViewControllerTransitionDirections",(function(){return IA})),n.d(a,"AnimatedChildViewControllerTransitionSupport",(function(){return SA})),n.d(a,"HandheldChildViewControllerTransitionSupport",(function(){return pM})),n.d(a,"RetainReleaseTracking",(function(){return gM})),n.d(a,"RevertiblePropertySupport",(function(){return SM.b})),n.d(a,"CleanupRevertedPropertySupport",(function(){return SM.a})),n.d(a,"revertibleProperty",(function(){return SM.d})),n.d(a,"revertibleObservableProperty",(function(){return SM.c})),n.d(a,"SelfLogging",(function(){return CM.a})),n.d(a,"ViewControllerExtension",(function(){return CA})),n.d(a,"SimpleTransitionSupport",(function(){return EM})),n.d(a,"ThenableSupport",(function(){return AM.a})),n.d(a,"LongJobStatus",(function(){return WS})),n.d(a,"LongJobSupport",(function(){return $S})),n.d(a,"LongPollableJobSupport",(function(){return zS})),n.d(a,"LongJobModelSupport",(function(){return KS})),n.d(a,"LongJobPollTogglingViewSupport",(function(){return OM})),n.d(a,"PollableSupport",(function(){return HS.b})),n.d(a,"PollableModelSupport",(function(){return HS.a})),n.d(a,"NavigationViewControllerSupport",(function(){return MM})),n.d(a,"NavigationItem",(function(){return TM})),n.d(a,"NavigationBackButton",(function(){return RM})),n.d(a,"NavigationBarView",(function(){return xM})),n.d(a,"NavigationView",(function(){return NM})),n.d(a,"NavigationViewController",(function(){return FM})),n.d(a,"TouchToolbarView",(function(){return VM})),n.d(a,"ScrollView",(function(){return kM})),n.d(a,"ScrollContentView",(function(){return BM})),n.d(a,"ScrollViewTransitionLifecycleSupport",(function(){return jM})),n.d(a,"AsyncResultStatus",(function(){return oC})),n.d(a,"AsyncResult",(function(){return lC})),n.d(a,"Request",(function(){return ei})),n.d(a,"DrawImageSVGAlpha",(function(){return UM.a})),n.d(a,"DataManagerMixinProtocol",(function(){return GM})),n.d(a,"BoundFunction",(function(){return Bu.a})),n.d(a,"boundFunction",(function(){return Bu.b})),n.d(a,"protectedBoundFunction",(function(){return Bu.c})),n.d(a,"GatedProxyProperty",(function(){return BC.a})),n.d(a,"gatedProxyProperty",(function(){return BC.b})),n.d(a,"MappedArrayProperty",(function(){return Ff.a})),n.d(a,"mappedArrayProperty",(function(){return Ff.b})),n.d(a,"AsyncObservableProperty",(function(){return HM.a})),n.d(a,"asyncObservableProperty",(function(){return HM.b})),n.d(a,"MultiChildViewControllerProperty",(function(){return WM})),n.d(a,"multiChildViewControllerProperty",(function(){return $M})),n.d(a,"ThrottledFunctionSupport",(function(){return HC.a})),n.d(a,"throttledFunction",(function(){return HC.b})),n.d(a,"getOwningView",(function(){return zM})),n.d(a,"InsetsSupport",(function(){return tc.a})),n.d(a,"PointerLongPressSupport",(function(){return Sd})),n.d(a,"PointerDragGestureDirection",(function(){return Gu})),n.d(a,"PointerDragGestureSupport",(function(){return Hu})),n.d(a,"PointerDragDownGestureSupport",(function(){return Wu})),n.d(a,"MouseTrackingSupport",(function(){return kC.a})),n.d(a,"HoverTrackingSupport",(function(){return KT})),n.d(a,"PopupShowHideAnimationSupport",(function(){return Dl})),n.d(a,"ScrollTrackingSupport",(function(){return PO})),n.d(a,"CheapRectangleAwarenessSupport",(function(){return eO})),n.d(a,"SvgIconSupport",(function(){return Nu})),n.d(a,"SymbolSupport",(function(){return DM})),n.d(a,"quadraticBezierPath",(function(){return KM})),n.d(a,"linear",(function(){return zC.h})),n.d(a,"ease",(function(){return zC.b})),n.d(a,"easeIn",(function(){return zC.c})),n.d(a,"easeOut",(function(){return zC.f})),n.d(a,"easeInOut",(function(){return zC.d})),n.d(a,"easeInQuadratic",(function(){return zC.e})),n.d(a,"easeOutQuadratic",(function(){return zC.g})),n.d(a,"sineInOut",(function(){return zC.i})),n.d(a,"cubicBezier",(function(){return zC.a})),n.d(a,"AnimatedRetractionSupport",(function(){return UE.a})),n.d(a,"ViewportSizeSupport",(function(){return qM.a})),n.d(a,"ViewportSizeDOMReadingSupport",(function(){return Pl.a})),n.d(a,"ViewportSizeDOMWritingSupport",(function(){return aE.a})),n.d(a,"ViewportSizeDOMReadWriteSupport",(function(){return QM})),n.d(a,"ProgressPieView",(function(){return rE.a})),n.d(a,"RectangleTransition",(function(){return ZM})),n.d(a,"NestedRect",(function(){return YM})),n.d(a,"viewsWithTemporarySingleLineTextFields",(function(){return iD})),n.d(a,"TemporarySingleLineEditingSupport",(function(){return aD})),n.d(a,"TemporarySingleLineEditingSupportForScrollViews",(function(){return sD})),n.d(a,"GestureRecognizerCustomizabilitySupport",(function(){return pT.a})),n.d(a,"SingleTapGestureSupport",(function(){return oD})),n.d(a,"AxisSnappingPanGestureRecognizer",(function(){return lD.a})),n.d(a,"LongPressGestureRecognizer",(function(){return tD.a})),n.d(a,"PinchToZoomGestureRecognizer",(function(){return cD.a})),n.d(a,"DoubleTapGestureRecognizer",(function(){return uD.a})),n.d(a,"AdornmentHostSupport",(function(){return JA.a})),n.d(a,"AdornmentSupport",(function(){return FO})),n.d(a,"Adornment",(function(){return VO})),n.d(a,"AdornmentProperty",(function(){return NO.AdornmentProperty})),n.d(a,"adornmentProperty",(function(){return NO.adornmentProperty})),n.d(a,"ElementAdornmentSupport",(function(){return kO})),n.d(a,"ElementAdornment",(function(){return BO})),n.d(a,"ViewAdornmentSupport",(function(){return HO})),n.d(a,"ViewAdornment",(function(){return WO})),n.d(a,"ElementAdornmentFadeSupport",(function(){return zO})),n.d(a,"SingleLineEditorAdornment",(function(){return SF})),n.d(a,"mapIntoArray",(function(){return CF.a})),n.d(a,"removeFromArray",(function(){return CF.c})),n.d(a,"numericSort",(function(){return CF.b})),n.d(a,"binarySearch",(function(){return jE.b})),n.d(a,"asyncBinarySearch",(function(){return jE.a})),n.d(a,"bindFunctionReusably",(function(){return of.b})),n.d(a,"bindFunctionOnce",(function(){return of.a})),n.d(a,"bindProperties",(function(){return EF})),n.d(a,"unbindProperties",(function(){return AF})),n.d(a,"getBindingsForMapping",(function(){return OF})),n.d(a,"generateResampledImageBlobBeneathFileSize",(function(){return TF.a})),n.d(a,"generateResampledImageBlobBeneathFileSizeInFormatAtQuality",(function(){return TF.b})),n.d(a,"getCrudeImageQualityAssessment",(function(){return TF.c})),n.d(a,"getArrayBufferFromBlob",(function(){return MF.a})),n.d(a,"cloneNodeDeeplyIncludingCanvases",(function(){return Ml})),n.d(a,"canvasBoxBlur",(function(){return EE.a})),n.d(a,"canvasFromCSSBackground",(function(){return PF})),n.d(a,"CompoundLongJob",(function(){return xF})),n.d(a,"DiffAction",(function(){return aV})),n.d(a,"diff",(function(){return sV})),n.d(a,"stringToElement",(function(){return Yp})),n.d(a,"debugDisplayCanvas",(function(){return oV})),n.d(a,"drawImageSmooth",(function(){return tf.b})),n.d(a,"DrawImageSmooth",(function(){return tf.a})),n.d(a,"derelativizeUrl",(function(){return lV.a})),n.d(a,"enactStylesheet",(function(){return UT.b})),n.d(a,"enactStylesheetBatched",(function(){return UT.c})),n.d(a,"revokeStylesheet",(function(){return UT.d})),n.d(a,"defineCSSSelectorForSVGBackgroundImage",(function(){return UT.a})),n.d(a,"FastArraySet",(function(){return tO.a})),n.d(a,"FastStrongArraySet",(function(){return tO.b})),n.d(a,"FastLinkedListSet",(function(){return cV.a})),n.d(a,"fetchSharedImage",(function(){return CE.a})),n.d(a,"getSharedImage",(function(){return CE.b})),n.d(a,"fmtDuration",(function(){return uV.a})),n.d(a,"getScratchCanvas",(function(){return dV.a})),n.d(a,"getStack",(function(){return fM.a})),n.d(a,"Geo2D",(function(){return ET})),n.d(a,"groupIntoRanges",(function(){return Nd.a})),n.d(a,"Heartbeat",(function(){return fn})),n.d(a,"getImageContainerStyleObject",(function(){return hV})),n.d(a,"getRotatedImageStyleObject",(function(){return pV})),n.d(a,"getLayoutStyleString",(function(){return fV})),n.d(a,"getWidthForAspectRatio",(function(){return gV})),n.d(a,"getHeightForAspectRatio",(function(){return mV})),n.d(a,"innerSizeInOuter",(function(){return ef.b})),n.d(a,"innerSizeToFitOuter",(function(){return ef.d})),n.d(a,"innerSizeToCoverOuter",(function(){return ef.c})),n.d(a,"innerCropToCoverOuter",(function(){return ef.a})),n.d(a,"isDblClick",(function(){return UC})),n.d(a,"sleep",(function(){return _V})),n.d(a,"invertSparseIndexArray",(function(){return vV})),n.d(a,"LazyDeferredWorker",(function(){return KC.a})),n.d(a,"registerNumberFormatterForLocCounts",(function(){return w})),n.d(a,"locCount",(function(){return I})),n.d(a,"locCounts",(function(){return S})),n.d(a,"getCountObject",(function(){return E})),n.d(a,"getMultipleCountsObject",(function(){return O})),n.d(a,"getSuffixForCount",(function(){return T})),n.d(a,"fuzzifyNumber",(function(){return qC.a})),n.d(a,"MotionTracker",(function(){return nE.a})),n.d(a,"MovingIndexWindow",(function(){return bV})),n.d(a,"ObjectStore",(function(){return $C.ObjectStore})),n.d(a,"OriginSharder",(function(){return yV.a})),n.d(a,"partitionArray",(function(){return wV})),n.d(a,"parseCropRectFromString",(function(){return IV})),n.d(a,"Pool",(function(){return Sh.Pool})),n.d(a,"ArrayPool",(function(){return Sh.ArrayPool})),n.d(a,"ObjectPool",(function(){return Sh.ObjectPool})),n.d(a,"MapPool",(function(){return Sh.MapPool})),n.d(a,"SetPool",(function(){return Sh.SetPool})),n.d(a,"ImagePool",(function(){return Sh.ImagePool})),n.d(a,"CanvasPool",(function(){return Sh.CanvasPool})),n.d(a,"DivPool",(function(){return Sh.DivPool})),n.d(a,"arrayPool",(function(){return Sh.arrayPool})),n.d(a,"objectPool",(function(){return Sh.objectPool})),n.d(a,"mapPool",(function(){return Sh.mapPool})),n.d(a,"setPool",(function(){return Sh.setPool})),n.d(a,"imagePool",(function(){return Sh.imagePool})),n.d(a,"canvasPool",(function(){return Sh.canvasPool})),n.d(a,"divPool",(function(){return Sh.divPool})),n.d(a,"setFrameImmediate",(function(){return iE.b})),n.d(a,"clearFrameImmediate",(function(){return iE.a})),n.d(a,"setImmediate",(function(){return Xh})),n.d(a,"setMicrotaskImmediate",(function(){return AE.b})),n.d(a,"clearMicrotaskImmediate",(function(){return AE.a})),n.d(a,"SetUtils",(function(){return EV})),n.d(a,"encodeShortUintPair",(function(){return MV})),n.d(a,"decodeShortUintPair",(function(){return DV})),n.d(a,"StrongMap",(function(){return xV})),n.d(a,"Thenable",(function(){return DF.b})),n.d(a,"SharedThenable",(function(){return DF.a})),n.d(a,"TiledCanvas",(function(){return tE.a})),n.d(a,"ValueRatchet",(function(){return WC.a})),n.d(a,"appendChildView",(function(){return jO})),n.d(a,"insertChildViewBefore",(function(){return UO})),n.d(a,"removeChildView",(function(){return GO})),n.d(a,"measureTextWithCache",(function(){return kV.a})),n.d(a,"measureTextFromElement",(function(){return yC})),n.d(a,"mergeNestedHashes",(function(){return BV.a})),n.d(a,"preventRecursion",(function(){return jV.a})),n.d(a,"findMinWidthForMinHeight",(function(){return Ch})),n.d(a,"SeededRandom",(function(){return UV})),n.d(a,"SINE_IN_OUT",(function(){return rO})),n.d(a,"INVERSE_SINE_IN_OUT",(function(){return aO})),n.d(a,"softFade",(function(){return oO})),n.d(a,"stopSoftFading",(function(){return lO})),n.d(a,"squashMiddle",(function(){return HV})),n.d(a,"squashLeft",(function(){return WV})),n.d(a,"squashRight",(function(){return $V})),n.d(a,"squash",(function(){return zV})),n.d(a,"measureText",(function(){return QV})),n.d(a,"areSameDay",(function(){return mn})),n.d(a,"isDayInRange",(function(){return _n})),n.d(a,"isCurrentYear",(function(){return vn})),n.d(a,"makeTextFieldMatchElement",(function(){return JM})),n.d(a,"RelativeDates",(function(){return bn})),n.d(a,"DateRangeFormatter",(function(){return Hp})),n.d(a,"dateRangeFormatter",(function(){return Wp})),n.d(a,"computeLayoutToCoverContainerWithImageWhileFeaturingCropRect",(function(){return YV})),n.d(a,"formattedTimeRemaining",(function(){return ek})),n.d(a,"ProgressBarBarberPoleFillRenderer",(function(){return yu})),n.d(a,"ProgressBarFillRenderer",(function(){return vu})),n.d(a,"ProgressBarRepeatedContentFillRenderer",(function(){return bu})),n.d(a,"ProgressBarRepeatedGradientFillRenderer",(function(){return wu})),n.d(a,"ProgressBarSolidColorFillRenderer",(function(){return Iu})),n.d(a,"ProgressBarThinStrokeRenderer",(function(){return Su})),n.d(a,"ProgressBarView",(function(){return Cu})),n.d(a,"EnvironmentVariablesService",(function(){return nk.a})),n.d(a,"environmentVariablesService",(function(){return nk.b})),n.d(a,"EnvironmentVariablesSupport",(function(){return fl.a})),n.d(a,"SignInService",(function(){return Bo})),n.d(a,"UserInteractionInitializer",(function(){return un})),n.d(a,"OrientationType",(function(){return ik.a})),n.d(a,"SizeClass",(function(){return dn.a})),n.d(a,"spinyObjectIds",(function(){return sk})),n.d(a,"createSpinyObject",(function(){return ok})),n.d(a,"extendSpines",(function(){return lk})),n.d(a,"retractSpines",(function(){return ck})),n.d(a,"resetSpines",(function(){return uk})),n.d(a,"isSpiny",(function(){return dk})),n.d(a,"linkSpines",(function(){return hk})),n.d(a,"createFakeCrossDomainWindow",(function(){return mk})),n(1),n(0),n(4),n(6),n(3),n(21),n(45),n(5),n(8),n(14),n(9),n(34);var s=n(117);s.b(s.c(),{"Date.Era.AD.Abbreviated":"AD","Date.Era.AD.Full":"Anno Domini","Date.Era.AD.Letter":"A","Date.Era.BC.Abbreviated":"BC","Date.Era.BC.Full":"Before Christ","Date.Era.BC.Letter":"B","Date.Quarter.Q1.Abbreviated":"Q1","Date.Quarter.Q1.Full":"1st quarter","Date.Quarter.StandAlone.Q1.Abbreviated":"Q1","Date.Quarter.StandAlone.Q1.Full":"1st Quarter","Date.Quarter.Q2.Abbreviated":"Q2","Date.Quarter.Q2.Full":"2nd quarter","Date.Quarter.StandAlone.Q2.Abbreviated":"Q2","Date.Quarter.StandAlone.Q2.Full":"2nd Quarter","Date.Quarter.Q3.Abbreviated":"Q3","Date.Quarter.Q3.Full":"3rd quarter","Date.Quarter.StandAlone.Q3.Abbreviated":"Q3","Date.Quarter.StandAlone.Q3.Full":"3rd Quarter","Date.Quarter.Q4.Abbreviated":"Q4","Date.Quarter.Q4.Full":"4th quarter","Date.Quarter.StandAlone.Q4.Abbreviated":"Q4","Date.Quarter.StandAlone.Q4.Full":"4th Quarter","Date.Month.January.Abbreviated":"Jan","Date.Month.January.Full":"January","Date.Month.January.Letter":"J","Date.Month.StandAlone.January.Abbreviated":"Jan","Date.Month.StandAlone.January.Full":"January","Date.Month.StandAlone.January.Letter":"J","Date.Month.Prepositional.January.Abbreviated":"Jan","Date.Month.Prepositional.January.Full":"January","Date.Month.Prepositional.January.Letter":"J","Date.Month.February.Abbreviated":"Feb","Date.Month.February.Full":"February","Date.Month.February.Letter":"F","Date.Month.StandAlone.February.Abbreviated":"Feb","Date.Month.StandAlone.February.Full":"February","Date.Month.StandAlone.February.Letter":"F","Date.Month.Prepositional.February.Abbreviated":"Feb","Date.Month.Prepositional.February.Full":"February","Date.Month.Prepositional.February.Letter":"F","Date.Month.March.Abbreviated":"Mar","Date.Month.March.Full":"March","Date.Month.March.Letter":"M","Date.Month.StandAlone.March.Abbreviated":"Mar","Date.Month.StandAlone.March.Full":"March","Date.Month.StandAlone.March.Letter":"M","Date.Month.Prepositional.March.Abbreviated":"Mar","Date.Month.Prepositional.March.Full":"March","Date.Month.Prepositional.March.Letter":"M","Date.Month.April.Abbreviated":"Apr","Date.Month.April.Full":"April","Date.Month.April.Letter":"A","Date.Month.StandAlone.April.Abbreviated":"Apr","Date.Month.StandAlone.April.Full":"April","Date.Month.StandAlone.April.Letter":"A","Date.Month.Prepositional.April.Abbreviated":"Apr","Date.Month.Prepositional.April.Full":"April","Date.Month.Prepositional.April.Letter":"A","Date.Month.May.Abbreviated":"May","Date.Month.May.Full":"May","Date.Month.May.Letter":"M","Date.Month.StandAlone.May.Abbreviated":"May","Date.Month.StandAlone.May.Full":"May","Date.Month.StandAlone.May.Letter":"M","Date.Month.Prepositional.May.Abbreviated":"May","Date.Month.Prepositional.May.Full":"May","Date.Month.Prepositional.May.Letter":"M","Date.Month.June.Abbreviated":"Jun","Date.Month.June.Full":"June","Date.Month.June.Letter":"J","Date.Month.StandAlone.June.Abbreviated":"Jun","Date.Month.StandAlone.June.Full":"June","Date.Month.StandAlone.June.Letter":"J","Date.Month.Prepositional.June.Abbreviated":"Jun","Date.Month.Prepositional.June.Full":"June","Date.Month.Prepositional.June.Letter":"J","Date.Month.July.Abbreviated":"Jul","Date.Month.July.Full":"July","Date.Month.July.Letter":"J","Date.Month.StandAlone.July.Abbreviated":"Jul","Date.Month.StandAlone.July.Full":"July","Date.Month.StandAlone.July.Letter":"J","Date.Month.Prepositional.July.Abbreviated":"Jul","Date.Month.Prepositional.July.Full":"July","Date.Month.Prepositional.July.Letter":"J","Date.Month.August.Abbreviated":"Aug","Date.Month.August.Full":"August","Date.Month.August.Letter":"A","Date.Month.StandAlone.August.Abbreviated":"Aug","Date.Month.StandAlone.August.Full":"August","Date.Month.StandAlone.August.Letter":"A","Date.Month.Prepositional.August.Abbreviated":"Aug","Date.Month.Prepositional.August.Full":"August","Date.Month.Prepositional.August.Letter":"A","Date.Month.September.Abbreviated":"Sep","Date.Month.September.Full":"September","Date.Month.September.Letter":"S","Date.Month.StandAlone.September.Abbreviated":"Sep","Date.Month.StandAlone.September.Full":"September","Date.Month.StandAlone.September.Letter":"S","Date.Month.Prepositional.September.Abbreviated":"Sep","Date.Month.Prepositional.September.Full":"September","Date.Month.Prepositional.September.Letter":"S","Date.Month.October.Abbreviated":"Oct","Date.Month.October.Full":"October","Date.Month.October.Letter":"O","Date.Month.StandAlone.October.Abbreviated":"Oct","Date.Month.StandAlone.October.Full":"October","Date.Month.StandAlone.October.Letter":"O","Date.Month.Prepositional.October.Abbreviated":"Oct","Date.Month.Prepositional.October.Full":"October","Date.Month.Prepositional.October.Letter":"O","Date.Month.November.Abbreviated":"Nov","Date.Month.November.Full":"November","Date.Month.November.Letter":"N","Date.Month.StandAlone.November.Abbreviated":"Nov","Date.Month.StandAlone.November.Full":"November","Date.Month.StandAlone.November.Letter":"N","Date.Month.Prepositional.November.Abbreviated":"Nov","Date.Month.Prepositional.November.Full":"November","Date.Month.Prepositional.November.Letter":"N","Date.Month.December.Abbreviated":"Dec","Date.Month.December.Full":"December","Date.Month.December.Letter":"D","Date.Month.StandAlone.December.Abbreviated":"Dec","Date.Month.StandAlone.December.Full":"December","Date.Month.StandAlone.December.Letter":"D","Date.Month.Prepositional.December.Abbreviated":"Dec","Date.Month.Prepositional.December.Full":"December","Date.Month.Prepositional.December.Letter":"D","Date.Day.Monday.Abbreviated":"Mon","Date.Day.Monday.Full":"Monday","Date.Day.Monday.Letter":"M","Date.Day.StandAlone.Monday.Abbreviated":"Mon","Date.Day.StandAlone.Monday.Full":"Monday","Date.Day.StandAlone.Monday.Letter":"M","Date.Day.Tuesday.Abbreviated":"Tue","Date.Day.Tuesday.Full":"Tuesday","Date.Day.Tuesday.Letter":"T","Date.Day.StandAlone.Tuesday.Abbreviated":"Tue","Date.Day.StandAlone.Tuesday.Full":"Tuesday","Date.Day.StandAlone.Tuesday.Letter":"T","Date.Day.Wednesday.Abbreviated":"Wed","Date.Day.Wednesday.Full":"Wednesday","Date.Day.Wednesday.Letter":"W","Date.Day.StandAlone.Wednesday.Abbreviated":"Wed","Date.Day.StandAlone.Wednesday.Full":"Wednesday","Date.Day.StandAlone.Wednesday.Letter":"W","Date.Day.Thursday.Abbreviated":"Thu","Date.Day.Thursday.Full":"Thursday","Date.Day.Thursday.Letter":"R","Date.Day.StandAlone.Thursday.Abbreviated":"Thu","Date.Day.StandAlone.Thursday.Full":"Thursday","Date.Day.StandAlone.Thursday.Letter":"R","Date.Day.Friday.Abbreviated":"Fri","Date.Day.Friday.Full":"Friday","Date.Day.Friday.Letter":"F","Date.Day.StandAlone.Friday.Abbreviated":"Fri","Date.Day.StandAlone.Friday.Full":"Friday","Date.Day.StandAlone.Friday.Letter":"F","Date.Day.Saturday.Abbreviated":"Sat","Date.Day.Saturday.Full":"Saturday","Date.Day.Saturday.Letter":"S","Date.Day.StandAlone.Saturday.Abbreviated":"Sat","Date.Day.StandAlone.Saturday.Full":"Saturday","Date.Day.StandAlone.Saturday.Letter":"S","Date.Day.Sunday.Abbreviated":"Sun","Date.Day.Sunday.Full":"Sunday","Date.Day.Sunday.Letter":"S","Date.Day.StandAlone.Sunday.Abbreviated":"Sun","Date.Day.StandAlone.Sunday.Full":"Sunday","Date.Day.StandAlone.Sunday.Letter":"S","Date.Period.AM":"AM","Date.Period.PM":"PM","ReorderableSimpleListViewController.CancelledMove":"Cancelled move","ReorderableSimpleListViewController.GrabbedItem.MovedUp":"Moved above %{itemTitle}","ReorderableSimpleListViewController.GrabbedItem.MovedDown":"Moved below %{itemTitle}","ReorderableSimpleListViewController.ItemDropped":"Moved %{itemTitle} to position %{positionNumber}","AXGrabToggleButton.AriaLabel.Ungrabbed":"Reorder %{title}","AXGrabToggleButton.AriaLabel.Grabbed":"Use arrow keys to move. Press Return or Enter to commit or Escape to cancel."}),n(2),n(12),n(10),n(19),n(18),s.b(s.c(),{"CloudOS.Authentication.SignInButton.Title":"Sign In","Name.Display.FirstAndFamilyNames":"%{firstName} %{familyName}","Name.Display.NameIsCJK.FirstAndFamilyNames":"%{familyName}%{firstName}"}),n(23),s.b(s.c(),{"Date.Range.No.Similarities":"%{date1:MMMM} %{date1:d}, %{date1:yyyy} – %{date2:MMMM} %{date2:d}, %{date2:yyyy}","Date.Range.Same.Year":"%{date1:MMMM} %{date1:d} – %{date2:MMMM} %{date2:d}, %{date1:yyyy}","Date.Range.Same.Month":"%{date1:MMMM} %{date1:d} – %{date2:d}, %{date1:yyyy}","Date.Range.Same.Day":"%{date1:MMM} %{date1:d}, %{date1:yyyy}","Date.Range.Same.Day.No.Year":"%{date1:MMM} %{date1:d}","Date.Range.Days.Prior.For.Days.Of.The.Week":6,"Date.Range.Same.Day.Day.Of.Week":"%{date1:EEEE}","Date.Range.Same.Day.Today":"Today","Date.Range.Same.Day.Tomorrow":"Tomorrow","Date.Range.Same.Day.Yesterday":"Yesterday","Date.Range.Same.Day.Today.Same.Time":"%{date1:h}:%{date1:mm} %{date1:a}","Date.Range.Same.Day.Today.Time.Range":"%{date1:h}:%{date1:mm} %{date1:a} – %{date2:h}:%{date2:mm} %{date2:a}","Date.Range.Same.Day.Today.Time.Range.Same.Period":"%{date1:h}:%{date1:mm} – %{date2:h}:%{date2:mm} %{date2:a}","Date.Range.Today.To.Tomorrow":"Today – Tomorrow","Date.Range.Yesterday.To.Tomorrow":"Yesterday – Tomorrow","Date.Range.Yesterday.To.Today":"Yesterday – Today","Date.Range.Days.Of.Week":"%{date1:EEEE} – %{date2:EEEE}","Date.Range.Day.Of.Week.To.Tomorrow":"%{date1:EEEE} – Tomorrow","Date.Range.Day.Of.Week.To.Today":"%{date1:EEEE} – Today","Date.Range.Day.Of.Week.To.Yesterday":"%{date1:EEEE} – Yesterday","Date.Range.No.Similarities.Medium":"%{date1:MMM} %{date1:d}, %{date1:yyyy} – %{date2:MMM} %{date2:d}, %{date2:yyyy}","Date.Range.Same.Year.Medium":"%{date1:MMM} %{date1:d} – %{date2:MMM} %{date2:d}, %{date1:yyyy}","Date.Range.Same.Month.Medium":"%{date1:MMM} %{date1:d} – %{date2:d}, %{date1:yyyy}","Date.Range.Same.Day.Medium":"%{date1:MMM} %{date1:d}, %{date1:yyyy}","Date.Range.Same.Day.No.Year.Medium":"%{date1:MMM} %{date1:d}","Time.Remaining.Expires.Expired":"Expired","Time.Remaining.Expires.ShowHour":"Expires %{date:h}%{date:a}","Time.Remaining.Expires.Tomorrow":"Expires Tomorrow","Time.Remaining.Expires.WithinYear":"Expires %{date:MMMM} %{date:d}","Time.Remaining.Expires.Others":"Expires %{date:MMMM} %{date:d}, %{date:yyyy}","Time.Remaining.AvailableUntil.Expired":"Expired","Time.Remaining.AvailableUntil.ShowHour":"Available until %{date:h}%{date:a}","Time.Remaining.AvailableUntil.Tomorrow":"Available until Tomorrow","Time.Remaining.AvailableUntil.WithinYear":"Available until %{date:MMMM} %{date:d}","Time.Remaining.AvailableUntil.Others":"Available until %{date:MMMM} %{date:d}, %{date:yyyy}","NavigationBar.BackButton.Title":"Back","NavigationBar.BackButton.Tooltip":"Back"}),n(16),n(33),n(58),n(57),n(56),n(28),n(31),n(32),n(30),n(192),s.b(s.c(),{"AccountMenu.AccountSettings":"Account Settings","AccountMenu.SignOut":"Sign Out","Name.Display.FirstAndFamilyNames":"%{firstName} %{familyName}","Name.Display.NameIsCJK.FirstAndFamilyNames":"%{familyName}%{firstName}","Button.Help.Tooltip":"Help and Support","Toolbar.AppSwitcher.Tooltip":"Change App","Toolbar.Button.Action.UserAction":"iCloud Settings & Sign Out","HSA.SignoutDialog.Title":"Sign out of iCloud.com?","HSA.SignoutDialog.CheckboxTitle":"Remember me on this browser so I don’t have to verify my identity next time.","HSA.SignoutDialog.SignoutButton":"Sign Out","Button.Cancel":"Cancel"}),n(106),n(114),n(102),n(103),n(107);var o,l=n(11);s.b(s.c(),{"Status.LastUpdated":"Updated %{lastUpdated}","Media.Count.0.0.0.0":"0 Photos","Media.Count.0.0.0.1":"0 Photos (1 Remaining)","Media.Count.0.0.0.2":"0 Photos (2 Remaining)","Media.Count.0.0.0.More":"0 Photos (%{remainingCount} Remaining)","Media.Count.0.0.1.0":"1 Other Item","Media.Count.0.0.1.1":"1 Other Item (1 Remaining)","Media.Count.0.0.1.2":"1 Other Item (2 Remaining)","Media.Count.0.0.1.More":"1 Other Item (%{remainingCount} Remaining)","Media.Count.0.0.2.0":"2 Other Items","Media.Count.0.0.2.1":"2 Other Items (1 Remaining)","Media.Count.0.0.2.2":"2 Other Items (2 Remaining)","Media.Count.0.0.2.More":"2 Other Items (%{remainingCount} Remaining)","Media.Count.0.0.More.0":"%{otherItemsCount} Other Items","Media.Count.0.0.More.1":"%{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.0.More.2":"%{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.0.More.More":"%{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.1.0.0":"1 Video","Media.Count.0.1.0.1":"1 Video (1 Remaining)","Media.Count.0.1.0.2":"1 Video (2 Remaining)","Media.Count.0.1.0.More":"1 Video (%{remainingCount} Remaining)","Media.Count.0.1.1.0":"1 Video, 1 Other Item","Media.Count.0.1.1.1":"1 Video, 1 Other Item (1 Remaining)","Media.Count.0.1.1.2":"1 Video, 1 Other Item (2 Remaining)","Media.Count.0.1.1.More":"1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.1.2.0":"1 Video, 2 Other Items","Media.Count.0.1.2.1":"1 Video, 2 Other Items (1 Remaining)","Media.Count.0.1.2.2":"1 Video, 2 Other Items (2 Remaining)","Media.Count.0.1.2.More":"1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.1.More.0":"1 Video, %{otherItemsCount} Other Items","Media.Count.0.1.More.1":"1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.1.More.2":"1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.1.More.More":"1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.2.0.0":"2 Videos","Media.Count.0.2.0.1":"2 Videos (1 Remaining)","Media.Count.0.2.0.2":"2 Videos (2 Remaining)","Media.Count.0.2.0.More":"2 Videos (%{remainingCount} Remaining)","Media.Count.0.2.1.0":"2 Videos, 1 Other Item","Media.Count.0.2.1.1":"2 Videos, 1 Other Item (1 Remaining)","Media.Count.0.2.1.2":"2 Videos, 1 Other Item (2 Remaining)","Media.Count.0.2.1.More":"2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.2.2.0":"2 Videos, 2 Other Items","Media.Count.0.2.2.1":"2 Videos, 2 Other Items (1 Remaining)","Media.Count.0.2.2.2":"2 Videos, 2 Other Items (2 Remaining)","Media.Count.0.2.2.More":"2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.2.More.0":"2 Videos, %{otherItemsCount} Other Items","Media.Count.0.2.More.1":"2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.2.More.2":"2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.2.More.More":"2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.0.More.0.0":"%{videosCount} Videos","Media.Count.0.More.0.1":"%{videosCount} Videos (1 Remaining)","Media.Count.0.More.0.2":"%{videosCount} Videos (2 Remaining)","Media.Count.0.More.0.More":"%{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.0.More.1.0":"%{videosCount} Videos, 1 Other Item","Media.Count.0.More.1.1":"%{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.0.More.1.2":"%{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.0.More.1.More":"%{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.0.More.2.0":"%{videosCount} Videos, 2 Other Items","Media.Count.0.More.2.1":"%{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.0.More.2.2":"%{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.0.More.2.More":"%{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.0.More.More.0":"%{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.0.More.More.1":"%{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.0.More.More.2":"%{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.0.More.More.More":"%{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.0.0.0":"1 Photo","Media.Count.1.0.0.1":"1 Photo (1 Remaining)","Media.Count.1.0.0.2":"1 Photo (2 Remaining)","Media.Count.1.0.0.More":"1 Photo (%{remainingCount} Remaining)","Media.Count.1.0.1.0":"1 Photo, 1 Other Item","Media.Count.1.0.1.1":"1 Photo, 1 Other Item (1 Remaining)","Media.Count.1.0.1.2":"1 Photo, 1 Other Item (2 Remaining)","Media.Count.1.0.1.More":"1 Photo, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.0.2.0":"1 Photo, 2 Other Items","Media.Count.1.0.2.1":"1 Photo, 2 Other Items (1 Remaining)","Media.Count.1.0.2.2":"1 Photo, 2 Other Items (2 Remaining)","Media.Count.1.0.2.More":"1 Photo, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.0.More.0":"1 Photo, %{otherItemsCount} Other Items","Media.Count.1.0.More.1":"1 Photo, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.0.More.2":"1 Photo, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.0.More.More":"1 Photo, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.1.0.0":"1 Photo, 1 Video","Media.Count.1.1.0.1":"1 Photo, 1 Video (1 Remaining)","Media.Count.1.1.0.2":"1 Photo, 1 Video (2 Remaining)","Media.Count.1.1.0.More":"1 Photo, 1 Video (%{remainingCount} Remaining)","Media.Count.1.1.1.0":"1 Photo, 1 Video, 1 Other Item","Media.Count.1.1.1.1":"1 Photo, 1 Video, 1 Other Item (1 Remaining)","Media.Count.1.1.1.2":"1 Photo, 1 Video, 1 Other Item (2 Remaining)","Media.Count.1.1.1.More":"1 Photo, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.1.2.0":"1 Photo, 1 Video, 2 Other Items","Media.Count.1.1.2.1":"1 Photo, 1 Video, 2 Other Items (1 Remaining)","Media.Count.1.1.2.2":"1 Photo, 1 Video, 2 Other Items (2 Remaining)","Media.Count.1.1.2.More":"1 Photo, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.1.More.0":"1 Photo, 1 Video, %{otherItemsCount} Other Items","Media.Count.1.1.More.1":"1 Photo, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.1.More.2":"1 Photo, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.1.More.More":"1 Photo, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.2.0.0":"1 Photo, 2 Videos","Media.Count.1.2.0.1":"1 Photo, 2 Videos (1 Remaining)","Media.Count.1.2.0.2":"1 Photo, 2 Videos (2 Remaining)","Media.Count.1.2.0.More":"1 Photo, 2 Videos (%{remainingCount} Remaining)","Media.Count.1.2.1.0":"1 Photo, 2 Videos, 1 Other Item","Media.Count.1.2.1.1":"1 Photo, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.1.2.1.2":"1 Photo, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.1.2.1.More":"1 Photo, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.2.2.0":"1 Photo, 2 Videos, 2 Other Items","Media.Count.1.2.2.1":"1 Photo, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.1.2.2.2":"1 Photo, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.1.2.2.More":"1 Photo, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.2.More.0":"1 Photo, 2 Videos, %{otherItemsCount} Other Items","Media.Count.1.2.More.1":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.2.More.2":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.2.More.More":"1 Photo, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.1.More.0.0":"1 Photo, %{videosCount} Videos","Media.Count.1.More.0.1":"1 Photo, %{videosCount} Videos (1 Remaining)","Media.Count.1.More.0.2":"1 Photo, %{videosCount} Videos (2 Remaining)","Media.Count.1.More.0.More":"1 Photo, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.1.More.1.0":"1 Photo, %{videosCount} Videos, 1 Other Item","Media.Count.1.More.1.1":"1 Photo, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.1.More.1.2":"1 Photo, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.1.More.1.More":"1 Photo, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.1.More.2.0":"1 Photo, %{videosCount} Videos, 2 Other Items","Media.Count.1.More.2.1":"1 Photo, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.1.More.2.2":"1 Photo, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.1.More.2.More":"1 Photo, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.1.More.More.0":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.1.More.More.1":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.1.More.More.2":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.1.More.More.More":"1 Photo, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.0.0.0":"2 Photos","Media.Count.2.0.0.1":"2 Photos (1 Remaining)","Media.Count.2.0.0.2":"2 Photos (2 Remaining)","Media.Count.2.0.0.More":"2 Photos (%{remainingCount} Remaining)","Media.Count.2.0.1.0":"2 Photos, 1 Other Item","Media.Count.2.0.1.1":"2 Photos, 1 Other Item (1 Remaining)","Media.Count.2.0.1.2":"2 Photos, 1 Other Item (2 Remaining)","Media.Count.2.0.1.More":"2 Photos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.0.2.0":"2 Photos, 2 Other Items","Media.Count.2.0.2.1":"2 Photos, 2 Other Items (1 Remaining)","Media.Count.2.0.2.2":"2 Photos, 2 Other Items (2 Remaining)","Media.Count.2.0.2.More":"2 Photos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.0.More.0":"2 Photos, %{otherItemsCount} Other Items","Media.Count.2.0.More.1":"2 Photos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.0.More.2":"2 Photos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.0.More.More":"2 Photos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.1.0.0":"2 Photos, 1 Video","Media.Count.2.1.0.1":"2 Photos, 1 Video (1 Remaining)","Media.Count.2.1.0.2":"2 Photos, 1 Video (2 Remaining)","Media.Count.2.1.0.More":"2 Photos, 1 Video (%{remainingCount} Remaining)","Media.Count.2.1.1.0":"2 Photos, 1 Video, 1 Other Item","Media.Count.2.1.1.1":"2 Photos, 1 Video, 1 Other Item (1 Remaining)","Media.Count.2.1.1.2":"2 Photos, 1 Video, 1 Other Item (2 Remaining)","Media.Count.2.1.1.More":"2 Photos, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.1.2.0":"2 Photos, 1 Video, 2 Other Items","Media.Count.2.1.2.1":"2 Photos, 1 Video, 2 Other Items (1 Remaining)","Media.Count.2.1.2.2":"2 Photos, 1 Video, 2 Other Items (2 Remaining)","Media.Count.2.1.2.More":"2 Photos, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.1.More.0":"2 Photos, 1 Video, %{otherItemsCount} Other Items","Media.Count.2.1.More.1":"2 Photos, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.1.More.2":"2 Photos, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.1.More.More":"2 Photos, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.2.0.0":"2 Photos, 2 Videos","Media.Count.2.2.0.1":"2 Photos, 2 Videos (1 Remaining)","Media.Count.2.2.0.2":"2 Photos, 2 Videos (2 Remaining)","Media.Count.2.2.0.More":"2 Photos, 2 Videos (%{remainingCount} Remaining)","Media.Count.2.2.1.0":"2 Photos, 2 Videos, 1 Other Item","Media.Count.2.2.1.1":"2 Photos, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.2.2.1.2":"2 Photos, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.2.2.1.More":"2 Photos, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.2.2.0":"2 Photos, 2 Videos, 2 Other Items","Media.Count.2.2.2.1":"2 Photos, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.2.2.2.2":"2 Photos, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.2.2.2.More":"2 Photos, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.2.More.0":"2 Photos, 2 Videos, %{otherItemsCount} Other Items","Media.Count.2.2.More.1":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.2.More.2":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.2.More.More":"2 Photos, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.2.More.0.0":"2 Photos, %{videosCount} Videos","Media.Count.2.More.0.1":"2 Photos, %{videosCount} Videos (1 Remaining)","Media.Count.2.More.0.2":"2 Photos, %{videosCount} Videos (2 Remaining)","Media.Count.2.More.0.More":"2 Photos, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.2.More.1.0":"2 Photos, %{videosCount} Videos, 1 Other Item","Media.Count.2.More.1.1":"2 Photos, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.2.More.1.2":"2 Photos, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.2.More.1.More":"2 Photos, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.2.More.2.0":"2 Photos, %{videosCount} Videos, 2 Other Items","Media.Count.2.More.2.1":"2 Photos, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.2.More.2.2":"2 Photos, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.2.More.2.More":"2 Photos, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.2.More.More.0":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.2.More.More.1":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.2.More.More.2":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.2.More.More.More":"2 Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.0.0.0":"%{photosCount} Photos","Media.Count.More.0.0.1":"%{photosCount} Photos (1 Remaining)","Media.Count.More.0.0.2":"%{photosCount} Photos (2 Remaining)","Media.Count.More.0.0.More":"%{photosCount} Photos (%{remainingCount} Remaining)","Media.Count.More.0.1.0":"%{photosCount} Photos, 1 Other Item","Media.Count.More.0.1.1":"%{photosCount} Photos, 1 Other Item (1 Remaining)","Media.Count.More.0.1.2":"%{photosCount} Photos, 1 Other Item (2 Remaining)","Media.Count.More.0.1.More":"%{photosCount} Photos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.0.2.0":"%{photosCount} Photos, 2 Other Items","Media.Count.More.0.2.1":"%{photosCount} Photos, 2 Other Items (1 Remaining)","Media.Count.More.0.2.2":"%{photosCount} Photos, 2 Other Items (2 Remaining)","Media.Count.More.0.2.More":"%{photosCount} Photos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.0.More.0":"%{photosCount} Photos, %{otherItemsCount} Other Items","Media.Count.More.0.More.1":"%{photosCount} Photos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.0.More.2":"%{photosCount} Photos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.0.More.More":"%{photosCount} Photos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.1.0.0":"%{photosCount} Photos, 1 Video","Media.Count.More.1.0.1":"%{photosCount} Photos, 1 Video (1 Remaining)","Media.Count.More.1.0.2":"%{photosCount} Photos, 1 Video (2 Remaining)","Media.Count.More.1.0.More":"%{photosCount} Photos, 1 Video (%{remainingCount} Remaining)","Media.Count.More.1.1.0":"%{photosCount} Photos, 1 Video, 1 Other Item","Media.Count.More.1.1.1":"%{photosCount} Photos, 1 Video, 1 Other Item (1 Remaining)","Media.Count.More.1.1.2":"%{photosCount} Photos, 1 Video, 1 Other Item (2 Remaining)","Media.Count.More.1.1.More":"%{photosCount} Photos, 1 Video, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.1.2.0":"%{photosCount} Photos, 1 Video, 2 Other Items","Media.Count.More.1.2.1":"%{photosCount} Photos, 1 Video, 2 Other Items (1 Remaining)","Media.Count.More.1.2.2":"%{photosCount} Photos, 1 Video, 2 Other Items (2 Remaining)","Media.Count.More.1.2.More":"%{photosCount} Photos, 1 Video, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.1.More.0":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items","Media.Count.More.1.More.1":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.1.More.2":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.1.More.More":"%{photosCount} Photos, 1 Video, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.2.0.0":"%{photosCount} Photos, 2 Videos","Media.Count.More.2.0.1":"%{photosCount} Photos, 2 Videos (1 Remaining)","Media.Count.More.2.0.2":"%{photosCount} Photos, 2 Videos (2 Remaining)","Media.Count.More.2.0.More":"%{photosCount} Photos, 2 Videos (%{remainingCount} Remaining)","Media.Count.More.2.1.0":"%{photosCount} Photos, 2 Videos, 1 Other Item","Media.Count.More.2.1.1":"%{photosCount} Photos, 2 Videos, 1 Other Item (1 Remaining)","Media.Count.More.2.1.2":"%{photosCount} Photos, 2 Videos, 1 Other Item (2 Remaining)","Media.Count.More.2.1.More":"%{photosCount} Photos, 2 Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.2.2.0":"%{photosCount} Photos, 2 Videos, 2 Other Items","Media.Count.More.2.2.1":"%{photosCount} Photos, 2 Videos, 2 Other Items (1 Remaining)","Media.Count.More.2.2.2":"%{photosCount} Photos, 2 Videos, 2 Other Items (2 Remaining)","Media.Count.More.2.2.More":"%{photosCount} Photos, 2 Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.2.More.0":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items","Media.Count.More.2.More.1":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.2.More.2":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.2.More.More":"%{photosCount} Photos, 2 Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Media.Count.More.More.0.0":"%{photosCount} Photos, %{videosCount} Videos","Media.Count.More.More.0.1":"%{photosCount} Photos, %{videosCount} Videos (1 Remaining)","Media.Count.More.More.0.2":"%{photosCount} Photos, %{videosCount} Videos (2 Remaining)","Media.Count.More.More.0.More":"%{photosCount} Photos, %{videosCount} Videos (%{remainingCount} Remaining)","Media.Count.More.More.1.0":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item","Media.Count.More.More.1.1":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (1 Remaining)","Media.Count.More.More.1.2":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (2 Remaining)","Media.Count.More.More.1.More":"%{photosCount} Photos, %{videosCount} Videos, 1 Other Item (%{remainingCount} Remaining)","Media.Count.More.More.2.0":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items","Media.Count.More.More.2.1":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (1 Remaining)","Media.Count.More.More.2.2":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (2 Remaining)","Media.Count.More.More.2.More":"%{photosCount} Photos, %{videosCount} Videos, 2 Other Items (%{remainingCount} Remaining)","Media.Count.More.More.More.0":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items","Media.Count.More.More.More.1":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (1 Remaining)","Media.Count.More.More.More.2":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (2 Remaining)","Media.Count.More.More.More.More":"%{photosCount} Photos, %{videosCount} Videos, %{otherItemsCount} Other Items (%{remainingCount} Remaining)","Container.Folder.NumberOfAlbums.0":"No items","Container.Folder.NumberOfAlbums.1":"1 item","Container.Folder.NumberOfAlbums.2":"2 items","Container.Folder.NumberOfAlbums.More":"%{count} items","Alert.OK.Button.Title":"OK","Alert.Save.Button.Title":"Save","Alert.Cancel.Button.Title":"Cancel","Alert.Remove.Button.Title":"Remove","Alert.Delete.Button.Title":"Delete","Alert.Expunge.Button.Title":"Delete","Alert.Recover.Button.Title":"Recover","Alert.Download.Button.Title":"Download","Alert.Hide.Button.Title":"Hide","Alert.Unhide.Button.Title":"Unhide","Alert.AddToAlbum.Button.Title":"Add to Album","Alert.AddFromLibrary.Button.Title":"Add From Library","Alert.Delete.Folder.Button.Title":"Delete Folder","Alert.Delete.Album.Button.Title":"Delete Album","Alert.Add.Album.Message":"New Album","Alert.Add.Album.Description":"Enter a name for this album","Alert.Add.Album.Placeholder":"Title","Alert.Add.Album.Untitled":"Untitled Album","Alert.Add.Folder.Message":"New Folder","Alert.Add.Folder.Description":"Enter a name for this folder","Alert.Add.Folder.Untitled":"Untitled Folder","Alert.Remove.Item.Message.1":"Remove item from album?","Alert.Remove.Item.Message.2":"Remove 2 items from album?","Alert.Remove.Item.Message.More":"Remove %{count} items from album?","Alert.Remove.Item.Description.1":"This item will be removed from this album, but will remain in your photo library.","Alert.Remove.Item.Description.2":"These items will be removed from this album, but will remain in your photo library.","Alert.Remove.Item.Description.More":"These items will be removed from this album, but will remain in your photo library.","Alert.Hide.Item.Message.1":"Hide 1 item?","Alert.Hide.Item.Message.2":"Hide 2 items?","Alert.Hide.Item.Message.More":"Hide %{count} items?","Alert.Hide.Item.Description.1":"This item will be hidden from all places in your library but can be found in the hidden album.","Alert.Hide.Item.Description.2":"These items will be hidden from all places in your library but can be found in the hidden album.","Alert.Hide.Item.Description.More":"These items will be hidden from all places in your library but can be found in the hidden album.","Alert.Hide.Item.Failed.Message.1":"Unable to Hide Item","Alert.Hide.Item.Failed.Message.2":"Unable to Hide Items","Alert.Hide.Item.Failed.Message.More":"Unable to Hide Items","Alert.Hide.Item.Failed.Description.1":"An item could not be hidden due to a server error.","Alert.Hide.Item.Failed.Description.2":"Some items could not be hidden due to a server error.","Alert.Hide.Item.Failed.Description.More":"Some items could not be hidden due to a server error.","Alert.Unhide.Item.Failed.Message.1":"Unable to Unhide Item","Alert.Unhide.Item.Failed.Message.2":"Unable to Unhide Items","Alert.Unhide.Item.Failed.Message.More":"Unable to Unhide Items","Alert.Unhide.Item.Failed.Description.1":"An item could not be unhidden due to a server error.","Alert.Unhide.Item.Failed.Description.2":"Some items could not be unhidden due to a server error.","Alert.Unhide.Item.Failed.Description.More":"Some items could not be unhidden due to a server error.","Alert.Remove.Item.Failed.Message.1":"Unable to Remove Item","Alert.Remove.Item.Failed.Message.2":"Unable to Remove Items","Alert.Remove.Item.Failed.Message.More":"Unable to Remove Items","Alert.Remove.Item.Failed.Description.1":"An item could not be removed due to a server error.","Alert.Remove.Item.Failed.Description.2":"Some items could not be removed due to a server error.","Alert.Remove.Item.Failed.Description.More":"Some items could not be removed due to a server error.","Alert.Delete.Item.Message.1":"Delete 1 item from all your devices?","Alert.Delete.Item.Message.2":"Delete 2 items from all your devices?","Alert.Delete.Item.Message.More":"Delete %{count} items from all your devices?","Alert.Delete.Item.Description.1":"This item will be deleted from iCloud Photos on all your devices.","Alert.Delete.Item.Description.2":"These items will be deleted from iCloud Photos on all your devices.","Alert.Delete.Item.Description.More":"These items will be deleted from iCloud Photos on all your devices.","Alert.Delete.Item.Failed.Message.1":"Unable to Delete Item","Alert.Delete.Item.Failed.Message.2":"Unable to Delete Items","Alert.Delete.Item.Failed.Message.More":"Unable to Delete Items","Alert.Delete.Item.Failed.Description.1":"An item could not be deleted due to a server error.","Alert.Delete.Item.Failed.Description.2":"Some items could not be deleted due to a server error.","Alert.Delete.Item.Failed.Description.More":"Some items could not be deleted due to a server error.","Alert.Expunge.Item.Message.1":"Are you sure you want to delete this item permanently?","Alert.Expunge.Item.Message.2":"Are you sure you want to delete these 2 items permanently?","Alert.Expunge.Item.Message.More":"Are you sure you want to delete these %{count} items permanently?","Alert.Expunge.Item.Description.1":"This action cannot be undone.","Alert.Expunge.Item.Description.2":"This action cannot be undone.","Alert.Expunge.Item.Description.More":"This action cannot be undone.","Alert.Expunge.Item.Failed.Message.1":"Unable to Delete Item","Alert.Expunge.Item.Failed.Message.2":"Unable to Delete Items","Alert.Expunge.Item.Failed.Message.More":"Unable to Delete Items","Alert.Expunge.Item.Failed.Description.1":"An item could not be deleted due to a server error.","Alert.Expunge.Item.Failed.Description.2":"Some items could not be deleted due to a server error.","Alert.Expunge.Item.Failed.Description.More":"Some items could not be deleted due to a server error.","Alert.Recover.Item.Failed.Message.1":"Unable to Recover Item","Alert.Recover.Item.Failed.Message.2":"Unable to Recover Items","Alert.Recover.Item.Failed.Message.More":"Unable to Recover Items","Alert.Recover.Item.Failed.Description.1":"An item could not be recovered due to a server error.","Alert.Recover.Item.Failed.Description.2":"Some items could not be recovered due to a server error.","Alert.Recover.Item.Failed.Description.More":"Some items could not be recovered due to a server error.","Alert.RecoverOverQuota.Item.Failed.Message.1":"Unable to Recover Item","Alert.RecoverOverQuota.Item.Failed.Message.2":"Unable to Recover Items","Alert.RecoverOverQuota.Item.Failed.Message.More":"Unable to Recover Items","Alert.RecoverOverQuota.Item.Failed.Description.1":"An item could not be recovered because your iCloud storage is full.","Alert.RecoverOverQuota.Item.Failed.Description.2":"2 items could not be recovered because your iCloud storage is full.","Alert.RecoverOverQuota.Item.Failed.Description.More":"%{count} items could not be recovered because your iCloud storage is full.","Alert.Delete.Promoted.From.Burst.Message.1":"This photo is part of a burst. It will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Promoted.From.Burst.Message.2":"These photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Promoted.From.Burst.Message.More":"These photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Some.Promoted.From.Burst.Message.1":"This photo is part of a burst. It will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Some.Promoted.From.Burst.Message.2":"Some photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Some.Promoted.From.Burst.Message.More":"Some photos are part of a burst. They will be removed from the photo grid, but will remain in the burst.","Alert.Delete.Photo.Description.1":"This photo will be deleted from iCloud Photos on all your devices.","Alert.Delete.Photo.Description.2":"These photos will be deleted from iCloud Photos on all your devices.","Alert.Delete.Photo.Description.More":"These photos will be deleted from iCloud Photos on all your devices.","DateRange.Styled.SameMonthSameYear":"%{startDate:LLLL} <span>%{startDate:YYYY}</span>","DateRange.Styled.DiffMonthSameYear":"%{startDate:LLLL} – %{endDate:LLLL} <span>%{startDate:YYYY}</span>","DateRange.Styled.DiffYear":"%{startDate:LLLL} <span>%{startDate:YYYY} –</span> %{endDate:LLLL} <span>%{endDate:YYYY}</span>","DateRange.Unstyled.SameMonthSameYear":"%{startDate:LLLL} %{startDate:YYYY}","DateRange.Unstyled.DiffMonthSameYear":"%{startDate:LLLL} – %{endDate:LLLL} %{startDate:YYYY}","DateRange.Unstyled.DiffYear":"%{startDate:LLLL} %{startDate:YYYY} – %{endDate:LLLL} %{endDate:YYYY}","DateRange.Unstyled.Medium.SameMonthSameYear":"%{startDate:LLL} %{startDate:YYYY}","DateRange.Unstyled.Medium.DiffMonthSameYear":"%{startDate:LLL} – %{endDate:LLL} %{startDate:YYYY}","DateRange.Unstyled.Medium.DiffYear":"%{startDate:LLL} %{startDate:YYYY} – %{endDate:LLL} %{endDate:YYYY}","DateRange.Unstyled.Short.SameMonthSameYear":"%{startDate:LLL} %{startDate:YYYY}","DateRange.Unstyled.Short.DiffMonthSameYear":"%{startDate:LLL} %{startDate:YYYY}","DateRange.Unstyled.Short.DiffYear":"%{startDate:LLL} %{startDate:YYYY}","Grid.View.Header.Item.Count.1":"1 Item","Grid.View.Header.Item.Count.2":"2 Items","Grid.View.Header.Item.Count.More":"%{count} Items","Grid.View.Header.Album.Description":"%{monthYearRange}  ·  %{itemCount}","Grid.View.Header.NumberOfSelectedItems.1":"1 Selected","Grid.View.Header.NumberOfSelectedItems.2":"2 Selected","Grid.View.Header.NumberOfSelectedItems.More":"%{count} Selected","Grid.View.Header.Deselect.All.Title":"Deselect All","Grid.View.Header.Deselect.All.Tooltip":"Clear the current selection","Grid.View.Header.Album.Count.1":"1 Album","Grid.View.Header.Album.Count.2":"2 Albums","Grid.View.Header.Album.Count.More":"%{count} Albums","Grid.View.Header.Folder.Count.1":"1 Folder","Grid.View.Header.Folder.Count.2":"2 Folders","Grid.View.Header.Folder.Count.More":"%{count} Folders","Grid.View.Header.Album.Folders.Count":"%{albumCount}, %{folderCount}","Grid.View.Header.Recently.Deleted.Note":"Photos and videos show the days remaining before deletion. After that time, items will be permanently deleted. This may take up to 40 days.","Grid.View.Header.Recently.Deleted.Description":"%{itemCount}  ·  %{note}","Grid.Empty.Text":"No Photos or Videos","Folder.Empty.Text":"No Albums or Folders","Navbar.OneUp.Title.Date":"%{date:MMMM} %{date:d}","Navbar.OneUp.Title.Date.Day.Of.Week":"%{date:EEEE}","Navbar.OneUp.Title.DateWithYear":"%{date:MMMM} %{date:d}, %{date:y}","Navbar.OneUp.Title.DateShort":"%{date:MMM} %{date:d}","Navbar.OneUp.Title.DateWithYearShort":"%{date:MMM} %{date:d}, %{date:y}","Navbar.OneUp.Title.Time":"%{date:h}:%{date:mm} %{date:a}","Navbar.OneUp.Title.TimeShort":"%{date:h}:%{date:mm} %{date:a}","Navbar.OneUp.Title.DateAndTime":"%{dateString} · %{timeString}","Navbar.OneUp.Title.Subtitle.DateAndPosition":"%{date} · %{position} of %{total}","Navbar.OneUp.Title.Subtitle.PositionOnly":"%{position} of %{total}","Slider.ToolbarSlider.Tooltip.FitsInWindow":"Fit","Selection.Title.Empty":"Select Items","Selection.Title.Items.1":"1 Item Selected","Selection.Title.Items.2":"2 Items Selected","Selection.Title.Items.More":"%{count} Items Selected","Selection.Title.Photos.1":"1 Photo Selected","Selection.Title.Photos.2":"2 Photos Selected","Selection.Title.Photos.More":"%{count} Photos Selected","Selection.Title.Videos.1":"1 Video Selected","Selection.Title.Videos.2":"2 Videos Selected","Selection.Title.Videos.More":"%{count} Videos Selected","Selection.Limit.Alert.Message":"Too many items selected","Selection.Limit.Alert.Description.Share":"Unable to share more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Delete":"Unable to delete more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Remove":"Unable to remove more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Expunge":"Unable to delete more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Download":"Unable to download more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.AddToAlbum":"Unable to add more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Favorite":"Unable to favorite more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Recover":"Unable to recover more than %{limit} items at a time. Please reduce your selection.","Selection.Limit.Alert.Description.Generic":"Unable to perform actions on more than %{limit} items at a time. Please reduce your selection.","SelectionCheckmark.Deselect.Photo":"Deselect this photo","SelectionCheckmark.Deselect.Video":"Deselect this video","SelectionCheckmark.Deselect.Item":"Deselect this item","SelectionCheckmark.Select.Photo":"Select this photo","SelectionCheckmark.Select.Video":"Select this video","SelectionCheckmark.Select.Item":"Select this item","Moments.Moment.Title.Progress":"Loading…","Moments.Grid.Header.Toggle.Selection.Select":"Select","Moments.Grid.Header.Toggle.Selection.Deselect":"Deselect","Moments.Grid.Header.Toggle.Selection.Select.Tooltip":"Select all the items in this Moment","Moments.Grid.Header.Toggle.Selection.Deselect.Tooltip":"Deselect all the items in this Moment","Download.ArchiveName.Default":"iCloud Photos","Download.ArchiveName.From.Name":"iCloud Photos from %{name}","Download.ArchiveName.From.Date":"iCloud Photos from %{date}","Download.Error.Alert.Message":"Photos could not be downloaded.","Download.Error.Alert.Description":"Photos could not be downloaded at this time due to an error. Please try again later.","Download.Error.Alert.Button":"OK","Transaction.Progress.Preparing":"Preparing…","Transaction.Progress.Processing":"Processing…","ProgressView.CancelButton.Title":"Cancel","Button.Done":"Done","Button.Edit":"Edit","Button.Add":"Add","GridPage.SelectAllButton.SelectAll":"Select All","GridPage.SelectAllButton.DeselectAll":"Deselect All","ContainerItem.BlankTitle.Placeholder":"Untitled","PhotosUploader.Button.OK":"OK","PhotosUploader.Button.Title":"Upload","PhotosUploader.Button.Tooltip.Disabled":"Not enough free space to upload images.","PhotosUploader.Text.UploadSingle":"Uploading 1 item…","PhotosUploader.Text.UploadMultiple":"Uploading %{fileCount} items…","PhotosUploader.Text.UploadCancelled":"Upload cancelled","PhotosUploader.Text.UploadComplete":"Upload complete","PhotosUploader.Text.CompletedSingle":"Uploaded 1 item","PhotosUploader.Text.CompletedMultiple":"Uploaded %{prevFileCount} items","PhotosUploader.Alert.File.Message.Single":"There was a problem uploading 1 file.","PhotosUploader.Alert.File.Message.Multiple":"There was a problem uploading %{numErrs} files.","PhotosUploader.Alert.Photo.Message.Single":"There was a problem uploading 1 photo.","PhotosUploader.Alert.Photo.Message.Multiple":"There was a problem uploading %{numErrs} photos.","PhotosUploader.Alert.Photo.Message.UnknownCount":"There was a problem uploading.","PhotosUploader.Alert.InvalidType.Message":"There was a problem uploading this file.","PhotosUploader.Alert.InvalidType.Description":"Only files in JPEG format can be uploaded.","PhotosUploader.Alert.FileTooLarge.Description":"Your file must be smaller than 100 MB.","PhotosUploader.Alert.FileNameTooLong.Description":"Your file name must be less than 255 characters.","PhotosUploader.Alert.FileNameInvalid.Description":"Your file name contains special characters that are not allowed.","PhotosUploader.Alert.ServerError.Message.Single":"There was a problem uploading 1 item due to a server error.","PhotosUploader.Alert.ServerError.Message.Multiple":"There was a problem uploading %{numErrs} items due to a server error","PhotosUploader.Alert.ServerError.Description":"Try uploading the photo again later.","PhotosUploader.Alert.OverQuota.Description":"The upload could not be completed because your iCloud storage is full.","PhotosUploader.Alert.FolderNotSupported.Message":"Uploading folders isn’t supported.","PhotosUploader.Alert.AlbumInvalid.Message":"Adding photos to this album isn’t supported","PhotosUploader.Alert.AlbumInvalid.Description":"Only user created albums or All Photos can be added to.","PhotosUploader.Alert.FolderInvalid.Message":"Adding photos to a folder isn’t supported","PhotosUploader.Alert.FolderInvalid.Description":"Only user created albums or All Photos can be added to.","PhotosUploader.Alert.MultipleSelection.Message":"Adding photos to multiple albums isn’t supported","PhotosUploader.Alert.MultipleSelection.Description":"Only a single user created album or All Photos can be added to.","PhotosUploader.Alert.Duplicate.Message":"Duplicate photo","PhotosUploader.Alert.Duplicate.Multiple.Message":"Duplicate photos","PhotosUploader.Alert.Duplicate.Description":"The photo you are trying to upload is a duplicate and has not been imported into your library","PhotosUploader.Alert.Duplicate.Multiple.Description":"Some of the photos you are trying to upload are duplicates and have not been imported into your library","PhotosUploader.Alert.DimensionsNotCorrect.Message":"There was a problem uploading this file.","PhotosUploader.Alert.DimensionsNotCorrect.Description":"The dimensions of this file are invalid.","FirstRun.Title":"Welcome to Photos","FirstRun.Contents.Message":"The Photos app works seamlessly with iCloud to keep all your photos and videos safely stored and up-to-date on the web, iPhone, iPad, iPod touch, and Mac.","FirstRun.NotEnabled.Advice":"To use Photos, go to iCloud Settings on your iOS device, tap on Photos, and turn on iCloud Photos. On a Mac, open Photos, go to Preferences, and turn on iCloud Photos.","FirstRun.Footnote":"*iCloud Photos requires iOS 8.1 or later, or macOS Yosemite 10.10.3 or later.","FirstRun.Error.Title":"Cannot Load Library","FirstRun.Error.Message":"Photos was unable to load your photos and videos.","FirstRun.IndexingError.Title":"Preparing your library…","FirstRun.IndexingError.Message.Content":"This process will continue even if you leave iCloud.com."}),n(80),n(27),n(26),n(24),n(29),function(e){e.OK="OK",e.CANCELLED="CANCELLED",e.FAILED="FAILED"}(o||(o={}));var c=function(){function e(e,t){this.status=e,this.data=t,this.ok=e===o.OK,this.cancelled=e===o.CANCELLED,this.failed=e===o.FAILED}return e.okResult=function(t){return new e(o.OK,t)},e.cancelledResult=function(t){return new e(o.CANCELLED,t)},e.failedResult=function(t){return new e(o.FAILED,t)},e}();n(100),n(109),n(110),n(111),n(112),n(46),n(43),n(47),n(35),n(54),n(37),n(48),n(81),n(104),n(49),n(50),n(101),n(152),n(75),n(157),n(119),n(115),n(94),n(95),n(148),n(121),n(69),n(79),n(90),n(66),n(71),n(67),n(72),n(105),n(113),n(92),n(96),s.b(s.c(),{"AddToLibraryButton.Mobile.Selection.Mode.Active.Title":"Add","AddToLibraryButton.Mobile.Selection.Mode.Inactive.Title":"Add All","AddToLibraryButton.Desktop.Selection.Mode.Active.Title":"Add To Library","AddToLibraryButton.Desktop.Selection.Mode.Inactive.Title":"Add All To Library","DownloadButton.Title":"Download","Action.Sheet.Button.Cancel":"Cancel","CreateShareButton.Title.All":"Share All","CreateShareButton.Title.Partial":"Share","StopSharingButton.Title":"Stop Sharing","StopSharingButton.Alert.Message":"Remove iCloud Link","StopSharingButton.Alert.Description":"Access to these shared photos will be removed from iCloud immediately.","StopSharingButton.Alert.Button.Confirm":"Stop Sharing","StopSharingButton.Alert.Button.Cancel":"Cancel","StopSharingButton.Error.Alert.Message":"Unable to Remove iCloud Link","StopSharingButton.Error.Alert.Button":"OK","RemoveFromShareButton.Title":"Remove","RemoveFromShareButton.Alert.Message":"Remove iCloud Link","RemoveFromShareButton.Alert.Description":"When removed, you will no longer have access to these shared photos.","RemoveFromShareButton.Alert.Button.Confirm":"Remove","RemoveFromShareButton.Alert.Button.Cancel":"Cancel","RemoveFromShareButton.Error.Alert.Message":"Unable to Remove iCloud Link","RemoveFromShareButton.Error.Alert.Button":"OK","UnableToImport.Error.Alert.Message":"Download Only","UnableToImport.Error.Alert.Description":"Downloading photos to your device is the only currently available option.","UnableToImport.Error.Alert.Button":"OK","Import.Error.Alert.Message":"Photos could not be added to your library.","Import.Error.Alert.Description":"Photos could not be added to your library at this time due to an error. Please try again later.","Import.Error.Alert.Button":"OK","CMMReceiver.UnauthenticatedSigninDialog.Message":"Add To Library or Download","CMMReceiver.UnauthenticatedSigninDialog.Button.Cancel":"Cancel","CMMReceiver.UnauthenticatedSigninDialog.Button.Download":"Download","CMMReceiver.UnauthenticatedSigninDialog.Button.SignInAndImport":"Sign In and Import","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.1":"If you use iCloud Photos you can sign in and add this photo to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.2":"If you use iCloud Photos you can sign in and add these photos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Photos.More":"If you use iCloud Photos you can sign in and add these photos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.1":"If you use iCloud Photos you can sign in and add this video to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.2":"If you use iCloud Photos you can sign in and add these videos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Videos.More":"If you use iCloud Photos you can sign in and add these videos to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.1":"If you use iCloud Photos you can sign in and add this item to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.2":"If you use iCloud Photos you can sign in and add these items to your library.","CMMReceiver.UnauthenticatedSigninDialog.Description.Items.More":"If you use iCloud Photos you can sign in and add these items to your library.","CMMReceiver.Close.Button.Text":"Close","CMMReceiver.Close.Button.Tooltip":"Close","CMMReceiver.Return.To.Shared.Photos.Button.Text":"Return to shared photos","CMMReceiver.Return.To.Shared.Photos.Button.Tooltip":"Return to shared photos","CMMReceiver.Download.Page.Title":"Your download will begin shortly…","CMMReceiver.Download.Page.Description":"Check your downloads folder for:","CMM.InitiateShare.Title":"How would you like to share?","CMM.InitiateShare.Subtitle":"Anyone with access to your shared photo link will be able to view the photos.","CMM.InitiateShare.Subject.From.ShareName.PHOTOS":"Photos from %{ShareName}","CMM.InitiateShare.Subject.From.ShareName.VIDEOS":"Videos from %{ShareName}","CMM.InitiateShare.Subject.From.ShareName.ITEMS":"Items from %{ShareName}","CMM.InitiateShare.Subject.From.Date.PHOTOS":"Photos from %{Date}","CMM.InitiateShare.Subject.From.Date.VIDEOS":"Videos from %{Date}","CMM.InitiateShare.Subject.From.Date.ITEMS":"Items from %{Date}","CMM.InitiateShare.Body.From.ShareName.Photos.1":"View one photo from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Photos.2":"View two photos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Photos.More":"View %{count} photos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.1":"View one video from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.2":"View two videos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Videos.More":"View %{count} videos from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.1":"View one item from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.2":"View two items from %{ShareName}","CMM.InitiateShare.Body.From.ShareName.Items.More":"View %{count} items from %{ShareName}","CMM.InitiateShare.Body.From.Date.Photos.1":"View one photo from %{Date}","CMM.InitiateShare.Body.From.Date.Photos.2":"View two photos from %{Date}","CMM.InitiateShare.Body.From.Date.Photos.More":"View %{count} photos from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.1":"View one video from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.2":"View two videos from %{Date}","CMM.InitiateShare.Body.From.Date.Videos.More":"View %{count} videos from %{Date}","CMM.InitiateShare.Body.From.Date.Items.1":"View one item from %{Date}","CMM.InitiateShare.Body.From.Date.Items.2":"View two items from %{Date}","CMM.InitiateShare.Body.From.Date.Items.More":"View %{count} items from %{Date}","ReviewTitleView.OriginatorTitle.You":"Shared by you","ReviewTitleView.OriginatorTitle.Name":"Shared by %{name}","ReviewTitleView.NumberOfSelectedItems.0":"0 selected","ReviewTitleView.NumberOfSelectedItems.1":"1 selected","ReviewTitleView.NumberOfSelectedItems.2":"2 selected","ReviewTitleView.NumberOfSelectedItems.More":"%{count} selected","ReviewTitleView.NumberOfAvailableItems.0":"0 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.1":"1 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.2":"2 of %{assetCount} available","ReviewTitleView.NumberOfAvailableItems.More":"%{count} of %{assetCount} available","ShareBackFooter.Content.Title":"Share Back","ShareBackFooter.Content.Question":"Share your photos from %{shareTitle}?","ShareBackFooter.Content.Default.Question":"Share your photos?","ShareBackFooter.Action.Button.Title":"View","ShareBackFooter.Action.Button.Close":"Dismiss","ReportSpamButton.Title":"Report this content","ReportSpamButton.Title.Confirmed":"Content Reported","ReportSpamAlertView.Title":"Report This Content","ReportSpamAlertView.Description":"Your feedback helps improve this service.","ReportSpamAlertView.Cancel":"Cancel","ReportSpamAlertView.Confirm":"Send to Apple","LegalFooterView.AppleDotComUrl.Href":"https://www.apple.com/","LegalFooterView.AppleDotComUrl.Title":"Apple.com","LegalFooterView.Text.Fragment.PrivacyUrl.Href":"https://www.apple.com/privacy/","LegalFooterView.Text.Fragment.PrivacyUrl.Title":"Privacy Policy","LegalFooterView.Text.Fragment.TermsUrl.Href":"https://www.apple.com/legal/icloud/ww/","LegalFooterView.Text.Fragment.TermsUrl.Title":"Terms & Conditions","LegalFooterView.Text.Fragment.Copyright":"Copyright © %{year} Apple Inc. All rights reserved.","LegalFooterView.Text.Desktop":"%{privacyAnchorTag}  |  %{termsAnchorTag}  |  %{copyrightText}","LegalFooterView.Text.Mobile":"%{privacyAnchorTag}  |  %{termsAnchorTag}\n%{copyrightText}","ModeSelectionButton.Cancel":"Cancel","ModeSelectionButton.Select":"Select","SelectAllButton.SelectAll":"Select All","SelectAllButton.DeselectAll":"Deselect All","ImportJob.Preparing":"Preparing…","ImportJob.AddingPhotos.1":"Adding 1 photo…","ImportJob.AddingPhotos.2":"Adding 2 photos…","ImportJob.AddingPhotos.More":"Adding %{count} photos…","ImportJob.AddingVideos.1":"Adding 1 video…","ImportJob.AddingVideos.2":"Adding 2 videos…","ImportJob.AddingVideos.More":"Adding %{count} videos…","ImportJob.AddingItems.1":"Adding 1 item…","ImportJob.AddingItems.2":"Adding 2 items…","ImportJob.AddingItems.More":"Adding %{count} items…","ReciprocateTitleView.ShareWithOriginator":"Share with %{originatorName}","ReviewTitleView.NumberOfPhotos.0":"0 photos","ReviewTitleView.NumberOfPhotos.1":"1 photo","ReviewTitleView.NumberOfPhotos.2":"2 photos","ReviewTitleView.NumberOfPhotos.More":"%{count} photos","ReviewTitleView.NumberOfVideos.0":"0 videos","ReviewTitleView.NumberOfVideos.1":"1 video","ReviewTitleView.NumberOfVideos.2":"2 videos","ReviewTitleView.NumberOfVideos.More":"%{count} videos","ReviewTitleView.NumberOfItems.0":"0 items","ReviewTitleView.NumberOfItems.1":"1 item","ReviewTitleView.NumberOfItems.2":"2 items","ReviewTitleView.NumberOfItems.More":"%{count} items","Review.AddAssets.Done":"Done","ImportSuccess.Placard.Photos.1":"1 photo added","ImportSuccess.Placard.Photos.2":"2 photos added","ImportSuccess.Placard.Photos.More":"%{count} photos added","ImportSuccess.Placard.Videos.1":"1 video added","ImportSuccess.Placard.Videos.2":"2 videos added","ImportSuccess.Placard.Videos.More":"%{count} videos added","ImportSuccess.Placard.Items.1":"1 item added","ImportSuccess.Placard.Items.2":"2 items added","ImportSuccess.Placard.Items.More":"%{count} items added","IncompleteStatePageView.Check":"Please check back soon.","IncompleteStatePageView.Sharing.Incomplete.Photos.1":"%{originatorName} is uploading a shared photo…","IncompleteStatePageView.Sharing.Incomplete.Photos.2":"%{originatorName} is uploading 2 shared photos…","IncompleteStatePageView.Sharing.Incomplete.Photos.More":"%{originatorName} is uploading %{count} shared photos…","IncompleteStatePageView.Sharing.Incomplete.Videos.1":"%{originatorName} is uploading a shared video…","IncompleteStatePageView.Sharing.Incomplete.Videos.2":"%{originatorName} is uploading 2 shared videos…","IncompleteStatePageView.Sharing.Incomplete.Videos.More":"%{originatorName} is uploading %{count} shared videos…","IncompleteStatePageView.Sharing.Incomplete.Items.1":"%{originatorName} is uploading a shared item…","IncompleteStatePageView.Sharing.Incomplete.Items.2":"%{originatorName} is uploading 2 shared items…","IncompleteStatePageView.Sharing.Incomplete.Items.More":"%{originatorName} is uploading %{count} shared items…","IncompleteStatePageView.Sharing.Incomplete.Originator.Photos.1":"You are uploading a shared photo…","IncompleteStatePageView.Sharing.Incomplete.Originator.Photos.2":"You are uploading 2 shared photos…","IncompleteStatePageView.Sharing.Incomplete.Originator.Photos.More":"You are uploading %{count} shared photos…","IncompleteStatePageView.Sharing.Incomplete.Originator.Videos.1":"You are uploading a shared video…","IncompleteStatePageView.Sharing.Incomplete.Originator.Videos.2":"You are uploading 2 shared videos…","IncompleteStatePageView.Sharing.Incomplete.Originator.Videos.More":"You are uploading %{count} shared videos…","IncompleteStatePageView.Sharing.Incomplete.Originator.Items.1":"You are uploading a shared item…","IncompleteStatePageView.Sharing.Incomplete.Originator.Items.2":"You are uploading 2 shared items…","IncompleteStatePageView.Sharing.Incomplete.Originator.Items.More":"You are uploading %{count} shared items…","ImportSuccess.Alert.Message.Photos":"Successfully added.","ImportSuccess.Alert.Description.Photos.0":"0 photos added to your library.","ImportSuccess.Alert.Description.Photos.1":"1 photo added to your library.","ImportSuccess.Alert.Description.Photos.2":"2 photos added to your library.","ImportSuccess.Alert.Description.Photos.More":"%{count} photos added to your library.","ImportSuccess.Alert.Description.Videos.0":"0 videos added to your library.","ImportSuccess.Alert.Description.Videos.1":"1 video added to your library.","ImportSuccess.Alert.Description.Videos.2":"2 videos added to your library.","ImportSuccess.Alert.Description.Videos.More":"%{count} videos added to your library.","ImportSuccess.Alert.Description.Items.0":"0 items added to your library.","ImportSuccess.Alert.Description.Items.1":"1 item added to your library.","ImportSuccess.Alert.Description.Items.2":"2 items added to your library.","ImportSuccess.Alert.Description.Items.More":"%{count} items added to your library.","ImportSuccess.Alert.Button.Dismiss":"Dismiss","ImportSuccess.Alert.Button.GoToPhotos":"View Photos","ImportSuccess.Alert.Button.OK":"OK","CMMReceiver.DotDotDotMenu.Cancel":"Cancel","CMMReceiver.DotDotDotMenu.CopyLink":"Copy iCloud Link","CMMReceiver.DotDotDotMenu.ShareBack":"Share Back","OneUp.Navbar.Button.Download.Text":"Download","OneUp.Navbar.Button.Download.Tooltip":"Download","OneUp.Navbar.Button.Import.Text":"Add to Library","OneUp.Navbar.Button.Import.Tooltip":"Add to library","OneUp.Navbar.Button.Thumbstrip.Tooltip":"Show or hide thumbnails","CMMReceiver.OneUp.Adding":"ADDING…","CMMReceiver.OneUp.Added":"ADDED","ShareListingItemView.Title.YouShared":"You <span>Shared</span>","ShareListing.Error.FirstLabel":"Temporarily unavailable.","ShareListing.Error.SecondLabel":"Try again later.","ShareListing.StartSharing.Button":"Share Photos and Videos","ShareListing.StartSharing.Label":"iCloud Links that you create or receive will appear here.","ShareListingView.Title":"iCloud Links"}),n(141),n(135),n(153),n(136),n(125),n(137),n(131),n(124),n(122),n(70),n(44),n(59),n(52),s.b(s.c(),{"CKSharing.UnexpectedTerminationMessage":"An unexpected error occurred.","CKSharing.Busy.LoadingParticipants.Description":"Loading…","CKSharing.Busy.Loading.Description":"Loading…","CKSharing.Sending.Description":"Preparing…","CKSharing.Dialog.Button.OK":"OK","CKSharing.Dialog.Button.Continue":"Continue","CKSharing.Dialog.Button.Cancel":"Cancel","CKSharing.Dialog.Button.Done":"Done","CKSharing.ErrorDialog.ACCESS_DENIED.Message":"Your request couldn’t be completed.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.CloudKit":"This account has restrictions on the people you can share with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Keynote":"This account has restrictions on the people you can share presentations with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Notes":"This account has restrictions on the people you can share notes with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Numbers":"This account has restrictions on the people you can share spreadsheets with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Pages":"This account has restrictions on the people you can share documents with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Drive.File":"This account has restrictions on the people you can share files with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Drive.Folder":"This account has restrictions on the people you can share folders with.","CKSharing.ErrorDialog.ACCESS_DENIED.Description.Photos":"This account has restrictions on the people you can share photos with.","CKSharing.ErrorDialog.AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED.Message":"Cannot send message.","CKSharing.ErrorDialog.AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED.Description":"One or more participants cannot be invited because of an error.","CKSharing.ErrorDialog.DESTROY.Message":"Sharing couldn’t be stopped.","CKSharing.ErrorDialog.UPDATE.Message":"Share options couldn’t be changed.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_EMAIL.TO_PERSON.Message":"Your invitation couldn’t be sent.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_EMAIL.TO_PEOPLE.Message":"Your invitations couldn’t be sent.","CKSharing.ErrorDialog.INVITE_TO_PRIVATE.VIA_UNKNOWN.Message":"People couldn’t be added.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.CloudKit":"This can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Keynote":"This presentation can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Notes":"This note can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Numbers":"This spreadsheet can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Pages":"This document can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Drive.File":"This file can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Drive.Folder":"This folder can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Photos":"These photos can’t be shared right now.","CKSharing.ErrorDialog.INVITE_TO_PUBLIC.Message.Photos.Compact":"Photos Could Not Be Shared","CKSharing.ErrorDialog.SEND_LINK.Message.CloudKit":"The link can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Keynote":"The link to this presentation can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Notes":"The link to this note can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Numbers":"The link to this spreadsheet can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Pages":"The link to this document can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Drive.File":"The link to this file can’t be sent right now.","CKSharing.ErrorDialog.SEND_LINK.Message.Drive.Folder":"The link to this folder can’t be sent right now.","CKSharing.ErrorDialog.CONFLICT.Description":"Changes were made on another device. Please try again.","CKSharing.ErrorDialog.UNKNOWN_ERROR.Description":"There may be a problem with the server. Please try again later.","CKSharing.ErrorDialog.UNKNOWN_ERROR.Description.Compact":"Please try again later.","CKSharing.ErrorDialog.TOO_MANY_INVITEES.Message":"You’ve reached the maximum number of invites.","CKSharing.ErrorDialog.TOO_MANY_INVITEES.Description":"New invitations can’t be sent. Reduce the number of people you’re inviting or have previously invited, then try again.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF.Message":"You can’t share to your own iCloud email address.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF.Description":"Enter other people’s email addresses or phone numbers, then try again.","CKSharing.ErrorDialog.ADDED_ONLY_YOURSELF_EMAIL.Description":"Enter other people’s email addresses, then try again.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.NOT_IN_ORG.Message":"“%{value}” is not a member of your institution.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.NOT_IN_ORG.Description":"Please select a contact that belongs to your institution.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.Message":"“%{value}” is not a valid email address or phone number.","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.OVER_SIZE.Ellipsis":"…","CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.Description":"Please enter a valid email address or phone number, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.SOME_INVALID_TOKENS.Message":"Some email addresses or phone numbers you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.SOME_INVALID_TOKENS.Description":"Please enter valid email addresses or phone numbers, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.ALL_INVALID_TOKENS.Message":"The email addresses or phone numbers you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.ALL_INVALID_TOKENS.Description":"Please enter valid email addresses or phone numbers, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.ONE_INVALID_TOKEN.Message":"“%{value}” is not a valid email address.","CKSharing.ErrorDialog.ValidateTokens.Email.ONE_INVALID_TOKEN.Description":"Please enter a valid email address, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.SOME_INVALID_TOKENS.Message":"Some email addresses you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.Email.SOME_INVALID_TOKENS.Description":"Please enter valid email addresses, then try sharing again.","CKSharing.ErrorDialog.ValidateTokens.Email.ALL_INVALID_TOKENS.Message":"The email addresses you entered are not valid.","CKSharing.ErrorDialog.ValidateTokens.Email.ALL_INVALID_TOKENS.Description":"Please enter valid email addresses, then try sharing again.","CKSharing.ErrorDialog.OKButton.Title":"OK","CKSharing.ErrorDialog.MailComposer.LoadTimeout.Message":"Cannot open iCloud Mail.","CKSharing.ErrorDialog.MailComposer.LoadTimeout.Description":"There may be a problem with the server. Please try again later.","CKSharing.ErrorDialog.AXMGroup.UNABLE_TO_FETCH_MEMBERS.Message":"Unable to get members of “%{groupName}”.","CKSharing.ErrorDialog.AXMGroup.UNABLE_TO_FETCH_MEMBERS.Description":"There may be a problem with the server. Please try again later.","CKSharing.ConfirmationDialog.PublicToPrivate.Message":"Change to invite only?","CKSharing.ConfirmationDialog.PublicToPrivate.Description.CloudKit.WithTitle":"Only you will have access to “%{shareTitle}” until you invite people.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.CloudKit.WithoutTitle":"Only you will have access until you invite people.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Drive.File":"Everyone will be removed from this file and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Drive.Folder":"Everyone will be removed from this folder and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Pages":"Everyone will be removed from this document and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Keynote":"Everyone will be removed from this presentation and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.PublicToPrivate.Description.Numbers":"Everyone will be removed from this spreadsheet and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Message.CloudKit":"Stop sharing?","CKSharing.ConfirmationDialog.StopSharing.Message.Drive.File":"Stop sharing this file?","CKSharing.ConfirmationDialog.StopSharing.Message.Drive.Folder":"Stop sharing this folder?","CKSharing.ConfirmationDialog.StopSharing.Message.Pages":"Stop sharing this document?","CKSharing.ConfirmationDialog.StopSharing.Message.Keynote":"Stop sharing this presentation?","CKSharing.ConfirmationDialog.StopSharing.Message.Numbers":"Stop sharing this spreadsheet?","CKSharing.ConfirmationDialog.StopSharing.Message.Notes":"Stop sharing this note?","CKSharing.ConfirmationDialog.StopSharing.Description.CloudKit.WithTitle":"If you stop sharing, other people will no longer have access to “%{shareTitle}”.","CKSharing.ConfirmationDialog.StopSharing.Description.CloudKit.WithoutTitle":"If you stop sharing, other people will no longer have access.","CKSharing.ConfirmationDialog.StopSharing.Description.Drive.File":"If you stop sharing, other people will no longer have access to this file and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Drive.Folder":"If you stop sharing, other people will no longer have access to this folder and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Pages":"If you stop sharing, other people will no longer have access to this document and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Keynote":"If you stop sharing, other people will no longer have access to this presentation and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Numbers":"If you stop sharing, other people will no longer have access to this spreadsheet and it will be deleted from iCloud Drive on all of their devices.","CKSharing.ConfirmationDialog.StopSharing.Description.Notes":"If you stop sharing, other people will no longer have access to this note and it will be deleted on all of their devices.","CKSharing.ConfirmationDialog.RemoveYourself.Message.CloudKit":"Are you sure you want to remove yourself?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Drive.File":"Are you sure you want to remove yourself from this shared file?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Drive.Folder":"Are you sure you want to remove yourself from this shared folder?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Pages":"Are you sure you want to remove yourself from this shared document?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Keynote":"Are you sure you want to remove yourself from this shared presentation?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Numbers":"Are you sure you want to remove yourself from this shared spreadsheet?","CKSharing.ConfirmationDialog.RemoveYourself.Message.Notes":"Are you sure you want to remove yourself from this shared note?","CKSharing.ConfirmationDialog.RemoveYourself.Description.CloudKit.WithTitle":"This will remove you from “%{shareTitle}”.","CKSharing.ConfirmationDialog.RemoveYourself.Description.CloudKit.WithoutTitle":"You will no longer have access.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Drive.File":"Removing yourself from this shared file will delete the document from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Drive.Folder":"Removing yourself from this shared folder will delete the document from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Pages":"Removing yourself from this shared document will delete the document from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Keynote":"Removing yourself from this shared presentation will delete the presentation from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Numbers":"Removing yourself from this shared spreadsheet will delete the spreadsheet from iCloud Drive on all your devices.","CKSharing.ConfirmationDialog.RemoveYourself.Description.Notes":"Removing yourself from this shared note will delete the note from all your devices.","CKSharing.ConfirmationDialog.RemoveFinalParticipant.Message":"Are you sure you want to remove “%{name}”?","CKSharing.ConfirmationDialog.RemoveFinalParticipant.Description":"Removing the only invited participant will stop sharing.","CKSharing.SummaryText.OwnerAdmin.Private.RW.WOption":"Only people you invite can make changes","CKSharing.SummaryText.OwnerAdmin.Private.RO.WOption":"Only people you invite can view","CKSharing.SummaryText.OwnerAdmin.Private.Mixed.WOption":"Only people you invite can open","CKSharing.SummaryText.OwnerAdmin.Private.RW.NoOption":"People you invite can make changes.","CKSharing.SummaryText.OwnerAdmin.Private.RO.NoOption":"People you invite can view.","CKSharing.SummaryText.OwnerAdmin.Private.Mixed.NoOption":"People you invite can open.","CKSharing.SummaryText.OwnerAdmin.Public.RW.WOption":"Anyone with the link can make changes","CKSharing.SummaryText.OwnerAdmin.Public.RO.WOption":"Anyone with the link can view","CKSharing.SummaryText.OwnerAdmin.Public.RW.NoOption":"Anyone with the link can make changes.","CKSharing.SummaryText.OwnerAdmin.Public.RO.NoOption":"Anyone with the link can view.","CKSharing.SummaryText.Participant.Private.RW":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Private.RO":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Private.Mixed":"Only %{ownerName} can invite people.","CKSharing.SummaryText.Participant.Public.RW":"Anyone with the link can make changes.","CKSharing.SummaryText.Participant.Public.RO":"Anyone with the link can view.","CKSharing.PermissionsCombo.AllowEditing":"Can make changes","CKSharing.PermissionsCombo.ViewOnly":"View only","CKSharing.PermissionsCombo.Mixed":"Mixed","CKSharing.ManageShare.Title":"People","CKSharing.ManageShare.Button.AddPeople":"Add People","CKSharing.ManageShare.Button.SendLink":"Send Link","CKSharing.ManageShare.Button.CopyLink":"Copy Link","CKSharing.ManageShare.Button.ShareOptions":"Share Options","CKSharing.ManageShare.Button.Close":"Done","CKSharing.ManageShare.Button.StopSharing":"Stop Sharing","CKSharing.ManageShare.List.Label.Owner":" (Owner)","CKSharing.ManageShare.List.Label.Me":" (Me)","CKSharing.ManageShare.ParticipantSettings.ShowContactCard":"Show Contact Card","CKSharing.ManageShare.ParticipantSettings.CopyEmail":"Copy Email","CKSharing.ManageShare.ParticipantSettings.CopyPhoneNumber":"Copy Phone Number","CKSharing.ManageShare.ParticipantSettings.CanEdit":"Can Make Changes","CKSharing.ManageShare.ParticipantSettings.ViewOnly":"View Only","CKSharing.ManageShare.ParticipantSettings.RemoveAccess":"Remove Access","CKSharing.ManageShare.ParticipantSettings.RemoveMe":"Remove Me","CKSharing.ManageShare.StatusText.Invited":"Invited","CKSharing.ManageShare.StatusText.ViewOnly":"View Only","CKSharing.ManageShare.Settings.AllPermissionsToggle.Label":"Set All Permissions","CKSharing.ManageShare.Settings.AllPermissionsToggle.ReadWrite":"Allow editing","CKSharing.ManageShare.Settings.AllPermissionsToggle.ReadOnly":"View only","CKSharing.InitiateShare.Title":"Add People","CKSharing.AddParticipants.Title.AddPeople":"Add People","CKSharing.AddParticipants.Title.SendLink":"Send Link","CKSharing.AddParticipants.Subtitle.MultipleTransports":"Choose how you’d like to send your invitation:","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.CloudKit":"Share this with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Keynote":"Share this presentation with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Numbers":"Share this spreadsheet with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Pages":"Share this document with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Drive.File":"Share this file with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Public.Drive.Folder":"Share this folder with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.CloudKit":"Share this with others, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Keynote":"Add people to this presentation, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Notes":"Add people to this note, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Numbers":"Add people to this spreadsheet, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Pages":"Add people to this document, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Drive.File":"Add people to this file, then send them the link.","CKSharing.AddParticipants.Subtitle.SingleTransport.Private.Drive.Folder":"Add people to this folder, then send them the link.","CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId":"%{displayName} (%{appleId})","CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId":"%{nameOrAppleId}","CKSharing.AddParticipants.AccessLabel.Title":"Who can access:","CKSharing.AddParticipants.AllowLabel.Title":"Permission:","CKSharing.AddParticipants.Transports.CopyLinkButton.Title":"Copy Link","CKSharing.AddParticipants.Transports.EmailButton.Title":"Email","CKSharing.AddParticipants.Transports.SchoolworkButton.Title":"Schoolwork","CKSharing.AddParticipants.ShareSettingsDisclosureButton.Title":"Share Options","CKSharing.AddParticipants.CancelButton.Title":"Cancel","CKSharing.AddParticipants.OKButton.Share.Title":"Share","CKSharing.AddParticipants.OKButton.CopyLink.Title":"Copy Link","CKSharing.AddParticipants.InvitationsTextField.Placeholder":"Email addresses or phone numbers","CKSharing.AddParticipants.Public":"Anyone with the link","CKSharing.AddParticipants.Private":"Only people you invite","CKSharing.AddParticipants.Email.Subject.AppName":"Shared from %{appName}","CKSharing.AddParticipants.Email.Subject.ShareTitle":"“%{shareTitle}”","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Keynote":"Open my shared presentation:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Notes":"Open my shared note:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Numbers":"Open my shared spreadsheet:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Pages":"Open my shared document:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Drive.File":"Open my shared file:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Drive.Folder":"Open my shared folder:","CKSharing.AddParticipants.Email.Bodyprefix.OwnerAdmin.Photos":"Open my shared photos:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Keynote":"Open this shared presentation:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Notes":"Open this shared note:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Numbers":"Open this shared spreadsheet:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Pages":"Open this shared document:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Drive.File":"Open this shared file:","CKSharing.AddParticipants.Email.Bodyprefix.Participant.Drive.Folder":"Open this shared folder:","ConfirmNativeMail.CloseButton":"Close","ConfirmNativeMail.ConfirmButton":"Open Mail","ConfirmNativeMail.Message.Keynote.Expanded":"Shared presentation is ready.","ConfirmNativeMail.Message.Notes.Expanded":"Shared note is ready.","ConfirmNativeMail.Message.Numbers.Expanded":"Shared spreadsheet is ready.","ConfirmNativeMail.Message.Pages.Expanded":"Shared document is ready.","ConfirmNativeMail.Message.Drive.File.Expanded":"Shared file is ready.","ConfirmNativeMail.Message.Drive.Folder.Expanded":"Shared folder is ready.","ConfirmNativeMail.Message.Photos.Compact":"Shared Photos are Ready","ConfirmNativeMail.Message.Photos.Expanded":"Shared photos are ready.","ConfirmNativeMail.Message.CloudKit.Expanded":"Ready to send.","ConfirmNativeMail.Description":"Open your mail client to send your iCloud link.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Keynote":"Here’s the link to your presentation.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Notes":"Here’s the link to your note.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Numbers":"Here’s the link to your spreadsheet.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Pages":"Here’s the link to your document.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Drive.File":"Here’s the link to your file.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Drive.Folder":"Here’s the link to your folder.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.Photos":"Here’s the link to your shared photos.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Title.CloudKit":"Here’s the link.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Keynote":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Numbers":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Pages":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Drive.File":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.Drive.Folder":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadOnly.CloudKit":"Anyone with the link will be able to view.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Keynote":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Numbers":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Pages":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Drive.File":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.Drive.Folder":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Public.ReadWrite.CloudKit":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Keynote":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Notes":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Numbers":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Pages":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Drive.File":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.Drive.Folder":"Only the people you invited will be able to view it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadOnly.CloudKit":"Only the people you invited will be able to view.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Keynote":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Notes":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Numbers":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Pages":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Drive.File":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.Drive.Folder":"Only the people you invited will be able to open it.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.Mixed.CloudKit":"Only the people you invited will be able to open.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Keynote":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Notes":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Numbers":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Pages":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Drive.File":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.Drive.Folder":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.OwnerAdmin.Subtitle.Private.ReadWrite.CloudKit":"Only the people you invited will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Title.Keynote":"Here’s the link to this presentation.","CKSharing.AddParticipants.CopyLink.Participant.Title.Notes":"Here’s the link to this note.","CKSharing.AddParticipants.CopyLink.Participant.Title.Numbers":"Here’s the link to this spreadsheet.","CKSharing.AddParticipants.CopyLink.Participant.Title.Pages":"Here’s the link to this document.","CKSharing.AddParticipants.CopyLink.Participant.Title.Drive.File":"Here’s the link to this file.","CKSharing.AddParticipants.CopyLink.Participant.Title.Drive.Folder":"Here’s the link to this folder.","CKSharing.AddParticipants.CopyLink.Participant.Title.CloudKit":"Here’s the link.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Keynote":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Numbers":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Pages":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Drive.File":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.Drive.Folder":"Anyone with the link will be able to view it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadOnly.CloudKit":"Anyone with the link will be able to view.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Keynote":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Numbers":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Pages":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Drive.File":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.Drive.Folder":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Public.ReadWrite.CloudKit":"Anyone with the link will be able to make changes.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Keynote":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Notes":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Numbers":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Pages":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Drive.File":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.Drive.Folder":"Only people %{ownerDisplayName} invited will be able to access it.","CKSharing.AddParticipants.CopyLink.Participant.Subtitle.Private.CloudKit":"Only people %{ownerDisplayName} invited will have access.","CKSharing.AddParticipants.CopyLink.CopyButton.Title":"Copy Link","CKSharing.AddParticipants.CopyLink.CloseButton.Title":"Close","CKSharing.AddParticipants.TokenItemMenu.EditEmail":"Edit Address","CKSharing.AddParticipants.TokenItemMenu.RemoveEmail":"Remove Address","CKSharing.AddParticipants.TokenItemMenu.EditPhone":"Edit Phone Number","CKSharing.AddParticipants.TokenItemMenu.RemovePhone":"Remove Phone Number","CKSharing.AddParticipants.TokenItemMenu.EditUnknown":"Edit","CKSharing.AddParticipants.TokenItemMenu.RemoveUnknown":"Remove","CKSharing.AddParticipants.TokenItemMenu.AutocompleteItem.Title":"%{field} (%{label})","CKSharing.AddParticipants.TokenItemView.Add":"Add:","CKSharing.CopyEmailOrPhone.Title.Phone":"Phone Number","CKSharing.CopyEmailOrPhone.Title.Email":"Email Address","CKSharing.CopyEmailOrPhone.Subtitle.Phone":"Click the phone number to select it.","CKSharing.CopyEmailOrPhone.Subtitle.Email":"Click the email address to select it.","CKSharing.Offline.Title":"You’re Offline","CKSharing.Offline.Description":"Check your Internet connection.","CKSharing.RichLink.NoShareTitle":"Shared from %{appName}","CKSharing.iWork.Pages":"Pages","CKSharing.iWork.Keynote":"Keynote","CKSharing.iWork.Numbers":"Numbers","CKSharing.AXMGroup.LoadingMembers":"Loading…","CKSharing.InvalidToken.GeneralReason":"Invalid Email or Phone Number.","CKSharing.InvalidToken.NotAXMContact":"You cannot share with a person outside of your institution."}),n(73),n(63),n(41),n(62),n(83),n(87),n(88),n(84),n(85),n(76),n(68),n(60),n(53),n(39),n(38),n(36),s.b(s.c(),{"ContactsAutocomplete.Error.Internal":"Internal error","ContactsAutocomplete.Error.Generic":"Couldn’t load contacts because of a server error.","ContactsAutocomplete.Error.NotFound":"Couldn’t load contacts because the server could not be found.","ContactsAutocomplete.SearchingProgress":"Searching for “%{searchString}”…","ContactsAutocomplete.GroupSecondaryLabel.Multiple":"%{numberOfContacts} contacts","ContactsAutocomplete.GroupSecondaryLabel.Single":"1 contact","ContactsAutocomplete.GroupMembers":"%{emailAddresses} & %{lastEmailAddress}","ContactsAutocomplete.Recents.Delete.Title":"Remove From Recents","ContactsAutocomplete.Recents.Delete.Recipient.Text":"Are you sure you want to remove this recent recipient?","ContactsAutocomplete.Recents.Delete.Group.Text":"Are you sure you want to remove this recent group?","ContactsAutocomplete.Category.WORK":"work","ContactsAutocomplete.Category.HOME":"home","ContactsAutocomplete.Category.MOBILE":"mobile","ContactsAutocomplete.Category.MAIN":"main","ContactsAutocomplete.Category.HOMEFAX":"home fax","ContactsAutocomplete.Category.WORKFAX":"work fax","ContactsAutocomplete.Category.PAGER":"pager","ContactsAutocomplete.Category.OTHER":"other","ContactsAutocomplete.Category.CUSTOM":"custom","ContactsAutocomplete.Category.RECENTS":"recents","ContactsAutocomplete.Category.SCHOOL":"school","ContactsAutocomplete.Category.BUSINESS":"work","ContactsAutocomplete.PreviewTemplate.MatchPersonByFirstName":"%{firstAndLastNameInProperOrder} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByMiddleName":"%{middleName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByLastName":"%{lastAndFirstNameInProperOrder} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByNickName":"%{nickName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByCompanyName":"%{companyName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchPersonByContact":"%{contactValue} (%{firstAndLastNameInProperOrder})","ContactsAutocomplete.PreviewTemplate.MatchPersonByNickAndLastName":"%{nickName} %{lastName} — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByFirstName":"%{firstAndLastNameInProperOrder} (%{company}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByMiddleName":"%{middleName} (%{firstAndLastNameInProperOrder}) (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByLastName":"%{lastAndFirstNameInProperOrder} (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByNickName":"%{nickName} (%{firstAndLastNameInProperOrder}) (%{companyName}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByCompanyName":"%{companyName} (%{firstAndLastNameInProperOrder}) — %{contactValue}","ContactsAutocomplete.PreviewTemplate.MatchCompanyByContact":"%{contactValue} %{companyName} (%{firstAndLastNameInProperOrder})","ContactsAutocomplete.PreviewTemplate.MatchRecentByName":"%{matchedName} — %{emailAddress}","ContactsAutocomplete.PreviewTemplate.MatchRecentByEmailAddress":"%{matchedEmail} (%{name})"}),n(61),n(86),n(89),n(183),n(150),n(158),n(184),n(181),n(185),n(186),n(182),n(174),n(168),n(175),n(169),n(435),n(436),n(226),n(227),n(187),n(159),n(149),n(142),n(116),n(151),n(154),n(176),n(170),n(164),n(177),n(379),n(260),n(261),n(380),n(437),n(276),n(341),n(342),n(343),s.b(s.c(),{"AlbumsPopover.NavBar.Back":"Back","AlbumsPopover.NewAlbum":"New Album","AlbumsPopover.NewFolder":"New Folder","Application.Title":"Photos","IndexFile.Meta.Description":"Store all your photos and videos with iCloud and access them anytime from your iOS devices and the web.","Toolbar.AppSwitcher.Tooltip":"Change App","Toolbar.SegmentedControl.moments":"Moments","Toolbar.SegmentedControl.allPhotos":"Photos","Route.Title.moments":"Moments","Route.Title.choose":"Choose Items","Toolbar.Selection.Button.Continue":"Continue","Toolbar.Selection.Button.Add":"Add","Toolbar.Selection.Button.Cancel":"Cancel","Toolbar.Selection.Segments.All":"All Items","Toolbar.Selection.Segments.Favorites":"Favorites","Toolbar.Selection.Segments.Selected":"Selected","Toolbar.Selection.Title.Selected.0":"Select items to add to %{ albumName }","Toolbar.Selection.Title.Selected.1":"Add 1 item to %{ albumName }","Toolbar.Selection.Title.Selected.More":"Add %{ selectionNum } items to %{ albumName }","Toolbar.Selection.Title.Container":"Selected Items","Toolbar.Back":"Back","Toolbar.Forward":"Forward","Toolbar.Button.Tooltip.Sidebar.Open":"Open Sidebar","Toolbar.Button.Tooltip.Sidebar.Close":"Close Sidebar","Toolbar.Button.ToolTip.ThumbStrip.ShowOrHide":"Show or hide thumbnails","Toolbar.Button.Tooltip.Favorite":"Favorite","Toolbar.Button.Tooltip.Share":"Share","Toolbar.Button.Tooltip.AddToAlbum":"Add to an album","Toolbar.Button.Tooltip.AddToAlbum.Disabled":"Not enough free space to add to album","Toolbar.Button.Tooltip.CreateAlbum":"Create a new album","Toolbar.Button.Tooltip.Upload":"Upload photos","Toolbar.Button.Tooltip.Upload.Disabled":"Not enough free space to upload photos","Toolbar.Button.Tooltip.DownloadItem":"Download selected item","Toolbar.Button.Tooltip.DownloadItems":"Download selected items","Toolbar.Button.Tooltip.DownloadItems.NoItems":"No items selected for download","Toolbar.Button.Tooltip.Remove":"Remove","Toolbar.Button.Tooltip.Delete":"Delete","Toolbar.Button.Tooltip.Edit":"Edit","Toolbar.ZoomSlider.Tooltip":"Zoom","Toolbar.ZoomSlider.Tooltip.FitsInWindow":"Fit","Toolbar.OneUp.Title.BurstCount.1":"Burst (1 Photo)","Toolbar.OneUp.Title.BurstCount.2":"Burst (2 Photos)","Toolbar.OneUp.Title.BurstCount.More":"Burst (%{count} Photos)","Toolbar.Folder.Title.MediaCount.0":"0 items","Toolbar.Folder.Title.MediaCount.1":"1 item","Toolbar.Folder.Title.MediaCount.2":"2 items","Toolbar.Folder.Title.MediaCount.More":"%{count} items","Toolbar.Folder.Title.Subtitle":"%{dateRange} · %{countString}","OneUp.Burst.Toolbar.Done":"Done","OneUp.Burst.Toolbar.Cancel":"Cancel","OneUp.Burst.Toolbar.MakeASelection":"Make a Selection","OneUp.Burst.Toolbar.Selection.1":"1 Photo Selected","OneUp.Burst.Toolbar.Selection.2":"2 Photos Selected","OneUp.Burst.Toolbar.Selection.More":"%{count} Photos Selected","OneUp.Burst.Button.MakeASelection":"Make a selection…","AdvancedDownload.Title.PhotosOnly.1":"Download 1 Photo","AdvancedDownload.Title.PhotosOnly.2":"Download 2 Photos","AdvancedDownload.Title.PhotosOnly.More":"Download %{count} Photos","AdvancedDownload.Title.VideosOnly.1":"Download 1 Video","AdvancedDownload.Title.VideosOnly.2":"Download 2 Videos","AdvancedDownload.Title.VideosOnly.More":"Download %{count} Videos","AdvancedDownload.Title.GenericItems.1":"Download 1 Item","AdvancedDownload.Title.GenericItems.2":"Download 2 Items","AdvancedDownload.Title.GenericItems.More":"Download %{count} Items","AdvancedDownload.Title.PhotosAndVideos.1.1":"Download 1 Photo and 1 Video","AdvancedDownload.Title.PhotosAndVideos.1.2":"Download 1 Photo and 2 Videos","AdvancedDownload.Title.PhotosAndVideos.1.More":"Download 1 Photo and %{count2} Videos","AdvancedDownload.Title.PhotosAndVideos.2.1":"Download 2 Photos and 1 Video","AdvancedDownload.Title.PhotosAndVideos.2.2":"Download 2 Photos and 2 Videos","AdvancedDownload.Title.PhotosAndVideos.2.More":"Download 2 Photos and %{count2} Videos","AdvancedDownload.Title.PhotosAndVideos.More.1":"Download %{count1} Photos and 1 Video","AdvancedDownload.Title.PhotosAndVideos.More.2":"Download %{count1} Photos and 2 Videos","AdvancedDownload.Title.PhotosAndVideos.More.More":"Download %{count1} Photos and %{count2} Videos","AdvancedDownload.Option.UnmodifiedOriginals.0":"Unmodified Originals","AdvancedDownload.Option.UnmodifiedOriginals.1":"Unmodified Original","AdvancedDownload.Option.UnmodifiedOriginals.2":"Unmodified Originals","AdvancedDownload.Option.UnmodifiedOriginals.More":"Unmodified Originals","AdvancedDownload.Subtext.UnmodifiedOriginals.0":"Originals as captured or imported.","AdvancedDownload.Subtext.UnmodifiedOriginals.1":"Original as captured or imported.","AdvancedDownload.Subtext.UnmodifiedOriginals.2":"Originals as captured or imported.","AdvancedDownload.Subtext.UnmodifiedOriginals.More":"Originals as captured or imported.","AdvancedDownload.Option.MostCompatible":"Most Compatible","AdvancedDownload.Subtext.MostCompatible":"Including edits.","AdvancedDownload.Option.PreserveGeo":"Include location information","AdvancedDownload.Button.Download":"Download","AdvancedDownload.Button.Cancel":"Cancel","AdvancedDownload.DisclosureArrowButton.Tooltip":"More download options","SharingSelectionMenu.Header.Title.Generic":"How would you like to share?","SharingSelectionMenu.Description":"Anyone with access to your shared photo link will be able to view the photos.","SharingSelectionMenu.SharingFlow.Mail":"Mail","SharingSelectionMenu.SharingFlow.Facebook":"Facebook","SharingSelectionMenu.SharingFlow.CopyLink":"Copy Link","Sidebar.Group.Title.LIBRARY":"Library","Sidebar.Group.Title.SHARED":"Shared","Sidebar.Group.Title.ALBUMS":"Albums","Sidebar.Group.Hide":"Hide","Sidebar.Group.Show":"Show","Sidebar.Button.Tooltip.Add":"Add an album or folder","Container.Title.MOMENTS":"Photos","Container.Title.PHOTOS":"All Photos","Container.Title.FAVORITES":"Favorites","Container.Title.LIVE":"Live Photos","Container.Title.EXPOSURE":"Long Exposure","Container.Title.PANORAMAS":"Panoramas","Container.Title.VIDEOS":"Videos","Container.Title.SLOMO":"Slo-mo","Container.Title.TIMELAPSE":"Time-lapse","Container.Title.DEPTH":"Portrait","Container.Title.BURSTS":"Bursts","Container.Title.SCREENSHOT":"Screenshots","Container.Title.ANIMATED":"Animated","Container.Title.HIDDEN":"Hidden","Container.Title.DELETED":"Recently Deleted","Container.Folder.NumberOfItems.0":"no items","Container.Folder.NumberOfItems.1":"1 item","Container.Folder.NumberOfItems.2":"2 items","Container.Folder.NumberOfItems.More":"%{count} items","Container.My.Albums.Header":"My Albums","Container.Media.Types.Header":"Media Types","EmptyLibrary.Message":"You don’t have any photos in iCloud.","EmptyLibrary.Advice":"Add photos and videos from your devices, or upload photos by dragging them into this window.","EmptyFolder.Message":"Empty Folder","EmptyFolder.Advice":"This folder contains no albums","EmptyAlbum.Message":"Empty Album","EmptyAlbum.Message.Button.Title":"Add Photos and Videos","EmptyAlbum.Selection.Message":"No Items Selected","EmptyAlbum.Selection.Advice":"Choose “All Items” and select photos and videos","UserAction.Favorite":"Add to Favorites","UserAction.RemoveFavorite":"Remove from Favorites","RecentlyDeleted.Title":"Recently Deleted","RecentlyDeleted.Explanation":"Photos and videos show the time remaining before deletion. After that time, items will be permanently deleted. This may take up to 40 days.","RecentlyDeleted.Action.Recover":"Recover","RecentlyDeleted.Action.Delete.0":"Delete All","RecentlyDeleted.Action.Delete.1":"Delete 1 Item","RecentlyDeleted.Action.Delete.2":"Delete 2 Items","RecentlyDeleted.Action.Delete.More":"Delete %{count} Items","RecentlyDeleted.DaysRemaining.1":"1 day left","RecentlyDeleted.DaysRemaining.2":"2 days left","RecentlyDeleted.DaysRemaining.More":"%{count} days left","RecentlyDeleted.HoursRemaining.1":"1 hour left","RecentlyDeleted.HoursRemaining.2":"2 hours left","RecentlyDeleted.HoursRemaining.More":"%{count} hours left","RecentlyDeleted.MinutesRemaining.0":"0 minutes left","RecentlyDeleted.MinutesRemaining.1":"1 minute left","RecentlyDeleted.MinutesRemaining.2":"2 minutes left","RecentlyDeleted.MinutesRemaining.More":"%{count} minutes left","Badge.HDR":"HDR","Badge.SDOF":"PORTRAIT","GENERIC.AssetCount.1":"1 Item","GENERIC.AssetCount.2":"2 Items","GENERIC.AssetCount.More":"%{count} Items","PANORAMAS.AssetCount.1":"1 Photo","PANORAMAS.AssetCount.2":"2 Photos","PANORAMAS.AssetCount.More":"%{count} Photos","SCREENSHOT.AssetCount.1":"1 Photo","SCREENSHOT.AssetCount.2":"2 Photos","SCREENSHOT.AssetCount.More":"%{count} Photos","BURSTS.AssetCount.1":"1 Burst","BURSTS.AssetCount.2":"2 Bursts","BURSTS.AssetCount.More":"%{count} Bursts","VIDEOS.AssetCount.1":"1 Video","VIDEOS.AssetCount.2":"2 Videos","VIDEOS.AssetCount.More":"%{count} Videos","SLOMO.AssetCount.1":"1 Video","SLOMO.AssetCount.2":"2 Videos","SLOMO.AssetCount.More":"%{count} Videos","TIMELAPSE.AssetCount.1":"1 Video","TIMELAPSE.AssetCount.2":"2 Videos","TIMELAPSE.AssetCount.More":"%{count} Videos","Alert.Share.ErrorTitle":"Cannot Share Photos","Alert.Share.RecordFailure":"Some of your selected photos could not be retrieved. Please try again soon.","Alert.Share.NetworkError":"Your photos could not be shared due to a server error. Please try again soon.","Alert.Share.GeneralError":"Your photos could not be shared due to an error. Please try again soon.","Alert.Burst.Message.1":"Would you like to keep the other photo in this burst?","Alert.Burst.Message.2":"Would you like to keep the other photos in this burst?","Alert.Burst.Message.More":"Would you like to keep the other %{count} photos in this burst?","Alert.Burst.KeepAll":"Keep Everything","Alert.Burst.KeepSelection":"Keep Only Selection","Alert.Burst.Selection.Error":"Your burst could not be modified due to an error. Please try again.","Alert.Selection.ErrorTitle":"Cannot Add Photos to Album","Alert.Selection.NetworkError":"Your photos could not be added to the album due to a server error. Please try again soon.","Banner.ExitedHyperion.Title":"iCloud Photos has been disabled.","Banner.ExitedHyperion.SingleDayRemaining.Description":"You have 1 day remaining to make sure you have a complete copy of your photos and videos.","Banner.ExitedHyperion.MultipleDaysRemaining.Description":"You have %{daysRemaining} days remaining to make sure you have a complete copy of your photos and videos.","Banner.ExitedHyperion.LinkText":"Learn More »","CMMReceiver.BackButton.Title":"Shared Photos","Asset.Caption.Untitled":"Untitled","AddToAlbum.Popover.Title.None":"Create","AddToAlbum.Popover.Title.1":"Add Item To","AddToAlbum.Popover.Title.More":"Add %{count} Items To","AddToAlbum.Popover.Title.Album":"Create Album","AddToAlbum.Popover.Title.Folder":"Create Folder","AddToAlbum.Album.DefaultTitle":"Untitled Album","AddToAlbum.Folder.DefaultTitle":"Untitled Folder","RecentlyDeleted.Empty.Message":"No Deleted Photos or Videos","RecentlyDeleted.Empty.Advice":"Your recently deleted photos and videos will be displayed here. It may take up to 40 days for permanent deletion.","RichLinkServer.ErrorPage.Title":"Shared Photos","RichLinkServer.Photo.AssetCount.1.WithExpiration":"1 Photo, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Photo.AssetCount.2.WithExpiration":"2 Photos, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Photo.AssetCount.More.WithExpiration":"%{count} Photos, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Video.AssetCount.1.WithExpiration":"1 Video, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Video.AssetCount.2.WithExpiration":"2 Videos, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Video.AssetCount.More.WithExpiration":"%{count} Videos, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Generic.AssetCount.1.WithExpiration":"1 Item, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Generic.AssetCount.2.WithExpiration":"2 Items, expires %{date:MMMM} %{date:d}, %{date:yyyy}","RichLinkServer.Generic.AssetCount.More.WithExpiration":"%{count} Items, expires %{date:MMMM} %{date:d}, %{date:yyyy}"}),n(1041);var u=n(130),d=n(318),h=n(166),p=n(201),f=h.a.extend({staticMembers:{storageKey:"p2"},valueRatchet_updateThrottlingDelay:h.a.numberProperty(0),bfg_alwaysForceSquareCells:h.a.booleanProperty(!1),bfgiv_disableFullDerivativeLoading:h.a.booleanProperty(!1),bfgiv_drawPaintCounts:h.a.booleanProperty(!1),bfgiv_allowUpscalingOfSmallMedias:h.a.booleanProperty(!1),bfgiv_disableRendering:h.a.booleanProperty(!1),bfgiv_drawMediaPKs:h.a.booleanProperty(!1),bfgiv_drawValueAtPropertyPath:h.a.stringProperty(""),bfgiv_turnRecentlyDeletedTimeRemainingRedBelowDays:h.a.numberProperty(3),bfgiv_proactivelyStoreDownsampledDerivatives:h.a.booleanProperty(!0),bfgiv_prettyPaintDelayFromIdle:h.a.numberProperty(p.a.sharedInstance.isWindows?1500:200),bfgiv_prettyPaintDuration:h.a.numberProperty(p.a.sharedInstance.isWindows?1e3:300),bfgiv_croppedPhotoCellFillDesire:h.a.numberProperty(0),bfgiv_minimumShorterAxisLength:h.a.numberProperty(30),bfgiv_enableVisualCropIndication:h.a.booleanProperty(!1),enableUploads:h.a.booleanProperty(!0),showMediaCaptionsInGrid:h.a.booleanProperty(!0),useTranslucency:h.a.booleanProperty(!1),logLevel:h.a.stringProperty({defaultValue:function(){return u.a.LOG_LEVEL_WARN}})}).create(),g=n(120),m=n(264),_=n(13),v=n(697),b=[],y=String;function w(e){y=e}function I(e,t,n){return s.d(e+T(t),D(n||E(t)))}function S(e){var t=0,n=1,i=arguments.length;b.length=i+t-n;for(var r=n,a=t;r<i;r++,a++)b[a]=arguments[r];for(var o=b,l=g.a(o[o.length-1])?o.pop():O.apply(void 0,o),c=D(l),u=e,d=0,h=o.length;d<h;d++)u+=T(o[d]);return s.d(u,c)}var C={count:0};function E(e){return m.a(e)||_.b("getCountObject() must be used with a numeric count parameter."),C.count=y(e),C}var A={};function O(){for(var e=arguments.length,t=A[e]||(A[e]={}),n=0;n<e;n++)t["count"+(n+1)]=arguments[n];return t}function T(e){switch(e){case 0:return".0";case 1:return".1";case 2:return".2";default:return".More"}}var M={};function D(e){for(var t in v.a(M),e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];M[t]=m.a(n)?y(n):n}return M}var P=n(40),L=n(42),R=globalThis.performance||globalThis.Date,x=R.now(),N=globalThis.P2Timing=P.a.extend({staticMembers:{LOAD:x,MAIN:0,_storage:{},record:function(e){"MAIN"===e&&0===N.MAIN?N.MAIN=R.now():this._storage[e]=R.now()},print:function(e){},printScriptExecution:function(){},getTimeAgainstMain:function(e){return t=N.MAIN,(this._storage[e]-t).toFixed(0);var t},report:function(e){this.record(e);var t="timeTo"+e,n=this.getTimeAgainstMain(e),i=L.n().feedbackService;i&&i.report(t,{count:n})}}}),F=n(199),V=n(7),k=n(55),B=n(20),j=n(387),U=n(51),G=n(283),H=n(15);function W(e,t,n){window.addEventListener("NonFatalError",n),window.addEventListener("FatalError",t),window.__startFilteringErrors(e)}function $(e,t,n){window.addEventListener("NonFatalUnhandledRejection",n),window.addEventListener("FatalUnhandledRejection",t),window.__startFilteringUnhandledRejections(e)}var z=n(740),K=n(127),q=n(298),Q=n(461),Y=n(1234),Z=n(98),X=n(139),J=n(195),ee=n(385),te=n(209),ne=n(313),ie=n(220),re=P.a.extend(ie.a,{_cookieString:null,_cookiesObj:null,getCookies:function(){var e=document.cookie;if(this._cookieString===e)return this._cookiesObj;var t={};if(this._cookieString=e,e)for(var n=e.split(";"),i=0,r=n.length;i<r;i++){var a=n[i].split("="),s=a.shift().trim(),o=a.join("=").trim();t[s]=o}return this._cookiesObj=t},getCookie:function(e){return this.getCookies()[e]},removeCookie:function(e,t,n){var i=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT";t&&(i=i+"; domain="+t),n&&(i=i+"; path="+n),document.cookie=i},removeCookies:function(e,t,n){var i,r;if(e instanceof Array)for(i=0,r=e.length;i<r;i++)this.removeCookie(e[i],t,n);else{var a=document.cookie.split(";");for(i=0,r=a.length;i<r;i++){var s=a[i],o=s.indexOf("="),l=o>-1?s.substr(0,o):s;e.test(l)&&this.removeCookie(l,t,n)}}},setCookie:function(e,t){var n=e+"="+t+";";document.cookie=n},staticMembers:{__QUALIFIED_CLASS_NAME__:"CookieManager"}}),ae=n(741),se=n(464),oe=n(397),le=n(383),ce=Object(le.b)("Application Driver",(function(e){e("Inactive"),e("Activating",(function(e){e("Init"),e("WaitAppPrepared"),e("Finalize")})),e("Active",(function(e){e("Ready")})),e("Deactivating"),e("FatalError")})),ue=ce.Inactive,de=ce.Activating,he=ce.Active,pe=ce.Deactivating,fe=ce.FatalError,ge=P.a.extend(oe.a,se.a,{application:H.d({readOnly:!0}),state:H.d({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(ce)}}),init:function(e){if(this.__s._$KS$init.call(this,e),!e||!e.application)throw _.b("Cannot create driver. Requires application");this.registerStateEnumGroup(ce,ue,fe)},activate:function(){this.transitionFromStateToState(ue,de.Init),this.didStartInitialActivation()},applicationDidPrepareForLoad:function(){this.transitionFromStateToState(de.WaitAppPrepared,de.Finalize),this.didStartFinalizingActivation()},didStartInitialActivation:function(){},didFinishInitialActivation:function(){this.transitionFromStateToState(de.Init,de.WaitAppPrepared),this.get("application").prepareForLoad()},didStartFinalizingActivation:function(){},didFinishFinalizingActivation:function(){this.transitionFromStateToState(de.Finalize,he.Ready),this.get("application").didBecomeLoaded()},didStartDeactivation:function(){this.setState(pe)},didFinishDeactivation:function(){this.setState(ue)},__superMap:{_$KS$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseApplicationDriver"}}),me=n(215),_e={windowApplicationDidInitialize:function(e){var t=me.a.resolveInstanceIfNeeded(e);me.a.windowApplicationDidInitialize(t)},passPendingWindowApplicationMessages:function(e){var t=me.a.resolveInstanceIfNeeded(e);me.a.passPendingWindowApplicationMessages(t)}},ve=n(93),be={windowApplicationHasInitialized:function(e,t,n){e=me.a.resolveInstanceIfNeeded(e);var i=ve.a.getPath("cloudOSApplication.driver");me.a.windowApplicationDidInitialize(e),n||me.a.passWindowApplicationMessage(e,"_applicationShouldInvokeMain",i.get("cloudOSMethodNames"),i.get("cloudOSState")),me.a.passPendingWindowApplicationMessages(e)},windowApplicationIsKnown:function(e){return e=me.a.resolveInstanceIfNeeded(e),me.a.windowApplicationIsRegistered(e)}},ye={mixinDependencies:[B.b],environment:null,showAppSwitcher:function(e){},showSpringBoard:function(){},showAccountSettings:function(){},performLogout:function(){},reload:function(){},showHelp:function(e){},recordStat:function(e,t){},recordPerfStat:function(e,t){},beginStat:function(e,t){},endStat:function(e,t){},showLocalNotification:function(e){},invokeMethodOnCloudOS:function(e){},handleApplicationCrash:function(e,t){},exit:function(e,t){},setAppBanner:function(e){},openIWorkFile:function(e){},openIWorkDocument:function(e,t,n){},getValidateToken:function(){},isReadyToTerminateDidChange:function(e){},setStartupUrl:function(e){},setStartupInfo:function(e){},requestReceived:function(e,t,n){},refreshQuotaData:U.a,requestMeCard:U.a,setRoute:function(e){},setAppPreferences:function(e){},setAccountPreference:function(e,t){},revalidateUser:function(){},getConformingTypes:function(e){},fetchIcon:function(e,t,n,i){},fetchBlankFolderIcon:function(e,t,n){},fetchBlankFileIcon:function(e,t,n){},sendLocalNotification:function(e,t,n,i){},didReceiveSpecialResponse:function(e,t,n){},loadCloudKitJS:function(e){},replaceCurrentApp:function(e){},fetchAppUrl:function(e,t){}},we=n(138),Ie=n(400),Se=n(748),Ce=n(535),Ee=P.a.extend(Ce.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseValidator"}}),Ae=Ee.extend({message:"Validation.InvalidPattern",pattern:Object(H.d)({type:RegExp,defaultValue:/.*/i}),validate:function(e){return this.get("pattern").test(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PatternValidator"}}),Oe=Ae.extend({message:"INVALID_URL_ERROR",pattern:/[a-zA-Z0-9]{1,256}:\/\/[a-zA-Z0-9\-./]{1,256}/i,staticMembers:{__QUALIFIED_CLASS_NAME__:"URLValidator"}}),Te=P.a.extend(Se.a,{urlString:H.d({defaultValue:"",validators:[Oe]}),requestProperties:{},staticMembers:{__QUALIFIED_CLASS_NAME__:"HostInfo"}}),Me=n(265),De=P.a.extend(B.b,{name:H.d(),url:V.b(),status:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ServiceInfo"}}),Pe=n(17),Le=[[4352,4607],[11904,12031],[12032,12255],[12288,12351],[12352,12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12800,13055],[13056,13311],[13312,19893],[19968,40959],[40960,42127],[42128,42191],[44032,55203],[63744,64255],[65072,65103]],Re=function(e){var t,n=Le;if(!e)return!1;for(var i=0,r=n.length;i<r;++i)if(e>=(t=n[i])[0]&&e<=t[1])return!0;return!1},xe=function(e){if(0===(e=e.trim()).length)return!1;for(var t=0,n=e.length-1;t<=n;)if(!Re(e.charCodeAt(t++))||!Re(e.charCodeAt(n--)))return!1;return!0};function Ne(e){var t,n,i=e.givenName,r=e.familyName,a=e.emailAddress,o=e.phoneNumber,l=e.nickname,c=e.companyName,u=l||i;return u&&r&&(n=xe(u)&&xe(r)?"Name.Display.NameIsCJK.FirstAndFamilyNames":"Name.Display.FirstAndFamilyNames",t=s.d(n,{firstName:u,familyName:r})),Fe(t)||(t=Fe(u)||Fe(r)||Fe(a)||Fe(o)||Fe(c)),t}function Fe(e){return e&&!/^\s*$/.test(e)?e:""}function Ve(e){return ke(e)||Be(e)}function ke(e){return/^([A-Z0-9\.\-\_\+])*([A-Z0-9\+\-\_])+\@[A-Z0-9]+([\-][A-Z0-9]+)*([\.][A-Z0-9\-]+){1,8}$/i.test(e)}function Be(e){return/^[0-9]{5,}$/.test(e)}function je(e){var t=je._phoneNumberRegex;if(!t){var n="0-9\\uff10-\\uff19\\u0660-\\u0669\\u06F0-\\u06F9\\u0966-\\u096F\\u09E6-\\u09FF\\u0E50-\\u0E59";je._phoneNumberRegexAllDigits=new RegExp("^s*\\+?(["+n+"]+)s*$","gi"),t=je._phoneNumberRegex=new RegExp("^s*([+\\(])?((["+n+"]+)([\\(\\)\\s\\-\\+\\.\\,\\#]{1,3}|x|ext))+(["+n+"]+)s*$","gi")}var i=je._phoneNumberRegexAllDigits;return t.lastIndex=0,i.lastIndex=0,t.test(e)||i.test(e)}function Ue(e){return e&&e.replace(/[^0-9]/g,"")}function Ge(e){for(var t=0,n=e&&e.length||0;t<n;++t){var i=e[t];if(i.isPrimary)return i}}var He=we.b("AppleIdEntryType",{PHONE_NUMBER:"PHONE_NUMBER",EMAIL:"EMAIL"}),We=P.a.extend(B.b,{staticMembers:{EMPTY_USER:null,statusCodes:{INACTIVE:0,FREE_QUALIFIED:2,FREE_NOT_QUALIFIED:3,LITE:4},__QUALIFIED_CLASS_NAME__:"User"},firstName:V.b(""),lastName:V.b(""),statusCode:V.b(),countryCode:V.b(),isChineseAccount:V.b({dependencies:["countryCode"],readOnly:!0,get:Object.assign((function(){return"CHN"===this.countryCode}),{__CW__getter:function(e,t,n,i){return"CHN"===i.internalGet(this,t[0+n])}})}),SafariBookmarksHasMigratedToCloudKit:!1,loadInfo:function(e){Pe.a.pause();for(var t=Object.keys(e),n=0,i=t.length;n<i;n++){var r=t[n];this.set(r,e[r])}Pe.a.resume()},isServiceActive:function(e){return!!ve.a.get("authBag").getServiceInfoFor(e)},displayName:V.b({dependencies:["firstName","lastName","displayablePrimaryAppleId"],readOnly:!0,get:Object.assign((function(){var e=this.get("appleIdEntries");if(!e)return Ne({givenName:this.firstName,familyName:this.lastName,emailAddress:this.appleId});var t=Ge(e),n=t&&t.type;return Ne({givenName:this.firstName,familyName:this.lastName,emailAddress:n===He.EMAIL.value?t.value:null,phoneNumber:n===He.PHONE_NUMBER.value?t.formattedValue:null})}),{__CW__getter:function(e,t,n,i){var r=this.get("appleIdEntries");if(!r)return Ne({givenName:i.internalGet(this,t[0+n]),familyName:i.internalGet(this,t[1+n]),emailAddress:this.appleId});var a=Ge(r),s=a&&a.type;return Ne({givenName:i.internalGet(this,t[0+n]),familyName:i.internalGet(this,t[1+n]),emailAddress:s===He.EMAIL.value?a.value:null,phoneNumber:s===He.PHONE_NUMBER.value?a.formattedValue:null})}})}),appleId:V.b({dependencies:["appleIdEntries"],set:function(e){this._appleId=e},get:Object.assign((function(){var e=this.get("appleIdEntries");if(!e)return this._appleId;var t=Ge(e);return t&&(t.type===He.PHONE_NUMBER.value?t.formattedValue:t.value)||""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return this._appleId;var a=Ge(r);return a&&(a.type===He.PHONE_NUMBER.value?a.formattedValue:a.value)||""}})}),normalizedPrimaryAppleId:V.b({dependencies:["appleIdEntries","appleId"],cacheable:!0,readOnly:!0,get:Object.assign((function(){var e=this.appleIdEntries;if(!e)return this.appleId;var t=Ge(e);return t&&(t.type===He.PHONE_NUMBER.value?t.canonicalValue:t.value)||""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return i.internalGet(this,t[1+n]);var a=Ge(r);return a&&(a.type===He.PHONE_NUMBER.value?a.canonicalValue:a.value)||""}})}),displayablePrimaryAppleId:V.b({dependencies:["appleIdEntries","appleId"],cacheable:!0,readOnly:!0,get:Object.assign((function(){var e=this.appleIdEntries;if(!e)return this.appleId;var t=Ge(e);return t&&(t.type===He.PHONE_NUMBER.value?t.formattedValue:t.value)||""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return i.internalGet(this,t[1+n]);var a=Ge(r);return a&&(a.type===He.PHONE_NUMBER.value?a.formattedValue:a.value)||""}})}),primaryAppleIdType:V.b({dependencies:["appleIdEntries"],readOnly:!0,cacheable:!0,get:Object.assign((function(){var e=this.appleIdEntries;if(!e){var t=this.normalizedPrimaryAppleId,n=void 0;return ke(t)?n=He.EMAIL:je(t)&&(n=He.PHONE_NUMBER),n}var i=Ge(e);return i&&He.getItemForValue(i.type)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r){var a=this.normalizedPrimaryAppleId,s=void 0;return ke(a)?s=He.EMAIL:je(a)&&(s=He.PHONE_NUMBER),s}var o=Ge(r);return o&&He.getItemForValue(o.type)}})}),isPrimaryAppleIdTypePhoneNumber:V.b({readOnly:!0,cacheable:!0,dependencies:["primaryAppleIdType"],get:Object.assign((function(){return this.primaryAppleIdType===He.PHONE_NUMBER}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===He.PHONE_NUMBER}})}),isPrimaryAppleIdTypeEmail:V.b({readOnly:!0,cacheable:!0,dependencies:["primaryAppleIdType"],get:Object.assign((function(){return this.primaryAppleIdType===He.EMAIL}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===He.EMAIL}})}),primaryEmail:V.b(null),appleIdAliases:V.b(null),appleIdAlias:V.b(null),iCloudAppleIdAlias:null,appleIdEntries:V.b(null),dsid:null,isMyEmailAddressOrPhoneNumber:function(e){return!!e&&(e=(e||"").toLowerCase(),!!this._appleIdEmailsLookupTable[e]||!!je(e)&&(e=Ue(e),!!this._appleIdPhoneNumbersLookupTable[e]))},_appleIdEmailsLookupTable:V.b({dependencies:["appleId","primaryEmail","appleIdAliases","appleIdEntries"],cacheable:!0,readOnly:!0,get:function(){return this._buildAppleIdLookupTable(He.EMAIL)}}),_appleIdPhoneNumbersLookupTable:V.b({dependencies:["appleId","primaryEmail","appleIdAliases","appleIdEntries"],cacheable:!0,readOnly:!0,get:function(){return this._buildAppleIdLookupTable(He.PHONE_NUMBER)}}),hasEmailAddress:V.b({dependencies:["_appleIdEmailsLookupTable"],cacheable:!0,readOnly:!0,get:Object.assign((function(){var e=this._appleIdEmailsLookupTable;return Object.keys(e).length>0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Object.keys(r).length>0}})}),_buildAppleIdLookupTable:function(e){var t,n,i={},r=this.appleIdEntries;if(r){for(t=0,n=r.length;t<n;++t){var a=r[t];e&&a.type!==e.value||(i[((a.type===He.PHONE_NUMBER.value?a.canonicalValue:a.value)||"").toLowerCase()]=!0)}return i}if(e===He.PHONE_NUMBER)return i;var s=this.appleId,o=this.primaryEmail,l=this.appleIdAliases;for(s&&(i[s.toLowerCase()]=!0),o&&(i[o.toLowerCase()]=!0),t=0,n=l&&l.length||0;t<n;++t){var c=l[t];c&&(i[c.toLowerCase()]=!0)}return i}});We.EMPTY_USER=We.create({firstName:"No",lastName:"User"});var $e=P.a.extend(B.b,{user:V.b(k.c(We)),clientInfo:H.d(),processAuthBag:function(e){if(e){var t=e.hasMinimumDeviceForPhotosWeb;void 0===t&&(t=!0),this.set("hasMinimumDeviceForPhotosWeb",t);var n=this.user;n.loadInfo(e.dsInfo),n.loadInfo(e.iCloudInfo),this.set("iCloudEnvironment",e.environment),this.set("isAppleInternal",!(!e.requestInfo||!e.requestInfo.isAppleInternal)),this.set("clientInfo",e.requestInfo),this.set("hsaTrustedBrowser",e.hsaTrustedBrowser),this.set("apps",e.apps),this.loadServicesInfo(e.webservices)}},apps:V.b(null),iCloudEnvironment:null,isAppleInternal:V.b(null),hsaTrustedBrowser:V.b(null),loadServicesInfo:function(e){var t,n,i;for(n in e||_.b("User.loadServicesInfo: `webservices` must be supplied"),t={},e)(i=Me.a(e[n])).name=n,t[n]=De.create(i);this.set("servicesInfo",t)},getServiceInfoFor:function(e){e||u.b.warn("User.getServiceInfoFor(): `serviceName` must be specified");var t=this.get("servicesInfo");return t?t[e]:null},getServiceUrlFor:function(e,t){var n,i=this.getServiceInfoFor(e),r=null;return i?(r=i.get("url")||null)||(n=ne.a("User.getServiceUrlFor(): Could not find the URL for \u201c%{name}\u201d",{name:e})):n=ne.a("User.getServiceUrlFor(): Could not find service information for \u201c%{name}\u201d",{name:e}),n&&(t?_.b(n):u.b.error(n)),r},servicesInfo:V.b(),hasMinimumDeviceForPhotosWeb:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AuthBag"}}),ze=P.a.extend(B.b,{timeStamp:V.b((new Date).getTime()),storageUsageByMedia:V.b(),totalStorageInBytes:V.b(),commerceStorageInBytes:V.b(),usedStorageInBytes:V.b(),compStorageInBytes:V.b(),overQuota:V.b(),paidQuota:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"QuotaInfo"}}),Ke=n(1356).a;Ke.rulesVersion=5;var qe=V.a.extend({cloudOSEnvironmentKey:null,processCloudOSValue:function(e,t){return e},clearUserState:function(e){return e},staticMembers:{__QUALIFIED_CLASS_NAME__:"EnvironmentProperty"}}),Qe=we.b("AuthenticationState",{NOT_AUTHENTICATED:0,PARTIALLY_AUTHENTICATED_HSA:1,AUTHENTICATED:2,PARTIALLY_AUTHENTICATED_MANAGED_APPLE_ID:3}),Ye=P.a.extend(B.b,{accountMenu:qe.create(),activeXFileVersion:qe.create(),authBag:qe.create({defaultValue:function(){return $e.create()},processCloudOSValue:function(e,t){return t.processAuthBag(e),t},clearUserState:function(){return $e.create()}}),clientId:qe.create(),sessionID:qe.create(),versions:qe.create(),currentlyActiveApplication:qe.create(),route:qe.create(),displayName:qe.create(),accountPreferences:qe.create(),appPreferences:qe.create(),appParameters:qe.create(),iCloudEnvironment:qe.create({cloudOSEnvironmentKey:"environment"}),hostname:qe.create(),isBeta:qe.create(),isDeveloper:qe.create(),isFuture:qe.create(),isCarry:qe.create(),isCarryUser:qe.create(),isCloudOS2:qe.create(),limitedExperienceMode:qe.create(),primaryInteractionMode:qe.create(),requestedStartupUrl:qe.create(),requestedStartupInfo:qe.create(),userAuthenticationState:qe.create(),userStatusCode:qe.create(),pushToken:qe.create(),defaultAssetHostname:qe.create(),useAdditionalTopLevelClassNamesProvidedByCloudOS:qe.create({defaultValue:!0}),sizeClass:qe.create(),visualViewport:qe.create(),isUserNotAuthenticated:V.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign((function(){return this.userAuthenticationState===Qe.NOT_AUTHENTICATED.value}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Qe.NOT_AUTHENTICATED.value}})}),isUserPartiallyAuthenticated:V.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign((function(){return this.userAuthenticationState===Qe.PARTIALLY_AUTHENTICATED_HSA.value}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Qe.PARTIALLY_AUTHENTICATED_HSA.value}})}),isUserAuthenticated:V.b({readOnly:!0,dependencies:["userAuthenticationState"],get:Object.assign((function(){return this.userAuthenticationState===Qe.AUTHENTICATED.value}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Qe.AUTHENTICATED.value}})}),isLiteAccount:V.b({readOnly:!0,dependencies:["userStatusCode"],get:Object.assign((function(){return 4===this.userStatusCode}),{__CW__getter:function(e,t,n,i){return 4===i.internalGet(this,t[0+n])}})}),userIsAuthenticated:V.b({readOnly:!0,dependencies:["isUserAuthenticated"],get:Object.assign((function(){return this.get("isUserAuthenticated")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),quotaData:qe.create({defaultValue:function(){return ze.create()},processCloudOSValue:function(e,t){return ze.create(e)},clearUserState:function(){return ze.create()}}),isUserOverQuota:V.b({readOnly:!0,dependencies:["quotaData"],get:Object.assign((function(){var e=this.quotaData;return e?e.get("overQuota"):null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.get("overQuota"):null}})}),_environmentProperties:null,initializeClass:function(){var e=this,t=arguments;e.__s._$1lX$initializeClass.apply(e,t);var n=this.getMetadataByType(qe),i=this._environmentProperties={};for(var r in n)if(n.hasOwnProperty(r)){var a=n[r];r=a.cloudOSEnvironmentKey||r,a.cloudOSEnvironmentKey=r,i[r]=a}},processCloudOSEnvironment:function(e){var t=this,n=Z.a.create();if(!e)return n.resolve();for(var i in e)e.hasOwnProperty(i)&&this._processCloudOSEnvironmentProperty(i,e[i]);return this._processRegionFormattingRules(e).then((function(){var i=e.additionalClassNamesForBody;i&&t._setupAdditionalClassNamesProvidedByCloudOS(i),n.resolve()})),n},_processRegionFormattingRules:function(e){var t=Z.a.create(),n=e.regionFormattingRules;if(n)if(e.regionFormattingRulesVersion===Ke.rulesVersion)u.b.info("RegionFormatter: registering CloudOS rules"),Ke.registerRegionFormat(n),t.resolve();else{var i=n.locale,r=e.regionFormattingRulesBaseUrl,a=this._getRegionFormattingHostInfo(r);u.b.info("RegionFormatter: version mismatch - loading new rules"),Ke.loadFormattingRules(a,i).then((function(){u.b.info("RegionFormatter: version mismatch - new rules loaded"),t.resolve()})).catch((function(e){_.b("Could not load default formatting rules (en-US)",e)}))}else t.resolve();return t},_processCloudOSEnvironmentProperty:function(e,t){var n=this._environmentProperties[e];if(n&&n.processCloudOSValue){e=n.key;var i=this.get(e),r=n.processCloudOSValue.call(this,t,i);Ie.a(this,e,r)}},_setupAdditionalClassNamesProvidedByCloudOS:function(e){if(this.useAdditionalTopLevelClassNamesProvidedByCloudOS&&e){var t=e.split(",");document.documentElement.classList.add(t)}},_getRegionFormattingHostInfo:function(e){var t=this.defaultAssetHostname;return e||(e="https://"+t+"/locales/"),Te.create({urlString:e+Ke.rulesVersion,requestProperties:{useCredentialsIfCrossOrigin:!1}})},clearUserState:function(){var e=this.getMetadataByType(qe);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.set(t,n.clearUserState(this.get(t)))}},__superMap:{_$1lX$initializeClass:"initializeClass"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Environment"}}),Ze=n(161),Xe=n(238),Je=n(208),et=n(552),tt=n(444),nt=tt.a.extend({init:function(e){this.__s._$2x$init.call(this,e),this._allRegistedReceivers=[],this._registeredReceivers={}},addTargetActionForOrigin:function(e,t,n){var i=this._registeredReceivers[n];i||(i=this._registeredReceivers[n]=[]);var r={target:e,action:t};i.push(r),this._allRegistedReceivers.push(r)},removeTargetActionForOrigin:function(e,t,n){var i=this._registeredReceivers[n];this._removeTargetActionFromArray(e,t,i),this._removeTargetActionFromArray(e,t,this._allRegistedReceivers)},getTargetActionsForOrigin:function(e){return"*"===e?this._allRegistedReceivers:this._registeredReceivers[e]||null},dispatchMessage:function(e){var t=e.origin,n=this.getTargetActionsForOrigin(t),i=n?n.length:0,r=!1;this.logTrace("dispatching message from origin "+t);for(var a=0;a<i;a++){var s=n[a],o=s.target,l=s.action;J.a(l)&&(l=o[l],Je.a(l)||_.b("Cannot dispath message. No method '"+l+"' for target",{channel:this,action:l,message:e})),this.logTrace("dispatching message to target "+o),l.call(o,e),r=!0}r||this.logTrace("No target-action pair for message")},_removeTargetActionFromArray:function(e,t,n){for(var i=n.length,r=null,a=0;a<i;a++){var s=n[a];if(s.target===e&&s.action===t){r=s;break}}r&&et.a(r,n)},__superMap:{_$2x$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCBaseInputChannel"}}),it=P.a.extend({data:null,origin:null,source:null,originalEvent:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCMessageEvent"}}),rt=nt.extend({init:function(e){this.__s._$3v$init.call(this,e),this._receivedMessageHandler=at.bind(this)},willOpen:function(){Ze.a(this.window,"message",this._receivedMessageHandler),this.didOpen()},willClose:function(){Xe.a(this.window,"message",this._receivedMessageHandler),this.didClose()},__superMap:{_$3v$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RPCInputChannel"}});function at(e){var t=e.data,n=e.origin,i=e.source;if(t&&n&&i){if(J.a(t))try{t=JSON.parse(t)}catch(a){return}var r=it.create({data:t,origin:n,originalEvent:e});r.set("source",i),this.dispatchMessage.call(this,r)}}var st=n(562),ot={"https://www.icloud.com":!0,"https://beta.icloud.com":!0,"https://future.icloud.com":!0,"https://carry.icloud.com":!0,"https://www.icloud.com.cn":!0},lt=window,ct=ce.Activating.Init.createSubstate("WaitingForCloudOSRunMessage"),ut=0,dt=1,ht=2,pt=3,ft=4,gt=ge.extend(ye,{_rpcCallbacks:k.c(Object),initiatedCloudKitJSLoading:!1,inputChannel:H.d({readOnly:!0}),outputChannel:H.d({readOnly:!0}),cloudOSMethodNames:null,cloudOSState:null,originForIO:null,environment:V.b(k.c(Ye)),init:function(e){var t=this,n=arguments;t.__s._$25O$init.apply(t,n),window.CloudOS=be,window.CK=_e,this._cosMessageHandlers={},this._cosPendingMessages=[];var i=this.application;this.setCloudMessageHandler("_applicationShouldInvokeMain",this,this._cosMessagePrepareApplicationForLoad),this.setCloudMessageHandler("_cloudOSStateChange",this,this._cosMessageCloudOSStateChange),this.setCloudMessageHandler("_clearUserState",this,this._cosMessageClearUserState),this.setCloudMessageHandler("didFetchStartup",this,this._cloudosDidFetchStartup),this.setCloudMessageHandler("applicationWillBecomeActive",i,i.willBecomeActive),this.setCloudMessageHandler("applicationDidBecomeActive",i,i.didBecomeActive),this.setCloudMessageHandler("applicationWillSuspend",i,i.willBecomeSuspended),this.setCloudMessageHandler("applicationDidSuspend",i,i.didBecomeSuspended),this.setCloudMessageHandler("applicationShouldRefresh",i,i.shouldRefresh),this.setCloudMessageHandler("receiveMeCard",i,i.receiveMeCard),this.setCloudMessageHandler("userDidRevalidate",i,i.userDidRevalidate),this.setCloudMessageHandler("quotaDataDidChange",i,i.quotaDataDidChange),this.setCloudMessageHandler("quotaDataFailedToLoad",i,i.quotaDataFailedToLoad),this.setCloudMessageHandler("accountPreferencesDidChange",i,i.accountPreferencesDidChange),this.setCloudMessageHandler("didReceiveNotification",i,i.didReceiveNotification),this.setCloudMessageHandler("willResolveCKShortGUID",i,i.willResolveCKShortGUID),this.setCloudMessageHandler("didResolveCKShortGUID",i,i.didResolveCKShortGUID),this.setCloudMessageHandler("didFailToResolveCKShortGUID",i,i.didFailToResolveCKShortGUID),this.setCloudMessageHandler("didResolveCKShortGUIDWithoutAcceptance",i,i.didResolveCKShortGUIDWithoutAcceptance),this.setCloudMessageHandler("ckShortGUIDDidChange",i,i.ckShortGUIDDidChange),this.setCloudMessageHandler("didFetchAppUrl",i,i.didFetchAppUrl),this.setCloudMessageHandler("miniSpringboardDismissed",i,i.miniSpringboardDismissed),this.setCloudMessageHandler("_sleep",i,i._sleep),this.setCloudMessageHandler("_wake",i,i._wake),this.setCloudMessageHandler("_hasReceivedFocus",i,i._hasReceivedFocus),this.setCloudMessageHandler("_mouseMove",i,i._mouseMove),this.setCloudMessageHandler("_mouseUp",i,i._mouseUp),this.setCloudMessageHandler("adjustLayout",i,i.adjustLayout)},loadInputChannelForWindow:function(e){var t=window["cosk.system.applicationDriver.loadInputChannelDelegate"];return t?(this.logTrace("using delegate to load input channel"),t(this,e)):rt.create({window:e})},loadOutputChannelForWindowWithOrigin:function(e,t){var n=window["cosk.system.applicationDriver.loadOutputChannelDelegate"];return n?(this.logTrace("using delegate to load output channel"),n(this,e,this.originForIO)):st.a.create({window:e,origin:this.originForIO})},setCloudMessageHandler:function(e,t,n){this._cosMessageHandlers[e]={target:t,action:n}},didStartInitialActivation:function(){var e=this,t=arguments;e.__s._$3AP$didStartInitialActivation.apply(e,t);var n,i=this._getInputChannelWindow();for(n in ot){var r=ot[n]=this.loadInputChannelForWindow(i);r.addTargetActionForOrigin(this,"_handleIncomingCloudOSMessage",n),r.open()}this.logTrace("waiting for initial CloudOS message"),this.setState(ct)},didStartFinalizingActivation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=arguments;t.__s._$3Jy$didStartFinalizingActivation.apply(t,n);var i,r=this._cosMessageHandlers,a=this._cosPendingMessages;a.forEach((function(e){var t=e.methodName,n=e.args,i=r[t],a=i.target;i.action.apply(a,n)})),this._cosPendingMessages=[],e||(i={windowPerfStats:_t()}),this._sendCloudOSMessage("applicationIsReady",i),this.didFinishFinalizingActivation()},isReadyToTerminateDidChange:function(e){this._sendCloudOSMessage("isReadyToTerminateDidChange",e)},sendCloudOSMessage:function(e){e||(e={}),e.isCloudOSMessage||(e.isCloudOSMessage=!0),e.appName||(e.appName=this.application.name);var t=Y.a();e.id=t;var n=this._rpcCallbacks,i=Z.a.create();n[t]=i,X.a((function(e){var t=new Error("Timed out.");e.reject(t)}),15e3,i);var r=this.outputChannel;return r?r.sendMessage(e):u.b.warn("Could not send message.",e),i},_handleIncomingCloudOSMessage:function(e){var t=e.data;if(!this.originForIO){var n;for(n in ot)n!==e.origin?(ot[n].close(),ot[n]=!1):this._inputChannel=ot[n];this.originForIO=e.origin}if(t.isCloudOSMessage){if(!this._outputChannel){var i=this.getIOChannelOrigin(),r=this._outputChannel=this.loadOutputChannelForWindowWithOrigin(e.source,i);this.logTrace("loaded output channel"),r.open()}var a=t.methodName,s=t.args;this.logTrace("Received CloudOS message "+a),this._dispatchCloudOSMessageForMethodName(a,s)}else u.b.debug("ApplicationDriver._handleIncomingCloudOSMessage: Received message not from CloudOS, ignoring.")},_dispatchCloudOSMessageForMethodName:function(e,t){var n=this,i=t[0],r=this._rpcCallbacks,a=r[i];if(a){delete r[i],this._rpcCallbacks=r,t.shift();var s=t.shift();try{a.resolve(s)}catch(g){this.handleApplicationCrash({error:g.message||""+g},u.b.stringifyRecordedLogMessages())}}else{var o=this._cosMessageHandlers[e];if(o){var l=o.target,c=o.action,d=!!l[c],h=J.a(c)?l[c]:c,p=function(e){n.handleApplicationCrash({error:e.message||""+e,action:c.toString(),isMethod:d},u.b.stringifyRecordedLogMessages())};try{var f=h.apply(l,t);f&&f.catch&&f.catch(p)}catch(g){p(g)}}else u.b.info(this+" No handler for CloudOS message "+e)}},_sendCloudOSMessage:function(e){this.logTrace("sending CloudOS message "+e);var t=ee.a(arguments,1),n=this._createMessageForCloudOS(e,t),i=this.outputChannel;i?i.sendMessage(n):u.b.warn("Could not send message. "+n)},_sendCloudOSMessageWithPromise:function(e){this.logTrace("sending CloudOS message with promise "+e);var t=ee.a(arguments,1),n=this._createMessageForCloudOS(e,t);return this.sendCloudOSMessage(n)},_createMessageForCloudOS:function(e,t){return{isCloudOSMessage:!0,methodName:e,appName:this.application.name,args:t,buildNumber:window.__CW_BUILD_INFO.buildNumber,masteringNumber:window.__CW_BUILD_INFO.masteringNumber}},getIOChannelOrigin:function(){return window["cosk.system.applicationDriver.ioChannelOrigin"]||this.originForIO},_getInputChannelWindow:function(){return window["cosk.system.applicationDriver.inputChannelWindow"]||lt},_cosMessagePrepareApplicationForLoad:function(e,t,n,i){var r=this;return this.fatalErrorIfNotInState(ct),this.cloudOSMethodNames=e,this.cloudOSState=t,this.environment.processCloudOSEnvironment(t).then((function(){window.addEventListener("unload",(function(){r.appWillUnload()})),r.didFinishInitialActivation()}))},_cosMessageCloudOSStateChange:function(e){var t=this.environment;this._checkIfAppPreferencesChanged(e),t.processCloudOSEnvironment(e)},_cosMessageClearUserState:function(){this.environment.clearUserState()},_cloudosDidFetchStartup:function(e,t,n){var i=this.state,r=this.application;if(i.fullValue>=ce.Activating.Finalize.fullValue){var a=r.didFetchStartup;a&&a.apply(r,[e,t,n])}else this._cosPendingMessages.push({methodName:"didFetchStartup",args:[e,t,n]})},_checkIfAppPreferencesChanged:function(e){var t,n=e.appPreferences,i=this.application;if(n)for(t in n)t===i.get("name")&&i.appPreferencesDidChange()},showAppSwitcher:function(e){e||(e=mt),this._sendCloudOSMessage("showAppSwitcher",{top:e.get("top"),left:e.get("left"),width:e.get("width"),height:e.get("height")})},showSpringBoard:function(){this._sendCloudOSMessage("showSpringBoard")},showAccountSettings:function(){this._sendCloudOSMessage("showAccountSettings")},performLogout:function(){this._sendCloudOSMessage("performLogout"),this.get("application").willBecomeUnloaded()},reload:function(){this._sendCloudOSMessage("reload"),this.get("application").willBecomeUnloaded()},appWillUnload:function(){var e=u.b.stringifyRecordedLogMessages();this._sendCloudOSMessage("appWillUnload",e)},recordStat:function(e,t){this._sendCloudOSMessage("recordStat",e,t)},recordPerfStat:function(e,t){this._sendCloudOSMessage("recordPerfStat",e,t)},requestSent:function(){this._sendCloudOSMessage("requestSent")},requestReceived:function(e,t,n,i){this._sendCloudOSMessage("requestReceived",e,t,n,i)},beginStat:function(e,t){this._sendCloudOSMessage("beginStat",e,t)},endStat:function(e,t){this._sendCloudOSMessage("endStat",e,t)},invokeMethodOnCloudOS:function(e){this._sendCloudOSMessage.apply(this,arguments)},handleApplicationCrash:function(e,t){var n=ve.a.authBag,i=ve.a.currentUser,r={};r.applicationName=ve.a.cloudOSApplication.name,r.type="exception",r.buildNumber=__CW_BUILD_INFO.buildNumber,r.masteringNumber=__CW_BUILD_INFO.masteringNumber,r.locale=__CW_BUILD_INFO.locale,r.environment=n.get("iCloudEnvironment"),r.isFatal=!0,r.time=new Date+"        ("+Date.now()+")",r.host=window.location.host,r.userAgent=navigator.userAgent+"",i&&(r.dsid=i.dsid),Object.assign(r,e),this._sendCloudOSMessage("handleApplicationCrash",r,t)},exit:function(e,t){this.get("state")!==ce.Deactivating&&(this._sendCloudOSMessage("exit",e,t),this.get("application").willBecomeUnloaded())},showHelp:function(e){var t,n=ve.a.currentUser.statusCode===We.statusCodes.LITE,i=s.c().toLowerCase();t="ca-es"===i?"es-es/":"vi-vi"===i?"vi-vn/":"en-us"!==i?i+"/":"";var r=te.a.sharedInstance.isChrome?705:675;e||(e="welcome");var a="http://support.apple.com/"+t+"guide/"+(n?"icloud-web-only":"icloud")+"/"+e+"/";this.recordStat("helpButtonClicked"),window.open(a,"help","height="+r+",width=875,location=0,status=0,scrollbars=0")},showAccountMenu:function(e){this._sendCloudOSMessage("showAccountMenu",e)},setAppBanner:function(e){var t=this.application;this._sendCloudOSMessage("setAppBanner",e,t.name)},openIWorkFile:function(e){var t=e.appName,n=this.environment.defaultAssetHostname;t=t.replace(/-tef$/,"");var i,r=e.sharingToken,a=e.zone,s=e.documentId,o=ve.a.currentUser.dsid;return r?i=ne.a("//%{defaultAssetHostname}/%{appName}/%{sharingToken}",{defaultAssetHostname:n,appName:t,sharingToken:r}):s&&(i=ne.a("//%{defaultAssetHostname}/%{appName}/docws:%{dsid}:%{zone}:%{docId}",{defaultAssetHostname:n,appName:t,dsid:o,zone:a,docId:s})),window.open(i,"_blank")},getValidateToken:function(){return re.create().getCookie("X-APPLE-WEBAUTH-VALIDATE")},setStartupUrl:function(e){this._sendCloudOSMessage("setStartupUrl",e),this.environment.requestedStartupUrl=e},setStartupInfo:function(e){this._sendCloudOSMessage("setStartupInfo",e),this.environment.requestedStartupInfo=e},refreshQuotaData:function(){this._sendCloudOSMessage("refreshQuotaData")},fetchIcon:function(e,t,n,i){return n||(n=p.a.sharedInstance.devicePixelRatio),this._sendCloudOSMessageWithPromise("fetchIcon",e,t,n,i)},getConformingTypes:function(e){return this._sendCloudOSMessageWithPromise("getConformingTypes",e)},fetchBlankFolderIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.folder",e,t,n)},fetchBlankFileIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.item",e,t,n)},requestMeCard:function(){this._sendCloudOSMessage("requestMeCard")},setRoute:function(e){this._sendCloudOSMessage("setRoute",e)},setTitle:function(e){this._sendCloudOSMessage("setTitle",e)},openIWorkDocument:function(e,t,n){var i={isCloudOSMessage:!0,methodName:"openFromSource",isWindowApplicationMessage:!0,args:{fileName:e,url:t,source:this.getPath("application.name")}},r="/iw/#open_from_source/"+n,a=me.a.openWindowApplication(r,"_blank");me.a.passWindowApplicationMessage(a,"openFromSource",i.args)},setAppPreferences:function(e){this._sendCloudOSMessage("setAppPreferences",e)},setAccountPreference:function(e,t){this._sendCloudOSMessage("setAccountPreference",e,t)},revalidateUser:function(){return this._sendCloudOSMessageWithPromise("revalidateUser")},didReceiveSpecialResponse:function(e,t,n){this._sendCloudOSMessage("didReceiveSpecialResponse",e,t,n)},sendLocalNotification:function(e,t,n,i){this._sendCloudOSMessage("sendLocalNotification",e,t,n,i)},loadCloudKitJS:function(e){var t=this.initiatedCloudKitJSLoading;if(!window.CloudKit&&!t){var n=e||ve.a.environment.versions.cloudkitjs,i="cdn.apple-cloudkit.com";ve.a.environment.isCarry&&(i="carry.icloud.com");var r="https://"+i+"/ck/"+n+"/cloudkit.js",a=document.createElement("script");a.setAttribute("src",r),document.head.appendChild(a),this.initiatedCloudKitJSLoading=!0}},isHostReachable:function(e){var t=j.a.create(e);return t.pathname="/blank.png",ae.a.create({url:t}).send()},replaceCurrentApp:function(e){this._sendCloudOSMessage("replaceCurrentApp",e)},fetchAppUrl:function(e,t){this._sendCloudOSMessage("fetchAppUrl",e,t)},__superMap:{_$25O$init:"init",_$3AP$didStartInitialActivation:"didStartInitialActivation",_$3Jy$didStartFinalizingActivation:"didStartFinalizingActivation"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationDriver"}}),mt={top:0,left:0,width:0,height:0,get:function(e){return this[e]}};function _t(){var e={};if(window.performance&&window.performance.timing){var t=window.performance.timing,n=t.navigationStart,i=t.domainLookupStart,r=t.domainLookupEnd,a=t.connectStart,s=t.connectEnd,o=t.secureConnectionStart,l=t.fetchStart,c=t.requestStart,u=t.responseStart,d=t.responseEnd,h=t.loadEventStart,p=t.loadEventEnd,f=t.domLoading,g=t.domInteractive,m=t.domContentLoadedEventStart;e={redirectTime:l-n,appCacheTime:i-l,dnsLookupTime:r-i,tcpTime:s-a,tlsTime:o>0?s-o:0,fetchTime:d-l,requestTime:u-s,totalDocumentRequestTime:d-c,documentDownloadTime:d-u,processingTime:h-f,timeToFirstByteOfDocument:u-c,timeToLoadDOMContent:t.domContentLoadedEventEnd-m,timeBeforeUserCanInteract:g-f,totalPageLoadTime:p-n}}return e}var vt=n(541);Error.stackTraceLimit=1/0;var bt=P.a.extend({init:function(){var e=this,t=arguments;e.__s._$64$init.apply(e,t)},error:null,handleException:function(){var e=this.get("_errorReportRequestBody");this.createModifiedErrorBodyBeforeSend&&(e=this.createModifiedErrorBodyBeforeSend(e)),ve.a.get("cloudOSService").handleApplicationCrash(e,u.b.stringifyRecordedLogMessages())},createModifiedErrorBodyBeforeSend:null,_errorReportRequestBody:H.d({get:function(){var e=this.get("error"),t={};return t.error=e.message||""+e,t.errorContext=vt.a(e.context),t.stack=this._truncateStack(e.stack),t.line=this._getErrorLineNumber(e),t}}),_truncateStack:function(e){if(!e)return e;var t=(e=e.trim()).split("\n"),n=t.length;if(n<=501)return e;var i=n-400-100;return t.splice(400,i,"... "+i+" lines truncated ..."),t.join("\n")},_getErrorLineNumber:function(e){var t=e.lineNumber||e.line;if(!t)try{var n=e.stack.split("\n")[1].split(":");t=n[n.length-2]}catch(i){t="Unknown"}return t},__superMap:{_$64$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FatalExceptionHandler"}}),yt=n(279),wt=yt.a.extend({bodyElement:window.document.body,action:function(){var e=p.a.sharedInstance,t=e.osMajorVersion,n=e.osMinorVersion;if(e.isMac){if(t<10||n<14)return}else{if(!e.isiOS)return;if(t<12)return}this.bodyElement.setAttribute("apple-system-font-capable",!0)},staticMembers:{__QUALIFIED_CLASS_NAME__:"FontCapabilityInitializer"}});function It(e,t){var n;if(!(window&&window.parent&&window===window.parent||!window.parent.postMessage))try{n=e&&e.name?e.name:window.location.pathname.match(/applications\/(.*?)\/current/)[1];var i=globalThis.__CW_BUILD_INFO,r={appName:n,buildNumber:i.buildNumber,masteringNumber:i.masteringNumber,args:t,isCloudOSMessage:!0,methodName:"recordApplicationMessage"};window.parent.postMessage(JSON.stringify(r),"*")}catch(a){}}var St=["icloud\\.developer\\.apple","icloud"],Ct="("+St.join("|")+")\\.com.*\\/index\\.html",Et="("+St.join("|")+")\\.com.*\\/main\\.js",At=new RegExp(Ct),Ot=new RegExp(Et);function Tt(e){var t=e.detail,n=t.message,i=t.filename,r=t.lineno,a=t.colno,s=t.error;return{error:s&&s.message?s.message:n,url:i,lineNumber:r,columnNumber:a,stack:s?s.stack:"not available",wasLoggedAt:s?s.wasLoggedToCloudOSAt:"no error obj"}}var Mt=we.b("SizeClass",{COMPACT:"COMPACT",REGULAR:"REGULAR"}),Dt="("+["icloud\\.developer\\.apple","icloud"].join("|")+")\\.com.*\\/main\\.js",Pt=new RegExp(Dt);function Lt(e){var t=(e.detail.nativeEvent.reason||{}).stack;if("string"!==typeof t)return{error:"unknown"};var n=t.split("\n"),i=n.length>1?n[0]:n[0].substring(0,80),r=(n[1]||n[0]).match(/at (http.*icloud\.com.*\/main\.js):([0-9]+):([0-9]+)/);return r?{error:i,url:r[1],lineNumber:r[2],columnNumber:r[3],stack:t}:{error:i,stack:t}}var Rt=Object(le.b)("CloudOS Application",(function(e){e("NotLoaded"),e("Loading",(function(e){e("Init"),e("Prepare"),e("Finalize")})),e("Loaded",(function(e){e("Prepared"),e("Activating"),e("Active"),e("Suspending"),e("Suspended")})),e("Unloading"),e("FatalError")})),xt=Rt.NotLoaded,Nt=Rt.Loading,Ft=Rt.Loaded,Vt=Rt.Unloading,kt=Rt.FatalError,Bt=G.a.extend(oe.a,se.a,{name:V.b({readOnly:!0}),cloudOSState:V.b({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(Rt)}}),driver:H.d({readOnly:!0,get:function(){var e=this._driver;return e||(e=this._driver=this.loadDriver())||_.b("Error loading cloud OS application driver."),e}}),cloudOSService:V.b({readOnly:!0,strong:!0,get:function(){var e=this._cloudOSService;return e||(e=this._cloudOSService=this.loadCloudOSService())||_.b("Error loading cloud OS service"),e}}),isBeta:H.d({readOnly:!0,get:function(){return"beta.icloud.com"===window.location.host}}),isCarry:H.d({readOnly:!0,get:function(){return"carry.icloud.com"===window.location.host}}),isFuture:H.d({readOnly:!0,get:function(){return"future.icloud.com"===window.location.host}}),errorFilter:function(e){var t=e.filename;if(!t||At.test(t)){var n=e.error.stack;if(n){var i=n.split("\n");t=i[1]||i[0]}}return Ot.test(t)},fatalErrorHandler:function(e){var t=Tt(e);t.isFatal=!0,It(this,["OnFatalError",t]);var n=e.detail.error,i=d.a();i.exceptionHandler(n),i.exceptionWasHandled=!0},nonFatalErrorHandler:function(e){var t=Tt(e);t.isFatal=!1,It(this,["OnNonFatalError",t])},unhandledRejectionFilter:function(e){var t=e.reason;if(t){var n,i=t.stack,r=t.sourceURL;if(r)n=r;else if(i){var a=i.split("\n");n=a[1]||a[0]}return Pt.test(n)}return!1},fatalUnhandledRejectionHandler:function(e){var t=Lt(e);t.isFatal=!0,It(this,["OnFatalUnhandledRejection",t])},nonFatalUnhandledRejectionHandler:function(e){var t=Lt(e);t.isFatal=!1,It(this,["OnNonFatalUnhandledRejection",t])},init:function(e){W(this.errorFilter,this.fatalErrorHandler.bind(this),this.nonFatalErrorHandler.bind(this)),$(this.unhandledRejectionFilter,this.fatalUnhandledRejectionHandler.bind(this),this.nonFatalUnhandledRejectionHandler.bind(this)),this.redirectToCloudOSIfNeeded(),e.name||_.b("Cannot create application. Requires a name"),this.registerStateEnumGroup(Rt,xt,kt),this.__s._$19h$init.call(this,e),u.b.outputMessagePrefix=this.get("capitalizedName")+":  ",ve.a.set("cloudOSApplication",this),this.Initializers.push(wt)},capitalizedName:V.b({dependencies:["name"],readOnly:!0,get:Object.assign((function(){var e=this.name;return e&&(e="i"!==e.charAt(0)?z.a(e):"i"+z.a(e.substring(1))),e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&(r="i"!==r.charAt(0)?z.a(r):"i"+z.a(r.substring(1))),r}})}),loadDriver:function(){var e=window["cosk.application.loadDriverDelegate"];return e?(this.logTrace("using delegate to load driver"),e(this)):gt.create({application:this})},loadCloudOSService:function(){var e=window["cosk.application.loadCloudOSServiceDelegate"];return e?(this.logTrace("using delegate to load CloudOS service"),e(this)):this.get("driver")},load:function(){this.transitionFromStateToState(xt,Nt.Init),this.get("driver").activate()},prepareForLoad:function(){this.transitionFromStateToState(Nt.Init,Nt.Prepare)},didPrepareForLoad:function(){this.transitionFromStateToState(Nt.Prepare,Nt.Finalize),this.get("driver").applicationDidPrepareForLoad()},didBecomeLoaded:function(){this.transitionFromStateToState(Nt.Finalize,Ft.Prepared)},willBecomeActive:function(){this.fatalErrorIfNotInState(Ft.Prepared,Ft.Suspended),this.setState(Ft.Activating)},didBecomeActive:function(){this.transitionFromStateToState(Ft.Activating,Ft.Active)},willBecomeSuspended:function(){this.transitionFromStateToState(Ft.Active,Ft.Suspending)},didBecomeSuspended:function(){this.transitionFromStateToState(Ft.Suspending,Ft.Suspended)},willBecomeUnloaded:function(){this.setState(Vt),this.get("driver").didStartDeactivation()},didBecomeUnloaded:function(){this.transitionFromStateToState(Vt,xt),this.get("driver").didFinishDeactivation()},didFetchStartup:function(e,t,n){},quotaDataDidChange:U.a,quotaDataFailedToLoad:U.a,receiveMeCard:U.a,didReceiveNotification:U.a,isReadyToTerminate:V.b(!0),setIsReadyToTerminateBlock:function(e){K.a(e)||_.b("You must call setIsReadyToTerminateBlock with an identifying token.",this);var t=this._suddenTerminationBlockTokenSet;t||(t=this._suddenTerminationBlockTokenSet=new Set),t.add(e),this.isReadyToTerminate=!1},removeIsReadyToTerminateBlock:function(e){K.a(e)||_.b("You must call removeIsReadyToTerminateBlock with an identifying token.",this);var t=this._suddenTerminationBlockTokenSet;t||(t=this._suddenTerminationBlockTokenSet=new Set),t.delete(e),0===t.size&&(this.isReadyToTerminate=!0)},_suddenTerminationBlockTokenSet:null,shouldRefresh:function(){},toString:function(){return"["+q.a(this)+": "+this._name+"]"},fatalExceptionHandlerClass:bt,handleException:function(e){var t=this,n=arguments;t.__s._$3EI$handleException.apply(t,n);var i=this.fatalExceptionHandlerClass.create({error:e});i.handleException()},_isReadyToTerminateDidChange:B.g("isReadyToTerminate",(function(e){this._isReadyToTerminate=e;var t=this.get("cloudOSService");t&&t.isReadyToTerminateDidChange(e)})),transitionFromStateToState:function(){var e=this,t=arguments;e.__s._$3P0$transitionFromStateToState.apply(e,t),this.propertyChanged("cloudOSState")},setState:function(){var e=this,t=arguments;e.__s._$3QY$setState.apply(e,t),this.propertyChanged("cloudOSState")},redirectToCloudOSIfNeeded:function(){var e=window.location.pathname;if(window===window.top&&"/"!==e){var t=e.match(/\/applications\/(.*?)\//);t&&t[1]&&(window.location="https://"+window.location.hostname+"/#"+t[1])}},appPreferencesDidChange:U.a,accountPreferencesDidChange:U.a,userDidRevalidate:U.a,didFetchAppUrl:U.a,willResolveCKShortGUID:U.a,didResolveCKShortGUID:U.a,didFailToResolveCKShortGUID:U.a,didResolveCKShortGUIDWithoutAcceptance:U.a,ckShortGUIDDidChange:U.a,miniSpringboardDismissed:U.a,adjustLayout:function(e){this._sizeClasses=e},_sizeClasses:V.b({type:"hash",set:function(e,t){return Q.a(t,e)?t:e}}),sizeClassHorizontal:V.b({dependencies:["_sizeClasses"],strong:!0,type:Mt,readOnly:!0,get:Object.assign((function(){return Mt.getItemForValue(this._sizeClasses&&this._sizeClasses.horizontal)||Mt.REGULAR}),{__CW__getter:function(e,t,n,i){return Mt.getItemForValue(i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).horizontal)||Mt.REGULAR}})}),sizeClassVertical:V.b({dependencies:["_sizeClasses"],strong:!0,type:Mt,readOnly:!0,get:Object.assign((function(){return Mt.getItemForValue(this._sizeClasses&&this._sizeClasses.vertical)||Mt.REGULAR}),{__CW__getter:function(e,t,n,i){return Mt.getItemForValue(i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).vertical)||Mt.REGULAR}})}),_sleep:U.a,_wake:U.a,_hasReceivedFocus:U.a,_mouseMove:U.a,_mouseUp:U.a,__superMap:{_$19h$init:"init",_$3EI$handleException:"handleException",_$3P0$transitionFromStateToState:"transitionFromStateToState",_$3QY$setState:"setState"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Application"}}),jt=n(65),Ut=we.b("CPLErrorTypes",{INDEXING_STATE_ERROR:"IndexingStateError",NO_ZONES:"NoZones"}),Gt=we.b("CPLIndexingStates",{FINISHED:"FINISHED",RUNNING:"RUNNING",FAILED:"FAILED",UNKNOWN:"UNKNOWN"}),Ht=n(360),Wt=n(330),$t=we.b("CPLChangesetModes",{NONE:"NONE",POLL:"POLL",PUSH:"PUSH",CLOUDKIT_PUSH:"CLOUDKIT_PUSH"}),zt=n(277),Kt=n(207),qt=n(156),Qt=n(133),Yt=l.Reader,Zt=l.Writer,Xt=l.util,Jt=l.roots.default||(l.roots.default={}),en=Jt.CPLMomentSharePreviewData=function(){function e(e){if(this.previewImageData=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.previewImageData=Xt.emptyArray,e.prototype.keyAssetIdentifier="",e.prototype.cropRectString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Zt.create()),null!=e.previewImageData&&e.previewImageData.length)for(var n=0;n<e.previewImageData.length;++n)t.uint32(10).bytes(e.previewImageData[n]);return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&t.uint32(18).string(e.keyAssetIdentifier),null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&t.uint32(26).string(e.cropRectString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Yt||(e=Yt.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new Jt.CPLMomentSharePreviewData;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.previewImageData&&i.previewImageData.length||(i.previewImageData=[]),i.previewImageData.push(e.bytes());break;case 2:i.keyAssetIdentifier=e.string();break;case 3:i.cropRectString=e.string();break;default:e.skipType(7&r)}}return i},e.decodeDelimited=function(e){return e instanceof Yt||(e=new Yt(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.previewImageData&&e.hasOwnProperty("previewImageData")){if(!Array.isArray(e.previewImageData))return"previewImageData: array expected";for(var t=0;t<e.previewImageData.length;++t)if(!(e.previewImageData[t]&&"number"===typeof e.previewImageData[t].length||Xt.isString(e.previewImageData[t])))return"previewImageData: buffer[] expected"}return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&!Xt.isString(e.keyAssetIdentifier)?"keyAssetIdentifier: string expected":null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&!Xt.isString(e.cropRectString)?"cropRectString: string expected":null},e.fromObject=function(e){if(e instanceof Jt.CPLMomentSharePreviewData)return e;var t=new Jt.CPLMomentSharePreviewData;if(e.previewImageData){if(!Array.isArray(e.previewImageData))throw new TypeError(".CPLMomentSharePreviewData.previewImageData: array expected");t.previewImageData=[];for(var n=0;n<e.previewImageData.length;++n)"string"===typeof e.previewImageData[n]?Xt.base64.decode(e.previewImageData[n],t.previewImageData[n]=Xt.newBuffer(Xt.base64.length(e.previewImageData[n])),0):e.previewImageData[n].length&&(t.previewImageData[n]=e.previewImageData[n])}return null!=e.keyAssetIdentifier&&(t.keyAssetIdentifier=String(e.keyAssetIdentifier)),null!=e.cropRectString&&(t.cropRectString=String(e.cropRectString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.previewImageData=[]),t.defaults&&(n.keyAssetIdentifier="",n.cropRectString=""),e.previewImageData&&e.previewImageData.length){n.previewImageData=[];for(var i=0;i<e.previewImageData.length;++i)n.previewImageData[i]=t.bytes===String?Xt.base64.encode(e.previewImageData[i],0,e.previewImageData[i].length):t.bytes===Array?Array.prototype.slice.call(e.previewImageData[i]):e.previewImageData[i]}return null!=e.keyAssetIdentifier&&e.hasOwnProperty("keyAssetIdentifier")&&(n.keyAssetIdentifier=e.keyAssetIdentifier),null!=e.cropRectString&&e.hasOwnProperty("cropRectString")&&(n.cropRectString=e.cropRectString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,l.util.toJSONOptions)},e}(),tn=Kt.Record.extend({staticMembers:{CK_RECORD_TYPE:"cloudkit.share",__QUALIFIED_CLASS_NAME__:"Share"},url:Object(Qt.c)({readOnly:!0}),displayedHostname:Object(Qt.c)({readOnly:!0}),parent:Object(Qt.c)({readOnly:!0}),publicPermission:Object(Qt.c)({readOnly:!0}),shortGUID:Object(Qt.c)({readOnly:!0}),currentUserParticipant:Object(Qt.c)({readOnly:!0}),owner:Object(Qt.c)({readOnly:!0}),participants:Object(Qt.c)({readOnly:!0})}).extend({staticMembers:{PLACEHOLDER_TITLE:"<missing title>",RECORD_NAME:"cmm-share",SHARE_TYPE:"cmm",__QUALIFIED_CLASS_NAME__:"CMMShare"},thumbnailImageData:qt.e({serviceKey:"cloudkit.thumbnailImageData",readOnly:!0}),type:qt.e({serviceKey:"cloudkit.type",readOnly:!0}),_title:qt.e({serviceKey:"cloudkit.title",readOnly:!0}),title:V.b({readOnly:!0,dependencies:["_title"],get:Object.assign((function(){var e=this._title;return e!==this.constructor.PLACEHOLDER_TITLE?e:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r!==this.constructor.PLACEHOLDER_TITLE?r:void 0}})})}),nn=h.a.extend({staticMembers:{storageKey:"cmm"},ckShareServiceUrlPrefix:h.a.stringProperty("https://ckshare.icloud.com/ws/v1"),ckShareServiceReportAsSpamSuffix:h.a.stringProperty("share/spam/report"),incompleteShortTimeThreshold:h.a.numberProperty(6e5),incompleteShortPercentThreshold:h.a.numberProperty(100),incompleteMediumTimeThreshold:h.a.numberProperty(432e5),incompleteMediumPercentThreshold:h.a.numberProperty(20),incompleteLongCountThreshold:h.a.numberProperty(4),databaseFetchChangesPollingInterval:h.a.numberProperty(15e3)}).create();function rn(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function an(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){rn(a,i,r,s,o,"next",e)}function o(e){rn(a,i,r,s,o,"throw",e)}s(void 0)}))}}var sn=jt.a.PredefinedName.MOMENTS,on=Kt.Record.extend({staticMembers:{CK_RECORD_TYPE:"CMMRoot",RECORD_NAME:"cmm-root",_fetchWithXhr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blob",n=new XMLHttpRequest,i=Z.a.create();return n.open("GET",e,!0),n.responseType=t,Ze.a(n,"readystatechange",(function(){var e=n.readyState,t=n.status;e>=2&&200!==t?i.reject(n):4===e&&200===t&&i.resolve(n)})),n.send(null),i},fetchAndDecodePreviewData:function(e){var t=this;return an(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t._fetchWithXhr(e,"arraybuffer");case 3:return i=n.sent,r=i.response,a=new Uint8Array(r),n.abrupt("return",en.decode(a));case 9:n.prev=9,n.t0=n.catch(0),u.b.debug("CMMRoot: Could not load previewData.");case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},isShareCompleteEnough:function(e,t){if(!0!==t.isLoaded)return!1;var n=e.assetCount,i=e.createDate,r=Date.now()-i,a=t.medias.length,s=a/n*100;return 100===s||(r<=nn.incompleteShortTimeThreshold?s>=nn.incompleteShortPercentThreshold:r<=nn.incompleteMediumTimeThreshold?s>=nn.incompleteMediumPercentThreshold:a>=nn.incompleteLongCountThreshold)},accept:function(e){return an(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.n(),t.abrupt("return",n.acceptShortGUID(e));case 2:case"end":return t.stop()}}),t)})))()},getCMMRootFromZone:function(e){var t=this.getPrimaryKeyWithZonePK(e.pk,on.RECORD_NAME);return on.find(t)},__QUALIFIED_CLASS_NAME__:"CMMRoot"},assetCount:qt.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!(Number.isSafeInteger(e)&&e>0))throw new _.a("assetCount should be an integer greater than 0");return e}}),photosCount:qt.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!Number.isSafeInteger(e))throw new _.a("photosCount is not an integer");return e}}),videosCount:qt.e({readOnly:!0,getDataValueFromServiceValue:function(e){if(!Number.isSafeInteger(e))throw new _.a("videosCount is not an integer");return e}}),container:H.d({readOnly:!0,get:function(){var e=Kt.Record.getPrimaryKey(this.zone,sn);return jt.a.find(e)}}),createDate:qt.e({readOnly:!0}),endDate:qt.e({readOnly:!0}),expiryDate:qt.e({readOnly:!0}),location:qt.i(),previewData:qt.c(),share:zt.a.toOne({readOnly:!0,strong:!0,type:tn}),shortGUID:Qt.c({readOnly:!0}),startDate:qt.e({readOnly:!0}),originatingZoneName:qt.m({readOnly:!0}),loadPreviewData:function(){var e=this;return an(regeneratorRuntime.mark((function t(){var n,i,r,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(n=e._loadPreviewDataPromise)){t.next=3;break}return t.abrupt("return",n);case 3:if(t.prev=3,a=e.getDataHash(),void 0!==(s=a._previewData)){t.next=12;break}return t.next=9,e._loadPreviewDataPromise=on.fetchAndDecodePreviewData(e.previewData.downloadURL);case 9:t.t0=a._previewData=t.sent,t.next=13;break;case 12:t.t0=s;case 13:i=t.t0,t.next=19;break;case 16:t.prev=16,t.t1=t.catch(3),r=t.t1;case 19:if(e._loadPreviewDataPromise=void 0,void 0===r){t.next=22;break}throw r;case 22:return t.abrupt("return",i);case 23:case"end":return t.stop()}}),t,null,[[3,16]])})))()},_loadPreviewDataPromise:void 0,accept:function(){var e=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.constructor.accept(e.shortGUID));case 1:case"end":return t.stop()}}),t)})))()}}),ln=!1;try{globalThis.addEventListener("test",null,{get passive(){return ln=!0}})}catch(aY){u.b.debug("Browser does not support passive events")}var cn=null,un=yt.a.extend({action:function(e){var t=function(){e.isUserIdle=!0},n=function(){e.isUserIdle=!1,cn&&globalThis.clearTimeout(cn),cn=X.a(t,3e5)};["click","dblclick","keydown","keyup","keypress","mouseup","mousedown","mousemove","input"].forEach((function(e){Ze.a(document,e,n,!0)})),["wheel","touchstart","touchmove","touchend"].forEach((function(e){Ze.a(document,e,n,!ln||{passive:!0})})),n()},staticMembers:{__QUALIFIED_CLASS_NAME__:"UserInteractionInitializer"}}),dn=n(267),hn=n(221);function pn(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return setInterval.apply(void 0,[Object(hn.a)(e),t].concat(i))}var fn=P.a.extend(B.b,{staticMembers:{bindingFiringEverySecond:function(){return this.bindingFiringEvery(1e3)},bindingFiringEvery:function(e){return e<1e3&&_.b("Permanent interval of "+e+"ms is prohibitively rapid."),(gn[e]=gn[e]||fn.create(e)).bindingFor("signal")},__QUALIFIED_CLASS_NAME__:"Heartbeat"},signal:B.i(),init:function(e){this.__s._$NX$init.call(this),pn(this.signal.bind(this),e)},__superMap:{_$NX$init:"init"}}),gn={};function mn(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function _n(e,t,n){return e>=t&&e<=n}function vn(e){return e.getFullYear()===(new Date).getFullYear()}var bn=P.a.extend(B.b,ie.a,{_previousDate:null,_previousTimezoneOffset:null,init:function(){var e=this,t=arguments;this._previousDate=this._getDate(),this._previousTimezoneOffset=this._previousDate.getTimezoneOffset(),this._previousDate.setHours(0,0,0,0),e.__s._$99$init.apply(e,t)},_secondDidChange:B.h(fn.bindingFiringEverySecond(),(function(){var e=this._getDate();e.setHours(0,0,0,0);var t=e.getTimezoneOffset(),n=!1;Number(e)!==Number(this._previousDate)?(this.propertyChanged("today"),n=!0):this._previousTimezoneOffset!==t&&(n=!0),n&&this.dateOrTimezoneDidChange(),this._previousDate=e,this._previousTimezoneOffset=t})),dateOrTimezoneDidChange:B.i(),_getDate:function(){return new Date},today:V.b({readOnly:!0,get:function(){return this._getDate()}}),yesterday:V.b({readOnly:!0,dependencies:["today"],get:Object.assign((function(){var e=this.today,t=new Date(e);return t.setDate(t.getDate()-1),t.setHours(0,0,0,0),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setDate(a.getDate()-1),a.setHours(0,0,0,0),a}})}),tomorrow:V.b({readOnly:!0,dependencies:["today"],get:Object.assign((function(){var e=this.today,t=new Date(e);return t.setDate(t.getDate()+1),t.setHours(0,0,0,0),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setDate(a.getDate()+1),a.setHours(0,0,0,0),a}})}),endOfTomorrow:V.b({readOnly:!0,dependencies:["tomorrow"],get:Object.assign((function(){var e=this.tomorrow,t=new Date(e);return t.setHours(23,56,56,999),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r);return a.setHours(23,56,56,999),a}})}),lastWeek:V.b({readOnly:!0,dependencies:["today"],get:Object.assign((function(){var e=this.today,t=new Date(e),n=parseInt(s.d("Date.Range.Days.Prior.For.Days.Of.The.Week"),10);return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=new Date(r),o=parseInt(s.d("Date.Range.Days.Prior.For.Days.Of.The.Week"),10);return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}})}),isToday:function(e){return mn(e,this.get("today"))},isTomorrow:function(e){return mn(e,this.get("tomorrow"))},isYesterday:function(e){return mn(e,this.get("yesterday"))},isColloquial:function(e){return _n(e,Math.min(this.get("lastWeek"),this.get("yesterday")),this.get("endOfTomorrow"))},colloquialLocKey:function(e){return this.isToday(e)?"Today":this.isTomorrow(e)?"Tomorrow":this.isYesterday(e)?"Yesterday":"Day.Of.Week"},__superMap:{_$99$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RelativeDates"}}),yn=n(328),wn=n(531),In=n(202),Sn=n(445),Cn=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["detail-view"]},className:"p2-detail-view",__QUALIFIED_CLASS_NAME__:"DetailView"},description:V.b()}),En=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"detailViews"}],classes:["alert-details-view"]},className:"p2-details-container-view",__QUALIFIED_CLASS_NAME__:"DetailsContainerView"},detailViews:k.c(Array)}),An=Sn.a.extend({staticMembers:{templateExtensions:{contentWrapper:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"detailsContainer"}]}},className:"p2-base-alert-view",__QUALIFIED_CLASS_NAME__:"BaseAlertView"},init:function(){var e=this,t=arguments;e.__s._$H6$init.apply(e,t)},detailsContainer:k.c(En),addDetail:function(e){var t=Cn.create({description:e});this.getPath("detailsContainer.detailViews").push(t)},removeDetails:function(){this.getPath("detailsContainer.detailViews").clear()},__superMap:{_$H6$init:"init"}}),On=wn.b.extend({staticMembers:{show:function(e){var t=this.create(e);return t.show(),t},__QUALIFIED_CLASS_NAME__:"BaseAlertViewController"},contentController:F.b({viewClass:An}),addDetail:function(e){this.getPath("contentController.view").addDetail(e)},removeDetails:function(){this.getPath("contentController.view").removeDetails()}}),Tn=n(123),Mn=n(74),Dn={COPY:"copy",LINK:"link",MOVE:"move"},Pn={TEXT:"text/plain",URI_LIST:"text/uri-list",FILE_LIST:"Files"},Ln={dataObjectsByType:{},setDataForType:function(e,t){this.dataObjectsByType[t]=e},getDataForType:function(e){return this.dataObjectsByType[e]},hasDataForType:function(e){return e in this.dataObjectsByType},clearAllData:function(){this.dataObjectsByType={}}},Rn={mixinDependencies:[Tn.a,B.b],acceptedDragTypes:Object(H.d)(Object(k.c)([Pn.TEXT])),getPreferredOperationsForDragType:function(e,t){return[Dn.MOVE]},acceptDataForDragType:Mn.a.define(),isDraggingOver:Object(V.b)({readOnly:!0,dependencies:["_dragHovers"],get:Object.assign((function(){return this._dragHovers>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),_dragHovers:Object(V.b)(0),dragDidEnter:U.a,dragDidHover:U.a,dragDidDrop:U.a,dragDidLeave:U.a,_getDataForDragType:function(e,t){return t===Pn.FILE_LIST?e.dataTransfer.files:Ln.hasDataForType(t)?Ln.getDataForType(t):null},_processDragEvent:function(e){for(var t=this.acceptedDragTypes,n=this._getAllowedActionsForEvent(e),i=0,r=t.length;i<r;i++){var a=t[i],s=!1;if(a===Pn.FILE_LIST){var o,l=e.dataTransfer;l&&(o=l.types)&&(s=o instanceof DOMStringList?o.contains(a):-1!==o.indexOf(a))}else s=Ln.hasDataForType(a);if(s)for(var c=this.getPreferredOperationsForDragType(e,a),u=0,d=c.length;u<d;u++){var h=c[u];if(-1!==n.indexOf(h))return e.dataTransfer.dropEffect=h,h}}return null},_getAllowedActionsForEvent:function(e){var t,n=e.dataTransfer.effectAllowed;return"all"===n||"uninitialized"===n?t=[Dn.COPY,Dn.LINK,Dn.MOVE]:"none"===n?t=[]:(t=[],n&&-1!==n.indexOf("opy")&&t.push(Dn.COPY),n&&-1!==n.indexOf("ink")&&t.push(Dn.LINK),n&&-1!==n.indexOf("ove")&&t.push(Dn.MOVE)),t},dragEnter:function(e){return!!this._processDragEvent(e)&&(this.isDraggingOver||this.dragDidEnter(e),this._dragHovers++,!0)},dragOver:function(e){return!!this.isDraggingOver&&(this._processDragEvent(e)?(this.dragDidHover(e),e.stopPropagation(),e.preventDefault(),!0):(this._dragHovers--,this.isDraggingOver||this.dragDidLeave(e),!1))},dragLeave:function(e){return!!this._processDragEvent(e)&&(this._dragHovers--,this.isDraggingOver||this.dragDidLeave(e),!0)},drop:function(e){this._dragHovers--;for(var t=this.acceptedDragTypes,n=!1,i=0,r=t.length;i<r;i++){var a=t[i],s=this._getDataForDragType(e,a);if(null!==s){var o=this._processDragEvent(e);if(o&&this.acceptDataForDragType(e,a,s,o)){n=!0;break}}}return!!n&&(e.stopPropagation(),e.preventDefault(),this.dragDidDrop(e),!0)}},xn={mixinDependencies:[Rn],acceptedDragTypes:H.d(k.c([Pn.FILE_LIST])),acceptDataForDragType:function(e){return e.stopPropagation(),e.preventDefault(),!0}},Nn=On.extend({iconNames:["photos-icon","error"],viewClass:F.b({mixinDependencies:[xn]}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ErrorAlertViewController"}}),Fn=n(399),Vn=n(301),kn=n(126),Bn=n(191),jn=n(1354),Un=0,Gn={suspend:function(){Hn++},resume:function(){Hn--},CANVAS_DRAW_IMAGE_ERROR_TYPE:"CanvasDrawImageFailure",wrapDrawImage:function(){if(!Wn){Wn=!0;var e=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t){if(Hn)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(aY){if(u.b.error(Gn.CANVAS_DRAW_IMAGE_ERROR_TYPE+": "+aY),++Un>=5)return;var n=t.src?j.a.create(t.src).retain().autorelease():null,i=L.n();if(!i.feedbackService)return;i.feedbackService.reportError({errorType:Gn.CANVAS_DRAW_IMAGE_ERROR_TYPE,numericalArguments:Array.prototype.slice.call(arguments,1),sourceImageWidth:t.naturalWidth||t.width,sourceImageHeight:t.naturalHeight||t.height,sourceImageTagName:t.tagName,sourceImageComplete:t.complete,sourceImageURLOrigin:n?n.origin:"n/a",sourceImageURL:n?n.isInDomain("icloud.com")?t.src:"omitted":"n/a",failureCountSinceAppLoad:Un})}}}}},Hn=0,Wn=!1,$n=n(162),zn={mixinDependencies:[Tn.a],eventsToReport:$n.a.define()},Kn={getSignificantNum:function(e){if("number"!==typeof e||isNaN(e))return"";for(var t=e.toString().length-2,n=1;t>0;)n*=10,t--;return Math.round(e/n)*n},roundToNearestTen:function(e){return"number"!==typeof e||isNaN(e)?"":(e<0&&(e=Math.abs(e)),e<10?e:10*Math.ceil(e/10))},getDaysRemaining:function(e){if(e)return Math.ceil((e-Date.now())/1e3/60/60/24)}},qn=we.b("Feedback.FeedbackEventType",(function(e){e("REPORT_ONCE"),e("REPORT_ALL"),e("REPORT_SUM")})),Qn=we.b("FeedbackErrorType",{UPLOAD:"Upload",WEB_SERVICE:"WebService",STARTUP_FAIL:"StartupFail",INVALID_INDEX:"InvalidIndex",CANVAS_DRAW_IMAGE:Gn.CANVAS_DRAW_IMAGE_ERROR_TYPE,SYSTEM_ALBUM_ACTION:"SystemAlbumAction"}),Yn=P.a.extend(Kn,{mixinDependencies:[B.b,zn],routeSelected:V.b(),_reportedState:k.c(Object),_eventSumCount:{},eventSumFlushTime:1e4,eventsToReport:H.d(F.b({})),doNotReportStat:V.b(!1),coskService:V.b(),report:function(e,t,n,i){if(this.doNotReportStat)u.b.debug("Feedback service:",e,t,i?"(Perf stat)":void 0);else{var r=this.coskService;if(r){var a=i?"recordPerfStat":"recordStat";if(!i||t&&m.a(t.duration))if(n)r[a](e,t);else{var s=this.eventsToReport[e];s&&(s===qn.REPORT_ONCE?this._reportedState[e]||(r[a](e,t),this._reportedState[e]=!0):s===qn.REPORT_ALL?r[a](e,t):s===qn.REPORT_SUM&&(t&&_.b("Cannot use `params` with FeedbackEventType: REPORT_SUM"),void 0!==this._eventSumCount[e]?this._eventSumCount[e]++:(this._eventSumCount[e]=1,pn(function(e){this._eventSumCount[e]>0&&(r.recordStat(e,{count:this._eventSumCount[e]}),this._eventSumCount[e]=0)}.bind(this,e),this.eventSumFlushTime))))}}}},reportError:function(e){if(this.doNotReportStat)u.b.debug("Feedback service: ","Error",e);else{var t=this.coskService;t&&e&&t.recordStat("Error",e)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"FeedbackService"}}),Zn=function(){function e(){this.queue=[]}var t=e.prototype;return t.report=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift("report"),this.queue.push(t)},t.reportError=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift("reportError"),this.queue.push(t)},t.flush=function(e){this.queue.forEach((function(t){return e[t.shift()].apply(e,t)})),this.queue.length=0},e}();for(var Xn in Kn)Zn.prototype[Xn]=Kn[Xn];var Jn=n(559),ei=ae.a.extend({copyKeys:k.c(Array),copy:function(){for(var e=this.copyKeys,t=this.constructor.create(),n=0;n<e.length;n++){var i=e[n];t[i]=this[i]}return t._statusEventListeners?u.b.warn("New request has event handlers, old handlers not copied."):t._statusEventListeners=this._statusEventListeners,t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Request"}}),ti=ei.extend({method:kn.a.POST,useCredentialsIfCrossOrigin:!0,shouldTrackUploadProgress:!0,transport:Jn.a.create({getBodyText:function(e){return e.arrayBufferData}}),body:V.b({didChange:U.a,set:function(e){if(e)return e.constructor===ArrayBuffer&&(this.arrayBufferData=e),e}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequest"}}),ni=we.b("PhotosUploader.UploadError",(function(e){e("FileNameTooLong"),e("FileNameInvalid"),e("FileTypeInvalid"),e("FileSizeTooLarge"),e("FolderNotSupported"),e("AlbumInvalid"),e("FolderInvalid"),e("MultipleSelection"),e("DuplicatePhoto"),e("ServerError"),e("DimensionsNotCorrect"),e("OverQuota")})),ii=we.b("PhotosUploader.UploadRequirements",{MAX_FILE_SIZE:104857600,MIN_FILE_SIZE:125,MAX_HEIGHT:20480,MIN_HEIGHT:1,MAX_WIDTH:20480,MIN_WIDTH:1,MAX_AREA:419430400,MIN_AREA:1,MAX_FILE_NAME_LENGTH:255,ACCEPTED_FILE_TYPES:["image/jpeg"]}),ri=P.a.extend(ie.a,B.b,{maxConcurrentUploads:3,maxBytesInMemory:3e6,errorCodes:[400,423,424,500,502,503],pendingRequests:k.c(Array),fileRequests:k.c(Array),bytesCurrentlyIngesting:0,filesToProcess:k.c(Array),pcsRequests:k.c(Array),uploadInProgress:V.b({readOnly:!0,dependencies:["totalFileCount"],get:Object.assign((function(){return this.totalFileCount>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),progress:V.b(k.c(Fn.a)),fileUploadComplete:B.i(),uploadDidComplete:B.i(),totalFileCount:V.b(0),totalBytesInProgress:V.b(0),processingFiles:V.b(!1),didRefetchPCS:!1,_hasShownOverQuotaAlert:!1,abortPendingUploads:function(){var e=this.fileRequests;this._reportStats("fileUploadAbortCount",{count:this._getSignificantNum(e.length),pendingCount:this._getSignificantNum(this.pendingRequests.length),filesToProcessCount:this._getSignificantNum(this.filesToProcess.length)});for(var t=0;t<e.length;t++)e[t].abort();this.fileRequests=[],this.pendingRequests=[],this.totalFileCount=0,this.totalBytesInProgress=0,this.filesToProcess=[],this.bytesCurrentlyIngesting=0,this._calculateTotalProgress()},addFilesWithValidation:function(e,t,n,i){var r=this;if(this.processingFiles=!0,e instanceof globalThis.FileList||_.b("Must provide a file list."),te.a.sharedInstance.isIE&&0===e.length)return[ni.FolderNotSupported];var a=[],s=[],o=[];if(s=Array.from(e),t){s=Array.from(e);for(var l=0,c=e.length;l<c;l++)t[l].webkitGetAsEntry().isDirectory&&(a.push(ni.FolderNotSupported),o.push(s[l]),s.splice(l,1))}if(s.length){var u;(u=this.filesToProcess).push.apply(u,s),this.totalFileCount+=s.length;for(var d=0;d<s.length;d++)this.totalBytesInProgress+=s[d].size}return this.processingFiles=!1,X.a((function(){r.processFiles(n,i)}),300),this._reportStats("fileUploadValid",{count:this._getSignificantNum(s.length)}),{errors:a,validFiles:s,erroredFiles:o}},processFiles:function(e,t){for(var n=this.filesToProcess,i=this.bytesCurrentlyIngesting,r=this.maxBytesInMemory-i;r>0&&n.length;){var a=n[0],s=a.size;if(!(r>=s||0===i))break;r<s&&0===i&&this._reportStats("uploadFileLarge",{size:this._getSignificantNum(s)}),n.splice(0,1),r-=s,r+=this._validateThenStartFileUpload(a,e,t)}},_validateThenStartFileUpload:function(e,t,n){var i=this,r=this._validateFile(e),a=0;if(Vn.a(r)){var s=new FileReader;s.fileToUpload=e,Ze.a(s,"load",(function(e){i._uploadValidatedFile(e,t,n)})),Ze.a(s,"error",this._errorReadingFile.bind(this)),this.bytesCurrentlyIngesting+=e.size,s.readAsArrayBuffer(e)}else{var o=r.length;this._reportStats("fileUploadFilenameValidation",{});for(var l=0;l<o;l++)this.alertUser({type:r[l],file:e});this.totalFileCount-=1,this.totalBytesInProgress-=e.size,this._clearCompletedRequests(),a=e.size}return a},resumeUploadsAfterPcsRevalidate:function(){var e=this.pendingRequests;this.pendingRequests=e.concat(this.pcsRequests),this.pcsRequests=[],this._processUploadQueue()},hostedByCloudOSOne:V.b(!1),handleUploadError:function(e){var t=this,n=e.response.status,i=e.file;if(400===n)this.alertUser({type:ni.FileTypeInvalid,file:i}),this._removeFromQueue(e),this._reportError({errorType:Qn.UPLOAD.value,errorState:"Bad Request",statusCode:n}),this._reportStats("fileUploadBadRequestError",{});else if(424===n||423===n)e.copyKeys=["url","body","didProgress"],this.pcsRequests.push(e.copy()),this._removeFromQueue(e),this.hostedByCloudOSOne&&!this.didRefetchPCS?(this._reportError({errorType:Qn.UPLOAD.value,errorState:"PCS Error - Retrying...",statusCode:n}),this._reportStats("fileUploadPCSError",{}),this.didRefetchPCS=!0,ve.a.cloudOSService.revalidateUser().then((function(){t.resumeUploadsAfterPcsRevalidate()}))):(this._reportError({errorType:Qn.UPLOAD.value,errorState:"PCS Error - Upload Failed.",statusCode:n}),this._reportStats("fileUploadPCSError",{}),_.b("PCS Error"));else if(500===n||502===n)this.alertUser({type:ni.ServerError,file:i}),this._removeFromQueue(e),this._reportError({errorType:Qn.UPLOAD.value,statusCode:n}),this._reportStats(500===n?"fileUploadInternalError":"fileUploadBadGatewayError",{});else if(503===n)if(e.reattemptToUpload)this.alertUser({type:ni.ServerError,file:i}),this._removeFromQueue(e),this._reportError({errorType:Qn.UPLOAD.value,errorState:"Upload Service Unavailable - Upload Failed.",statusCode:n}),this._reportStats("fileUploadServiceUnavailableError",{});else{e.copyKeys=["url","body","didProgress"];var r=e.copy();r.reattemptToUpload=!0,this.pendingRequests.push(r),this._removeFromQueue(e),this._processUploadQueue(),this._reportError({errorType:Qn.UPLOAD.value,errorState:"Upload Service Unavailable - Retrying...",statusCode:n}),this._reportStats("fileUploadServiceUnavailableError",{})}else this._reportError({errorType:Qn.UPLOAD.value,errorState:"Unknown Server Error",statusCode:n}),this._reportStats("fileUploadUnknownError",{}),_.b("Unknown error occurred")},handleUploadImageWSServiceUnavailable:function(){this.alertUser({type:ni.ServerError}),this._reportError({errorType:Qn.UPLOAD.value}),this._reportStats("fileUploadServiceUnavailableError",{}),this.abortPendingUploads()},_removeFromQueue:function(e){var t=this.fileRequests.indexOf(e);this.fileRequests.splice(t,1)},alertUser:B.i(),alertViewController:wn.b,feedbackService:V.b(),_reportError:function(e){var t=this.feedbackService;t&&t.reportError&&t.reportError(e)},_reportStats:function(e,t){var n=this.feedbackService;n&&n.report&&n.report(e,t)},_getSignificantNum:function(e){var t=this.feedbackService;if(t&&t.getSignificantNum)return t.getSignificantNum(e)},_uploadValidatedFile:function(e,t,n){var i=this,r=e.target.fileToUpload,a=e.target.result;if(this._exifValidation(a,r)){var s=globalThis.encodeURIComponent(r.name),o=r.lastModified,l=(new Date).getTimezoneOffset();if(this._reportStats("fileUpload",{size:this._getSignificantNum(r.size)}),t){var c=j.a.create(t);c.pathname="/upload",c.query="?filename="+encodeURIComponent(s)+"&dsid="+n,o&&(c.query+="&lastModDate="+o),l&&(c.query+="&timezoneOffset="+l);var u=ti.create({url:c,headers:{"Content-Type":"text/plain"},didProgress:this._calculateTotalProgress.bind(this)});u.body=a,u.file=r,u.on(kn.b.FINALIZED,(function(){i._clearCompletedRequests();var e={response:u.response,currentFile:r};u.arrayBuffer=void 0,i.fileUploadComplete(e),i.bytesCurrentlyIngesting-=r.size,i.processFiles(t,n),i._reportCompletedState(u,c,u.timeSent,u.get("method")),i._processUploadQueue()}));for(var d=this.errorCodes,h=0;h<d.length;h++){var p=d[h];u.onStatus(p,this.handleUploadError.bind(this))}this.pendingRequests.push(u),this._processUploadQueue()}else this.handleUploadImageWSServiceUnavailable()}else this._reportStats("fileUploadExifFailure",{})},_exifValidation:function(e,t){var n,i=!1;if(Bn.b(e)){var r=jn.a.read(e);if(r){var a=r.Width,s=r.Height,o=a*s,l=null!==a&&void 0!==a;l&&(a<ii.MIN_WIDTH.value||a>ii.MAX_WIDTH.value)&&(i=!0,n=ni.DimensionsNotCorrect);var c=null!==s&&void 0!==s;c&&(s<ii.MIN_HEIGHT.value||s>ii.MAX_HEIGHT.value)&&(i=!0,n=ni.DimensionsNotCorrect),c&&l&&(o<ii.MIN_AREA.value||o>ii.MAX_AREA.value)&&(i=!0,n=ni.DimensionsNotCorrect)}else i=!0,n=ni.FileTypeInvalid}else i=!0,n=ni.FileTypeInvalid;return!i||(this._clearCompletedRequests(),this.alertUser({type:n,currentFile:t}),this._processUploadQueue(),!1)},_errorReadingFile:function(e){var t=e.target.error,n=e.target,i=n.size;this._reportStats("fileUploadReadError",{errorName:t&&t.name}),this.bytesCurrentlyIngesting-=i,this.totalBytesInProgress-=i,this.totalFileCount-=1,"NotReadableError"===t.name?this.alertUser({type:ni.FolderNotSupported,file:n}):this.alertUser({type:ni.FileTypeInvalid,file:n})},_processUploadQueue:function(){var e=this._getActiveUploadRequestCount(),t=this.pendingRequests,n=this.maxConcurrentUploads;if(0===e&&0===t.length)return this.uploadDidComplete(),void this._calculateTotalProgress();var i=n-e,r=Math.min(i,t.length);if(r>0){this._hasShownOverQuotaAlert=!1;for(var a=0;a<r;a++){var s=t[a];this.pendingRequests.splice(a,1),this.fileRequests.push(s),this._sendPendingRequest(s)}}},_sendPendingRequest:function(e){var t=this;this._reportStats("fileUploadRequestSent",{}),e.timeSent=window.performance.now(),e.send().catch((function(e){e.body&&Array.isArray(e.body.errors)&&e.body.errors.some((function(e){return e&&e.errorCode===window.CloudKit.CKError.QUOTA_EXCEEDED}))&&(t._hasShownOverQuotaAlert||t.alertUser({type:ni.OverQuota}),t._hasShownOverQuotaAlert=!0,t.abortPendingUploads())}))},_clearCompletedRequests:function(){var e=this._getActiveUploadRequestCount(),t=this.pendingRequests.length,n=this.filesToProcess.length;0===e&&0===t&&0===n&&(this.fileRequests=[],this.totalFileCount=0,this.totalBytesInProgress=0)},_getActiveUploadRequestCount:function(){for(var e=0,t=this.fileRequests,n=0;n<t.length;n++)t[n].state!==kn.b.COMPLETED&&e++;return e},_validateFile:function(e){var t=[];e.name.length>ii.MAX_FILE_NAME_LENGTH.value&&t.push(ni.FileNameTooLong);var n=e.size;n>=ii.MAX_FILE_SIZE.value&&t.push(ni.FileSizeTooLarge),n<=ii.MIN_FILE_SIZE.value&&t.push(ni.FileTypeInvalid);var i=e.type;return-1===ii.ACCEPTED_FILE_TYPES.value.indexOf(i)&&t.push(ni.FileTypeInvalid),t},_isDirectory:function(e){var t=te.a.sharedInstance.isChrome&&te.a.sharedInstance.majorVersion>=21;if(!te.a.sharedInstance.isIE&&!t){var n=e.size;return!n&&0!==n}return!!e.webkitGetAsEntry&&e.webkitGetAsEntry().isDirectory},_calculateTotalProgress:function(){for(var e=0,t=this.fileRequests,n=0;n<t.length;n++)e+=t[n].uploadProgress.percentComplete;e=Math.round(e/this.totalFileCount*100),this.progress.bytesTransferred=e,this.progress.bytesTotal=100},_reportCompletedState:function(e,t,n,i){var r={httpMethod:i,hostname:t.get("hostname"),serviceName:"uploadws",clientTiming:window.performance.now()-n,timedOut:e.get("state")===kn.b.TIMEDOUT,urlPath:t.get("pathname"),requestState:e.get("state")},a=e.response;if(a){var s=a.get("encodedBody"),o=s?s.length:null;r.statusCode=a.get("status"),r.uncompressedResponseSize=o}this._reportStats("requestInfo",r)},staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequestManager"}}),ai=h.a.extend({staticMembers:{storageKey:"photos-utils"},lpkHostname:V.b({readOnly:!0,get:function(){return globalThis.location.hostname.toLowerCase().indexOf("carry.icloud.com")>-1?"carry.icloud.com":"cdn.apple-livephotoskit.com"}}),lpkUrl:V.b({readOnly:!0,dependencies:["lpkHostname"],get:Object.assign((function(){return j.a.create({protocol:"https:",hostname:this.lpkHostname,pathname:"/lpk/1/livephotoskit.js"})}),{__CW__getter:function(e,t,n,i){return j.a.create({protocol:"https:",hostname:i.internalGet(this,t[0+n]),pathname:"/lpk/1/livephotoskit.js"})}})})}).create(),si=yt.a.extend({action:function(e){if(te.a.sharedInstance.isSafari&&te.a.sharedInstance.majorVersion<=7)u.b.warn("Detected Safari 7 or earlier. Not attempting to load LPK: LPK playback will be disabled.");else{var t=ai.lpkUrl.toString();(function(e){var t=Z.a.create(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,Ze.a(n,"load",(function(){return t.resolve()})),Ze.a(n,"error",(function(e){return t.reject(e)})),document.body.appendChild(n),n.src=e,t})(t).then((function(){e.isLPKLoaded||(u.b.info("LPK (v"+globalThis.LivePhotosKit.VERSION+") loaded successfully from: "+t),e.isLPKLoaded=!0)})).catch((function(e){u.b.warn("LPK failed to load, functionality will be disabled",e)}))}},staticMembers:{__QUALIFIED_CLASS_NAME__:"LPKInitializer"}}),oi=n(355),li={storageObject:{},setItem:function(e,t,n){this.storageObject[n+e]=t},getItem:function(e,t){return this.storageObject[t+e]},removeItem:function(e,t){delete this.storageObject[t+e]}},ci=function(){function e(e){this._states={},this._stateIds=oi.a.create(),this._registrar={},this._localStorage=e||li,this._stateIdentifier=0,this._loadStoreFromStorage()}var t=e.prototype;return t.writeState=function(e,t,n){var i=this._states;e||(e=this.getNewIdentifier()),i[e]=t;var r=this._stateIds.add(e);return this._writeStateToLocalStorage(e,t),r&&this._writeStateIdsToLocalStorage(),this._notifyCodecsForChange(e,t,n),e},t.readState=function(e){var t=this._states[e];return t||(t={}),t},t.deleteState=function(e){delete this._states[e],this._stateIds.delete(e),this._unregisterAllForId(e),this._deleteStateFromLocalStorage(e),this._writeStateIdsToLocalStorage()},t.registerCodec=function(e,t){t||_.b("RegisterCodec requires a codec",{codec:t});var n=this._registrar[e];n||(n=this._registrar[e]=[]),n.push({instance:t})},t.unregisterCodec=function(e,t){t||_.b("UnregisterCodec requires a codec",{codec:t});var n=this._registrar[e];if(n&&n.length)for(var i=n.length,r=0;r<i;r++)if(n[r].instance===t)return void n.splice(r,1)},t.getNewIdentifier=function(){for(var e=this._stateIdentifier,t=this._stateIds,n=0;t.contains(e+n+"");)++n>9999&&_.b("Attempting to find a new state store identifier has failed");return e+=n,this._stateIdentifier=e+1,e+""},t._notifyCodecsForChange=function(e,t,n){var i=this._registrar[e];if(i&&i.length)for(var r=i.length,a=0;a<r;a++){var s=i[a].instance;s!==n&&s.stateDidChange(e,t)}},t._unregisterAllForId=function(e){delete this._registrar[e]},t._writeStateToLocalStorage=function(e,t){var n=this._localStorage,i=JSON.stringify(t);n.setItem(e,i,"__CW__PersistentStateStore")},t._deleteStateFromLocalStorage=function(e){this._localStorage.removeItem(e,"__CW__PersistentStateStore")},t._writeStateIdsToLocalStorage=function(){var e=this._localStorage,t=JSON.stringify(this._stateIds.toArray());e.setItem("__State_Store_Ids_",t,"__CW__PersistentStateStore")},t._loadStoreFromStorage=function(){var e=this._localStorage,t=e.getItem("__State_Store_Ids_","__CW__PersistentStateStore");if(t){var n=JSON.parse(t),i=this._stateIds;for(var r in i.toArray())i.remove(r);for(var a=this._states={},s=n.length,o=0;o<s;o++){var l=n[o],c=e.getItem(l,"__CW__PersistentStateStore");i.add(l),a[l]=JSON.parse(c)}}},e}(),ui=yt.a.extend({action:function(e){var t=new ci;e.persistentStateStore=t},staticMembers:{__QUALIFIED_CLASS_NAME__:"PersistentStateStoreInitializer"}}),di=h.a.extend({staticMembers:{storageKey:"p2"},isInCloudOS:V.b({readOnly:!0,get:function(){return window.parent!==window}}),partition:V.b({readOnly:!0,get:function(){if(this.isInCloudOS){var e=ve.a.cloudOSService.getPath("environment.authBag").getServiceUrlFor("ckdatabasews",!1).split("/")[2].split("-")[0].substr(1);return parseInt(e,10)}return 1}})}).create(),hi=P.a.extend(B.b,ie.a,{appName:V.b(G.a.bindingFor("application.name")),cloudOSService:V.b(ve.a.bindingFor("cloudOSService")),appPreferences:V.b(ve.a.bindingFor("cloudOSService.environment.appPreferences")),_serviceDidChange:B.h("appPreferences",(function(e){var t=this.appName;if(t){var n=e&&e[t];if(n&&!this._hasInitialized){for(var i in this._isIngestingPrefs=!0,n)n.hasOwnProperty(i)&&(this[i]=n[i]);this._isIngestingPrefs=!1,this._hasInitialized=!0}}})),columnCount:V.b({type:Number,defaultValue:7}),sidebarWidth:V.b({type:Number,defaultValue:250}),userWantsSidebar:V.b({type:Boolean,defaultValue:!0}),userWantsThumbnailStrip:V.b({type:Boolean,defaultValue:!0}),thumbnailStripHeight:V.b({type:Number,defaultValue:70}),_persistAppPreferences:B.h("columnCount","sidebarWidth","userWantsSidebar","userWantsThumbnailStrip","thumbnailStripHeight",(function(){var e=this;if(!0!==this._isIngestingPrefs){var t=this.cloudOSService;t&&(this._hasPendingPersist||(this._hasPendingPersist=!0,X.a((function(){t.setAppPreferences(e.toJSON()),e._hasPendingPersist=!1}),1e3)))}})),toJSON:function(){return{prefsVersion:1,columnCount:this.columnCount,sidebarWidth:this.sidebarWidth,userWantsSidebar:this.userWantsSidebar,userWantsThumbnailStrip:this.userWantsThumbnailStrip,thumbnailStripHeight:this.thumbnailStripHeight}},staticMembers:{__QUALIFIED_CLASS_NAME__:"AppPreferences"}}),pi=n(82),fi=n(255),gi=n(390),mi=n(812).a.extend({viewOutlet:null,start:function(){var e=this,t=this,n=arguments,i=this.parentViewController.view,r=this.toView,a=this.viewOutlet;a?i[a]=r:_.b("ViewOutletViewControllerTransition expects a `viewOutlet` property"),t.__s._$EM$start.apply(t,n),X.a((function(){e.didFinish()}))},__superMap:{_$EM$start:"start"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewOutletViewControllerTransition"}}),_i=V.a.extend({type:fi.a,defaultTransitionClass:mi,init:function(e){var t=this,n=arguments;return"string"===typeof e?t.__s._$mb$init.call(t,{viewOutlet:e}):t.__s._$mb$init.apply(t,n)},initializeMember:function(e,t){var n=this,i=arguments,r=n.__s._$rL$initializeMember.apply(n,i),a=this,s="_"+t+"DidChange",o="_"+t,l="_"+t+"_view";return this._internalValueKey=o,this._internalViewKey=l,e.registerMetadata(s,B.h(t,t+".view",(function(e,t){a._transitionToChildViewControllerAndView(this,e,t)}))),r},transitionToChildViewController:function(e,t,n,i){return this._transitionToChildViewControllerAndView(e,t,t&&t.view,n,i)},_transitionToChildViewControllerAndView:function(e,t,n,i,r){var a=e[this._internalValueKey],s=e[this._internalViewKey];if(e[this._internalValueKey]=t,e[this._internalViewKey]=n,a===t&&s===n)return Z.a.resolve();i||(i=this.transitionClassForTransition.call(e,a,s,t,n,this));var o=gi.a(this.options,r||{},{parentViewController:e,fromViewController:a,toViewController:t,fromView:s,toView:n}),l=this.createTransition.call(e,i,o,this);l.delegate=this,l.delegateContext=e;var c=this.performTransition.call(e,l,this);return e[this.key]!==t&&(e[this.key]=t),c},inheritFrom:function(e){var t=this,n=arguments;t.__s._$1SP$inheritFrom.apply(t,n),this.viewOutlet||(this.viewOutlet=e.viewOutlet)},performTransition:function(e){return e.run()},transitionClassForTransition:function(e,t,n,i,r){return r.defaultTransitionClass},createTransition:function(e,t,n){return e.create(t)},transitionWillStart:function(e){},transitionDidFinish:function(e){},__superMap:{_$mb$init:"init",_$rL$initializeMember:"initializeMember",_$1SP$inheritFrom:"inheritFrom"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildViewControllerProperty"}});function vi(e){return _i.define.apply(_i,arguments)}var bi,yi={transition:function(e,t,n,i){var r=this.getMetadata(e);return pi.a(r,_i)||_.b("Can only call `transition` for an `Anim.ChildViewControllerProperty`"),r.transitionToChildViewController(this,t,n,i)}},wi=n(231),Ii=n(813),Si=Ii.a.extend({duration:250,_startTime:0,startAnimation:function(){var e,t,n;this.fromViewController,this.toViewController,e=this.fromView,t=this.toView,n=this.duration,window.event&&window.event.shiftKey&&(n*=10),e&&(e.instanceOf(wi.a)||_.b("View must have an 'opacity' animated property")),t&&(t.instanceOf(wi.a)||_.b("View must have an 'opacity' animated property"),t.get("isAnimating")||(t.opacity=0)),e&&e.animate("opacity",0,n,function(){this.animationDidFinish()}.bind(this)),t&&t.animate("opacity",1,n,function(){this.animationDidFinish()}.bind(this))},staticMembers:{__QUALIFIED_CLASS_NAME__:"FadeViewControllerTransition"}}),Ci=n(530),Ei=n(778),Ai=n(285),Oi=n(78),Ti=n(300),Mi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.url=void 0,this.hostname=void 0,this.domainLogo=void 0,this.fallbackDomain=void 0,this.servicesDomain=void 0,this.domain=void 0,this.subdomain=void 0,this.suffix=void 0,!e)throw new Error("Domain URL is required");if(!t)throw new Error("Services domain is required");this.url=e,this.servicesDomain=t;var i=e.hostname;this.hostname=i;var r=n.domain,a=n.subdomain,s=n.domainLogo,o=n.fallbackDomain,l=n.suffix;this.domainLogo=s,this.fallbackDomain=o,this.domain=r,this.subdomain=a,this.suffix=l},Di=new Mi(new globalThis.URL("https://www.icloud.com/"),"icloud.com",{domain:"icloud.com",subdomain:"www",domainLogo:"icloud.logo",suffix:".com"}),Pi=new Mi(new globalThis.URL("https://www.icloud.com.cn/"),"icloud.com.cn",{domain:"icloud.com.cn",subdomain:"www",suffix:".com.cn",domainLogo:"icloud.cn.logo"}),Li=new Mi(new globalThis.URL("https://beta.icloud.com/"),"icloud.com",{domain:"icloud.com",subdomain:"beta",domainLogo:"icloud.logo",suffix:".com",fallbackDomain:Di}),Ri=new Mi(new globalThis.URL("https://future.icloud.com/"),"icloud.com",{domain:"icloud.com",subdomain:"future",domainLogo:"icloud.logo",suffix:".com",fallbackDomain:Li}),xi=new Mi(new globalThis.URL("https://carry.icloud.com/"),"icloud.com",{domain:"icloud.com",subdomain:"carry",domainLogo:"icloud.logo",suffix:".com",fallbackDomain:Di}),Ni=new Mi(new globalThis.URL("https://facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"facetime"}),Fi=new Mi(new globalThis.URL("https://prod-facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"prod-facetime"}),Vi=new Mi(new globalThis.URL("https://carry-facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"carry-facetime"}),ki=new Mi(new globalThis.URL("https://icloud1-facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"icloud1-facetime"}),Bi=new Mi(new globalThis.URL("https://icloud2-facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"icloud2-facetime"}),ji=new Mi(new globalThis.URL("https://icloud3-facetime.apple.com/"),"icloud.com",{domain:"apple.com",subdomain:"icloud3-facetime"}),Ui=Object.freeze({iCloudDomainProperty:Di,iCloudChinaDomainProperty:Pi,iCloudBetaDomainProperty:Li,iCloudFutureDomainProperty:Ri,iCloudCarryDomainProperty:xi,faceTimeDomainProperty:Ni,faceTimeProdDomainProperty:Fi,faceTimeCarryDomainProperty:Vi,faceTimeICloud1DomainProperty:ki,faceTimeICloud2DomainProperty:Bi,faceTimeICloud3DomainProperty:ji});function Gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Wi=0,$i=Ui.iCloudDomainProperty,zi=Ui.iCloudChinaDomainProperty,Ki=Ui.iCloudBetaDomainProperty,qi=Ui.iCloudFutureDomainProperty,Qi=Ui.iCloudCarryDomainProperty,Yi=Ui.faceTimeDomainProperty,Zi=Ui.faceTimeCarryDomainProperty,Xi=Ui.faceTimeProdDomainProperty,Ji=Ui.faceTimeICloud1DomainProperty,er=Ui.faceTimeICloud2DomainProperty,tr=Ui.faceTimeICloud3DomainProperty,nr=((bi={})[$i.hostname]=$i,bi[zi.hostname]=zi,bi[Ki.hostname]=Ki,bi[qi.hostname]=qi,bi[Qi.hostname]=Qi,bi[Yi.hostname]=Yi,bi[Zi.hostname]=Zi,bi[Xi.hostname]=Xi,bi[Ji.hostname]=Ji,bi[er.hostname]=er,bi[tr.hostname]=tr,bi),ir="__private_"+Wi+++"_sharedInstance",rr=function(){function e(){this.current=void 0;var e=globalThis.location.hostname,t=nr[e];if(!t)throw new Error("hostname "+e+" is not supported");this.current=t}var t,n,i;return e.findAvailableHostname=function(t){if(!(t instanceof Array))throw new Error("A valid domain list is required");for(var n,i=e.sharedInstance.current;i;){if(t.includes(i)){n=i.hostname;break}i=i.fallbackDomain}return n},t=e,i=[{key:"sharedInstance",get:function(){var e=Hi(this,ir)[ir];return e||(e=Hi(this,ir)[ir]=new this),e}},{key:"isDomainCN",get:function(){return e.sharedInstance.current===zi}}],(n=[{key:"allowedRemoteOrigins",get:function(){return Object.entries(Ui).map((function(e){return e[0],e[1].url.origin}))}}])&&Gi(t.prototype,n),i&&Gi(t,i),e}();Object.defineProperty(rr,ir,{writable:!0,value:void 0});var ar={mixinDependencies:[Tn.a],webServices:$n.a.define()},sr=rr.sharedInstance.current,or=new Map;function lr(e,t){return cr.sharedInstance.urlForServiceName(e,t)}or.set("ckdatabasews",{url:"https://ckdatabasews."+sr.servicesDomain,status:"active"}),or.set("docws",{url:"https://docws."+sr.servicesDomain,status:"active"}),or.set("feedbackws",dr());var cr=P.a.extend({mixinDependencies:[ie.a],configurationProvider:H.d({type:ar}),webServices:H.d({readOnly:!0,type:Map,get:function(){var e=this.configurationProvider;return e||_.b("[WebServicesConfiguration] No configuration provider found"),e?e.webServices:void 0}}),hasWebService:function(e){return!!this.getWebServiceInfo(e)},getWebServiceInfo:function(e){var t=this.webServices;if(t)return ur(t,e,"getWebServiceInfo",!1)},isWebServiceActive:function(e){var t=this.webServices;return!!t&&"active"===ur(t,e,"isWebServiceActive").status},urlForServiceName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ur(this.webServices,e,"urlForServiceName"),i=n.url;return i+"/"+t},serviceNameForUrl:function(e){var t;if(this.configurationProvider){var n=this.webServices;n&&n.forEach((function(n,i){var r=n.url;r&&(r.endsWith(":443")&&(r=r.match("(.*):443")[1]),e.startsWith(r)&&(t=i))}))}return t},staticMembers:{__QUALIFIED_CLASS_NAME__:"WebServicesConfiguration"}});function ur(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Vn.a(t)?_.b(n+": a serviceName must be specified"):e||_.b(n+": No services found, searched for "+t);var r=e.get(t);return r||"feedbackws"!==t?i&&!r&&_.b(n+": Service "+t+" was not found"):(r=dr(e),e.set("feedbackws",r)),r}function dr(e){var t=sr.servicesDomain,n="";if(e&&t===Ui.iCloudChinaDomainProperty.servicesDomain){var i,r=/^https:\/\/(p\d{2,})/g,a={};for(var s in e.forEach((function(e){var t=e.url,n=r.exec(t);if(n&&n.length){var i=n[1];a[i]?a[i]=1:a[i]+=1}})),a)(!i||a[s]>a[i])&&(i=s);i&&(n=i+"-")}return{url:"https://"+n+"feedbackws."+t,status:"active"}}var hr=n(223),pr=n(189),fr=n(97),gr={mixinDependencies:[Tn.a],authenticationStepDidComplete:Mn.a.define(),authenticationDidComplete:Mn.a.define()},mr=n(311);function _r(e){var t="function"===typeof Map?new Map:void 0;return(_r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return vr(e,arguments,wr(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),yr(i,e)})(e)}function vr(e,t,n){return(vr=br()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&yr(r,n.prototype),r}).apply(null,arguments)}function br(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ir=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).name="SerializationError",n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,yr(t,n),i}(_r(Error));function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Cr={serialize:function(){var e=this.getMetadataByType(H.a),t={};for(var n in Dr(this),e){var i=e[n],r=i.key,a=i.serialization;if(!a||!a.ignore){var s=Ar(this,i);void 0!==s&&(t[Er(r,a)]=s)}}return t},staticMembers:{deserialize:function(e){var t=void 0;if(e&&g.a(e)){var n=(t=this.create()).getMetadataByType(H.a);for(var i in n){var r=n[i],a=r.key,s=r.serialization,o=e[Er(a,s)];s&&s.ignore||(t[a]=Tr(t,o,r))}Dr(t)}return t}}};function Er(e,t){var n=e;if(t){var i=t.propertyName;i&&"string"===typeof i&&i.length>0&&(n=i)}return n}function Ar(e,t,n){var i=t.key,r=t.type,a=t.getForObject(e);return Pr(r)?function(e,t,n,i){var r;if(n){r=[];for(var a=0,s=n.length;a<s;a++){var o=n[a];r.push(Or(e,t,o))}}return r}(e,i,a):Lr(r)?function(e,t,n,i){var r;if(n){r={};for(var a,s=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Sr(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sr(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(a=s()).done;){var o=a.value,l=o[0],c=o[1];r[l]=Or(e,t,c)}}return r}(e,i,a):Or(e,i,a)}function Or(e,t,n){var i;if(void 0!==n&&null!==n)if(n.isObject){if(!n||!n.hasMixin(Cr))throw new Ir("["+q.a(e)+"] Property "+t+" does not support serialization");n&&(i=n.serialize())}else i=n;return i}function Tr(e,t,n){var i=n.type,r=n.key;return Pr(i)?function(e,t,n){var i,r=n.key,a=n.serialization;if(t){var s=Object;if(a){var o=a.collectionObjectType;o&&(s=o)}i=[];for(var l=0,c=t.length;l<c;l++){var u=t[l];i.push(Mr(e,r,s,u))}}return i}(e,t,n):Lr(i)?function(e,t,n){var i,r=n.key,a=n.serialization;if(t){var s=Object;if(a){var o=a.collectionObjectType;o&&(s=o)}for(var l in i=new Map,t){var c=t[l];i.set(l,Mr(e,r,s,c))}}return i}(e,t,n):Mr(e,r,i,t)}function Mr(e,t,n,i){var r,a="string"===typeof(r=n)?Rr(r):"function"===typeof r&&Rr(typeof r());if(i&&!a){if(n.hasMixin(Cr))return n.deserialize(i);throw new Ir("["+q.a(e)+"] Property "+t+" does not support serialization")}return i}function Dr(e){var t=e.getMetadataByType(H.a),n=[];for(var i in t){var r=t[i],a=r.validators,s=r.key;if(a){for(var o=[],l=0;l<a.length;l++){var c=a[l];c.validate(r.getForObject(e),s,e)||o.push(c.message)}if(o&&o.length>0){var u="Validation for field "+s+" failed - "+o.join(", ")+".";n.push(u)}}}if(n&&n.length>0)throw new Ir("["+q.a(e)+"] "+n.join(" "))}function Pr(e){return"function"===typeof e&&Array.isArray(new e)}function Lr(e){return"function"===typeof e&&new e instanceof Map}function Rr(e){return"string"===e||"number"===e||"boolean"===e||"object"===e}var xr=we.b("UserType",{REGULAR:"Regular",MAID:"ManagedAppleID",LITE:"Lite"}),Nr=P.a.extend(B.b,{mixinDependencies:[Cr],staticMembers:{displayNameForComponents:function(e){var t,n,i=e.givenName,r=e.familyName,a=e.emailAddress,o=e.phoneNumber,l=e.nickname,c=e.companyName,u=l||i;return u&&r&&(n=xe(u)&&xe(r)?"Name.Display.NameIsCJK.FirstAndFamilyNames":"Name.Display.FirstAndFamilyNames",t=s.d(n,{firstName:u,familyName:r})),Vr(t)||(t=Vr(u)||Vr(r)||Vr(a)||Vr(o)||Vr(c)),t},__QUALIFIED_CLASS_NAME__:"AuthenticatedUser"},dsid:V.b({type:String}),alternateDSID:V.b({type:String,serialization:{propertyName:"aDsID"}}),firstName:V.b({type:String}),lastName:V.b({type:String}),fullName:V.b({type:String}),appleId:V.b({type:String}),statusCode:V.b({type:Number}),appleIdEntries:V.b({type:Array}),isManagedAppleID:V.b({type:Boolean}),brMigrated:H.d({type:Boolean}),brZoneConsolidated:H.d({type:Boolean}),tantorMigrated:H.d({type:Boolean}),completedAuthenticationStep:V.b({type:Number}),totalAuthenticationSteps:V.b({type:Number}),isAuthenticated:V.b({dependencies:["completedAuthenticationStep","totalAuthenticationSteps"],type:Boolean,readOnly:!0,get:Object.assign((function(){var e=this.completedAuthenticationStep,t=this.totalAuthenticationSteps;return e>0&&e===t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r>0&&r===a}}),serialization:{ignore:!0}}),isMAIDAccount:V.b({dependencies:["isManagedAppleID"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.isManagedAppleID}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}}),serialization:{ignore:!0}}),isiCloudLiteAccount:V.b({dependencies:["statusCode"],readOnly:!0,type:Boolean,get:Object.assign((function(){return 4===this.statusCode}),{__CW__getter:function(e,t,n,i){return 4===i.internalGet(this,t[0+n])}}),serialization:{ignore:!0}}),hasPhoneNumberAsAppleId:V.b({dependencies:["appleIdEntries"],readOnly:!0,type:Boolean,get:Object.assign((function(){return Fr(this.appleIdEntries,"PHONE_NUMBER")}),{__CW__getter:function(e,t,n,i){return Fr(i.internalGet(this,t[0+n]),"PHONE_NUMBER")}}),serialization:{ignore:!0}}),hasEmailAddressAsAppleId:V.b({dependencies:["appleIdEntries"],readOnly:!0,type:Boolean,get:Object.assign((function(){return Fr(this.appleIdEntries,"EMAIL")}),{__CW__getter:function(e,t,n,i){return Fr(i.internalGet(this,t[0+n]),"EMAIL")}}),serialization:{ignore:!0}}),accountType:V.b({type:String}),userType:V.b({dependencies:["isMAIDAccount","isiCloudLiteAccount"],readOnly:!0,type:mr.a,get:Object.assign((function(){var e=xr.REGULAR;return this.isMAIDAccount?e=xr.MAID:this.isiCloudLiteAccount&&(e=xr.LITE),e}),{__CW__getter:function(e,t,n,i){var r=xr.REGULAR;return i.internalGet(this,t[0+n])?r=xr.MAID:i.internalGet(this,t[1+n])&&(r=xr.LITE),r}}),serialization:{ignore:!0}}),beneficiaryInfo:H.d({type:Object}),isBeneficiary:H.d({readOnly:!0,serialization:{ignore:!0},type:Boolean,get:function(){var e=this.beneficiaryInfo;return e&&e.isBeneficiary}}),isBeneficiaryMultiple:H.d({readOnly:!0,serialization:{ignore:!0},type:Boolean,get:function(){var e=this.beneficiaryInfo;return e&&e.isBeneficiaryMultiple}}),beneficiaryExpiredTime:H.d({readOnly:!0,serialization:{ignore:!0},type:Number,get:function(){var e=this.beneficiaryInfo;return e&&e.beneficiaryExpiredTime}}),isHideMyEmailSubscriptionActive:H.d({type:Boolean}),isCustomDomainTransferSubscriptionActive:H.d({type:Boolean}),isCustomDomainPurchaseSubscriptionActive:H.d({type:Boolean}),isPaidDeveloper:H.d({type:Boolean}),customEmailDomainServiceEndDate:H.d({type:String}),hasUnreleasedOS:H.d({type:Boolean}),isCustomDomainsFeatureAvailable:H.d({type:Boolean}),isHideMyEmailFeatureAvailable:H.d({type:Boolean})});function Fr(e,t){if(Vn.a(e))return!1;var n=e.find((function(e){return e.isPrimary}));return!!n&&n.type===t}function Vr(e){return e&&!/^\s*$/.test(e)?e:""}var kr=n(571),Br=n(384),jr=n(1241);function Ur(e){var t="function"===typeof Map?new Map:void 0;return(Ur=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Gr(e,arguments,$r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Wr(i,e)})(e)}function Gr(e,t,n){return(Gr=Hr()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Wr(r,n.prototype),r}).apply(null,arguments)}function Hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zr=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).name="MessagingError",n.isMessagingError=!0,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Wr(t,n),i}(Ur(Error));function Kr(e,t){return(Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qr=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).name="MessagingArgumentError",n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Kr(t,n),i}(zr),Qr={mixinDependencies:[Tn.a],name:Tn.b.define(),version:Tn.b.define()},Yr=n(316),Zr=n(299);function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jr(e,t){return na(e,t)||function(e,t){return Br.a(e)&&na(e.constructor,t)&&ta(e,t)}(e,t)||function e(t,n){var i=!1;if(t&&n){var r=t.mixinDependencies;if(r&&r.length>0)if(r.includes(n))i=!0;else for(var a=0,s=r.length;a<s&&!(i=e(t,r[a]));a++);}return i}(e,t)}function ea(e){if(null===(t=e)||"object"!==typeof t||!Zr.a(t.mixinDependencies))return null;var t,n=new Set;return function e(t,n){if(Object.entries(t).forEach((function(e){var t=e[0];(function(e){var t=e.constructor;return t&&"RequiredMethod"===t.__QUALIFIED_CLASS_NAME__})(e[1])&&n.add(t)})),t.mixinDependencies)for(var i=t.mixinDependencies,r=0,a=i.length;r<a;r++)e(i[r],n)}(e,n),n}function ta(e,t){if("object"!==typeof e)return!1;var n=ea(t);if(!n)return!1;for(var i,r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Xr(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xr(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(i=r()).done;){var a=i.value;if(!Je.a(e[a]))return!1}return!0}function na(e,t){return Yr.a(e)&&e.kindOf(t)}var ia=P.a.extend({protocolName:H.d({type:String}),protocolMethodNames:H.d({type:Set}),protocolTarget:H.d({type:Object}),init:function(e,t){if(this.__s._$au$init.call(this),!e)throw new qr("ProtocolMetadata: no messagingProtocol specified");if(!t)throw new qr("ProtocolMetadata: no protocol target specified");if(!Jr(e,Qr))throw new qr("ProtocolMetadata: The messagingProtocol class does not implement MessagingProtocol");if(!(this.protocolName=e.name))throw new qr("ProtocolMetadata: no protocol name");var n=this.protocolMethodNames=ea(e);if(!n||0===n.count)throw new qr("ProtocolMetadata: Invalid list of protocol methods");this.protocolTarget=t},__superMap:{_$au$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProtocolMetadata"}});function ra(e){if(!e||!Object(J.a)(e.stack))return null;var t=e.stack.trim().split("\n"),n=t.length;if(n>500){var i=n-500;t.splice(400,i,"\u2026 "+i+" lines truncated \u2026")}return t.join("\n")}function aa(e){if(!e)return null;if(e.lineNumber)return e.lineNumber;if(e.line)return e.line;if(Object(J.a)(e.stack)){var t=e.stack.split("\n")[1];if(Object(J.a)(t)){var n=t.split(":"),i=n[n.length-2],r=parseInt(i,10);if(Object(m.a)(r)&&!Number.isNaN(r))return r}}return null}function sa(e){return e?{message:e.message,type:e.type,stack:ra(e),lineNumber:aa(e),context:Object(vt.a)(e.context)}:null}var oa=Object(we.b)("MessagingResponseStatus",{NONE:"NONE",OK:"OK",DISCONNECTED:"DISCONNECTED",CANCELED:"CANCELED",BAD_REQUEST:"BAD_REQUEST",TIMEOUT:"TIMEOUT",ERROR:"ERROR",UNDEFINED_ERROR_TYPE:"UNDEFINED_ERROR_TYPE"}),la=P.a.extend({status:H.d({type:oa,defaultValue:oa.NONE}),isOK:H.d({readOnly:!0,get:function(){return this.status===oa.OK}}),isDisconnected:H.d({type:Boolean,readOnly:!0,get:function(){return this.status===oa.DISCONNECTED}}),isCanceled:H.d({type:Boolean,readOnly:!0,get:function(){return this.status===oa.CANCELED}}),isTimeout:H.d({type:Boolean,readOnly:!0,get:function(){return this.status===oa.TIMEOUT}}),data:H.d(),error:H.d(),staticMembers:{createWithOptionalData:function(e){return la.create({status:oa.OK,data:e})},createFromError:function(e){var t=sa(e);return t?(t.buildInfo=globalThis.__CW_BUILD_INFO,pi.a(e,Error)||(t.message=JSON.stringify(e),t.stack=(new Error).stack)):t={message:"No error specified",stack:(new Error).stack},la.create({status:ca(e),error:t})},deserialize:function(e){if(!e)throw new qr("[MessagingResponse] no serialized data to deserialize");var t=la.create();t.status=oa.getItemForValue(e.status);var n=e.data;n&&(t.data=n);var i=e.error;return i&&(t.error=i),ua(t),t},__QUALIFIED_CLASS_NAME__:"MessagingResponse"},serialize:function(){ua(this);var e={status:this.status.value},t=this.data;t&&(e.data=t);var n=this.error;return n&&(e.error=n),e}});function ca(e){var t=oa.ERROR;return pi.a(e,Error)?e.isMessagingError&&"MessagingArgumentError"===e.name&&(t=oa.BAD_REQUEST):t=oa.UNDEFINED_ERROR_TYPE,t}function ua(e){var t=e.status,n=e.error;if(t===oa.NONE)throw new zr("[MessagingResponse] status was never set");if(n&&(t===oa.OK||t===oa.NONE))throw new zr("[MessagingResponse] error can not be set if the status is OK or NONE")}var da=n(545);function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function pa(e,t){if(!e)throw new qr("[wrapProtocolTargetMethods] no original protocol target specified");if(!t)throw new qr("[wrapProtocolTargetMethods] no protocol method names specified");for(var n,i=P.a.create({originalProtocolTarget:e}),r=function(){var t=n.value,r=e[t];if(!Je.a(r))throw new qr("Protocol method name "+t+" is not a Function");i[t]=function(){try{var n=e[t].apply(e,arguments);return n?da.a(n)?n.then((function(e){return la.createWithOptionalData(e).serialize()})).catch((function(e){if(e&&!e.isMessagingError)throw e;return la.createFromError(e).serialize()})):Z.a.resolve(la.createWithOptionalData(n).serialize()):Z.a.resolve(la.createWithOptionalData().serialize())}catch(i){if(i&&!i.isMessagingError)throw i;return Z.a.resolve(la.createFromError(i).serialize())}}},a=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return ha(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(n=a()).done;)r();return i}var fa=function(){function e(){}return e.every=function(e){Array.isArray(e)&&e.length&&e.every((function(e){return Object(pi.a)(e,Z.a)}))||Z.a.reject("An array containing one or more promises is required.");var t=0,n=e.length,i=Z.a.create(),r=new Array;return e.forEach((function(e,a){e.then((function(e){return r[a]=e})).catch((function(e){return r[a]=e})).finally((function(){return++t===n&&i.resolve(r)}))})),i},e}(),ga=n(572),ma=n(228),_a=ga.a.extend({hasHandlerForProcedure:function(e){return Object(K.a)(ba(e,this))},registerProcedure:function(e,t,n){!function(e,t,n,i){var r=i.channel,a=va.get(r);a||(a=new Map,va.set(r,a));var s=a.get(e);s&&Object(_.b)("A handler for `%{procedureName}` was already registered on this channel",{procedureName:e,registration:s}),a.set(e,{listener:i,target:t,handlerMethodName:n})}(e,t,n=n||e,this)},registerProcedures:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];Array.isArray(r)?this.registerProcedure(r[0],t,r[1]):this.registerProcedure(r,t)}},unregisterProcedure:function(e){var t=this.channel,n=va.get(t);n&&n.get(e).listener===this&&(n.delete(e),0===n.size&&n.delete(t))},unregisterProcedures:function(e){var t=this;e.forEach((function(e){t.unregisterProcedure(e)}))},unregisterAllProcedures:function(){var e=va.get(this.channel);if(e)for(var t,n=e.entries();t=n.next().value;){var i=t[0];t[1].listener===this&&e.delete(i)}},shouldHandleMessage:function(e){var t=this;return(Array.isArray(e)?e:[e]).filter((function(e){return e&&Object(K.a)(e.jsonrpc)&&e.jsonrpc===t.messageFormatter.jsonRpcVersion&&Object(K.a)(e.method)})).length>0},handleMessage:function(e){var t=this,n=Array.isArray(e),i=n?e:[e],r=Z.a.wrapFunction(ya),a=this.messageFormatter,s=[],o={};return i.forEach((function(e){var n=e.id,i=r(e,t).then((function(e){o[n]=e!==Sa?function(e,t,n){if(Object(K.a)(t))return e.generateResultMessageFor(t,n)}(a,n,e):Sa})).catch((function(e){if(o[n]=wa(a,n,e),!(e instanceof ma.b))throw e}));s.push(i)})),Z.a.all(s).then((function(){return Ia(t,i,o,n)}),(function(e){throw Ia(t,i,o,n),e}))},dispose:function(){this.unregisterAllProcedures(),this.__s._$30y$dispose.call(this)},__superMap:{_$30y$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcListenerFix"}}),va=new Map;function ba(e,t){var n=va.get(t.channel);if(n){var i=n.get(e);if(i&&i.listener===t)return i}return null}function ya(e,t){if(t.isDisposed)return new Promise((function(){}));var n=e.method,i=e.params,r=void 0===i?[]:i;if(Object(K.a)(r)&&!Array.isArray(r)){var a="JSON-RPC calls in JavaScript cannot support `params` as an Object, only as an Array";throw u.b.error(a,e),new ma.d(a,{message:e})}var s=ba(n,t);if(!s){if(function(e,t){var n=va.get(t);return!!n&&!!n.get(e)}(n,t.channel))return Sa;var o="A JSON-RPC registration was not found for method `"+n+"`.";throw u.b.error(o,e,t),new ma.f(o,{message:e,listener:t})}var l=s.target;if(!l)throw u.b.error("The JSON-RPC target was not found",e,t),new ma.f("The JSON-RPC target was not found",{message:e,listener:t});var c=l[s.handlerMethodName];if(!c)throw u.b.error("The JSON-RPC method was not found",e,t),new ma.f("The JSON-RPC method was not found",{message:e,listener:t});return c.call.apply(c,[l].concat(r))}function wa(e,t,n){if(Object(K.a)(t))return e.generateErrorMessageFor(t,n)}function Ia(e,t,n,i){if(!e.isDisposed){var r=e.messageFormatter,a=[];if(t.forEach((function(e){var t=e.id;if(Object(K.a)(t)){var i=n[t];if(i)i!==Sa&&a.push(i);else{var s=new ma.c("The JSON-RPC call was part of a batch which failed due to a fatal error thrown by another call.");i=wa(r,t,s)}}})),a.length>0){var s=i?a:a[0];e.channel.send(e.serializer.encode(s))}}}var Sa=Symbol("Do not reply");function Ca(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Ea(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Aa=P.a.extend({channel:H.d({type:kr.a}),connectionTimeout:H.d({type:Number,defaultValue:3e4}),init:function(e,t){if(this.__s._$2fq$init.call(this),!Jr(e,kr.a))throw new qr("MessagingChannel - A CW.ChannelProtocol is required");this.channel=e,t&&(this.connectionTimeout=t)},setListener:function(e,t){if(!Jr(t,e))throw new qr("MessagingChannel: The specified protocol class target does not implement specified protocol");this._listenerProtocolMetadata=ia.create(e,t)},setConnection:function(e,t){this._connectionProtocolMetadata=ia.create(e,t)},start:function(){var e=this._listenerProtocolMetadata,t=this._connectionProtocolMetadata;if(!e&&!t)throw new qr("Messaging channel has not been configured");var n=this.channel,i=this.connectionTimeout;e&&this._configureListener(n,e),t&&this._configureConnection(n,i,t)},stop:function(){var e=this._connection,t=this._connectionProtocolMetadata,n=this._connectionPendingPromises,i=this._listener,r=this._listenerProtocolMetadata;if(i&&(r||_.b("MessagingChannel listener exists without a corresponding protocol metadata"),this._unregisterListenerMethods(i,r),this._listener=void 0,this._listenerProtocolMetadata=void 0),e&&(t||_.b("MessagingChannel connection exists without a corresponding protocol metadata"),this._connection=void 0,this._connectionProtocolMetadata=void 0,this._connectionPendingPromises=void 0,n.size)){var a=Array.from(n),s=la.create({status:oa.DISCONNECTED});return a.every((function(e){return e.resolve(s)})),fa.every(a).then((function(e){return e&&e.length||0}))}return Z.a.resolve(0)},_constructRPCMethodName:function(e,t){if(!e)throw new qr("MessagingUtils - no class name specified");if(!J.a(e))throw new qr("MessagingUtils - class name specified is not a string");if(!t)throw new qr("MessagingUtils - no method name specified");if(!J.a(t))throw new qr("MessagingUtils - method name specified is not a string");return e+"-"+t},_createJsonRpcListener:function(e){if(!e)throw new qr("MessagingChannel: _createJsonRpcListener - A CW.ChannelProtocol is required");return _a.create({channel:e})},_createJsonRpcCaller:function(e){if(!e)throw new qr("MessagingChannel: _createJsonRpcCaller - A CW.ChannelProtocol is required");return jr.a.create({channel:e})},_listenerProtocolMetadata:H.d({type:ia}),_listener:H.d({type:_a,strong:!0}),_connectionProtocolMetadata:H.d({type:ia}),_connection:H.d({type:jr.a,strong:!0}),_connectionPendingPromises:k.c(Set),_configureListener:function(e,t){this._listener=this._setupJsonRpcListener(e,t)},_configureConnection:function(e,t,n){this._connection=this._setupJsonRpcCaller(e,t,n)},_setupJsonRpcCaller:function(e,t,n){for(var i,r=this,a=this._connectionPendingPromises,s=n.protocolName,o=n.protocolMethodNames,l=n.protocolTarget,c=q.a(l),u=this._connection=this._createJsonRpcCaller(e),d=function(){var e=i.value,n=r._constructRPCMethodName(s,e);l[e]=function(){r._connection||_.b("["+c+" => OUTBOUND] MesssgingChannel has no connection --\x3e '"+s+"."+e+"'");var i=Z.a.create();a.add(i);for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];u.callRemoteProcedure.apply(u,[n].concat(l)).then((function(e){i.resolve(la.deserialize(e))})).catch((function(e){i.resolve(la.createFromError(e))}));var h=X.a((function(){i.resolve(la.create({status:oa.TIMEOUT}))}),t);return i.finally((function(){globalThis.clearTimeout(h),a.delete(i)})),i}},h=Ca(o);!(i=h()).done;)d();return u},_setupJsonRpcListener:function(e,t){for(var n,i=t.protocolName,r=t.protocolMethodNames,a=t.protocolTarget,s=(q.a(a),this._listener=this._createJsonRpcListener(e)),o=pa(a,r),l=Ca(r);!(n=l()).done;){var c=n.value,u=this._constructRPCMethodName(i,c),d=o[c];if(!Je.a(d))throw new qr("Protocol method name "+c+" is not a Function");s.registerProcedure(u,o,c)}return s},_unregisterListenerMethods:function(e,t){for(var n,i=t.protocolName,r=t.protocolMethodNames,a=t.protocolTarget,s=(q.a(a),pa(a,r)),o=Ca(r);!(n=o()).done;){var l=n.value,c=this._constructRPCMethodName(i,l),u=s[l];Je.a(u)||_.b("Protocol method name "+l+" is not a Function"),e.unregisterProcedure(c)}},__superMap:{_$2fq$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MessagingChannel"}});function Oa(e){var t="function"===typeof Map?new Map:void 0;return(Oa=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Ta(e,arguments,Pa(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Da(i,e)})(e)}function Ta(e,t,n){return(Ta=Ma()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Da(r,n.prototype),r}).apply(null,arguments)}function Ma(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pa(e){return(Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var La=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,"Invalid state transition.  Expected state: "+t+", actual: "+n)||this).name="InvalidStateTransitionError",i}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Da(t,n),i}(Oa(Error)),Ra=te.a.sharedInstance;function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=g.a(e)?Me.a(e):{},i=new Error;return n.calleeStack=Na(i.stack,t),n}function Na(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e){var i=n;(Ra.isChrome||Ra.isEdge||Ra.isIE)&&i++;var r=e.split("\n");i<r.length&&(t=r.splice(i).join("\n"))}return t}function Fa(e,t,n){for(var i=new Array,r=t;r<n;r++)i.push(Va(e.stack,r));return i}function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Na(e,t);if(n){var i=n.split("\n"),r=i[0].trim();if(Ra.isChrome)return Ba(r);if(Ra.isEdge||Ra.isIE)return ka(r);if(Ra.isSafari)return ja(r);if(Ra.isFirefox)return Ua(r)}return"(unknown function)"}function ka(e){var t=e.match(/^at\s+(.+)\s+\(/);return Array.isArray(t)&&t[1]||"(unknown function)"}function Ba(e){var t=e.match(/^at\s+(.+)\s+\(/);return Array.isArray(t)&&t[1]||"(anonymous function)"}function ja(e){var t=e.match(/^(.+)@/);return Array.isArray(t)&&t[1]||"(anonymous function)"}function Ua(e){var t=e.match(/^(.+)@/);return Array.isArray(t)&&t[1]||"(anonymous function)"}function Ga(e,t){var n=!1;return pi.a(e,mr.a)&&pi.a(t,we.a)&&(n=e.group===t),n}function Ha(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!e||!t||!Array.isArray(i))return!1;for(var a=0,s=[t].concat(i);a<s.length;a++){var o=s[a];if(!Ga(o,e))return!1}return!!i.find((function(e){return e===t}))}function Wa(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!Ha.apply(void 0,[e,t].concat(i))){var a=new La(i,t),s=Fa(a,2,7);throw a.message=a.message+" => "+s.join(","),a}}var $a=we.b("ProcessState",{NONE:"NONE",LOADING:"LOADING",LOADED:"LOADED",RUNNING:"RUNNING",UNLOADING:"UNLOADING",UNLOADED:"UNLOADED",TERMINATED:"TERMINATED"});function za(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ha.apply(void 0,[$a,e].concat(n))}function Ka(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Wa.apply(void 0,[$a,e].concat(n))}var qa={invokeLater:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;Je.a(e)||_.b("A method to invoke Function must be specified"),(!m.a(t)||t<0)&&_.b("millisToWaitToInvoke must be a number >= 0"),n&&Vn.a(n)&&_.b("When provided, optional methodToInvokeIdentifier must be a String with a length > 0");var i=this._scheduledInvokeLaterMethods;i||(i=this._scheduledInvokeLaterMethods=new Map);var r=n||e.toString();i.has(r)&&_.b("An invokeLater has already been scheduled for "+r);var a=X.a((function(){var t;i.delete(r),t=n?e(n):e(),da.a(t)&&t.catch(hn.a((function(e){throw e})))}),t);i.set(r,a)},isInvokeLaterScheduled:function(e){if(!this._scheduledInvokeLaterMethods)return!1;var t=this._getScheduledInvokeLaterMethodKeyWithValidation(e);return this._scheduledInvokeLaterMethods.has(t)},cancelInvokeLater:function(e){var t=this._getScheduledInvokeLaterMethodKeyWithValidation(e),n=this._scheduledInvokeLaterMethods,i=n.get(t);m.a(i)||_.b("No invokeLater scheduled matching the methodToInvokeOrMethodToInvokeIdentifier"),globalThis.clearTimeout(i),n.delete(t)},cancelInvokeLaterMethods:function(){var e=this._scheduledInvokeLaterMethods;e&&(e.forEach((function(e){return globalThis.clearTimeout(e)})),e.clear(),this._scheduledInvokeLaterMethods=void 0)},_getScheduledInvokeLaterMethodKeyWithValidation:function(e){var t;return this._scheduledInvokeLaterMethods||_.b("Invalid state scheduledInvokeLaterMethods is undefined"),Je.a(e)?t=e.toString():Vn.a(e)?_.b("methodToInvokeOrMethodToInvokeIdentifier must be a non-empty String or a Function"):t=e,t},_scheduledInvokeLaterMethods:void 0},Qa={mixinDependencies:[Qr],name:"ServiceConnectionMessagingProtocol",version:1,registerService:Mn.a.define(),probeServiceRegistration:Mn.a.define(),connectToService:Mn.a.define(),invokeServiceMethod:Mn.a.define()},Ya=we.b("MessagingChannelType",{LISTENER:"LISTENER",CONNECTION:"CONNECTION",BIDIRECTIONAL:"BIDIRECTIONAL"}),Za=P.a.extend({mixinDependencies:[qa,Qa],processId:H.d({type:String}),processState:H.d({readOnly:!0,type:$a,get:function(){return this._processState}}),isConnected:H.d({readOnly:!0,type:Boolean,get:function(){return za(this.processState,$a.LOADING,$a.LOADED,$a.RUNNING)}}),isTerminated:H.d({readOnly:!0,type:Boolean,get:function(){return za(this.processState,$a.TERMINATED)}}),delegate:H.d(),channel:H.d({type:kr.a}),localProtocol:H.d(),localProtocolTarget:H.d({type:P.a}),remoteProtocol:H.d(),remoteProxy:H.d({defaultValue:function(){var e=q.a(this);return P.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:e+".remoteProxy"}}).create()}}),connectionTimeout:H.d({type:Number,defaultValue:3e4}),messagingChannelClass:H.d({type:Aa.constructor,defaultValue:Aa}),primaryMessagingChannel:H.d({type:Aa}),connect:function(){Ka(this.processState,$a.NONE),this._processState=$a.LOADING;var e=this.localProtocol,t=this.localProtocolTarget,n=this.remoteProtocol,i=this.connectionTimeout;this.primaryMessagingChannel=this.createMessagingChannel(e,t,n,i)},disconnect:function(){var e=this;Ka(this.processState,$a.LOADING,$a.LOADED,$a.RUNNING),this._processState=$a.UNLOADING;var t=Array.from(this._messagingChannels);return this.cancelInvokeLaterMethods(),this._messagingChannels.clear(),(t.length?fa.every(t.map((function(e){return e.stop()}))):Z.a.resolve()).then((function(){e._processState=$a.UNLOADED}))},terminate:function(){Ka(this.processState,$a.UNLOADED),this._processState=$a.TERMINATED;var e=this.remoteProxy,t=function(){_.b("The remote proxy is no longer connected.")};Object.keys(e).forEach((function(n){Je.a(e[n])&&(e[n]=t)})),this.channel=null,this.remoteProxy=null,this._messagingChannels=null},createListenerOnlyMessagingChannel:function(e,t,n,i){return this._createMessagingChannel({type:Ya.LISTENER,localProtocol:e,localProtocolTarget:t,timeoutMS:n,messagingChannelClass:i})},createConnectionOnlyMessagingChannel:function(e,t,n){return this._createMessagingChannel({type:Ya.CONNECTION,remoteProtocol:e,timeoutMS:t,messagingChannelClass:n})},createMessagingChannel:function(e,t,n,i,r){return this._createMessagingChannel({type:Ya.BIDIRECTIONAL,localProtocol:e,localProtocolTarget:t,remoteProtocol:n,timeoutMS:i,messagingChannelClass:r})},_processState:H.d({type:$a,defaultValue:$a.NONE}),_messagingChannels:H.d({type:Set,defaultValue:k.c(Set)}),_createMessagingChannel:function(e){this._validateRequiredProperties(e);var t=Ya.BIDIRECTIONAL,n=Ya.LISTENER,i=Ya.CONNECTION,r=this.channel,a=this.remoteProxy,s=this._messagingChannels,o=this.messagingChannelClass;e.messagingChannelClass&&(o=e.messagingChannelClass);var l=o.create(r);e.type!==t&&e.type!==n||l.setListener(e.localProtocol,e.localProtocolTarget),e.type!==t&&e.type!==i||l.setConnection(e.remoteProtocol,a);var c=e.timeoutMS;return c&&(l.connectionTimeout=c),l.start(),s.add(l),l},_validateRequiredProperties:function(e){var t=this.delegate,n=this.remoteProxy,i=this.channel,r=this.messagingChannelClass,a=Ya.BIDIRECTIONAL,s=Ya.LISTENER,o=Ya.CONNECTION;t||_.b("A delegate is required"),Jr(i,kr.a)&&!i.isDisconnected||_.b("A connected CW.ChannelProtocol implementation is required"),"object"!==typeof n&&_.b("A remoteProxy Object is required"),r||_.b("A MessagingChannel Class is required."),e.type!==a&&e.type!==s||(Jr(e.localProtocol,Qr)||_.b("A valid localProtocol is required"),Br.a(e.localProtocolTarget)||_.b("A localProtocolTarget is required")),e.type!==a&&e.type!==o||Jr(e.remoteProtocol,Qr)||_.b("A valid remoteProtocol is required")},subscribeIdentifierToTopic:function(e,t){return G.a.application.subscribeIdentifierToTopic(e,t)},publishMessageOnTopicFromIdentifier:function(e,t,n){return G.a.application.publishMessageOnTopicFromIdentifier(e,t,n)},unsubscribeIdentifierFromTopic:function(e,t){return G.a.application.unsubscribeIdentifierFromTopic(e,t)},registerService:function(e,t){return G.a.application.registerService(e,t)},connectToService:function(e,t){return G.a.application.connectToService(e,t)},invokeServiceMethod:function(e,t,n,i,r){return G.a.application.invokeServiceMethod(e,t,n,i,r)},probeServiceRegistration:function(e){return G.a.application.probeServiceRegistration(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProcessReference"}}),Xa={mixinDependencies:[Qr],name:"PublishSubscribeProtocol",version:.1,subscribeIdentifierToTopic:Mn.a.define(),publishMessageOnTopicFromIdentifier:Mn.a.define(),unsubscribeIdentifierFromTopic:Mn.a.define()},Ja={mixinDependencies:[Qr,Xa,Qa],name:"MessagingToChildProtocol",version:.1,beginLaunching:Mn.a.define(),hostingStateDidChange:Mn.a.define(),openItems:Mn.a.define()},es={mixinDependencies:[Qr,Xa,Qa],name:"MessagingFromChildProtocol",version:.1,isReadyToReceiveMessages:Mn.a.define(),didFinishLaunching:Mn.a.define(),isReadyToTerminateDidChange:Mn.a.define(),didEnd:Mn.a.define(),reportNonFatalError:Mn.a.define(),recordException:Mn.a.define(),willUnload:Mn.a.define(),wantsReload:Mn.a.define()},ts=Za.extend({delegate:H.d({type:Ja}),localProtocol:Ja,localProtocolTarget:H.d({readOnly:!0,type:Ja,get:function(){return this.delegate}}),remoteProtocol:es,notifyChildApplicationIsReady:function(){var e=this;return Ka(this.processState,$a.LOADING),this._processState=$a.LOADED,this.remoteProxy.isReadyToReceiveMessages().then((function(t){return t.isOK&&(Ka(e.processState,$a.LOADED),e._processState=$a.RUNNING),t}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"ParentProcessReference"}}),ns=Object.freeze({USER_INITIATED:"USER_INITIATED",UNCAUGHT_EXCEPTION:"UNCAUGHT_EXCEPTION",LAUNCH_DEPENDENCY_UNAVAILABLE:"LAUNCH_DEPENDENCY_UNAVAILABLE",CANNOT_LOAD_STARTUP_DATA:"CANNOT_LOAD_STARTUP_DATA",TIMEOUT:"TIMEOUT",MESSAGING_TIMEOUT:"MESSAGING_TIMEOUT",DISCONNECTED:"DISCONNECTED"}),is={messagingResponseErrorTerminationMethod:$n.a.define(),terminateIfMessagingResponseError:function(e){var t=this.messagingResponseErrorTerminationMethod;Je.a(t)||_.b("A messagingResponseErrorTerminationMethod property returning a function is required"),pi.a(e,la)||_.b("A MessagingResponse is required.");var n=!1;return e.isDisconnected||e.isCanceled||e.isOK||(t.call.apply(t,[this].concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:globalThis.__CW_BUILD_INFO;pi.a(e,la)||_.b("A MessagingResponse Instance is required.");var i=ns.USER_INITIATED,r=ns.MESSAGING_TIMEOUT,a=ns.DISCONNECTED,s=ns.UNCAUGHT_EXCEPTION,o=s;e.isOK?o=i:e.isTimeout?o=r:e.isDisconnected&&(o=a);var l=xa(e.serialize(),t+1,n);return l.buildInfo=n,[o,l]}(e,2,globalThis.__CW_BUILD_INFO))),n=!0),n}},rs={mixinDependencies:[Tn.a],identifier:$n.a.define(),parentIdentifier:$n.a.define(),parentProxy:$n.a.define(),childProxyMap:$n.a.define()},as=P.a.extend({localHandlers:H.d({get:function(){return Object.freeze(Array.from(this._localHandlersSet))}}),addHandler:function(e){var t=!1;return this._localHandlersSet.has(e)||(t=!0,this._localHandlersSet.add(e)),t},removeHandler:function(e){return this._localHandlersSet.delete(e)},registeredIdentifiers:H.d({get:function(){return Object.freeze(Array.from(this._registeredIdentifiersSet))}}),addIdentifier:function(e){var t=!1;return this._registeredIdentifiersSet.has(e)||(this._registeredIdentifiersSet.add(e),t=!0),t},removeIdentifier:function(e){return this._registeredIdentifiersSet.delete(e)},isEmpty:function(){return 0===this._localHandlersSet.size&&0===this._registeredIdentifiersSet.size},_localHandlersSet:k.c(Set),_registeredIdentifiersSet:k.c(Set),staticMembers:{__QUALIFIED_CLASS_NAME__:"MessagingHandlers"}});function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var os=P.a.extend({registerLocalHandler:function(e,t){if(!e)throw new qr("[MessagingHandlersMap] registerLocalHandler: No key specified");if(!t)throw new qr("[MessagingHandlersMap] registerLocalHandler: No handler specified");var n=!1,i=this._map.get(e);return i?n=i.isEmpty():(i=as.create(),this._map.set(e,i),n=!0),i.addHandler(t),n},getLocalHandlers:function(e){if(!e)throw new qr("[MessagingHandlersMap] getLocalHandlers: No key specified");var t=this._map.get(e);return t?t.localHandlers:[]},unregisterLocalHandler:function(e,t){if(!e)throw new qr("[MessagingHandlersMap] unregisterLocalHandler: No key specified");if(!t)throw new qr("[MessagingHandlersMap] unregisterLocalHandler: No handler specified");var n=!1,i=this._map.get(e);return i&&(i.removeHandler(t),(n=i.isEmpty())&&this._map.delete(e)),n},registerIdentifier:function(e,t){if(!e)throw new qr("[MessagingHandlersMap] registerIdentifier: No key specified");if(!t)throw new qr("[MessagingHandlersMap] registerIdentifier: No identifier specified");var n=!1,i=this._map.get(e);return i?n=i.isEmpty():(i=as.create(),this._map.set(e,i),n=!0),i.addIdentifier(t),n},getRegisteredIdentifiers:function(e){if(!e)throw new qr("[MessagingHandlersMap] getRegisteredIdentifiers: No key specified");var t=this._map.get(e);return t?t.registeredIdentifiers:[]},unregisterIdentifier:function(e,t){if(!e)throw new qr("[MessagingHandlersMap] unregisterIdentifier: No key specified");if(!t)throw new qr("[MessagingHandlersMap] unregisterIdentifier: No identifier specified");var n=!1,i=this._map.get(e);return i&&(i.removeIdentifier(t),(n=i.isEmpty())&&this._map.delete(e)),n},serialize:function(){for(var e,t=[],n=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return ss(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ss(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this._map);!(e=n()).done;){var i=e.value,r=i[0],a=i[1],s={topic:r,registeredLocalHandlerCount:a.localHandlers.length,subscribedNodes:a.registeredIdentifiers};t.push(s)}return t},_map:k.c(Map),staticMembers:{__QUALIFIED_CLASS_NAME__:"MessagingHandlersMap"}}),ls=P.a.extend({responses:[],allResponsesAreOK:H.d({readOnly:!0,get:function(){for(var e=!0,t=0,n=this.responses.length;t<n;t++)if(this.responses[t].status!==oa.OK){e=!1;break}return e}}),init:function(e){if(this.__s._$Hk$init.call(this),!e)throw new qr("[GraphMessagingGroupResponse] no responses specified");this.responses=e},__superMap:{_$Hk$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingGroupResponse"}});function cs(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return us(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?us(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ds=P.a.extend({proxies:H.d({type:Map}),protocolClass:H.d(),identifier:H.d({type:String}),init:function(e,t,n){var i=this;if(this.__s._$J7$init.call(this),!e)throw new qr("[GraphMessagingGroupProxy] No proxies specified");if(!t)throw new qr("[GraphMessagingGroupProxy] No protocol class specified");for(var r,a=cs(e);!(r=a()).done;){var s=r.value,o=s[0],l=s[1];if(!Jr(l,t)&&!ta(l,t))throw new qr("[GraphMessagingGroupProxy] Proxy "+o+" does not implement protocol class")}this.identifier=n,this.proxies=e,this.protocolClass=t;for(var c,u=function(){var t=c.value;i[t]=function(){for(var n=[],i=[],r=ls.create(i),a=0,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];for(var c,u=cs(e);!(c=u()).done;){var d=c.value,h=d[0],p=d[1],f=this.createProxyForMethod(h,p,t,o);try{n.push(f[t].apply(f,o))}catch(g){i[a]=g}a++}return fa.every(n).then((function(t){for(var n=0,a=0,s=e.size;a<s;a++)i[a]||(i[a]=t[n],n++);return r}))}},d=cs(ea(t));!(c=d()).done;)u()},createProxyForMethod:function(e,t,n,i){return t},__superMap:{_$J7$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingGroupProxy"}}),hs=P.a.extend({status:H.d({type:oa,defaultValue:oa.None}),error:H.d(),data:H.d(),staticMembers:{createFromSerializedData:function(e){if(!e)throw new qr("[GraphMessagingResponse] createFromSerializedData - no data specified");if(Br.a(e))throw new qr("[GraphMessagingResponse] createFromSerializedData - data is an object, was expecting a data hash");var t=this.create();return t.deserialize(e),t},__QUALIFIED_CLASS_NAME__:"GraphMessagingResponse"},deserialize:function(e){if(!e)throw new qr("[GraphMessagingResponse] deserialize - no data specified");var t=e.status;if(!t)throw new qr("[GraphMessagingResponse] deserialize - no status specified");this.status=oa.getItemForValue(t);var n=e.data;n&&(this.data=n);var i=e.error;i&&(this.error=i)},serialize:function(){var e={status:this.status.value},t=this.data;t&&(e.data=t);var n=this.error;return n&&(e.error=n),e}}),ps=P.a.extend({graphMessagingProxyProtocol:H.d({type:rs}),protocolClass:H.d(),init:function(e,t){if(this.__s._$IW$init.call(this),!e)throw new qr("[GraphMessagingTransport] No graph messaging proxy protocol specified");if(!t)throw new qr("[GraphMessagingTransport] No protocol class specified");this.graphMessagingProxyProtocol=e,this.protocolClass=t},parentProxy:H.d({get:function(){var e=this._parentProxy;if(!e){var t=this.graphMessagingProxyProtocol,n=t.parentProxy;if(n){var i=t.identifier,r=t.parentIdentifier;e=this._parentProxy=this.createParentProxy(n,i,r)}}return e}}),getChildGroupProxy:function(e){var t=this._childGroupProxy;if(!t){var n=this.graphMessagingProxyProtocol,i=new Map(n.childProxyMap);if(i&&i.size>0){var r=n.identifier;i.delete(e),i&&i.size>0&&(t=this._childGroupProxy=this.createChildGroupProxy(i,r))}}return t},getChildProxy:function(e){return this.graphMessagingProxyProtocol.childProxyMap.get(e)},createParentProxy:function(e,t,n){return e},createChildGroupProxy:function(e,t){return ds.create(e,this.protocolClass,t)},createGraphMessagingResponse:function(e){return hs.create({status:e})},_parentProxy:H.d({type:Object}),_childGroupProxy:H.d({type:ds}),__superMap:{_$IW$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingTransport"}}),fs=P.a.extend({requestedIdentifier:H.d({type:String}),operationName:H.d({type:String}),arguments:H.d({type:Object}),timeStarted:H.d({defaultValue:Date.now()}),timeEnded:H.d(),elapsedTimeMS:H.d({readOnly:!0,get:function(){return this.timeEnded-this.timeStarted}}),response:H.d({type:gs}),staticMembers:{deserialize:function(e){if(!e)throw new qr("[GraphMessagingTracingRequest] deserialize - no data specified");if(Br.a(e))throw new qr("[GraphMessagingTracingRequest] deserialize - data is an object, was expecting a data hash");var t=fs.create();t.requestedIdentifier=e.requestedIdentifier,t.operationName=e.operationName,t.arguments=e.arguments,t.timeStarted=e.timeStarted,t.timeEnded=e.timeEnded;var n=e.response;return n&&(t.response=gs.deserialize(n)),t},__QUALIFIED_CLASS_NAME__:"GraphMessagingTracingRequest"},serialize:function(){if(this.timeEnded=Date.now(),!this.response)throw new qr("[GraphMessagingTracingRequest] serialize - no response");return{requestedIdentifier:this.requestedIdentifier,operationName:this.operationName,arguments:this.arguments,timeStarted:this.timeStarted,timeEnded:this.timeEnded,elapsedTimeMS:this.elapsedTimeMS,response:this.response.serialize()}}}),gs=P.a.extend({identifier:H.d({type:String}),responseData:H.d(),error:H.d(),parentRequest:H.d({type:fs}),childRequests:[],staticMembers:{deserialize:function(e){if(!e)throw new qr("[GraphMessagingTracingResponse] deserialize - no data specified");if(Br.a(e))throw new qr("[GraphMessagingTracingResponse] deserialize - data is an object, was expecting a data hash");var t=gs.create();t.identifier=e.identifier;var n=e.parentRequest;n&&(t.parentRequest=fs.deserialize(n));var i=e.childRequests;if(i)for(var r=0,a=i.length;r<a;r++){var s=i[r];t.childRequests.push(fs.deserialize(s))}var o=e.responseData;o&&(t.responseData=o);var l=e.error;return l&&(t.error=l),t},__QUALIFIED_CLASS_NAME__:"GraphMessagingTracingResponse"},serialize:function(){var e={identifier:this.identifier},t=this.responseData;t&&(e.responseData=t);var n=this.error;n&&(e.error=n);var i=this.parentRequest;i&&(e.parentRequest=i.serialize());var r=this.childRequests;if(r.length>0){e.childRequests=[];for(var a=0,s=r.length;a<s;a++)e.childRequests.push(r[a].serialize())}return e}}),ms=hs.extend({tracingDetails:H.d({type:gs}),deserialize:function(e){this.__s._$CA$deserialize.call(this,e);var t=e.tracingDetails;t&&(this.tracingDetails=gs.deserialize(t))},serialize:function(){var e=this.__s._$IB$serialize.call(this);return this.tracingDetails&&(e.tracingDetails=this.tracingDetails.serialize()),e},__superMap:{_$CA$deserialize:"deserialize",_$IB$serialize:"serialize"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingTracingDetailsResponse"}});function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vs=P.a.extend({originalProxy:H.d(),identifier:H.d({type:String}),requestedIdentifier:H.d({type:String}),response:H.d({type:gs}),init:function(e,t,n,i,r){var a=this;this.__s._$SV$init.call(this),this.identifier=t,this.requestedIdentifier=n,this.originalProxy=e,this.response=i;for(var s,o=function(){var e=s.value;a[e]=function(){for(var t,r=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var l=fs.create();return l.requestedIdentifier=n,l.arguments=arguments,l.operationName=e,this.willMakeTracingRequest(l),(t=this.originalProxy)[e].apply(t,s).then((function(t){var a=null,s=null;if(t.status===oa.OK){var o=t.data;if(!(s=(a=ms.createFromSerializedData(o)).tracingDetails))throw new qr("[TracingProxy] "+e+" no tracing response found for request")}else(a=ms.create()).status=t.status,a.error=t.error,(s=gs.create()).identifier=n,s.error=t.error;return l.response=s,a.tracingDetails=i,r.didReceiveTracingResponse(l,a),t.data=a.serialize(),t}))}},l=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return _s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_s(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(ea(r));!(s=l()).done;)o()},willMakeTracingRequest:function(e){},didReceiveTracingResponse:function(e,t){},__superMap:{_$SV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TracingProxy"}}),bs=vs.extend({willMakeTracingRequest:function(e){this.response.childRequests.push(e)},didReceiveTracingResponse:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ChildTracingProxy"}}),ys=ds.extend({response:H.d({type:gs}),init:function(e,t,n,i){if(this.__s._$G_$init.call(this,e,i,t),!t)throw new qr("[GraphMessagingGroupProxy] No identifier specified");if(!n)throw new qr("[GraphMessagingGroupProxy] No response specified");this.response=n},createProxyForMethod:function(e,t,n,i){return bs.create(t,this.identifier,e,this.response,this.protocolClass)},__superMap:{_$G_$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingGroupTracingProxy"}}),ws=vs.extend({willMakeTracingRequest:function(e){this.response.parentRequest=e},didReceiveTracingResponse:function(e,t){},staticMembers:{__QUALIFIED_CLASS_NAME__:"ParentTracingProxy"}}),Is=ps.extend({response:H.d({type:gs}),init:function(e,t,n){this.__s._$Jg$init.call(this,e,t),this.response=gs.create(),this.response.identifier=e.identifier,this.response.responseData=n},createParentProxy:function(e,t,n){return ws.create(e,t,n,this.response,this.protocolClass)},createChildGroupProxy:function(e,t){return ys.create(e,t,this.response,this.protocolClass)},createGraphMessagingResponse:function(e){var t=ms.create({status:e});return t.tracingDetails=this.response,t},__superMap:{_$Jg$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"GraphMessagingTracingTransport"}});function Ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Cs={mixinDependencies:[{mixinDependencies:[rs,Xa],subscribeToTopic:function(e,t){if(!e)throw new qr("PublishSubscribeSupport: [subscribeToTopic] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [subscribeToTopic] no handler specified");var n=null,i=this._subscriptionMap.registerLocalHandler(e,t),r=this._createGraphMessagingTransport(),a=r.parentProxy;if(i&&a)n=a.subscribeIdentifierToTopic(e,this.identifier).then((function(e){var t=r.createGraphMessagingResponse(e.status);return t.error=e.error,t}));else{var s=r.createGraphMessagingResponse(oa.OK);n=Z.a.resolve(s)}return n},publishMessageOnTopic:function(e,t){if(!e)throw new qr("PublishSubscribeSupport: [publishMessageOnTopic] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [publishMessageOnTopic] no message specified");var n=this.identifier,i=this._createGraphMessagingTransport();this._publishMessageToLocallyRegisteredHandlers(e,t);var r=i.getChildGroupProxy(n),a=i.parentProxy;if(r)return r.publishMessageOnTopicFromIdentifier(e,t,n).then((function(r){return a?a.publishMessageOnTopicFromIdentifier(e,t,n).then((function(e){return i.createGraphMessagingResponse(oa.OK)})):i.createGraphMessagingResponse(oa.OK)}));if(a)return a.publishMessageOnTopicFromIdentifier(e,t,n).then((function(e){return i.createGraphMessagingResponse(oa.OK)}));var s=i.createGraphMessagingResponse(oa.OK);return Z.a.resolve(s)},unsubscribeFromTopic:function(e,t){if(!e)throw new qr("PublishSubscribeSupport: [unsubscribeFromTopic] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [unsubscribeFromTopic] no handler specified");var n=null,i=this._subscriptionMap.unregisterLocalHandler(e,t),r=this._createGraphMessagingTransport(),a=r.parentProxy;if(i&&a)n=a.unsubscribeIdentifierFromTopic(e,this.identifier).then((function(e){var t=r.createGraphMessagingResponse(e.status);return t.error=e.error,t}));else{var s=r.createGraphMessagingResponse(oa.OK);n=Z.a.resolve(s)}return n},subscribeIdentifierToTopic:function(e,t){var n=null;if(!e)throw new qr("PublishSubscribeSupport: [subscribeIdentifierToTopic] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [subscribeIdentifierToTopic] no subscribing identifier specified");var i=this._subscriptionMap.registerIdentifier(e,t),r=this._createGraphMessagingTransport(),a=r.parentProxy;if(i&&a)n=a.subscribeIdentifierToTopic(e,this.identifier).then((function(e){var t=r.createGraphMessagingResponse(e.status);return t.error=e.error,t.serialize()}));else{var s=r.createGraphMessagingResponse(oa.OK);n=Z.a.resolve(s.serialize())}return n},publishMessageOnTopicFromIdentifier:function(e,t,n){var i=this;if(!e)throw new qr("PublishSubscribeSupport: [publishMessageOnTopicFromIdentifier] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [publishMessageOnTopicFromIdentifier] no message specified");if(!n)throw new qr("PublishSubscribeSupport: [publishMessageOnTopicFromIdentifier] no publisher identifier specified");var r=this._createGraphMessagingTransport();this._publishMessageToLocallyRegisteredHandlers(e,t);var a=r.getChildGroupProxy(n),s=r.parentProxy,o=this.identifier;return a?a.publishMessageOnTopicFromIdentifier(e,t,o).then((function(a){return s&&i.parentIdentifier!==n?s.publishMessageOnTopicFromIdentifier(e,t,o).then((function(e){return r.createGraphMessagingResponse(e.status).serialize()})):r.createGraphMessagingResponse(oa.OK).serialize()})):s&&this.parentIdentifier!==n?s.publishMessageOnTopicFromIdentifier(e,t,o).then((function(e){return r.createGraphMessagingResponse(e.status).serialize()})):r.createGraphMessagingResponse(oa.OK).serialize()},unsubscribeIdentifierFromTopic:function(e,t){var n=null;if(!e)throw new qr("PublishSubscribeSupport: [unsubscribeIdentifierFromTopic] no topic specified");if(!t)throw new qr("PublishSubscribeSupport: [unsubscribeIdentifierFromTopic] no subscriber identifier specified");var i=this._subscriptionMap.unregisterIdentifier(e,t),r=this._createGraphMessagingTransport(),a=r.parentProxy;if(i&&a)n=a.unsubscribeIdentifierFromTopic(e,this.identifier).then((function(e){var t=r.createGraphMessagingResponse(e.status);return t.error=e.error,t.serialize()}));else{var s=r.createGraphMessagingResponse(oa.OK);n=Z.a.resolve(s.serialize())}return n},_subscriptionMap:k.c(os),_publishMessageToLocallyRegisteredHandlers:function(e,t){var n=this._subscriptionMap.getLocalHandlers(e);if(n)for(var i=0,r=n.length;i<r;i++)(0,n[i])(e,t)},_createGraphMessagingTransport:function(){return Is.create(this,Xa,this._subscriptionMap.serialize())}}],_createGraphMessagingTransport:function(){return ps.create(this,Xa,this._subscriptionMap.serialize())},identifier:H.d({type:String,get:function(){return this.processId}}),parentIdentifier:H.d({type:String,get:function(){return this.parentProcessId}}),parentProxy:H.d({readOnly:!0,get:function(){return this.parentProcessReference?this.parentProcessReference.remoteProxy:null}}),childProxyMap:H.d({readOnly:!0,get:function(){for(var e,t=new Map,n=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Ss(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ss(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.childProcessReferences);!(e=n()).done;){var i=e.value;t.set(i.processId,i.remoteProxy)}return t}})};function Es(e){var t="function"===typeof Map?new Map:void 0;return(Es=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return As(e,arguments,Ms(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ts(i,e)})(e)}function As(e,t,n){return(As=Os()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Ts(r,n.prototype),r}).apply(null,arguments)}function Os(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function Ts(e,t){return(Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ds=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).name="ServiceError",n.isServiceError=!0,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ts(t,n),i}(Es(Error)),Ps=Object(we.b)("ServiceResponseStatus",{NONE:"NONE",OK:"OK",NOT_FOUND:"NOT_FOUND",DISCONNECTED:"DISCONNECTED",CANCELED:"CANCELED",BAD_REQUEST:"BAD_REQUEST",TIMEOUT:"TIMEOUT",ERROR:"ERROR",CONFLICT:"CONFLICT",UNDEFINED_ERROR_TYPE:"UNDEFINED_ERROR_TYPE",METHOD_NOT_FOUND:"METHOD_NOT_FOUND"});function Ls(e){var t="function"===typeof Map?new Map:void 0;return(Ls=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Rs(e,arguments,Fs(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ns(i,e)})(e)}function Rs(e,t,n){return(Rs=xs()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Ns(r,n.prototype),r}).apply(null,arguments)}function xs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vs=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).name="SerializationError",n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ns(t,n),i}(Ls(Error));function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bs={serialize:function(){var e=this.getMetadataByType(H.a),t={};for(var n in $s(this),e){var i=e[n],r=i.key,a=i.serialization;if(!a||!a.ignore){var s=Us(this,i);void 0!==s&&(t[js(r,a)]=s)}}return t},staticMembers:{deserialize:function(e){var t=void 0;if(e&&g.a(e)){var n=(t=this.create()).getMetadataByType(H.a);for(var i in n){var r=n[i],a=r.key,s=r.serialization,o=e[js(a,s)];s&&s.ignore||(t[a]=Hs(t,o,r))}$s(t)}return t}}};function js(e,t){var n=e;if(t){var i=t.propertyName;i&&"string"===typeof i&&i.length>0&&(n=i)}return n}function Us(e,t,n){var i=t.key,r=t.type,a=t.getForObject(e);return zs(r)?function(e,t,n,i){var r;if(n){r=[];for(var a=0,s=n.length;a<s;a++){var o=n[a];r.push(Gs(e,t,o))}}return r}(e,i,a):Ks(r)?function(e,t,n,i){var r;if(n){r={};for(var a,s=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return ks(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ks(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(a=s()).done;){var o=a.value,l=o[0],c=o[1];r[l]=Gs(e,t,c)}}return r}(e,i,a):qs(r)?function(e,t,n,i){var r;return n&&(r={name:n.name,value:n.value}),r}(0,0,a):Gs(e,i,a)}function Gs(e,t,n){var i;if(void 0!==n&&null!==n)if(n.isObject){if(!n||!n.hasMixin(Bs))throw new Vs("["+q.a(e)+"] Property "+t+" does not support serialization");n&&(i=n.serialize())}else i=n;return i}function Hs(e,t,n){var i=n.type,r=n.key;return zs(i)?function(e,t,n){var i,r=n.key,a=n.serialization;if(t){var s=Object;if(a){var o=a.collectionObjectType;o&&(s=o)}i=[];for(var l=0,c=t.length;l<c;l++){var u=t[l];i.push(Ws(e,r,s,u))}}return i}(e,t,n):Ks(i)?function(e,t,n){var i,r=n.key,a=n.serialization;if(t){var s=Object;if(a){var o=a.collectionObjectType;o&&(s=o)}for(var l in i=new Map,t){var c=t[l];i.set(l,Ws(e,r,s,c))}}return i}(e,t,n):qs(i)?function(e,t,n){var i,r=n.type;return t&&r&&(i=r.getItemForValue(t.value)),i}(0,t,n):Ws(e,r,i,t)}function Ws(e,t,n,i){var r,a="string"===typeof(r=n)?Qs(r):"function"===typeof r&&Qs(typeof r());if(i&&!a){if(n.hasMixin(Bs))return n.deserialize(i);throw new Vs("["+q.a(e)+"] Property "+t+" does not support serialization")}return i}function $s(e){var t=e.getMetadataByType(H.a),n=[];for(var i in t){var r=t[i],a=r.validators,s=r.key;if(a){for(var o=[],l=0;l<a.length;l++){var c=a[l];c.validate(r.getForObject(e),s,e)||o.push(c.message)}if(o&&o.length>0){var u="Validation for field "+s+" failed - "+o.join(", ")+".";n.push(u)}}}if(n&&n.length>0)throw new Vs("["+q.a(e)+"] "+n.join(" "))}function zs(e){return"function"===typeof e&&Array.isArray(new e)}function Ks(e){return"function"===typeof e&&new e instanceof Map}function qs(e){return e&&e.instanceOf&&e.instanceOf(we.a)}function Qs(e){return"string"===e||"number"===e||"boolean"===e||"object"===e}var Ys=P.a.extend({mixinDependencies:[Bs],status:H.d({type:Ps,defaultValue:Ps.None}),error:H.d(),data:H.d({type:Object}),staticMembers:{createOK:function(){return Ys.create({status:Ps.OK})},createWithOptionalData:function(e){return Ys.create({status:Ps.OK,data:e})},createFromError:function(e){var t=sa(e);return t?(t.buildInfo=globalThis.__CW_BUILD_INFO,pi.a(e,Error)||(t.message=JSON.stringify(e),t.stack=(new Error).stack)):t={message:"No error specified",stack:(new Error).stack},Ys.create({status:Zs(e),error:t})},__QUALIFIED_CLASS_NAME__:"ServiceResponse"}});function Zs(e){var t=Ps.ERROR;return pi.a(e,Error)||(t=Ps.UNDEFINED_ERROR_TYPE),t}function Xs(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Js(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var eo=P.a.extend({serviceIdentifier:H.d({type:String}),serviceVersion:H.d({type:String}),serviceIdentifierAndVersion:H.d({type:String,readOnly:!0,get:function(){return this.serviceIdentifier+"@"+this.serviceVersion}}),connectRetryInterval:H.d({type:Number,defaultValue:500}),connectRetryTimeout:H.d({type:Number,defaultValue:5e3}),remoteProcessIdentifier:H.d({type:String}),remoteObjectInterface:H.d(),remoteObjectProxy:H.d(),localProcessIdentifier:H.d({get:function(){return this._serviceSupport?this._serviceSupport.processId:void 0}}),exportedInterface:H.d(),exportedObject:H.d(),isConnected:H.d({type:Boolean,defaultValue:!1}),init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.a.application,i=this;if(i.__s._$1KV$init.call(i),!e)throw new Ds("ServiceConnection - no service identifier specified");if(!t)throw new Ds("ServiceConnection - no service version specified");if(!n)throw new Ds("ServiceConnection - no serviceSupport specified");this.serviceIdentifier=e,this.serviceVersion=t,this._serviceSupport=n},staticMembers:{createWithServiceIdentifierAndVersionString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.a.application,n=e.split("@"),i=n[0],r=n[1];return eo.create(i,r,t)},__QUALIFIED_CLASS_NAME__:"ServiceConnection"},connect:function(){if(!this.remoteObjectInterface)throw new Ds("ServiceConnection - no remote object interface specified");return this._pDidConnect=Z.a.create(),this._doConnect(this.connectRetryInterval,this.connectRetryTimeout),this._pDidConnect},_doConnect:function(e,t){var n=this;this._serviceSupport.connectServiceConnection(this).then((function(i){if(i.status===Ps.OK){var r=i.data,a=r.remoteObjectProxy,s=r.remoteProcessIdentifier;a&&s?(n._setRemoteObjectProxyAndProcessIdentifier(a,s),n.isConnected=!0,n._pDidConnect.resolve(Ys.createWithOptionalData({remoteObjectProxy:n.remoteObjectProxy}))):n._pDidConnect.resolve(Ys.create({status:Ps.UNDEFINED_ERROR_TYPE}))}else i.status===Ps.NOT_FOUND?t>0?X.a((function(){return n._doConnect(e,t-e)}),e):n._pDidConnect.resolve(Ys.create({status:Ps.TIMEOUT})):n._pDidConnect.resolve(Ys.create({status:Ps.UNDEFINED_ERROR_TYPE}))}))},_setRemoteObjectProxyAndProcessIdentifier:function(e,t){var n=this.remoteObjectInterface,i=this.serviceIdentifierAndVersion,r=this.localProcessIdentifier;this.remoteProcessIdentifier=t;var a=this;if(ta(e,n)){for(var s,o=ea(n),l=P.a.create(),c=function(){var t=s.value;l[t]=function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e[t].apply(e,i).then((function(e){return Ys.createWithOptionalData(e)}))}},u=Xs(o);!(s=u()).done;)c();this.remoteObjectProxy=l}else if(ta(e,Qa)){for(var d,h=ea(n),p=P.a.create(),f=function(){var n=d.value;p[n]=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return e.invokeServiceMethod(r,i,t,n,o).then((function(e){if(e.status!==oa.OK||!e.data)return a.isConnected=!1,Ys.create({status:Ps.UNDEFINED_ERROR_TYPE});var t=Ys.deserialize(e.data);return t.status===Ps.NOT_FOUND?(a.isConnected=!1,t):t.status===Ps.OK?t:(a.isConnected=!1,Ys.create({status:Ps.UNDEFINED_ERROR_TYPE}))}))}},g=Xs(h);!(d=g()).done;)f();this.remoteObjectProxy=p}},_serviceSupport:H.d(),_pDidConnect:H.d(),__superMap:{_$1KV$init:"init"}}),to=P.a.extend({setServiceListener:function(e,t){this._serviceListenerMap.set(e,t)},hasServiceListener:function(e){return this._serviceListenerMap.has(e)},getServiceListener:function(e){return this._serviceListenerMap.get(e)},setServiceProxy:function(e,t){this._serviceProxyMap.set(e,t)},getServiceProxy:function(e){return this._serviceProxyMap.get(e)},hasServiceProxy:function(e){return this._serviceProxyMap.has(e)},clearServiceProxy:function(e){this._serviceProxyMap.delete(e)},addServiceConnection:function(e){var t=e.serviceIdentifierAndVersion,n=e.remoteProcessIdentifier;this._connectionMap.has(t)||this._connectionMap.set(t,new Map),this._connectionMap.get(t).set(n,e)},getServiceConnection:function(e,t){return this.hasServiceConnection(e,t)?this._connectionMap.get(e).get(t):null},hasServiceConnection:function(e,t){return this._connectionMap.has(e)&&this._connectionMap.get(e).has(t)},clearServiceConnection:function(e,t){if(this.hasServiceConnection(e,t))return this._connectionMap.get(e).delete(t)},_serviceListenerMap:H.d({type:Map,defaultValue:k.c(Map)}),_serviceProxyMap:H.d({type:Map,defaultValue:k.c(Map)}),_connectionMap:H.d({type:Map,defaultValue:k.c(Map)}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ServiceRegistry"}}),no={mixinDependencies:[Ja,is,qa,Cs,{mixinDependencies:[Qa],addServiceListener:function(e){var t=this._serviceRegistry,n=e.serviceIdentifierAndVersion;if(!n)throw new Ds("listener.serviceIdentifier required when adding a service listener");var i=Z.a.create();return t.hasServiceListener(n)?i.resolve(Ys.createOK()):this._hasParent?i=this._registerServiceWithParent(n).then((function(i){return i.status===Ps.OK&&t.setServiceListener(n,e),i})):(t.setServiceListener(n,e),i.resolve(Ys.createOK())),i},isDuplicateServiceListener:function(e){var t=this._serviceRegistry,n=e.serviceIdentifierAndVersion;return t.hasServiceListener(n)},connectServiceConnection:function(e){var t=this,n=e.serviceIdentifierAndVersion,i=this.processId;return this._connectToService(i,n).then((function(i){if(i.status===Ps.NOT_FOUND||i.status===Ps.UNDEFINED_ERROR_TYPE)return i;if(!i.data)return Ys.create({status:Ps.UNDEFINED_ERROR_TYPE});var r=null;if(t._serviceRegistry.hasServiceProxy(n))r=t._serviceRegistry.getServiceProxy(n);else{if(!t._serviceRegistry.hasServiceConnection(n,e.localProcessIdentifier))return Ys.create({status:Ps.UNDEFINED_ERROR_TYPE});r=t._serviceRegistry.getServiceConnection(n,e.localProcessIdentifier).exportedObject}return Ys.createWithOptionalData({remoteProcessIdentifier:i.data.remoteProcessIdentifier,remoteObjectProxy:r})}))},registerService:function(e,t){var n=this,i=this._serviceRegistry,r=Z.a.create();if(i.hasServiceListener(t))r.resolve(Ys.create({status:Ps.CONFLICT}).serialize());else if(i.hasServiceProxy(t)){var a=i.getServiceProxy(t);r=a.probeServiceRegistration(t).then((function(r){return r.status===oa.OK&&r.data?Ys.deserialize(r.data).status!==Ps.OK?(i.clearServiceProxy(t),n.registerService(e,t)):a.processId!==e?Ys.create({status:Ps.CONFLICT}).serialize():Ys.create({status:Ps.OK}).serialize():(i.clearServiceProxy(t),n.registerService(e,t))}))}else if(this._hasParent)r=this._registerServiceWithParent(t).then((function(r){if(r.status===Ps.OK){var a=n._getChildProxyWithIdentifier(e);i.setServiceProxy(t,a)}return r.serialize()}));else{var s=this._getChildProxyWithIdentifier(e);i.setServiceProxy(t,s),r.resolve(Ys.create({status:Ps.OK}).serialize())}return r},probeServiceRegistration:function(e){var t=this._serviceRegistry,n=Z.a.create();return t.hasServiceListener(e)?n.resolve(Ys.createOK()):t.hasServiceProxy(e)?n=t.getServiceProxy(e).probeServiceRegistration(e).then((function(e){return e.status===oa.OK&&e.data?Ys.deserialize(e.data):Ys.create({status:Ps.NOT_FOUND})})):n.resolve(Ys.create({status:Ps.NOT_FOUND})),n.then((function(e){return e.serialize()}))},connectToService:function(e,t){return this._connectToService(e,t).then((function(e){return e.serialize()}))},invokeServiceMethod:function(e,t,n,i,r){var a=this._serviceRegistry,s=Z.a.create();if(a.hasServiceConnection(t,e)){var o=a.getServiceConnection(t,e);if(o.localProcessIdentifier!==n)s.resolve(Ys.create({status:Ps.NOT_FOUND}).serialize());else{var l=o.exportedObject,c=l[i];Je.a(c)?c.apply(l,r).then((function(e){s.resolve(Ys.createWithOptionalData(e).serialize())})):s.resolve(Ys.create({status:Ps.METHOD_NOT_FOUND}).serialize())}}else if(a.hasServiceProxy(t)){var u=a.getServiceProxy(t);s=u.invokeServiceMethod(e,t,n,i,r).then((function(e){return e.data}))}else s.resolve(Ys.create({status:Ps.NOT_FOUND}).serialize());return s},_registerServiceWithParent:function(e){return this._getParentProxy().registerService(this.processId,e).then((function(e){if(e.status!==oa.OK||!e.data)return Ys.create({status:Ps.UNDEFINED_ERROR_TYPE});var t=Ys.deserialize(e.data);return t.status===Ps.CONFLICT?Ys.create({status:Ps.CONFLICT}):t.status!==Ps.OK?Ys.create({status:Ps.UNDEFINED_ERROR_TYPE}):t}))},_connectToService:function(e,t){var n=this._serviceRegistry,i=Z.a.create();if(n.hasServiceConnection(t,e)){var r=n.getServiceConnection(t,e);i.resolve(Ys.createWithOptionalData({remoteProcessIdentifier:r.localProcessIdentifier}))}else if(n.hasServiceListener(t)){var a=n.getServiceListener(t),s=eo.createWithServiceIdentifierAndVersionString(t,this);s.remoteProcessIdentifier=e,a.shouldAcceptNewConnection(s),n.addServiceConnection(s),i.resolve(Ys.createWithOptionalData({remoteProcessIdentifier:s.localProcessIdentifier}))}else if(n.hasServiceProxy(t))i=n.getServiceProxy(t).connectToService(e,t).then((function(e){return e.status===oa.OK&&e.data?Ys.deserialize(e.data):Ys.create({status:Ps.UNDEFINED_ERROR_TYPE})}));else if(this._hasParent){var o=this._getParentProxy();i=o.connectToService(e,t).then((function(e){if(e.status!==oa.OK||!e.data)return Ys.create({status:Ps.UNDEFINED_ERROR_TYPE});var i=Ys.deserialize(e.data);return i.status===Ps.OK&&n.setServiceProxy(t,o),i}))}else i.resolve(Ys.create({status:Ps.NOT_FOUND}));return i},_getParentProxy:function(){return this._createGraphMessagingTransport().parentProxy},_getChildProxyWithIdentifier:function(e){return this._createGraphMessagingTransport().getChildProxy(e)},_serviceRegistry:H.d({defaultValue:k.c(to)}),_hasParent:H.d({get:function(){return!!this.parentProcessReference}})}],parentProcessReferenceClass:H.d({type:ts.constructor,defaultValue:ts}),parentProcessReferenceDelegate:H.d({type:Ja,defaultValue:function(){return this}}),parentProcessReference:H.d({type:ts}),processState:H.d({readOnly:!0,type:$a,get:function(){return this._processState}}),isStarted:H.d({readOnly:!0,type:Boolean,get:function(){return za(this.processState,$a.LOADING,$a.LOADED,$a.RUNNING)}}),isTerminated:H.d({readOnly:!0,type:Boolean,get:function(){return za(this.processState,$a.TERMINATED)}}),channel:H.d({type:kr.a}),sessionInfo:H.d({type:Object,defaultValue:k.c(Object)}),hostInfo:H.d({type:Object,defaultValue:k.c(Object)}),processInfo:H.d({type:Object,defaultValue:k.c(Object)}),processId:H.d({type:String}),parentProcessId:H.d({type:String}),messagingResponseErrorTerminationMethod:H.d({readOnly:!0,type:Function,defaultValue:function(){return this.terminateWithReasonAndInfo}}),start:function(){var e=this;Ka(this.processState,$a.NONE),this._processState=$a.LOADING;var t=this.parentProcessReferenceClass,n=this.channel;if(t){Jr(n,kr.a)||_.b("A CW.ChannelProtocol implementation is required");var i=this._createParentProcessReference(n);i.connect(),i.notifyChildApplicationIsReady().then((function(t){t.isOK?e._processState=$a.LOADED:e.terminateIfMessagingResponseError(t)}))}else this._processState=$a.LOADED},run:Mn.a.define(),stop:function(){var e=this;Ka(this.processState,$a.LOADING,$a.LOADED,$a.RUNNING),this._processState=$a.UNLOADING,this.cancelInvokeLaterMethods();var t=this.parentProcessReference,n=Z.a.resolve();return t&&(this.parentProcessReference=null,t.isConnected&&(n=n.then((function(){return t.disconnect()}))),n=n.then((function(){return t.isTerminated||t.terminate()}))),n.then((function(){return e._processState=$a.UNLOADED}))},terminate:function(){Ka(this.processState,$a.UNLOADED),this._processState=$a.TERMINATED,this.channel&&!this.channel.isDisconnected&&this.channel.disconnect(),this.processId=null,this.parentProcessId=null,this.hostInfo=null,this.sessionInfo=null,this.processInfo=null,this.channel=null},terminateWithReasonAndInfo:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.a(e)||_.b("terminateWithReasonAndInfo requires a reason as an argument"),g.a(n)?n.buildInfo||(n.buildInfo=globalThis.__CW_BUILD_INFO):_.b("terminateWithReasonAndInfo optional info argument should be a hash");var i=this.parentProcessReference;i&&i.isConnected&&i.remoteProxy.didEnd(e,n);var r=this.isStarted?this.stop():Z.a.resolve();return r.then((function(){return t.isTerminated||t.terminate()}))},beginLaunching:function(e,t,n){var i=this;if(Ka(this.processState,$a.LOADED),this._updateHostingAndSessionInfo(e,t),!pi.a(n,Object))throw new qr("Invalid process info");if(!pi.a(n.launchOptions,Object))throw new qr("Invalid launchOptions");if(!n.launchOptions.launchReason)throw new qr("Missing launchOptions.launchReason");n.launchOptions=Object.freeze(n.launchOptions),this.processInfo=Object.freeze(n),this.parentProcessId=n.parentProcessId,this.processId=n.processId,this.parentProcessReference&&(this.parentProcessReference.processId=n.parentProcessId),this.invokeLater((function(){return Z.a.resolve().then((function(){return i.run()})).then((function(){return i._processState=$a.RUNNING})).then((function(){return i._notifyParentThatProcessDidFinishLaunchingIfNeeded()}))}))},openItems:function(e){},hostingStateDidChange:function(e,t){Ka(this.processState,$a.RUNNING),this._updateHostingAndSessionInfo(e,t)},_processState:H.d({type:$a,defaultValue:$a.NONE}),_launchData:H.d({type:Object,defaultValue:{}}),_createParentProcessReference:function(e){var t=this.parentProcessReferenceClass,n=this.parentProcessReferenceDelegate,i=this.parentProcessId;t&&n||_.b("A parentProcessReferenceClass and a parentProcessReferenceDelegate are required to create a ParentProcessReference.");var r=t.create({processId:i,delegate:n,channel:e});return this.parentProcessReference=r,r},_updateHostingAndSessionInfo:function(e,t){if(Ka(this.processState,$a.LOADED,$a.RUNNING),!pi.a(e,Object))throw new qr("Invalid session info");if(!pi.a(t,Object))throw new qr("Invalid host info");this.sessionInfo=Object.freeze(e),this.hostInfo=Object.freeze(t)},_notifyParentThatProcessDidFinishLaunchingIfNeeded:function(){var e=this;Ka(this.processState,$a.RUNNING);var t=this.parentProcessReference,n=this._launchData;if(t&&t.isConnected)return t.remoteProxy.didFinishLaunching(n).then((function(t){return e.terminateIfMessagingResponseError(t)}))}},io=n(1320),ro=Object.freeze({USER_LAUNCH:"USER_LAUNCH",ITEMS_OPENED:"ITEMS_OPENED"}),ao=n(818),so={mixinDependencies:[Tn.a],applicationWillFinishLaunching:Mn.a.define(),applicationDidFinishLaunching:Mn.a.define()},oo={applicationWillFinishLaunching:function(e,t){},applicationDidFinishLaunching:function(e,t){}},lo=P.a.extend(so,oo,{staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationDelegate"}});function co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var uo=function(){function e(e,t,n){this._postMessageTarget=e,this._postMessageTargetOrigin=t,this._buildInfo=n}var t,n,i=e.prototype;return i.exceptionHandler=function(e){var t=Object.assign(sa(e),{buildInfo:this._buildInfo}),n=this._createCrashMessage(t);this._postMessageTarget.postMessage(n,this._postMessageTargetOrigin)},i._createCrashMessage=function(e){var t={jsonrpc:"2.0",method:"MessagingFromChildProtocol-didEnd",params:["UNCAUGHT_EXCEPTION",e]};return JSON.stringify(t)},t=e,(n=[{key:"isExceptionHandlingEnabled",get:function(){return!0}},{key:"isExceptionHandlingFatal",get:function(){return!0}}])&&co(t.prototype,n),e}(),ho=hn.a((function(e,t){if(e&&!g.a(e)&&_.b("Application options specified is not a hash."),g.a(t)||_.b("initializationOptions specified is not a hash."),Object(io.b)()){var n=globalThis.parent,i=Object(io.a)(),r=globalThis.__CW_BUILD_INFO,a=new uo(n,i,r);d.c(a)}var s=t.defaultApplicationClass,o=t.defaultDelegateClass,l=t.defaultDelegateClassProtocol;s&&o&&l||_.b("initializationOptions must define defaultApplicationClass, defaultDelegateClass, and defaultDelegateClassProtocol");var c=function(e){var t={};return e&&Object.keys(e).forEach((function(n){t[n]=e[n]||void 0})),t}(e),u=c.applicationClass,h=void 0===u?s:u,p=c.delegateClass,f=void 0===p?o:p,m=c.rootViewControllerClass,v=void 0===m?fi.a:m;h===s||h.subclassOf(s)||_.b("Specifed application class is not a subclass of "+q.a(s)),f===o||f.subclassOf(o)||Jr(f,l)||_.b("Specified application delegate class is neither a subclass of "+q.a(o)+" nor implements "+l),v===fi.a||v.subclassOf(fi.a)||_.b("Specifed root view controller class is not a subclass of CW.ViewController");var b=h.create({rootViewController:v}),y=f!==h?f.create():b;b.delegate=y,b.setup()})),po=n(573),fo=po.a.extend({outgoingWindow:Object(V.b)({readOnly:!0,get:function(){var e=window.parent;return e?{actualOutgoingWindow:e,postMessage:function(e,t){var n=this.actualOutgoingWindow;if(n.postMessage)return n.postMessage(e,t);u.b.warn("ParentWindowChannel: postMessage of "+e+" to detached iframe at "+t+" was ignored")}}:null}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ParentWindowChannel"}}),go={mixinDependencies:[kr.a],allowedRemoteOrigins:H.d({readOnly:!0,type:Array}),remoteOrigin:V.b({readOnly:!0,type:String}),init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments,i=e&&e.allowedRemoteOrigins;i&&(e.allowedRemoteOrigins=[].concat(i)),t.__s._$IB$init.apply(t,n);var r=this.allowedRemoteOrigins,a=this.remoteOrigin;mo(r,a)},connect:function(){var e=this,t=arguments;vo(this),e.__s._$PX$connect.apply(e,t)},send:function(){var e=this,t=arguments,n=this.allowedRemoteOrigins,i=this.remoteOrigin;mo(n,i),e.__s._$T0$send.apply(e,t)},__superMap:{_$IB$init:"init",_$PX$connect:"connect",_$T0$send:"send"}},mo=function(e,t){t?"*"===t&&_.b('Cannot leverage `SafeWindowPostMessageChannel` whose `remoteOrigin` is "*".'):_.b("Cannot leverage `SafeWindowPostMessageChannel` without a defined `remoteOrigin`."),e?e.includes(t)?e.forEach((function(e){_o(e)||_.b('The value "'+e+'" does not conform to the "https://" protocol, and therefore is not permitted in the `allowedRemoteOrigins` array.')})):_.b('Cannot leverage this `SafeWindowPostMessageChannel`, the `remoteOrigin` "'+t+'" is not present in the `allowedRemoteOrigins` array.'):_.b("Cannot leverage `SafeWindowPostMessageChannel` without a defined `allowedRemoteOrigins` array.")},_o=function(e){return e&&"https://"===e.substr(0,8)},vo=function(e){var t=e._messageHandler;e._messageHandler=function(){var n=e.allowedRemoteOrigins,i=e.remoteOrigin;mo(n,i),t.apply(void 0,arguments)}},bo=fo.extend(go,{staticMembers:{__QUALIFIED_CLASS_NAME__:"SafeParentWindowPostMessageChannel"}}),yo=G.a.extend({mixinDependencies:[no],staticMembers:{main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.a(e)&&e.rootViewControllerClass&&_.b("ProcessKit Application is not intended for UI display");var t={defaultApplicationClass:yo,defaultDelegateClass:lo,defaultDelegateClassProtocol:so};ho(e,t)},__QUALIFIED_CLASS_NAME__:"Application"},allowedRemoteOrigins:H.d({type:Array,readOnly:!0}),applicationName:H.d({type:String,readOnly:!0,get:function(){var e=this.processInfo;return e?e.processName:void 0}}),primaryInteractionMode:V.b({readOnly:!0,type:String,binding:Oi.c("_primaryInteractionMode")}),platformType:V.b({readOnly:!0,type:String,binding:Oi.c("_platformType")}),deviceType:V.b({readOnly:!0,type:String,binding:Oi.c("_deviceType")}),sessionInfo:V.b({type:Object,defaultValue:k.c(Object)}),hostInfo:V.b({type:Object,defaultValue:k.c(Object)}),processState:V.b({readOnly:!0,binding:Oi.c("_processState")}),delegate:H.d({type:so}),setup:function(){if(Ka(this.processState,$a.NONE),Object(io.b)()){var e=this.allowedRemoteOrigins,t=Object(io.a)();this.channel=this._parentChannelProtocolClass.create({allowedRemoteOrigins:e,remoteOrigin:t}),this.start()}else{this.parentProcessReferenceClass=null,this.start();var n=ao.a.sharedInstance,i={primaryInteractionMode:n.primaryInteractionMode,platformType:n.platformType,deviceType:n.deviceType},r={processId:Y.a(),launchOptions:{launchReason:ro.USER_LAUNCH}};this.beginLaunching({},i,r)}},run:function(){var e=this,t=this.delegate,n=this.processInfo.launchOptions;return Z.a.resolve().then((function(){return e.configureApplication()})).then((function(){return t.applicationWillFinishLaunching(e,n)})).then((function(){return G.a.prototype.run.call(e)})).then((function(){return t.applicationDidFinishLaunching(e,n)})).catch(hn.a((function(e){throw e})))},configureApplication:function(){Ka(this.processState,$a.LOADED);var e=this.hostInfo,t=e.primaryInteractionMode,n=e.platformType,i=e.deviceType;if(!t||!Object.keys(yn.a).includes(t))throw new qr("hostInfo must include a valid primary interaction mode");return this._primaryInteractionMode=t,this._platformType=n,this._deviceType=i,Z.a.resolve()},createMessagingChannel:function(e,t,n){var i=this.parentProcessReference;return i&&i.channel||_.b("Unable to connect to parent. Can not create MessagingChannel"),i.createMessagingChannel(e,t,n),i.remoteProxy},presentViewController:function(e){var t,n=this,i=this,r=arguments;if(this._paneManager)t=i.__s._$5GK$presentViewController.apply(i,r);else{var a=G.a.prototype,s=a.Initializers,o=a.presentViewController;this.rootViewController=fi.a,t=Z.a.all(s.map((function(e){return e.create().run(n)}))).then((function(){return o.call(n,e)}))}return t},_processState:V.b({type:$a,defaultValue:$a.NONE}),_primaryInteractionMode:V.b({type:String}),_platformType:V.b({type:String}),_deviceType:V.b({type:String}),_parentChannelProtocolClass:H.d({type:kr.a,defaultValue:bo}),__superMap:{_$5GK$presentViewController:"presentViewController"}}),wo=P.a.extend({mixinDependencies:[Cr],user:H.d({type:Nr,serialization:{propertyName:"dsInfo"}}),webServices:H.d({type:Map,serialization:{collectionObjectType:Object}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"Session"}}),Io=P.a.extend(B.b,{mixinDependencies:[ar],staticMembers:{initializeWithApplication:function(e){Io._frameworkInitializerInstance&&_.b("[cloudos-kit] Framework has already been initialized"),e&&e.instanceOf(yo)||_.b("[cloudos-kit] Framework initializer must be an instance of ProcessKit Application");var t=e.hostInfo;t||_.b("[cloudos-kit] The application is not a child application - no host information");var n=t.clientId;n||_.b("[cloudos-kit] The application is not a child application - no client identifier");var i=e.parentProcessReference,r=e.applicationName;i||_.b("[cloudos-kit] The application is not a child application - no process reference"),r||_.b("[cloudos-kit] The application is not a child application - no application name");var a=globalThis.__CW_BUILD_INFO,s={appName:r,masteringNumber:a.masteringNumber,buildNumber:a.buildNumber};Io._frameworkInitializerInstance=Io.create(e,s,n)},sharedInstance:H.d({type:Io,get:function(){var e=Io._frameworkInitializerInstance;return e||_.b("[cloudos-kit] The framework has not been initialized. Please ensure no API has been called before the application delegate method applicationWillFinishLaunching has been called."),e}}),_frameworkInitializerInstance:H.d({type:Io}),__QUALIFIED_CLASS_NAME__:"FrameworkInitializer"},processReference:H.d({type:Za,readOnly:!0,get:function(){return this._application.parentProcessReference}}),hostInfo:H.d({type:Object,readOnly:!0,get:function(){return this._application.hostInfo}}),sessionInfo:H.d({type:Object,readOnly:!0,get:function(){return this._application.sessionInfo}}),session:H.d({type:wo,readOnly:!0,get:function(){return wo.deserialize(this.sessionInfo)}}),applicationName:H.d({type:String,readOnly:!0,get:function(){return this.applicationInfo.appName}}),masteringBuildNumber:H.d({readOnly:!0,type:String,get:function(){return this.applicationInfo.masteringNumber}}),buildNumber:H.d({readOnly:!0,type:String,get:function(){return this.applicationInfo.buildNumber}}),applicationInfo:H.d({type:Object,readOnly:!0,get:function(){return this._internalApplicationInfo}}),clientId:H.d({type:String,readOnly:!0,get:function(){return this._internalClientId}}),webServices:H.d({type:Map,readOnly:!0,get:function(){var e=this.session;return e?e.webServices:void 0}}),init:function(e,t,n){this.__s._$1uH$init.call(this),e||_.b("FrameworkInitializer: init: no application specified"),t||_.b("FrameworkInitializer: init: no application info specified"),n||_.b("FrameworkInitializer: init: no client id specified");var i=t.appName,r=t.masteringNumber,a=t.buildNumber;i||_.b("FrameworkInitializer: init: no applicationName specified"),r||_.b("FrameworkInitializer: init: no mastering build number specified"),a||_.b("FrameworkInitializer: init: no build number specified"),this._application=e,this._internalApplicationInfo=t,this._internalClientId=n,cr.sharedInstance.configurationProvider=this},_internalClientId:H.d({type:String}),_internalApplicationInfo:H.d({type:Object}),_application:H.d({type:yo}),__superMap:{_$1uH$init:"init"}});function So(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Co,Eo={frameworkInitializer:H.d({type:Io,readOnly:!0,get:function(){return Io.sharedInstance}}),processReference:H.d({type:Za,readOnly:!0,get:function(){return this.frameworkInitializer?this.frameworkInitializer.processReference:void 0}}),remoteProxy:H.d({type:Object,readOnly:!0,get:function(){var e=this.processReference;return e&&e.remoteProxy?e.remoteProxy:this._remoteProxyNotConnected}}),configureListenerOnlyMessagingChannel:function(e){var t=this.processReference;t&&t.createListenerOnlyMessagingChannel(e,this)},configureConnectionOnlyMessagingChannel:function(e,t){var n=this.processReference;n&&n.createConnectionOnlyMessagingChannel(e,t),this._configureRemoteProxyNotConnected(e)},configureBidirectionalMessagingChannel:function(e,t,n,i){var r=this.processReference;r&&r.createMessagingChannel(e,t,n,i),this._configureRemoteProxyNotConnected(n)},_configureRemoteProxyNotConnected:function(e){for(var t,n=q.a(this),i=P.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:n+".remoteProxyNotConnected"}}).create(),r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return So(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?So(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(ea(e));!(t=r()).done;)i[t.value]=function(){var e=la.create({status:oa.DISCONNECTED});return Z.a.resolve(e)};this._remoteProxyNotConnected=i},_remoteProxyNotConnected:H.d({type:Object})};!function(e){e.OK="OK",e.CANCELLED="CANCELLED",e.FAILED="FAILED"}(Co||(Co={}));var Ao=function(e,t){this.status=e,this.data=t,this.isOk=e===Co.OK,this.isCancelled=e===Co.CANCELLED,this.isFailed=e===Co.FAILED};Ao.okResult=function(e){return new Ao(Co.OK,e)},Ao.cancelledResult=function(e){return new Ao(Co.CANCELLED,e)},Ao.failedResult=function(e){return new Ao(Co.FAILED,e)};var Oo={mixinDependencies:[Qr],name:"AuthenticationServiceProtocol",version:"0.0.1",authenticate:Mn.a.define(),unauthenticate:Mn.a.define()},To={mixinDependencies:[Qr],name:"AuthenticationServiceFromChildProtocol",version:"1.0.0",authenticateUser:Mn.a.define(),unauthenticateUser:Mn.a.define(),reauthenticateUser:Mn.a.define(),retrieveSession:Mn.a.define(),revalidateUser:Mn.a.define()},Mo={mixinDependencies:[Qr],name:"AuthenticationServiceToChildProtocol",version:"0.0.1",authenticationStepDidComplete:Mn.a.define(),authenticationDidComplete:Mn.a.define(),authenticationDidCancel:Mn.a.define(),retrieveSessionDidComplete:Mn.a.define(),retrieveSessionDidCancel:Mn.a.define()};function Do(e,t){var n;return e.isOK?(n=Ao.okResult(),t&&t.hasMixin(Cr)&&(n.data=t.deserialize(e.data))):n=Po(e),n}function Po(e){return Ao.failedResult({status:e.status.value,underlyingError:e.error})}var Lo=P.a.extend({mixinDependencies:[Eo,Mo],delegate:H.d({type:Mo}),isBackwardsCompatabilityMode:H.d({type:Boolean}),init:function(e,t){this.__s._$Rx$init.call(this),this.delegate=t,this.isBackwardsCompatabilityMode=e,e?this.configureConnectionOnlyMessagingChannel(Oo,1e11):this.configureBidirectionalMessagingChannel(Mo,this,To)},authenticate:function(){return this.isBackwardsCompatabilityMode?this.remoteProxy.authenticate().then((function(e){return function(e){return e.isOK?e.data?Ao.okResult():Ao.cancelledResult():Po(e)}(e)})):this.remoteProxy.authenticateUser().then((function(e){return Do(e)}))},unauthenticate:function(){var e;return this.isBackwardsCompatabilityMode?(e=Z.a.create(),this.remoteProxy.unauthenticate()):e=this.remoteProxy.unauthenticateUser(),e.then((function(e){return Do(e)}))},reauthenticate:function(e,t){return this._pendingAuthenticationInstance&&_.b("[AuthenticationConnection] An existing authentication connection is still pending"),this._pendingAuthenticationInstance=e,this.remoteProxy.reauthenticateUser(t).then((function(e){return Do(e)}))},revalidate:function(){return this.remoteProxy.revalidateUser().then((function(e){return Do(e)}))},retrieveSession:function(e,t,n,i){return this._pendingAuthenticationInstance&&_.b("[AuthenticationConnection] An existing authentication connection is still pending"),this._pendingAuthenticationInstance=e,this.remoteProxy.retrieveSession(t,n,i).then((function(e){return Do(e)}))},authenticationStepDidComplete:function(e){this.delegate.authenticationStepDidComplete(e)},authenticationDidComplete:function(e){this.delegate.authenticationDidComplete(e)},authenticationDidCancel:function(){this.delegate.authenticationDidCancel()},retrieveSessionDidComplete:function(e){var t=this._pendingAuthenticationInstance;t&&(t.retrieveSessionDidComplete(e),this._pendingAuthenticationInstance=void 0)},retrieveSessionDidCancel:function(){var e=this._pendingAuthenticationInstance;e&&(e.retrieveSessionDidCancel(),this._pendingAuthenticationInstance=void 0)},__superMap:{_$Rx$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AuthenticationConnection"}}),Ro={_sessionSupportSessionInfo:V.b({readOnly:!0,binding:G.a.bindingFor("application.sessionInfo")}),_sessionSupportSessionInfoDidChange:B.g("_sessionSupportSessionInfo",(function(e){var t=wo.deserialize(e);this.sessionDidChange(t)})),sessionDidChange:Mn.a.define()},xo={mixinDependencies:[Tn.a],authenticatedUserDidChange:Mn.a.define()},No=P.a.extend(B.b,{mixinDependencies:[Ro],delegate:H.d({type:xo}),init:function(){this.__s._$8n$init.call(this)},sessionDidChange:function(e){var t=e&&e.user?e.user:void 0;(this._user?this._user.serialize():void 0)!==(t?t.serialize():void 0)&&(this._user=t,this.delegate.authenticatedUserDidChange(this,t))},_user:H.d({type:Nr}),__superMap:{_$8n$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Authentication_v1"}}),Fo=P.a.extend({mixinDependencies:[Mo,xo],staticMembers:{defaultInstance:H.d({type:Fo,readOnly:!0,get:function(){var e=this._defaultInstance;if(!e){var t=Io.sharedInstance;t||_.b("[Authentication] Authentication framework not initialized");var n=t.hostInfo,i=t.session;n||_.b("[Authentication] Authentication host information missing");var r=n.protocolVersion;isNaN(r)&&_.b("[Authentication] Invalid Authentication host information");var a=r<2,s=i?i.user:void 0;e=this._defaultInstance=Fo.create(),a?(e._authentication_v1=No.create(),e._authentication_v1.delegate=e,s&&(e._totalNumberOfAuthenticationSteps=2,e._completedAuthenticationStep=2)):s&&(e._totalNumberOfAuthenticationSteps=s.totalAuthenticationSteps,e._completedAuthenticationStep=s.completedAuthenticationStep),e._user=s,e._connection=this._sharedConnection=Lo.create(a,e)}return e}}),_defaultInstance:H.d({type:Fo}),_sharedConnection:H.d({type:Lo}),__QUALIFIED_CLASS_NAME__:"Authentication"},delegate:H.d({type:gr}),totalNumberOfAuthenticationSteps:H.d({type:Number,readOnly:!0,get:function(){return this.user?this.user.totalAuthenticationSteps:0}}),completedAuthenticationStep:H.d({type:Number,readOnly:!0,get:function(){return this.user?this.user.completedAuthenticationStep:0}}),isAuthenticated:H.d({readOnly:!0,type:Boolean,get:function(){return!!this.user&&this.user.isAuthenticated}}),user:H.d({readOnly:!0,type:Nr,get:function(){return this._user}}),isBackwardsCompatibilityMode:H.d({type:Boolean,readOnly:!0,get:function(){return void 0!==this._authentication_v1&&null!==this._authentication_v1}}),appleId:H.d({type:Boolean,readOnly:!0,get:function(){var e=this._appleId;if(e)return e;var t=this.user;return t?t.appleId:void 0}}),init:function(e){this.__s._$2Y0$init.call(this),this._appleId=e,this._connection=Fo._sharedConnection},authenticate:function(){var e=this;return this!==Fo.defaultInstance&&_.b("[Authentication] only Authentication.defaultInstance can call authenticate()"),this.isBackwardsCompatibilityMode?this._connection.authenticate():this._connection.authenticate().then((function(t){return t.isOk?e._authenticationRequestPromise=Z.a.create():t}))},unauthenticate:function(){return this!==Fo.defaultInstance&&_.b("[Authentication] only Authentication.defaultInstance can call unauthenticate()"),this._connection.unauthenticate()},reauthenticate:function(e){var t=this;return this!==Fo.defaultInstance&&_.b("[Authentication] only Authentication.defaultInstance can call unauthenticate()"),this._connection.reauthenticate(this,e).then((function(e){return e.isOk?t._authenticationSessionPromise=Z.a.create():e}))},revalidate:function(){return this!==Fo.defaultInstance&&_.b("[Authentication] only Authentication.defaultInstance can call revalidate()"),this._connection.revalidate()},retrieveSession:function(e,t){var n=this;return this._connection.retrieveSession(this,this._appleId,e,t).then((function(e){return e.isOk?n._authenticationSessionPromise=Z.a.create():e}))},authenticationStepDidComplete:function(e){e||_.b("[Authentication] no user info for authentication step"),this._user=Nr.deserialize(e);var t=this.delegate;if(t){var n=this._user,i=n.completedAuthenticationStep,r=n.totalAuthenticationSteps;t.authenticationStepDidComplete(this,i,r)}},authenticationDidComplete:function(e){e||_.b("[Authentication] no user info for authentication complete");var t=this.delegate;this._user=Nr.deserialize(e),t&&t.authenticationDidComplete(this);var n=this._authenticationRequestPromise;n&&(n.resolve(Ao.okResult()),this._authenticationRequestPromise=void 0)},authenticationDidCancel:function(){var e=this._authenticationRequestPromise;e&&(e.resolve(Ao.cancelledResult()),this._authenticationRequestPromise=void 0)},retrieveSessionDidComplete:function(e){var t=this._authenticationSessionPromise;t&&(t.resolve(Ao.okResult(e)),this._authenticationSessionPromise=void 0)},retrieveSessionDidCancel:function(){var e=this._authenticationSessionPromise;e&&(e.resolve(Ao.cancelledResult()),this._authenticationSessionPromise=void 0)},_user:H.d({type:Nr}),_connection:H.d({type:Lo}),_authenticationRequestPromise:H.d({type:Z.a}),_authentication_v1:H.d({type:No}),authenticatedUserDidChange:function(e,t){if(t){this._totalNumberOfAuthenticationSteps=2;var n=this.delegate;n?(this._completedAuthenticationStep=1,n.authenticationStepDidComplete(this,void 0,void 0,1,this._totalNumberOfAuthenticationSteps),this._completedAuthenticationStep=2,n.authenticationStepDidComplete(this,void 0,void 0,2,this._totalNumberOfAuthenticationSteps),this._user=t,n.authenticationDidComplete(this)):(this._completedAuthenticationStep=2,this._user=t)}},__superMap:{_$2Y0$init:"init"}});function Vo(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function ko(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Vo(a,i,r,s,o,"next",e)}function o(e){Vo(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Bo=P.a.extend(B.b,ie.a,{mixinDependencies:[gr],initialize:function(){var e=Fo.defaultInstance;e.delegate=this,this._user=e.user},isAuthenticated:V.b({readOnly:!0,dependencies:["user"],get:Object.assign((function(){return void 0!==this.user}),{__CW__getter:function(e,t,n,i){return void 0!==i.internalGet(this,t[0+n])}}),didChange:function(e){var t=L.n();void 0!==t&&(!0===e?(t.isStartupFetchingCplZone=!0,t.isStartupFetchingCplContainers=!0,t.startup(!0)):t.shutdownCpl())}}),isAuthenticating:V.b(!1),user:V.b({readOnly:!0,binding:Oi.c("_user")}),authenticate:function(){var e=this;return ko(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isAuthenticating=!0,t.next=3,Fo.defaultInstance.authenticate();case 3:if(n=t.sent,e.isAuthenticating=!1,!n.isFailed){t.next=8;break}return u.b.error("Unable to authenticate user"),t.abrupt("return",!1);case 8:if(!n.isCancelled){t.next=10;break}return t.abrupt("return",!1);case 10:return t.next=12,L.n().startup();case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t)})))()},unauthenticate:function(){return ko(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo.defaultInstance.unauthenticate();case 2:if(!e.sent.error){e.next=6;break}return u.b.error("Unable to unauthenticate user"),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))()},_user:V.b({strong:!0,type:Nr}),authenticationStepDidComplete:U.a,authenticationDidComplete:function(e){this._user=e.user},staticMembers:{__QUALIFIED_CLASS_NAME__:"SignInService"}}),jo=n(165),Uo={moveMediasToAlbum:function(e,t){var n=e.toArray().map((function(e){return e.primaryAsset}));return this.moveAssetsToAlbum(n,t)},moveOneMediaToAlbum:function(e,t){return this.moveAssetsToAlbum([e.primaryAsset],t)},moveAssetsToAlbum:function(e,t){var n=this,i=G.a.application.feedbackService;return i&&i.report&&i.report("itemsAddedToAlbum"),t.loadLastContainerRelationByPosition().then((function(i){var r=i?i.position:0;return e.forEach((function(e){r=n._moveAssetToAlbum(e,t,r)})),L.n().commit()}))},_moveAssetToAlbum:function(e,t,n){var i=L.n(),r=jt.a.getPositionGivenLastPosition(n),a=e.recordName,s=t.recordName,o=hr.a.getRecordNameForItemInContainer(a,s),l=t.zone,c=l.pk,u=Kt.Record.getPrimaryKeyWithZonePK(c,o),d=hr.a.find(u);if(d&&d.storeStatus.contains(jo.b.CLEAN.DESTROYED)){var h=u+"_deleted_"+Y.a();hr.a.replacePrimaryKeyInStore(u,h)}if(!hr.a.find(u)){var p={pk:u,position:r,recordName:o,zone:c,zoneID:l.zoneID,itemId:a,containerId:s,recordType:hr.a.CK_RECORD_TYPE};return hr.a.createFromDataHash(p,i),r}return n}},Go={errors:H.d(k.c(Ai.a)),erroredFiles:H.d(k.c(oi.a)),erroredFileCount:H.d({readOnly:!0,type:Number,get:function(){return this.erroredFiles.size}}),showAlertForErrs:function(e,t){var n,i=this,r=this._normalizeErr(e),a=this._normalizeErr(t);this.isAttached&&this._clearMsgs(),(n=this.errors).push.apply(n,r),a.forEach((function(e){return i.erroredFiles.add(e)}));var s=this._groupErrsByType(this.errors),o=Object.keys(s).length;1===o&&this._showAlertForSingleErrType(this._selectMsgForErrs(this.errors)),o>1&&this._showAlertForMultipleErrTypes(this._selectMsgForErrs(this.errors))},selectErrMsg:function(e,t){var n,i={primaryButton:{title:s.d("PhotosUploader.Button.OK")}},r=1===t;switch(e){case ni.FileTypeInvalid:n={message:r?s.d("PhotosUploader.Alert.File.Message.Single"):s.d("PhotosUploader.Alert.File.Message.Multiple",{numErrs:t}),description:s.d("PhotosUploader.Alert.InvalidType.Description")};break;case ni.FileSizeTooLarge:n={message:r?s.d("PhotosUploader.Alert.Photo.Message.Single"):s.d("PhotosUploader.Alert.Photo.Message.Multiple",{numErrs:t}),description:s.d("PhotosUploader.Alert.FileTooLarge.Description")};break;case ni.FileNameTooLong:n={message:r?s.d("PhotosUploader.Alert.File.Message.Single"):s.d("PhotosUploader.Alert.File.Message.Multiple",{numErrs:t}),description:s.d("PhotosUploader.Alert.FileNameTooLong.Description")};break;case ni.ServerError:n={message:r?s.d("PhotosUploader.Alert.ServerError.Message.Single"):s.d("PhotosUploader.Alert.ServerError.Message.Multiple",{numErrs:t}),description:s.d("PhotosUploader.Alert.ServerError.Description")};break;case ni.FileNameInvalid:n={message:r?s.d("PhotosUploader.Alert.Photo.Message.Single"):s.d("PhotosUploader.Alert.Photo.Message.Multiple",{numErrs:t}),description:s.d("PhotosUploader.Alert.FileNameInvalid.Description")};break;case ni.FolderNotSupported:n={message:s.d("PhotosUploader.Alert.FolderNotSupported.Message"),description:s.d("PhotosUploader.Alert.InvalidType.Description")};break;case ni.AlbumInvalid:n={message:s.d("PhotosUploader.Alert.AlbumInvalid.Message"),description:s.d("PhotosUploader.Alert.AlbumInvalid.Description")};break;case ni.FolderInvalid:n={message:s.d("PhotosUploader.Alert.FolderInvalid.Message"),description:s.d("PhotosUploader.Alert.FolderInvalid.Description")};break;case ni.MultipleSelection:n={message:s.d("PhotosUploader.Alert.MultipleSelection.Message"),description:s.d("PhotosUploader.Alert.MultipleSelection.Description")};break;case ni.DuplicatePhoto:n={message:r?s.d("PhotosUploader.Alert.Duplicate.Message"):s.d("PhotosUploader.Alert.Duplicate.Multiple.Message"),description:r?s.d("PhotosUploader.Alert.Duplicate.Description"):s.d("PhotosUploader.Alert.Duplicate.Multiple.Description")};break;case ni.DimensionsNotCorrect:n={message:s.d("PhotosUploader.Alert.DimensionsNotCorrect.Message"),description:s.d("PhotosUploader.Alert.DimensionsNotCorrect.Description")};break;case ni.OverQuota:n={message:s.d("PhotosUploader.Alert.Photo.Message.UnknownCount"),description:s.d("PhotosUploader.Alert.OverQuota.Description")};break;default:throw _.b("Unexpected PhotosUploader.UploadError from UploadRequestManager")}return Object.assign(i,n)},hide:function(){var e=this,t=arguments;e.__s._$2ZV$hide.apply(e,t),this.errors=[],this.erroredFiles.clear(),this._clearMsgs()},show:function(e){var t=this,n=arguments;t.__s._$2fO$show.apply(t,n),Object.assign(this,e)},_selectMsgForErrs:function(e){var t=this,n=this._groupErrsByType(e);return Object.keys(n).map((function(e){return n[e]})).map((function(e){return t._selectMsgForSingleErrType(e)}))},_selectMsgForSingleErrType:function(e){var t=e[0],n=this.erroredFileCount;return this.selectErrMsg(t,n)},_showAlertForSingleErrType:function(e){var t=e[0];Object.assign(this,t),this.show()},_showAlertForMultipleErrTypes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.erroredFileCount,n=1===t,i={message:n?s.d("PhotosUploader.Alert.Photo.Message.Single"):s.d("PhotosUploader.Alert.Photo.Message.Multiple",{numErrs:t}),primaryButton:{title:s.d("PhotosUploader.Button.OK")}};Object.assign(this,i),this.show();for(var r=0,a=e.length;r<a;r++){var o=e[r].description;this.addDetail(o)}},_clearMsgs:function(){this.message=this.description=this.primaryButton=null,this.removeDetails()},_groupErrsByType:function(e){return e.reduce((function(e,t){return(e[t]=e[t]||[]).push(t),e}),{})},_normalizeErr:function(e){return Array.isArray(e)?e:new Array(e)},__superMap:{_$2ZV$hide:"hide",_$2fO$show:"show"}},Ho=n(469),Wo=n(155),$o=n(258),zo=n(140),Ko=n(262),qo=Object(we.b)("VerticalAlignment",(function(e){e("Top"),e("Middle"),e("Bottom")})),Qo=Object(we.b)("HorizontalAlignment",(function(e){e("Left"),e("Middle"),e("Right")})),Yo=P.a.extend(B.b,{config:Object(V.b)(),anchorLayout:Object(V.b)(Object(Oi.c)("config.anchorLayout")),spaceLayout:Object(V.b)(Object(Oi.c)("config.spaceLayout")),desiredSize:Object(V.b)({strong:!0,binding:"config.desiredSize"}),minimumSize:Object(V.b)({strong:!0,binding:"config.minimumSize"}),layout:Object(V.b)(),fit:Object(V.b)({readOnly:!0,dependencies:["layout.height","layout.width"],get:Object.assign((function(){var e=this.getPath("layout.width"),t=this.getPath("layout.height");if(!t||!e)return 0;var n=this.minimumSize.width;return t<this.minimumSize.height||e<n?0:e*t}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(!a||!r)return 0;var s=this.minimumSize.width;return a<this.minimumSize.height||r<s?0:r*a}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverLayout"}}),Zo=Yo.extend({arrowLength:Object(V.b)(Object(Oi.c)("config.arrowLength")),_layoutRectangle:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"OnSideLayout"}}),Xo={left:"x",right:"width",top:"y",bottom:"height"},Jo={left:"vertical",right:"vertical",top:"horizontal",bottom:"horizontal"},el={left:"width",right:"x",top:"height",bottom:"y",width:"height",height:"width"},tl={left:-1,right:1,top:-1,bottom:1},nl={left:"width",right:"width",top:"height",bottom:"height"},il={left:"y",right:"y",top:"x",bottom:"x"},rl={left:"height",right:"height",top:"width",bottom:"width"},al={x:0,y:0,height:0,width:0},sl={vertical:qo.Top,horizontal:Qo.Left},ol={vertical:qo.Bottom,horizontal:Qo.Right};function ll(e){var t=Xo[e],n=tl[e],i=el[e],r=il[e],a=rl[e],s=nl[e],o=Jo[e],l=sl[o],c=ol[o];return{fit:Object(V.b)({readOnly:!0,dependencies:["layout.height","layout.width","layout."+r,"layout."+a,"anchorLayout."+r,"anchorLayout."+a,"config.isAlignmentRequired","config."+o+"Alignment"],get:Object.assign((function(){var e,t=this,n=arguments,i=t.__s._$rW$get.apply(t,n),r=$property.internalGet(this,$getArray[2+$offset]),a=$property.internalGet(this,$getArray[3+$offset]),s=$property.internalGet(this,$getArray[4+$offset]),o=$property.internalGet(this,$getArray[5+$offset]),u=$property.internalGet(this,$getArray[6+$offset]),d=$property.internalGet(this,$getArray[7+$offset]);return e=d===l?s-r:d===c?o-a:r+a/2-(s+o/2),u?0!==e&&(i=0):i-=Math.abs(e),i}),{__CW__getter:function(e,t,n,i){var r,a=this,s=arguments,o=a.__s._$rW$get.apply(a,s),u=i.internalGet(this,t[2+n]),d=i.internalGet(this,t[3+n]),h=i.internalGet(this,t[4+n]),p=i.internalGet(this,t[5+n]),f=i.internalGet(this,t[6+n]),g=i.internalGet(this,t[7+n]);return r=g===l?h-u:g===c?p-d:u+d/2-(h+p/2),f?0!==r&&(o=0):o-=Math.abs(r),o}}),__superMap:{_$rW$get:"get"}}),layoutCalculator:Object(B.h)("arrowLength","desiredSize."+s,"desiredSize."+el[s],"anchorLayout."+t,"anchorLayout."+i,"anchorLayout."+r,"anchorLayout."+a,"spaceLayout."+t,"spaceLayout."+i,"spaceLayout."+r,"spaceLayout."+a,"config.spaceInset","config."+o+"Alignment",(function(e,s,o,u,d,h,p,f,g,m,_,v,b){"height"===t||"width"===t?(u+=d,f+=g,f-=v):"height"!==i&&"width"!==i||(d+=u,g+=f,f+=v),_+=m,p+=h;var y,w,I=u+e*n,S=I+s*n;if((S>f&&n>0||S<f&&n<0)&&(S=f),b===l)y=h,w=h+o;else if(b===c)w=p,y=p-o;else{var C=(h+p)/2,E=o/2;y=C-E,w=C+E}var A=(m+=v)-y;A>0&&(y+=A,w+=A);var O=(_-=v)-w;O<0&&(y+=O,w+=O),y<m&&(y=m),al[t]=S,al[i]=I,al[r]=y,al[a]=w,al.width-=al.x,al.height-=al.y;var T=this._layoutRectangle;T?T.beginBatchSet().set("x",al.x).set("y",al.y).set("height",al.height).set("width",al.width).end():this._layoutRectangle=T=Ko.a.create(al),this.layout=T}))}}var cl=Zo.extend(ll("right"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnRightLayout"}}),ul=Zo.extend(ll("left"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnLeftLayout"}}),dl=Zo.extend(ll("top"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnTopLayout"}}),hl=Zo.extend(ll("bottom"),{staticMembers:{__QUALIFIED_CLASS_NAME__:"OnBottomLayout"}}),pl=n(770),fl=n(567),gl=n(194),ml=n(190),_l=n(254),vl=n(449),bl=n(1240),yl=n(193),wl=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"container",classes:["cw-popover-content"]}],classes:["cw-popover-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}}}},className:"cw-ui-popover-view",__QUALIFIED_CLASS_NAME__:"PopoverView"},layout:Object(V.b)(),left:Object(V.b)(Object(Oi.c)("layout.left")),top:Object(V.b)(Object(Oi.c)("layout.top")),_transformObserver:Object(B.h)("left","top",(function(e,t){this.style.translateDevicePixels(e,t)})),height:Object(V.b)(Object(Oi.c)("layout.height")),width:Object(V.b)(Object(Oi.c)("layout.width")),verticalAlignment:Object(V.b)({type:qo}),horizontalAlignment:Object(V.b)({type:Qo})}),Il=Object(we.b)("ArrowPopoverAlignment",(function(e){e("TargetMiddle"),e("Follow"),e("None")})),Sl=wl.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",name:"arrow",classes:["cw-popover-arrow",{type:"CLASSNAMEOUTLET",bindingtype:"ENUMBINDING",name:"arrowDirectionClass",validvalues:["cw-up-arrow","cw-left-arrow","cw-right-arrow","cw-down-arrow","cw-no-arrow"],attributes:{}}],styles:{transform:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"arrowTransformStyle",attributes:{},unit:null,property:"transform"}}}]}},className:"cw-ui-arrow-popover-view",__QUALIFIED_CLASS_NAME__:"ArrowPopoverView"},anchorLayout:Object(V.b)(),arrowLength:Object(V.b)(10),arrowWidth:Object(V.b)(10),arrowAlignment:Object(V.b)({defaultValue:Il.TargetMiddle,type:Il}),arrowLeft:Object(V.b)({readOnly:!0,dependencies:["arrowDirection","arrowLength","arrowWidth","horizontalAlignment","arrowAlignment","layout.x","layout.width","anchorLayout.x","anchorLayout.width"],get:Object.assign((function(){var e=this.arrowDirection,t=this.arrowLength,n=this.layout;if(!n)return 0;var i=n.width;if("left"===e)return-t;if("right"===e)return i;var r,a=this.arrowWidth/2,s=n.x,o=s+a,l=s+i-a;if(this.arrowAlignment===Il.Follow)switch(this.horizontalAlignment){case Qo.Left:r=o;break;case Qo.Right:r=l;break;case Qo.Middle:default:r=s+i/2}else{var c=this.anchorLayout;if(!c)return 0;var u=c.width,d=c.x;r=(d+(d+u))/2}return r=Math.max(Math.min(r,l),o),(r-=s)-a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this.layout;if(!s)return 0;var o=s.width;if("left"===r)return-a;if("right"===r)return o;var l,c=i.internalGet(this,t[2+n])/2,u=s.x,d=u+c,h=u+o-c;if(i.internalGet(this,t[4+n])===Il.Follow)switch(i.internalGet(this,t[3+n])){case Qo.Left:l=d;break;case Qo.Right:l=h;break;case Qo.Middle:default:l=u+o/2}else{var p=this.anchorLayout;if(!p)return 0;var f=p.width,g=p.x;l=(g+(g+f))/2}return l=Math.max(Math.min(l,h),d),(l-=u)-c}})}),arrowTop:Object(V.b)({readOnly:!0,dependencies:["arrowDirection","arrowLength","arrowWidth","verticalAlignment","arrowAlignment","layout.y","layout.height","anchorLayout.y","anchorLayout.height"],get:Object.assign((function(){var e=this.arrowDirection,t=this.arrowLength,n=this.layout;if(!n)return 0;var i=n.height;if("up"===e)return-t;if("down"===e)return i;var r,a=this.arrowWidth/2,s=n.y,o=s+a,l=s+i-a;if(this.arrowAlignment===Il.Follow)switch(this.verticalAlignment){case qo.Bottom:r=o;break;case qo.Top:r=l;break;case qo.Middle:default:r=s+i/2}else{var c=this.anchorLayout;if(!c)return 0;var u=c.height,d=c.y;r=(d+(d+u))/2}return r=Math.max(Math.min(r,l),o),(r-=s)-a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this.layout;if(!s)return 0;var o=s.height;if("up"===r)return-a;if("down"===r)return o;var l,c=i.internalGet(this,t[2+n])/2,u=s.y,d=u+c,h=u+o-c;if(i.internalGet(this,t[4+n])===Il.Follow)switch(i.internalGet(this,t[3+n])){case qo.Bottom:l=d;break;case qo.Top:l=h;break;case qo.Middle:default:l=u+o/2}else{var p=this.anchorLayout;if(!p)return 0;var f=p.height,g=p.y;l=(g+(g+f))/2}return l=Math.max(Math.min(l,h),d),(l-=u)-c}})}),arrowTransformStyle:Object(V.b)({dependencies:["arrowLeft","arrowTop"],readOnly:!0,get:Object.assign((function(){return"translate("+this.arrowLeft+"px, "+this.arrowTop+"px)"}),{__CW__getter:function(e,t,n,i){return"translate("+i.internalGet(this,t[0+n])+"px, "+i.internalGet(this,t[1+n])+"px)"}})}),arrowDirection:Object(V.b)({readOnly:!0,dependencies:["layout.x","layout.width","layout.y","layout.height","anchorLayout.x","anchorLayout.width","anchorLayout.y","anchorLayout.height","arrowAlignment"],get:Object.assign((function(){var e=this.getPath("anchorLayout.height"),t=this.getPath("anchorLayout.y"),n=this.getPath("anchorLayout.width"),i=this.getPath("anchorLayout.x"),r=this.getPath("layout.height"),a=this.getPath("layout.y"),s=this.getPath("layout.width"),o=this.getPath("layout.x");return this.getPath("arrowAlignment")===Il.None?"no":i+n<o?"left":i>o+s?"right":t+e<a?"up":t>a+r?"down":"left"}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[7+n]),a=i.internalGetPath(this,t[6+n]),s=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),l=i.internalGetPath(this,t[3+n]),c=i.internalGetPath(this,t[2+n]),u=i.internalGetPath(this,t[1+n]),d=i.internalGetPath(this,t[0+n]);return i.internalGet(this,t[8+n])===Il.None?"no":o+s<d?"left":o>d+u?"right":a+r<c?"up":a>c+l?"down":"left"}})}),arrowDirectionClass:Object(V.b)({readOnly:!0,dependencies:["arrowDirection"],get:Object.assign((function(){return"cw-"+this.arrowDirection+"-arrow"}),{__CW__getter:function(e,t,n,i){return"cw-"+i.internalGet(this,t[0+n])+"-arrow"}})})}),Cl=n(471),El=Cl.a.extend({view:Object(V.b)({downstreamBindings:{layout:"(owner).matchedLayout.layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),anchorLayoutMeasurer:Object(V.b)({strong:!0,defaultValue:Object(k.c)(bl.a),downstreamBindings:{target:"(owner).anchor",shouldMeasure:"(owner)._shouldMeasure"}}),_hideOnAnchorDetach:Object(B.h)("anchorLayoutMeasurer.targetIsHidden",(function(e){e&&this.hide()})),_shouldMeasure:Object(V.b)(!1),anchor:Object(V.b)(),anchorLayout:Object(V.b)(Object(Oi.c)("anchorLayoutMeasurer.targetLayout")),spaceLayout:Object(V.b)(te.a.sharedInstance.window),spaceInset:Object(V.b)(10),allowedLayouts:Object(V.b)([cl,ul,dl,hl]),fallbackLayout:hl,arrowLength:Object(V.b)(10),arrowWidth:Object(V.b)(10),arrowAlignment:Object(V.b)({defaultValue:Il.TargetMiddle,type:Il}),verticalAlignment:Object(V.b)(qo.Middle),horizontalAlignment:Object(V.b)(Qo.Middle),isAlignmentRequired:Object(V.b)(!0),resolutionStrategy:Al,shouldAutosize:Object(V.b)({type:"boolean",defaultValue:!1}),desiredSize:Object(V.b)({strong:!0,defaultValue:Object(k.c)(_l.a,{height:100,width:50})}),minimumSize:Object(V.b)({strong:!0,defaultValue:Object(k.c)(_l.a,{height:10,width:10})}),show:function(e){var t=this,n=arguments;if(!this.isAttached)return e&&(this.anchor=e),this.anchor||Object(_.b)("PopoverViewController#show requires an anchor view: %{popover}",{popover:this}),this._shouldMeasure=!0,t.__s._$3hQ$show.apply(t,n)},hide:function(){var e=this,t=arguments;if(this.isAttached)return this._shouldMeasure=!1,e.__s._$3nO$hide.apply(e,t)},init:function(){var e=this,t=arguments;e.__s._$3oU$init.apply(e,t);var n=this.anchorLayout;if(!n){var i=this.anchorLayoutMeasurer;i.bind("target",this.bindingFor("anchor"))}},willAppear:function(){var e=this,t=arguments;return this.shouldAutosize&&this._calculateSize(),e.__s._$3yp$willAppear.apply(e,t)},_calculateSize:function(){var e=this.getPath("view.popoverView")||this.view;if(e){var t=e.element,n=e.container;if(t&&n){var i=Object(yl.c)(t),r=Object(yl.c)(n),a=r.getInline("position"),s=i.getInline("height"),o=i.getInline("width");i.set({width:"auto",height:"auto"}),r.set("position","static");var l=n.getBoundingClientRect(),c=l.width,u=l.height;i.set({height:s,width:o}),r.set("position",a);var d=_l.a.create({width:c,height:u});this.beginBatchSet().set("minimumSize",d).set("desiredSize",d).end()}}},_reconnectAllowedLayouts:Object(B.h)("allowedLayouts",(function(e){var t=this.fitObserver;t&&t.disconnect();for(var n=Object(vl.a)(e),i=n.length,r=[],a=0;a<i;a++){var s=n[a];s=s.create({config:this}),r.push(s.bindingFor("fit")),n[a]=s}this.allowedLayoutsInstances=n,r.push(this._resolveLayouts),this.fitObserver=this.observe.apply(this,r)})),_resolveLayouts:function(){var e,t=this.resolutionStrategy,n=t.apply(this,arguments);e=null!==n?this.allowedLayoutsInstances[n]:this._fallbackLayoutInstance||(this._fallbackLayoutInstance=this.fallbackLayout.create({config:this})),this.matchedLayout=e},matchedLayout:Object(V.b)(),viewClass:Sl,__superMap:{_$3hQ$show:"show",_$3nO$hide:"hide",_$3oU$init:"init",_$3yp$willAppear:"willAppear"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverViewController"}});function Al(){for(var e=arguments,t=e.length,n=0,i=null,r=0;r<t;r++){var a=e[r];a>n&&(n=a,i=r)}return i}function Ol(){for(var e=arguments,t=e.length,n=0;n<t;n++){var i=e[n];if(i>0)return n}return null}var Tl=n(214);function Ml(e){var t=e.cloneNode(!0);if("CANVAS"===e.tagName)t.getContext("2d").drawImage(e,0,0);else for(var n=e.querySelectorAll("canvas"),i=t.querySelectorAll("canvas"),r=0,a=n.length;r<a;r++)i[r].getContext("2d").drawImage(n[r],0,0);return t}var Dl={hideDuration:V.b(175),showDuration:V.b(175),hiddenScale:V.b(.95),pathToFadedView:"view",pathToScaledView:"contentController.view",hiddenTransform:V.b({defaultValue:null,dependencies:["hiddenScale"],writeDependencies:[],get:Object.assign((function(e){if(e)return e;var t=this.hiddenScale;return"scale3d("+t+", "+t+", 1)"}),{__CW__getter:function(e,t,n,i){if(e)return e;var r=i.internalGet(this,t[0+n]);return"scale3d("+r+", "+r+", 1)"}}),set:Tl.a}),hide:function(){var e=this,t=arguments,n=this.getPath(this.pathToFadedView),i=this.getPath(this.pathToScaledView);if(!n||!i)return e.__s._$tc$hide.apply(e,t);var r=n.element,a=i.element;if(!r||!a)return e.__s._$tc$hide.apply(e,t);if(!r.parentNode)return e.__s._$tc$hide.apply(e,t);var s=this.hideDuration,o=this.hiddenTransform,l="temp"+(Date.now()+String(Math.random()).slice(2));a.classList.add(l);var c=Ml(r);a.classList.remove(l),c.style.pointerEvents="none",c.setAttribute("aria-hidden","true");var u=r.parentNode,d=e.__s._$tc$hide.apply(e,t);u.appendChild(c);var h=yl.c(c),p=yl.c(c.getElementsByClassName(l)[0]);return h.set("transition","opacity "+s+"ms ease-in"),p.set("transition","transform "+s+"ms ease-in"),c.offsetWidth,p.set("transform",p.get("transform")+" "+o),h.set("opacity",0),X.a((function(){return c.parentNode.removeChild(c)}),s),d},show:function(){var e=this,t=arguments,n=e.__s._$1g4$show.apply(e,t),i=this.showDuration,r=this.hiddenTransform,a=this.getPath(this.pathToFadedView);if(!a)return n;var s=a.style,o=a.element;if(!o||!o.parentNode)return n;var l=this.getPath(this.pathToScaledView);if(!l)return n;var c=l.style,u=c.get("transform"),d=c.getInline("transform");s.set("opacity",0),c.set("transform",u+" "+r),o.offsetWidth,s.set("transition","opacity "+i+"ms ease-out"),c.set("transition","transform "+i+"ms ease-out"),o.offsetWidth,s.set("opacity",1);var h=u+" scale3d(1, 1, 1)";return c.set("transform",h),X.a((function(){s.clear("transition").clear("opacity"),c.clear("transition");var e=c.getInline("transform");c.set("transform",h),c.getInline("transform")===e?c.set("transform",d):c.set("transform",e)}),i),n},__superMap:{_$tc$hide:"hide",_$1g4$show:"show"}},Pl=n(357),Ll=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["photos-popover-modal"]},className:"photos-modal-view",__QUALIFIED_CLASS_NAME__:"ModalView"},layout:V.b(),anchorLayout:V.b(),arrowLength:V.b(),arrowWidth:V.b(),arrowAlignment:V.b(),verticalAlignment:V.b(),horizontalAlignment:V.b(),popoverView:V.b({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),contentView:V.b(Oi.c("popoverView.contentView")),pointerDown:function(e){var t=this.element.style.display;this.element.style.display="none";var n=globalThis.document.elementFromPoint(e.clientX,e.clientY),i=gl.a.create({type:"pointerMove",target:n,nativeEvent:e});return G.a.application.rootResponder.dispatchEvent(i),this.element.style.display=t,this.sendEvent("hidePopover"),!0},keyUp:function(e){e.which===ml.a.ESC&&this.sendEvent("hidePopover")}}),Rl=El.extend(Dl,Pl.a,{allowedLayouts:[ul,hl,dl],isAlignmentRequired:!1,resolutionStrategy:Al,arrowLength:13,arrowWidth:29,insetFromWindow:30,viewClass:F.b({additionalClassNames:F.b(["photos-popover-view"]),pointerDown:function(){return!0}}),updateLayout:function(){this.propertyChanged("anchor")},createView:function(){var e=this,t=arguments,n=e.__s._$10v$createView.apply(e,t);return n.style.set("transform-origin","50% 0"),Ll.create({popoverView:n})},pathToScaledView:"view.popoverView",show:function(){var e=this,t=arguments;e.__s._$14I$show.apply(e,t),this._shouldMeasure=!1},hidePopover:function(){return this.hide(),!0},_viewportDimensionObserver:B.h({inputs:[te.a.sharedInstance.window.bindingFor("height"),te.a.sharedInstance.window.bindingFor("width"),"anchor.isAttached","viewportHeight","viewportWidth"],callback:function(){this.getPath("anchor.isAttached")&&(this._shouldMeasure=!0,this._shouldMeasure=!1)}}),spaceLayout:k.c(Ko.a.extend({owner:V.b(),window:V.b(te.a.sharedInstance.window),x:V.b({readOnly:!0,dependencies:["window.x","owner"],get:Object.assign((function(){return this.getPath("window.x")+this.owner.insetFromWindow}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n]).insetFromWindow}})}),y:V.b({readOnly:!0,dependencies:["window.y","owner"],get:Object.assign((function(){return this.getPath("window.y")+this.owner.insetFromWindow}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n]).insetFromWindow}})}),width:V.b({readOnly:!0,dependencies:["window.width","owner"],get:Object.assign((function(){return this.getPath("window.width")-2*this.owner.insetFromWindow}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGet(this,t[1+n]).insetFromWindow}})}),height:V.b({readOnly:!0,dependencies:["window.height","owner"],get:Object.assign((function(){return this.getPath("window.height")-2*this.owner.insetFromWindow}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGet(this,t[1+n]).insetFromWindow}})})})),__superMap:{_$10v$createView:"createView",_$14I$show:"show"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverViewController"}}),xl=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}],classes:["popover-message",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"message",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["popover-description",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"description",truevalue:"",falsevalue:"cw-hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"message",truevalue:"has-message",attributes:{}}]}],classes:["popover-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasText",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttons",classes:["buttons-container"]}]}},__QUALIFIED_CLASS_NAME__:"PopoverWithButtonListContentView"},_measure:B.h({inputs:["isAttached","buttons","message","description"],callback:function(e){if(e){this.get("style").set("width","auto").set("height","auto");var t=this.element,n=this.desiredSize,i=t.getBoundingClientRect();n.set("width",Math.ceil(i.width)),n.set("height",Math.ceil(i.height)),this.get("style").set("width","").set("height","")}}}),desiredSize:V.b({strong:!0,defaultValue:k.c(_l.a,{width:"100%",height:"100%"})}),_hasText:V.b({readOnly:!0,dependencies:["message","description"],get:Object.assign((function(){return Boolean(this.message||this.description)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),buttons:V.b(),message:V.b(),description:V.b()}),Nl=fi.a.extend({viewClass:xl,view:V.b({downstreamBindings:{buttons:"(owner).buttons",message:"(owner).message",description:"(owner).description"}}),buttons:V.b(),message:V.b(),description:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverWithButtonListContentController"}}),Fl=Rl.extend(Ti.a,{viewClass:F.b({additionalClassNames:F.b(["popover-with-button-list"])}),desiredSize:V.b({strong:!0,binding:Oi.c("contentController.view.desiredSize")}),contentController:V.b({defaultValue:k.c(Nl),downstreamBindings:{buttons:"(owner).buttons",message:"(owner).message",description:"(owner).description"}}),buttons:V.b(),nextResponder:V.b(),message:V.b(),description:V.b(),buttonDidActivate:function(){this.hide()},_updatePopoverArrowClass:B.h({inputs:["isAttached"],callback:function(){if(this.isAttached){var e=this.view.popoverView,t=e.width,n=e.arrowLeft,i=n+e.arrowWidth,r=e.arrowDirection,a=e.element.classList;a.remove("popover-arrow-up-right","popover-arrow-down-right","popover-arrow-up-left","popover-arrow-down-left"),t-i<5?"up"===r?a.add("popover-arrow-up-right"):"down"===r&&a.add("popover-arrow-down-right"):n<5&&("up"===r?a.add("popover-arrow-up-left"):"down"===r&&a.add("popover-arrow-down-left"))}}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PopoverWithButtonList"}}),Vl=P.a.extend(B.b,{mixinDependencies:[fl.a],staticMembers:{show:function(e){var t=Vl.create(e);return t.show(),t},__QUALIFIED_CLASS_NAME__:"ActionSheet"},alertViewController:V.b(wn.b),buttons:V.b(),message:V.b(),description:V.b(),iconNames:V.b(),anchor:V.b(),alwaysRenderAsAlert:V.b(!1),renderAsAlertOnMouse:V.b(!1),isAttached:V.b({readOnly:!0,dependencies:["isPopoverAttached","isAlertAttached"],get:Object.assign((function(){return Boolean(this.isPopoverAttached||this.isAlertAttached)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),isPopoverAttached:V.b({readOnly:!0,dependencies:["_visiblePopover","_visiblePopover.isAttached"],get:Object.assign((function(){return Boolean(this._visiblePopover&&this._visiblePopover.isAttached)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})}),isAlertAttached:V.b({readOnly:!0,dependencies:["_visibleAlert","_visibleAlert.isAttached"],get:Object.assign((function(){return Boolean(this._visibleAlert&&this._visibleAlert.isAttached)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})}),show:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.anchor||this.alwaysRenderAsAlert||_.b("Action sheet requires anchor for regular size class"),this.buttons||_.b("Action sheet requires buttons"),this.buttons.forEach((function(t){t.isPrimary&&(e._primaryButtonForMouse=t),t.isAlternate&&(e._alternateButtonForMouse=t)})),this._shouldRenderAsPopover()?this._showPopover(t):this._showAlert(t)},hide:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._hideViews(e)},_hideViews:function(e){this._hideAlert(e),this._hidePopover(e),this._resetButtonConfig()},_shouldRenderAsPopover:function(){var e=this.primaryInteractionMode,t=this.sizeClass,n=this.alwaysRenderAsAlert,i=this.renderAsAlertOnMouse,r=e===yn.a.TOUCH,a=t===dn.a.COMPACT;return!(n||r&&a||!r&&i)},_showPopover:function(e){var t=this,n=this.anchor,i=this.buttons,r=this.message,a=this.description,s=this;this._visiblePopover=Fl.extend({hide:function(){var e=this,t=arguments;s._animationIsDisabled||s._togglePopoverAnimation(!0),e.__s._$1rp$hide.apply(e,t)},__superMap:{_$1rp$hide:"hide"}}).create({insetFromWindow:0,allowedLayouts:[hl,dl],buttons:this._configurePopoverButtons(i),message:r,description:a,anchor:n}),this._defaultPopoverAnimationDuration=this._visiblePopover.showDuration,this._togglePopoverAnimation(e),this._visiblePopover.show();var o=this._visiblePopover.observe("isAttached",(function(e){e||(o.disconnect(),t._visiblePopover=void 0)}))},_showAlert:function(e){var t=this,n=this.buttons,i=this.message,r=this.description,a=this.iconNames,s=this.primaryInteractionMode,o=this,l=s===yn.a.TOUCH?this._configureAlertButtonsForTouch(n):this._configureAlertButtonsForMouse(n);this._visibleAlert=this.alertViewController.extend({dismissModalDialog:function(){var e=this,t=arguments;o._animationIsDisabled||o._toggleAlertAnimation(!0),e.__s._$2Nw$dismissModalDialog.apply(e,t)},__superMap:{_$2Nw$dismissModalDialog:"dismissModalDialog"}}).create({alertStyle:pl.a.ACTION_SHEET,message:i,description:r,iconNames:a,buttons:l}),this._toggleAlertAnimation(e),this._visibleAlert.show();var c=this._visibleAlert.observe("isAttached",(function(e){e||(c.disconnect(),t._visibleAlert=void 0)}))},_hidePopover:function(e){this.isPopoverAttached&&(this._togglePopoverAnimation(e),this._animationIsDisabled=!e,this._visiblePopover.hide(),this._animationIsDisabled=!1)},_hideAlert:function(e){this.isAlertAttached&&(this._toggleAlertAnimation(e),this._animationIsDisabled=!e,this._visibleAlert.hide(),this._animationIsDisabled=!1)},_togglePopoverAnimation:function(e){if(this._visiblePopover){var t=e?this._defaultPopoverAnimationDuration:0;this._visiblePopover.showDuration=t,this._visiblePopover.hideDuration=t}},_toggleAlertAnimation:function(e){if(this._visibleAlert){var t=this._visibleAlert.view.element;e?t.classList.remove("action-sheet-no-animation"):t.classList.add("action-sheet-no-animation")}},_configurePopoverButtons:function(e){var t=this;return Wo.b.create(e).filter((function(e){return!t._isCancelButton(e)}))},_configureAlertButtonsForTouch:function(e){var t=this,n=-1,i=Wo.b.create(e).reverse().map((function(e,i){var r=t._isCancelButton(e);return e.isPrimary=r||void 0,e.isAlternate=void 0,r&&(n=i),e}));return i.length>1&&n>=0&&0!==n&&i.move(n,0),i},_configureAlertButtonsForMouse:function(e){var t,n=this,i=Wo.b.create(e).map((function(i,r){return i===n._primaryButtonForMouse?i.isPrimary=!0:(i.isPrimary=void 0,2!==e.length&&i!==n._alternateButtonForMouse||(i.isAlternate=!0)),i.isAlternate&&(t=r),i}));return i.length>1&&t>=0&&1!==t&&i.move(t,1),i},_resetButtonConfig:function(){var e=this;this.buttons.forEach((function(t){t.isPrimary=void 0,t.isAlternate=void 0,t===e._primaryButtonForMouse?t.isPrimary=!0:t===e._alternateButtonForMouse&&(t.isAlternate=!0)})),this._alternateButtonForMouse=void 0,this._primaryButtonForMouse=void 0},_isCancelButton:function(e){return Boolean("hide"===e.action||e.isCancel)},_updateRenderingMode:B.h({inputs:["anchor.isAttached","primaryInteractionMode","sizeClass","alwaysRenderAsAlert","renderAsAlertOnMouse"],callback:function(){if(this._visibleAlert||this._visiblePopover){var e=this._shouldRenderAsPopover();e&&this.isAlertAttached&&this.anchor&&this.anchor.isAttached?(this._hideAlert(!1),this._showPopover(!1)):!e&&this.isPopoverAttached&&(this._hidePopover(!1),this._showAlert(!1))}}}),_visiblePopover:V.b({strong:!0}),_visibleAlert:V.b({strong:!0}),_primaryButtonForMouse:void 0,_alternateButtonForMouse:void 0,cleanup:function(){var e=this,t=arguments;this._hideViews(!1),e.__s._$4gl$cleanup.apply(e,t)},__superMap:{_$4gl$cleanup:"cleanup"}}),kl=n(764),Bl=In.a.extend(kl.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"input",classes:["cw-text-field",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}}],attributes:{type:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"type",attributes:{},attribute:"type"},maxlength:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"maxLength",attributes:{},attribute:"maxlength"},autocomplete:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocomplete",attributes:{},attribute:"autocomplete"},autocorrect:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocorrect",attributes:{},attribute:"autocorrect"},autocapitalize:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"autocapitalize",attributes:{},attribute:"autocapitalize"},spellcheck:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"spellcheck",attributes:{},attribute:"spellcheck"},placeholder:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"placeholder",attributes:{},attribute:"placeholder"},"aria-invalid":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"hasInvalidValue",attributes:{},attribute:"aria-invalid"},id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"id",attributes:{},attribute:"id"}}}},className:"cw-ui-views-text-field",__QUALIFIED_CLASS_NAME__:"TextField"},value:Object(V.b)(""),type:"text",placeholder:void 0,action:"submit",maxLength:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"default",id:null,needsDefaultTouch:!0,hasInvalidValue:!1,isEditable:Object(V.b)(!0),isFocusable:Object(V.b)({readOnly:!0,dependencies:["isDisabled"],get:Object.assign((function(){return!this.isDisabled}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),defaultFocusElement:Object(Oi.c)("element"),selection:Object(V.b)({cacheable:!1,dependencies:["element"],writeDependencies:["_selection"],get:function(){var e,t,n,i=this.controlElement,r=null;if(""===i.value?e=t=0:("selectionStart"in i&&(e=i.selectionStart),"selectionEnd"in i&&(t=i.selectionEnd)),null===e||null===t){var a=document.selection;if(a){var s=a.type;!s||"None"!==s&&"Text"!==s||(n=(r=a.createRange()).text.length,t=(e=Math.abs(r.moveStart("character",0-(i.value.length+1))))+n)}}return n=-1===e||-1===t?-1:t-e,Object.freeze({start:e,end:t,length:n,value:i.value.slice(e,t)})},set:Object.assign((function(e){this.set("_selection",e)}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e}}),writeDependencySetPathMap:[!1]}),select:function(){var e=this.controlElement;e&&e.select()},isDefaultTabbingEnabled:!0,allowedCharacters:void 0,isIMEInputActive:Object(V.b)(!1),didFocus:function(){this.controlElement.focus()},didBlur:function(){this.sendEvent("didEndEditing",this)},input:function(e){this._elementValueDidChange(),this._compositionDidEnd=!1},keyDown:function(e){if(e.which===ml.a.RETURN){this.sendEvent("didEndEditing",this);var t=this.action,n=!1;return t&&(n=this.sendEvent(t,this)),this.select(),n}return!1},compositionStart:function(e){this.set("isIMEInputActive",!0)},compositionEnd:function(e){this._compositionDidEnd=!0,this.set("isIMEInputActive",!1)},_compositionDidEnd:!1,handleSelectionChange:function(e){this.propertyChanged("selection")},init:function(){var e=this,t=arguments;e.__s._$3Cw$init.apply(e,t);var n=this.controlElement,i=this.isDefaultTabbingEnabled;i||n.setAttribute("tabindex","-1");var r=this.placeholder;r&&n.setAttribute("aria-label",r);var a=this.allowedCharacters;!a||a instanceof RegExp||Object(_.b)("Must use only RegExp for TextField character validation.")},_isPlaceholderShowing:Object(V.b)({dependencies:["value","isIMEInputActive"],readOnly:!0,get:Object.assign((function(){if(!this.isIMEInputActive){var e=this.value;if(!Object(K.a)(e)||""===e)return!0}return!1}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n])){var r=i.internalGet(this,t[0+n]);if(!Object(K.a)(r)||""===r)return!0}return!1}})}),_valueDidChange:Object(B.h)("value",(function(e){var t=this.controlElement;t.value!==e&&(t.value=Object(K.a)(e)?e:"")})),_elementValueDidChange:function(){var e=this.controlElement,t=this.value,n=e.value;(this._compositionDidEnd||t!==n)&&(this.isIMEInputActive?this.value=n:this._isInputAllowed(n)?this.set("value",n):e.value=t||"")},_isInputAllowed:function(e){var t=this.allowedCharacters;return!t||!e||t.test(e)},_selectionEventElement:null,_attachmentDidChange:Object(B.g)("element","isAttached",(function(e,t){var n=this._selectionEventElement;!n||n===e&&t||(Object(Xe.a)(n,"select",this._handleSelectionChangeBound),this._selectionEventElement=null),e&&t&&(this._selectionEventElement=e,Object(Ze.a)(e,"select",this._handleSelectionChangeBound))})),_handleSelectionChangeBound:Object(H.d)((function(){return this.handleSelectionChange.bind(this)})),_selection:Object(V.b)(),_selectionDidChange:Object(B.h)("_selection",(function(e){if(e){var t=this.controlElement,n=e.start,i=e.end;this.focus();var r=null;if(t.setSelectionRange)t.setSelectionRange(n,i);else{(r=t.createTextRange()).move("character",n),r.moveEnd("character",i-n);try{r.select()}catch(aY){return null}}}})),_statusDidChange:Object(B.h)("isDisabled","isEditable",(function(e,t){var n=this.controlElement;e?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"),t?n.removeAttribute("readonly"):n.setAttribute("readonly","readonly")})),__superMap:{_$3Cw$init:"init"}}),jl=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"textField"}],classes:["text-field-for-alert-view"]},__QUALIFIED_CLASS_NAME__:"TextFieldForAlertView"},value:V.b(),placeholderText:V.b({didChange:function(e){e&&(this.textField.placeholder=e)}}),textField:V.b({defaultValue:k.c(Bl,{additionalClassNames:["cw-theme"]}),downstreamBindings:{value:"(owner).value"}})}),Ul=wn.b.extend({staticMembers:{show:function(e){var t=this.create(e);return t.placeholderText=e.placeholderText,t.show(),t},__QUALIFIED_CLASS_NAME__:"AlertWithTextFieldViewController"},viewClass:V.b(F.b({additionalClassNames:F.b(["alert-with-text-field"])})),placeholderText:V.b(),accessoryView:V.b({readOnly:!0,strong:!0,get:function(){return jl.create()},downstreamBindings:{placeholderText:"(owner).placeholderText"}}),createButtonView:function(e){var t={textFieldValue:V.b({readOnly:!0,dependencies:["parent.accessoryView.value"],get:Object.assign((function(){return this.getPath("parent.accessoryView.value")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})})};return e.disableWhileEmptyText&&(t.isDisabled=V.b({dependencies:["textFieldValue"],get:Object.assign((function(e){return e||!this.textFieldValue}),{__CW__getter:function(e,t,n,i){return e||!i.internalGet(this,t[0+n])}}),writeDependencies:[],set:Tl.a})),Ho.a.extend(t).create(e)}});function Gl(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function Hl(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Gl(a,i,r,s,o,"next",e)}function o(e){Gl(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Wl={mixinDependencies:[{createValidAlbum:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$o.a.NORMAL,i=L.n();i.feedbackService&&i.feedbackService.report("createNewAlbumOrFolder",{isFolder:n===$o.a.FOLDER});var r=L.n(),a=t?t.pk:void 0,s=a?jt.a.find(a):r.cplRootContainer;return s.loadFirstContainerByPosition().then((function(t){var i=t?t.position:void 0,a=jt.a.getPositionGivenFirstPosition(i),o=e,l=Y.a(),c=s.zone,u=c.zoneID,d=c.pk,h={pk:jt.a.getPrimaryKeyWithZonePK(d,l),zone:d,zoneID:u,position:a,recordName:l,albumNameEnc:o,isDeleted:!1,isExpunged:!1,albumType:n.value,recordType:jt.a.CK_RECORD_TYPE,sortAscending:1,sortType:zo.a.CREATION_DATE.value};s.recordName!==jt.a.ROOT_RECORD_NAME&&(h.parentId=s.recordName);var p=jt.a.createFromDataHash(h,r);return p.save().then((function(){return jt.a.find(p.pk)}))}))},showAddAlbumActions:function(e){var t=[Ho.a.create({title:s.d("Alert.Add.Album.Message"),action:"displayAddAlbumAlertOnTouch",target:this}),Ho.a.create({title:s.d("Alert.Add.Folder.Message"),action:"displayAddFolderAlertOnTouch",target:this}),Ho.a.create({title:s.d("Alert.Cancel.Button.Title"),isCancel:!0})];Vl.show({buttons:t,anchor:e})},displayAddAlbumAlertOnTouch:function(){var e={title:s.d("Alert.Save.Button.Title"),action:"addAlbumAlertConfirm",target:this,isPrimary:!1,disableWhileEmptyText:!0},t={title:s.d("Alert.Cancel.Button.Title"),isPrimary:!0};Ul.show({placeholderText:s.d("Alert.Add.Album.Placeholder"),message:s.d("Alert.Add.Album.Message"),description:s.d("Alert.Add.Album.Description"),buttons:Wo.b.create([e,t])})},addAlbumAlertConfirm:function(e){var t=this;return Hl(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=e.textFieldValue)||(i=s.d("Alert.Add.Album.Untitled")),t.editModeIsActive=!1,n.next=5,t.createValidAlbum(i,t.container);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},displayAddFolderAlertOnTouch:function(){var e={title:s.d("Alert.Save.Button.Title"),action:"addFolderAlertConfirm",target:this,isPrimary:!1,disableWhileEmptyText:!0},t={title:s.d("Alert.Cancel.Button.Title"),isPrimary:!0};Ul.show({placeholderText:s.d("Alert.Add.Album.Placeholder"),message:s.d("Alert.Add.Folder.Message"),description:s.d("Alert.Add.Folder.Description"),buttons:Wo.b.create([e,t])})},addFolderAlertConfirm:function(e){var t=this;return Hl(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=e.textFieldValue)||(i=s.d("Alert.Add.Folder.Untitled")),t.editModeIsActive=!1,n.next=5,t.createValidAlbum(i,t.container,$o.a.FOLDER);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()}},Uo],_alertViewControllerClass:V.b(Nn),_coalescedErrorAlertViewControllerClass:V.b({dependencies:["_alertViewControllerClass"],readOnly:!0,get:Object.assign((function(){return this._alertViewControllerClass.extend(Go)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).extend(Go)}})}),alertViewController:V.b({dependencies:["_coalescedErrorAlertViewControllerClass"],readOnly:!0,strong:!0,get:Object.assign((function(){return this._coalescedErrorAlertViewControllerClass.create()}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create()}})}),createAlbumAndAddSelection:function(e,t,n){var i=this,r=Me.a(n);return this.createValidAlbum(e,t).then((function(e){return Vn.a(r)?e:i.moveMediasToAlbum(r,e).then((function(t){if(t){var n=e.medias.objectAt(0);if(!n&&t.isRecordsResponse&&t.records.length>0)for(var i=0;i<t.records.length;i++)if(t.records[i].recordType===hr.a.CK_RECORD_TYPE){var r=t.records[i].fields.itemId.value,a=e.zone.pk,s=pr.a.getPrimaryKeyWithZonePK(a,r);n=fr.a.findByAssetPK(s);break}return n&&!e.keyMedia&&(e.keyMediaBySystem=n),e}u.b.warn("UploadAndAlbumSupport: No response, cannot add selection to album")}))}))},_validateAlbum:function(e){if(e&&!e.isNormalAlbum&&!e.isMomentsAlbum&&!e.isAllPhotosAlbum){var t,n=this.alertViewController;return t=e&&e.isFolder?n.selectErrMsg(ni.FolderInvalid):n.selectErrMsg(ni.AlbumInvalid),n.show(t),!1}return!0},_tooManyAlbumsSelection:function(){var e=this.alertViewController,t=e.selectErrMsg(ni.MultipleSelection);e.show(t)},uploadButtonClicked:function(e){var t=this.currentUploadViewController;if(t){var n=t.container;if(n.isRootFolder){var i=this.getPath("topViewController.selection");if(i){if(!(i.length<=1))return void this._tooManyAlbumsSelection();var r=jt.a.PredefinedName.PHOTOS,a=jt.a.findOrCreatePlaceholder(r);n=i.length?i.toArray()[0]:a}}this.uploadFilesAndMoveToAlbum(e,n)}},uploadFilesAndMoveToAlbum:function(e,t,n){var i=this,r=ri.sharedInstance;if(!t||this._validateAlbum(t)){var a=L.n();a.feedbackService&&a.feedbackService.report("numFilesUploaded",{count:a.feedbackService.getSignificantNum(e.length)});var s,o,l=r.addFilesWithValidation(e,n,this.getUploadServiceUrl(),this.getUserDsid()),c=l.validFiles,d=l.errors,h=l.erroredFiles,p=this.alertViewController,f=[];if(Vn.a(c)||(s=r.listen("alertUser",(function(e){if(e&&e.context){var t=e.context,n=t.type,i=t.file;p.showAlertForErrs(n,i)}})),o=r.listen("fileUploadComplete",(function(e){var n=e.context,r=n.response,a=n.currentFile;if(c){var s=c.indexOf(a);if(c.splice(s,1),r&&r.body){var l=r.body,d=l.records,h=l.remappedRef,p=l.isDuplicate;if(d){var g=d[1];(p||h)&&(f.push(a),g={recordName:h}),t&&t.isNormalAlbum&&i.moveAssetsToAlbum([g],t)}if(0===c.length&&(o.disconnect(),f.length>0)){i._dupErrAlertVC||(i._dupErrAlertVC=i._coalescedErrorAlertViewControllerClass.create().retain());var m=ni.DuplicatePhoto;i._dupErrAlertVC.showAlertForErrs(m,f)}}else u.b.info("UploadAndAlbumSupport: Response is not defined, upload likely aborted.")}else o.disconnect()}))),!Vn.a(d)){if(d.some((function(e){return e===ni.FolderNotSupported}))){var g=p.selectErrMsg(ni.FolderNotSupported);return p.show(g),o&&o.disconnect(),void(s&&s.disconnect())}p.showAlertForErrs(d,h)}}},showAddToAlbumErrorMessage:function(){this._alertViewControllerClass.create({message:s.d("Alert.Selection.ErrorTitle"),description:s.d("Alert.Selection.NetworkError"),primaryButton:{title:s.d("Alert.OK.Button.Title")}}).show()},getUploadServiceUrl:function(){return lr("uploadimagews")},getUserDsid:function(){var e=Bo.sharedInstance.user;return e||_.b("Login to get DSID"),e.dsid},currentUploadViewController:V.b()},$l=h.a.extend({staticMembers:{storageKey:"photos-ui"},selectionLimit:h.a.numberProperty(1e3),zipDownloadSpinnerThreshold:h.a.numberProperty(1),uiSizeClassRegularInset:h.a.numberProperty(20),hasDataTransferItemSupport:h.a.booleanProperty(te.a.sharedInstance.isChrome&&te.a.sharedInstance.majorVersion>=21),uiSizeIPhone4LandscapeWidth:h.a.numberProperty(480),uiSizeIPhoneSELandscapeWidth:h.a.numberProperty(568),uiSizeIPad97LandscapeWidth:h.a.numberProperty(1024),uiSizeIPad129LandscapeWidth:h.a.numberProperty(1366),uiPhotosGridGutterDesktop:h.a.numberProperty(16),uiPhotosDefaultItemSideSize:h.a.numberProperty(132),uiPhotosItemMinSpacing:h.a.numberProperty(12),uiPhotosColumnCountIPhone3GSLike:h.a.numberProperty(4),uiPhotosColumnCountIPhone4Like:h.a.numberProperty(6),uiPhotosColumnCountCompact:h.a.numberProperty(7),uiPhotosColumnCountDesktop:h.a.numberProperty(4),uiPhotosColumnCountPortrait:h.a.numberProperty(5),uiPhotosColumnCountLandscape:h.a.numberProperty(7),uiPhotosGridFolderGutterDesktop:h.a.numberProperty(46),uiPhotosGridFolderGutterCompact:h.a.numberProperty(16),uiPhotosGridFolderGutterCompactLandscape:h.a.numberProperty(24),uiPhotosGridFolderGutterRegular:h.a.numberProperty(35),uiPhotosGridFolderGutterRegularLandscape:h.a.numberProperty(50),uiPhotosGridFolderRowSpacingCompact:h.a.numberProperty(56),uiPhotosGridFolderRowSpacingRegular:h.a.numberProperty(64),uiPhotosGridFolderRowSpacingDesktop:h.a.numberProperty(72),uiPhotosGridFolderColumnSpacingCompact:h.a.numberProperty(16),uiPhotosGridFolderColumnSpacingCompactLandscape:h.a.numberProperty(50),uiPhotosGridFolderColumnSpacingRegular:h.a.numberProperty(20),uiPhotosGridFolderColumnSpacingRegularLandscape:h.a.numberProperty(30),uiPhotosGridFolderColumnSpacingDesktop:h.a.numberProperty(40),uiPhotosFolderColumnCountCompact:h.a.numberProperty(2),uiPhotosFolderColumnCountCompactLandscape:h.a.numberProperty(3),uiPhotosFolderColumnIPad97Like:h.a.numberProperty(4),uiPhotosFolderColumnIPad129Like:h.a.numberProperty(5),uiPhotosFolderColumnIPad129LandscapeLike:h.a.numberProperty(7)}).create(),zl={mixinDependencies:[Rn],dropEventName:"dropEvent",acceptedDragTypes:H.d(k.c([Pn.FILE_LIST])),acceptDataForDragType:function(e){var t=this.currentUploadViewController;if(!G.a.application.isCreateAllowed||!t)return!1;var n=t.container;if(e.container=n,n&&n.isRootFolder){var i=L.n().cplSystemContainersMap,r=jt.a.PredefinedName.PHOTOS,a=i.get(r),s=t.selection;e.container=a,s&&(e.selection=s)}return this.sendEvent(this.dropEventName,e,this),!0},currentUploadViewController:V.b()},Kl={mixinDependencies:[Ti.a,B.b,Wl],dropEvent:function(e){this.uploadFiles(e)},uploadFiles:function(e){if(e&&e.dataTransfer){var t,n=e.dataTransfer.files;$l.hasDataTransferItemSupport&&(t=e.dataTransfer.items);var i=e.selection,r=e.container;if(i){if(i.length>1)return void this._tooManyAlbumsSelection();r=i.length?i.toArray()[0]:r}this.uploadFilesAndMoveToAlbum(n,r,t)}}},ql=P.a.extend(B.b,{name:V.b({type:String}),albumType:V.b({type:$o.a}),type:V.b({type:String}),pk:V.b(),isFolder:V.b({type:Boolean}),isLoading:V.b({type:Boolean}),isLoaded:V.b({type:Boolean}),isRootFolder:V.b({type:Boolean}),isMediaTypesFolder:V.b({type:Boolean}),isNormalAlbum:V.b({type:Boolean}),isRecentlyDeletedAlbum:V.b({type:Boolean}),isFavoritesAlbum:V.b({type:Boolean}),isPredefinedSmartAlbum:V.b({type:Boolean}),isHiddenAlbum:V.b(),isDeleted:V.b(),parent:V.b(),keyMedia:V.b(),lastMediaByDate:V.b(),firstMediaByDate:V.b(),medias:V.b(k.c(Wo.b)),containers:V.b(k.c(Wo.b)),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseVirtualContainer"}}),Ql={mixinDependencies:[zn],eventsToReport:H.d(F.b({hlsFragLoadEmergencyAborted:qn.REPORT_ALL,hlsMediaAttached:qn.REPORT_ALL,hlsMediaDetached:qn.REPORT_ALL,hlsLevelSwitched:qn.REPORT_ALL,hlsFpsDrop:qn.REPORT_ALL,hlsError:qn.REPORT_ALL,hlsStalled:qn.REPORT_ALL,hlsFragLoaded:qn.REPORT_ALL,favoriteToggled:qn.REPORT_ALL,itemDeleted:qn.REPORT_ALL}))};var Yl=n(143),Zl=n(451),Xl={mixinDependencies:[B.b],stateStoreId:V.b(""),persistentStateProperties:[],shouldSaveStateOnChange:V.b(!0),_autoSavePauseCount:0,init:function(){var e=this,t=arguments;e.__s._$LI$init.apply(e,t);var n=vl.a(this.persistentStateProperties);n.unshift("shouldSaveStateOnChange"),this.observe({inputs:n,callback:function(e){e&&0===this._autoSavePauseCount&&this.saveState()},notifyOnCreate:!1})},encodeState:function(e){for(var t=this.persistentStateProperties,n=t.length,i=0;i<n;i++){var r=t[i],a=this[r];void 0!==a&&(e[r]=a)}return e},decodeState:function(e){for(var t=this.persistentStateProperties,n=t.length,i=0;i<n;i++){var r=t[i],a=e[r];void 0!==a&&(this[r]=a)}},resetState:function(){this.stateStoreId="",this._autoSavePauseCount=this._autoSavePauseCount+1;for(var e=this.persistentStateProperties,t=e.length,n=0;n<t;n++){var i=e[n];this.set(i,void 0)}this._autoSavePauseCount=this._autoSavePauseCount-1},stateDidChange:function(){this.loadState()},loadState:function(){var e=this._stateStore;if(e){this._autoSavePauseCount=this._autoSavePauseCount+1;var t=this._cachedStateContainer=e.readState(this.stateStoreId);this.decodeState(t),this._autoSavePauseCount=this._autoSavePauseCount-1}},saveState:function(){var e=this._stateStore;if(e){var t=this._cachedStateContainer;t||(t=this._cachedStateContainer={}),t=this.encodeState(t),this.stateStoreId=e.writeState(this.stateStoreId,t,this)}},_stateStore:V.b(G.a.bindingFor("application.persistentStateStore")),_stateStoreObserver:B.h("_stateStore",(function(e){e&&(this.stateStoreId?this.loadState():this.saveState())})),stateStoreRegistrationObserver:B.h("stateStoreId","_stateStore",(function(e,t){if(t){var n=this._previousStateStoreId,i=e;n&&t.unregisterCodec(n,this),i&&t.registerCodec(i,this),this._previousStateStoreId=i}})),_previousStateStoreId:"",__superMap:{_$LI$init:"init"}},Jl={mixinDependencies:[Xl],staticMembers:{shouldBeCached:H.d(!0)},isActiveInNavigationContainer:V.b(!1),isTransitioningForNavigation:V.b(!1)},ec={mixinDependencies:[Xl,Jl],init:function(){var e=this,t=arguments;this.shouldTransitionOnChange=!1,e.__s._$68$init.apply(e,t),this._verifyAndPrepDefaultRouteForInit(),this.shouldTransitionOnChange=!0},_verifyAndPrepDefaultRouteForInit:function(){var e=this.defaultRoute;J.a(e)&&(this.defaultRoute={routeName:e})},routes:null,defaultRoute:V.b(),activeNavigationViewController:Ci.b({strong:!0,viewOutlet:"activeNavigationViewController"}),currentNavigationLocation:V.b(),currentNavigationViewController:V.b({strong:!0}),shouldTransitionOnChange:V.b(!0),navigateTo:function(e){var t;t=J.a(e)?{routeName:e}:Me.a(e),this.currentNavigationLocation=t;var n=this.navigationHistoryManager;n&&n.saveHistorySnapshot()},navigateByOffset:function(e){var t=this.navigationHistoryManager;t&&t.go(e)},viewControllerForNavigationObject:function(e){var t=e.routeName,n=e.stateStoreId,i=e.options,r=this.routes[t],a=r.viewControllerClass,s=r.options,o=Object.assign({},s,i);return n&&(o.stateStoreId=n),a.shouldBeCached?this.getOrCreateInstanceFromPool(a,o):a.create(o)},_containerPool:k.c(Object),getOrCreateInstanceFromPool:function(e,t){var n=this._containerPool,i=Yl.b(e),r=n[i];r||(r=n[i]={activeInstances:{},instancePool:[]});var a=t.stateStoreId,s=a?r.activeInstances[a]:void 0,o=s?s.instance:void 0;return o?s.count++:((o=r.instancePool.pop())?(t.stateStoreId!==o.stateStoreId&&o.resetState(),Object.assign(o,t),a?o.loadState():o.saveState()):((o=e.create(t))._owningPool=this,o.retain()),a=o.stateStoreId,r.activeInstances[a]={instance:o,count:1}),o},returnInstanceToPool:function(e){var t=this._containerPool[Yl.b(e.constructor)];t||_.b("Attempted to return a non-pooled instance to the navigation container pool: no class pool found.",{instance:e});var n=e.stateStoreId,i=t.activeInstances[n];i||_.b("Attempted to return a non-pooled instance to the navigation container pool: no active instance found.",{instance:e}),i.count--,i.count<=0&&(delete t.activeInstances[n].instance,delete t.activeInstances[n],t.instancePool.push(e))},_releasePool:function(){var e=this._containerPool;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],i=n.activeInstances;for(var r in i)i.hasOwnProperty(r)&&(window._tracked=i[r].instance,i[r].instance.release());for(var a=n.instancePool,s=a.length,o=0;o<s;o++)a[o].release()}},dispose:function(){var e=this,t=arguments;this._releasePool(),e.__s._$2Z5$dispose.apply(e,t)},transition:function(e,t){t!==e&&(this.activeNavigationViewController=t)},navigationLocationObserver:B.h({inputs:["currentNavigationLocation","shouldTransitionOnChange"],callback:function(e,t){t&&(e?this.transitionToNavigationLocation(e):this.currentNavigationLocation=Me.a(this.defaultRoute))}}),transitionToNavigationLocation:function(e){if(e){var t=e;if(this.currentNavigationLocation!==e){var n=Me.a(e);if(this.currentNavigationLocation=n,t=n,this.shouldTransitionOnChange)return}var i=this.currentNavigationViewController,r=this.viewControllerForNavigationObject(t);this._consumeAndUpdateNavigationObjectForInstance(t,r),this.currentNavigationViewController=r;var a=Zl.a.begin();if(a.set(r,"isActiveInNavigationContainer",!0),i&&a.set(i,"isActiveInNavigationContainer",!1),a.end(),(a=Zl.a.begin()).set(r,"isTransitioningForNavigation",!0),i&&a.set(i,"isTransitioningForNavigation",!0),a.end(),i&&i.saveState(),r.loadState(),this.transition(i,r),(a=Zl.a.begin()).set(r,"isTransitioningForNavigation",!1),i&&a.set(i,"isTransitioningForNavigation",!1),a.end(),i){var s=i._owningPool;s&&s.returnInstanceToPool(i)}}},_consumeAndUpdateNavigationObjectForInstance:function(e,t){if(!e.__hasProcessed){if(e.options&&delete e.options,pi.a(t,ec)){var n=e.child;n||(n=t.defaultRoute),delete e.child,t.currentNavigationLocation=n}e.stateStoreId||(e.stateStoreId=t.stateStoreId),e.__hasProcessed=!0}},navigationHistoryManager:V.b(G.a.bindingFor("application.navigationHistoryManager")),__superMap:{_$68$init:"init",_$2Z5$dispose:"dispose"}},tc=n(1242),nc=n(77),ic={childrenKey:"children",childrenForNode:function(e,t){return e[this.childrenKey]},sourceHasRootNode:function(e){return!1}},rc={mixinDependencies:[Tn.a,ic],isItemExpandable:Object(nc.c)(Mn.a),isItemExpanded:Object(nc.c)(Mn.a),itemWasExpanded:Object(nc.c)(Mn.a),itemWasCollapsed:Object(nc.c)(Mn.a),itemWasRemoved:Object(nc.c)(Mn.a)},ac=P.a.extend(rc,B.b,{_expandedItems:Object(V.b)(Object(k.c)(Set)),childrenKey:Object(V.b)(),isItemExpandable:function(e){if(!Object(K.a)(e))return!1;var t=this.childrenKey;return!!e[t]&&e[t].length>0},isItemExpanded:function(e){return this._expandedItems.has(e)},itemWasExpanded:function(e){this._expandedItems.add(e)},itemWasCollapsed:function(e){this._expandedItems.delete(e)},itemWasRemoved:function(e){this._expandedItems.delete(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineViewExpansionDelegate"}}),sc=n(64),oc=Wo.b.extend({source:Object(V.b)(),serializer:Object(Oi.c)("source.serializer"),transformChangeset:null,staticMembers:{init:function(){var e=this,t=arguments;e.__s._$Pw$init.apply(e,t);var n=this.prototype.getMetadata("source").reference;n===sc.c?Object(_.b)("ObservableArrayProxy may not have a weak reference to its source.",this):this.prototype._sourceIsStrongRef=n===sc.a},__superMap:{_$Pw$init:"init"},__QUALIFIED_CLASS_NAME__:"ObservableArrayProxy"},_sourceIsStrongRef:!1,shouldDoPostInitProcessing:!1,_sourceDidChange:Object(B.h)("source",(function(e){e&&!Object(pi.a)(e,Wo.b)&&Object(_.b)("Only a CW.ObservableArray can be used as the source for an observable array proxy.",{source:e});var t=this._sourceIsStrongRef;t&&e&&e.retain("ObservableArrayProxy cache reference");var n=this._lastSetSource,i=!!n&&!!n.get("length"),r=!!e&&!!e.get("length");if(this._lastSetSource=e,i||r){var a,s,o,l=this.get("_sourceChanges");if(n)for(s=(a=n.get("length"))-1;s>=0;s--)o=n.encodedObjectAt(s),l.recordRemoval(s,o);if(e)for(a=e.get("length"),s=0;s<a;s++)o=e.encodedObjectAt(s),l.recordInsertion(s,o);lc(this,l),l.clear(),t&&n&&n.release("ObservableArrayProxy cache reference")}})),_sourceChanges:Object(H.d)((function(){return new Wo.a(this)})),_lastSetSource:null,_sourceContentsDidChange:Object(B.h)("source.contentsDidChange",(function(e){e&&lc(this,e.context)})),dispose:function(){var e=this,t=arguments;if(this._sourceIsStrongRef){var n=this._lastSetSource;n&&n.release("ObservableArrayProxy cache reference")}this._lastSetSource=null,e.__s._$1o6$dispose.apply(e,t)},__superMap:{_$1o6$dispose:"dispose"}});function lc(e,t){var n,i=!1;e.transformChangeset&&(n=e.transformChangeset(t))&&n!==t&&(i=!0,t=n),t.applyChanges(e),i&&t.clear()}var cc=n(553),uc=n(200),dc=n(554),hc={mixinDependencies:[dc.a],nextSibling:$n.a.define(),hasNextSibling:$n.a.define(),previousSibling:Object(nc.c)($n.a),hasPreviousSibling:Object(nc.c)($n.a),parent:Object(nc.c)($n.a),hasParent:Object(nc.c)($n.a),firstChild:Object(nc.c)($n.a),hasFirstChild:Object(nc.c)($n.a),lastChild:Object(nc.c)($n.a),hasLastChild:Object(nc.c)($n.a)},pc=P.a.extend(uc.a,hc,{initFromPool:function(e,t,n,i,r){this._delegate=n,this._position=r,this._offset=i,this._wasRemoved=!1,this.__s._$8m$initFromPool.call(this,e,t)},encodedValue:Object(H.d)(),isRoot:Object(H.d)({readOnly:!0,defaultValue:!0}),parent:Object(H.d)({get:function(){return this.constructor.create(this.source,this._provider,this._delegate,this._offset-1,this._position)}}),hasParent:Object(H.d)({readOnly:!0,defaultValue:!1}),isValid:Object(H.d)({get:function(){return this._provider.sourceHasRootNode&&0===this._offset&&0===this._position}}),wasRemoved:Object(H.d)({readOnly:!0,defaultValue:!1}),previous:Object(H.d)({get:function(){var e=this;for(e=e.previousSibling;e.hasLastChild;)e=e.lastChild;return e}}),hasPrevious:Object(H.d)({get:function(){return 1===this._position&&0===this._offset||this.hasLastChild}}),next:Object(H.d)({get:function(){return this.firstChild}}),hasNext:Object(H.d)({get:function(){return-1===this._position&&0===this._offset||this.hasFirstChild}}),atDistance:function(e){for(var t=this;e>0;)t=t.next,e--;for(;e<0;)t=t.previous,e++;return t},hasHandleAtDistance:function(e){for(var t=this;e>0;)t=t.next,e--;for(;e<0;)t=t.previous,e++;return t.isValid},nextSibling:Object(H.d)({readOnly:!0,get:function(){return this.constructor.create(this.source,this._provider,this._delegate,this._offset,this._position+1)}}),hasNextSibling:Object(H.d)({readOnly:!0,defaultValue:!1}),previousSibling:Object(H.d)({readOnly:!0,get:function(){return this.constructor.create(this.source,this._provider,this._delegate,this._offset,this._position-1)}}),hasPreviousSibling:Object(H.d)({readOnly:!0,defaultValue:!1}),firstChild:Object(H.d)({get:function(){var e=this._provider,t=this.source.source.startHandle;return this.hasFirstChild?e.atNode(t,this):e.atNode(t,this,this._offset+1)}}),hasFirstChild:Object(H.d)({get:function(){var e=this.source.source;return 0===this._offset&&0===this._position&&e&&e.length>0}}),lastChild:Object(H.d)({get:function(){var e=this._provider,t=this.source.source.startHandle.end;return this.hasLastChild?e.atNode(t,this):e.atNode(t,this,this._offset+1)}}),hasLastChild:Object(H.d)({get:function(){var e=this.source.source;return 0===this._offset&&0===this._position&&e&&e.length>0}}),_registerChild:function(e){},__superMap:{_$8m$initFromPool:"initFromPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"_RootNodeHandle"}}),fc=P.a.extend(uc.a,hc,{staticMembers:{RootTreeHandleClass:pc,createWithRoot:function(e,t,n,i){return this.RootTreeHandleClass.create(e,t,n,i,0)},__QUALIFIED_CLASS_NAME__:"TreeHandle"},initFromPool:function(e,t,n,i,r,a){this._delegate=n,this._nodeHandle=i,0===a&&i._listenForRemoval(this),this._parent=r.retain(this,"child TreeHandle retaining parent"),r._registerChild(this),this._offset=a,this._wasRemoved=!1,this.__s._$1kl$initFromPool.call(this,e,t)},didEnterPool:function(){this._childHandles.clear(),this._nodeHandle._unlistenForRemoval(this),this._nodeHandle=void 0,this._parent.release(this,"child TreeHandle retaining parent"),this._parent=void 0,this.__s._$1pV$didEnterPool.call(this)},_offset:0,_nodeHandle:Object(H.d)({strong:!0}),value:Object(H.d)({get:function(){return 0===this._offset?this._nodeHandle.value:void 0},readOnly:!0}),encodedValue:Object(H.d)({get:function(){return 0===this._offset?this._nodeHandle.encodedValue:void 0},readOnly:!0}),isValid:Object(H.d)({get:function(){if(0!==this._offset)return!1;if(!this._nodeHandle.isValid)return!1;var e=this.parent;return!!e.isValid||!(!e.isRoot||this._provider.sourceHasRootNode)},readOnly:!0}),wasRemoved:Object(H.d)({readOnly:!0,get:function(){return!!this._wasRemoved||!!this._nodeHandle.wasRemoved||this.parent.wasRemoved}}),_handleWasRemoved:function(e){e===this._nodeHandle&&this._removeFromTree()},_removeFromTree:function(){this._wasRemoved=!0,this._childHandles.forEach((function(e){return e._removeFromTree()})),this._provider._handleWasRemoved(this)},atDistance:function(e){for(var t=this;e>0;)t=t.next,e--;for(;e<0;)t=t.previous,e++;return t},hasHandleAtDistance:function(e){for(var t=this;e>0;)t=t.next,e--;for(;e<0;)t=t.previous,e++;return t.isValid},next:Object(H.d)({get:function(){if(this.hasFirstChild)return this.firstChild;for(var e=this;!e.hasNextSibling&&e.hasParent;)e=e.parent;return e.nextSibling}}),hasNext:Object(H.d)({get:function(){if(this.hasFirstChild)return!0;for(var e=this;!e.hasNextSibling&&e.hasParent;)e=e.parent;return e.hasNextSibling}}),previous:Object(H.d)({get:function(){if(this.hasPreviousSibling){var e=this;for(e=e.previousSibling;e.hasLastChild;)e=e.lastChild;return e}return this.parent}}),hasPrevious:Object(H.d)({get:function(){return!!this.hasPreviousSibling||!!this.hasLastChild||!!this.hasParent}}),nextSibling:Object(H.d)({get:function(){return 0!==this._offset?this:this._provider.atNode(this._nodeHandle.next,this.parent)}}),hasNextSibling:Object(H.d)({get:function(){return 0===this._offset&&this._nodeHandle.hasNext}}),previousSibling:Object(H.d)({get:function(){return 0!==this._offset?this:this._provider.atNode(this._nodeHandle.previous,this.parent)}}),hasPreviousSibling:Object(H.d)({get:function(){return 0===this._offset&&this._nodeHandle.hasPrevious}}),parent:Object(H.d)({readOnly:!0,strong:!0}),hasParent:Object(H.d)({get:function(){var e=this._offset;return!(1!==e||!this._nodeHandle.isValid)||0===e&&!(!this._provider.sourceHasRootNode&&this.parent.isRoot)}}),firstChild:Object(H.d)({get:function(){var e,t=this._nodeHandle,n=this._offset;return 0===n&&t.isValid&&(e=this._delegate.childrenForNode(t.value))&&e.length?t=e.startHandle:n++,this._provider.atNode(t,this,n)}}),hasFirstChild:Object(H.d)({get:function(){var e,t=this._nodeHandle;return 0===this._offset&&t.isValid&&(e=this._delegate.childrenForNode(t.value))&&e.length}}),lastChild:Object(H.d)({get:function(){var e,t=this._nodeHandle,n=this._offset;return 0===n&&t.isValid&&(e=this._delegate.childrenForNode(t.value))&&e.length?t=e.startHandle.end:n++,this._provider.atNode(t,this,n)}}),hasLastChild:Object(H.d)({get:function(){var e,t=this._nodeHandle;return 0===this._offset&&t.isValid&&(e=this._delegate.childrenForNode(t.value))&&e.length}}),isRoot:Object(H.d)({readOnly:!0,defaultValue:!1}),_childHandles:Object(k.c)(Set),_registerChild:function(e){this._childHandles.add(e),e.registerWeakReference(this,this._childWasDisposed,e)},_childWasDisposed:function(e){this._childHandles.delete(e)},__superMap:{_$1kl$initFromPool:"initFromPool",_$1pV$didEnterPool:"didEnterPool"}}),gc=cc.a.extend(B.b,{HandleClass:fc,atNode:function(e,t,n){var i;return void 0===n&&(n=0),0===n&&(i=this.cachedHandleAt(e))?i:(i=this._createHandle(e,t,n),this._registerHandle(i),i.retain(this,"initial retain").autorelease(this,"initial retain"))},_previousSource:Object(H.d)({strong:!0}),handlesDidUpdate:Object(B.h)("source.source",(function(e){var t=this._previousSource,n=new Set;if(t)for(var i=t.length,r=0;r<i;r++){var a=t.handleProvider.cachedHandleAt(r);if(a){var s=this.cachedHandleAt(a);s&&n.add(s)}}if(e)for(var o=e.length,l=0;l<o;l++){var c=e.handleProvider.cachedHandleAt(l);if(c){var u=this.cachedHandleAt(c);u&&n.delete(u)}}n.forEach((function(e){return e._removeFromTree()})),this._previousSource=e})),rootHandle:Object(H.d)({get:function(){return this.atNode(this.source)}}),startHandle:Object(H.d)({get:function(){return this.sourceHasRootNode?this.rootHandle:this.rootHandle.firstChild}}),endHandle:Object(H.d)({get:function(){for(var e=this.rootHandle;e.hasLastChild;)e=e.lastChild;return e}}),_createHandle:function(e,t,n){var i=this.source,r=this.HandleClass,a=this.delegate;return e===i?r.createWithRoot(i,this,a,n):r.create(i,this,a,e,t,n)},cachedHandleAt:function(e){var t=this._handles.get(e);if(t)return t},sourceHasRootNode:!1,init:function(){var e=this,t=arguments;e.__s._$18Z$init.apply(e,t),this.sourceHasRootNode=this.delegate.sourceHasRootNode(this.source)},_handles:Object(k.c)(Map),_registerHandle:function(e){e.isValid&&(e.registerWeakReference(this,this._handleWasDisposed,e),this._handles.set(e._nodeHandle,e))},_handleWasDisposed:function(e){this._handleWasRemoved(e)},_handleWasRemoved:function(e){this._handles.delete(e._nodeHandle)},__superMap:{_$18Z$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TreeHandleProvider"}}),mc=n(551),_c=oc.extend({HandleProviderClass:gc,handleProviderDelegate:Object(k.c)(P.a.extend(ic)),encodedHandleFor:function(e){return mc.a.encodedHandleFor.call(this,e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"TreeArrayProxy"}}),vc=fc.extend({delegate:Object(H.d)(),firstChild:Object(H.d)({get:function(){var e=this.isValid,t=this.delegate,n=this.value;if(e&&t.isItemExpanded(n))return this.__s._$BW$get.call(this);var i=this._provider,r=this._nodeHandle,a=this._offset;return i.atNode(r,this,a+1)},__superMap:{_$BW$get:"get"}}),hasFirstChild:Object(H.d)({get:function(){var e=this.isValid,t=this.delegate,n=this.value;return!(!e||!t.isItemExpanded(n))&&this.__s._$Hr$get.call(this)},__superMap:{_$Hr$get:"get"}}),lastChild:Object(H.d)({get:function(){var e=this.isValid,t=this.delegate,n=this.value;if(e&&t.isItemExpanded(n))return this.__s._$MO$get.call(this);var i=this._provider,r=this._nodeHandle,a=this._offset;return i.atNode(r,this,a+1)},__superMap:{_$MO$get:"get"}}),hasLastChild:Object(H.d)({get:function(){var e=this.isValid,t=this.delegate,n=this.value;return!(!e||!t.isItemExpanded(n))&&this.__s._$Si$get.call(this)},__superMap:{_$Si$get:"get"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineHandle"}}),bc=gc.extend({HandleClass:vc,staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineHandleProvider"}}),yc=_c.extend({HandleProviderClass:bc,staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineRootArrayProxy"}}),wc=n(392),Ic=h.a.extend({staticMembers:{storageKey:"photos-grid-kit"},implicitDesktopSelectionMode:h.a.booleanProperty(!0),alwaysForceSquareCells:h.a.booleanProperty(!1),debugPropertyPathDisplayedOnPhotoItems:h.a.stringProperty(""),columnSpacingAspectRatio:h.a.numberProperty(16),columnSpacingSquare:h.a.numberProperty(2),rowSpacingAspectRatio:h.a.numberProperty(34),rowSpacingSquare:h.a.numberProperty(2),moments_ensureEntireRangeImmediately:h.a.booleanProperty(!1),moments_cluster_size:h.a.numberProperty(250),turnRecentlyDeletedTimeRemainingRedBelowDays:h.a.numberProperty(4)}).create(),Sc=[{key:320,value:16},{key:375,value:20},{key:414,value:20},{key:768,value:34},{key:834,value:46},{key:1024,value:52}],Cc=[{key:568,value:52},{key:667,value:62},{key:736,value:66},{key:812,value:68},{key:1024,value:52},{key:1112,value:31},{key:1366,value:52}],Ec=h.a.extend({staticMembers:{storageKey:"cmm-ui"},implicitDesktopSelectionMode:Ic.implicitDesktopSelectionMode,isWhitespaceDeselectionEnabled:h.a.booleanProperty(!1),disableSharedSidebarSection:h.a.booleanProperty(!0),insetForViewportSize:function(e,t){return function(e,t,n){if(m.a(t)){for(var i,r=0,a=e.length-1;a-r>1;)e[i=Math.round((r+a)/2)].key<t?r=i:a=i;var s=e[r],o=e[a],l=(t-s.key)/(o.key-s.key);return l=Math.min(Math.max(l,0),1),s.value*(1-l)+o.value*l}}(t>e?Sc:Cc,e)},shareExpirationImminentThresholdInDays:h.a.numberProperty(3),cmmUISizeClassCompactLandscapeInset:h.a.numberProperty(22),cmmUISizeClassRegularPortraitInset:h.a.numberProperty(34),cmmUISizeClassRegularLandscapeInset:h.a.numberProperty(52),maximumShareBackSize:h.a.numberProperty(5e3),maxDistanceBetweenLocationsInMeters:h.a.numberProperty(5e3),paddingForShareBackTimeInMillis:h.a.numberProperty(18e6),maxShareAssetsToUseForLocationFilter:30,maxShareTimeRangeForShareBackInMillis:h.a.numberProperty(5184e6),disableShareBack:h.a.booleanProperty(!1),earlyExitContiguousChunkGapInMillis:h.a.numberProperty(864e6),earlyExitMaxNonContiguousChunksAllowed:1,uiPhotosShareListingRowSpacingCompact:85,uiPhotosShareListingRowSpacingRegular:100,uiPhotosShareListingGutterCompact:20,uiPhotosShareListingGutterRegular:30,uiPhotosShareListingGutterDesktop:50,uiPhotosShareListingColumnCountCompact:2,uiPhotosShareListingColumnCountRegular:3,uiPhotosShareListingColumnCountDesktop:4,uiPhotosShareListingColumnSpacingCompact:15,uiPhotosShareListingColumnSpacingRegular:20,uiPhotosShareListingColumnSpacingDesktop:30,uiShareListingItemAspectRatio:1.5,cmmUIPhotosColumnCountDesktop:h.a.numberProperty(4),cmmUIPhotosColumnCountCompactPortrait:h.a.numberProperty(3),cmmUIPhotosColumnCountIPad129Like:h.a.numberProperty(8),cmmUIPhotosMaxWidthDesktop:h.a.numberProperty(950),uiShareListingSingleColThreshold:2}).create(),Ac=n(239),Oc=ql.extend({albumType:$o.a.FOLDER,isFolder:!0,isVirtualFolder:!0,isRootFolder:!1,isRecentlyDeletedAlbum:!1,isMediaTypesFolder:!1,list:function(){var e=this,t=this.containers instanceof Ac.a.Constructor?this.containers.storeIds.map(jo.a.getPrimaryKeyForStoreId):[].concat(this.containers._array),n=Z.a.resolve();return t.some((function(e){return void 0===e}))&&(n=n.then((function(){return jt.a.list({parentPK:e.sourceContainer.getPrimaryKey()})}))),t.length>0&&(n=n.then((function(){var t=e.containers instanceof Ac.a.Constructor?e.containers.storeIds.map(jo.a.getPrimaryKeyForStoreId):[].concat(e.containers._array);return jt.a.load({primaryKeys:t,isDelayable:!1})}))),n},loadAll:function(){return this.list()},load:function(){return this.isLoaded=!0,Z.a.resolve()},staticMembers:{__QUALIFIED_CLASS_NAME__:"FolderVirtualContainer"}}),Tc=n(558),Mc=P.a.extend(Tc.a,{modelClass:$n.a.define(),encode:function(e){return pi.a(e,this.modelClass)?e.getPrimaryKey():e},decode:function(e){return"string"===typeof e?this.modelClass.find(e):e},staticMembers:{__QUALIFIED_CLASS_NAME__:"FlexibleModelSerializer"}}).extend({modelClass:H.d(jt.a),staticMembers:{__QUALIFIED_CLASS_NAME__:"FlexibleContainerSerializer"}});function Dc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Pc(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pc(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Lc=jt.a.PredefinedName,Rc=Lc.MOMENTS,xc=Lc.PANORAMAS,Nc=Lc.DELETED,Fc=Lc.HIDDEN,Vc=Lc.FAVORITES,kc=Lc.VIDEOS,Bc=Lc.LIVE,jc=Lc.DEPTH,Uc=Lc.EXPOSURE,Gc=Lc.TIMELAPSE,Hc=Lc.SLOMO,Wc=Lc.BURSTS,$c=Lc.SCREENSHOT,zc=Lc.ANIMATED,Kc=[Nc,Fc],qc=[Rc,Vc,Fc,Nc],Qc=[kc,Bc,jc,Uc,xc,Gc,Hc,Wc,$c,zc],Yc=P.a.extend({mixinDependencies:[B.b,ie.a],expansionDelegate:V.b({type:ac}),items:V.b({strong:!0,readOnly:!0,dependencies:["expansionDelegate"],get:Object.assign((function(){if(this.expansionDelegate)return yc.extend({source:V.b({strong:!0}),HandleProviderClass:bc.extend({handlesDidUpdate:B.h({inputs:["source.source"],callback:function(e){var t,n,i,r,a=this._previousSource;if(a)for(n=a.length,t=0;t<n;t++)(i=a.handleProvider.cachedHandleAt(t))&&(r=this.cachedHandleAt(i))&&(r._wasRemoved=!0);this._handles.clear(),this._previousSource=e}})})}).create()}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return yc.extend({source:V.b({strong:!0}),HandleProviderClass:bc.extend({handlesDidUpdate:B.h({inputs:["source.source"],callback:function(e){var t,n,i,r,a=this._previousSource;if(a)for(n=a.length,t=0;t<n;t++)(i=a.handleProvider.cachedHandleAt(t))&&(r=this.cachedHandleAt(i))&&(r._wasRemoved=!0);this._handles.clear(),this._previousSource=e}})})}).create()}}),downstreamBindings:{source:"(owner)._rootItems",handleProviderDelegate:"(owner).expansionDelegate",serializer:"(owner).serializer"}}),serializer:V.b(k.c(Mc)),_dataManager:V.b((function(){return L.n()})),_rootContainer:V.b(Oi.c("_dataManager.cplRootContainer")),_libraryGroupedHeaderContainer:V.b({strong:!0,defaultValue:k.c(ql,{type:"SIDEBAR_GROUP_HEADER",pk:Y.a(),name:s.d("Sidebar.Group.Title.LIBRARY")}),downstreamBindings:{containers:"(owner)._library"}}),albumsGroupedHeaderContainer:V.b({strong:!0,defaultValue:k.c(ql,{type:"SIDEBAR_GROUP_HEADER",pk:Y.a(),name:s.d("Sidebar.Group.Title.ALBUMS")}),downstreamBindings:{containers:"(owner)._albums"}}),_sharedGroupedHeaderContainer:V.b({strong:!0,defaultValue:k.c(ql,{type:"SIDEBAR_GROUP_HEADER",pk:Y.a(),name:s.d("Sidebar.Group.Title.SHARED")}),downstreamBindings:{containers:"(owner)._shared"}}),isInProcessOfLoadingMyAlbums:V.b({readOnly:!0,dependencies:["_dataManager.isMyAlbumsLoaded"],get:Object.assign((function(){return!this._dataManager.isMyAlbumsLoaded}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),myAlbumsFolder:V.b({strong:!0,defaultValue:k.c(Oc,{type:"VIRTUAL_FOLDER",pk:Y.a(),name:s.d("Container.My.Albums.Header")}),downstreamBindings:{containers:"(owner)._myAlbums",isLoading:"(owner).isInProcessOfLoadingMyAlbums"}}),mediaTypesFolder:V.b({strong:!0,defaultValue:k.c(Oc,{type:"VIRTUAL_FOLDER",pk:Y.a(),name:s.d("Container.Media.Types.Header"),isMediaTypesFolder:!0}),downstreamBindings:{containers:"(owner)._mediaTypes"}}),_library:V.b({readOnly:!0,strong:!0,defaultValue:function(){return Wo.b.create()},downstreamBindings:{serializer:"(owner).serializer"}}),_shared:V.b({strong:!0,readOnly:!0,defaultValue:k.c(Wo.b,[ql.create({type:"CMM_SHARE",name:s.d("Route.Title.moments"),isFolder:!1}).retain()]),downstreamBindings:{serializer:"(owner).serializer"}}),_albums:V.b({readOnly:!0,strong:!0,defaultValue:function(){return Wo.b.create()},downstreamBindings:{serializer:"(owner).serializer"}}),_mediaTypes:V.b({readOnly:!0,strong:!0,defaultValue:function(){return Wo.b.create()},downstreamBindings:{serializer:"(owner).serializer"}}),_myAlbums:V.b({readOnly:!0,strong:!0,defaultValue:function(){return Wo.b.create()},downstreamBindings:{serializer:"(owner).serializer"}}),_rootItems:V.b({readOnly:!0,strong:!0,dependencies:["albumsGroupedHeaderContainer.containers","albumsGroupedHeaderContainer.containers.contentsDidChange","_libraryGroupedHeaderContainer.containers","_libraryGroupedHeaderContainer.containers.contentsDidChange"],get:function(){return Ec.disableSharedSidebarSection?Wo.b.create([this._libraryGroupedHeaderContainer,this.albumsGroupedHeaderContainer]):Wo.b.create([this._libraryGroupedHeaderContainer,this._sharedGroupedHeaderContainer,this.albumsGroupedHeaderContainer])}}),_onRootContainersDidChange:B.h({inputs:["serializer","_rootContainer","_rootContainer.containers","_rootContainer.containers.contentsDidChange","mediasLengthDidChange"],callback:function(){if(this.serializer){var e=this._rootContainer;if(void 0!==e){var t=e.containers;if(void 0!==t){for(var n=t.store,i=e.zone.pk,r=Zc(n,i,qc,Kc),a=Zc(n,i,Qc),s=[],o=0,l=t.length;o<l;o++){var c=t.storeDataForObjectAt(o);c&&c.albumType!==$o.a.PREDEFINED_SMART.value&&!jt.a.isContainerAProjectRootFolder(c)&&s.push(c.pk)}var u=this._albums,d=this._library,h=this._mediaTypes,p=this._myAlbums,f=this.mediaTypesFolder,g=this.myAlbumsFolder;d.length=0,r.forEach((function(e){return d.push(e)})),h.length=0,a.forEach((function(e){return h.push(e)})),p.length=0,s.forEach((function(e){return p.push(e)}));var m=[];h.length&&m.push(f),(p.length||g.isLoading)&&m.push(g),u.length=0,m.forEach((function(e){return u.push(e)}))}}}}}),mediasLengthDidChange:B.i(),_containerMediasLengthChangedSubscribers:H.d(k.c(wc.a)),_updateMediasObservers:B.h({inputs:["_rootContainer.containers","_rootContainer.containers.contentsDidChange"],callback:function(e,t){var n=this,i=this._containerMediasLengthChangedSubscribers,r=function(){return n.mediasLengthDidChange()},a=t&&t.context;a?a.forEach((function(e){var t,n=e.item;n&&n.isPredefinedSmartAlbum&&!n.isMomentsAlbum&&(e.operation===Wo.b.INSERT?i.containsKey(n)||(t=n.listen("medias.length",r),i.set(n,t)):e.operation===Wo.b.REMOVE&&((t=i.get(n))&&t.disconnect(),i.removeKey(n)))})):e&&(i.forEach((function(e){e.disconnect()})),i.clear(),e.forEach((function(e){var t=e.listen("medias.length",r);i.set(e,t)})))}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerTreeProvider"}});function Zc(e,t,n){for(var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[],s=Dc(n);!(i=s()).done;){var o=i.value,l=Kt.Record.getPrimaryKeyWithZonePK(t,o),c=e.readDataForPrimaryKey(jt.a,l),u=c.medias,d=u&&u.length>0,h=r.length&&r.includes(o),p=d||h;p&&a.push(l)}return a}function Xc(e){var t=e.getDataHash&&e.getDataHash();return t&&"VIRTUAL_FOLDER"!==e.type?t.parentId&&t.parentId!==jt.a.ROOT_RECORD_NAME?e.parent:t.albumType!==$o.a.PREDEFINED_SMART.value?Yc.sharedInstance.myAlbumsFolder:Qc.includes(t.recordName)?Yc.sharedInstance.mediaTypesFolder:L.n().cplRootContainer:Yc.sharedInstance.albumsGroupedHeaderContainer}var Jc=n(574),eu={mixinDependencies:[wi.a],scale:Object(wi.b)(1),opacity:Object(wi.b)(1),_updateDOMForAnimation:B.h("scale","opacity",(function(e,t){this.get("style").scale(e).set("opacity",t)}))},tu=In.a.extend(eu,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["p2-loading-page"]},__QUALIFIED_CLASS_NAME__:"LoadingPageView"},spinnerView:k.c(Jc.a,{size:32})}),nu=n(454),iu=P.a.extend(B.b,{isDisabled:V.b(!1),action:V.b("wasActivated"),tooltip:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarButtonConfiguration"}}),ru=iu.extend({parentRouteTitle:V.b(),isDisabled:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarBackButtonConfiguration"}}),au=P.a.extend(B.b,Ti.a,{items:V.b(k.c(globalThis.Array)),layout:function(){},nextResponder:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarConfiguration"}}),su={mixinDependencies:[B.b],media:V.b(),gridViewController:V.b(),container:V.b(),collection:V.b(),selectedIndices:V.b(Oi.c("gridViewController.selectionController.selectedIndices")),sparseSelection:V.b(Oi.c("gridViewController.selectionController.sparseSelection")),selectedContainers:V.b({readOnly:!0,dependencies:["gridViewController.selection"],get:Object.assign((function(){var e=this.getPath("gridViewController.selection");return e&&e.length?e.filter((function(e){return pi.a(e,jt.a)})):null}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length?r.filter((function(e){return pi.a(e,jt.a)})):null}})})},ou=iu.extend({isOn:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarToggleButtonConfiguration"}}),lu=n(408),cu=n(589),uu=nc.a.extend({requiresSupport:cu.a,init:function(){var e=this,t=arguments,n=this;this.value=function(e,t){return n.call(this,e,t)},e.__s._$5E$init.apply(e,t)},call:function(e,t,n){for(var i=0|n,r=0,a=t.length,s=0;s<a;s++){var o=t[s];i+=r=Math.max(r,this.marginBefore(o)),this.setItemPosition(o,i),i+=o.width,r=this.marginAfter(o)}return i+r},marginBefore:function(){return 0},marginAfter:function(){return 0},__superMap:{_$5E$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DirectionalLayout"}}).extend({setItemPosition:function(e,t){e.left=t},staticMembers:{__QUALIFIED_CLASS_NAME__:"LeftToRightLayout"}}),du=function(e){return uu.create(e)},hu=au.extend(cu.a,{padding:0,gridViewController:V.b(),container:V.b(),collection:V.b(),parentRoute:V.b(),parentRouteTitle:V.b({type:String,readOnly:!0,dependencies:["parentRoute"],get:Object.assign((function(){if(!this.parentRoute)return"";var e=this.getPath("parentRoute.routeName");if("cmmReceiver"===e)return s.d("CMMReceiver.BackButton.Title");if("container"!==e&&"folder"!==e)return"";var t=this.getPath("parentRoute.options.container");if(!t)return"";var n=t.name,i=t.recordName;return t.isPredefinedSmartAlbum?s.d("Container.Title."+i):n}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return"";var r=this.getPath("parentRoute.routeName");if("cmmReceiver"===r)return s.d("CMMReceiver.BackButton.Title");if("container"!==r&&"folder"!==r)return"";var a=this.getPath("parentRoute.options.container");if(!a)return"";var o=a.name,l=a.recordName;return a.isPredefinedSmartAlbum?s.d("Container.Title."+l):o}})}),returnToButton:V.b({defaultValue:k.c(ru),downstreamBindings:{parentRouteTitle:"(owner).parentRouteTitle",isDisabled:"(owner).isReturnToButtonDisabled"}}),isReturnToAllowed:V.b(!0),isReturnToButtonDisabled:V.b({readOnly:!0,dependencies:["parentRoute","isReturnToAllowed"],get:Object.assign((function(){var e=this.isReturnToAllowed,t=this.parentRoute;if(!e||!t)return!0;if("cmmReceiver"===this.getPath("parentRoute.routeName"))return!1;var n=this.getPath("parentRoute.options.container");return!n||!!n.isRootFolder||"SIDEBAR_GROUP_HEADER"===n.type}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!r||!a)return!0;if("cmmReceiver"===this.getPath("parentRoute.routeName"))return!1;var s=this.getPath("parentRoute.options.container");return!s||!!s.isRootFolder||"SIDEBAR_GROUP_HEADER"===s.type}})}),isSidebarAllowed:V.b(!0),primaryItems:V.b(["homeButton"]),returnToItems:V.b({readOnly:!0,dependencies:["isSidebarAllowed"],get:Object.assign((function(){var e=["returnToButton"];return this.isSidebarAllowed&&e.push("sidebarButton"),e}),{__CW__getter:function(e,t,n,i){var r=["returnToButton"];return i.internalGet(this,t[0+n])&&r.push("sidebarButton"),r}})}),leftItems:V.b(k.c(globalThis.Array)),middleItem:V.b(null),rightItems:V.b(k.c(globalThis.Array)),items:V.b({readOnly:!0,dependencies:["primaryItems","returnToItems","leftItems","middleItem","rightItems"],get:Object.assign((function(){var e=[];return e.push.apply(e,this.primaryItems.concat(this.returnToItems,this.leftItems)),this.middleItem&&e.push(this.middleItem),e.push.apply(e,this.rightItems.concat(["userButton"])),e}),{__CW__getter:function(e,t,n,i){var r=[];return r.push.apply(r,i.internalGet(this,t[0+n]).concat(i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n]))),i.internalGet(this,t[3+n])&&r.push(i.internalGet(this,t[3+n])),r.push.apply(r,i.internalGet(this,t[4+n]).concat(["userButton"])),r}})}),sidebarButton:V.b({defaultValue:k.c(ou.extend({isOn:G.a.bindingFor("application.userSidebarToggle"),tooltip:V.b({readOnly:!0,dependencies:["isOn"],get:Object.assign((function(){return this.isOn?s.d("Toolbar.Button.Tooltip.Sidebar.Close"):s.d("Toolbar.Button.Tooltip.Sidebar.Open")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("Toolbar.Button.Tooltip.Sidebar.Close"):s.d("Toolbar.Button.Tooltip.Sidebar.Open")}})})}))}),thumbstripButton:V.b({defaultValue:k.c(ou.extend({tooltip:s.d("Toolbar.Button.ToolTip.ThumbStrip.ShowOrHide"),action:"toggleThumbnailsStrip"}))}),uploadButton:V.b({defaultValue:k.c(iu.extend(su,{isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:[G.a.bindingFor("application.isCreateAllowed"),"selectedContainers"],get:Object.assign((function(){var e=this.selectedContainers,t=G.a.application.isCreateAllowed;if(e&&e.length){if(e.length>1)return!0;var n=e.toArray()[0];return!n.isNormalAlbum&&!n.isAllPhotosAlbum||!t}return!t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(r&&r.length){if(r.length>1)return!0;var s=r.toArray()[0];return!s.isNormalAlbum&&!s.isAllPhotosAlbum||!a}return!a}})}),tooltip:V.b({readOnly:!0,dependencies:[G.a.bindingFor("application.isCreateAllowed")],get:Object.assign((function(){return G.a.application.isCreateAllowed?s.d("Toolbar.Button.Tooltip.Upload"):s.d("Toolbar.Button.Tooltip.Upload.Disabled")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?s.d("Toolbar.Button.Tooltip.Upload"):s.d("Toolbar.Button.Tooltip.Upload.Disabled")}})})})),downstreamBindings:{gridViewController:"(owner).gridViewController",container:"(owner).container",collection:"(owner).collection"}}),downloadButton:V.b({defaultValue:k.c(iu.extend(su,{isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:["media","sparseSelection.length"],get:Object.assign((function(){return!this.media&&!this.sparseSelection.length}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&!i.internalGetPath(this,t[1+n])}})}),tooltip:V.b({readOnly:!0,dependencies:["media","sparseSelection.length"],get:Object.assign((function(){var e=this.getPath("sparseSelection.length")||0;return this.media||e?this.media||1===e?s.d("Toolbar.Button.Tooltip.DownloadItem"):s.d("Toolbar.Button.Tooltip.DownloadItems"):s.d("Toolbar.Button.Tooltip.DownloadItems.NoItems")}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n])||0;return i.internalGet(this,t[0+n])||r?i.internalGet(this,t[0+n])||1===r?s.d("Toolbar.Button.Tooltip.DownloadItem"):s.d("Toolbar.Button.Tooltip.DownloadItems"):s.d("Toolbar.Button.Tooltip.DownloadItems.NoItems")}})}),action:"download"})),downstreamBindings:{gridViewController:"(owner).gridViewController",container:"(owner).container",collection:"(owner).collection"}}),deleteButton:V.b({defaultValue:k.c(iu.extend(su,{isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:["media","sparseSelection.length","selectedContainers",G.a.bindingFor("application.isDeleteAllowed")],get:Object.assign((function(){var e=this.selectedContainers;return e&&e.length?e.some((function(e){return!e.canBeDeleted})):!(this.media||this.sparseSelection.length)||!G.a.application.isDeleteAllowed}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r&&r.length?r.some((function(e){return!e.canBeDeleted})):!(i.internalGet(this,t[0+n])||i.internalGetPath(this,t[1+n]))||!i.internalGetPath(this,t[3+n])}})}),tooltip:V.b({readOnly:!0,dependencies:["sparseSelection.length","container",nu.a.get("sharedInstance").bindingFor("activeKeys")],get:Object.assign((function(){var e=this.container;if(e){var t=s.d("Toolbar.Button.Tooltip.Delete"),n=s.d("Toolbar.Button.Tooltip.Remove"),i=nu.a.sharedInstance.activeKeys,r=p.a.sharedInstance.isWindows?ml.a.CTRL:ml.a.OPTION;return e.isFolder||!e.isNormalAlbum||i.contains(r)?t:n}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(r){var a=s.d("Toolbar.Button.Tooltip.Delete"),o=s.d("Toolbar.Button.Tooltip.Remove"),l=nu.a.sharedInstance.activeKeys,c=p.a.sharedInstance.isWindows?ml.a.CTRL:ml.a.OPTION;return r.isFolder||!r.isNormalAlbum||l.contains(c)?a:o}}})}),action:"removeSelection"})),downstreamBindings:{gridViewController:"(owner).gridViewController",container:"(owner).container",collection:"(owner).collection"}}),isEditing:V.b(),dataManager:V.b({readOnly:!0,get:function(){return L.n()}}),addToAlbumButton:V.b({defaultValue:k.c(iu.extend(su,{isMyAlbumsLoaded:V.b(),isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:["sparseSelection.length","selectedContainers","container",G.a.bindingFor("application.isCreateAllowed"),"isMyAlbumsLoaded"],get:Object.assign((function(){if(this.selectedContainers&&this.selectedContainers.length)return!0;var e=this.container;if(e){if(e.isMediaTypesFolder)return!0;var t=e.isPredefinedSmartAlbum&&!e.isMomentsAlbum&&!e.isAllPhotosAlbum;if(0===this.sparseSelection.length&&(t||e.isNormalAlbum))return!0}return!this.isMyAlbumsLoaded||!G.a.application.isCreateAllowed}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n])&&i.internalGet(this,t[1+n]).length)return!0;var r=i.internalGet(this,t[2+n]);if(r){if(r.isMediaTypesFolder)return!0;var a=r.isPredefinedSmartAlbum&&!r.isMomentsAlbum&&!r.isAllPhotosAlbum;if(0===i.internalGetPath(this,t[0+n])&&(a||r.isNormalAlbum))return!0}return!i.internalGet(this,t[4+n])||!i.internalGetPath(this,t[3+n])}})}),tooltip:V.b({readOnly:!0,dependencies:["sparseSelection.length",G.a.bindingFor("application.isCreateAllowed")],get:Object.assign((function(){return G.a.application.isCreateAllowed?s.d("Toolbar.Button.Tooltip.AddToAlbum"):s.d("Toolbar.Button.Tooltip.AddToAlbum.Disabled")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?s.d("Toolbar.Button.Tooltip.AddToAlbum"):s.d("Toolbar.Button.Tooltip.AddToAlbum.Disabled")}})}),action:"addSelectionToAlbum"})),downstreamBindings:{gridViewController:"(owner).gridViewController",container:"(owner).container",collection:"(owner).collection",isMyAlbumsLoaded:"(owner).dataManager.isMyAlbumsLoaded"}}),isOptionKeyPressed:V.b(),shareButton:V.b({defaultValue:k.c(iu.extend(su,{isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:["media","sparseSelection.length"],get:Object.assign((function(){return!(this.media||this.sparseSelection.length)}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])||i.internalGetPath(this,t[1+n]))}})}),tooltip:V.b({readOnly:!0,dependencies:["sparseSelection.length"],get:function(){return s.d("Toolbar.Button.Tooltip.Share")}}),action:"shareSelection"})),downstreamBindings:{gridViewController:"(owner).gridViewController",container:"(owner).container",collection:"(owner).collection"}}),collapseUserButtonToShortForm:Object(lu.collapser)(0,(function(e,t){var n=e.userButton.view.minimumWidth,i=e.userButton.width;return e.userButton.width=n,t-(i-n)}),"right"),collapseMiddleItem:Object(lu.collapser)(10,(function(e,t){var n=e[this.middleItem];if(n){var i=n.view.minimumWidth;void 0===i&&(i=n.width),t=n.reduceWidthBy(t,i)}return t}),"middle"),collapseReturnTo:Object(lu.collapser)(20,(function(e,t){var n=e.returnToButton;return n&&(t=n.reduceWidthBy(t,n.view.minimumWidth)),t}),"left"),collapseMiddleItemBeyondMinimumWidth:Object(lu.collapser)(100,(function(e,t){var n=e[this.middleItem];return n&&(t=n.reduceWidthBy(t,0)),t}),"middle"),layoutLeftToRight:du({marginBefore:function(e){return 0|e.view.marginLeft},marginAfter:function(e){return 0|e.view.marginRight}}),layout:function(e){for(var t=this.layoutCollapseFunctions,n=0,i=0,r=0,a=0,s=0,o=0,l=[].concat(this.primaryItems,this.returnToItems,this.leftItems).map((function(t){return e[t]})),c=[].concat(this.rightItems,["userButton"]).map((function(t){return e[t]})),u=e[this.middleItem],d=u?[u]:[],h=this.padding,p=h,f=e.width-h,g=f-p,m=t.length,_=0;_<m;_++){var v=t[_],b=v.category;r=p+this.layoutLeftToRight(l),a=f-this.layoutLeftToRight(c),s=this.layoutLeftToRight(d),o=Math.floor(g/2-s/2),n=Math.floor(r-o),i=Math.floor(o+s-a),"left"===b&&n>0?v(e,n):"right"===b&&i>0?v(e,i):"middle"===b&&(n>0||i>0)&&v(e,2*Math.max(n,i))}r=p+this.layoutLeftToRight(l,p),a=f-this.layoutLeftToRight(c),this.layoutLeftToRight(c,a),s=this.layoutLeftToRight(d),o=Math.floor(g/2-s/2),this.layoutLeftToRight(d,o)},staticMembers:{__QUALIFIED_CLASS_NAME__:"StandardToolbarConfiguration"}}),pu=fi.a.extend(Jl,tc.a,{viewClass:tu,shouldRenderInsetsAsPositioning:!0,container:V.b(),isSidebarAllowed:V.b(),toolbarConfiguration:V.b({defaultValue:k.c(hu.extend({isSidebarAllowed:V.b(!1)}))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadingPageViewController"}}),fu=V.a.extend({readOnly:!0,dependencies:null,writeDependencies:[],get:function(e,t,n,i){return i.internalGet(this,t[0+n])},init:function(e){e||_.b("AnimatedComputedProperty cannot be defined without a single params hash."),Object.prototype.hasOwnProperty.call(e,"duration")&&Object.prototype.hasOwnProperty.call(e,"decideDuration")&&_.b("Cannot configure both `duration` number and `decideDuration` method on AnimatedComputedProperty."),this.didChange=e.didChange,this._creationParams=e,this.__s._$Pg$init.call(this)},wasRegistered:function(e,t,n){var i=this,r=arguments;n&&_.b("Cannot override AnimatedComputedProperty properties."),this._registrationKey&&this._registrationKey!==t&&_.b("Cannot register AnimatedComputedProperty on two different keys."),this._registrationKey=t,this._createAssistantMetadatasIfNeeded(),i.__s._$YO$wasRegistered.apply(i,r),e.registerMetadata(this._sourceObservablePropertyKey,this._sourceObservableProperty),e.registerMetadata(this._semifinalAnimatedPropertyKey,this._semifinalAnimatedProperty),e.registerMetadata(this._assistantObserverKey,this._assistantObserver)},_createAssistantMetadatasIfNeeded:function(){if(!this._hasCreatedAssistants){this._hasCreatedAssistants=!0;var e=this,t=this._creationParams,n=this._registrationKey;this._sourceObservablePropertyKey="_sourceObservablePropertyFor_"+n,this._semifinalAnimatedPropertyKey="_semifinalAnimatedPropertyFor_"+n,this._assistantObserverKey="_assistantObserverFor_"+n,this.dependencies=[this._semifinalAnimatedPropertyKey];var i=vl.a(t);delete i.decideDuration,delete i.duration,delete i.updatesDurationWhenTheseChange,delete i.didChange,this._sourceObservableProperty=V.b(i),this._semifinalAnimatedProperty=Object(wi.b)(NaN),this._assistantObserver=B.h({inputs:[this._sourceObservablePropertyKey].concat(t.updatesDurationWhenTheseChange||[]),callback:function(n){for(var i,r=this[e._semifinalAnimatedPropertyKey],a=+n===n&&+r===r,s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];var c=a?Je.a(t.decideDuration)?(i=t.decideDuration).call.apply(i,[this,n,r].concat(o)):m.a(t.duration)?t.duration:200:0;c>0?this.animate(e._semifinalAnimatedPropertyKey,n,c):this[e._semifinalAnimatedPropertyKey]=n}})}},clone:function(){return this.constructor.create(this._creationParams)},requiresSupport:wi.a,__superMap:{_$Pg$init:"init",_$YO$wasRegistered:"wasRegistered"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnimatedComputedProperty"}}),gu=function(){return fu.create.apply(fu,arguments)},mu=n(256),_u=n(171),vu=P.a.extend(B.b,Tn.a,{ownerProgressBar:V.b(),drawFillContent:Mn.a.define(),wantsContinuousUpdates:V.b({defaultValue:!1,type:Boolean}),wantsTrackUnderneath:V.b({defaultValue:!1,type:Boolean}),width:V.b({type:Number}),height:V.b({type:Number}),init:function(e){this.ownerProgressBar=e,this.__s._$g5$init.call(this)},__superMap:{_$g5$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarFillRenderer"}}),bu=vu.extend({repetitionAspectRatio:V.b({defaultValue:4,type:Number}),repetitionSlideTime:V.b({defaultValue:1e3,type:Number}),slideDirection:V.b({defaultValue:-1,type:Number}),wantsSubpixelPrecision:V.b({defaultValue:!0,type:Boolean}),singleRepetitionCanvas:_u.a.define(),wantsContinuousUpdates:V.b({readOnly:!0,dependencies:["repetitionSlideTime","slideDirection"],get:Object.assign((function(){return this.repetitionSlideTime<1/0&&0!==this.slideDirection}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<1/0&&0!==i.internalGet(this,t[1+n])}})}),repetitionWidth:V.b({readOnly:!0,dependencies:["repetitionAspectRatio","height"],get:Object.assign((function(){return Math.round(this.repetitionAspectRatio*this.height)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),backgroundSourceCanvas:V.b({readOnly:!0,dependencies:["singleRepetitionCanvas","width","height"],get:Object.assign((function(){var e=this.singleRepetitionCanvas,t=this.width,n=this.height;if(!e||!t||!n)return null;var i=document.createElement("canvas"),r=i.getContext("2d");i.width=t+e.width,i.height=n,r.drawImage(e,0,0);for(var a=e.width;a<i.width;a*=2)r.drawImage(i,0,0,a,n,a,0,a,n);return i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);if(!r||!a||!s)return null;var o=document.createElement("canvas"),l=o.getContext("2d");o.width=a+r.width,o.height=s,l.drawImage(r,0,0);for(var c=r.width;c<o.width;c*=2)l.drawImage(o,0,0,c,s,c,0,c,s);return o}})}),drawFillContent:function(e){var t=this.backgroundSourceCanvas,n=this.slideDirection;if(t){var i=Date.now()/this.repetitionSlideTime%1*this.repetitionWidth||0,r=n>0?this.width-t.width+i:n<0?0-i:0,a=Math.ceil(r),s=Math.floor(r);e.drawImage(t,s,0),this.wantsSubpixelPrecision&&(e.globalAlpha=r-s,e.drawImage(t,a,0),e.globalAlpha=1)}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarRepeatedContentFillRenderer"}}),yu=bu.extend({baseColor:V.b({defaultValue:"rgb(36, 175, 213)",type:String}),stripeColor:V.b({defaultValue:"rgb(20, 150, 190)",type:String}),stripeAngle:V.b({defaultValue:-45,type:Number}),stripeWeight:V.b({defaultValue:1,type:Number}),stripeSpacing:V.b({defaultValue:1,type:Number}),repetitionSlideTime:500,stripeWidth:V.b({readOnly:!0,dependencies:["stripeWeight","height"],get:Object.assign((function(){return Math.round(this.stripeWeight*this.height)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),stripeGap:V.b({readOnly:!0,dependencies:["stripeSpacing","height"],get:Object.assign((function(){return Math.round(this.stripeSpacing*this.height)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),stripeShearOffset:V.b({readOnly:!0,dependencies:["stripeAngle","height"],get:Object.assign((function(){return Math.round(this.height/Math.tan((90+this.stripeAngle)*Math.PI/180))}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[1+n])/Math.tan((90+i.internalGet(this,t[0+n]))*Math.PI/180))}})}),stripeInterval:V.b({readOnly:!0,dependencies:["stripeWidth","stripeGap"],get:Object.assign((function(){return this.stripeWidth+this.stripeGap}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),repetitionAspectRatio:V.b({readOnly:!0,dependencies:["stripeInterval","height"],get:Object.assign((function(){return this.stripeInterval/this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),singleRepetitionCanvas:V.b({readOnly:!0,dependencies:["repetitionWidth","height","baseColor","stripeColor","stripeWidth","stripeShearOffset"],get:Object.assign((function(){var e=this.repetitionWidth,t=this.height,n=this.baseColor,i=this.stripeColor,r=this.stripeWidth,a=this.stripeShearOffset;if(!e||!t||!r)return null;var s=document.createElement("canvas"),o=s.getContext("2d");s.width=e,s.height=t,o.fillStyle=n,o.fillRect(0,0,e,t);for(var l=-3;l<=3;l++){var c=Math.max(0,-a)+l*e;o.beginPath(),o.moveTo(c,0),o.lineTo(c+r,0),o.lineTo(c+r+a,t),o.lineTo(c+a,t),o.lineTo(c,0),o.closePath(),o.fillStyle=i,o.fill()}return s}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[5+n]);if(!r||!a||!l)return null;var u=document.createElement("canvas"),d=u.getContext("2d");u.width=r,u.height=a,d.fillStyle=s,d.fillRect(0,0,r,a);for(var h=-3;h<=3;h++){var p=Math.max(0,-c)+h*r;d.beginPath(),d.moveTo(p,0),d.lineTo(p+l,0),d.lineTo(p+l+c,a),d.lineTo(p+c,a),d.lineTo(p,0),d.closePath(),d.fillStyle=o,d.fill()}return u}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarBarberPoleFillRenderer"}}),wu=bu.extend({baseColor:V.b({defaultValue:"rgb(36, 175, 213)",type:String}),gradientColor:V.b({defaultValue:"rgb(20, 150, 190)",type:String}),gradientCenterpoint:V.b({defaultValue:.5,type:Number}),repetitionAspectRatio:5,repetitionSlideTime:2e3,singleRepetitionCanvas:V.b({readOnly:!0,dependencies:["width","height","baseColor","gradientColor","gradientCenterpoint","repetitionWidth"],get:Object.assign((function(){var e=this.height,t=this.gradientCenterpoint,n=this.repetitionWidth;if(!e||!n)return null;var i=this.baseColor,r=this.gradientColor,a=document.createElement("div");document.head.appendChild(a),3===(i=(i=yl.c(a).set("color",i).get("color")).substring(i.indexOf("(")+1,i.indexOf(")")).split(",").map((function(e){return parseFloat(e.trim())}))).length&&i.push(1),3===(r=(r=yl.c(a).set("color",r).get("color")).substring(r.indexOf("(")+1,r.indexOf(")")).split(",").map((function(e){return parseFloat(e.trim())}))).length&&r.push(1),document.head.removeChild(a);var s=document.createElement("canvas"),o=s.getContext("2d");s.width=n,s.height=e;for(var l=o.createLinearGradient(0,0,n,0),c=0,u=[];c<=.5;c+=.1){for(var d=.5-.5*Math.cos(2*c*Math.PI),h=0;h<4;h++)u[h]=Math.round((1-d)*i[h]+d*r[h]);var p="rgba("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+")";l.addColorStop(c*t/.5,p),c!==1-c&&l.addColorStop(1-c*(1-t)/.5,p)}return o.fillStyle=l,o.fillRect(0,0,n,e),s}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[4+n]),s=i.internalGet(this,t[5+n]);if(!r||!s)return null;var o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[3+n]),c=document.createElement("div");document.head.appendChild(c),3===(o=(o=yl.c(c).set("color",o).get("color")).substring(o.indexOf("(")+1,o.indexOf(")")).split(",").map((function(e){return parseFloat(e.trim())}))).length&&o.push(1),3===(l=(l=yl.c(c).set("color",l).get("color")).substring(l.indexOf("(")+1,l.indexOf(")")).split(",").map((function(e){return parseFloat(e.trim())}))).length&&l.push(1),document.head.removeChild(c);var u=document.createElement("canvas"),d=u.getContext("2d");u.width=s,u.height=r;for(var h=d.createLinearGradient(0,0,s,0),p=0,f=[];p<=.5;p+=.1){for(var g=.5-.5*Math.cos(2*p*Math.PI),m=0;m<4;m++)f[m]=Math.round((1-g)*o[m]+g*l[m]);var _="rgba("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")";h.addColorStop(p*a/.5,_),p!==1-p&&h.addColorStop(1-p*(1-a)/.5,_)}return d.fillStyle=h,d.fillRect(0,0,s,r),u}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarRepeatedGradientFillRenderer"}}),Iu=vu.extend({wantsContinuousUpdates:!1,color:V.b({defaultValue:"rgb(36, 175, 213)",type:String}),drawFillContent:function(e){e.fillStyle=this.color,e.fillRect(0,0,this.width,this.height)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarSolidColorFillRenderer"}}),Su=vu.extend({wantsContinuousUpdates:!1,preservesExistingTransparency:!0,color:V.b({defaultValue:"black",type:String}),weight:V.b({defaultValue:.5,type:Number}),_cornerRadius:V.b({readOnly:!0,binding:"ownerProgressBar._effectiveCornerRadius"}),_weightInCanvasPixels:V.b({readOnly:!0,dependencies:["ownerProgressBar._effectiveDPR","weight"],get:Object.assign((function(){return this.weight*this.getPath("ownerProgressBar._effectiveDPR")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])*i.internalGetPath(this,t[0+n])}})}),_cachedResult:V.b({readOnly:!0,dependencies:["width","height","color","_weightInCanvasPixels","_cornerRadius"],get:Object.assign((function(){var e=this.width,t=this.height,n=this.color,i=this._weightInCanvasPixels,r=this._cornerRadius,a=document.createElement("canvas");a.width=e,a.height=t;var s=a.getContext("2d"),o=Math.ceil(i),l=o,c=o,u=Math.max(0,r-o),d=e-2*o,h=t-2*o;return s.beginPath(),s.moveTo(l+u,c),s.arcTo(l+d,c,l+d,c+h,u),s.arcTo(l+d,c+h,l,c+h,u),s.arcTo(l,c+h,l,c,u),s.arcTo(l,c,l+d,c,u),s.closePath(),s.fillStyle=n,s.globalAlpha=i/o,s.fillRect(0,0,e,t),s.globalAlpha=1,s.globalCompositeOperation="destination-out",s.fill(),s.globalCompositeOperation="source-over",a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]),c=document.createElement("canvas");c.width=r,c.height=a;var u=c.getContext("2d"),d=Math.ceil(o),h=d,p=d,f=Math.max(0,l-d),g=r-2*d,m=a-2*d;return u.beginPath(),u.moveTo(h+f,p),u.arcTo(h+g,p,h+g,p+m,f),u.arcTo(h+g,p+m,h,p+m,f),u.arcTo(h,p+m,h,p,f),u.arcTo(h,p,h+g,p,f),u.closePath(),u.fillStyle=s,u.globalAlpha=o/d,u.fillRect(0,0,r,a),u.globalAlpha=1,u.globalCompositeOperation="destination-out",u.fill(),u.globalCompositeOperation="source-over",c}})}),drawFillContent:function(e){e.drawImage(this._cachedResult,0,0)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressBarThinStrokeRenderer"}}),Cu=In.a.extend(wi.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["progress-bar-view"]},className:"to-cw-progress-bar-view",__QUALIFIED_CLASS_NAME__:"ProgressBarView"},owner:V.b(),value:V.b(),minValue:V.b({defaultValue:0,type:Number}),maxValue:V.b({defaultValue:1,type:Number}),isNondeterminate:V.b({defaultValue:!1,type:Boolean}),animatesValue:V.b({defaultValue:!0,type:Boolean}),trackRendererClass:V.b(Iu.extend({color:"rgb(240, 240, 240)"})),progressRendererClass:V.b(wu.extend({baseColor:"rgb(36, 175, 213)",gradientColor:"rgb(20, 150, 190)"})),nondeterminateRendererClass:V.b(yu.extend({baseColor:"rgb(240, 240, 240)",stripeColor:"rgb(36, 175, 213)"})),postRendererClass:V.b(Su.extend({color:"black",weight:.1})),width:V.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign((function(e){return this.isAttached?e||this.element.offsetWidth:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e||this.element.offsetWidth:0}}),set:Tl.a}),height:V.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign((function(e){return this.isAttached?e||this.element.offsetHeight:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e||this.element.offsetHeight:0}}),set:Tl.a}),cornerRadius:V.b({dependencies:["isAttached"],writeDependencies:[],get:Object.assign((function(e){return this.isAttached?e>=0?e:parseFloat(this.style.get("border-radius"))||1/0:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e>=0?e:parseFloat(this.style.get("border-radius"))||1/0:0}}),set:Tl.a}),interiorCornerRadius:V.b({dependencies:["cornerRadius"],writeDependencies:[],get:Object.assign((function(e){return isNaN(e)?this.cornerRadius:e}),{__CW__getter:function(e,t,n,i){return isNaN(e)?i.internalGet(this,t[0+n]):e}}),set:Tl.a}),_trackRenderer:V.b({readOnly:!0,strong:!0,dependencies:["trackRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign((function(){return this.trackRendererClass.create(this)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_progressRenderer:V.b({readOnly:!0,strong:!0,dependencies:["progressRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign((function(){return this.progressRendererClass.create(this)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_nondeterminateRenderer:V.b({readOnly:!0,strong:!0,dependencies:["nondeterminateRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign((function(){return this.nondeterminateRendererClass.create(this)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).create(this)}})}),_postRenderer:V.b({readOnly:!0,strong:!0,dependencies:["postRendererClass"],downstreamBindings:{width:"(owner)._drawnWidth",height:"(owner)._drawnHeight"},get:Object.assign((function(){return this.postRendererClass?this.postRendererClass.create(this):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).create(this):void 0}})}),_progressWidthZeroPoint:V.b({readOnly:!0,dependencies:["_effectiveCornerRadius","_effectiveInteriorCornerRadius","_drawnWidth","_effectiveDPR"],get:Object.assign((function(){var e=this._effectiveCornerRadius+this._effectiveInteriorCornerRadius;return e>this._drawnWidth/10?Number(this._effectiveDPR):e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n]);return r>i.internalGet(this,t[2+n])/10?Number(i.internalGet(this,t[3+n])):r}})}),_animatedValueFeed:V.b({defaultValue:NaN,didChange:function(){var e=Date.now(),t=this._timeOfPreviousAnimatedValueInputUpdate||e-1e3;this._lastDurationBetweenAnimatedValueInputUpdates=e-t,this._timeOfPreviousAnimatedValueInputUpdate=e}}),_animatedValue:gu({readOnly:!0,binding:Oi.c("_animatedValueFeed"),decideDuration:function(e,t){if(e<t)return 0;var n=this._lastDurationBetweenAnimatedValueInputUpdates;return 1===e?500:1.5*n||500}}),_effectiveValue:V.b(NaN),_progress:V.b({readOnly:!0,dependencies:["_effectiveValue","minValue","maxValue"],get:Object.assign((function(){return(this._effectiveValue-this.minValue)/(this.maxValue-this.minValue)}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/(i.internalGet(this,t[2+n])-i.internalGet(this,t[1+n]))}})}),_effectivelyIsNondeterminate:V.b({readOnly:!0,dependencies:["isNondeterminate","_progress"],get:Object.assign((function(){if(this.isNondeterminate)return!0;var e=this._progress;return!(e>=0&&e<=1)}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=i.internalGet(this,t[1+n]);return!(r>=0&&r<=1)}})}),_nondeterminismLevel:gu({duration:250,readOnly:!0,dependencies:["_effectivelyIsNondeterminate"],get:Object.assign((function(){return this._effectivelyIsNondeterminate?1:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?1:0}})}),_effectiveDPR:V.b({readOnly:!0,dependencies:[p.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){return Math.ceil(p.a.sharedInstance.devicePixelRatio)}),{__CW__getter:function(e,t,n,i){return Math.ceil(i.internalGet(this,t[0+n]))}})}),_drawnWidth:V.b({readOnly:!0,dependencies:["width","_effectiveDPR"],get:Object.assign((function(){return this.width*this._effectiveDPR}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),_drawnHeight:V.b({readOnly:!0,dependencies:["height","_effectiveDPR"],get:Object.assign((function(){return this.height*this._effectiveDPR}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),_effectiveCornerRadius:V.b({readOnly:!0,dependencies:["cornerRadius","_effectiveDPR","_drawnWidth","_drawnHeight"],get:Object.assign((function(){return Math.min(this._drawnWidth/2,this._drawnHeight/2,this.cornerRadius*this._effectiveDPR)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n])/2,i.internalGet(this,t[3+n])/2,i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),_effectiveInteriorCornerRadius:V.b({readOnly:!0,dependencies:["interiorCornerRadius","_effectiveDPR","_drawnWidth","_drawnHeight"],get:Object.assign((function(){return Math.min(this._drawnWidth/2,this._drawnHeight/2,this.interiorCornerRadius*this._effectiveDPR)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[2+n])/2,i.internalGet(this,t[3+n])/2,i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),_isUpdatingContinuously:V.b({readOnly:!0,dependencies:["isAttached","_trackRenderer.wantsContinuousUpdates","_nondeterminateRenderer.wantsContinuousUpdates","_progressRenderer.wantsContinuousUpdates","_postRenderer.wantsContinuousUpdates","_nondeterminismLevel"],get:Object.assign((function(){if(!this.isAttached)return!1;if(this.getPath("_trackRenderer.wantsContinuousUpdates")||this.getPath("_postRenderer.wantsContinuousUpdates"))return!0;var e=this._nondeterminismLevel;return 0!==e&&this.getPath("_nondeterminateRenderer.wantsContinuousUpdates")||1!==e&&this.getPath("_progressRenderer.wantsContinuousUpdates")}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return!1;if(i.internalGetPath(this,t[1+n])||i.internalGetPath(this,t[4+n]))return!0;var r=i.internalGet(this,t[5+n]);return 0!==r&&i.internalGetPath(this,t[2+n])||1!==r&&i.internalGetPath(this,t[3+n])}}),didChange:function(e){e&&!this._continuousUpdateRAF&&this._scheduleNextContinuousUpdate(),!e&&this._continuousUpdateRAF&&(cancelAnimationFrame(this._continuousUpdateRAF),this._continuousUpdateRAF=null)}}),_scheduleNextContinuousUpdate:H.d((function(){var e=this;return function(){e._continuousUpdateRAF=mu.a(e._performNextContinuousUpdate)}})),_performNextContinuousUpdate:H.d((function(){var e=this;return function(){e._continuousUpdateRAF=null,e._renderEverything(),e._scheduleNextContinuousUpdate()}})),_rightCapClippingMask:V.b({readOnly:!0,dependencies:["_effectiveCornerRadius","_drawnHeight"],get:Object.assign((function(){var e=this._effectiveCornerRadius,t=this._drawnHeight;if(!e||!t)return null;var n=document.createElement("canvas"),i=n.getContext("2d");return n.width=e,n.height=t,i.fillRect(0,0,e,t),i.globalCompositeOperation="destination-out",i.beginPath(),i.moveTo(0,0),i.arcTo(e,0,e,t-e,e),i.arcTo(e,t,0,t,e),i.moveTo(0,0),i.closePath(),i.fill(),n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(!r||!a)return null;var s=document.createElement("canvas"),o=s.getContext("2d");return s.width=r,s.height=a,o.fillRect(0,0,r,a),o.globalCompositeOperation="destination-out",o.beginPath(),o.moveTo(0,0),o.arcTo(r,0,r,a-r,r),o.arcTo(r,a,0,a,r),o.moveTo(0,0),o.closePath(),o.fill(),s}})}),_leftCapClippingMask:V.b({readOnly:!0,dependencies:["_rightCapClippingMask"],get:Object.assign((function(){var e=this._rightCapClippingMask;if(!e)return null;var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.scale(-1,1),n.translate(-t.width,0),n.drawImage(e,0,0),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a=document.createElement("canvas"),s=a.getContext("2d");return a.width=r.width,a.height=r.height,s.scale(-1,1),s.translate(-a.width,0),s.drawImage(r,0,0),a}}),didChange:function(){}}),_mainCanvas:H.d((function(){var e=this.__mainCanvas;return e||((e=document.createElement("canvas")).style.position="absolute",this.__mainCanvas=e)})),_mainContext:H.d((function(){return this.__mainContext||(this.__mainContext=this._mainCanvas.getContext("2d"))})),_scratchCanvas:H.d((function(){return this.__scratchCanvas||(this.__scratchCanvas=document.createElement("canvas"))})),_scratchContext:H.d((function(){return this.__scratchContext||(this.__scratchContext=this._scratchCanvas.getContext("2d"))})),_scratchierCanvas:H.d((function(){return this.__scratchierCanvas||(this.__scratchierCanvas=document.createElement("canvas"))})),_scratchierContext:H.d((function(){return this.__scratchierContext||(this.__scratchierContext=this._scratchierCanvas.getContext("2d"))})),_draw:function(){var e=this._drawnWidth,t=this._drawnHeight;if(e&&t){var n=this._trackRenderer,i=this._progressRenderer,r=this._nondeterminateRenderer,a=this._postRenderer,s=this._mainContext,o=this._scratchCanvas,l=this._scratchContext,c=this._scratchierCanvas,u=this._scratchierContext,d=this._leftCapClippingMask,h=this._rightCapClippingMask,p=this._nondeterminismLevel;if(p>0){var f=p<1?u:s;r.drawFillContent(f),this._maskOffCapsForContext(f,e,d,h),r.wantsTrackUnderneath&&(n.drawFillContent(l),this._maskOffCapsForContext(l,e,d,h),f.globalCompositeOperation="destination-over",f.drawImage(o,0,0),f.globalCompositeOperation="source-over")}if(p<1){var g=this._progress,m=this._progressWidthZeroPoint,_=m+g*(e-m),v=Math.floor(_),b=Math.ceil(_),y=this._effectiveInteriorCornerRadius;n.drawFillContent(s),i.wantsTrackUnderneath||s.clearRect(0,0,v-(h?h.width:0),t),i.drawFillContent(l),l.globalCompositeOperation="destination-out",l.beginPath(),l.moveTo(_-y,0),l.arcTo(_,0,_,t-y,y),l.arcTo(_,t,_-y,t,y),l.lineTo(b,t),l.lineTo(b,0),l.lineTo(_-y,0),l.closePath(),l.fillStyle="black",l.fill(),l.globalCompositeOperation="source-over",l.clearRect(b,0,e-b,t),s.drawImage(o,0,0),this._maskOffCapsForContext(s,e,d,h)}p>0&&p<1&&(s.globalAlpha=p,s.drawImage(c,0,0),s.globalAlpha=1),a&&(a.preservesExistingTransparency?(l.clearRect(0,0,e,t),a.drawFillContent(l),s.globalCompositeOperation="source-atop",s.drawImage(o,0,0),s.globalCompositeOperation="source-over"):a.drawFillContent(s))}},_maskOffCapsForContext:function(e,t,n,i){e.globalCompositeOperation="destination-out",n&&e.drawImage(n,0,0),i&&e.drawImage(i,t-i.width,0),e.globalCompositeOperation="source-over"},_renderEverything:B.h("isAttached","_drawnWidth","_drawnHeight",(function(e,t,n){var i=this._mainCanvas,r=this._mainContext,a=this._scratchCanvas,s=this._scratchContext,o=this._scratchierCanvas,l=this._scratchierContext;i.width!==t||i.height!==n?(i.width=a.width=o.width=t,i.style.width=this.width+"px",i.height=a.height=o.height=n):(r.clearRect(0,0,t,n),s.clearRect(0,0,t,n),l.clearRect(0,0,t,n)),e&&!i.parentNode&&this.element.appendChild(i),this._draw()})),_updateForDiscreteInputs:B.h("_progress","_nondeterminismLevel",(function(){this._isUpdatingContinuously||this._renderEverything()})),_maintainValueBindings:B.h("animatesValue",(function(e){e?(this.bind("_animatedValueFeed","value"),this.bind("_effectiveValue","_animatedValue")):(this.bind("_effectiveValue","value"),this.unbind("_animatedValueFeed"),this._animatedValueFeed=NaN)}))}),Eu=Ho.a.extend({action:"cancelButtonWasActivated",additionalClassNames:F.b(["cancel-button","expanded-touch-target"]),title:V.b(s.d("ProgressView.CancelButton.Title")),staticMembers:{__QUALIFIED_CLASS_NAME__:"ProgressViewCancelButton"}}),Au=In.a.extend(wi.a,{mixinDependencies:[fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"progressLabelSpinnerView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_progressLabel",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"cancelButtonCompact"}],classes:["progress-label-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideProgressLabelView",truevalue:"hide",attributes:{}}],name:"progressLabelView"},{type:"VIEWOUTLET",tagname:"view",name:"progressBarView"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButtonRegular"}],classes:["progress-view-content-container"],name:"progressContent"}],classes:["photos-ui-progress-view",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"sizeClassName",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isTransitioning",truevalue:"is-transitioning",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"is-visible",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasCancelButton",truevalue:"has-cancel-button",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"ProgressView"},show:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._moveProgressViewInAndOutAsNecessary(!0,e)},hide:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._moveProgressViewInAndOutAsNecessary(!1,e)},reset:function(){this._setMinWidth(0),this.propertyChanged("progressLabel"),this.propertyChanged("possibleProgressLabels"),this.isIndeterminate=!1;var e=this.progressDuration;this.progressDuration=0,this.progressValue=0,this.progressDuration=e},sizeChanged:B.i(),sizeClassName:V.b({dependencies:["sizeClassHorizontal"],readOnly:!0,get:Object.assign((function(){return this.sizeClassHorizontal===dn.a.COMPACT?"is-compact":"is-regular"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===dn.a.COMPACT?"is-compact":"is-regular"}})}),_sizeChangedObserver:B.h({inputs:["_progressViewHeight","_isTransitioning"],callback:function(){this.sizeChanged()}}),progressValue:V.b({defaultValue:0,type:Number,didChange:function(e){if(void 0!==e){var t=this._normalizedProgressValue=Math.max(0,Math.min(100,e));this.animate("_progressValue",t,this.progressDuration)}}}),_progressViewMaxHeight:0,_progressViewHeight:wi.b(0),_progressViewHeightObserver:B.g({inputs:["_progressViewHeight"],callback:function(e){var t=Math.min(e,this._progressViewMaxHeight);yl.c(this.element,"height",t)}}),_shouldAnimateImportProgressTowardTimeout:0,_shouldAnimateImportProgressAwayTimeout:0,_shouldHideImportProgressTimeout:0,isVisible:V.b({defaultValue:!1,type:Boolean,didChange:function(e){!1===e&&this.reset()}}),_isTransitioning:V.b(),_moveProgressViewInAndOutAsNecessary:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e!==this.isVisible||!0!==n){clearTimeout(this._shouldAnimateImportProgressTowardTimeout),clearTimeout(this._shouldAnimateImportProgressAwayTimeout),clearTimeout(this._shouldHideImportProgressTimeout);var i=this._progressViewMaxHeight=this.progressContent.offsetHeight;!0===e?(this.isVisible=!0,n?(this._isTransitioning=!0,this.animate("_progressViewHeight",i,300),this._shouldAnimateImportProgressTowardTimeout=X.a((function(){return t._isTransitioning=!1}),300)):this._progressViewHeight=i):n?(this._isTransitioning=!0,this._progressViewHeight=i,this._shouldAnimateImportProgressAwayTimeout=X.a((function(){return t.animate("_progressViewHeight",0,600)}),250),this._shouldHideImportProgressTimeout=X.a((function(){t.isDisposed||(t._isTransitioning=t.isVisible=!1)}),850)):(this._progressViewHeight=0,this.isVisible=!1)}},progressDuration:666,_progressValue:wi.b(0),_normalizedProgressValue:V.b(0),progressBarView:V.b({dependencies:["sizeClassHorizontal"],downstreamBindings:{isNondeterminate:"(owner).isIndeterminate",value:"(owner)._progressValue"},readOnly:!0,type:Cu,get:Object.assign((function(){return this.sizeClassHorizontal===dn.a.COMPACT?this.compactProgressBarView:this.regularProgressBarView}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===dn.a.COMPACT?this.compactProgressBarView:this.regularProgressBarView}})}),regularProgressBarView:k.c(Cu.extend(Pl.a,{animatesValue:!1,minValue:-5,maxValue:100,height:10,_widthObserver:B.h({inputs:["viewportWidth"],callback:function(){this.propertyChanged("width")}}),cornerRadius:1/0,interiorCornerRadius:0,progressRendererClass:Iu.extend({color:"rgb(55, 141, 241)"}),nondeterminateRendererClass:wu.extend({baseColor:"rgb(175, 175, 175)",gradientColor:"rgb(215, 215, 215)",repetitionAspectRatio:150,repetitionSlideTime:1250,slideDirection:1}),trackRendererClass:Iu.extend({color:"rgb(255, 255, 255)"}),postRendererClass:Su.extend({color:"rgba(200, 200, 200, 0.95)",weight:1})})),compactProgressBarView:k.c(Cu.extend(Pl.a,{animatesValue:!1,minValue:-5,maxValue:100,_widthObserver:B.h({inputs:["viewportWidth"],callback:function(){this.propertyChanged("width")}}),cornerRadius:0,interiorCornerRadius:0,progressRendererClass:Iu.extend({color:"rgb(55, 141, 241)"}),nondeterminateRendererClass:Iu.extend({color:"rgba(0, 0, 0, 0)"}),trackRendererClass:Iu.extend({color:"rgba(0, 0, 0, 0)"})})),isIndeterminate:V.b(!1),possibleProgressLabels:V.b({defaultValue:[],type:Array,didChange:function(e){this.sizeClassHorizontal!==dn.a.COMPACT&&this._setWidthOnProgressLabel(e)}}),progressLabel:V.b({defaultValue:"",type:String,didChange:function(e){this.sizeClassHorizontal!==dn.a.COMPACT&&this._setWidthOnProgressLabel([e]),this._progressLabel=e,this.progressBarView.propertyChanged("width")}}),_progressLabel:V.b(""),_sizeClassHorizontalObserver:B.h({inputs:["sizeClassHorizontal"],callback:function(e){this._setMinWidth(0),e!==dn.a.COMPACT&&(this._setWidthOnProgressLabel(this.possibleProgressLabels),this._setWidthOnProgressLabel([this.progressLabel]))}}),_shouldHideProgressLabelView:V.b({dependencies:["_progressLabel"],readOnly:!0,type:Boolean,get:Object.assign((function(){return!this._progressLabel}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}}),didChange:function(){this.progressBarView.propertyChanged("width")}}),_progressLabelMinWidth:0,_setWidthOnProgressLabel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==t.length){var n=this._progressLabel,i=t.reduce((function(t,n){return e._progressLabel=n,Math.max(e.progressLabelView.clientWidth,t)}),this._progressLabelMinWidth);this._progressLabel=n,i=Math.max(i,this._progressLabelMinWidth),this._setMinWidth(i)}},_setMinWidth:function(e){this._progressLabelMinWidth=e,yl.c(this.progressLabelView,"min-width",e),this.progressBarView.propertyChanged("width")},progressLabelSpinnerView:V.b({defaultValue:k.c(Jc.a.extend({size:16,color:"black"})),dependencies:["isIndeterminate","sizeClassHorizontal"],readOnly:!0,strong:!0,type:Jc.a,get:Object.assign((function(e){if(!0===this.isIndeterminate&&this.sizeClassHorizontal===dn.a.COMPACT)return e}),{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===dn.a.COMPACT)return e}})}),hasCancelButton:V.b(!1),cancelButtonWasActivated:function(){},cancelButtonRegular:V.b({dependencies:["hasCancelButton","sizeClassHorizontal"],readOnly:!0,strong:!0,type:Eu,get:Object.assign((function(){var e=this.hasCancelButton,t=this.sizeClassHorizontal;if(e&&t!==dn.a.COMPACT)return Eu.create({isDisabled:this.bindingFor("cancelButtonIsDisabled")})}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a!==dn.a.COMPACT)return Eu.create({isDisabled:this.bindingFor("cancelButtonIsDisabled")})}})}),cancelButtonCompact:V.b({dependencies:["hasCancelButton","sizeClassHorizontal"],readOnly:!0,strong:!0,type:Eu,get:Object.assign((function(){var e=this.hasCancelButton,t=this.sizeClassHorizontal;if(e&&t===dn.a.COMPACT)return Eu.create({isDisabled:this.bindingFor("cancelButtonIsDisabled")})}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a===dn.a.COMPACT)return Eu.create({isDisabled:this.bindingFor("cancelButtonIsDisabled")})}})}),cancelButtonIsDisabled:V.b({dependencies:["_normalizedProgressValue"],readOnly:!0,type:Boolean,get:Object.assign((function(){return 100===this._normalizedProgressValue}),{__CW__getter:function(e,t,n,i){return 100===i.internalGet(this,t[0+n])}})})}),Ou=ri.sharedInstance,Tu={dataManager:V.b((function(){return L.n()})),uploadProgressView:V.b({readOnly:!0,strong:!0,type:Au,get:function(){var e=this;return Au.extend({cancelButtonWasActivated:function(){e.cancelUpload()},uploadWasCancelled:V.b(),reset:function(){var e=this,t=arguments;e.__s._$GN$reset.apply(e,t),this.uploadWasCancelled=!1},__superMap:{_$GN$reset:"reset"}}).create({hasCancelButton:!0,progressLabel:this.bindingFor("uploadProgressLabel"),possibleProgressLabels:this.bindingFor("uploadPossibleProgressLabels"),progressValue:this.bindingFor("uploadProgressValue"),uploadWasCancelled:this.bindingFor("uploadWasCancelled")})}}),uploadManager:V.b(Ou),totalFileCount:V.b(Ou.bindingFor("totalFileCount")),uploadInProgress:V.b(Ou.bindingFor("uploadInProgress")),uploadProgress:V.b(Ou.bindingFor("progress.percentComplete")),stopPendingUploads:function(){Ou.abortPendingUploads()},_showUploadProgressBar:B.h({inputs:["uploadInProgress"],callback:function(e){e?this.uploadProgressView.show():this.uploadIsComplete()}}),uploadProgressValue:V.b(0),uploadProgressLabel:V.b({readOnly:!0,dependencies:["uploadWasCancelled","totalFileCount"],get:Object.assign((function(){var e=this.totalFileCount;return this.uploadWasCancelled?s.d("PhotosUploader.Text.UploadCancelled"):e?1===e?s.d("PhotosUploader.Text.UploadSingle"):e>1?s.d("PhotosUploader.Text.UploadMultiple",{fileCount:e}):void 0:s.d("PhotosUploader.Text.UploadComplete")}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])?s.d("PhotosUploader.Text.UploadCancelled"):r?1===r?s.d("PhotosUploader.Text.UploadSingle"):r>1?s.d("PhotosUploader.Text.UploadMultiple",{fileCount:r}):void 0:s.d("PhotosUploader.Text.UploadComplete")}})}),uploadPossibleProgressLabels:V.b({dependencies:["totalFileCount"],readOnly:!0,type:Array,get:Object.assign((function(){return[s.d("PhotosUploader.Text.UploadCancelled"),s.d("PhotosUploader.Text.UploadComplete"),s.d("PhotosUploader.Text.UploadSingle"),s.d("PhotosUploader.Text.UploadMultiple",{fileCount:this.totalFileCount})]}),{__CW__getter:function(e,t,n,i){return[s.d("PhotosUploader.Text.UploadCancelled"),s.d("PhotosUploader.Text.UploadComplete"),s.d("PhotosUploader.Text.UploadSingle"),s.d("PhotosUploader.Text.UploadMultiple",{fileCount:i.internalGet(this,t[0+n])})]}})}),_uploadProgressObserver:B.g({inputs:["uploadProgress"],callback:function(e){isNaN(e)||(this.uploadProgressValue=100*e)}}),uploadWasCancelled:V.b(!1),cancelUpload:function(){Ou.abortPendingUploads(),this.uploadWasCancelled=!0,this.uploadIsComplete()},uploadIsComplete:function(){var e=this;this.uploadProgressValue=100,X.a((function(){e.uploadProgressView.hide()}),this.uploadProgressView.progressDuration)},_uploadProgressViewHeightObserver:B.g({inputs:["isAttached","uploadProgressView.isVisible","uploadProgressView.sizeChanged"],callback:function(e,t){e&&t&&this.sendEvent("notifyTopViewControllerOfSizeChange")}})},Mu=globalThis.CloudKit,Du=Mu&&Mu.PRODUCTION_ENVIRONMENT||"production",Pu=(Mu&&Mu.DEVELOPMENT_ENVIRONMENT,h.a.extend({staticMembers:{storageKey:"ckjs"},apnsEnvironment:V.b({readOnly:!0,get:function(){return Du}}),ckEnvironment:h.a.stringProperty(Du),ckContainerId:h.a.stringProperty("com.apple.photos.cloud"),maxOperationsInSingleRequest:200,changesetIntervalWithPush:h.a.numberProperty(3e5),changesetIntervalWithoutPush:h.a.numberProperty(3e4),changesetIntervalWhileIdle:h.a.numberProperty(9e5)}).create()),Lu={transactionProcessor:V.b(G.a.bindingFor("application.dataManager.transactionProcessor")),transactionProgressView:V.b({readOnly:!0,strong:!0,type:Au,get:function(){return Au.create({isIndeterminate:this.bindingFor("transactionProgressIsIndeterminate"),progressLabel:this.bindingFor("transactionProgressLabel"),possibleProgressLabels:this.bindingFor("transactionPossibleProgressLabels"),progressValue:this.bindingFor("transactionProgressValue")})}}),transactionProgressIsIndeterminate:V.b(!1),transactionProgressValue:V.b(0),_transactionProgressShoudBeIndeterminateObserver:B.g({inputs:["loadsInProgress"],callback:function(e){this.transactionProgressIsIndeterminate=e>0}}),loadsInProgress:V.b(0),transactionProgressLabel:V.b({readOnly:!0,dependencies:["transactionProgressIsIndeterminate"],get:Object.assign((function(){return this.transactionProgressIsIndeterminate?s.d("Transaction.Progress.Preparing"):s.d("Transaction.Progress.Processing")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("Transaction.Progress.Preparing"):s.d("Transaction.Progress.Processing")}})}),transactionPossibleProgressLabels:V.b({readOnly:!0,type:Array,get:function(){return[s.d("Transaction.Progress.Preparing"),s.d("Transaction.Progress.Processing")]}}),_transactionProgressValueObserver:B.g({inputs:["transactionProcessor.progress"],callback:function(e){var t=isNaN(e)?-1:100*e;isNaN(e)&&100===this._transactionPreviousProgress&&(t=100,this.transactionProgressDidComplete()),this.transactionProgressValue=t,Ie.a(this,"_transactionPreviousProgress",t)}}),_transactionProgressViewHeightObserver:B.g({inputs:["isAttached","transactionProgressView.isVisible","transactionProgressView.sizeChanged"],callback:function(e,t){e&&t&&this.sendEvent("notifyTopViewControllerOfSizeChange")}}),transactionProgressDidComplete:function(){var e=this;X.a((function(){return e.transactionProgressView.hide()}),1e3)},_transactionPreviousProgress:-1,_showTransactionProgressBar:B.h({inputs:["loadsInProgress","transactionProcessor.progressTrackedPendingTransactions.length"],callback:function(e,t){(e>Pu.maxOperationsInSingleRequest||t>1)&&this.transactionProgressView.show()}})},Ru=Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOn",truevalue:"cw-on",attributes:{}}],attributes:{"aria-pressed":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"ariaPressed",truevalue:"true",falsevalue:"false",attributes:{},attribute:"aria-pressed"}}}},className:"cw-ui-views-controls-toggle-button",__QUALIFIED_CLASS_NAME__:"ToggleButton"},isOn:Object(V.b)(!1),wasActivated:function(){this.set("isOn",!this.get("isOn"))},ariaPressed:Object(Oi.c)("isOn")}),xu=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"_buttons"}],classes:["cw-segmented-control",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"disabled",attributes:{}}]}},className:"cw-ui-views-controls-segmented",__QUALIFIED_CLASS_NAME__:"Segmented"},ariaRole:Object(V.b)("tablist"),value:Object(V.b)(),isDisabled:Object(V.b)({defaultValue:!1,type:"boolean"}),segments:Object(V.b)({get:function(e){return e},set:function(e){return Ai.a.create(e)}}),buttonClass:Ru,_buttons:Object(V.b)(Object(k.c)(Wo.b)),buttonAriaRole:Object(V.b)("tab"),_redraw:Object(B.h)("element","segments",(function(e,t){var n=this.get("_buttons");if(e&&n){if(n.beginBatchedChanges(),n.clear(),t)for(var i=t.get("length"),r=this.get("value"),a=0,s=i;a<s;a++){var o=t.objectAt(a),l=this.buttonClass.create({additionalClassNames:Object(F.b)(o.classNames||[]),title:o.title,value:o.value,icon:o.icon,isDisabled:this.bindingFor("isDisabled"),target:this,action:"didToggle",tooltip:o.tooltip,isOn:o.value===r,ariaRole:this.bindingFor("buttonAriaRole")}),c=l.get("element").classList;0===a?c.add("cw-first"):a===i-1&&c.add("cw-last"),n.push(l)}n.endBatchedChanges()}})),_updateButtonStates:Object(B.h)("value",(function(e){var t,n=this.get("_buttons");if(n)for(var i=0,r=n.get("length");i<r;i++)(t=n.objectAt(i)).set("isOn",t.get("value")===e),t.get("element").setAttribute("aria-selected",t.get("isOn"))})),didToggle:function(e){e&&this.set("value",e.get("value"))}}),Nu={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",classes:["svg-container"],name:"svgContainer"}]}}},additionalClassNames:F.b(["has-svg-icon"]),_iconObserver:B.h({inputs:["icon"],callback:function(e){void 0!==e&&(this.svgContainer.innerHTML=e)}}),icon:V.b()},Fu=n(765),Vu=n(319),ku=n(470),Bu=n(203);function ju(e,t,n,i){return 180/Math.PI*Math.acos((e*n+t*i)/(Math.sqrt(e*e+t*t)*Math.sqrt(n*n+i*i)))}var Uu,Gu=we.b("PointerDragGestureDirection",{UP:"pointerDragUp",UP_LEFT:"pointerDragUpLeft",LEFT:"pointerDragLeft",DOWN_LEFT:"pointerDragDownLeft",DOWN:"pointerDragDown",DOWN_RIGHT:"pointerDragDownRight",RIGHT:"pointerDragRight",UP_RIGHT:"pointerDragUpRight"}),Hu={mixinDependencies:[Fu.a],dragGestureDirections:[Gu.UP,Gu.LEFT,Gu.DOWN,Gu.RIGHT],dragGestureMoveCount:V.b(5),dragGestureFizzleTime:100,_dragGestureDirectionVectors:{pointerDragUp:[0,-1],pointerDragUpRight:[1,-1],pointerDragRight:[1,0],pointerDragDownRight:[1,1],pointerDragDown:[0,1],pointerDragDownLeft:[-1,1],pointerDragLeft:[-1,0],pointerDragUpLeft:[-1,-1]},pointerDown:function(e){var t=this,n=arguments;return this._dragGestureDirectionCompatibilities=Vu.a(this.dragGestureDirections.map((function(e){return e.value}))),this._dragGestureLastX=this._dragGestureInitialX=e.clientX,this._dragGestureLastY=this._dragGestureInitialY=e.clientY,this._dragGestureRunningMoveCount=0,this._dragGesturePointerEvent=e,t.__s._$13z$pointerDown.apply(t,n)},pointerMove:function(e){var t=this,n=arguments;return this._stepDragGesture(e.clientX,e.clientY),t.__s._$16M$pointerMove.apply(t,n)},pointerUp:function(){var e=this,t=arguments;return this._cleanUpDragGesture(),e.__s._$18E$pointerUp.apply(e,t)},cancelPointerInteraction:function(){var e=this,t=arguments;return this._cleanUpDragGesture(),e.__s._$1AL$cancelPointerInteraction.apply(e,t)},dispose:function(){var e=this,t=arguments;return this._cleanUpDragGesture(),e.__s._$1CB$dispose.apply(e,t)},_dragGestureRunningMoveCount:void 0,_dragGestureFizzleTimeout:void 0,_dragGestureLastX:void 0,_dragGestureInitialX:void 0,_dragGestureLastY:void 0,_dragGestureInitialY:void 0,_dragGesturePointerEvent:void 0,_dragGestureDirectionCompatibilities:void 0,_stepDragGesture:function(e,t){var n=this._dragGestureDirectionCompatibilities;if(n){var i=this.dragGestureDirections,r=this._dragGestureLastX,a=this._dragGestureLastY,s=this._dragGestureDirectionVectors;if(this._dragGestureLastX=e,this._dragGestureLastY=t,r!==e||a!==t){for(var o,l=e-r,c=t-a,u=!0,d=0;o=i[d];d++){var h=s[o.value];ju(l,c,h[0],h[1])<60||(n[o.value]=!1),n[o.value]&&(u=!1)}u?this._cleanUpDragGesture():++this._dragGestureRunningMoveCount>=this.dragGestureMoveCount?this._fireDragGestureAction():this._rescheduleDragGestureFizzle()}}},_rescheduleDragGestureFizzle:function(){var e=this._dragGestureFizzleTimeout;e&&clearTimeout(e),this._dragGestureFizzleTimeout=X.a(this._cleanUpDragGesture,this.dragGestureFizzleTime)},_cleanUpDragGesture:Object(Bu.b)((function(){var e=this._dragGestureFizzleTimeout;e&&clearTimeout(e),this._dragGestureRunningMoveCount=this._dragGestureFizzleTimeout=this._dragGestureLastX=this._dragGestureInitialX=this._dragGestureLastY=this._dragGestureInitialY=this._dragGesturePointerEvent=this._dragGestureDirectionCompatibilities=void 0})),_fireDragGestureAction:function(){for(var e,t,n=this._dragGesturePointerEvent,i=this._dragGestureDirectionVectors,r=this._dragGestureDirectionCompatibilities,a=this.dragGestureDirections,s=1/0,o=0;t=a[o];o++)if(r[t.value]){var l=i[t.value],c=ju(l[0],l[1],this._dragGestureLastX-this._dragGestureInitialX,this._dragGestureLastY-this._dragGestureInitialY);c<s&&(s=c,e=t)}this.cancelPointerInteraction(),this.sendEvent(e.value,n)},__superMap:{_$13z$pointerDown:"pointerDown",_$16M$pointerMove:"pointerMove",_$18E$pointerUp:"pointerUp",_$1AL$cancelPointerInteraction:"cancelPointerInteraction",_$1CB$dispose:"dispose"}},Wu={mixinDependencies:[Hu],dragGestureDirections:[Gu.DOWN],pointerDragDown:function(){this.hasMixin(ku.a)&&this.triggerButtonAction()}},$u=n(700),zu=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"g",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"M 19.208 -2.32422 C 19.9219 -2.34082 20.5195 -2.60645 21.0674 -3.1709 L 33.502 -15.9043 C 33.9502 -16.3525 34.166 -16.8672 34.166 -17.5146 C 34.166 -18.8096 33.1367 -19.8389 31.8584 -19.8389 C 31.2275 -19.8389 30.6299 -19.5732 30.165 -19.1084 L 19.208 -7.81934 L 8.23438 -19.1084 C 7.76953 -19.5732 7.18848 -19.8389 6.54102 -19.8389 C 5.2627 -19.8389 4.2334 -18.8096 4.2334 -17.5146 C 4.2334 -16.8838 4.46582 -16.3525 4.89746 -15.9043 L 17.3486 -3.1709 C 17.9131 -2.58984 18.4941 -2.32422 19.208 -2.32422 Z"}}],namespace:"http://www.w3.org/2000/svg",attributes:{transform:"matrix(1 0 0 1 -4.2333862304687955 21.6357421875)"}}],namespace:"http://www.w3.org/2000/svg",classes:["cosk-chevron-icon"],attributes:{viewBox:"0 0 29.9332275390625 19.30755615234375",version:"1.1"}},className:"cosk-ui-title-bar-chevron-view",__QUALIFIED_CLASS_NAME__:"ChevronView"}}),Ku=Object.freeze({TOP:"top",HANGING:"hanging",MIDDLE:"middle",ALPHABETIC:"alphabetic",IDEOGRAPHIC:"ideographic",BOTTOM:"bottom"}),qu=new Map,Qu=new(function(){function e(){this.font=""}var t=e.prototype;return t._buildKey=function(e){return this.font+"-"+e},t.get=function(e){return qu.get(this._buildKey(e))},t.set=function(e,t){qu.set(this._buildKey(e),t)},t.has=function(e){return qu.has(this._buildKey(e))},e}());function Yu(e,t){for(var n=e.length,i=n,r=3;r<n;r+=4)if(0!==e[r]){i=r/4/t;break}return i}function Zu(e,t){for(var n=0,i=e.length-1;i>=0;i-=4)if(0!==e[i]){n=i/4/t;break}return n}function Xu(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ku.ALPHABETIC,r=parseFloat(Uu.style.height),a=parseFloat(Uu.style.width);e.clearRect(0,0,a,r),e.fillStyle="black",e.font=t,e.textBaseline=i,e.fillText(n,a/4,r/2,a);var s=e.getImageData(0,0,a,r);return s.data}function Ju(e,t){Uu||(Uu=document.createElement("canvas"));var n=function(e){var t=window.getComputedStyle(e),n={font:t.getPropertyValue("font"),lineHeight:parseFloat(t.getPropertyValue("line-height")),fontFamily:t.getPropertyValue("font-family"),fontSize:parseFloat(t.getPropertyValue("font-size")),fontStretch:t.getPropertyValue("font-stretch"),fontStyle:t.getPropertyValue("font-style"),fontVariant:t.getPropertyValue("font-variant"),fontWeight:parseInt(t.getPropertyValue("font-weight"))};if(!n.font){var i=[n.fontStyle,n.fontVariant,n.fontWeight,"100%"===n.fontStretch?"normal":n.fontStretch,n.fontSize+"px / "+n.lineHeight+"px",n.fontFamily];n.font=""+i.join(" ")}return n}(t),i=n.font,r=n.fontSize;if(Qu.font=i,Qu.has(e))return Qu.get(e);var a=Uu.getContext("2d");Uu.width=r,Uu.height=2*r,Uu.style.width=r+"px",Uu.style.height=2*r+"px";var s=Qu.get(Ku.ALPHABETIC);if(s||(s=function(e,t,n){var i,r,a,s=t.fontWeight,o=t.fontSize,l=t.fontFamily,c=t.lineHeight,u=s+" "+o+"px "+l;r=Yu(i=Xu(e,u,"N"),n);var d=Zu(i,n)-r;r=Yu(i=Xu(e,u,"x"),n);var h=(a=Zu(i,n))-r,p=c/2+d/2;return{capline:p-d,meanline:p-h,baseline:p,capHeight:d,xHeight:h,renderedBaseline:a}}(a,n,Uu.width),Qu.set(Ku.ALPHABETIC,s)),e===Ku.ALPHABETIC)return s;var o=Zu(Xu(a,n.fontWeight+" "+n.fontSize+"px "+n.fontFamily,"N",e),r),l=o-s.renderedBaseline,c={capline:s.capline+l,meanline:s.meanline+l,baseline:s.baseline+l,capHeight:s.capHeight,xHeight:s.xHeight,renderedBaseline:o};return Qu.set(e,c),c}window.getFontMetrics=Ju;var ed,td={mixinDependencies:[{staticMembers:{template:{type:"ELEMENT",tagname:"span",name:"iconElement"}},_iconObserver:B.h({inputs:["icon","iconStyle"],callback:function(e,t){void 0!==e&&(this.iconElement.innerHTML=e),void 0!==t&&this.iconElement.setAttribute("style",t)}}),icon:V.b(),iconStyle:V.b()}],desiredFontSize:V.b(0),layoutMode:V.b("layoutBox"),symbolMetadata:V.b(),otherSymbolProps:V.b(),_symbolMetadataObserver:B.h({inputs:["desiredFontSize","layoutMode","otherSymbolProps","symbolMetadata"],callback:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(i&&t){var r=i.svgPath,a=i[t],s=a.viewBox,o=a.height,l=a.translateX,c=a.translateY,u=a.baseline,d=a.capline,h="matrix(1 0 0 1 "+l+" "+c+")";if(e>0){var p=u-d,f=e/p,g=o*f;n.style="height: "+g+"px; "+(n.style||"")}n.className="",n.className+="layoutBox"===t?" layout-box":" glyph-box";var m=document.createElement("svg");for(var _ in m.setAttribute("viewBox",s),m.setAttribute("version","1.1"),m.setAttribute("xmlns","http://www.w3.org/2000/svg"),n)m.setAttribute(_,n[_]);var v=document.createElement("g");v.setAttribute("transform",h);var b=document.createElement("path");b.setAttribute("d",r),v.appendChild(b),m.appendChild(v),this.icon=m.outerHTML}else this.icon=""}})},nd={"icloud.logo":{name:"icloud.logo",svgPath:"M1 3.9c0-1.4 1.2-2.6 2.6-2.6 1.4 0 2.6 1.1 2.6 2.5S5.1 6.4 3.7 6.4h-.1C2.2 6.5 1 5.3 1 3.9zm.4 5.8h4.5v22H1.4v-22zm8.8 6.9C10.2 7 15.7 1 24.1 1 31 1 36.2 5.2 37 11.5h-4.7c-.8-3.9-4.1-6.4-8.2-6.4-5.5 0-9.1 4.5-9.1 11.5s3.5 11.5 9.1 11.5c4.2 0 7.2-2.2 8.2-5.8H37c-1.2 6.2-5.9 9.9-12.9 9.9-8.5 0-13.9-6-13.9-15.6zM40.9 1.5h4.5v30.2h-4.5V1.5zm18.7 7.9c-6.4 0-10.5 4.4-10.5 11.3S53.2 32 59.6 32s10.5-4.3 10.5-11.3c0-6.9-4-11.3-10.5-11.3zm0 18.8c-3.7 0-5.9-2.8-5.9-7.6 0-4.7 2.2-7.6 5.9-7.6s5.9 2.8 5.9 7.6-2.2 7.6-5.9 7.6zm33 3.5h-4.4v-3.8h-.1c-1.3 2.6-3.5 4-6.9 4-4.8 0-7.8-3.1-7.8-8.1V9.7h4.5v13.2c0 3.3 1.6 5.1 4.7 5.1 3.3 0 5.3-2.3 5.3-5.7V9.7h4.5l.2 22zm19.8-30.2v11.8h-.1c-1.3-2.4-3.8-3.9-6.9-3.9-5.5 0-9.3 4.4-9.3 11.2s3.8 11.2 9.3 11.2c3.2 0 5.7-1.5 7-4h.1v3.7h4.4v-30h-4.5zm-5.8 26.6c-3.5 0-5.9-2.9-5.9-7.4s2.3-7.4 5.9-7.4c3.5 0 5.8 2.9 5.8 7.4.1 4.5-2.3 7.4-5.8 7.4z",layoutBox:{viewBox:"0 0 118 34",width:118,height:34,translateX:0,translateY:0,baseline:31.2,capline:1},glyphBox:{viewBox:"0 0 118 34",width:118,height:34,translateX:0,translateY:0,baseline:31.2,capline:1}},"icloud.cn.logo":{name:"icloud.cn.logo",svgPath:"M11.5,39.5v10.3h-1v-0.9H2.3v0.9h-1V39.5h4.6v-2.2h1v2.2H11.5z M2.3,43.6h3.6v-3.1H2.3V43.6z M2.3,47.9h3.6v-3.4H2.3V47.9z M7,40.4v3.1h3.6v-3.1H7z M7,47.9h3.6v-3.4H7V47.9z M26.8,41.9v1h-6.6c-1.3,2.6-2.4,4.3-3.3,5.4c2.5-0.1,5-0.3,7.4-0.7c-0.2-0.5-0.5-1-0.8-1.4c-0.3-0.5-0.6-0.9-0.9-1.4l0.8-0.5c0.6,0.9,1.2,1.9,1.7,2.7c0.5,0.8,0.9,1.6,1.3,2.4L25.6,50c-0.1-0.3-0.2-0.5-0.3-0.7c-0.1-0.3-0.3-0.5-0.4-0.7c-1.4,0.2-2.8,0.3-4.3,0.5l-4.7,0.4l-0.3-1c0.1,0,0.1,0,0.1-0.1c0-0.1,0.1-0.1,0.1-0.1c0.9-0.7,2.1-2.5,3.4-5.4h-4.6v-1L26.8,41.9L26.8,41.9z M25.6,38.1V39h-9.7v-0.9H25.6z M33.1,37.2h1.1v4.2h5.1v1h-5.1v5.8h6.2v1H28.2v-1h5L33.1,37.2L33.1,37.2z M47.9,41.9V41h-4v-2.8h4v-0.9h1v0.9h4V41h-4v0.9h5.6v0.9H42.4v-0.9C42.4,41.9,47.9,41.9,47.9,41.9z M49.1,45.2c-0.2,1.7-0.6,2.8-1.3,3.3c-0.7,0.6-2.4,1.1-5,1.3l-0.4-0.9c2.4-0.1,3.7-0.5,4.5-1.1c0.8-0.7,1.2-1.8,1.2-2.8L49.1,45.2zM52.8,47.5h-0.9v-3h-6.8v3.1h-0.9v-4.1h8.6L52.8,47.5z M47.9,39h-3v1.1h3V39z M49.4,47.4c0.9,0.3,1.8,0.5,2.7,0.8c0.8,0.3,1.6,0.6,2.4,0.9l-0.5,0.9c-1.6-0.8-3.3-1.4-5-1.9L49.4,47.4z M52,39h-3.1v1.1H52V39z M58.5,40.8c-0.1,0.7-0.2,1.4-0.4,2.1l-0.6,2l-0.9-0.3c0.3-0.6,0.5-1.3,0.6-2c0.2-0.7,0.3-1.4,0.4-2.1L58.5,40.8zM60.3,37.4v4.1c-0.1,3.7-0.9,6.5-2.6,8.3L57,49.2c1.6-1.6,2.4-4.1,2.4-7.6v-4.1L60.3,37.4z M61.3,40.9c0.3,0.5,0.5,1.1,0.8,1.7c0.3,0.6,0.5,1.1,0.7,1.8L62,44.7c-0.2-0.6-0.5-1.3-0.7-1.9c-0.2-0.6-0.5-1.1-0.8-1.6L61.3,40.9z M64.3,37.7v11.7h-0.9V37.7H64.3zM65.1,40.8l0.8,1.6c0.3,0.6,0.5,1.1,0.7,1.8l-0.8,0.4c-0.2-0.6-0.5-1.2-0.7-1.8c-0.2-0.6-0.5-1.1-0.8-1.6L65.1,40.8z M68,37.3v12.5h-0.9V37.3H68z M78.9,49.6h-2.4c-0.4,0-0.8-0.1-1.2-0.1c-0.3,0-0.6-0.1-0.9-0.2c-0.6-0.2-1.1-0.5-1.5-1c-0.2-0.2-0.3-0.3-0.5-0.3c-0.3,0-0.9,0.7-1.7,2l-0.7-0.7c0.5-0.9,1.2-1.6,2-2.2V43h-2v-1H73v5.1l0.1,0.1c0.1,0.1,0.1,0.1,0.1,0.1c0.3,0.4,0.7,0.7,1.1,0.9c0.6,0.2,1.2,0.4,1.8,0.3h4.5c0.7,0,1.2-0.1,1.6-0.1l-0.3,1h-3L78.9,49.6z M70.8,37.4c0.5,0.4,0.9,0.7,1.3,1.1c0.4,0.3,0.7,0.7,1.1,1.1l-0.7,0.7c-0.7-0.8-1.5-1.5-2.4-2.2L70.8,37.4z M82.1,41.2v0.9h-4.3c-0.4,1-0.7,1.9-1.1,2.6c-0.3,0.6-0.6,1.2-1,1.7c0.8-0.1,1.7-0.2,2.5-0.3c0.7-0.1,1.4-0.3,2-0.4c-0.2-0.4-0.3-0.8-0.5-1.1c-0.2-0.4-0.4-0.7-0.6-1.1l0.8-0.3c0.8,1.4,1.5,2.8,2,4.3L81,47.8c-0.1-0.2-0.1-0.4-0.2-0.7c-0.1-0.2-0.2-0.4-0.3-0.6c-0.9,0.2-1.8,0.4-2.7,0.5c-1,0.1-2.1,0.3-3.3,0.4l-0.3-0.9c0.6-0.2,1.4-1.7,2.5-4.3h-2.8v-0.9L82.1,41.2L82.1,41.2z M81.1,38v0.9h-6.3V38H81.1z M84.3,38.2h3.1v-0.9h0.9v0.9h3.7v-0.9h1v0.9h3.1v0.9H93v0.8h-1v-0.8h-3.7v0.8h-0.9v-0.8h-3.1V38.2z M95.7,40.5V43h-1v-1.8h-9.1V43h-0.9v-2.7L95.7,40.5L95.7,40.5z M94.9,46v3.8h-1v-0.5h-7.4v0.5h-0.9V46H94.9z M86.5,48.4h7.4v-1.7h-7.4V48.4z M86.8,42.3h6.8V45h-6.8V42.3z M92.7,44.3V43h-5v1.3H92.7z M1,3.9a2.7,2.7 0 1,0 5.4,0a2.7,2.7 0 1,0 -5.4,0z M1.4,9.7h4.5v22.2H1.4V9.7z M10,16.7C10,7.1,15.4,1,23.9,1C30.8,1,36,5.2,36.8,11.6H32c-0.8-3.8-4.2-6.6-8.3-6.4c-5.5,0-9.1,4.5-9.1,11.6s3.5,11.6,9.1,11.6c4.2,0,7.3-2.2,8.3-5.8h4.7c-1.2,6.3-6,10-12.9,10C15.4,32.4,10,26.4,10,16.7z M40.8,1.5h4.6v30.4h-4.5L40.8,1.5z M49,20.8c0-7,4.1-11.4,10.5-11.4S70,13.8,70,20.8s-4,11.4-10.5,11.4C53.1,32.2,49,27.8,49,20.8z M65.4,20.8c0-4.7-2.2-7.6-5.9-7.6s-5.9,2.8-5.9,7.6s2.2,7.6,5.9,7.6S65.4,25.7,65.4,20.8z M92.5,31.9h-4.3v-3.7h-0.1c-1.3,2.7-3.5,4-6.9,4c-4.8,0-7.8-3.1-7.8-8.3V9.7H78v13.4c0,3.3,1.6,5.2,4.7,5.2c3.3,0,5.3-2.3,5.3-5.8V9.7h4.5V31.9L92.5,31.9z M96.1,20.8c0-6.9,3.7-11.3,9.2-11.3c3.1,0,5.7,1.5,7,3.9h0.1v-12h4.5v30.4h-4.4v-3.8h-0.1c-1.3,2.6-3.8,4-7.1,4C99.8,32.1,96.1,27.6,96.1,20.8z M100.8,20.8c0,4.5,2.4,7.5,5.9,7.5c3.5,0,5.8-2.9,5.8-7.5s-2.4-7.4-5.8-7.4S100.8,16.3,100.8,20.8L100.8,20.8z",layoutBox:{viewBox:"0 0 118 50",width:118,height:50,translateX:0,translateY:0,baseline:31.5,capline:0},glyphBox:{viewBox:"0 0 118 50",width:118,height:50,translateX:0,translateY:0,baseline:31.5,capline:0}}},id=Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isCNAcct",truevalue:"cn",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"iCloudButtonView"},mixinDependencies:[td],action:"showAppSwitcher",additionalClassNames:F.b(["cosk-icloud-logo","icloud-button"]),symbolMetadata:V.b({readOnly:!0,dependencies:["isCNAcct"],get:Object.assign((function(){var e=this.isCNAcct?"icloud.cn.logo":"icloud.logo";return nd[e]}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?"icloud.cn.logo":"icloud.logo";return nd[r]}})}),metadata:V.b({readOnly:!0,dependencies:["symbolMetadata","layoutMode"],get:Object.assign((function(){return this.symbolMetadata[this.layoutMode]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[i.internalGet(this,t[1+n])]}})}),isCNAcct:V.b({readOnly:!0,type:Boolean,dependencies:[ve.a.bindingFor("currentUser.isChineseAccount")],get:Object.assign((function(){return ve.a.currentUser.isChineseAccount}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})})}),rd=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"VIEWOUTLET",tagname:"view",name:"iCloudButton"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"appName",attributes:{signal:"appNameDidRender"}}],classes:["cosk-app-display-name",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_canSafelyKernAppName",truevalue:"kern-safe",attributes:{}}],name:"appNameButtonView",attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appSwitcherTooltip",attributes:{},attribute:"title"}}},{type:"VIEWOUTLET",tagname:"view",name:"chevronView"}],classes:["cosk-app-switcher-trigger"]},className:"cosk-ui-title-bar-app-switcher-trigger-view",__QUALIFIED_CLASS_NAME__:"AppSwitcherButton"},additionalClassNames:F.b(["large-display-text"]),iCloudButton:k.c(id),chevronView:V.b({dependencies:["limitedExperienceMode"],readOnly:!0,get:Object.assign((function(){if(!this.limitedExperienceMode)return zu.create()}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return zu.create()}})}),limitedExperienceMode:V.b({readOnly:!0,get:function(){return ve.a.get("cloudOSService").environment.limitedExperienceMode}}),appName:V.b(),appSwitcherTooltip:V.b({get:function(){return s.d("Toolbar.AppSwitcher.Tooltip")}}),action:"showAppSwitcher",_canSafelyKernAppName:V.b({readOnly:!0,dependencies:["appName",s.a.sharedInstance.bindingFor("locale")],get:Object.assign((function(){return ad(this.appName,s.a.sharedInstance.locale)}),{__CW__getter:function(e,t,n,i){return ad(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),showAppSwitcher:function(e){if(!this.limitedExperienceMode){var t=this.getPath("parent.rect"),n=ve.a.get("cloudOSService"),i=Ko.a.create({top:t.bottom,left:t.left+t.width/2,width:1,height:1});n.showAppSwitcher(i)}},_alignmentObserver:B.h("isAttached",(function(){this.isAttached&&function(e){var t=e.iCloudButton.element,n=t.querySelector("svg"),i=e.appNameButtonView,r=e.getPath("chevronView.element");try{var a=$u.a(e.element).height,s=e.iCloudButton.metadata,o=s.baseline-s.capline,l=$u.a(t).height,c=$u.a(n).height,d=l/s.height*o,h=(l-c)/2+d,p=a/2+d/2,f=Math.round(p-h);if(yl.c(t,{"margin-top":f,"align-self":"flex-start"}),r){var g=p-Ju(Ku.ALPHABETIC,i).xHeight;g++,yl.c(r,{"margin-top":g,"align-self":"flex-start"})}}catch(m){u.b.debug("iCloudLogo _alignment error",m),yl.c(e.element,{"align-items":"center"})}}(this)}))}),ad=function(){var e=Vu.a("ca cs da de en es fi fr hr hu id is it ms nb nl nn pl pt ro sk sv tr".split(" ")),t=/^[a-zA-Z0-9\s-\u2013\u2014:;.,?!\xbf/\\\u2026\u203d\u201c\u201d\u2018\u2019'"()[\]\xab\xbb]*$/;return function(n,i){if(te.a.sharedInstance.isSafari)return!1;if("string"!==typeof n)return!1;if("string"===typeof i){var r=(i=i.toLowerCase()).indexOf("-"),a=-1===r?i:i.substring(0,r);if(e[a])return!0}return t.test(n)}}(),sd=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"appSwitcherTriggerView"}],classes:["cosk-app-name",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isCloudOS2",truevalue:"cloud-os2",attributes:{}}]},className:"cosk-ui-title-bar-app-name-view",__QUALIFIED_CLASS_NAME__:"AppNameView"},appName:V.b(),appSwitcherTriggerView:V.b({defaultValue:function(){return rd.create({appName:this.bindingFor("appName")})}}),isCloudOS2:V.b({readOnly:!0,get:function(){return ve.a.get("cloudOSService").environment.isCloudOS2}}),preferredWidth:V.b({dependencies:["appSwitcherTriggerView.isAttached","appSwitcherTriggerView.appNameDidRender"],readOnly:!0,get:Object.assign((function(){if(this.getPath("appSwitcherTriggerView.isAttached")){var e,t;t=(e=this.get("style")).getInline("width"),e.set("width","auto");var n=this.get("element").offsetWidth;return e.set("width",t),n}}),{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])){var r,a;a=(r=this.get("style")).getInline("width"),r.set("width","auto");var s=this.get("element").offsetWidth;return r.set("width",a),s}}})})}),od=Ho.a.extend({action:null,callAction:function(){this.sendEvent("accountMenuItemWasSelected",this.action)},staticMembers:{className:"cosk-ui-title-bar-account-menu-item-view",__QUALIFIED_CLASS_NAME__:"AccountMenuItemView"}}),ld=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"accountMenuItemViews"}],classes:["cosk-account-menu"]},className:"cosk-ui-title-bar-account-menu-view",__QUALIFIED_CLASS_NAME__:"AccountMenu"},desiredSize:V.b({strong:!0,defaultValue:k.c(_l.a,{width:100,height:100})}),minimumSize:V.b({strong:!0,binding:Oi.c("desiredSize")}),accountMenuItemViews:k.c(Wo.b),accountMenuItems:V.b(k.c(Array)),_accountMenuItemsObserver:B.h("accountMenuItems",(function(e){var t=this.get("accountMenuItemViews");if(t.splice(0,t.get("length")),e){var n=e.length,i=0;for(i=0;i<n;i++)t.push(od.create(e[i]))}})),_remeasureIfNeeded:B.h("isAttached","_accountMenuItemsObserver",(function(){if(this.get("isAttached")){this.get("style").set("width","auto").set("height","auto");var e=this.get("element"),t=this.get("desiredSize");t.set("width",e.offsetWidth),t.set("height",e.offsetHeight),this.get("style").set("width","").set("height","")}}))}),cd=fi.a.extend({viewClass:ld,accountMenuItems:V.b({dependencies:[ve.a.bindingFor("environment.accountMenu")],readOnly:!0,get:Object.assign((function(){var e=ve.a.environment.accountMenu;return e&&e.items?e.items:[]}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.items?r.items:[]}})}),createView:function(){return this.get("viewClass").create({accountMenuItems:this.bindingFor("accountMenuItems")})},accountMenuItemWasSelected:function(e){return ve.a.get("cloudOSService").invokeMethodOnCloudOS(e),!1},showAccountSettings:function(){var e=ve.a.get("cloudOSService");e.showAccountSettings.call(e)},signOut:function(){var e=ve.a.get("cloudOSService");e.performLogout.call(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AccountMenuViewController"}}),ud=El.extend({allowedLayouts:[hl],viewClass:Sl.extend({additionalClassNames:F.b(["cosk-account-menu-popover"])}),arrowLength:26,desiredSize:Oi.c("contentController.view.desiredSize"),minimumSize:Oi.c("contentController.view.minimumSize"),createView:function(){var e=this,t=arguments,n=e.__s._$9l$createView.apply(e,t);return dd.create({popoverView:n})},accountMenuItemWasSelected:function(e){return this.hide(),!0},updateLayout:function(){this.propertyChanged("anchor")},contentController:V.b({defaultValue:function(){return cd.create()}}),modalTap:function(){this.toggle()},__superMap:{_$9l$createView:"createView"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AccountMenuPopoverViewController"}}),dd=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["cosk-account-menu-modal"]},className:"cosk-ui-title-bar-view-controllers-modal-view",__QUALIFIED_CLASS_NAME__:"ModalView"},layout:V.b(),anchorLayout:V.b(),arrowLength:V.b(),arrowWidth:V.b(),arrowAlignment:V.b(),horizontalAlignment:V.b(),verticalAlignment:V.b(),popoverView:V.b({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",arrowAlignment:"(owner).arrowAlignment",horizontalAlignment:"(owner).horizontalAlignment",verticalAlignment:"(owner).verticalAlignment"}}),contentView:V.b(Oi.c("popoverView.contentView")),pointerDown:function(e){return this.sendEvent("modalTap"),!0}}),hd=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayName",attributes:{}}],classes:["cosk-display-name"]},{type:"VIEWOUTLET",tagname:"view",name:"chevronView"}],classes:["cosk-user-display-name-wrapper"]},className:"cosk-ui-title-bar-display-name-view",__QUALIFIED_CLASS_NAME__:"AccountNameButton"},additionalClassNames:F.b(["large-display-text"]),chevronView:V.b({readOnly:!0,get:function(){return zu.create()}}),displayName:V.b(),action:"toggleAccountMenu",accountMenuPopoverController:V.b({defaultValue:function(){return ud.create().retain()}}),tooltip:s.d("Toolbar.Button.Action.UserAction"),dispose:function(){var e=this,t=arguments;this.get("accountMenuPopoverController").release(),e.__s._$K3$dispose.apply(e,t)},updateLayout:function(){this.get("accountMenuPopoverController").updateLayout()},toggleAccountMenu:function(){var e=ve.a.get("cloudOSService");if(e.environment.isCloudOS2){var t=this.getPath("rect"),n={x:t.x,y:t.y,height:t.height-3,width:t.width};e.showAccountMenu(n)}else this.get("accountMenuPopoverController").toggle(this)},writeNameToDOMForMeasurement:function(e){this.get("element").querySelector(".cosk-display-name").childNodes[0].data=e},__superMap:{_$K3$dispose:"dispose"}}),pd=n(1251),fd=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cosk-help-icon"],name:"iconEl"},className:"cosk-ui-title-bar-help-view",__QUALIFIED_CLASS_NAME__:"HelpButton"},init:function(){var e=this,t=arguments;e.__s._$6J$init.apply(e,t),this.iconEl.innerHTML=pd},action:"showHelp",tooltip:s.d("Button.Help.Tooltip"),owner:V.b(),showHelp:function(e){ve.a.get("cloudOSService").showHelp(this.get("helpAnchor"))},__superMap:{_$6J$init:"init"}}),gd=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"displayNameView"},{type:"ELEMENT",tagname:"span",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowHelpView",truevalue:"cosk-user-splitter",falsevalue:"cosk-user-margin",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"helpView"}],classes:["cosk-user-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isCloudOS2",truevalue:"cloud-os2",attributes:{}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"widthStyle",attributes:{},unit:null,property:"width"}}},className:"cosk-ui-title-bar-user-view",__QUALIFIED_CLASS_NAME__:"AccountView"},width:V.b("auto"),widthStyle:V.b({dependencies:["width"],readOnly:!0,get:Object.assign((function(){var e=this.width;return"auto"===e?e:e+"px"}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return"auto"===r?r:r+"px"}})}),helpAnchor:V.b(),isCloudOS2:V.b({readOnly:!0,get:function(){return ve.a.get("cloudOSService").environment.isCloudOS2}}),shouldShowHelpView:V.b({readOnly:!0,get:function(){return!ve.a.get("cloudOSService").environment.isCloudOS2}}),helpView:V.b({readOnly:!0,dependencies:["shouldShowHelpView"],get:Object.assign((function(){return this.shouldShowHelpView?this._helpView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this._helpView:null}})}),_helpView:k.c(fd.extend({helpAnchor:V.b(Oi.c("owner.helpAnchor"))})),displayName:V.b({cacheable:!0,dependencies:["widthOptions","width"],readOnly:!0,get:Object.assign((function(){var e=this.widthOptions;if(this.width,!e)return"";var t,n=e.longName,i=e.shortName;return t=xe(n.value)?n.value:i.value,this.set("_displayName",t),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(i.internalGet(this,t[1+n]),!r)return"";var a,s=r.longName,o=r.shortName;return a=xe(s.value)?s.value:o.value,this.set("_displayName",a),a}})}),displayNameView:V.b({defaultValue:function(){return hd.create({displayName:this.bindingFor("displayName")})}}),widthOptions:V.b({cacheable:!0,dependencies:["isAttached","displayNameView",ve.a.bindingFor("currentUser.firstName"),ve.a.bindingFor("currentUser.lastName")],readOnly:!0,get:Object.assign((function(){var e=this.isAttached,t=this.displayNameView,n=ve.a.currentUser.firstName,i=ve.a.currentUser.lastName;if(!e)return null;var r,a,s,o,l,c=Ne({givenName:n}),u=Ne({givenName:n,familyName:i}),d=this.get("element"),h=d.style;return r=d.style.width,a=this.get("_displayName")||u,s=h.position,h.width="auto",h.position="absolute",t.writeNameToDOMForMeasurement(c),o=d.offsetWidth,t.writeNameToDOMForMeasurement(u),l=d.offsetWidth,h.width=r,h.position=s,t.writeNameToDOMForMeasurement(a),{shortName:{width:o,value:c},longName:{width:l,value:u}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]);if(!r)return null;var l,c,u,d,h,p=Ne({givenName:s}),f=Ne({givenName:s,familyName:o}),g=this.get("element"),m=g.style;return l=g.style.width,c=this.get("_displayName")||f,u=m.position,m.width="auto",m.position="absolute",a.writeNameToDOMForMeasurement(p),d=g.offsetWidth,a.writeNameToDOMForMeasurement(f),h=g.offsetWidth,m.width=l,m.position=u,a.writeNameToDOMForMeasurement(c),{shortName:{width:d,value:p},longName:{width:h,value:f}}}})}),_displayName:null,updateLayout:function(){this.get("displayNameView").updateLayout()}}),md=Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"input",styles:{opacity:"0",width:"1px",height:"1px"},name:"photoUploadButton",attributes:{type:"file",id:"upload",accept:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"acceptType",attributes:{},attribute:"accept"},multiple:"true"}}],styles:{overflow:"hidden"}}},className:"photos-upload-button",__QUALIFIED_CLASS_NAME__:"UploadButton"},acceptType:"image/jpeg",uploadButtonEvent:"uploadButtonClicked",isDisabled:ve.a.bindingFor("environment.isUserOverQuota"),alertViewController:H.d({defaultValue:wn.b}),init:function(){var e=this,t=this,n=arguments;t.__s._$ND$init.apply(t,n);var i=this.photoUploadButton;Ze.a(i,"change",(function(t){var n=t.target.files;e.sendEvent(e.uploadButtonEvent,n),i.value=""}))},wasActivated:function(){this.photoUploadButton.click()},__superMap:{_$ND$init:"init"}}),_d={configuration:V.b()},vd={mixinDependencies:[_d],configuration:V.b({type:iu}),isDisabled:V.b(Oi.c("configuration.isDisabled")),action:V.b(Oi.c("configuration.action")),tooltip:V.b(Oi.c("configuration.tooltip"))},bd={mixinDependencies:[Tn.a],minimumWidth:V.b(0),preferredWidth:_u.a.define(),width:V.b("auto"),displayWidth:V.b({readOnly:!0,dependencies:["width"],get:Object.assign((function(){var e=this.width;return"auto"===e?e:e+"px"}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return"auto"===r?r:r+"px"}})})},yd={marginLeft:6,marginRight:6},wd=Ho.a.extend(vd,yd,{staticMembers:{className:"p2-toolbar-button",__QUALIFIED_CLASS_NAME__:"ToolbarButton"}}),Id=wd.extend(_d).extend({configuration:V.b({type:ru}),leftMargin:0,widthPadding:0,minimumWidth:28,maxSizeMode:2,action:"navigateUp",parentRouteTitle:V.b(Oi.c("configuration.parentRouteTitle")),tooltip:V.b({readOnly:!0,dependencies:["parentRouteTitle"],get:Object.assign((function(){return this.parentRouteTitle||""}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||""}})}),valueDidChange:B.i(),_signalValueDidChange:B.h("tooltip",(function(){this.valueDidChange()})),didRender:B.i(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarBackButton"}}),Sd={mixinDependencies:[Fu.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isLongPressActionAborted",truevalue:"tocw-long-press-aborted",attributes:{}}]}}},longPressDuration:V.b(600),longPressAbortionMovementDistance:V.b(2),isLongPressActionScheduled:V.b({readOnly:!0,dependencies:["_longPressTimeout"],get:Object.assign((function(){return Boolean(this._longPressTimeout)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),isLongPressActionAborted:V.b({readOnly:!0,dependencies:["isLongPressActionScheduled","_capturedPointerId"],get:Object.assign((function(){return!isNaN(this._capturedPointerId)&&!this.isLongPressActionScheduled}),{__CW__getter:function(e,t,n,i){return!isNaN(i.internalGet(this,t[1+n]))&&!i.internalGet(this,t[0+n])}})}),pointerDown:function(e){var t=this,n=arguments;this._unscheduleLongPressAction();var i=e.clientX,r=e.clientY;return i>=0&&r>=0&&this._scheduleLongPressAction(i,r,e),t.__s._$cu$pointerDown.apply(t,n)},pointerMove:function(e){var t=this,n=arguments,i=e.clientX,r=e.clientY,a=this.longPressAbortionMovementDistance;return i>=0&&r>=0&&Math.abs(i-this._longPressInitialX)<=a&&Math.abs(r-this._longPressInitialY)<=a||this._unscheduleLongPressAction(),t.__s._$mV$pointerMove.apply(t,n)},pointerUp:function(){var e=this,t=arguments;return this._unscheduleLongPressAction(),e.__s._$oU$pointerUp.apply(e,t)},cancelPointerInteraction:function(){var e=this,t=arguments;return this._unscheduleLongPressAction(),e.__s._$zz$cancelPointerInteraction.apply(e,t)},dispose:function(){var e=this,t=arguments;return this._unscheduleLongPressAction(),e.__s._$10w$dispose.apply(e,t)},_capturedPointerId:V.b(),_longPressInitialX:void 0,_longPressInitialY:void 0,_longPressPointerEvent:void 0,_longPressTimeout:V.b(),_unscheduleLongPressAction:function(){this._longPressTimeout&&clearTimeout(this._longPressTimeout),this._longPressInitialX=this._longPressInitialY=this._longPressPointerEvent=this._longPressTimeout=void 0},_scheduleLongPressAction:function(e,t,n){this._longPressInitialX=e,this._longPressInitialY=t,this._longPressPointerEvent=n,this._longPressTimeout=X.a(this._fireLongPressAction,this.longPressDuration)},_fireLongPressAction:Object(Bu.b)((function(){var e=this._longPressPointerEvent;this.cancelPointerInteraction(),this.sendEvent("pointerLongPress",e)})),__superMap:{_$cu$pointerDown:"pointerDown",_$mV$pointerMove:"pointerMove",_$oU$pointerUp:"pointerUp",_$zz$cancelPointerInteraction:"cancelPointerInteraction",_$10w$dispose:"dispose"}},Cd={count:0};function Ed(e){if(void 0===ed)try{ed=G.a.application.regionService.getNumberFormatter().format}catch(n){var t=void 0!==window.Intl&&window.Intl!==window.IntlPolyfill;ed=t?new Intl.NumberFormat(window.navigator.language).format:String}return ed(e)}var Ad=new Map,Od={};function Td(e,t){var n=Ad.get(t);if(void 0!==n)return n(e);var i,r=JSON.stringify(t),a=Od[r];if(void 0!==a)return a(e);try{i=G.a.application.regionService.getDateTimeFormatter(t).format}catch(s){i=void 0!==window.Intl&&window.Intl!==window.IntlPolyfill?new Intl.DateTimeFormat(window.navigator.language,t).format:Date}return Ad.set(t,i),Od[r]=i,i(e)}function Md(e,t){var n=g.a(t)?0|t.count:t,i=n===t?Cd:t,r=e[Math.min(n,e.length-1)];return i.count=Ed(n),s.d(r,i)}var Dd={areActionsAllowed:function(e){return Boolean(e&&e.length&&!Dd.isSelectionOverLimit(e))},isSelectionOverLimit:function(e){return Boolean(e&&e.length>$l.selectionLimit)},showSelectionLimitAlert:function(e){var t=$l.selectionLimit,n="Selection.Limit.Alert.Description."+e.value;s.a.sharedInstance.hasValue(n)||(n="Selection.Limit.Alert.Description.Generic"),wn.b.show({iconNames:["photos-icon","error"],message:s.d("Selection.Limit.Alert.Message"),description:s.d(n,{limit:Ed(t)}),primaryButton:{title:s.d("Alert.OK.Button.Title")}})}},Pd=n(321),Ld=P.a.extend(Tn.a,{staticMembers:{dequeuedErrorMessage:"Action dequeued from `%{processorClassName}` queue",canceledErrorMessage:"Action canceled from `%{processorClassName}` while active",__QUALIFIED_CLASS_NAME__:"BaseProcessor"},processAction:Mn.a.define(),maxConcurrentActions:Object(H.d)({defaultValue:5,set:function(e){var t=this._maxConcurrentActions;return void 0!==t&&e>t&&(this.needsProcessing=!0),e}}),enqueue:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=this.preprocessActionData?this.preprocessActionData.apply(this,n):n;var r=Z.a.create();return this.enqueueActionData(e,this._queue),this._actionDataToPromiseMap.set(e,r),this._promiseToActionDataMap.set(r,e),this.needsProcessing=!0,r},preprocessActionData:null,enqueueActionData:function(e,t){t.push(e)},dequeue:function(e,t){var n=this._queue,i=this._promiseToActionDataMap.get(e);return-1!==n.indexOf(i)&&(t=void 0!==t?t:this.payloadForDequeue(i),e.reject(t),this._clearQueuedAction(i,e),!0)},cancel:function(e,t){if(this.dequeue(e,t))return!0;var n=this._promiseToActionDataMap.get(e);return this._active.indexOf(n)>-1&&(t=void 0!==t?t:this.payloadForCancel(n),e.reject(t),this._clearActiveAction(n,e),this.needsProcessing=!0,!0)},payloadForDequeue:function(e){return new _.a(this.constructor.dequeuedErrorMessage,{processorClassName:Object(q.a)(this),processor:this,action:e})},payloadForCancel:function(e){return new _.a(this.constructor.canceledErrorMessage,{processorClassName:Object(q.a)(this),processor:this,action:e})},clearQueue:function(e){for(var t=this._queue,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForDequeue(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},abort:function(e){this.clearQueue(e);for(var t=this._active,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForCancel(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},needsProcessing:Object(H.d)({defaultValue:!1,set:function(e){return e?this._processingTimer.start():this._processingTimer.stop(),e}}),process:function(e,t){this.willProcess(e,t);for(var n=this._shouldSpreadActionData,i=0;this.shouldContinueProcessing(e,i,t);){var r=e[i];if(this.shouldProcessAction(r,e,t)){e.splice(i,1),t.push(r);var a;a=n&&r?this.processAction.apply(this,r):this.processAction(r),this.completeAction(r,a),this.didProcessAction(r,e,t)}else i+=1}this.didProcess(e,t)},willProcess:U.a,shouldContinueProcessing:function(e,t,n){return e.length>t&&n.length<this.maxConcurrentActions},shouldProcessAction:function(e,t,n){return!0},completeAction:function(e,t){"object"===typeof t&&"function"===typeof t.then?t.then(this._resolveAction.bind(this,e),this._rejectAction.bind(this,e)):Object(X.a)(this._resolveAction.bind(this,e,t),0)},didProcessAction:U.a,didProcess:U.a,init:function(){var e=this,t=arguments;e.__s._$7_M$init.apply(e,t),null===this._shouldSpreadActionData&&(this._shouldSpreadActionData=!this.preprocessActionData)},_shouldSpreadActionData:null,_queue:Object(k.c)(Array),_active:Object(k.c)(Array),_promiseToActionDataMap:Object(k.c)(Map),_actionDataToPromiseMap:Object(k.c)(Map),_resolveAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.resolve(t)},_rejectAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.reject(t)},_clearQueuedAction:function(e,t){var n=this._queue,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_clearActiveAction:function(e,t){var n=this._active,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_processingTimer:Object(k.c)(Pd.a,{delay:0,timesToFire:1,action:"_reprocess"}),_reprocess:function(){this.process(this._queue,this._active),this.needsProcessing=!1},__superMap:{_$7_M$init:"init"}}),Rd=Object(we.b)("IFrameDownloadCompletionStatus",(function(e){e("FAILED"),e("SURVIVED")})),xd=Ld.extend({init:function(){var e=this,t=arguments;this._availableIFramePool=[],this._materializedIFrames=[],e.__s._$bd$init.apply(e,t),this.maxConcurrentActions=this.maximumConcurrentIFrames},maximumConcurrentIFrames:Object(H.d)({defaultValue:10,set:function(e){return this.maxConcurrentActions=e,e}}),msToWaitForDownloadToStart:5e3,downloadFromURL:function(e){return this.enqueue(e)},downloadFromURLs:function(e){var t=e.map(this.downloadFromURL,this);return Z.a.all(t)},cleanup:function(){this._materializedIFrames.forEach((function(e){e.parentElement.removeChild(e)}))},_availableIFramePool:Object(H.d)({type:Array,readOnly:!0}),_materializedIFrames:Object(H.d)({type:Array,readOnly:!0}),_materializeIFrameForPool:function(){var e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),this._materializedIFrames.push(e),e},_acquireIFrame:function(){var e=this._availableIFramePool;return 0===e.length?this._materializeIFrameForPool():e.pop()},_returnToIFramePool:function(e){this._availableIFramePool.push(e)},processAction:function(e){var t=this._acquireIFrame();return function(e,t,n){var i=Z.a.create();Object(X.a)((function(){return i.resolve(Rd.SURVIVED)}),n);var r=Z.a.create(),a=function(){return r.resolve(Rd.FAILED)};return Object(Ze.a)(e,"load",a),e.id=t,e.src=t,Z.a.race([i,r]).finally((function(){Object(Xe.a)(e,"load",a)}))}(t,e,this.msToWaitForDownloadToStart).finally(this._returnToIFramePool.bind(this,t))},__superMap:{_$bd$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IFrameDownloader"}}),Nd=n(762);function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Vd(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function kd(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Vd(a,i,r,s,o,"next",e)}function o(e){Vd(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Bd=function(){function e(e,t){this.collection=e,this.container=t}var t=e.prototype;return t.loadAllRecordsInThisCollection=function(){var e=kd(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.collection.length)<=0)){e.next=3;break}return e.abrupt("return");case 3:for(n=[],i=0;i<t;i++)n.push(i);return e.next=7,this.getIncludeExcludeRecords(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getIncludeExcludeRecords=function(){var e=kd(regeneratorRuntime.mark((function e(t){var n,i,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getIncludeExcludeIndices(t),i=n.includeIndices,r=n.excludeIndices,a=i||r,e.next=4,this._loadIndicesAndGetRecordNames(a);case 4:return s=e.sent,e.abrupt("return",i?{includeRecords:s}:{excludeRecords:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getIncludeExcludeIndices=function(e){return{includeIndices:e}},t._loadIndicesAndGetRecordNames=function(){var e=kd(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.collection,i=this._getRangesToLoad(t),e.next=4,Z.a.all(i.map((function(e){return n.ensureRange(e[0],e[1])})));case 4:return e.abrupt("return",this._getAssetRecordNamesFromMedias(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._getRangesToLoad=function(e){for(var t,n=[],i=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Fd(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fd(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(t=i()).done;){var r=t.value;void 0===this.collection.encodedObjectAt(r)&&n.push(r)}return Nd.a(n)},t._getAssetRecordNamesFromMedias=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=this.collection.encodedObjectAt(r),s="number"===typeof a?jo.a.getPrimaryKeyForStoreId(a):a,o=s&&Kt.Record.getRecordNameFromPrimaryKey(s);o||_.b("No `recordName` found."),t.push(o)}return t},e}(),jd=n(118);function Ud(){var e={iconNames:["photos-icon"],message:s.d("Download.Error.Alert.Message"),description:s.d("Download.Error.Alert.Description"),primaryButton:{title:s.d("Download.Error.Alert.Button"),action:"hide"}};wn.b.show(e)}var Gd=n(347),Hd=function e(t,n){if(t){if(!t.getFullYear)throw new TypeError("Object passed to date formatter was not a date!");isNaN(t.getTime())&&Object(_.b)("Invalid date passed to date formatter")}else Object(_.b)("No date passed to date formatter.");n||Object(_.b)("No formatting string passed to date formatter. Date: "+t);for(var i=n.length,r=n[0],a=1;a<i;a++)n[a]!==r&&Object(_.b)("Invalid format string for a date; all characters mustbe the same: "+n+"; date: "+t);var s=e[r];return s||Object(_.b)("Formatter `"+r+"` not supported for date: "+t),s(t,i)};Hd.G=function(e,t){var n="Date.Era.";return n+=e.getFullYear()>=0?"AD":"BC",t<=3?Object(s.d)(n+".Abbreviated"):4===t?Object(s.d)(n+".Full"):5===t?Object(s.d)(n+".Letter"):void Object(_.b)("Invalid era format: Expected at most 5 digits; found "+t+".")},Hd.y=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=Math.abs(n).toString();i.length<t;)i="0"+i;return i.substr(i.length-t)},Hd.Y=Hd.y,Hd.u=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=e.getFullYear()<0,r=Math.abs(n).toString();r.length<t;)r="0"+r;return(i?"-":"")+r.substr(r.length-t)},Hd.Q=function(e,t,n){var i=e.getMonth(),r=Math.floor(i/3)+1,a="Date.Quarter."+(n?"StandAlone.":"")+"Q"+r;return 1===t?""+r:2===t?"0"+r:3===t?Object(s.d)(a+".Abbreviated"):4===t?Object(s.d)(a+".Full"):void Object(_.b)("Unrecognized number of characters for quarter: "+t)},Hd.q=function(e,t){return Hd.Q(e,t,!0)},Hd.ENGLISH_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],Hd.M=function(e,t,n){var i=e.getMonth(),r=""+(i+1),a="Date.Month."+(n||"")+Hd.ENGLISH_MONTH_NAMES[i];return 1===t?r:2===t?(r.length<2&&(r="0"+r),r):3===t?Object(s.d)(a+".Abbreviated"):4===t?Object(s.d)(a+".Full"):5===t?Object(s.d)(a+".Letter"):void Object(_.b)("The # of Ms or Ls must be 1 to 5. Supplied: "+t)},Hd.L=function(e,t){return Hd.M(e,t,"StandAlone.")},Hd.P=function(e,t){return Hd.M(e,t,"Prepositional.")},Hd.d=function(e,t){var n=""+e.getDate();return t>n.length&&(n="0"+n),n},Hd.D=function(e,t){var n=new Date(e.getFullYear(),0,1).getTime(),i=e.getTime()-n,r=Math.floor(i/864e5)+1;for(r=""+r;r.length<t;)r="0"+r;return r},Hd.ENGLISH_DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Hd.E=function(e,t){return t<3&&(t=3),Hd.e(e,t)},Hd.e=function(e,t,n){var i=e.getDay(),r=""+(i+1),a="Date.Day."+(n?"StandAlone.":"")+Hd.ENGLISH_DAY_NAMES[i];return 1===t?r:2===t?r="0"+r:3===t?Object(s.d)(a+".Abbreviated"):4===t?Object(s.d)(a+".Full"):5===t?Object(s.d)(a+".Letter"):void Object(_.b)("Unrecognized number of `e`s, `c`s, or `E`s in date format string.")},Hd.c=function(e,t){return Hd.e(e,t,!0)},Hd.a=function(e,t){1!==t&&Object(_.b)("`a` can only be included in a date format string once.");var n="Date.Period."+(e.getHours()>11?"PM":"AM");return Object(s.d)(n)},Hd._h=function(e,t,n,i){var r=e.getHours();n||(r%=12),i&&(n?0===r&&(r=24):0===r&&(r=12));var a=""+r;return a.length<t&&(a="0"+a),a},Hd.h=function(e,t){return Hd._h(e,t,!1,1)},Hd.H=function(e,t){return Hd._h(e,t,!0,0)},Hd.K=function(e,t){return Hd._h(e,t,!1,0)},Hd.k=function(e,t){return Hd._h(e,t,!0,1)},Hd.m=function(e,t){for(var n=""+e.getMinutes();n.length<t;)n="0"+n;return n},Hd.s=function(e,t){for(var n=""+e.getSeconds();n.length<t;)n="0"+n;return n},Hd.S=function(e,t){var n=e.getMilliseconds()/1e3,i=Math.pow(10,t);for(n=""+(n=Math.round(n*i));n.length<t;)n="0"+n;return n},Hd.A=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDay()).getTime(),i=e.getTime()-n;for(i=""+i;i.length<t;)i="0"+i;return i};var Wd=255-".zip".length,$d=/[<>:"@|?*+\\/\b\f\n\r\t\v]/g,zd={createDownloadDetailsFromShareTitle:function(e){return Yd(void 0,"title",zd.sanitizeStringForFilename(e))},createDownloadDetailsFromDate:function(e){return Yd("Download.ArchiveName.From.Date","date",ne.a("%{date:MMM} %{date:YYYY}",{date:new Date(e),dateFormatter:Hd}))},createDownloadDetailsFromUserName:function(e){var t=Ne(e);return Yd("Download.ArchiveName.From.Name","name",zd.sanitizeStringForFilename(t))},sanitizeStringForFilename:function(e){return e.replace($d,"")},createDownloadDetailsFromCMMShare:qd,createGenericArchiveDownloadDetails:Qd,createDownloadDetailsForSingleFile:Kd,createDownloadDetailsFromFileNameForSingleFile:function(e,t){return function(e,t,n,i){var r=zd.verifyAndCreateTitle(void 0,"title",n);return{filename:""+r+i,filenameWithoutExtension:""+r+i}}(0,0,zd.sanitizeStringForFilename(e),t)},verifyAndCreateTitle:function(e,t,n){var i,r="string"===typeof e?s.d(e,((i={})[t]=n,i)):n;if(r.length>Wd){var a,o=r.length-Wd,l=n.substring(0,n.length-o);r="string"===typeof e?s.d(e,((a={})[t]=l,a)):l}return r}};function Kd(e){var t=e.master.filenameEnc,n=t.lastIndexOf("."),i=t.substring(0,n),r=t.substring(n,t.length);return zd.createDownloadDetailsFromFileNameForSingleFile(i,r)}function qd(e){var t,n=e.share.title;if("string"===typeof n&&n.length>0)t=zd.createDownloadDetailsFromShareTitle(n);else{var i=Gd.a(e,"share.owner.userIdentity.nameComponents");if("object"!==typeof i||Vn.a(i)){var r=e.startDate,a=e.endDate,s=r||a;t="number"===typeof s?zd.createDownloadDetailsFromDate(s):zd.createGenericArchiveDownloadDetails()}else t=zd.createDownloadDetailsFromUserName(i)}return t}function Qd(){var e=s.d("Download.ArchiveName.Default");return{filename:e+".zip",filenameWithoutExtension:e}}function Yd(e,t,n){var i=zd.verifyAndCreateTitle(e,t,n);return{filename:i+".zip",filenameWithoutExtension:i}}var Zd,Xd=function(){function e(){}var t=e.prototype;return t.createDownloadDetailsForSingleFile=function(e){return Kd(e)},t.createDownloadDetailsForArchive=function(){return Qd()},e}(),Jd=n(249),eh=((Zd={})[Jd.a.ANDROID]=/ Android (\d+)\.(\d+)\.(\d+)/,Zd[Jd.a.CHROMEOS]=/ CrOS x(?:\d+)_(?:\d+) (\d+)\.(\d+)\.(\d+)/,Zd[Jd.a.LINUX]=/ Linux /,Zd);function th(e,t){if("string"===typeof e&&(e=e.split(".").map(parseFloat)),"string"===typeof t&&(t=t.split(".").map(parseFloat)),!e.some(isNaN)&&!t.some(isNaN)){for(var n=Math.max(e.length,t.length),i=0;i<n;i++){var r=e[i]||0,a=t[i]||0;if(r>a)return 1;if(r<a)return-1}return 0}}function nh(){var e=rh.getPlatformVersions();if(!e)return!1;var t=ao.a.sharedInstance.current;if(eh[t])return t===Jd.a.ANDROID&&th(e,"9")>=0;var n=p.a.sharedInstance;return n.isiOS?th(e,"11")>=0:n.isMac?th(e,"10.13")>=0:!!n.isWindows&&th(e,"11")>=0}function ih(e,t){return e!==yn.a.MOUSE&&(te.a.sharedInstance.isSafari?p.a.sharedInstance.isiOS&&p.a.sharedInstance.osMajorVersion<13:t)}var rh={getPlatformVersions:function(){var e=eh[ao.a.sharedInstance.current];if(e){var t=rh.navigatorUserAgent.match(e);return t?[0|Number(t[1]),0|Number(t[2]),0|Number(t[3])]:void 0}var n=p.a.sharedInstance,i=n.osMajorVersion,r=n.osMinorVersion;if(i<=1/0&&r<=1/0)return[i,r]},compareVersions:th,isDeviceH265Compatible:nh,navigatorUserAgent:navigator.userAgent,UA_VERSION_REGEXP_BY_PLATFORM:eh},ah=n(768),sh=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["full-page-spinner-view"],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"opacity",attributes:{},unit:null,property:"opacity"}}}},__QUALIFIED_CLASS_NAME__:"FullPageSpinnerView"},spinnerView:V.b({strong:!0,type:Jc.a,get:function(){return Jc.a.create({size:32,color:"white",isVisible:this.bindingFor("isVisible")})}}),isVisible:V.b(),opacity:V.b()}),oh=fi.a.extend(ie.a,{mixinDependencies:[ah.a,wi.a],viewClass:sh,view:V.b({downstreamBindings:{isVisible:"(owner)._spinnerIsActuallyVisible",opacity:"(owner)._spinnerAnimatedOpacity"}}),fadeIn:function(){this.shouldShowSpinner=!0},fadeOut:function(){this.shouldShowSpinner=!1},shouldShowSpinner:V.b(!1),_spinnerIsActuallyVisible:V.b(!1),_spinnerAnimatedOpacity:wi.b(0),_shouldShowSpinnerObserver:B.h("shouldShowSpinner",(function(e){e?(this._spinnerIsActuallyVisible=!0,this.animate("_spinnerAnimatedOpacity",1,250)):this._spinnerAnimatedOpacity>0?this.animate("_spinnerAnimatedOpacity",0,250):(this._spinnerIsActuallyVisible=!1,this._spinnerAnimatedOpacity=0)})),_spinnerAnimatedOpacityObserver:B.h("_spinnerAnimatedOpacity",(function(e){0===e&&(this._spinnerIsActuallyVisible=!1)})),_visibilityObserver:B.h("_spinnerIsActuallyVisible",(function(e){e?this.show():this.hide()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"FullPageSpinnerViewController"}});function lh(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function ch(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){lh(a,i,r,s,o,"next",e)}function o(e){lh(a,i,r,s,o,"throw",e)}s(void 0)}))}}var uh=P.a.extend(ie.a,B.b,{prepareAndDownload:function(e){var t=this;return ch(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l,c,u,d,h,p,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.collection,r=e.container,a=e.selectedIndicesArray,s=e.primaryInteractionMode,o=e.useNewWindowForRedirects,l=e.downloadDetailsGenerator,c=e.includeExcludeRecordsLoader,u=e.feedbackStatGenerator,d=e.originalsOnly,h=e.showSpinner,p=e.spinnerHideDelay,n.next=3,t.prepareDownloadURL({collection:i,container:r,selectedIndicesArray:a,primaryInteractionMode:s,useNewWindowForRedirects:o,downloadDetailsGenerator:l,includeExcludeRecordsLoader:c,originalsOnly:d,showSpinner:h,spinnerHideDelay:p});case 3:if(!(f=n.sent).hasError){n.next=8;break}Ud(),n.next=10;break;case 8:return n.next=10,t.downloadFromURL({downloadCount:a.length,downloadURL:f.downloadURL,primaryInteractionMode:s,feedbackStatGenerator:u,downloadWindow:f.downloadWindow});case 10:case"end":return n.stop()}}),n)})))()},prepareDownloadURL:function(e){var t=this;return ch(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l,c,d,h,p,f,g,m,_,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.collection,r=e.container,a=e.selectedIndicesArray,s=e.primaryInteractionMode,o=e.downloadDetailsGenerator,l=e.includeExcludeRecordsLoader,c=e.originalsOnly,d=e.showSpinner,h=e.spinnerHideDelay,p=e.preventDownloadWindow,u.b.debug("Preparing download..."),f=o||new Xd,!(g=t._prepareSingleMediaDownloadURLIfPossible(i,a,c,s,f)).hasError){n.next=6;break}return n.abrupt("return",g);case 6:if(m=Boolean(g.downloadURL),!p&&ih(s,m)&&(_=function(){try{return globalThis.top.open()}catch(aY){return globalThis.open()}}()),m){n.next=13;break}return v=l||new Bd(i,r),n.next=12,t._prepareMultipleMediaDownloadURL(r,a,f,v,c,d,h);case 12:g=n.sent;case 13:return g.hasError&&_&&_.close(),g.downloadWindow=_,n.abrupt("return",g);case 16:case"end":return n.stop()}}),n)})))()},downloadFromURL:function(e){var t=this;return ch(regeneratorRuntime.mark((function n(){var i,r,a,s,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.downloadURL,r=e.downloadCount,a=e.downloadWindow,s=e.feedbackStatGenerator,t._captureFeedbackStats(s,r),o={},!a){n.next=7;break}t._setTopLocationHref(i,a),n.next=16;break;case 7:return n.prev=7,n.next=10,t._downloadManager.downloadFromURL(i);case 10:o=n.sent,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(7),o.hasError=!0;case 16:return n.abrupt("return",o);case 17:case"end":return n.stop()}}),n,null,[[7,13]])})))()},getZipURLGenerationParameters:function(e){var t={};return e?t.originalsOnly={value:1,type:"INT64"}:(t.itemTypes=function(){var e=["public.jpeg","public.png","com.compuserve.gif"];return rh.isDeviceH265Compatible()&&e.unshift("public.heic"),{value:[].concat(e,["com.apple.quicktime-movie","public.mpeg-4"]),type:"STRING_LIST"}}(),t.codecs=function(){var e=["H.264"];return rh.isDeviceH265Compatible()&&e.unshift("HEVC"),{value:e,type:"STRING_LIST"}}()),{pluginFields:t}},_prepareSingleMediaDownloadURLIfPossible:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a={};if(1!==t.length)return a;var s={wantsOriginalFormats:n,wantsMostCompatibleFormats:!n,wantsEditedVersions:!n,wantsUneditedVersions:n,wantsLivePhotoVideoComplement:!0,allowsLocationMetadata:!0,isDeviceH265Compatible:nh()},o=e.objectAt(t[0]);if(!o)return u.b.error("Single item download media is undefined",t[0]),{hasError:!0};var l=o.genericType===fr.a.Type.VIDEO,c=i===yn.a.TOUCH,d=o.getDerivativeInfosForDownload(s);if(1!==d.length||l&&c)return a;u.b.debug("Initiate single item download...");var h=r.createDownloadDetailsForSingleFile(o),p=d[0],f=p.downloadUrl;return{downloadURL:f,archiveDetails:h}},_prepareMultipleMediaDownloadURL:function(e,t,n,i,r,a){var s=arguments,o=this;return ch(regeneratorRuntime.mark((function l(){var c,d,h,p,f,g;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return c=s.length>6&&void 0!==s[6]?s[6]:500,u.b.debug("Initiate multiple media zip download..."),d=e.zone.pk,a&&o._showSpinner(),l.prev=4,l.next=7,i.getIncludeExcludeRecords(t);case 7:return f=l.sent,p=n.createDownloadDetailsForArchive(),g=o.getZipURLGenerationParameters(r),l.next=12,jd.Zone.generateZipURLForRecords(d,p.filename,Object.assign({},f,g));case 12:h=l.sent,l.next=20;break;case 15:return l.prev=15,l.t0=l.catch(4),u.b.error(l.t0 instanceof Error?l.t0.stack||l.t0.message:String(l.t0)),a&&o._hideSpinner(c),l.abrupt("return",{hasError:!0});case 20:return a&&o._hideSpinner(c),l.abrupt("return",{downloadURL:h,archiveDetails:p});case 22:case"end":return l.stop()}}),l,null,[[4,15]])})))()},_showSpinner:function(){oh.sharedInstance.fadeIn()},_hideSpinner:function(e){e>0?X.a((function(){return oh.sharedInstance.fadeOut()}),e):oh.sharedInstance.fadeOut()},_setTopLocationHref:function(e,t){(t||globalThis.top).location.href=e},_downloadManager:k.c(xd,{msToWaitForDownloadToStart:25e3}),_captureFeedbackStats:function(e,t){var n=L.n().feedbackService;if(n){var i=(e||this._defaultFeedbackStatsGenerator)(t,n);i&&n.report(i.eventName,i.stats)}},_defaultFeedbackStatsGenerator:function(e,t){return{eventName:"downloadEvent",stats:{fileCount:t.getSignificantNum(e)}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownloadMediasManager"}});function dh(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function hh(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){dh(a,i,r,s,o,"next",e)}function o(e){dh(a,i,r,s,o,"throw",e)}s(void 0)}))}}var ph=we.b("UserActionType",{REMOVE:"Remove",DELETE:"Delete",EXPUNGE:"Expunge",FAVORITE:"Favorite",SHARE:"Share",DOWNLOAD:"Download",ADD_TO_ALBUM:"AddToAlbum",RECOVER:"Recover",RECOVER_OVER_QUOTA:"RecoverOverQuota",HIDE:"Hide",UNHIDE:"Unhide"}),fh={mixinDependencies:[B.b,fl.a],removeOrDeleteSelection:function(e,t,n,i){var r=nu.a.sharedInstance.activeKeys;if(e&&e.length&&t){var a=function(e,t){if(e.isRecentlyDeletedAlbum)return ph.EXPUNGE;if(e.isFolder)return ph.EXPUNGE;var n=p.a.sharedInstance.isWindows?ml.a.CTRL:ml.a.OPTION;return t.contains(n)?ph.DELETE:e.isNormalAlbum?ph.REMOVE:ph.DELETE}(t,r);if(Dd.isSelectionOverLimit(e))Dd.showSelectionLimitAlert(a);else if(!e.selection.some((function(e){return e&&pi.a(e,jt.a)&&e.isPredefinedSmartAlbum}))){var o={buttons:Wo.b.create([Ho.a.create({action:"hide",isCancel:!0,title:s.d("Alert.Cancel.Button.Title")}),Ho.a.create({action:"_removeOrDeleteItemsForSelectionContext",additionalClassNames:F.b(["destructive"]),context:{actionType:a,alertViewController:i,container:t,sparseSelection:e},isPrimary:!0,target:this})]),anchor:n,alertViewController:i};mh(o),n||(o.alwaysRenderAsAlert=!0),Vl.show(o)}}},_removeOrDeleteItemsForSelectionContext:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.context,r=i.sparseSelection,a=i.actionType,s=i.alertViewController,"VIRTUAL_FOLDER"===(o=e.context.container).type&&(o=L.n().cplRootContainer),n.next=5,r.getFullyLoadedSelection(t);case 5:l=n.sent,t.selectionModeIsActive=!1;try{a===ph.DELETE?o.deleteItems(l):o.removeItems(l),L.n().feedbackService.report("itemDeleted",{type:o.isFolder?"albumOrFolder":"media"}),t.sendEvent("updateSidebar")}catch(aY){gh(a,l.length,s)}case 8:case"end":return n.stop()}}),n)})))()},toggleFavoriteMediaAndSelection:function(e,t){var n=this;return hh(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:if(!Dd.isSelectionOverLimit(t)){i.next=5;break}return Dd.showSelectionLimitAlert(ph.FAVORITE),i.abrupt("return");case 5:if(r=!e.isFavorite,e.isFavorite=r,L.n().feedbackService.report("favoriteToggled",{type:r?"addedFavorite":"removedFavorite"}),!(t&&t.length&&t.selection.contains(e))){i.next=16;break}return i.next=12,t.getFullyLoadedSelection(n);case 12:a=i.sent,n.setFavoriteOnSelection(a,r),i.next=17;break;case 16:L.n().commit();case 17:case"end":return i.stop()}}),i)})))()},determineFavoriteValueForSparseSelectionAndSetIt:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Dd.isSelectionOverLimit(e)){n.next=3;break}return Dd.showSelectionLimitAlert(ph.FAVORITE),n.abrupt("return");case 3:if(!e||!e.length){n.next=11;break}return n.next=6,e.getFullyLoadedSelection(t);case 6:i=n.sent,a=!1,i.forEach((function(e){void 0===r&&(r=e.isFavorite),e.isFavorite!==r&&(a=!0)})),a&&(r=!1),t.setFavoriteOnSelection(i,!r);case 11:case"end":return n.stop()}}),n)})))()},setFavoriteOnSelection:function(e,t){var n=this;return hh(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e.forEach((function(e){e.isFavorite=t})),L.n().commit(),n.selectionModeIsActive=!1;case 3:case"end":return i.stop()}}),i)})))()},setHiddenOnSelection:function(e){var t=arguments,n=this;return hh(regeneratorRuntime.mark((function i(){var r,a,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=!(t.length>1&&void 0!==t[1])||t[1],!Dd.isSelectionOverLimit(e)){i.next=4;break}return Dd.showSelectionLimitAlert(ph.HIDDEN),i.abrupt("return");case 4:a=r?ph.HIDE:ph.UNHIDE,e&&e.length&&(o={userActionType:a,sparseSelection:e,isHiddenValue:r},r?(l=_h(a),c=l.messageKeys,u=l.descriptionKeys,d=e.length,h={message:Md(c,d),description:Md(u,d),buttons:Wo.b.create([Ho.a.create({isCancel:!0,title:s.d("Alert.Cancel.Button.Title")}),Ho.a.create({title:s.d("Alert.Hide.Button.Title"),action:"_setHiddenForSelectionContext",additionalClassNames:F.b(["destructive"]),context:o,isPrimary:!0,target:n})]),alwaysRenderAsAlert:!0},Vl.show(h)):n._setHiddenForSelectionContext({context:o}));case 6:case"end":return i.stop()}}),i)})))()},_setHiddenForSelectionContext:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.context,r=i.userActionType,a=i.sparseSelection,s=i.isHiddenValue,n.next=4,a.getFullyLoadedSelection(t);case 4:return o=n.sent,l=o.length,o.forEach((function(e){e.isHidden=s})),t.selectionModeIsActive=!1,n.prev=8,n.next=11,L.n().commit();case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(8),gh(r,l,wn.b);case 16:case"end":return n.stop()}}),n,null,[[8,13]])})))()},expungeSelection:function(e,t,n,i){if(e&&e.length)if(Dd.isSelectionOverLimit(e))Dd.showSelectionLimitAlert(ph.EXPUNGE);else{var r={buttons:Wo.b.create([Ho.a.create({action:"hide",isCancel:!0,title:s.d("Alert.Cancel.Button.Title")}),Ho.a.create({action:"_expungeItemsForSelectionContext",additionalClassNames:F.b(["destructive"]),context:{actionType:ph.EXPUNGE,alertViewController:i,container:t,sparseSelection:e},isPrimary:!0,target:this})]),anchor:n,alertViewController:i};mh(r),n||(r.alwaysRenderAsAlert=!0),Vl.show(r)}},_expungeItemsForSelectionContext:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.context.sparseSelection,n.next=3,i.getFullyLoadedSelection(t);case 3:return r=n.sent,t.selectionModeIsActive=!1,n.prev=5,r.forEach((function(e){return e&&e.permanentlyDelete()})),a=L.n(),n.next=10,a.commit();case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),gh(e.context.actionType,r.length,e.context.alertViewController);case 15:case"end":return n.stop()}}),n,null,[[5,12]])})))()},recoverSelection:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getFullyLoadedSelection(t);case 2:return i=n.sent,t.selectionModeIsActive=!1,n.prev=4,i.forEach((function(e){return e&&e.recover()})),r=L.n(),n.next=9,r.commit();case 9:(a=Array.from(i).map((function(e){return e&&e.primaryAsset&&e.primaryAsset.getDataHash().isDeleted})).filter(Boolean).length)&&gh(ph.RECOVER_OVER_QUOTA,a),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),gh(ph.RECOVER,i.length);case 16:case"end":return n.stop()}}),n,null,[[4,13]])})))()},downloadSelection:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Dd.isSelectionOverLimit(e)){n.next=3;break}return Dd.showSelectionLimitAlert(ph.DOWNLOAD),n.abrupt("return");case 3:return i=e.getSelectedIndices().toArray(),n.next=6,t._downloadSelectedIndices(i);case 6:t.selectionModeIsActive=!1;case 7:case"end":return n.stop()}}),n)})))()},downloadSingleMedia:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.collection,!((r=i.indexOf(e))<0)){n.next=5;break}return Ud(),n.abrupt("return");case 5:return n.next=7,t._downloadSelectedIndices([r]);case 7:case"end":return n.stop()}}),n)})))()},_downloadSelectedIndices:function(e){var t=this;return hh(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.collection,r=t.container,a=t.primaryInteractionMode,n.next=3,uh.sharedInstance.prepareAndDownload({collection:i,container:r,selectedIndicesArray:e,primaryInteractionMode:a,showSpinner:e.length>$l.zipDownloadSpinnerThreshold});case 3:case"end":return n.stop()}}),n)})))()}};function gh(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wn.b;n=["","Alert."+e.value+".Item.Failed.Message.1","Alert."+e.value+".Item.Failed.Message.2","Alert."+e.value+".Item.Failed.Message.More"],i=["","Alert."+e.value+".Item.Failed.Description.1","Alert."+e.value+".Item.Failed.Description.2","Alert."+e.value+".Item.Failed.Description.More"],r.show({message:Md(n,t),description:Md(i,t),primaryButton:{title:s.d("Alert.OK.Button.Title")}})}function mh(e){var t,n,i=e.buttons.objectAt(1),r=i.context,a=r.sparseSelection,o=r.container,l=r.actionType,c=a.length,u=a.selection.filter((function(e){return pi.a(e,fr.a)&&e.isPromotedFromBurst})).length,d=o.albumType.value===$o.a.NORMAL.value;if(u>0&&u===c&&!d)t=["","Alert.Delete.Promoted.From.Burst.Message.1","Alert.Delete.Promoted.From.Burst.Message.2","Alert.Delete.Promoted.From.Burst.Message.More"],n=["","Alert.Delete.Photo.Description.1","Alert.Delete.Photo.Description.2","Alert.Delete.Photo.Description.More"];else if(u>0&&!d)t=["","Alert.Delete.Some.Promoted.From.Burst.Message.1","Alert.Delete.Some.Promoted.From.Burst.Message.2","Alert.Delete.Some.Promoted.From.Burst.Message.More"],n=["","Alert.Delete.Photo.Description.1","Alert.Delete.Photo.Description.2","Alert.Delete.Photo.Description.More"];else{var h=_h(l);t=h.messageKeys,n=h.descriptionKeys}var p=s.d("Alert."+l.value+".Button.Title");e.message=Md(t,c),e.description=Md(n,c),i.title=p}function _h(e){return{messageKeys:["","Alert."+e.value+".Item.Message.1","Alert."+e.value+".Item.Message.2","Alert."+e.value+".Item.Message.More"],descriptionKeys:["","Alert."+e.value+".Item.Description.1","Alert."+e.value+".Item.Description.2","Alert."+e.value+".Item.Description.More"]}}var vh={radioGroupValue:Object(V.b)(),registerRadioButton:function(e){var t=this._radioGroupButtons;if(-1===t.indexOf(e)){var n=this._indexedRadioGroupButtonsByValue,i=e.value,r=this.radioGroupValue;n.get(i)&&Object(_.b)("You may not add multiple buttons with the same value (%{value}) to a radio group.",{value:i,group:this}),e._isChecked=r===i,n.set(i,e),t.push(e)}},unregisterRadioButton:function(e){var t=this._radioGroupButtons.indexOf(e);this._radioGroupButtons.splice(t,1),this._indexedRadioGroupButtonsByValue.removeKey(e.value)},selectRadioItemByValue:function(e){this.radioGroupValue!==e&&(this.radioGroupValue=e)},mixinDependencies:[k.b,B.b],viewClass:Object(F.b)({ariaRole:"radiogroup"}),_radioGroupButtons:Object(k.c)(Array),_indexedRadioGroupButtonsByValue:Object(k.c)(wc.a),_previousValue:null,_radioGroupValueDidChange:Object(B.h)("radioGroupValue",(function(e){var t=this._previousValue;this._previousValue=e;var n=this._indexedRadioGroupButtonsByValue.get(t);n&&(n._isChecked=!1);var i=this._indexedRadioGroupButtonsByValue.get(e);i&&(i._isChecked=!0)}))},bh=In.a.extend(ku.a,{staticMembers:{className:!1,templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"circle",classes:["shadow"],namespace:"http://www.w3.org/2000/svg",attributes:{cx:"14",cy:"16",r:"14"}},{type:"ELEMENT",tagname:"circle",classes:["border"],namespace:"http://www.w3.org/2000/svg",attributes:{cx:"14",cy:"14",r:"14"}},{type:"ELEMENT",tagname:"circle",classes:["container"],namespace:"http://www.w3.org/2000/svg",attributes:{cx:"14",cy:"14",r:"12"}},{type:"ELEMENT",tagname:"circle",classes:["container","hdpr"],namespace:"http://www.w3.org/2000/svg",attributes:{cx:"14",cy:"14",r:"13"}},{type:"ELEMENT",tagname:"circle",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{cx:"14",cy:"14",r:"6"}},{type:"ELEMENT",tagname:"rect",classes:["bar"],namespace:"http://www.w3.org/2000/svg",attributes:{x:"6",y:"12",width:"16",height:"4"}}],classes:["icon"],namespace:"http://www.w3.org/2000/svg",attributes:{viewBox:"0 0 28 28"}},{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]}],classes:["cw-radio-button"],attributes:{role:"radio","aria-checked":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"isChecked",attributes:{},attribute:"aria-checked"},tabindex:"0"}}},__QUALIFIED_CLASS_NAME__:"RadioButton"},title:Object(V.b)({type:"string",defaultValue:""}),value:Object(V.b)(),isChecked:Object(V.b)({type:"boolean",readOnly:!0,dependencies:["_isChecked"],get:Object.assign((function(){return this._isChecked}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),_isChecked:Object(V.b)({type:"boolean",defaultValue:!1}),action:"selectRadioItemByValue",contextKeys:["value"],_isAttachedDidChange:Object(B.h)("isAttached",(function(e){var t;e?(t=this._registeredParent=this.parent).sendEvent("registerRadioButton",this):(t=this._registeredParent)&&t.sendEvent("unregisterRadioButton",this)}))}),yh=n(350),wh=n(312),Ih=In.a.extend(kl.a,wh.b,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-checkbox",children:[{type:"ELEMENT",tagname:"input",name:"controlElement",attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"inputGUID",attributes:{},attribute:"id"},type:"checkbox"}},{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],name:"labelElement",attributes:{for:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"inputGUID",attributes:{},attribute:"for"}}}]}},className:"cw-ui-checkbox",__QUALIFIED_CLASS_NAME__:"Checkbox"},inputGUID:Object(V.b)({type:"string",defaultValue:function(){return Object(Yl.b)(this)+"Input"}}),isChecked:Object(V.b)({type:"boolean",defaultValue:!1,didChange:function(e){"boolean"===typeof e?(this.controlElement.checked=e,this.controlElement.indeterminate=!1):this.controlElement.indeterminate=!0}}),defaultFocusElement:Object(Oi.c)("controlElement"),label:Object(V.b)(""),init:function(){var e=this,t=arguments;e.__s._$21N$init.apply(e,t),Object(Ze.a)(this.labelElement,"click",Object(yh.a)(this.handleLabelClickEvent,this))},dispose:function(){var e=this,t=arguments;Object(Xe.a)(this.labelElement,"click",Object(yh.a)(this.handleLabelClickEvent,this)),e.__s._$26l$dispose.apply(e,t)},change:function(e){this.isChecked=this.controlElement.checked},pointerDown:function(e){var t=p.a.sharedInstance,n=t.isiOS,i=t.osMajorVersion;(!n||i>12)&&e.preventDefault()},handleLabelClickEvent:function(e){if(e.target===this.labelElement){e.preventDefault();var t=this.controlElement;t&&t.click()}},__superMap:{_$21N$init:"init",_$26l$dispose:"dispose"}}),Sh=n(25);function Ch(e,t,n){for(var i=document.body,r=e;r&&((r=r.parentNode)||_.b("Element used in findMinWidthForMinHeight is not attached."),r!==i););t<=1e4||(t=1e4),n>=1||(n=1);var a=e.style,s=a.width,o=a.height;a.width=t+"px",a.height="auto";for(var l,c,u,d,h=e.offsetHeight,p=1,f=0;f<20&&Math.abs(p-t)>n;f++)l=Math.ceil(p/2+t/2),a.width=l+"px",(c=e.offsetHeight)>h?p=l:t=l,c===h&&(u=l,d=c);a.width=s,a.height=o;var g=Sh.objectPool.getAutodisposingInstance();return g.width=u,g.height=d,g}var Eh=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"titleString",attributes:{}}],classes:["title"]},{type:"VIEWOUTLET",tagname:"view",name:"originalsRadioButtonView"},{type:"VIEWOUTLET",tagname:"view",name:"editedCompatiblesRadioButtonView"},{type:"VIEWOUTLET",tagname:"view",name:"downloadButtonView"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButtonView"}],classes:["advanced-download-view"]},__QUALIFIED_CLASS_NAME__:"AdvancedDownloadView"},mediaCount:V.b(),titleString:V.b(),originalsRadioButtonView:V.b({strong:!0,defaultValue:k.c(bh.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtextString",attributes:{}}],classes:["radio-subtext"]}]}}},value:"originals",title:V.b({readOnly:!0,dependencies:["parent.mediaCount"],get:Object.assign((function(){return I("AdvancedDownload.Option.UnmodifiedOriginals",this.getPath("parent.mediaCount")||0)}),{__CW__getter:function(e,t,n,i){return I("AdvancedDownload.Option.UnmodifiedOriginals",i.internalGetPath(this,t[0+n])||0)}})}),subtextString:V.b({readOnly:!0,dependencies:["parent.mediaCount"],get:Object.assign((function(){return I("AdvancedDownload.Subtext.UnmodifiedOriginals",this.getPath("parent.mediaCount")||0)}),{__CW__getter:function(e,t,n,i){return I("AdvancedDownload.Subtext.UnmodifiedOriginals",i.internalGetPath(this,t[0+n])||0)}})})}))}),editedCompatiblesRadioButtonView:V.b({strong:!0,defaultValue:k.c(bh.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtextString",attributes:{}}],classes:["radio-subtext"]}]}}},value:"editedCompatibles",title:s.d("AdvancedDownload.Option.MostCompatible"),subtextString:s.d("AdvancedDownload.Subtext.MostCompatible")}))}),includeGeoCheckboxView:V.b({strong:!0,defaultValue:k.c(Ih.extend({label:s.d("AdvancedDownload.Option.PreserveGeo"),isDisabled:Oi.c("parent.originalsRadioButtonView.isChecked")}))}),downloadButtonView:V.b({strong:!0,defaultValue:k.c(Ho.a.extend({additionalClassNames:F.b(["dismissal-button","download"]),title:s.d("AdvancedDownload.Button.Download"),action:"downloadMedias",keyEquivalent:ml.a.ENTER}))}),cancelButtonView:V.b({strong:!0,defaultValue:k.c(Ho.a.extend({additionalClassNames:F.b(["dismissal-button","cancel"]),title:s.d("AdvancedDownload.Button.Cancel"),action:"hide",keyEquivalent:ml.a.ESC}))}),desiredSize:V.b({strong:!0,defaultValue:k.c(_l.a)}),_uncheckAndRecheckGeoCheckboxBasedOnRadioSelection:B.h("originalsRadioButtonView.isChecked",(function(e){var t=this.includeGeoCheckboxView;!e&&this._shouldUncheckGeoCheckboxOnceAble?t.isChecked=!1:e&&(this._shouldUncheckGeoCheckboxOnceAble=!t.isChecked,t.isChecked=!0)})),_measureOncePossible:B.h("isAttached",(function(e){if(e){var t=Ch(this.element,500),n=t.width,i=t.height;Zl.a.begin().set(this.desiredSize,"width",n).set(this.desiredSize,"height",i).end()}}))});function Ah(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Oh=fi.a.extend(vh,{radioGroupValue:"originals",viewClass:Eh,view:V.b({downstreamBindings:{mediaCount:"(owner).mediaCount",titleString:"(owner).titleString"}}),media:V.b(),selectedIndices:V.b(),container:V.b(),collection:V.b(),mediaCount:V.b({readOnly:!0,dependencies:["selectedIndices","selectedIndices.length","media"],get:Object.assign((function(){var e=this.selectedIndices,t=this.media;return e?e.length:t?1:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);return r?r.length:a?1:0}})}),titleString:V.b({readOnly:!0,dependencies:["mediaCount","media"],get:Object.assign((function(){var e=this.mediaCount,t=this.media;if(!e)return"";var n=fr.a.Type;if(t&&1===e){if(t.genericType===n.IMAGE)return I("AdvancedDownload.Title.PhotosOnly",e);if(t.genericType===n.VIDEO&&t.specificType!==n.AUDIO)return I("AdvancedDownload.Title.VideosOnly",e)}return I("AdvancedDownload.Title.GenericItems",e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(!r)return"";var s=fr.a.Type;if(a&&1===r){if(a.genericType===s.IMAGE)return I("AdvancedDownload.Title.PhotosOnly",r);if(a.genericType===s.VIDEO&&a.specificType!==s.AUDIO)return I("AdvancedDownload.Title.VideosOnly",r)}return I("AdvancedDownload.Title.GenericItems",r)}})}),desiredSize:V.b({strong:!0,binding:Oi.c("view.desiredSize")}),allowsLocationMetadata:V.b(Oi.c("view.includeGeoCheckboxView.isChecked")),feedbackService:V.b(G.a.bindingFor("application.feedbackService")),downloadMedias:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,i,r,a,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.collection,i=t.container,r=t.media,a=t.selectedIndices,e.next=3;break;case 3:e.next=5;break;case 5:e.next=7;break;case 7:if(s="originals"===t.radioGroupValue,a?o=a.toArray():r&&(l=n.indexOf(r))>=0&&(o=[l]),o.length){e.next=12;break}return Ud(),e.abrupt("return");case 12:uh.sharedInstance.prepareAndDownload({collection:n,container:i,selectedIndicesArray:o,originalsOnly:s,showSpinner:!r&&o.length>$l.zipDownloadSpinnerThreshold}),t.sendEvent("hide");case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Ah(a,i,r,s,o,"next",e)}function o(e){Ah(a,i,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"AdvancedDownloadViewController"}}),Th=Rl.extend({media:V.b(),selectedIndices:V.b(),container:V.b(),collection:V.b(),desiredSize:V.b({strong:!0,binding:Oi.c("contentController.desiredSize")}),contentController:V.b({defaultValue:k.c(Oh),downstreamBindings:{media:"(owner).media",selectedIndices:"(owner).selectedIndices",collection:"(owner).collection",container:"(owner).container"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AdvancedDownloadPopoverViewController"}}),Mh=Nu,Dh=n(1252),Ph=n(1253),Lh=wd.extend(Mh,Sd,Wu,{staticMembers:{className:"download-button",templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"advancedDownloadButton"}]}},__QUALIFIED_CLASS_NAME__:"ToolbarDownloadButton"},icon:Ph,configuration:V.b({type:su}),advancedDownloadButton:V.b({strong:!0,defaultValue:k.c(Ho.a.extend(Mh,{additionalClassNames:F.b(["advanced-download-button"]),action:"showAdvancedDownloadPopover",icon:Dh,tooltip:s.d("AdvancedDownload.DisclosureArrowButton.Tooltip")}))}),pointerDragDown:function(){this.showAdvancedDownloadPopover()},pointerLongPress:function(){this.showAdvancedDownloadPopover()},showAdvancedDownloadPopover:function(){Dd.isSelectionOverLimit(this.configuration.sparseSelection)?Dd.showSelectionLimitAlert(ph.DOWNLOAD):this._advancedDownloadVC.toggle(this)},_advancedDownloadVC:V.b({strong:!0,defaultValue:k.c(Th.extend({owner:V.b(),_infoProvider:V.b({readOnly:!0,dependencies:["view.isAttached","owner"],get:Object.assign((function(){return this.getPath("view.isAttached")?this.owner:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGet(this,t[1+n]):void 0}})}),media:Oi.c("_infoProvider.configuration.media"),selectedIndices:Oi.c("_infoProvider.configuration.selectedIndices"),container:Oi.c("_infoProvider.configuration.container"),collection:Oi.c("_infoProvider.configuration.collection")}))})}),Rh=P.a.extend(B.b,{container:V.b(),title:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarContainerMetadataConfiguration"}}),xh={mixinDependencies:[bd],maxSizeMode:null,widthPadding:0,valueDidChange:B.i(),didRender:B.i(),measuredSizes:V.b({readOnly:!0,dependencies:["isAttached","valueDidChange","didRender"],get:Object.assign((function(){var e=[];if(!this.isAttached||this._isMeasuring)return e;this._isMeasuring=!0;var t=0,n=this.maxSizeMode;for(t=0;t<=n;t++)e.push(this._measureSizeMode(t));return e}),{__CW__getter:function(e,t,n,i){var r=[];if(!i.internalGet(this,t[0+n])||this._isMeasuring)return r;this._isMeasuring=!0;var a=0,s=this.maxSizeMode;for(a=0;a<=s;a++)r.push(this._measureSizeMode(a));return r}}),didChange:function(){this._measuringSizeMode=-1,this._isMeasuring=!1}}),displaySize:V.b({readOnly:!0,dependencies:["width","measuredSizes"],get:Object.assign((function(){var e=this.measuredSizes,t=this.width;if(!e||0===e.length)return 0;if("auto"===t)return e[e.length-1];for(var n=e.length-1;n>=0;n--)if(e[n]<=t)return e[n];return t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!r||0===r.length)return 0;if("auto"===a)return r[r.length-1];for(var s=r.length-1;s>=0;s--)if(r[s]<=a)return r[s];return a}})}),chosenSizeMode:V.b({readOnly:!0,dependencies:["width","measuredSizes"],get:Object.assign((function(){var e=this.measuredSizes,t=this.width;if(!e||0===e.length)return 0;if("auto"===t)return e.length-1;for(var n=e.length-1;n>=0;n--)if(e[n]<=t)return n;return 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(!r||0===r.length)return 0;if("auto"===a)return r.length-1;for(var s=r.length-1;s>=0;s--)if(r[s]<=a)return s;return 0}})}),preferredWidth:V.b({readOnly:!0,dependencies:["measuredSizes"],get:Object.assign((function(){var e=this.measuredSizes;return e&&0!==e.length?e[e.length-1]:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&0!==r.length?r[r.length-1]:0}})}),minimumWidth:V.b({readOnly:!0,dependencies:["measuredSizes"],get:Object.assign((function(){var e=this.measuredSizes;return e&&0!==e.length?e[0]:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&0!==r.length?r[0]:0}})}),sizeMode:V.b({readOnly:!0,dependencies:["chosenSizeMode","_measuringSizeMode","measuredSizes"],get:Object.assign((function(){var e=this._measuringSizeMode,t=this.chosenSizeMode;return e<0?t:e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return r<0?a:r}})}),_measuringSizeMode:V.b(-1),_measureSizeMode:function(e){return this._measuringSizeMode=e,this.measureWidth()},_displayWidthDidChange:B.h("displayWidth",(function(e){this.style.set("width",e)})),measureWidth:function(){var e=this.style,t=e.getInline("width");e.set("width","auto");var n=Math.ceil(this.element.getBoundingClientRect().width);return e.set("width",t),n+this.widthPadding}},Nh=In.a.extend(_d,xh).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],name:"titleElement",classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{signal:"subtitleDidRender"}}],name:"subtitleElement",classes:["subtitle"]}],classes:["title-wrapper"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasSubtitle",truevalue:"has-subtitle",attributes:{}}]}},className:"p2-toolbar-title-view",__QUALIFIED_CLASS_NAME__:"ToolbarTitleView"},hasSubtitle:V.b({readOnly:!0,dependencies:["subtitle"],get:Object.assign((function(){return Boolean(this.subtitle)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})})}),Fh=Nh.extend({staticMembers:{className:"p2-toolbar-container-title-view",__QUALIFIED_CLASS_NAME__:"ToolbarContainerTitleView"},configuration:V.b({type:Rh}),title:V.b(Oi.c("configuration.title")),subtitle:V.b(""),maxSizeMode:0,valueDidChange:B.i(),_signalValueDidChange:B.h("title","subtitle",(function(){this.valueDidChange()})),didRender:B.i(),_signalDidRender:B.h("titleDidRender","subtitleDidRender",(function(){this.didRender()})),updateLayout:function(){}}),Vh={dateString:"",timeString:""},kh={date:null,dateFormatter:Hd},Bh=P.a.extend(B.b,{locKeys:null,date:V.b({type:Date}),_relativeDates:V.b(bn.sharedInstance),dateIsColloquial:V.b({readOnly:!0,type:Boolean,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){return this._relativeDates.isColloquial(this.date)}),{__CW__getter:function(e,t,n,i){return this._relativeDates.isColloquial(i.internalGet(this,t[0+n]))}})}),_dateLocKey:V.b({readOnly:!0,type:"string",dependencies:["date","dateIsColloquial","_relativeDates.today","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this._relativeDates,t=this.date;return t?this.dateIsColloquial?e.colloquialLocKey(t):t.getFullYear()===e.today.getFullYear()?"Date":"DateWithYear":""}),{__CW__getter:function(e,t,n,i){var r=this._relativeDates,a=i.internalGet(this,t[0+n]);return a?i.internalGet(this,t[1+n])?r.colloquialLocKey(a):a.getFullYear()===r.today.getFullYear()?"Date":"DateWithYear":""}})}),dateString:V.b({readOnly:!0,type:"string",dependencies:["date","_dateLocKey","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this._dateLocKey,t=this.date;return t?this.dateIsColloquial?(kh.date=t,s.d(this.locKeys[e],kh)):Td(t,"Date"===e?{month:"long",day:"numeric",timeZone:"UTC"}:gi.a(Ke.LONG_DATE,{timeZone:"UTC"})):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a?this.dateIsColloquial?(kh.date=a,s.d(this.locKeys[r],kh)):Td(a,"Date"===r?{month:"long",day:"numeric",timeZone:"UTC"}:gi.a(Ke.LONG_DATE,{timeZone:"UTC"})):""}})}),shortDateString:V.b({readOnly:!0,type:"string",dependencies:["date","_dateLocKey","dateIsColloquial","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this._dateLocKey,t=this.date;return t?this.dateIsColloquial?(kh.date=t,s.d(this.locKeys[e],kh)):Td(t,"Date"===e?{month:"short",day:"numeric",timeZone:"UTC"}:gi.a(Ke.MEDIUM_DATE,{timeZone:"UTC"})):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a?i.internalGet(this,t[2+n])?(kh.date=a,s.d(this.locKeys[r],kh)):Td(a,"Date"===r?{month:"short",day:"numeric",timeZone:"UTC"}:gi.a(Ke.MEDIUM_DATE,{timeZone:"UTC"})):""}})}),timeString:V.b({readOnly:!0,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this.date;return e?Td(e,gi.a(Ke.SHORT_TIME,{timeZone:"UTC"})):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?Td(r,gi.a(Ke.SHORT_TIME,{timeZone:"UTC"})):""}})}),dateTimeString:V.b({readOnly:!0,dependencies:["dateString","timeString","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this.timeString,t=this.dateString;return t&&e?(Vh.dateString=t,Vh.timeString=e,s.d(this.locKeys.DateAndTime,Vh)):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&r?(Vh.dateString=a,Vh.timeString=r,s.d(this.locKeys.DateAndTime,Vh)):""}})}),shortDateTimeString:V.b({readOnly:!0,dependencies:["shortDateString","timeString","_relativeDates.dateOrTimezoneDidChange"],get:Object.assign((function(){var e=this.timeString,t=this.shortDateString;return t&&e?(Vh.dateString=t,Vh.timeString=e,s.d(this.locKeys.DateAndTime,Vh)):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return a&&r?(Vh.dateString=a,Vh.timeString=r,s.d(this.locKeys.DateAndTime,Vh)):""}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FormattedDate"}}),jh={DateWithYear:"Navbar.OneUp.Title.DateWithYear",Date:"Navbar.OneUp.Title.Date",Today:"Date.Range.Same.Day.Today",Tomorrow:"Date.Range.Same.Day.Tomorrow",Yesterday:"Date.Range.Same.Day.Yesterday","Day.Of.Week":"Navbar.OneUp.Title.Date.Day.Of.Week",DateShort:"Navbar.OneUp.Title.DateShort",DateWithYearShort:"Navbar.OneUp.Title.DateWithYearShort",Time:"Navbar.OneUp.Title.Time",TimeShort:"Navbar.OneUp.Title.TimeShort",DateAndTime:"Navbar.OneUp.Title.DateAndTime"},Uh=Object.assign({},Ke.MEDIUM_DATE,{timeZone:"UTC"}),Gh=Object.assign({},Ke.SHORT_DATE,{timeZone:"UTC"}),Hh=Object.assign({},Ke.MEDIUM_TIME,{timeZone:"UTC"}),Wh=Object.assign({},Ke.LONG_DATE,{timeZone:"UTC"}),$h={mixinDependencies:[fl.a],media:V.b(),collection:V.b(),p2ToolbarSizeMode:V.b(4),formattedDate:V.b({readOnly:!0,strong:!0,get:function(){return Bh.create({locKeys:jh,date:this.bindingFor("mediaDate")})}}),mediaDate:V.b({readOnly:!0,dependencies:["media.date","media.timeZoneOffset"],get:function(){var e=this.media;if(e){var t=e.date;if("number"===typeof t){var n=e.timeZoneOffset;return n&&(t+=1e3*n),new Date(t)}}}}),navbarTitle:V.b({readOnly:!0,dependencies:["primaryInteractionMode","titleForMouse","titleForTouch"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH?this.titleForTouch:this.titleForMouse}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH?i.internalGet(this,t[2+n]):i.internalGet(this,t[1+n])}})}),titleForMouse:V.b({readOnly:!0,dependencies:["media.caption","mediaDate","p2ToolbarSizeMode"],get:Object.assign((function(){var e=this.media,t=this.mediaDate;if(e){var n=e.caption;if(n)return n;if(t){var i=Td(t,Wh),r=Td(t,Hh);return this.p2ToolbarSizeMode<=2?""+i:i+", "+r}}return""}),{__CW__getter:function(e,t,n,i){var r=this.media,a=i.internalGet(this,t[1+n]);if(r){var s=r.caption;if(s)return s;if(a){var o=Td(a,Wh),l=Td(a,Hh);return i.internalGet(this,t[2+n])<=2?""+o:o+", "+l}}return""}})}),titleForTouch:V.b({readOnly:!0,dependencies:["formattedDate.dateString"],get:Object.assign((function(){return this.formattedDate.dateString}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),navbarSubtitle:V.b({readOnly:!0,dependencies:["primaryInteractionMode","subtitleForTouch","subtitleForMouse"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH?this.subtitleForTouch:this.subtitleForMouse}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),subtitleForMouse:V.b({readOnly:!0,dependencies:["media.caption","mediaDate","mediaIndexInCollection","collection.length","p2ToolbarSizeMode"],get:Object.assign((function(){var e=this.media,t=this.p2ToolbarSizeMode,n=this.mediaDate,i=this.collection;if(!e||!i)return"";var r=this.mediaIndexInCollection+1,a=i.length,o=a<1||r<1;if(e.caption&&n){var l,c=Td(n,Wh),u=Td(n,Uh),d=Td(n,Gh),h=Td(n,Hh);return l=t>2?c+", "+h:2===t?c:1===t?u:d,o?l:s.d("Navbar.OneUp.Title.Subtitle.DateAndPosition",{date:l,position:Ed(r),total:Ed(a)})}return o?"":s.d("Navbar.OneUp.Title.Subtitle.PositionOnly",{position:Ed(r),total:Ed(a)})}),{__CW__getter:function(e,t,n,i){var r=this.media,a=i.internalGet(this,t[4+n]),o=i.internalGet(this,t[1+n]),l=this.collection;if(!r||!l)return"";var c=i.internalGet(this,t[2+n])+1,u=l.length,d=u<1||c<1;if(r.caption&&o){var h,p=Td(o,Wh),f=Td(o,Uh),g=Td(o,Gh),m=Td(o,Hh);return h=a>2?p+", "+m:2===a?p:1===a?f:g,d?h:s.d("Navbar.OneUp.Title.Subtitle.DateAndPosition",{date:h,position:Ed(c),total:Ed(u)})}return d?"":s.d("Navbar.OneUp.Title.Subtitle.PositionOnly",{position:Ed(c),total:Ed(u)})}})}),subtitleForTouch:V.b({readOnly:!0,dependencies:["formattedDate.timeString"],get:Object.assign((function(){return this.formattedDate.timeString}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),mediaIndexInCollection:V.b({readOnly:!0,dependencies:["media","collection","collection.length","collection.contentsDidChange"],get:Object.assign((function(){var e=this.media,t=this.collection;return e&&t?t.indexOf(e):-1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?a.indexOf(r):-1}})}),valueDidChange:B.i(),_signalValueDidChange:B.h({inputs:["media.caption","formattedDate.dateTimeString","mediaIndexInCollection","collection.length"],callback:function(){this.valueDidChange()}})},zh=P.a.extend(B.b,{media:V.b(),collection:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarMediaMetadataConfiguration"}}),Kh=["","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"],qh=Nh.extend($h).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"burstCount",truevalue:"is-burst",attributes:{}}]},subtitleElement:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"burstCount",attributes:{}}],classes:["burst-count"]}]}},__QUALIFIED_CLASS_NAME__:"ToolbarOneupTitleView"},configuration:V.b({type:zh}),media:V.b(Oi.c("configuration.media")),collection:V.b(Oi.c("configuration.collection")),p2ToolbarSizeMode:V.b(Oi.c("sizeMode")),maxSizeMode:4,marginRight:20,marginLeft:20,title:V.b(Oi.c("titleForMouse")),subtitle:V.b(Oi.c("subtitleForMouse")),burstCount:V.b({readOnly:!0,dependencies:["media.isBurst","media.burstCount"],get:function(){var e=this.media;if(!e||!e.isBurst)return"";var t=Md(Kh,e.burstCount);return t&&(t=" \u2022\xa0"+t),t}}),_signalBurstCountChange:B.h({inputs:["burstCount"],callback:function(){this.valueDidChange()}}),didRender:B.i(),_signalDidRender:B.h("burstCount",(function(){this.didRender()}))}),Qh=In.a.extend({staticMembers:{className:"p2-toolbar-separator",__QUALIFIED_CLASS_NAME__:"ToolbarSeparator"},marginLeft:10,marginRight:10}),Yh=Ru.extend(vd,yd,{staticMembers:{className:"p2-toolbar-toggle-button",__QUALIFIED_CLASS_NAME__:"ToolbarToggleButton"},configuration:V.b({type:ou}),isOn:Oi.c("configuration.isOn"),marginLeft:0,marginRight:0}),Zh=[];n(670);var Xh=function(e){var t,n=1,i=1,r=arguments.length;Zh.length=r+n-i;for(var a=i,s=n;a<r;a++,s++)Zh[s]=arguments[a];var o=Zh;return o[0]=hn.a(e),(t=globalThis).setImmediate.apply(t,o)},Jh=n(160),ep=function(e,t,n){return">="===t?Math.max(e,n):"<="===t?Math.min(e,n):void _.b("Unknown operator in layout plan: "+t,{left:e,right:n})},tp=Jh.a.extend({initializeMember:function(e,t){var n=this.get,i=this.set;if(!n||!i){var r="_"+t;n||(n=function(){return this[r]}),i||(i=function(e){this[r]=e})}return Object.defineProperty(e,t,{get:n,set:i}),null},staticMembers:{__QUALIFIED_CLASS_NAME__:"NativeProperty"}}),np=function(e){return tp.create(e)},ip=P.a.extend({_left:0,_top:0,_width:0,_height:0,_right:0,_bottom:0,init:function(e,t){this.plan=e,this.key=t,this.__s._$wQ$init.call(this)},reset:function(e,t){if(e){var n,i,r=0,a=0;r=e.left,a=e.top,n=e.width,i=e.height,t&&(r-=t.left,a-=t.top),this._initialLeft=r,this._initialTop=a,this._initialWidth=n,this._initialHeight=i}this._left=this._initialLeft,this._top=this._initialTop,this._width=this._initialWidth,this._height=this._initialHeight,this._right=this._left+this._width,this._bottom=this._top+this._height},widthHasChanged:np({get:function(){return this._width!==this._initialWidth}}),heightHasChanged:np({get:function(){return this._height!==this._initialHeight}}),centerHorizontally:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t,i=0,r=0;"number"===typeof e?(n=e,i=this.plan.width):e?(i=e._width,r=e._left):i=this.plan.width;var a=r+i/2-this._width/2+n;this._left=a,this._right=a+this._width},centerVertically:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t,i=e,r=0,a=0;"number"===typeof i?(n=i,r=this.plan.height):i?(r=i._height,a=i._top):(i=this.plan,r=this.plan.height);var s=a+r/2-this._height/2+n;this._top=s,this._bottom=s+this._height},resizeSoThatLeft:function(e,t){var n=ep(this._left,e,t);this._left=n,this._width=this._right-this._left},resizeSoThatRight:function(e,t){var n=ep(this._right,e,t);this._right=n,this._width=this._right-this._left},resizeSoThatTop:function(e,t){var n=ep(this._top,e,t);this._top=n,this._height=this._bottom-n},resizeSoThatBottom:function(e,t){var n=ep(this._bottom,e,t);this._bottom=n,this._height=n-this._top},moveSoThatLeft:function(e,t){var n=ep(this._left,e,t);this._left=n,this._right=n+this._width},moveSoThatRight:function(e,t){var n=ep(this._right,e,t);this._right=n,this._left=n-this._width},moveSoThatTop:function(e,t){var n=ep(this._top,e,t);this._top=n,this._bottom=n+this._height},moveSoThatBottom:function(e,t){var n=ep(this._bottom,e,t);this._bottom=n,this._top=n-this._height},moveLeftSoThatWidth:function(e,t){var n=ep(this._width,e,t);this._width=n,this._left=this._right-n},moveRightSoThatWidth:function(e,t){var n=ep(this._width,e,t);this._width=n,this._right=this._left+n},moveTopSoThatHeight:function(e,t){var n=ep(this._height,e,t);this._height=n,this._top=this._bottom-n},moveBottomSoThatHeight:function(e,t){var n=ep(this._height,e,t);this._height=n,this._bottom=this._top+n},reduceWidthBy:function(e,t){var n=this._width,i=Math.max(n-e,t);return this.width=i,e-(n-i)},reduceHeightBy:function(e,t){var n=this._height,i=Math.max(n-e,t);return this.height=i,e-(n-i)},setLeft:function(e){this._left=e,this._right=e+this._width},setRight:function(e){this._right=e,this._left=e-this._width},setTop:function(e){this._top=e,this._bottom=e+this._height},setBottom:function(e){this._bottom=e,this._top=e-this._height},setWidth:function(e){this.setWidthFromLeft(e)},setWidthFromLeft:function(e){this._width=e,this._right=this._left+e},setWidthFromRight:function(e){this._width=e,this._left=this._right-e},setHeight:function(e){this.setHeightFromTop(e)},setHeightFromTop:function(e){this._height=e,this._bottom=this._top+e},setHeightFromBottom:function(e){this._height=e,this._top=this._bottom-e},left:np({set:function(e){this.setLeft(e)}}),right:np({set:function(e){this.setRight(e)}}),top:np({set:function(e){this.setTop(e)}}),bottom:np({set:function(e){this.setBottom(e)}}),width:np({set:function(e){this.setWidth(e)}}),height:np({set:function(e){this.setHeight(e)}}),__superMap:{_$wQ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PlanItem"}}),rp=P.a.extend({width:0,height:0,items:null,init:function(){var e=this,t=arguments;this.items=[],e.__s._$5W3$init.apply(e,t)},addItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0,width:0,height:0},n=arguments.length>2?arguments[2]:void 0,i=ip.create(this,e);return i.reset(t,n),this.items.push(i),this[e]=i,i},reset:function(){var e,t=this.items,n=t.length;for(e=0;e<n;e++)t[e].reset()},__superMap:{_$5W3$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Plan"}});function ap(e,t){return function(){if(!this[e]){this[e]=!0;var n=t.apply(this,arguments);return this[e]=!1,n}}}var sp=In.a.extend(_d,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",classes:["toolbar-items"],name:"positionedItems"}]}},className:"p2-toolbar-view",__QUALIFIED_CLASS_NAME__:"ToolbarView"},configuration:V.b({type:au}),nextResponder:V.b(Oi.c("configuration.nextResponder")),_views:H.d(k.c(globalThis.Object)),_currentItems:H.d(k.c(globalThis.Object)),_currentItemsSwap:H.d(k.c(globalThis.Object)),_layoutPlan:H.d(null),_preferredWidthObserver:H.d(null),_preferredWidthObserverCacheKey:H.d(null),viewMayHaveResized:B.h("isAttached",te.a.sharedInstance.window.bindingFor("width"),te.a.sharedInstance.window.bindingFor("height"),(function(e){var t=this;e&&Xh((function(){t.updateLayout()}))})),configurationItemsDidChange:B.h("configuration.items","isAttached",(function(e,t){e&&t&&this.update()})),update:function(){this.updateItems(),this.updateInitialMeasurements(),this.updateLayout()},updateItems:ap("_isUpdating",(function(){var e,t,n,i,r,a,s=this.configuration,o=this.positionedItems,l=this._currentItems,c=this._currentItemsSwap,u=rp.create(),d=this.rect,h=this._views,p=[],f=[],g=0;if(d){if(s){for(i=(e=s.items).length,g=0;g<i;g++)n=lp(this,s,r=e[g]),(t=l[a=Yl.b(n)])?delete l[a]:f.push(n),c[Yl.b(n)]=n,h[r]=n,n.instanceOf(bd)&&p.push(n);for(r in Pe.a.pause(),l)l.hasOwnProperty(r)&&(t=l[r],o.remove(t),delete l[r],delete h[r]);for(i=f.length,g=0;g<i;g++)n=f[g],o.push(n);Pe.a.resume(),this._currentItemsSwap=l,this._currentItems=c,this._layoutPlan=u;var m=p.reduce((function(e,t){return e+"."+Yl.b(t)}),"");if(this._preferredWidthObserverCacheKey===m)return;this._preferredWidthObserverCacheKey=m;var _=p.map((function(e){return e.bindingFor("preferredWidth")})),v=this._preferredWidthObserver;v&&(v.disconnect(),this._preferredWidthObserver=null),_.push(this.preferredWidthsDidChange),this._preferredWidthObserver=this.listen.apply(this,_)}}else this._layoutPlan=null})),updateInitialMeasurements:function(){var e,t,n,i=this.configuration,r=this.rect,a=i&&i.items,s=this._layoutPlan;if(s||(this.updateItems(),s=this._layoutPlan),s)if(r){if(a)for(e=a.length,t=0;t<e;t++)op(s,n=a[t],cp(this,i,n),r)}else this._layoutPlan=null},updateLayout:function(){var e=this.configuration,t=this._layoutPlan,n=this.rect,i=p.a.sharedInstance.devicePixelRatio;if(e&&n&&(t||(this.updateItems(),this.updateInitialMeasurements(),t=this._layoutPlan),t)){t.reset(),t.width=n.width,t.height=n.height,e.layout(t,this._views);for(var r,a,s,o=t.items,l=o.length,c=0;c<l;c++)(s=(a=cp(this,e,(r=o[c]).key)).style).translate(Math.round(r.left*i)/i,0).set("position","absolute").set("left",0),a.instanceOf(bd)?a.width=Math.ceil(r.width):r.widthHasChanged?s.set("width",Math.ceil(r.width)):s.clear("width"),r.heightHasChanged?s.set("height",Math.ceil(r.height)):s.clear("height")}},preferredWidthsDidChange:function(){this._isUpdating||(this.updateInitialMeasurements(),this.updateLayout())}});function op(e,t,n,i){!function(e){var t=e.style;t.translate(0,0).set("height",null),e.instanceOf(bd)||t.set("width",null)}(n);var r,a=n.rect;n.instanceOf(bd)&&((a={left:a.left,top:a.top,width:a.width,height:a.height}).width=n.preferredWidth),e.hasOwnProperty(t)?e[t].reset(a,i):(r=e.addItem(t,a,i),n.layoutItem=r,r.view=n)}function lp(e,t,n){var i=t[n];if(i&&i.instanceOf&&i.instanceOf(In.a))return i;var r=i;return(i=e[n])||_.b("Could not find a toolbar item for key: "+n,{toolbar:e,toolbarConfiguration:t}),r&&(i.instanceOf(_d)||_.b("Toolbar item has a configuration but is not configurable",{toolbar:e,toolbarConfiguration:t,itemConfiguration:r,item:i})),i.configuration=r,i}function cp(e,t,n){var i=t[n];return i&&i.instanceOf&&i.instanceOf(In.a)||(i=e[n])||_.b("Could not find a toolbar item for key: "+n,{toolbar:e,configuration:t}),i}var up=p.a.sharedInstance,dp=In.a.extend(ku.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["cw-slider-track"],name:"track"},{type:"ELEMENT",tagname:"div",classes:["cw-slider-track-before"],name:"trackBefore"},{type:"ELEMENT",tagname:"div",classes:["cw-slider-handle"],name:"handle"}],classes:["cw-slider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVertical",truevalue:"cw-vertical",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHorizontal",truevalue:"cw-horizontal",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingDragged",truevalue:"cw-being-dragged",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},className:"cw-ui-slider-view",__QUALIFIED_CLASS_NAME__:"SliderView"},tooltip:Object(V.b)(""),hasLeftIcon:Object(V.b)(!1),hasRightIcon:Object(V.b)(!1),pointerPadding:Object(V.b)(),isBeingDragged:Object(V.b)({readOnly:!0,dependencies:["_currentDragOffset"],get:Object.assign((function(){return!isNaN(this._currentDragOffset)}),{__CW__getter:function(e,t,n,i){return!isNaN(i.internalGet(this,t[0+n]))}})}),step:Object(V.b)(0),minValue:Object(V.b)(0),maxValue:Object(V.b)(1),value:Object(V.b)(.5),handleLength:Object(V.b)(0),trackLength:Object(V.b)(0),handlePositionTween:Object(V.b)(),isVertical:Object(V.b)(!1),isHorizontal:Object(V.b)({dependencies:["isVertical"],get:Object.assign((function(){return!this.isVertical}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}}),set:Object.assign((function(e){this.isVertical=!e}),{__CW__setter:function(e,t,n,i,r){n[0+i]=!e}}),writeDependencySetPathMap:[!1]}),isScrollingEnabled:Object(V.b)(!0),layoutMayHaveChanged:function(){this._measureSelf()},intervals:Object(V.b)(),notchValues:Object(V.b)(),notchSnapDistance:2,_isReversed:Object(V.b)({readOnly:!0,dependencies:["minValue","maxValue"],get:Object.assign((function(){return this.minValue>this.maxValue}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>i.internalGet(this,t[1+n])}})}),_minValue:Object(V.b)({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:Object.assign((function(){return this._isReversed?this.maxValue:this.minValue}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[2+n]):i.internalGet(this,t[1+n])}})}),_maxValue:Object(V.b)({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:Object.assign((function(){return this._isReversed?this.minValue:this.maxValue}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n])}})}),_notchPositions:Object(V.b)({cacheable:!0,readOnly:!0,dependencies:["notchValues","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween"],get:Object.assign((function(){var e=this.notchValues,t=this._minValue,n=this._maxValue;if(!e)return[];var i,r,a=[],s=e.length;for(i=0;i<s;i++)+(r=e[i])!==r||r<=t||r>=n||a.push(this._rawIdealHandlePositionForValue(r,t,n,this._handleTravel,this._inverseHandlePositionTween));return a.sort(pp),a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);if(!r)return[];var o,l=[],c=r.length;for(o=0;o<c;o++)+(e=r[o])!==e||e<=a||e>=s||l.push(this._rawIdealHandlePositionForValue(e,a,s,i.internalGet(this,t[3+n]),i.internalGet(this,t[4+n])));return l.sort(pp),l}})}),_scaledHandlePositionTween:Object(V.b)({readOnly:!0,dependencies:["handlePositionTween"],get:Object.assign((function(){var e=this.handlePositionTween;if(e||(e=fp),e._slider_scaledTween)return e._slider_scaledTween;var t=e(0),n=e(1);return t===+t&&n===+n&&t!==n||Object(_.b)("Function \u0192 used for handlePositionTween must return numbers, and \u0192(0) cannot equal \u0192(1).",{fOf0:t,fOf1:n,tweenFunction:e}),e._slider_scaledTween=function(i){return(e(i)-t)/(n-t)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r||(r=fp),r._slider_scaledTween)return r._slider_scaledTween;var a=r(0),s=r(1);return a===+a&&s===+s&&a!==s||Object(_.b)("Function \u0192 used for handlePositionTween must return numbers, and \u0192(0) cannot equal \u0192(1).",{fOf0:a,fOf1:s,tweenFunction:r}),r._slider_scaledTween=function(e){return(r(e)-a)/(s-a)}}})}),_handlePositionTween:hp("_scaledHandlePositionTween"),_inverseScaledHandlePositionTween:Object(V.b)({readOnly:!0,dependencies:["_scaledHandlePositionTween"],get:Object.assign((function(){var e=this._scaledHandlePositionTween;return e._slider_inverseTween?e._slider_inverseTween:e._slider_inverseTween=function(t){var n,i,r=0,a=1;do{(n=e(i=(a+r)/2)-t)<0?r=i:a=i}while(n>1e-7||n<-1e-7);return i}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r._slider_inverseTween?r._slider_inverseTween:r._slider_inverseTween=function(e){var t,n,i=0,a=1;do{(t=r(n=(a+i)/2)-e)<0?i=n:a=n}while(t>1e-7||t<-1e-7);return n}}})}),_inverseHandlePositionTween:hp("_inverseScaledHandlePositionTween"),_handleTravel:Object(V.b)({readOnly:!0,dependencies:["handleLength","trackLength"],get:Object.assign((function(){return this.trackLength-this.handleLength}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])}})}),_rawIdealHandlePositionForValue:function(e,t,n,i,r){return r((e-t)/(n-t))*i},_idealHandlePositionForValue:function(e){return this._rawIdealHandlePositionForValue(e,this._minValue,this._maxValue,this._handleTravel,this._inverseHandlePositionTween)},_rawIdealValueForHandlePosition:function(e,t,n,i,r){return r(e/i)*(n-t)+t},_idealValueForHandlePosition:function(e){return this._rawIdealValueForHandlePosition(e,this._minValue,this._maxValue,this._handleTravel,this._handlePositionTween)},_handlePosition:Object(V.b)({dependencies:["value","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween",up.bindingFor("devicePixelRatio")],writeDependencies:["value"],get:Object.assign((function(){var e=this._minValue,t=this._maxValue,n=Math.max(e,Math.min(t,this.value)),i=this._handleTravel,r=this._inverseHandlePositionTween,a=up.devicePixelRatio,s=this._rawIdealHandlePositionForValue(n,e,t,i,r);return s=Math.round(s*a)/a,Math.max(0,Math.min(i,s))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[2+n]),s=(e=Math.max(r,Math.min(a,i.internalGet(this,t[0+n]))),i.internalGet(this,t[3+n])),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[5+n]),c=this._rawIdealHandlePositionForValue(e,r,a,s,o);return c=Math.round(c*l)/l,Math.max(0,Math.min(s,c))}}),set:Object.assign((function(e){var t=this._minValue,n=this._maxValue,i=this._handleTravel,r=this._handlePositionTween,a=this.step;e=Math.max(0,Math.min(i,e));var s=this._rawIdealValueForHandlePosition(e,t,n,i,r);a&&(s=Math.round((s-t)/a)*a+t),s=Math.max(Math.min(s,n),t);var o=this.intervals;if(o)for(var l=o.length;l;){var c=o[1+(l-=2)],u=o[l],d=l?o[l-1]:-1/0;if(s<=c&&s>=u)break;if(s>d){s=s>c?c:Math.abs(s-u)<Math.abs(s-d)?u:d;break}if(!l&&s<u){s=u;break}}this.value=s}),{__CW__setter:function(e,t,n,i,r){var a=this._minValue,s=this._maxValue,o=this._handleTravel,l=this._handlePositionTween,c=this.step;e=Math.max(0,Math.min(o,e));var u=this._rawIdealValueForHandlePosition(e,a,s,o,l);c&&(u=Math.round((u-a)/c)*c+a),u=Math.max(Math.min(u,s),a);var d=this.intervals;if(d)for(var h=d.length;h;){var p=d[1+(h-=2)],f=d[h],g=h?d[h-1]:-1/0;if(u<=p&&u>=f)break;if(u>g){u=u>p?p:Math.abs(u-f)<Math.abs(u-g)?f:g;break}if(!h&&u<f){u=f;break}}n[0+i]=u}}),writeDependencySetPathMap:[!1]}),_transformPositionKey:Object(V.b)({readOnly:!0,dependencies:["isHorizontal"],get:Object.assign((function(){return this.isHorizontal?"translateX":"translateY"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"translateX":"translateY"}})}),_measurementLengthKey:Object(V.b)({readOnly:!0,dependencies:["isHorizontal"],get:Object.assign((function(){return this.isHorizontal?"offsetWidth":"offsetHeight"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"offsetWidth":"offsetHeight"}})}),_getPositionFromEvent:function(e){var t=this.element.getBoundingClientRect();return this.isHorizontal?e.clientX-t.left:this.trackLength-(e.clientY-t.top)},pointerDown:function(e){var t=this,n=arguments;if(t.__s._$6rX$pointerDown.apply(t,n),!this.isDisabled){var i=this._getPositionFromEvent(e);this._prepareForDrag(i);var r=-this._currentDragOffset;return e.target!==this.handle&&(r<0||r>this.handleLength)&&this._jumpToCursor(i),!0}},pointerMove:function(e){var t=this,n=arguments;if(t.__s._$7AQ$pointerMove.apply(t,n),!this.isDisabled)return this._moveDrag(this._getPositionFromEvent(e)),!0},pointerUp:function(e){var t=this,n=arguments;if(t.__s._$7EA$pointerUp.apply(t,n),!this.isDisabled)return this._endDrag(this._getPositionFromEvent(e)),!0},wheel:function(e){if(!this.isDisabled&&this.isScrollingEnabled&&(e.preventDefault(),!this.isBeingDragged)){var t=te.a.getPath("sharedInstance.isMac")?-1:1,n=this._minValue,i=this._maxValue,r=this.value,a=Math.max(0,Math.min(1,(r-n)/(i-n))),s=this._inverseHandlePositionTween(a)+(-e.deltaX+e.deltaY)/1e3*t,o=n+this._handlePositionTween(Math.max(0,Math.min(1,s)))*(i-n);return r!==o&&(this.value=o),!0}},_currentDragOffset:Object(V.b)(NaN),_prepareForDrag:function(e){this._currentDragOffset=this._handlePosition-e},_moveDrag:function(e){if(this.isBeingDragged){for(var t,n=e+this._currentDragOffset,i=this._notchPositions,r=this.notchSnapDistance,a=i.length;a--;)t=i[a],Math.abs(t-n)<r&&(n=t);this._handlePosition=n}},_endDrag:function(e){this._currentDragOffset=NaN},_endDragWhenBecomesDisabled:Object(B.h)("isDisabled",(function(e){e&&this.isBeingDragged&&this._endDrag()})),_jumpToCursor:function(e){this._currentDragOffset=-this.handleLength/2|0,this._moveDrag(e)},_positionHandle:Object(B.h)("_handlePosition","isVertical","_handleTravel","_transformPositionKey",(function(e,t,n,i){var r,a=+e===e?t?n-e:e:n/2,s="translateX"===i?"width":"top";Object(yl.c)(this.trackBefore,((r={})[s]=a,r)),Object(yl.c)(this.handle)[i](a)})),_measureSelf:Object(B.h)("isAttached","_measurementLengthKey",(function(e,t){e&&this.beginBatchSet().setIfChanged("handleLength",this.handle[t]).setIfChanged("trackLength",this.element[t]).end()})),_maintainPointerPaddingElement:Object(B.h)("pointerPadding",(function(e){var t=0|(e&&e.left),n=0|(e&&e.top),i=0|(e&&e.right),r=0|(e&&e.bottom),a=this._pointerPaddingElement;t||n||i||r?(a||(a=this._pointerPaddingElement=document.createElement("div")),Object(yl.c)(a).set("position","absolute").set("left",-t).set("top",-n).set("right",-i).set("bottom",-r),a.parentNode||this.element.appendChild(a)):a&&a.parentNode&&this.element.removeChild(a)})),__superMap:{_$6rX$pointerDown:"pointerDown",_$7AQ$pointerMove:"pointerMove",_$7EA$pointerUp:"pointerUp"}});function hp(e){return Object(V.b)({dependencies:[e,"_isReversed"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])?r._slider_reversedTween?r._slider_reversedTween:r._slider_reversedTween=function(e){return 1-r(e)}:r}})}function pp(e,t){return e-t}function fp(e){return e}fp._slider_scaledTween=fp,fp._slider_inverseTween=fp;var gp=P.a.extend(B.b,{isDisabled:V.b(!1),tooltip:V.b(""),value:V.b(NaN),minValue:V.b(NaN),maxValue:V.b(NaN),notchValues:V.b(),handlePositionTween:V.b(),step:V.b(NaN),isScrollingEnabled:V.b(!0),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarSliderConfiguration"}}),mp=gp.extend({unzoomedZoomLevel:V.b(NaN),staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarZoomSliderConfiguration"}}),_p=mp.extend({gridViewController:V.b(),maxValue:Oi.c("gridViewController.minimumColumnCount"),minValue:Oi.c("gridViewController.maximumColumnCount"),value:Oi.c("gridViewController.preferredColumnCount"),isDisabled:Oi.c("gridViewController.isEmpty"),step:1,isScrollingEnabled:!1,staticMembers:{__QUALIFIED_CLASS_NAME__:"ToolbarFlowGridZoomSliderConfiguration"}}),vp=dp.extend(_d,{staticMembers:{className:"p2-toolbar-slider",__QUALIFIED_CLASS_NAME__:"ToolbarSlider"},marginLeft:30,marginRight:40,configuration:V.b({type:gp}),tooltip:V.b(Oi.c("configuration.tooltip")),notchValues:V.b(Oi.c("configuration.notchValues")),value:V.b(Oi.c("configuration.value")),minValue:V.b(Oi.c("configuration.minValue")),maxValue:V.b(Oi.c("configuration.maxValue")),step:V.b(Oi.c("configuration.step")),handlePositionTween:V.b(Oi.c("configuration.handlePositionTween")),isScrollingEnabled:V.b(Oi.c("configuration.isScrollingEnabled")),isDisabled:V.b({readOnly:!0,dependencies:["configuration.isDisabled"],get:Object.assign((function(){return this.getPath("configuration.isDisabled")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})})}).extend({staticMembers:{className:"p2-toolbar-zoom-slider",__QUALIFIED_CLASS_NAME__:"ToolbarZoomSlider"},configuration:V.b({type:mp}),unzoomedZoomLevel:V.b(Oi.c("configuration.unzoomedZoomLevel")),_maintainHandleReadout:B.h("value","unzoomedZoomLevel","minValue","maxValue",(function(e,t,n){if(e&&t){e!==n&&this._bringUpHandleReadout();var i=this._readoutElement;if(i){var r=Math.round(100*e),a=r?e===t?s.d("Toolbar.ZoomSlider.Tooltip.FitsInWindow"):r+"%":"";i.textContent=a,i.classList.toggle("percentage","%"===a.slice(-1))}}})),_bringUpHandleReadout:function(){var e=this._readoutElement;e||(this._readoutElement=e=document.createElement("div"),e.classList.add("handle-readout"),this.handle.appendChild(e)),yl.c(e).set("opacity",1),this._readoutDeathTimeout&&clearTimeout(this._readoutDeathTimeout),this._readoutDeathTimeout=X.a(this._killHandleReadout,1e3)},_killHandleReadout:H.d((function(){return function(){var e=this._readoutElement;e&&yl.c(e).set("opacity",0)}.bind(this)}))}),bp=Nu,yp=n(1244),wp=n(671),Ip=n(1245),Sp=n(1246),Cp=n(1247),Ep=n(1248),Ap=n(1249),Op=n(1250),Tp=sp.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"secondaryToolbar"}]}},__QUALIFIED_CLASS_NAME__:"MainToolbarView"},secondaryToolbar:V.b({readOnly:!0,dependencies:["configuration"],get:Object.assign((function(){if(this.configuration&&this.configuration.secondaryToolbar)return this.configuration.secondaryToolbar}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).secondaryToolbar)return i.internalGet(this,t[0+n]).secondaryToolbar}})}),homeButton:V.b({defaultValue:k.c(sd.extend(bd),{appName:s.d("Application.Title")})}),userButton:V.b({defaultValue:k.c(gd.extend({helpAnchor:"mmbc402b84",marginLeft:30,aggressiveMinimumWidth:64,minimumWidth:V.b({readOnly:!0,dependencies:["widthOptions"],get:Object.assign((function(){var e=this.widthOptions,t=1e4;for(var n in e)e.hasOwnProperty(n)&&e[n].width<t&&(t=e[n].width);return t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=1e4;for(var s in r)r.hasOwnProperty(s)&&r[s].width<a&&(a=r[s].width);return a}})})}))}),sidebarButton:V.b({defaultValue:k.c(Yh.extend(bp,{additionalClassNames:F.b(["sidebar-button"]),icon:Sp}))}),thumbstripButton:V.b({defaultValue:k.c(Yh.extend(bp,{additionalClassNames:F.b(["thumbstrip-button"]),icon:Ep}))}),returnToButton:V.b({defaultValue:k.c(Id.extend(bp,{additionalClassNames:F.b(["back-button"]),icon:wp}))}),zoomSlider:V.b({defaultValue:k.c(vp.extend({pointerPadding:{left:20,right:20}}))}),routeSwitcher:V.b({defaultValue:k.c(xu,{marginLeft:30,marginRight:30}),downstreamBindings:{segments:"(owner).routeSwitcherSegments",value:"(owner).applicationRootRoute"}}),routeSwitcherSegments:V.b(),applicationRootRoute:V.b(),mediaInfo:V.b({defaultValue:k.c(qh)}),containerInfo:V.b({defaultValue:k.c(Fh)}),favoriteButton:V.b({defaultValue:k.c(Yh.extend(bp,{additionalClassNames:F.b(["favorite-button"]),icon:Ip}))}),downloadButton:V.b({defaultValue:k.c(Lh)}),shareButton:V.b({defaultValue:k.c(wd.extend(bp,Wu,{additionalClassNames:F.b(["share-button"]),configuration:V.b({type:su}),icon:Cp}))}),deleteButton:V.b({defaultValue:k.c(wd.extend(bp,{additionalClassNames:F.b(["trash-button"]),configuration:V.b({type:su}),icon:Ap}))}),addToAlbumButton:V.b({defaultValue:k.c(wd.extend(bp,Wu,{additionalClassNames:F.b(["new-album-button"]),configuration:V.b({type:su}),icon:yp}))}),uploadButton:V.b({defaultValue:k.c(md.extend(vd,bp,yd,Wu).extend({additionalClassNames:F.b(["p2-toolbar-button","upload-button"]),icon:Op}))}),separator1:V.b(k.c(Qh)),separator2:V.b(k.c(Qh)),separator3:V.b(k.c(Qh)),separator4:V.b(k.c(Qh)),updateLayout:function(){var e=this,t=arguments;e.__s._$272$updateLayout.apply(e,t),this.containerInfo.updateLayout(),this.userButton.updateLayout()},__superMap:{_$272$updateLayout:"updateLayout"}}),Mp=n(405),Dp=n(1243),Pp=n(382),Lp={mixinDependencies:[Pp.b],scrollIndicatorShouldEnlarge:V.b(!1)},Rp=Pp.a.extend(Lp,{staticMembers:{className:"p2-flat-size-fading-horizontal-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FlatSizeFadingHorizontalScrollIndicatorView"}}),xp=Pp.c.extend(Lp,{staticMembers:{className:"p2-flat-size-fading-vertical-scroll-indicator-view",__QUALIFIED_CLASS_NAME__:"FlatSizeFadingVerticalScrollIndicatorView"}}),Np=In.a.extend(Mp.a,Dp.a,{toolbarView:V.b(),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"}]}},className:"p2-toolbar-scroll-view",__QUALIFIED_CLASS_NAME__:"ToolbarScrollView"},horizontalScrollIndicatorClass:Rp,verticalScrollIndicatorClass:xp,init:function(){var e=this,t=arguments;e.__s._$QD$init.apply(e,t),Ze.a(this.element,"wheel",this.wheel.bind(this))},width:V.b({binding:te.a.sharedInstance.window.bindingFor("width"),didChange:function(){this.validateScrollPosition(),this.showScrollIndicators()}}),scrollMaxX:V.b({readOnly:!0,cacheable:!1,dependencies:[te.a.sharedInstance.window.bindingFor("width")],get:Object.assign((function(){return Math.max(te.a.sharedInstance.window.width,950)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),950)}})}),_renderScroll:B.h("scrollX","toolbarView",(function(e,t){t&&(t.style.translateDevicePixels(-e,0),t.didScrollInParent&&t.didScrollInParent())})),__superMap:{_$QD$init:"init"}}),Fp=In.a.extend({mixinDependencies:[zl,Tu,Lu],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"primaryView"},{type:"VIEWOUTLET",tagname:"view",name:"sidebarView"},{type:"VIEWOUTLET",tagname:"view",name:"toolbarScrollView"}],classes:["p2-main-view-container"]},{type:"VIEWOUTLET",tagname:"view",name:"uploadProgressView"},{type:"VIEWOUTLET",tagname:"view",name:"transactionProgressView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInDarkMode",truevalue:"dark-mode",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInEditMode",truevalue:"edit-mode",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"MainView"},additionalClassNames:F.b(["p2-main-view","mouse-style","regular-size"]),toolbarScrollView:V.b({defaultValue:k.c(Np),downstreamBindings:{toolbarView:"(owner).toolbarView"}}),toolbarView:V.b({defaultValue:k.c(Tp),downstreamBindings:{routeSwitcherSegments:"(owner).routeSwitcherSegments",applicationRootRoute:"(owner).applicationRootRoute",configuration:"(owner).toolbarConfiguration"}}),toolbarConfiguration:V.b(),routeSwitcherSegments:V.b(),applicationRootRoute:V.b(),isInDarkMode:V.b(),isInEditMode:V.b(),currentUploadViewController:V.b()}),Vp=n(543),kp=n(240);function Bp(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function jp(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Bp(a,i,r,s,o,"next",e)}function o(e){Bp(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Up=P.a.extend(B.b,{staticMembers:{fromFullyLoadedSelection:function(e,t){return function(e,t){return Up.extend({size:V.b({readOnly:!0,dependencies:["selectionDidChange"],get:function(){return this.selection.length}}),isFullyLoaded:V.b({readOnly:!0,dependencies:[],get:function(){return!0}}),getSelectedIndices:function(){var e=this,t=kp.a.create();return this.selection.forEach((function(n){var i=e.collection.indexOf(n);t.add(i)})),t}}).create({selection:e,collection:t})}(e,t)},fromArray:function(e,t){var n=oi.a.create(e);return Up.fromFullyLoadedSelection(n,t)},__QUALIFIED_CLASS_NAME__:"SparseSelection"},selection:V.b(),size:V.b({readOnly:!0,dependencies:["selectionDidChange"],get:function(){var e=this.selectedIndices;return e?e.length:0}}),length:V.b(Oi.c("size")),isFullyLoaded:V.b({readOnly:!0,dependencies:["selectionDidChange","collection","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:function(){return!this.selection.encodedContains(void 0)}}),getFullyLoadedSelection:function(e){var t=this;return jp(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.ensureSelectionIsFullyLoaded(e);case 2:return n.abrupt("return",t.selection);case 3:case"end":return n.stop()}}),n)})))()},getSelectedIndices:function(){return this.selectedIndices},ensureSelectionIsFullyLoaded:function(e,t){var n=this;return jp(regeneratorRuntime.mark((function i(){var r,a,s,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.isFullyLoaded){i.next=2;break}return i.abrupt("return");case 2:i.next=5;break;case 5:if(r=n.selectionRecordsLoader,a=n.selectedIndices,s=n.length,r){i.next=9;break}return _.b("Unable to ensure sparse selection is fully loaded"),i.abrupt("return");case 9:return o=t||s,n.loadsInProgress=o,e&&Vp.a(e,"increaseLoadsInProgress",o),i.next=14,r.getIncludeExcludeRecords(a.toArray());case 14:n.loadsInProgress=0,e&&Vp.a(e,"decreaseLoadsInProgress",o);case 16:case"end":return i.stop()}}),i)})))()},selectionRecordsLoader:V.b({readOnly:!0,dependencies:["collection","container"],get:Object.assign((function(){var e=this.container,t=this.collection;if(e&&t)return new Bd(t,e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(r&&a)return new Bd(a,r)}})}),isLoadingInProgress:V.b({readOnly:!0,dependencies:["loadsInProgress"],get:Object.assign((function(){return this.loadsInProgress>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})}),loadsInProgress:V.b(0),selectionDidChange:B.i(),collection:V.b(),container:V.b(),selectedIndices:V.b()}),Gp={date1Formatter:Hd,date2Formatter:Hd},Hp=P.a.extend(B.b,{locKeys:{"No.Similarities":"Date.Range.No.Similarities","Same.Year":"Date.Range.Same.Year","Same.Month":"Date.Range.Same.Month","Same.Day":"Date.Range.Same.Day","Same.Day.No.Year":"Date.Range.Same.Day.No.Year","No.Similarities.Medium":"Date.Range.No.Similarities.Medium","Same.Year.Medium":"Date.Range.Same.Year.Medium","Same.Month.Medium":"Date.Range.Same.Month.Medium","Same.Day.Medium":"Date.Range.Same.Day.Medium","Same.Day.No.Year.Medium":"Date.Range.Same.Day.No.Year.Medium","Same.Day.Day.Of.Week":"Date.Range.Same.Day.Day.Of.Week","Same.Day.Tomorrow":"Date.Range.Same.Day.Tomorrow","Same.Day.Yesterday":"Date.Range.Same.Day.Yesterday","Same.Day.Today.Same.Time":"Date.Range.Same.Day.Today.Same.Time","Same.Day.Today.Time.Range":"Date.Range.Same.Day.Today.Time.Range","Same.Day.Today.Time.Range.Same.Period":"Date.Range.Same.Day.Today.Time.Range.Same.Period","Today.To.Tomorrow":"Date.Range.Today.To.Tomorrow","Yesterday.To.Tomorrow":"Date.Range.Yesterday.To.Tomorrow","Yesterday.To.Today":"Date.Range.Yesterday.To.Today","Day.Of.Week.To.Day.Of.Week":"Date.Range.Days.Of.Week","Day.Of.Week.To.Tomorrow":"Date.Range.Day.Of.Week.To.Tomorrow","Day.Of.Week.To.Today":"Date.Range.Day.Of.Week.To.Today","Day.Of.Week.To.Yesterday":"Date.Range.Day.Of.Week.To.Yesterday"},formatStyle:{MEDIUM:"MEDIUM"},_dateOrTimezoneDidChangeRelay:B.h({inputs:[bn.sharedInstance.bindingFor("dateOrTimezoneDidChange")],callback:function(){this.dateOrTimezoneDidChange()}}),dateOrTimezoneDidChange:B.i(),locRange:function(e,t,n){return t?n?(Gp.date1=t,Gp.date2=n,s.d(this.locKeys[e],Gp)):s.d(this.locKeys[e],{date:t,dateFormatter:Hd}):s.d(this.locKeys[e],{date:n,dateFormatter:Hd})},fmt:function(e,t,n){var i=this.coerceNumberToDate(e),r=this.coerceNumberToDate(t);if(!i&&!r)return"";if(i?r||(r=i):i=r,isNaN(i.getTime())||isNaN(r.getTime()))return"";if(r<i){var a=r;r=i,i=a}var s,o=bn.sharedInstance;if(o.isColloquial(i)&&o.isColloquial(r))s=this.findLocKeyForColloquialDate(i,r);else if(s=this.findLocKeyForNonColloquialDate(i,r),void 0!==n&&n===this.formatStyle.MEDIUM){var l=s+".Medium";this.locKeys[l]&&(s=l)}return this.locRange(s,i,r)},findLocKeyForNonColloquialDate:function(e,t){return e.getFullYear()!==t.getFullYear()?"No.Similarities":e.getMonth()!==t.getMonth()?"Same.Year":e.getDate()!==t.getDate()?"Same.Month":vn(e)?"Same.Day.No.Year":"Same.Day"},findLocKeyForColloquialDate:function(e,t){var n=bn.sharedInstance;if(!mn(e,t))return n.colloquialLocKey(e)+".To."+n.colloquialLocKey(t);if(n.isToday(e)){var i=new Date(t);return i.setSeconds(0,0),i-e<=9e5?"Same.Day.Today.Same.Time":(e.getHours()/12|0)===(t.getHours()/12|0)?"Same.Day.Today.Time.Range.Same.Period":"Same.Day.Today.Time.Range"}return"Same.Day."+n.colloquialLocKey(e)},coerceNumberToDate:function(e){return"number"===typeof e?new Date(e):e},staticMembers:{__QUALIFIED_CLASS_NAME__:"DateRangeFormatter"}}),Wp=Hp.create(),$p=n(257),zp=n(477),Kp=n(389),qp=n(672),Qp={mixinDependencies:[Kp.a,qp.b],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"cw-selected",falsevalue:"cw-not-selected",attributes:{}}],attributes:{"aria-selected":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"true",attributes:{},attribute:"aria-selected"}}}}},isFocusable:!0,tabIndex:-1,scrollView:Object(V.b)({get:function(){for(var e=this;null!==e&&!e.instanceOf(Mp.a);)e=e.parent;return e}}),gestureRecognizerShouldReceive:function(e){var t=this,n=arguments,i=this.scrollView;return(!i||!i.hasMomentum)&&t.__s._$QB$gestureRecognizerShouldReceive.apply(t,n)},__superMap:{_$QB$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}};function Yp(e){var t=document.createElement("div");t.innerHTML=e;var n=t.children[0];return t.removeChild(n),n}var Zp=n(345),Xp=n(1313),Jp=n(804),ef=n(327),tf=n(356),nf=Bl.extend({staticMembers:{className:"p2-inline-text-field",__QUALIFIED_CLASS_NAME__:"InlineTextField"},model:null,acceptableHitTargets:k.c(Array),_parentNode:null,_targetElement:null,_targetElementDisplayValue:null,insert:function(e,t){null!==this._targetElement&&this.remove(),this._targetElement=e,this.parent=t;var n=this._parentNode=e.parentNode,i=this.element;!function(e,t){var n=t.style,i=globalThis.getComputedStyle(e);n.width=i.getPropertyValue("width"),n.height=i.getPropertyValue("height"),n.position=i.getPropertyValue("position"),n.top=i.getPropertyValue("top"),n.bottom=i.getPropertyValue("bottom"),n.right=i.getPropertyValue("right"),n.left=i.getPropertyValue("left"),n.display=i.getPropertyValue("display"),n.flex=i.getPropertyValue("flex"),n.transform=i.getPropertyValue("transform"),n.zIndex=i.getPropertyValue("z-index")}(e,i),function(e,t){var n=t.style,i=globalThis.getComputedStyle(e);n.fontFamily=i.getPropertyValue("font-family"),n.fontSize=i.getPropertyValue("font-size"),n.fontWeight=i.getPropertyValue("font-weight"),n.lineHeight=i.getPropertyValue("line-height"),n.textAlign=i.getPropertyValue("text-align")}(e,i),n.insertBefore(i,e);var r=globalThis.getComputedStyle(e);this._targetElementDisplayValue=r.getPropertyValue("display"),""===this._targetElementDisplayValue&&(this._targetElementDisplayValue="block"),e.style.display="none",this.element.focus(),this.select(),this._addGlobalClickListener()},remove:function(){this._targetElement&&(this._parentNode.removeChild(this.element),this._targetElement.style.display=this._targetElementDisplayValue,this._targetElement=null,this.acceptableHitTargets.length=0,this.parent=null,this._removeGlobalClickListener())},sendEvent:function(e){this.__s._$tA$sendEvent.call(this,e,this),e===this.action&&this.remove()},keyDown:function(e){var t=this,n=arguments;switch(t.__s._$xQ$keyDown.apply(t,n),e.keyCode){case ml.a.ESC:this.remove()}return!0},keyUp:function(){return!0},pointerDown:function(){return!0},_clickEventHandler:function(e){var t=e.target;if(this._targetElement&&t!==this._targetElement&&t!==this.element&&t!==this.inputNode){if(this._targetElement.hasChildNodes())for(var n=this._targetElement.children,i=0,r=n.length;i<r;i++)if(t===n[i])return;if(this.acceptableHitTargets.length>0)for(var a=this.acceptableHitTargets,s=0,o=a.length;s<o;s++){var l=a[s];if("string"===typeof l&&rf(t,l))return;if(l instanceof HTMLElement&&l===t)return}return this.sendEvent(this.action),!0}},_addGlobalClickListener:function(){this.__eventListener||(this.__eventListener=this._clickEventHandler.bind(this)),Ze.a(document.body,"mousedown",this.__eventListener)},_removeGlobalClickListener:function(){this.__eventListener&&Xe.a(document.body,"mousedown",this.__eventListener)},__superMap:{_$tA$sendEvent:"sendEvent",_$xQ$keyDown:"keyDown"}}).create();function rf(e,t){if(!t||0===t.length)return!1;var n=e.parentNode;n||(n=document);var i=n.querySelectorAll(t);if(!i)return!1;for(var r=0,a=i.length;r<a;r++)if(i[r]===e)return!0;return!1}var af=n(448),sf=n(485),of=n(266),lf=[],cf={},uf=P.a.extend({STRIPES:[{gap:2/354,minGap:0,maxGap:1,height:8/354,minHeight:2,inset:9/354,minInset:2,opacity:.6,cropX:0,cropY:.1,flipHorizontal:!0},{gap:2/354,minGap:0,maxGap:1,height:8/354,minHeight:2,inset:8/354,minInset:2,opacity:.36,cropX:1,cropY:0,flipHorizontal:!1}],forEachMultiStripe:function(e,t,n,i,r,a){var s,o,l,c,u=Math.min(t,this.STRIPES.length),d=r,h=i,p=a;for(s=0;s<u;s++){o=this.STRIPES[s],d-=Math.max(o.minGap,Math.min(o.maxGap,Math.round(o.gap*n)))+(l=Math.max(o.minHeight,Math.round(o.height*n))),h+=c=Math.max(o.minInset,Math.round(o.inset*n)),p-=2*c;var f=5,g=6,m=arguments.length;lf.length=m+f-g;for(var _=g,v=f;_<m;_++,v++)lf[v]=arguments[_];var b=lf;b[0]=o,b[1]=h,b[2]=d,b[3]=Math.max(0,p),b[4]=Math.max(0,l),e.apply(void 0,b)}},drawMultiStripes:function(e,t,n,i,r,a,s,o,l,c){return this._context=e,this._content=t,this._startingWidth=s,this._ignoreFlip=o,this._ignoreOpacity=l,this._shouldMaximizePerformance=c,this._paintWasFullyPretty=!0,this.forEachMultiStripe(this._drawSingleStripe,n,i,r,a,s),this._ignoreOpacity||(this._context.globalAlpha=1),this._paintWasFullyPretty},multiStripesHeightForSizeAndQuantity:function(e,t){for(var n,i=0,r=Math.min(t,this.STRIPES.length);r--;)n=this.STRIPES[r],i+=Math.max(n.minGap,Math.min(n.maxGap,Math.round(n.gap*e))),i+=Math.max(n.minHeight,Math.round(n.height*e));return i},_drawSingleStripe:Bu.b((function(e,t,n,i,r){this._ignoreOpacity||(this._context.globalAlpha=e.opacity);var a=!this._ignoreFlip&&e.flipHorizontal;a&&(this._context.save(),this._context.translate(this._startingWidth,0),this._context.scale(-1,1)),this._paintWasFullyPretty=uf.paintInRect(this._context,this._content,t,n,i,r,e.cropX,e.cropY,this._shouldMaximizePerformance)&&this._paintWasFullyPretty,a&&this._context.restore()})),paintInRect:function(e,t,n,i,r,a,s,o,l){var c=isNaN(s)?.5:s,u=isNaN(o)?.5:o,d=Math.round(n),h=Math.round(i),p=Math.round(r),f=Math.round(a);if(!pi.a(t,sf.a))return e.fillStyle=t,e.fillRect(d,h,p,f),!0;var g=t.physicalWidth,m=t.physicalHeight;ef.c(g,m,p,f,cf);var _=cf.width,v=cf.height,b=Math.round(p*g/_),y=Math.round(f*m/v),w=Math.round((g-b)*c),I=Math.round((m-y)*u);return t.drawIntoContextUsingCustomDrawImage(e,tf.b.avoidingWorkIf(l),w,I,b,y,d,h,p,f)},fillRoundedCorner:function(e,t,n,i,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(t,n+a*i),e.arcTo(t,n,t+r*i,n,i),e.lineTo(t,n),e.closePath(),e.fill()},fillRoundedCornersOfRect:function(e,t,n,i,r,a,s,o,l,c){s||uf.fillRoundedCorner(e,t,n,a,1,1),o||uf.fillRoundedCorner(e,t+i,n,a,-1,1),l||uf.fillRoundedCorner(e,t,n+r,a,1,-1),c||uf.fillRoundedCorner(e,t+i,n+r,a,-1,-1)},getRectMask:function(e,t,n,i,r){var a=af.a(arguments),s=this._rectMaskCache[a];if(s)return s;(s=Sh.canvasPool.getInstance()).width=t,s.height=n;var o=s.getContext("2d");return o.fillStyle=e,r&&(o.fillRect(0,0,r,n),o.fillRect(0,0,t,r),o.fillRect(t-r,0,r,n),o.fillRect(0,n-r,t,r)),this.fillRoundedCornersOfRect(o,0,0,t,n,i+2*r*Math.sqrt(2)),this._rectMaskCache[a]=s,X.a(of.a(this._disposeRectMaskAtCacheKey,this,a),1e4),s},_disposeRectMaskAtCacheKey:function(e){Sh.canvasPool.disposeInstance(this._rectMaskCache[e]),delete this._rectMaskCache[e]},_rectMaskCache:k.c(Object)}).create(),df={MOMENTS:"album",PHOTOS:"album",LIVE:"live",EXPOSURE:"live",PANORAMAS:"panoramas",FAVORITES:"favorites",VIDEOS:"videos",SLOMO:"slomo",DEPTH:"depth",TIMELAPSE:"timelapse",BURSTS:"bursts",SCREENSHOT:"screenshot",ANIMATED:"animated",HIDDEN:"hidden",DELETED:"trash",SHARED:"icloud",VIRTUAL_FOLDER:"virtualfolder",CMM_SHARE:"icloud"},hf={},pf=In.a.extend(Rn,Kp.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["icon"],attributes:{"data-icon":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"iconName",attributes:{},attribute:"data-icon"}}},{type:"ELEMENT",tagname:"canvas",name:"keyMediaPreviewCanvas",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"previewDerivativeGeometricLength",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"previewDerivativeGeometricLength",attributes:{},unit:"px",property:"height"}}},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["label"],name:"_labelSpan"}],classes:["label-wrap"],name:"_label",styles:{"line-height":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"labelHeight",attributes:{},unit:"px",property:"line-height"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"labelHeight",attributes:{},unit:"px",property:"height"}}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowPreview",truevalue:"has-preview",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"label-disabled",attributes:{}}],attributes:{"data-item-type":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"itemTypeSelector",attributes:{},attribute:"data-item-type"}}}},className:"p2-container-list-item-view",__QUALIFIED_CLASS_NAME__:"ContainerListItemView"},init:function(){var e=this,t=arguments;e.__s._$Zy$init.apply(e,t);var n=this.editLabelGestureRecognizer=Zp.b.create({delegate:this,event:"editLabel"});this.addGestureRecognizer(n)},isDisabled:V.b(!1),labelHeight:V.b({readOnly:!0,dependencies:["previewDerivativeGeometricLength"],get:Object.assign((function(){return this.previewDerivativeGeometricLength+4}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+4}})}),acceptedDragTypes:H.d(["MediaTileDragType"]),acceptDataForDragType:function(e,t,n){var i=this;if(this.isDisabled)return!1;if(this.content.isNormalAlbum){var r=n.ownersSparseSelection;if(r&&r.length>1){if(Dd.isSelectionOverLimit(r))return Dd.showSelectionLimitAlert(ph.ADD_TO_ALBUM),!0;r.getFullyLoadedSelection(n).then((function(e){i.sendEvent("addMediasToAlbumViaDragAndDrop",e,i.content)}))}else{var a=n._media||n._container;this.sendEvent("addOneMediaToAlbumViaDragAndDrop",a,this.content)}}return!0},content:V.b(),isDraggedOver:V.b(!1),dragDidEnter:function(){this.content.isNormalAlbum&&(this.isDraggedOver=!0)},dragDidLeave:function(){this.isDraggedOver=!1},dragDidDrop:function(){this.isDraggedOver=!1},_loadContentKeyMedia:B.h("content","content.isNormalAlbum","content.keyMedia",(function(e,t,n){!n&&e&&t&&(e.__cip_is_already_loaded||e.__cip_is_loading_key_asset_media||(e.__cip_is_loading_key_asset_media=!0,e.__cip_is_already_loaded=!0,e.ensureKeyMedia()))})),shouldShowPreview:V.b({readOnly:!0,dependencies:["content.isNormalAlbum","previewDerivativeLoader.derivative"],get:Object.assign((function(){return!!this.getPath("content.isNormalAlbum")&&Boolean(this.getPath("previewDerivativeLoader.derivative"))}),{__CW__getter:function(e,t,n,i){return!!i.internalGetPath(this,t[0+n])&&Boolean(i.internalGetPath(this,t[1+n]))}})}),previewDerivativeGeometricLength:V.b(),previewRoundedCornerRadius:V.b(),previewDerivativeLoader:V.b({strong:!0,defaultValue:k.c(Xp.a,{derivativeRequestReason:Jp.a.CONTAINER_LIST_ICON,offscreeniness:0,shouldCover:!0,shouldCorrectForDevicePixelRatio:!0,wantsDownsampledDerivatives:!0,priority:1e7}),downstreamBindings:{media:"(owner).content.keyMedia",width:"(owner).previewDerivativeGeometricLength",height:"(owner).previewDerivativeGeometricLength"}}),_paintKeyMediaDerivative:B.h("content.isNormalAlbum","keyMediaPreviewCanvas","previewDerivativeGeometricLength","previewDerivativeLoader.derivative","previewRoundedCornerRadius",p.a.sharedInstance.bindingFor("devicePixelRatio"),(function(e,t,n,i,r,a){if(i&&e&&t){var s=t.getContext("2d"),o=Math.ceil(n*a);t.width!==o?t.width=t.height=o:s.clearRect(0,0,o,o);var l=ef.a(i.physicalWidth,i.physicalHeight,n,n,hf);i.drawIntoContextUsingCustomDrawImage(s,tf.b,l.cropX,l.cropY,l.cropWidth,l.cropHeight,0,0,o,o),s.globalAlpha=Math.min(1,Math.max(0,.2*a)),s.drawImage(uf.getRectMask("black",o,o,r*a,1),0,0),s.globalAlpha=1,s.globalCompositeOperation="destination-out",s.drawImage(uf.getRectMask("black",o,o,r*a,0),0,0),s.globalCompositeOperation="source-over"}})),label:V.b({readOnly:!0,type:String,dependencies:["content","content.isPredefinedSmartAlbum","content.name"],get:Object.assign((function(){var e=this.content;return e?e.isPredefinedSmartAlbum?s.d("Container.Title."+e.recordName):e.name||"":""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.isPredefinedSmartAlbum?s.d("Container.Title."+r.recordName):r.name||"":""}})}),iconName:V.b({readOnly:!0,type:String,dependencies:["content","content.isPredefinedSmartAlbum","content.isFolder","content.isNormalAlbum"],get:Object.assign((function(){var e=this.content;return e?pi.a(e,ql)?df[e.type]||"":e.isPredefinedSmartAlbum?df[e.recordName]||"":e.isFolder?"genericfolder":e.isNormalAlbum?"album":"":""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?pi.a(r,ql)?df[r.type]||"":r.isPredefinedSmartAlbum?df[r.recordName]||"":r.isFolder?"genericfolder":r.isNormalAlbum?"album":"":""}})}),itemTypeSelector:V.b({readOnly:!0,type:String,dependencies:["content","content.isFolder","content.isNormalAlbum","content.isPredefinedSmartAlbum"],get:Object.assign((function(){var e=this.content;return e?e.isPredefinedSmartAlbum?("predefined-"+e.recordName).toLowerCase():e.isMediaTypesFolder?"media-types":e.isVirtualFolder?"my-albums":e.isFolder?"user-folder":e.isNormalAlbum?"user-album":void 0:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.isPredefinedSmartAlbum?("predefined-"+r.recordName).toLowerCase():r.isMediaTypesFolder?"media-types":r.isVirtualFolder?"my-albums":r.isFolder?"user-folder":r.isNormalAlbum?"user-album":void 0:""}})}),gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;return(e!==this.editLabelGestureRecognizer||!(!this.parent.isSelected||this.isDisabled)&&(t.target===this._label||t.target===this._labelSpan)&&!this.content.isPredefinedSmartAlbum&&"VIRTUAL_FOLDER"!==this.content.type)&&n.__s._$3Mu$gestureRecognizerShouldReceive.apply(n,i)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return!(e!==this.editLabelGestureRecognizer||!t.instanceOf(qp.a))||n.__s._$3cL$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i)},editLabel:function(){var e=nf;e.action="editAlbumName",e.model=this.content,e.value=this.label,e.insert(this._label,this),e.element.style.width="100%"},__superMap:{_$Zy$init:"init",_$3Mu$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$3cL$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}}),ff=n(1255),gf=zp.a.extend(Qp,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["non-expandable-item-container"]}]},className:"p2-container-list-non-expandable-item-view",__QUALIFIED_CLASS_NAME__:"ContainerListNonExpandableItemView"},init:function(){var e=this,t=arguments;e.__s._$Br$init.apply(e,t);var n=Yp(ff),i=this.element.getElementsByClassName("non-expandable-item-container")[0];i&&i.appendChild(n)},previewDerivativeGeometricLength:V.b({readOnly:!0,get:function(){return G.a.application.previewLength}}),previewRoundedCornerRadius:V.b(2),contentView:V.b({defaultValue:k.c(pf,{additionalClassNames:F.b(["album-picker-item-view"])}),downstreamBindings:{content:"(owner).content",previewDerivativeGeometricLength:"(owner).previewDerivativeGeometricLength",previewRoundedCornerRadius:"(owner).previewRoundedCornerRadius"}}),__superMap:{_$Br$init:"init"}}),mf=n(577),_f=n(578),vf={mixinDependencies:[mf.a],sizeKeyByCellType:F.b({newAlbum:"sizeForNewAlbumHeader",newFolder:"sizeForNewAlbumHeader"}),sizeForNewAlbumHeader:function(e,t){return _l.a.create(e.viewportWidth,e.layoutMetrics.newAlbumHeaderHeight/2)},cellClassKeysByCellType:F.b({newAlbum:"createAlbumCellClass",newFolder:"createFolderCellClass"}),createAlbumCellClass:_f.a.extend({cellType:"newAlbum",isReusable:!1}),createFolderCellClass:_f.a.extend({cellType:"newFolder",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=this,a=arguments;r.__s._$H3$completeVisibleCells.apply(r,a);var s=this.topMostItem(e,n);if(s&&0===s.handle.position){var o=this.cellForHandle(null,"newAlbum").retain(),l=this.cellForHandle(null,"newFolder").retain();o.value=t,l.value=t;var c=s.top;this.layOutCellInDirection(e,o,-1,c-e.layoutMetrics.newAlbumHeaderHeight/2),this.layOutCellInDirection(e,l,-1,c),n.splice(0,0,o,l)}},topForCell:function(e){var t=this,n=arguments;return t.__s._$Wv$topForCell.apply(t,n)+e.layoutMetrics.newAlbumHeaderHeight},__superMap:{_$H3$completeVisibleCells:"completeVisibleCells",_$Wv$topForCell:"topForCell"}},bf=zp.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["icon"],attributes:{"data-icon":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"iconType",attributes:{},attribute:"data-icon"}}},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"headerString",attributes:{}}],classes:["label"]}],classes:["label-wrap"],styles:{"line-height":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"labelHeight",attributes:{},unit:"px",property:"line-height"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"labelHeight",attributes:{},unit:"px",property:"height"}}}],classes:["album-picker-item-view","p2-container-list-item-view"]}],classes:["non-expandable-item-container"]}]},className:"p2-add-to-album-header-view",__QUALIFIED_CLASS_NAME__:"AddToAlbumHeaderView"},previewDerivativeGeometricLength:V.b({readOnly:!0,get:function(){return G.a.application.previewLength}}),labelHeight:V.b({readOnly:!0,dependencies:["previewDerivativeGeometricLength"],get:Object.assign((function(){return this.previewDerivativeGeometricLength+4}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+4}})}),additionalClassNames:["cw-list-item-view","p2-container-list-non-expandable-item-view"],headerString:V.b(),iconType:V.b({readOnly:!0,defaultValue:"album"})}),yf=bf.extend({staticMembers:{className:"p2-new-album-header-view",__QUALIFIED_CLASS_NAME__:"NewAlbumHeaderView"},headerString:V.b(s.d("AlbumsPopover.NewAlbum")),action:"newAlbumWasSelected"}),wf=bf.extend({staticMembers:{className:"p2-new-folder-header-view",__QUALIFIED_CLASS_NAME__:"NewFolderHeaderView"},headerString:V.b(s.d("AlbumsPopover.NewFolder")),action:"newFolderWasSelected",iconType:V.b({readOnly:!0,defaultValue:"genericfolder"})}),If=Ei.a.extend({viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["container-list",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"itemSizeMode",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"slideDirectionClass",attributes:{}}]}}},itemSizeMode:V.b({binding:G.a.bindingFor("application.sidebarItemSizeMode")}),additionalClassNames:["album-picker-popover-content"]}),layoutDelegate:F.b(vf),presenter:F.b({newAlbumHeaderViewClass:yf,newFolderHeaderViewClass:wf,viewClassKeysByCellType:F.b({newAlbum:"newAlbumHeaderViewClass",newFolder:"newFolderHeaderViewClass"}),viewForViewClass:function(e){var t=this,n=arguments,i=t.__s._$Od$viewForViewClass.apply(t,n);return e===this.newFolderHeaderViewClass&&i.bind("isDisabled",this.owner.bindingFor("hasSelection")),i},__superMap:{_$Od$viewForViewClass:"viewForViewClass"}}),hasSelection:V.b(),layoutMetrics:F.b({newAlbumHeaderHeight:60}),itemViewClass:gf.extend(ku.a,{action:"folderWasSelected",context:V.b(Oi.c("content")),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDrillableFolder",truevalue:"p2-drillable",attributes:{}}]}}},isDrillableFolder:V.b({readOnly:!0,dependencies:["content"],get:Object.assign((function(){return this.content&&this.content.isFolder}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).isFolder}})})}),desiredHeight:V.b({readOnly:!0,dependencies:["collection.length"],get:Object.assign((function(){var e=this.layoutMetrics.rowHeight+this.layoutMetrics.rowSpacing;return this.collection.length*e+this.layoutMetrics.newAlbumHeaderHeight}),{__CW__getter:function(e,t,n,i){var r=this.layoutMetrics.rowHeight+this.layoutMetrics.rowSpacing;return i.internalGetPath(this,t[0+n])*r+this.layoutMetrics.newAlbumHeaderHeight}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AlbumListViewController"}}),Sf=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"value",attributes:{}}],classes:["cw-label-view"]}},className:"cw-ui-label-view",__QUALIFIED_CLASS_NAME__:"LabelView"}}),Cf=n(671),Ef=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"}],classes:["header"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"containerListView"}],classes:["content"]}]},className:"p2-album-picker-view",__QUALIFIED_CLASS_NAME__:"AlbumPickerView"},_title:V.b(),_showBackButton:V.b(),headerView:V.b({defaultValue:k.c(In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"backView"},{type:"VIEWOUTLET",tagname:"view",name:"titleView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_showBackButton",truevalue:"has-back-button",attributes:{}}]}},titleView:V.b({defaultValue:k.c(Sf),downstreamBindings:{value:"(owner)._title"}}),backView:V.b({readOnly:!0,dependencies:["_showBackButton"],get:Object.assign((function(){return this._showBackButton?this.backButtonView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.backButtonView:null}})}),backButtonView:V.b({strong:!0,defaultValue:k.c(Ho.a.extend(Nu,{action:"folderWasSelected",context:null,icon:Cf,tooltip:s.d("AlbumsPopover.NavBar.Back")}))}),_showBackButton:V.b(),_title:V.b(),additionalClassNames:["p2-album-picker-view-title"]})),downstreamBindings:{_title:"(owner)._title",_showBackButton:"(owner)._showBackButton"}})}),Af=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"textField"}],classes:["text-area"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"VIEWOUTLET",tagname:"view",name:"okButton"}],classes:["button-area"]}]},className:"p2-create-album-view",__QUALIFIED_CLASS_NAME__:"CreateAlbumView"},selectionDateRange:V.b(),rootFolder:V.b(),action:V.b({type:"string"}),isCreatingFolder:V.b({type:"boolean"}),albumTitle:V.b({dependencies:["selectionDateRange","rootFolder","isCreatingFolder"],writeDependencies:[],get:Object.assign((function(e){if("undefined"===typeof e){if(this.selectionDateRange)return this.selectionDateRange;if(this.rootFolder){var t=this.isCreatingFolder?"Folder":"Album";return s.d("AddToAlbum."+t+".DefaultTitle")}}return e}),{__CW__getter:function(e,t,n,i){if("undefined"===typeof e){if(i.internalGet(this,t[0+n]))return i.internalGet(this,t[0+n]);if(i.internalGet(this,t[1+n])){var r=i.internalGet(this,t[2+n])?"Folder":"Album";return s.d("AddToAlbum."+r+".DefaultTitle")}}return e}})}),textField:V.b({defaultValue:k.c(Bl,{additionalClassNames:["cw-theme"]}),downstreamBindings:{value:"(owner).albumTitle"}}),cancelButton:k.c(Ho.a,{action:"hide",title:s.d("Alert.Cancel.Button.Title")}),okButton:V.b({defaultValue:k.c(Ho.a,{title:s.d("Alert.OK.Button.Title")}),downstreamBindings:{context:"(owner).textField.value",isDisabled:"(owner).isOkButtonDisabled",action:"(owner).action"}}),additionalClassNames:["album-picker-popover-content"],isOkButtonDisabled:V.b({readOnly:!0,dependencies:["textField.value"],get:Object.assign((function(){var e=this.textField.value;return"undefined"===typeof e||""===e}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return"undefined"===typeof r||""===r}})}),_didAttach:B.h("isAttached",(function(){var e=this;this.isAttached&&!this.isDisposed&&(this.textField.select(),X.a((function(){return!e.isDisposed&&e.textField.focus()}),0))})),keyUp:function(e){e.keyCode===ml.a.ENTER&&this.sendEvent(this.action,this.textField.value)}}),Of=fi.a.extend({viewClass:Af,view:V.b({downstreamBindings:{selectionDateRange:"(owner).selectionDateRange",rootFolder:"(owner).rootFolder",action:"(owner).action",isCreatingFolder:"(owner).isCreatingFolder"}}),desiredHeight:V.b(),selectionDateRange:V.b(),rootFolder:V.b(),isCreatingFolder:V.b(),action:V.b({type:"string",defaultValue:"createAlbum"}),staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateAlbumViewController"}}),Tf={mixinDependencies:[Wl],getUploadServiceUrl:function(){var e=ve.a.environment,t=e&&e.authBag,n=t&&t.servicesInfo,i=n&&n.uploadimagews;return i&&i.url},getUserDsid:function(){var e=ve.a.cloudOSService.environment.authBag.user;return e||_.b("Login to get DSID"),e.dsid}};function Mf(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function Df(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Mf(a,i,r,s,o,"next",e)}function o(e){Mf(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Pf=fi.a.extend({mixinDependencies:[Tf],viewClass:Ef,view:V.b({downstreamBindings:{_title:"(owner)._title",_showBackButton:"(owner)._showBackButton"}}),owningViewController:V.b(),currentUploadViewController:V.b(Oi.c("owningViewController")),sparseSelection:V.b(),desiredHeight:V.b({readOnly:!0,dependencies:["view.headerView.isAttached","containerListViewController.desiredHeight"],get:Object.assign((function(){return this.view.headerView.isAttached?$u.a(this.view.headerView.element).height+this.containerListViewController.desiredHeight:0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?$u.a(this.view.headerView.element).height+i.internalGetPath(this,t[1+n]):0}})}),containerListViewController:Ci.a.define({viewOutlet:"containerListView"}),dataManager:V.b(L.n),rootFolder:V.b({dependencies:["dataManager.cplRootContainer"],writeDependencies:[],get:Object.assign((function(e){return e||this.dataManager.cplRootContainer}),{__CW__getter:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])}})}),collection:V.b({readOnly:!0,strong:!0,dependencies:["rootFolder","rootFolder.dataDidChange","rootFolder.containers","rootFolder.containers.contentsDidChange"],get:Object.assign((function(){var e=this.rootFolder;if(void 0!==e)return e.containers.filter((function(e){return!e.isPredefinedSmartAlbum&&!$p.a.getIsRecordNameAProjectRootFolder(e.recordName)}))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(void 0!==r)return r.containers.filter((function(e){return!e.isPredefinedSmartAlbum&&!$p.a.getIsRecordNameAProjectRootFolder(e.recordName)}))}})}),selectionDateRange:V.b({readOnly:!0,dependencies:["view.isAttached","sparseSelection","sparseSelection.selectionDidChange"],get:Object.assign((function(){if(this.view.isAttached){var e=this.sparseSelection;if(e&&0!==e.length&&e.isFullyLoaded){var t=Ai.a.from(e.selection).reduce((function(e,t){return t.date&&e.push(t.date),e}),[]),n=new Date(Math.min.apply(Math,t)),i=new Date(Math.max.apply(Math,t));return Wp.fmt(n,i)}}}),{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])){var r=i.internalGet(this,t[1+n]);if(r&&0!==r.length&&r.isFullyLoaded){var a=Ai.a.from(r.selection).reduce((function(e,t){return t.date&&e.push(t.date),e}),[]),s=new Date(Math.min.apply(Math,a)),o=new Date(Math.max.apply(Math,a));return Wp.fmt(s,o)}}}})}),folderWasSelected:function(e){e?e.isFolder?this._goToChildFolder(e):this._addToAlbum(e):this._goToParentFolder()},newAlbumWasSelected:function(){this._newAlbumSelected=!0,this.containerListViewController=Of.create({desiredHeight:100,selectionDateRange:this.bindingFor("selectionDateRange"),rootFolder:this.bindingFor("rootFolder"),isCreatingFolder:this.bindingFor("_newFolderSelected")})},newFolderWasSelected:function(){this._newFolderSelected=!0,this.containerListViewController=Of.create({desiredHeight:100,selectionDateRange:this.bindingFor("selectionDateRange"),rootFolder:this.bindingFor("rootFolder"),action:"createFolder",isCreatingFolder:this.bindingFor("_newFolderSelected")})},createAlbum:function(e){var t=this;return Df(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t._getParentForNewContainer(),t.sendEvent("hide"),t.sparseSelection&&t.sparseSelection.length){n.next=8;break}return n.next=5,t.createValidAlbum(e,r);case 5:i=n.sent,n.next=14;break;case 8:return n.next=10,t.sparseSelection.getFullyLoadedSelection(t.owningViewController);case 10:return a=n.sent,n.next=13,t.createAlbumAndAddSelection(e,r,a);case 13:i=n.sent;case 14:t._navigateToAndSelectContainer(i);case 15:case"end":return n.stop()}}),n)})))()},_navigateToAndSelectContainer:function(e){this.owningViewController.sendEvent("navigateTo",e),this.owningViewController.sendEvent("selectContainer",e)},createFolder:function(e){var t=this;return Df(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t._getParentForNewContainer(),t.sendEvent("hide"),n.next=4,t.createValidAlbum(e,i,$o.a.FOLDER);case 4:r=n.sent,t._navigateToAndSelectContainer(r);case 6:case"end":return n.stop()}}),n)})))()},_goToParentFolder:function(){this._newAlbumSelected||this._newFolderSelected?(this.propertyChanged("rootFolder"),this._newAlbumSelected=!1,this._newFolderSelected=!1):this.rootFolder.parent&&(this.rootFolder=this.rootFolder.parent)},_goToChildFolder:function(e){var t=this;this._showLoading(),e.list().then((function(){t.rootFolder=e}))},_addToAlbum:function(e){var t=this;return Df(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.sendEvent("hide"),!t.sparseSelection||!t.sparseSelection.length){n.next=6;break}return n.next=4,t.sparseSelection.getFullyLoadedSelection(t.owningViewController);case 4:i=n.sent,t.moveMediasToAlbum(i,e);case 6:case"end":return n.stop()}}),n)})))()},_showLoading:function(e){this._shouldPersistLoader=e;var t=this.containerListViewController.desiredHeight;this._loadingViewController.desiredHeight=t,this.containerListViewController=this._loadingViewController},_getParentForNewContainer:function(){if(this._hasSelection)return this.rootFolder;var e=this.owningViewController.container;return e&&e.isFolder&&!e.isVirtualFolder?e:this.dataManager.cplRootContainer},reset:function(){this.rootFolder=null,this._newAlbumSelected=!1,this._newFolderSelected=!1,this._shouldPersistLoader=!1},_hasSelection:V.b({readOnly:!0,dependencies:["sparseSelection","sparseSelection.selectionDidChange"],get:Object.assign((function(){return this.sparseSelection&&this.sparseSelection.length>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).length>0}})}),_collectionDidChange:B.h({inputs:["collection","collection.contentsDidChange","_hasSelection","view.isAttached"],callback:function(e){e&&!this._shouldPersistLoader&&this.view.isAttached&&(Vn.a(e)||!this._hasSelection?this.containerListViewController=this._emptyListViewController:(this.containerListViewController=this._albumListViewController,this.containerListViewController.measureViewport()))}}),_emptyListViewController:V.b({strong:!0,defaultValue:k.c(fi.a.extend({desiredHeight:V.b(60),hasSelection:V.b(),view:V.b({downstreamBindings:{hasSelection:"(owner).hasSelection"}}),viewClass:In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"newAlbumHeader"},{type:"VIEWOUTLET",tagname:"view",name:"newFolderHeader"}],classes:["p2-album-picker-empty-list",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"itemSizeMode",attributes:{}}]}},itemSizeMode:V.b({binding:G.a.bindingFor("application.sidebarItemSizeMode")}),additionalClassNames:F.b(["container-list","album-picker-popover-content"]),newAlbumHeader:k.c(yf),newFolderHeader:V.b({readOnly:!0,strong:!0,get:function(){return wf.create({isDisabled:this.bindingFor("hasSelection")})}}),hasSelection:V.b()})})),downstreamBindings:{hasSelection:"(owner)._hasSelection"}}),_albumListViewController:V.b({strong:!0,readOnly:!0,get:function(){return If.create({collection:this.bindingFor("collection"),hasSelection:this.bindingFor("_hasSelection")})}}),_loadingViewController:V.b({strong:!0,defaultValue:k.c(fi.a.extend({viewClass:Jc.a.extend({size:30}),desiredHeight:V.b()}))}),_title:V.b({readOnly:!0,dependencies:["sparseSelection","sparseSelection.length","_newFolderSelected","_newAlbumSelected"],get:Object.assign((function(){if(this._newFolderSelected)return s.d("AddToAlbum.Popover.Title.Folder");if(this.sparseSelection){var e=this.sparseSelection.length;return e?1===e?s.d("AddToAlbum.Popover.Title.1"):s.d("AddToAlbum.Popover.Title.More",{count:e}):this._newAlbumSelected?s.d("AddToAlbum.Popover.Title.Album"):s.d("AddToAlbum.Popover.Title.None")}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n]))return s.d("AddToAlbum.Popover.Title.Folder");if(i.internalGet(this,t[0+n])){var r=i.internalGetPath(this,t[1+n]);return r?1===r?s.d("AddToAlbum.Popover.Title.1"):s.d("AddToAlbum.Popover.Title.More",{count:r}):i.internalGet(this,t[3+n])?s.d("AddToAlbum.Popover.Title.Album"):s.d("AddToAlbum.Popover.Title.None")}}})}),_showBackButton:V.b({readOnly:!0,dependencies:["rootFolder","_newAlbumSelected","_newFolderSelected","collection.length"],get:Object.assign((function(){var e=this.rootFolder;return void 0!==e&&(!e.isRootFolder||this._newAlbumSelected||this._newFolderSelected)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&(!r.isRootFolder||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n]))}})}),_newAlbumSelected:V.b(!1),_newFolderSelected:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AlbumPickerViewController"}}),Lf=Rl.extend({viewClass:F.b({additionalClassNames:F.b(["album-picker-popover-menu"])}),desiredSize:V.b({strong:!0,defaultValue:k.c(_l.a,{width:275}),downstreamBindings:{height:"(owner).height"}}),height:V.b({binding:"contentController.desiredHeight",get:function(e){return e<500?e:500}}),sparseSelection:V.b(),owningViewController:V.b(),contentController:V.b({defaultValue:k.c(Pf),downstreamBindings:{sparseSelection:"(owner).sparseSelection",owningViewController:"(owner).owningViewController"}}),hide:function(){var e=this,t=arguments,n=e.__s._$cn$hide.apply(e,t);return this.contentController.reset(),n},_popoverViewIsAttached:B.h({inputs:["view.isAttached"],callback:function(){var e=this;if(this.view.isAttached&&this.view.contentView){var t=this.view.popoverView.element,n=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}();Ze.a(t,n,(function(){e.contentController.containerListViewController.measureViewport&&e.contentController.containerListViewController.measureViewport()}))}}}),__superMap:{_$cn$hide:"hide"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AlbumPickerPopoverViewController"}}),Rf=n(759),xf={mixinDependencies:[B.b],popoverControllerClass:El,attachedPopoverController:V.b({readOnly:!0,get:function(){var e=this.popoverControllerClass,t=this.getMetadataByType(V.a);for(var n in t)if(Rf.a(t[n].type,e)){var i=this[n];if(i.isAttached)return i}}}),init:function(){var e=this,t=arguments;e.__s._$Hl$init.apply(e,t),this._setupPopoverAttachmentObservers()},_setupPopoverAttachmentObservers:function(){var e=this.popoverControllerClass,t=this.getMetadataByType(V.a),n=[];for(var i in t)Rf.a(t[i].type,e)&&n.push(i+".isAttached");n.push(this.propertyChanged.bind(this,"attachedPopoverController")),this.observe.apply(this,n)},__superMap:{_$Hl$init:"init"}},Nf={mixinDependencies:[xf],sparseSelection:_u.a.define(),addToAlbumVC:V.b({type:El,strong:!0,defaultValue:k.c(Lf),downstreamBindings:{owningViewController:"(owner)",sparseSelection:"(owner).sparseSelection"}})},Ff=n(407),Vf=n(484),kf=n(1312),Bf=n(468),jf=n(412),Uf=n(178);function Gf(e){return Array.from(new Set(e))}var Hf=n(796),Wf=Uf.a.extend({mixinDependencies:[Hf.a],staticMembers:{getPrimaryKey:function(e,t){return"@"+e+","+t},getPartsFromPrimaryKey:function(e){var t=e.slice(1),n=t.indexOf(","),i=t.substring(0,n),r=parseFloat(i),a=t.substring(n+1);return{lat:r,lng:parseFloat(a)}},getPrimaryKeyFromParts:function(e){var t=e.lat,n=e.lng;return this.getPrimaryKey(t,n)},findByLatLng:function(e,t,n){return this.find(this.getPrimaryKey(e,t),n)},findByLocations:function(e){var t=this,n=e.map((function(e){return t.getPrimaryKey(e.lat,e.lng)}));return this.findByPrimaryKeys(n)},loadByLocations:function(e,t){var n=this,i=e.map((function(e){return n.getPrimaryKey(e.lat,e.lng)}));return this.load(Gf(i),t)},__QUALIFIED_CLASS_NAME__:"PlaceResultModel"},lat:Uf.c({readOnly:!0}),lng:Uf.c({readOnly:!0}),placeResult:Uf.c({readOnly:!0})}),$f=we.b("RevGeoDominantOrderTypeEnum",["Unknown","AOI","Thoroughfare","SubLocality","LargeAOI","Locality","SuperLocality","SubAdministrativeArea","SubAdministrativeLocality","SuperAOI","AdministrativeArea","AdministrativeAreaCode","Country","CountryCode","MegaAOI"]),zf=we.b("GEOPlaceTypeEnum",{COUNTRY:1,STATE:2,COUNTY:4,CITY:16,TIME_ZONE:35,NEIGHBORHOOD:43,OCEAN:44,AOI:45,INLAND_WATER:46,POI:47,ISLAND:48,STREET:49,ADMIN:50,POSTAL:51,INTERSECTION:54,BUILDING:55,ADDRESS:57,ZCTAS:59,CONTINENT:61,PERDU_CITY:1016,DMA:100,CAT_10284_POSTAL:101,CAT_10285_CITY:102,CAT_10286_COUNTY:103,CAT_10287_STATE:104,CAT_10288_COUNTRY:105,CAT_10288_COUNTRY_CODE:106,CAT_10287_STATE_CODE:107}),Kf=function(){function e(e){for(var t in this.namePrefix=void 0,this.sortedNames=[],this.nameSuffix=void 0,this.suffixWhenPrefixOnly=!1,this.isContinuation=!1,e)t in this&&(this[t]=e[t])}var t=e.prototype;return t.localizedSortedNames=function(){var e=this.namePrefix,t=this.nameSuffix;if("string"!==typeof e&&"string"!==typeof t)return this.sortedNames;for(var n=!1,i=[],r=0,a=this.sortedNames.length;r<a;++r){var s=this.sortedNames[r];if(n=n||s&&t&&s.includes(t),0===r&&(e||this.isContinuation)){var o=e;if(o)if(1===this.sortedNames.length&&e.includes(s)){var l=o&&t&&o.includes(t);this.suffixWhenPrefixOnly&&t&&!l&&(o=o+", "+t),s=o}else s=o+" - "+s;this.isContinuation&&(s="+ "+s)}r!==a-1||!t||this.suffixWhenPrefixOnly&&e||n||(s=s+", "+t),s&&i.push(s)}return i},t.localizedTitleForNameInfo=function(){for(var e="",t=this.localizedSortedNames(),n=0,i=t.length;n<i;++n){var r=t[n];e+=0!==n?n===i-1?" & "+r:", "+r:r}return e},e}(),qf=function(e){for(var t in this.country=void 0,this.countryCode=void 0,this.administrativeArea=void 0,this.administrativeAreaCode=void 0,this.subAdministrativeArea=void 0,this.locality=void 0,this.postCode=void 0,this.subLocality=void 0,this.premises=void 0,this.thoroughfare=void 0,this.subThoroughfare=void 0,this.fullThoroughfare=void 0,this.postCodeExtension=void 0,this.areaOfInterest=void 0,this.inlandWater=void 0,this.ocean=void 0,this.dependentLocalityList=void 0,this.premise=void 0,this.subPremiseList=void 0,this.postCodeFull=void 0,e)t in this&&(this[t]=e[t])},Qf=function(e){if(this.type=void 0,this.name=void 0,this.structuredAddress=void 0,this.area=0,void 0!==e){var t=e.name;"string"===typeof t&&(this.name=t);var n=e.area;Number.isFinite(n)&&(this.area=n);var i=e.type;"string"===typeof i&&(this.type=zf[i].value);var r=e.address;if(void 0!==r){var a=r.structuredAddress;void 0!==a&&(this.structuredAddress=new qf(a))}}},Yf=function(e){if(this.place=void 0,this.additionalPlaceList=void 0,this.additionalPlaceCount=0,void 0!==e){var t=e.place;void 0!==t&&(this.place=new Qf(t));var n=e.additionalPlace;if(void 0!==n){for(var i=[],r=0,a=n.length;r<a;++r){var s=new Qf(n[r]);i.push(s)}this.additionalPlaceList=i,this.additionalPlaceCount=i.length}}},Zf=function(){function e(e){for(var t in this.placeName=void 0,this.minimumArea=void 0,this.geoPlaces=[],e)t in this&&(this[t]=e[t])}return e.prototype.addPlace=function(e){this.geoPlaces.push(e)},e}(),Xf=function(){function e(e,t){this.isHome=!1,this._placeTypeInfoMap=[],this._mergeGeoPlaceData(e,t)}e._findIndexOfPlaceInfoWithPlaceName=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].placeName===t)return n;return-1},e._getIsTypeWithinOrderType=function(e,t){return e<=t};var t=e.prototype;return t.getPlaceInfosForOrderType=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._placeTypeInfoMap[e];return void 0===n&&t&&(n=[],this._placeTypeInfoMap[e]=n),n},t.getBestPlaceInfoForOrderType=function(e){var t=this.getPlaceInfosForOrderType(e);return void 0!==t&&t.length>0?t[0]:void 0},t._filterSortedPlace=function(e,t,n){if(t<=0)return e;for(var i=$f.Unknown.value,r=-1,a=0;a<e.length;a++){var s=this._dominantOrderTypeForPlaceTypeAndLastOrderType(e[a].type,i);if(e[a].type===t){r=a,n&&(n.foundOrderType=s,n.lastOrderType=i);break}i=s}return r>0?e.slice(r):e},t._addPlaceName=function(t,n,i){if(t&&t.length&&n){var r=this.getPlaceInfosForOrderType(i,!0),a=e._findIndexOfPlaceInfoWithPlaceName(r,t);if(-1===a){var s=new Zf({placeName:t});r.push(s),s.addPlace(n)}else r[a].addPlace(n)}},t._removePlacesInPlaceInfos=function(t,n){var i=this.getPlaceInfosForOrderType(n);if(i)for(var r=0,a=t.length;r<a;++r){var s=t[r].placeName,o=e._findIndexOfPlaceInfoWithPlaceName(i,s);-1!==o&&i.splice(o,1)}},t._mergeGeoPlaceData=function(t,n){var i=t.place,r=$f.Unknown.value,a=i.structuredAddress;if(t.additionalPlaceCount>0){var s=[i].concat(t.additionalPlaceList);s.sort(Jf);var o={foundOrderType:r,lastOrderType:$f.Unknown.value};s=this._filterSortedPlace(s,n,o),r=o.foundOrderType;for(var l=o.lastOrderType,c=0,u=s.length;c<u;++c){var d=s[c],h=this._dominantOrderTypeForPlaceTypeAndLastOrderType(d.type,l);this._addPlaceName(d.name,d,h),l=h}var p=this._placeTypeInfoMap[$f.Locality.value];p&&(this._removePlacesInPlaceInfos(p,$f.AOI.value),this._removePlacesInPlaceInfos(p,$f.SubLocality.value))}else{var f=a.areaOfInterest,g=a.subLocality,m=a.locality,_=a.subAdministrativeArea,v=a.administrativeArea,b=a.country;if(void 0!==f){var y=f.length,w=i.type;(w!==zf.ISLAND.value&&y>0||w===zf.ISLAND.value&&y>1)&&e._getIsTypeWithinOrderType(r,$f.AOI.value)&&this._addPlaceName(f[0],i,$f.AOI.value)}g&&e._getIsTypeWithinOrderType(r,$f.SubLocality.value)&&this._addPlaceName(g,i,$f.SubLocality.value),m&&e._getIsTypeWithinOrderType(r,$f.Locality.value)&&this._addPlaceName(m,i,$f.Locality.value),_&&e._getIsTypeWithinOrderType(r,$f.SubAdministrativeArea.value)&&this._addPlaceName(_,i,$f.SubAdministrativeArea.value),v&&e._getIsTypeWithinOrderType(r,$f.AdministrativeArea.value)&&this._addPlaceName(v,i,$f.AdministrativeArea.value),b&&e._getIsTypeWithinOrderType(r,$f.Country.value)&&this._addPlaceName(b,i,$f.Country.value)}var I=a.thoroughfare,S=a.administrativeAreaCode,C=a.countryCode;I&&e._getIsTypeWithinOrderType(r,$f.Thoroughfare.value)&&this._addPlaceName(I,i,$f.Thoroughfare.value),S&&e._getIsTypeWithinOrderType(r,$f.AdministrativeAreaCode.value)&&this._addPlaceName(S,i,$f.AdministrativeAreaCode.value),C&&e._getIsTypeWithinOrderType(r,$f.CountryCode.value)&&this._addPlaceName(C,i,$f.CountryCode.value)},t._dominantOrderTypeForPlaceTypeAndLastOrderType=function(e,t){var n=$f.Unknown.value;switch(e){case zf.AOI.value:case zf.POI.value:case zf.ISLAND.value:case zf.INLAND_WATER.value:t<$f.SubLocality.value?n=$f.AOI.value:t<$f.Locality.value?n=$f.LargeAOI.value:t<$f.AdministrativeArea.value?n=$f.SuperAOI.value:t>=$f.Country.value&&(n=$f.MegaAOI.value);break;case zf.NEIGHBORHOOD.value:t<$f.Locality.value?n=$f.SubLocality.value:t<$f.SubAdministrativeArea.value?n=$f.SuperLocality.value:t<$f.AdministrativeArea.value&&(n=$f.SubAdministrativeLocality.value);break;case zf.STREET.value:case zf.INTERSECTION.value:n=$f.Thoroughfare.value;break;case zf.CITY.value:n=$f.Locality.value;break;case zf.COUNTY.value:n=$f.SubAdministrativeArea.value;break;case zf.STATE.value:n=$f.AdministrativeArea.value;break;case zf.COUNTRY.value:n=$f.Country.value;break;case zf.OCEAN.value:n=$f.MegaAOI.value;break;case zf.ADMIN.value:case zf.ADDRESS.value:case zf.BUILDING.value:case zf.CONTINENT.value:case zf.TIME_ZONE.value:case zf.POSTAL.value:}return n},e}();function Jf(e,t){var n=e.area,i=t.area,r=e.type,a=t.type;return r!==zf.OCEAN.value&&a===zf.OCEAN.value?-1:r===zf.OCEAN.value&&a!==zf.OCEAN.value?1:a!==zf.INLAND_WATER.value||0!==i||r===zf.INLAND_WATER.value&&0===n?r!==zf.INLAND_WATER.value||0!==n||a===zf.INLAND_WATER.value&&0===i?n===i?0:n<i?-1:1:1:-1}function eg(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return tg(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tg(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ng=function(){function e(e){for(var t in this.name=void 0,this.type=void 0,this.matchingCount=0,this.allEntriesAtHome=!1,this.allEntriesMatchHomeForOrderType=!1,this.addCountyIfNeeded=!1,this.geoPlaces=new Set,this.remainingGeoPlaces=void 0,e)t in this&&(this[t]=e[t])}var t=e.prototype;return t.addGeoPlaces=function(e){for(var t,n=eg(e);!(t=n()).done;){var i=t.value;this.geoPlaces.add(i)}},t.addGeoPlace=function(e){this.geoPlaces.add(e)},t.updateWithAddedNameInfo=function(e){this.addGeoPlaces(e.geoPlaces),this.matchingCount+=e.matchingCount,e.allEntriesAtHome||(this.allEntriesAtHome=!1),e.allEntriesMatchHomeForOrderType||(this.allEntriesMatchHomeForOrderType=!1)},t.prepareRemainingGeoPlaces=function(){this.remainingGeoPlaces=new Set(this.geoPlaces)},t.removeGeoPlacesFromRemaining=function(e){for(var t,n=eg(e);!(t=n()).done;){var i=t.value;this.remainingGeoPlaces.delete(i)}},e}();function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ag=[$f.AOI.value,$f.SubLocality.value,$f.LargeAOI.value,$f.Locality.value,$f.SuperLocality.value,$f.SubAdministrativeArea.value,$f.SubAdministrativeLocality.value,$f.SuperAOI.value,$f.AdministrativeArea.value,$f.Country.value,$f.MegaAOI.value,$f.Unknown.value],sg=[$f.Thoroughfare.value,$f.Locality.value,$f.SubAdministrativeLocality.value,$f.SuperAOI.value,$f.AdministrativeArea.value,$f.Country.value,$f.Unknown.value],og=function(){function e(){this._otherNonDominantPlaces=[],this._ordersCheckedOrUsed=[],this._usedHome=!1,this._orderUsed=$f.Unknown.value,this._homeMapItem=void 0,this._addCountyIfNeeded=!1}var t,n,i=e.prototype;return i.updateInfoForMoments=function(e){for(var t=0,n=e.length;t<n;++t)this.updateInfoForMoment(e[t])},i.updateInfoForMoment=function(e){if(void 0!==e){var t=e.revGeoInfo;if(void 0!==t&&0!==t.length){var n=this._getPlaceFromRevGeoInfo(t),i=new Kf,r=new Kf;this._updateAllInfoInCompoundNameInfo(i,r,n,!0,ag,sg),e.title=i,e.subtitle=r}}},i._getPlaceFromRevGeoInfo=function(e){return e.reduce((function(e,t){if(void 0===t)return e;var n=t.placeResult;if(void 0===n)return e;var i=n.place;if(void 0===i)return e;var r=new Yf(n),a=new Xf(r,i.type);return e.push(a),e}),[])},i._updateAllInfoInCompoundNameInfo=function(e,t,n,i,r,a){this._otherNonDominantPlaces=[],this._ordersCheckedOrUsed=[],this._usedHome=!1,this._orderUsed=$f.Unknown.value;var s=this._updateDominantInfoInCompoundNameInfo(e,n,r,!1,i,!1,!0,!0,!0,!0);void 0!==s&&s.length>0&&this._updateSecondaryInfoInCompoundNameInfo(t,n,e,a,s,this._otherNonDominantPlaces,this._ordersCheckedOrUsed,this._orderUsed,this._usedHome)},i._updateDominantInfoInCompoundNameInfo=function(e,t,n,i,r,a,s,o,l,c){var u=t.length;if(0!==u){var d,h,p=!1,f=new Map;void 0!==this._homeMapItem&&(h=new Xf(this._homeMapItem));for(var g=0,m=$f.Unknown.value;!p&&(m=this._geoOrderInPriorityListAtIndex(n,g))!==$f.Unknown.value;){f.clear(),s&&(this._otherNonDominantPlaces.length=0),o&&this._ordersCheckedOrUsed.push(m);for(var _=0;_<u;++_){var v=t[_],b=v.getPlaceInfosForOrderType(m);if(void 0!==b&&0!==b.length)for(var y=0,w=b.length;y<w;++y){var I=b[y].placeName;if(I.length>0){var S=new ng({name:I,type:m});S.addGeoPlace(v),S.allEntriesAtHome=v.isHome,S.addCountyIfNeeded=this._addCountyIfNeeded;var C=!1;if(void 0!==h){var E=h.getBestPlaceInfoForOrderType(S.type).placeName.toLowerCase();I.toLowerCase()===E&&(C=!0)}S.allEntriesMatchHomeForOrderType=v.isHome||C,this._addOrUpdateNameInfo(S,f)}}}++g;var A=Array.from(f.values());void 0!==(d=this._dominantPlacesInPlaceInfoArray(A,m,u,i,r,a,g===n.length,s))&&d.length>0&&(p=!0)}var O=new Set,T={addedHome:!1};if(void 0!==e&&void 0!==d){var M=this._resetAndSortedNameInfoArray(d,a),D=this._localizedNamesForNameInfoArray(M,O,r,T);e.sortedNames=D}if(m===$f.SubLocality.value&&!T.addedHome){var P=d[0].geoPlaces.values().next().value.getBestPlaceInfoForOrderType($f.Locality.value),L=P&&P.placeName,R=L&&L.lowercaseString,x=!0;if(R)for(var N,F=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return ig(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ig(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(O);!(N=F()).done;){var V=N.value;if(-1!==V.indexOf(R)||-1!==R.indexOf(V)){x=!1;break}}x&&L&&(e.namePrefix=L,o&&this._ordersCheckedOrUsed.push($f.Locality.value))}return c&&(this._usedHome=T.addedHome),l&&(this._orderUsed=m),d}},i._dominantPlacesInPlaceInfoArray=function(e,t,n,i,r,a,s,o){if(0!==e.length){var l,c=this._resetAndSortedNameInfoArray(e,a),u=[];void 0===o?l=[]:(l=this._otherNonDominantPlaces).length=0;for(var d,h=!1,p=0,f=0,g=!1,m=[].concat(c),_=!1,v=cg(!1),b=m.length;b>0&&!_;){var y=m[0],w=y.remainingGeoPlaces.size;if(w>0){g&&(g=!1,h&&f===w&&(h=!1));var I=2,S=.75;switch(t){case $f.AOI.value:I=3,S=.6;break;case $f.SubLocality.value:var C=y.geoPlaces.values().next().value.getBestPlaceInfoForOrderType($f.Locality.value),E=C&&C.placeName;y!==c[0]&&(d&&!E||!d&&E||d&&d!==E)&&(h=!1,_=!0),d=E,I=3;break;case $f.Locality.value:I=3}if(_)break;if(p+=w,u.length+l.length>6&&!s){h=!1;break}if(u.length<I||i)u.push(y),!h&&p/n>=S&&(h=!0,g=!0);else{if(!i)break;l.push(y)}}if(m.shift(),--b>0){for(var A=0;A<b;A++)m[A].removeGeoPlacesFromRemaining(y.remainingGeoPlaces);m.sort(v)}f=w}var O=u;return h?c.length-u.length>0&&t===$f.Thoroughfare.value&&(O=c.length>3?void 0:c):O=void 0,O}},i._addOrUpdateNameInfo=function(e,t){if(void 0!==e){var n=e.name.toLowerCase(),i=t.get(n);void 0===i?t.set(n,e):i.updateWithAddedNameInfo(e)}},i._localizedNamesForNameInfoArray=function(e,t,n,i){var r,a=t;void 0===a&&(a=new Set);var s=e&&e.length;if(s){r=[];for(var o=0;o<s;o++){var l=e[o],c=l.name,u=c,d=c.toLowerCase();n&&l.allEntriesAtHome&&(u="_$!<Home>!$_",i&&(i.addedHome=!0),d=u.toLowerCase()),a.has(d)||(a.add(d),r.push(u))}}return r},i._resetAndSortedNameInfoArray=function(e,t){if(void 0!==e){for(var n=0,i=e.length;n<i;n++)e[n].prepareRemainingGeoPlaces();return e.sort(cg(t)),e}},i._geoOrderInPriorityListAtIndex=function(e,t){var n=$f.Unknown.value;return t<e.length&&(n=e[t]),n},i._suffixForNameInfoArray=function(e,t){if(void 0!==e){for(var n,i=!1,r=0,a=e.length;r<a;++r){var s=e[r].geoPlaces.values().next().value,o=this._suffixForGeoPlace(s,t);i||(n&&o!==n?(n=void 0,i=!0):n=o)}return n}},i._suffixForGeoPlace=function(e,t,n){var i,r,a,s,o,l;switch(t){case $f.SubLocality.value:case $f.Locality.value:case $f.SuperLocality.value:case $f.SubAdministrativeArea.value:case $f.SubAdministrativeLocality.value:case $f.SuperAOI.value:for(o=0,l=(r=[$f.AdministrativeAreaCode.value,$f.AdministrativeArea.value,$f.CountryCode.value,$f.Country.value]).length;o<l;++o)if(a=e.getBestPlaceInfoForOrderType(r[o])){i=a.placeName;break}break;case $f.AdministrativeArea.value:if(n)for(o=0,l=(r=[$f.CountryCode.value,$f.Country.value]).length;o<l;++o)if(a=e.getBestPlaceInfoForOrderType(r[o]),s=n.getBestPlaceInfoForOrderType(r[o]),void 0!==a&&void 0!==s&&a.placeName!==s.placeName){i=a.placeName;break}}return i},i._updateSecondaryInfoInCompoundNameInfo=function(e,t,n,i,r,a,s,o,l){var c;if(a.length>0){if(e){e.isContinuation=!0,"string"===typeof(c=this._suffixForNameInfoArray(a,o))&&c.length>0&&(e.nameSuffix=c);var u=this._resetAndSortedNameInfoArray(a),d=this._localizedNamesForNameInfoArray(u);e.sortedNames=d}}else{var h=i.slice();if(s.forEach((function(e){var t=h.indexOf(e);t>-1&&h.splice(t,1)})),l||o!==$f.SubLocality.value&&o!==$f.Locality.value||r.length>1){var p=h.indexOf($f.Thoroughfare.value);p>-1&&h.splice(p,1)}this._orderUsed=$f.Unknown.value;var f=this._updateDominantInfoInCompoundNameInfo(e,t,h,!0,!1,!1,!1,!1,!0);if("string"===typeof(c=this._suffixForNameInfoArray(f,this._orderUsed))&&c.length>0&&(e.nameSuffix=c),this._orderUsed===$f.Thoroughfare.value){var g=this._suffixForNameInfoArray(r,o);"string"===typeof g&&g.length>0&&(n.nameSuffix=g,n.suffixWhenPrefixOnly=this._orderUsed===$f.SubLocality.value)}}},t=e,n=[{key:"sharedInstance",get:function(){var e=this._sharedInstance;return void 0===e?this._sharedInstance=new this:e}}],null&&rg(t.prototype,null),n&&rg(t,n),e}();og._sharedInstance=void 0;var lg=[];function cg(e){var t=e?1:0;return lg[t]||(lg[t]=function(t,n){var i=t.remainingGeoPlaces.size,r=n.remainingGeoPlaces.size,a=t.allEntriesAtHome||t.allEntriesMatchHomeForOrderType,s=n.allEntriesAtHome||n.allEntriesMatchHomeForOrderType,o=0;if(e&&(a&&!s?o=1:!a&&s&&(o=-1)),0===o){var l=t.minimumArea,c=n.minimumArea;l&&c&&(l>c?o=-1:l<c&&(o=1))}return 0===o&&(o=i>r?-1:i<r?1:t.name.localeCompare(n.name)),o})}function ug(e,t){var n=e.storeDataForObjectAt(t);return pr.a.getDataHashForPrimaryKey(n.asset)}function dg(e,t){var n=e.assetDate-t.assetDate;return 0===n?function(e,t){return e.addedDate-t.addedDate}(e,t):n}var hg=P.a.extend(B.b,uc.a,{staticMembers:{createPlaceholder:function(e){return this.create(void 0,void 0,!0,e)},__QUALIFIED_CLASS_NAME__:"MomentData"},title:V.b(void 0),subtitle:V.b(void 0),startingDate:V.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._startingDate}}),endingDate:V.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._endingDate}}),itemCount:V.b({readOnly:!0,dependencies:["isPlaceholder","placeholderCount","cluster"],get:Object.assign((function(){return(this.isPlaceholder?this.placeholderCount:this.getPath("cluster.length"))||0}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):this.getPath("cluster.length"))||0}})}),isPlaceholder:V.b(!1),placeholderCount:V.b(0),cluster:V.b({readOnly:!0,get:function(){return this._cluster}}),identifiers:V.b({readOnly:!0,dependencies:["cluster"],get:function(){return this._identifiers}}),revGeoInfo:V.b(void 0),lowestRank:void 0,highestRank:void 0,setCluster:function(e,t,n){if(!n&&t&&t.length){var i=Sh.arrayPool;this._latitudes=i.getInstance(),this._longitudes=i.getInstance(),this._identifiers=i.getInstance()}if(this._cluster=t,!n&&t){var r=t.length;r>1&&jf.b(t,dg,(function(t){return ug(e,t)}));for(var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,o=0;o<r;o++){var l=t[o];l<a&&(a=l),l>s&&(s=l),this._didSetRank(e,l,o)}this.lowestRank=a,this.highestRank=s;var c=ug(e,s),u=ug(e,a);this._startingDate=c.assetDate,this._endingDate=u.assetDate}this.propertyChanged("cluster")},initFromPool:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this;r.__s._$1gJ$initFromPool.call(r),this.placeholderCount=i,this.isPlaceholder=n,this.setCluster(e,t,n)},cleanup:function(){var e=this,t=arguments;this._cluster&&Sh.arrayPool.disposeInstance(this._cluster),this._identifiers&&Sh.arrayPool.disposeInstance(this._identifiers),this._startingDate=NaN,this._endingDate=NaN,this._cluster=void 0,this._identifiers=void 0,this._locationCount=0,this._isRequestingRevGeoInfo=!1,this.title=void 0,this.subtitle=void 0,this.revGeoInfo=void 0,e.__s._$1sP$cleanup.apply(e,t)},_cluster:void 0,_identifiers:void 0,_startingDate:NaN,_shouldProcessRevGeoInfo:!0,_locationCount:V.b(0),_latitudes:H.d(void 0),_longitudes:H.d(void 0),_didSetRank:function(e,t,n){var i=ug(e,t);this._identifiers[n]=i.pk;var r=i.locationLatitude,a=i.locationLongitude;Number.isFinite(r)&&Number.isFinite(a)&&(this._latitudes.push(r),this._longitudes.push(a))},_requestRevGeoInfo:B.h({inputs:["cluster","isPlaceholder"],callback:function(e,t){var n=this;if(!t&&this._shouldProcessRevGeoInfo&&e&&e.length&&!this._isRequestingRevGeoInfo){var i=this._latitudes,r=this._longitudes,a=i.length;if(0!==a&&a===r.length){for(var s=Sh.arrayPool,o=Sh.objectPool,l=s.getInstance(),c=0;c<a;c++){var d=o.getInstance();d.lat=i[c],d.lng=r[c],l.push(d)}this._locationCount=a,this._isRequestingRevGeoInfo=!0,s.disposeInstance(this._latitudes),s.disposeInstance(this._longitudes),this._latitudes=void 0,this._longitudes=void 0,Wf.loadByLocations(l).then((function(e){var t=e||Wf.findByLocations(l);t.retain(n,"MomentData: mdlArray from loadByLocations"),n.revGeoInfo=t,t.release(n,"MomentData: mdlArray from loadByLocations")})).catch((function(e){u.b.warn("PlaceResult load failed",e)})).finally((function(){n._isRequestingRevGeoInfo=!1;for(var e=0;e<a;e++)o.disposeInstance(l[e]);s.disposeInstance(l)}))}}}}),_isRequestingRevGeoInfo:!1,_analyzeThis:B.h({inputs:["isPlaceholder","_locationCount","revGeoInfo.length"],callback:function(e,t,n){!e&&t&&t===n&&og.sharedInstance.updateInfoForMoment(this)}}),__superMap:{_$1gJ$initFromPool:"initFromPool",_$1sP$cleanup:"cleanup"}});function pg(e){if(Number.isFinite(e))return parseFloat(e.toFixed(6))}var fg=P.a.extend({generateClustersInRange:function(e,t,n,i){for(var r=Sh.arrayPool.getInstance(),a=new Uint8Array(i),s=t;s>=n;)if(a[s])s--;else{var o=ug(e,s);if(void 0!==o){var l=this._clusterForReferenceAsset(e,o,s,n,a);r.push(l),s--}else{u.b.debug("undefined reference asset found in clustering"),u.b.debug("undefined reference asset (oldestRank="+t+", newestRank="+n+",","totalAssetCount="+i+", rank="+s+")");var c=e._array[s],d=e.storeIds[s];u.b.debug("undefined reference asset (arrayVal="+c+", storeId="+d+","),s--}}return r},checkMaxBoundarySeparationForClusters:function(e,t,n){var i=t[0],r=t[t.length-1],a=n[0],s=n[n.length-1];return i>s?this.checkMaxBoundarySeparationForRanks(e,i,s):a>r?this.checkMaxBoundarySeparationForRanks(e,a,r):void 0},checkMaxBoundarySeparationForRanks:function(e,t,n){var i=ug(e,t),r=ug(e,n),a=i.assetDate,s=r.assetDate;return this._isBeyondMaxBoundary(a,s)},_clusterForReferenceAsset:function(e,t,n,i,r){var a=t.assetDate,s=Sh.arrayPool.getInstance(),o=n;for(s[0]=o,r[o]=1,o--;o>=i;)if(r[o])o--;else{var l=ug(e,o).assetDate;if(this._isBeyondMaxBoundary(l,a))break;s.push(o),r[o]=1,o--}return s},_isBeyondMaxBoundary:function(e,t){return Math.abs(e-t)>=864e5},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseClusterDelegate"}}).extend({_clusterForReferenceAsset:function(e,t,n,i,r){if(n===i){var a=Sh.arrayPool.getInstanceFromParams(n);return r[n]=1,a}for(var s=t.assetDate,o=this._boundaryRankForTemporalTheta(e,t,n,s,i,18e5),l=5,c=NaN,u=36e5;u<=864e5&&(o===(c=this._boundaryRankForTemporalTheta(e,t,n,s,i,u))&&l--,o=c,0!==l);u+=36e5);var d=u/36e5*16e3/111e3;return this._clusterForReferenceAssetWithSpatialSigma(e,t,n,o,d,r)},_boundaryRankForTemporalTheta:function(e,t,n,i,r,a){for(var s=n;s>r&&!(ug(e,s-1).assetDate-i>a);)s--;return s},_clusterForReferenceAssetWithSpatialSigma:function(e,t,n,i,r,a){var s=0,o=0,l=0,c=0,u=NaN,d=NaN,h=pg(t.locationLatitude),p=pg(t.locationLongitude);Number.isFinite(h)&&Number.isFinite(p)&&(s=(u=h)-r,o=u+r,l=(d=p)-r,c=d+r);var f=n,g=Sh.arrayPool.getInstance();for(g[0]=f,a[f]=1;--f>=i;)if(!a[f]){var m=ug(e,f),_=pg(m.locationLatitude),v=pg(m.locationLongitude);if(Number.isNaN(u)||Number.isNaN(d)||!Number.isFinite(_)||!Number.isFinite(v))Number.isFinite(_)&&Number.isFinite(v)&&(s=(u=_)-r,o=u+r,l=(d=v)-r,c=d+r,g.isGeoSpatial=!0);else if(g.isGeoSpatial=!0,!this._qualifyGeolocation(_,v,s,o,l,c))continue;g.push(f),a[f]=1}return g},_qualifyGeolocation:function(e,t,n,i,r,a){return e>=n&&e<=i&&t>=r&&t<=a},staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentClusterDelegate"}}),gg=P.a.extend(B.b,{items:V.b(k.c(Wo.b)),sections:V.b(k.c(Wo.b)),ensureRange:function(){},batchedChangesWillBegin:B.i(),batchedChangesDidEnd:B.i(),staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseIndexedProvider"}}),mg=Ic.moments_cluster_size,_g=gg.extend(ie.a,{dataManager:V.b(G.a.bindingFor("application.dataManager")),container:V.b({dependencies:["dataManager.cplSystemContainersMap"],strong:!0,readOnly:!0,get:Object.assign((function(){var e=this.dataManager&&this.dataManager.cplSystemContainersMap;if(void 0!==e)return e.get(jt.a.PredefinedName.MOMENTS)}),{__CW__getter:function(e,t,n,i){var r=this.dataManager&&i.internalGetPath(this,t[0+n]);if(void 0!==r)return r.get(jt.a.PredefinedName.MOMENTS)}})}),items:V.b(Oi.c("_assetsByPositionInMoments")),sections:V.b(Oi.c("_publishedMomentsWithPlaceholders")),ensureRange:function(e,t){var n=this.container.medias.length,i=this._rankForCellIndex(e,n),r=this._rankForCellIndex(t,n);return this._oldestRankMostRecentlyDemanded=i,this._newestRankMostRecentlyDemanded=r,this._ensureSealedMomentsInDemandRangeDeferred(),this.ensureRangeHasActuallyLoaded(e,t)},ensureRangeHasActuallyLoaded:function(e,t){var n=Z.a.create(),i={start:e,end:t,promise:n};return this._rangesToEnsure.push(i),this.checkIfRangesAreLoaded([i]),n},_rangesToEnsure:H.d({defaultValue:[],readOnly:!0,type:Array}),_ensureRangeObserver:B.g({inputs:["items","items.contentsDidChange"],callback:function(){this.checkIfRangesAreLoaded(this._rangesToEnsure)}}),checkIfRangesAreLoaded:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=n.start,r=n.end,a=n.promise;!0===this.areAllItemsInRangeLoaded(i,r)&&(a.resolve(),e.splice(t,1))}},areAllItemsInRangeLoaded:function(e,t){for(var n=this.items,i=Math.max(0,Math.min(e,t)),r=Math.min(n.length-1,Math.max(e,t)),a=i;a<=r;a++)if(void 0===n.encodedObjectAt(a))return!1;return!0},maxExpansionItems:H.d(180),_assetsByPositionInMoments:V.b({readOnly:!0,strong:!0,defaultValue:function(){return Ac.a.create(void 0,fr.a,this.bindingFor("dataManager"))}}),_publishedMomentsWithPlaceholders:V.b({defaultValue:k.c(Bf.a),readOnly:!0,strong:!0}),_sealedMomentsByAssetPrimaryKey:H.d((function(){return Sh.objectPool.getInstance()})),_setOfSealedMoments:H.d(k.c(oi.a)),_sealedRanks:H.d(k.c(kp.a)),_loadedRanks:H.d(k.c(kp.a)),_requestedRanks:H.d(k.c(kp.a)),_storeHasDataForRank:function(e,t,n){var i=t[e];if("string"!==typeof i)return!1;var r=fr.a.getStoreIdForPrimaryKey(i);return n.hasDataFor(r)},_rankForCellIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container.medias.length,n=t-e-1;return n},_scheduledEnsureSealedMomentsInDemandRangeId:0,_ensureSealedMomentsInDemandRangeDeferred:function(){this._scheduledEnsureSealedMomentsInDemandRangeId&&globalThis.clearTimeout(this._scheduledEnsureSealedMomentsInDemandRangeId),X.a(this._ensureSealedMomentsInDemandRangeBound,10)},_ensureSealedMomentsInDemandRange:function(e,t){if(!this._scheduledClusterSweepId){var n=e||this._oldestRankMostRecentlyDemanded,i=t||this._newestRankMostRecentlyDemanded,r=this._loadedRanks;if(r.contains(i,n)){var a=this._sealedRanks,s=a.contains(n),o=a.contains(i);if(!s||!o){var l=this.container.medias.length,c=this.maxExpansionItems,u=Math.ceil(c/2),d=Math.floor(c/2),h=NaN,p=NaN,f=NaN,g=NaN,m=NaN,_=0,v=0;o?(h=r.rangeEnd(n))<l-1&&(f=h+1,h=r.firstIndexAfter(h),_=(p=Math.min(f+c-1,h>-1?h-1:l-1,l-1))-f+1):s?(h=r.rangeStart(i))>0&&(g=h-1,h=r.lastIndexBefore(g),v=g-(m=Math.max(g-c+1,h>-1?h+1:0,0))+1):((h=r.rangeEnd(n))<l-1&&(f=h+1,h=r.firstIndexAfter(h),_=(p=Math.min(f+u-1,h>-1?h-1:l-1,l-1))-f+1),(h=r.rangeStart(i))>0&&(g=h-1,h=r.lastIndexBefore(g),v=g-(m=Math.max(g-d+1,h>-1?h+1:0,0))+1)),_&&this._requestUnrequestedRanksInRange(p,f),v&&this._requestUnrequestedRanksInRange(g,m)}}else this._requestUnrequestedRanksInRange(n,i)}},_ensureSealedMomentsInDemandRangeBound:H.d((function(){return function(){this._scheduledEnsureSealedMomentsInDemandRangeId=0,this._ensureSealedMomentsInDemandRange()}.bind(this)})),_requestUnrequestedRanksInRange:function(e,t){if(!Number.isSafeInteger(e)||e<0||!Number.isSafeInteger(t)||t<0)return!1;var n=this._requestedRanks;if(n.contains(t,e))return!1;for(var i=this.container,r=n.contains(e)?n.rangeStart(e)-1:e,a=n.contains(t)?n.rangeEnd(t)+1:t,s=r,o=n.lastIndexBefore(s),l=o>=a?o+1:a,c=i.medias.length;c--&&(i.loadMediasForRange(l,s).catch((function(e){throw e})),n.add(l,s),l!==a);)s=(o=n.rangeStart(l))-1,l=(o=n.lastIndexBefore(s))>=a?o+1:a;return!0},_onSourceMediasChanged:B.h({inputs:["container.medias.contentsDidChange","container.medias","container.medias.length"],callback:function(e,t,n){var i=this,r=e&&e.context,a=this._prevMediasLength;this._prevMediasLength=n||0;var s=!1;if(!r){if(!n)return;if(!a)for(var o=0;o<n;o++){void 0!==t.encodedObjectAt(o)&&(s=!0);break}if(!s)return void this._initializeMediasLength(n)}if(n){var l=this._sealedMomentsByAssetPrimaryKey,c=t._array,u=L.n(),d=new Map,h=new Map,p=!0,f=this._loadedRanks,g=this._sealedRanks,m=this._requestedRanks;if(s)p=!1,this._handleInitialArrayPopulated(d);else{for(var _=0===r.lengthDelta,v=NaN,b=!1,y=NaN,w=r.length,I=0;I<w;I++){var S=r.objectAt(I),C=S.index,E=S.operation,A=S.encodedItem;if(v!==I){if(y!==I)if(b)I<w-1&&r.objectAt(I+1).index<C&&(b=!1);else{if(E===Wo.b.REMOVE){if(A&&I<w-3){var O=r.objectAt(I+1);if(O.operation===Wo.b.INSERT&&O.index===C&&O.encodedItem&&(O=r.objectAt(I+3)).operation===Wo.b.INSERT&&O.index===C+1&&O.encodedItem===A){y=I+1,b=!0,p=!1;continue}}if(!A&&I<w-1){var T=r.objectAt(I+1);if(_&&T.index===C&&T.operation===Wo.b.INSERT&&T.encodedItem){v=I+1;continue}}if(m.itemsRemovedAtIndex(C,1),f.itemsRemovedAtIndex(C,1),g.itemsRemovedAtIndex(C,1),A)if(h.has(A)){var M=h.get(A);h.set(A,M+1)}else h.set(A,1)}else E===Wo.b.INSERT&&this._handleInsertion(d,C,A);p=!1}else if(m.itemsInsertedAtIndex(C,1),f.itemsInsertedAtIndex(C,1),g.itemsInsertedAtIndex(C,1),f.add(C),m.add(C),A)if(d.has(A)){var D=d.get(A);d.set(A,D+1)}else d.set(A,1)}else f.add(C)}if(p)return void this._rescheduleClusterSweep();var P=h.size>d.size?h:d,R=h.size<d.size?h:d;P.forEach((function(e,t){if(R.has(t)){var n=R.get(t);n===e?(P.delete(t),R.delete(t)):n>e?P.delete(t):e>n&&R.delete(t)}}))}var x=h.size,N=d.size;if(x&&h.forEach((function(e,t){t&&l[t]&&i._unsealMomentForAssetPrimaryKey(t)})),N){for(var F={},V=0;V<n;V++){var k=c[V];F[k]=V}var B=0,j=n-1;d.forEach((function(e,r){var a=r&&F[r];if(r&&a>=0){var s=i._oldestRankPossiblyAffectedByRank(a,t,n,c,u,!1);s>B&&(B=s);var o=i._newestRankPossiblyAffectedByRank(a,t,n,c,u,!1);o<j&&(j=o)}})),this._unsealMomentsForRange(B,j,F)}this._republishRequired=!0,this._rescheduleClusterSweep()}else this._initializeMediasLength(n)}}),_prevMediasLength:0,_handleInitialArrayPopulated:function(e){for(var t=this.container.medias,n=t.length,i=0;i<n;i++){var r=t.objectAt(i),a=r?r.pk:void 0;this._handleInsertion(e,i,a)}},_handleInsertion:function(e,t,n){var i=this._loadedRanks,r=this._sealedRanks,a=this._requestedRanks;if(a.itemsInsertedAtIndex(t,1),i.itemsInsertedAtIndex(t,1),r.itemsInsertedAtIndex(t,1),n)if(i.add(t),a.add(t),e.has(n)){var s=e.get(n);e.set(n,s+1)}else e.set(n,1)},_momentDataClass:hg,_clusterDelegate:H.d(k.c(fg)),_scheduledClusterSweepId:0,_postLoadClusterSweepDelay:300,_rescheduleClusterSweep:function(){this._scheduledClusterSweepId&&globalThis.clearTimeout(this._scheduledClusterSweepId),this._scheduledClusterSweepId=X.a(this._sweepClustersBound,this._postLoadClusterSweepDelay)},_sweepClustersBound:H.d((function(){return this._sweepClusters.bind(this)})),_sweepClusters:function(){this._scheduledClusterSweepId=0,this._processClustersInLoadedUnsealedRanks()},_initializeMediasLength:function(e){var t=this._momentDataClass.createPlaceholder(e,0).retain(),n=this._publishedMomentsWithPlaceholders,i=this._requestedRanks,r=this._loadedRanks,a=this._sealedRanks,s=this._assetsByPositionInMoments,o=this._setOfSealedMoments;this.batchedChangesWillBegin(),s.beginIgnoringChanges(),s.length>0&&s.clear(),s.length=e,s.endIgnoringChanges(),n.length>0&&n.clear(),n.push(t),i.length>0&&i.clear(),r.length>0&&r.clear(),a.length>0&&a.clear(),o.length>0&&o.clear(),this.batchedChangesDidEnd()},_completeNuclearAnnihilation:function(){var e=this.container.medias.length,t=this.container.getDataHash().medias,n=L.n(),i=Sh.objectPool;i.disposeInstance(this._sealedMomentsByAssetPrimaryKey),this._sealedMomentsByAssetPrimaryKey=i.getInstance(),this._initializeMediasLength(e);for(var r=this._loadedRanks,a=0;a<e;a++)this._storeHasDataForRank(a,t,n)&&r.add(a)},_processClustersInLoadedUnsealedRanks:function(){var e=this.container.medias,t=e.length,n=this._clusterDelegate,i=this._loadedRanks,r=this._sealedRanks,a=this._republishRequired;if(r.length!==i.length){var s=i.lastIndexBefore(t),o=r.contains(s)?r.rangeStart(s)-1:s;(s<0||o<0||!i.contains(s))&&_.b("Moments could not establish a processing range. ("+t+" total, "+i.length+" loaded, "+r.length+" sealed in "+this._setOfSealedMoments.length+" moments; cursor: "+s+", oldest: "+o+")"),s=i.firstIndexAfter(-1);for(var l=r.contains(s)?r.rangeEnd(s)+1:s,c=0,u=o,d=NaN,h=t;h--;)if(i.contains(u)||(u=i.lastIndexBefore(u)),r.contains(u)&&(u=r.rangeStart(u)-1),i.contains(u)){if(u<l)break;s=Math.max(i.rangeStart(u),l),d=r.contains(s)?Math.max(r.rangeEnd(s)+1,s):Math.max(r.lastIndexBefore(u)+1,s);var p=n.generateClustersInRange(e,u,d,t);c+=p.length-this._sealOrDiscardClusters(p,u,d),u=d-1}(c||a)&&this._republish(),this._ensureSealedMomentsInDemandRangeDeferred()}else a&&this._republish()},_republish:function(){this._republishRequired=!1,this.batchedChangesWillBegin(),this._updateSectionsAndItems(),this.batchedChangesDidEnd()},_sealOrDiscardClusters:function(e,t,n){for(var i=this._momentDataClass,r=this.container.medias,a=e.length,s=Sh.arrayPool,o=s.getInstance(),l=0,c=0;c<a;c++){var u=e[c];if(this._shouldMarkAsSealed(u,c,e,a,t,n)){var d=i.create(r,u).retain();this._markSealedMoment(d,u)}else l=o.push(u)}for(c=0;c<l;c++){var h=o[c];h.length,s.disposeInstance(h)}return s.disposeInstance(o),s.disposeInstance(e),l},_shouldMarkAsSealed:function(e,t,n,i,r,a){var s=this._sealedRanks,o=this.container.medias,l=o.length,c=this._clusterDelegate,u=e.length;if(1===i&&u===l&&l)return!0;if(mg&&u>=mg)return!0;var d,h=NaN,p=e[0],f=e[u-1],g=NaN,m=NaN,_=!1,v=!1;if(p!==l-1||_)if(t)for(h=t;h;){if(g=(d=n[--h])[0],m=d[d.length-1],mg&&d.length>=mg){_=!0;break}if(c.checkMaxBoundarySeparationForRanks(o,m,p)){_=!0;break}h||(g===l-1||s.contains(r+1))&&(_=!0)}else s.contains(r+1)&&(_=!0);else _=!0;if(0===f)v=!0;else if(t===i-1)s.contains(a-1)&&(v=!0);else for(h=t;h<i-1;){if(g=(d=n[++h])[0],m=d[d.length-1],mg&&d.length>=mg){v=!0;break}if(c.checkMaxBoundarySeparationForRanks(o,f,g)){v=!0;break}h===i-1&&(0===m||s.contains(a-1))&&(v=!0)}if(_&&v)return!0;if(e.isGeoSpatial&&0!==t){if(t===n.length-1)return!0;var b=n[t+1],y=n[t-1];return b.isGeoSpatial&&y.isGeoSpatial}return!1},_markSealedMoment:function(e,t){var n=this._sealedRanks,i=this._sealedMomentsByAssetPrimaryKey;this._setOfSealedMoments.add(e);for(var r=0,a=t.length;r<a;r++){var s=t[r],o=this.container.medias._array[s];n.add(s),i[o]=e}},_unsealMomentForAssetPrimaryKey:function(e){var t=this._sealedMomentsByAssetPrimaryKey,n=this._sealedRanks,i=t[e];if(i){for(var r=this.container.getDataHash().medias,a=i.identifiers,s=0,o=a.length;s<o;s++){var l=a[s],c=r.indexOf(l);t[l]=void 0,c>=0&&n.remove(c)}this._setOfSealedMoments.remove(i),i.release()}},_unsealMomentsForRange:function(e,t,n){for(var i=this._sealedRanks,r=this._setOfSealedMoments,a=this._sealedMomentsByAssetPrimaryKey,s=e,o=0;s>=t;){var l=a[this.container.medias._array[s]];if(l){for(var c=l.identifiers,u=c.length,d=0;d<u;d++){var h=c[d],p=n[h];a[h]=void 0,p>=0&&i.remove(p)}r.remove(l),l.release(),o++,s--}else s--}return o},_oldestRankPossiblyAffectedByRank:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e===n-1)return e;var s=this._clusterDelegate,o=this._loadedRanks,l=this._sealedRanks,c=o.firstIndexAfter(e);if(-1===c)return e;for(var u=a?l.firstIndexAfter(c)-1:o.lastIndexBefore(n),d=c;d<=u;)if(this._storeHasDataForRank(d,i,r)){if(s.checkMaxBoundarySeparationForRanks(t,e,d))break;d++}else d++;return Math.min(d,u)},_newestRankPossiblyAffectedByRank:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===e)return e;var s=this._clusterDelegate,o=this._loadedRanks,l=this._sealedRanks,c=o.lastIndexBefore(e);if(-1===c)return e;for(var u=a?l.lastIndexBefore(c)+1:o.firstIndexAfter(-1),d=c;d>=u;)if(this._storeHasDataForRank(d,i,r)){if(s.checkMaxBoundarySeparationForRanks(t,e,d))break;d--}else d--;return Math.max(d,u)},_updateSectionsAndItems:function(){for(var e=this._publishedMomentsWithPlaceholders,t=this._assetsByPositionInMoments,n=this._momentDataClass,i=this.container.medias._array,r=new Set,a=this._sealedMomentsByAssetPrimaryKey,s=0,o=0,l=e.length;o<l;o++){var c=e.objectAt(o);c.isPlaceholder&&c.release()}e.beginBatchedChanges(),e.length=0,t.beginBatchedChanges(),t.length=0;for(var u=i.length-1;u>=0;u--){var d=i[u];if(d){var h=a[d];h?(s>0&&(e.push(n.createPlaceholder(s).retain()),t.length+=s,s=0),r.has(h)||(r.add(h),e.push(h),t.push.apply(t,h.identifiers))):s++}else s++}s>0&&(e.push(n.createPlaceholder(s).retain()),t.length+=s),t.endBatchedChanges(),e.endBatchedChanges()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentsIndexedProvider"}}).sharedInstance,vg=n(587),bg={NATIVE_MAIL:"NATIVE_MAIL",WEB_MAIL:"WEB_MAIL",COPY_LINK:"COPY_LINK",SCHOOLWORK:"SCHOOLWORK"};Object.freeze(bg);var yg=P.a.extend(B.b,{init:function(e,t){J.a(e)||_.b("A zoneName String is required for ZoneID",{zoneName:e,ownerRecordName:t}),this.__s._$6A$init.call(this,{zoneName:e,ownerRecordName:t})},zoneName:V.b(),ownerRecordName:V.b(),toHash:function(){var e={zoneName:this.zoneName};return Vn.a(this.ownerRecordName)||(e.ownerRecordName=this.ownerRecordName),{zoneID:e}},__superMap:{_$6A$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneID"}}),wg=P.a.extend({name:null,application:H.d({readOnly:!0,get:function(){var e=this._application;return e||(e=this._application=this.loadApplication()),e}}),init:function(e){this.__s._$My$init.call(this,e),ve.a.set("launcher",this)},loadApplication:function(){return null},launch:function(){},willLaunchApplication:function(){},didLaunchApplication:function(){},__superMap:{_$My$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseApplicationLauncher"}}),Ig=wg.extend({launch:function(){var e=this.get("application");e?(this.willLaunchApplication(),e.load(),this.didLaunchApplication()):u.b.error(this+" Missing application. Cannot launch app")},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationLauncher"}}),Sg=P.a.extend({origin:null,cloudOSHost:null,init:function(e){this.__s._$2u$init.call(this,e),this._registeredEventListeners=[],this._messageQueue=[],this._sendingMessage=!1},addEventListener:function(e,t){this._registeredEventListeners.push(t)},removeEventListener:function(e,t){var n=this._registeredEventListeners,i=n.indexOf(t);i>=0&&n.splice(i,1)},sendMessage:function(e,t){this._messageQueue.push({methodName:e,args:t||[]}),this._trySendingNextMesssage()},_trySendingNextMesssage:function(){if(!this._sendingMessage){var e=this._messageQueue;if(0!==e.length){var t=e.shift(),n=this;this._sendingMessage=!0,setTimeout((function(){t.isCloudOSMessage=!0;for(var e=n.origin,i=n.cloudOSHost,r=n._registeredEventListeners,a=0,s=r.length;a<s;a++){var o=r[a];o&&o.call(window,{data:t,source:i,origin:e})}n._sendingMessage=!1,n._trySendingNextMesssage()}))}}},__superMap:{_$2u$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ApplicationWindowProxy"}}),Cg=wn.b.extend({viewClass:Sn.b.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"alertIcon",classes:["alert-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}]},{type:"ELEMENT",tagname:"p",children:[{type:"VIEWOUTLET",tagname:"view",name:"hsaTrustedBrowserCheckbox"}]}],classes:["alert-text-container"]}],classes:["alert-main-content"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"primaryButtonView"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"alternateButtonView",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"alternateButtonView"}]},{type:"VIEWOUTLET",tagname:"view",name:"otherButtonView"}],name:"buttonContainer",classes:["alert-button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"primaryButtonView",truevalue:"has-primary-btn",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"alternateButtonView",truevalue:"has-alternate-btn",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"otherButtonView",truevalue:"has-other-btn",attributes:{}}]}],name:"alertView",classes:["cw-alert"],attributes:{role:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"modalDialogRole",attributes:{},attribute:"role"},"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"alertViewArialLabel",attributes:{},attribute:"aria-label"},tabindex:"-1"}}],name:"modalView",classes:["cw-alert-modal",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOpen",truevalue:"is-open",falsevalue:"is-closing",attributes:{}}]}}}),view:V.b({downstreamBindings:{hsaTrustedBrowserCheckbox:"(owner).hsaTrustedBrowserCheckbox"}}),showingLogoutAlert:V.b(),hsaTrustedBrowser:V.b(),iconNames:"icon-icloud",message:s.d("HSA.SignoutDialog.Title"),primaryButton:{title:s.d("HSA.SignoutDialog.SignoutButton"),action:"logout"},alternateButton:{title:s.d("Button.Cancel")},hsaTrustedBrowserCheckbox:V.b({defaultValue:k.c(Ih,{label:s.d("HSA.SignoutDialog.CheckboxTitle"),additionalClassNames:["cw-theme","cw-checkbox","hsa-trusted-browser"]}),downstreamBindings:{isChecked:"(owner).hsaTrustedBrowser"}}),logout:function(){return!1},modalDialogDidDismiss:function(){var e=this,t=arguments;e.__s._$dz$modalDialogDidDismiss.apply(e,t),this.showingLogoutAlert=!1,this.view.enableAllButtons()},__superMap:{_$dz$modalDialogDidDismiss:"modalDialogDidDismiss"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LogoutAlertViewController"}}),Eg=we.b("EmbeddedCloudOSHost.State",["Inactive","LoggedOut","LoggingIn","LoggedIn","LoggingOut","Validating","FetchingPreferences"]),Ag=[{action:"showAccountSettings",disableWhenCurrentApp:"settings",target:"CloudOS",title:"iCloud Settings"},{action:"performLogout",target:"CloudOS",title:"Sign Out"}],Og=P.a.extend(B.b,Ti.a,{staticMembers:{State:Eg,__QUALIFIED_CLASS_NAME__:"CloudOSHost"},state:H.d({readOnly:!0,get:function(){return this._state}}),isActive:H.d({readOnly:!0,get:function(){return this._state!==Eg.Inactive}}),isLoggedOut:H.d({readOnly:!0,get:function(){return this._state===Eg.LoggedOut}}),isLoggingOut:H.d({readOnly:!0,get:function(){return this._state===Eg.LoggingOut}}),isLoggedIn:H.d({readOnly:!0,get:function(){return this._state===Eg.LoggedIn}}),isLoggingIn:H.d({readOnly:!0,get:function(){return this._state===Eg.LoggingIn}}),isFetchingPrefs:H.d({readOnly:!0,get:function(){return this._state===Eg.FetchingPreferences}}),defaultAssetHostname:H.d({readOnly:!0,get:function(){var e=window.location.hostname;return"www"+e.substring(e.indexOf("."))}}),origin:H.d({set:function(e){this._origin=e||null},get:function(){var e=this._origin;return e||(e=this._origin=this.loadDefaultOrigin()),e}}),accountMenuItems:H.d({set:function(e){this._accountMenuItems=e||null},get:function(){var e=this._accountMenuItems;return e||(e=this._accountMenuItems=this.loadDefaultAccountMenuItems()),e}}),setupService:null,regionFormatProvider:null,init:function(e){this.__s._$13k$init.call(this,e),this._messageHandlers={},this._appWindowProxy=this.loadApplicationWindowProxy(),this._cloudOSWindowProxy=this.loadCloudOSWindowProxy(),this._state=Eg.Inactive,this._userSession={},this.logoutAlertViewController.nextResponder=this,this.addMessageHandler("performLogout",this.performLogout.bind(this)),this.addMessageHandler("setAccountPreference",this.setAccountPreference.bind(this))},addMessageHandler:function(e,t){e&&t||Tg("Invalid arguments. Cannot add message handler");var n=this._messageHandlers,i=n[e];i||(i=n[e]=[]),i.push(t)},activate:function(){this.isActive&&Tg("Cannot activate. Invalid state");var e=this.origin,t=this._appWindowProxy,n=this._cloudOSWindowProxy;e||Tg("Cannot activate. Host requires a valid origin"),t||Tg("Cannot activate. Host requires an application window proxy object"),n||Tg("Cannot activate. Host requires a CloudOS window proxy object"),this.regionFormatProvider||Tg("Cannot activate. Host requires a region format provider"),n.target=this,n.action=this._handleIncomingCloudOSApplicationMessage,t.origin=e,t.cloudOSHost=n,window["cosk.system.applicationDriver.inputChannelWindow"]=t,this._state=Eg.LoggedOut},loadApplicationWindowProxy:function(){return Sg.create()},loadCloudOSWindowProxy:function(){return Dg.create()},loadDefaultAccountMenuItems:function(){return Ag},loadDefaultOrigin:function(){var e=location.host.match(/^(www|beta|carry|future)\.icloud\.com[.cn]*$/);return"https://"+(e?e[0]:this.defaultAssetHostname)},login:function(e,t){var n=this;this.isLoggedOut||Tg("Cannot login. Invalid state"),e&&t||Tg("Cannot login. Host requires a user name and password"),this._state=Eg.LoggingIn;var i=this.setupService;return i||Tg("Cannot login. Host requires a setup service"),i.login(e,t).then((function(e){return n._completeLogin(e),Z.a.resolve()})).catch((function(i){n._state=Eg.LoggedOut;var r=Mg("Failed to log in");return r.nextError=i,r.username=e,r.password=t,Z.a.reject(r)}))},_filterPreferences:function(e){for(var t=e.apps,n={accountPreferences:{},appPreferences:{}},i=function(){var e=t[r],i=e["app-id"],a=e["registry-version"];"account"===i?(e.keys.forEach((function(e){n.accountPreferences[e.name]=e.data})),n.accountPreferences.preferencesVersion=a):(n.appPreferences[i]={},e.keys.forEach((function(e){n.appPreferences[i][e.name]=e.data})),n.appPreferences[i].preferencesVersion=a)},r=0;r<t.length;r++)i();return n},_completeLogin:function(e,t){var n=this._userSession={authorizationBag:e};this._state=Eg.LoggedIn;var i=this.regionFormatProvider.getFormattingRulesForLocale("en-us"),r={items:this.accountMenuItems},a=this._filterPreferences(t);this._accountPreferences=a.accountPreferences,this._appPreferences=a.appPreferences;var s={authBag:n.authorizationBag,regionFormattingRules:i,accountMenu:r,accountPreferences:a.accountPreferences,appPreferences:a.appPreferences};this._appWindowProxy.sendMessage("_applicationShouldInvokeMain",[null,s,null,null])},logout:function(){var e=this;this.isLoggedIn||this.isFetchingPrefs||Tg("Cannot logout user. Invalid state"),this._state=Eg.LoggingOut;var t={};ve.a.currentUser.hsaEnabled&&(t.trustBrowser=this.hsaTrustedBrowser);var n=this.setupService;return n||Tg("Cannot login. Host requires a setup service"),n.logout(t).then((function(){e._state=Eg.LoggedOut,e._userSession={};var t=e.defaultAssetHostname,n=encodeURI(window.location.href);return window.location.href="https://"+t+"/#postLoginRedirectUrl="+n,Z.a.resolve()})).catch((function(t){e._state=Eg.LoggedIn;var n=Mg("Failed to log out");n.nextError=t;var i=self._userSession;return n.username=i.username,n.password=i.password,Z.a.reject(n)}))},validate:function(){var e=this;this._state=Eg.Validating;var t=this.setupService;return t||Tg("Cannot validate. Host requires a setup service"),t.validate().then((function(t){return e.fetchPreferences(t),Z.a.resolve()})).catch((function(t){e._state=Eg.LoggedOut;var n=e.defaultAssetHostname,i=encodeURI(window.location.href),r=Mg("Not logged in, redirecting to CloudOS to sign in...");return r.nextError=t,window.location.href="https://"+n+"/#postLoginRedirectUrl="+i,Z.a.reject(r)}))},fetchPreferences:function(e){var t=this;this._state=Eg.FetchingPreferences;var n=this.keyValueService;return n||Tg("Cannot fetch preferences. Host requires a Key Value Service"),n.getPreferences(e).then((function(n){return t._completeLogin(e,n),Z.a.resolve()})).catch((function(e){u.b.warn("Unable to fetch preferences"),t.logout()}))},sendMessage:function(e,t){this.isLoggedIn||Tg("Cannot send message to application. Invalid state"),this._appWindowProxy.sendMessage(e,t)},sendWillBecomeActiveMessage:function(){this.sendMessage("applicationWillBecomeActive")},sendDidBecomeActiveMessage:function(){this.sendMessage("applicationDidBecomeActive")},sendQuotaDidChangeMessage:function(){this.sendMessage("quotaDataDidChange")},sendQuotaFailedToLoadMessage:function(){this.sendMessage("quotaDataFailedToLoad")},sendQuotaDataMessage:function(e){var t=[{quotaData:e}];this.sendMessage("_cloudOSStateChange",t)},_handleIncomingCloudOSApplicationMessage:function(e,t){var n=e.methodName;switch(n){case"applicationIsReady":return this.sendWillBecomeActiveMessage(),void this.sendDidBecomeActiveMessage()}var i=this._messageHandlers[n];i?i.forEach((function(n){n.call(null,e,t)})):u.b.warn("EmbeddedCloudOSHost: Unhandled application message '"+n+"'")},showingLogoutAlert:V.b(!1),hsaTrustedBrowser:V.b(ve.a.bindingFor("authBag.hsaTrustedBrowser")),logoutAlertViewController:V.b({defaultValue:k.c(Cg),downstreamBindings:{showingLogoutAlert:"(owner).showingLogoutAlert",hsaTrustedBrowser:"(owner).hsaTrustedBrowser"},strong:!0}),performLogout:function(){this.isLoggedOut||this.isLoggingOut||this.showingLogoutAlert?u.b.warn("Either the user is not logged in or logout process has already started. Ignoring new logout call."):(this.logoutAlertViewController.show(),this.showingLogoutAlert=!0)},setAccountPreference:function(e){var t=this,n=this.keyValueService;if(n||Tg("Cannot set Account Preference. Host requires a setup service"),e.args){var i=e.args[0],r=e.args[1];return n.setAccountPreference(i,r).then((function(e){var n=t._filterPreferences(e).accountPreferences;t._accountPreferences.preferencesVersion=n.preferencesVersion,t.sendMessage("_cloudOSStateChange",[{accountPreferences:t._accountPreferences}]),u.b.info("Successfully saved account preference")})).catch((function(e){var t=Mg("Failed to set account preference");return t.nextError=e,Z.a.reject(t)}))}u.b.info("No account preference to save")},__superMap:{_$13k$init:"init"}});function Tg(e){_.b("EmbeddedCloudOSHost: "+e)}function Mg(e){return new Error("EmbeddedCloudOSHost: "+e)}var Dg=P.a.extend({target:null,action:null,postMessage:function(e,t){var n=this.target;this.action.call(n,e,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CloudOSWindowProxy"}}),Pg=P.a.extend({rules:H.d({set:function(e){this._regionFormattingRules=e},get:function(){var e=this._regionFormattingRules;return e||(e=this._regionFormattingRules=this.loadRegionFormattingRules(),this.didLoadRegionFormattingRules(e)),e}}),loadRegionFormattingRules:function(){return{locale:"en-US",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamic-rgsa","islamic-tbla","islamic-umalqura","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:[{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",pattern:"{weekday}, {month} {day}, {year}, {hour}:{minute}:{second}",pattern12:"{weekday}, {month} {day}, {year}, {hour}:{minute}:{second} {ampm}"},{weekday:"short",month:"short",day:"numeric",year:"numeric",pattern:"{weekday}, {month} {day}, {year}"},{month:"short",day:"numeric",year:"numeric",pattern:"{month} {day}, {year}"},{month:"numeric",day:"numeric",year:"numeric",pattern:"{month}/{day}/{year}"},{month:"numeric",year:"numeric",pattern:"{month}/{year}"},{month:"short",year:"numeric",pattern:"{month} {year}"},{month:"short",day:"numeric",pattern:"{month} {day}"},{month:"numeric",day:"numeric",pattern:"{month}/{day}"},{hour:"numeric",minute:"2-digit",second:"2-digit",pattern:"{hour}:{minute}:{second}",pattern12:"{hour}:{minute}:{second} {ampm}"},{hour:"numeric",minute:"2-digit",pattern:"{hour}:{minute}",pattern12:"{hour}:{minute} {ampm}"}],calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-rgsa":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-tbla":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},"islamic-umalqura":{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhu\u02bbl-Q.","Dhu\u02bbl-H."],long:["Muharram","Safar","Rabi\u02bb I","Rabi\u02bb II","Jumada I","Jumada II","Rajab","Sha\u02bbban","Ramadan","Shawwal","Dhu\u02bbl-Qi\u02bbdah","Dhu\u02bbl-Hijjah"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Taika (645-650)","Hakuchi (650-671)","Hakuh\u014d (672-686)","Shuch\u014d (686-701)","Taih\u014d (701-704)","Keiun (704-708)","Wad\u014d (708-715)","Reiki (715-717)","Y\u014dr\u014d (717-724)","Jinki (724-729)","Tempy\u014d (729-749)","Tempy\u014d-kamp\u014d (749-749)","Tempy\u014d-sh\u014dh\u014d (749-757)","Tempy\u014d-h\u014dji (757-765)","Temph\u014d-jingo (765-767)","Jingo-keiun (767-770)","H\u014dki (770-780)","Ten-\u014d (781-782)","Enryaku (782-806)","Daid\u014d (806-810)","K\u014dnin (810-824)","Tench\u014d (824-834)","J\u014dwa (834-848)","Kaj\u014d (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","J\u014dgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampy\u014d (889-898)","Sh\u014dtai (898-901)","Engi (901-923)","Ench\u014d (923-931)","Sh\u014dhei (931-938)","Tengy\u014d (938-947)","Tenryaku (947-957)","Tentoku (957-961)","\u014cwa (961-964)","K\u014dh\u014d (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","J\u014dgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Sh\u014dryaku (990-995)","Ch\u014dtoku (995-999)","Ch\u014dh\u014d (999-1004)","Kank\u014d (1004-1012)","Ch\u014dwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Ch\u014dgen (1028-1037)","Ch\u014dryaku (1037-1040)","Ch\u014dky\u016b (1040-1044)","Kantoku (1044-1046)","Eish\u014d (1046-1053)","Tengi (1053-1058)","K\u014dhei (1058-1065)","Jiryaku (1065-1069)","Enky\u016b (1069-1074)","Sh\u014dho (1074-1077)","Sh\u014dryaku (1077-1081)","Eiho (1081-1084)","\u014ctoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eich\u014d (1096-1097)","Sh\u014dtoku (1097-1099)","K\u014dwa (1099-1104)","Ch\u014dji (1104-1106)","Kash\u014d (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eiky\u016b (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tensh\u014d (1131-1132)","Ch\u014dsh\u014d (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","K\u014dji (1142-1144)","Teny\u014d (1144-1145)","Ky\u016ban (1145-1151)","Ninpei (1151-1154)","Ky\u016bju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","\u014cho (1161-1163)","Ch\u014dkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Ka\u014d (1169-1171)","Sh\u014dan (1171-1175)","Angen (1175-1177)","Jish\u014d (1177-1181)","Y\u014dwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenky\u016b (1190-1199)","Sh\u014dji (1199-1201)","Kennin (1201-1204)","Genky\u016b (1204-1206)","Ken-ei (1206-1207)","Sh\u014dgen (1207-1211)","Kenryaku (1211-1213)","Kenp\u014d (1213-1219)","Sh\u014dky\u016b (1219-1222)","J\u014d\u014d (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","J\u014dei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-\u014d (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","H\u014dji (1247-1249)","Kench\u014d (1249-1256)","K\u014dgen (1256-1257)","Sh\u014dka (1257-1259)","Sh\u014dgen (1259-1260)","Bun-\u014d (1260-1261)","K\u014dch\u014d (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","K\u014dan (1278-1288)","Sh\u014d\u014d (1288-1293)","Einin (1293-1299)","Sh\u014dan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","\u014cch\u014d (1311-1312)","Sh\u014dwa (1312-1317)","Bunp\u014d (1317-1319)","Gen\u014d (1319-1321)","Genky\u014d (1321-1324)","Sh\u014dch\u016b (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genk\u014d (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","K\u014dkoku (1340-1346)","Sh\u014dhei (1346-1370)","Kentoku (1370-1372)","Bunch\u0169 (1372-1375)","Tenju (1375-1379)","K\u014dryaku (1379-1381)","K\u014dwa (1381-1384)","Gench\u0169 (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","K\u014d\u014d (1389-1390)","Meitoku (1390-1394)","\u014cei (1394-1428)","Sh\u014dch\u014d (1428-1429)","Eiky\u014d (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","H\u014dtoku (1449-1452)","Ky\u014dtoku (1452-1455)","K\u014dsh\u014d (1455-1457)","Ch\u014droku (1457-1460)","Kansh\u014d (1460-1466)","Bunsh\u014d (1466-1467)","\u014cnin (1467-1469)","Bunmei (1469-1487)","Ch\u014dky\u014d (1487-1489)","Entoku (1489-1492)","Mei\u014d (1492-1501)","Bunki (1501-1504)","Eish\u014d (1504-1521)","Taiei (1521-1528)","Ky\u014droku (1528-1532)","Tenmon (1532-1555)","K\u014dji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tensh\u014d (1573-1592)","Bunroku (1592-1596)","Keich\u014d (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Sh\u014dho (1644-1648)","Keian (1648-1652)","Sh\u014d\u014d (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enp\u014d (1673-1681)","Tenwa (1681-1684)","J\u014dky\u014d (1684-1688)","Genroku (1688-1704)","H\u014dei (1704-1711)","Sh\u014dtoku (1711-1716)","Ky\u014dh\u014d (1716-1736)","Genbun (1736-1741)","Kanp\u014d (1741-1744)","Enky\u014d (1744-1748)","Kan-en (1748-1751)","H\u014dryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Ky\u014dwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenp\u014d (1830-1844)","K\u014dka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunky\u016b (1861-1864)","Genji (1864-1865)","Kei\u014d (1865-1868)","M","T","S","H"],short:["Taika (645-650)","Hakuchi (650-671)","Hakuh\u014d (672-686)","Shuch\u014d (686-701)","Taih\u014d (701-704)","Keiun (704-708)","Wad\u014d (708-715)","Reiki (715-717)","Y\u014dr\u014d (717-724)","Jinki (724-729)","Tempy\u014d (729-749)","Tempy\u014d-kamp\u014d (749-749)","Tempy\u014d-sh\u014dh\u014d (749-757)","Tempy\u014d-h\u014dji (757-765)","Temph\u014d-jingo (765-767)","Jingo-keiun (767-770)","H\u014dki (770-780)","Ten-\u014d (781-782)","Enryaku (782-806)","Daid\u014d (806-810)","K\u014dnin (810-824)","Tench\u014d (824-834)","J\u014dwa (834-848)","Kaj\u014d (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","J\u014dgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampy\u014d (889-898)","Sh\u014dtai (898-901)","Engi (901-923)","Ench\u014d (923-931)","Sh\u014dhei (931-938)","Tengy\u014d (938-947)","Tenryaku (947-957)","Tentoku (957-961)","\u014cwa (961-964)","K\u014dh\u014d (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","J\u014dgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Sh\u014dryaku (990-995)","Ch\u014dtoku (995-999)","Ch\u014dh\u014d (999-1004)","Kank\u014d (1004-1012)","Ch\u014dwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Ch\u014dgen (1028-1037)","Ch\u014dryaku (1037-1040)","Ch\u014dky\u016b (1040-1044)","Kantoku (1044-1046)","Eish\u014d (1046-1053)","Tengi (1053-1058)","K\u014dhei (1058-1065)","Jiryaku (1065-1069)","Enky\u016b (1069-1074)","Sh\u014dho (1074-1077)","Sh\u014dryaku (1077-1081)","Eiho (1081-1084)","\u014ctoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eich\u014d (1096-1097)","Sh\u014dtoku (1097-1099)","K\u014dwa (1099-1104)","Ch\u014dji (1104-1106)","Kash\u014d (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eiky\u016b (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tensh\u014d (1131-1132)","Ch\u014dsh\u014d (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","K\u014dji (1142-1144)","Teny\u014d (1144-1145)","Ky\u016ban (1145-1151)","Ninpei (1151-1154)","Ky\u016bju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","\u014cho (1161-1163)","Ch\u014dkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Ka\u014d (1169-1171)","Sh\u014dan (1171-1175)","Angen (1175-1177)","Jish\u014d (1177-1181)","Y\u014dwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenky\u016b (1190-1199)","Sh\u014dji (1199-1201)","Kennin (1201-1204)","Genky\u016b (1204-1206)","Ken-ei (1206-1207)","Sh\u014dgen (1207-1211)","Kenryaku (1211-1213)","Kenp\u014d (1213-1219)","Sh\u014dky\u016b (1219-1222)","J\u014d\u014d (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","J\u014dei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-\u014d (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","H\u014dji (1247-1249)","Kench\u014d (1249-1256)","K\u014dgen (1256-1257)","Sh\u014dka (1257-1259)","Sh\u014dgen (1259-1260)","Bun-\u014d (1260-1261)","K\u014dch\u014d (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","K\u014dan (1278-1288)","Sh\u014d\u014d (1288-1293)","Einin (1293-1299)","Sh\u014dan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","\u014cch\u014d (1311-1312)","Sh\u014dwa (1312-1317)","Bunp\u014d (1317-1319)","Gen\u014d (1319-1321)","Genky\u014d (1321-1324)","Sh\u014dch\u016b (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genk\u014d (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","K\u014dkoku (1340-1346)","Sh\u014dhei (1346-1370)","Kentoku (1370-1372)","Bunch\u016b (1372-1375)","Tenju (1375-1379)","K\u014dryaku (1379-1381)","K\u014dwa (1381-1384)","Gench\u016b (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","K\u014d\u014d (1389-1390)","Meitoku (1390-1394)","\u014cei (1394-1428)","Sh\u014dch\u014d (1428-1429)","Eiky\u014d (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","H\u014dtoku (1449-1452)","Ky\u014dtoku (1452-1455)","K\u014dsh\u014d (1455-1457)","Ch\u014droku (1457-1460)","Kansh\u014d (1460-1466)","Bunsh\u014d (1466-1467)","\u014cnin (1467-1469)","Bunmei (1469-1487)","Ch\u014dky\u014d (1487-1489)","Entoku (1489-1492)","Mei\u014d (1492-1501)","Bunki (1501-1504)","Eish\u014d (1504-1521)","Taiei (1521-1528)","Ky\u014droku (1528-1532)","Tenmon (1532-1555)","K\u014dji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tensh\u014d (1573-1592)","Bunroku (1592-1596)","Keich\u014d (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Sh\u014dho (1644-1648)","Keian (1648-1652)","Sh\u014d\u014d (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enp\u014d (1673-1681)","Tenwa (1681-1684)","J\u014dky\u014d (1684-1688)","Genroku (1688-1704)","H\u014dei (1704-1711)","Sh\u014dtoku (1711-1716)","Ky\u014dh\u014d (1716-1736)","Genbun (1736-1741)","Kanp\u014d (1741-1744)","Enky\u014d (1744-1748)","Kan-en (1748-1751)","H\u014dryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Ky\u014dwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenp\u014d (1830-1844)","K\u014dka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunky\u016b (1861-1864)","Genji (1864-1865)","Kei\u014d (1865-1868)","Meiji","Taish\u014d","Sh\u014dwa","Heisei"],long:["Taika (645-650)","Hakuchi (650-671)","Hakuh\u014d (672-686)","Shuch\u014d (686-701)","Taih\u014d (701-704)","Keiun (704-708)","Wad\u014d (708-715)","Reiki (715-717)","Y\u014dr\u014d (717-724)","Jinki (724-729)","Tempy\u014d (729-749)","Tempy\u014d-kamp\u014d (749-749)","Tempy\u014d-sh\u014dh\u014d (749-757)","Tempy\u014d-h\u014dji (757-765)","Temph\u014d-jingo (765-767)","Jingo-keiun (767-770)","H\u014dki (770-780)","Ten-\u014d (781-782)","Enryaku (782-806)","Daid\u014d (806-810)","K\u014dnin (810-824)","Tench\u014d (824-834)","J\u014dwa (834-848)","Kaj\u014d (848-851)","Ninju (851-854)","Saiko (854-857)","Tennan (857-859)","J\u014dgan (859-877)","Genkei (877-885)","Ninna (885-889)","Kampy\u014d (889-898)","Sh\u014dtai (898-901)","Engi (901-923)","Ench\u014d (923-931)","Sh\u014dhei (931-938)","Tengy\u014d (938-947)","Tenryaku (947-957)","Tentoku (957-961)","\u014cwa (961-964)","K\u014dh\u014d (964-968)","Anna (968-970)","Tenroku (970-973)","Ten-en (973-976)","J\u014dgen (976-978)","Tengen (978-983)","Eikan (983-985)","Kanna (985-987)","Ei-en (987-989)","Eiso (989-990)","Sh\u014dryaku (990-995)","Ch\u014dtoku (995-999)","Ch\u014dh\u014d (999-1004)","Kank\u014d (1004-1012)","Ch\u014dwa (1012-1017)","Kannin (1017-1021)","Jian (1021-1024)","Manju (1024-1028)","Ch\u014dgen (1028-1037)","Ch\u014dryaku (1037-1040)","Ch\u014dky\u016b (1040-1044)","Kantoku (1044-1046)","Eish\u014d (1046-1053)","Tengi (1053-1058)","K\u014dhei (1058-1065)","Jiryaku (1065-1069)","Enky\u016b (1069-1074)","Sh\u014dho (1074-1077)","Sh\u014dryaku (1077-1081)","Eiho (1081-1084)","\u014ctoku (1084-1087)","Kanji (1087-1094)","Kaho (1094-1096)","Eich\u014d (1096-1097)","Sh\u014dtoku (1097-1099)","K\u014dwa (1099-1104)","Ch\u014dji (1104-1106)","Kash\u014d (1106-1108)","Tennin (1108-1110)","Ten-ei (1110-1113)","Eiky\u016b (1113-1118)","Gen-ei (1118-1120)","Hoan (1120-1124)","Tenji (1124-1126)","Daiji (1126-1131)","Tensh\u014d (1131-1132)","Ch\u014dsh\u014d (1132-1135)","Hoen (1135-1141)","Eiji (1141-1142)","K\u014dji (1142-1144)","Teny\u014d (1144-1145)","Ky\u016ban (1145-1151)","Ninpei (1151-1154)","Ky\u016bju (1154-1156)","Hogen (1156-1159)","Heiji (1159-1160)","Eiryaku (1160-1161)","\u014cho (1161-1163)","Ch\u014dkan (1163-1165)","Eiman (1165-1166)","Nin-an (1166-1169)","Ka\u014d (1169-1171)","Sh\u014dan (1171-1175)","Angen (1175-1177)","Jish\u014d (1177-1181)","Y\u014dwa (1181-1182)","Juei (1182-1184)","Genryuku (1184-1185)","Bunji (1185-1190)","Kenky\u016b (1190-1199)","Sh\u014dji (1199-1201)","Kennin (1201-1204)","Genky\u016b (1204-1206)","Ken-ei (1206-1207)","Sh\u014dgen (1207-1211)","Kenryaku (1211-1213)","Kenp\u014d (1213-1219)","Sh\u014dky\u016b (1219-1222)","J\u014d\u014d (1222-1224)","Gennin (1224-1225)","Karoku (1225-1227)","Antei (1227-1229)","Kanki (1229-1232)","J\u014dei (1232-1233)","Tempuku (1233-1234)","Bunryaku (1234-1235)","Katei (1235-1238)","Ryakunin (1238-1239)","En-\u014d (1239-1240)","Ninji (1240-1243)","Kangen (1243-1247)","H\u014dji (1247-1249)","Kench\u014d (1249-1256)","K\u014dgen (1256-1257)","Sh\u014dka (1257-1259)","Sh\u014dgen (1259-1260)","Bun-\u014d (1260-1261)","K\u014dch\u014d (1261-1264)","Bun-ei (1264-1275)","Kenji (1275-1278)","K\u014dan (1278-1288)","Sh\u014d\u014d (1288-1293)","Einin (1293-1299)","Sh\u014dan (1299-1302)","Kengen (1302-1303)","Kagen (1303-1306)","Tokuji (1306-1308)","Enkei (1308-1311)","\u014cch\u014d (1311-1312)","Sh\u014dwa (1312-1317)","Bunp\u014d (1317-1319)","Gen\u014d (1319-1321)","Genky\u014d (1321-1324)","Sh\u014dch\u016b (1324-1326)","Kareki (1326-1329)","Gentoku (1329-1331)","Genk\u014d (1331-1334)","Kemmu (1334-1336)","Engen (1336-1340)","K\u014dkoku (1340-1346)","Sh\u014dhei (1346-1370)","Kentoku (1370-1372)","Bunch\u016b (1372-1375)","Tenju (1375-1379)","K\u014dryaku (1379-1381)","K\u014dwa (1381-1384)","Gench\u016b (1384-1392)","Meitoku (1384-1387)","Kakei (1387-1389)","K\u014d\u014d (1389-1390)","Meitoku (1390-1394)","\u014cei (1394-1428)","Sh\u014dch\u014d (1428-1429)","Eiky\u014d (1429-1441)","Kakitsu (1441-1444)","Bun-an (1444-1449)","H\u014dtoku (1449-1452)","Ky\u014dtoku (1452-1455)","K\u014dsh\u014d (1455-1457)","Ch\u014droku (1457-1460)","Kansh\u014d (1460-1466)","Bunsh\u014d (1466-1467)","\u014cnin (1467-1469)","Bunmei (1469-1487)","Ch\u014dky\u014d (1487-1489)","Entoku (1489-1492)","Mei\u014d (1492-1501)","Bunki (1501-1504)","Eish\u014d (1504-1521)","Taiei (1521-1528)","Ky\u014droku (1528-1532)","Tenmon (1532-1555)","K\u014dji (1555-1558)","Eiroku (1558-1570)","Genki (1570-1573)","Tensh\u014d (1573-1592)","Bunroku (1592-1596)","Keich\u014d (1596-1615)","Genwa (1615-1624)","Kan-ei (1624-1644)","Sh\u014dho (1644-1648)","Keian (1648-1652)","Sh\u014d\u014d (1652-1655)","Meiryaku (1655-1658)","Manji (1658-1661)","Kanbun (1661-1673)","Enp\u014d (1673-1681)","Tenwa (1681-1684)","J\u014dky\u014d (1684-1688)","Genroku (1688-1704)","H\u014dei (1704-1711)","Sh\u014dtoku (1711-1716)","Ky\u014dh\u014d (1716-1736)","Genbun (1736-1741)","Kanp\u014d (1741-1744)","Enky\u014d (1744-1748)","Kan-en (1748-1751)","H\u014dryaku (1751-1764)","Meiwa (1764-1772)","An-ei (1772-1781)","Tenmei (1781-1789)","Kansei (1789-1801)","Ky\u014dwa (1801-1804)","Bunka (1804-1818)","Bunsei (1818-1830)","Tenp\u014d (1830-1844)","K\u014dka (1844-1848)","Kaei (1848-1854)","Ansei (1854-1860)","Man-en (1860-1861)","Bunky\u016b (1861-1864)","Genji (1864-1865)","Kei\u014d (1865-1868)","Meiji","Taish\u014d","Sh\u014dwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},standaloneMonths:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},standaloneMonths:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},standaloneDays:{narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Before R.O.C.","Minguo"],short:["Before R.O.C.","Minguo"],long:["Before R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}},defaultTimeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultDateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"-{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"-{currency}{number}"},percent:{positivePattern:"{number}%",negativePattern:"-{number}%"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",percent:"%",infinity:"\u221e",exponent:"E"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN\xa5",EUR:"\u20ac",GBP:"\xa3",HKD:"HK$",ILS:"\u20aa",INR:"\u20b9",JPY:"\xa5",KRW:"\u20a9",MXN:"MX$",NZD:"NZ$",THB:"\u0e3f",TWD:"NT$",USD:"$",VND:"\u20ab",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"},currencyCode:"USD"}}},didLoadRegionFormattingRules:function(e){},getFormattingRulesForLocale:function(e){return this.rules},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockRegionFormatProvider"}}),Lg={_generateURLForPath:function(e,t){var n=this.clientBuildNumber,i=this.clientMasteringNumber,r="";return n&&(r="?clientBuildNumber="+n,i&&(r+="&clientMasteringNumber="+i)),e+t+r}},Rg=P.a.extend(Lg,{clientBuildNumber:null,clientMasteringNumber:null,login:function(e,t){var n={apple_id:e,password:t,extended_login:!1},i=ae.a.create({url:this._generateURLForPath("/setup/ws/1/login"),method:"POST",body:n,useCredentialsIfCrossOrigin:!0});return i.setHeader("Content-Type","text/plain"),i.send().then((function(){return{authorizationBag:i.response.body,sessionInfo:{}}})).catch((function(e){var t=xg("Failed login request",e);return t.request=i,t.status=i.response.status,Z.a.reject(t)}))},logout:function(e){var t=this._request=ae.a.create({url:this._generateURLForPath("/setup/ws/1/logout"),method:"POST",body:e,useCredentialsIfCrossOrigin:!0});return t.setHeader("Content-Type","text/plain"),t.send().catch((function(e){var n=xg("Failed logout request",e);return n.request=t,n.status=t.response.status,Z.a.reject(n)}))},validate:function(){var e=ae.a.create({url:this._generateURLForPath("/setup/ws/1/validate"),method:"POST",body:{},useCredentialsIfCrossOrigin:!0,shouldReportSuccess:!0,shouldReportFailure:!0});return e.send().then((function(){return e.response.body})).catch((function(t){var n=xg("Faild validate request",t);return n.request=e,n.status=e.response.status,Z.a.reject(n)}))},_generateURLForPath:function(e){return this.__s._$lW$_generateURLForPath.call(this,"https://setup.icloud.com",e)},__superMap:{_$lW$_generateURLForPath:"_generateURLForPath"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RuntimeSetupService"}});function xg(e,t){var n=new Error("RuntimeSetupService: "+e);return n.nextError=t,n}var Ng=P.a.extend(Lg,{clientBuildNumber:null,clientMasteringNumber:null,getPreferences:function(e){var t=this,n=e.appsOrder;n.unshift("account");var i=ae.a.create({url:this._generateURLForPath("/json/sync",e),method:"POST",body:this._generateBodyForPrefs(n),useCredentialsIfCrossOrigin:!0});return i.setHeader("Content-Type","text/plain"),i.send().then((function(){return i.response.body})).catch((function(e){var n=t.createError("Failed key value service request",e);return n.request=i,n.status=i.response.status,Z.a.reject(n)}))},setAccountPreference:function(e,t){var n,i=this,r=ve.a.environment.accountPreferences,a=r.preferencesVersion,s={};return s[e]=t,r[e]=t,(n=ae.a.create({url:this._generateURLForPath("/json/sync"),method:"POST",body:this._generateBodyForPrefs(["account"],s,a),useCredentialsIfCrossOrigin:!0})).setHeader("Content-Type","text/plain"),n.send().then((function(){return n.response.body})).catch((function(e){var t=i.createError("Failed key value service request",e);return t.request=n,t.status=n.response.status,Z.a.reject(t)}))},createError:function(e,t){var n=new Error("KeyValueService: "+e);return n.nextError=t,n},_generateURLForPath:function(e,t){var n;if(n=t?t.webservices.keyvalue.url:ve.a.environment.authBag.servicesInfo.keyvalue.url)return this.__s._$iT$_generateURLForPath.call(this,n,e)},_generateBodyForPrefs:function(e,t,n){return{"service-id":"appleprefs",apps:e.map((function(e){var i,r={"app-id":e,"registry-version":n||""};if(t)for(i in r.keys=[],t)r.keys.push({name:i,data:t[i]});return r}))}},__superMap:{_$iT$_generateURLForPath:"_generateURLForPath"},staticMembers:{__QUALIFIED_CLASS_NAME__:"KeyValueService"}}),Fg=wg.extend({launch:function(){var e=Rg.create(),t=Pg.create(),n=Ng.create(),i=Og.create({setupService:e,regionFormatProvider:t,keyValueService:n});i.activate();var r=this.get("application");r?(this.willLaunchApplication(),r.load(),this.didLaunchApplication(),i.validate().catch((function(e){u.b.error("Failed to launch application. Embedded CloudOS host failed to log in.",e)}))):u.b.error(this+" Missing application. Cannot launch app")},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowApplicationLauncher"}}),Vg=n(788),kg=n(749),Bg={getJSONAuthorizationBagForCredentials:function(e,t){}},jg={getPreferences:function(){},setPreferences:function(e,t){}},Ug=P.a.extend({authBag:H.d({set:function(e){this._authBag=e},get:function(){var e=this._authBag;return e||(e=this._authBag=this.loadAuthorizationBag(),this.didLoadAuthorizationBag(e)),e}}),loadAuthorizationBag:function(){return{isExtendedLogin:!1,webservices:{},dsInfo:{firstName:"",lastName:"",fullName:"",primaryEmail:"",appleId:"",dsid:"1",aDsID:"",primaryEmailVerified:!0,iCloudAppleIdAlias:"",appleIdAlias:"",locale:"en-us_US",hasICloudQualifyingDevice:!0,isPaidDeveloper:!1,"gilligan-invited":"true","gilligan-enabled":"true",statusCode:2,brMigrated:!1,languageCode:"en-us",locked:!1,appleIdAliases:[]},environment:"ICLOUD3",appsOrder:[],pcsServiceIdentitiesIncluded:!0,apps:{},requestInfo:{region:"CA",isAppleInternal:!0,timeZone:"PST",country:"US"},pcsEnabled:!0,version:1}},didLoadAuthorizationBag:function(e){},getJSONAuthorizationBagForCredentials:function(e,t){return this.authBag},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockAuthorizationBagProvider"}}),Gg=P.a.extend({authorizationBagProvider:H.d({set:function(e){this._authBagProvider=e},get:function(){var e=this._authBagProvider;return e||(e=this._authBagProvider=this.loadAuthorizationBagProvider()),e}}),loadAuthorizationBagProvider:function(){return BR.CloudOS.MockAuthorizationBagProvider.create()},login:function(e,t){var n=this.authorizationBagProvider.getJSONAuthorizationBagForCredentials(e,t),i=Z.a.create();return setTimeout((function(){i.resolve({authorizationBag:n,session:{}})})),i},logout:function(e){var t=Z.a.create();return setTimeout((function(){t.resolve()})),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"MockSetupService"}}),Hg={getFormattingRulesForLocale:function(e){}},Wg={login:function(e,t){},logout:function(e){},validate:function(e){}},$g={staticMembers:{parse:function(e){var t=this,n=arguments,i=t.__s._$87$parse.apply(t,n);return i.hostname=i.shardedHostname,delete i.shardedHostname,i},init:function(){var e=this,t=arguments,n=Me.a(this.components),i=n.indexOf("hostname");i>=0&&(n[i]="shardedHostname"),this.components=n,e.__s._$Je$init.apply(e,t)},generateShardedHostname:function(e,t){return e.replace(/\-/,"-"+t+"-")},__superMap:{_$87$parse:"parse",_$Je$init:"init"}},shardedHostname:V.b({dependencies:["hostname","shardNumber"],readOnly:!0,get:Object.assign((function(){var e=this.hostname,t=this.shardNumber;return e&&t?this.constructor.generateShardedHostname(e,t):e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?this.constructor.generateShardedHostname(r,a):r}})}),shardNumber:V.b()},zg=j.a.extend($g,{staticMembers:{generateShardedHostname:function(e,t){return e.replace(/cvws/,"cvws-00"+t)},__QUALIFIED_CLASS_NAME__:"ContentVendorURL"}}),Kg=j.a.extend($g,{isCOSKUrl:!0,serviceName:H.d({defaultValue:function(){var e=ve.a.get("cloudOSApplication"),t=e.get("primaryServiceName");return t||(t=e.name),this.configureServiceURL(t),t},set:function(e){return this.configureServiceURL(e),e}}),clientIdQueryParamKey:V.b("clientId"),includeDSID:H.d({defaultValue:!0}),init:function(e){var t=this,n=arguments;t.__s._$W_$init.apply(t,n),this.setCOSQueryParameters(),this.configureServiceURL()},setCOSQueryParameters:function(){var e=globalThis.__CW_BUILD_INFO;this.setQueryParameter("clientBuildNumber",e.buildNumber),this.setQueryParameter("clientMasteringNumber",e.masteringNumber),this.setQueryParameter(this.get("clientIdQueryParamKey"),ve.a.getPath("environment.clientId")),this.includeDSID&&this.setQueryParameter("dsid",ve.a.getPath("currentUser.dsid"))},configureServiceURL:function(e){var t=e||this.serviceName;if(t){var n=ve.a.getPath("authBag.servicesInfo");if(!n)return u.b.warn("COSK.Network.URL: Missing servicesInfo from COSK.globals.authBag.servicesInfo");var i=ve.a.getPath("cloudOSApplication.name"),r=n[t];if(r){var a=r.url;if(a&&J.a(a)){var s=j.a.create(a);this.protocol=s.protocol,this.hostname=s.hostname,this.port=s.port}}else if(t!==i)return u.b.warn("COSK.Network.URL: Invalid URL for service: "+t)}},__superMap:{_$W_$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"URL"}}),qg={shouldReportSuccess:H.d(!1),shouldReportFailure:H.d(!0),shouldReportRequest:H.d(!0),reportingPathname:H.d({defaultValue:"REDACTED"}),reportingMethod:null,_timeSent:null,send:function(){var e=this,t=arguments;this._timeSent=window.performance.now();var n=e.__s._$ST$send.apply(e,t);return ve.a.get("cloudOSService").requestSent(),n},didComplete:function(){this.sendReport()},sendReport:function(e){var t=this.get("response");if(t){var n=this.get("url"),i=t.get("encodedBody"),r=this.get("method"),a=this.get("reportingMethod"),s=null,o=t.get("status").toString()[0],l=this.get("shouldReportSuccess"),c="5"===o||"0"===o;(this.get("shouldReportFailure")&&("4"===o||c)||l&&"2"===o)&&(s={httpMethod:a?a+" VIA "+r:r,statusCode:t.get("status"),hostname:n.get("hostname"),serviceName:n.serviceName,clientTiming:window.performance.now()-this._timeSent,uncompressedResponseSize:i?i.length:null,timedOut:this.get("state")===kn.b.TIMEDOUT,urlPath:this.get("reportingPathname")||n.get("pathname")},Object.assign(s,e)),this.get("shouldReportRequest")&&ve.a.get("cloudOSService").requestReceived(s,t.get("status"),n.get("href"),c?i:void 0)}},__superMap:{_$ST$send:"send"}},Qg={mixinDependencies:[qg],staticMembers:{requestLoggingLevel:u.a.LOG_LEVEL_DEBUG},shouldReportFailure:H.d({get:function(e){return"boolean"===typeof e?e:421!==this.getPath("response.status")}}),URLClass:Kg,specialResponseStatuses:[401,421,423,503],finalize:function(){var e=this,t=arguments;e.__s._$Sb$finalize.apply(e,t);var n=this.get("response");if(n){var i=n.get("status"),r=-1!==this.specialResponseStatuses.indexOf(i);r&&this._specialResponseWasReceived()}},_specialResponseWasReceived:function(){var e=this.get("response"),t=e.get("status"),n=e.get("body"),i=JSON.stringify(n),r=n?n.retryAfter:null,a={serviceName:this.url.serviceName,timeTaken:Date.now()-this.sentAt,retryAfter:r};ve.a.get("cloudOSService").didReceiveSpecialResponse(t,i,a)},url:V.b({defaultValue:function(){return this.URLClass.create()}}),__superMap:{_$Sb$finalize:"finalize"}},Yg=ae.a.extend(Qg,{useCredentialsIfCrossOrigin:!0,willSend:function(){this.url.isCOSKUrl&&this.url.setCOSQueryParameters()},copyKeys:k.c(Array),copy:function(){for(var e=this.copyKeys,t=this.constructor.create(),n=0,i=e.length;n<i;n++){var r=e[n];t[r]=this[r]}return t._statusEventListeners?u.b.warn("New request has event handlers, old handlers not copied."):t._statusEventListeners=this._statusEventListeners,t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Request"}}),Zg=P.a.extend(ie.a,{isFormData:function(e){return e instanceof FormData&&"undefined"!==typeof e},isBlob:function(e){return e instanceof Blob},isFile:function(e){return e instanceof File},isFileList:function(e){return e instanceof FileList},blobSlice:function(e,t,n,i){var r=Blob.prototype;return(r.slice||r.webKitSlice||r.mozSlice).call(e,t,n,i)},staticMembers:{__QUALIFIED_CLASS_NAME__:"FileAPI"}}),Xg=ae.a.extend(B.b,{init:function(){var e=this,t=arguments;e.__s._$Ig$init.apply(e,t),this.get("transport")!==Jn.a.get("sharedInstance")&&Object(_.b)("Attempting a file upload from an unsupported browser.",this);var n=this.uploadProgress;n.bytesTotal=this._totalSize||0,this.on(kn.b.SUCCEEDED,(function(){n.bytesTransferred=n.bytesTotal}))},method:kn.a.POST,body:Object(V.b)({set:function(e){return this.generateFormDataFromBody(e)},didChange:U.a}),files:Object(k.c)(Array),bodySerializer:null,shouldTrackUploadProgress:!0,formKey:"files",generateFormDataFromBody:function(e){var t=Zg.get("sharedInstance");if(t.isFormData(e)||!e)return e;var n=t.isFileList(e),i=t.isFile(e),r=t.isBlob(e);i||n||r||Object(_.b)("Must provide either a File or FileList.",{fileOrFileList:e});var a=new FormData;return this._totalSize=0,n?Array.prototype.forEach.call(e,(function(e){this.appendFileToFormData(e,a)}),this):this.appendFileToFormData(e,a),a},appendFileToFormData:function(e,t){var n=this.get("formKey"),i=te.a.get("sharedInstance");!e.size&&i.get("isIE")&&i.get("majorVersion")<=10?t.append(n,""):t.append(n,e),this._totalSize+=e.size||0,this.files.push(e)},__superMap:{_$Ig$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequest"}}),Jg=Xg.extend(Qg,{staticMembers:{__QUALIFIED_CLASS_NAME__:"UploadRequest"}}),em=n(529),tm=[423,424];function nm(e){return function(t,n){return function(e,t,n){if(Yr.a(n)&&n.kindOf(Yg)||_.b("[cloudos-kit] Requires a request class for CK url"),im.cachedResponse){var i=im.cachedResponse;im.cachedResponse=null;var r=Z.a.create();return X.a((function(){rm(r,{url:"",response:{status:200,headers:"",encodedBody:JSON.stringify(i)},autorelease:U.a})}),im.cachedResponseDelay||0),r}var a=e.substr(0,7),s="http://"===a||"https:/"===a,o=t.method||"GET",l=t.headers||{},c=t.body||"",u=function(e){var t={},n=e.split("?");if(n.length>1)for(var i=n[1].split("&"),r=0;r<i.length;r++){var a=i[r].split("="),s=a[0],o=a[1];t[s]=decodeURIComponent(o)}return t}(e),d=e.split("?");d.length>1&&(e=d[0]);var h,p={method:o,headers:l,body:c,shouldReportSuccess:!0,shouldReportFailure:!0,reportingPathname:null};if(s)if(-1!==e.indexOf("/device/")){var f=j.a.create(e).path;(h=n.create(p)).setPath("url.serviceName","ckdeviceservice"),h.setPath("url.pathname",f)}else t.credentials&&"include"===t.credentials&&(p.useCredentialsIfCrossOrigin=!0),p.url=e,h=ae.a.create(p);else(h=n.create(p)).setPath("url.serviceName","ckdatabasews"),h.setPath("url.pathname",e),h.url.setQueryParameter("remapEnums",!0),h.onStatus(423,sm.bind(this,Object.keys(p))),h.onStatus(424,sm.bind(this,Object.keys(p)));h.url=lm(h.url,u),h.retain();var g=Z.a.create();h.didSucceed=rm.bind(this,g),h.didFail=am.bind(this,g);var m=im.config;if(m){var v=m.additionalQueryParameters;v&&(h.url=lm(h.url,v))}return h.send().catch((function(e){})),g}(t,n,e)}}var im=nm(Yg);function rm(e,t){var n=t.response,i=n.headers,r={status:n.status,type:"default",headers:om(i),url:t.url.toString(),text:function(){var e=Z.a.create(),t=n.encodedBody;return e.resolve(t),e},json:function(){var e=Z.a.create(),t=JSON.parse(n.encodedBody);return e.resolve(t),e}};e.resolve(r),t.autorelease()}function am(e,t){var n=t.get("response");if(-1===tm.indexOf(n.status)){if(n&&n.status)return rm(e,t);var i=n.encodedBody,r=new TypeError(i);e.reject(r),t.autorelease()}}function sm(e,t){e.push("url"),ve.a.cloudOSService.revalidateUser().then((function(){u.b.info("CKRequest: Retrying request after revalidate"),t.set("copyKeys",e),t.copy().send()}))}function om(e){for(var t={},n=e.split("\n"),i=0;i<n.length;i++)if(!(n[i].length<1)){var r=n[i].split(": "),a=r.shift(),s=r.join(":");t[a]=s}return t}function lm(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];e.setQueryParameter(r,t[r])}return e}var cm={persistAfterLogoutSuffix:".persist",getValueFromSessionStorage:function(e){return this._getValueFromStorage("sessionStorage",e)},setValueInSessionStorage:function(e,t){return this._setValueInStorage("sessionStorage",e,t)},removeValueInSessionStorage:function(e){return this._removeValueInStorage("sessionStorage",e)},getKeysInSessionStorage:function(){return this._getKeysInStorage("sessionStorage")},clearSessionStorage:function(){return this._clearStorage("sessionStorage")},getValueFromLocalStorage:function(e,t){return this._getValueFromStorage("localStorage",e,t)},setValueInLocalStorage:function(e,t,n){return this._setValueInStorage("localStorage",e,t,n)},removeValueInLocalStorage:function(e,t){return t&&(e+=this.persistAfterLogoutSuffix),this._removeValueInStorage("localStorage",e)},getKeysInLocalStorage:function(){return this._getKeysInStorage("localStorage")},clearLocalStorage:function(){return this._clearStorage("localStorage",!0)},_getStorageObject:function(e){try{return window[e]}catch(t){u.b.warn("Could not get storage object for %@: %@",e,t)}},_getValueFromStorage:function(e,t,n){var i,r,a=null,s=this._getStorageObject(e);return s&&s.getItem&&((i=(r=ve.a.cloudOSApplication)?r.name:"iCloud")&&(t=i+"."+t),n&&(t+=this.persistAfterLogoutSuffix),a=s.getItem(t)),a},_setValueInStorage:function(e,t,n,i){var r,a,s=!1,o=this._getStorageObject(e);if(o&&o.setItem){(r=(a=ve.a.cloudOSApplication)?a.name:"iCloud")&&(t=r+"."+t),i&&(t+=this.persistAfterLogoutSuffix);try{o.setItem(t,n),s=!0}catch(aY){}}return s},_getKeysInStorage:function(e){var t,n,i,r,a=[],s=this._getStorageObject(e);if(s)for(r in(n=(t=ve.a.cloudOSApplication)?t.name:"iCloud")&&(n+="."),i=n?n.length:0,s)0===r.indexOf(n)&&a.push(r.substring(i));return a}};function um(e){e||_.b("You must specify a URL");var t,n=ve.a.environment;n&&(n.isBeta&&(t="beta"),n.isCarry&&(t="carry"),n.isFuture&&(t="future"));var i,r=ve.a.cloudOSApplication;if(r&&(r.isBeta&&(i="beta"),r.isCarry&&(i="carry"),r.isFuture&&(i="future")),t&&t!==i){if("string"===typeof e){var a=j.a.create(e);return a.appendQueryParameter("rootDomain",t),a.href}e.appendQueryParameter("rootDomain",t)}return e}var dm=function(e,t){return ve.a.get("authBag").getServiceUrlFor(e,t)},hm=n(739),pm=function(e,t){Storage.setValueInSessionStorage("reloadReason",e),"PROD"!==ve.a.environment.iCloudEnvironment&&Storage.setValueInSessionStorage("preReloadLogMessages",u.b.stringifyRecordedLogMessages()),t?window.location=t:window.location.reload(),ve.a.isReloading=!0},fm=Bt.extend({run:function(){var e=this,t=arguments;this.cloudOSState===Rt.NotLoaded&&this.load();var n=null;try{window.opener&&window.opener.CloudOS&&(n=window.opener.CloudOS)}catch(o){u.b.debug("Cannot get the Opener window."+o.message)}var i=window.location.hash.split("instanceId=")[1];if(i){var r=window.location,a=r.hash;a=(a=a.split("&instanceId=")[0]).split("#instanceId=")[0];var s=window.history;s&&s.replaceState?s.replaceState(null,null,r.pathname+r.search+a):r.hash=a}n&&n.windowApplicationIsKnown(i||window)?(u.b.debug("COSK.WindowApplication: Asking parent CloudOS to be initialized"),n.windowApplicationHasInitialized(i||window,this.get("name"))):(u.b.debug("COSK.WindowApplication: Starting stand-alone"),u.b.debug("COSK.WindowApplication: To be implemented")),e.__s._$ZK$run.apply(e,t)},prepareForLoad:function(){var e=this,t=arguments,n="en-us";if(n!==s.c()){var i=re.get("sharedInstance");i.setCookie("X-APPLE-WEB-USERLOCALE",n),Storage.getValueFromSessionStorage("didRefreshToLocale")!==n?(Storage.setValueInSessionStorage("didRefreshToLocale",n),pm("prepareForLoad: Changing locale")):u.b.warn("Already attempted refresh to locale "+n)}e.__s._$s0$prepareForLoad.apply(e,t)},willBecomeActive:function(){},didBecomeActive:function(){},willBecomeSuspended:function(){},didBecomeSuspended:function(){},__superMap:{_$ZK$run:"run",_$s0$prepareForLoad:"prepareForLoad"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowApplication"}}),gm=n(280),mm={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFO:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMP_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTH_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUESTED_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,HEADER_FIELDS_TOO_LARGE:431,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,NETWORK_AUTHENTICATION_REQUIRED:511},_m=n(401),vm=n(746),bm={ok:H.d({readOnly:!0,type:Boolean,get:function(){var e=this.status||0;return 2===parseInt(e/100)}})},ym=vm.a.extend(bm,{staticMembers:{__QUALIFIED_CLASS_NAME__:"AsyncResult"}}),wm={PUBLIC:"PUBLIC",PRIVATE:"PRIVATE"};Object.freeze(wm);var Im={READ_ONLY:"READ_ONLY",READ_WRITE:"READ_WRITE",NONE:"NONE",MIXED:"MIXED"};Object.freeze(Im);var Sm=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["checkbox-icon"]}],classes:["checkbox"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"optionLabel",attributes:{}}],classes:["text"]}],classes:["option-label",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"selected",falsevalue:"",attributes:{}}]},className:"select-option-item-view",__QUALIFIED_CLASS_NAME__:"SelectOptionItemView"},id:V.b(),pointerUp:function(e){this.sendEvent("didSelectOption",{optionItem:this,event:e}),e.preventDefault()}}),Cm=In.a.extend(kl.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"selectionText",attributes:{}}],classes:["label"]},{type:"ELEMENT",tagname:"div",classes:["separator"]},{type:"ELEMENT",tagname:"div",classes:["chevron"]}],name:"selectDiv",classes:["select-box"]},{type:"ELEMENT",tagname:"div",name:"modalDiv",classes:["modal"]},{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"_optionsViews"}],name:"optionsDiv",classes:["options",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showOptionsForMeasuring",truevalue:"shown-for-measuring",attributes:{}}]}],classes:["select-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOptionsVisible",truevalue:"open",attributes:{}}]},className:"ck-sharing-select-view",__QUALIFIED_CLASS_NAME__:"SelectView"},action:null,value:V.b({}),_isAttachedDidChange:B.h("isAttached",(function(e){e&&this.propertyChanged("selectionText")})),_windowSize:V.b(te.a.sharedInstance.window),_windowSizeDidChange:B.h("_windowSize.width","_windowSize.height",(function(){this.isAttached&&this.hideModalAndOptions()})),selectionText:V.b({dependencies:["value","options"],readOnly:!0,get:Object.assign((function(){var e,t=this.value,n=this.options;if(n)for(var i=n.length,r=0;r<i;r++){var a=n.objectAt(r);a.value===t&&(e=a.label)}return e||(e="--"),e}),{__CW__getter:function(e,t,n,i){var r,a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]);if(s)for(var o=s.length,l=0;l<o;l++){var c=s.objectAt(l);c.value===a&&(r=c.label)}return r||(r="--"),r}})}),options:V.b(k.c(Wo.b)),_redraw:B.h("element","options","options.contentsDidChange","value",(function(e,t,n){if(e&&t){var i=this._optionsViews,r=t.length;i.beginBatchedChanges(),i.clear();for(var a=0,s=r;a<s;a++){var o=t.objectAt(a),l=!1;o.value===this.value&&(l=!0);var c=Sm.create({optionLabel:o.label,id:o.value,isSelected:l});i.push(c)}i.endBatchedChanges(),this.positionOptionsView()}})),isVisibleOnScreen:V.b(),showOptionsForMeasuring:V.b(),isVisibleOnScreenObserver:B.h("isVisibleOnScreen",(function(e){var t=this;e&&X.a((function(){if(t.showOptionsForMeasuring=!0,t.optionsDiv.getElementsByClassName("text")[0].clientWidth>0)t._setWidthOfSelectViewBasedOnContents();else{var e=Pd.a.create({delay:100,timesToFire:1/0,callAction:function(){this.optionsDiv.getElementsByClassName("text")[0].clientWidth>0&&(this._setWidthOfSelectViewBasedOnContents(),e.stop())}.bind(t)});e.start()}}),0)})),_setWidthOfSelectViewBasedOnContents:function(){this.showOptionsForMeasuring=!0;for(var e,t=[],n=this.optionsDiv.getElementsByClassName("text"),i=0,r=n.length;i<r;i++)e=n[i].clientWidth+53,t.push(e);this.showOptionsForMeasuring=!1;var a=Math.max.apply(Math,t);yl.c(this.element,{width:a})},_downPoint:null,pointerDown:function(e){if(!this.isDisabled){if(this.options.length>0)for(var t=!1,n=e.target;!t&&n;)n===this.modalDiv?(this.hideModalAndOptions(),t=!0):n===this.selectDiv?(t=!0,this.showModalAndOptions(),this._downPoint={x:e.clientX,y:e.clientY}):n=n.parentNode;e.preventDefault()}},didSelectOption:function(e,t){var n=this._downPoint,i=e.event;if(!n||n.x!==i.clientX||n.y!==i.clientY){var r=this.value,a=e.optionItem.id;if(a!==r){var s=this.action;Vn.a(s)?this.value=a:this.sendEvent(s,a)}this.hideModalAndOptions()}},isOptionsVisible:V.b(),showModalAndOptions:function(){this.isOptionsVisible=!0,this.positionOptionsView()},hideModalAndOptions:function(){this.isOptionsVisible=!1},positionOptionsView:function(){var e=this.selectDiv,t=this.optionsDiv,n=e.getBoundingClientRect(),i={},r=e.clientHeight,a=this.options,s=a.length;"rtl"===globalThis.document.dir?(i.left="auto",i.right=globalThis.innerWidth-n.right-24+"px"):i.left=n.left-24+"px",i["min-width"]=e.clientWidth+"px";for(var o=-1,l=0;l<s;l++)if(a.objectAt(l).value==this.value){o=l;break}for(var c=this._optionsViews,u=c.length,d=0;d<u;d++){var h=c.objectAt(d);yl.c(h.element,{height:r})}var p=1+n.top;-1!==o&&(p-=o*r),i.top=p+"px",i.height=s*r+"px",yl.c(t,i)}}),Em=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleButton"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextWOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideDropdownSummary",truevalue:"hidden",attributes:{}}]}],classes:["options-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showToggle",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"accessLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"accessDropdown"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasAccessDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"allowLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"permissionDropdown"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showPermissionsDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"additionalButton"}]}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"additionalButtonIsVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]}],classes:["container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showDropdownsContainer",truevalue:"",falsevalue:"hidden",attributes:{}}]}],classes:["share-options-dropdown",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"showShareOptionsDropdown",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldHideNonDropdownSummary",truevalue:"hidden",attributes:{}}]}],classes:["access-control-section",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"isExpanded",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"additionalButtonIsVisible",truevalue:"has-additional-button",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AccessControlView"},toggleButton:V.b({defaultValue:k.c(In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"m1.250001,1.062507l14.843682,14.875035l14.843815,-14.875035",fill:"none"}}],classes:["chevron"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"12px",height:"11px",viewBox:"0 0 32 20"}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]}],classes:["options-button"]}},title:s.d("CKSharing.AddParticipants.ShareSettingsDisclosureButton.Title"),action:"toggleOptions"}))}),_shouldHideDropdownSummary:V.b({readOnly:!0,dependencies:["isExpanded","shouldHideAddParticipantsSummary"],get:Object.assign((function(){return this.isExpanded||this.shouldHideAddParticipantsSummary}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_shouldHideNonDropdownSummary:V.b({readOnly:!0,dependencies:["hasDropdown","shouldHideAddParticipantsSummary"],get:Object.assign((function(){return this.hasDropdown||this.shouldHideAddParticipantsSummary}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),shouldHideAddParticipantsSummary:V.b(!1),transport:V.b(),isToggleEnabled:!0,isExpanded:V.b(!1),isDisabled:V.b(!1),showShareOptionsDropdown:V.b({dependencies:["supportedAccess","supportedPermissions","transport"],readOnly:!0,get:Object.assign((function(){var e=this.supportedPermissions,t=this.supportedAccess,n=this.transport,i=e?e.length:0,r=t?t.length:0;return(i>1||r>1)&&n!==bg.SCHOOLWORK}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[2+n]),o=r?r.length:0,l=a?a.length:0;return(o>1||l>1)&&s!==bg.SCHOOLWORK}})}),isHidden:V.b({dependencies:["isLoading"],readOnly:!0,get:Object.assign((function(){return this.isLoading}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),isLoading:V.b(!1),accessDropdownValue:V.b(),permissionDropdownValue:V.b(),supportedAccess:V.b(),supportedPermissions:V.b(),summaryTextNoOption:V.b(),summaryTextWOption:V.b(),accessLabelString:H.d(s.d("CKSharing.AddParticipants.AccessLabel.Title")),allowLabelString:H.d(s.d("CKSharing.AddParticipants.AllowLabel.Title")),hasAccessDropdown:V.b({readOnly:!0,dependencies:["supportedAccess"],get:Object.assign((function(){var e=this.supportedAccess;return!!e&&e.length>1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return!!r&&r.length>1}})}),showPermissionsDropdown:V.b(!0),hasDropdown:V.b({readOnly:!0,dependencies:["hasAccessDropdown","showPermissionsDropdown"],get:Object.assign((function(){return this.hasAccessDropdown||this.showPermissionsDropdown}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),showToggle:V.b({readOnly:!0,dependencies:["hasAccessDropdown","showPermissionsDropdown"],get:Object.assign((function(){return this.isToggleEnabled&&this.hasAccessDropdown&&this.showPermissionsDropdown}),{__CW__getter:function(e,t,n,i){return this.isToggleEnabled&&i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),showDropdownsContainer:V.b({readOnly:!0,dependencies:["showToggle","isExpanded","hasDropdown"],get:Object.assign((function(){return this.showToggle?this.isExpanded&&this.hasDropdown:this.hasDropdown}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n]):i.internalGet(this,t[2+n])}})}),selectViewsAreVisibleOnScreen:V.b({readOnly:!0,dependencies:["showToggle","isExpanded","isHidden"],get:Object.assign((function(){if(!this.isHidden)return!this.showToggle||this.isExpanded}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[2+n]))return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),accessDropdown:V.b({defaultValue:k.c(Cm,{action:"setEffectiveAccess",ariaLabel:"Share Access Level",options:[{value:wm.PRIVATE,label:s.d("CKSharing.AddParticipants.Private")},{value:wm.PUBLIC,label:s.d("CKSharing.AddParticipants.Public")}]}),downstreamBindings:{value:"(owner).accessDropdownValue",isVisibleOnScreen:"(owner).selectViewsAreVisibleOnScreen",isDisabled:"(owner).isDisabled"}}),permissionDropdown:V.b({defaultValue:k.c(Cm,{action:"setEffectivePermission",ariaLabel:"Share Permission",options:[{value:Im.READ_WRITE,label:s.d("CKSharing.PermissionsCombo.AllowEditing")},{value:Im.READ_ONLY,label:s.d("CKSharing.PermissionsCombo.ViewOnly")}]}),downstreamBindings:{value:"(owner).permissionDropdownValue",isVisibleOnScreen:"(owner).selectViewsAreVisibleOnScreen",isDisabled:"(owner).isDisabled"}}),additionalButtonTitle:V.b(),additionalButtonIsVisible:V.b({readOnly:!0,dependencies:["additionalButtonTitle","accessDropdownValue"],get:Object.assign((function(){return!!this.additionalButtonTitle&&this.accessDropdownValue===wm.PUBLIC}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===wm.PUBLIC}})}),additionalButton:V.b({defaultValue:k.c(Ho.a,{action:"additionalButtonWasPressed",additionalClassNames:F.b(["sharing-additional-button"])}),downstreamBindings:{title:"(owner).additionalButtonTitle"}}),toggleOptions:function(){this.isExpanded=!this.isExpanded}}),Am={},Om={"-":!0,_:!0,".":!0," ":!0,"\t":!0},Tm=/[a-zA-Z0-9]/;function Mm(e,t){var n=Am[e];if(n)return n;if(!e)return"";for(var i,r,a=0,s="",o=!0;i=e[a];)t&&i===t||!t&&Om[i]?r=!0:Tm.test(i)&&(r&&(i=i.toUpperCase()),o&&(i=i.toLowerCase()),s+=i,r=!1,o=!1),a++;return Am[e+(t||"")]=s,s}var Dm=n(455),Pm=n(779),Lm={selectionControllerDidDeselectItem:U.a,selectionControllerDidSelectItem:U.a,selectionControllerShouldSelectItem:function(e,t){return!0}},Rm={mixinDependencies:[Tn.a,B.b],selection:Object(V.b)(Object(Oi.c)("selectionController.selection")),selectedItem:Object(V.b)(Object(Oi.c)("selectionController.selectedItem")),selectionController:Object(V.b)({strong:!0,downstreamBindings:{collection:"(owner).collection",delegate:"(owner).selectionDelegate",isEmptySelectionEnabled:"(owner).isEmptySelectionEnabled",isMultipleSelectionEnabled:"(owner).isMultipleSelectionEnabled"}}),selectionDelegate:Object(V.b)({defaultValue:Object(k.c)(P.a.extend(Lm))}),collection:Object(nc.c)(_u.a),isSelectionEnabled:Object(V.b)({defaultValue:!0,didChange:function(e){e||(this.selection=null,this.update())}}),update:function(e){var t=this,n=arguments;Object(sc.f)(e,this,"SelectionSupportProtocol: invalidationContext"),t.__s._$nR$update.apply(t,n),e&&(e.itemsChanges||e.collectionChanged||e.everythingChanged)&&this.selectionController.updateSelectionForCollectionChange(e),Object(sc.e)(e,this,"SelectionSupportProtocol: invalidationContext")},isEmptySelectionEnabled:Object(V.b)(!0),isMultipleSelectionEnabled:Object(V.b)(!0),selectItem:function(e){this.selectedItem=e},userPerformedSelectionOperation:function(e,t){if(this.isSelectionEnabled)return this.selectionController.userPerformedSelectionOperation(e,t)},isItemAtHandleSelected:function(e){return!!this.isSelectionEnabled&&this.selectionController.isItemAtHandleSelected(e)},isCellSelected:function(e){return!!this.isSelectionEnabled&&!!this.isCellSelectable(e)&&this.isItemAtHandleSelected(e.handle)},isCellSelectable:function(e){return"item"===e.cellType},selectCell:function(e,t){if(this.isSelectionEnabled){var n=this.selectionController;e?this.isCellSelectable(e)&&n.userPerformedSelectionOperation(e.handle,t):n.userPerformedSelectionOperation(null,t)}},userPerformedSelectionOperationInDirection:function(e,t){if(this.isSelectionEnabled)return this.selectionController.userPerformedSelectionOperationInDirection(e,t)},selectAll:function(){if(this.isSelectionEnabled)return this.selectionController.selectAll()},clearSelection:function(){if(this.isSelectionEnabled)return this.userPerformedSelectionOperation()},_updateWhenSelectionChanges:Object(B.g)("selectionController.selectionDidChange",(function(){this.update()})),__superMap:{_$nR$update:"update"}},xm=n(575),Nm=n(579),Fm=n(549),Vm=n(718),km=n(406),Bm={headerHeight:Object(V.b)(30),footerHeight:Object(V.b)(30),hasFloatingHeaders:Object(V.b)(!0),hasHeaders:Object(V.b)(!0),hasFooters:Object(V.b)(!1),sectionSpacing:Object(V.b)(0),sectionTopPadding:Object(V.b)(0),sectionBottomPadding:Object(V.b)(0),sectionHeaderPadding:Object(V.b)(0),sectionFooterPadding:Object(V.b)(0)},jm={staticMembers:{LayoutMetricsClass:Object(F.b)(Bm)},mixinDependencies:[mf.a,B.b],cellClassKeysByCellType:Object(F.b)({header:"headerCellClass",footer:"footerCellClass"}),footerCellClass:km.a,layOutCellInDirection:function(e,t,n,i,r,a){var s=this,o=arguments;return"header"===t.cellType&&(t.isFloatingToTop=!1),s.__s._$sf$layOutCellInDirection.apply(s,o)},headerCellClass:km.a.extend({isFloatingToTop:!1,clipTop:0,invalidate:function(){this.isFloatingToTop=!1,this.clipTop=0,this.__s._$yc$invalidate.call(this)},isReusable:Object(H.d)({get:function(){return!this.isFloatingToTop}}),moveBy:function(e,t,n){if(!this.isFloatingToTop){var i=e.layoutMetrics,r=i.topInset,a=this.y;a+=n,i.hasFloatingHeaders&&a<r?(this.y=r,this.isFloatingToTop=!0):(this.y=a,this.isFloatingToTop=!1)}},__superMap:{_$yc$invalidate:"invalidate"}}),getSectionHandle:function(e){return"header"===e.cellType||"footer"===e.cellType?e.handle:e.handle.sectionHandle},sizeKeyByCellType:Object(F.b)({header:"sizeForHeader",footer:"sizeForFooter"}),sizeForHeader:function(e,t){return _l.a.create(e.viewportWidth,e.layoutMetrics.headerHeight)},sizeForFooter:function(e,t){return _l.a.create(e.viewportWidth,e.layoutMetrics.footerHeight)},reusePreviousVisibleCells:function(e,t,n,i,r){var a=this,s=arguments,o=r.sectionsChanges;o&&this.handleEverythingChanged(e,t,n,i,r);var l=r.invalidSections;return l&&this.handleInvalidSections(l,e,t,n,i,r),a.__s._$1r7$reusePreviousVisibleCells.apply(a,s)},handleInvalidSections:function(e,t,n,i,r,a){this._cellMapForCellType("item").forEach((function(t){var n=t.handle;e.contains(n.sectionHandle)&&t.invalidate()})),this._cellMapForCellType("header").forEach((function(t){var n=t.handle;e.contains(n)&&t.invalidate()})),this._cellMapForCellType("footer").forEach((function(t){var n=t.handle;e.contains(n)&&t.invalidate()})),this.recoverLayout(t,i,r)},recoverLayout:function(e,t,n){var i=this.topMostLaidOutItem(e,n);i||(i=this.topMostItem(e,n),this.recoverLayoutFromCell(e,i),i.isLaidOut)},completeVisibleCells:function(e,t,n,i){var r=this,a=arguments;r.__s._$2Og$completeVisibleCells.apply(r,a);var s=e.layoutMetrics;if(s.hasHeaders&&s.hasFloatingHeaders){var o=n.objectAt(0).retain(this,"SectionLayoutSupport#completeVisibleCells: firstCell"),l=o.handle,c=s.topInset,u=s.sectionSpacing;"header"===o.cellType?(o.y>c+u&&this._sectionsAbove(l)>0&&(l=l.previous),n.shift()):"item"===o.cellType&&(l=l.sectionHandle);for(var d=this.cellForHandle(l,"header").retain(this,"sectionLayoutSupport#completeVisibleCells: header"),h=c,f=this.sizeForCell(e,d).height+u,g=h+f,m=0,_=n.length;m<_;m++){var v=n.objectAt(m);if(v.y>g)break;if("header"===v.cellType){if(h=v.y-f,v.moveBy(e,0,0),v.isFloatingToTop)return void d.release(this,"sectionLayoutSupport#completeVisibleCells: header");break}}if(this.layOutCellInDirection(e,d,1,h),h<c){var b=c-h;d.clipTop=p.a.sharedInstance.floorToDevicePixelRatio(b)}d.isFloatingToTop=!0,n.unshift(d),d.release(this,"sectionLayoutSupport#completeVisibleCells: header"),o.release(this,"SectionLayoutSupport#completeVisibleCells: firstCell")}},positionNextCell:function(e,t,n){var i="header",r="footer";n<0&&(i="footer",r="header");var a,s=t.handle,o=t.cellType,l="item"===o?s.sectionHandle:s,c=0,u=n>0;do{if("item"===o)(s=s.atDistance(n)).isValid?s.sectionHandle!==l?(s=l,a=r):a="item":(s=l,a=r);else if(o===r){if(l=s=s.atDistance(n),!s.isValid)return null;a=i}else o===i&&(s=n<0?s.lastItem:s.firstItem,a="item");c+=u?this.verticalSpacingForCellTypes(e,o,a):this.verticalSpacingForCellTypes(e,a,o),o=a}while(!s.isValid||!("item"===o||"header"===o&&this.shouldSectionHaveHeader(e,s)||"footer"===o&&this.shouldSectionHaveFooter(e,s)));var d=this.cellForHandle(s,o).retain();return this.positionAdjacentCell(e,t,d,n,c).autorelease()},verticalSpacingForCellTypes:function(e,t,n){var i=e.layoutMetrics;return"item"===t&&"item"===n?i.rowSpacing:"header"===t&&"item"===n?(i.hasHeaders?i.sectionHeaderPadding:0)+i.sectionTopPadding:"item"===t&&"footer"===n?(i.hasFooters?i.sectionFooterPadding:0)+i.sectionBottomPadding:"footer"===t&&"header"===n?i.sectionSpacing:0},headersAboveSection:function(e,t){return e.layoutMetrics.hasHeaders?this._sectionsAbove(t):0},headersBelowSection:function(e,t){return e.layoutMetrics.hasHeaders?this._sectionsBelow(t):0},footersAboveSection:function(e,t){return e.layoutMetrics.hasFooters?this._sectionsAbove(t):0},footersBelowSection:function(e,t){return e.layoutMetrics.hasFooters?this._sectionsBelow(t):0},shouldSectionHaveHeader:function(e,t){return e.layoutMetrics.hasHeaders},shouldSectionHaveFooter:function(e,t){return e.layoutMetrics.hasFooters},_sectionsAbove:function(e){return this._setUpHandleAccessors(e),this._sectionsAbove(e)},_sectionsAboveArray:function(e){return e.position},_sectionsAboveList:function(e){for(var t=-1;e.isValid;)e=e.previous,t++;return Math.max(t,0)},_sectionsBelow:function(e){return this._setUpHandleAccessors(e),this._sectionsBelow(e)},_sectionsBelowArray:function(e){return e.maximumPosition-e.position},_sectionsBelowList:function(e){for(var t=-1;e.isValid;)e=e.next,t++;return Math.max(t,0)},_setUpHandleAccessors:function(e){return e.instanceOf(Vm.a)?(this._sectionsAbove=this._sectionsAboveArray,void(this._sectionsBelow=this._sectionsBelowArray)):e.instanceOf(dc.a)?(this._sectionsAbove=this._sectionsAboveList,void(this._sectionsBelow=this._sectionsBelowList)):void Object(_.b)("SectionLayoutSupport: unable to use handle type. handle: "+e)},sectionSpaceAboveCell:function(e,t){var n=e.layoutMetrics,i=t.cellType,r=this.getSectionHandle(t),a=this._sectionsAbove(r)*(n.sectionSpacing+n.sectionTopPadding+n.sectionBottomPadding),s=this.headersAboveSection(e,r);return"header"!==i&&(a+=n.sectionTopPadding,this.shouldSectionHaveHeader(e,r)&&(s+=1)),(a+=s*(n.headerHeight+n.sectionHeaderPadding))+this.footersAboveSection(e,r)*(n.footerHeight+n.sectionFooterPadding)},topForCell:function(e,t){var n=this,i=arguments;return n.__s._$5rM$topForCell.apply(n,i)+this.sectionSpaceAboveCell(e,t)},sectionSpaceBelowCell:function(e,t){var n=e.layoutMetrics,i=t.cellType,r=this.getSectionHandle(t),a=this._sectionsBelow(r)*(n.sectionSpacing+n.sectionTopPadding+n.sectionBottomPadding);a+=this.headersBelowSection(e,r)*(n.headerHeight+n.sectionHeaderPadding);var s=this.footersBelowSection(e,r);return"footer"!==i&&(a+=n.sectionBottomPadding,this.shouldSectionHaveFooter(e,r)&&(s+=1)),a+s*(n.footerHeight+n.sectionFooterPadding)},spaceBelowCell:function(e,t){var n=this,i=arguments;return n.__s._$6DN$spaceBelowCell.apply(n,i)+this.sectionSpaceBelowCell(e,t)},minimumTopOffsetForCell:function(e,t){var n=this.__s._$6HI$minimumTopOffsetForCell.call(this,e,t),i=e.layoutMetrics;if(!i.hasHeaders)return n;var r=t.handle,a=r.sectionHandle;return r.hasPrevious&&(r===a.firstItem||i.hasFloatingHeaders)?n+i.headerHeight+this.verticalSpacingForCellTypes(e,"header","item"):n},minimumBottomOffsetForCell:function(e,t){var n=this.__s._$6WX$minimumBottomOffsetForCell.call(this,e,t),i=e.layoutMetrics;if(!i.hasFooters)return n;var r=t.handle,a=r.sectionHandle;return r.hasNext&&r===a.lastItem?n+i.footerHeight+this.verticalSpacingForCellTypes(e,"item","footer"):n},__superMap:{_$sf$layOutCellInDirection:"layOutCellInDirection",_$1r7$reusePreviousVisibleCells:"reusePreviousVisibleCells",_$2Og$completeVisibleCells:"completeVisibleCells",_$5rM$topForCell:"topForCell",_$6DN$spaceBelowCell:"spaceBelowCell",_$6HI$minimumTopOffsetForCell:"minimumTopOffsetForCell",_$6WX$minimumBottomOffsetForCell:"minimumBottomOffsetForCell"}},Um=n(246),Gm=n(222);function Hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Wm=Object(we.b)("Justification",(function(e){e("Left"),e("Right"),e("Center"),e("Full")})),$m=Object(we.b)("Justification",(function(e){e("leftToRight"),e("rightToLeft")})),zm={columnWidth:Object(V.b)(100),columnSpacing:Object(V.b)(0),direction:Object(V.b)($m.leftToRight),justification:Object(V.b)(Wm.Left),verticalAlignment:Object(V.b)(qo.Middle),sectionLeftPadding:Object(V.b)(0),sectionRightPadding:Object(V.b)(0)},Km=xm.a.extend(jm,{staticMembers:{LayoutMetricsClass:Object(F.b)(zm),__QUALIFIED_CLASS_NAME__:"FlowLayoutDelegate"},cellClass:Object(F.b)({cleanup:function(){this.__s._$16x$cleanup.call(this),this.sectionX=NaN,this.sectionY=NaN,this.isLaidOutInSection=!1,this.row=null},sectionX:NaN,sectionY:NaN,isLaidOutInSection:!1,row:Object(H.d)({strong:!0}),rowBottom:Object(H.d)({get:function(){var e=this.row,t=this.sectionY-e.y;return this.bottom-t+(e.height-this.height)}}),rowTop:Object(H.d)({get:function(){var e=this.row,t=this.sectionY-e.y;return this.y-t}}),invalidate:function(){this.isLaidOutInSection=!1;var e=this.row;if(e){var t=e.cells;if(t.splice(t.indexOf(this),1),t.length>0){var n=t[0];n.isLaidOutInSection=!1,n.isLaidOut=!1}var i=e.sectionCell;i&&i.childrenWereInvalidated(),this.row=null}this.__s._$1i1$invalidate.call(this)},__superMap:{_$16x$cleanup:"cleanup",_$1i1$invalidate:"invalidate"}}),handleSizeChangedBy:function(e,t,n,i,r,a){if(0!==e){var s=this.topMostItem(n,a);if(!s)return void this.handleEverythingChanged(n,i,r,a,Gm.a.create({everythingChanged:!0}));s.retain(this,"handleSizeChangedBy: firstCell");var o=n.viewportWidth;this._cellMapForCellType("section").forEach((function(e){e.invalidateAllCells(),e.invalidate()}),this),this._cellMapForCellType("header").forEach((function(e){e.width=o}),this),this._cellMapForCellType("footer").forEach((function(e){e.width=o}),this),this._cellMapForCellType("item").forEach((function(e){e.invalidate()}),this),this.recoverLayoutFromCell(n,s),s.release(this,"handleSizeChangedBy: firstCell")}},handleLayoutMetricsChanged:function(e,t,n,i,r,a){var s=t.layoutMetrics;if(e.contains("columnWidth")||e.contains("rowHeight")){var o=this.topMostItem(t,r);if(!o)return void this.handleEverythingChanged(t,n,i,r,Gm.a.create({everythingChanged:!0}));o.retain(this,"handleLayoutMetricsChanged: firstCell"),this._cellMapForCellType("section").forEach((function(e){e.invalidateAllCells()}),this),this._cellMapForCellType("header").forEach((function(e){e.invalidate()})),this._cellMapForCellType("footer").forEach((function(e){e.invalidate()})),this.recoverLayoutFromCell(t,o),o.release(this,"handleLayoutMetricsChanged: firstCell")}else e.contains("verticalAlignment")||e.contains("justification")||e.contains("rowSpacing")||e.contains("columnSpacing")?this.handleSizeChangedBy(1,0,t,n,i,r):e.contains("hideableTopHeight")?s.shouldStartHidden&&this.isAtEnd===Um.c.Top&&s.initialPosition===Um.c.Top&&(this.invalidateOtherCells(r),this.setUpFirstCell(t,n,!0)):e.contains("hideableBottomHeight")&&s.shouldStartHidden&&this.isAtEnd===Um.c.Bottom&&s.initialPosition===Um.c.Bottom&&(this.invalidateOtherCells(r),this.setUpLastCell(t,n,!0))},handleItemsChanges:function(e,t,n,i,r,a){var s=e.length;if(s>100)this.handleEverythingChanged(t,n,i,r,a);else{for(var o=0;o<s;o++){var l=e[o];if(l.operation===Wo.b.INSERT){var c=n.startHandle.at(l.index),u=c.sectionHandle,d=c.previous;if(d.isValid&&!d.sectionHandle!==u||(d=c.next),d.isValid&&d.sectionHandle===u){var h=this.cellForHandleIfPresent(d);if(h){var p=h.row;if(p){var f=p.cells;if(f.length>0){var g=f[0];g.isLaidOutInSection=!1,g.isLaidOut=!1}}}}}}if(this._cellMapForCellType("section").forEach((function(e){e.checkForRemovedCells(this,t)}),this),!this.topMostLaidOutItem(t,r)){this.invalidateOtherCells(r);var m=r.find((function(e){return"item"===e.cellType&&!e.handle.wasRemoved}));m&&this.recoverLayoutFromCell(t,m)}}},handleInvalidItems:function(e,t,n,i,r,a){for(var s,o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Hm(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hm(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(s=o()).done;){var l=s.value,c=this.cellForHandle(l),u=this.cellForHandle(l.sectionHandle,"section").retain(this,"reusePreviousVisibleCells: invalidating cells");u.invalidateCell(c),u.release(this,"reusePreviousVisibleCells: invalidating cells")}this._cellMapForCellType("section").forEach((function(e){e.checkForInvalidCells(this,t)}),this);var d=this.topMostLaidOutItem(t,r);d||(d=this.topMostItem(t,r),this.recoverLayoutFromCell(t,d))},handleInvalidSections:function(e,t,n,i,r,a){e.forEach((function(e){this.cellForHandle(e,"section").invalidate()}),this),this.recoverLayout(t,i,r)},sectionCellClass:km.a.extend({_cachedCells:Object(k.c)(Set),cacheCell:function(e){var t=this._cachedCells;t.has(e)||(t.add(e),e.retain(this,"section layout cache"))},invalidateCell:function(e){var t=this._cachedCells;t.has(e)||Object(_.b)("CW.UI.Collections.FlowLayoutDelegate#sectionCellClass#invalidateCell: Cannot invalidate non-cached cell",{cell:e}),e.invalidate(),t.delete(e),e.release(this,"section layout cache")},invalidateAllCells:function(){var e=this._cachedCells;e.forEach((function(e){e.invalidate(),e.release(this,"section layout cache")}),this),e.clear(),this.invalidate()},lastLaidOutCell:Object(H.d)({strong:!0}),invalidate:function(){var e=this,t=arguments,n=this._cachedCells;n.forEach((function(e){e.isLaidOutInSection=!1,e.isLaidOut=!1,n.delete(e),e.autorelease(this,"section layout cache")}),this),this.fakeRows.clear(),this.childrenWereInvalidated(),e.__s._$5Kp$invalidate.apply(e,t)},childrenWereInvalidated:function(){this.isLaidOut=!1,this.lastLaidOutCell=null,this.height=-1,this.width=-1},checkForRemovedCells:function(e,t){var n,i=this._cachedCells,r=this.handle;i.forEach((function(t){var i=t.handle;if("item"===t.cellType)if(i.wasRemoved){var a=i.next;if(a.isValid&&a.sectionHandle===r){var s=e.cellForHandle(a).retain(this,"checking for removed cells");s.isLaidOutInSection=!1,s.isLaidOut=!1,s.release(this,"checking for removed cells")}var o=t.row;if(o)for(var l=o.cells,c=0,u=l.length;c<u;c++)l[c].isLaidOutInSection=!1;this.invalidateCell(t)}else(!n||t.handle.position>n.handle.position)&&(n=t)}),this),this.lastLaidOutCell=n,this.checkForInvalidCells(e,t)},checkForInvalidCells:function(e,t){var n=this.handle;if(!e.shouldEstimateSectionLayout(t,n.value)){var i=this.lastLaidOutCell;if(i){for(var r=n.firstItem,a=i.handle,s=!1;;){var o=e.cellForHandle(r).retain(this,"checking for invalid cells");if(s?(o.isLaidOutInSection=!1,o.isLaidOut=!1):o.isLaidOutInSection?i=o:s=!0,o.release(this,"checking for invalid cells"),r===a)break;r=r.next}this.lastLaidOutCell=i,this.isLaidOut=!1}}},fakeRows:Object(k.c)(Map),fakeSize:Object(H.d)({strong:!0,get:function(e){return e||_l.a.create()}}),layOutItem:function(e,t,n,i){if(n&&n.isLaidOutInSection)return n;var r=this.handle,a=t.layoutMetrics,s=r.firstItem;-1===s.position&&Object(_.b)("FlowLayout: attempting to lay out invalid section");var o=n&&n.handle.retain(this,"layOutItem: current handle"),l=this.fakeRows,c=t.viewportBounds,u=e.maxWidthForSection(t,a,c,r);if(!((u+=1/(2*p.a.sharedInstance.devicePixelRatio)-Number.EPSILON)<0)){this.width=u;var d=a.rowSpacing;if(e.shouldEstimateSectionLayout(t,r.value)){var h,f,g=a.columnWidth,m=a.columnSpacing,v=a.rowHeight,b=e.estimateRowHeight(t,a,r),y=b+d,w=Math.floor((u+m)/(g+m));n?(h=o.position-s.position,f=Math.floor(h/w)):(h=(f=Math.floor(i/y))*w+s.position,o=t.collection.startHandle.at(h).retain(this,"layOutItem: current handle"),n=e.cellForHandle(o));var I=f*y;n.sectionY=I;var S=h%w;n.sectionX=S*g+S*m,n.isLaidOutInSection=!0;var C=l.get(f);C||((C=this.createRowCell(e,t,I)).index=f,l.set(f,C)),n.row=C,-1===C.cells.indexOf(n)&&(C.cells.push(n),C.width=this.width,C.height=b);var E=this.fakeSize;return E.width=g,E.height=v,n.size=E,this.cacheCell(n),this.isLaidOut||(this.height=e.estimateSectionHeight(t,a,r,u),this.isLaidOut=!0),o.release(this,"layOutItem: current handle"),n}l.size>0&&(this.invalidateAllCells(),this.width=u);var A,O=0,T=0-a.columnSpacing;if(n)for(;;){var M=e.cellForHandle(o).retain(this,"layOutItem: finding start of layout pass");if(M.isLaidOut){O=(A=M.row).y;for(var D=A.cells,P=0,L=D.length;P<L;P++){var R=D[P];if(T+=e.sizeForCell(t,R).width+a.columnSpacing,R.handle.next===o){D.length=P+1;break}}A.width=T,M.release(this,"layOutItem: finding start of layout pass");break}if(o===s){A=this.createRowCell(e,t,O),M.release(this,"layOutItem: finding start of layout pass");break}var x=o.previous.retain(this,"layOutItem: current handle");o.release(this,"layOutItem: current handle"),o=x,M.release(this,"layOutItem: finding start of layout pass")}else{var N=this.lastLaidOutCell;if(N){if(N.sectionY>=i){var F=t.collection.handleProvider,V=Object(Fm.a)(s.position,N.handle.position,(function(t){return e.cellForHandle(F.at(t))}),(function(e){return i<e.row.y?-1:i>e.row.bottom+d?1:0}));if(-1===V)return;return e.cellForHandle(F.at(V))}o=N.handle.retain(this,"layOutItem: current handle"),O=(A=N.row).y}else o=r.firstItem.retain(this,"layOutItem: current handle"),A=this.createRowCell(e,t,O)}for(var k,B=!1,j=r.lastItem;!B;){for(;;){var U=e.cellForHandle(o);if(this.cacheCell(U),!e.addCellToRow(t,this,A,U))break;if(U.row=A,U.isLaidOutInSection=!0,k=U,o===j)return O+=e.layOutRow(t,this,A).height,this.height=O,this.isLaidOut=!0,this.lastLaidOutCell=k,o.release(this,"layOutItem: current handle"),U;var G=o.next.retain(this,"layOutItem: current handle");if(o.release(this,"layOutItem: current handle"),(o=G).sectionHandle!==r)return O+=e.layOutRow(t,this,A).height,this.height=O,this.isLaidOut=!0,this.lastLaidOutCell=k,o.release(this,"layOutItem: current handle"),U;U===n&&(B=!0)}O+=e.layOutRow(t,this,A).height+a.rowSpacing,i&&A.bottom+d>=i&&(n=A.cells[0],B=!0),A=this.createRowCell(e,t,O)}return o.release(this,"layOutItem: current handle"),this.lastLaidOutCell=k,n}Object(sc.e)(o,this,"layOutItem: current handle")},createRowCell:function(e,t,n){var i=e.rowCellClass.create();return i.cellType="row",i.y=n,i.sectionCell=this,i.width=0-t.layoutMetrics.columnSpacing,this.cacheCell(i),i},__superMap:{_$5Kp$invalidate:"invalidate"}}),rowCellClass:_f.a.extend({cells:Object(k.c)(Array),sectionCell:Object(H.d)({weak:!0}),invalidate:function(){var e=this.sectionCell,t=this.index;void 0!==t&&e&&e.fakeRows.delete(t),this.index=void 0,this.cells.length=0,this.sectionCell=null,this.__s._$BQw$invalidate.call(this)},__superMap:{_$BQw$invalidate:"invalidate"}}),layOutItemInSection:function(e,t,n){n.isLaidOutInSection||this.cellForHandle(t,"section").layOutItem(this,e,n)},addCellToRow:function(e,t,n,i){var r=this.sizeForCell(e,i),a=n.width+r.width+e.layoutMetrics.columnSpacing;return!(a>t.width)&&(n.width=a,n.cells.push(i),!0)},shouldEstimateSectionLayout:function(e,t){return!1},estimateSectionHeight:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.firstItem,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.lastItem,s=t.columnWidth,o=t.columnSpacing,l=t.rowSpacing,c=Math.floor((i+o)/(s+o)),u=a.position-r.position+1,d=Math.ceil(u/c),h=this.estimateRowHeight(e,t,n),p=d*h;return p+(d-1)*l},maxWidthForSection:function(e,t,n,i){return Math.max(0,n.width-t.sectionLeftPadding-t.sectionRightPadding)},estimateRowHeight:function(e,t,n){return t.rowHeight},cellClassKeysByCellType:Object(F.b)({section:"sectionCellClass"}),_cachedSectionCells:Object(k.c)(Array),_previousCachedSectionCells:Object(k.c)(Array),completeVisibleCells:function(e,t,n,i){var r=this,a=arguments,s=this._previousCachedSectionCells,o=this._cachedSectionCells;r.__s._$Cps$completeVisibleCells.apply(r,a);var l=this.topMostItem(e,n);if(l){var c=this.getSectionHandle(l),u=c.previous;u.isValid&&(c=u);var d=this.getSectionHandle(this.bottomMostItem(e,n)),h=d.next;h.isValid&&(d=h);for(var p=0,f=t&&t.sections.length||1e3,g=c;;){++p>f&&Object(_.b)("Infinite loop detected in `FlowLayoutDelegate#completeVisibleCells`.",{firstSectionHandle:g,lastSectionHandle:d});var m=this.cellForHandle(c,"section");if(o.push(m),m.retain(this,"flow layout section cache"),c===d)break;c=c.next}s.forEach(qm,this),s.length=0,this._cachedSectionCells=s,this._previousCachedSectionCells=o}},layOutRow:function(e,t,n){var i=e.layoutMetrics,r=t.width,a=i.columnSpacing,s=i.verticalAlignment,o=i.justification;return o===Wm.Left?this.leftJustify(e,n,a,r):o===Wm.Right?this.rightJustify(e,n,a,r):o===Wm.Center?this.centerJustify(e,n,a,r):o===Wm.Full?this.fullJustify(e,n,a,r):Object(_.b)("ListLayoutDelegate: Invalid justification %{justification}",{justification:o}),s===qo.Top?this.topAlign(e,n):s===qo.Middle?this.centerAlign(e,n):s===qo.Bottom?this.bottomAlign(e,n):Object(_.b)("ListLayoutDelegate: Invalid verticalAlignment %{verticalAlignment}",{verticalAlignment:s}),n.isLaidOut=!0,n},cellIsVisible:function(e,t,n){if("item"!==n.cellType)return this.__s._$E8U$cellIsVisible.call(this,e,t,n);var i=n.rowTop;return i<t.bottom&&i+n.row.height+e.layoutMetrics.rowSpacing>t.y},topAlign:function(e,t){for(var n=t.y,i=0,r=t.cells,a=0,s=r.length;a<s;a++){var o=r[a];o.sectionY=n;var l=this.sizeForCell(e,o).height;l>i&&(i=l)}t.height=i},centerAlign:function(e,t){for(var n=t.y,i=0,r=t.cells,a=r.length,s=0;s<a;s++){var o=r[s],l=this.sizeForCell(e,o).height;l>i&&(i=l)}for(var c=0;c<a;c++){var u=r[c],d=this.sizeForCell(e,u).height;u.sectionY=n+(i-d)/2}t.height=i},leftJustify:function(e,t,n,i){for(var r=t.cells,a=r.length-1,s=0,o=0,l=r.length;o<l;o++){var c=e.layoutMetrics.direction===$m.leftToRight?r[o]:r[a-o];c.sectionX=s,s+=this.sizeForCell(e,c).width+n}t.x=0,t.width=s-n},centerJustify:function(e,t,n,i){for(var r=t.cells,a=r.length,s=0,o=0;o<a;o++){var l=r[o];s+=this.sizeForCell(e,l).width}var c=(i-s-n*(a-1))/2;t.x=c;for(var u=0;u<a;u++){var d=r[u];d.sectionX=c,c+=this.sizeForCell(e,d).width+n}t.width=c-n},fullJustify:function(e,t,n,i){for(var r=t.cells,a=r.length,s=0,o=0;o<a;o++){var l=r[o];s+=this.sizeForCell(e,l).width}n=(i-s)/(a-1);for(var c=0,u=0;u<a;u++){var d=r[u];d.sectionX=c,c+=this.sizeForCell(e,d).width+n}t.x=0,t.width=i},rightJustify:function(e,t,n,i){for(var r=t.cells,a=r.length-1,s=i,o=r.length-1;o>=0;o--){var l=e.layoutMetrics.direction===$m.leftToRight?r[o]:r[a-o],c=this.sizeForCell(e,l).width;l.sectionX=s-c,s-=c+n}t.x=s+n,t.width=i-t.x},setUpCellAtDistance:function(e,t,n,i,r){var a=this.getSectionHandle(n).retain(this,"setUpCellAtDistance: section iteration");n.wasLaidOut||this.layOutItemInSection(e,a,n);var s=r+n.sectionY,o=this.lazyEstimateSectionHeight(e,a),l=Math.sign(s),c=e.layoutMetrics,u=c.sectionSpacing+c.sectionTopPadding+c.sectionBottomPadding;for(c.hasHeaders&&(u+=c.headerHeight+c.sectionHeaderPadding),c.hasFooters&&(u+=c.footerHeight+c.sectionFooterPadding);;){if(s>=0&&s<o){var d=this.cellForHandle(a,"section").retain(this,"setUpCellAtDistance: current searched section"),h=d.layOutItem(this,e,null,s);return h||Object(_.b)("unable to find cell at offset %{offset}",{offset:s}),this.layOutCellInDirection(e,h,1,h.sectionY-s,1,h.sectionX+e.layoutMetrics.sectionLeftPadding),Math.abs(h.y)<.05*r&&(h.y=h.y%c.rowHeight),d.autorelease(this,"setUpCellAtDistance: current searched section"),h}l>0&&(s-=o);var p=a.atDistance(l).retain(this,"setUpCellAtDistance: section iteration");if(a.release(this,"setUpCellAtDistance: section iteration"),!(a=p).isValid){a.release(this,"setUpCellAtDistance: section iteration");break}o=this.lazyEstimateSectionHeight(e,a),o+=u,l<0&&(s+=o)}return l>0?this.setUpLastCell(e,t):this.setUpFirstCell(e,t)},handleNoPreviouslyValidCells:function(e,t,n,i,r){var a=this.isAtEnd;if(a===Um.c.Top)return this.setUpFirstCell(e,t);if(a===Um.c.Bottom)return this.setUpLastCell(e,t);if(this.bottomMostItem(e,i).handle.position>=t.length)return this.isAtEnd=Um.c.Bottom,this.setUpLastCell(e,t);var s=this.topMostItem(e,i),o=s.handle.position,l=t.startHandle.at(o),c=this.cellForHandle(l);return this.recoverLayoutFromCell(e,c,s),c},recoverLayoutFromCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=t.handle;i.wasRemoved||i.isValid&&(this.layOutItemInSection(e,i.sectionHandle,t),t.isLaidOutInSection&&this.layOutCellInDirection(e,t,1,n.y,1,t.sectionX+e.layoutMetrics.sectionLeftPadding))},handleEverythingChanged:function(e,t,n,i,r){var a=this,s=arguments;this._cellMapForCellType("section").forEach((function(e){e.invalidateAllCells()}),this),a.__s._$HWx$handleEverythingChanged.apply(a,s)},positionAdjacentCell:function(e,t,n,i,r){var a,s=t.cellType,o=n.cellType,l=e.layoutMetrics;if("item"===s&&"item"===o&&t.handle.sectionHandle===n.handle.sectionHandle)return this.layOutItemInSection(e,n.handle.sectionHandle,n),this.layOutCellInDirection(e,n,1,t.y+(n.sectionY-t.sectionY),1,n.sectionX+l.sectionLeftPadding);var c,u=i>0;if("header"===s||"footer"===s?a=u?t.bottom:t.y:"item"===s?a=u?t.rowBottom:t.rowTop:Object(_.b)("FlowLayout#positionAdjacentCell: unable to position based on cell of type %{cellType}",{cell:t,cellType:s}),a+=i*r,"header"===o||"footer"===o)c=0;else if("item"===o){this.layOutItemInSection(e,n.handle.sectionHandle,n),c=n.sectionX+l.sectionLeftPadding;var d=n.row,h=n.sectionY-d.y;a+=u?h:-(d.height-this.sizeForCell(e,n).height-h)}else Object(_.b)("FlowLayout#positionAdjacentCell: unable to position cell of type %{cellType}",{cell:n,cellType:o});return this.layOutCellInDirection(e,n,i,a,1,c)},topForCell:function(e,t){var n=this.getSectionHandle(t);this.layOutItemInSection(e,n,t);var i=t.sectionY;i+=this.estimatedHeightForCells(e,n.firstItem.position);var r=e.layoutMetrics;return i+this.sectionSpaceAboveCell(e,t)+r.topPadding+r.topInset-r.hideableTopHeight},lazyEstimateSectionHeight:function(e,t){var n=e.layoutMetrics;t.retain(this,"lazyEstimateSectionHeight: sectionHandle");var i=this.cellForHandle(t,"section").retain(this,"lazyEstimateSectionHeight: sectionCell");if(i.isLaidOut){var r=i.height;return i.release(this,"lazyEstimateSectionHeight: sectionCell"),t.release(this,"lazyEstimateSectionHeight: sectionHandle"),r}var a,s=i.lastLaidOutCell,o=0;s&&s.row?(o=s.row.bottom,o+=n.rowSpacing,a=s.handle.next):a=i.firstItem,i.release(this,"lazyEstimateSectionHeight: sectionCell");var l=this.maxWidthForSection(e,n,e.viewportBounds,t),c=this.estimateSectionHeight(e,n,t,l,a);return t.release(this,"lazyEstimateSectionHeight: sectionHandle"),o+c},spaceBelowCell:function(e,t){var n=this.getSectionHandle(t);this.layOutItemInSection(e,n,t);var i=this.cellForHandle(n,"section").retain(this,"spaceBelowCell"),r=t.size?t.size.height:t.height,a=this.lazyEstimateSectionHeight(e,n)-(t.sectionY+r);i.release(this,"spaceBelowCell");var s=n.lastItem;a+=this.estimatedHeightForCells(e,s.maximumPosition-s.position);var o=e.layoutMetrics;return a+this.sectionSpaceBelowCell(e,t)+o.bottomPadding-o.hideableBottomHeight},estimatedHeightForCells:function(e,t){if(0===t)return 0;var n=e.layoutMetrics,i=n.columnWidth,r=n.columnSpacing,a=n.rowSpacing,s=n.rowHeight,o=(e.viewportWidth+r)/(i+r),l=Math.ceil(t/o);return l*s+(l-1)*a},leftForCell:function(e,t){var n=this,i=arguments;return"item"===t.cellType?(this.layOutItemInSection(e,t.handle.sectionHandle,t),t.sectionX+e.layoutMetrics.sectionLeftPadding):n.__s._$K14$leftForCell.apply(n,i)},sizeForItem:function(e,t){var n=e.layoutMetrics;return _l.a.create({height:n.rowHeight,width:n.columnWidth})},minimumTopOffsetForCell:function(e,t){var n=e.layoutMetrics,i=t.handle,r=t.row,a=i.sectionHandle,s=0;return i.hasPrevious||(s+=n.topPadding+n.topInset-n.hideableTopHeight),this.layOutItemInSection(e,a,t),s+=t.sectionY-r.y,this.shouldSectionHaveHeader(e,a)?((n.hasFloatingHeaders||0===r.index)&&(s+=n.headerHeight+this.verticalSpacingForCellTypes(e,"header","item")),s):s},minimumBottomOffsetForCell:function(e,t){var n=e.layoutMetrics,i=t.handle,r=t.row,a=i.sectionHandle,s=0;if(i.hasNext||(s+=n.bottomPadding-n.hideableBottomHeight),this.layOutItemInSection(e,a,t),s+=r.bottom-(t.sectionY+this.sizeForCell(e,t).height),!this.shouldSectionHaveFooter(e,a))return s;var o=r.cells;return o[o.length-1].handle===a.lastItem&&(s+=n.footerHeight+this.verticalSpacingForCellTypes(e,"item","footer")),s},__superMap:{_$Cps$completeVisibleCells:"completeVisibleCells",_$E8U$cellIsVisible:"cellIsVisible",_$HWx$handleEverythingChanged:"handleEverythingChanged",_$K14$leftForCell:"leftForCell"}});function qm(e){e.release(this,"flow layout section cache")}var Qm=Object(we.b)("SelectionOperations",(function(e){e("TOGGLE"),e("EXTEND"),e("SET"),e("ADD"),e("REMOVE")})),Ym=Object(we.b)("SelectionDirections",(function(e){e("UP"),e("DOWN"),e("LEFT"),e("RIGHT")}));function Zm(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Xm(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xm(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Jm=P.a.extend(B.b,Tn.a,{collection:Object(V.b)(),delegate:Object(V.b)(),isEmptySelectionEnabled:Object(V.b)(!0),isMultipleSelectionEnabled:Object(V.b)(!0),isRangeSelectionAlwaysAdditive:Object(V.b)(!1),pivot:Object(V.b)({strong:!0,get:function(){return this._pivot},set:function(e){return this._pivot=e}}),extendedTo:Object(V.b)({strong:!0}),userPerformedSelectionOperation:function(e,t){this._userPerformedSelectionOperation(e,t),this.notifyPublicOfSelectionChange()},notifyPublicOfSelectionChange:function(){this.propertyChanged("selection"),this.selectionDidChange()},selectionDidChange:Object(B.i)(),_userPerformedSelectionOperation:function(e,t){var n=!1;switch(t){case Qm.TOGGLE:e&&(this.isItemAtHandleSelected(e)?this._userPerformedSelectionOperation(e,Qm.REMOVE):this._userPerformedSelectionOperation(e,Qm.ADD));break;case Qm.REMOVE:(this.isEmptySelectionEnabled||this.selection.length>1)&&e&&this.deselectItemAtHandle(e);break;case Qm.ADD:if(!this.isMultipleSelectionEnabled){this._userPerformedSelectionOperation(e,Qm.SET);break}e&&this.selectItemAtHandle(e)&&(this.pivot=e);break;case Qm.EXTEND:if(this.isMultipleSelectionEnabled){if(e instanceof Object){var i=this.pivot;i instanceof Object?(this._modifyCurrentRangeForSelectionExtensionOperation(e,i),n=!0):this._userPerformedSelectionOperation(e,Qm.ADD)}break}default:e&&e.retain("BaseSelectionController: holding on during clearSelection"),this.clearSelection(),e&&(this.selectItemAtHandle(e)&&(this.pivot=e),e.release("BaseSelectionController: holding on during clearSelection"))}this.extendedTo=n?e:void 0},_modifyCurrentRangeForSelectionExtensionOperation:function(e,t){var n=this.extendedTo,i=n&&n.position+e.position+t.position>=0,r=i?n.position-t.position:void 0,a=i?e.position-t.position:void 0;i&&Math.sign(r)===Math.sign(a)?Math.abs(r)>Math.abs(a)?this.isRangeSelectionAlwaysAdditive||this.deselectRange(n,e,!1):this.selectRange(n,e,!1):(n instanceof Object&&!this.isRangeSelectionAlwaysAdditive&&(t.retain(this,"BaseSelectionController#_userPerformedSelectionOperation: reselecting extended selection range"),this.deselectRange(t,n),this.pivot=t,t.release(this,"BaseSelectionController#_userPerformedSelectionOperation: reselecting extended selection range")),this.selectRange(t,e))},userPerformedSelectionOperationInDirection:function(e,t){var n=this.getSelectableHandleInDirection(this.pivot,e);n&&(this.userPerformedSelectionOperation(n,t),this.pivot=n)},selectAll:function(){var e=this.collection.startHandle;if(e.isValid){this.clearSelection();var t=this.getSelectableHandleInOffsetDirection(e,1);if(t instanceof Object){this._userPerformedSelectionOperation(t,Qm.SET);var n=e.end;n!==e&&(n.retain(this,"selectAll").autorelease(this,"selectAll"),this._userPerformedSelectionOperation(n,Qm.EXTEND)),this.notifyPublicOfSelectionChange()}}},selection:Object(nc.c)($n.a),selectedItem:Object(V.b)({dependencies:["selection"],get:Object.assign((function(){var e=this.selection;if(1!==e.length)return null;for(var t,n=Zm(e);!(t=n()).done;)return t.value}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(1!==r.length)return null;for(var a,s=Zm(r);!(a=s()).done;)return a.value}}),set:Object.assign((function(e){var t;null===e?t=null:(t=oi.a.create()).add(e),this.selection=t}),{__CW__setter:function(e,t,n,i,r){var a;null===e?a=null:(a=oi.a.create()).add(e),n[0+i]=a}}),writeDependencySetPathMap:[!1]}),updateSelectionForCollectionChange:Object(nc.c)(Mn.a),clearSelection:Object(nc.c)(Mn.a),isItemAtHandleSelected:Object(nc.c)(Mn.a),selectItemAtHandle:Object(nc.c)(Mn.a),deselectItemAtHandle:Object(nc.c)(Mn.a),selectRange:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._modifyRange(e,t,this.selectItemAtHandle,n)},deselectRange:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._modifyRange(e,t,this.deselectItemAtHandle,n)},_modifyRange:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isValid&&t.isValid){var r="BaseSelectionController#_modifyRange: iterating handle",a="BaseSelectionController#_modifyRange: end handle",s=Math.sign(t.position-e.position),o=t.retain(this,a),l=e.retain(this,r);if((l!==o||i)&&n.call(this,l),0!==s)for(;l!==o&&l.isValid;){var c=l.atDistance(s).retain(this,r);l.release(this,r),((l=c)!==o||i)&&n.call(this,l)}o.release(this,a),l.release(this,r)}},getHandleInDirection:function(e,t){var n=this._getHandleOffsetForDirection(e,t);if(0!==n)return this._getHandleAtOffsetFromHandle(e,n)},findHandleInOffsetDirection:function(e,t,n){var i="findHandleInOffsetDirection";if(0!==t){for(var r=e.retain(this,i);r.isValid;){var a=this._getHandleAtOffsetFromHandle(r,t);if(a instanceof Object&&a.retain(this,i),!0===n.call(this,r,a))return a instanceof Object&&a.release(this,i),r.autorelease(this,i);if(r.release(this,i),!(a instanceof Object))return;r=a.retain(this,i)}r.release(this,i)}},findHandleInDirection:function(e,t,n){var i=this._getHandleOffsetForDirection(e,t);return this.findHandleInOffsetDirection(e,i,n)},getLastHandleInDirection:function(e,t){return this.findHandleInDirection(e,t,(function(e,t){return!(t instanceof Object)||!t.isValid}))},getSelectableHandleInDirection:function(e,t){return this.findHandleInDirection(e,t,this.getIsItemAtHandleSelectable)},getSelectableHandleInOffsetDirection:function(e,t){return this.findHandleInOffsetDirection(e,t,this.getIsItemAtHandleSelectable)},getIsItemAtHandleSelectable:function(e){return this.delegate.selectionControllerShouldSelectItem(this,e)&&!this.isItemAtHandleSelected(e)},_getHandleOffsetForDirection:function(e,t){var n=0;switch(t){case Ym.LEFT:case Ym.UP:n=-1;break;case Ym.RIGHT:case Ym.DOWN:n=1}var i=this.owner.layoutMetrics,r=(i&&i.direction)===$m.rightToLeft,a=t===Ym.LEFT||t===Ym.RIGHT;return r&&a&&(n*=-1),n},_getHandleAtOffsetFromHandle:function(e,t){return e.atDistance(t).retain(this,"getHandleInDirection").autorelease(this,"getHandleInDirection")},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseSelectionController"}});function e_(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return t_(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t_(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var n_=oi.a.create(),i_=Jm.extend({_tempIndexSet:Object(H.d)({strong:!0,defaultValue:Object(k.c)(kp.a)}),selectedIndices:Object(V.b)({dependencies:[],writeDependencies:["selectionDidChange","pivot"],get:function(){return this._selectedIndices},set:Object.assign((function(e){var t=this.delegate,n=this.collection,i=this._selectedIndices;if(!n)return this.pivot=null,this._selectedIndices=kp.a.create(),void this.selectionDidChange(!0);var r=i.length;1===r?t.selectionControllerDidDeselectItem(this,n.startHandle.at(i.firstIndexAfter(-1))):r>1&&t.selectionControllerDidSelectRange(this,i),e||(e=i);var a=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&a&&0===e.length){this._selectedIndices=kp.a.create();for(var s=n.startHandle;s.isValid&&!this.selectItemAtHandle(s);s=s.next);e=this._selectedIndices}else if(!this.isMultipleSelectionEnabled&&e.length>1){this._selectedIndices=kp.a.create();for(var o,l=e_(e);!(o=l()).done;){var c=o.value,u=n.startHandle.at(c).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),d=this.selectItemAtHandle(u);if(u.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),d)break}e=this._selectedIndices}else this._selectedIndices=e=t.selectionControllerShouldSelectRange(this,e),t.selectionControllerDidSelectRange(this,e);var h=this._pivot,p=h;h&&e.contains(h.position)||e.length>0&&(p=n.startHandle.at(e.lastIndexBefore(1/0))),this.pivot=p,this.selectionDidChange(!0)}),{__CW__setter:function(e,t,n,i,r){var a=this.delegate,s=this.collection,o=this._selectedIndices;if(!s)return n[1+i]=null,this._selectedIndices=kp.a.create(),void this.selectionDidChange(!0);var l=o.length;1===l?a.selectionControllerDidDeselectItem(this,s.startHandle.at(o.firstIndexAfter(-1))):l>1&&a.selectionControllerDidSelectRange(this,o),e||(e=o);var c=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&c&&0===e.length){this._selectedIndices=kp.a.create();for(var u=s.startHandle;u.isValid&&!this.selectItemAtHandle(u);u=u.next);e=this._selectedIndices}else if(!this.isMultipleSelectionEnabled&&e.length>1){this._selectedIndices=kp.a.create();for(var d,h=e_(e);!(d=h()).done;){var p=d.value,f=s.startHandle.at(p).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),g=this.selectItemAtHandle(f);if(f.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),g)break}e=this._selectedIndices}else this._selectedIndices=e=a.selectionControllerShouldSelectRange(this,e),a.selectionControllerDidSelectRange(this,e);var m=this._pivot,_=m;m&&e.contains(m.position)||e.length>0&&(_=s.startHandle.at(e.lastIndexBefore(1/0))),n[1+i]=_,this.selectionDidChange(!0)}}),writeDependencySetPathMap:[,!1]}),_maintainFlags:Object(B.h)({inputs:["delegate","isEmptySelectionEnabled","isMultipleSelectionEnabled"],callback:function(e){e&&(this.selectedIndices=this._selectedIndices)}}),_selectedIndices:Object(H.d)({strong:!0,defaultValue:Object(k.c)(kp.a)}),updateSelectionForCollectionChange:function(e){var t=this._selectedIndices,n=e.itemsChanges,i=!1;if(n){if(t.length>0){n_.serializer=this.collection.serializer;for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.index;if(-1!==t.firstIndexAfter(o)&&(i=!0),s.operation===Wo.b.REMOVE)t.contains(o)&&n_.encodedAdd(s.encodedItem),t.itemsRemovedAtIndex(o,1);else if(t.itemsInsertedAtIndex(o,1),n_.length>0){var l=s.encodedItem;n_.encodedContains(l)&&(t.add(o),n_.encodedRemove(l),i=!0)}}n_.length&&(i=!0,n_.clear())}}else if(e.collectionChanged)t.length&&(i=!0,t.clear());else if(e.everythingChanged&&t.length){var c=this.collection.length;t.clone().forEach((function(e){e>=c&&t.remove(e)})),i=!0}0!==t.length||this.isEmptySelectionEnabled||(i=!0),i&&(this.selectedIndices=t)},selection:Object(V.b)({strong:!0,dependencies:["selectedIndices"],set:Object.assign((function(e){var t=this.collection,n=kp.a.create();if(e&&t)if(e.serializer===t.serializer&&e.createIterator)for(var i=e.createIterator();i.isValid;i.moveToNext())n.add(t.encodedIndexOf(i.encodedValue));else e.forEach((function(e){n.add(t.indexOf(e))}));return this.selectedIndices=n,e}),{__CW__setter:function(e,t,n,i,r){var a=this.collection,s=kp.a.create();if(e&&a)if(e.serializer===a.serializer&&e.createIterator)for(var o=e.createIterator();o.isValid;o.moveToNext())s.add(a.encodedIndexOf(o.encodedValue));else e.forEach((function(e){s.add(a.indexOf(e))}));return n[0+i]=s,e}}),get:Object.assign((function(){var e=this.collection,t=oi.a.create();return e&&(t.serializer=e.serializer,this.selectedIndices.forEach((function(n){t.encodedAdd(e.encodedObjectAt(n))}))),t}),{__CW__getter:function(e,t,n,i){var r=this.collection,a=oi.a.create();return r&&(a.serializer=r.serializer,i.internalGet(this,t[0+n]).forEach((function(e){a.encodedAdd(r.encodedObjectAt(e))}))),a}}),writeDependencySetPathMap:[!1]}),isItemAtHandleSelected:function(e){return this.selectedIndices.contains(e.position)},selectItemAtHandle:function(e){var t=this.delegate;return!!t.selectionControllerShouldSelectItem(this,e)&&(this._selectedIndices.add(e.position),this.propertyChanged("selectedIndices"),t.selectionControllerDidSelectItem(this,e),!0)},deselectItemAtHandle:function(e){var t=this._selectedIndices,n=this.collection,i=e.position,r=null;if(t.remove(i),0!==t.length){var a=this.pivot;if(e===a){var s=t.firstIndexAfter(i),o=t.lastIndexBefore(i),l=(-1===s?1/0:s-i)<(-1===o?1/0:i-o)?s:o;r=n.startHandle.at(l)}else r=a}return this.pivot=r,this.propertyChanged("selectedIndices"),this.delegate.selectionControllerDidDeselectItem(this,e),!0},clearSelection:function(){var e=this.selectedIndices;this.delegate.selectionControllerDidDeselectRange(this,e),this.selectedIndices.clear(),this.pivot=null},selectRange:function(e,t){var n=e.position,i=t.position,r=this._selectedIndices,a=this._tempIndexSet;a.clear(),a.add(n,i);var s=this.delegate.selectionControllerShouldSelectRange(this,a);r.union(s),this.delegate.selectionControllerDidSelectRange(this,s)},getSelectableHandleInDirection:function(e,t){var n;switch(t){case Ym.UP:n=-1;break;case Ym.DOWN:n=1;break;default:return null}for(var i=e.retain(this,"getSelectableHandleInDirection: selectableItem");;){var r=i.atDistance(n).retain(this,"getSelectableHandleInDirection: selectableItem");if(i.release(this,"getSelectableHandleInDirection: selectableItem"),!r.isValid)return r.release(this,"getSelectableHandleInDirection: selectableItem"),null;if(i=r,this.delegate.selectionControllerShouldSelectItem(this,i)&&!this.isItemAtHandleSelected(i))return i.autorelease(this,"getSelectableHandleInDirection: selectableItem")}},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexedSelectionController"}});function r_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a_={mixinDependencies:[Lm],selectionControllerShouldSelectRange:function(e,t){for(var n,i=kp.a.create(),r=e.collection.handleProvider,a=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return r_(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r_(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.ranges());!(n=a()).done;)for(var s=n.value,o=s.start,l=s.end,c=o;c<=l;c++){var u=r.at(c);this.selectionControllerShouldSelectItem(e,u)&&i.add(c)}return i},selectionControllerDidSelectRange:U.a,selectionControllerDidDeselectRange:U.a},s_=we.b("Direction",{EAST:0,NORTHEAST:45,NORTH:90,NORTHWEST:135,WEST:180,SOUTHWEST:225,SOUTH:270,SOUTHEAST:315}),o_={mixinDependencies:[{mixinDependencies:[Tn.a],collectionViewDidScroll:Mn.a.define()}],collectionViewDidScrollInDirection:Mn.a.define()},l_={staticMembers:{measurementInstance:V.b({readOnly:!0,strong:!0,get:function(){var e=this.create(),t=e.element;return t.style.visibility="hidden",document.body.appendChild(t),e}})},naturalSize:V.b({cacheable:!1,readOnly:!0,get:function(){return $u.a(this.element)}})},c_={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{position:"absolute"}}}}},u_=In.a.extend(c_,l_,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cw-divider-item-view"]},className:"cw-ui-divider-item-view",__QUALIFIED_CLASS_NAME__:"DividerItemView"}}),d_=n(388),h_=In.a.extend(c_,{staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cw-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}}]},className:"cw-ui-item-view",__QUALIFIED_CLASS_NAME__:"ItemView"},isDisabled:V.b({type:"boolean",defaultValue:!1}),isHighlighted:V.b({type:"boolean",defaultValue:!1})}),p_=h_.extend(l_,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["checkmark"]},{type:"ELEMENT",tagname:"div",name:"icon",classes:["icon",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"iconClass",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_displayTitle",attributes:{}}],classes:["title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"titleIsAlwaysLTR",truevalue:"is-always-ltr",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_keySequenceSymbols",attributes:{}}],classes:["key-sequence-symbols"]}],classes:["cw-menu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasCheckmark",truevalue:"has-checkmark",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasIconClass",truevalue:"has-icon-class",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasKeySequence",truevalue:"has-key-sequence",attributes:{}}]}},className:"cw-ui-menu-item-view",__QUALIFIED_CLASS_NAME__:"MenuItemView"},_displayTitle:V.b({dependencies:["title","shouldEscape"],readOnly:!0,get:Object.assign((function(){return this.shouldEscape?d_.b(this.title):this.title}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?d_.b(i.internalGet(this,t[0+n])):i.internalGet(this,t[0+n])}})}),titleIsAlwaysLTR:V.b({type:"boolean",defaultValue:!1}),hasCheckmark:V.b({type:"boolean",defaultValue:!1}),_hasKeySequence:V.b({dependencies:["keySequence"],readOnly:!0,get:Object.assign((function(){return!!this.keySequence}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])}})}),_hasIconClass:V.b({dependencies:["iconClass"],readOnly:!0,get:Object.assign((function(){return!!this.iconClass}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])}})}),iconClass:V.b(),keySequence:V.b(),_keySequenceSymbols:V.b({dependencies:["keySequence"],readOnly:!0,get:Object.assign((function(){var e=this.keySequence;return e?f_(e):null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?f_(r):null}})}),title:V.b(),shouldEscape:V.b({type:"boolean",defaultValue:!0})});function f_(e){var t,n,i="",r=e.modifiers,a=e.keys;if(r)for(t=0,n=r.length;t<n;t++)i+=s.d(g_[r[t]])||r[t];if(a)for(t=0,n=a.length;t<n;t++)i+=s.d(g_[a[t]])||String.fromCharCode(a[t]);return i}var g_={},m_=ml.a;g_[m_.BACKSPACE]="\u232b",g_[m_.TAB]="\u21e5",g_[m_.SPACE]="Space",g_[m_.RETURN]="\u23ce",g_[m_.ENTER]="\u23ce",g_[m_.SHIFT]="\u21e7",g_[m_.CTRL]="\u2303",g_[m_.OPTION]="\u2325",g_[m_.ESC]="\u238b",g_[m_.LEFT]="\u2190",g_[m_.UP]="\u2191",g_[m_.RIGHT]="\u2192",g_[m_.DOWN]="\u2193",g_[m_.DELETE]="\u2326",g_[m_.HOME]="Home",g_[m_.END]="End",g_[m_.PAGEUP]="Page Up",g_[m_.PAGEDOWN]="Page Down",g_[m_.INSERT]="Insert",g_[m_.CMD]="\u2318";var __={mixinDependencies:[Tn.a],action:V.b()},v_=(Tn.a,Tn.a,h_.extend(l_,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["icon",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"iconClass",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_displayTitle",attributes:{escape:"false"}}],classes:["title"]},{type:"ELEMENT",tagname:"div",classes:["arrow"]}],classes:["cw-submenu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasIconClass",truevalue:"has-icon-class",attributes:{}}]}},className:"cw-ui-submenu-item-view",__QUALIFIED_CLASS_NAME__:"SubmenuItemView"},_displayTitle:V.b({dependencies:["title","shouldEscape"],readOnly:!0,get:Object.assign((function(){return this.shouldEscape?d_.b(this.title):this.title}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?d_.b(i.internalGet(this,t[0+n])):i.internalGet(this,t[0+n])}})}),_hasIconClass:V.b({dependencies:["iconClass"],readOnly:!0,get:function(){return!!this.icon}}),iconClass:V.b(),title:V.b(),shouldEscape:V.b({type:"boolean",defaultValue:!0})})),b_={_didEnter:function(){var e=this,t=arguments;e.__s._$66$_didEnter.apply(e,t),this.view.style.set("width",this.width).set("height",this.height).translateDevicePixels(this.x,this.y)},_didUpdate:function(){var e=this,t=arguments;e.__s._$DO$_didUpdate.apply(e,t),this.view.style.set("width",this.width).set("height",this.height).translateDevicePixels(this.x,this.y)},_willExit:function(){var e=this,t=arguments;this.view.style.translate(-1e3,-1e3),e.__s._$Ku$_willExit.apply(e,t)},__superMap:{_$66$_didEnter:"_didEnter",_$DO$_didUpdate:"_didUpdate",_$Ku$_willExit:"_willExit"}},y_=km.a.extend(B.b,{item:V.b(),key:H.d({set:function(e){return this.item=e?e.value:null,e}}),itemIsObservable:H.d({readOnly:!0,dependencies:["item"],get:Object.assign((function(){return pi.a(this.item,B.b)}),{__CW__getter:function(e,t,n,i){return pi.a(i.internalGet(this,t[0+n]),B.b)}})}),delegate:null,isDisabled:V.b({type:"boolean",defaultValue:!1}),view:H.d({weak:!0}),viewClass:H.d({defaultValue:In.a}),_didEnter:function(e){e.selectedItem?this.view.isHighlighted=e.selectedItem===this.item:e.selection?this.view.isHighlighted=e.selection.contains(this.handle):this.view.isHighlighted=!1,this.delegate&&this.delegate.viewItemDidEnter?this.delegate.viewItemDidEnter(e,this):this.didEnter(e)},_didUpdate:function(e){e.selectedItem?this.view.isHighlighted=e.selectedItem===this.item:e.selection?this.view.isHighlighted=e.selection.contains(this.handle):this.view.isHighlighted=!1,this.delegate&&this.delegate.viewItemDidUpdate?this.delegate.viewItemDidUpdate(e,this):this.didUpdate(e)},_shouldHighlight:function(e){return this.delegate&&this.delegate.viewItemShouldHighlight?this.delegate.viewItemShouldHighlight(this,e):this.shouldHighlight(e)},_willExit:function(e){this.delegate&&this.delegate.viewItemDidExit?this.delegate.viewItemWillExit(e,this):this.willExit(e)},didEnter:function(e){},didUpdate:function(e){},shouldHighlight:function(e){return!this.isDisabled},willExit:function(e){},staticMembers:{__QUALIFIED_CLASS_NAME__:"_ViewItem"}}),w_=y_.extend(b_,__,{didEnter:function(e){var t=this.item,n=this.itemIsObservable,i=this.view;n?(i.bind("hasCheckmark",t.bindingFor("hasCheckmark")),i.bind("iconClass",t.bindingFor("iconClass")),i.bind("isDisabled",t.bindingFor("isDisabled")),i.bind("keySequence",t.bindingFor("keySequence")),i.bind("title",t.bindingFor("title")),i.bind("titleIsAlwaysLTR",t.bindingFor("titleIsAlwaysLTR")),i.bind("shouldEscape",t.bindingFor("shouldEscape")),this.bind("action",t.bindingFor("action")),this.bind("isDisabled",t.bindingFor("isDisabled"))):(i.hasCheckmark=t.hasCheckmark,i.iconClass=t.iconClass,i.isDisabled=t.isDisabled,i.keySequence=t.keySequence,i.title=t.title,i.titleIsAlwaysLTR=t.titleIsAlwaysLTR,i.shouldEscape=t.shouldEscape,this.action=t.action,this.isDisabled=t.isDisabled)},willExit:function(e){if(this.itemIsObservable){var t=this.view;t.unbind("hasCheckmark"),t.unbind("iconClass"),t.unbind("isDisabled"),t.unbind("keySequence"),t.unbind("title"),t.unbind("titleIsAlwaysLTR"),t.unbind("shouldEscape"),this.unbind("action"),this.unbind("isDisabled")}},viewClass:p_,staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewItem"}}),I_=y_.extend(b_,{didEnter:function(e){var t=this.item,n=this.itemIsObservable,i=this.view;n?(i.bind("iconClass",t.bindingFor("iconClass")),i.bind("isDisabled",t.bindingFor("isDisabled")),i.bind("title",t.bindingFor("title")),i.bind("titleIsAlwaysLTR",t.bindingFor("titleIsAlwaysLTR")),i.bind("shouldEscape",t.bindingFor("shouldEscape")),this.bind("isDisabled",t.bindingFor("isDisabled"))):(i.iconClass=t.iconClass,i.isDisabled=t.isDisabled,i.title=t.title,i.titleIsAlwaysLTR=t.titleIsAlwaysLTR,i.shouldEscape=t.shouldEscape,this.isDisabled=t.isDisabled)},willExit:function(e){if(this.itemIsObservable){var t=this.view;t.unbind("iconClass"),t.unbind("isDisabled"),t.unbind("title"),t.unbind("titleIsAlwaysLTR"),t.unbind("shouldEscape"),this.unbind("isDisabled")}},viewClass:v_,staticMembers:{__QUALIFIED_CLASS_NAME__:"SubmenuViewItem"}}),S_=y_.extend(b_,{customHeight:12,shouldHighlight:function(e){return!1},viewClass:u_,staticMembers:{__QUALIFIED_CLASS_NAME__:"DividerViewItem"}}),C_=n(782),E_=n(556),A_=In.a.extend(E_.a,kl.a,{staticMembers:{className:"cw-ui-repeater-button",__QUALIFIED_CLASS_NAME__:"RepeaterButton"},period:V.b({defaultValue:16.66666667,didChange:function(e){this._timer.delay=e}}),_timer:H.d({strong:!0,defaultValue:k.c(Pd.a,{action:"callAction",timesToFire:1/0})}),pointerEnter:function(e){this._timer.start()},pointerLeave:function(e){this._timer.stop()}}).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["arrow"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"directionClassname",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"none",falsevalue:"flex",attributes:{},unit:null,property:"display"}}}},className:"cw-ui-scroll-repeater-button",__QUALIFIED_CLASS_NAME__:"ScrollRepeaterButton"},action:"scrollInDirection",direction:V.b({defaultValue:s_.NORTH}),directionClassname:V.b({readOnly:!0,dependencies:["direction"],get:Object.assign((function(){return"direction-"+this.direction.value+"\xb0"}),{__CW__getter:function(e,t,n,i){return"direction-"+i.internalGet(this,t[0+n]).value+"\xb0"}})}),period:V.b({defaultValue:60})}),O_=C_.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"startScrollButton"},{type:"VIEWOUTLET",tagname:"view",name:"endScrollButton"}],classes:["cw-collection-view","cw-menu-list-view"],attributes:{tabindex:"1"}},itemViews:{type:"ELEMENT",tagname:"ext",classes:["collection-content"],styles:{position:"absolute",height:"100%",width:"100%"}}},className:"cw-ui-menu-list-view",__QUALIFIED_CLASS_NAME__:"MenuListView"},delegate:V.b({defaultValue:k.c(P.a.extend(o_,{collectionViewDidScroll:U.a,collectionViewDidScrollInDirection:U.a}))}),endScrollButton:V.b({defaultValue:k.c(A_.extend({direction:s_.SOUTH})),downstreamBindings:{isDisabled:"(owner).endScrollButtonIsDisabled"}}),endScrollButtonIsDisabled:V.b({readOnly:!0,dependencies:["canScrollVertically","height","scrollMaxY"],get:Object.assign((function(){return!this.canScrollVertically||this.scrollMaxY===this.height}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])===i.internalGet(this,t[1+n])}})}),startScrollButton:V.b({defaultValue:k.c(A_.extend({direction:s_.NORTH})),downstreamBindings:{isDisabled:"(owner).startScrollButtonIsDisabled"}}),startScrollButtonIsDisabled:V.b({readOnly:!0,dependencies:["canScrollVertically","scrollHeight","scrollMaxY"],get:Object.assign((function(){return!this.canScrollVertically||this.scrollHeight===this.scrollMaxY}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])===i.internalGet(this,t[2+n])}})}),init:function(){var e=this,t=arguments;e.__s._$vE$init.apply(e,t),this.startScrollButton.target=this,this.endScrollButton.target=this,this.scrollInDirection=T_},__superMap:{_$vE$init:"init"}}),T_=function(e){this.delegate.collectionViewDidScrollInDirection(this,e.direction)},M_=Pm.a.extend(o_,Rm,{mixinDependencies:[Kp.a,qp.b],_minimumWidth:V.b(20),viewItemMappedClass:V.b({defaultValue:y_}),desiredSize:V.b({strong:!0,dependencies:["isAttached","collection","collection.length","shouldMeasure","viewItemMappedClass","collection.contentsDidChangeUntracked","desiredWidth","maximumWidth","_minimumWidth","layoutMetrics.rowSpacing","layoutMetrics.rowHeight","layoutMetrics.topPadding","layoutMetrics.bottomPadding","layoutDelegate","layoutController"],readOnly:!0,get:Object.assign((function(){var e=this.desiredWidth,t=0,n=this.maximumWidth,i=this._minimumWidth,r=this.layoutMetrics;r&&(t+=r.topPadding+r.bottomPadding);var a=this.collection;if(a){var s=a.length;if(r&&(t+=r.rowSpacing*s-1),this.shouldMeasure&&this.isAttached){var o=this.view.style,l=o.getInline("position"),c=o.getInline("width"),u=o.getInline("height");o.set({position:"absolute",width:globalThis.innerWidth+"px",height:globalThis.innerHeight+"px"});for(var d=a.startHandle;d.isValid;d=d.next){var h=this.layoutDelegate.cellForHandle(d,"item");e=Math.max(e,Math.ceil(this._naturalWidthForMenuItem(h))),t+=this.layoutDelegate.sizeForItem(this.layoutController,h).height}o.set({position:l,width:c,height:u})}else r&&(t+=r.rowHeight*s)}return e=Math.min(Math.max(e,i),n),_l.a.create(e,t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[6+n]),a=0,s=i.internalGet(this,t[7+n]),o=i.internalGet(this,t[8+n]),l=this.layoutMetrics;l&&(a+=l.topPadding+l.bottomPadding);var c=i.internalGet(this,t[1+n]);if(c){var u=c.length;if(l&&(a+=l.rowSpacing*u-1),i.internalGet(this,t[3+n])&&i.internalGet(this,t[0+n])){var d=this.view.style,h=d.getInline("position"),p=d.getInline("width"),f=d.getInline("height");d.set({position:"absolute",width:globalThis.innerWidth+"px",height:globalThis.innerHeight+"px"});for(var g=c.startHandle;g.isValid;g=g.next){var m=i.internalGet(this,t[13+n]).cellForHandle(g,"item");r=Math.max(r,Math.ceil(this._naturalWidthForMenuItem(m))),a+=i.internalGet(this,t[13+n]).sizeForItem(i.internalGet(this,t[14+n]),m).height}d.set({position:h,width:p,height:f})}else l&&(a+=l.rowHeight*u)}return r=Math.min(Math.max(r,o),s),_l.a.create(r,a)}})}),desiredWidth:V.b(0),shouldMeasure:V.b(!0),menuDelegate:V.b(),layoutDelegate:V.b({defaultValue:k.c(xm.a.extend({menuDelegate:V.b(),sizeForItem:function(e,t){return _l.a.create(t.customWidth||e.viewportWidth,t.customHeight||e.layoutMetrics.rowHeight)},createCellFor:function(e,t){var n=this,i=arguments;if("item"!==t)return n.__s._$1mE$createCellFor.apply(n,i);var r=this.menuDelegate;return(r.itemIsDivider(e)?S_:r.itemIsSubmenu(e)?I_:this.cellClass).create(this)},__superMap:{_$1mE$createCellFor:"createCellFor"}})),downstreamBindings:{cellClass:"(owner).viewItemMappedClass",menuDelegate:"(owner).menuDelegate"}}),presenter:V.b({defaultValue:k.c(Nm.a.extend({itemViewClassForItem:function(e){var t=this,n=arguments;return"item"!==e.cellType?t.__s._$1_0$itemViewClassForItem.apply(t,n):e.viewClass},cellDidExit:function(e){var t=this,n=arguments;e._willExit(this.owner),t.__s._$21V$cellDidExit.apply(t,n),e.view=null},itemViewDidEnter:function(e,t){var n=this,i=arguments;t.view=e,n.__s._$23w$itemViewDidEnter.apply(n,i),t._didEnter(this.owner)},cellDidMove:function(e){var t=this,n=arguments;t.__s._$25n$cellDidMove.apply(t,n),e._didUpdate(this.owner)},viewForViewClass:function(){var e=this,t=arguments,n=e.__s._$27t$viewForViewClass.apply(e,t),i=qp.a.create({event:"menuWasTapped",delegate:this.owner});return n.addGestureRecognizer(i),n},__superMap:{_$1_0$itemViewClassForItem:"itemViewClassForItem",_$21V$cellDidExit:"cellDidExit",_$23w$itemViewDidEnter:"itemViewDidEnter",_$25n$cellDidMove:"cellDidMove",_$27t$viewForViewClass:"viewForViewClass"}}))}),maximumWidth:V.b(1/0),selectionController:k.c(i_),selectionDelegate:k.c(P.a.extend(a_)),isMultipleSelectionEnabled:!1,isEmptySelectionEnabled:!0,viewClass:O_,_naturalWidthForMenuItem:function(e){var t,n=e.view,i=!1;return n||(n=e.viewClass.measurementInstance)&&(n.isAttached||(this.presenter.views.push(n),n.element.style.visibility="hidden"),e.view=n,e._didEnter(this),i=!0),t=n&&n.isAttached?n.naturalSize.width:0,i&&(e._willExit(this),e.view=null),t},collectionViewDidScroll:function(e,t,n){this.scrollBy(t,n)},collectionViewDidScrollInDirection:function(e,t){switch(t){case s_.NORTH:this.moveAnItemBack();break;case s_.SOUTH:this.moveAnItemForward();break;default:_.b("CW.UI.MenuListViewController does not support scrolling in the direction, `%{direction}`.",{direction:t})}},moveAnItemBack:function(){var e=this.layoutController.visibleCells.objectAt(0),t=this.layoutDelegate.positionNextCell(this.layoutController,e,-1);t?this.scrollBy(0,t.height):this.scrollBy(0,e.height),this.update()},moveAnItemForward:function(){var e=this.layoutController.visibleCells.lastItem,t=this.layoutDelegate.positionNextCell(this.layoutController,e,1);t?this.scrollBy(0,-t.height):this.scrollBy(0,-e.height),this.update()},selectItem:function(e){this.selectedItem=e},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuListViewController"}}),D_=n(450),P_=n(381),L_=n(99),R_=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"popoverView"}],classes:["cw-modal"]}},className:"cw-ui-modal-arrow-popover-view",__QUALIFIED_CLASS_NAME__:"ModalArrowPopoverView"},layout:Object(V.b)(),anchorLayout:Object(V.b)(),arrowLength:Object(V.b)(),arrowWidth:Object(V.b)(),arrowAlignment:Object(V.b)(),verticalAlignment:Object(V.b)(),horizontalAlignment:Object(V.b)(),contentView:Object(V.b)(),popoverView:Object(V.b)({defaultValue:Object(k.c)(Sl),type:Sl,downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth",contentView:"(owner).contentView",arrowAlignment:"(owner).arrowAlignment",verticalAlignment:"(owner).verticalAlignment",horizontalAlignment:"(owner).horizontalAlignment"}}),pointerDown:function(e){var t=e.targetView.element;this.popoverView.element.contains(t)?this.sendEvent("modalContentWasClicked",this):this.sendEvent("modalBackgroundWasClicked",this)}}),x_={menuDidDismissWithHighlightedItem:function(e,t){},shouldHighlightItem:function(e,t){var n=e.contentController.layoutDelegate.cellForHandle(t);return!n._shouldHighlight||n._shouldHighlight(this)},itemWasSelected:function(e,t){if(t.isValid){var n=t.value,i=n.action;n.isDisabled||i&&(e.sendEvent(i,n)||Vp.a(e.target,i,n))}},shouldDismissWithHighlightedItem:function(e,t){return!0},itemIsSubmenu:function(e){if(!e)return!1;var t=e.value;return!!t&&null!=t.items},itemIsDivider:function(e){return null==e.value.action}},N_=P.a.extend(B.b,a_,{menuDelegate:V.b(),menu:V.b(),selectionControllerShouldSelectItem:function(e,t){var n=this.menu;return this.menuDelegate.shouldHighlightItem(n,t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuSelectionDelegate"}}),F_=El.extend({allowedLayouts:k.c([hl,cl,ul,dl]),arrowLength:0,arrowWidth:0,spaceInset:20,contentController:V.b({defaultValue:function(){return M_.create({viewItemMappedClass:this.__CW__listViewItemMappedClass,menuDelegate:this.__CW__delegate})},downstreamBindings:{collection:"(owner).listCollection",isEmptySelectionEnabled:"(owner).listIsEmptySelectionEnabled",viewItemMappedClass:"(owner).listViewItemMappedClass",selectionDelegate:"(owner)._selectionDelegate","layoutMetrics.bottomPadding":"(owner).listLayoutBottomPadding","layoutMetrics.rowHeight":"(owner).listLayoutRowHeight","layoutMetrics.rowSpacing":"(owner).listLayoutRowSpacing","layoutMetrics.topPadding":"(owner).listLayoutTopPadding",shouldMeasure:"(owner).shouldMeasure",menuDelegate:"(owner).delegate"}}),_selectionDelegate:V.b({defaultValue:k.c(N_),downstreamBindings:{menu:"(owner)",menuDelegate:"(owner).delegate"}}),shouldMeasure:V.b(!0),delegate:V.b({defaultValue:k.c(P.a.extend(x_))}),desiredSize:V.b(Oi.c("contentController.desiredSize")),hasOverlay:H.d(!0),listCollection:V.b({strong:!0,defaultValue:k.c(Wo.b)}),listIsEmptySelectionEnabled:V.b(!0),listLayoutBottomPadding:V.b({readOnly:!0,defaultValue:5}),listLayoutRowHeight:V.b({defaultValue:19}),listLayoutRowSpacing:V.b({defaultValue:0}),listLayoutTopPadding:V.b({readOnly:!0,defaultValue:5}),listViewItemMappedClass:V.b({defaultValue:w_}),target:H.d(D_.a),_matchedLayoutObserver:B.g("matchedLayout.layout.width","matchedLayout.layout.height",(function(e,t){this.contentController.measureViewport()})),hide:function(){var e=this,t=arguments;this._submenu&&this._submenu.hide(),e.__s._$2Ea$hide.apply(e,t)},keyDown:function(e){switch(e.which){case ml.a.DOWN:this.highlightNextItem();break;case ml.a.UP:this.highlightPreviousItem();break;case ml.a.LEFT:case ml.a.RIGHT:break;case ml.a.ENTER:this._activateWithItem(this.highlightedItem);break;default:return!1}},_activateWithItem:function(e){var t=this.listCollection,n=t.startHandle.at(-1);e&&(n=t.startHandle.at(t.indexOf(e))),this.delegate.shouldDismissWithHighlightedItem(this,e)&&(this.delegate.menuDidDismissWithHighlightedItem(this,e),this.hide()),this.delegate.itemWasSelected(this,n)},highlightNextItem:function(){var e=this.contentController,t=e.selectionController,n=this.listCollection.startHandle.at(t.selectedIndices.firstIndexAfter(-1)),i=e.selectionController.getSelectableHandleInDirection(n,Ym.DOWN);i&&(e.userPerformedSelectionOperation(i),e.scrollToItem(i.value))},highlightPreviousItem:function(){var e=this.contentController,t=e.selectionController,n=this.listCollection,i=t.selectedIndices.firstIndexAfter(-1),r=n.startHandle.at(-1===i?n.length+1:i),a=e.selectionController.getSelectableHandleInDirection(r,Ym.UP);a&&(e.userPerformedSelectionOperation(a),e.scrollToItem(a.value))},highlightedItem:V.b(Oi.c("contentController.selectedItem")),_flashViewItem:function(e){this._isDismissing=!0,this.highlightedItem===e&&(X.a(function(){this._targetViewItem=null}.bind(this)),X.a(function(){this._targetViewItem=e}.bind(this),100),X.a(function(){this._targetViewItem=null}.bind(this),200),X.a(function(){this.hide(),this._isDismissing=!1}.bind(this),400))},submenuDidFocus:function(){clearTimeout(this._targetingSubmenuTimeoutId),this._targetingSubmenuTimeoutId=null},_submenu:V.b(),_submenuRect:V.b({dependencies:["_submenu"],readOnly:!0,get:Object.assign((function(){return this._submenu?this._submenu.matchedLayout.layout:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).matchedLayout.layout:null}})}),_lastPoint:V.b({defaultValue:k.c(Object,{x:0,y:0})}),_currentPoint:V.b({defaultValue:k.c(Object,{x:0,y:0})}),_isSeekingSubmenu:V.b({dependencies:["_lastPoint","_currentPoint","_submenuRect"],readOnly:!0,get:Object.assign((function(){return!!this._submenuRect&&this._isSeriesApproachingRect(this._lastPoint,this._currentPoint,this._submenuRect)}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[2+n])&&this._isSeriesApproachingRect(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]),i.internalGet(this,t[2+n]))}})}),_isSeekingSubmenuObs:B.h("_isSeekingSubmenu",(function(e){!this._isSeekingSubmenu&&this._targetingSubmenuTimeoutId&&(clearTimeout(this._targetingSubmenuTimeoutId),this._targetingSubmenuTimeoutId=null)})),_isSeriesApproachingRect:function(e,t,n){var i,r;if(i=(n.y-e.y)/(n.x-e.x),r=(n.y-t.y)/(n.x-t.x)<i){var a=n.y+n.height;i=(a-e.y)/(n.x-e.x),r=(a-t.y)/(n.x-t.x)>i}return r},isSubmenuItem:function(e){return e&&!!e.items},isDividerItem:function(e){return null==e.action&&null==e.items},_menuItemForEvent:function(e){var t=P_.c(e),n=this.contentController.presenter.cellForView(t);if(n)return n.handle.value},pointerMove:function(e){if(this._isDismissing)return!1;if(e.clientX!==this._currentPoint.x||e.clientY!==this._currentPoint.y){var t=Zl.a.begin();t.set(this,"_lastPoint",{x:this._currentPoint.x,y:this._currentPoint.y}),t.set(this,"_currentPoint",{x:e.clientX,y:e.clientY}),t.end()}var n=this._menuItemForEvent(e),i=this.highlightedItem;n!==i&&(this.isSubmenuItem(i)&&(this._targetingSubmenuTimeoutId=X.a(function(){this.removeSubmenuForItem()}.bind(this),B_),this._hadSubmenu=!0),this.highlightedItem=n)},pointerUp:function(e){if(this._isDismissing)return!1;var t=this.highlightedItem;if(t)return t===this._menuItemForEvent(e)&&(this._activateWithItem(t),!0);this._activateWithItem()},menuWasTapped:function(e){var t=e.view,n=e.state;if(this._isDismissing)return!1;if(n===L_.b.Ended){var i=this.contentController.presenter.cellForView(t);if(i){var r=i.handle.value;this._activateWithItem(r)}}},presentSubmenuForItemWithAnchor:function(e,t){var n=j_.create({allowedLayouts:[cl,ul],listCollection:e.items,parentMenu:this,target:this.target});n.show(t),this._submenu=n},removeSubmenuForItem:function(){this._submenu&&(this._submenu.hide(),this._submenu=null)},viewClass:V.b({readOnly:!0,get:function(){return this.hasOverlay?V_:k_}}),__superMap:{_$2Ea$hide:"hide"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewController"}}),V_=R_.extend({popoverView:F.b({additionalClassNames:["cw-menu-view"]}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuOverlayPopoverView"}}),k_=Sl.extend({additionalClassNames:["cw-menu-view"],staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuPopoverView"}}),B_=1e3,j_=F_.extend({parentMenu:V.b(),pointerUp:function(e){if(!this._isDismissing){var t=e.targetView,n=t.viewController.item;!t.isDisabled&&n&&n.action?(this._flashItem(n),this.sendEvent.call(this.parentMenu,n.action,n)||this.sendEvent.call(this.parentMenu.target,n.action,n)):this.parentMenu.hide()}},viewClass:k_.extend({pointerEnter:function(e){this.viewController.parentMenu&&this.viewController.parentMenu.submenuDidFocus()}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SubmenuViewController"}}),U_=y_.extend(b_,{viewClass:In.a.extend(l_,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"primaryLabel",attributes:{}}],classes:["primary"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"category",attributes:{}}],classes:["category"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryLabel",attributes:{}}],classes:["secondary"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasBorder",truevalue:"has-border",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasCategory",truevalue:"has-category",falsevalue:"no-category",attributes:{}}]}},additionalClassNames:["autocomplete-menu-item"],isHighlighted:V.b(!1),hasBorder:V.b(!0),hasCategory:V.b({readOnly:!0,dependencies:["category"],get:Object.assign((function(){return K.a(this.category)}),{__CW__getter:function(e,t,n,i){return K.a(i.internalGet(this,t[0+n]))}})})}),didEnter:function(e){this.view.bind("primaryLabel",this.item.bindingFor("primaryLabel")),this.view.bind("category",this.item.bindingFor("localizedCategory")),this.view.bind("secondaryLabel",this.item.bindingFor("secondaryLabel"))},didUpdate:function(e){},willExit:function(){this.view.unbind("primaryLabel"),this.view.unbind("category"),this.view.unbind("secondaryLabel")},staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuViewItem"}}),G_=we.b("AutocompleteMenuLayout",{SINGLE_LINE:"SINGLE_LINE",DOUBLE_LINE:"DOUBLE_LINE"}),H_=M_.extend({viewClass:O_.extend({mixinDependencies:[Dp.a]}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuListViewController"}}),W_=F_.extend({contentController:V.b({defaultValue:k.c(H_),downstreamBindings:{desiredWidth:"(owner).width"}}),layout:V.b(G_.DOUBLE_LINE),isDoubleLineLayout:V.b({readOnly:!0,dependencies:["layout"],get:Object.assign((function(){return this.layout===G_.DOUBLE_LINE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===G_.DOUBLE_LINE}})}),singleLineLayoutHeight:V.b(35),doubleLineLayoutHeight:V.b(47),listLayoutRowHeight:V.b({readOnly:!0,dependencies:["singleLineLayoutHeight","doubleLineLayoutHeight","isDoubleLineLayout"],get:Object.assign((function(){return this.isDoubleLineLayout?this.doubleLineLayoutHeight:this.singleLineLayoutHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[0+n])}})}),listViewItemMappedClass:U_,additionalClassNames:V.b({readOnly:!0,dependencies:["isDoubleLineLayout"],get:Object.assign((function(){return this.isDoubleLineLayout?["cw-autocomplete-menu","double-line"]:["cw-autocomplete-menu","single-line"]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?["cw-autocomplete-menu","double-line"]:["cw-autocomplete-menu","single-line"]}})}),view:V.b({downstreamBindings:{additionalClassNames:"(owner).additionalClassNames"}}),listLayoutTopPadding:3,listLayoutBottomPadding:3,hasOverlay:!1,isFocusablePane:!1,listLayoutRowSpacing:0,width:V.b(0),shouldMeasure:!1,_listViewItemsDidChange:B.h("listCollection","listCollection.contentsDidChange",(function(e){if(e&&e.length>0){var t=this._mostRecentHighlightIndex;(void 0===t||t<=0)&&this.highlightNextItem()}})),_highlightedItemDidChange:B.h("highlightedItem",(function(){var e=this.highlightedItem;if(e){var t=this.listCollection;t&&(this._mostRecentHighlightIndex=t.indexOf(e))}})),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenu"}}),$_=Bl.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",name:"testMeasurer",styles:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden","white-space":"pre"}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{signal:"widthDidRender"},unit:"px",property:"width"}}}},__QUALIFIED_CLASS_NAME__:"ResizingTextField"},width:V.b({readOnly:!0,dependencies:["value","isAttached"],get:Object.assign((function(){var e=this.testMeasurer;e.innerText=this.value;var t=e.offsetWidth;return e.innerText="",t}),{__CW__getter:function(e,t,n,i){var r=this.testMeasurer;r.innerText=i.internalGet(this,t[0+n]);var a=r.offsetWidth;return r.innerText="",a}})})}),z_=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"M0 0 L3 3 L6 0"}}],classes:["menu-icon"],namespace:"http://www.w3.org/2000/svg",attributes:{viewBox:"0 0 6 4"}}],classes:["menu-icon-hitbox"]},__QUALIFIED_CLASS_NAME__:"TokenMenuButton"},action:"tokenMenuButtonClicked"}),K_=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["title"]}],classes:["title-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"menuButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"is-selected",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}},className:"cw-ui-views-token-button",__QUALIFIED_CLASS_NAME__:"TokenButton"},title:V.b(),isAccepted:V.b(),tooltip:V.b(),isSelected:V.b(!1),menuButton:V.b(k.c(z_))}),q_=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"tokenButton"}],classes:["button-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEditing",truevalue:"is-editing",attributes:{signal:"editingDidSwitchOnButton"}}]},{type:"ELEMENT",tagname:"form",children:[{type:"VIEWOUTLET",tagname:"view",name:"tokenTextField"}],classes:["text-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEditing",truevalue:"is-editing",attributes:{signal:"editingDidSwitchOnTextField"}}]},{type:"ELEMENT",tagname:"div",name:"hitDetector",classes:["hit-detector"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"hitDetectorOffset",attributes:{},unit:"px",property:"left"}}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"contentIsAlwaysLTR",truevalue:"content-is-always-ltr",attributes:{}}]},className:"cw-ui-views-token-item-view",__QUALIFIED_CLASS_NAME__:"TokenItemView"},tokenButton:V.b({defaultValue:k.c(K_,{action:"tokenButtonWasPressed",additionalClassNames:["token-item-button"],isFocusable:!0}),downstreamBindings:{title:"(owner).value",isSelected:"(owner).isSelected"}}),tokenTextField:V.b({defaultValue:k.c($_,{additionalClassNames:["token-item-textfield"]}),downstreamBindings:{value:"(owner).value",menu:"(owner).menu",delegate:"(owner).autocompleteDelegate",dataSource:"(owner).autocompleteDataSource",isDisabled:"(owner)._isTextFieldDisabled"}}),tokenMenuButtonClicked:function(){},autocompleteDelegate:V.b(),autocompleteDataSource:V.b(),didAutocomplete:function(e){if(e){var t=this.isEditing,n=this.value;this.sendEvent("createNewTokenItemBeforeCurrentToken",this,n),this.value="",t&&this.startEditing()}return!1},menu:V.b({strong:!0}),_activeElement:V.b({readOnly:!0,dependencies:["tokenButton","tokenTextField","isEditing","tokenTextField.widthDidRender","tokenButton.titleDidRender"],get:Object.assign((function(){var e;return this.isEditing?(this.tokenTextField.widthDidRender,e=this.tokenTextField.element):(this.tokenButton.titleDidRender,e=this.tokenButton.element),e}),{__CW__getter:function(e,t,n,i){var r;return i.internalGet(this,t[2+n])?(i.internalGetPath(this,t[3+n]),r=i.internalGet(this,t[1+n]).element):(i.internalGetPath(this,t[4+n]),r=i.internalGet(this,t[0+n]).element),r}})}),hitDetectorOffset:V.b({readOnly:!0,dependencies:["_activeElement","isAttached"],get:Object.assign((function(){var e=this._activeElement;return e?e.offsetWidth:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.offsetWidth:0}})}),value:V.b(""),isEditing:V.b(!1),isSelected:V.b(!1),contentIsAlwaysLTR:V.b(!1),selectionGroup:null,reEmptyToken:/^\s*$/,startEditing:function(){this.sendEvent("tokenStartedEditing",this),this.select(),this.isEditing=!0;var e=this.tokenTextField;e._selection={start:0,end:e.value.length}},stopEditing:function(){this.sendEvent("tokenStoppedEditing",this),this.isEditing=!1,this.focusedChild=null},select:function(e){e||this.sendEvent("clearSelection"),this.isSelected=!0,this.sendEvent("tokenSelected",this)},deselect:function(){this.isSelected=!1,this.sendEvent("tokenDeselected",this),this.blur()},_doubleClickCount:0,_resetDoubleClickCount:function(){this._doubleClickCount=0,this._doubleClickTimer.stop()},tokenButtonWasPressed:function(e){if(this._doubleClickCount++,this._doubleClickCount>1)this.startEditing(),this._resetDoubleClickCount();else{this._doubleClickTimer.start();var t=nu.a.sharedInstance.activeKeys;if(t.contains(ml.a.SHIFT))this.sendEvent("tokenButtonWasPressedWithShift",this);else{var n,i=p.a.sharedInstance;i.isMac&&(n=ml.a.CMD),i.isWindows&&(n=ml.a.CTRL),this.isSelected?t.contains(n)&&this.deselect():this.select(t.contains(n))}}},_doubleClickTimer:k.c(Pd.a,{delay:400,action:"_resetDoubleClickCount"}),keyDown:function(e){var t=!1,n=e.which;if(this.isEditing){var i=this.tokenTextField.selection,r=i.start,a=i.end;n===ml.a.ENTER?(this.stopEditing(),this.reEmptyToken.test(this.value)||this.sendEvent("createNewEditingTokenAfterCurrentToken",this),t=!0,e.preventDefault()):n===ml.a.BACKSPACE?(0===r&&0===a&&(e.preventDefault(),this.sendEvent("selectOrDeletePreviousToken",this)),t=!0):n===ml.a.DELETE?t=!0:n===ml.a.LEFT?0!==r&&(t=!0):n===ml.a.RIGHT&&a!==this.value.length&&(t=!0)}else n!==ml.a.BACKSPACE&&n!==ml.a.DELETE||(this.sendEvent("deleteSelectedTokens"),t=!0);return t},pointerDown:function(e){e.target===this.hitDetector&&(this.sendEvent("createNewEditingTokenAfterCurrentToken",this),e.preventDefault())},_previousIsEditing:!1,_editingObserver:B.h("isEditing","editingDidSwitchOnButton","editingDidSwitchOnTextField",(function(e){var t=this._previousIsEditing;if(this._previousIsEditing=e,e){var n=this._shouldStopEditingWhenFocusIsLost;this._shouldStopEditingWhenFocusIsLost=!1,this.tokenTextField.focus(),this._shouldStopEditingWhenFocusIsLost=n}else t&&this.reEmptyToken.test(this.value)&&this.sendEvent("deleteCurrentToken",this)})),_shouldStopEditingWhenFocusIsLost:!0,_textFieldFocusObserver:B.h("tokenTextField.isFocused",(function(e){if(!e){if(!this.isEditing)return;var t=this.menu&&this.menu.highlightedItem,n=this.tokenTextField,i=n&&n.textField;t&&i?i.autocompleteItemWasSelected(t):this._shouldStopEditingWhenFocusIsLost&&this.stopEditing()}})),_shouldParse:V.b(!0),pauseParsing:function(){this._shouldParse=!1},resumeParsing:function(){this._shouldParse=!0},_valueParsingObserver:B.h("value",(function(e){if(e&&this._shouldParse){var t=this.parseValueForTokens(e),n=t.length,i=this.isEditing;if(n>1){var r=this._shouldStopEditingWhenFocusIsLost;this._shouldStopEditingWhenFocusIsLost=!1;for(var a=0;a<n-1;a++)this.sendEvent("createNewTokenItemBeforeCurrentToken",this,t[a]);this.value=t[n-1],i&&this.startEditing(),this._shouldStopEditingWhenFocusIsLost=r}}})),_valueChangedObserver:B.h("value",(function(){this.sendEvent("tokenValueChanged")})),parseValueForTokens:function(e){return[]},_isTextFieldDisabled:V.b({readOnly:!0,dependencies:["isEditing"],get:Object.assign((function(){return!this.isEditing}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})})}),Q_=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"labelField"},{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"tokenViews"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"placeholder",attributes:{}}],name:"placeholderNode",classes:["cw-placeholder",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isPlaceholderShowing",truevalue:"show",attributes:{}}]}],name:"inputContainer",classes:["container"]},{type:"ELEMENT",tagname:"textarea",name:"clipboardArea",classes:["hidden-text","cw-input"]}],classes:["cw-tokenizedtextfield-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"BaseTokenizedTextField"},value:V.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],writeDependencies:[],get:function(){return this.hydrateValues()}}),setValue:function(e){this.tokenViews.clear(),this._createNewTokenItemAtIndex(0,e)},hydrateValues:function(e){for(var t="",n=this.tokenViews,i=n.length,r=!1,a=0;a<i;a++){var s=n.objectAt(a);e&&!e(s)||(r&&(t+=", "),t+=s.value,r=!0)}return t},tokenItemViewClass:q_,createHashForTokenItemView:function(){return{parseValueForTokens:this.parseValueForTokens}},lastEditedToken:V.b(),placeholder:void 0,action:"submit",maxLength:null,isDisabled:V.b(!1),isEditable:V.b(!0),isFocusable:V.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign((function(){return!this.isDisabled}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),defaultFocusElement:V.b({dependencies:["element"],writeDependencies:[],readOnly:!1,binding:null,get:Object.assign((function(e){return e||this.element}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),set:Tl.a}),selection:V.b({readOnly:!0,dependencies:["_selectionDidChange"],get:function(){return this.hydrateValues((function(e){return e.isSelected}))}}),select:function(){var e=this.tokenViews,t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing(),0!==e.length&&this.selectTokenRangeInclusive(e.objectAt(0),e.lastItem)},clearSelection:function(){var e=this.tokenViews,t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing();var n=e.length;if(0!==n){this._shouldProcessSelectionEvents=!1;for(var i=0;i<n-1;i++){var r=e.objectAt(i);r.isSelected&&r.deselect()}this._shouldProcessSelectionEvents=!0,e.lastItem.deselect()}},parseValueForTokens:function(e){return e.split(/\s*,\s*/)},tokenViews:V.b(k.c(Wo.b)),_isPlaceholderShowing:V.b({dependencies:["value"],readOnly:!0,get:Object.assign((function(){return!this.value}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_focusObserver:B.h("isFocused","descendantHasFocus",(function(e,t){e||t||this.clearSelection()})),didFocus:function(){var e,t=this.tokenViews,n=this.lastEditedToken,i=n&&n.isEditing,r=this._activeSelectionGroupStack.length>0;i||r||!t||(e=s.a.sharedInstance.isRTL?0:t.length,this._createNewEditingTokenAtIndex(e))},_setSelectedTokensToHiddenTextArea:function(){var e=this.selection;if(e&&e.length>0){var t=this.clipboardArea;this.defaultFocusElement=t,t.value=e,t.select(),this.defaultFocusElement=null}},_shouldProcessSelectionEvents:!0,_activeSelectionGroupStack:k.c(Ai.a),tokenSelected:function(e){this._updateSelectedGroupForSelectedtoken(e),this._shouldProcessSelectionEvents&&(this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea())},_updateSelectedGroupForSelectedtoken:function(e){var t,n=this.tokenViews,i=n.length,r=n.indexOf(e),a=r>0?n.objectAt(r-1):null,s=r<i-1?n.objectAt(r+1):null,o=a&&a.selectionGroup,l=s&&s.selectionGroup;a&&s&&o&&l?(X_(e.selectionGroup),e.selectionGroup=o,1===(t=o.direction)?o.endPoint=1===s.direction?l.endPoint:l.anchor:(o.anchor=1===s.direction?l.endPoint:l.anchor,o.direction=-1)):a&&o?(X_(e.selectionGroup),e.selectionGroup=o,1===(t=o.direction)||0===t?(o.endPoint=e,o.direction=1):o.anchor=e):s&&l?(X_(e.selectionGroup),e.selectionGroup=l,1===(t=l.direction)?l.anchor=e:(l.endPoint=e,l.direction=-1)):e.selectionGroup||(e.selectionGroup=Z_(e,e,0));var c=this._activeSelectionGroupStack;c.remove(e.selectionGroup),c.push(e.selectionGroup)},tokenDeselected:function(e){this._updateSelectedGroupForDeselectedtoken(e),this._shouldProcessSelectionEvents&&(this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea())},_updateSelectedGroupForDeselectedtoken:function(e){if(e.selectionGroup){var t=this.tokenViews,n=t.length,i=t.indexOf(e),r=i>0?t.objectAt(i-1):null,a=i<n-1?t.objectAt(i+1):null,s=e.selectionGroup.direction,o=r&&r.selectionGroup,l=a&&a.selectionGroup;if(r&&a&&o&&l)if(1===s){var c=e.selectionGroup.endPoint;o.endPoint=r,l=Z_(a,c,1)}else{var u=e.selectionGroup.anchor;o.anchor=r,l=Z_(u,a,-1)}else r&&o?1===s?o.endPoint=r:o.anchor=r:a&&l?1===s?l.anchor=a:l.endPoint=a:(this._activeSelectionGroupStack.remove(e.selectionGroup),X_(e.selectionGroup));this._setSelectionGroupDirectionToNeutralIfNeededForToken(r),this._setSelectionGroupDirectionToNeutralIfNeededForToken(a),e.selectionGroup=null}},_setSelectionGroupDirectionToNeutralIfNeededForToken:function(e){if(e){var t=e.selectionGroup;t&&t.anchor===e&&t.endPoint===e&&(t.direction=0)}},tokenButtonWasPressedWithShift:function(e){var t,n,i=this.tokenViews,r=this._activeSelectionGroupStack;if(r.length<1)n=t=i.objectAt(0);else{var a=r.lastItem;t=a.anchor,n=a.endPoint,0!==a.direction&&this.deselectTokenRangeInclusive(t,n)}this.selectTokenRangeInclusive(t,e)},deselectTokenRangeInclusive:function(e,t){this._selectionRangeHelper(e,t,(function(e){e.deselect()})),this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea()},selectTokenRangeInclusive:function(e,t){this._selectionRangeHelper(e,t,(function(e){e.select(!0)})),this._selectionDidChange(),this._setSelectedTokensToHiddenTextArea()},_selectionRangeHelper:function(e,t,n){var i,r=this.tokenViews,a=r.indexOf(e),s=r.indexOf(t),o=a<s?1:-1,l=1===o?a:s,c=1===o?s:a,u=this._shouldProcessSelectionEvents;if(this._shouldProcessSelectionEvents=!1,1===o)for(i=l;i<=c;i++)n(r.objectAt(i));else for(i=c;i>=l;i--)n(r.objectAt(i));this._shouldProcessSelectionEvents=u},pointerDown:function(e){var t=this.inputContainer.children[0],n=this.inputContainer;if(e.target===t||e.target===n){for(var i,r=e.clientY,a=e.clientX,o=this.tokenViews,l=0,c=o.length;l<c;l++){var u=o.objectAt(l).rect;if(!(r>u.bottom)){if(r<u.top)break;if(a<u.left){i=s.a.sharedInstance.isRTL?l+1:l;break}a>u.right&&(i=s.a.sharedInstance.isRTL?l:l+1)}}!isFinite(i)&&c||(this._createNewEditingTokenAtIndex(i||0),e.preventDefault())}},keyDown:function(e){var t=e.which;if(function(e){var t=p.a.sharedInstance;return t.isMac?e.metaKey:!!t.isWindows&&e.ctrlKey}(e)){if(88===t)return this.deleteSelectedTokens(),!0;65===t&&this.select()}else{if(t===ml.a.LEFT||t===ml.a.RIGHT){var n=this._activeSelectionGroupStack.lastItem;if(n){var i,r=this.tokenViews,a=r.length,o=n.endPoint,l=n.direction;if(i=s.a.sharedInstance.isRTL?t===ml.a.RIGHT?-1:1:t===ml.a.RIGHT?1:-1,e.shiftKey){if((u=r.indexOf(o)+i)<0||u>=a)return!0;l===i||0===l?r.objectAt(u).select(!0):o.deselect()}else{var c;c=i===l?n.endPoint:n.anchor;var u=r.indexOf(c)+i;if((-1===i&&!o.isEditing||1===i&&o.isEditing)&&u++,u<0||u>a)return!0;this._createNewEditingTokenAtIndex(u)}}return!0}if(t===ml.a.BACKSPACE||t===ml.a.DELETE)return this.deleteSelectedTokensAndEdit(),!0;if(t===ml.a.ENTER){e.preventDefault();var d=this.findActiveToken();return d&&d.startEditing(),!0}}return!1},findActiveToken:function(){var e=this._activeSelectionGroupStack,t=e&&e.lastItem;return t&&t.endPoint},findRelativeToken:function(e,t){var n=this.tokenViews,i=n.indexOf(e);if(!(i<0))return n.objectAt(i+(t||0))},selectOrDeletePreviousToken:function(e){var t=this.findRelativeToken(e,-1);t&&(t.isSelected?this.deleteCurrentToken(t):t.select())},findTokenToEditAfterFollowingDeletion:function(){var e=this._activeSelectionGroupStack,t=e&&e.lastItem;if(t){var n=t.direction>0?t.anchor:t.endPoint;return this.findRelativeToken(n,-1)}},deleteSelectedTokensAndEdit:function(){var e=this.findTokenToEditAfterFollowingDeletion();this.deleteSelectedTokens(),e?this.createNewEditingTokenAfterCurrentToken(e):this._createNewEditingTokenAtIndex(0)},tokenStartedEditing:function(e){this.lastEditedToken=e},tokenStoppedEditing:function(e){},deletePreviousToken:function(e){var t=this.tokenViews.indexOf(e);--t>=0&&(this._deleteTokenAtIndex(t),e.startEditing())},deleteCurrentToken:function(e){var t=this.tokenViews.indexOf(e);this._deleteTokenAtIndex(t)},deleteSelectedTokens:function(){var e=this.tokenViews,t=e.length,n=this._shouldProcessSelectionEvents;this._shouldProcessSelectionEvents=!1;for(var i=t-1;i>=0;i--)e.objectAt(i).isSelected&&this._deleteTokenAtIndex(i);this._shouldProcessSelectionEvents=n},_deleteTokenAtIndex:function(e){var t=this.tokenViews,n=t.length;if(!(e<0||e>n)){var i=t.objectAt(e);i.isEditing&&i.stopEditing(),i.isSelected&&i.deselect(),t.splice(e,1)}},createNewTokenItemBeforeCurrentToken:function(e,t){var n=this.tokenViews.indexOf(e);return this._createNewTokenItemAtIndex(n,t)},_createNewTokenItemAtIndex:function(e,t){if(t){var n=this._createNewTokenItem();return this.tokenViews.insertAt(e,n),n.startEditing(),n.value=t,n.stopEditing(),n}},createNewEditingTokenAfterCurrentToken:function(e){if(!this._isCreatingToken){var t=this.tokenViews.indexOf(e);return t++,this._createNewEditingTokenAtIndex(t)}},_createNewEditingTokenAtIndex:function(e){this._isCreatingToken=!0;var t=this._createNewTokenItem();return this.tokenViews.insertAt(e,t),t.startEditing(),this._isCreatingToken=!1,t},_createNewTokenItem:function(){var e=this.tokenItemViewClass,t=this.createHashForTokenItemView();return e.create(t)},tokenValueChanged:function(){this._tokenValueChangedSignal()},_tokenValueChangedSignal:B.i(),_selectionDidChange:B.i()}),Y_=[];function Z_(e,t,n){var i=Y_.pop();return i||(i={}),i.anchor=e,i.endPoint=t,i.direction=n,i}function X_(e){e&&(e.anchor=null,e.endPoint=null,e.direction=-2,Y_.push(e))}var J_,ev=we.b("LoadingStatus",{Initial:"Initial",Loading:"Loading",Completed:"Completed",Failed:"Failed"}),tv=Q_.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinner"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_dataSourceFailed",truevalue:"show-error-indicator",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"errorTitle",attributes:{},attribute:"title"}}}},__QUALIFIED_CLASS_NAME__:"TokenizedTextField"},errorTitle:V.b({readOnly:!0,dependencies:["_dataSourceFailed"],get:Object.assign((function(){return this._dataSourceFailed?s.d("ContactsAutocomplete.Error.Generic"):""}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("ContactsAutocomplete.Error.Generic"):""}})}),spinner:V.b({type:Jc.a,defaultValue:k.c(Jc.a.extend({size:20})),downstreamBindings:{isVisible:"(owner)._dataSourceLoading"}}),autocompleteDelegate:V.b(),autocompleteDataSource:V.b(),_dataSourceFailed:V.b({readOnly:!0,dependencies:["autocompleteDataSource.loadingStatus"],get:Object.assign((function(){return this.getPath("autocompleteDataSource.loadingStatus")===ev.Failed}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===ev.Failed}})}),_dataSourceLoading:V.b({readOnly:!0,dependencies:["autocompleteDataSource.loadingStatus"],get:Object.assign((function(){return this.getPath("autocompleteDataSource.loadingStatus")===ev.Loading}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===ev.Loading}})}),menu:V.b({defaultValue:function(){return W_.create({target:this,anchor:this})},strong:!0,downstreamBindings:{listCollection:"(owner).lastEditedToken.tokenTextField._items"}}),width:V.b({readOnly:!0,dependencies:["value"],get:function(){return this.getPath("element.offsetWidth")}}),createHashForTokenItemView:function(){var e=this,t=arguments,n=e.__s._$xY$createHashForTokenItemView.apply(e,t);return Object.assign({},n,{menu:this.bindingFor("menu"),autocompleteDelegate:this.bindingFor("autocompleteDelegate"),autocompleteDataSource:this.bindingFor("autocompleteDataSource")})},__superMap:{_$xY$createHashForTokenItemView:"createHashForTokenItemView"}}),nv=P.a.extend({batchLoad:null,valueToKey:function(e){return e},load:function(e){var t=this,n=this._valueCache.get(e);if(n)return Z.a.resolve(n);var i=this._promiseCache.get(e);if(i)return i;var r=new Promise((function(n,i){var r,a=t._queue;a.push({key:e,resolve:n,reject:i}),1===a.length&&(r=function(){return function(e){var t=e._queue;e._queue=[];var n={};t.forEach((function(e){n[e.key]=e}));var i=t.map((function(e){return e.key}));e.batchLoad(i).then((function(i){k.c(i,Error)?t.forEach((function(t){var n=t.key,r=t.resolve;e.clear(n),r(i)})):i.forEach((function(t){var i=e.valueToKey(t),r=n[i],a=r.resolve;r.reject,a(t)}))}))}(t)},J_||(J_=Z.a.resolve()),J_.then((function(){return X.a(r,0)})))})).then((function(n){return t._promiseCache.clear(e),t._valueCache.set(e,n),n})),a=Z.a.wrapPromise(r);return this._promiseCache.set(e,a),a},loadMany:function(e){var t=this;return Z.a.all(e.map((function(e){return t.load(e)})))},clear:function(e){this._valueCache.delete(e),this._promiseCache.delete(e)},_promiseCache:k.c(Map),_valueCache:k.c(Map),_queue:[],staticMembers:{__QUALIFIED_CLASS_NAME__:"BatchLoader"}}),iv=n(754),rv=iv.a.extend(B.b,{action:function(e,t){var n=e.lookupInfoList;return n.length>0?this.createRequest({lookupInfos:n}).send().then((function(e){var t=e.body,n=t.results;if(K.a(t)&&K.a(n))return n}),(function(e){if(k.c(e,vm.a)){var t=new Error;return t.originalError=e,t}throw e})):Z.a.resolve([])},createRequest:function(e){var t=Kg.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/membershipInfo",queryObject:{dsid:ve.a.currentUser.dsid}});return Yg.create({method:"POST",url:t,body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4,serviceName:"cksharews"})},staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadMembershipInfoHandler"}}),av=nv.extend(B.b,{batchLoad:function(e){return this.loadMembershipInfoHandler.action({lookupInfoList:e.map((function(e){return function(e){return e.startsWith("phoneNumber:")?{type:"phoneNumber",value:e.slice("phoneNumber:".length)}:e.startsWith("email:")?{type:"email",value:e.slice("email:".length)}:null}(e)}))})},loadMembershipInfoHandler:H.d(k.c(rv)),valueToKey:function(e){var t=e.value;return e.type+":"+t},staticMembers:{__QUALIFIED_CLASS_NAME__:"MembershipInfoLoader"}}),sv=Uf.a.extend({label:Uf.c(),field:Uf.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Email"}}),ov=Uf.a.extend({label:Uf.c(),field:Uf.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Phone"}}),lv=Uf.a.extend({height:Uf.c(),width:Uf.c(),x:Uf.c(),y:Uf.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"CropRect"}}),cv=Uf.a.extend({crop:zt.a.toOne({type:lv,embedded:!0}),signature:Uf.c(),url:Uf.c(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Photo"}}),uv=Uf.a.extend({staticMembers:{STATES:H.d({readOnly:!0,get:function(){return we.b("STATES",{NOT_LOADED:0,META_DATA_LOADING:1,META_DATA_LOADED:2,IMAGE_DATA_LOADING:3,IMAGE_DATA_LOADED:4})}}),__QUALIFIED_CLASS_NAME__:"Contact"},contactId:Uf.c({isPrimaryKey:!0}),firstName:Uf.c(),lastName:Uf.c(),middleName:Uf.c(),nickName:Uf.c(),managedAppleId:Uf.c(),normalized:Uf.c(),emailAddresses:zt.a.toMany({type:sv,embedded:!0}),phones:zt.a.toMany({type:ov,embedded:!0}),photo:zt.a.toOne({type:cv,embedded:!0}),loadImageData:function(){return K.a(this.service)||_.b("Unable to load image data for contact without a service"),this.service.loadImageDataFor(this.contactId)},imageData:V.b(),imageDataUrl:V.b({dependencies:["imageData"],readOnly:!0,get:Object.assign((function(){if(this.imageData)return(window.URL||window.webkitURL).createObjectURL(this.imageData)}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return(window.URL||window.webkitURL).createObjectURL(i.internalGet(this,t[0+n]))}})}),service:V.b(),state:H.d({cacheable:!1,readOnly:!0,get:function(){return this.service.getStateFor(this.contactId)}})}),dv=we.b("MatchType",{EMAIL:"EMAIL",PHONE:"PHONE",GROUP:"GROUP",AXMGROUP:"AXMGROUP"}),hv=P.a.extend(B.b,{contact:V.b({readOnly:!0,dependencies:["store","contactPrimaryKey"],get:Object.assign((function(){return this.store?this.store.getModel(this.modelClass,this.contactPrimaryKey):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).getModel(this.modelClass,i.internalGet(this,t[1+n])):null}})}),modelClass:V.b({defaultValue:uv}),matchType:V.b(),matchValue:V.b(),contactPrimaryKey:V.b(),store:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ContactMatch"}}),pv=U_.extend({viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInNetwork",truevalue:"is-in-network",attributes:{}}]}}},isInNetwork:V.b(!1)}),didEnter:function(e){var t=this,n=arguments;t.__s._$95$didEnter.apply(t,n);var i=this.view;i.isInNetwork=void 0;var r,a=this.item.contactMatch,s=a.matchValue,o=a.matchType;if(o===dv.PHONE)r="phoneNumber:"+s;else{if(o!==dv.EMAIL)return;r="email:"+s}var l=this;e.membershipInfoLoader.load(r).then((function(e){if(!pi.a(e,Error)){var t=e.isInNetwork,n=e.value;l.getPath("item.contactMatch.matchValue")===n&&(i.isInNetwork=t)}}))},didExit:function(e){var t=this,n=arguments;t.__s._$am$didExit.apply(t,n),this.view.isInNetwork=!1},__superMap:{_$95$didEnter:"didEnter",_$am$didExit:"didExit"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenuViewItem"}}),fv=W_.extend({listViewItemMappedClass:pv,contentController:V.b({defaultValue:k.c(H_.extend({membershipInfoLoader:V.b(k.c(av))}))}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteMenu"}}),gv={mixinDependencies:[Tn.a],load:Mn.a.define(),cancel:Mn.a.define(),loadingStatus:_u.a.define()},mv={mixinDependencies:[Tn.a,gv],fetchRequiredData:nc.c(Mn.a),autocompleteItemsForText:nc.c(Mn.a)},_v={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u0100":"A","\u0102":"A","\u0104":"A","\u01cd":"A","\u01de":"A","\u01e0":"A","\u01fa":"A","\u0200":"A","\u0202":"A","\u0226":"A","\u1e00":"A","\u1ea0":"A","\u1ea2":"A","\u1ea4":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\u1eac":"A","\u1eae":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\u212b":"A","\u1e02":"B","\u1e04":"B","\u1e06":"B","\xc7":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u1e08":"C","\u010e":"D","\u1e0a":"D","\u1e0c":"D","\u1e0e":"D","\u1e10":"D","\u1e12":"D","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u0228":"E","\u1e14":"E","\u1e16":"E","\u1e18":"E","\u1e1a":"E","\u1e1c":"E","\u1eb8":"E","\u1eba":"E","\u1ebc":"E","\u1ebe":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1ec6":"E","\u1e1e":"F","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u01e6":"G","\u01f4":"G","\u1e20":"G","\u0124":"H","\u021e":"H","\u1e22":"H","\u1e24":"H","\u1e26":"H","\u1e28":"H","\u1e2a":"H","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1e2c":"I","\u1e2e":"I","\u1ec8":"I","\u1eca":"I","\u0134":"J","\u0136":"K","\u01e8":"K","\u1e30":"K","\u1e32":"K","\u1e34":"K","\u0139":"L","\u013b":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u1e3a":"L","\u1e3c":"L","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\xd1":"N","\u0143":"N","\u0145":"N","\u0147":"N","\u01f8":"N","\u1e44":"N","\u1e46":"N","\u1e48":"N","\u1e4a":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\u014c":"O","\u014e":"O","\u0150":"O","\u01a0":"O","\u01d1":"O","\u01ea":"O","\u01ec":"O","\u020c":"O","\u020e":"O","\u022a":"O","\u022c":"O","\u022e":"O","\u0230":"O","\u1e4c":"O","\u1e4e":"O","\u1e50":"O","\u1e52":"O","\u1ecc":"O","\u1ece":"O","\u1ed0":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\u1ed8":"O","\u1eda":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u1ee2":"O","\u1e54":"P","\u1e56":"P","\u0154":"R","\u0156":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e58":"R","\u1e5a":"R","\u1e5c":"R","\u1e5e":"R","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u0218":"S","\u1e60":"S","\u1e62":"S","\u1e64":"S","\u1e66":"S","\u1e68":"S","\u0162":"T","\u0164":"T","\u021a":"T","\u1e6a":"T","\u1e6c":"T","\u1e6e":"T","\u1e70":"T","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u01af":"U","\u01d3":"U","\u01d5":"U","\u01d7":"U","\u01d9":"U","\u01db":"U","\u0214":"U","\u0216":"U","\u1e72":"U","\u1e74":"U","\u1e76":"U","\u1e78":"U","\u1e7a":"U","\u1ee4":"U","\u1ee6":"U","\u1ee8":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u1ef0":"U","\u1e7c":"V","\u1e7e":"V","\u0174":"W","\u1e80":"W","\u1e82":"W","\u1e84":"W","\u1e86":"W","\u1e88":"W","\u1e8a":"X","\u1e8c":"X","\xdd":"Y","\u0176":"Y","\u0178":"Y","\u0232":"Y","\u1e8e":"Y","\u1ef2":"Y","\u1ef4":"Y","\u1ef6":"Y","\u1ef8":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u1e90":"Z","\u1e92":"Z","\u1e94":"Z","\u1fef":"`","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u0101":"a","\u0103":"a","\u0105":"a","\u01ce":"a","\u01df":"a","\u01e1":"a","\u01fb":"a","\u0201":"a","\u0203":"a","\u0227":"a","\u1e01":"a","\u1ea1":"a","\u1ea3":"a","\u1ea5":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\u1ead":"a","\u1eaf":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\u1e03":"b","\u1e05":"b","\u1e07":"b","\xe7":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u1e09":"c","\u010f":"d","\u1e0b":"d","\u1e0d":"d","\u1e0f":"d","\u1e11":"d","\u1e13":"d","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u0229":"e","\u1e15":"e","\u1e17":"e","\u1e19":"e","\u1e1b":"e","\u1e1d":"e","\u1eb9":"e","\u1ebb":"e","\u1ebd":"e","\u1ebf":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1ec7":"e","\u1e1f":"f","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u01e7":"g","\u01f5":"g","\u1e21":"g","\u0125":"h","\u021f":"h","\u1e23":"h","\u1e25":"h","\u1e27":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1e2d":"i","\u1e2f":"i","\u1ec9":"i","\u1ecb":"i","\u0135":"j","\u01f0":"j","\u0137":"k","\u01e9":"k","\u1e31":"k","\u1e33":"k","\u1e35":"k","\u013a":"l","\u013c":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u1e3b":"l","\u1e3d":"l","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\xf1":"n","\u0144":"n","\u0146":"n","\u0148":"n","\u01f9":"n","\u1e45":"n","\u1e47":"n","\u1e49":"n","\u1e4b":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\u014d":"o","\u014f":"o","\u0151":"o","\u01a1":"o","\u01d2":"o","\u01eb":"o","\u01ed":"o","\u020d":"o","\u020f":"o","\u022b":"o","\u022d":"o","\u022f":"o","\u0231":"o","\u1e4d":"o","\u1e4f":"o","\u1e51":"o","\u1e53":"o","\u1ecd":"o","\u1ecf":"o","\u1ed1":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\u1ed9":"o","\u1edb":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u1ee3":"o","\u1e55":"p","\u1e57":"p","\u0155":"r","\u0157":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e59":"r","\u1e5b":"r","\u1e5d":"r","\u1e5f":"r","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0219":"s","\u1e61":"s","\u1e63":"s","\u1e65":"s","\u1e67":"s","\u1e69":"s","\u0163":"t","\u0165":"t","\u021b":"t","\u1e6b":"t","\u1e6d":"t","\u1e6f":"t","\u1e71":"t","\u1e97":"t","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u01b0":"u","\u01d4":"u","\u01d6":"u","\u01d8":"u","\u01da":"u","\u01dc":"u","\u0215":"u","\u0217":"u","\u1e73":"u","\u1e75":"u","\u1e77":"u","\u1e79":"u","\u1e7b":"u","\u1ee5":"u","\u1ee7":"u","\u1ee9":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u1ef1":"u","\u1e7d":"v","\u1e7f":"v","\u0175":"w","\u1e81":"w","\u1e83":"w","\u1e85":"w","\u1e87":"w","\u1e89":"w","\u1e98":"w","\u1e8b":"x","\u1e8d":"x","\xfd":"y","\xff":"y","\u0177":"y","\u0233":"y","\u1e8f":"y","\u1e99":"y","\u1ef3":"y","\u1ef5":"y","\u1ef7":"y","\u1ef9":"y","\u017a":"z","\u017c":"z","\u017e":"z","\u1e91":"z","\u1e93":"z","\u1e95":"z"};function vv(e){for(var t="",n=0,i=e.length;n<i;n++){var r=e.charAt(n);t+=_v[r]||r}return t}var bv=we.b("NameDisplayOrder",{FIRST_LAST:"first,last",LAST_FIRST:"last,first"});function yv(){return wv(s.c())?bv.LAST_FIRST:bv.FIRST_LAST}function wv(e){return"ja-jp"===e||"ko-kr"===e||"zh-cn"===e||"zh-tw"===e||"hu-hu"===e}var Iv=we.b("SortOrder",{FIRST_LAST:"first,last",LAST_FIRST:"last,first"}),Sv=n(1314),Cv=P.a.extend(B.b,{action:"autocompleteItemWasSelected",value:V.b(null),primaryLabel:V.b(null),category:V.b(null),localizedCategory:V.b({readOnly:!0,dependencies:["category"],get:Object.assign((function(){var e=this.category;if(!e)return null;var t="ContactsAutocomplete.Category."+e,n=s.d(t);return n===t?e:n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;var a="ContactsAutocomplete.Category."+r,o=s.d(a);return o===a?r:o}})}),secondaryLabel:V.b(null),previewValue:V.b(null),matchChunks:null,isContactsGroup:!1,isRecentsGroup:!1,recentsGuid:null,isEnabled:!0,disableMenuFlash:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteItem"}}).extend({contactMatch:V.b(),matchedFields:V.b(),isAXMContact:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AutocompleteItem"}}),Ev=["firstName","phoneticFirstName","middleName","lastName","phoneticLastName","nickName","companyName","emailAddresses"],Av=["name"],Ov=["address","name","names"],Tv=["firstName","middleName","lastName","emailAddresses"],Mv=["name","displayName"],Dv=we.b("RequestType",{CONTACTS:5,LOOKUP:6,RECENT_RECIPIENTS:8,DELETE_RECENTS:9});var Pv="ContactsAutocomplete.PreviewTemplate.",Lv=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return function(){return i.length?e.apply(void 0,i)(t.apply(void 0,arguments)):t.apply(void 0,arguments)}};function Rv(e,t){return function(n){return n.replace(e,t)}}var xv=Lv(Rv("\u201c\u201d",""),Rv(/\(\s*\)/g,""),Rv(/\s+/g," ")),Nv=Lv(xv,Rv(/"/g,'\\"'),Rv(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2')),Fv=we.b("SearchEntityTypes",{PERSON:"PERSON",CLASS:"CLASS"}),Vv=we.b("AxmOrgType",{Education:"SCHOOL",Business:"BUSINESS"}),kv=we.b("AxmServerErrors",{FETCH_MEMBERS_FAILURE:"FETCH_MEMBERS_FAILURE",SEARCH_FAILURE:"SEARCH_FAILURE"}),Bv={mixinDependencies:[Tn.a,B.b],isRecentsEnabled:_u.a.define(),isAppleIdManagedAppleId:_u.a.define(),isAXMServiceAvailable:_u.a.define(),createRequest:Mn.a.define()},jv=P.a.extend(Bv,{isRecentsEnabled:V.b({readOnly:!0,dependencies:ve.a.bindingFor("authBag.servicesInfo"),get:function(){return!!ve.a.getPath("authBag.servicesInfo.mail")}}),isAppleIdManagedAppleId:V.b({readOnly:!0,get:function(){return ve.a.getPath("authBag.user.isManagedAppleID")}}),isAXMServiceAvailable:V.b({readOnly:!0,dependencies:ve.a.bindingFor("authBag.servicesInfo"),get:function(){return!!ve.a.getPath("authBag.servicesInfo.maidautocompletews")}}),createRequest:function(e,t,n){var i=n.queryObject,r=n.method,a=n.body,s=n.headers,o=n.timeout,l=n.shouldFinalizeWithResponse,c=Kg.create({pathname:t,serviceName:e,queryObject:i});return Yg.create({url:c,serviceName:e,method:r,body:a,headers:s,timeout:o,useCredentialsIfCrossOrigin:!0,shouldFinalizeWithResponse:l})},staticMembers:{__QUALIFIED_CLASS_NAME__:"COSKDelegate"}}),Uv=P.a.extend(B.b,mv,{platformDelegate:V.b(k.c(jv)),isRecentsEnabled:V.b({readOnly:!0,dependencies:["platformDelegate.isRecentsEnabled"],get:Object.assign((function(){return this.platformDelegate.isRecentsEnabled}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isAppleIdManagedAppleId:V.b({readOnly:!0,dependencies:["platformDelegate.isAppleIdManagedAppleId"],get:Object.assign((function(){return this.platformDelegate.isAppleIdManagedAppleId}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),isAXMServiceAvailable:V.b({readOnly:!0,dependencies:["platformDelegate.isAXMServiceAvailable"],get:Object.assign((function(){return this.platformDelegate.isAXMServiceAvailable}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),axmOrgType:H.d(),_axmLimitPerResponse:H.d({defaultValue:1e3}),_currentSearchPrefix:H.d({type:String}),load:function(){this.contactsDataIsLoaded||(this._axmDataCompletionStatus={},this._failedNetworkRequestCount=0,this.sendContactsRequest(),this.isRecentsEnabled&&this.sendRecentRecipientsRequest({method:"list",type:Dv.RECENT_RECIPIENTS}))},cancel:function(){},loadingStatus:V.b({readOnly:!0,dependencies:["_loadingStatus"],get:Object.assign((function(){return this._loadingStatus}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),fetchRequiredData:function(e){e=e.trim();var t,n=this.isAppleIdManagedAppleId,i=this.isAXMServiceAvailable;return this._currentSearchPrefix=e,!this.hasCompleteAXMDataForSearchString(e)&&n&&i?t=this.sendAXMContactsRequest(e):(t=Z.a.create()).resolve(),t},autocompleteItemsForText:function(e){e=e.trim();var t=[],n=this.dataSourcesToSearch;return 0!==n.length&&(t=this.findCompletionsInLoadedData(e,n)||[]),Bf.a.create(t)},sendContactsRequest:function(e){this.set("contactsRequestIsOutstanding",!0),this.set("contactsRequestHasCompleted",!1),this.set("contactsDataIsLoaded",!1),null!==this._lastSyncToken&&null!==this._lastPrefToken?this.set("syncTokenInUse",!0):this.set("syncTokenInUse",!1);var t={onComplete:"contactsRequestCompleted",onSuccess:"contactsRequestSucceeded",type:Dv.CONTACTS};if(this.get("syncTokenInUse")&&!0===e){var n=this.get("syncInterval");if(this._skipSyncCount<n)return this.set("contactsRequestIsOutstanding",!1),this.set("contactsRequestHasCompleted",!0),this.set("contactsDataIsLoaded",!0),void this._skipSyncCount++}var i=s.c();this.createContactsRequest(this._lastSyncToken,this._lastPrefToken,this._sortOrder,i,this.isPhoneNumberSupportEnabled).send().then(function(e){this.requestDidComplete(e,t)}.bind(this)).catch(function(e){this.requestDidComplete(e,t)}.bind(this)),this._skipSyncCount=0},fetchAXMGroupMembers:function(e,t){var n=this,i=this.createAXMGroupsRequest(e);return this.axmContactsRequestOutstanding=!0,this.axmContactsRequestHasCompleted=!1,i.send().then((function(e){return n.fetchAXMGroupMembersSucceeded(e,t)}),(function(e){return n.fetchAXMGroupMembersFailed(e,t)}))},fetchAXMGroupMembersSucceeded:function(e,t){var n=this,i=e.body,r=[];this._updateAXMContactToMatchAddressBookContact(i),this._addRecordsToStore(uv,i,"contactId"),this.axmContactsRequestOutstanding=!1,this.axmContactsRequestHasCompleted=!0,i.forEach((function(e){var t=e.emailAddresses[0],i=n._autocompleteResultsForMatchedContact(e,[],{type:dv.EMAIL,field:t.field,label:t.label});i&&r.push(i)})),t.resolve({items:r})},fetchAXMGroupMembersFailed:function(e,t){this.axmContactsRequestOutstanding=!1,this.axmContactsRequestHasCompleted=!0,this._failedNetworkRequestCount+=1,t.resolve({error:kv.FETCH_MEMBERS_FAILURE})},contactsRequestIsOutstanding:V.b(!1),contactsRequestHasCompleted:H.d(!1),contactsDataIsLoaded:V.b(!1),axmContactsRequestOutstanding:V.b(!1),axmContactsRequestHasCompleted:V.b(!1),sendRecentRecipientsRequest:function(e){this.set("recentsRequestIsOutstanding",!0),this.set("recentsRequestHasCompleted",!1),this.set("recentsDataIsLoaded",!1);var t={onComplete:"recentRecipientsRequestCompleted",onSuccess:"recentRecipientsRequestSucceeded",type:e.type},n=new Date;this._recentsReqCount||(this._recentsReqCount=1);var i=n.getTime()+"/"+this._recentsReqCount++,r=e.method,a=e.recentsGuids;this.createRecentRecipientsRequest(i,r,a).send().then(function(e){this.requestDidComplete(e,t)}.bind(this)).catch(function(e){this.requestDidComplete(e,t)}.bind(this))},_axmDataCompletionStatus:H.d({type:Object,defaultValue:{}}),sendAXMContactsRequest:function(e){var t=this,n=[{entityType:Fv.PERSON},{entityType:Fv.CLASS}];return this.axmContactsRequestOutstanding=!0,this.axmContactsRequestHasCompleted=!1,this.createAXMContactsRequest(e,n).send().then((function(n){return t.axmContactsRequestSucceeded(n,e)}),(function(n){return t.axmContactsRequestFailed(n,e)})).finally((function(){t.axmContactsRequestHasCompleted=!0,t.axmContactsRequestOutstanding=!1}))},axmContactsRequestSucceeded:function(e,t){if(t!==this._currentSearchPrefix)return Z.a.resolve({errorCode:"Search Text Changed"});var n=this.parseAXMContactsResponse(e),i=n.contactsHash,r=n.classesHash,a={};if(i){var s=i.contacts,o=i.hasMoreData;s&&(this._dataCache.addRecords(s,"Contacts",Tv),this._addRecordsToStore(uv,s,"contactId")),a.AXMContacts=!o}r&&(r.classes&&this._dataCache.addRecords(r.classes,"Groups",Mv),a.AXMGroups=!r.hasMoreData),this._axmDataCompletionStatus[t]=a},axmContactsRequestFailed:function(e,t){return this._failedNetworkRequestCount+=1,Z.a.resolve({errorCode:kv.SEARCH_FAILURE})},hasCompleteAXMDataForSearchString:function(e){var t=!1;for(var n in this._axmDataCompletionStatus)if(0===e.indexOf(n)){for(var i in t=!0,this._axmDataCompletionStatus[n])t=t&&this._axmDataCompletionStatus[n][i];if(t)break}return t},recentsRequestIsOutstanding:H.d(!1),recentsRequestHasCompleted:H.d(!1),recentsDataIsLoaded:H.d(!1),allDataIsLoadedForQuery:H.d(!1),dataSourcesToSearch:H.d({type:Ai.a,get:function(){var e=["Recents","Contacts","Groups"];return this.isRecentsEnabled||e.shift(),e}}),createContactsRequest:function(e,t,n,i,r){var a={locale:i.replace(/(.*)-(.*)$/,(function(e,t,n){return t+"_"+n.toUpperCase()})),order:n.value,includePhoneNumbers:r};return null!==e&&null!==t&&(a.syncToken=e,a.prefToken=t),this.platformDelegate.createRequest("contacts","/co/addressbook",{queryObject:a})},createRecentRecipientsRequest:function(e,t,n){var i={jsonrpc:"2.0",id:e,method:t};return n&&(i.params={guids:[n]}),this.platformDelegate.createRequest("mail","/wm/recents",{body:i,timeout:this.INTERVAL_XHR_TIMEOUT_FOR_RECENTS_REQUEST,method:kn.a.POST,shouldFinalizeWithResponse:function(e,t,n){var i=self._redirectCountForTimeout,r=n-i,a=2===Math.floor(e.status/100)&&self.REDIRECT_RESPONSE_TEXT===e.encodedBody,s=e.status===kn.b.TIMEDOUT,o=a&&r<self.MAX_REDIRECT,l=s&&i<self.MAX_REDIRECT_FOR_TIMEOUT;if(o||l){l&&self._redirectCountForTimeout++;var c="\n                    Rejecting server response for mailws recents,\n                        Status: "+status+"\n                        ResponseText: "+e.encodedBody+"\n                        Redirect Count: "+r+"\n                        Timeout Redirect Count: "+i+"\n                ";return u.b.warn(c),t(),!1}if(a||s){var d="\n                        Giving up on retries for mailws recents,\n                            Status: "+status+"\n                            ResponseText: "+e.encodedBody+"\n                            Redirect Count: "+r+"\n                            Timeout Redirect Count: "+i+"\n                    ";u.b.warn(d)}return self._redirectCountForTimeout=0,!0},headers:{"Content-Type":"text/plain"}})},createAXMContactsRequest:function(e,t){if(t){var n=this._axmLimitPerResponse,i=[];return t.forEach((function(t){var r=t.entityType,a=t.cursor;i.push({entityType:r.value,limit:n,text:e,viewType:"SUMMARY",cursor:a})})),this.platformDelegate.createRequest("maidautocompletews","/maid/v1/web/directory/search",{body:i,method:kn.a.POST,timeout:this.INTERVAL_XHR_TIMEOUT_FOR_AXMSEARCH_REQUEST,headers:{"Content-Type":"text/plain"}})}_.b("Cannot create AXM Contacts Request without searchEntities")},createAXMGroupsRequest:function(e){var t={id:e,entityType:Fv.CLASS.value,viewType:"SUMMARY"};return this.platformDelegate.createRequest("maidautocompletews","/maid/v1/web/members/fetch",{method:kn.a.POST,timeout:this.INTERVAL_XHR_TIMEOUT_FOR_AXMSEARCH_REQUEST,body:t,headers:{"Content-Type":"text/plain"}})},clearLoadedData:function(){this.recentsRequestIsOutstanding=!1,this.recentsRequestHasCompleted=!1,this.contactsRequestIsOutstanding=!1,this.contactsRequestHasCompleted=!1,this.addContactRequestHasCompleted=!1,this.addContactRequestHasFailed=!1,this.recentsDataIsLoaded=!1,this.contactsDataIsLoaded=!1,this.allDataIsLoadedForQuery=!1,this.axmContactsRequestOutstanding=!1,this.axmContactsRequestHasCompleted=!1,this._dataCache=null,this._lastSyncToken=null,this._lastPrefToken=null,this.dataRefreshNeeded=!0,this._axmDataCompletionStatus={}},findCompletionsInLoadedData:function(e,t){if(!this._dataCache)return[];t&&0!==t.length||_.b("No dataSources provided to search");var n=this._dataCache.findCompletionsInLoadedData(e,t);return this._autocompleteResultsForMatches(e,n)},isSearchable:H.d({readOnly:!0,dependencies:["contactsDataIsLoaded","recentsDataIsLoaded"],get:Object.assign((function(){return this.contactsDataIsLoaded||this.recentsDataIsLoaded}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),delegate:null,syncInterval:H.d(10),isRecentsGroupsEnabled:H.d(!0),isPhoneNumberSupportEnabled:V.b(!1),syncTokenInUse:H.d(!1),dataRefreshNeeded:H.d(!1),__dummy_prefix__:"__dummy_prefix__",_contactsStore:V.b(k.c(jo.a)),resolveRecentRecipientWithLoadedContacts:function(e,t){if(!e)return[];var n,i,r,a;if(r=e.length,a=t.length,r<1||a<1)return[];for(n=0;n<r;n++)for(i=0;i<a;i++)if(e[n].secondaryLabel===t[i].secondaryLabel){e[n].previewValue=t[i].previewValue,e[n].primaryLabel=t[i].primaryLabel,e[n].secondaryLabel=t[i].secondaryLabel,e[n].value=t[i].value,e[n].contactMatch=t[i].contactMatch,t.splice(i,1),a=t.length;break}},_autocompleteResultsForMatches:function(e,t){var n,i,r,a,s,o,l,c,u,d,h,p=[],f=[],g=[],m={},_=!0,v=this.getPath("delegate.autocompleteField");for(o in v&&(_=v.get("shouldMatchGroups")),t)if(t.hasOwnProperty(o)&&(d=t[o].rec,c=t[o].fields,d.address?h="Recents":d.contactId||d.managedAppleId?h="Contacts":(d.groupId||d.id)&&(h="Groups"),u=this._dataCache.getRecordForGuid(o)))if(l=null,"Recents"===h){if(u.isGroupMemberOnly||(l=this._autocompleteResultsForMatchedRecent(u,c),f.push(l)),!0===this.isRecentsGroupsEnabled&&(n=u.isMemberOf)&&n.length>0)for(i=n.length,s=0;s<i;s++)r=n[s].guid,a={address:u.address,rec:u,matchedFields:c},m[r]||(m[r]=[]),m[r].push(a)}else if("Contacts"===h){var b,y,w,I=Object.keys(c).length,S=u.emailAddresses,C=u.phones,E=c.emailAddresses;if(1===I&&E)for(y in E)E.hasOwnProperty(y)&&(w=E[y],b=S[y],l=this._autocompleteResultsForMatchedContact(u,c,{type:dv.EMAIL,field:b.field,label:b.label},w),p.push(l));else{for(s=(S?S.length:0)-1;s>=0;--s){b=S[s],w=E?E[s]:null;var A={type:dv.EMAIL,field:b.field,label:b.label};l=this._autocompleteResultsForMatchedContact(u,c,A,w),p.push(l)}for(s=(this.isPhoneNumberSupportEnabled&&C?C.length:0)-1;s>=0;--s){var O=C[s],T={type:dv.PHONE,field:O.field,label:O.label};l=this._autocompleteResultsForMatchedContact(u,c,T,null),p.push(l)}}}else{if(!_||"Groups"!==h)continue;l=this._autocompleteResultsForMatchedGroup(u,c),p.push(l)}for(r in m)m.hasOwnProperty(r)&&(l=this._autocompleteResultForMatchedRecentsGroup(m[r],r))&&g.push(l);return this.resolveRecentRecipientWithLoadedContacts(f,p),f.length>0&&(p=(f=this._sortRecentsResultsByTimeStamp(f)).concat(p)),g.length>0&&(g=this._sortRecentsResultsByTimeStamp(g),p=p.concat(g)),p},_autocompleteResultsForMatchedContact:function(e,t,n,i){return function(e,t,n,i,r,a){var o=n.type,l=n.label,c=n.field,d=function(e,t){if(e.isCompany)return e.companyName;var n=e.firstName||"",i=e.lastName||"";return n||i?Ne({givenName:n,familyName:i}):void 0}(e),h=c,p=function(e,t,n,i,r){var a,s,o=e.firstName||"",l=e.lastName||"",c=e.middleName||"",d=e.nickName||"",h=e.companyName||"",p=t.firstName,f=t.lastName,g=t.nickName,m=t.middleName,_=t.companyName,v=p?p.length:0,b=f?f.length:0,y=g?g.length:0,w=m?m.length:0,I=_?_.length:0,S=n?n.length:0,C=o+" "+l;if(xe(o)&&xe(l)&&(C=""+l+o),r===bv.LAST_FIRST){var E=[l,o];o=E[0],l=E[1];var A=[f,p];p=A[0],f=A[1];var O=[b,v];v=O[0],b=O[1]}if(e.isCompany)if(I)a=Pv+"MatchCompanyByCompanyName",s={companyName:_+h.substr(I),firstAndLastNameInProperOrder:C,contactValue:i};else if(v)a=Pv+"MatchCompanyByFirstName",s={companyName:h,firstAndLastNameInProperOrder:p+o.substr(v)+" "+l,contactValue:i};else if(b)a=Pv+"MatchCompanyByLastName",s={companyName:h,lastAndFirstNameInProperOrder:f+l.substr(b)+" "+o,contactValue:i};else if(y)a=Pv+"MatchCompanyByNickName",s={nickName:g+d.substr(y),firstAndLastNameInProperOrder:C,companyName:h,contactValue:i};else if(S)a=Pv+"MatchCompanyByContact",s={companyName:h,firstAndLastNameInProperOrder:C,contactValue:n+i.substr(S)};else if(w)a=Pv+"MatchCompanyByMiddleName",s={middleName:m+c.substr(w),companyName:h,firstAndLastNameInProperOrder:C,contactValue:i};else{for(var T in u.b.warn("Don't know what was matched in autocomplete. This case should be handled better."),a="",s=[],t)t.hasOwnProperty(T)&&(a+="%@ ",s.push(t[T]));a+="(%@)",s.push(h)}else if(v&&v===o.length&&b)a=Pv+"MatchPersonByFirstName",s={firstAndLastNameInProperOrder:p+" "+(f+l.substr(b)),contactValue:i};else if(b&&b===l.length&&v)a=Pv+"MatchPersonByLastName",s={lastAndFirstNameInProperOrder:f+" "+(p+o.substr(v)),contactValue:i};else if(y&&y===d.length&&b)a=Pv+"MatchPersonByNickAndLastName",s={nickName:g+d.substr(y),lastName:f+l.substr(b),contactValue:i};else if(v)a=Pv+"MatchPersonByFirstName",s={firstAndLastNameInProperOrder:p+o.substr(v)+" "+l,contactValue:i};else if(b)a=Pv+"MatchPersonByLastName",s={lastAndFirstNameInProperOrder:f+l.substr(b)+" "+o,contactValue:i};else if(y)a=Pv+"MatchPersonByNickName",s={nickName:g+d.substr(y),firstAndLastNameInProperOrder:C,contactValue:i};else if(I)a=Pv+"MatchPersonByCompanyName",s={companyName:_+h.substr(I),firstAndLastNameInProperOrder:C,contactValue:i};else if(S)a=Pv+"MatchPersonByContact",s={firstAndLastNameInProperOrder:C,contactValue:n+i.substr(S)};else if(w)a=Pv+"MatchPersonByMiddleName",s={middleName:m+c.substr(w),firstAndLastNameInProperOrder:C,contactValue:i};else{for(var M in u.b.warn("Don't know what was matched in autocomplete. This case should be handled better."),a="",s={},t)t.hasOwnProperty(M)&&(a+="%{"+M.toString()+"} ",s[M]=t[M]);a=a.trim()}return{previewFormat:a,previewOrdering:s}}(e,t,i,c,a),f=p.previewFormat,g=p.previewOrdering,m=function(e,t){var n=t.field;if(e.isCompany)return{valueFormat:"%{companyName} <%{contactValue}>",valueOrdering:{companyName:e.companyName||"",contactValue:n}};var i=e.firstName||"",r=e.lastName||"";return{valueFormat:xe(i)&&xe(r)?"%{lastName}%{firstName} <%{contactValue}>":"%{firstName} %{lastName} <%{contactValue}>",valueOrdering:{firstName:i,lastName:r,contactValue:n}}}(e,n),_=m.valueFormat,v=m.valueOrdering,b=xv(s.d(f,g)),y=Nv(ne.a(_,v)),w=e.contactId,I=!!e.managedAppleId;return Cv.create({primaryLabel:d,secondaryLabel:h,value:y,previewValue:b,category:l,isAXMContact:I,contactMatch:k.c(hv,{store:r,contactPrimaryKey:w,matchType:o,matchValue:c}),matchedFields:t})}(e,t,n,i,this._contactsStore,this._nameDisplayOrder)},_autocompleteResultsForMatchedRecent:function(e,t){var n,i,r,a,o,l,c,u=e.address;Array.isArray(e.timestamps)||(e.timestamps=[]);var d=e.name;-1===d.indexOf(",")&&(d=d.replace(/^"/,"").replace(/"$/,"")),d||(d=""),n=d,i=u;var h=t.name;t.names&&(h=t.names);var p=h?h.length:0,f=t.address,g=f?f.length:0;d||(d=u,n=u),h?(r="ContactsAutocomplete.PreviewTemplate.MatchRecentByName",o={matchedName:h+this._matchedNameLabelFromMatchedNamePrefix(d,h).substr(p),emailAddress:u}):(r="ContactsAutocomplete.PreviewTemplate.MatchRecentByEmailAddress",o={matchedEmail:f+u.substr(g),name:d}),a={name:d,emailAddress:u},l=ne.a("%{name} <%{emailAddress}>",a),c=s.d(r,o),l=l.replace("\u201c\u201d",""),c=c.replace("\u201c\u201d",""),l=l.replace(/\(\s*\)/g,""),c=c.replace(/\(\s*\)/g,""),l=l.replace(/\s+/g," "),c=c.replace(/\s+/g," "),l=l.replace(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2');var m=this._contactsStore,_=e.recentsGuid;return Cv.create({primaryLabel:n,secondaryLabel:i,value:l,previewValue:c,timestamps:e.timestamps,category:s.d("ContactsAutocomplete.Category.RECENTS"),contactMatch:k.c(hv,{matchType:dv.EMAIL,matchValue:u,contactPrimaryKey:_,store:m}),recentsGuid:e.recentsGuid,matchedFields:t})},_autocompleteResultForMatchedRecentsGroup:function(e,t){var n,i,r,a,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A,O,T=[],M="",D=[],P=[],L=this._dataCache.guidToRecordMapping;if(!(n=L[t]))return null;for(Array.isArray(n.timestamps)||(n.timestamps=[]),o=e.length,c=(a=n.members).length,f=(r=e[0]).matchedFields,g=(h=r.rec).name,v=h.address,g=g.replace(/"/g,""),f.address?g=""!==g?v+" ("+g+")":v:(i=f.name?f.name:f.names,g=this._matchedNameLabelFromMatchedNamePrefix(g,i)),D.push(g),O=1;O<o;O++)h=e[O].rec,f=e[O].matchedFields,g=h.name,v=h.address,""===g&&(g=v),g=g.replace(/"/g,""),D.push(g);m=D.join(", "),l=e.map((function(e){return e.address}));var R=[];for(O=0;O<c;O++)y=(u=a[O]).name,w=u.address,M=(I=L[u.guid])&&I.names&&""!==I.names[0]?I.names[0]:""===y?w:y,-1===l.indexOf(w)&&(M=M.replace(/"/g,"").replace(/,/g,""),T.push(M)),S=[y=y.replace(/^"/,"").replace(/"$/,""),w],p=(p=(p=(p=(p=ne.a.apply("%@ <%@>",S)).replace("\u201c\u201d","")).replace(/\(\s*\)/g,"")).replace(/\s+/g," ")).replace(/([^,<>]*[,<>].*)( <[^<]*)$/,'"$1"$2').trim(),R.push(hv.create({matchType:dv.EMAIL,matchValue:w})),P.push(p);return T.length>0?(T.length>1&&(m+=", "),d=T.pop(),_=s.d("ContactsAutocomplete.GroupMembers",{emailAddresses:T.join(", "),lastEmailAddress:d})):(d=D.pop(),m=s.d("ContactsAutocomplete.GroupMembers",{emailAddresses:D.join(", "),lastEmailAddress:d}),_=""),A=C=m+_,E=P.join(", "),b=[m,_],Cv.create({matchChunks:b,primaryLabel:C,secondaryLabel:void 0,value:E,previewValue:A,timestamps:h.timestamps,isRecentsGroup:!0,recentsGuid:t,contactMatch:k.c(hv,{matchType:dv.GROUP,matchValue:R})})},_matchedNameLabelFromMatchedNamePrefix:function(e,t){t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");var n,i,r=new RegExp(t,"i"),a=new RegExp("[\\s,]"+t,"i");if(0===e.search(r))return e;var s=e.search(a);return s>-1?(i=e.substring(0,s),n=e.substring(s+1)+" "+i):n=t+" ("+e+")",n},_autocompleteResultsForMatchedGroup:function(e,t){var n,i,r,a=this,o=t.name,l=o.length,c=e.name,u=e.displayName,d=e.id,h=e.rosterCount,p=e.contactIds,f=null;p?n=p.length:void 0!==h&&(n=h,i=Z.a.create(),r=Z.a.create(),i.then((function(){a.fetchAXMGroupMembers(d,r)})),f=c);var g,m=e.resolvedContacts,_=this._contactsStore;if(m){g=[];for(var v=[],b=m.length,y=0;y<b;++y){var w=m[y],I=w.firstName;I||(I="");var S,C=w.lastName;C||(C="");var E=w.emailAddresses;E&&(S=Hv(E).field);var A,O,T,M=w.phones;if(M&&(S=Hv(M).field),K.a(S)&&""!==S)A=S,O=dv.EMAIL;else{if(!this.isPhoneNumberSupportEnabled||!K.a(void 0))continue;A=void 0,O=dv.PHONE}T=(T=(T=(T=this._nameDisplayOrder===bv.LAST_FIRST?C+" "+I+" <"+A+">":I+" "+C+" <"+A+">").replace("\u201c\u201d","")).replace(/\(\s*\)/g,"")).replace(/\s+/g," "),v.push(T),g.push(hv.create({matchType:O,matchValue:A,contactPrimaryKey:w.contactId,store:_,matchedFields:t}))}f=v.join(", ")}return Cv.create({primaryLabel:c,secondaryLabel:1===n?s.d("ContactsAutocomplete.GroupSecondaryLabel.Single"):s.d("ContactsAutocomplete.GroupSecondaryLabel.Multiple",{numberOfContacts:n}),category:u,value:f,previewValue:o+c.substr(l)+" ("+n+")",isContactsGroup:!0,isAXMContact:void 0!==e.rosterCount,contactMatch:k.c(hv,{matchType:dv.GROUP,matchValue:g}),groupResolvePromise:i,contactMatchItemsPromise:r})},init:function(){var e=this,t=arguments;e.__s._$IYQ$init.apply(e,t),this._dataCache=Sv.DataCache.create()},_dataCache:null,_addRecordsToStore:function(e,t,n){var i=this._contactsStore;t.forEach((function(t){var r=jo.a.getStoreIdForPrimaryKey(e,t[n]);i.hasDataFor(r)||i.writeData(r,t)}))},clearLoadingStatus:function(){this.isAppleIdManagedAppleId&&(this.axmContactsRequestOutstanding=!1,this.axmContactsRequestHasCompleted=!1)},_nameDisplayOrder:V.b({readOnly:!0,get:function(){return yv()}}),_sortOrder:V.b({readOnly:!0,get:function(){return wv(s.c())?Iv.FIRST_LAST:Iv.LAST_FIRST}}),_lastSyncToken:null,_lastPrefToken:null,_skipSyncCount:0,_redirectCountForTimeout:0,_redirectCount:0,MAX_REDIRECT:4,MAX_REDIRECT_FOR_TIMEOUT:1,REDIRECT_RESPONSE_TEXT:"<h1>Redirect</h1>",INTERVAL_XHR_TIMEOUT_FOR_RECENTS_REQUEST:3e4,INTERVAL_XHR_TIMEOUT_FOR_AXMSEARCH_REQUEST:2e3,requestDidComplete:function(e,t){this._requestDidComplete(e,t)},_requestDidComplete:function(e,t){var n=t.type,i=t.onComplete;i&&this[i].call(this,e,n);var r,a,s,o=!1,l=e.status,c=!1;if(200!==100*Math.floor(l/100))if(o=!0,n===Dv.CONTACTS)switch(l){case 420:case 422:c=!0}else Dv.RECENT_RECIPIENTS;if(r=e.encodedBody)if(0===r.indexOf("<"))o=!0,s="ContactsAutocomplete.Error.Generic";else if(c)s=r;else if("not found"===r)o=!0,s="ContactsAutocomplete.Error.NotFound";else{try{a=e.body}catch(aY){o=!0}a?a.errorValue&&(s=a.message,o=!0):o=!0}else o=!0;if(n===Dv.CONTACTS&&!o){var d=this.get("syncTokenInUse");a.syncToken?(this._lastSyncToken=a.syncToken,a.prefToken?this._lastPrefToken=a.prefToken:(o=!0,this._lastPrefToken=null,u.b.warn("Autocomplete contacts response error: no prefToken found."))):d&&"{}"===r||(o=!0,this._lastSyncToken=null,u.b.warn("Autocomplete  contacts response error:  no sync token found.")),!d&&this._lastSyncToken&&this._lastPrefToken&&this.sendContactsRequest()}if(o)if(c)this._lastSyncToken=null,this._lastPrefToken=null,this.sendContactsRequest();else{s||(s="ContactsAutocomplete.Error.Generic"),a&&u.b.warn(ne.a("Autocomplete server error: %{err}",{err:l}));var h=t.onError;h?this[h].call(this,e,n,s):this.requestDidError(e,n,s)}else{var p=t.onSuccess;p?this[p].call(this,a,n):this.requestDidSucceed(n)}},requestDidSucceed:function(e){},_failedNetworkRequestCount:V.b(0),requestDidError:function(e,t,n){t===Dv.RECENT_RECIPIENTS?this.set("recentsDataIsLoaded",!1):this.set("contactsDataIsLoaded",!1);var i=n;if(!i)try{i=e.body}catch(aY){i="ContactsAutocomplete.Error.Generic"}this._failedNetworkRequestCount+=1},recentRecipientsRequestCompleted:function(){this.set("recentsRequestIsOutstanding",!1)},recentRecipientsRequestSucceeded:function(e,t){if(this.set("recentsRequestHasCompleted",!0),t===Dv.RECENT_RECIPIENTS){if(e&&e.result){this._dataCache.addRecords(e.result,"Recents",Ov);var n=e.result.filter((function(e){return"CoreMail.RecentRecipient"===e.type}));this._addRecordsToStore(uv,n,"recentsGuid")}this.set("recentsDataIsLoaded",!0),this.set("allDataIsLoadedForQuery",!0)}else this.set("recentsRequestHasCompleted",!1)},contactsRequestCompleted:function(){this.set("contactsRequestIsOutstanding",!1)},contactsRequestSucceeded:function(e,t){this.set("contactsRequestHasCompleted",!0);var n=this._dataCache;e&&e.contacts&&(n.addRecords(e.contacts,"Contacts",Ev),n.addRecords(e.groups,"Groups",Av),this._addRecordsToStore(uv,e.contacts,"contactId")),this.set("contactsDataIsLoaded",!0),this.set("allDataIsLoadedForQuery",!0)},parseAXMContactsResponse:function(e){var t=this;this.AXMReceipientsHasCompleted=!1;var n=e.body,i=e.headers;if(this._setAXMOrgType(i),n){var r=!1,a={};return n.forEach((function(e){var n=e.type;if(n===Fv.PERSON.value){var i=e.personList,s=e.hasMoreData,o=e.cursor,l=e.totalCount;r=s,t._updateAXMContactToMatchAddressBookContact(i),a.contactsHash={contacts:i,hasMoreData:s,cursor:o,totalCount:l}}else if(n===Fv.CLASS.value){var c=e.classList,u=e.hasMoreData,d=e.cursor,h=e.totalCount;r=r||u,a.classesHash={classes:c,hasMoreData:u,cursor:d,totalCount:h}}})),r||(this.AXMReceipientsDataIsLoaded=!0),a}},_haveDelegatePerform:function(e,t,n){var i=this.get("delegate");return!!i&&i[e](t,n)},_indexForString:function(e,t){if(0===e.length)return 0;for(var n,i,r=!1,a=0,s=e.length-1;!r&&a<=s;){n=!1;var o=e[i=Math.floor((a+s)/2)];o===t?r=!0:o<t?(a=i+1,n=!0):s=i-1}var l=i;return n&&++l,l},_updateAXMContactToMatchAddressBookContact:function(e){var t=this;e&&e.forEach((function(e){e.contactId=e.managedAppleId,e.emailAddresses=[{label:s.d("ContactsAutocomplete.Category."+t.axmOrgType.value),field:e.managedAppleId}]}))},_sortRecentsResultsByTimeStamp:function(e){return e.length>1&&e.sort((function(e,t){var n=e.timestamps.length,i=t.timestamps.length;if(n>i)return-1;if(n<i)return 1;e.timestamps.sort((function(e,t){return t-e})),t.timestamps.sort((function(e,t){return t-e}));var r=e.timestamps[n-1],a=t.timestamps[i-1];return r===a?0:r>a?-1:1})),e},_setAXMOrgType:function(e){var t=e.match("X-ADM-OrgType".toLowerCase()+": (.*)");t&&2===t.length||(t=e.match("X-ADM-OrgType: (.*)"))&&2===t.length?this.axmOrgType=Vv[t[1]]:_.b("OrgType header is missing from AXM Response",{headers:e})},_loadingStatus:V.b(),_updateLoadingStatus:B.h("_failedNetworkRequestCount","contactsRequestIsOutstanding","contactsDataIsLoaded","axmContactsRequestOutstanding","axmContactsRequestHasCompleted",(function(e,t,n,i,r){var a,s,o=this._loadingStatus;this.isAppleIdManagedAppleId?(a=i,s=r):(a=t,s=n);var l=function(e,t,n,i){var r=ev;return t>0?r.Failed:n?r.Loading:!n&&i?r.Completed:e===r.Completed||e===r.Failed&&!n&&!i?r.Initial:e}(o,e,a,s);this._loadingStatus=l})),__superMap:{_$IYQ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DataSource"}});function Gv(e){if(!e)return 0;if("MAIN"===e)return 3;if("HOME"===e)return 3;if("WORK"===e)return 2;switch(e.toLowerCase()){case"main":return 3;case"home":return 2;case"work":return 1;default:return 0}}function Hv(e){return e.reduce((function(e,t){return Gv(e.label)>Gv(t.label)?t:e}))}var Wv=ae.a.extend({init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;e||_.b("URLRequest: no url specified");var i=t.credentials;if(i&&!t.hasOwnProperty("useCredentialsIfCrossOrigin"))switch(i){case"include":t.useCredentialsIfCrossOrigin=!0}t.url=e,n.__s._$FL$init.call(n,t)},__superMap:{_$FL$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"URLRequest"}}),$v={OWNER:"OWNER",USER:"USER",ADMINISTRATOR:"ADMINISTRATOR"};Object.freeze($v);var zv={1:"us",7:"ru",20:"eg",27:"za",30:"gr",31:"nl",32:"be",33:"fr",34:"es",36:"hu",39:"it",40:"ro",41:"ch",43:"at",44:"gb",45:"dk",46:"se",47:"no",48:"pl",49:"de",51:"pe",52:"mx",53:"cu",54:"ar",55:"br",56:"cl",57:"co",58:"ve",60:"my",61:"au",62:"id",63:"ph",64:"nz",65:"sg",66:"th",81:"jp",82:"kr",84:"vn",86:"cn",90:"tr",91:"in",92:"pk",93:"af",94:"lk",95:"mm",98:"ir",211:"ss",212:"ma",213:"dz",216:"tn",218:"ly",220:"gm",221:"sn",222:"mr",223:"ml",224:"gn",225:"ci",226:"bf",227:"ne",228:"tg",229:"bj",230:"mu",231:"lr",232:"sl",233:"gh",234:"ng",235:"td",236:"cf",237:"cm",238:"cv",239:"st",240:"gq",241:"ga",242:"cg",243:"cd",244:"ao",245:"gw",246:"io",247:"ac",248:"sc",249:"sd",250:"rw",251:"et",252:"so",253:"dj",254:"ke",255:"tz",256:"ug",257:"bi",258:"mz",260:"zm",261:"mg",262:"re",263:"zw",264:"na",265:"mw",266:"ls",267:"bw",268:"sz",269:"km",290:"sh",291:"er",297:"aw",298:"fo",299:"gl",350:"gi",351:"pt",352:"lu",353:"ie",354:"is",355:"al",356:"mt",357:"cy",358:"fi",359:"bg",370:"lt",371:"lv",372:"ee",373:"md",374:"am",375:"by",376:"ad",377:"mc",378:"sm",379:"va",380:"ua",381:"rs",382:"me",383:"xk",385:"hr",386:"si",387:"ba",389:"mk",420:"cz",421:"sk",423:"li",500:"fk",501:"bz",502:"gt",503:"sv",504:"hn",505:"ni",506:"cr",507:"pa",508:"pm",509:"ht",590:"gp",591:"bo",592:"gy",593:"ec",594:"gf",595:"py",596:"mq",597:"sr",598:"uy",599:"bq",672:"aq",673:"bn",674:"nr",675:"pg",676:"to",677:"sb",678:"vu",679:"fj",680:"pw",681:"wf",682:"ck",683:"nu",685:"ws",686:"ki",687:"nc",688:"tv",689:"pf",690:"tk",691:"fm",692:"mh",800:"xt",850:"kp",852:"hk",853:"mo",855:"kh",856:"la",880:"bd",886:"tw",960:"mv",961:"lb",962:"jo",963:"sy",964:"iq",965:"kw",966:"sa",967:"ye",968:"om",970:"ps",971:"ae",972:"il",973:"bh",974:"qa",975:"bt",976:"mn",977:"np",992:"tj",993:"tm",994:"az",995:"ge",996:"kg",998:"uz"},Kv={createFormattedString:function(e,t,n,i,r,a,s){if(!e||!t)return"";var o,l,c,u,d,h,p,f,g,m,_,v=!1,b=!1;h=-1!==(p=this.getIndexOfPauses(e,",;")),d=e,e=-1!==p?e.substr(0,p):e,l=K.a(t)?t.length:0,m=e.length,f=/[a-zA-Z*#]/.exec(e),g=e.indexOf(f),o="",_=-1!==t.indexOf("c"),r&&!_&&(o+="+"===s?s+i+" ":s+" "+i+" ",r=!1,a=!1,u=!0),-1===t.indexOf("n")&&a&&(o+=n,u=!0);for(var y=0,w=0;y<l&&w<m;++y)switch(t[y]){case"#":isNaN(this.convertFullWidthDigits(e[w]))?(v&&K.a(/[a-zA-Z*#]/.exec(e[w]))&&(o=o.replace("(",""),v=!1),o+=e[w],++w):(o+=e[w],b=!0,++w);break;case"(":v=!0,o+=t[y];break;case")":v&&(o+=t[y],v=!1);break;case" ":b&&""!==o&&(-1===g||w<=g)&&(o+=t[y]);break;case"n":n&&!u&&(r||a)&&(o+=n,a=!1,u=!0,b=!0);break;case"c":i&&!c&&r&&!u&&(o+=i,c=!0,b=!0);break;default:(-1===g||w<=g)&&(o+=t[y])}if(v){var I,S,C=t.indexOf(")")-t.indexOf("(")-1,E="";I=o.indexOf("("),S=o.length-1-I;for(var A=0;A<C-S;A++)E+=" ";o+=E,o+=")",v=!1}return r&&c&&(o="+"===s?s+o:s+" "+o),o=o.replace("()",""),(o+=h?d.substr(p):"")?o.replace(/\[\[9\]\]|\[\[8\]\]/g,""):""},getInternationalOrNationalAccessCode:function(e,t,n){var i,r,a,s,o,l,c,u,d;if(!t)return"";if(e=e.replace(" ",""),!(r=n?t.nationalAccessCode:t.internationalAccessCode))return"";a="",r=r.split(",");for(var h=0;h<r.length;++h)if(u=(o=(o=r[h])?o.replace(/\"/g,""):"").length,c=(l=this.normalizeString(o)).length,l.split("#").length,-1!==(s=l.indexOf("#"))&&(l=l.substr(0,s)),e.substr(0,l.length).trim()===l){var p=-1===s?l:e.substr(0,c);K.a(o)&&-1!==(i=o.toString().indexOf(" "))&&(p=p.substr(0,i)+" "+p.substr(i)),d=p;for(var f=0;f<u;f++)"#"===o[f]&&(d=d.substr(0,f)+"#"+d.substr(f+1));if(d===o){a=p;break}}return a},getCountryCodeFromInput:function(e,t){var n,i=zv,r=this.normalizeString(e);if((r=r.substr(t,e.length))&&0!==t&&i){r=this.convertFullWidthDigits(r);for(var a=0;a<=3&&(n=i[r.substr(0,a)],!K.a(n));++a);return n}return null},internationalPrefixForDigits:function(e,t){if(e)return"+"===e.charAt(0)?"+":this.getInternationalOrNationalAccessCode(e,t,!1).trim()},getMatchedFormatFromFormatsArray:function(e,t,n,i,r,a,s){for(var o,l,c,u,d,h,p,f,g,m,_,v,b=i.phoneFormats,y=b.length,w=0,I=!1,S=0;S<y;S++)if(l=(o=b[S]).format,u=(e=-1!==(c=this.getIndexOfPauses(e,",;"))?e.substr(0,c):e).length,p=l?l.split("#").length-1:0,h=u<(d=o.rangeBegin.toString().length)?"":e.substr(0,d),(h=this.convertFullWidthDigits(h))>=o.rangeBegin&&h<=o.rangeEnd&&u<=p){if(I&&p>w)continue;var C=-1!==o.format.indexOf("n"),E=-1!==o.format.indexOf("c");I=!0,w=p,f=!!r,(!K.a(g)||a&&!v&&C||f&&!m&&E||!f&&!a&&_<d||_<d&&!v||_<d&&(f&E||a&C)||v&&C&&_<d)&&(g=o,m=E,v=C,_=d)}return g},getFormattedStringUsingMatchedFormat:function(e,t,n,i,r,a,s,o){var l,c=e,u=this.getMatchedFormatFromFormatsArray(e,t,n,i,r,a,s);if(K.a(u)&&(l=u.format),o&&(o.format=l,o.nationalAccessCode=t,o.countryCode=n),!K.a(l)){var d=c.indexOf("x");if(-1!==d){var h=c.substring(0,d),p=c.substring(d,c.length),f=this.getFormattedStringUsingMatchedFormat(h,t,n,i,r,a,s,o);return f&&f!==h?f+" "+p:c}var g=this.getInternationalOrNationalAccessCode(c,i,!0),m=this.normalizeString(g),_=m.length;if(g&&s&&n&&"+"===s){c=c.substr(_,c.length);var v=this.getFormattedStringUsingMatchedFormat(c,"",n,i,!1,!1,"",o);if(v&&v!==c){var b=s+n+" ("+m+") "+v;return-1!==b.indexOf(") (")&&(b=b.replace(") (","")),b}return s+n+" ("+m+") "+c}return this.createFormattedString(c,l,t,n,r,a,s)||""}return this.createFormattedString(c,l,t,n,r,a,s)||""},getIndexOfPauses:function(e,t){for(var n=e.length,i=n,r=-1,a=0;a<t.length;a++)-1!==(r=e.indexOf(t[a]))&&i>r&&(i=r);return i===n?-1:i},formatEntryforDigits:function(e,t,n,i){var r,a,s,o,l,c,u=this.normalizeString(t).length,d=this.normalizeString(e),h=d.length,p=d,f=!1,g=!1;0===u&&(n=""),a=this.getInternationalOrNationalAccessCode(d,i,!0),s=this.normalizeString(a).length,a&&0!==s&&0===u&&(g=!0,p=d.substr(s,h)),c=i.numericCountryCode,o=this.getIndexOfPauses(e,",;"),t&&n&&1!==o?(p=d.substr(u+c.length,h),f=!0):f=!1;var m={};if(0===(r=this.getFormattedStringUsingMatchedFormat(p,a,c,i,f,g,t,m)).length&&f){var _=u+c.length,v=-1!==o?e.substr(0,o):e;l=v.length===_||isNaN(v[u])?e:"+"!==t?t+" "+c+" "+p:t+c+" "+p}return{formatted:r=r?r.trim():l,canonical:"+"+c+" "+((this.getFormattedStringUsingMatchedFormat(p,"","",i,f,g,"")||"").trim()||p),nationalNumber:p,prefix:t,numericCode:c,format:m.format,nationalAccessCode:m.nationalAccessCode,countryCode:m.countryCode}},normalizeString:function(e){return e?e.replace(/[^a-zA-Z0-9\uff10-\uff19\u0966-\u096f+,;@.*#\'\"<>\[\]]/g,""):""},convertFullWidthDigits:function(e){return e.replace(/[\uff10-\uff19]/g,(function(e){switch(e){case"\uff10":return"0";case"\uff11":return"1";case"\uff12":return"2";case"\uff13":return"3";case"\uff14":return"4";case"\uff15":return"5";case"\uff16":return"6";case"\uff17":return"7";case"\uff18":return"8";case"\uff19":return"9";default:return e}}))}},qv=P.a.extend(B.b,ie.a,{basePhoneNumberDataPath:"/phone_numbers/2/",defaultCountryCode:V.b(),format:function(e,t,n){t=t||this.defaultCountryCode;var i=this,r=t&&this._loadedFormats[t];if(t&&!r)return this.load(t).then((function(n){return i.format(e,t)}));var a=Kv.normalizeString(e),s=this._getCountryCodeFromNumber(a,r)||t;return s?this.load(s).then((function(t){var a=Kv.internationalPrefixForDigits(e,r),o=t.numericCountryCode,l=Kv.formatEntryforDigits(e,a,s,t),c=l.formatted;c||(c=e);var u={countryCode:s,numericCountryCode:o,internationalPrefix:a,input:e,output:c,canonical:l.canonical,format:l.format,nationalPart:l.nationalNumber};return u.isValid=!!n||i.isResultValid(u),u})):Z.a.resolve({countryCode:void 0,internationalPrefix:void 0,input:e,output:e,canonical:e,format:void 0,isValid:!1})},load:function(e){var t=this._loadedFormats[e];if(da.a(t))return t;if(t)return t.failure?Z.a.reject(t.error):Z.a.resolve(t);var n=this.basePhoneNumberDataPath+e+".json",i=ae.a.create({method:"GET",timeout:15e3,url:n}),r=this;return this._loadedFormats[e]=i.send().then((function(t){var n=JSON.parse(t.encodedBody.replace(/^'/,"").replace(/'\s*$/,""));return n=r._decompressFormats(n),r._loadedFormats[e]=n,n})).catch((function(t){throw r._loadedFormats[e]={failure:!0,error:t},t}))},_loadedFormats:{},_decompressFormat:function(e){var t=/^\[(\d+)](.*)$/.exec(e),n=/^\[(\d+)-(\d+)](.*)$/.exec(e);return n&&4===n.length?{rangeBegin:n[1],rangeEnd:n[2],format:n[3]}:t&&3===t.length?{rangeBegin:t[1],rangeEnd:t[1],format:t[2]}:e},_decompressFormats:function(e){for(var t=e.split("|"),n=t.slice(4),i=n.length;i--;)n[i]=this._decompressFormat(n[i]);return{countryCode:t[0],numericCountryCode:t[1],internationalAccessCode:t[2],nationalAccessCode:t[3],phoneFormats:n}},_getCountryCodeFromNumber:function(e,t){if(!e)return this.defaultCountryCode;var n=Kv.internationalPrefixForDigits(e,t);return(n=n.replace(/\s+/g,""))?Kv.getCountryCodeFromInput(e,n.length):this.defaultCountryCode},isResultValid:function(e){var t=e.nationalPart,n=e.format;if(!t||!n||!e.countryCode||!e.canonical)return!1;var i=(t.match(/[0-9]/g)||[]).length,r=n.match(/#+/g);if(!r||!r.length)return!1;for(var a=0,s=0,o=r.length;o--;){var l=r[o].length;s?a+=l:s=l}return i>=a+Math.max(s-2,.5*s)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhoneNumberFormatter"}}),Qv=P.a.extend({nestingPairs:{'"':'"',"'":"'","<":">","[":"]","(":")","{":"}"},escapeCharacters:{"\\":!0},delimiters:{",":!0,";":!0},tokenClasses:{},staticMembers:{valueForNode:function e(t){if("string"===typeof t)return t;for(var n=[],i=0;i<t.length;++i)n.push(e(t[i]));return n.join("")},visit:function e(t,n,i,r){if(r=r||[],"string"===typeof t)return i&&i.push(t),n(t,t,r);r.push(t);for(var a=[],s=0;s<t.length;++s)e(t[s],n,a,r);r.pop();var o=a.join("");return i&&i.push(o),n(t,o,r)},__QUALIFIED_CLASS_NAME__:"TreeTokenizer"},classifyCharacter:function(e){var t=this.tokenClasses;for(var n in t)if(t[n].test(e))return n},ascend:function(e){e&&this.currentNode.push(e),this.groupInterDelimiterContent(this.currentNode),this.terminators.pop();var t=this.parentNodes.pop();t&&(this.currentNode=t)},descend:function(e,t){this.terminators.push(t),this.parentNodes.push(this.currentNode);var n=[e];this.currentNode.push(n),this.currentNode=n},newToken:function(){var e=this.token;e&&(this.currentNode.push(e),this.token="")},groupInterDelimiterContent:function(e){for(var t=0,n=e.length-1;n>t&&e[n]===this.nestingPairs[e[t]];)++t,--n;for(var i=!1,r=n;r>=t;--r){var a=e[r];"string"===typeof a&&this.delimiters[a]&&(i=!0,n-r>1&&e.splice(r+1,n-r,e.slice(r+1,n+1)),n=r-1)}i&&n>1&&e.splice(t,n-t+1,e.slice(t,n+1))},build:function(e){var t,n,i;this.rootNode=[],this.currentNode=this.rootNode,this.parentNodes=[],this.terminators=[],this.token="";for(var r=0,a=e.length;r<a;++r){if(t=n,n=e.charAt(r),!this.escapeCharacters[t]){if(this.delimiters[n]){this.newToken(),this.currentNode.push(n);continue}if(n===this.terminators[this.terminators.length-1]){this.newToken(),this.ascend(n);continue}var s=this.nestingPairs[n];if(s){this.newToken(),this.descend(n,s);continue}}var o=this.classifyCharacter(n);o!==i&&(i=o,this.newToken()),this.token+=n}for(this.newToken();this.parentNodes.length;)this.ascend();return this.groupInterDelimiterContent(this.rootNode),this.rootNode}}),Yv=Uf.a.extend({staticMembers:{currentUserRecordName:V.b(),isCurrentUserUnauthenticated:V.b(),createFromString:function(e){return this.create(db(e))},isValidEmailAddress:ob,splitAddressString:function e(t){if(t=(t||"").trim(),/[\r\n]+/.test(t)){for(var n=t.split(/\s*[\r\n]+\s*/),i=[],r=n&&n.length||0,a=0;a<r;++a){var s=n[a];s&&(i=i.concat(e(s)))}return i}if(!/[,;]+/.test(t))return[t];t=cb(t,ab);for(var o=sb.build(t),l=[],c="",u=o.length,d=0;d<u;++d){var h=Qv.valueForNode(o[d]);if(/^[\s,;]+$/.test(h)){var p=db(c).lookupInfo;!p||p.phoneNumber||p.emailAddress?(l.push(c.trim()),c=""):c+=h}else c+=h}return l.push(c.trim()),l},__QUALIFIED_CLASS_NAME__:"UserIdentity"},userRecordName:Uf.c(),lookupInfo:Uf.c(),nameComponents:Uf.c(),givenName:V.b({dependencies:["nameComponents"],readOnly:!0,get:Object.assign((function(){var e=this.nameComponents;return e?e.givenName:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.givenName:null}})}),familyName:V.b({dependencies:["nameComponents"],readOnly:!0,get:Object.assign((function(){var e=this.nameComponents;return e?e.familyName:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.familyName:null}})}),emailAddress:V.b({dependencies:["lookupInfo"],readOnly:!0,get:Object.assign((function(){var e=this.lookupInfo;return e?e.emailAddress:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.emailAddress:null}})}),phoneNumber:V.b({dependencies:["lookupInfo"],readOnly:!0,get:Object.assign((function(){var e=this.lookupInfo;return e?e.phoneNumber:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.phoneNumber:null}})}),formattedPhoneNumber:V.b({dependencies:["phoneNumber"],readOnly:!0,get:Object.assign((function(){var e=this.phoneNumber;if(!e)return"";var t=e;/^\s*\+/.test(t)||(t="+"+t);var n=this._phoneNumberFormatterResults;if(n&&n.input===t)return n.output;var i=this;return qv.sharedInstance.format(t).then((function(e){i._phoneNumberFormatterResults=e,i.propertyChanged("formattedPhoneNumber")})).catch((function(t){return i._phoneNumberFormatterResults=null,e})),e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return"";var a=r;/^\s*\+/.test(a)||(a="+"+a);var s=this._phoneNumberFormatterResults;if(s&&s.input===a)return s.output;var o=this;return qv.sharedInstance.format(a).then((function(e){o._phoneNumberFormatterResults=e,o.propertyChanged("formattedPhoneNumber")})).catch((function(e){return o._phoneNumberFormatterResults=null,r})),r}})})});function Zv(e){return e&&e===Yv.currentUserRecordName}Yv.prototype.registerMetadata("isCurrentlyLoggedInUser",V.b({allowAtCreate:!0,readOnly:!0,dependencies:["userRecordName",Yv.bindingFor("currentUserRecordName")],get:Object.assign((function(){return Zv(this.userRecordName)}),{__CW__getter:function(e,t,n,i){return Zv(i.internalGet(this,t[0+n]))}})}));var Xv=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,30}/gi,Jv=/[a-z\u007E-\uFFFF0-9._%+-]+@[a-z\u007E-\uFFFF0-9.-]+\.[a-z\u007E-\uFFFF]{2,30}/gi,eb=/([a-z\u007E-\uFFFF0-9._%+-]+@[a-z\u007E-\uFFFF0-9.-]+\.[a-z\u007E-\uFFFF]{2,30}\s*){2,}/gi,tb="0-9\\uff10-\\uff19\\u0660-\\u0669\\u06F0-\\u06F9\\u0966-\\u096F\\u09E6-\\u09FF\\u0E50-\\u0E59",nb=new RegExp("([+\\(])?((["+tb+"]+)([\\(\\)\\s\\-\\+\\.\\,]{1,3}|x|ext))+(["+tb+"]+)","gi"),ib=new RegExp("([+\\(])?(["+tb+"]+)(([\\(\\)\\s\\-\\+\\.\\,]{1,3}|x|ext)(["+tb+"a-z]+))+","gi"),rb=new RegExp("\\+?(["+tb+"]+)","gi"),ab={"<":">","(":")","{":"}","'":"'",'"':'"'},sb=Qv.create();function ob(e){Xv.lastIndex=0;var t=Xv.exec(e);return!(!t||1!==t.length||t[0]!==e)}function lb(e,t,n,i,r,a){t.lastIndex=0;var s=t.exec(e),o=s&&s[0].trim();if(r&&o&&(o=r(o)),!o)return e;i[n]=o;var l=e.indexOf(o),c=l+o.length,u=e.substr(0,l).trim(),d=e.substr(c).trim();if(a)for(;d.charAt(0)===a[u.charAt(u.length-1)]&&d.charAt(0);)u=u.substr(0,u.length-1),d=d.substr(1);return u+d}function cb(e,t){for(e=e.trim();e.charAt(e.length-1)===t[e.charAt(0)];)e=e.substr(1,e.length-2);return e}function ub(e,t){var n=e=(e=(e=cb(e,ab)).replace(/^[,;\s]*(.*)[,;\s]*$/,"$1")).replace(/,\s*[A-Z]+$/i,""),i="",r=/^(.*)\s(\S+)\s*$/.exec(e);r&&3===r.length&&(n=r[2],i=r[1]),t.familyName=n.trim(),t.givenName=i.trim()}function db(e){var t={nameComponents:{},lookupInfo:{}};return e=e.replace(/[\u00A0\u1680\u180e\u2000-\u2009\u200a\u200b\u202f\u205f\u3000]/g," "),eb.lastIndex=0,eb.test(e)?(ub(e,t.nameComponents),t):(e=function(e,t){var n=lb(e,Jv,"emailAddress",t,null,ab);return ob(t.emailAddress)?n:(delete t.emailAddress,e)}(e,t.lookupInfo),t.lookupInfo.emailAddress||(e=function(e,t){function n(e){return e.replace(new RegExp("[^"+tb+"]","g"),"").length>=5?e:null}return e=lb(e,nb,"phoneNumber",t,n,ab),t.phoneNumber?e:(e=lb(e,ib,"phoneNumber",t,(function(e){return e.replace(new RegExp("[^"+tb+"]","g"),"").length+e.replace(/[^A-Za-z]/g,"").length>=5?e:null}),ab),t.phoneNumber?e:e=lb(e,rb,"phoneNumber",t,n,ab))}(e,t.lookupInfo)),ub(e,t.nameComponents),t)}function hb(e,t){var n,i;if(e||t)return!(e&&!pb(n=e.trim().charAt(0).toUpperCase()))&&(!(t&&!pb(i=t.trim().charAt(0).toUpperCase()))&&Ne({givenName:n,familyName:i}).replace(/\s+/g,""))}function pb(e){return!xe(e)&&/^[a-zA-Z]*$/g.test(vv(e))}var fb=Uf.a.extend({type:Uf.c({type:String}),permission:Uf.c(),acceptanceStatus:Uf.c(),isOrgUser:Uf.c({dataKey:"orgUser"}),userIdentity:zt.a.toOne({type:Yv,embedded:!0}),isOwner:V.b({readOnly:!0,dependencies:["type"],get:Object.assign((function(){return this.type===$v.OWNER}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===$v.OWNER}})}),displayName:V.b({readOnly:!0,dependencies:["addressBookContact.firstName","addressBookContact.lastName","userIdentity","userIdentity.givenName","userIdentity.familyName","userIdentity.emailAddress","userIdentity.phoneNumber","userIdentity.formattedPhoneNumber","isMe","isOwner"],get:Object.assign((function(){var e,t,n=this.addressBookContact;n&&(e=n.firstName,t=n.lastName);var i=this.userIdentity;return(!e||!t||this.isMe&&this.isOwner)&&(e=i.givenName,t=i.familyName),Ne({givenName:e,familyName:t,emailAddress:i.emailAddress,phoneNumber:i.formattedPhoneNumber})}),{__CW__getter:function(e,t,n,i){var r,a,s=this.addressBookContact;s&&(r=s.firstName,a=s.lastName);var o=i.internalGet(this,t[2+n]);return(!r||!a||i.internalGet(this,t[8+n])&&i.internalGet(this,t[9+n]))&&(r=o.givenName,a=o.familyName),Ne({givenName:r,familyName:a,emailAddress:o.emailAddress,phoneNumber:o.formattedPhoneNumber})}})}),displayNameIsPhoneNumber:V.b({readOnly:!0,dependencies:["displayName","userIdentity.formattedPhoneNumber"],get:Object.assign((function(){return this.displayName===this.getPath("userIdentity.formattedPhoneNumber")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===i.internalGetPath(this,t[1+n])}})}),displayNameInitials:V.b({readOnly:!0,dependencies:["addressBookContact.firstName","addressBookContact.lastName","userIdentity.givenName","userIdentity.familyName"],get:Object.assign((function(){var e=this.getPath("addressBookContact.firstName"),t=this.getPath("addressBookContact.lastName");return e&&t||(e=this.getPath("userIdentity.givenName"),t=this.getPath("userIdentity.familyName")),hb(e,t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return r&&a||(r=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[3+n])),hb(r,a)}})}),isMe:V.b({readOnly:!0,dependencies:["userIdentity.isCurrentlyLoggedInUser"],get:Object.assign((function(){return this.getPath("userIdentity.isCurrentlyLoggedInUser")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),addressBookContact:V.b(),addressBookContactDidChange:B.h("addressBookContact",(function(e){e&&e.loadImageData()})),loadAddressBookContact:function(e){var t=this,n=this.isMe,i=this.getPath("userIdentity.emailAddress"),r=this.getPath("userIdentity.phoneNumber");n?this.addressBookContact=e.getMeCard():i?e.lookUpContactByEmailAddress(i).then((function(e){return t.addressBookContact=e})):r&&e.lookUpContactByPhoneNumber(r).then((function(e){return t.addressBookContact=e}))},additionalParticipantInfo:V.b(),isInvalid:H.d(),invalidReason:H.d(),staticMembers:{__QUALIFIED_CLASS_NAME__:"Participant"}}),gb=n(391),mb=P.a.extend(B.b,{action:V.b(),title:V.b(),titleIsAlwaysLTR:V.b({type:"boolean"}),iconClass:V.b(),isDisabled:V.b(),keyCombo:V.b(),keySequence:V.b({dependencies:["keyCombo"],get:Object.assign((function(){return this._keySequence||gb.a.create(this.keyCombo)}),{__CW__getter:function(e,t,n,i){return this._keySequence||gb.a.create(i.internalGet(this,t[0+n]))}}),set:function(e){this._keySequence=e}}),hasCheckmark:V.b({type:"boolean"}),shouldEscape:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuItem"}}),_b=P.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"DividerItem"}}),vb=(B.b,{mixinDependencies:[Tn.a],autocompleteItemWasSelected:U.a}),bb=Bl.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"}}}},__QUALIFIED_CLASS_NAME__:"AutocompleteTextField"},delegate:V.b({type:vb}),dataSource:V.b({type:mv}),autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"false",width:V.b(500),didAttach:function(){var e=this.dataSource;e&&e.load()},didDetach:function(){},query:V.b(""),fullPreview:V.b(Oi.c("menu.highlightedItem.previewValue")),highlightedItem:V.b(Oi.c("menu.highlightedItem")),autocompleteItemWasSelected:function(e){var t=(this.value=e.value).length;te.a.sharedInstance.isEdge&&(this._shouldSkipNextInputEvent=!0),this.selection={start:t,end:t},this.menu&&this.menu.hide(),this.query="";var n=this.delegate;n&&n.autocompleteItemWasSelected&&n.autocompleteItemWasSelected(this,e),this.sendEvent("didAutocomplete",e)},minimumCharacters:V.b(0),backspaceDelay:800,menu:V.b(),isMenuVisible:V.b({readOnly:!0,dependencies:["_items","_items.contentsDidChange","isFocused"],get:Object.assign((function(){return this.isFocused&&this._items.length>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])&&i.internalGet(this,t[0+n]).length>0}})}),_isMenuVisibleDidChange:B.h("isMenuVisible",(function(e){var t=this.menu;t&&(e?(t.show(),this.sendEvent("pauseParsing")):(t.hide(),this.sendEvent("resumeParsing")))})),_timeElapsedFromBackspace:V.b({defaultValue:function(){return this.backspaceDelay}}),_isAutocompletingTextField:V.b({readOnly:!0,dependencies:["isMenuVisible","_timeElapsedFromBackspace","isFocused","isIMEInputActive"],get:Object.assign((function(){return this.isMenuVisible&&this.isFocused&&!this.isIMEInputActive&&this._timeElapsedFromBackspace>=this.backspaceDelay}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[2+n])&&!i.internalGet(this,t[3+n])&&i.internalGet(this,t[1+n])>=this.backspaceDelay}})}),_isAutocompletingTextFieldDidChange:B.h("_isAutocompletingTextField","fullPreview",(function(e,t){if(e&&t&&t.length>0){this.value=t;var n=this.query.length,i=this.value.length;te.a.sharedInstance.isEdge&&(this._shouldSkipNextInputEvent=!0),this.selection={start:n,end:i}}})),_items:V.b({strong:!0,defaultValue:k.c(Bf.a)}),_queryDidChangeObserver:B.h({inputs:["query","minimumCharacters","dataSource"],callback:function(e,t,n){!n||e.length<t?this._items.clear():this.queryDidChange(e,n)}}),queryDidChange:function(e,t){var n=this;t.clearLoadingStatus(),t.fetchRequiredData(e).then((function(){var i=t.autocompleteItemsForText(e);if(e===n.query){n._items=i;var r=n.menu;r&&!r.highlightedItem&&r.highlightNextItem()}}))},_shouldSkipNextInputEvent:!1,input:function(e){if(this.__s._$1d_$input.call(this,e),this._shouldSkipNextInputEvent)this._shouldSkipNextInputEvent=!1;else{var t=this.value;this.query=t?this.value:""}},keyDown:function(e){var t=this,n=arguments,i=!1,r=this.isMenuVisible,a=this.highlightedItem;switch(e.which){case ml.a.DOWN:e.preventDefault(),this.menu.highlightNextItem(),i=r;break;case ml.a.UP:e.preventDefault(),this.menu.highlightPreviousItem(),i=r;break;case ml.a.LEFT:case ml.a.RIGHT:case ml.a.COMMA:a&&r&&(e.preventDefault(),this.autocompleteItemWasSelected(a),i=!0);break;case ml.a.ENTER:a&&r?(e.preventDefault(),this.autocompleteItemWasSelected(a),i=!0):r||(i=t.__s._$26l$keyDown.apply(t,n));break;case ml.a.BACKSPACE:this._timeElapsedFromBackspace=0,this._backspaceCompletionTimer.restart(),i=!1;break;default:i=!1}return i},_backspaceCompletionTimer:V.b({defaultValue:function(){return Pd.a.create({delay:this.backspaceDelay,target:this,action:"_recordTimeElapsedFromBackspace"})}}),_recordTimeElapsedFromBackspace:function(){this._timeElapsedFromBackspace+=this._backspaceCompletionTimer.delay},_isAttachedDidChange:B.h("isAttached",(function(e){e?this.didAttach():this.didDetach()})),__superMap:{_$1d_$input:"input",_$26l$keyDown:"keyDown"}}),yb=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"textField"},{type:"ELEMENT",tagname:"span",name:"testMeasurer",styles:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden","white-space":"pre"}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{signal:"widthDidRender"},unit:"px",property:"width"}}},extraSpace:V.b({readOnly:!0,get:function(){var e=te.a.sharedInstance;return e.isIE||e.isEdge?5:0}}),className:"ck-sharing-resizing-autocomplete-text-field",__QUALIFIED_CLASS_NAME__:"ResizingAutocompleteTextField"},_items:V.b({strong:!0,binding:Oi.c("textField._items")}),isFocusable:!0,defaultFocusChild:Oi.c("textField"),focusAsLeaf:function(){this.focusDefault()},isFocused:V.b({readOnly:!0,dependencies:["isInFocusedBranch"],get:Object.assign((function(){return this.isInFocusedBranch}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),textField:V.b({defaultValue:k.c(bb.extend({additionalClassNames:["token-item-textfield"]})),downstreamBindings:{value:"(owner).value",menu:"(owner).menu",delegate:"(owner).delegate",dataSource:"(owner).dataSource",isDisabled:"(owner).isDisabled",minimumCharacters:"(owner).minimumCharacters",width:"(owner).width"}}),value:V.b(),menu:V.b(),delegate:V.b(),dataSource:V.b(),isDisabled:V.b(),width:V.b({readOnly:!0,dependencies:["value","isAttached"],get:Object.assign((function(){var e=this.testMeasurer;e.textContent=this.value;var t=e.offsetWidth+this.constructor.extraSpace;return e.innerText="",t+3}),{__CW__getter:function(e,t,n,i){var r=this.testMeasurer;r.textContent=i.internalGet(this,t[0+n]);var a=r.offsetWidth+this.constructor.extraSpace;return r.innerText="",a+3}})}),minimumCharacters:V.b(1),_windowDidResize:B.h(te.a.bindingFor("sharedInstance.window.width"),"textField.isMenuVisible",(function(e,t){var n=this.menu;if(n&&t){var i=n.anchorLayoutMeasurer;i&&i.recomputeLayoutIfNecessary()}})),selection:V.b({cacheable:!1,readOnly:!0,dependencies:["textField.selection"],get:Object.assign((function(){return this.getPath("textField.selection")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})})}),wb=we.b("TokenItemStatus",{OK:"OK",PENDING:"PENDING",INVALID:"INVALID"});function Ib(e){return(e||"").trim().toLowerCase()}function Sb(e){return(e=(e=(e||"").toLowerCase()).replace(/./g,(function(e){return Cb[e]||e})))&&e.replace(/[^0-9+]/g,"")}var Cb={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u0966":"0","\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u09e6":"0","\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ff":"9","\u0e50":"0","\u0e51":"1","\u0e52":"2","\u0e53":"3","\u0e54":"4","\u0e55":"5","\u0e56":"6","\u0e57":"7","\u0e58":"8","\u0e59":"9",a:"2",b:"2",c:"2",d:"3",e:"3",f:"3",g:"4",h:"4",i:"4",j:"5",k:"5",l:"5",m:"6",n:"6",o:"6",p:"7",q:"7",r:"7",s:"7",t:"8",u:"8",v:"8",w:"9",x:"9",y:"9",z:"9"},Eb=K_.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["title"]}],classes:["title-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"menuButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelected",truevalue:"is-selected",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}},className:"cw-ui-views-token-button",__QUALIFIED_CLASS_NAME__:"TokenButtonView"},isPending:V.b(!1),isInvalid:V.b(!1),invalidReason:V.b({defaultValue:s.d("CKSharing.InvalidToken.GeneralReason")}),tooltip:V.b({type:String,dependencies:["isInvalid","invalidReason","isPending"],readOnly:!0,get:Object.assign((function(){var e,t=this.title,n=this.isInvalid,i=this.invalidReason;return this.isPending?e=t:n&&(e=i),e}),{__CW__getter:function(e,t,n,i){var r,a=this.title,s=i.internalGet(this,t[0+n]),o=i.internalGet(this,t[1+n]);return i.internalGet(this,t[2+n])?r=a:s&&(r=o),r}})})}),Ab=q_.extend({tokenTextField:V.b({defaultValue:k.c(yb),downstreamBindings:{minimumCharacters:"(owner).minimumCharacters"}}),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInvalid",truevalue:"invalid",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPending",truevalue:"pending",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"TokenItemView"},status:V.b(wb.OK),minimumCharacters:V.b({readOnly:!0,dependencies:["isCurrentUserManagedAppleID"],get:Object.assign((function(){return this.isCurrentUserManagedAppleID?2:1}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?2:1}})}),isCurrentUserManagedAppleID:V.b(!1),isAXMServiceAvailable:V.b(!1),isUserAccountMAIDAndMaidAutoCompleteServiceAvailable:V.b({readOnly:!0,dependencies:["isCurrentUserManagedAppleID","isAXMServiceAvailable"],get:Object.assign((function(){return this.isCurrentUserManagedAppleID&&this.isAXMServiceAvailable}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),isInvalid:V.b({readOnly:!0,dependencies:["status"],get:Object.assign((function(){return this.status===wb.INVALID}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wb.INVALID}})}),invalidReason:V.b({defaultValue:s.d("CKSharing.InvalidToken.GeneralReason")}),isPending:V.b({readOnly:!0,dependencies:["status"],get:Object.assign((function(){return this.status===wb.PENDING}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wb.PENDING}})}),tokenButton:V.b({defaultValue:k.c(Eb,{action:"tokenButtonWasPressed",additionalClassNames:["token-item-button"],isFocusable:!0}),downstreamBindings:{title:"(owner).value",isSelected:"(owner).isSelected",isPending:"(owner).isPending",isInvalid:"(owner).isInvalid",invalidReason:"(owner).invalidReason"}}),autocompleteItem:V.b(null),menuTitle:V.b({didChange:function(e){var t=this.menuItems,n=t&&t.objectAt(0);n&&(n.title=e||"")}}),hydratedValue:V.b({readOnly:!0,dependencies:["value","userIdentity"],get:Object.assign((function(){var e=this.userIdentity;if(!e)return this.value;var t=(e.givenName||"").trim(),n=(e.familyName||"").trim(),i=(e.phoneNumber||"").trim(),r=(e.emailAddress||"").trim(),a=this.formatDisplayName(e);return(t||n)&&(i||r)?a+" <"+(i||r)+">":a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return i.internalGet(this,t[0+n]);var a=(r.givenName||"").trim(),s=(r.familyName||"").trim(),o=(r.phoneNumber||"").trim(),l=(r.emailAddress||"").trim(),c=this.formatDisplayName(r);return(a||s)&&(o||l)?c+" <"+(o||l)+">":c}})}),userIdentity:V.b({strong:!0,didChange:function(e){if(e){this.value=this.formatDisplayName(e);var t=e.emailAddress,n=e.phoneNumber,i=wb.INVALID,r=this.status===wb.INVALID;t?(this.menuTitle=t,this.contentIsAlwaysLTR=!1,!r&&Yv.isValidEmailAddress(t)&&(i=wb.OK)):n?(this._configureForPhoneNumber(n),r||(i=wb.PENDING)):this.menuTitle=this.value,this.status=i,this.sendEvent("tokenValueChanged")}}}),_configureForPhoneNumber:function(e){this.menuTitle=e,this.contentIsAlwaysLTR=!0;var t=this;this.formatPhoneNumber(e).then((function(e){if(t.sendEvent("phoneNumberValidationDidComplete",e.isValid),e.isValid){var n=e.canonical,i=t.userIdentity;i.lookupInfo={phoneNumber:n},t.value=t.formatDisplayName(i),t.menuTitle=n}else t.invalidReason=s.d("CKSharing.InvalidToken.GeneralReason");t.status!==wb.INVALID&&(t.status=e.isValid?wb.OK:wb.INVALID),t.sendEvent("tokenValueChanged")})).catch((function(e){t.status=wb.INVALID,t.sendEvent("tokenValueChanged")}))},formatDisplayName:function(e){return Ne(e)},buildMenuItemsForPhoneNumber:function(){var e=this.createInitialContactMenuItems(!0);return this.addCommonMenuItems(e,"Phone"),Bf.a.create(e)},buildMenuItemsForEmailAddress:function(){var e=this.createInitialContactMenuItems(!1);return this.addCommonMenuItems(e,"Email"),Bf.a.create(e)},buildMenuItemsForUnknownItem:function(){var e=this.createInitialContactMenuItems();return this.addCommonMenuItems(e,"Unknown"),Bf.a.create(e)},buildMenuItemsForPendingItem:function(){var e=[];return this.addCommonMenuItems(e,"Unknown"),Bf.a.create(e)},addCommonMenuItems:function(e,t){this.status!==wb.PENDING&&e.push(mb.create({title:s.d("CKSharing.AddParticipants.TokenItemMenu.Edit"+t),target:this,action:"editItem"})),e.push(mb.create({title:s.d("CKSharing.AddParticipants.TokenItemMenu.Remove"+t),target:this,action:"removeItem"}))},createInitialContactMenuItems:function(e){var t=[mb.create({title:this.menuTitle,titleIsAlwaysLTR:e,action:"",isDisabled:!0,hasCheckmark:!0})],n=this.autocompleteItem,i=n&&n.contactMatch&&n.contactMatch.contact,r=i&&i.emailAddresses,a=i&&i.phones,s=this;return r&&r.forEach((function(e){s._addAutocompleteMenuItem(t,i,e)})),a&&a.forEach((function(e){s._addAutocompleteMenuItem(t,i,e,!0)})),t.push(_b.create({})),t},_addAutocompleteMenuItem:function(e,t,n,i){var r=n.field,a=n.label,o="ContactsAutocomplete.Category."+a,l=s.d(o);l!==o&&(a=l);var c=this.autocompleteItem;if((c.contactMatch&&c.contactMatch.matchValue)!==r){var u={nameComponents:{givenName:t.firstName,familyName:t.lastName},lookupInfo:{emailAddress:i?void 0:r,phoneNumber:i?r:void 0}},d=s.d("CKSharing.AddParticipants.TokenItemMenu.AutocompleteItem.Title",{field:r,label:a});e.push(mb.create({title:d,userIdentityData:u,matchType:i?dv.PHONE:dv.EMAIL,matchValue:r,target:this,action:"didSelectAutocompleteMenuItem"}))}},didSelectAutocompleteMenuItem:function(e){if(e){var t=e.userIdentityData;t&&(this.userIdentity=Yv.create(t)),this.autocompleteItem.contactMatch.matchValue=e.matchValue,this.autocompleteItem.contactMatch.matchType=e.matchType}},serverCanonicalizePhoneNumber:function(e){var t={};return this.sendEvent("canonicalizePhoneNumbers",[e],t),t.value},formatPhoneNumber:function(e){var t=qv.sharedInstance;return this.serverCanonicalizePhoneNumber(e).catch((function(n){return t.format(e,void 0,!0).then((function(e){return e.isValid=!1,e}))})).then((function(n){var i=n[0]&&"+"+n[0];return t.format(i||e,void 0,!0).then((function(e){return i||(e.isValid=!1),e}))}))},displayMenu:function(e){var t=this.menuController=F_.extend({_menuItemForEvent:function(){var e=this,t=arguments,n=e.__s._$6pE$_menuItemForEvent.apply(e,t);return K.a(n)?n:null},__superMap:{_$6pE$_menuItemForEvent:"_menuItemForEvent"}}).create({listCollection:e,target:this,listLayoutRowHeight:27,shouldMeasure:!0,verticalAlignment:qo.Bottom,horizontalAlignment:Qo.Left,allowedLayouts:[cl,ul,hl,dl],resolutionStrategy:Al,isAlignmentRequired:!1,arrowAlignment:Il.None}),n=this.tokenButton.menuButton;t.show(n)},menuController:V.b({strong:!0}),tokenMenuButtonClicked:function(){var e=this.userIdentity;e&&e.phoneNumber?this.displayMenu(this.menuItems=this.buildMenuItemsForPhoneNumber()):e&&e.emailAddress?this.displayMenu(this.menuItems=this.buildMenuItemsForEmailAddress()):this.status===wb.PENDING?this.displayMenu(this.menuItems=this.buildMenuItemsForPendingItem()):this.displayMenu(this.menuItems=this.buildMenuItemsForUnknownItem())},editItem:function(){X.a(this.startEditing.bind(this),0)},startEditing:function(){var e=this,t=arguments,n=this.userIdentity;n&&(n.emailAddress?this.value=n.emailAddress:n.phoneNumber&&(this.value=n.phoneNumber)),e.__s._$7rP$startEditing.apply(e,t)},updateForContactMatch:function(e,t){var n=this;if(e&&e.contactMatch){var i=e.isAXMContact,r=e.contactMatch,a=r.matchType,o=r.matchValue,l=r.contact;!this.isUserAccountMAIDAndMaidAutoCompleteServiceAvailable||this.isUserAccountMAIDAndMaidAutoCompleteServiceAvailable&&i?this.status=wb.OK:(this.status=wb.INVALID,this.invalidReason=s.d("CKSharing.InvalidToken.NotAXMContact"));var c=a.value;if(e.contactMatchItemsPromise)return this.autocompleteItem=e,this.status=wb.PENDING,e.contactMatchItemsPromise.then((function(e){var i=e.items,r=e.error;if(i){var a=i.pop();i.forEach((function(e){n.sendEvent("createNewTokenItemFromAutocompleteItemBeforeCurrentToken",n,e)})),n.updateForContactMatch(a),t&&t()}else r&&(n.sendEvent("showAXMFetchMembersAlert",n._axmGroupName),n.removeItem());n._axmGroupName=void 0})),this._axmGroupName=this.value,this.value=s.d("CKSharing.AXMGroup.LoadingMembers"),void this.stopEditing();if("GROUP"===c){for(var u=o.length-1,d=0,h=u;d<h;++d)this.sendEvent("createNewTokenItemFromAutocompleteItemBeforeCurrentToken",this,{contactMatch:o[d]});return this.updateForContactMatch({contactMatch:o[u]}),void(t&&t())}var p="",f="";l&&(p=l.firstName,f=l.lastName);var g=e.contactMatch.contact;p=g.firstName||"",f=g.lastName||"","EMAIL"!==c||Yv.isValidEmailAddress(o)||(p||f||(p=o),o=void 0),this.userIdentity=Yv.create({nameComponents:{givenName:p,familyName:f},lookupInfo:{emailAddress:"EMAIL"===c?o:void 0,phoneNumber:"PHONE"===c?o:void 0}}),this.autocompleteItem=e,t&&t()}},didAutocomplete:function(e){this._isInDidAutocomplete=!0,this._resolveAXMGroupIfRequired(e),this.updateForContactMatch(e,this.postTokenUpdationCallback.bind(this))},postTokenUpdationCallback:function(){this.sendEvent("createNewEditingTokenAfterCurrentToken",this),this.stopEditing(),this._isInDidAutocomplete=!1},removeItem:function(){this.sendEvent("deleteCurrentToken",this)},shouldUpdateUserIdentity:function(e){var t=this.userIdentity;return!t||!e||!t.familyName&&!t.givenName||!t.emailAddress&&!t.phoneNumber||Ib(t.emailAddress)!==Ib(e.emailAddress)||Sb(t.phoneNumber)!==Sb(e.phoneNumber)},tokenStoppedEditing:function(){var e=(this.value||"").trim();if(!this.isEditing||this._isInDidAutocomplete||!e)return!1;var t=Yv.createFromString(e);return this.shouldUpdateUserIdentity(t)?(this.userIdentity=t,this.autocompleteItem=null):this.value=this.formatDisplayName(this.userIdentity),this.isUserAccountMAIDAndMaidAutoCompleteServiceAvailable&&!this.autocompleteItem&&this.status!==wb.INVALID&&(this.status=wb.INVALID,this.invalidReason=s.d("CKSharing.InvalidToken.NotAXMContact")),!1},keyDown:function(e){var t=e.which,n=this.value+",",i=this.parseValueForTokens(n),r=this.__s._$Aro$keyDown.call(this,e);return!r&&this.isEditing&&t===ml.a.COMMA&&i.length>1&&(this.stopEditing(),this.reEmptyToken.test(n)||this.sendEvent("createNewEditingTokenAfterCurrentToken",this),e.preventDefault(),r=!0),r},_resolveAXMGroupIfRequired:function(e){e.groupResolvePromise&&e.groupResolvePromise.resolve()},__superMap:{_$7rP$startEditing:"startEditing",_$Aro$keyDown:"keyDown"}}),Ob=tv.extend({CustomAutocompleteDataSourceClass:V.b(),CustomLoadMembershipInfoHandlerClass:V.b(),hostedByCloudOSOne:V.b(!0),tokenItemViewClass:Ab,isCurrentUserManagedAppleID:V.b(),isAXMServiceAvailable:V.b(),menu:V.b({dependencies:["CustomLoadMembershipInfoHandlerClass"],readOnly:!0,get:Object.assign((function(){var e=fv.extend({_menuItemForEvent:function(){var e=this,t=arguments,n=e.__s._$ji$_menuItemForEvent.apply(e,t);return K.a(n)?n:null},__superMap:{_$ji$_menuItemForEvent:"_menuItemForEvent"}}).create({target:this,anchor:this,layout:G_.DOUBLE_LINE,allowedLayouts:[hl],width:this.bindingFor("width")}),t=this.CustomLoadMembershipInfoHandlerClass;return t&&(e.contentController.membershipInfoLoader.loadMembershipInfoHandler=t.create()),e}),{__CW__getter:function(e,t,n,i){var r=fv.extend({_menuItemForEvent:function(){var e=this,t=arguments,n=e.__s._$ji$_menuItemForEvent.apply(e,t);return K.a(n)?n:null},__superMap:{_$ji$_menuItemForEvent:"_menuItemForEvent"}}).create({target:this,anchor:this,layout:G_.DOUBLE_LINE,allowedLayouts:[hl],width:this.bindingFor("width")}),a=i.internalGet(this,t[0+n]);return a&&(r.contentController.membershipInfoLoader.loadMembershipInfoHandler=a.create()),r}})}),autocompleteDataSource:V.b({dependencies:["CustomAutocompleteDataSourceClass","hostedByCloudOSOne"],readOnly:!0,get:Object.assign((function(){var e=this.CustomAutocompleteDataSourceClass,t=this.hostedByCloudOSOne;if(e)return e.create();var n=Uv;return t?n.create({isPhoneNumberSupportEnabled:!0}):n.extend({isPhoneNumberSupportEnabled:!0,isRecentsEnabled:V.b({dependencies:[],get:function(){return!1}}),createContactsRequest:function(){var e=this,t=arguments,n=e.__s._$1Ph$createContactsRequest.apply(e,t),i=Wv.create(n.url.toString(),{serviceName:n.serviceName,useCredentialsIfCrossOrigin:n.useCredentialsIfCrossOrigin});return i},createRecentRecipientsRequest:function(){var e=this,t=arguments,n=e.__s._$1YQ$createRecentRecipientsRequest.apply(e,t),i=Wv.create(n.url.toString(),{serviceName:n.serviceName,method:n.method,body:n.body,timeout:n.timeout,useCredentialsIfCrossOrigin:n.useCredentialsIfCrossOrigin,shouldFinalizeWithResponse:n.shouldFinalizeWithResponse,headers:n.headers});return i},__superMap:{_$1Ph$createContactsRequest:"createContactsRequest",_$1YQ$createRecentRecipientsRequest:"createRecentRecipientsRequest"}}).create()}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r)return r.create();var s=Uv;return a?s.create({isPhoneNumberSupportEnabled:!0}):s.extend({isPhoneNumberSupportEnabled:!0,isRecentsEnabled:V.b({dependencies:[],get:function(){return!1}}),createContactsRequest:function(){var e=this,t=arguments,n=e.__s._$1Ph$createContactsRequest.apply(e,t),i=Wv.create(n.url.toString(),{serviceName:n.serviceName,useCredentialsIfCrossOrigin:n.useCredentialsIfCrossOrigin});return i},createRecentRecipientsRequest:function(){var e=this,t=arguments,n=e.__s._$1YQ$createRecentRecipientsRequest.apply(e,t),i=Wv.create(n.url.toString(),{serviceName:n.serviceName,method:n.method,body:n.body,timeout:n.timeout,useCredentialsIfCrossOrigin:n.useCredentialsIfCrossOrigin,shouldFinalizeWithResponse:n.shouldFinalizeWithResponse,headers:n.headers});return i},__superMap:{_$1Ph$createContactsRequest:"createContactsRequest",_$1YQ$createRecentRecipientsRequest:"createRecentRecipientsRequest"}}).create()}})}),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["add-participants-tokenizedtextfield-view"]}},__QUALIFIED_CLASS_NAME__:"AutocompleteTokenizedTextField"},labelField:V.b({defaultValue:k.c(In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"toFieldText",attributes:{}}],name:"toField",classes:["to-field"]}}})),downstreamBindings:{toFieldText:"(owner).toFieldText"}}),toFieldText:V.b(s.d("CKSharing.AddParticipants.TokenItemView.Add")),invitees:V.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign((function(){var e=[],t=this.tokenViews;return t&&t.forEach((function(t){t.userIdentity&&t.value&&e.push(fb.create({userIdentity:t.userIdentity,isInvalid:t.isInvalid,invalidReason:t.invalidReason}))})),e}),{__CW__getter:function(e,t,n,i){var r=[],a=i.internalGet(this,t[0+n]);return a&&a.forEach((function(e){e.userIdentity&&e.value&&r.push(fb.create({userIdentity:e.userIdentity,isInvalid:e.isInvalid,invalidReason:e.invalidReason}))})),r}})}),hasPendingTokens:V.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign((function(){var e=this.tokenViews;return e&&e.some((function(e){return e.isPending}))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some((function(e){return e.isPending}))}})}),hasInvalidTokens:V.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign((function(){var e=this.tokenViews;return e&&e.some((function(e){return e.isInvalid}))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some((function(e){return e.isInvalid}))}})}),hasAtLeastOneValidToken:V.b({readOnly:!0,dependencies:["tokenViews","tokenViews.contentsDidChange","_tokenValueChangedSignal"],get:Object.assign((function(){var e=this.tokenViews;return e&&e.some((function(e){return e.userIdentity&&!e.isInvalid}))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.some((function(e){return e.userIdentity&&!e.isInvalid}))}})}),parseValueForTokens:function(e){return Yv.splitAddressString(e)},createNewTokenItemFromAutocompleteItemBeforeCurrentToken:function(e,t){this.createNewTokenItemBeforeCurrentToken(e,"PLACEHOLDER").updateForContactMatch(t)},logService:V.b(),phoneNumberValidationDidComplete:function(e){var t=this.logService;t&&t.recordStat("PhoneNumberValidation"+(e?"Succeeded":"Failed"))},autocompleteItemWasSelected:function(e){var t=Gd.a(this,"lastEditedToken.tokenTextField.textField");t&&"function"===typeof t.autocompleteItemWasSelected&&t.autocompleteItemWasSelected(e)},_createNewEditingTokenAtIndex:function(e){var t=this.lastEditedToken;t&&t.isEditing&&t.stopEditing(),this.__s._$3Ot$_createNewEditingTokenAtIndex.call(this,e)},_createNewTokenItem:function(){var e=this.__s._$3SB$_createNewTokenItem.call(this);return e.isCurrentUserManagedAppleID=this.isCurrentUserManagedAppleID,e.isAXMServiceAvailable=this.isAXMServiceAvailable,e},hydrateValues:function(e){var t=[];return this.tokenViews.forEach((function(n){e&&!e(n)||t.push(n.hydratedValue)})),t.join(", ")},__superMap:{_$3Ot$_createNewEditingTokenAtIndex:"_createNewEditingTokenAtIndex",_$3SB$_createNewTokenItem:"_createNewTokenItem"}}),Tb=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{escape:"false"}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}]}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsHeaderView"},title:V.b({type:String}),subtitle:V.b({type:String})}),Mb=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["busy-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]},className:"ck-sharing-busy-view",__QUALIFIED_CLASS_NAME__:"BusyView"},isVisible:V.b(!1),spinnerView:k.c(Jc.a)}),Db=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}]}],classes:["offline-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]},className:"ck-sharing-offline-view",__QUALIFIED_CLASS_NAME__:"OfflineView"},title:s.d("CKSharing.Offline.Title"),description:s.d("CKSharing.Offline.Description"),isVisible:V.b(!1)}),Pb=In.a.extend({supportedTransports:V.b(),shareItemType:V.b(),transportItemsForDisplay:V.b({readOnly:!0,dependencies:["supportedTransports"],get:Object.assign((function(){var e=(this.supportedTransports||[]).map((function(e){var t=bg[e],n=t===bg.WEB_MAIL||t===bg.NATIVE_MAIL?"EMAIL":t,i=z.a(Mm(n.toLowerCase())),r="CKSharing.AddParticipants.Transports."+i+"Button.Title",a=Dm.a(i).toLowerCase();return{title:s.d(r),value:t,classNames:[a]}}));return Ai.a.create(e)}),{__CW__getter:function(e,t,n,i){var r=(i.internalGet(this,t[0+n])||[]).map((function(e){var t=bg[e],n=t===bg.WEB_MAIL||t===bg.NATIVE_MAIL?"EMAIL":t,i=z.a(Mm(n.toLowerCase())),r="CKSharing.AddParticipants.Transports."+i+"Button.Title",a=Dm.a(i).toLowerCase();return{title:s.d(r),value:t,classNames:[a]}}));return Ai.a.create(r)}})}),shouldShowParticipantsEntry:V.b({dependencies:["transport","accessDropdownValue"],readOnly:!0,get:Object.assign((function(){var e=this.transport;return this.accessDropdownValue===wm.PRIVATE&&(e===bg.COPY_LINK||e===bg.NATIVE_MAIL)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])===wm.PRIVATE&&(r===bg.COPY_LINK||r===bg.NATIVE_MAIL)}})}),invitees:V.b(Oi.c("invitationsTextField.invitees")),logService:V.b(),CustomLoadMembershipInfoHandlerClass:V.b(),CustomAutocompleteDataSourceClass:V.b(),sharePopoverIsActive:V.b(),clearInvitationsTextField:function(e){var t=this.invitationsTextField;t&&t.setValue()},invitationsTextField:V.b({defaultValue:k.c(Ob.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{signal:"isVisibleDidRender"}}]}}},placeholder:s.d("CKSharing.AddParticipants.InvitationsTextField.Placeholder")})),downstreamBindings:{isVisible:"(owner).shouldShowParticipantsEntry",CustomLoadMembershipInfoHandlerClass:"(owner).CustomLoadMembershipInfoHandlerClass",logService:"(owner).logService",CustomAutocompleteDataSourceClass:"(owner).CustomAutocompleteDataSourceClass",hostedByCloudOSOne:"(owner).hostedByCloudOSOne",isCurrentUserManagedAppleID:"(owner).isCurrentUserManagedAppleID",isAXMServiceAvailable:"(owner).isAXMServiceAvailable"}}),loggedInUserIdentity:V.b(),isCurrentUserManagedAppleID:V.b({dependencies:["loggedInUserIdentity"],readOnly:!0,get:Object.assign((function(){return!!this.loggedInUserIdentity&&this.loggedInUserIdentity.isManagedAppleID}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).isManagedAppleID}})}),isAXMServiceAvailable:V.b(),title:V.b(),subtitle:V.b(null),subtitleString:V.b({readOnly:!0,dependencies:["subtitle","shareItemType","supportedTransports","accessDropdownValue"],get:Object.assign((function(){var e=this.supportedTransports,t=this.subtitle;if(e&&e.length>0){if(null===t){var n="CKSharing.AddParticipants.Subtitle.";return 1===e.length?(n+="SingleTransport.",n+=wm.PUBLIC===this.accessDropdownValue?"Public.":"Private.",n+=this.shareItemType):n+="MultipleTransports",s.d(n)}return t}return""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[0+n]);if(r&&r.length>0){if(null===a){var o="CKSharing.AddParticipants.Subtitle.";return 1===r.length?(o+="SingleTransport.",o+=wm.PUBLIC===i.internalGet(this,t[3+n])?"Public.":"Private.",o+=i.internalGet(this,t[1+n])):o+="MultipleTransports",s.d(o)}return a}return""}})}),headerView:V.b({defaultValue:k.c(Tb),downstreamBindings:{title:"(owner).title",subtitle:"(owner).subtitleString"}}),busyDescription:V.b(s.d("CKSharing.Busy.Loading.Description")),isLoading:V.b(!1),busyView:V.b({readOnly:!0,get:function(){return Mb.create()},downstreamBindings:{isVisible:"(owner).isLoading"}}),shouldShowSendingSpinner:V.b({defaultValue:!1,type:Boolean}),isOffline:V.b(te.a.sharedInstance.bindingFor("isOffline")),offlineView:V.b({readOnly:!0,get:function(){return Db.create()},downstreamBindings:{isVisible:"(owner).isOffline"}}),accessDropdownValue:V.b(),permissionDropdownValue:V.b(),summaryTextNoOption:V.b(),summaryTextWOption:V.b(),shouldShowUserName:V.b(),loggedInUserInfo:V.b(),transport:V.b(),isSavingShare:V.b(!1),showPermissionsDropdown:V.b(!0),primaryInteractionMode:V.b(),shareButtonTitle:V.b(),supportedAccess:V.b(),supportedPermissions:V.b(),hostedByCloudOSOne:V.b(!0),staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsViewBase"}}),Lb=Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"CancelButton"},ariaLabel:s.d("CKSharing.AddParticipants.CancelButton.Title"),title:s.d("CKSharing.AddParticipants.CancelButton.Title"),action:"didCancelAddParticipant",keyEquivalent:ml.a.ESC,additionalClassNames:F.b(["cancel-button"])}),Rb={TOUCH_PRIMARY:18,MOUSE_PRIMARY:24};Object.freeze(Rb);var xb=Ho.a.extend({triggerButtonAction:function(){var e=this,t=arguments,n=document.createElement("a");n.target="_top",n.href=this.link,n.click(),e.__s._$4R$triggerButtonAction.apply(e,t)},link:void 0,__superMap:{_$4R$triggerButtonAction:"triggerButtonAction"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnchorButton"}}),Nb=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"footer",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"ELEMENT",tagname:"span",classes:["divider"]},{type:"VIEWOUTLET",tagname:"view",name:"shareButton"},{type:"VIEWOUTLET",tagname:"view",name:"doneButton"}],classes:["button-container"],name:"buttonContainer"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"username",attributes:{}}]}],classes:["username",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"usernameIsHidden",truevalue:"",falsevalue:"hidden",attributes:{}}]}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsFooterViewForMouse"},spinnerView:V.b({downstreamBindings:{isVisible:"(owner).shouldShowSendingSpinner"},defaultValue:k.c(Jc.a.extend({primaryInteractionMode:V.b(),size:Rb.MOUSE_PRIMARY}))}),shareButtonTitle:V.b({type:String}),shareButtonIsHidden:V.b({defaultValue:!1,type:Boolean}),shareButtonIsDisabled:V.b({defaultValue:!0,type:Boolean}),cancelButtonIsDisabled:V.b({defaultValue:!0,type:Boolean}),cancelButtonIsHidden:V.b({defaultValue:!1,type:Boolean}),doneButtonIsHidden:V.b({defaultValue:!1,type:Boolean}),username:V.b({type:String}),usernameIsHidden:V.b({defaultValue:!1,type:Boolean}),shouldShowSendingSpinner:V.b({defaultValue:!1,type:Boolean}),mailToLink:V.b(),sendShareButton:V.b({defaultValue:k.c(Ho.a.extend({ariaLabel:s.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"sendShare",staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},additionalClassNames:F.b(["primary"])})),downstreamBindings:{isHidden:"(owner).shareButtonIsHidden",isDisabled:"(owner).shareButtonIsDisabled",title:"(owner).shareButtonTitle"}}),mailToButton:V.b({readOnly:!0,dependencies:["mailToLink"],get:Object.assign((function(){var e=this;return xb.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},ariaLabel:s.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"mailToLinkClicked",additionalClassNames:F.b(["primary"])}).create({link:this.mailToLink,target:{mailToLinkClicked:function(){return e.sendEvent("didCompleteSendMessage")}},isDisabled:this.bindingFor("shareButtonIsDisabled"),isHidden:this.bindingFor("shareButtonIsHidden"),title:this.bindingFor("shareButtonTitle")})}),{__CW__getter:function(e,t,n,i){var r=this;return xb.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},ariaLabel:s.d("CKSharing.AddParticipants.OKButton.Share.Title"),action:"mailToLinkClicked",additionalClassNames:F.b(["primary"])}).create({link:i.internalGet(this,t[0+n]),target:{mailToLinkClicked:function(){return r.sendEvent("didCompleteSendMessage")}},isDisabled:this.bindingFor("shareButtonIsDisabled"),isHidden:this.bindingFor("shareButtonIsHidden"),title:this.bindingFor("shareButtonTitle")})}})}),transport:V.b(),shareButton:V.b({readOnly:!0,dependencies:["mailToLink","transport"],get:Object.assign((function(){var e=this.mailToLink,t=this.transport;return Vn.a(e)||t!==bg.NATIVE_MAIL?this.sendShareButton:this.mailToButton}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return Vn.a(r)||a!==bg.NATIVE_MAIL?this.sendShareButton:this.mailToButton}})}),doneButton:V.b({defaultValue:k.c(Ho.a.extend({ariaLabel:s.d("CKSharing.Dialog.Button.Done"),title:s.d("CKSharing.Dialog.Button.Done"),action:"didCancelAddParticipant",isVisible:V.b(),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}}]}}}})),downstreamBindings:{isVisible:"(owner).doneButtonIsHidden"}}),cancelButton:V.b({defaultValue:k.c(Lb),downstreamBindings:{isHidden:"(owner).cancelButtonIsHidden",isDisabled:"(owner).cancelButtonIsDisabled"}})}),Fb=P.a.extend({computeConstraintWidthForItem:function(e){_.b("ConstraintBasedEvenLayoutManager#computeConstraintWidthForItem must be implemented")},computeOuterWidthForItem:function(e){_.b("ConstraintBasedEvenLayoutManager#computeOuterWidthForItem must be implemented")},resetLayout:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].style;i.marginLeft="",i.marginRight=""}},layoutItems:function(e){this.resetLayout(e);var t=this._determineMaxSpaceBetweenConstrainingElements(e);this._applyMaxSpaceBetweenConstrainingElements(e,t),this._ensureCentering(e)},_determineMaxSpaceBetweenConstrainingElements:function(e){for(var t=0,n=e.map(this.computeOuterWidthForItem.bind(this)),i=e.map(this.computeConstraintWidthForItem.bind(this)),r=1,a=e.length;r<a;r++){var s=n[r-1],o=(n[r]+s)/2-(i[r-1]+i[r])/2;t=Math.max(o,t)}return t},_applyMaxSpaceBetweenConstrainingElements:function(e,t){for(var n=e.map(this.computeOuterWidthForItem.bind(this)),i=e.map(this.computeConstraintWidthForItem.bind(this)),r=1,a=e.length;r<a;r++){var s=n[r-1],o=n[r],l=t-(s-i[r-1])/2-(o-i[r])/2;e[r].style.marginLeft=l+"px"}},_ensureCentering:function(e){if(e.length>1){var t=e[0],n=Math.max((this.computeOuterWidthForItem(t)-this.computeConstraintWidthForItem(t))/2,0),i=e[e.length-1],r=n-Math.max((this.computeOuterWidthForItem(i)-this.computeConstraintWidthForItem(i))/2,0);r>0?i.style.marginRight=r+"px":t.style.marginLeft=-r+"px"}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ConstraintBasedEvenLayoutManager"}}).extend({computeConstraintWidthForItem:function(e){var t=globalThis.getComputedStyle(e,"::before").width;return Math.ceil(parseFloat(t))},computeOuterWidthForItem:function(e){return e.clientWidth},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransportsLayoutManager"}}),Vb=xu.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"TransportsSegmentedView"},additionalClassNames:F.b(["ck-sharing-transports-view"]),isHidden:V.b({readOnly:!0,dependencies:["isLoading","segments"],get:Object.assign((function(){var e=this.segments;return this.isLoading||!e||e.length<=1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])||!r||r.length<=1}})}),isLoading:V.b(),buttonsObserver:B.h("_buttons","_buttons.contentsDidChange",(function(e,t){var n=this;if(e&&t){var i=this._buttonAttachmentObservers,r=this._buttons,a=this._layoutManager;t.context.forEach((function(t){var s=t.operation,o=t.index,l=e.objectAt(o);if(s===Wo.b.INSERT){var c=l.observe("isAttached",(function(){var e=r.map((function(e){return e.element})).toArray();a.layoutItems(e),n.transportsSegmentedViewDidLayoutButtons(n)}));i.set(l,c)}else if(s===Wo.b.REMOVE){var u=t.encodedItem,d=i.get(u);void 0!==d&&d.disconnect(),i.delete(u)}}))}})),init:function(){var e=this,t=arguments;this._layoutManager=Fb.create(),this._buttonAttachmentObservers=new Map,e.__s._$o1$init.apply(e,t)},_layoutManager:H.d({readOnly:!0,type:Fb}),_buttonAttachmentObservers:H.d({readOnly:!0,type:Map}),transportsSegmentedViewDidLayoutButtons:B.i(),__superMap:{_$o1$init:"init"}}),kb=Pb.extend({init:function(e,t){this.shouldHideAddParticipantsSummary=e,this.__s._$Cz$init.call(this,t)},shouldHideAddParticipantsSummary:V.b(!1),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"transportsView"},{type:"VIEWOUTLET",tagname:"view",name:"invitationsTextField"},{type:"VIEWOUTLET",tagname:"view",name:"accessControlsSection"},{type:"VIEWOUTLET",tagname:"view",name:"footerView"}],classes:["workflow-screen","add-participants-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsViewForMouse"},transportsView:V.b({defaultValue:k.c(Vb),readOnly:!0,downstreamBindings:{isLoading:"(owner).isLoading",value:"(owner).transport",segments:"(owner).transportItemsForDisplay",isDisabled:"(owner).isSavingShare"}}),accessControlsSection:V.b({readOnly:!0,defaultValue:k.c(Em.extend({isToggleEnabled:!1})),downstreamBindings:{shouldHideAddParticipantsSummary:"(owner).shouldHideAddParticipantsSummary",isDisabled:"(owner).isSavingShare",accessDropdownValue:"(owner).accessDropdownValue",permissionDropdownValue:"(owner).permissionDropdownValue",isLoading:"(owner).isLoading",showPermissionsDropdown:"(owner).showPermissionsDropdown",supportedAccess:"(owner).supportedAccess",supportedPermissions:"(owner).supportedPermissions",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption",transport:"(owner).transport"}}),shareButtonIsDisabled:V.b({dependencies:["transport","accessDropdownValue","isSavingShare","isLoading","sharePopoverIsActive","invitationsTextField.value","invitationsTextField.hasAtLeastOneValidToken","invitationsTextField.hasPendingTokens"],readOnly:!0,get:Object.assign((function(){if(this.isSavingShare||this.isLoading||this.sharePopoverIsActive)return!0;var e=[bg.COPY_LINK,bg.NATIVE_MAIL];if(this.accessDropdownValue!==wm.PRIVATE||!e.includes(this.transport))return!1;var t=this.invitationsTextField;return!!t&&(!t.value||!!t.hasPendingTokens||!t.hasAtLeastOneValidToken)}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n])||i.internalGet(this,t[4+n]))return!0;var r=[bg.COPY_LINK,bg.NATIVE_MAIL];if(i.internalGet(this,t[1+n])!==wm.PRIVATE||!r.includes(i.internalGet(this,t[0+n])))return!1;var a=this.invitationsTextField;return!!a&&(!a.value||!!a.hasPendingTokens||!a.hasAtLeastOneValidToken)}})}),isCancelButtonDisabled:V.b({dependencies:["isSavingShare","sharePopoverIsActive"],readOnly:!0,get:Object.assign((function(){return this.isSavingShare||this.sharePopoverIsActive}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),username:V.b({readOnly:!0,dependencies:["loggedInUserInfo"],get:Object.assign((function(e){var t=this.loggedInUserInfo;if(t){var n=t.displayName,i=t.appleId;if(n&&i)return s.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId",{displayName:n,appleId:i});if(n||i)return s.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId",{nameOrAppleId:n||i})}return""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.displayName,o=r.appleId;if(a&&o)return s.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameAndAppleId",{displayName:a,appleId:o});if(a||o)return s.d("CKSharing.AddParticipants.CurrentlyLoggedUser.NameOrAppleId",{nameOrAppleId:a||o})}return""}})}),footerView:V.b({defaultValue:k.c(Nb),downstreamBindings:{shareButtonTitle:"(owner).shareButtonTitle",shareButtonIsHidden:"(owner).isOffline",shareButtonIsDisabled:"(owner).shareButtonIsDisabled",doneButtonIsHidden:"(owner).isOffline",username:"(owner).username",usernameIsHidden:"(owner).shouldShowUserName",cancelButtonIsDisabled:"(owner).isCancelButtonDisabled",cancelButtonIsHidden:"(owner).isOffline",shouldShowSendingSpinner:"(owner).shouldShowSendingSpinner",transport:"(owner).transport"}}),_updateLayout:B.h({inputs:["isAttached","transport","transportsView.transportsSegmentedViewDidLayoutButtons","shouldShowParticipantsEntry"],callback:function(e,t,n){if(e){var i=this.element,r=this.invitationsTextField;if(void 0!==Gd.a(n,"context")){var a=i.style,s=r.element.style;a.maxWidth="",s.maxWidth="0px";var o=i.clientWidth;"number"===typeof o&&0!==o&&(a.maxWidth=o+"px"),s.maxWidth=""}this.sendEvent("contentDidResize"),t===bg.COPY_LINK&&r&&r.focus()}}}),__superMap:{_$Cz$init:"init"}}),Bb=In.a.extend({staticMembers:{template:{type:"MULTIVIEWOUTLET",tagname:"views",name:"buttons",attributes:{tagName:"footer"}},__QUALIFIED_CLASS_NAME__:"AddParticipantsFooterViewForTouch"},transportItemsForDisplay:V.b(),shouldTransportButtonsBeDisabled:V.b(),buttons:V.b({readOnly:!0,dependencies:["transportItemsForDisplay","mailToLink"],get:Object.assign((function(){var e=this,t=Wo.b.create(),n=this.transportItemsForDisplay;if(n&&n.length>0){for(var i=0,r=n.length;i<r;i++){var a=n.objectAt(i),o=void 0;if(a.value!==bg.NATIVE_MAIL||Vn.a(this.mailToLink))o=Ho.a.create({additionalClassNames:F.b([a.value.toLowerCase()]),title:a.title,action:"setTransportAndSendShare",isDisabled:Oi.c("parent.shouldTransportButtonsBeDisabled"),context:a.value});else{var l=this.mailToLink;o=xb.create({link:l,additionalClassNames:F.b([a.value.toLowerCase()]),title:s.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:{notificationDidComplete:function(){return e.sendEvent("didCompleteSendMessage")}},isDisabled:Oi.c("parent.shouldTransportButtonsBeDisabled")})}t.push(o)}t.push(Lb.create())}return t}),{__CW__getter:function(e,t,n,i){var r=this,a=Wo.b.create(),o=i.internalGet(this,t[0+n]);if(o&&o.length>0){for(var l=0,c=o.length;l<c;l++){var u=o.objectAt(l),d=void 0;if(u.value!==bg.NATIVE_MAIL||Vn.a(i.internalGet(this,t[1+n])))d=Ho.a.create({additionalClassNames:F.b([u.value.toLowerCase()]),title:u.title,action:"setTransportAndSendShare",isDisabled:Oi.c("parent.shouldTransportButtonsBeDisabled"),context:u.value});else{var h=i.internalGet(this,t[1+n]);d=xb.create({link:h,additionalClassNames:F.b([u.value.toLowerCase()]),title:s.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:{notificationDidComplete:function(){return r.sendEvent("didCompleteSendMessage")}},isDisabled:Oi.c("parent.shouldTransportButtonsBeDisabled")})}a.push(d)}a.push(Lb.create())}return a}})}),mailToLink:V.b()}),jb=Pb.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sendingSpinnerView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"spinnerLabel",attributes:{}}]}],classes:["sending-spinner-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"footerView"}],classes:["workflow-screen","add-participants-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSendingSpinner",truevalue:"is-sending-share",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"AddParticipantsViewForTouch"},sendingSpinnerView:V.b({downstreamBindings:{isVisible:"(owner).shouldShowSendingSpinner"},defaultValue:k.c(Jc.a.extend({additionalClassNames:["sending-spinner"],primaryInteractionMode:V.b(),size:Rb.TOUCH_PRIMARY}))}),spinnerLabel:V.b(s.d("CKSharing.Sending.Description")),shouldTransportButtonsBeDisabled:V.b({readOnly:!0,dependencies:["isLoading","isSavingShare"],get:Object.assign((function(){return this.isLoading||this.isSavingShare}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),footerView:V.b({defaultValue:k.c(Bb),downstreamBindings:{transportItemsForDisplay:"(owner).transportItemsForDisplay",shouldTransportButtonsBeDisabled:"(owner).shouldTransportButtonsBeDisabled"}})}),Ub=vm.a.extend({blob:null,body:H.d({get:function(){return this.blob}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDataResponse"}}),Gb=Jn.a.extend({prepare:function(){var e=this,t=arguments,n=e.__s._$35$prepare.apply(e,t);return n.responseType="blob",n},createResponse:function(e){return Ub.create({status:e?e.status:0,blob:e?e.response:null,headers:e?e.getAllResponseHeaders():null})},__superMap:{_$35$prepare:"prepare"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDataTransport"}}),Hb=iv.a.extend(B.b,{handlesType:L.d.READ.LOAD,service:H.d(),action:function(e,t){var n=this.service;K.a(n)||_.b("Unable to perform LoadImageOperationHandler action without a service");var i=e.contact;if(!i.photo)return Z.a.resolve(i);var r=this.createRequest.bind(this);function a(e){if(200===e.status)return i.imageData=e.blob,i;throw new Error("Bad server response trying to load photo for contact")}return function(){var e=r(i.photo.url);return n.processor.enqueue((function(){return e.send()}))}().then(a).catch(a)},createRequest:function(e){return this.service.createRequest(null,null,{url:e,transport:Gb.sharedInstance})},staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadImageOperationHandler"}}),Wb=P.a.extend({init:function(e){this.message=e,this.__s._$2T$init.call(this)},message:H.d(),__superMap:{_$2T$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Error"}}),$b=Wb.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"ServerTokenError"}}),zb=Wb.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"ServerError"}}),Kb=iv.a.extend(B.b,{handlesType:L.d.READ.LIST,service:H.d(),action:function(e,t){var n=e.locale,i=e.sortOrder,r=e.includePhoneNumbers,a=e.includePhotos,s=this,o=function(){var e=s._lastSyncToken,t=s._lastPrefToken;return null!==s._lastSyncToken&&null!==s._lastPrefToken?s._syncTokenInUse=!0:s._syncTokenInUse=!1,s.createRequest(e,t,i,n,r,a).send()},l=function n(i){if(pi.a(i,zb))throw new Error("Unexpected server error trying to load contacts data.");if(pi.a(i,$b))return s._lastSyncToken=null,s._lastPrefToken=null,o().then(s.handleCompletion).then(n);if(i){var r=i.syncToken,a=i.prefToken;return r&&a?(s._lastSyncToken=r,s._lastPrefToken=a):!r&&a?(s._lastSyncToken=null,s._lastPrefToken=null,u.b.error("Autocomplete contacts response error:  no sync token found.")):r&&!a&&(s._lastSyncToken=null,s._lastPrefToken=null,u.b.errror("Autocomplete contacts response error: no prefToken found.")),!s._syncTokenInUse&&s._lastSyncToken&&s._lastPrefToken&&s.service.processor.enqueue((function(){return s.action(e,t)})),Z.a.resolve(i.contacts)}},c=s.service;return o().then(s.handleCompletion).then(l).then((function(e){return K.a(e)?c.processContactRecords(e):Z.a.resolve()})).catch(s.handleCompletion).then(l)},createRequest:function(e,t,n,i,r,a){var s={locale:i.replace(/(.*)-(.*)$/,(function(e,t,n){return t+"_"+n.toUpperCase()})),order:n.value,includePhoneNumbers:r,includePhotos:a};return null!==e&&null!==t&&(s.syncToken=e,s.prefToken=t),this.service.createRequest("contacts","/co/addressbook",{queryObject:s})},handleCompletion:function(e){var t=e.status,n=100*Math.floor(t/100),i=e.encodedBody;if(200===n){if(i){if(0===i.indexOf("<"))return zb.create("Error.Generic");if("not found"===i)return zb.create("Error.NotFound");var r=e.body;return r?r.errorValue?zb.create(r.errorValue):r:zb.create("Error.Generic")}return zb.create("No encoded body in response")}switch(t){case 420:case 422:return $b.create(i);default:return zb.create(i)}},_syncTokenInUse:V.b(null),_lastSyncToken:V.b(null),_lastPrefToken:V.b(null),staticMembers:{__QUALIFIED_CLASS_NAME__:"LoadOperationHandler"}}),qb={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9",a:"2",b:"2",c:"2",d:"3",e:"3",f:"3",g:"4",h:"4",i:"4",j:"5",k:"5",l:"5",m:"6",n:"6",o:"6",p:"7",q:"7",r:"7",s:"7",t:"8",u:"8",v:"8",w:"9",x:"9",y:"9",z:"9"},Qb=P.a.extend(Tn.a,{staticMembers:{dequeuedErrorMessage:"Action dequeued from `%{processorClassName}` queue",canceledErrorMessage:"Action canceled from `%{processorClassName}` while active",__QUALIFIED_CLASS_NAME__:"BaseProcessor"},processAction:Mn.a.define(),maxConcurrentActions:Object(H.d)({defaultValue:5,set:function(e){var t=this._maxConcurrentActions;return void 0!==t&&e>t&&(this.needsProcessing=!0),e}}),enqueue:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=this.preprocessActionData?this.preprocessActionData.apply(this,n):n;var r=Z.a.create();return this.enqueueActionData(e,this._queue),this._actionDataToPromiseMap.set(e,r),this._promiseToActionDataMap.set(r,e),this.needsProcessing=!0,r},preprocessActionData:null,enqueueActionData:function(e,t){t.push(e)},dequeue:function(e,t){var n=this._queue,i=this._promiseToActionDataMap.get(e);return-1!==n.indexOf(i)&&(t=void 0!==t?t:this.payloadForDequeue(i),e.reject(t),this._clearQueuedAction(i,e),!0)},cancel:function(e,t){if(this.dequeue(e,t))return!0;var n=this._promiseToActionDataMap.get(e);return this._active.indexOf(n)>-1&&(t=void 0!==t?t:this.payloadForCancel(n),e.reject(t),this._clearActiveAction(n,e),this.needsProcessing=!0,!0)},payloadForDequeue:function(e){return new _.a(this.constructor.dequeuedErrorMessage,{processorClassName:Object(q.a)(this),processor:this,action:e})},payloadForCancel:function(e){return new _.a(this.constructor.canceledErrorMessage,{processorClassName:Object(q.a)(this),processor:this,action:e})},clearQueue:function(e){for(var t=this._queue,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForDequeue(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},abort:function(e){this.clearQueue(e);for(var t=this._active,n=this._actionDataToPromiseMap,i=this._promiseToActionDataMap,r=0,a=t.length;r<a;r++){var s=t[r];e=void 0!==e?e:this.payloadForCancel(s);var o=n.get(s);o.reject(e),n.delete(s),i.delete(o)}t.length=0},needsProcessing:Object(H.d)({defaultValue:!1,set:function(e){return e?this._processingTimer.start():this._processingTimer.stop(),e}}),process:function(e,t){this.willProcess(e,t);for(var n=this._shouldSpreadActionData,i=0;this.shouldContinueProcessing(e,i,t);){var r=e[i];if(this.shouldProcessAction(r,e,t)){e.splice(i,1),t.push(r);var a;a=n&&r?this.processAction.apply(this,r):this.processAction(r),this.completeAction(r,a),this.didProcessAction(r,e,t)}else i+=1}this.didProcess(e,t)},willProcess:U.a,shouldContinueProcessing:function(e,t,n){return e.length>t&&n.length<this.maxConcurrentActions},shouldProcessAction:function(e,t,n){return!0},completeAction:function(e,t){"object"===typeof t&&"function"===typeof t.then?t.then(this._resolveAction.bind(this,e),this._rejectAction.bind(this,e)):Object(X.a)(this._resolveAction.bind(this,e,t),0)},didProcessAction:U.a,didProcess:U.a,init:function(){var e=this,t=arguments;e.__s._$84S$init.apply(e,t),null===this._shouldSpreadActionData&&(this._shouldSpreadActionData=!this.preprocessActionData)},_shouldSpreadActionData:null,_queue:Object(k.c)(Array),_active:Object(k.c)(Array),_promiseToActionDataMap:Object(k.c)(Map),_actionDataToPromiseMap:Object(k.c)(Map),_resolveAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.resolve(t)},_rejectAction:function(e,t){var n=this._actionDataToPromiseMap.get(e);this._clearActiveAction(e,n),this.needsProcessing=!0,n.reject(t)},_clearQueuedAction:function(e,t){var n=this._queue,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_clearActiveAction:function(e,t){var n=this._active,i=n.indexOf(e);n.splice(i,1),this._actionDataToPromiseMap.delete(e),this._promiseToActionDataMap.delete(t)},_processingTimer:Object(k.c)(Pd.a,{delay:0,timesToFire:1,action:"_reprocess"}),_reprocess:function(){this.process(this._queue,this._active),this.needsProcessing=!1},__superMap:{_$84S$init:"init"}}).extend({processAction:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"Processor"}}),Yb=P.a.extend(B.b,ie.a,{createRequest:function(e,t,n){var i;return i=n.url?n.url:Kg.create({pathname:t,serviceName:e,queryObject:n.queryObject}),Yg.create({url:i,transport:n.transport,useCredentialsIfCrossOrigin:!0})},getContactFor:function(e){var t=uv.find(e,this._store);return K.a(t)&&!K.a(t.service)&&(t.service=this),t},lookUpContactByEmailAddress:function(e){return this.loadAllMetadata().then(function(){var t=this._contactsIndexedByEmailAddress[e];return K.a(t)&&1===t.length?this.getContactFor(t.toArray()[0]):null}.bind(this))},lookUpContactByPhoneNumber:function(e){return this.loadAllMetadata().then(function(){var t=this._contactsIndexedByPhoneNumber[e];return K.a(t)&&1===t.length?this.getContactFor(t.toArray()[0]):null}.bind(this))},loadMetadataFor:function(e){var t=this.getContactFor(e);return this.loadAllMetadata().then((function(){return t}))},loadImageDataFor:function(e){var t=this,n=uv.STATES,i=this.getContactFor(e);if(this.getStateFor(e).value>=n.IMAGE_DATA_LOADING.value)return this._imageDataLoadingPromises[e];this.setImageLoadingFor(e);var r=this,a=this.processor.enqueue((function(){return t.loadImageOperationHandler.action({contact:i})})).then((function(){r.setImageLoadedFor(e)})).catch((function(e){u.b.warn("Unable to load image data for contactId: "+i.contactId,e)}));return this._imageDataLoadingPromises[e]=a,a},loadAllMetadata:function(){var e=this;return K.a(this._metadataPromise)||(this._metadataPromise=this.processor.enqueue((function(){return e.loadOperationHandler.action({locale:s.c(),sortOrder:e._sortOrder,includePhoneNumbers:!0,includePhotos:!0})}))),this._metadataPromise.catch((function(e){u.b.warn("Unable to load contacts metadata.",e)}))},getStateFor:function(e){var t=this._imageLoadingStates[e],n=this._isMetadataLoaded;return n||e===this._meCardId?!n&&e!==this._meCardId||K.a(t)?K.a(t)?t:null:uv.STATES.META_DATA_LOADED:uv.STATES.NOT_LOADED},setImageLoadingFor:function(e){var t=uv.STATES;this.getStateFor(e).value<t.META_DATA_LOADED.value&&_.b("Unable to set image to loading state without loading metadata for contactId=%{id}",{id:e}),this._imageLoadingStates[e]=t.IMAGE_DATA_LOADING},setImageLoadedFor:function(e){var t=uv.STATES;this.getStateFor(e).value<t.IMAGE_DATA_LOADING.value&&_.b("Unable to set image to loaded state without loading metadata for contactId=%{id}",{id:e}),this._imageLoadingStates[e]=t.IMAGE_DATA_LOADED},processContactRecords:function(e){for(var t=0,n=(e=e.filter((function(e){var t=e.emailAddresses,n=e.phones;return t&&Array.isArray(t)||n&&Array.isArray(n)}))).length;t<n;t++){var i=e[t],r=i.emailAddresses,a=i.phones;r&&(i.emailAddresses=r.filter((function(e){return K.a(e.field)}))),a&&(i.phones=a.filter((function(e){return K.a(e.field)})))}return this.loadData(e)},loadData:function(e){return Z.a.invokeFunction(function(){this._isMetadataLoaded=!0;for(var t=this._store,n=0,i=e.length;n<i;n++){var r=e[n],a=r.contactId,s=r.emailAddresses,o=r.phones,l=this;s&&s.forEach((function(e){var t=e.field,n=l._contactsIndexedByEmailAddress,i=n[t];K.a(i)?i.add(a):n[t]=oi.a.create([a])})),o&&o.forEach((function(e){var t,n=(t=(t=((t=e.field)||"").toLowerCase()).replace(/./g,(function(e){return qb[e]||e})))&&t.replace(/[^0-9+]/g,""),i=l._contactsIndexedByPhoneNumber,r=i[n];K.a(r)?r.add(a):i[n]=oi.a.create([a])}));var c=jo.a.getStoreIdForPrimaryKey(uv,a);t.hasDataFor(c)||t.writeData(c,r)}}.bind(this))},loadMeCard:function(e){var t=this._meCardId;e.contactId=t;var n=this._store,i=jo.a.getStoreIdForPrimaryKey(uv,t);n.writeData(i,e)},getMeCard:function(){var e=this._meCardId,t=this.getContactFor(e);return K.a(t)?t:(this._store.writeData(e,{}),this.getContactFor(e))},loadOperationHandler:V.b({defaultValue:function(){return Kb.create({service:this})}}),loadImageOperationHandler:V.b({defaultValue:function(){return Hb.create({service:this})}}),processor:k.c(Qb),_store:k.c(jo.a),_contactsIndexedByEmailAddress:k.c(oi.a),_contactsIndexedByPhoneNumber:k.c(oi.a),_imageLoadingStates:k.c(Object),_imageDataLoadingPromises:k.c(Object),_metadataPromise:null,_isMetadataLoaded:V.b(!1),_sortOrder:V.b({readOnly:!0,get:function(){return yv()}}),_meCardId:"MECARD",staticMembers:{__QUALIFIED_CLASS_NAME__:"ContactsService"}}),Zb={TOUCH:"TOUCH",MOUSE:"MOUSE"};Object.freeze(Zb);var Xb=Zb.MOUSE,Jb=[Im.READ_WRITE,Im.READ_ONLY],ey=[wm.PRIVATE,wm.PUBLIC],ty=[bg.COPY_LINK],ny={keynote:"Keynote",notes:"Notes",numbers:"Numbers",pages:"Pages",iclouddrive:"Drive.File",share:"CloudKit",photos:"Photos"},iy=P.a.extend(B.b,{staticMembers:{fromJSON:function(e){return sy.call(this,e)},__QUALIFIED_CLASS_NAME__:"Settings"},appName:V.b(),addParticipantsPaneTitle:V.b({defaultValue:s.d("CKSharing.AddParticipants.Title.AddPeople")}),initiateSharePaneTitle:V.b({defaultValue:s.d("CKSharing.InitiateShare.Title")}),initiateSharePaneSubtitle:V.b({defaultValue:null}),shouldHideAddParticipantsSummary:V.b(!1),manageSharePaneTitle:V.b({defaultValue:s.d("CKSharing.ManageShare.Title")}),recordHasShare:V.b(!1),useAnonymousPublicAccess:V.b(!1),sendLinkPaneTitle:V.b({defaultValue:s.d("CKSharing.AddParticipants.Title.SendLink")}),shareUrlNamespace:V.b("share"),shareItemType:V.b({readOnly:!0,dependencies:["shareUrlNamespace"],get:Object.assign((function(){var e=this.configurableShareItemType;if(K.a(e))return e;var t=this.shareUrlNamespace,n=ny[t];return void 0===n&&_.b("Unknown shareUrlNamespace %{type}",{type:t}),n}),{__CW__getter:function(e,t,n,i){var r=this.configurableShareItemType;if(K.a(r))return r;var a=i.internalGet(this,t[0+n]),s=ny[a];return void 0===s&&_.b("Unknown shareUrlNamespace %{type}",{type:a}),s}})}),configurableShareItemType:null,CustomLoadMembershipInfoHandlerClass:V.b(),CustomAutocompleteDataSourceClass:V.b(),additionalButtonTitle:V.b(),additionalButtonWasPressed:null,canonicalizePhoneNumberRequestGenerationFunction:null,contactsService:V.b(Yb.sharedInstance),defaultAccess:V.b({readOnly:!0,dependencies:["supportedAccess"],get:Object.assign((function(e){return e||this.supportedAccess[0]}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])[0]}})}),defaultPermission:V.b({readOnly:!0,dependencies:["supportedPermissions"],get:Object.assign((function(e){return e||this.supportedPermissions[0]}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])[0]}})}),logService:V.b(),loggedInUserIdentity:V.b(),isAXMServiceAvailable:V.b(),notificationService:V.b(),didUpdateRootRecord:null,provideBodyForTransport:function(e,t){return Z.a.resolve(void 0)},provideSubjectForMail:function(){return Z.a.resolve(void 0)},provideLatestRootRecordAfterUpdateConflict:null,shareRecordFields:V.b(k.c(Object)),proposedShareRecordName:V.b(),shareThumbnail:V.b({didChange:function(e){e&&(this.shareRecordFields["cloudkit.thumbnailImageData"]={value:e})}}),maxNumberOfInvitees:V.b(100),shareTitle:V.b({get:function(e){return e},set:function(e){if(e){var t={Pages:"pages",Numbers:"numbers",Keynote:"key"}[this.shareItemType];if(t){var n=RegExp("\\."+t+"$","g");e=e.replace(n,""),this.shareType=t}return e}},didChange:function(e){e&&(this.shareRecordFields["cloudkit.title"]={value:e})}}),shareType:V.b({didChange:function(e){e&&(this.shareRecordFields["cloudkit.type"]={value:e})}}),shareUrl:V.b(),shareUrlDescription:V.b(),sharingUIIsReady:null,supportedAccess:V.b({defaultValue:k.c(ey)}),supportedPermissions:V.b({defaultValue:k.c(Jb)}),supportedTransports:V.b({defaultValue:k.c(ty)}),supportsNativeMail:V.b(!1),isAuthenticated:V.b(!0),isChinaAuthUser:H.d(!1),hostedByCloudOSOne:V.b(!0),willUpdateShareRecord:null,didUpdateShareRecord:null,primaryInteractionMode:V.b(Xb),database:null,supportsAccess:function(e){return this.supportedAccess&&-1!==this.supportedAccess.indexOf(e)},supportsPermission:function(e){return this.supportedPermissions&&-1!==this.supportedPermissions.indexOf(e)},supportsTransport:function(e){return this.supportedTransports&&-1!==this.supportedTransports.indexOf(e)}}),ry=["supportedAccess","supportedPermissions","sharingUIIsReady","additionalButtonWasPressed","recordHasShare","shareRecordFields","provideRootRecordForUpdate","provideLatestRootRecordAfterUpdateConflict","didUpdateRootRecord","willUpdateShareRecord","didUpdateShareRecord","provideBodyForTransport","supportsSchoolwork","provideSubjectForMail","database","isChinaAuthUser"],ay=["appName","additionalButtonTitle","configurableShareItemType","shareUrl","shareUrlNamespace","shareUrlDescription","primaryInteractionMode","shareTitle","shareType","shareThumbnail"];function sy(e){var t=this.create();return g.a(e)&&(ry.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),ay.forEach((function(n){J.a(e[n])&&(t[n]=e[n])}))),t}function oy(e,t,n){if(!K.a(e))return"";var i=e.loggedInUserCanEditShare,r="CKSharing.SummaryText";switch(r+=i?".OwnerAdmin":".Participant",r+=e.isPublic?".Public":".Private",n||e.effectivePermission){case Im.READ_WRITE:r+=".RW";break;case Im.READ_ONLY:r+=".RO";break;case Im.MIXED:r+=".Mixed"}return i?s.d(r+"."+t):s.d(r,{ownerName:e.owner.displayName})}function ly(e,t){return t.indexOf(e)<0?t[0]:e}function cy(e,t){var n,i;e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n=e,i=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(n,i)}var uy=globalThis.Error,dy=function(e,t){this.name="CKSharing.Error",this.message=e||"",this.context=t,this.stack=(new uy).stack};(dy.prototype=Object.create(uy.prototype)).constructor=dy;var hy=function(e){function t(t,n,i){var r;return(r=e.call(this,t,i)||this).response=n,r.errors=n&&n.errors||[],r}return cy(t,e),t}(dy);function py(e){var t=e;if(!(e instanceof dy)){var n=e||{},i={message:n.message,errors:[n],hasErrors:!0};throw new hy("CloudKit request failed",i)}throw t}function fy(e){if(e.hasErrors)throw new hy("Received CloudKit errors in response",e);return e}var gy=function(e){function t(){return e.apply(this,arguments)||this}return cy(t,e),t}(dy);function my(e){var t=e;if(!(e instanceof dy)){var n={message:(e||{}).message};t=new gy("Customer error encountered",n)}throw t}function _y(e){return e.serverErrorCode||e.ckErrorCode}function vy(e,t,n){return function(i){if(!(i.isCKError||i instanceof gy))throw i;var r,a={locNamespace:"CKSharing.ErrorDialog",interactionMode:e.interactionMode},s=_y(i),o=CloudKit.CKError,l=e.operationType,c=i.ckErrorCode;if("POLL_SHARE"!==l){switch(s){case o.ACCESS_DENIED:case"MANAGED_APPLE_ID_RESTRICTED":r=o.ACCESS_DENIED,a.descriptionLocSuffix="Description."+e.appName;break;case o.AUTHENTICATION_FAILED:case o.AUTHENTICATION_REQUIRED:throw i;case o.CONFLICT:case"OP_LOCK_FAILURE":case o.NOT_FOUND:r=l,"INVITE_TO_PUBLIC"!==l&&"SEND_LINK"!==l||(a.messageLocSuffix="Message."+e.appName),a.descriptionKey=o.CONFLICT;break;case o.ZONE_NOT_FOUND:r=e.operationType,a.descriptionKey=o.NOT_FOUND,a.descriptionLocSuffix="Description."+e.appName;break;default:if(r=e.operationType,"INVITE_TO_PUBLIC"!==l&&"SEND_LINK"!==l||(a.messageLocSuffix="Message."+e.appName),a.descriptionKey=o.UNKNOWN_ERROR,n){var u,d=i.isCKError?" response from the server.":" response from the customer";u={name:i.name,message:i.message,ckErrorCode:c,operationType:l},n.recordStat("CloudKit Sharing Framework: Unhandled "+c+d,u)}}t&&t.error(r,a)}}}var by=we.b("ShareState",{NONE:0,NEW:1,NEW_SAVING:2,LOADING:3,LOADED:4,LOADED_DIRTY:5,LOADED_SAVING:6,DESTROYING:7,DESTROYED:8}),yy=we.b("OperationType",{INITIATE_SHARE:"CREATE",ADD_PARTICIPANTS:"ADD_PEOPLE_TO",MANAGE_SHARE:"UPDATE"}),wy={mixinDependencies:[Tn.a],ioService:V.b({strong:!0}),isLoading:V.b({dependencies:["state"],readOnly:!0,get:Object.assign((function(){return this.state===by.LOADING}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===by.LOADING}})}),isDestroying:V.b({dependencies:["state"],readOnly:!0,get:Object.assign((function(){return this.state===by.DESTROYING}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===by.DESTROYING}})}),isSavingShare:V.b({dependencies:["state"],readOnly:!0,get:Object.assign((function(){return this.state===by.NEW_SAVING||this.state===by.LOADED_SAVING}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===by.NEW_SAVING||i.internalGet(this,t[0+n])===by.LOADED_SAVING}})}),cacheingProvideRootRecordFunction:null,setUp:Mn.a.define(),settings:V.b({type:iy}),share:V.b(null),state:V.b({dependencies:["_state"],readOnly:!0,get:Object.assign((function(){return this._state}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),_state:V.b({defaultValue:by.NONE}),permissionValueForAddingParticipants:V.b(),summaryTextWOption:V.b({readOnly:!0,dependencies:["permissionValueForAddingParticipants","settings.defaultPermission","share","share.loggedInUserCanEditShare","share.isPublic","share.effectivePermission","share.owner","share.owner.displayName"],get:Object.assign((function(){return oy(this.share,"WOption",this._computePermissionForSummaryText())}),{__CW__getter:function(e,t,n,i){return oy(i.internalGet(this,t[2+n]),"WOption",this._computePermissionForSummaryText())}})}),summaryTextNoOption:V.b({readOnly:!0,dependencies:["permissionValueForAddingParticipants","settings.defaultPermission","share","share.loggedInUserCanEditShare","share.isPublic","share.effectivePermission","share.owner","share.owner.displayName"],get:Object.assign((function(){return oy(this.share,"NoOption",this._computePermissionForSummaryText())}),{__CW__getter:function(e,t,n,i){return oy(i.internalGet(this,t[2+n]),"NoOption",this._computePermissionForSummaryText())}})}),_computePermissionForSummaryText:function(){var e=this.permissionValueForAddingParticipants,t=this.share,n=t&&t.effectivePermission;e&&"MIXED"!==n||(e=n);var i=this.settings;return e||i&&i.defaultPermission}},Iy=fi.a.extend(wy,{operationType:H.d(),transport:V.b(),cancelOnUnrecoverableError:function(e){var t=e.error;this.sendEvent("cancel",t)},createShare:function(e){var t=this,n=this.share,i=this.cacheingProvideRootRecordFunction,r=this.settings,a={didUpdateRootRecord:r.didUpdateRootRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:r.provideLatestRootRecordAfterUpdateConflict},s={didUpdateRootRecord:r.didUpdateRootRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:r.provideLatestRootRecordAfterUpdateConflict,didUpdateShareRecord:r.didUpdateShareRecord,proposedShareRecordName:r.proposedShareRecordName},o=this.ioService,l=null==n.shortGUID?i().then((function(e){return o.createShortGUID(e,a)})):i();this._state=by.NEW_SAVING;var c=l.then((function(e){n.forRecord=e})).then(o.createShare.bind(o,s)).then((function(e){return t._state=by.LOADED,t.share=e,e}));if(e)return c;var u={operationType:"INVITE_TO_"+(n.isPublic?"PUBLIC":"PRIVATE.VIA_UNKNOWN"),appName:r.shareItemType,interactionMode:r.primaryInteractionMode};return c.catch(vy(u,r.notificationService,r.logService))},validateInviteesToAddToShare:function(e,t){return!this.checkAndDisplayErrorForInvalidInvitees(e,t)&&(this.checkIfAllInviteesAreCurrentUser(e)?(t&&(n="ADDED_ONLY_YOURSELF_EMAIL"),this.settings.notificationService.error("ADDED_ONLY_YOURSELF",{locNamespace:"CKSharing.ErrorDialog",descriptionKey:n}),!1):!this.checkIfTooManyInvitees(this.share,e)||(this.settings.notificationService.error("TOO_MANY_INVITEES",{locNamespace:"CKSharing.ErrorDialog"}),!1));var n},checkIfTooManyInvitees:function(e,t){if(!e||e.isPublic)return!1;var n=e.participants,i=(n.length||0)-1;i+=t&&t.length||0;var r={};n.forEach((function(e){var t=e.userIdentity;r[t.emailAddress||t.phoneNumber]=!0}));var a=0;t&&t.forEach((function(e){var t=e.userIdentity;r[t.emailAddress||t.phoneNumber]?++a:r[t.emailAddress||t.phoneNumber]=!0}));var s=this.settings.maxNumberOfInvitees;return i-a>s},checkAndDisplayErrorForInvalidInvitees:function(e,t){var n,i,r=e.length,a=0;return e&&e.forEach((function(e){var r=e.userIdentity,s=e.isInvalid;(!r||!r.emailAddress&&t||!r.emailAddress&&!r.phoneNumber||s)&&(++a,n||(n=e.displayName),i||(i=e.invalidReason))})),this.displayInvalidInviteesAlert(a,r,n,i,t)},displayInvalidInviteesAlert:function(e,t,n,i,r){if(!e)return!1;var a="ALL_INVALID_TOKENS",o={locNamespace:"CKSharing.ErrorDialog.ValidateTokens"+(r?".Email":"")};if(1===e){if(a="ONE_INVALID_TOKEN",i===s.d("CKSharing.InvalidToken.NotAXMContact")&&(a="ONE_INVALID_TOKEN.NOT_IN_ORG"),n.length>69){var l=n.length,c=n.substr(0,34),u=n.substr(l-34,34);n=c+s.d("CKSharing.ErrorDialog.ValidateTokens.ONE_INVALID_TOKEN.OVER_SIZE.Ellipsis")+u}o.messageFormatValues={value:n}}else e!==t&&(a="SOME_INVALID_TOKENS");return this.settings.notificationService.error(a,o),!0},checkIfAllInviteesAreCurrentUser:function(e){return!!(e&&e.length&&e.every)&&e.every(this.checkIfInviteeIsCurrentUser.bind(this))},checkIfInviteeIsCurrentUser:function(e){var t=this.settings.loggedInUserIdentity.appleId,n=Ib(e.userIdentity.emailAddress),i=Sb(e.userIdentity.phoneNumber);return n&&n===t||i&&i===t},saveShare:function(e){var t,n=this.share,i=this.operationType;if(i&&(i===yy.INITIATE_SHARE?t="InitiatingNewShare":i===yy.ADD_PARTICIPANTS&&(t="AddingParticipantsToShare"),t)){var r=this.settings,a=this.transport;a.value&&(a=a.value),r.logService.recordStat(t,{appName:r.appName,transport:a})}return null==n.recordName?this.createShare(e):this.updateShare(e)},setUp:function(){var e=this,t=this.settings,n=this.share;if(n){this._state=by.LOADED;var i=t.shareRecordFields;return i&&n.assignFieldUpdates(i),this.permissionValueForAddingParticipants||(this.permissionValueForAddingParticipants=ly(n.effectivePermission,t.supportedPermissions)),this.sendEvent("sharingUIIsReady"),Z.a.resolve()}this._state=by.LOADING;var r=this.ioService;return this.cacheingProvideRootRecordFunction().then((function(e){return e.share&&e.share.recordName?e:r.fetchDataRecord(e.recordName)})).then((function(n){if(!n.share||!n.share.recordName)throw new Error("Record does not contain share information.");return e.ioService.fetchShareRecord(n.share.recordName).then((function(n){e._state=by.LOADED;var i=t.shareRecordFields;i&&n.assignFieldUpdates(i),e.share=n,e.permissionValueForAddingParticipants=ly(e.share.effectivePermission,t.supportedPermissions),e.sendEvent("sharingUIIsReady")}))})).catch((function(t){e.sendEvent("cancel",t)}))},updateShare:function(e){var t=this,n=this.settings,i={didUpdateRootRecord:n.didUpdateRootRecord,willUpdateShareRecord:n.willUpdateShareRecord,didUpdateShareRecord:n.didUpdateShareRecord};t._state=by.LOADED_SAVING;var r=t.ioService.updateShare(i).then((function(e){return t.sendEvent("shareWasUpdated",e,!0),t._state=by.LOADED,e}));if(e)return r;var a={operationType:"UPDATE",appName:n.shareItemType,interactionMode:n.primaryInteractionMode};return r.catch(vy(a,n.notificationService,n.logService))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseShareViewController"}});function Sy(e,t){var n=e.shortGUID,i=t&&t.shareUrl;if(Vn.a(i)){var r=e.displayedHostname||(!0===t.isChinaAuthUser?"www.icloud.com.cn":"www.icloud.com"),a=t&&t.shareUrlNamespace||"share";i="https://"+r+"/"+encodeURIComponent(a)}var s=/%\{shortGUID\}/.test(i),o=i.indexOf("#")>=0;if(s)i=ne.a(i,{shortGUID:n});else{var l=i.length-1,c=i.charAt(l);i+="#"===c||"/"===c?n:"/"+n}var u=t&&t.shareUrlDescription;if(!Vn.a(u)&&!o){var d=encodeURIComponent(u);i+="#"+(d=(d=d.replace(/_/g,"%5F")).replace(/%20/g,"_"))}return i}var Cy={pages:"CKSharing.iWork.Pages",keynote:"CKSharing.iWork.Keynote",numbers:"CKSharing.iWork.Numbers"};function Ey(e,t){var n=e.shareItemType,i="";if("CloudKit"!==n){var r=["CKSharing.AddParticipants.Email.Bodyprefix"];r.push(t.loggedInUserCanEditShare?"OwnerAdmin":"Participant"),r.push(n),i=s.d(r.join("."))}return i}function Ay(e){var t=e.shareTitle;return t?s.d("CKSharing.AddParticipants.Email.Subject.ShareTitle",{shareTitle:t}):s.d("CKSharing.AddParticipants.Email.Subject.AppName",{appName:e.appName})}function Oy(e,t,n){var i=Sy(t,e),r=bg.NATIVE_MAIL;return e.provideBodyForTransport(r,i).then((function(e){return{share:t,unencodedBody:e}})).then((function(t){var n=t.newShare;return void 0!==t.unencodedBody?t:function(e,t){var n=Ey(e,t)+"\n"+Sy(t,e);return Z.a.resolve(n)}(e,n).then((function(e){return{newShare:n,unencodedBody:e}}))})).then((function(t){var n=t.unencodedBody;return e.provideSubjectForMail().then((function(e){return{unencodedBody:n,customSubject:e}}))})).then((function(t){var i=t.customSubject,r=t.unencodedBody;return void 0===i&&(i=Ay(e)),"mailto:"+n.filter((function(e){return K.a(e.userIdentity.emailAddress)})).map((function(e){return e.displayName+"<"+e.userIdentity.emailAddress+">"})).join(",")+"?subject="+i+"&body="+encodeURIComponent(r)}))}var Ty={mixinDependencies:[Tn.a,wy],invitees:V.b(),transport:V.b(),sendShare:Mn.a.define()},My=Iy.extend(Ty,{preselectedTransport:V.b(),operationType:yy.ADD_PARTICIPANTS,invitees:V.b(Oi.c("view.invitees")),transport:V.b({dependencies:["settings.supportedTransports","preselectedTransport"],writeDependencies:[],get:Object.assign((function(e){if(e)return e;var t=bg.SCHOOLWORK,n=bg.NATIVE_MAIL,i=bg.WEB_MAIL,r=bg.COPY_LINK,a=oi.a.create(this.settings.supportedTransports),s=a.has(t)?t:a.has(n)?n:a.has(i)?i:r,o=this.preselectedTransport;return o?(a.has(o)||_.b("An unsupported transport was provided for preselectedTransport. Use `CKSharing.Service.getSupportedTransports()` to know which transports can be chosen from."),o):s}),{__CW__getter:function(e,t,n,i){if(e)return e;var r=bg.SCHOOLWORK,a=bg.NATIVE_MAIL,s=bg.WEB_MAIL,o=bg.COPY_LINK,l=oi.a.create(i.internalGetPath(this,t[0+n])),c=l.has(r)?r:l.has(a)?a:l.has(s)?s:o,u=i.internalGet(this,t[1+n]);return u?(l.has(u)||_.b("An unsupported transport was provided for preselectedTransport. Use `CKSharing.Service.getSupportedTransports()` to know which transports can be chosen from."),u):c}})}),sharePopoverIsActive:V.b(),showPermissionsDropdown:V.b({readOnly:!0,dependencies:["settings.supportedPermissions","share.isPublic"],get:Object.assign((function(){var e=this.settings.supportedPermissions;return!!(e&&e.length>1)&&!this.share.isPublic}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!(r&&r.length>1)&&!i.internalGetPath(this,t[1+n])}})}),shouldShowSendingSpinner:V.b({defaultValue:!1}),shouldShowUserName:V.b({readOnly:!0,dependencies:["share.loggedInUserCanEditShare","share.effectiveAccess"],get:Object.assign((function(){return this.share.loggedInUserCanEditShare&&this.share.effectiveAccess===wm.PRIVATE}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])===wm.PRIVATE}})}),createView:function(){var e=this.settings,t=e.primaryInteractionMode,n=e.shouldHideAddParticipantsSummary;return t===Zb.TOUCH?jb.create():kb.create(n)},view:V.b({downstreamBindings:{accessDropdownValue:"(owner).share.effectiveAccess",isLoading:"(owner).isLoading",isSavingShare:"(owner).isSavingShare",CustomLoadMembershipInfoHandlerClass:"(owner).settings.CustomLoadMembershipInfoHandlerClass",CustomAutocompleteDataSourceClass:"(owner).settings.CustomAutocompleteDataSourceClass",logService:"(owner).settings.logService",permissionDropdownValue:"(owner).permissionValueForAddingParticipants",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption",showPermissionsDropdown:"(owner).showPermissionsDropdown",supportedPermissions:"(owner).settings.supportedPermissions",supportedTransports:"(owner).settings.supportedTransports",transport:"(owner).transport",loggedInUserInfo:"(owner).loggedInUserInfo",title:"(owner).shareSpecificPaneTitle",shareButtonTitle:"(owner).shareSpecificShareButtonTitle",shouldShowUserName:"(owner).shouldShowUserName",sharePopoverIsActive:"(owner).sharePopoverIsActive",primaryInteractionMode:"(owner).settings.primaryInteractionMode",shouldShowSendingSpinner:"(owner).shouldShowSendingSpinner",shareItemType:"(owner).settings.shareItemType",hostedByCloudOSOne:"(owner).settings.hostedByCloudOSOne",loggedInUserIdentity:"(owner).settings.loggedInUserIdentity",isAXMServiceAvailable:"(owner).settings.isAXMServiceAvailable"}}),shareSpecificPaneTitle:V.b({readOnly:!0,dependencies:["share","share.isPublic","settings","settings.sendLinkPaneTitle","settings.addParticipantsPaneTitle"],get:Object.assign((function(){var e=this.share,t=this.settings;return t&&e?e.isPublic?t.sendLinkPaneTitle:t.addParticipantsPaneTitle:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);return a&&r?r.isPublic?a.sendLinkPaneTitle:a.addParticipantsPaneTitle:""}})}),shareSpecificShareButtonTitle:V.b({readOnly:!0,dependencies:["share","share.isPublic"],get:Object.assign((function(){var e=this.share;return yy.INITIATE_SHARE!==this.operationType&&e&&e.isPublic?s.d("CKSharing.Dialog.Button.Continue"):s.d("CKSharing.AddParticipants.OKButton.Share.Title")}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return yy.INITIATE_SHARE!==this.operationType&&r&&r.isPublic?s.d("CKSharing.Dialog.Button.Continue"):s.d("CKSharing.AddParticipants.OKButton.Share.Title")}})}),loggedInUserInfo:V.b({readOnly:!0,dependencies:["settings.loggedInUserIdentity"],get:Object.assign((function(){var e=this.getPath("settings.loggedInUserIdentity");if(e){var t,n=e.givenName,i=e.familyName;return(n||i)&&(t=Ne({givenName:n,familyName:i})),{displayName:t,appleId:e.appleId}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var a,s=r.givenName,o=r.familyName;return(s||o)&&(a=Ne({givenName:s,familyName:o})),{displayName:a,appleId:r.appleId}}}})}),toggleSpinner:function(){this.shouldShowSendingSpinner=!this.shouldShowSendingSpinner},sendShare:function(e){var t,n=this,i=this._state;switch(this.toggleSpinner(),this.transport){case bg.WEB_MAIL:this.sendEvent("shareByWebMail"),t=Z.a.resolve();break;case bg.SCHOOLWORK:this.sendEvent("shareBySchoolwork"),t=Z.a.resolve();break;case bg.NATIVE_MAIL:t=this.awaitPendingTokenValidations().then((function(e){return e.ok?n.shareByNativeMail(e):Z.a.resolve(e)}));break;case bg.COPY_LINK:t=this.awaitPendingTokenValidations().then((function(e){return e.ok?n.shareByCopyingLink():Z.a.resolve(e)}));break;default:throw new Error("Unrecognized transport for AddParticipantsViewController: "+this.transport,{viewController:this,transport:this.transport})}return t.finally((function(){n._state=i,n.toggleSpinner()})).then((function(e){return e&&e.ok&&n.transport===bg.NATIVE_MAIL&&n.sendEvent("didCompleteSendMessage"),e}))},setTransportAndSendShare:function(e){this.transport=e,this.sendShare()},shareByNativeMail:function(e){var t=this,n=this.share,i=this.invitees,r="INVITE_TO_";n.isPrivate?r+="PRIVATE.VIA_EMAIL."+(1===i.length?"TO_PERSON":"TO_PEOPLE"):r+="PUBLIC";var a=this.settings,o={operationType:r,appName:a.shareItemType,interactionMode:a.primaryInteractionMode};return this._state=by.LOADED_SAVING,n.isPrivate&&n.addParticipantsIgnoringDupes(i,this.permissionValueForAddingParticipants),this.saveShare(!0).then((function(e){return Oy(a,e,i)})).then((function(i){var r=a.shareItemType,o=K.a(pl.a)?a.primaryInteractionMode===Zb.TOUCH?pl.a.ACTION_SHEET:pl.a.ALERT:void 0,l=Z.a.create(),c={notificationDidComplete:function(){t.sendEvent("softShow"),l.resolve()}};return a.notificationService.info("ConfirmNativeMail",{interactionMode:a.primaryInteractionMode,messageLocSuffix:"Message."+r,descriptionLocSuffix:"Description",primaryButtonConfig:xb.create({link:i,additionalClassNames:F.b(["alert-button-container"]),title:s.d("ConfirmNativeMail.ConfirmButton"),action:"notificationDidComplete",target:c}),alternateButtonConfig:{title:s.d("ConfirmNativeMail.CloseButton"),action:"notificationDidComplete",target:c},alertStyle:o}),t.sendEvent("softHide"),t.sendEvent("didUpdateShareRecord",n,!0),l.then((function(){return e}))})).catch(vy(o,a.notificationService,a.logService)).finally((function(){t._state=by.LOADED}))},shareByCopyingLink:function(){var e=this,t=this.settings,n=t.shareItemType,i={operationType:"INVITE_TO_"+(this.share.isPublic?"PUBLIC":"PRIVATE.VIA_UNKNOWN"),appName:n,interactionMode:t.primaryInteractionMode};return this._state=by.LOADED_SAVING,this.saveShare(!0).then((function(t){return e.sendEvent("didShareByCopyingLink"),t})).catch(vy(i,t.notificationService,t.logService)).finally((function(){e._state=by.LOADED}))},saveShare:function(e){var t=this,n=this.invitees,i=this.share,r=this.permissionValueForAddingParticipants,a=null;return i.isPrivate&&(a=i.addParticipantsIgnoringDupes(n,r)),this.isShareSignificantlyDirty(i,this.ioService.mostRecentShareDataHashFromServer)?this.__s._$4aj$saveShare.call(this,e).catch((function(e){var n=Gd.a(t.share,"participants");throw K.a(a)&&K.a(n)&&(n.beginBatchedChanges(),a.reverse().forEach((function(e){if("MODIFY"===e.type){var t=e.details.permission;e.subject.permission=t}else if("INSERT"===e.type){var i=e.details.index;n.removeAt(i)}})),n.endBatchedChanges()),e})):Z.a.resolve(i)},awaitPendingTokenValidations:function(){var e=this,t=this.share,n=this.getPath("view.invitationsTextField");return t.isPublic||this.validateInviteesToAddToShare(n.invitees)?this.waitForAutocompleteHasPendingTokensToClear(n).catch((function(t){return e.showPendingValidationFailAlert(),ym.create({status:mm.BAD_REQUEST})})).then((function(){return n.hasInvalidTokens?(e.showPendingValidationFailAlert(),ym.create({status:mm.BAD_REQUEST})):ym.create({status:mm.OK})})):Z.a.resolve(ym.create({status:mm.BAD_REQUEST}))},setEffectivePermission:function(e){this.permissionValueForAddingParticipants=e},waitForAutocompleteHasPendingTokensToClear:function(e){if(!e.hasPendingTokens)return Z.a.resolve();var t=Z.a.create(),n=e.observe("hasPendingTokens",(function(e){e||(t.resolve(),n&&n.disconnect())}));return t},showPendingValidationFailAlert:function(){var e,t=this.getPath("view.invitationsTextField").tokenViews,n=t&&t.length||0,i=0;return t&&t.forEach((function(t){t.isInvalid&&(++i,e=t.value)})),this.displayInvalidInviteesAlert(i,n,e)},isShareSignificantlyDirty:function(e,t){var n=e.owner&&e.owner.isMe?null:["fields"];return _m.a(t,e.getDataHash(),n)},__superMap:{_$4aj$saveShare:"saveShare"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsViewController"}});function Dy(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Kg.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/canonicalizePhoneNumbers"}),i=Yg.create({method:"POST",url:n,body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4});if(!1===t){var r=i.url.toString();i=Wv.create(r,{method:"POST",body:e,useCredentialsIfCrossOrigin:!0,timeout:6e4})}return i}var Py=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideSubtitle",truevalue:"hidden",attributes:{}}]}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"url",attributes:{}}],classes:["copy-url",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"valueIsAlwaysLTR",truevalue:"is-always-ltr",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"expanded-access",attributes:{}}],name:"urlTextElement",attributes:{tabindex:"0"}}],classes:["copy-url-container"]},{type:"ELEMENT",tagname:"footer",children:[{type:"ELEMENT",tagname:"span",children:[{type:"VIEWOUTLET",tagname:"view",name:"closeButton"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"copyLinkButton"}],classes:["button-container"]}]}],classes:["workflow-screen","copy-link-view","sharing-dialog"]},className:"ck-sharing-copy-link-view",__QUALIFIED_CLASS_NAME__:"CopyLinkView"},isFocusable:!0,url:V.b(),title:V.b(),subtitle:V.b(),shouldHideSubtitle:V.b({readOnly:!0,dependencies:["subtitle"],get:Object.assign((function(){return Vn.a(this.subtitle)}),{__CW__getter:function(e,t,n,i){return Vn.a(i.internalGet(this,t[0+n]))}})}),valueIsAlwaysLTR:V.b(),shouldHideCopyLinkButton:V.b(),selectURL:function(){var e=this.urlTextElement,t=document.createRange();t.selectNodeContents(e);var n=globalThis.getSelection();n.removeAllRanges(),n.addRange(t),e.focus()},pointerDown:function(e){e.target===this.urlTextElement&&(this.sendEvent("selectURL",this),this.shouldHideCopyLinkButton||e.preventDefault())},copyLinkButton:V.b({downstreamBindings:{url:"(owner).url",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"},defaultValue:k.c(Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]}}},additionalClassNames:F.b(["primary"])},{title:s.d("CKSharing.ManageShare.Button.CopyLink"),action:"copyLinkAction",url:V.b(),contextKeys:["context"],shouldHideCopyLinkButton:V.b()}))}),closeButton:k.c(Ho.a.extend({additionalClassNames:F.b(["close","primary"])}),{title:s.d("CKSharing.AddParticipants.CopyLink.CloseButton.Title"),keyEquivalent:[ml.a.ESC,ml.a.RETURN],action:"close"})});function Ly(e){var t=function(e){var t=document.createElement("textarea");t.contentEditable=!0,t.style.fontSize="20px",t.readOnly=!0;var n=t.style;return n.position="absolute",n.left="-10000px",t.value=e,document.body.appendChild(t),t}(e),n=document.createRange();n.selectNodeContents(t);var i=globalThis.getSelection();i.removeAllRanges(),i.addRange(n),t.focus(),t.setSelectionRange(0,t.value.length);try{document.execCommand("copy")}catch(r){}t.blur(),document.body.removeChild(t)}function Ry(){return"function"===typeof document.queryCommandSupported&&document.queryCommandSupported("copy")}function xy(e,t){return t.map(e).find((function(e,n){return e!==t[n]}))}var Ny=fi.a.extend({viewClass:Py,view:V.b({downstreamBindings:{subtitle:"(owner).subtitle",title:"(owner).title",url:"(owner).url",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"}}),permission:V.b(),_effectivePermission:V.b({dependencies:["permission","share.effectivePermission"],readOnly:!0,get:Object.assign((function(e){return function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];if(i)return i}}([this.permission,this.getPath("share.effectivePermission"),this.getPath("settings.defaultPermission")])}),{__CW__getter:function(e,t,n,i){return function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];if(i)return i}}([i.internalGet(this,t[0+n]),i.internalGetPath(this,t[1+n]),this.getPath("settings.defaultPermission")])}})}),share:V.b(),settings:V.b(),subtitle:V.b({dependencies:["share.effectiveAccess","share.loggedInUserCanEditShare","share.owner","share.owner.displayName","_effectivePermission","settings.shareItemType"],readOnly:!0,get:Object.assign((function(){if("Photos"!==this.settings.shareItemType){var e=["CKSharing.AddParticipants.CopyLink"],t=this.share,n=this.settings,i=t.effectiveAccess,r=this._effectivePermission,a=this.share.loggedInUserCanEditShare;switch(e.push(a?"OwnerAdmin":"Participant"),e.push("Subtitle"),i){case wm.PUBLIC:e.push("Public");break;case wm.PRIVATE:e.push("Private");break;default:_.b("Unknown CKSharing.ACCESS type %{type}",{type:i})}if(a||t.isPublic)switch(r){case Im.READ_ONLY:e.push("ReadOnly");break;case Im.READ_WRITE:e.push("ReadWrite");break;case Im.MIXED:e.push("Mixed");break;default:_.b("Unknown CKSharing.PERMISSIONS type %{type}",{type:r})}return e.push(n.shareItemType),a?s.d(e.join(".")):s.d(e.join("."),{ownerDisplayName:t.owner.displayName})}}),{__CW__getter:function(e,t,n,i){if("Photos"!==i.internalGetPath(this,t[5+n])){var r=["CKSharing.AddParticipants.CopyLink"],a=this.share,o=this.settings,l=a.effectiveAccess,c=i.internalGet(this,t[4+n]),u=i.internalGetPath(this,t[1+n]);switch(r.push(u?"OwnerAdmin":"Participant"),r.push("Subtitle"),l){case wm.PUBLIC:r.push("Public");break;case wm.PRIVATE:r.push("Private");break;default:_.b("Unknown CKSharing.ACCESS type %{type}",{type:l})}if(u||a.isPublic)switch(c){case Im.READ_ONLY:r.push("ReadOnly");break;case Im.READ_WRITE:r.push("ReadWrite");break;case Im.MIXED:r.push("Mixed");break;default:_.b("Unknown CKSharing.PERMISSIONS type %{type}",{type:c})}return r.push(o.shareItemType),u?s.d(r.join(".")):s.d(r.join("."),{ownerDisplayName:a.owner.displayName})}}})}),title:V.b({dependencies:["settings.shareItemType","share.loggedInUserCanEditShare"],readOnly:!0,get:Object.assign((function(){var e="CKSharing.AddParticipants.CopyLink",t=this.getPath("share.loggedInUserCanEditShare")?"OwnerAdmin":"Participant",n="Title",i=this.getPath("settings.primaryInteractionMode")===Zb.TOUCH?"Compact":"Expanded",r=this.getPath("settings.shareItemType"),a=[e,t,n,r,i].join("."),o=[e,t,n,r].join(".");return xy(s.d,[a,o])}),{__CW__getter:function(e,t,n,i){var r="CKSharing.AddParticipants.CopyLink",a=i.internalGetPath(this,t[1+n])?"OwnerAdmin":"Participant",o="Title",l=this.getPath("settings.primaryInteractionMode")===Zb.TOUCH?"Compact":"Expanded",c=i.internalGetPath(this,t[0+n]),u=[r,a,o,c,l].join("."),d=[r,a,o,c].join(".");return xy(s.d,[u,d])}})}),url:V.b({dependencies:["share","settings"],readOnly:!0,get:Object.assign((function(){return Sy(this.share,this.settings)}),{__CW__getter:function(e,t,n,i){return Sy(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),shouldHideCopyLinkButton:V.b({dependencies:["url"],readOnly:!0,get:function(){return!Ry()}}),didAttach:function(){var e=this,t=arguments;e.__s._$1f4$didAttach.apply(e,t),this.view.selectURL(),this.sendEvent("contentDidResize")},copyLinkAction:function(e){return Ly(e.url),this.close()},close:function(){this.blur(),this.sendEvent("didCompleteCopyLink")},__superMap:{_$1f4$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CopyLinkViewController"}}),Fy=n(742),Vy={mixinDependencies:[Tn.a],connect:Mn.a.define(),disconnect:Mn.a.define(),send:Mn.a.define(),receive:Mn.a.define()},ky=P.a.extend(B.b,Vy,{incomingMessage:B.i(),outgoingMessage:B.i(),messageClass:Fy.a,autoconnect:!0,connected:!1,remoteOrigin:null,_incomingWindow:window,_outgoingWindow:V.b({set:function(e){return{actualOutgoingWindow:e}}}),init:function(){var e=this,t=arguments;e.__s._$b1$init.apply(e,t),this._handleMessage=this._handleMessage.bind(this)},connect:function(){this.connected||(this._outgoingWindow&&this._outgoingWindow.actualOutgoingWindow.postMessage||_.b("No window configured for remote end of the Channel"),Ze.a(this._incomingWindow,"message",this._handleMessage),this.connected=!0)},disconnect:function(){this.connected&&(Xe.a(this._incomingWindow,"message",this._handleMessage),this.connected=!1)},send:function(e){this.connected||_.b("Trying to send a message on a disconnected channel");var t=this.remoteOrigin;J.a(t)&&0!==t.trim().length||_.b("No origin specified for PostMessageChannel messages.");var n=e;e.bodySerializer&&(n=e.bodySerializer.encode(n)),this.outgoingMessage(e),this._outgoingWindow.actualOutgoingWindow.postMessage(n,t)},receive:function(e){e&&(e.bodySerializer&&(e.body=e.bodySerializer.decode(e.body)),this.incomingMessage(e))},_handleMessage:function(e){(function(e,t){if(e===t||"*"===e||"*"===t)return!0;var n=j.a.parse(e),i=j.a.parse(t);if(Vn.a(n.protocol)||Vn.a(i.protocol)||n.protocol!==i.protocol)return!1;if(Vn.a(n.hostname)||Vn.a(i.hostname)||n.hostname!==i.hostname)return!1;var r=n.port;Vn.a(r)&&(r="https:"===n.protocol?"443":"80");var a=i.port;return Vn.a(a)&&(a="https:"===i.protocol?"443":"80"),r===a})((e.orignalEvent||e).origin,this.remoteOrigin)&&this.receive((e.originalEvent||e).data)},_outgoingWindowDidChange:B.h("_outgoingWindow",(function(e){e&&e.actualOutgoingWindow?this.autoconnect&&this.connect():this.disconnect()})),__superMap:{_$b1$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WindowPostMessageChannel"}}).extend({iframe:V.b({set:function(e,t){return this._previousIframe=t,e}}),_setOutgoingWindowOnIFrameChange:B.h("iframe",(function(e){var t=this._previousIframe,n=this._iframeDidLoad;t&&n&&e!==t&&Xe.a(t,"load",n),e&&((this._outgoingWindow=e.contentWindow)||(n||(n=this._iframeDidLoad=function(){this._outgoingWindow=e.contentWindow,Xe.a(e,"load",this._iframeDidLoad)}.bind(this)),Ze.a(e,"load",n)))})),staticMembers:{__QUALIFIED_CLASS_NAME__:"IFrameWindowChannel"}}),By=n(398),jy=P.a.extend(B.b,{channel:V.b({type:Vy}),_messageObserver:B.h("channel.incomingMessage",(function(e){if(e){var t=By.a.sharedInstance.decode(e.context);t&&"2.0"===t.jsonrpc&&this.handleMessage(t)}})),handleMessage:Mn.a.define(),staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcBase"}}),Uy=jy.extend({init:function(e){var t=this,n=arguments;t.__s._$GZ$init.apply(t,n),e&&g.a(e.methodHandlers)&&this.registerMethodHandlers(e.methodHandlers)},registerMethodHandler:function(e,t,n){return function(e,t,n,i,r){var a=Hy.get(i),s=a&&a.has(e);s&&_.b("A handler for `%{methodName}` was already registered for channel",{methodName:e,handler:t,handlerMethodName:n,registration:s}),a||(a=new Map,Hy.set(i,a)),a.set(e,{channel:i,registrant:r,methodName:e,handler:t,handlerMethodName:n})}(e,t,n=n||e,this.channel,this),this},unregisterMethodHandler:function(e){return function(e,t,n){var i=Hy.get(t);if(i){var r=i.get(e);r&&(r.registrant!==n&&_.b("Trying to unregistring handler for %{methodName} that was not registered by JsonRpcReceiver",{methodName:e,JsonRpcReceiver:n,registration:r}),i.delete(e))}}(e,this.channel,this),this},registerMethodHandlers:function(e){for(var t,n,i,r=Object.keys(e),a=r.length,s=0;s<a;s++)n=e[t=r[s]],i=t,Array.isArray(n)&&(i=n[1],n=n[0]),this.registerMethodHandler(t,n,i);return this},handleMessage:function(e){if(e&&e.method)if(void 0===e.error&&void 0===e.result){var t=e.params||[];if(Array.isArray(t)){var n=e.id,i=function(e,t,n){var i=Hy.get(t);if(i){var r=i.get(e);return r&&r.registrant===n?r:void 0}}(e.method,this.channel,this);if(i){var r,a=i.handler,o=i.handlerMethodName;try{r=a[o].apply(a,e.params||[])}catch(c){var l=function(e){var t=G.a.application.workflowSettings;return t&&t.sharesOrigin||/\.icloud\.com$/i.test(globalThis.location.hostname)?e:e.isCKError?(delete e.stack,e):((t&&t.logService||ve.a.cloudOSService).recordStat("Exception in ck-sharing-app:",{message:e.message}),s.d("CKSharing.UnexpectedTerminationMessage"))}(c);return void this._handleHandlerError(e,l)}da.a(r)?this._handleHandlerPromise(e,r):this._handleHandlerResult(e,r)}}else this._sendErrorResponse(n,"Invalid params",Gy.INVALID_PARAMS)}else this._sendErrorResponse(n,"Invalid Request",Gy.INVALID_REQUEST)},_handleHandlerPromise:function(e,t){t.then(this._handleHandlerResult.bind(this,e),this._handleHandlerError.bind(this,e))},_handleHandlerResult:function(e,t){if(e&&void 0!==e.id)return t instanceof Error?this._handleHandlerError(e,t):this._sendResultResponse(e.id,t)},_handleHandlerError:function(e,t){if(e&&void 0!==e.id){var n=t.toJSON?JSON.stringify(t):String(t),i=t.code||Gy.UNKNOWN_ERROR,r={stack:t.stack};return this._sendErrorResponse(e.id,n,i,r)}},_sendResultResponse:function(e,t){if(void 0!==e){var n={jsonrpc:"2.0",id:e,result:t};return this.channel.send(By.a.sharedInstance.encode(n)),n}},_sendErrorResponse:function(e,t,n,i){if(void 0!==e){m.a(n)||(n=Gy.UNKNOWN_ERROR);var r={jsonrpc:"2.0",id:e,error:{code:n,message:t}};return g.a(i)&&(r.error.data=i),this.channel.send(By.a.sharedInstance.encode(r)),r}},__superMap:{_$GZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcReceiver"}}),Gy={PARSE_ERROR:-32700,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32600,INTERNAL_ERROR:-32603,UNKNOWN_ERROR:-31209},Hy=new Map,Wy=jy.extend({callMethod:function(e){this.channel||_.b("Attempted to call method '%{methodName}' on JsonRpcSender with no channel.",{methodName:e,JsonRpcSender:this});var t=ee.a(arguments,1),n={jsonrpc:"2.0",id:Ky(),method:e,params:t},i=Z.a.create();return Qy(i,n.id,this),this.channel.send(By.a.sharedInstance.encode(n)),i},callMethodWithoutResponse:function(e){this.channel||_.b("Attempted to call method '%{methodName}' on JsonRpcSender with no channel.",{methodName:e,JsonRpcSender:this});var t=ee.a(arguments,1),n={jsonrpc:"2.0",method:e,params:t};this.channel.send(By.a.sharedInstance.encode(n))},handleMessage:function(e){if(e&&void 0===e.method){var t=function(e,t){var n=qy[e];if(n&&n[1]===t)return qy[e]=void 0,n[0]}(e.id,this);t&&(void 0!==e.error?this._handleErrorResponse(e,t):this._handleResultResponse(e,t))}},_handleResultResponse:function(e,t){t.resolve(e.result)},_handleErrorResponse:function(e,t){var n=e.error;g.a(n)||(u.b.warning("Invalid error response for message "+e.id),n={code:$y,message:"Unknown error"}),t.reject(n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcSender"}}),$y=-31209,zy=0;function Ky(){return++zy}var qy={};function Qy(e,t,n){qy[t]&&_.b("A handler was already registered for response on "+t),qy[t]=[e,n]}var Yy=P.a.extend(B.b,{channel:V.b({didChange:function(e){this._transmitter.channel=e,this._receiver.channel=e}}),_transmitter:V.b(k.c(Wy)),_receiver:V.b(k.c(Uy)),init:function(e){var t=this,n=arguments;t.__s._$L3$init.apply(t,n),e&&g.a(e.methodHandlers)&&this._receiver.registerMethodHandlers(e.methodHandlers)},callMethod:function(){var e=this._transmitter.callMethod;return e.apply(this._transmitter,arguments)},callMethodWithoutResponse:function(){var e=this._transmitter.callMethodWithoutResponse;return e.apply(this._transmitter,arguments)},registerMethodHandler:function(){var e=this._receiver.registerMethodHandler;return e.apply(this._receiver,arguments)},registerMethodHandlers:function(){var e=this._receiver.registerMethodHandlers;return e.apply(this._receiver,arguments)},unregisterMethodHandler:function(){var e=this._receiver.unregisterMethodHandler;return e.apply(this._receiver,arguments)},__superMap:{_$L3$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"JsonRpcTransceiver"}}),Zy=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"iframe",attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"src",attributes:{},attribute:"src"}}},className:"ck-sharing-iframe-view",__QUALIFIED_CLASS_NAME__:"IframeView"}}),Xy=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"loadingView"}],name:"loadingViewWrapper",classes:["loading-wrapper"]},{type:"VIEWOUTLET",tagname:"view",name:"iframeView"}],classes:["mail-compose-view"]},className:"ck-sharing-mail-compose-view",__QUALIFIED_CLASS_NAME__:"MailComposeView"},loadingView:k.c(Jc.a),iframeView:k.c(Zy,{additionalClassNames:F.b(["hidden"])})}),Jy={mixinDependencies:[Tn.a,wy],composeUrl:V.b({readOnly:!0,get:function(){var e=s.c();s.a.sharedInstance.isRTL&&(e=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return um("https://"+globalThis.location.hostname+"/message/current/"+e+"/index.html#compose?willPM=true")}}),composeMail:Mn.a.define()},ew=Iy.extend(Jy,{transport:bg.WEB_MAIL,viewClass:Xy,originatorSharingWorkflowVC:H.d(),animationDuration:H.d(250),composeMail:function(e){var t=e.appName;if(!t)throw new Error("Cannot compose email: appName not specified.");this.initializeJsonRpcTransceiver(),this._composeData={subject:e.subject,body:e.body,appName:t,isForSharingWorkflow:!0}},cancelOnUnrecoverableError:function(e){var t=e.error;this.originatorSharingWorkflowVC.sendEvent("cancel",t)},createParticipantsFromEmailEntries:function(e){J.a(e)&&(e=e.split(","));var t=this.permissionValueForAddingParticipants;return e.filter((function(e){return!Vn.a(e)})).map((function(e){return fb.create({permission:t,userIdentity:Yv.createFromString(e.trim())})}),this)},init:function(){var e=this,t=arguments;e.__s._$1ck$init.apply(e,t),this.initializeJsonRpcTransceiver();var n=this.view.iframeView;n.bind("src",this.bindingFor("composeUrl"))},initializeJsonRpcTransceiver:function(){if(!this.transceiver){var e=this.view.iframeView,t=this.transceiver=Yy.create({channel:ky.create({iframe:e.element,remoteOrigin:"https://"+globalThis.location.hostname})});t.registerMethodHandler("postPopulateFieldsMessage",this,"_postPopulateFieldsMessageHandler"),t.registerMethodHandler("closeIframe",this,"_closeIframeHandler"),t.registerMethodHandler("addParticipants",this,"addParticipantsHandler"),t.registerMethodHandler("sendMessageSuccessful",this,"_sendMessageSuccessful")}},willAttach:function(){this._loadTimer=X.a(function(){var e={keyEquivalent:ml.a.RETURN,title:s.d("CKSharing.ErrorDialog.OKButton.Title"),target:this,action:"_closeIframeHandler",error:"MailComposer.LoadTimeout"};this.settings.notificationService.error("MailComposer.LoadTimeout",{locNamespace:"CKSharing.ErrorDialog",primaryButtonConfig:e})}.bind(this),6e4)},_postPopulateFieldsMessageHandler:function(){return clearTimeout(this._loadTimer),this.view.iframeView.element.classList.remove("hidden"),this.view.loadingViewWrapper.classList.add("hidden"),this.view.loadingView.isVisible=!1,this.originatorSharingWorkflowVC.sendEvent("contentDidResize"),this._composeData},_closeIframeHandler:function(){this._cleanUpTransceiver(),this.sendEvent("didCancelSendMessage")},addParticipantsHandler:function(e){var t=this.share;if(t.isPublic&&t.owner&&!t.owner.isMe)return Z.a.resolve("success");var n,i=this.permissionValueForAddingParticipants,r=this.createParticipantsFromEmailEntries(e.to),a=this.createParticipantsFromEmailEntries(e.cc),o=r.concat(a);if(t.isPrivate){if(!this.validateInviteesToAddToShare(o,!0)){var l=new Error("Add participants failed");return l.code=-1,Z.a.resolve(l)}t.addParticipantsIgnoringDupes(o,i),n="INVITE_TO_PRIVATE.VIA_EMAIL."+(1===o.length?"TO_PERSON":"TO_PEOPLE")}else{if(this.checkAndDisplayErrorForInvalidInvitees(o,!0)){var c=new Error("Add participants failed");return c.code=-1,Z.a.resolve(c)}n="INVITE_TO_PUBLIC"}if(_m.a(this.ioService.mostRecentShareDataHashFromServer,t.getDataHash())){var u=this.settings,d={operationType:n,appName:u.shareItemType,interactionMode:u.primaryInteractionMode},h=this,p=u.notificationService;return this.saveShare(!0).then((function(e){return"success"})).catch(vy(d,p,u.logService)).catch((function(e){p.error("AddingParticipants.MAIL_ADD_PARTICIPANTS_FAILED",{locNamespace:"CKSharing.ErrorDialog",primaryButtonConfig:{keyEquivalent:[ml.a.ESC,ml.a.RETURN],title:s.d("CKSharing.ErrorDialog.OKButton.Title"),target:h,action:"cancelOnUnrecoverableError",error:e}});var t=new Error("Add participants failed");return t.code=-1,t}))}return Z.a.resolve("success")},_sendMessageSuccessful:function(){this._cleanUpTransceiver(),this.sendEvent("didCompleteSendMessage")},_cleanUpTransceiver:function(){var e=this.transceiver;u.b.debug("MailComposeViewController._cleanUpTransceiver:  unregister method handlers and disconnect JsonRpcTransceiver.channel."),e.unregisterMethodHandler("postPopulateFieldsMessage",this),e.unregisterMethodHandler("closeIframe",this),e.unregisterMethodHandler("addParticipants",this),e.unregisterMethodHandler("sendMessageSuccessful",this),e.channel.disconnect(),this.transceiver=null,clearTimeout(this._loadTimer)},_loadTimer:void 0,__superMap:{_$1ck$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MailComposeViewController"}}),tw={up:0,down:1};Object.freeze(tw);var nw=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"modalBackground"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"contentWrapper",classes:["popup-content"]}],classes:["cw-popup-view","cksharing-popup-view"]},__QUALIFIED_CLASS_NAME__:"PopupView"},shouldShowModalBackground:V.b(!0),modalBackground:V.b({dependencies:["shouldShowModalBackground"],writeDependencies:[],defaultValue:k.c(In.a,{additionalClassNames:F.b(["modal-background"])}),get:Object.assign((function(e){return this.shouldShowModalBackground?e:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?e:null}}),set:function(e){return e}}),isFocusable:!0}).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"uilessSpinnerView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isTouchInteractionStyle",truevalue:"ck-sharing-touch-style",falsevalue:"ck-sharing-mouse-style",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"WorkflowPopupView"},additionalClassNames:F.b(["workflow-popup-view"]),isTouchInteractionStyle:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){return this.primaryInteractionMode===Zb.TOUCH}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Zb.TOUCH}})}),primaryInteractionMode:V.b({readOnly:!0,defaultValue:Zb.MOUSE,get:function(e){return e||Zb.MOUSE}}),uilessSpinnerView:V.b({readOnly:!0,strong:!0,dependencies:["uilessSpinnerNeedLevel"],get:Object.assign((function(){return this.uilessSpinnerNeedLevel?Jc.a.create({size:36,color:"white"}):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Jc.a.create({size:36,color:"white"}):void 0}})}),uilessSpinnerNeedLevel:V.b(0)}),iw=Cl.a.extend({delegate:null,viewClass:nw,view:V.b({downstreamBindings:{primaryInteractionMode:"(owner).contentController.settings.primaryInteractionMode"}}),softHide:function(){this.view.element.style.display="none"},softShow:function(){this.view.element.style.display=""},dragOver:function(e){e.preventDefault()},defaultFocusChild:Oi.c("contentController"),showViewController:function(e){this.contentController=e,this._appendedContentController=e},_appendedContentControllerDidChange:B.h("_appendedContentController.isAttached",(function(e){e&&this.sendEvent("contentDidResize")})),workflowDesiresUilessSpinner:function(){this.view.uilessSpinnerNeedLevel++},workflowNoLongerDesiresUilessSpinner:function(){this.view.uilessSpinnerNeedLevel=Math.max(0,this.view.uilessSpinnerNeedLevel-1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"WorkflowPopupViewController"}}),rw=iw.extend({viewClass:F.b({additionalClassNames:F.b(["schoolwork-compose"])}),didCompleteSchoolwork:function(){this.delegate.didCompleteSchoolwork(),this.animateOffScreen(tw.up)},didCancelSchoolwork:function(){this.delegate.didCancelSchoolwork(),this.animateOffScreen(tw.down)},animateOffScreen:function(e){var t=this.getPath("view.element"),n=t.classList;n?(e===tw.up?n.add("is-completing"):n.add("is-canceling"),Ze.a(t,"transitionend",this.hide.bind(this))):this.hide()},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkComposePopupViewController"}}),aw=fi.a.extend({viewClass:In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"hosted-schoolwork-view"}],classes:["schoolwork-share-view"]}}}),schoolworkHostedApplicationViewController:Ci.b({viewOutlet:"hosted-schoolwork-view"}),settings:V.b(),becomeActive:function(){return this.schoolworkHostedApplicationViewController.becomeActive()},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkComposeViewController"}}),sw=n(1315),ow=n(1316),lw=n(810),cw=n(819),uw=n(811),dw=fi.a.extend(lw.a,cw.a,{viewClass:uw.a,view:V.b({downstreamBindings:{isActive:"(owner).isActive"}}),iframeView:V.b(Oi.c("view")),staticMembers:{__QUALIFIED_CLASS_NAME__:"HostedApplicationViewController"}}),hw=P.a.extend(B.b,sw.a,ow.a,{staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkHost"}}),pw={USER_CANCELLED:"USER_CANCELLED"};Object.freeze(pw);var fw,gw=dw.extend({init:function(e,t,n){this.processInfo={record:t,zoneId:e.toHash().zoneID},this.__s._$9Y$init.call(this,n),this.userInfo.webBag=ve.a.cloudOSService.cloudOSState},host:V.b(k.c(hw)),url:V.b({readOnly:!0,get:function(){var e=globalThis.location.hostname,t=s.c();s.a.sharedInstance.isRTL&&(t=this.getPath("COSK.globals.environment.accountPreferences.secondaryLocale")||"en-us");return um("https://"+e+"/applications/schoolwork/current/"+t+"/index.html#/activity-share")}}),didEnd:function(e,t){var n=this,i=arguments;n.__s._$Ro$didEnd.apply(n,i),e===pw.USER_CANCELLED?this.sendEvent("didCancelSchoolwork"):this.sendEvent("didCompleteSchoolwork")},__superMap:{_$9Y$init:"init",_$Ro$didEnd:"didEnd"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SchoolworkHostedApplicationViewController"}}),mw=fi.a.extend({viewClass:Py,view:V.b({downstreamBindings:{subtitle:"(owner).subtitle",title:"(owner).title",url:"(owner).value",valueIsAlwaysLTR:"(owner).valueIsAlwaysLTR"}}),title:V.b(),subtitle:V.b(),value:V.b(),valueIsAlwaysLTR:V.b(),didAttach:function(){var e=this,t=arguments;e.__s._$ER$didAttach.apply(e,t),this.view.selectURL(),this.sendEvent("contentDidResize")},close:function(){this.sendEvent("didCompleteCopyText")},__superMap:{_$ER$didAttach:"didAttach"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CopyTextViewController"}}),_w={mixinDependencies:[Tn.a],convertToPrivateShare:Mn.a.define(),createShare:Mn.a.define(),deleteShare:Mn.a.define(),updateShare:Mn.a.define()},vw=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"activeView"}],classes:["workflow-view"]},className:"ck-sharing-workflow-view",__QUALIFIED_CLASS_NAME__:"WorkflowView"}}),bw=fi.a.extend({permissionValueForAddingParticipants:V.b(),ioService:V.b({strong:!0}),cacheingProvideRootRecordFunction:null,share:V.b(),settings:V.b({type:iy}),state:H.d({readOnly:!0,get:function(){return this._promise.promiseState}}),showViewController:function(e){this.activeViewController=e},start:function(e){throw new Error("start not overriden")},complete:function(){this.didComplete()},didComplete:function(){var e=Me.a(this.ioService.mostRecentShareDataHashFromServer);e&&delete e.currentUserParticipant,this._promise.resolve({share:e})},showCopyTextViewController:function(e,t,n,i){var r=mw.create({title:e,subtitle:t,value:n,valueIsAlwaysLTR:i,viewClass:F.b({additionalClassNames:F.b(["workflow-view"])})}),a=iw.extend({didCompleteCopyText:function(){this.hide()}}).create();a.showViewController(r),a.show()},cancel:function(e){this._promise.reject(e)},sharingUIIsReady:function(){var e,t=G.a.application;t&&(e=t.getPath("topFocusablePane.contentController.view.element"));var n=K.a(e)?[e.getBoundingClientRect()]:void 0;return yw(this.settings,"sharingUIIsReady",n)},additionalButtonWasPressed:function(){return yw(this.settings,"additionalButtonWasPressed",arguments)},viewClass:vw,activeViewController:Ci.a.define({viewOutlet:"activeView"}),init:function(e,t,n,i){if(!e||!e.constructor.kindOf||!e.constructor.kindOf(_w))throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires an object implementing `CKSharing.SharingIOServiceProtocol` as the first argument.");if(!t||"function"!==typeof t)throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires a cacheingProvideRootRecordFunction function of type `() -> Promise<CKSharing.CKRecord>` as the second argument");if(!n||!n.constructor.kindOf||!n.constructor.kindOf(iy))throw new Error("Dependency missing: CKSharing.WorkflowViewController.create() requires a `CKSharing.Settings` object as the third argument.");this.ioService=e,this.cacheingProvideRootRecordFunction=t,this.settings=n,this.__s._$24b$init.call(this,i)},_promise:V.b({defaultValue:k.c(Z.a)}),__superMap:{_$24b$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"WorkflowViewController"}}),yw=function(e,t,n){var i=e&&e[t];if(!Je.a(i))return!1;i.apply(i,n)},ww=iw.extend({viewClass:F.b({additionalClassNames:F.b(["mail-compose"])}),didCompleteSendMessage:function(){this.beginAnimateOffScreen(tw.up,this.delegate.didCompleteSendMessage.bind(this.delegate))},didCancelSendMessage:function(){this.delegate.didCancelSendMessage(),this.beginAnimateOffScreen(tw.down)},beginAnimateOffScreen:function(e,t){var n=this.getPath("view.element"),i=n.classList;i?(e===tw.up?i.add("is-sending"):i.add("is-canceling"),Ze.a(n,"transitionend",this.endAnimateOffScreen.bind(this,t))):this.endAnimateOffScreen(t)},endAnimateOffScreen:function(e){e&&e(),this.hide()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MailComposePopupViewController"}}),Iw=bw.extend({preselectedTransport:V.b(),addParticipantsViewController:V.b({strong:!0,get:function(){return My.create({ioService:this.bindingFor("ioService"),cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,settings:this.bindingFor("settings"),share:this.bindingFor("share"),sharePopoverIsActive:this.bindingFor("sharePopoverIsActive"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),preselectedTransport:this.bindingFor("preselectedTransport")})}}),copyLinkViewController:V.b({strong:!0,get:function(){return Ny.create({settings:this.settings,share:this.share,permission:this.bindingFor("permissionValueForAddingParticipants")})}}),mailComposeViewController:V.b({strong:!0,get:function(){return ew.create({ioService:this.bindingFor("ioService"),cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,settings:this.bindingFor("settings"),share:this.bindingFor("share"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),originatorSharingWorkflowVC:this})}}),generateSchoolworkViewController:function(e,t){var n=gw.create(e,t);return aw.create({schoolworkHostedApplicationViewController:n})},sharePopoverIsActive:V.b(),start:function(){var e=bg.COPY_LINK,t=this.settings,n=t.supportedTransports,i=1===n.length&&n[0]===e,r=this.share;return r&&r.isPublic&&i?this.showCopyLinkViewController():this.showAddUI(),t.logService.recordStat("StartedAddParticipantsWorkflow",{appName:t.appName}),this._promise},didCompleteCopyLink:function(){this.didComplete()},didCancelAddParticipant:function(){this.didComplete()},didCancelSendMessage:function(){this.sharePopoverIsActive=!1},didShareByCopyingLink:function(){this.showCopyLinkViewController(),this.sendEvent("didUpdateShareRecord",this.share,!0)},didCompleteSendMessage:function(){this.sharePopoverIsActive=!1,this.didComplete()},didCompleteSchoolwork:function(){this.sharePopoverIsActive=!1,this.didComplete()},didCancelSchoolwork:function(){this.sharePopoverIsActive=!1,this.didComplete()},shareByWebMail:function(){var e=this;if(this.sharePopoverIsActive=!0,this.share.shortGUID)return this.showComposeMailViewController().then((function(){return e.share}));var t=this.settings,n={provideRootRecordForUpdate:this.cacheingProvideRootRecordFunction,provideLatestRootRecordAfterUpdateConflict:t.provideLatestRootRecordAfterUpdateConflict,didUpdateRootRecord:t.didUpdateRootRecord},i={operationType:"INVITE_TO_PUBLIC",appName:t.shareItemType,interactionMode:t.primaryInteractionMode};return this.cacheingProvideRootRecordFunction().then((function(t){return e.ioService.createShortGUID(t,n)})).then((function(t){return e.share.shortGUID=t.shortGUID,e.showComposeMailViewController().then((function(){return e.share}))})).catch(vy(i,t.notificationService,t.logService))},shareBySchoolwork:function(){this.sharePopoverIsActive=!0,this.showSchoolworkViewController()},createComposeWindowConfiguration:function(){var e=this.settings,t=this.share,n=Sy(t,e),i=bg.WEB_MAIL;return e.provideBodyForTransport(i,n).then((function(n){var i=n;return void 0===i&&(i=function(e,t){var n=function(e,t,n,i,r,a){var o;o=n,n=(o=d_.b(o))&&o.length>0?o:null,e=d_.a(e);var l,c=(i=d_.b(i)).toLowerCase();if(i=c in Cy?s.d(Cy[c]):i,r)r=d_.a(r);else switch(a){case"pages":r="https://www.icloud.com/mail_resources/app_icons/pages@2x.png";break;case"numbers":r="https://www.icloud.com/mail_resources/app_icons/numbers@2x.png";break;case"keynote":r="https://www.icloud.com/mail_resources/app_icons/keynote@2x.png";break;case"notes":r="https://www.icloud.com/mail_resources/app_icons/notes@2x.png";break;default:r="https://www.icloud.com/mail_resources/app_icons/icloud@2x.png"}l=n?'<div style="color:#000000;font-weight:500;text-align:left;text-overflow:ellipsis;font-size:12px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#000000">'+n+'</font></a></div><div style="color:#8E8E93;font-weight:400;text-align:left;text-overflow:ellipsis;font-size:11px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#8E8E93">'+i+"</font></a></div>":'<div style="color:#000000;font-weight:500;text-align:left;text-overflow:ellipsis;font-size:12px;word-wrap:break-word;overflow:hidden;"><a rel="nofollow" href="'+e+'" style="text-decoration: none" draggable="false"><font color="#000000">'+s.d("CKSharing.RichLink.NoShareTitle",{appName:i})+"</font></a></div>";var u=s.a.sharedInstance.isRTL?"rtl":"ltr";return'<div dir="'+u+'"><div>'+t+'</div><a contenteditable="false" style="border-radius:5px;display:block;text-decoration:none;font-family:-apple-system, Helvetica, Arial, sans-serif;overflow:hidden;width:300px;" rel="nofollow" href="'+e+'" dir="'+u+'" role="button" draggable="false" width="300"><table style="table-layout:fixed;border-collapse:collapse;width:300px;background-color:#E5E6E9;font-family:-apple-system, Helvetica, Arial, sans-serif;" cellpadding="0" cellspacing="0" border="0" width="300"><tbody><tr><td vertical-align="center"><table bgcolor="#E5E6E9" cellpadding="0" cellspacing="0" width="300" style="font-family:-apple-system, Helvetica, Arial, sans-serif;table-layout:fixed;"><tbody><tr><td style="padding:9px 0px 9px 9px;" width="30"><a rel="nofollow" href="'+e+'" draggable="false"><img src="'+r+'" draggable="false" style="pointer-events:none !important;display:inline-block;width:30px;height:30px;vertical-align:middle;" width="30" height="30"></a></td><td style="padding:8px 0px 8px 0px;"><div style="max-width:100%;margin:0px 16px 0px 8px;overflow:hidden;">'+l+"</div></td></tr></tbody></table></td></tr></tbody></table></a></div>"}(Sy(t,e),Ey(e,t),e.shareTitle,e.appName,null,e.shareUrlNamespace);return'<div dir="'+(s.a.sharedInstance.isRTL?"rtl":"ltr")+'"><br><br></div>'+n}(e,t)),e.provideSubjectForMail().then((function(t){var n=t;return void 0===n&&(n=Ay(e)),{subject:n,body:i,appName:e.appName}}))}))},showAddUI:function(){var e=this.addParticipantsViewController;this.showViewController(e),e.setUp()},showComposeMailViewController:function(){var e=this;return this.createComposeWindowConfiguration(this.share).then((function(t){var n=e.mailComposeViewController;n.setUp(),n.composeMail(t);var i=e.previousViewController=e.activeViewController;i&&(n.operationType=i.operationType);var r=ww.create({delegate:e});r.showViewController(n);var a=G.a.application;a&&a.presentViewController(r)}))},showCopyLinkViewController:function(){var e=this.copyLinkViewController;this.showViewController(e)},showSchoolworkViewController:function(){var e=this;this.cacheingProvideRootRecordFunction().then((function(t){var n=e.ioService.zoneID,i=e.generateSchoolworkViewController(n,t);i.becomeActive().catch((function(e){throw e}));var r=rw.create({contentController:i,delegate:e});r.showViewController(i);var a=G.a.application;a&&a.presentViewController(r)}))},canonicalizePhoneNumbers:function(e,t){var n=this.settings;t.value=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.map((function(e){return{phoneNumber:e=Sb(e)}})),r={lookupInfos:i};return(t?t(r):Dy(r,n)).send().then((function(e){var t=e.body&&e.body.results;if(!t||!t.map)throw new Error("Server response to canonicalizePhoneNumbers returned data in an invalid format");return t.map((function(e){return e.canonicalized}))}))}(e,n.canonicalizePhoneNumberRequestGenerationFunction,n.hostedByCloudOSOne)},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsWorkflowViewController"}}),Sw=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"TEXT",data:" "}]}]},{type:"VIEWOUTLET",tagname:"view",name:"busyView"}],classes:["easy-share-view"]},__QUALIFIED_CLASS_NAME__:"EasyShareView"},busyView:V.b({readOnly:!0,get:function(){return Mb.create({isVisible:!0})}}),busyDescription:V.b(s.d("CKSharing.Busy.Loading.Description"))}),Cw=fi.a.extend({viewClass:Sw,staticMembers:{__QUALIFIED_CLASS_NAME__:"EasyShareViewController"}}),Ew={staticMembers:{className:"initiate-share-view",templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowShareOptions",truevalue:"has-share-options",attributes:{}}]}}},additionalButtonTitle:V.b(),additionalClassNames:F.b(["sharing-dialog"]),shouldShowShareOptions:V.b({readOnly:!0,dependencies:["supportedAccess","supportedPermissions"],get:Object.assign((function(){var e=this.supportedAccess,t=this.supportedPermissions;if(e&&t)return e.length>1||t.length>1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a)return r.length>1||a.length>1}})}),accessControlsSection:V.b({defaultValue:k.c(Em.extend({isToggleEnabled:!0})),downstreamBindings:{additionalButtonTitle:"(owner).additionalButtonTitle"}})},Aw=kb.extend({mixinDependencies:[Ew],staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewForMouse"}}),Ow=jb.extend({mixinDependencies:[Ew],staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewForTouch"}}),Tw=My.extend({operationType:yy.INITIATE_SHARE,showPermissionsDropdown:V.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:Object.assign((function(){var e=this.settings.supportedPermissions;return e&&e.length>1}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length>1}})}),createView:function(){var e=this.settings,t=e.primaryInteractionMode,n=e.shouldHideAddParticipantsSummary;return t===Zb.TOUCH?Ow.create():Aw.create(n)},view:V.b({downstreamBindings:{additionalButtonTitle:"(owner).settings.additionalButtonTitle",supportedAccess:"(owner).settings.supportedAccess",title:"(owner).settings.initiateSharePaneTitle",subtitle:"(owner).settings.initiateSharePaneSubtitle"}}),setEffectiveAccess:function(e){var t=this.share;t.setEffectiveAccess(e,this.permissionValueForAddingParticipants),t.effectiveAccess===wm.PUBLIC&&this.view.clearInvitationsTextField()},setEffectivePermission:function(e){var t=this.share;t.isPublic&&t.setEffectivePermission(e),this.permissionValueForAddingParticipants=e},setUp:function(){var e=this,t=arguments,n=this.settings,i=n.recordHasShare,r=Boolean(n.useAnonymousPublicAccess);if(i)e.__s._$11n$setUp.apply(e,t);else{var a=n.defaultAccess===wm.PUBLIC?n.defaultPermission:Im.NONE;this.share=this.ioService.createShareFromDataHash({fields:n.shareRecordFields,forRecord:null,publicPermission:a,shortGUID:void 0,recordType:"cloudkit.share",anonymousPublicAccess:r}),this.permissionValueForAddingParticipants=n.defaultPermission,this.sendEvent("sharingUIIsReady")}},shouldShowUserName:V.b({readOnly:!0,get:function(){return!0}}),showAXMFetchMembersAlert:function(e){e?this.settings.notificationService.error("UNABLE_TO_FETCH_MEMBERS",{locNamespace:"CKSharing.ErrorDialog.AXMGroup",messageFormatValues:{groupName:e}}):_.b("groupName is needed in order to show the alert.")},__superMap:{_$11n$setUp:"setUp"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareViewController"}}),Mw=Iw.extend({initiateShareViewControllerClass:Tw,initiateShareViewController:V.b({strong:!0,get:function(){return this.initiateShareViewControllerClass.create({cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction,ioService:this.bindingFor("ioService"),settings:this.bindingFor("settings"),share:this.bindingFor("share"),sharePopoverIsActive:this.bindingFor("sharePopoverIsActive"),permissionValueForAddingParticipants:this.bindingFor("permissionValueForAddingParticipants"),preselectedTransport:this.bindingFor("preselectedTransport")})}}),showInitiateUI:function(){var e=this.initiateShareViewController;this.showViewController(e),e.setUp()},start:function(){this.showInitiateUI();var e=this.settings;return e.logService.recordStat("StartedInitiateShareWorkflow",{appName:e.appName}),this._promise},shareByWebMail:function(){var e=this,t=arguments;this.sharePopoverIsActive=!0;var n=this.initiateShareViewController;return this.getPath("share.isPublic")&&n?n.saveShare().then((function(n){if(void 0!==n)return e.__s._$_p$shareByWebMail.apply(e,t)})):e.__s._$_p$shareByWebMail.apply(e,t)},didCancelSendMessage:function(){var e=this,t=arguments;this.getPath("share.isPublic")?this.didComplete():e.__s._$1Ix$didCancelSendMessage.apply(e,t)},__superMap:{_$_p$shareByWebMail:"shareByWebMail",_$1Ix$didCancelSendMessage:"didCancelSendMessage"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareWorkflowViewController"}}),Dw={keyDown:function(e){var t=(p.a.sharedInstance.isWindows?e.ctrlKey:e.metaKey)&&e.keyCode===ml.a.A;return t&&(this.sendEvent("selectAll"),e.preventDefault()),t||"function"===typeof this.__s._$A1$keyDown&&!!this.__s._$A1$keyDown.call(this,e)},__superMap:{_$A1$keyDown:"keyDown"}},Pw={selectionDirectionByKeyCode:(fw={},fw[ml.a.UP]=Ym.UP,fw[ml.a.DOWN]=Ym.DOWN,fw),keyDown:function(e){var t=this.selectionDirectionByKeyCode[e.keyCode],n=t instanceof Object;return n&&(this.selectInDirection(t,e),e.preventDefault()),n||"function"===typeof this.__s._$E1$keyDown&&!!this.__s._$E1$keyDown.call(this,e)},selectInDirection:function(e,t){var n=this.collection;if(n&&n.length){var i=this._findFromHandleForDirectionalSelectionAction(),r=this._findToHandleAndSelectionModeForDirectionalSelectionAction(e,t,i),a=r.toHandle,s=r.selMode,o=a instanceof Object&&a.isValid?a:i;if(o instanceof Object){this.userPerformedSelectionOperation(o,s);var l=o.isValid&&!o.wasRemoved?o:n.handleProvider.startHandle.atDistance(Math.min(n.length-1,o.position||0));l.isValid&&this.scrollToHandle(l);var c=this.layoutDelegate.cellForHandleIfPresent(l);if(c instanceof Object&&this.presenter.viewForCell){var u=this.presenter.viewForCell(c);u&&u.focus()}}}},_findFromHandleForDirectionalSelectionAction:function(){var e=this.collection,t=this.selectionController,n=t.pivot,i=t.extendedTo,r=i instanceof Object&&!i.wasRemoved?i:n;return r instanceof Object&&!r.wasRemoved||(r=e.startHandle),r},_findToHandleAndSelectionModeForDirectionalSelectionAction:function(e,t,n){var i,r=this.selectionController,a=r.pivot,s=Qm.SET;if(0===r.selection.length)i=n;else if(t.altKey)i=r.getLastHandleInDirection(n,e),t.shiftKey&&(s=Qm.EXTEND);else if(i=r.getHandleInDirection(n,e),t.shiftKey&&(s=Qm.EXTEND,i instanceof Object&&r.isItemAtHandleSelected(i)&&!(Math.min(a.position,n.position)<=i.position&&i.position<=Math.max(a.position,n.position)))){var o=r.getSelectableHandleInDirection(i,e);o instanceof Object&&(i=o)}return{toHandle:i,selMode:s}},__superMap:{_$E1$keyDown:"keyDown"}},Lw=L_.b.Ended,Rw={itemViewDidMove:function(e,t){var n=this,i=arguments;n.__s._$Hv$itemViewDidMove.apply(n,i);var r=this.owner.isCellSelected(t);if(e.isSelected=r,r&&e.parent.isFocused){var a=this.owner.selectionController,s=a.extendedTo,o=a.pivot,l=s instanceof Object?s:o,c=t.handle===l;c&&e.focus()}},itemViewDidExit:function(e,t){var n=this,i=arguments;n.__s._$RU$itemViewDidExit.apply(n,i),e.isInFocusedBranch&&(e.blur(),e.parent.focus())},viewForViewClass:function(e){var t=this,n=arguments,i=t.__s._$UI$viewForViewClass.apply(t,n),r=e.hasMixin(Kp.a)?i:this.owner,a=i.singleTapGestureRecognizer=qp.a.create({event:"selectView",delegate:r});i.addGestureRecognizer(a);var s=i.extendGestureRecognizer=qp.a.create({modifiers:[Zp.a.Shift],event:"extendSelectView",delegate:r});i.addGestureRecognizer(s);var o=i.toggleGestureRecognizer=qp.a.create({modifiers:[p.a.sharedInstance.isWindows?Zp.a.Ctrl:Zp.a.Cmd],event:"toggleSelectView",delegate:r});return i.addGestureRecognizer(o),i},__superMap:{_$Hv$itemViewDidMove:"itemViewDidMove",_$RU$itemViewDidExit:"itemViewDidExit",_$UI$viewForViewClass:"viewForViewClass"}},xw={mixinDependencies:[Rm,Kp.a,qp.b,Dw,Pw],viewClass:Object(F.b)({isFocusable:!0,init:function(){var e=this,t=arguments;e.__s._$12p$init.apply(e,t);var n=this.clearSelectionTapGestureRecognizer=Zp.b.create({event:"clearSelection",delegate:this});this.addGestureRecognizer(n)},__superMap:{_$12p$init:"init"}}),selectView:function(e){var t=e.state,n=e.view;if(t===Lw){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:Qm.SET})}},extendSelectView:function(e){var t=e.state,n=e.view;if(t===Lw){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:Qm.EXTEND})}},toggleSelectView:function(e){var t=e.state,n=e.view;if(t===Lw){var i=this.presenter.cellForView(n);i&&"item"===i.cellType&&this.sendEvent("userSelectionRequest",{view:n,operation:Qm.TOGGLE})}},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;if(e.instanceOf(qp.a)){var r=e.view;return"item"===this.presenter.cellForView(r).cellType}return n.__s._$1aq$gestureRecognizerShouldReceive.apply(n,i)},userSelectionRequest:function(e){if(e){var t=e.view,n=e.operation,i=this.presenter.cellForView(t);this.selectCell(i,n)}},itemViewClass:Object(F.b)(Qp),presenter:Object(F.b)(Rw),selectionController:Object(V.b)({defaultValue:Object(k.c)(i_),downstreamBindings:{collection:"(owner).collection",isMultipleSelectionEnabled:"(owner).isMultipleSelectionEnabled",isEmptySelectionEnabled:"(owner).isEmptySelectionEnabled"}}),selectionDelegate:Object(k.c)(P.a.extend(a_)),selectItem:function(e,t){if(this.isSelectionEnabled){var n=this.collection.indexOf(e);this.selectItemAtIndex(n,t)}},selectItemAtIndex:function(e,t){if(this.isSelectionEnabled){var n=this.collection.startHandle.at(e);this.userPerformedSelectionOperation(n,t)}},__superMap:{_$1aq$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},Nw={UNKNOWN:"UNKNOWN",INVITED:"INVITED",PENDING:"PENDING",ACCEPTED:"ACCEPTED",REMOVED:"REMOVED"};Object.freeze(Nw);var Fw={name:"person.crop.circle.fill",svgPath:"M 58.5449 14.5508 C 85.791 14.5508 108.35 -8.00781 108.35 -35.2539 C 108.35 -62.4512 85.7422 -85.0586 58.4961 -85.0586 C 31.2988 -85.0586 8.74023 -62.4512 8.74023 -35.2539 C 8.74023 -8.00781 31.3477 14.5508 58.5449 14.5508 Z M 58.5449 -63.3789 C 67.9199 -63.3789 75.293 -55.1758 75.293 -45.3125 C 75.293 -34.8145 67.9199 -26.8066 58.5449 -26.9043 C 49.1699 -27.002 41.7969 -34.8145 41.7969 -45.3125 C 41.748 -55.1758 49.1699 -63.3789 58.5449 -63.3789 Z M 88.2324 -6.34766 L 88.3789 -5.71289 C 80.9082 2.29492 69.7754 6.88477 58.5449 6.88477 C 47.3145 6.88477 36.1816 2.29492 28.7109 -5.71289 L 28.8574 -6.34766 C 33.0566 -12.207 43.5547 -18.6035 58.5449 -18.6035 C 73.584 -18.6035 84.0332 -12.207 88.2324 -6.34766 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:47.778210449218705,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6572265625",width:99.6097412109375,height:99.6572265625,translateX:-8.740283203125045,translateY:85.05859375,baseline:85.05859375,capline:14.5986328125}},Vw={mixinDependencies:[{staticMembers:{template:{type:"ELEMENT",tagname:"span",name:"iconElement"}},_iconObserver:B.h({inputs:["icon","iconStyle"],callback:function(e,t){void 0!==e&&(this.iconElement.innerHTML=e),void 0!==t&&this.iconElement.setAttribute("style",t)}}),icon:V.b(),iconStyle:V.b()}],desiredFontSize:V.b(0),layoutMode:V.b("layoutBox"),symbolMetadata:V.b(),otherSymbolProps:V.b(),_symbolMetadataObserver:B.h({inputs:["desiredFontSize","layoutMode","otherSymbolProps","symbolMetadata"],callback:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(i&&t){var r=i.svgPath,a=i[t],s=a.viewBox,o=a.height,l=a.width,c=a.translateX,u=a.translateY,d=a.baseline,h=a.capline,p="matrix(1 0 0 1 "+c+" "+u+")";if(e>0){var f=d-h,g=e/f,m=o*g,_=m/o,v=l*_;n.style="width: "+v+"px; height: "+m+"px; "+(n.style||"")}n.className="",n.className+="layoutBox"===t?" layout-box":" glyph-box";var b=document.createElement("svg");for(var y in b.setAttribute("viewBox",s),b.setAttribute("version","1.1"),b.setAttribute("xmlns","http://www.w3.org/2000/svg"),n)b.setAttribute(y,n[y]);var w=document.createElement("g");w.setAttribute("transform",p);var I=document.createElement("path");I.setAttribute("d",r),w.appendChild(I),b.appendChild(w),this.icon=b.outerHTML}else this.icon=""}})},kw=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"figure",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"img",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"photoUrl",truevalue:"photo",attributes:{}}],name:"image",styles:{transform:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"inlineTransform",attributes:{},unit:null,property:"transform"}},attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"photoUrl",attributes:{},attribute:"src"}}},{type:"VIEWOUTLET",tagname:"view",name:"silhouette"}],classes:["image-container"],name:"imageContainer"}],classes:["participant-icon-view",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"state",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldAnimate",truevalue:"should-animate",attributes:{}}],attributes:{"data-title":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"displayNameInitials",attributes:{},attribute:"data-title"}}},className:"ck-sharing-participant-icon-view",__QUALIFIED_CLASS_NAME__:"ParticipantIconView"},photoUrl:V.b(),cropRect:V.b(),displayNameInitials:V.b(),silhouette:V.b({readOnly:!0,strong:!0,dependencies:["state"],get:Object.assign((function(){if("has-silhouette"===this.state)return Bw.create()}),{__CW__getter:function(e,t,n,i){if("has-silhouette"===i.internalGet(this,t[0+n]))return Bw.create()}})}),shouldAnimate:V.b(!1),inlineTransform:V.b({readOnly:!0,dependencies:["scale","offsetX","offsetY"],get:Object.assign((function(){var e=[];return e.push("translateY(-100%) translateY(36px)"),e.push("scale("+this.scale+")"),s.a.sharedInstance.isRTL?e.push("translate("+-this.offsetX+"px, "+this.offsetY+"px)"):e.push("translate("+this.offsetX+"px, "+this.offsetY+"px)"),e.join(" ")}),{__CW__getter:function(e,t,n,i){var r=[];return r.push("translateY(-100%) translateY(36px)"),r.push("scale("+i.internalGet(this,t[0+n])+")"),s.a.sharedInstance.isRTL?r.push("translate("+-i.internalGet(this,t[1+n])+"px, "+i.internalGet(this,t[2+n])+"px)"):r.push("translate("+i.internalGet(this,t[1+n])+"px, "+i.internalGet(this,t[2+n])+"px)"),r.join(" ")}})}),init:function(){var e=this,t=this,n=arguments;t.__s._$hd$init.apply(t,n),Ze.a(this.image,"load",(function(t){e.onload(t)}))},onload:function(e){this.propertyChanged("scale")},scale:V.b({readOnly:!0,dependencies:["photoUrl","cropRect.width"],get:Object.assign((function(){var e=this.getPath("cropRect.width")||this.image.naturalWidth;return K.a(this.photoUrl)?36/e:1}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n])||this.image.naturalWidth;return K.a(i.internalGet(this,t[0+n]))?36/r:1}})}),offsetX:V.b({readOnly:!0,dependencies:["photoUrl","cropRect.x"],get:Object.assign((function(){var e=this.getPath("cropRect.x");return K.a(this.photoUrl)&&K.a(e)?-1*e:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return K.a(i.internalGet(this,t[0+n]))&&K.a(r)?-1*r:0}})}),offsetY:V.b({readOnly:!0,dependencies:["photoUrl","cropRect.y"],get:Object.assign((function(){var e=this.getPath("cropRect.y");return K.a(this.photoUrl)&&K.a(e)?e:0}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return K.a(i.internalGet(this,t[0+n]))&&K.a(r)?r:0}})}),state:V.b({readOnly:!0,dependencies:["photoUrl","displayNameInitials"],get:Object.assign((function(){return this.photoUrl?"has-icon":this.displayNameInitials?"has-initials":"has-silhouette"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"has-icon":i.internalGet(this,t[1+n])?"has-initials":"has-silhouette"}})}),__superMap:{_$hd$init:"init"}}),Bw=In.a.extend({mixinDependencies:[Vw],desiredFontSize:V.b(25),layoutMode:V.b("glyphBox"),additionalClassNames:F.b(["silhouette-svg"]),symbolMetadata:V.b({readOnly:!0,get:function(){return Fw}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SilhouetteSVG"}}),jw=zp.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"iconView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"name",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"displayNameIsPhoneNumber",truevalue:"is-phone-number",attributes:{}}]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"listLabel",attributes:{}}]}]},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"statusText",attributes:{}}]}],classes:["title-area"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"participantSettingsButton"},{type:"VIEWOUTLET",tagname:"view",name:"badge"}],classes:["item-controls"]}],classes:["container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasAcceptedShare",truevalue:"accepted",attributes:{}}],attributes:{"aria-disabled":{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"true",falsevalue:"false",attributes:{},attribute:"aria-disabled"}}},className:"ck-sharing-manage-share-list-item-view",__QUALIFIED_CLASS_NAME__:"ManageShareListItemView"},isDisabled:V.b(!1),name:V.b(Oi.c("content.displayName")),displayNameIsPhoneNumber:V.b(Oi.c("content.displayNameIsPhoneNumber")),hasAcceptedShare:V.b({readOnly:!0,dependencies:["content.acceptanceStatus"],get:Object.assign((function(){return this.getPath("content.acceptanceStatus")===Nw.ACCEPTED}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===Nw.ACCEPTED}})}),isViewOnly:V.b({readOnly:!0,dependencies:["content.permission"],get:Object.assign((function(){return this.getPath("content.permission")===Im.READ_ONLY}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===Im.READ_ONLY}})}),iconView:V.b({downstreamBindings:{displayNameInitials:"(owner).content.displayNameInitials",photoUrl:"(owner).content.addressBookContact.imageDataUrl",cropRect:"(owner).content.addressBookContact.photo.crop"},defaultValue:k.c(kw)}),listLabel:V.b({readOnly:!0,dependencies:["content.isOwner","content.isMe"],get:Object.assign((function(){return this.getPath("content.isOwner")?s.d("CKSharing.ManageShare.List.Label.Owner"):this.getPath("content.isMe")?s.d("CKSharing.ManageShare.List.Label.Me"):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?s.d("CKSharing.ManageShare.List.Label.Owner"):i.internalGetPath(this,t[1+n])?s.d("CKSharing.ManageShare.List.Label.Me"):void 0}})}),pointerOver:function(){this.sendEvent("setShouldShowParticipantSettingsButtonOnListItem",this)},shouldShowParticipantSettingsButton:V.b(),isParticipantSettingsMenuOpened:V.b(!1),participantSettingsButton:V.b({dependencies:["isDisabled"],readOnly:!0,downstreamBindings:{item:"(owner).content",shouldShow:"(owner).shouldShowParticipantSettingsButton",isParticipantSettingsMenuOpened:"(owner).isParticipantSettingsMenuOpened"},get:Object.assign((function(){return this.isDisabled?null:Uw.create()}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?null:Uw.create()}})}),statusText:V.b({readOnly:!0,dependencies:["hasAcceptedShare","isViewOnly"],get:Object.assign((function(){return this.hasAcceptedShare?this.isViewOnly?s.d("CKSharing.ManageShare.StatusText.ViewOnly"):null:s.d("CKSharing.ManageShare.StatusText.Invited")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])?s.d("CKSharing.ManageShare.StatusText.ViewOnly"):null:s.d("CKSharing.ManageShare.StatusText.Invited")}})})}),Uw=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"ellipse",classes:["background"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"15",rx:"15",cy:"15",cx:"15"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"7"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"15"}},{type:"ELEMENT",tagname:"ellipse",classes:["dot"],namespace:"http://www.w3.org/2000/svg",attributes:{ry:"3",rx:"3",cy:"15",cx:"23"}}],classes:["menu-affordance"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"15",height:"15",viewBox:"0 0 30 30"}}],classes:["menu-affordance-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShow",truevalue:"",falsevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isParticipantSettingsMenuOpened",truevalue:"open",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"ParticipantSettingsButton"},action:"showParticipantSettingsMenu",item:V.b(),contextKeys:["context","item"],shouldShow:V.b(),isParticipantSettingsMenuOpened:V.b()});function Gw(e,t,n,i,r){var a=r?void 0:Wo.b.create(),o=e.userIdentity,l=null;if(o&&(l=o.emailAddress||o.formattedPhoneNumber),l){if(r)return!0;var c=l===o.formattedPhoneNumber;a.push({title:l,titleIsAlwaysLTR:c,action:"",isDisabled:!0})}o&&(o.phoneNumber||o.emailAddress)&&a.push({title:s.d("CKSharing.ManageShare.ParticipantSettings."+(o.phoneNumber?"CopyPhoneNumber":"CopyEmail")),action:"copySelectedParticipantAddress"});var u=Im.READ_WRITE,d=Im.READ_ONLY;if(i&&n&&!e.isMe&&!e.isOwner&&!e.isOrgUser&&!t&&n){if(r)return!0;Hw(a),a.push({title:s.d("CKSharing.ManageShare.ParticipantSettings.CanEdit"),action:"setSelectedParticipantPermissionsToReadWrite",hasCheckmark:e.permission===u},{title:s.d("CKSharing.ManageShare.ParticipantSettings.ViewOnly"),action:"setSelectedParticipantPermissionsToReadOnly",hasCheckmark:e.permission===d})}if(!Yv.isCurrentUserUnauthenticated&&!e.isOwner&&!e.isOrgUser&&(i||e.isMe)&&(e.isMe||!t)){if(r)return!0;Hw(a);var h={action:"removeSelectedParticipant"};e.isMe?h.title=s.d("CKSharing.ManageShare.ParticipantSettings.RemoveMe"):t||(h.title=s.d("CKSharing.ManageShare.ParticipantSettings.RemoveAccess")),a.push(h)}return!r&&a}function Hw(e){e.length>0&&e.push({})}var Ww={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u0966":"0","\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u09e6":"0","\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ff":"9","\u0e50":"0","\u0e51":"1","\u0e52":"2","\u0e53":"3","\u0e54":"4","\u0e55":"5","\u0e56":"6","\u0e57":"7","\u0e58":"8","\u0e59":"9"},$w={"\xc4":"\xc5","\xe4":"\xe5"};function zw(e){return(e=Ww[e]||e)>="0"&&e<="9"}function Kw(e,t){for(var n="";;){var i=e.charAt(t++);if((i=Ww[i]||i)<"0"||i>"9")return n;n+=i}}function qw(e){return e<32||e<33?1:e<48?0:e<58?1:e<65?0:e<91?1:e<97?0:e<123?1:0}function Qw(e){return e<="Z"?2:e<="z"?1:3}function Yw(e,t,n){if(e===t)return 0;if(""===e)return-1;if(""===t)return 1;if($w[e]===t||$w[t]===e){var i=e;e=t,t=i}var r=(_v[e]||e).toUpperCase(),a=(_v[t]||t).toUpperCase(),s=qw(r.charCodeAt(0)),o=qw(a.charCodeAt(0));if(s!==o)return s<o?-1:1;if(r!==a)return r<a?-1:1;if(!n)return 0;var l=Qw(e),c=Qw(t);return l!==c?l<c?-1:1:e<t?-1:1}function Zw(e,t){if(Object(m.a)(e)&&Object(m.a)(t))return e<t?-1:e>t?1:0;e+="",t+="";for(var n=0,i=0,r=!1;;){var a=e.charAt(n),s=t.charAt(i);if(""!==a||""!==s)if(zw(a)&&zw(s)){var o=Kw(e,n),l=Kw(t,i);if(n+=o.length,i+=l.length,(o=parseInt(o,10))!==(l=parseInt(l,10)))return o<l?-1:1}else{++n,++i;var c=Yw(a,s,r);if(c)return c}else{if(r)return 0;r=!0,n=i=0}}}function Xw(e,t){var n=Jw(e),i=Jw(t);return n<i?-1:n>i?1:Zw(e.displayName,t.displayName)}function Jw(e){if(e.isOrgUser)return 1;if(e.isMe)return 2;if(e.isOwner)return 3;var t=e.additionalParticipantInfo;return t&&t.isOnline?4:e.acceptanceStatus===Nw.ACCEPTED?5:6}var eI=Ei.a.extend(xw,{shareIsPublic:V.b(),settings:V.b(),participants:V.b(),shareSupportsMultiplePermissions:V.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:function(){return this.getPath("settings.supportedPermissions.length")>1}}),sortedParticipantList:V.b({strong:!0,readOnly:!0,dependencies:["participants","participants.contentsDidChange","shareIsPublic","shareSupportsMultiplePermissions","loggedInUserCanEditShare"],get:Object.assign((function(e){return Wo.b.from(this.participants).sort(Xw)}),{__CW__getter:function(e,t,n,i){return Wo.b.from(i.internalGet(this,t[0+n])).sort(Xw)}})}),collection:V.b(Oi.c("sortedParticipantList")),isShareStateUnknown:V.b({defaultValue:!1,didChange:function(e){e||this.measureViewport()}}),itemViewClass:jw,layoutMetrics:{rowHeight:56,rowSpacing:1},loggedInUserCanEditShare:V.b(),_lastMenuContext:V.b(),_menuStateChangeObserve:B.h("menu.isAttached",(function(e){var t=this._lastMenuContext;t&&!e&&(t.isParticipantSettingsMenuOpened=!1)})),view:V.b({downstreamBindings:{isHidden:"(owner).isShareStateUnknown"}}),viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}}]}}},mixinDependencies:[Dp.a],scrollIndicatorTopMargin:2,scrollIndicatorBottomMargin:2,isHidden:V.b(!1)}),setShouldShowParticipantSettingsButtonOnListItem:function(e){var t,n,i,r,a=(t=e.content,n=this.shareIsPublic,i=this.shareSupportsMultiplePermissions,r=this.loggedInUserCanEditShare,Gw(t,n,i,r,!0));e.shouldShowParticipantSettingsButton=a},showParticipantSettingsMenu:function(e){var t=this.menu;if(t.isAttached)return t.hide();this._lastMenuContext=e,e.isParticipantSettingsMenuOpened=!0;var n=e.item;this.selectedParticipant=n,this.menuItems=Gw(n,this.shareIsPublic,this.shareSupportsMultiplePermissions,this.loggedInUserCanEditShare),t.show(e)},_windowDidResize:B.h(te.a.bindingFor("sharedInstance.window.width"),(function(){var e=this.menu,t=this._lastMenuContext;e.isAttached&&t&&e.show(t)})),presenter:V.b({defaultValue:k.c(Nm.a.extend({settings:V.b(),itemViewDidEnter:function(e){var t=this,n=arguments;t.__s._$1X8$itemViewDidEnter.apply(t,n),e.retain(),X.a((function(){e.iconView.shouldAnimate=!0,e.release()}),100)},itemViewDidMove:function(e,t){var n=this,i=arguments;n.__s._$1gR$itemViewDidMove.apply(n,i),e[this.dataProperty]=t.handle.value},itemViewDidExit:function(e){var t=this,n=arguments;e.iconView.shouldAnimate=!1,t.__s._$1je$itemViewDidExit.apply(t,n)},shouldLoadContacts:V.b(!0),cellsDidMove:function(e){var t=this,n=arguments;if(t.__s._$1pm$cellsDidMove.apply(t,n),e&&this.shouldLoadContacts){var i=e.objectAt(0);if(i){for(var r=e.length,a=Math.floor(r/2),s=i.handle,o=s.previous,l=this.settings.contactsService,c=0,u=a;c<u&&o.isValid;c++)tI(o.value,l),o=o.previous;for(var d=0;d<r;d++){var h=e.objectAt(d),p=h.getPath("handle.value");tI(p,l)}for(var f=e.objectAt(r-1),g=f.handle,m=g.next,_=0,v=a;_<v&&m.isValid;_++)tI(m.value,l),m=m.next}}},__superMap:{_$1X8$itemViewDidEnter:"itemViewDidEnter",_$1gR$itemViewDidMove:"itemViewDidMove",_$1je$itemViewDidExit:"itemViewDidExit",_$1pm$cellsDidMove:"cellsDidMove"}})),downstreamBindings:{itemViewClass:"(owner).itemViewClass",shouldLoadContacts:"(owner).settings.isAuthenticated",settings:"(owner).settings"}}),selectedParticipant:V.b(),setSelectedParticipantPermissionsToReadWrite:function(){return this.selectedParticipant.permission=Im.READ_WRITE,this.sendEvent("participantPermissionDidChange",this.selectedParticipant)},setSelectedParticipantPermissionsToReadOnly:function(){return this.selectedParticipant.permission=Im.READ_ONLY,this.sendEvent("participantPermissionDidChange",this.selectedParticipant)},removeSelectedParticipant:function(){return this.sendEvent("confirmRemoveParticipant",this.selectedParticipant)},showSelectedParticipantContactCard:function(){},copySelectedParticipantAddress:function(){var e=this.selectedParticipant,t=e&&e.userIdentity;if(t){var n,i=K.a(t.phoneNumber);if(n=i?t.formattedPhoneNumber:t.emailAddress,Ry())Ly(n);else{var r=i?"Phone":"Email",a=s.d("CKSharing.CopyEmailOrPhone.Title."+r),o=s.d("CKSharing.CopyEmailOrPhone.Subtitle."+r);this.sendEvent("showCopyTextViewController",a,o,n,i)}}},menuItems:V.b({strong:!0}),menu:V.b({defaultValue:function(){var e=this;return F_.extend({_menuItemForEvent:function(){var e=this,t=arguments,n=e.__s._$3Wy$_menuItemForEvent.apply(e,t);return K.a(n)?n:null},contentController:V.b({get:function(){var e=this,t=arguments,n=e.__s._$3o_$get.apply(e,t),i=n.presenter,r=i.viewForViewClass;return i.viewForViewClass=function(){var e=r.apply(this,arguments);return e.gestureRecognizers.forEach((function(t){return e.removeGestureRecognizer(t)})),e},n},__superMap:{_$3o_$get:"get"}}),keyDown:function(e){switch(e.which){case ml.a.DOWN:this.highlightNextItem();break;case ml.a.UP:this.highlightPreviousItem();break;case ml.a.LEFT:case ml.a.RIGHT:e.preventDefault();break;case ml.a.ENTER:this._activateWithItem(this.highlightedItem);break;default:return!1}},show:function(){var t=this,n=arguments;Vp.a(e,"participantsMenuDidShow"),t.__s._$4JK$show.apply(t,n)},hide:function(){var t=this,n=arguments;Vp.a(e,"participantsMenuDidHide"),t.__s._$4M7$hide.apply(t,n)},__superMap:{_$3Wy$_menuItemForEvent:"_menuItemForEvent",_$4JK$show:"show",_$4M7$hide:"hide"}}).create({target:this,listLayoutRowHeight:27,verticalAlignment:qo.Top,horizontalAlignment:Qo.Left,resolutionStrategy:Al,isFocusable:!0,arrowAlignment:Il.None})},strong:!0,downstreamBindings:{listCollection:"(owner).menuItems"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareListViewController"}});function tI(e,t){var n=e.userIdentity,i=n&&(n.emailAddress||n.phoneNumber);K.a(i)&&t&&e.loadAddressBookContact(t)}var nI=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleButton"},{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextWOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"hidden",attributes:{}}]}],classes:["container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:["summary-text",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"",falsevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"section",children:[{type:"VIEWOUTLET",tagname:"view",name:"permissionsView"},{type:"ELEMENT",tagname:"menu",children:[{type:"VIEWOUTLET",tagname:"view",name:"stopSharingButton"},{type:"ELEMENT",tagname:"span",classes:["divider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"copyLinkButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkAndStopSharing",truevalue:"hidden",attributes:{}}]}]}],classes:["options-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"isExpanded",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"has-no-dropdowns",attributes:{}}]},className:"ck-sharing-manage-share-options-view",__QUALIFIED_CLASS_NAME__:"ManageShareOptionsView"},summaryTextNoOption:V.b(),summaryTextWOption:V.b(),shouldShowShareOptions:V.b(!0),isCopyLinkDisabled:V.b(!1),isStopSharingDisabled:V.b(!1),isExpanded:V.b(!1),isHidden:V.b({dependencies:["isShareStateUnknown","shouldShowShareOptions"],readOnly:!0,get:Object.assign((function(){return this.isShareStateUnknown||!this.shouldShowShareOptions}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||!i.internalGet(this,t[1+n])}})}),isShareStateUnknown:V.b(!1),shouldHideAccessDropdown:V.b(!1),shouldHidePermissionDropdown:V.b(!1),hasNoDropdowns:V.b(),shouldHideCopyLinkAndStopSharing:V.b(),toggleButton:V.b({defaultValue:k.c(In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",namespace:"http://www.w3.org/2000/svg",attributes:{d:"m1.250001,1.062507l14.843682,14.875035l14.843815,-14.875035",fill:"none"}}],classes:["chevron"],namespace:"http://www.w3.org/2000/svg",attributes:{width:"12px",height:"11px",viewBox:"0 0 32 20"}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}]}],classes:["options-button"]}},title:s.d("CKSharing.ManageShare.Button.ShareOptions"),action:"toggleOptions"}))}),shouldHideCopyLinkButton:V.b(),copyLinkButton:V.b({defaultValue:k.c(Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideCopyLinkButton",truevalue:"hidden",attributes:{}}]}}},title:s.d("CKSharing.ManageShare.Button.CopyLink"),action:"showCopyLink",shouldHideCopyLinkButton:V.b()})),downstreamBindings:{isDisabled:"(owner).isCopyLinkDisabled",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton"}}),stopSharingButton:V.b({defaultValue:k.c(Ho.a.extend({title:s.d("CKSharing.ManageShare.Button.StopSharing"),additionalClassNames:["warning"],action:"confirmStopSharing"})),downstreamBindings:{isDisabled:"(owner).isStopSharingDisabled"}})}),iI=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"accessLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"accessSelectView"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHideAccessDropdown",truevalue:"hidden",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"label",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"permissionLabelString",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"permissionSelectView"}],classes:["row",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHidePermissionDropdown",truevalue:"hidden",attributes:{}}]}],classes:["container"]}],classes:["access-control-section",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasNoDropdowns",truevalue:"has-no-dropdowns",attributes:{}}]},className:"ck-sharing-manage-share-permissions-view",__QUALIFIED_CLASS_NAME__:"ManageSharePermissionsView"},isVisible:V.b(),hasNoDropdowns:V.b(),accessDropdownValue:V.b(),shouldHideAccessDropdown:V.b(),accessLabelString:H.d(s.d("CKSharing.AddParticipants.AccessLabel.Title")),accessOptions:V.b(),accessSelectView:V.b({defaultValue:k.c(Cm,{action:"setEffectiveAccess",ariaLabel:"Share Access Level"}),downstreamBindings:{options:"(owner).accessOptions",value:"(owner).accessDropdownValue",isVisibleOnScreen:"(owner).isVisible"}}),permissionDropdownValue:V.b(),shouldHidePermissionDropdown:V.b(),permissionLabelString:H.d(s.d("CKSharing.AddParticipants.AllowLabel.Title")),permissionOptions:V.b(),permissionSelectView:V.b({defaultValue:k.c(Cm,{action:"setEffectivePermission",ariaLabel:"Share Permission"}),downstreamBindings:{value:"(owner).permissionDropdownValue",options:"(owner).permissionOptions",isVisibleOnScreen:"(owner).isVisible"}})}),rI=fi.a.extend({viewClass:iI,view:V.b({downstreamBindings:{accessDropdownValue:"(owner).share.effectiveAccess",accessOptions:"(owner).accessOptions",hasNoDropdowns:"(owner).hasNoDropdowns",isVisible:"(owner).optionsIsExpanded",permissionDropdownValue:"(owner).permissionDropdownValue",permissionOptions:"(owner).permissionOptions",shouldHideAccessDropdown:"(owner).shouldHideAccessDropdown",shouldHidePermissionDropdown:"(owner).shouldHidePermissionDropdown"}}),settings:V.b(),permissionValueForAddingParticipants:V.b(),share:V.b(),shouldHideAccessDropdown:V.b(),shouldHidePermissionDropdown:V.b(),optionsIsExpanded:V.b(),hasNoDropdowns:V.b(),accessOptions:V.b({dependencies:["share.effectiveAccess","settings","settings.supportedAccess"],readOnly:!0,get:Object.assign((function(){if(this.settings){var e=[],t=wm.PRIVATE,n=wm.PUBLIC,i=this.share.effectiveAccess;return this.settings.supportsAccess(t)?e.push({value:t,label:s.d("CKSharing.AddParticipants.Private")}):i===t&&e.push({value:t,label:s.d("CKSharing.AddParticipants.Private"),isDisabled:!0}),this.settings.supportsAccess(n)?e.push({value:n,label:s.d("CKSharing.AddParticipants.Public")}):i===n&&e.push({value:n,label:s.d("CKSharing.AddParticipants.Public"),isDisabled:!0}),Wo.b.create(e)}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n])){var r=[],a=wm.PRIVATE,o=wm.PUBLIC,l=i.internalGetPath(this,t[0+n]);return i.internalGet(this,t[1+n]).supportsAccess(a)?r.push({value:a,label:s.d("CKSharing.AddParticipants.Private")}):l===a&&r.push({value:a,label:s.d("CKSharing.AddParticipants.Private"),isDisabled:!0}),i.internalGet(this,t[1+n]).supportsAccess(o)?r.push({value:o,label:s.d("CKSharing.AddParticipants.Public")}):l===o&&r.push({value:o,label:s.d("CKSharing.AddParticipants.Public"),isDisabled:!0}),Wo.b.create(r)}}})}),permissionDropdownValue:V.b({dependencies:["share.effectivePermission","permissionValueForAddingParticipants"],readOnly:!0,get:Object.assign((function(){if(this.share){var e=this.share.effectivePermission;return void 0===e?this.permissionValueForAddingParticipants:e}return this.permissionValueForAddingParticipants}),{__CW__getter:function(e,t,n,i){if(this.share){var r=i.internalGetPath(this,t[0+n]);return void 0===r?i.internalGet(this,t[1+n]):r}return i.internalGet(this,t[1+n])}})}),permissionOptions:V.b({dependencies:["share.effectivePermission","settings","settings.supportedPermissions"],readOnly:!0,get:Object.assign((function(){var e=this.settings;if(e){var t=[],n=Im.READ_ONLY,i=Im.READ_WRITE,r=this.share.effectivePermission;return e.supportsPermission(i)?t.push({value:i,label:s.d("CKSharing.PermissionsCombo.AllowEditing")}):r===i&&t.push({value:i,label:s.d("CKSharing.PermissionsCombo.AllowEditing"),isDisabled:!0}),e.supportsPermission(n)?t.push({value:n,label:s.d("CKSharing.PermissionsCombo.ViewOnly")}):r===n&&t.push({value:n,label:s.d("CKSharing.PermissionsCombo.ViewOnly"),isDisabled:!0}),r===Im.MIXED&&t.push({value:Im.MIXED,label:s.d("CKSharing.PermissionsCombo.Mixed"),isDisabled:!0}),Wo.b.create(t)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(r){var a=[],o=Im.READ_ONLY,l=Im.READ_WRITE,c=i.internalGetPath(this,t[0+n]);return r.supportsPermission(l)?a.push({value:l,label:s.d("CKSharing.PermissionsCombo.AllowEditing")}):c===l&&a.push({value:l,label:s.d("CKSharing.PermissionsCombo.AllowEditing"),isDisabled:!0}),r.supportsPermission(o)?a.push({value:o,label:s.d("CKSharing.PermissionsCombo.ViewOnly")}):c===o&&a.push({value:o,label:s.d("CKSharing.PermissionsCombo.ViewOnly"),isDisabled:!0}),c===Im.MIXED&&a.push({value:Im.MIXED,label:s.d("CKSharing.PermissionsCombo.Mixed"),isDisabled:!0}),Wo.b.create(a)}}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageSharePermissionsViewController"}}),aI=fi.a.extend({isCopyLinkDisabled:V.b(!1),isStopSharingDisabled:V.b(!1),permissionValueForAddingParticipants:V.b(),viewClass:nI,view:V.b({downstreamBindings:{hasNoDropdowns:"(owner).hasNoDropdowns",isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isStopSharingDisabled:"(owner).isStopSharingDisabled",isExpanded:"(owner).isExpanded",isShareStateUnknown:"(owner).isShareStateUnknown",shouldHideCopyLinkAndStopSharing:"(owner).shouldHideCopyLinkAndStopSharing",shouldHideCopyLinkButton:"(owner).shouldHideCopyLinkButton",shouldShowShareOptions:"(owner).shouldShowShareOptions",summaryTextNoOption:"(owner).summaryTextNoOption",summaryTextWOption:"(owner).summaryTextWOption"}}),permissionsViewController:Ci.a.define({viewOutlet:"permissionsView",defaultValue:k.c(rI),downstreamBindings:{hasNoDropdowns:"(owner).hasNoDropdowns",optionsIsExpanded:"(owner).isExpanded",settings:"(owner).settings",share:"(owner).share",shouldHideAccessDropdown:"(owner).shouldHideAccessDropdown",shouldHidePermissionDropdown:"(owner).shouldHidePermissionDropdown",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),shouldShowShareOptions:V.b({dependencies:["share.loggedInUserCanEditShare"],readOnly:!0,get:Object.assign((function(){return!!this.getPath("share.loggedInUserCanEditShare")}),{__CW__getter:function(e,t,n,i){return!!i.internalGetPath(this,t[0+n])}})}),settings:V.b(),share:V.b(),isShareStateUnknown:V.b(!1),summaryTextWOption:V.b(),summaryTextNoOption:V.b(),shouldHideCopyLinkButton:V.b({dependencies:["share.isPublic"],readOnly:!0,get:Object.assign((function(){return!!this.getPath("share.isPublic")}),{__CW__getter:function(e,t,n,i){return!!i.internalGetPath(this,t[0+n])}})}),isExpanded:V.b(!1),toggleOptions:function(){this.isExpanded=!this.isExpanded},shouldHideAccessDropdown:V.b({readOnly:!0,dependencies:["settings.supportedAccess"],get:Object.assign((function(){var e=this.getPath("settings.supportedAccess");return e&&e.length<2}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length<2}})}),shouldHidePermissionDropdown:V.b({readOnly:!0,dependencies:["settings.supportedPermissions"],get:Object.assign((function(){var e=this.getPath("settings.supportedPermissions");return e&&e.length<2}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.length<2}})}),hasNoDropdowns:V.b({readOnly:!0,dependencies:["shouldHideAccessDropdown","shouldHidePermissionDropdown"],get:Object.assign((function(){return this.shouldHideAccessDropdown&&this.shouldHidePermissionDropdown}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),shouldHideCopyLinkAndStopSharing:V.b({readOnly:!0,dependencies:["hasNoDropdowns","isExpanded","shouldShowShareOptions"],get:Object.assign((function(){return!(this.shouldShowShareOptions&&(this.isExpanded||this.hasNoDropdowns))}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[2+n])&&(i.internalGet(this,t[1+n])||i.internalGet(this,t[0+n])))}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareOptionsViewController"}}),sI=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"busyView"},{type:"VIEWOUTLET",tagname:"view",name:"offlineView"},{type:"VIEWOUTLET",tagname:"view",name:"contentView"},{type:"VIEWOUTLET",tagname:"view",name:"optionsView"},{type:"ELEMENT",tagname:"footer",children:[{type:"VIEWOUTLET",tagname:"view",name:"doneButton"},{type:"VIEWOUTLET",tagname:"view",name:"actionButton"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShareStateUnknown",truevalue:"hidden",attributes:{}}]}],classes:["manage-share-view","sharing-dialog",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOffline",truevalue:"is-offline",attributes:{}}]},className:"ck-sharing-manage-share-view",__QUALIFIED_CLASS_NAME__:"ManageShareView"},headerView:V.b({defaultValue:k.c(In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"header",children:[{type:"ELEMENT",tagname:"h1",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{escape:"false"}}]},{type:"ELEMENT",tagname:"h2",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"summaryTextNoOption",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSubtitle",truevalue:"hidden",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShareStateUnknown",truevalue:"hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSubtitle",truevalue:"",falsevalue:"has-summary-text",attributes:{}}]}},title:V.b(),shouldShowSubtitle:V.b(),summaryTextNoOption:V.b()})),downstreamBindings:{isShareStateUnknown:"(owner).isShareStateUnknown",shouldShowSubtitle:"(owner).shouldShowSubtitle",title:"(owner).title",summaryTextNoOption:"(owner).summaryTextNoOption"}}),title:V.b(),isCopyLinkDisabled:V.b(!1),share:V.b(),shouldShowSubtitle:V.b({readOnly:!0,dependencies:["share.loggedInUserCanEditShare"],get:Object.assign((function(){return this.getPath("share.loggedInUserCanEditShare")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),summaryTextWOption:V.b(),summaryTextNoOption:V.b(),actionButton:V.b({readOnly:!0,dependencies:["isLoading","isOffline","share.isPublic","share.loggedInUserCanEditShare"],get:Object.assign((function(){return this.isLoading||this.isOffline?null:this.getPath("share.isPublic")?this.sendLinkButton:this.getPath("share.loggedInUserCanEditShare")?this.addPeopleButton:this.copyLinkButton}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])?null:i.internalGetPath(this,t[2+n])?this.sendLinkButton:i.internalGetPath(this,t[3+n])?this.addPeopleButton:this.copyLinkButton}})}),addPeopleButton:V.b({readOnly:!0,get:function(){return Ho.a.create({action:"goToAddParticipantsUI",title:s.d("CKSharing.ManageShare.Button.AddPeople")})}}),sendLinkButton:V.b({readOnly:!0,get:function(){return Ho.a.create({action:"sendLink",title:s.d("CKSharing.ManageShare.Button.SendLink")})}}),copyLinkButton:V.b({readOnly:!0,get:function(){return Ho.a.create({action:"showCopyLink",title:s.d("CKSharing.ManageShare.Button.CopyLink")})},downstreamBindings:{isDisabled:"(owner).isCopyLinkDisabled"}}),doneButton:V.b({defaultValue:k.c(Ho.a.extend({title:s.d("CKSharing.ManageShare.Button.Close"),action:"complete",keyEquivalent:ml.a.ESC,additionalClassNames:F.b(["primary"])})),downstreamBindings:{isDisabled:"(owner).isDoneButtonDisabled"}}),busyView:V.b({readOnly:!0,get:function(){return Mb.create()},downstreamBindings:{isVisible:"(owner).isShareStateUnknown"}}),busyDescription:V.b(s.d("CKSharing.Busy.LoadingParticipants.Description")),isLoading:V.b(!1),isShareStateUnknown:V.b(!1),isTearingDown:V.b(!1),isDoneButtonDisabled:V.b({readOnly:!0,dependencies:["isLoading","isTearingDown"],get:Object.assign((function(){return this.isLoading||this.isTearingDown}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),offlineView:V.b({readOnly:!0,get:function(){return Db.create()},downstreamBindings:{isVisible:"(owner).isOffline"}}),isOffline:V.b(te.a.sharedInstance.bindingFor("isOffline"))}),oI={mixinDependencies:[Tn.a,wy],stopSharing:Mn.a.define(),removeParticipant:Mn.a.define()},lI=Iy.extend(oI,{viewClass:sI,view:V.b({downstreamBindings:{isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isShareStateUnknown:"(owner).isShareStateUnknown",isTearingDown:"(owner).isTearingDown",share:"(owner).share",title:"(owner).settings.manageSharePaneTitle",summaryTextWOption:"(owner).summaryTextWOption",summaryTextNoOption:"(owner).summaryTextNoOption"}}),contentViewController:Ci.a.define({viewOutlet:"contentView",defaultValue:k.c(eI),downstreamBindings:{isShareStateUnknown:"(owner).isShareStateUnknown",shareIsPublic:"(owner).share.isPublic",settings:"(owner).settings",participants:"(owner).share.participants",loggedInUserCanEditShare:"(owner).share.loggedInUserCanEditShare"}}),isTearingDown:V.b(!1),isCopyLinkDisabled:V.b({dependencies:["share","share.effectiveAccess","share.participants","share.effectivePermission","settings.appName"],readOnly:!0,get:Object.assign((function(){var e=!1,t=this.share;if(t){var n=this.getPath("settings.appName"),i=["Pages","Numbers","Keynote"].indexOf(n)>-1,r=1===t.participants.length&&t.effectiveAccess===wm.PRIVATE;(void 0===t.effectivePermission||i&&r)&&(e=!0)}else e=!0;return e}),{__CW__getter:function(e,t,n,i){var r=!1,a=i.internalGet(this,t[0+n]);if(a){var s=i.internalGetPath(this,t[4+n]),o=["Pages","Numbers","Keynote"].indexOf(s)>-1,l=1===a.participants.length&&a.effectiveAccess===wm.PRIVATE;(void 0===a.effectivePermission||o&&l)&&(r=!0)}else r=!0;return r}})}),isStopSharingDisabled:V.b({dependencies:["share","share.effectiveAccess","share.participants","share.participants.contentsDidChange","state"],readOnly:!0,get:Object.assign((function(){var e=this.share;return this.state===by.DESTROYING||e&&e.effectiveAccess===wm.PRIVATE&&1===e.participants.length}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[4+n])===by.DESTROYING||r&&r.effectiveAccess===wm.PRIVATE&&1===r.participants.length}})}),isShareStateUnknown:V.b({dependencies:["isDestroying","isLoading"],readOnly:!0,get:Object.assign((function(){return this.isDestroying||this.isLoading}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),optionsViewController:Ci.a.define({viewOutlet:"optionsView",defaultValue:k.c(aI),downstreamBindings:{share:"(owner).share",settings:"(owner).settings",isCopyLinkDisabled:"(owner).isCopyLinkDisabled",isStopSharingDisabled:"(owner).isStopSharingDisabled",isShareStateUnknown:"(owner).isShareStateUnknown",summaryTextWOption:"(owner).summaryTextWOption",summaryTextNoOption:"(owner).summaryTextNoOption",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),_generateConfirmationStrings:function(e){var t,n,i="CKSharing.ConfirmationDialog."+e+".",r=this.settings,a=r.shareItemType,o=r.shareTitle;t=s.d(i+"Message."+a);var l=i+"Description."+a;return"CloudKit"===a?o?(l+=".WithTitle",n=s.d(l,{shareTitle:o})):(l+=".WithoutTitle",n=s.d(l)):n=s.d(l),{message:t,description:n}},confirmStopSharing:function(){var e=this._generateConfirmationStrings("StopSharing");wn.b.show({iconNames:"ck-sharing-icon",message:e.message,description:e.description,primaryButton:{title:s.d("CKSharing.Dialog.Button.OK"),target:this,action:"stopSharing"},alternateButton:{title:s.d("CKSharing.Dialog.Button.Cancel")}})},stopSharing:function(){var e=this,t=this.share;this._state=by.DESTROYING;var n=this.settings,i={operationType:"DESTROY",appName:n.shareItemType,interactionMode:n.primaryInteractionMode},r={didUpdateRootRecord:n.didUpdateRootRecord,didUpdateShareRecord:n.didUpdateShareRecord};return this.ioService.deleteShare(t,r).then((function(t){return e._state=by.DESTROYED,e.sendEvent("shareWasDeleted",t,!0),t})).catch((function(t){throw e._state=by.LOADED,t})).catch(vy(i,n.notificationService,n.logService))},confirmRemoveParticipant:function(e){var t=void 0;e.isMe?t=this._generateConfirmationStrings("RemoveYourself"):this.getPath("share.loggedInUserCanEditShare")?2===this.getPath("share.participants.length")?t={message:s.d("CKSharing.ConfirmationDialog.RemoveFinalParticipant.Message",{name:e.displayName}),description:s.d("CKSharing.ConfirmationDialog.RemoveFinalParticipant.Description")}:this.removeParticipant(e):_.b("Should not have attempted to remove participants from share for user"),t&&wn.b.show({iconNames:"ck-sharing-icon",message:t.message,description:t.description,primaryButton:{title:s.d("CKSharing.Dialog.Button.OK"),target:this,action:"userDidConfirmParticipantRemoval",participant:e},alternateButton:{title:s.d("CKSharing.Dialog.Button.Cancel")}})},confirmSetEffectiveAccessToPrivate:function(){var e,t="CKSharing.ConfirmationDialog.PublicToPrivate.Description.",n=this.settings.shareItemType,i=this.settings.shareTitle;t+=n,"CloudKit"===n?i?(t+=".WithTitle",e=s.d(t,{shareTitle:i})):(t+=".WithoutTitle",e=s.d(t)):e=s.d(t),wn.b.show({iconNames:"ck-sharing-icon",message:s.d("CKSharing.ConfirmationDialog.PublicToPrivate.Message"),description:e,primaryButton:{title:s.d("CKSharing.Dialog.Button.OK"),target:this,action:"_setEffectiveAccessToPrivate"},alternateButton:{title:s.d("CKSharing.Dialog.Button.Cancel")}})},setEffectiveAccess:function(e){this.share.effectiveAccess===wm.PUBLIC&&e===wm.PRIVATE?this.confirmSetEffectiveAccessToPrivate():(this.share.setEffectiveAccess(e,this.settings.defaultPermission),this.updateShare())},setEffectivePermission:function(e){var t=this.share;t.setEffectivePermission(e),this.permissionValueForAddingParticipants=e,t.effectivePermission&&this.updateShare()},userDidConfirmParticipantRemoval:function(e){this.removeParticipant(e.participant)},removeParticipant:function(e){var t=this,n=this.share;if(e.isMe){var i=this.settings,r={operationType:"DESTROY",appName:i.shareItemType,interactionMode:i.primaryInteractionMode},a={didUpdateRootRecord:i.didUpdateRootRecord,didUpdateShareRecord:i.didUpdateShareRecord};return this.ioService.deleteShare(n,a).then((function(){var e=t.share;return t._state=by.DESTROYED,t.sendEvent("itemIsNoLongerSharedWithMe",e,!0),e})).catch((function(e){throw t._state=by.LOADED,e})).catch(vy(r,i.notificationService,i.logService))}var s=n.findEquivalentParticipant(e);return n.participants.remove(s),this.permissionValueForAddingParticipants=ly(n.effectivePermission,this.settings.supportedPermissions),this.updateShare()},participantPermissionDidChange:function(e){var t=this.share;return t.participantPermissionChanged(),this.permissionValueForAddingParticipants=ly(t.effectivePermission,this.settings.supportedPermissions),this.updateShare()},_setEffectiveAccessToPrivate:function(){var e=this,t=this.share,n=this.settings,i=this.cacheingProvideRootRecordFunction;t.setEffectiveAccess(wm.PRIVATE,n.defaultAccess);for(var r=t.participants||[],a=r.length-1;a>=0;a--)r.objectAt(a).isOwner||r.removeAt(a);this._state=by.LOADED_SAVING;var s={didUpdateRootRecord:n.didUpdateRootRecord,didUpdateShareRecord:n.didUpdateShareRecord,provideRootRecordForUpdate:i,provideLatestRootRecordAfterUpdateConflict:n.provideLatestRootRecordAfterUpdateConflict},o={operationType:"UPDATE",appName:n.shareItemType,interactionMode:n.primaryInteractionMode};return i().then((function(t){return e.ioService.convertToPrivateShare(t,s)})).then((function(t){return e.share=t,e.sendEvent("shareWasUpdated",t,!0),t})).catch(vy(o,n.notificationService,n.logService)).finally((function(){e._state=by.LOADED}))},goToAddParticipantsUI:function(){var e=this.share;if(!e||e.isPublic)return!1;var t=(e&&e.participants&&e.participants.length||0)-1,n=this.settings.maxNumberOfInvitees;return!!(n&&t>=n)&&(this.displayCKSharingErrorDialog("AddingParticipants.TOO_MANY_INVITEES"),!0)},_loadAddressBookForOwner:B.h("share.owner","settings","settings.contactsService",(function(e,t){e&&t&&t.contactsService&&e.loadAddressBookContact(t.contactsService)})),staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareViewController"}});function cI(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return uI(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uI(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var dI=function(e,t,n,i){var r=gI({shareRecordName:n,database:e,zoneIDHash:t,delegate:i}),a=wI(e,t,n),s=K.a(a)?Z.a.resolve(c.okResult(a)):vI(e,t)(n).then((function(e){var t=!fI.has(r),n=Gd.a(e,"response.hasErrors");return t?c.cancelledResult():!n&&K.a(e.records)?c.okResult(e.records[0]):c.failedResult()}));return[r,s]},hI=function(e){return mI(e)},pI=0,fI=new Map,gI=function(e){var t=pI++;return fI.set(t,e),CI(),t},mI=function(e){return fI.delete(e)},_I=new Map,vI=function(e,t){var n=function(e,t){var n=K.a(t.ownerRecordName)?"::"+t.ownerRecordName:"";return e.containerIdentifier+"::"+e.databaseScope+"::"+t.zoneName+n}(e,t),i=_I.get(n);if(K.a(i))return i;var r=II.bind(null,e,t);return _I.set(n,r),r},bI=new Map,yI=function(e,t,n){return e.containerIdentifier+"::"+e.databaseScope+"::"+t.zoneName+"::"+n},wI=function(e,t,n){return bI.get(yI(e,t,n))};function II(e,t,n){return e.fetchRecords(n,{zoneID:t}).catch(py).then(fy).catch(Tl.a).then((function(n){return!Gd.a(n,"response.hasErrors")&&K.a(n.records)&&n.records.forEach((function(n){return function(e,t,n,i){return bI.set(yI(e,t,n),i)}(e,t,n.recordName,n)})),n}))}var SI=!1,CI=function e(){if(!0!==SI){SI=!0;var t=function(){return 0!==fI.size};X.a((function(){!0===t()?function(){for(var e,t=new Map,n=cI(fI);!(e=n()).done;){var i=e.value,r=i[0],a=i[1],s=vI(a.database,a.zoneIDHash);t.has(s)?t.get(s).push([r,a]):t.set(s,[[r,a]])}for(var o,l=[],c=function(){var e=o.value,t=e[0],n=e[1],i=n.map((function(e){return e[0],{recordName:e[1].shareRecordName}})),r=new Map(n.map((function(e){e[0];var t=e[1];return[t.shareRecordName,wI(t.database,t.zoneIDHash,t.shareRecordName)]}))),a=t(i).then((function(e){var t,i;return!Gd.a(e,"response.hasErrors")&&K.a(e.records)?(t=e.records,i=n,t.map((function(e,t){return[e,i[t]]}))).filter((function(e,t){var n=e[0],i=(e[1],r.get(n.recordName));return K.a(i)&&i.recordChangeTag!==n.recordChangeTag})):null}));l.push(a)},u=cI(t);!(o=u()).done;)c();return Z.a.all(l).then((function(e){return e.filter((function(e){return null!==e})).reduce((function(e,t){return[].concat(e,t)}),[])}))}().then((function(n){n.forEach((function(e){var t=e[0],n=e[1],i=n[0],r=n[1];fI.has(i)&&r.delegate.shareWasUpdated(t)})),SI=!1,!0===t()&&e()})):SI=!1}),23e3)}},EI=bw.extend({watchHandle:null,stopWatchingForChanges:function(){hI(this.watchHandle)},startWatchingForChanges:function(){this.stopWatchingForChanges();var e=this.share;if(e){var t=this.ioService,n=dI(t.database,t.zoneID.toHash().zoneID,e.recordName,this);this.watchHandle=n[0]}},shareWasUpdated:function(e){var t=this.ioService,n=t.materializedShareRecord;K.a(n)&&n.recordChangeTag===e.recordChangeTag||(t.materializedShareRecord.replaceData(e),t.materializedShareRecord.participants.forEach((function(e){e.propertyChanged("userIdentity")})),"function"===typeof this.settings.didUpdateShareRecord&&this.settings.didUpdateShareRecord(e))},participantsMenuDidShow:function(){this.isAttached&&this.stopWatchingForChanges()},participantsMenuDidHide:function(){this.isAttached&&this.startWatchingForChanges()},copyLinkViewControllerClass:H.d({readOnly:!0,defaultValue:Ny}),manageShareViewController:V.b({strong:!0,get:function(){return lI.create({cacheingProvideRootRecordFunction:this.cacheingProvideRootRecordFunction})},downstreamBindings:{ioService:"(owner).ioService",settings:"(owner).settings",share:"(owner).share",permissionValueForAddingParticipants:"(owner).permissionValueForAddingParticipants"}}),complete:function(){var e=this;this.manageShareViewController.isTearingDown=!0;var t=this.share;if(t&&t.isPrivate&&1===t.participants.length&&this.manageShareViewController.stopSharing(),this.ioService.isServiceBusy){var n=B.c.create(this,{inputs:["ioService.isServiceBusy"],notifyOnCreate:!1,callback:function(t){t||(n.disconnect(),e.didComplete())}});n.connect()}else this.didComplete()},didComplete:function(){var e=this,t=arguments;this.stopWatchingForChanges(),e.__s._$1Wx$didComplete.apply(e,t)},cancel:function(){var e=this,t=arguments;this.stopWatchingForChanges(),e.__s._$1YM$cancel.apply(e,t)},start:function(){var e=this;this.showListUI().then((function(){e.isDisposed||e.startWatchingForChanges()})).catch((function(t){e.cancel(t)}));var t=this.settings;return t.logService.recordStat("StartedManageShareWorkflow",{appName:t.appName}),this._promise},showListUI:function(){var e=this.manageShareViewController;return this.showViewController(e),e.setUp()},goToAddParticipantsUI:function(){var e=this,t=this.activeViewController,n=Iw.create(this.ioService,this.cacheingProvideRootRecordFunction,this.settings,{share:this.bindingFor("share"),permissionValueForAddingParticipants:this.permissionValueForAddingParticipants});n.start().then((function(){e.showViewController(t)})).catch((function(t){e.cancel(t)})),this.showViewController(n)},didCompleteCopyLink:function(){this.didComplete()},showCopyLink:function(){var e=this.createBoundCopyLinkViewController();this.showViewController(e)},sendLink:function(){var e=this.getPath("settings.supportedTransports");e&&e.length>1?this.goToAddParticipantsUI():this.showCopyLink()},itemIsNoLongerSharedWithMe:function(e,t){this.nextResponder&&this.nextResponder.sendEvent("itemIsNoLongerSharedWithMe",e,t),this.didComplete()},shareWasDeleted:function(e,t){this.share=e,this.nextResponder&&this.nextResponder.sendEvent("shareWasDeleted",e,t),this.didComplete()},createBoundCopyLinkViewController:function(){return this.copyLinkViewControllerClass.create({settings:this.bindingFor("settings"),share:this.bindingFor("share")})},__superMap:{_$1Wx$didComplete:"didComplete",_$1YM$cancel:"cancel"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ManageShareWorkflowViewController"}}),AI=bw.extend({loadingShareViewController:V.b({strong:!0,get:function(){return Cw.create()}}),_gotoInitiateShare:function(e){var t=Mw.create(this.ioService,e,this.settings);this._startWorkflow(t)},_gotoManageShare:function(e){var t=EI.create(this.ioService,e,this.settings);this._startWorkflow(t)},_startWorkflow:function(e){var t=this;this.showViewController(e),e.start().then((function(){t.didComplete()})).catch((function(e){t._promise.reject(e)}))},_showLoadingUI:function(){var e=this.loadingShareViewController;this.showViewController(e)},start:function(){var e=this,t=this.cacheingProvideRootRecordFunction;return t().then((function(n){OI(n)?e._gotoManageShare(t):(e._showLoadingUI(),e.ioService.fetchDataRecord(n.recordName).then((function(t){var n=function(e){var n=e||t;return Z.a.resolve(n)};OI(t)?e._gotoManageShare(n):e._gotoInitiateShare(n)})).catch((function(t){e._promise.reject(t)})))})),this._promise},staticMembers:{__QUALIFIED_CLASS_NAME__:"EasyShareWorkflowViewController"}});function OI(e){return!(!e.share||!e.share.recordName)}function TI(e){return!(!e.share||!e.share.recordName)}var MI,DI=Tw,PI=Mw.extend({initiateShareViewControllerClass:DI,isWaitingForFirstUI:!1,setUpInitiateController:function(){var e=this.initiateShareViewController;e.nextResponder=this,e.setUp()},start:function(){this.isWaitingForFirstUI=!0,this.sendEvent("workflowDesiresUilessSpinner"),this.setUpInitiateController();var e=this.settings;return e.logService.recordStat("StartedInitiateShareInSingleStepWorkflow",{appName:e.appName}),this._promise},didComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return e?this._promise.resolve({share:null}):t.__s._$jm$didComplete.call(t)},didCancelAddParticipant:function(){var e=this.settings,t=this.share,n={didUpdateRootRecord:e.didUpdateRootRecord,didUpdateShareRecord:e.didUpdateShareRecord};this.ioService.deleteShare(t,n).catch((function(){})),this.didComplete(!0)},shareByWebMail:function(){var e=this;return this.__s._$139$shareByWebMail.call(this).then((function(t){void 0===t&&e.didCompleteSendMessage()}))},sharingUIIsReady:function(){var e=this,t=this,n=arguments,i=t.__s._$160$sharingUIIsReady.apply(t,n),r=this.initiateShareViewController,a=this.preselectedTransport;if(a)r.sendShare().then((function(t){a!==bg.COPY_LINK&&a!==bg.NATIVE_MAIL||void 0!==t||e.didCompleteSendMessage()}));else{var s=this.share,o=this.settings,l=r.invitees,c=o.shareItemType,u=o.primaryInteractionMode,d=o.notificationService,h=o.logService,p="INVITE_TO_";if(s.isPrivate){var f=1===l.length?"TO_PERSON":"TO_PEOPLE";p+="PRIVATE.VIA_EMAIL."+f}else p+="PUBLIC";var g={operationType:p,appName:c,interactionMode:u};r.saveShare(!0).then((function(e){return Oy(o,e,l)})).then((function(t){e.initiateShareViewController.view.footerView.mailToLink=t,e.showViewController(r)})).catch((function(t){e.isWaitingForFirstUI&&e.didCompleteSendMessage(),vy(g,d,h)(t)}))}return i},showViewController:function(e){var t=this,n=arguments;return e&&this.isWaitingForFirstUI&&(this.isWaitingForFirstUI=!1,this.sendEvent("workflowNoLongerDesiresUilessSpinner")),t.__s._$1vB$showViewController.apply(t,n)},__superMap:{_$jm$didComplete:"didComplete",_$139$shareByWebMail:"shareByWebMail",_$160$sharingUIIsReady:"sharingUIIsReady",_$1vB$showViewController:"showViewController"},staticMembers:{__QUALIFIED_CLASS_NAME__:"InitiateShareInSingleStepWorkflowViewController"}}),LI=My,RI=Iw.extend({addParticipantsViewControllerClass:LI,isWaitingForFirstUI:!1,setUpAddParticipantsController:function(){this.preselectedTransport||_.b("AddParticipantsInSingleStepWorkflowViewController requires, but lacks, a preselectedTransport.");var e=this.addParticipantsViewController;e.nextResponder=this,e.setUp()},start:function(){this.setUpAddParticipantsController(),this.isWaitingForFirstUI=!0,this.sendEvent("workflowDesiresUilessSpinner");var e=this.settings;return e.logService.recordStat("StartedAddParticipantsInSingleStepWorkflow",{appName:e.appName}),this._promise},sharingUIIsReady:function(){var e=this,t=arguments,n=e.__s._$ig$sharingUIIsReady.apply(e,t);return this.addParticipantsViewController.sendShare(),n},showViewController:function(e){var t=this,n=arguments;return e&&this.isWaitingForFirstUI&&(this.isWaitingForFirstUI=!1,this.sendEvent("workflowNoLongerDesiresUilessSpinner")),t.__s._$sW$showViewController.apply(t,n)},__superMap:{_$ig$sharingUIIsReady:"sharingUIIsReady",_$sW$showViewController:"showViewController"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AddParticipantsInSingleStepWorkflowViewController"}}),xI=Ld.extend({processAction:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"Processor"}}),NI={valueForChange:function(e,t){if(e.type!==kI.REMOVE){var n=e.direction;if(n===FI.RIGHT)return e.rightValue;if(n===FI.LEFT)return e.leftValue;var i=e.baseValue,r=e.leftValue,a=e.rightValue;return"object"===typeof i&&e.type===kI.UPDATE?BI(r,a,i,this,t?t+"."+e.key:e.key):Object(Q.a)(r,a)?r:VI}}},FI=Object(we.b)("MERGE_DIRECTION",["LEFT","RIGHT","BOTH"]),VI=Object(mr.b)("MERGE_FAILED_RESULT"),kI=Object(we.b)("MERGE_TYPE",["ADD","REMOVE","UPDATE","UPDATE_AND_REMOVE"]);function BI(e,t,n,i,r){null==i&&((i=MI)||(i=MI=P.a.extend(NI).create()));var a,s,o,l=Object(_m.a)(n,e),c=Object(_m.a)(n,t),u=null!=i.valueForChangeInChangeSets;u&&(a={},s={},o={});var d=Object(Me.a)(n),h=!1;return function(e,t,n,i,r,a,s,o,l,c,u){var d=!0;return a&&(d=$I(e,t,n,i,r,a,s,o,0,0,u)),d&&s&&(d=$I(e,t,n,i,r,s,a,o,0,0,u)),d}(e,t,n,i,d,l,c,a,0,0,r)&&function(e,t,n,i,r,a,s,o,l){var c=!0;return a&&(c=WI(e,t,n,i,r,a,s,o,l)),c&&s&&(c=WI(e,t,n,i,r,s,a,o,l)),c}(e,t,n,i,d,l,c,s,r)&&(h=function(e,t,n,i,r,a,s,o,l){var c=!0;return a&&(c=HI(e,t,n,i,r,a,s,o,l)),c&&s&&(c=HI(e,t,n,i,r,s,a,o,l)),c}(e,t,n,i,d,l,c,o,r)),h&&u&&(h=function(e,t,n,i,r,a){var s=!1;return GI(e,t,n,n,i,r,a)&&GI(e,t,i,n,i,r,a)&&(s=GI(e,t,r,n,i,r,a)),s}(i,d,a,s,o,r)),h?d:VI}var jI={baseValue:null,direction:null,key:null,leftValue:null,rightValue:null,type:null},UI="The objects had logically impossible differences (e.g. left added a property that right claims to have removed).";function GI(e,t,n,i,r,a,s){for(var o=Object.keys(n),l=o.length-1;l>=0;l--){var c=n[o[l]],d=c.key,h=c.type,p=e.valueForChangeInChangeSets(c,i,r,a,s);if(p===VI)return u.b.debug("Failed to merge objects: A value was rejected.",{change:c,parentKeyPath:s}),!1;Array.isArray(t)?h===kI.ADD?t.push(p):h===kI.REMOVE||h===kI.UPDATE_AND_REMOVE&&void 0===p?t.pop():t[d]=p:h===kI.REMOVE||h===kI.UPDATE_AND_REMOVE&&void 0===p?delete t[d]:t[d]=p}return!0}function HI(e,t,n,i,r,a,s,o,l){for(var c=a.added,d=c.length,h=0;h<d;h++){var p=c[h];if(s){if(s.updated.indexOf(p)>=0||s.removed.indexOf(p)>=0)return u.b.debug("Failed to merge objects: "+UI,{checkingDiff:a,againstDiff:s,parentKeyPath:l}),!1;var f=s.added,g=f.indexOf(p);g>=0&&f.splice(g,1)}var m=zI(kI.ADD,i,e,t,n,p);if(null==i.valueForChangeInChangeSets){var _=i.valueForChange(m,l);if(_===VI)return u.b.debug("Failed to merge objects: A value was rejected.",{change:m,parentKeyPath:l}),!1;var v=Object(Me.a)(_);Array.isArray(r)?r.push(v):r[p]=v}else o[p]=m}return!0}function WI(e,t,n,i,r,a,s,o,l){for(var c=a.removed,d=c.length,h=0;h<d;h++){var p=c[h];if(s){if(s.added.indexOf(p)>=0)return u.b.debug("Failed to merge objects: "+UI,{checkingDiff:a,againstDiff:s,parentKeyPath:l}),!1;var f=s.removed,g=f.indexOf(p);g>=0&&f.splice(g,1)}var m=zI(kI.REMOVE,i,e,t,n,p);if(null==i.valueForChangeInChangeSets){var _=i.valueForChange(m,l);if(_===VI)return u.b.debug("Failed to merge objects: A value was rejected.",{change:m,parentKeyPath:l}),!1;void 0===_?Array.isArray(r)?r.pop():delete r[p]:r[p]=Object(Me.a)(_)}else o[p]=m}return!0}function $I(e,t,n,i,r,a,s,o,l,c,d){for(var h=a.updated,p=h.length,f=0;f<p;f++){var g=h[f],m=!1;if(s){if(s.added.indexOf(g)>=0)return u.b.debug("Failed to merge objects: "+UI,{checkingDiff:a,againstDiff:s,parentKeyPath:d}),!1;var _=s.removed,v=_.indexOf(g);v>=0&&(_.splice(v,1),m=!0);var b=s.updated,y=b.indexOf(g);y>=0&&b.splice(y,1)}var w=zI(m?kI.UPDATE_AND_REMOVE:kI.UPDATE,i,e,t,n,g);if(null==i.valueForChangeInChangeSets){var I=i.valueForChange(w,d);if(I===VI)return u.b.debug("Failed to merge objects: A value was rejected.",{change:w,parentKeyPath:d}),!1;void 0===I?Array.isArray(r)?r.pop():delete r[g]:r[g]=Object(Me.a)(I)}else o[g]=w}return!0}function zI(e,t,n,i,r,a){var s,o,l,c=r[a],u=n[a],d=i[a];return e===kI.ADD?(s=void 0!==u,o=void 0!==d):e===kI.REMOVE?(s=void 0===u||void 0,o=void 0===d||void 0):e===kI.UPDATE?(s=!Object(Q.a)(c,u),o=!Object(Q.a)(c,d)):e===kI.UPDATE_AND_REMOVE?s=o=!0:Object(_.b)("Unrecognized merge type: "+e),(l=null==t.valueForChangeInChangeSets?jI:{}).baseValue=c,l.direction=s&&o?FI.BOTH:s?FI.LEFT:FI.RIGHT,l.key=a,l.leftValue=u,l.rightValue=d,l.type=e,l}var KI=P.a.extend(NI,{valueForChange:function(e){var t=this,n=arguments,i=e.leftValue,r=e.rightValue,a=e.baseValue,s=e.direction,o=e.key;if(s===FI.BOTH){if("participants"===o)return JI(i,r,a);if("fields"===o)return BI(i,r,a,qI.create())}return t.__s._$BO$valueForChange.apply(t,n)},__superMap:{_$BO$valueForChange:"valueForChange"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKShareRecordMergingDelegate"}}),qI=P.a.extend(NI,{valueForChange:function(e){var t=this,n=arguments,i=e.leftValue,r=e.rightValue,a=e.direction;return a!==FI.BOTH?t.__s._$R5$valueForChange.apply(t,n):!i||!r||i.value!==r.value||i.type&&r.type&&i.type!==r.type?VI:i},__superMap:{_$R5$valueForChange:"valueForChange"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FieldsMergingDelegate"}});function QI(e,t){for(var n=t.length-1;n>=0;n--){var i=t[n];e.push(Me.a(i))}}function YI(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i],a=n[i];e[r]=Me.a(a)}}function ZI(e,t){for(var n=0,i=t.length,r=e.userIdentity.lookupInfo;n<i;n++){var a=t[n];if(Q.a(a.userIdentity.lookupInfo,r))return t.splice(n,1),!1}return!0}function XI(e,t,n,i){for(var r=n[t],a=Me.a(n),s=r?r.userIdentity.lookupInfo:null,o=!1,l=i.length-1;l>=0;l--){var c=i[l];!o&&Q.a(s,c.userIdentity.lookupInfo)?(Q.a(r,c)||(e.updatedIndices.push(t),e.updatedValues.push(c)),o=!0,i.splice(l,1)):ZI(c,a)&&(e.addedValues.push(c),i.splice(l,1))}o||e.removedIndices.push(t)}function JI(e,t,n){var i=n.length,r={addedValues:[],updatedIndices:[],updatedValues:[],removedIndices:[]},a={addedValues:[],updatedIndices:[],updatedValues:[],removedIndices:[]},s=0,o=Me.a(e),l=Me.a(t);do{XI(r,s,n,o),XI(a,s,n,l),s++}while(s<i);var c,u=r.addedValues,d=r.removedIndices,h=r.updatedIndices,p=a.addedValues,f=a.removedIndices,g=a.updatedIndices;for(c=h.length-1;c>=0;c--)if(g.indexOf(h[c])>=0)return VI;if(u.length>0&&p.length>0||u.length>0&&f.length>0||d.length>0&&p.length>0)return VI;if(d.length>0&&f.length>0)for(c=d.length-1;c>=0;c--)if(!(f.indexOf(d[c])>=0))return VI;return function(e,t,n){var i=Me.a(e);YI(i,t.updatedIndices,t.updatedValues),YI(i,n.updatedIndices,n.updatedValues);for(var r=Gf(t.removedIndices.concat(n.removedIndices)).sort(),a=r.length-1;a>=0;a--)i.splice(r[a],1);return QI(i,t.addedValues),QI(i,n.addedValues),i}(n,r,a)}var eS=P.a.extend(B.b,{body:H.d({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign((function(){return this.recordDataHash}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),originalRecordDataHash:null,recordDataHash:V.b(),type:null,init:function(e,t,n){this.__s._$JG$init.call(this,n),this.recordDataHash=e,this.originalRecordDataHash=t},__superMap:{_$JG$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRecordOperation"}}),tS=eS.extend({provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,didUpdateRootRecord:null,didUpdateShareRecord:null,type:"CREATE_SHARE",proposedShareRecordName:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateShareRecordOperation"}}),nS=eS.extend({body:H.d({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign((function(){return{recordName:this.recordDataHash.recordName}}),{__CW__getter:function(e,t,n,i){return{recordName:i.internalGet(this,t[0+n]).recordName}}})}),didUpdateRootRecord:null,didUpdateShareRecord:null,type:"DELETE_SHARE",staticMembers:{__QUALIFIED_CLASS_NAME__:"DeleteShareRecordOperation"}}),iS=P.a.extend(B.b,{body:H.d({dependencies:["recordName"],readOnly:!0,get:Object.assign((function(){return this.recordName}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),recordName:V.b(),type:"FETCH",init:function(e){this.__s._$7R$init.call(this),this.recordName=e},__superMap:{_$7R$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"FetchRecordOperation"}}),rS=P.a.extend(B.b,{dataRecordDataHash:V.b(),didUpdateRootRecord:null,didUpdateShareRecord:null,provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,operationForCreateShareRecord:H.d({dependencies:["dataRecordDataHash"],readOnly:!0,get:Object.assign((function(){return tS.create({publicPermission:Im.NONE,forRecord:this.dataRecordDataHash,fields:this.shareRecordDataHash.fields,recordType:"cloudkit.share"},null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord,provideRootRecordForUpdate:this.provideRootRecordForUpdate,provideLatestRootRecordAfterUpdateConflict:this.provideLatestRootRecordAfterUpdateConflict})}),{__CW__getter:function(e,t,n,i){return tS.create({publicPermission:Im.NONE,forRecord:i.internalGet(this,t[0+n]),fields:this.shareRecordDataHash.fields,recordType:"cloudkit.share"},null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord,provideRootRecordForUpdate:this.provideRootRecordForUpdate,provideLatestRootRecordAfterUpdateConflict:this.provideLatestRootRecordAfterUpdateConflict})}})}),operationForDeleteShareRecord:H.d({dependencies:["shareRecordDataHash"],readOnly:!0,get:Object.assign((function(){return nS.create(this.shareRecordDataHash,null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord})}),{__CW__getter:function(e,t,n,i){return nS.create(i.internalGet(this,t[0+n]),null,{didUpdateRootRecord:this.didUpdateRootRecord,didUpdateShareRecord:this.didUpdateShareRecord})}})}),operationForFetchDataRecord:H.d({dependencies:["dataRecordDataHash"],readOnly:!0,get:Object.assign((function(){return iS.create(this.dataRecordDataHash.recordName)}),{__CW__getter:function(e,t,n,i){return iS.create(i.internalGet(this,t[0+n]).recordName)}})}),shareRecordDataHash:V.b(),type:"CONVERT_SHARE_TO_PRIVATE",init:function(e,t,n){this.__s._$qC$init.call(this,n),this.shareRecordDataHash=e,this.dataRecordDataHash=t},__superMap:{_$qC$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ConvertShareRecordToPrivateOperation"}}),aS=eS.extend({body:H.d({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign((function(){var e=this.recordDataHash;return{recordName:e.recordName,recordChangeTag:e.recordChangeTag,createShortGUID:!0}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return{recordName:r.recordName,recordChangeTag:r.recordChangeTag,createShortGUID:!0}}})}),provideRootRecordForUpdate:null,provideLatestRootRecordAfterUpdateConflict:null,didUpdateRootRecord:null,type:"CREATE_SHORT_GUID",staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateRecordShortGUIDOperation"}}),sS=iS.extend({type:"FETCH_SHARE",staticMembers:{__QUALIFIED_CLASS_NAME__:"FetchShareRecordOperation"}}),oS=Uf.a.extend({created:Uf.c(),fields:Uf.c(),modified:Uf.c(),recordChangeTag:Uf.c({type:String}),recordName:Uf.c({type:String}),recordType:Uf.c({type:String}),staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRecord"}}).extend({staticMembers:{processDataHashThroughModel:function(e){return this.create(e).getDataHash()},__QUALIFIED_CLASS_NAME__:"Share"},currentUserParticipant:zt.a.toOne({embedded:!0,type:fb}),forRecord:Uf.c(),pluginFields:Uf.c(),publicPermission:Uf.c(),anonymousPublicAccess:Uf.c(),recordType:Uf.c({readOnly:!0}),share:Uf.c(),displayedHostname:Uf.c({type:String}),shortGUID:Uf.c({type:String}),participants:zt.a.toMany({embedded:!0,type:fb}),owner:zt.a.toOne({embedded:!0,type:fb}),effectiveAccess:V.b({dependencies:["publicPermission"],readOnly:!0,get:Object.assign((function(){return this.publicPermission===Im.NONE?wm.PRIVATE:wm.PUBLIC}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Im.NONE?wm.PRIVATE:wm.PUBLIC}})}),effectivePermission:V.b({dependencies:["publicPermission","participants","participants.contentsDidChange","participantPermissionChanged","_fallbackPermission"],readOnly:!0,get:Object.assign((function(){if(this.publicPermission===Im.NONE){var e=this.participants,t=this._fallbackPermission;return 1===e.length&&t?t:lS(e)}return this.publicPermission}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===Im.NONE){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[4+n]);return 1===r.length&&a?a:lS(r)}return i.internalGet(this,t[0+n])}})}),_fallbackPermission:V.b(null),isPublic:V.b({cacheable:!1,dependencies:["effectiveAccess"],readOnly:!0,get:Object.assign((function(){return this.effectiveAccess===wm.PUBLIC}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wm.PUBLIC}})}),isPrivate:V.b({cacheable:!1,dependencies:["effectiveAccess"],readOnly:!0,get:Object.assign((function(){return this.effectiveAccess===wm.PRIVATE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===wm.PRIVATE}})}),loggedInUserCanEditShare:V.b({dependencies:["participants","participants.contentsDidChange","owner","recordName",Yv.bindingFor("currentUserRecordName")],readOnly:!0,get:Object.assign((function(){var e;if(this.recordName){var t=this._getCurrentUserParticipant();if(t){var n=t.type;e=n===$v.OWNER||n===$v.ADMINISTRATOR}else e=!0}else e=!0;return e}),{__CW__getter:function(e,t,n,i){var r;if(i.internalGet(this,t[3+n])){var a=this._getCurrentUserParticipant();if(a){var s=a.type;r=s===$v.OWNER||s===$v.ADMINISTRATOR}else r=!0}else r=!0;return r}})}),participantPermissionChanged:B.i(),assignFieldUpdates:function(e){var t=this.fields;if(t)for(var n=Object.keys(e),i=0,r=n.length;i<r;i++){var a=n[i],s=t[a],o=e[a];s&&s.value===o.value||(t[a]=o)}else this.fields=e},findEquivalentParticipant:function(e){var t=this.participants;if(e&&t){if(t.indexOf(e)>=0)return e;for(var n=Ib(e.userIdentity.lookupInfo.emailAddress),i=Sb(e.userIdentity.lookupInfo.phoneNumber),r=t&&t.length||0;r--;){var a=t.objectAt(r);if(n&&Ib(a.userIdentity.lookupInfo.emailAddress)===n)return a;if(i&&Sb(a.userIdentity.lookupInfo.phoneNumber)===i)return a}}},addParticipantsIgnoringDupes:function(e,t){if(e){var n=this,i=this.participants,r=[];return e.forEach((function(e){var a=n.findEquivalentParticipant(e);if(K.a(a)){var s=a.permission;t&&t!==s&&(a.permission=t,r.push({type:"MODIFY",subject:a,details:{permission:s}}))}else{var o=fb.create(e.getDataHash());t&&(o.permission=t),i.push(o),r.push({type:"INSERT",subject:e,details:{index:i.length-1}})}})),t&&this.participantPermissionChanged(),r}},removeEquivalentParticipants:function(e){for(var t=this.participants,n=0,i=e&&e.length||0;n<i;++n){var r=this.findEquivalentParticipant(e[n]);t.remove(r)}},setEffectiveAccess:function(e,t){if(e===wm.PRIVATE)this.publicPermission=Im.NONE;else{var n=this.effectivePermission;n&&n!==Im.MIXED||(n=t),this.publicPermission=n;for(var i=this.participants,r=i.length-1;r>=0;r--){var a=i.objectAt(r);a.isOwner||(a.acceptanceStatus!==Nw.ACCEPTED?i.remove(a):a.permission=n)}}},setEffectivePermission:function(e){this.effectiveAccess===wm.PUBLIC?this.publicPermission=e:this.setValueOnParticipants("permission",e)},setValueOnParticipants:function(e,t){for(var n=this.participants||[],i=0,r=n.length;i<r;++i){var a=n.objectAt(i);a.isOwner||(a[e]=t)}"permission"===e&&(this._fallbackPermission=t,n.length>1&&this.participantPermissionChanged())},toSanitizedJSON:function(){var e=this.toJSON();return delete e.currentUserParticipant,e},_getCurrentUserParticipant:function(){var e,t,n,i,r=this.participants;for(e=0,t=r.length;e<t;++e)if((n=r.objectAt(e)).getPath("userIdentity.isCurrentlyLoggedInUser")){i=n;break}return i}});function lS(e){for(var t,n=0,i=e.length;n<i;++n){var r=e.objectAt(n);if(!r.isOwner){if(t&&t!==r.permission){t=Im.MIXED;break}t=r.permission}}return t}var cS=eS.extend({body:H.d({dependencies:["recordDataHash"],readOnly:!0,get:Object.assign((function(){var e=Me.a(this.recordDataHash);e.publicPermission===Im.NONE?e.participants=uS(e.participants):delete e.participants;var t=e.participants;return t&&t.forEach((function(e){var t=e&&e.userIdentity,n=t&&t.lookupInfo,i=n&&n.phoneNumber;i&&(e.userIdentity.lookupInfo.phoneNumber=Sb(i))})),delete e.created,delete e.modified,delete e.currentUserParticipant,e}),{__CW__getter:function(e,t,n,i){var r=Me.a(i.internalGet(this,t[0+n]));r.publicPermission===Im.NONE?r.participants=uS(r.participants):delete r.participants;var a=r.participants;return a&&a.forEach((function(e){var t=e&&e.userIdentity,n=t&&t.lookupInfo,i=n&&n.phoneNumber;i&&(e.userIdentity.lookupInfo.phoneNumber=Sb(i))})),delete r.created,delete r.modified,delete r.currentUserParticipant,r}})}),type:"UPDATE_SHARE",didUpdateShareRecord:null,staticMembers:{__QUALIFIED_CLASS_NAME__:"UpdateShareRecordOperation"}});function uS(e){var t={},n={};return e&&e.filter((function(e){var i=e.userIdentity&&e.userIdentity.lookupInfo;if(!i)return!0;var r=Ib(i.emailAddress);if(r){if(t[r])return!1;t[r]=!0}var a=i.phoneNumber;if(a){if(n[a])return!1;n[a]=!0}return!0}))}var dS=KI.create(),hS=P.a.extend(B.b,_w,{materializedShareRecord:H.d(),mostRecentShareDataHashFromServer:H.d(),isServiceBusy:V.b({readOnly:!0,dependencies:["processor.isQueueEmpty"],get:Object.assign((function(){return!this.getPath("processor.isQueueEmpty")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),processor:V.b({defaultValue:k.c(xI.extend(B.b,{isQueueEmpty:V.b(!0),canSafelyTerminate:V.b(!0),_rejectAction:function(e,t){var n=this,i=arguments;return this._hack_silentlyClearQueuedOperations(),n.__s._$r0$_rejectAction.apply(n,i)},_hack_silentlyClearQueuedOperations:function(){for(var e,t,n=this._queue,i=this._actionDataToPromiseMap,r=n.length-1;r>=0;r--)e=n[r],t=i.get(e),this._clearQueuedAction(e,t)},enqueue:function(){var e=this,t=arguments;return this.isQueueEmpty=!1,e.__s._$12_$enqueue.apply(e,t)},didProcess:function(e,t){this.isQueueEmpty=0===e.length&&0===t.length;var n=e.concat(t).map((function(e){return e[2].type})).filter((function(e){return"FETCH"!==e&&"FETCH_SHARE"!==e})).length;this.canSafelyTerminate=0===n},dispose:function(){var e=this,t=arguments;this.canSafelyTerminate=!0,e.__s._$1RT$dispose.apply(e,t)},__superMap:{_$r0$_rejectAction:"_rejectAction",_$12_$enqueue:"enqueue",_$1RT$dispose:"dispose"}}),{maxConcurrentActions:1})}),processorCanSafelyTerminateDidChange:B.g("processor.canSafelyTerminate",(function(e){var t=G.a.application;"function"===typeof Gd.a(t,"removeIsReadyToTerminateBlock")&&"function"===typeof Gd.a(t,"setIsReadyToTerminateBlock")?e?G.a.application.removeIsReadyToTerminateBlock(this):G.a.application.setIsReadyToTerminateBlock(this):this.canSafelyTerminate=e})),dispose:function(){var e=this,t=arguments,n=G.a.application;"function"===typeof Gd.a(n,"removeIsReadyToTerminateBlock")&&n.removeIsReadyToTerminateBlock(this),e.__s._$1rj$dispose.apply(e,t)},canSafelyTerminate:V.b(!0),zoneID:V.b(),database:V.b({readOnly:!0}),reset:function(){this.processor._hack_silentlyClearQueuedOperations();var e=this.mostRecentShareDataHashFromServer,t=this.materializedShareRecord;K.a(t)&&K.a(e)&&(t.replaceData(Me.a(e)),this.mostRecentOriginalShareDataHash=null)},init:function(e,t,n){if(!e||!t)throw new Error("Dependency Missing: CKSharing.SharingIOService.create() requires the following properties: database, zoneID.");if(g.a(t)?t=yg.create(t.zoneName,t.ownerRecordName):J.a(t)&&(t=yg.create(t)),!pi.a(t,yg))throw new Error("zoneID must be an Object or instance of CKSharing.ZoneID",{zoneID:t});this.database=e,this.zoneID=t,this.__s._$2e9$init.call(this,n)},createShare:function(e){var t=this.materializedShareRecord.toJSON(),n=tS.create(t,null,e);return this.retain(this,"this - createShare"),this.processor.enqueue(IS,this,n).finally(this.release.bind(this,this,"this - createShare"))},createShareFromDataHash:function(e){var t=this.materializedShareRecord=oS.create(e);return function(e){var t=e.participants;t&&t.forEach((function(e){e.propertyChanged("userIdentity")}));var n=e.owner;n&&n.propertyChanged("userIdentity");var i=e.currentUserParticipant;i&&i.propertyChanged("userIdentity")}(t),t},createShortGUID:function(e,t){var n=e.shortGUID;return J.a(n)&&!Vn.a(n)?Z.a.resolve(e):_S(this,aS.create(e,null,t)).then(AS).then((function(e){return e}))},convertToPrivateShare:function(e,t){var n=this.materializedShareRecord.toJSON(),i=rS.create(n,e,t);return this.mostRecentOriginalShareDataHash=n,this.retain(this,"this - convertToPrivateShare"),this.processor.enqueue(wS,this,i).finally(this.release.bind(this,this,"this - convertToPrivateShare"))},fetchDataRecord:function(e){var t=iS.create(e);return this.retain(this,"this - fetchDataRecord"),this.processor.enqueue(CS,this,t).finally(this.release.bind(this,this,"this - fetchDataRecord"))},fetchShareRecord:function(e){var t=this,n=sS.create(e);return this.retain(this,"this - fetchShareRecord"),this.processor.enqueue(CS,this,n).then((function(e){var n=t.materializedShareRecord;return n?(n.replaceData(e),n):t.loadShareFromDataHash(e)})).finally(this.release.bind(this,this,"this - fetchShareRecord"))},loadShareFromDataHash:function(e){if(e.currentUserParticipant){var t=e.currentUserParticipant.userIdentity.userRecordName;Yv.currentUserRecordName=t}return this.mostRecentShareDataHashFromServer=Me.a(oS.processDataHashThroughModel(e)),this.createShareFromDataHash(e)},unforkIfAppropriate:function(e){for(var t=this.processor._queue,n=0,i=t.length,r=!1;n<i;n++){var a=t[n][2];if("UPDATE_SHARE"===a.type||"CONVERT_SHARE_TO_PRIVATE"===a.type){r=!0;break}}r||(u.b.debug("== UNFORKING"),this.materializedShareRecord.replaceData(e),this.mostRecentOriginalShareDataHash=null)},updateShare:function(e){this.mostRecentOriginalShareDataHash||u.b.debug("== FORKING");var t=this.mostRecentOriginalShareDataHash||this.mostRecentShareDataHashFromServer,n=Me.a(t),i=this.materializedShareRecord.toJSON(),r=cS.create(i,n,e);return this.mostRecentOriginalShareDataHash=i,this.retain(this,"this - updateShare"),this.processor.enqueue(ES,this,r).finally(this.release.bind(this,this,"this - updateShare"))},deleteShare:function(e,t){var n=this.mostRecentOriginalShareDataHash||this.mostRecentShareDataHashFromServer,i=Me.a(n),r=this.materializedShareRecord.toJSON(),a=nS.create(r,i,t);return this.retain(this,"this - deleteShare"),this.processor.enqueue(SS,this,a).finally(this.release.bind(this,this,"this - deleteShare"))},membershipInfo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.map((function(e){return(e=e.userIdentity||e).phoneNumber?{type:"phoneNumber",value:e.phoneNumber}:e.emailAddress?{type:"email",value:e.emailAddress}:null})).filter((function(e){return null!==e})),i={lookupInfo:n},r=Kg.create({serviceName:"cksharews",pathname:"/ws/v1/autocomplete/membershipInfo"}),a=Yg.create({method:"POST",url:r,body:i,useCredentialsIfCrossOrigin:!0,timeout:6e4});if(!0===!t){var s=a.url.toString();a=Wv.create(s,{method:"POST",body:i,useCredentialsIfCrossOrigin:!0,timeout:6e4,serviceName:"cksharews"})}return a.send().then((function(e){return e.body}))},__superMap:{_$1rj$dispose:"dispose",_$2e9$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SharingIOService"}});function pS(e,t){return function(e){var t=e.type;return e.didUpdateShareRecord&&("CREATE_SHARE"===t||"UPDATE_SHARE"===t||"DELETE_SHARE"===t)}(t)?(0,t.didUpdateShareRecord)(AS(e)).then((function(){return e})):Z.a.resolve(e)}function fS(e,t){if(function(e){var t=e.type;return e.didUpdateRootRecord&&("CREATE_SHORT_GUID"===t||"CREATE_SHARE"===t||"DELETE_SHARE"===t)}(t)){var n=t.didUpdateRootRecord,i=t.recordDataHash;if(!i.recordName){var r=i.forRecord;r&&r.recordName}return n("CREATE_SHORT_GUID"===t.type?AS(e):null).then((function(){return e}))}return Z.a.resolve(e)}function gS(e,t,n){return e.retain(e,"subject - ckDeleteRecords"),e.database.deleteRecords(t.body,e.zoneID.toHash()).catch(py).then(fy).then((function(e){return pS(e,t)})).then((function(e){return fS(e,t)})).catch(vS(e,t,n)).finally(e.release.bind(e,e,"subject - ckDeleteRecords"))}function mS(e,t,n){return e.retain(e,"subject - ckFetchRecords"),e.database.fetchRecords(t.body,e.zoneID.toHash()).catch(py).then(fy).catch(vS(e,t,n)).finally(e.release.bind(e,e,"subject - ckFetchRecords"))}function _S(e,t,n){var i,r=t.provideRootRecordForUpdate,a=t.willUpdateShareRecord,s=t.type;return i="CREATE_SHARE"!==s&&"CREATE_SHORT_GUID"!==s||!r?"UPDATE_SHARE"===s&&a?a(t.recordDataHash):Z.a.resolve():"CREATE_SHARE"===s?r(t.recordDataHash.forRecord).catch(my).then((function(e){t.recordDataHash.forRecord=Me.a(e),t.propertyChanged("recordDataHash")})):r(t.recordDataHash).catch(my).then((function(e){t.recordDataHash=Me.a(e)})),e.retain(e,"subject - ckSaveRecords"),i.then((function(){if("CREATE_SHORT_GUID"===s){var i=t.recordDataHash,r=i.shortGUID;if(J.a(r)&&!Vn.a(r))return{records:[i],isRecordsResponse:!0}}return e.database.saveRecords(t.body,e.zoneID.toHash()).catch(py).then(fy).then((function(e){return pS(e,t)})).then((function(e){return fS(e,t)})).catch(vS(e,t,n))})).finally(e.release.bind(e,e,"subject - ckSaveRecords"))}function vS(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:CS,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yS;return function(a){var s=a.errors;if(s)for(var o=CloudKit.CKError,l=t.type,c=s.length,u=function(){var a=s[d],u=!1,g=void 0;switch(_y(a)){case o.ATOMIC_ERROR:d===c-1&&(u=!0);break;case o.ACCESS_DENIED:case"MANAGED_APPLE_ID_RESTRICTED":u=!0;break;case o.TRY_AGAIN_LATER:case o.THROTTLED:case"ZONE_BUSY":null==n&&(n=0),n<5?(h=Z.a.create(),p=1e3*Math.exp(n),X.a((function(){h.resolve(n+1)}),p),g=h.then((function(n){return r(e,t,n)}))):u=!0;break;case o.CONFLICT:case"OP_LOCK_FAILURE":if(null==n&&(n=0),++n>3){u=!0;break}if("CREATE_SHARE"===l||"CREATE_SHORT_GUID"===l){var m=t.provideLatestRootRecordAfterUpdateConflict;if(m){var _=t.recordDataHash,v="CREATE_SHARE"===l;v&&(_=_.forRecord),g=m(_).catch(my).then((function(i){if(i.recordChangeTag===_.recordChangeTag)throw e.reset(),a;return v?t.recordDataHash.forRecord=i:t.recordDataHash=i,r(e,t,n)}))}else u=!0}else f=sS.create(t.recordDataHash.recordName),g=i(e,f).then((function(i){i=oS.processDataHashThroughModel(i),e.mostRecentShareDataHashFromServer=Me.a(i);var s=BI(t.recordDataHash,i,t.originalRecordDataHash,dS);if(s===VI)throw e.reset(),a;return t.originalRecordDataHash=e.mostRecentShareDataHashFromServer,e.mostRecentOriginalShareDataHash=s,t.recordDataHash=s,r(e,t,n)}));break;default:u=!0}if(g)return{v:g};if(u)throw e.reset(),a},d=0;d<c;d++){var h,p,f,g=u();if("object"===typeof g)return g.v}throw a}}function bS(e,t){t=oS.processDataHashThroughModel(t),e.mostRecentShareDataHashFromServer=Me.a(t);for(var n=e.processor._queue,i=0,r=n.length;i<r;i++){var a=n[i][2];if("FETCH_SHARE"===a.type){var s=t.recordName;a.recordName=s}else if("DELETE_SHARE"===a.type)a.recordDataHash=Me.a(t);else if("CONVERT_SHARE_TO_PRIVATE"===a.type)a.shareRecordDataHash=Me.a(t);else if("UPDATE_SHARE"===a.type){var o=BI(a.recordDataHash,t,a.originalRecordDataHash,dS);if(o===VI)break;a.recordDataHash=o,a.originalRecordDataHash=t,t=o}}}function yS(e,t,n){switch(t.type){case"CREATE_SHARE":case"CREATE_SHORT_GUID":case"UPDATE_SHARE":return _S(e,t,n);case"DELETE_SHARE":return gS(e,t,n);case"FETCH":case"FETCH_SHARE":return mS(e,t,n);default:throw"Attempted to re-run an unknown operation type: "+t.type}}function wS(e,t){return e.retain(e,"subject - runConvertToPrivateShareTransaction"),SS(e,t.operationForDeleteShareRecord).then((function(n){return void 0===n?CS(e,t.operationForFetchDataRecord).then((function(n){return t.dataRecordDataHash=n,IS(e,t.operationForCreateShareRecord)})):(bS(e,n.toJSON()),e.materializedShareRecord)})).finally(e.release.bind(e,e,"subject - runConvertToPrivateShareTransaction"))}function IS(e,t){e.retain(e,"subject - runCreateShareTransaction");var n=t.proposedShareRecordName;return K.a(n)&&(t.recordDataHash.recordName=n),_S(e,t).then(AS).then((function(t){return e.createShareFromDataHash(t),bS(e,t),e.unforkIfAppropriate(t),e.materializedShareRecord})).finally(e.release.bind(e,e,"subject - runCreateShareTransaction"))}function SS(e,t){return gS(e,t).then(AS).then((function(t){if(!t.deleted){t=oS.processDataHashThroughModel(t),e.mostRecentShareDataHashFromServer=Me.a(t);var n=e.materializedShareRecord;return n.replaceData(t),n}e.mostRecentShareDataHashFromServer=null}))}function CS(e,t){return mS(e,t).then(AS)}function ES(e,t){return e.retain(e,"subject - runUpdateShareTransaction"),_S(e,t).then(AS).then((function(t){return bS(e,t),e.unforkIfAppropriate(t),e.materializedShareRecord})).finally(e.release.bind(e,e,"subject - runUpdateShareTransaction"))}function AS(e){return function(e,t){var n=t.records?t.records.length:-1;if(!t.isRecordsResponse||n<1)throw new Error("Expected %{amount} record(s), found %{count}",{amount:1,count:n,response:t});return t.records.slice(0,1)}(0,e).pop()}var OS,TS={mixinDependencies:[Tn.a],info:Mn.a.define(),warn:Mn.a.define(),error:Mn.a.define()},MS={},DS=P.a.extend(TS,{info:function(e,t){PS(e,t,"ck-sharing-icon")},warn:function(e,t){PS(e,t,"ck-sharing-warn-icon")},error:function(e,t){PS(e,t,"ck-sharing-error-icon")},staticMembers:{__QUALIFIED_CLASS_NAME__:"UserNotificationService"}});function PS(e,t,n){var i=K.a(t)?t:MS,r=i.locNamespace?i.locNamespace+".":"",a=i.interactionMode===Zb.TOUCH?"Compact":"Expanded",o=function(e,t){return s.d(t,e)},l=xy(o.bind(null,i.messageFormatValues),[r+e+"."+(i.messageLocSuffix||"Message")+"."+a,r+e+"."+(i.messageLocSuffix||"Message")]),c=xy(o.bind(null,i.descriptionFormatValues),[r+(i.descriptionKey||e)+"."+(i.descriptionLocSuffix||"Description")+"."+a,r+(i.descriptionKey||e)+"."+(i.descriptionLocSuffix||"Description")]);void 0===c&&(c=null);var u=i.primaryButtonConfig,d=i.alternateButtonConfig;u||d||(u={keyEquivalent:[ml.a.ESC,ml.a.RETURN],title:s.d("CKSharing.ErrorDialog.OKButton.Title")});var h=wn.b.create({iconNames:n,message:l,description:c,primaryButton:u,alternateButton:d,alertStyle:i.alertStyle});h._appendedContentController=h.contentController,G.a.application.presentViewController(h)}function LS(e){var t=function e(t,n){if(t){var i=(t=t.view||t).element||t;if(i){var r=i.view&&n(i.view);if(r)return r;for(var a=i.firstChild;a;a=a.nextSibling)if(r=e(a,n))return r}}}(e,(function(e){if(e.isFocusable)return e}));if(t){t.focus();var n=t.element;n&&n.focus&&n.focus()}}function RS(e){return(OS||xS())[e]}var xS=function(){var e;return(e={})[bg.NATIVE_MAIL]={transportValue:bg.NATIVE_MAIL,displayName:s.d("CKSharing.AddParticipants.Transports.EmailButton.Title"),iconMouse2x:n(673),iconMouse1x:n(674),iconTouch3x:n(675),iconTouch2x:n(676),iconTouch1x:n(677),bestIconSizeMouse:74,bestIconSizeTouch:32},e[bg.WEB_MAIL]={transportValue:bg.WEB_MAIL,displayName:s.d("CKSharing.AddParticipants.Transports.EmailButton.Title"),iconMouse2x:n(673),iconMouse1x:n(674),iconTouch3x:n(675),iconTouch2x:n(676),iconTouch1x:n(677),bestIconSizeMouse:74,bestIconSizeTouch:32},e[bg.SCHOOLWORK]={transportValue:bg.SCHOOLWORK,displayName:s.d("CKSharing.AddParticipants.Transports.SchoolworkButton.Title"),iconMouse2x:n(1259),iconMouse1x:n(1260),iconTouch3x:void 0,iconTouch2x:void 0,iconTouch1x:void 0,bestIconSizeMouse:74,bestIconSizeTouch:32},e[bg.COPY_LINK]={transportValue:bg.COPY_LINK,displayName:s.d("CKSharing.AddParticipants.Transports.CopyLinkButton.Title"),iconMouse2x:n(1261),iconMouse1x:n(1262),iconTouch3x:n(1263),iconTouch2x:n(1264),iconTouch1x:n(1265),bestIconSizeMouse:74,bestIconSizeTouch:32},OS=e},NS={initiateShare:jS.bind(void 0,Mw),initiateShareInSingleStep:jS.bind(void 0,PI),addParticipants:jS.bind(void 0,Iw),addParticipantsInSingleStep:jS.bind(void 0,RI),manageShare:jS.bind(void 0,EI),share:jS.bind(void 0,AI),createWorkflow:VS.bind(void 0),presentWorkflow:BS.bind(void 0),unshare:function(e,t,n,i,r){var a=FS(e,t,n).retain();return US(i)().then((function(e){return(TI(e)?Z.a.resolve(e):a.fetchDataRecord(e.recordName)).then((function(e){if(TI(e))return a.loadShareFromDataHash(e.share),a.deleteShare()})).catch((function(e){throw e}))}))},getSupportedTransportsForSettings:function(e){return kS(e).retain().autorelease().supportedTransports.map(RS)},startWatchingShareRecord:function(e,t,n,i,r){var a=e[t===globalThis.CloudKit.DatabaseScope.PRIVATE?"privateCloudDatabase":"sharedCloudDatabase"];return dI(a,n,i,r)},stopWatchingShareRecord:function(e){return hI(e)}};function FS(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Gd.a(i,"database"),a=t===globalThis.CloudKit.DatabaseScope.PRIVATE?"privateCloudDatabase":"sharedCloudDatabase",s=K.a(r)?r:e[a];return hS.create(s,n).retain().autorelease()}function VS(e,t,n,i,r,a,s){var o=kS(a),l=US(r);return e.create(FS(t,n,i,o),l,o,s)}function kS(e){var t;if(!(t=pi.a(e,iy)?e:iy.fromJSON(e||{})).logService){var n=ve.a.cloudOSService;!1&!K.a(n)&&_.b("Cloudkit-Sharing: no logService available! If CKSharing is running in a non-CloudOS context, you must manually provide a logService via CKSharing.Settings"),t.logService=ve.a.cloudOSService}t.notificationService||(t.notificationService=DS.create());var r=ve.a.currentUser;t.loggedInUserIdentity||(t.loggedInUserIdentity={givenName:r.firstName,familyName:r.lastName,appleId:r.appleId,isManagedAppleID:r.isManagedAppleID});var a=t.supportedTransports,s=Gd.a(i,"globals.environment.authBag"),o=K.a(s)&&s.servicesInfo||{};if(K.a(o.mail)?a.unshift(bg.WEB_MAIL):e.supportsNativeMail&&a.unshift(bg.NATIVE_MAIL),kS.isAXMServiceAvailable=!K.a(o.maidautocompletews),K.a(r)&&r.get("isManagedAppleID")){var l=t.supportedAccess,c=l.indexOf(wm.PUBLIC);c>-1&&l.splice(c,1)}return t}function BS(e){var t=iw.create();t.showViewController(e),t.show();var n=gm.a(arguments,0,1),i=e.start.apply(e,n);return LS(t),i.finally((function(){t.hide()}))}function jS(e,t,n,i,r,a,s){return BS(VS.apply(void 0,arguments))}function US(e){var t=null;return function(n){return e(n||t).then((function(e){return t=e,e})).catch(my)}}var GS,HS=n(302),WS=we.b("LongJobStatus",{NOT_STARTED:"NOT_STARTED",PREPARING:"PREPARING",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",FAILED:"FAILED"}),$S={mixinDependencies:[wi.a],jobProgress:V.b(0),jobStatus:V.b({type:WS}),jobSize:V.b(1),animatedJobProgress:gu({readOnly:!0,binding:Oi.c("jobProgress"),updatesDurationWhenTheseChange:["isReceivingPeriodicJobProgressUpdates"],decideDuration:function(e,t,n){if(!(e>t)||!n&&1!==e)return 0;var i=performance.now(),r=this._doublePreviousJobProgressUpdateTime||i;return 1===e?500:1.5*(i-r)||1e3}}),isReceivingPeriodicJobProgressUpdates:V.b(!0),_measureJobProgressUpdateTiming:B.h({inputs:["jobProgress","isReceivingPeriodicJobProgressUpdates"],callback:function(e,t){t?(this._doublePreviousJobProgressUpdateTime=this._previousJobProgressUpdateTime,this._previousJobProgressUpdateTime=performance.now()):this._doublePreviousJobProgressUpdateTime=this._previousJobProgressUpdateTime=void 0}})},zS={mixinDependencies:[$S,HS.b],isReceivingPeriodicJobProgressUpdates:Oi.c("isPolling")},KS={mixinDependencies:[zS,HS.a]},qS=n(481),QS=n(816),YS=n(409),ZS=we.b("CopyStatusValue",{SUBMITTED:"SUBMITTED",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",FAILED:"FAILED",UNKNOWN:"UNKNOWN"}),XS=((GS={})[ZS.UNKNOWN.value]=WS.NOT_STARTED,GS[ZS.SUBMITTED.value]=WS.PREPARING,GS[ZS.INPROGRESS.value]=WS.IN_PROGRESS,GS[ZS.COMPLETED.value]=WS.COMPLETED,GS[ZS.FAILED.value]=WS.FAILED,GS),JS=Uf.a.extend({mixinDependencies:[qS.a,QS.a,YS.a,KS],staticMembers:{beginNewJob:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=2*t,r=L.n(),a=Object.assign({},e,{jobID:"temporaryJobID-"+Y.a(),status:ZS.UNKNOWN.value,itemsTotalEstimate:i});r.loadData(this,a,!1);var s=this.find(a.jobID);return s.workflowSource=n,s.startTimer=Date.now(),this.performOperation(L.d.WRITE.CREATE,Object.assign({},e,{_temporaryJobID:s.jobID,workflowSource:s.workflowSource,itemsTotalEstimate:i})),s.beginPolling(),s},pollInstances:function(e){var t=this;e.forEach((function(e){return t.load([e.jobID],!0)}))},__QUALIFIED_CLASS_NAME__:"RecordCopierJob"},sourceZoneID:Uf.c({readOnly:!0,type:Object}),targetZoneID:Uf.c({readOnly:!0,type:Object}),sourceShareName:Uf.c({readOnly:!0,type:String}),targetRootName:Uf.c({readOnly:!0,type:String}),includeRecords:Uf.c({readOnly:!0,type:Array,decode:Tl.a}),excludeRecords:Uf.c({readOnly:!0,type:Array,decode:Tl.a}),jobID:Object(Qt.c)({isPrimaryKey:!0,readOnly:!0,type:String}),itemsProcessed:Object(Qt.c)({readOnly:!0,type:Number}),_itemsTotalEstimate:Object(Qt.c)({readOnly:!0,type:Number,dataKey:"itemsTotalEstimate"}),itemsTotalEstimate:V.b({readOnly:!0,dependencies:["_itemsTotalEstimate"],get:Object.assign((function(){return this.__savedItemsTotalEstimate=this._itemsTotalEstimate||this.__savedItemsTotalEstimate}),{__CW__getter:function(e,t,n,i){return this.__savedItemsTotalEstimate=i.internalGet(this,t[0+n])||this.__savedItemsTotalEstimate}})}),status:Object(Qt.c)({readOnly:!0,type:ZS,defaultValue:ZS.UNKNOWN,decode:function(e,t){return t.items.find((function(t){return t.value===e}))}}),reason:Object(Qt.c)({readOnly:!0,type:String}),serverErrorCode:Object(Qt.c)({readOnly:!0,type:String}),jobProgress:V.b({readOnly:!0,dependencies:["jobStatus","itemsProcessed","itemsTotalEstimate"],get:Object.assign((function(){var e=this.jobStatus;return e===WS.NOT_STARTED||e===WS.PREPARING?0:e===WS.IN_PROGRESS?(this.timeToProgress||this.setAndReportTimeToProgress(),Math.max(0,Math.min(1,this.itemsProcessed/this.itemsTotalEstimate*.95))):e!==WS.FAILED?e===WS.COMPLETED?(this.timeToProgress||this.setAndReportTimeToProgress(),this.reportFeedback("assetCopierSuccess",{countOfStatusCalls:this.countOfStatusCalls,workflowSource:this.workflowSource}),1):void 0:void this.reportFeedback("assetCopierFailed",{countOfStatusCalls:this.countOfStatusCalls,copyFailReason:this.reason,copyFailServerErrorCode:this.serverErrorCode,workflowSource:this.workflowSource})}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r===WS.NOT_STARTED||r===WS.PREPARING?0:r===WS.IN_PROGRESS?(this.timeToProgress||this.setAndReportTimeToProgress(),Math.max(0,Math.min(1,i.internalGet(this,t[1+n])/i.internalGet(this,t[2+n])*.95))):r!==WS.FAILED?r===WS.COMPLETED?(this.timeToProgress||this.setAndReportTimeToProgress(),this.reportFeedback("assetCopierSuccess",{countOfStatusCalls:this.countOfStatusCalls,workflowSource:this.workflowSource}),1):void 0:void this.reportFeedback("assetCopierFailed",{countOfStatusCalls:this.countOfStatusCalls,copyFailReason:this.reason,copyFailServerErrorCode:this.serverErrorCode,workflowSource:this.workflowSource})}})}),jobStatus:V.b({readOnly:!0,dependencies:["status"],get:Object.assign((function(){return XS[this.status.value]}),{__CW__getter:function(e,t,n,i){return XS[i.internalGet(this,t[0+n]).value]}}),didChange:function(e){e!==WS.COMPLETED&&e!==WS.FAILED||this.endPolling()}}),jobSize:V.b(Oi.c("itemsTotalEstimate")),countOfStatusCalls:V.b(0),countOfFailedStatusCalls:V.b(0),workflowSource:V.b(""),startTimer:V.b(),timeToProgress:V.b(),includesRecordName:function(e){var t=this.includeRecords,n=this.excludeRecords;return Array.isArray(t)&&t.includes(e)||Array.isArray(n)&&!n.includes(e)},reportFeedback:function(e,t){var n=L.n().feedbackService;n&&n.report&&n.report(e,t)},setAndReportTimeToProgress:function(){this.timeToProgress=Date.now(),this.reportFeedback("assetCopierTimeToProgress",{duration:this.timeToProgress-this.startTimer,workflowSource:this.workflowSource})}}),eC=n(224),tC=n(250),nC=n(205),iC=function(e,t,n){return t===e?"PHOTOS":n===e?"VIDEOS":"ITEMS"};function rC(e){for(var t,n,i=((t={}).PHOTOS=[],t.VIDEOS=[],t.ITEMS=[],t),r=((n={}).PHOTOS="Photos",n.VIDEOS="Videos",n.ITEMS="Items",n),a=Object.keys(r),s=a.length,o=0;o<s;++o){var l=a[o],c=r[l];i[l].push(e+c+".0"),i[l].push(e+c+".1"),i[l].push(e+c+".2"),i[l].push(e+c+".More")}return i}function aC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)return"";var i=e.audiosCount,r=void 0===i?0:i,a=e.othersCount,o=void 0===a?0:a,l=e.photosCount,c=void 0===l?0:l,u=e.videosCount,d=void 0===u?0:u,h=e.hiddenAudiosCount,p=void 0===h?0:h,f=e.hiddenOthersCount,g=void 0===f?0:f,m=e.hiddenPhotosCount,_=void 0===m?0:m,v=e.hiddenVideosCount,b=void 0===v?0:v,y=c,w=d,I=r+o;n&&(y+=_,w+=b,I+=p+g);var S=T(I),C=T(y),E=T(w),A=T(t),O="Media.Count"+C+E+S+A;return s.d(O,{otherItemsCount:Ed(I),photosCount:Ed(y),videosCount:Ed(w),remainingCount:Ed(t)})}function sC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oC={OK:200,OK_USER_CANCELLED:230,OK_WITH_ISSUES:260};Object.freeze(oC);var lC=function(){function e(e,t){if(!(Number.isInteger(e)&&e>0))throw new Error("AsyncResult, `status` must be an unsigned integer");this.status=e,t&&(this.body=t)}var t,n;return t=e,(n=[{key:"ok",get:function(){return 2===Math.floor(this.status/100)}}])&&sC(t.prototype,n),e}();lC.OK=new lC(oC.OK);var cC={mixinDependencies:[zn],eventsToReport:H.d(F.b({didEnterSelectMode:qn.REPORT_ONCE,shareLoaded:qn.REPORT_ONCE,shareIncomplete:qn.REPORT_ONCE,shareDidScrollToEnd:qn.REPORT_ONCE,timeToLoad1:qn.REPORT_ONCE,shareDownload:qn.REPORT_ALL,cmmViewShareBackClicked:qn.REPORT_ALL,cmmShareBackPresent:qn.REPORT_ALL,cmmShareBackEmpty:qn.REPORT_ALL,cmmShareBackInitiated:qn.REPORT_ALL,cmmShareInitiated:qn.REPORT_ALL,cmmShareInitiatedOneUp:qn.REPORT_ALL,cmmShareGridItemPressed:qn.REPORT_ALL,cmmShareStopped:qn.REPORT_ALL,cmmShareRemoved:qn.REPORT_ALL,cmmShareCopyLink:qn.REPORT_ALL,cmmOneUpEntered:qn.REPORT_ALL}))},uC=we.b("AssetCopierWorkflowSource",{SHARE_CREATION:"ShareCreation",ADD_TO_LIBRARY:"AddToLibrary"});function dC(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function hC(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){dC(a,i,r,s,o,"next",e)}function o(e){dC(a,i,r,s,o,"throw",e)}s(void 0)}))}}var pC=globalThis.CloudKit,fC=function(e,t,n){return"string"===typeof e&&e.length>0?e:"number"===typeof(i=t||n)?ne.a("%{date:MMM} %{date:YYYY}",{date:new Date(i),dateFormatter:Hd}):"";var i},gC=function(){function e(){}return e.initiateCMMShare=function(){var t=hC(regeneratorRuntime.mark((function t(n,i,r,a){var s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=S.length>4&&void 0!==S[4]?S[4]:{beginStat:U.a,endStat:U.a,recordStat:U.a},o=S.length>5?S[5]:void 0,l=S.length>6?S[6]:void 0,c=S.length>7&&void 0!==S[7]&&S[7],u=r.createCMMZone(),d=u.zoneID,h=d.zoneName,p=d.ownerRecordName,f=pC.DatabaseScope.PRIVATE,g=e._createAndSaveRootRecord(r,u,a,l).catch((function(e){throw u.isLoaded&&u.delete().catch((function(){})),e})),m=g.then((function(e){var t=JS.beginNewJob({includeRecords:a.map(Kt.Record.getRecordNameFromPrimaryKey),sourceZoneID:r.cplZone.zoneID,targetZoneID:u.zoneID,targetRootName:on.RECORD_NAME},a.length,uC.SHARE_CREATION.value);return new lC(oC.OK,{rootRecord:e,recordCopierJob:t})})).catch((function(){return new lC(oC.OK_WITH_ISSUES)})),_=pC.getDefaultContainer(),v=yg.create(h,p),b=function(e){return e?Z.a.resolve(e):g},y=e._generateCKSharingSettings(n,i,s,u,c,a),w={preselectedTransport:o},I=NS.initiateShareInSingleStep(_,f,v,b,y,w),t.abrupt("return",I.then((function(e){var t=m,n=e.share;return n?t.then((function(e){return new lC(e.status,Object.assign({},e.body,{shareRecord:n}))})):t.then((function(){return new lC(oC.OK_WITH_ISSUES)})),t})));case 17:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),e.getSupportedCMMTransports=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={beginStat:U.a,endStat:U.a,recordStat:U.a};return NS.getSupportedTransportsForSettings(e._generateCKSharingSettings(void 0,void 0,n,void 0,t))},e._createAndSaveRootRecord=function(){var t=hC(regeneratorRuntime.mark((function t(n,i,r,a){var s,o,l,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.chooseBestPlacardMedia(r),o=e._generatePreviewImageData(s),t.next=4,i.saveWithoutRelated();case 4:return l=e._getShareMetadataFromMediaPKs(r),a&&(c=a.originatingZoneName||a.getPath("zone.zoneID.zoneName"))&&(l.originatingZoneName=c),u=n.createCMMRootRecord(i,l),t.next=9,o;case 9:return(d=t.sent)&&(u.previewData={dataToUpload:d}),t.next=13,u.save();case 13:return t.abrupt("return",on.find(u.pk));case 14:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),e.showCopyLink=function(){var t=hC(regeneratorRuntime.mark((function t(n,i,r){var a,s,o,l,c,u,d,h,p,f,g,m,_,v=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:{beginStat:U.a,endStat:U.a,recordStat:U.a},s=v.length>4&&void 0!==v[4]&&v[4],o=n.zoneID,l=o.ownerRecordName,c=o.zoneName,u=Gd.a(n,"share.title"),d=function(){var e=hC(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=yg.create(c,l),p=pC.getDefaultContainer(),f=e._generateCKSharingSettings(u,i,a,void 0,s),g=bg.COPY_LINK,f.contactsService=null,f.supportedTransports=[g],m={preselectedTransport:g},_=r?pC.DatabaseScope.PRIVATE:pC.DatabaseScope.SHARED,t.next=15,NS.addParticipantsInSingleStep(p,_,h,d,f,m);case 15:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),e.chooseBestPlacardMedia=function(e){if(e&&e.length){var t;e.sort((function(e,t){var n=fr.a.getDataHashForPrimaryKey(e).asset,i=pr.a.getDataHashForPrimaryKey(n).assetDate,r=fr.a.getDataHashForPrimaryKey(t).asset;return i-pr.a.getDataHashForPrimaryKey(r).assetDate}));for(var n=!1,i=0;i<e.length;i++){var r=e[i],a=fr.a.getDataHashForPrimaryKey(r),s=eC.a.getDataHashForPrimaryKey(a.master),o=pr.a.getDataHashForPrimaryKey(a.asset),l=o._assetSubtypeV2;if(s.dataClassType!==tC.a.AUDIO.value){if(o.isFavorite){t=r;break}(!t||n&&l!==nC.a.PHOTO_SCREENSHOT.value)&&(t=r,n=l===nC.a.PHOTO_SCREENSHOT.value)}}return t}},e._generatePreviewImageData=function(){var e=hC(regeneratorRuntime.mark((function e(t){var n,i,r,a,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:1e5,t){e.next=3;break}return e.abrupt("return",void 0);case 3:if(i=fr.a.find(t)){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,i.createBestImageBelowFileSize(n,"image/jpeg",Jp.a.CMM_GENERATE_SHARE_PLACARD_PREVIEW);case 8:return r=e.sent,a=en.encode({previewImageData:[r],keyAssetIdentifier:Kt.Record.getRecordNameFromPrimaryKey(t),cropRectString:"{{0, 0}, {1, 1}}"}).finish(),e.abrupt("return",new Blob([a]));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e._getShareMetadataFromMediaPKs=function(e){for(var t=0,n=0,i=0,r=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=0;s<e.length;s++){var o=fr.a.getDataHashForPrimaryKey(e[s]);if(o){t+=1;var l=pr.a.getDataHashForPrimaryKey(o.asset).assetDate;r>l&&(r=l),a<l&&(a=l);var c=eC.a.getDataHashForPrimaryKey(o.master).dataClassType;c===tC.a.IMAGE.value&&(n+=1),c===tC.a.MOVIE.value&&(i+=1)}}return{createDate:Date.now(),endDate:a,startDate:r,assetCount:t,videosCount:i,photosCount:n}},e._generateCKSharingSettings=function(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l="photos",c="photos",u=e._generateLoggedInUserIdentity(a),d=[wm.PUBLIC],h=[Im.READ_ONLY],p=s.d("CMM.InitiateShare.Title"),f=s.d("CMM.InitiateShare.Subtitle"),g=!0,m=tn.RECORD_NAME,_=tn.SHARE_TYPE,v=!0,b=e._getShareMetadataFromMediaPKs(o),y=b.assetCount,w=b.videosCount,I=b.photosCount,S=b.startDate,C=b.endDate,E=e._provideBodyForTransport.bind(void 0,t,S,C,y,I,w),A=e._provideSubjectForMail.bind(void 0,t,S,C,y,I,w);return iy.create({appName:l,shareUrlNamespace:c,logService:i,loggedInUserIdentity:u,primaryInteractionMode:n,supportedAccess:d,supportedPermissions:h,initiateSharePaneTitle:p,initiateSharePaneSubtitle:f,useAnonymousPublicAccess:g,shareTitle:t,shareType:_,proposedShareRecordName:m,shouldHideAddParticipantsSummary:v,hostedByCloudOSOne:a,provideBodyForTransport:E,provideSubjectForMail:A,didUpdateShareRecord:function(e){return e.deleted?r.delete().catch((function(){})):Z.a.resolve()},supportsNativeMail:!0})},e._generateLoggedInUserIdentity=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var n=ve.a.authBag.user,i=n.firstName,r=n.lastName,a=n.displayablePrimaryAppleId;e={givenName:i,familyName:r,appleId:a}}else{var s=Fo.defaultInstance.user,o=s.firstName,l=s.lastName,c=s.appleId;e={givenName:o,familyName:l,appleId:c}}return e},e}();gC._provideBodyForTransport=function(e,t,n,i,r,a,s,o){var l,c="string"===typeof e&&e.length>0?"ShareName":"Date",u=fC(e,t,n),d=iC(i,r,a),h="\n"+Md(rC("CMM.InitiateShare.Body.From."+c+".")[d],((l={count:i})[c]=u,l))+":\n"+o;return Z.a.resolve(h)},gC._provideSubjectForMail=function(e,t,n,i,r,a){var o,l=iC(i,r,a),c="string"===typeof e&&e.length>0?"ShareName":"Date",u=fC(e,t,n),d=s.d("CMM.InitiateShare.Subject.From."+c+"."+l,((o={})[c]=u,o));return Z.a.resolve(d)},n(1317);var mC=n(1309),_C=n(588),vC=n(679),bC=document.createElement("canvas").getContext("2d"),yC=function(e,t){return bC.font=function(e){var t=globalThis.getComputedStyle(e||document.body),n=t.getPropertyValue("font-size"),i=t.getPropertyValue("font-family");return t.getPropertyValue("font-weight")+" "+n+" "+i}(t),bC.measureText(e)},wC=In.a.extend({owner:V.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"titleString",attributes:{signal:"titleDidRender"}}],name:"titleElement",classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"descriptionString",attributes:{}}],name:"descriptionElement",classes:["description"]}],classes:["sharing-selection-menu-header-view"]},__QUALIFIED_CLASS_NAME__:"SharingSelectionMenuHeaderView"},titleString:V.b(s.d("SharingSelectionMenu.Header.Title.Generic")),descriptionString:s.d("SharingSelectionMenu.Description"),minimumSize:V.b({readOnly:!0,dependencies:["isAttached","titleDidRender"],get:Object.assign((function(){if(this.isAttached){var e=this.titleString,t=this.titleElement,n=this.descriptionElement,i=Math.ceil(yC(e,t).width+parseFloat(yl.c(t).get("padding-left"))+parseFloat(yl.c(t).get("padding-right")));t.style.width=i+"px";var r=Math.ceil(t.getBoundingClientRect().height);t.style.width="";var a=Ch(n,i),s=a.width,o=a.height,l=.8*s+.2*i;return n.style.width=l+"px",n.style.height=o+"px",_l.a.create({width:i,height:r+o})}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=this.titleString,a=this.titleElement,s=this.descriptionElement,o=Math.ceil(yC(r,a).width+parseFloat(yl.c(a).get("padding-left"))+parseFloat(yl.c(a).get("padding-right")));a.style.width=o+"px";var l=Math.ceil(a.getBoundingClientRect().height);a.style.width="";var c=Ch(s,o),u=c.width,d=c.height,h=.8*u+.2*o;return s.style.width=h+"px",s.style.height=d+"px",_l.a.create({width:o,height:l+d})}}})})}),IC=Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["icon-container"],styles:{"background-image":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"iconBackgroundImage",attributes:{},unit:null,property:"background-image"}}}]}},__QUALIFIED_CLASS_NAME__:"SharingSelectionMenuItemView"},owner:V.b(),transportInfo:V.b(),hasLeftIcon:!0,additionalClassNames:F.b(["sharing-selection-menu-item-view"]),action:"initiateShareWithTransportAndThenHide",title:Oi.c("transportInfo.displayName"),context:Oi.c("transportInfo.transportValue"),isDisabled:Oi.c("transportInfo.isDisabled"),iconBackgroundImage:V.b({readOnly:!0,dependencies:["transportInfo.icon"],get:Object.assign((function(){return"url("+this.getPath("transportInfo.icon")+")"}),{__CW__getter:function(e,t,n,i){return"url("+i.internalGetPath(this,t[0+n])+")"}})}),minimumSize:V.b({readOnly:!0,dependencies:["isAttached"],get:Object.assign((function(){if(this.isAttached){var e=this.element,t=e.firstChild;e.style.width="10000px";var n=Math.ceil(t.getBoundingClientRect().width+parseFloat(this.style.get("padding-left"))+parseFloat(this.style.get("padding-right"))),i=Math.ceil(e.getBoundingClientRect().height);return e.style.width="",_l.a.create({width:n,height:i})}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=this.element,a=r.firstChild;r.style.width="10000px";var s=Math.ceil(a.getBoundingClientRect().width+parseFloat(this.style.get("padding-left"))+parseFloat(this.style.get("padding-right"))),o=Math.ceil(r.getBoundingClientRect().height);return r.style.width="",_l.a.create({width:s,height:o})}}})})}),SC=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"itemViews"}]},__QUALIFIED_CLASS_NAME__:"SharingSelectionMenuView"},vsShareData:V.b(),supportedTransportInfos:V.b(),supportedTransportInfosWithHeaderSlot:V.b({readOnly:!0,dependencies:["supportedTransportInfos"],get:Object.assign((function(){return this.supportedTransportInfos?[void 0].concat(this.supportedTransportInfos):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?[void 0].concat(i.internalGet(this,t[0+n])):void 0}})}),itemViews:Ff.b({source:"supportedTransportInfosWithHeaderSlot",desiredOutputType:Wo.b,outputForInput:function(e){return e?IC.create({transportInfo:e}):wC.create()}}),itemViewSizes:Ff.b({source:"itemViews",desiredOutputType:Array,outputForInput:function(e){return e.minimumSize},inputDidEnter:function(e,t){e._ivsArrayMutationObserver=e.listen("minimumSize",(function(){return t(e)})).retain()},inputDidExit:function(e){e._ivsArrayMutationObserver.disconnect(),e._ivsArrayMutationObserver.release()}}),desiredSize:V.b({readOnly:!0,strong:!0,dependencies:["isAttached","itemViewSizes"],get:Object.assign((function(){if(!this.isAttached||!this.itemViewSizes)return _l.a.create({width:0,height:0});var e=this.itemViewSizes,t=0,n=0;return e.forEach((function(e){e&&(e.width>t&&(t=e.width),n+=e.height)})),_l.a.create({width:t,height:n})}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||!i.internalGet(this,t[1+n]))return _l.a.create({width:0,height:0});var r=i.internalGet(this,t[1+n]),a=0,s=0;return r.forEach((function(e){e&&(e.width>a&&(a=e.width),s+=e.height)})),_l.a.create({width:a,height:s})}})})});function CC(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var EC=fi.a.extend({mixinDependencies:[fl.a],viewClass:SC,hostedByCloudOSOne:!0,vsShareData:V.b(),sparseSelection:V.b(),selectedMediaPKs:V.b(),selectedMediasTitle:V.b(),view:V.b({downstreamBindings:{vsShareData:"(owner).vsShareData",supportedTransportInfos:"(owner).supportedTransportInfos"}}),desiredSize:V.b({strong:!0,binding:"view.desiredSize"}),alertViewControllerClass:On.extend({iconNames:["photos-icon"]}),errorAlertViewControllerClass:On.extend({iconNames:["photos-icon","error"]}),supportedTransportInfoHashes:V.b({readOnly:!0,dependencies:["isAttached",G.a.bindingFor("application.isCreateAllowed")],get:Object.assign((function(){if(this.isAttached){var e=gC.getSupportedCMMTransports(this.hostedByCloudOSOne);return G.a.application.isCreateAllowed?e:e.filter((function(e){return e.transportValue!==bg.COPY_LINK}))}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=gC.getSupportedCMMTransports(this.hostedByCloudOSOne);return i.internalGetPath(this,t[1+n])?r:r.filter((function(e){return e.transportValue!==bg.COPY_LINK}))}}})}),supportedTransportInfoHashesIncludingVendorSharingTransports:V.b({readOnly:!0,dependencies:["supportedTransportInfoHashes"],get:Object.assign((function(){if(this.supportedTransportInfoHashes){var e=this.supportedTransportInfoHashes.slice();return e.slice().sort((function(t,n){return(t.transportValue===bg.COPY_LINK?1/0:e.indexOf(t))-(n.transportValue===bg.COPY_LINK?1/0:e.indexOf(n))}))}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[0+n]).slice();return r.slice().sort((function(e,t){return(e.transportValue===bg.COPY_LINK?1/0:r.indexOf(e))-(t.transportValue===bg.COPY_LINK?1/0:r.indexOf(t))}))}}})}),supportedTransportInfos:Ff.b({source:"supportedTransportInfoHashesIncludingVendorSharingTransports",outputForInput:function(e){return AC.extend(e,{owner:this}).create()}}),initiateShareWithTransportAndThenHide:function(e){this.initiateShareWithTransport(e),this.sendEvent("hide")},initiateShareWithTransport:function(e){"VENDOR_SHARING_FACEBOOK"!==e?e===bg.WEB_MAIL&&this.sparseSelection.isFullyLoaded&&_C.a.sharedInstance.validationResultsForShareData(this.vsShareData).validity>0?this.startVendorSharingExtension(vC.EmailExtension):this.startOutgoingCMMShareWithTransport(e):this.startVendorSharingExtension(mC.FacebookExtension)},startVendorSharingExtension:function(e){var t=e.create({shareData:this.bindingFor("vsShareData"),alertViewControllerClass:this.alertViewControllerClass,errorAlertViewControllerClass:this.errorAlertViewControllerClass});this.sendEvent("vendorSharingExtensionWasStarted",t)},startOutgoingCMMShareWithTransport:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.sendEvent("shareInitiationIsInProgress",!0),(i=G.a.application.feedbackService)&&i.report&&i.report("cmmShareInitiated"),r={beginStat:U.a,endStat:U.a,recordStat:G.a.application.feedbackService.report},t.next=6,n.sparseSelection.ensureSelectionIsFullyLoaded(n,1);case 6:return t.next=8,gC.initiateCMMShare(n.selectedMediasTitle,n.primaryInteractionMode,L.n(),n.selectedMediaPKs,r,e,void 0,n.hostedByCloudOSOne);case 8:a=t.sent,n.sendEvent("shareInitiationIsInProgress",!1),a.status===oC.OK&&((s=a.body.recordCopierJob).beginPolling(),X.a((function(){return s.endPolling()}),3e4));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){CC(a,i,r,s,o,"next",e)}function o(e){CC(a,i,r,s,o,"throw",e)}s(void 0)}))})()},nextResponder:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"SharingSelectionMenuViewController"}}),AC=P.a.extend(B.b,{mixinDependencies:[fl.a],owner:V.b(),transportValue:V.b(),displayName:V.b(),iconMouse2x:V.b(),iconMouse1x:V.b(),iconTouch3x:V.b(),iconTouch2x:V.b(),iconTouch1x:V.b(),bestIconSizeMouse:V.b(),bestIconSizeTouch:V.b(),isDisabled:V.b(!1),dpr:V.b({binding:p.a.sharedInstance.bindingFor("devicePixelRatio")}),iconMouse:V.b({readOnly:!0,dependencies:["dpr","iconMouse2x","iconMouse1x"],get:Object.assign((function(e){return e||(this.dpr>1?this.iconMouse2x||this.iconMouse1x:this.iconMouse1x||this.iconMouse2x)}),{__CW__getter:function(e,t,n,i){return e||(i.internalGet(this,t[0+n])>1?i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n]):i.internalGet(this,t[2+n])||i.internalGet(this,t[1+n]))}})}),iconTouch:V.b({readOnly:!0,dependencies:["dpr","iconTouch3x","iconTouch2x","iconTouch1x"],get:Object.assign((function(e){return e||(this.dpr>2?this.iconTouch3x||this.iconTouch2x||this.iconTouch1x:this.dpr>1?this.iconTouch2x||this.iconTouch3x||this.iconTouch1x:this.iconTouch1x||this.iconTouch2x||this.iconTouch3x)}),{__CW__getter:function(e,t,n,i){return e||(i.internalGet(this,t[0+n])>2?i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n]):i.internalGet(this,t[0+n])>1?i.internalGet(this,t[2+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[3+n]):i.internalGet(this,t[3+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[1+n]))}})}),icon:V.b({readOnly:!0,dependencies:["primaryInteractionMode","iconMouse","iconTouch"],get:Object.assign((function(e){return e||(this.primaryInteractionMode===yn.a.MOUSE?this.iconMouse:this.iconTouch)}),{__CW__getter:function(e,t,n,i){return e||(i.internalGet(this,t[0+n])===yn.a.MOUSE?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n]))}})}),bestIconSize:V.b({readOnly:!0,dependencies:["primaryInteractionMode","bestIconSizeMouse","bestIconSizeTouch"],get:Object.assign((function(e){return e||(this.primaryInteractionMode===yn.a.MOUSE?this.bestIconSizeMouse:this.bestIconSizeTouch)}),{__CW__getter:function(e,t,n,i){return e||(i.internalGet(this,t[0+n])===yn.a.MOUSE?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n]))}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"TransportInfo"}}),OC=Rl.extend({allowedLayouts:V.b([dl,hl]),insetFromWindow:5,viewClass:F.b({additionalClassNames:F.b(["sharing-selection-menu-popover-view"])}),desiredSize:V.b({strong:!0,binding:"contentController.desiredSize"}),minimumSize:V.b({strong:!0,binding:"desiredSize"}),vsShareData:V.b(),sparseSelection:V.b(),selectedMediaPKs:V.b(),selectedMediasTitle:V.b(),_vsShareDataGatedByAttachmentOrExtension:V.b({readOnly:!0,dependencies:["needsSelectionAwareness","vsShareData"],get:Object.assign((function(){return this.needsSelectionAwareness?this.vsShareData:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):void 0}})}),_selectedMediaPKsGatedByAttachmentOrExtension:V.b({readOnly:!0,dependencies:["needsSelectionAwareness","selectedMediaPKs"],get:Object.assign((function(){return this.needsSelectionAwareness?this.selectedMediaPKs:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):void 0}})}),_sparseSelectionGatedByAttachmentOrExtension:V.b({readOnly:!0,dependencies:["needsSelectionAwareness","sparseSelection"],get:Object.assign((function(){return this.needsSelectionAwareness?this.sparseSelection:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):void 0}})}),_lastStartedVendorExtension:V.b({strong:!0}),_shareInitiationIsInProgress:V.b(),vendorSharingExtensionWasStarted:function(e){return this._lastStartedVendorExtension=e,!1},shareInitiationIsInProgress:function(e){this._shareInitiationIsInProgress=e},needsSelectionAwareness:V.b({readOnly:!0,dependencies:["isAttached","_lastStartedVendorExtension.state","_shareInitiationIsInProgress"],get:Object.assign((function(){if(this.isAttached||this._shareInitiationIsInProgress)return!0;var e=this.getPath("_lastStartedVendorExtension.state"),t=vg.a;return e&&e!==t.FINISHED&&e!==t.FAILED&&e!==t.CANCELED}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n]))return!0;var r=i.internalGetPath(this,t[1+n]),a=vg.a;return r&&r!==a.FINISHED&&r!==a.FAILED&&r!==a.CANCELED}})}),contentController:V.b({strong:!0,defaultValue:k.c(EC),downstreamBindings:{vsShareData:"(owner)._vsShareDataGatedByAttachmentOrExtension",selectedMediaPKs:"(owner)._selectedMediaPKsGatedByAttachmentOrExtension",sparseSelection:"(owner)._sparseSelectionGatedByAttachmentOrExtension",nextResponder:"(owner)",selectedMediasTitle:"(owner).selectedMediasTitle"}}),nextResponder:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"SharingSelectionMenuPopoverViewController"}}),TC={mixinDependencies:[xf],sparseSelection:_u.a.define(),attemptTitleCreationForSharing:V.b(!1),selectedMediasTitle:V.b({readOnly:!0,dependencies:["selectedMediaPKs","attemptTitleCreationForSharing"],get:Object.assign((function(){var e=this.selectedMediaPKs;if(this.attemptTitleCreationForSharing&&e.length>0){for(var t,n=_g._sealedMomentsByAssetPrimaryKey,i=0;i<e.length;i++){var r=e[i];if(!r){t=void 0;break}var a=n[r];if(t){if(t!==a){t=void 0;break}}else t=a}if(t){var s=t.title;return s?s.localizedTitleForNameInfo():void 0}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(i.internalGet(this,t[1+n])&&r.length>0){for(var a,s=_g._sealedMomentsByAssetPrimaryKey,o=0;o<r.length;o++){var l=r[o];if(!l){a=void 0;break}var c=s[l];if(a){if(a!==c){a=void 0;break}}else a=c}if(a){var u=a.title;return u?u.localizedTitleForNameInfo():void 0}}}})}),primaryInteractionMode:V.b(yn.a.MOUSE),sharingSelectionMenuVC:V.b({type:El,strong:!0,defaultValue:k.c(OC),downstreamBindings:{vsShareData:"(owner).vsShareData",sparseSelection:"(owner).sparseSelection",selectedMediaPKs:"(owner).selectedMediaPKs",selectedMediasTitle:"(owner).selectedMediasTitle",nextResponder:"(owner)"}}),vendorSharingExtensionWasStarted:function(e){if(e&&this.selectedMediaPKs){var t=e.context?e.context:e,n=this.selectedMediaPKs.map(LC);kf.a.fetch(n).then(MC.bind(this)).catch(function(e){return function(t){var n;n=Array.isArray(t)?s.d("Alert.Share.RecordFailure"):t.isServerError?s.d("Alert.Share.NetworkError"):s.d("Alert.Share.GeneralError"),Nn.create({message:s.d("Alert.Share.ErrorTitle"),description:n,primaryButton:{title:s.d("Alert.OK.Button.Title")},alternateButton:null}).show(),e&&e.terminate()}}(t))}},selectedMediaPKs:V.b({strong:!0,readOnly:!0,dependencies:["sparseSelection.selectionDidChange","sparseSelection.isFullyLoaded"],get:function(){var e=this.sparseSelection;if(!e)return[];for(var t=[],n=e.selection.createIterator(),i=L.n().constructor;n.isValid;){var r=n.encodedValue;if(void 0!==r){var a=void 0;"number"===typeof r?a=i.getPrimaryKeyForStoreId(r):pi.a(r,fr.a)?a=r.pk:"number"===typeof fr.a.primaryKeysToStoreIds[r]&&(a=r),a&&t.push(a)}n.next()}return t}}),allMultiResMedias:Ff.b({source:"selectedMediaPKs",sourceWillNeverBeObservable:!0,retainsOutputs:!1,outputForInput:function(e){if(!e)return null;var t=fr.a.find(e);if(!t)return null;var n=[],i=t.renderableImageDerivativeInfos;i&&n.push.apply(n,i.map((function(e){return new RC(t,e)})));var r=t.renderableVideoDerivativeInfos;return r&&n.push.apply(n,r.map((function(e){return new RC(t,e)}))),n}}),vsShareData:V.b({readOnly:!0,dependencies:["allMultiResMedias"],get:Object.assign((function(){return this.allMultiResMedias?this.allMultiResMedias.reduce((function(e,t){if(t){var n=t[0];if(n)switch(n._assetGenericType){case fr.a.Type.IMAGE.value:e.images.push(t);break;case fr.a.Type.VIDEO.value:e.videos.push(t);break;case fr.a.Type.OTHER.value:break;default:throw _.b("Unexpected shareData element type",{fatalType:n._assetGenericType})}}return e}),{images:[],videos:[]}):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n]).reduce((function(e,t){if(t){var n=t[0];if(n)switch(n._assetGenericType){case fr.a.Type.IMAGE.value:e.images.push(t);break;case fr.a.Type.VIDEO.value:e.videos.push(t);break;case fr.a.Type.OTHER.value:break;default:throw _.b("Unexpected shareData element type",{fatalType:n._assetGenericType})}}return e}),{images:[],videos:[]}):null}})})};function MC(e){for(var t,n=this.allMultiResMedias,i={},r=0;t=n[r];r++){var a=t[0]&&t[0].recordName;if(a){i[a]=t;for(var s,o=0;s=t[o];o++)i[DC(s)]=s}}for(var l,c=e.map(PC),u=new Set,d=0;l=c[d];d++)for(var h,p=0;h=l[p];p++){var f=i[DC(h)];f&&(f.hasGeo=!1,f.urlExpiry=h.urlExpiry,f.url=h.originalUrl.replace(Vf.c,globalThis.encodeURIComponent(f.fileName)),u.add(f))}for(var g,m=0;g=n[m];m++){for(var _,v=0;_=g[v];v++)u.has(_)||(g.splice(v,1),v--);g.length||(n.splice(m,1),m--)}this.propertyChanged("allMultiResMedias")}function DC(e){return e.recordName+":"+e.derivativeName+":"+e.width+":"+e.height}function PC(e){return e.vsShareData}function LC(e){var t=fr.a.find(e).retain(),n=t.renderableVideoDerivativeInfos,i=t.renderableImageDerivativeInfos,r=n&&n.length?n:i&&i.length?i:null,a=(r&&r[0]&&r[0].reflectsEdits?t.primaryAsset:t.primaryMaster).recordName;return t.release(),a}var RC=function(e,t){this.url=t.url,this.width=t.width,this.height=t.height,this.mimeType=t.mimeType,this.fileSize=t.byteSize,this.fileName=t.fileName,this.hasGeo=!0,this.recordName=LC(e.pk),this.derivativeName=t.derivativeName,this.urlExpiry=t.urlExpiry,this._assetGenericType=e.genericType.value,this._assetClientId=e.pk,this._derivativeClientId=t.derivativeId,Object.defineProperty(this,"imageExample",{get:function(){if(this._imageExample)return this._imageExample;var t=e.retain("mediaRes").autorelease("mediaRes").getLoadedDerivative(this._derivativeClientId),n=t?t.retain("mediaRes").autorelease("mediaRes").toCanvas():null;return this._imageExample=n,n},set:function(e){this._imageExample=e}})};function xC(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var NC={mixinDependencies:[B.b,Nf,TC,fh],toggleFavorite:function(e){G.a.application.isCreateAllowed&&this.toggleFavoriteMediaAndSelection(e,this.sparseSelection)},editCaption:function(e){var t=e.model.primaryAsset,n=e.value;t.captionEnc=n,t.save()},editAlbumName:function(e){var t=e.model,n=e.value;n!==t.name&&""!==n&&(t.name=n,t.save())},download:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.downloadSelection(t.sparseSelection);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){xC(a,i,r,s,o,"next",e)}function o(e){xC(a,i,r,s,o,"throw",e)}s(void 0)}))})()},feedbackService:V.b(G.a.bindingFor("application.feedbackService")),shareSelection:function(e){e||_.b("No view context provided for anchoring the Sharing popover.");var t=this.sparseSelection;t&&t.length&&(this.attachedPopoverController&&this.attachedPopoverController!==this.sharingSelectionMenuVC&&this.attachedPopoverController.hide(),Dd.isSelectionOverLimit(t)?Dd.showSelectionLimitAlert(ph.SHARE):this.sharingSelectionMenuVC.toggle(e))},addSelectionToAlbum:function(e){e||_.b("No view context provided for anchoring the Create Album popover."),this.attachedPopoverController&&this.attachedPopoverController!==this.addToAlbumVC&&this.attachedPopoverController.hide(),Dd.isSelectionOverLimit(this.sparseSelection)?Dd.showSelectionLimitAlert(ph.ADD_TO_ALBUM):this.addToAlbumVC.toggle(e)},removeSelection:function(){var e=this.sparseSelection,t=this.container;this.removeOrDeleteSelection(e,t,void 0,Nn)}},FC={isUIResizeSlow:V.b(!1)},VC={mixinDependencies:[B.b],parentRoute:_u.a.define(),toolbarConfiguration:V.b({strong:!0,downstreamBindings:{nextResponder:"(owner)",parentRoute:"(owner).parentRoute",isSidebarAllowed:"(owner).isSidebarAllowed"}}),isSidebarAllowed:V.b()},kC=n(1268),BC=n(1276),jC={targetViewGuid:null,timestamp:0};function UC(e){var t=e.detail;if(2===t)return!0;if(1===t||t>2)return!1;var n=!1,i=Date.now(),r=Yl.b(e.targetView);return jC.targetViewGuid===r&&i-jC.timestamp<=300&&(n=!0),jC.targetViewGuid=r,jC.timestamp=i,n}var GC=n(1321),HC=n(1267),WC=n(789),$C=n(669),zC=n(582),KC=n(1275),qC=n(1233),QC=n(803),YC=n(197),ZC=n(585),XC=n(179),JC=n(807),eE=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",name:"lpkBadge"}],styles:{position:"absolute"}},className:"p2-live-photos-badge-view",__QUALIFIED_CLASS_NAME__:"LivePhotosBadgeView"},init:function(){var e=this,t=arguments;e.__s._$5l$init.apply(e,t);var n=globalThis.LivePhotosKit;n&&(this._badge=new n.LivePhotoBadge({element:this.lpkBadge,borderRadius:3}))},_badge:null,progress:V.b(0),shouldShowError:V.b(!1),_didAttach:B.h("isAttached",(function(e){e&&this._badge&&this.resetBadge()})),_onProgressChange:B.h("progress","shouldShowError",(function(e,t){this._badge&&(this._badge.shouldShowError=t,this._badge.progress=e)})),playLivePhoto:B.i(),stopLivePhoto:B.i(),attachPlayerInstance:function(e){var t=e.__internalLPKPlayer__;this._badge&&this._badge.attachPlayerInstance(t)},resetBadge:function(){this._badge&&this._badge.reset()},updateBadgeText:function(e){this._badge.updateBadgeText(e)},__superMap:{_$5l$init:"init"}}),tE=n(1269),nE=n(580),iE=n(466),rE=n(1271),aE=n(790),sE=In.a.extend(uc.a,tc.a,aE.a).extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["p2-media-presenter-view"]},__QUALIFIED_CLASS_NAME__:"MediaPresenterView"},media:V.b({strong:!0}),isAloneInParent:V.b(!0),isPrimaryInParent:V.b(!0),isTargetInParent:V.b(!0),isShowingInParent:V.b(!0),isSteadyInParent:V.b(!0),isBackgroundablySteadyInParent:V.b(!0),isSteadilyAloneInParent:V.b({readOnly:!0,dependencies:["isSteadyInParent","isAloneInParent"],get:Object.assign((function(){return this.isSteadyInParent&&this.isAloneInParent}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),isBackgroundablySteadilyAloneInParent:V.b({readOnly:!0,dependencies:["isBackgroundablySteadyInParent","isAloneInParent"],get:Object.assign((function(){return this.isBackgroundablySteadyInParent&&this.isAloneInParent}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),wantsUIControl:V.b({readOnly:!0,dependencies:["wantsFullUIControl","isZoomedIn"],get:Object.assign((function(){return this.wantsFullUIControl||this.isZoomedIn}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),wantsFullUIControl:V.b(!1),canZoom:V.b(!1),minZoomLevel:V.b(NaN),maxZoomLevel:V.b(NaN),zoomSteps:V.b(null),zoomLevel:V.b({dependencies:["unzoomedZoomLevel","canZoom"],get:Object.assign((function(e){return e&&this.canZoom?e:this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return e&&i.internalGet(this,t[1+n])?e:i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){if(!this.canZoom)return NaN;var t=this.unzoomedZoomLevel;return isNaN(t)||Math.abs(e-t)/t<.01?NaN:e},didChange:U.a}),unzoomedZoomLevel:V.b(NaN),isZoomed:V.b({readOnly:!0,dependencies:["canZoom","zoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){return!!this.canZoom&&this.zoomLevel!==this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n])}})}),isZoomedIn:V.b({readOnly:!0,dependencies:["isZoomed","zoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){return!!this.isZoomed&&this.zoomLevel>this.unzoomedZoomLevel}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])>i.internalGet(this,t[2+n])}})}),initFromPool:function(e){this.__s._$2VD$initFromPool.call(this),this.media=e},cleanup:function(){var e=this,t=arguments;this.media=null,this.zoomLevel=0,e.__s._$2Xz$cleanup.apply(e,t)},_validateShowingPrimaryRelationship:B.h("isShowingInParent","isPrimaryInParent",(function(e,t){t&&!e&&_.b("MediaPresenterView is being told it is the primary view, but it is not being told to be showing.")})),__superMap:{_$2VD$initFromPool:"initFromPool",_$2Xz$cleanup:"cleanup"}}).extend(Mp.a,Dp.a,wi.a,kC.a).extend({dpr:V.b(p.a.sharedInstance.bindingFor("devicePixelRatio")),imageLeft:V.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign((function(){return this._zoomedImagePosition[0]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageTop:V.b({readOnly:!0,dependencies:["_zoomedImagePosition"],get:Object.assign((function(){return this._zoomedImagePosition[1]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),imageWidth:V.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign((function(){return this._zoomedImageDimensions[0]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),imageHeight:V.b({readOnly:!0,dependencies:["_zoomedImageDimensions"],get:Object.assign((function(){return this._zoomedImageDimensions[1]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),pinnedImageLeft:V.b({readOnly:!0,dependencies:["insetLeft","imageLeft"],get:Object.assign((function(){return Math.max(this.insetLeft,this.imageLeft)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageRight:V.b({readOnly:!0,dependencies:["viewportWidth","pinnedImageLeft","pinnedImageWidth"],get:Object.assign((function(){return this.viewportWidth-this.pinnedImageLeft-this.pinnedImageWidth}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageTop:V.b({readOnly:!0,dependencies:["insetTop","imageTop"],get:Object.assign((function(){return Math.max(this.insetTop,this.imageTop)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageBottom:V.b({readOnly:!0,dependencies:["viewportHeight","pinnedImageTop","pinnedImageHeight"],get:Object.assign((function(){return this.viewportHeight-this.pinnedImageTop-this.pinnedImageHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),pinnedImageWidth:V.b({readOnly:!0,dependencies:["insetWidth","imageWidth"],get:Object.assign((function(){return Math.min(this.insetWidth,this.imageWidth)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),pinnedImageHeight:V.b({readOnly:!0,dependencies:["insetHeight","imageHeight"],get:Object.assign((function(){return Math.min(this.insetHeight,this.imageHeight)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),defaultMinZoomLevel:V.b(.5),minZoomLevel:V.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMinZoomLevel"],get:Object.assign((function(){return Math.min(this.defaultMinZoomLevel,this.unzoomedZoomLevel)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[1+n]),i.internalGet(this,t[0+n]))}})}),defaultMaxZoomLevel:V.b(4),maxZoomLevel:V.b({readOnly:!0,dependencies:["unzoomedZoomLevel","defaultMaxZoomLevel"],get:Object.assign((function(){return Math.max(this.unzoomedZoomLevel,this.defaultMaxZoomLevel)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),bestEffort100PercentZoomLevel:V.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel"],get:Object.assign((function(){return Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,1))}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),Math.min(i.internalGet(this,t[1+n]),1))}})}),zoomSteps:V.b({readOnly:!0,dependencies:["minZoomLevel","maxZoomLevel","unzoomedZoomLevel"],get:Object.assign((function(){var e=this._zoomSteps_lastRet;e&&(this._zoomSteps_lastRet=null,Sh.arrayPool.disposeInstance(e));var t=this.minZoomLevel,n=this.maxZoomLevel,i=this.unzoomedZoomLevel;if(!t||!n||!i)return null;for(var r=Sh.arrayPool.getInstanceFromParams(t),a=Math.log(2),s=Math.log(n)/a,o=t===i,l=Math.ceil(Math.log(t)/a);l<s;l++){var c=Math.pow(2,l),u=2*c/3,d=3*c/2;u<1&&u>t&&(Math.abs(u-i)>=.01?r.push(u):(o||r.push(i),o=!0)),Math.abs(c-i)>=.01?r.push(c):(o||r.push(i),o=!0),d>1&&d<n&&(Math.abs(d-i)>=.01?r.push(d):(o||r.push(i),o=!0))}return!o&&i>t&&i<n&&(r.push(i),r.sort(uE)),r[r.length-1]!==n&&r.push(n),this._zoomSteps_lastRet=r}),{__CW__getter:function(e,t,n,i){var r=this._zoomSteps_lastRet;r&&(this._zoomSteps_lastRet=null,Sh.arrayPool.disposeInstance(r));var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]);if(!a||!s||!o)return null;for(var l=Sh.arrayPool.getInstanceFromParams(a),c=Math.log(2),u=Math.log(s)/c,d=a===o,h=Math.ceil(Math.log(a)/c);h<u;h++){var p=Math.pow(2,h),f=2*p/3,g=3*p/2;f<1&&f>a&&(Math.abs(f-o)>=.01?l.push(f):(d||l.push(o),d=!0)),Math.abs(p-o)>=.01?l.push(p):(d||l.push(o),d=!0),g>1&&g<s&&(Math.abs(g-o)>=.01?l.push(g):(d||l.push(o),d=!0))}return!d&&o>a&&o<s&&(l.push(o),l.sort(uE)),l[l.length-1]!==s&&l.push(s),this._zoomSteps_lastRet=l}})}),nextHigherZoomLevel:V.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign((function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.max(this.zoomLevel,this._animTargetZoomLevel||-1/0),n=0;n<e.length;n++)if(e[n]>t+1e-5)return e[n];return NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||-1/0),s=0;s<r.length;s++)if(r[s]>a+1e-5)return r[s];return NaN}})}),nextLowerZoomLevel:V.b({readOnly:!0,dependencies:["zoomLevel","zoomSteps","_animTargetZoomLevel"],writeDependencies:[],get:Object.assign((function(){var e=this.zoomSteps;if(!e)return NaN;for(var t=Math.min(this.zoomLevel,this._animTargetZoomLevel||1/0),n=e.length-1;n>=0;n--)if(e[n]<t-1e-5)return e[n];return NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);if(!r)return NaN;for(var a=Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[2+n])||1/0),s=r.length-1;s>=0;s--)if(r[s]<a-1e-5)return r[s];return NaN}})}),zoomInOneStep:function(){var e=this.nextHigherZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomOutOneStep:function(){var e=this.nextLowerZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomTo1:function(){var e=this.bestEffort100PercentZoomLevel;e&&(this._animTargetZoomLevel=e)},zoomToFit:function(){var e=this.unzoomedZoomLevel;e&&(this._animTargetZoomLevel=e)},toggleZoom:function(){var e=this.bestEffort100PercentZoomLevel,t=this.unzoomedZoomLevel,n=this._animTargetZoomLevel===t||this.zoomLevel===t?e:t;n&&(this._animTargetZoomLevel=n)},_animatedZoomLevel:wi.b(0),_animTargetZoomLevel:V.b(0),_animateZoomLevel:B.h("_animTargetZoomLevel",(function(e){e!==this._animatedZoomLevel&&this.animate("_animatedZoomLevel",e,200)})),_updateRealZoomLevelToAnimation:B.h("_animatedZoomLevel",(function(e){e&&(this._isWritingZoomLevel=!0,this.zoomLevel!==e&&(this.zoomLevel=e),this._isWritingZoomLevel=!1)})),_updateAnimationToRealZoomLevel:B.h("zoomLevel",(function(e){this._isWritingZoomLevel||(this._animTargetZoomLevel!==e&&(this._animatedZoomLevel=e),this._animatedZoomLevel!==e&&(this._animatedZoomLevel=e))})),unzoomedZoomLevel:V.b({readOnly:!0,dependencies:["insetWidth","insetHeight","media.width","media.height"],get:Object.assign((function(){var e=this.insetWidth,t=this.insetHeight,n=this.getPath("media.width"),i=this.getPath("media.height"),r=ef.d(n,i,e,t,oE),a=Math.round(Math.min(n,r.width)),s=Math.round(Math.min(i,r.height));return a&&s?r.height%1?a/n:s/i:NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]),l=ef.d(s,o,r,a,oE),c=Math.round(Math.min(s,l.width)),u=Math.round(Math.min(o,l.height));return c&&u?l.height%1?c/s:u/o:NaN}})}),width:Oi.c("viewportWidth"),height:Oi.c("viewportHeight"),scrollRangeX:V.b({readOnly:!0,dependencies:["imageWidth","insetLeft","insetRight","viewportWidth"],get:Object.assign((function(){return Math.max(0,this.imageWidth+this.insetLeft+this.insetRight-this.viewportWidth)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollRangeY:V.b({readOnly:!0,dependencies:["imageHeight","insetTop","insetBottom","viewportHeight"],get:Object.assign((function(){return Math.max(0,this.imageHeight+this.insetTop+this.insetBottom-this.viewportHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),scrollMaxX:V.b({readOnly:!0,dependencies:["scrollRangeX","viewportWidth"],get:Object.assign((function(){return this.scrollRangeX+this.viewportWidth}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),scrollMaxY:V.b({readOnly:!0,dependencies:["scrollRangeY","viewportHeight"],get:Object.assign((function(){return this.scrollRangeY+this.viewportHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}})}),_zoomedImageDimensions:V.b({readOnly:!0,dependencies:["media.width","media.height","zoomLevel","isZoomed","insetWidth","insetHeight"],get:Object.assign((function(){var e=this._zoomedImageDimensions_lastOwnRet;e&&(Sh.arrayPool.disposeInstance(e),this._zoomedImageDimensions_lastOwnRet=null);var t=this.getPath("media.width"),n=this.getPath("media.height"),i=this.zoomLevel,r=this.insetWidth,a=this.insetHeight;if(!r||!a||!i||!t||!n)return lE;var s=t*i,o=n*i;this.isZoomed?(s<=r&&(s=2*Math.round(s/2)),o<=a&&(o=2*Math.round(o/2))):(s=Math.round(s),o=Math.round(o));var l=Sh.arrayPool.getInstance();return l[0]=s,l[1]=o,this._zoomedImageDimensions_lastOwnRet=l}),{__CW__getter:function(e,t,n,i){var r=this._zoomedImageDimensions_lastOwnRet;r&&(Sh.arrayPool.disposeInstance(r),this._zoomedImageDimensions_lastOwnRet=null);var a=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[5+n]);if(!l||!c||!o||!a||!s)return lE;var u=a*o,d=s*o;i.internalGet(this,t[3+n])?(u<=l&&(u=2*Math.round(u/2)),d<=c&&(d=2*Math.round(d/2))):(u=Math.round(u),d=Math.round(d));var h=Sh.arrayPool.getInstance();return h[0]=u,h[1]=d,this._zoomedImageDimensions_lastOwnRet=h}})}),_zoomedImagePosition:V.b({readOnly:!0,dependencies:["imageWidth","imageHeight","insetLeft","insetTop","insetWidth","insetHeight","scrollX","scrollY"],get:Object.assign((function(){var e=this._zoomedImagePosition_lastOwnRet;e&&(Sh.arrayPool.disposeInstance(e),this._zoomedImagePosition_lastOwnRet=null);var t=this.imageWidth,n=this.imageHeight,i=this.insetWidth,r=this.insetHeight;if(!t||!n||!i||!r)return cE;var a=this.insetLeft,s=this.insetTop,o=this.scrollX,l=this.scrollY,c=t<=i?a+Math.round(i/2-t/2):a-o,u=n<=r?s+Math.round(r/2-n/2):s-l,d=Sh.arrayPool.getInstance();return d[0]=c,d[1]=u,this._zoomedImagePosition_lastOwnRet=d}),{__CW__getter:function(e,t,n,i){var r=this._zoomedImagePosition_lastOwnRet;r&&(Sh.arrayPool.disposeInstance(r),this._zoomedImagePosition_lastOwnRet=null);var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[5+n]);if(!a||!s||!o||!l)return cE;var c=i.internalGet(this,t[2+n]),u=i.internalGet(this,t[3+n]),d=i.internalGet(this,t[6+n]),h=i.internalGet(this,t[7+n]),p=a<=o?c+Math.round(o/2-a/2):c-d,f=s<=l?u+Math.round(l/2-s/2):u-h,g=Sh.arrayPool.getInstance();return g[0]=p,g[1]=f,this._zoomedImagePosition_lastOwnRet=g}})}),_validateScrollOnContentOrContainerResize:B.h("scrollMaxX","scrollMaxY","width","height",(function(e,t,n,i){e&&t&&n&&i&&this.validateScrollPosition()})),scrollXFraction:V.b({readOnly:!0,dependencies:["scrollX","scrollRangeX"],get:Object.assign((function(){return this.scrollX/this.scrollRangeX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),scrollYFraction:V.b({readOnly:!0,dependencies:["scrollY","scrollRangeY"],get:Object.assign((function(){return this.scrollY/this.scrollRangeY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])}})}),zoomAnchorX:V.b({dependencies:["mouseX","insetCenterX"],get:Object.assign((function(){return this.mouseX||this.insetCenterX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),set:Tl.a}),zoomAnchorY:V.b({dependencies:["mouseY","insetCenterY"],get:Object.assign((function(){return this.mouseY||this.insetCenterY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}}),set:Tl.a}),_correctScrollPositionForImageSizeChange:B.h("imageLeft","imageTop","imageWidth","imageHeight","isZoomed",(function(){var e=this.imageTop,t=this.imageLeft,n=this.imageWidth,i=this.imageHeight,r=this.isZoomed,a=this._cspfzc_last_imageTop,s=this._cspfzc_last_imageLeft,o=this._cspfzc_last_imageWidth,l=this._cspfzc_last_imageHeight;if(this._cspfzc_last_imageTop=e,this._cspfzc_last_imageLeft=t,this._cspfzc_last_imageWidth=n,this._cspfzc_last_imageHeight=i,r&&n!==o&&i!==l){var c=this.zoomAnchorX,u=this.zoomAnchorY,d=t-(c-(c-s)/o*n),h=e-(u-(u-a)/l*i);this.attemptScrollBy(d,h),this._cspfzc_last_imageLeft=this.imageLeft,this._cspfzc_last_imageTop=this.imageTop}})),handleScroll:function(e){var t=this,n=arguments;if(!e||!e.shiftKey&&!e.altKey)return t.__s._$87m$handleScroll.apply(t,n);this.zoomLevel=Math.max(this.minZoomLevel,Math.min(this.maxZoomLevel,this.zoomLevel*(1+e.deltaY/100)))},__superMap:{_$87m$handleScroll:"handleScroll"},staticMembers:{__QUALIFIED_CLASS_NAME__:"VisualPresenterView"}}),oE={},lE=[NaN,NaN],cE=[NaN,NaN];function uE(e,t){return e-t}var dE=n(791);function hE(e,t,n,i,r,a){var s=pE[i]?pE[i][r]&&pE[i][r][a]:void 0;if(!s){pE[i]||(pE[i]={}),pE[i][r]||(pE[i][r]={});var o=document.createElement("canvas"),l=o.getContext("2d");pE[i][r][a]=o,s=o;var c=fE(i,r,a);o.width=c.width,o.height=c.height,function(e,t,n,i,r,a){var s=fE(i,r,a),o=s.width,l=s.height,c=3*i;e.beginPath(),e.moveTo(0+c,0),e.arcTo(0+o,0,0+o,0+l,c),e.arcTo(0+o,0+l,0,0+l,c),e.arcTo(0,0+l,0,0,c),e.arcTo(0,0,0+o,0,c),e.closePath(),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill();var u=a?6:3;if(u*=i,a)if("SDOF"===a){var d=Math.ceil(vE.height*i),h=Math.ceil(vE.width*i),p=25*i/2-d/2;e.drawImage(vE,Math.round(p),p,h,d)}else{var f=1*i,g=12*i,m=10*i,_=0+u,v=0+l/2-m/2|0,b=g-4*f,y=m-4*f;e.fillStyle="rgb(0, 0, 0)";for(var w=0;w<3;w++)e.fillRect(_+2*w*f,v+2*w*f,b,f),e.fillRect(_+2*w*f,v+2*w*f+f,f,y-f);e.fillRect(_+4*f+f,v+m-f,b-f,f),e.fillRect(_+g-f,v+m-y+f,f,y-2*f)}e.font=s.textFont,e.fillStyle="rgb(0, 0, 0)",e.fillText(r,0+o-u-s.textWidth,0+(l+s.textHeight)/2)}(l,0,0,i,r,a)}e.drawImage(s,t,n)}var pE={};function fE(e,t,n){if(mE[e]&&mE[e][t]&&mE[e][t][n])return mE[e][t][n];var i=n?Math.round(12*e):Math.round(10*e),r=gE.font="300 "+i+"px "+yl.c(document.body).get("font-family"),a=gE.measureText(t);mE[e]||(mE[e]={}),mE[e][t]||(mE[e][t]={});var s=n?16:0,o=n?25*e:16*e,l=n?6:3;return mE[e][t][n]={width:(l+s)*e+Math.round(a.width)+l*e,height:Math.round(o),textWidth:a.width,textHeight:.73*i,textFont:r}}var gE=document.createElement("canvas").getContext("2d"),mE={},_E="data:image/svg+xml;base64,"+dE.a.encodeFromString(String(n(1270)).trim()),vE=new Image;vE.src=_E;var bE,yE,wE=sE.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["p2-main-canvas"],name:"_tiledCanvasElement"},{type:"ELEMENT",tagname:"div",classes:["p2-derivative-container"],name:"derivativeContainer"},{type:"ELEMENT",tagname:"canvas",classes:["p2-hdr-badge"],name:"hdrBadgeElement",attributes:{width:"0",height:"0"}},{type:"ELEMENT",tagname:"canvas",classes:["p2-hdr-badge","p2-sdof-badge"],name:"sdofBadgeElement",attributes:{width:"0",height:"0"}},{type:"VIEWOUTLET",tagname:"view",name:"progressPieView"}]}},__QUALIFIED_CLASS_NAME__:"PhotoPresenterView"},prettyPaintDelay:150,_lastPaintTime:0,canvas:V.b({readOnly:!0,dependencies:["_tiledCanvasElement"],get:Object.assign((function(){var e=this._tiledCanvasElement;return e?new tE.a(e):e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?new tE.a(r):r}})}),offscreeniness:V.b(),imageDerivativeLoader:V.b(k.c(Xp.a.extend({shouldCorrectForDevicePixelRatio:!0,width:Oi.c("owner.imageWidth"),height:Oi.c("owner.imageHeight"),media:Oi.c("owner.media"),offscreeniness:Oi.c("owner.offscreeniness"),derivativeRequestReason:V.b({readOnly:!0,dependencies:["owner.isZoomed"],get:Object.assign((function(){return this.getPath("owner.isZoomed")?Jp.a.ONEUP_MAIN_DISPLAY_ZOOM:Jp.a.ONEUP_MAIN_DISPLAY}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?Jp.a.ONEUP_MAIN_DISPLAY_ZOOM:Jp.a.ONEUP_MAIN_DISPLAY}})}),areRequestsAllowed:V.b({readOnly:!0,dependencies:["owner.isSteadilyAloneInParent","owner.isBackgroundablySteadyInParent"],get:Object.assign((function(){return this.getPath("owner.isSteadilyAloneInParent")||this.getPath("owner.isBackgroundablySteadyInParent")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),priority:V.b({readOnly:!0,dependencies:["owner.isTargetInParent","offscreeniness"],get:Object.assign((function(){return this.getPath("owner.isTargetInParent")?105e3:115e3+(this.offscreeniness||0)}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?105e3:115e3+(i.internalGet(this,t[1+n])||0)}})}),allowsShrinking:V.b({readOnly:!0,dependencies:["owner.isShowingInParent"],get:Object.assign((function(){return!this.getPath("owner.isShowingInParent")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})})}))),derivative:V.b(Oi.c("imageDerivativeLoader.derivative")),shouldRenderUsingImageApproach:V.b({readOnly:!0,dependencies:["derivative","derivative.internalImageUser","media.cannotHaveImageDerivative"],get:Object.assign((function(){if(this.getPath("media.cannotHaveImageDerivative"))return!1;var e=this.derivative;if(!e)return!0;var t=te.a.sharedInstance;if(e.geometricLength>3072&&!t.isChrome)return!1;if(t.isSafari||t.isFirefox)return!1;if("IMG"!==e.getPath("element.tagName"))return!1;var n=this.getPath("derivative.internalImageUser");return!n||n===this}),{__CW__getter:function(e,t,n,i){if(i.internalGetPath(this,t[2+n]))return!1;var r=i.internalGet(this,t[0+n]);if(!r)return!0;var a=te.a.sharedInstance;if(r.geometricLength>3072&&!a.isChrome)return!1;if(a.isSafari||a.isFirefox)return!1;if("IMG"!==r.getPath("element.tagName"))return!1;var s=i.internalGetPath(this,t[1+n]);return!s||s===this}})}),cleanup:function(){var e=this,t=arguments;this._isCleaningUpForPool=!0,this._ul_canvasCSSWidth=this._ul_canvasCSSHeight=this._ul_canvasXScale=this._ul_canvasYScale=this._ul_canvasLeft=this._ul_canvasTop=this._ul_derivativeId=this._ul_isZoomed=this._ul_dpr=this._ul_canvasWidth=this._ul_canvasHeight=void 0,clearTimeout(this._prettyPaintTimeout),this._lastPaintTime=0,this.canZoom=!1,this.canvas.width=this.canvas.height=0,e.__s._$1b6$cleanup.apply(e,t),this._isCleaningUpForPool=!1},_raiseCanZoomWhenAppropriate:B.h("unzoomedZoomLevel","derivative",(function(){if(!this._isCleaningUpForPool)return void 0!==this.overrideZoom?this.overrideZoom:void(this.derivative&&!this.canZoom&&(this.canZoom=!0))})),imageSizeTracker:V.b({strong:!0,defaultValue:k.c(nE.a,{zeroSpeedCutoff:3,emaHalfLife:.2})}),_provideDeltaToImageSizeTracker:B.h("imageWidth","imageHeight",(function(e,t){var n=e+t,i=this._pdtist_last_imageSize;this._pdtist_last_imageSize=n;var r=n-i;r&&this.imageSizeTracker.handleDelta(r)})),isImageSizeStationary:V.b(Oi.c("imageSizeTracker.isStationary")),isRenderDisabled:function(){return!this.media},_renderSelfWhenNeeded:B.h("imageLeft","imageTop","imageWidth","imageHeight","derivative","isZoomed","dpr","isShowingInParent","isBackgroundablySteadyInParent","isImageSizeStationary","shouldRenderUsingImageApproach",(function(){this.renderSelfSoon()})),renderSelfSoon:function(){this._renderSelfTimeout&&iE.a(this._renderSelfTimeout),this._renderSelfTimeout=iE.b(this._renderSelfNow)},_renderSelfNow:Bu.b((function(){this._renderSelfTimeout=null,this.renderSelf()})),renderSelf:function(){clearTimeout(this._prettyPaintTimeout);var e=this.imageWidth,t=this.imageHeight,n=this.isShowingInParent,i=this.isBackgroundablySteadyInParent;if(e&&t&&(n||i)){var r=this.isRenderDisabled(),a=this.shouldRenderUsingImageApproach,s=!r&&!a;this.canvas.style.display=s?"block":"none",s&&this._renderSelfWithCanvas();var o=!r&&a;this.derivativeContainer.style.display=o?"block":"none",o&&this._renderSelfWithImage()}},_renderSelfWithImage:function(){var e,t,n=this.derivativeContainer,i=yl.c(n),r=this.imageWidth,a=this.imageHeight,s=this.imageLeft,o=this.imageTop,l=this.derivative,c=this.isZoomed,u=this.dpr;!l||!c&&this.isImageSizeStationary?(e=Math.min(Math.ceil(u*r),l?l.physicalWidth:1/0),t=Math.min(Math.ceil(u*a),l?l.physicalHeight:1/0)):(e=l.physicalWidth,t=l.physicalHeight);var d=e/u,h=t/u,p=r/d,f=a/h,g=s,m=o;i.set("position","absolute").set("background-color","#eeeeee").set("transform-origin","0 0").set("width",d).set("height",h).layerBack().translateDevicePixels(g,m).scale(p,f)},_maintainDerivativeContainerContents:B.h({inputs:["derivative","shouldRenderUsingImageApproach"],callback:function(e,t){var n=t&&e;if(!n||n.internalImageUser!==this){var i=this._appendedImagelike;i&&(i.parentNode.removeChild(i),i.style.cssText="",i.release(this));var r=this._appendedImagelike=n&&n.checkOutAppendableImagelike(this).retain(this);r&&(r.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%;",this.derivativeContainer.appendChild(r))}}}),_renderSelfWithCanvas:function(){var e,t,n=this.canvas,i=yl.c(n),r=this.imageWidth,a=this.imageHeight,s=this.imageLeft,o=this.imageTop,l=this.derivative,c=this.isZoomed,u=this.dpr,d=n.getContext("2d");!l||!c&&this.isImageSizeStationary?(e=Math.min(Math.ceil(u*r),l?l.physicalWidth:1/0),t=Math.min(Math.ceil(u*a),l?l.physicalHeight:1/0)):(e=l.physicalWidth,t=l.physicalHeight);var h=e/u,p=t/u,f=r/h,g=a/p,m=s,_=o,v=!1,b=!1;this._ul_canvasCSSWidth!==(this._ul_canvasCSSWidth=h)&&(v=b=!0),this._ul_canvasCSSHeight!==(this._ul_canvasCSSHeight=p)&&(v=b=!0),this._ul_canvasXScale!==(this._ul_canvasXScale=f)&&(v=!0),this._ul_canvasYScale!==(this._ul_canvasYScale=g)&&(v=!0),this._ul_canvasLeft!==(this._ul_canvasLeft=m)&&(v=!0),this._ul_canvasTop!==(this._ul_canvasTop=_)&&(v=!0),v&&(b&&n.setCSSSize(h,p),i.set("position","absolute").set("transform-origin","0 0").set("width",h).set("height",p).layerBack().translateDevicePixels(m,_).scale(f,g));var y=n.width!==e||n.height!==t,w=y;w=w||b;var I=l&&l.derivativeId,S=Date.now()-this._lastPaintTime<this.prettyPaintDelay;if(this._ul_derivativeId!==(this._ul_derivativeId=I)&&(w=!0),this._ul_isZoomed!==(this._ul_isZoomed=c)&&(w=!0),this._ul_dpr!==(this._ul_dpr=u)&&(w=!0),this._ul_canvasWidth!==(this._ul_canvasWidth=e)&&(w=!0),this._ul_canvasHeight!==(this._ul_canvasHeight=t)&&(w=!0),this._ul_getsPrettyPaint!==(this._ul_getsPrettyPaint=S)&&(w=!0),w){y?(n.width=e,n.height=t):d.clearRect(0,0,e,t);var C=!1;if(l)C=l.drawIntoContextUsingCustomDrawImage(d,tf.b.avoidingWorkIf(S),0,0,e,t)||C;else{var E=d.createRadialGradient(e/2,t*(.5+.5*this.unloadedGradientVerticalCenterOffsetFraction),0,e/2,t/2,Math.max(e,t)/1.5);E.addColorStop(0,this.unloadedGradientCenterColor),E.addColorStop(1,this.unloadedGradientOuterColor),d.fillStyle=E,d.fillRect(0,0,e,t)}this._lastPaintTime=Date.now(),C&&(this._prettyPaintTimeout=X.a(this._renderSelfNow,this.prettyPaintDelay))}},unloadedGradientVerticalCenterOffsetFraction:-1/3,unloadedGradientCenterColor:"#f8f8f8",unloadedGradientOuterColor:"#ddd",progressPieView:V.b({readOnly:!0,strong:!0,dependencies:["isSteadilyAloneInParent","media.renderableImageDerivativeInfos","_progressPieView"],get:Object.assign((function(){var e=this.isSteadilyAloneInParent&&this.getPath("media.renderableImageDerivativeInfos");return e&&(e=e&&e.length),e?this._progressPieView:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]);return r&&(r=r&&r.length),r?i.internalGet(this,t[2+n]):null}})}),_progressPieView:V.b({strong:!0,get:function(){return IE.create()}}),_badgeInsetFromLeft:V.b(10),_maintainHDRBadgeElement:B.h({inputs:["hdrBadgeElement","isAttached","media.isHdr","dpr","_badgeInsetFromLeft","pinnedImageLeft","imageWidth","pinnedImageTop"],callback:function(e,t,n,i,r,a,o,l){if(e&&t)if(n){var c=s.d("Badge.HDR");if(this._lastRenderedBadgeHDRDPR!==i){this._lastRenderedBadgeHDRDPR=i,this._lastRenderedBadgeDisplayString=c;var u=fE(i,c,!0);e.width=u.width,e.height=u.height,hE(e.getContext("2d"),0,0,i,c,"HDR"),this._hdrBadgeLayoutWidth=u.width/i}var d=r+a,h=10+l;yl.c(e).set("display","block").set("position","absolute").set("transform-origin","0 0").set("left",d).set("top",h).set("z-index",21).scale(1/i,1/i)}else yl.c(e).set("display","none")}}),_maintainSDOFBadgeElement:B.h({inputs:["sdofBadgeElement","hdrBadgeElement","isAttached","media.isHdr","media.isSDOF","dpr","_badgeInsetFromLeft","pinnedImageLeft","imageWidth","pinnedImageTop","_maintainHDRBadgeElement"],callback:function(e,t,n,i,r,a,o,l,c,u){if(e&&n)if(r){var d=s.d("Badge.SDOF");if(this._lastRenderedBadgeSDOFDPR!==a){this._lastRenderedBadgeSDOFDPR=a;var h=fE(a,d,!0);e.width=h.width,e.height=h.height,hE(e.getContext("2d"),0,0,a,d,"SDOF")}var p=o;i&&(p+=this._hdrBadgeLayoutWidth+5);var f=p+l,g=10+u;yl.c(e).set("display","block").set("position","absolute").set("transform-origin","0 0").set("left",f).set("top",g).scale(1/a,1/a)}else yl.c(e).set("display","none")}}),__superMap:{_$1b6$cleanup:"cleanup"}}),IE=rE.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isLarge",truevalue:"p2-center-large",falsevalue:"p2-corner-small",attributes:{}}],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"left",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"top",attributes:{},unit:"px",property:"top"},opacity:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"shouldShow",truevalue:"1",falsevalue:"0",attributes:{},unit:null,property:"opacity"}}}},__QUALIFIED_CLASS_NAME__:"SpecialPPVProgressPieView"},init:function(){var e=this,t=arguments;e.__s._$7QO$init.apply(e,t),this.style.set("transition","opacity 0.2s")},progress:V.b({readOnly:!0,dependencies:["parent.imageDerivativeLoader.totalProgress","canShow"],get:Object.assign((function(){return this.canShow?.25+.75*(this.getPath("parent.imageDerivativeLoader.totalProgress")||0):0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?.25+.75*(i.internalGetPath(this,t[0+n])||0):0}})}),shouldShowError:Oi.c("parent.imageDerivativeLoader.shouldShowError"),canShow:V.b(Oi.c("parent.isBackgroundablySteadilyAloneInParent")),shouldShow:V.b({readOnly:!0,dependencies:["renderedProgress","shouldShowError","canShow"],writeDependencies:[],get:Object.assign((function(){return(this.renderedProgress<1||this.shouldShowError)&&this.canShow}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])<1||i.internalGet(this,t[1+n]))&&i.internalGet(this,t[2+n])}})}),isLarge:V.b({readOnly:!0,dependencies:["parent.derivative"],get:Object.assign((function(){return!this.getPath("parent.derivative")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),color:V.b({readOnly:!0,dependencies:["isLarge"],get:Object.assign((function(){return this.isLarge?"rgba(0, 0, 0, 0.1)":"white"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"rgba(0, 0, 0, 0.1)":"white"}})}),unfilledColor:V.b({readOnly:!0,dependencies:["isLarge"],get:Object.assign((function(){return this.isLarge?"transparent":"rgba(0, 0, 0, 0.2)"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"transparent":"rgba(0, 0, 0, 0.2)"}})}),shadowColor:V.b({readOnly:!0,dependencies:["isLarge"],get:Object.assign((function(){return this.isLarge?"transparent":"rgba(0, 0, 0, 0.2)"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"transparent":"rgba(0, 0, 0, 0.2)"}})}),size:V.b({readOnly:!0,dependencies:["isLarge","parent.imageWidth","parent.insetWidth","parent.imageHeight","parent.insetHeight"],get:Object.assign((function(){return this.isLarge?Math.round(.2*Math.min(this.getPath("parent.imageWidth"),this.getPath("parent.insetWidth"),this.getPath("parent.imageHeight"),this.getPath("parent.insetHeight"))):25}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Math.round(.2*Math.min(this.getPath("parent.imageWidth"),i.internalGetPath(this,t[2+n]),i.internalGetPath(this,t[3+n]),i.internalGetPath(this,t[4+n]))):25}})}),left:V.b({readOnly:!0,dependencies:["isLarge","size","parent.pinnedImageRight","parent.viewportWidth","parent.insetCenterX"],get:Object.assign((function(){return this.isLarge?Math.round(this.getPath("parent.insetCenterX")-this.size/2):this.getPath("parent.viewportWidth")-this.getPath("parent.pinnedImageRight")-this.size-10}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Math.round(i.internalGetPath(this,t[4+n])-i.internalGet(this,t[1+n])/2):i.internalGetPath(this,t[3+n])-i.internalGetPath(this,t[2+n])-i.internalGet(this,t[1+n])-10}})}),top:V.b({readOnly:!0,dependencies:["isLarge","size","parent.pinnedImageBottom","parent.viewportHeight","parent.insetCenterY"],get:Object.assign((function(){return this.isLarge?Math.round(this.getPath("parent.insetCenterY")-this.size/2):this.getPath("parent.viewportHeight")-this.getPath("parent.pinnedImageBottom")-this.size-10}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Math.round(i.internalGetPath(this,t[4+n])-i.internalGet(this,t[1+n])/2):i.internalGetPath(this,t[3+n])-i.internalGetPath(this,t[2+n])-i.internalGet(this,t[1+n])-10}})}),__superMap:{_$7QO$init:"init"}}),SE=wE.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["p2-live-photo-container"],name:"livePhotoContainer"},{type:"VIEWOUTLET",tagname:"view",name:"lpkBadge"}],classes:["p2-live-photo-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInLivePhotoMode",truevalue:"p2-showing-live-photo",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"LivePhotoPresenterView"},_lpkBadge:V.b({defaultValue:k.c(eE.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{"z-index":"21","margin-left":"10px","margin-top":"10px",left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageLeft",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageTop",attributes:{},unit:"px",property:"top"}}}}},owner:V.b()}))}),lpkBadge:V.b({readOnly:!0,dependencies:["media.primaryAsset.isLivePhotoPlayEnabled"],get:Object.assign((function(){return this.getPath("media.primaryAsset.isLivePhotoPlayEnabled")?this._lpkBadge:null}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?this._lpkBadge:null}})}),_badgeInsetFromLeft:V.b({dependencies:["lpkBadge","_lpkBadge","_livePhotoBadgeTextChanged"],readOnly:!0,get:Object.assign((function(){return(this.lpkBadge?this.lpkBadge._badge.width+5:0)+10}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])?i.internalGet(this,t[0+n])._badge.width+5:0)+10}})}),_playLivePhoto:B.h({inputs:["lpkBadge.playLivePhoto"],callback:function(){this._wantsButLacksLPPPlayback=!0}}),_stopLivePhoto:B.h("lpkBadge.stopLivePhoto",(function(){this._wantsButLacksLPPPlayback=!1,this.livePhotoPlayer&&this.livePhotoPlayer.beginFinishingPlaybackEarly()})),_wantsButLacksLPPPlayback:V.b(!1),init:function(){var e=this,t=this,n=arguments;this._propagateLPPStatus=hn.a((function(t,n,i,r,a,s){Zl.a.begin().setIfChanged(e,"_lpp_progress",t).setIfChanged(e,"_lpp_errorCount",n&&n.length).setIfChanged(e,"_lpp_isPlaying",i).setIfChanged(e,"_lpp_videoWidth",r).setIfChanged(e,"_lpp_videoHeight",a).setIfChanged(e,"_lpp_canPlay",s).end()})),t.__s._$1KK$init.apply(t,n)},wantsUIControl:V.b({readOnly:!0,dependencies:[].concat(wE.prototype._properties.wantsUIControl.dependencies,["isLivePhotoPlayerVisible","effectType"]),get:function(){var e,t=this,n=arguments;return this.isLivePhotoPlayerVisible&&(e=this.effectType)!==JC.a.BOUNCE&&e!==JC.a.LOOP||t.__s._$1Wz$get.apply(t,n)},__superMap:{_$1Wz$get:"get"}}),isInLivePhotoMode:V.b({readOnly:!0,dependencies:["isBackgroundablySteadilyAloneInParent","isImageSizeStationary","imageDerivativeLoader.derivative","imageDerivativeLoader.isComplete","media.primaryAsset.isLivePhotoPlayEnabled"],get:Object.assign((function(){return Boolean(void 0!==globalThis.LivePhotosKit&&this.getPath("isBackgroundablySteadilyAloneInParent")&&this.isImageSizeStationary&&this.getPath("imageDerivativeLoader.derivative")&&this.getPath("imageDerivativeLoader.isComplete")&&this.getPath("media.primaryAsset.isLivePhotoPlayEnabled"))}),{__CW__getter:function(e,t,n,i){return Boolean(void 0!==globalThis.LivePhotosKit&&i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGetPath(this,t[2+n])&&i.internalGetPath(this,t[3+n])&&i.internalGetPath(this,t[4+n]))}})}),isLivePhotoPlayerVisible:V.b({readOnly:!0,dependencies:["livePhotoPlayer","_lpp_isPlaying"],get:Object.assign((function(){return Boolean(this._lpp_isPlaying&&this.livePhotoPlayer)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n]))}}),didChange:function(e){e&&this._sendLivePhotoPlaybackStat()}}),isRenderDisabled:function(){var e=this,t=arguments;return e.__s._$21f$isRenderDisabled.apply(e,t)||this.isLivePhotoPlayerVisible},_rerenderSelfWhenLPPVisibilityChanges:B.h("isLivePhotoPlayerVisible",(function(){var e=this.isRenderDisabled();this._rswlppvc_last_isRenderDisabled!==(this._rswlppvc_last_isRenderDisabled=e)&&this.renderSelfSoon()})),_livePhotoBadgeTextChanged:B.i(),effectType:V.b({readOnly:!0,dependencies:["media.primaryAsset.livePhotoEffectType"],get:Object.assign((function(){return this.getPath("media.primaryAsset.livePhotoEffectType")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}}),didChange:function(e){e&&(this._lpkBadge.updateBadgeText(e.value),this._livePhotoBadgeTextChanged())}}),livePhotoPlayer:V.b({readOnly:!0,dependencies:["isInLivePhotoMode"],get:Object.assign((function(){return!bE&&globalThis.LivePhotosKit&&((bE=globalThis.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),this.isInLivePhotoMode?bE:null}),{__CW__getter:function(e,t,n,i){return!bE&&globalThis.LivePhotosKit&&((bE=globalThis.LivePhotosKit.createPlayer({autoplay:!0,effectType:"live",proactivelyLoadsVideo:!0,showsNativeControls:!1})).style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height:100%;"),i.internalGet(this,t[0+n])?bE:null}}),didChange:function(e){var t=this.livePhotoContainer,n=this._lastLivePhotoPlayer;if(n!==e){if(this._lastLivePhotoPlayer=e,n){n.parentNode===t&&t.removeChild(n);var i=this._statusObserverKeyOnLPP&&n[this._statusObserverKeyOnLPP];i&&i.disconnect()}if(e){var r=e.parentNode;r&&r!==t&&r.removeChild(e),t.appendChild(e);var a=this.media,s=a.derivativeInfoForGeometricLength(Math.min(800,this.getPath("imageDerivativeLoader.perfectGeometricLength")),"renderableVideo");s?(this.lpkBadge.attachPlayerInstance(e),e.setProperties({caption:a.caption,effectType:this.effectType.value,photo:this.derivative.element,videoSrc:s.url+"&og="+encodeURIComponent(QC.a.RESOURCE_DOWNLOAD.value)}),this._sendVidComplDerivativeRequestStat(s),this._playbackCountSinceVidComplAcquisition=0,this._statusObserverKeyOnLPP||(this._statusObserverKeyOnLPP="_statusObserverFor_"+Yl.b(this)),e[this._statusObserverKeyOnLPP]?e[this._statusObserverKeyOnLPP].connect():e[this._statusObserverKeyOnLPP]=e.observe("loadProgress","errors","isPlaying","videoWidth","videoHeight","canPlay",this._propagateLPPStatus),this._lpkBadge.resetBadge()):this._propagateLPPStatus(0,Sh.arrayPool.getAutodisposingInstanceFromParams("NO_DERIVATIVE_ERROR"))}}}}),_lpp_progress:V.b(),_lpp_errorCount:V.b(),_lpp_isPlaying:V.b(),_lpp_videoWidth:V.b(),_lpp_videoHeight:V.b(),_lpp_canPlay:V.b(),_playLPPOnceAble:B.h("livePhotoPlayer","_lpp_canPlay","_lpp_isPlaying","_wantsButLacksLPPPlayback",(function(e,t,n,i){var r=this,a=Boolean(e&&t&&!n&&i);Boolean(this._plppoa_last_shouldPlayNowResult)!==(this._plppoa_last_shouldPlayNowResult=a)&&a&&(this._wantsButLacksLPPPlayback=!1,X.a((function(){r.livePhotoPlayer&&r._lpp_canPlay&&r.livePhotoPlayer.play()}),0))})),feedbackService:V.b(G.a.bindingFor("application.feedbackService")),_maintainLivePhotoPlayerStyling:B.h("imageLeft","imageTop","imageWidth","imageHeight","_lpp_videoWidth","_lpp_videoHeight","isLivePhotoPlayerVisible","livePhotoPlayer","livePhotoContainer",(function(e,t,n,i,r,a,s,o,l){if(!s)return l.style.display="none",void(o?(o.style.display="none",o.style.width=o.style.height="0px",this._mlpps_lppSize!==(this._mlpps_lppSize=0)&&o.updateSize()):this._mlpps_lppSize=0);var c=Math.min(n,r),u=Math.min(i,a);o.style.display=l.style.display="",o.style.width=l.style.width=c+"px",o.style.height=l.style.width=u+"px",l.style.transformOrigin="0 0",l.style.position="absolute",yl.c(l).layerBack().translateDevicePixels(e,t).scale(n/c,i/u),this._mlpps_lppSize!==(this._mlpps_lppSize=1e5*c+u)&&o.updateSize()})),_updateBadge:B.h("_lpp_progress","_lpp_errorCount",(function(e,t){if(this.lpkBadge){if(this.lpkBadge.shouldShowError=Boolean(t),1===e&&0===this.lpkBadge.progress)return;this.lpkBadge.progress=e}})),_userLocaleChanged:B.h(G.a.bindingFor("application.userLocale"),(function(e){return globalThis.LivePhotosKit.Localization.locale=e})),_sendVidComplDerivativeRequestStat:function(e){var t=YC.a.derivativeRequestFeedbackReportProbability;if(this.feedbackService&&(t>=1||t>=0&&Math.random()<t)){var n=fr.a.find(e.mediaPK),i=n&&n.serverDerivativeInfosByDerivativeId,r=i&&i[e.transcodeSourceDerivativeId],a=r?r.width*r.height:void 0;ZC.a(Object.assign({derivativeRequestReason:Jp.a.ONEUP_VIDCOMPL_PREFETCH.value,derivativeApproxArea:qC.a(e.width*e.height),derivativeNameByArea:XC.f(e.width*e.height),derivativeNameNominal:e.derivativeName,derivativeApproxByteSize:qC.a(e.byteSize),derivativeUTI:e.uti,derivativeMIMETypeForWebClient:e.mimeType,derivativeIsTranscoded:e.isDynamic,derivativeRequestReportProbability:t,derivativeOffscreeninessAtSend:1},r?{derivativeTranscodeSourceApproxByteSize:qC.a(r.byteSize),derivativeTranscodeSourceApproxDerivativeArea:qC.a(a),derivativeTranscodeSourceDerivativeNameByArea:XC.e(a/1.2),derivativeTranscodeSourceDerivativeNameNominal:r.derivativeName,derivativeTranscodeSourceUTI:r.uti}:{}))}},_sendLivePhotoPlaybackStat:function(){var e=++this._playbackCountSinceVidComplAcquisition,t=this.feedbackService;t&&t.report(1===e?"livePhotoPlayback":"livePhotoExtraPlayback")},__superMap:{_$1KK$init:"init",_$21f$isRenderDisabled:"isRenderDisabled"}}),CE=n(1272),EE=n(1273),AE=n(402),OE=n(1355),TE=Boolean(document.createElement("video").canPlayType("application/vnd.apple.mpegurl")),ME=we.b("VideoPlaybackMode",{CRABS:"crabs",HLS_NATIVE:"hlsNative",HLS_JS:"hlsJs"}),DE=we.b("VideoElementError",{MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED"}),PE={1:DE.MEDIA_ERR_ABORTED,2:DE.MEDIA_ERR_NETWORK,3:DE.MEDIA_ERR_DECODE,4:DE.MEDIA_ERR_SRC_NOT_SUPPORTED},LE=wE.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"centerView"},{type:"ELEMENT",tagname:"div",name:"typeBadgeElement",classes:["p2-type-badge",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_specificTypeClass",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isTypeBadgeVisible",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageLeft",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageTop",attributes:{},unit:"px",property:"top"}}},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"media.durationString",attributes:{}}],name:"durationBadgeElement",classes:["p2-duration-badge"],styles:{right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageRight",attributes:{},unit:"px",property:"right"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageBottom",attributes:{},unit:"px",property:"bottom"}}},{type:"ELEMENT",tagname:"div",name:"videoContainerElement",classes:["p2-video-container"]}],classes:["p2-video-presenter-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isShowingVideo",truevalue:"p2-showing-video",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isActuallyPresentingAudio",truevalue:"p2-showing-audio",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"playbackModeClass",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"VideoPresenterView"},videoPlayer:void 0,wantsShowingVideo:V.b(!1),canZoom:!1,overrideZoom:!1,videoPlayerError:V.b({didChange:function(e){var t=this;if(e){var n=L.n().feedbackService;if(n){var i;if(this.videoPlayer){var r=this.videoPlayer.getMediaElement();r&&(i=r.error)}var a=this.isUsingHls?void 0:this.preferredCrabsVideoDerivativeInfo,s=this.getPath("media.serverDerivativeInfosByDerivativeId"),o=a&&s&&s[a.transcodeSourceDerivativeId],l=this.getPath("media.originalVideoDerivativeInfos.0"),c=function(e,n){var i;return n?((i={})[e+"MIMEType"]=n.mimeType,i[e+"UTI"]=n.uti,i[e+"ApproxBitrateMbps"]=qC.a(8*n.byteSize/1e6/(t.getPath("media.primaryAsset.duration")/1e3)),i[e+"IsTranscoded"]=n.isDynamic,i[e+"IsHighEfficiencyCodec"]=n.isHighEfficiencyCodec,i[e+"ReflectsEdits"]=n.reflectsEdits,i[e+"ApproxArea"]=qC.a(n.width*n.height),i):{}};n.report("videoPlayerError",Object.assign({videoPlaybackMode:this.getPath("playbackMode.value")||"",videoElementErrorType:i&&Gd.a(PE[i.code],"value")||"",videoElementErrorMessage:i&&i.message||""},this._sanitizedError(e),{recoveryMode:this.getPath("crabsRecoveryMode")},c("videoCrabsDerivative",a),c("videoCrabsDerivativeTranscodeSource",o),c("videoOriginal",l)))}this.destroyVideoPlayer()}}}),_sanitizedError:function(e){return{videoPlayerErrorType:Gd.a(e,"event.type")||"",videoPlayerErrorDetails:Gd.a(e,"event.details")||"",videoPlayerErrorIsFatal:Gd.a(e,"event.fatal")||"",videoPlayerErrorResponseStatus:Gd.a(e,"event.response.code")||"",videoPlayerErrorResponseText:Gd.a(e,"event.response.text")||"",_Photos_hls_interception:Gd.a(e,"_Photos_hls_interception")||""}},isShowingError:V.b({readOnly:!0,dependencies:["wantsShowingVideo","videoPlayerError","videoUrl"],get:Object.assign((function(){return Boolean(this.wantsShowingVideo&&this.videoPlayerError||!this.videoUrl)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])||!i.internalGet(this,t[2+n]))}})}),canBeShowingVideo:V.b({readOnly:!0,dependencies:["videoUrl","videoPlayerError"],get:Object.assign((function(){return Boolean(this.videoUrl&&!this.videoPlayerError)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n]))}})}),isShowingVideo:V.b({readOnly:!0,dependencies:["wantsShowingVideo","canBeShowingVideo"],get:Object.assign((function(){return Boolean(this.wantsShowingVideo&&this.canBeShowingVideo)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n]))}})}),isActuallyPresentingAudio:V.b({readOnly:!0,dependencies:["media.specificType"],get:Object.assign((function(){return this.getPath("media.specificType")===fr.a.Type.AUDIO}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===fr.a.Type.AUDIO}})}),unloadedGradientVerticalCenterOffsetFraction:V.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?0:-1/3}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?0:-1/3}})}),unloadedGradientCenterColor:V.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?"#555":"#f8f8f8"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#555":"#f8f8f8"}})}),unloadedGradientOuterColor:V.b({readOnly:!0,dependencies:["isActuallyPresentingAudio"],get:Object.assign((function(){return this.isActuallyPresentingAudio?"#333":"#ddd"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"#333":"#ddd"}})}),centerView:V.b({readOnly:!0,dependencies:["isShowingVideo","isShowingError","playButtonView","errorView"],get:Object.assign((function(){return this.isShowingError?this.errorView:this.isShowingVideo?this.isActuallyPresentingAudio?this.bigSpeakerView:null:this.playButtonView}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[3+n]):i.internalGet(this,t[0+n])?this.isActuallyPresentingAudio?this.bigSpeakerView:null:i.internalGet(this,t[2+n])}})}),_recoverPlayback:function(e){if(!this.crabsRecoveryMode){var t;this.crabsRecoveryMode=!0,this.videoPlayer&&(t=this.videoPlayer.getCurrentTime()),this.destroyVideoPlayer(),this._resetVideo(),this.enterVideoModeAndPlay(t);var n=L.n().feedbackService;n&&n.report("videoPlayerReload",Object.assign({currentTimeRecoverable:Boolean(t)},this._sanitizedError(e)))}},crabsRecoveryMode:V.b(!1),subdomainFlags:H.d({readOnly:!0,get:function(){return{hlsEnabled:!0,recoveryEnabled:!0}}}),canUseHlsJs:V.b({readOnly:!0,get:function(){return window.Hls&&window.Hls.isSupported()}}),hlsMasterPlaylistUrl:V.b({readOnly:!0,dependencies:["media","media.hlsMasterPlaylistUrl","crabsRecoveryMode"],get:Object.assign((function(){if(!this.crabsRecoveryMode)return this.subdomainFlags.hlsEnabled?this.getPath("media.hlsMasterPlaylistUrl"):void 0}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[2+n]))return this.subdomainFlags.hlsEnabled?i.internalGetPath(this,t[1+n]):void 0}})}),preferredCrabsVideoDerivativeInfo:V.b({readOnly:!0,dependencies:["media.renderableVideoDerivativeInfos"],get:function(){return this.getPath("media.renderableVideoDerivativeInfos.0")}}),videoUrl:V.b({readOnly:!0,dependencies:["hlsMasterPlaylistUrl","canUseHlsJs","preferredCrabsVideoDerivativeInfo"],get:Object.assign((function(){var e=this.hlsMasterPlaylistUrl,t=this.canUseHlsJs;return e&&(t||TE)?e:this.getPath("preferredCrabsVideoDerivativeInfo.url")}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&(a||TE)?r:this.getPath("preferredCrabsVideoDerivativeInfo.url")}})}),isUsingHls:V.b({readOnly:!0,dependencies:["hlsMasterPlaylistUrl","videoUrl"],get:Object.assign((function(){var e=this.videoUrl;return e?this.hlsMasterPlaylistUrl===e:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r?i.internalGet(this,t[0+n])===r:void 0}})}),isUsingHlsJs:V.b({readOnly:!0,dependencies:["isUsingHls","canUseHlsJs"],get:Object.assign((function(){return this.isUsingHls&&this.canUseHlsJs}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),playbackMode:V.b({readOnly:!0,dependencies:["isUsingHls","isUsingHlsJs"],get:Object.assign((function(){return this.isUsingHls?this.isUsingHlsJs?ME.HLS_JS:ME.HLS_NATIVE:ME.CRABS}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])?ME.HLS_JS:ME.HLS_NATIVE:ME.CRABS}})}),playbackModeClass:V.b({readOnly:!0,dependencies:["playbackMode"],get:function(){var e=this.getPath("playbackMode.value");return void 0!==e?"playback-mode-"+e:""}}),playButtonView:V.b(k.c(Ho.a.extend({additionalClassNames:["p2-video-play-button"],action:"enterVideoModeAndPlay"}))),errorView:V.b(k.c(In.a.extend({additionalClassNames:["p2-video-error-view"],staticMembers:{template:{type:"ELEMENT",tagname:"canvas"}},renderSelf:B.h({inputs:["isAttached",p.a.sharedInstance.bindingFor("devicePixelRatio"),"parent.insetLeft","parent.insetTop","parent.insetWidth","parent.insetHeight","parent.imageLeft","parent.imageTop","parent.imageWidth","parent.imageHeight","parent.derivative"],callback:function(e,t,i,r,a,s,o,l,c,u){if(e&&a&&s&&c&&u){var d=CE.b(n(680));if(d){var h=ef.d(d.naturalWidth,d.naturalHeight,Math.min(.9*(c-40),125),Math.min(.9*(u-40),125),Sh.objectPool.getAutodisposingInstance()),p=Sh.objectPool.getAutodisposingInstance();p.width=h.width+40,p.height=h.height+40;var f=20*t,g=p.width,m=p.height,_=i+a/2-g/2,v=r+s/2-m/2,b=Math.ceil(g*t),y=Math.ceil(m*t),w=this.element,I=w.getContext("2d");w.width!==b||w.height!==y?(w.width=b,w.height=y):I.clearRect(0,0,b,y);var S=this._workCanvas||(this._workCanvas=Sh.canvasPool.getInstance()),C=S.getContext("2d");S.width!==b||S.height!==y?(S.width=b,S.height=y):C.clearRect(0,0,b,y);var E=this.getPath("parent.media"),A=E&&E.getBestLoadedDerivative(0,"renderableImage");if(A){var O=Math.round(6*t),T=this._derivativeCanvas||(this._derivativeCanvas=Sh.canvasPool.getInstance()),M=T.getContext("2d"),D=Math.round(b/O),P=Math.round(y/O);T.width===D&&T.height===P||(T.width=D,T.height=P);var L=A.rectInElement;A.drawIntoContext(M,(_-o)/c*L.width,(v-l)/u*L.height,g/c*L.width,m/u*L.height,0,0,T.width,T.height),EE.a(M,Math.ceil(10*t/O),2,void 0,!0),C.drawImage(T,0,0,b,y)}else C.fillStyle="#eee",C.fillRect(0,0,b,y);C.fillStyle="rgba(255, 255, 255, 0.6)",C.fillRect(0,0,b,y),C.globalCompositeOperation="destination-in",C.drawImage(d,f,f,b-2*f,y-2*f),C.globalCompositeOperation="source-over",I.shadowColor="rgba(0, 0, 0, 0.6)",I.shadowBlur=10*t,I.shadowOffsetY=4*t,I.drawImage(S,0,0),this.style.set("position","absolute").set("left",0).set("top",0).set("transform-origin","0 0").translateDevicePixels(_,v).scale(1/t)}else CE.a(n(680)).then(of.a(this.renderSelf,this))}}}),dispose:function(){var e=this,t=arguments;return this._workCanvas&&(Sh.canvasPool.disposeInstance(this._workCanvas),this._workCanvas=null),this._derivativeCanvas&&(Sh.canvasPool.disposeInstance(this._derivativeCanvas),this._derivativeCanvas=null),e.__s._$6sA$dispose.apply(e,t)},__superMap:{_$6sA$dispose:"dispose"}}))),bigSpeakerView:V.b(k.c(In.a.extend({additionalClassNames:["p2-big-speaker-view"]}))),isTypeBadgeVisible:V.b({readOnly:!0,dependencies:["_specificTypeClass","bigSpeakerView","centerView"],get:Object.assign((function(){return Boolean(this._specificTypeClass&&this.bigSpeakerView!==this.centerView)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])!==i.internalGet(this,t[2+n]))}})}),_videoPlayTimeout:void 0,enterVideoModeAndPlay:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.claimVideoPlayer(),this.wantsShowingVideo=!0;var n=this.videoUrl,i=this.videoPlayer;n&&(this._videoPlayTimeout=AE.b((function(){i._Photos_currentVideoUrl!==n&&e._loadVideoPlayer(i,n,t),i._Photos_currentVideoUrl=n,i.play(),void 0===e._playbackButtonTimestamp&&(e._playbackButtonTimestamp=performance.now())})))},_sentPlaybackStat:!1,_recordPlaybackStat:Bu.b((function(){var e=this;if(!this._sentPlaybackStat){var t=L.n().feedbackService;if(t){this._sentPlaybackStat=!0;var n=this.isUsingHls?void 0:this.preferredCrabsVideoDerivativeInfo,i=this.getPath("media.serverDerivativeInfosByDerivativeId"),r=n&&i&&i[n.transcodeSourceDerivativeId],a=this.getPath("media.originalVideoDerivativeInfos.0"),s=function(t,n){var i;return n?((i={})[t+"MIMEType"]=n.mimeType,i[t+"UTI"]=n.uti,i[t+"ApproxBitrateMbps"]=qC.a(8*n.byteSize/1e6/(e.getPath("media.primaryAsset.duration")/1e3)),i[t+"IsTranscoded"]=n.isDynamic,i[t+"IsHighEfficiencyCodec"]=n.isHighEfficiencyCodec,i[t+"ReflectsEdits"]=n.reflectsEdits,i[t+"ApproxArea"]=qC.a(n.width*n.height),i):{}};t.report("videoPlayerStart",Object.assign({videoPlaybackMode:this.getPath("playbackMode.value")||"",recoveryMode:this.getPath("crabsRecoveryMode")},s("videoCrabsDerivative",n),s("videoCrabsDerivativeTranscodeSource",r),s("videoOriginal",a)))}}})),_playbackButtonTimestamp:void 0,_sentPlayTimingStat:!1,_recordPlayTimingStat:Bu.b((function(){var e=L.n().feedbackService;if(e){this._sentPlayTimingStat=!0;var t=performance.now()-this._playbackButtonTimestamp;e.report("videoPlaybackTiming",{videoPlaybackMode:this.getPath("playbackMode.value")||"",recoveryMode:this.crabsRecoveryMode,millisecondsSinceButtonPressed:t})}})),exitVideoModeAndClean:function(){this.wantsShowingVideo=!1,this.relinquishVideoPlayer(),this.crabsRecoveryMode=!1},claimVideoPlayer:function(){window.Hls&&(window.Hls._Photos_vpvOwner=this),this._sentPlaybackStat=!1,this._playbackButtonTimestamp=void 0,this._sentPlayTimingStat=!1;var e=this.hlsMasterPlaylistUrl&&this.canUseHlsJs?OE.a.videoPlayerHls:OE.a.videoPlayerStatic,t=this.videoPlayer;t!==e&&(t&&t!==e&&this.relinquishVideoPlayer(),this.videoPlayer=e,e._Photos_vpvOwner&&e._Photos_vpvOwner.exitVideoModeAndClean(),e._Photos_vpvOwner=this,e.appendTo(this.videoContainerElement),this._attachListeners(e))},relinquishVideoPlayer:function(){AE.a(this._videoPlayTimeout);var e=this.videoPlayer;window.Hls&&(window.Hls._Photos_vpvOwner=void 0),e&&(this._detachListeners(e),e._Photos_removeFromParent(),e._Photos_vpvOwner=void 0,this.videoPlayer=void 0)},destroyVideoPlayer:function(){AE.a(this._videoPlayTimeout);var e=this.videoPlayer;window.Hls&&(window.Hls._Photos_vpvOwner=void 0),e&&(this._detachListeners(e),e._Photos_removeFromParent(),this.videoPlayer=void 0,OE.a.destroyPlayer(e))},togglePlayback:function(){if(this.isShowingError)this.wantsShowingVideo=!1;else if(this.wantsShowingVideo){var e=this.videoPlayer;e&&(e.getPaused()?e.play():e.pause())}else this.enterVideoModeAndPlay()},_loadVideoPlayer:function(e,t,n){e.load([t],[],n)},_attachListeners:function(e){e.on("ended",this._endedPlaying),e.on("play",this._recordPlaybackStat),e.on("timeupdate",this._timeUpdate),e._vpv_receivedVideoPlayerError=this._receivedVideoPlayerError},_detachListeners:function(e){e.off("ended",this._endedPlaying),e.off("play",this._recordPlaybackStat),e.off("timeupdate",this._timeUpdate),e._vpv_receivedVideoPlayerError=void 0},_stopVideo:function(){this.videoPlayer&&(this.videoPlayer.pause(),this.videoPlayer.seek(0))},_resetVideo:function(){AE.a(this._videoPlayTimeout),Zl.a.begin().setIfChanged(this,"wantsShowingVideo",!1).setIfChanged(this,"videoPlayerError",void 0).end(),this._stopVideo()},_resetWhenHides:B.h("isShowingInParent","isAttached",(function(e,t){e&&t||this._resetVideo()})),_endedPlaying:Bu.b((function(){this._resetVideo()})),_timeUpdate:Bu.b((function(e){!this._sentPlayTimingStat&&e.currentTime>0&&this._recordPlayTimingStat()})),_receivedVideoPlayerError:Bu.b((function(e){this.subdomainFlags.recoveryEnabled&&e.event&&e._Photos_hls_interception&&("networkError"===e.event.type||"mediaError"===e.event.type)?this.crabsRecoveryMode||this.playbackMode!==ME.HLS_JS||this._recoverPlayback(e):void 0===e._Photos_hls_interception&&(this.videoPlayerError=e)})),_layOutCenterView:B.h("insetLeft","insetTop","insetWidth","insetHeight","centerView","centerView.isAttached","errorView",(function(e,t,n,i,r,a,s){if(r&&a&&r!==s){var o=r._vpv_centerViewWidth||(r._vpv_centerViewWidth=r.element.offsetWidth),l=r._vpv_centerViewHeight||(r._vpv_centerViewHeight=r.element.offsetHeight);o&&l&&r.style.set("left",e+n/2-o/2).set("top",t+i/2-l/2)}})),_specificTypeClass:V.b({readOnly:!0,dependencies:["media.specificType"],get:Object.assign((function(){var e=this.getPath("media.specificType");return e===fr.a.Type.VIDEO&&(e=null),e?e.value:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===fr.a.Type.VIDEO&&(r=null),r?r.value:""}})}),_layOutVideoContainer:B.h({inputs:["imageLeft","imageTop","imageWidth","imageHeight","videoContainerElement","isAttached","isShowingVideo","isActuallyPresentingAudio"],callback:function(e,t,n,i,r,a,s,o){if(a&&r){var l=yl.c(r);l.set("position","absolute").set("left",e).set("top",t).set("width",n).set("height",i).set("transition","opacity 150ms").set("opacity",s?1:0).set("background",o?"":"rgba(0, 0, 0, 0.5)"),s?(l.set("visibility","visible"),this._unscheduleVideoContainerHide()):this._scheduleVideoContainerHide()}}}),_scheduleVideoContainerHide:function(){this._videoContainerHideTimeout||(this._videoContainerHideTimeout=X.a(this._hideVideoContainer,150))},_unscheduleVideoContainerHide:function(){clearTimeout(this._videoContainerHideTimeout),this._videoContainerHideTimeout=null},_hideVideoContainer:Bu.b((function(){this._unscheduleVideoContainerHide(),this.videoContainerElement&&yl.c(this.videoContainerElement).set("visibility","hidden")})),cleanup:function(){var e=this,t=arguments;this._resetVideo(),this.relinquishVideoPlayer(),this._unscheduleVideoContainerHide(),e.__s._$BDd$cleanup.apply(e,t)},__superMap:{_$BDd$cleanup:"cleanup"}}),RE=In.a.extend(tc.a,HC.a).extend({owner:V.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"attachedPresenters"}],classes:["p2-oneup-view"]},__QUALIFIED_CLASS_NAME__:"OneUpView"},targetMedia:V.b({strong:!0}),isFocusable:!0,targetMediaIndex:V.b(),feedbackService:V.b(),_updateTargetMediaIndexToTargetMedia:B.h("targetMedia","collection","collection.contentsDidChangeUntracked","collection.everythingChanged",(function(e,t){if(e&&t){var n=t.indexOf(e);-1!==n&&this.targetMediaIndex!==n&&(this.targetMediaIndex=n)}})),_updateTargetMediaToTargetMediaIndex:B.h("targetMediaIndex","collection","collection.contentsDidChangeUntracked","collection.everythingChanged",(function(e,t){if(t&&e>=0){var n=this._utmttmi_lastTargetMediaIndex!==(this._utmttmi_lastTargetMediaIndex=e),i=t.objectAt(Math.min(e,t.length-1)),r=this.targetMedia;if((n||i&&(!r||-1===t.indexOf(r)))&&r!==i){this.targetMedia=i;var a=this.feedbackService;a&&a.report("oneUpViewed")}}})),targetMediaView:V.b({strong:!0}),collection:V.b(),prerenderDistance:V.b(3),preloadDistance:V.b(12),isPreloadEnabled:V.b(!0),primaryMediaView:V.b({readOnly:!0,dependencies:["transition","transition.primaryView","targetMediaView"],get:Object.assign((function(){return this.transition?this.getPath("transition.primaryView"):this.targetMediaView}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGetPath(this,t[1+n]):i.internalGet(this,t[2+n])}})}),primaryMedia:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.media")}),zoomLevel:V.b(Oi.c("primaryMediaView.zoomLevel")),unzoomedZoomLevel:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.unzoomedZoomLevel")}),minZoomLevel:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.minZoomLevel")}),maxZoomLevel:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.maxZoomLevel")}),zoomSteps:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.zoomSteps")}),isZoomed:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.isZoomed")}),canZoom:V.b({readOnly:!0,binding:Oi.c("primaryMediaView.canZoom")}),cannotZoom:V.b({readOnly:!0,dependencies:["canZoom"],get:Object.assign((function(){return!this.canZoom}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),zoomInOneStepIfPossible:function(){if(this.isSteady){var e=this.primaryMediaView;e&&e.zoomInOneStep instanceof Function&&e.zoomInOneStep()}},zoomOutOneStepIfPossible:function(){if(this.isSteady){var e=this.primaryMediaView;e&&e.zoomOutOneStep instanceof Function&&e.zoomOutOneStep()}},zoomTo1IfPossible:function(){if(this.isSteady){var e=this.primaryMediaView;e&&e.zoomTo1 instanceof Function&&e.zoomTo1()}},zoomToFitIfPossible:function(){if(this.isSteady){var e=this.primaryMediaView;e&&e.zoomToFit instanceof Function&&e.zoomToFit()}},toggleZoomIfPossible:function(){if(this.isSteady){var e=this.primaryMediaView;e&&e.toggleZoom instanceof Function&&e.toggleZoom()}},shouldUIBeClear:V.b(Oi.c("targetMediaView.wantsUIControl")),shouldAllUIBeClear:V.b(Oi.c("targetMediaView.wantsFullUIControl")),transition:V.b(),isTransitioning:V.b({readOnly:!0,dependencies:["transition"],get:Object.assign((function(){return Boolean(this.transition)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),isSteady:V.b(Oi.c("_isSteady_ratchet.value")),_isSteady_ratchet:V.b({strong:!0,defaultValue:k.c(yE=WC.a.extend({defersUpgrades:250,value:!1,targetValue:V.b({readOnly:!0,dependencies:["owner.isTransitioning"],get:Object.assign((function(){return!this.getPath("owner.isTransitioning")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})})}))}),isBackgroundablySteady:V.b(Oi.c("_isBackgroundablySteady_ratchet.value")),_isBackgroundablySteady_ratchet:V.b({strong:!0,defaultValue:k.c(yE.extend({defersUpgrades:750,_goFalseOnViewportSizeChange:B.h("owner.insetWidth","owner.insetHeight",(function(){this.reset()}))}))}),_updateToNewTargetMedia:B.h("targetMedia",(function(e){var t=this._mmv_lastTargetMediaPK,n=e?e.pk:null;if(t!==n){this._mmv_lastTargetMediaPK=n;var i=this.targetMediaView||null,r=this._viewForMedia(e)||null;if(i!==r){var a=this.transition,s=a?a.speedMultiplier:1;a&&a.finish();var o=this.transition=this.getTransitionFromViewToView(i,r)||NE.create(i,r,this.attachedPresenters),l=this._lastTxTime||NaN,c=(this._lastTxTime=Date.now())-l;o.speedMultiplier*=c<o.duration?s+.25:s,this.targetMediaView=r,this.transition.start()}}})),_handleTransitionCompletion:B.h("transition.didFinish",(function(e){e&&(this.transition=null)})),getTransitionFromViewToView:function(e,t){if(e===t)return null;var n=this.attachedPresenters;if(this._shouldAvoidTransitionAnimations||!e||!t)return NE.create(e,t,n);var i=this.collection;if(!i||this._shouldAvoidTransitionSliding)return VE.create(e,t,n);var r=i.indexOf(e.media),a=i.indexOf(t.media),s=(r>=0&&a===r+1?1:a>=0&&a===r-1?-1:0)*Math.max(5,.02*this.viewportWidth);return kE.create(e,t,n,s)},shouldEnsureOwnMediaRanges:V.b(!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.canEnsureRange&&n.ensureRange(e,t)},_ensureRangeIfPossible:HC.b((function(){if(this.shouldEnsureOwnMediaRanges){var e=this.collection;if(e&&e.length){var t=this.targetMediaIndex,n=t-30,i=t+30;n=30*Math.floor(n/30),i=30*Math.ceil(i/30),n=Math.max(0,n),(i=Math.min(e.length-1,i))-n&&this.ensureMediaRange(n,i)}}}),500,!0),_loadMediaMetadata:B.h("targetMediaIndex","isPreloadEnabled",(function(e,t){t&&this._ensureRangeIfPossible()})),mediasWithViews:V.b({readOnly:!0,dependencies:["targetMedia","targetMediaIndex","collection","prerenderDistance"],get:Object.assign((function(){var e=this._mediasWithViews_lastRet;e&&(Sh.arrayPool.disposeInstance(e),e=this._mediasWithViews_lastRet=null);for(var t=Sh.arrayPool.getInstance(),n=this.targetMediaIndex,i=this.collection,r=this.prerenderDistance,a=this.targetMedia,s=!1,o=-r;o<=r;o++){var l=i&&i.objectAt(n+o);l&&t.push(l),l===a&&(s=!0)}return a&&!s&&t.push(a),this._mediasWithViews_lastRet=t}),{__CW__getter:function(e,t,n,i){var r=this._mediasWithViews_lastRet;r&&(Sh.arrayPool.disposeInstance(r),r=this._mediasWithViews_lastRet=null);for(var a=Sh.arrayPool.getInstance(),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[3+n]),c=i.internalGet(this,t[0+n]),u=!1,d=-l;d<=l;d++){var h=o&&o.objectAt(s+d);h&&a.push(h),h===c&&(u=!0)}return c&&!u&&a.push(c),this._mediasWithViews_lastRet=a}})}),prerenderedViewInstantiators:Ff.b({source:"mediasWithViews",outputForInput:function(e){var t=BE.create();return Pe.a.pause(),t.owner=this,t.media=e,Pe.a.resume(),t},didChange:U.a}),derivativePreloader:V.b({strong:!0,defaultValue:k.c(GC.a.extend({derivativeRequestReason:Jp.a.ONEUP_MAIN_DISPLAY_PREFETCH,medias:V.b({readOnly:!0,dependencies:["owner.isPreloadEnabled","owner.targetMediaIndex","owner.collection","owner.collection.contentsDidChangeUntracked","owner.collection.everythingChanged","owner.preloadDistance"],get:Object.assign((function(){var e=this._mediasWithDerivatives_lastRet;if(e){for(var t=0,n=e.length;t<n;t++)e[t].release(this,"P2.OneUpView#derivativePreloader.medias");Sh.arrayPool.disposeInstance(e),e=this._mediasWithDerivatives_lastRet=null}if(!this.getPath("owner.isPreloadEnabled"))return null;var i=this.getPath("owner.collection");if(!i)return null;for(var r=Sh.arrayPool.getInstance(),a=this.getPath("owner.targetMediaIndex"),s=this.getPath("owner.preloadDistance"),o=-s;o<=s;o++){var l=i.objectAt(a+o);l&&(l.retain(this,"P2.OneUpView#derivativePreloader.medias"),r.push(l))}return this._mediasWithDerivatives_lastRet=r}),{__CW__getter:function(e,t,n,i){var r=this._mediasWithDerivatives_lastRet;if(r){for(var a=0,s=r.length;a<s;a++)r[a].release(this,"P2.OneUpView#derivativePreloader.medias");Sh.arrayPool.disposeInstance(r),r=this._mediasWithDerivatives_lastRet=null}if(!i.internalGetPath(this,t[0+n]))return null;var o=i.internalGetPath(this,t[2+n]);if(!o)return null;for(var l=Sh.arrayPool.getInstance(),c=i.internalGetPath(this,t[1+n]),u=i.internalGetPath(this,t[5+n]),d=-u;d<=u;d++){var h=o.objectAt(c+d);h&&(h.retain(this,"P2.OneUpView#derivativePreloader.medias"),l.push(h))}return this._mediasWithDerivatives_lastRet=l}})}),width:200,height:200,priority:125e3,offscreeninessBase:0,offscreeninessDeltaPerIndex:1,offscreeninessCenterIndex:V.b({readOnly:!0,dependencies:["medias","owner.targetMedia"],get:Object.assign((function(){var e=this.medias;return e?e.indexOf(this.getPath("owner.targetMedia")):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.indexOf(i.internalGetPath(this,t[1+n])):void 0}})})}))}),viewClassForMedia:function(e){var t=e&&e.genericType,n=e&&e.specificType;return t&&n?n===fr.a.Type.LIVE_PHOTO?G.a.application.isLPKLoaded?SE:wE:t===fr.a.Type.IMAGE?wE:t===fr.a.Type.VIDEO?LE:null:null},_viewStoreForMedia:function(e){var t=this.viewClassForMedia(e);if(!t)return null;var n=this._viewStores||(this._viewStores={}),i=Yl.b(t);return n[i]||(n[i]=$C.ObjectStore.create({computeStoreKey:function(e){return e&&e.pk},itemClass:t.extend($C.ObjectStore.Support,{owner:V.b(this),isCacheableInStore:!1,isAloneInParent:V.b({readOnly:!0,dependencies:["isPrimaryInParent","parent.transition"],get:Object.assign((function(){return!this.getPath("parent.transition")&&this.isPrimaryInParent}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[1+n])&&i.internalGet(this,t[0+n])}})}),isPrimaryInParent:V.b({readOnly:!0,dependencies:["parent.primaryMediaView"],get:Object.assign((function(){return this===this.getPath("parent.primaryMediaView")}),{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),isTargetInParent:V.b({readOnly:!0,dependencies:["parent.targetMediaView"],get:Object.assign((function(){return this===this.getPath("parent.targetMediaView")}),{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})}),isShowingInParent:V.b({readOnly:!0,dependencies:["parent.primaryMediaView","parent.transition.sourceView","parent.transition.targetView"],get:Object.assign((function(){return this===this.getPath("parent.primaryMediaView")||this===this.getPath("parent.transition.sourceView")||this===this.getPath("parent.transition.targetView")}),{__CW__getter:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])||this===i.internalGetPath(this,t[1+n])||this===i.internalGetPath(this,t[2+n])}})}),isSteadyInParent:Oi.c("owner.isSteady"),isBackgroundablySteadyInParent:Oi.c("owner.isBackgroundablySteady"),baseInsetsProvider:Oi.c("owner"),viewportWidth:Oi.c("owner.viewportWidth"),viewportHeight:Oi.c("owner.viewportHeight"),offscreeniness:V.b({readOnly:!0,dependencies:["isShowingInParent","owner.collection","owner.collection.contentsDidChangeUntracked","owner.targetMediaIndex","owner.prerenderDistance","media"],get:Object.assign((function(){if(this.isShowingInParent)return 0;var e=this.getPath("owner.targetMediaIndex");if(e>=0){var t=this.media;if(t){var n=this.getPath("owner.collection");if(n&&n.length){for(var i=this.getPath("owner.prerenderDistance"),r=1;r<=i;r++)if(n.objectAt(e+r)===t||n.objectAt(e-r)===t)return r;return i+1}}}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return 0;var r=i.internalGetPath(this,t[3+n]);if(r>=0){var a=i.internalGet(this,t[5+n]);if(a){var s=i.internalGetPath(this,t[1+n]);if(s&&s.length){for(var o=i.internalGetPath(this,t[4+n]),l=1;l<=o;l++)if(s.objectAt(r+l)===a||s.objectAt(r-l)===a)return l;return o+1}}}}})})})}))},_viewForMedia:function(e){var t=this._viewStoreForMedia(e);return t?t.getItem(e).retain(this,"retain/autorelease in _viewForMedia").autorelease(this,"retain/autorelease in _viewForMedia"):null},goToNext:function(){this.jumpBy(1)},goToPrevious:function(){this.jumpBy(-1)},goToNextWithoutAnimation:function(){this._shouldAvoidTransitionAnimations=!0,this.goToNext(),this._shouldAvoidTransitionAnimations=!1},goToPreviousWithoutAnimation:function(){this._shouldAvoidTransitionAnimations=!0,this.goToPrevious(),this._shouldAvoidTransitionAnimations=!1},goToNextWithoutSliding:function(){this._shouldAvoidTransitionSliding=!0,this.goToNext(),this._shouldAvoidTransitionSliding=!1},goToPreviousWithoutSliding:function(){this._shouldAvoidTransitionSliding=!0,this.goToPrevious(),this._shouldAvoidTransitionSliding=!1},jumpBy:function(e){var t=Math.max(0,Math.min(this.getPath("collection.length")-1,this.targetMediaIndex+e));this.targetMediaIndex!==t&&(this.targetMediaIndex=t),this.sendEvent("oneUpViewDidNavigateInternally")},canGoToNext:V.b({readOnly:!0,dependencies:["targetMediaIndex","collection.length"],get:Object.assign((function(){return this.targetMediaIndex<this.getPath("collection.length")-1}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])<i.internalGetPath(this,t[1+n])-1}})}),canGoToPrevious:V.b({readOnly:!0,dependencies:["targetMediaIndex"],get:Object.assign((function(){return this.targetMediaIndex>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}})})}),xE=RE.ViewTransition=P.a.extend(B.b,uc.a,{viewsArray:V.b(),sourceView:V.b({strong:!0}),targetView:V.b({strong:!0}),primaryView:V.b({readOnly:!0,binding:"targetView"}),didFinish:B.i(),start:function(){this.retain(this,"transition in progress")},finish:function(){this.didFinish(),this.release(this,"transition in progress")},initFromPool:function(e,t,n){this.__s._$Ah7$initFromPool.call(this),this.sourceView=e,this.targetView=t,this.viewsArray=n},cleanup:function(){var e=this,t=arguments;this.sourceView=null,this.targetView=null,this.viewsArray=null,e.__s._$Alh$cleanup.apply(e,t)},__superMap:{_$Ah7$initFromPool:"initFromPool",_$Alh$cleanup:"cleanup"}}),NE=RE.InstantTransition=xE.extend({start:function(){var e=this,t=arguments;e.__s._$Ano$start.apply(e,t),this.targetView&&this.viewsArray.add(this.targetView),this.sourceView&&this.viewsArray.remove(this.sourceView),this.finish()},__superMap:{_$Ano$start:"start"}}),FE=RE.AnimatedTransition=xE.extend({duration:250,speedMultiplier:1,progress:V.b({defaultValue:0,get:Tl.a,set:function(e){return Math.max(0,Math.min(1,e))}}),displayProgress:V.b({readOnly:!0,dependencies:["progress"],get:Object.assign((function(){return zC.d(this.progress)}),{__CW__getter:function(e,t,n,i){return zC.d(i.internalGet(this,t[0+n]))}})}),primaryView:V.b({readOnly:!0,dependencies:["sourceView","targetView","displayProgress"],get:Object.assign((function(){var e=this.sourceView,t=this.targetView,n=this.displayProgress;return e&&t?n<.5?e:t:t||e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return r&&a?s<.5?r:a:a||r}})}),start:function(){var e=this,t=arguments;e.__s._$BAW$start.apply(e,t),this.targetView&&this.viewsArray.add(this.targetView),this._nextFrame()},finish:function(){var e=this,t=arguments;this._unscheduleNextFrame(),this.progress=1,this.update(this.displayProgress),this.sourceView&&this.viewsArray.remove(this.sourceView),this.cleanUpTransitionAfterFinish(),this.sourceView&&this.cleanUpView(this.sourceView),this.targetView&&this.cleanUpView(this.targetView),e.__s._$BPe$finish.apply(e,t)},_nextFrame:Bu.b((function(e){this._unscheduleNextFrame();var t=e-(this._lastTimestamp||e)||0;this._lastTimestamp=e,this.progress+=this.speedMultiplier*t/this.duration,this.update(this.displayProgress),this.progress<1?this._scheduleNextFrame():this.finish()})),_scheduleNextFrame:function(){this._scheduledFrame||(this._scheduledFrame=mu.a(this._nextFrame))},_unscheduleNextFrame:function(){cancelAnimationFrame(this._scheduledFrame),this._scheduledFrame=null},cleanup:function(){var e=this,t=arguments;this._lastTimestamp=0,this.progress=0,this.speedMultiplier=1,e.__s._$Bj2$cleanup.apply(e,t)},update:U.a,cleanUpTransitionAfterFinish:U.a,cleanUpView:U.a,__superMap:{_$BAW$start:"start",_$BPe$finish:"finish",_$Bj2$cleanup:"cleanup"}}),VE=RE.CrossfadeTransition=FE.extend({start:function(){var e=this,t=arguments;this.targetView&&this.targetView.style.set("background-color","white"),e.__s._$Bp4$start.apply(e,t)},update:function(e){var t=this,n=arguments;t.__s._$Bp_$update.apply(t,n),this.sourceView&&this.sourceView.style.set("z-index",1),this.targetView?this.targetView.style.set("z-index",2).set("opacity",e):this.sourceView.style.set("opacity",1-e)},cleanUpView:function(e){var t=this,n=arguments;t.__s._$BwG$cleanUpView.apply(t,n),e.style.clear("background-color"),e.style.clear("opacity"),e.style.clear("z-index")},__superMap:{_$Bp4$start:"start",_$Bp_$update:"update",_$BwG$cleanUpView:"cleanUpView"}}),kE=RE.CrossfadeSlideTransition=VE.extend({distanceX:0,distanceY:0,initFromPool:function(e,t,n,i,r){var a=this,s=arguments;this.distanceX=i||0,this.distanceY=r||0,a.__s._$C2p$initFromPool.apply(a,s)},update:function(e){var t=this,n=arguments;t.__s._$C3k$update.apply(t,n);var i=3,r=Math.pow(Math.max(0,Math.min(1,(1/this.speedMultiplier-1/i)/(1-1/i))),.8);this.sourceView&&this.sourceView.style.translate(e*-this.distanceX*r,e*-this.distanceY*r).layerBack(),this.targetView&&this.targetView.style.translate((1-e)*this.distanceX*r,(1-e)*this.distanceY*r).layerBack()},cleanUpView:function(e){var t=this,n=arguments;t.__s._$COv$cleanUpView.apply(t,n),e.style.clear("transform")},__superMap:{_$C2p$initFromPool:"initFromPool",_$C3k$update:"update",_$COv$cleanUpView:"cleanUpView"}}),BE=KC.a.extend({delay:500,media:V.b(),canHaveInstance:Oi.c("owner.isSteady"),hypotheticalInstance:V.b({readOnly:!0,dependencies:["media","media.specificType","owner","owner.collection"],get:Object.assign((function(){var e=this.media,t=this.owner;return e&&t?t._viewForMedia(e):null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);return r&&a?a._viewForMedia(r):null}})}),cleanup:function(){var e=this,t=arguments;this.media=null,e.__s._$CaL$cleanup.apply(e,t)},__superMap:{_$CaL$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LazyPresenterViewInstantiator"}}),jE=n(760),UE=n(1254),GE=n(1322),HE={},WE=P.a.extend(uc.a,B.b,GE.b).extend({ownerStripView:V.b(null),mediaIndex:V.b(NaN),substrip:V.b({strong:!0}),isBeingPressed:V.b(!1),leftInSubstrip:V.b(NaN),topInSubstrip:V.b(0),widthInSubstrip:V.b({dependencies:["ownerStripView.thumbWidth"],get:Object.assign((function(e){return e||this.getPath("ownerStripView.thumbWidth")}),{__CW__getter:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])}}),writeDependencies:[],set:Tl.a}),heightInSubstrip:V.b(Oi.c("ownerStripView.thumbHeight")),derivativeContainerWidth:Oi.c("ownerStripView.thumbWidth"),derivativeContainerHeight:Oi.c("ownerStripView.thumbHeight"),derivativeRequestReason:Jp.a.ONEUP_THUMBSTRIP,shouldCorrectDerivativeForDevicePixelRatio:!0,shouldDerivativeCoverContainer:!0,wantsDownsampledDerivatives:!0,media:V.b({readOnly:!0,strong:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign((function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),initFromPool:function(e,t,n,i,r){this.__s._$aJ$initFromPool.call(this),Pe.a.pause(),this.ownerStripView=e,this.mediaIndex=t,this.detectDerivativeOffscreeninessAndPriority(e,t,n,i,r),Pe.a.resume()},cleanup:function(){var e=this,t=arguments;Pe.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.substrip=null,this.isBeingPressed=!1,this.leftInSubstrip=NaN,this.widthInSubstrip=void 0,this.derivativeOffscreeniness=void 0,this.derivativePriority=void 0,Pe.a.resume(),e.__s._$mX$cleanup.apply(e,t)},detectDerivativeOffscreeninessAndPriority:function(e,t,n,i,r){var a,s,o=t>=0?t:this.mediaIndex,l=e||this.ownerStripView;if(o>=0){var c=n>=0?n:l.firstVisibleThumbIndex,u=i>=0?i:l.lastVisibleThumbIndex,d=r>=0?r:l.centerThumbIndex;if(c>=0&&d>=c&&u>=d)if(o>=c&&o<=u)a=0;else{var h=Math.max(u-c,2*(d-c),2*(u-d));a=Math.max(o-u,c-o)/h}d>=0&&(s=111e3+Math.abs(d-o))}a!==this.derivativeOffscreeniness&&(this.derivativeOffscreeniness=a),s!==this.derivativePriority&&(this.derivativePriority=s)},render:B.h({inputs:["substrip","derivative","leftInSubstrip","topInSubstrip","widthInSubstrip","heightInSubstrip","isBeingPressed","ownerStripView","media.specificType"],callback:function(e,t,i,r,a,s,o,l,c){if(e&&l&&!isNaN(i+r+a+s)){var u=c===fr.a.Type.AUDIO;if(t){var d=ef.a(t.physicalWidth,t.physicalHeight,a,s,void 0,void 0,void 0,HE);t.drawIntoContext(e.context,d.cropX,d.cropY,d.cropWidth,d.cropHeight,i,r,a,s)}else e.context.clearRect(i,r,a,s),e.context.fillStyle=u?"rgba(0, 0, 0, 0.66666666667)":"rgba(0, 0, 0, 0.06666666667)",e.context.fillRect(i,r,a,s),u&&CE.a(n(1277)).thenSync(of.a(this._drawAudioBadge,this,e,i,r,a,s));this.doAdditionalRendering(e,t,i,r,a,s),o&&(e.context.fillStyle="rgba(0, 0, 0, 0.15)",e.context.fillRect(i,r,a,s)),e.context.clearRect(i,r,1,s)}}}),_drawAudioBadge:function(e,t,n,i,r,a,s,o){if(o){var l=ef.d(a.naturalWidth,a.naturalHeight,.7*i,.6*r,Sh.objectPool.getAutodisposingInstance()),c=l.width,u=l.height;e.context.globalAlpha=.5,e.context.drawImage(a,t+i/2-c/2,n+r/2-u/2,c,u),e.context.globalAlpha=1}else this.render()},doAdditionalRendering:U.a,__superMap:{_$aJ$initFromPool:"initFromPool",_$mX$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbnailsStripThumbRenderer"}}),$E=In.a.extend(Mp.a,Dp.a,tc.a,aE.a,HC.a,wi.a).extend({owner:V.b(),shouldRenderInsetsToScrollIndicators:!1,additionalClassNames:F.b(["p2-thumbnails-strip-view"]),collection:V.b(),contentHeight:V.b(Oi.c("viewportHeight")),thumbAspectRatio:V.b(47/84),thumbRendererClass:WE,baseInsetTop:V.b({readOnly:!0,dependencies:["viewportHeight","baseInsetBottom","contentHeight"],get:Object.assign((function(){return this.viewportHeight-this.baseInsetBottom-this.contentHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),baseInsetBottom:V.b({readOnly:!0,dependencies:["viewportHeight","contentHeight"],get:Object.assign((function(){return Math.ceil((this.viewportHeight-this.contentHeight)/2)}),{__CW__getter:function(e,t,n,i){return Math.ceil((i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/2)}})}),substripWidth:V.b({readOnly:!0,dependencies:["substripHeight"],get:Object.assign((function(){return KE(Math.max(256,4*this.substripHeight))}),{__CW__getter:function(e,t,n,i){return KE(Math.max(256,4*i.internalGet(this,t[0+n])))}})}),substripHeight:V.b({readOnly:!0,dependencies:["thumbHeight"],get:Object.assign((function(){return KE(this.thumbHeight)}),{__CW__getter:function(e,t,n,i){return KE(i.internalGet(this,t[0+n]))}})}),thumbHeight:V.b(Oi.c("insetHeight")),thumbWidth:V.b({readOnly:!0,dependencies:["thumbHeight","thumbAspectRatio"],get:Object.assign((function(){return Math.round(this.thumbHeight*this.thumbAspectRatio)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n]))}})}),thumbsPerGroup:V.b({readOnly:!0,dependencies:["thumbWidth","substripWidth"],get:Object.assign((function(){return Math.floor(this.substripWidth/this.thumbWidth)}),{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n]))}})}),thumbCount:V.b({readOnly:!0,dependencies:["collection.length"],get:Object.assign((function(){return Math.floor(this.getPath("collection.length"))}),{__CW__getter:function(e,t,n,i){return Math.floor(i.internalGetPath(this,t[0+n]))}})}),expandThumb:function(e,t,n){var i=this.thumbExpansionsByMediaIndex,r=i[e];if(!r){if(!t)return;r=i[e]=zE.create(this,e,n?0:t)}n?r.getFinalValue("expansionAmount")!==t&&r.animate("expansionAmount",t,n):r.expansionAmount=t},unexpandAllThumbs:function(e,t){if(this.updateToThumbExpansionsSoon(),e)for(var n,i=this.thumbExpansions,r=0;n=i[r];r++){var a=n.mediaIndex;a!==t&&this.expandThumb(a,0,e)}else v.a(this.thumbExpansionsByMediaIndex)},thumbExpansions:V.b({readOnly:!0,dependencies:["thumbExpansionsByMediaIndex"],get:Object.assign((function(){var e=this._thumbExpansions_lastRet;e&&(this._thumbExpansions_lastRet=null,Sh.arrayPool.disposeInstance(e));var t=Sh.arrayPool.getInstance(),n=this.thumbExpansionsByMediaIndex,i=Sh.arrayPool.getInstance();for(var r in n)if(n.hasOwnProperty(r)){var a=parseInt(r,10);isNaN(a)||i.push(a)}i.sort(QE);for(var s=0,o=i.length;s<o;s++)t.push(n[i[s]]);return this._thumbExpansions_lastRet=t}),{__CW__getter:function(e,t,n,i){var r=this._thumbExpansions_lastRet;r&&(this._thumbExpansions_lastRet=null,Sh.arrayPool.disposeInstance(r));var a=Sh.arrayPool.getInstance(),s=i.internalGet(this,t[0+n]),o=Sh.arrayPool.getInstance();for(var l in s)if(s.hasOwnProperty(l)){var c=parseInt(l,10);isNaN(c)||o.push(c)}o.sort(QE);for(var u=0,d=o.length;u<d;u++)a.push(s[o[u]]);return this._thumbExpansions_lastRet=a}})}),thumbExpansionsByMediaIndex:V.b({readOnly:!0,dependencies:["collection.contentsDidChangeUntracked","collection.everythingChanged"],get:function(){return this._thumbExpansionsByMediaIndex}}),_thumbExpansionsByMediaIndex:k.c(Object),width:Oi.c("viewportWidth"),height:Oi.c("viewportHeight"),scrollMaxY:Oi.c("viewportHeight"),scrollMaxX:V.b({readOnly:!0,dependencies:["stripWidth","thumbExpansions","thumbExpansionsByMediaIndex","thumbWidth","thumbCount","viewportWidth"],get:Object.assign((function(){return Math.round(this.stripWidth-.5*this.widthInStripForThumbIndex(0)-.5*this.widthInStripForThumbIndex(this.thumbCount-1))+this.viewportWidth}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])-.5*this.widthInStripForThumbIndex(0)-.5*this.widthInStripForThumbIndex(i.internalGet(this,t[4+n])-1))+i.internalGet(this,t[5+n])}})}),leftInStripForThumbIndex:function(e){for(var t,n,i=this.thumbExpansions,r=this.thumbWidth,a=0,s=-1,o=0;(t=i&&i[o])&&(n=t.mediaIndex)<e;o++)a+=(n-s-1)*r,a+=t.widthInStrip,s=n;return a+(e-s-1)*r},centerInStripForThumbIndex:function(e){return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)/2},widthInStripForThumbIndex:function(e){var t=this.thumbExpansionsByMediaIndex[e];return t?t.widthInStrip:this.thumbWidth},thumbIndexForLeftInStrip:function(e){return e>=0&&e<this.stripWidth?jE.b.call(this,this.leftInStripForThumbIndex,e,0,this.thumbCount-1,.01,0,1):NaN},thumbIndexForPointInView:function(e,t){return t>=this.stripTop&&t<this.stripTop+this.stripHeight?this.thumbIndexForLeftInStrip(e-this.stripLeft):NaN},rectInStripForThumbIndex:function(e){if(!(e>=0&&e<this.thumbCount))return null;var t=Sh.objectPool.getAutodisposingInstance();return t.x=this.leftInStripForThumbIndex(e),t.y=0,t.width=this.widthInStripForThumbIndex(e),t.height=this.thumbHeight,t},rectInViewForThumbIndex:function(e){var t=this.rectInStripForThumbIndex(e);return t&&(t.x+=this.stripLeft,t.y+=this.stripTop),t},dpr:V.b(p.a.sharedInstance.bindingFor("devicePixelRatio")),fractionalCenterThumbIndex:V.b({dependencies:["thumbCount","stripLeft","insetCenterX","stripWidth","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","thumbHeight"],get:Object.assign((function(){var e=this.thumbCount,t=this.stripLeft,n=this.insetCenterX-t,i=this.thumbIndexForLeftInStrip(n),r=this.rectInStripForThumbIndex(i);if(!r)return NaN;var a,s,o,l=r.x+r.width/2;if(n===l)return i;if(n>l){if(i+1>=e)return i;var c=this.rectInStripForThumbIndex(i+1);s=l,o=c.x+c.width/2,a=i}else{if(0===i)return i;var u=this.rectInStripForThumbIndex(i-1);s=u.x+u.width/2,o=l,a=i-1}return a+(n-s)/(o-s)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n])-a,o=this.thumbIndexForLeftInStrip(s),l=this.rectInStripForThumbIndex(o);if(!l)return NaN;var c,u,d,h=l.x+l.width/2;if(s===h)return o;if(s>h){if(o+1>=r)return o;var p=this.rectInStripForThumbIndex(o+1);u=h,d=p.x+p.width/2,c=o}else{if(0===o)return o;var f=this.rectInStripForThumbIndex(o-1);u=f.x+f.width/2,d=h,c=o-1}return c+(s-u)/(d-u)}}),writeDependencies:["stripLeft"],set:Object.assign((function(e){if(!isNaN(e)&&this.thumbCount){e=Math.max(0,Math.min(this.thumbCount-1,e));var t=Math.floor(e),n=Math.ceil(e),i=this.rectInStripForThumbIndex(t),r=i.x+i.width/2;if(n!==t){var a=e-t;r=(1-a)*r+ +a*((i=this.rectInStripForThumbIndex(n)).x+i.width/2)}r=Math.round(r),this.scrollIsIntended++,this.stripLeft=this.insetCenterX-r,this.scrollIsIntended--}}),{__CW__setter:function(e,t,n,i,r){if(!isNaN(e)&&this.thumbCount){e=Math.max(0,Math.min(this.thumbCount-1,e));var a=Math.floor(e),s=Math.ceil(e),o=this.rectInStripForThumbIndex(a),l=o.x+o.width/2;if(s!==a){var c=e-a;l=(1-c)*l+ +c*((o=this.rectInStripForThumbIndex(s)).x+o.width/2)}l=Math.round(l),this.scrollIsIntended++,n[0+i]=this.insetCenterX-l,this.scrollIsIntended--}}}),writeDependencySetPathMap:[!1]}),stripLeft:V.b({dependencies:["insetCenterX","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex","scrollX","dpr"],get:Object.assign((function(){if(!this.insetCenterX)return NaN;var e=this.insetCenterX-this.centerInStripForThumbIndex(0)-this.scrollX,t=this.dpr;return Math.round(e*t)/t}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return NaN;var r=i.internalGet(this,t[0+n])-this.centerInStripForThumbIndex(0)-this.scrollX,a=i.internalGet(this,t[5+n]);return Math.round(r*a)/a}}),writeDependencies:["scrollX"],set:Object.assign((function(e){if(this.insetCenterX){var t=this.insetCenterX-this.centerInStripForThumbIndex(0)-e,n=this.dpr;this.scrollIsIntended++,this.scrollX=Math.round(t*n)/n,this.scrollIsIntended--}}),{__CW__setter:function(e,t,n,i,r){if(this.insetCenterX){var a=this.insetCenterX-this.centerInStripForThumbIndex(0)-e,s=this.dpr;this.scrollIsIntended++,n[0+i]=Math.round(a*s)/s,this.scrollIsIntended--}}}),writeDependencySetPathMap:[!1]}),stripTop:V.b(Oi.c("insetTop")),stripWidth:V.b({readOnly:!0,dependencies:["thumbCount","thumbExpansions","thumbWidth","thumbExpansionsByMediaIndex"],get:Object.assign((function(){var e=this.thumbCount-1;return this.leftInStripForThumbIndex(e)+this.widthInStripForThumbIndex(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])-1;return this.leftInStripForThumbIndex(r)+this.widthInStripForThumbIndex(r)}})}),stripHeight:V.b(Oi.c("thumbHeight")),overdrawDistance:V.b({readOnly:!0,dependencies:[],get:function(){return 0}}),firstVisibleStripPixel:V.b({readOnly:!0,dependencies:["stripLeft","overdrawDistance"],get:Object.assign((function(){return Math.max(0,-this.stripLeft-this.overdrawDistance)}),{__CW__getter:function(e,t,n,i){return Math.max(0,-i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))}})}),lastVisibleStripPixel:V.b({readOnly:!0,dependencies:["stripWidth","firstVisibleStripPixel","viewportWidth","overdrawDistance"],get:Object.assign((function(){return-1+Math.min(this.stripWidth,this.firstVisibleStripPixel+this.viewportWidth+2*this.overdrawDistance)}),{__CW__getter:function(e,t,n,i){return-1+Math.min(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+2*i.internalGet(this,t[3+n]))}})}),firstVisibleThumbIndex:V.b({readOnly:!0,dependencies:["stripWidth","thumbExpansions","thumbWidth","thumbCount","firstVisibleStripPixel"],get:Object.assign((function(){return this.thumbIndexForLeftInStrip(this.firstVisibleStripPixel)}),{__CW__getter:function(e,t,n,i){return this.thumbIndexForLeftInStrip(i.internalGet(this,t[4+n]))}})}),lastVisibleThumbIndex:V.b({readOnly:!0,dependencies:["stripWidth","thumbExpansions","thumbWidth","thumbCount","lastVisibleStripPixel"],get:Object.assign((function(){return this.thumbIndexForLeftInStrip(this.lastVisibleStripPixel)}),{__CW__getter:function(e,t,n,i){return this.thumbIndexForLeftInStrip(i.internalGet(this,t[4+n]))}})}),thumbPreparationPad:V.b({readOnly:!0,dependencies:["thumbWidth","viewportWidth"],get:Object.assign((function(){return Math.max(40,Math.min(100,this.viewportWidth/this.thumbWidth|0))}),{__CW__getter:function(e,t,n,i){return Math.max(40,Math.min(100,i.internalGet(this,t[1+n])/i.internalGet(this,t[0+n])|0))}})}),firstPreparedThumbIndex:V.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","thumbPreparationPad"],get:Object.assign((function(){return Math.max(0,this.firstVisibleThumbIndex-this.thumbPreparationPad)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))}})}),lastPreparedThumbIndex:V.b({readOnly:!0,dependencies:["lastVisibleThumbIndex","thumbCount","thumbPreparationPad"],get:Object.assign((function(){return Math.min(this.thumbCount-1,this.lastVisibleThumbIndex+this.thumbPreparationPad)}),{__CW__getter:function(e,t,n,i){return Math.min(i.internalGet(this,t[1+n])-1,i.internalGet(this,t[0+n])+i.internalGet(this,t[2+n]))}})}),firstGuaranteedIndexInThumbRenderers:V.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign((function(){return this.firstVisibleThumbIndex-this.firstPreparedThumbIndex}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),lastGuaranteedIndexInThumbRenderers:V.b({readOnly:!0,dependencies:["lastVisibleThumbIndex","firstPreparedThumbIndex"],get:Object.assign((function(){return this.lastVisibleThumbIndex-this.firstPreparedThumbIndex}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])}})}),appendedSubstripPool:V.b({strong:!0,defaultValue:k.c(Sh.Pool.extend({createInstance:function(){var e=Sh.canvasPool.getInstance();yl.c(e).set("position","absolute");var t=document.createElement("div");return t.appendChild(e),yl.c(t).set("position","absolute").set("overflow","hidden"),t._canvas=e,t.context=e.getContext("2d"),t._deallocBuffer=function(){t.setBackingSize(0,0,1)},t._deallocBufferSoon=function(){t._abortBufferDealloc(),t._bufferDeallocTimeout=X.a(t._deallocBuffer,1e3)},t._abortBufferDealloc=function(){return!!t._bufferDeallocTimeout&&(clearTimeout(t._bufferDeallocTimeout),t._bufferDeallocTimeout=null,!0)},t._retainCount=0,t.retain=function(){t._retainCount++},t.release=function(){--t._retainCount||this.disposeInstance(t)}.bind(this),t.setBackingSize=function(n,i,r){if(n!==this._backingWidth||i!==this._backingHeight||r!==this._backingDPR){this._isBufferClearSinceLastResize=!0,this._backingWidth=n,this._backingHeight=i,this._backingDPR=r;var a=e.width=Math.ceil(n*r),s=e.height=Math.ceil(i*r);1!==r&&t.context.scale(a/n,s/i),yl.c(e).set("width",n).set("height",i),yl.c(t).set("width",n).set("height",i)}else this._isBufferClearSinceLastResize&&(this._isBufferClearSinceLastResize=!1)},t.setPosition=function(e,t){this._effectiveLeft=e,this._effectiveTop=t},t.setSize=function(n,i){var r=this._backingWidth-n,a=this._backingHeight-i;yl.c(e).translateDevicePixels(r,a),yl.c(t).translateDevicePixels(t._effectiveLeft-r,t._effectiveTop-a)},this.owner.element.appendChild(t),t},getInstance:function(){var e=this,t=arguments,n=e.__s._$A9s$getInstance.apply(e,t);return n._abortBufferDealloc()&&(n._backingWidth&&n._backingHeight&&n.context.clearRect(0,0,n._backingWidth,n._backingHeight),n._isBufferClearSinceLastResize=!0),n},disposeInstance:function(e){var t=this,n=arguments;e._willDispose&&(e._willDispose(),delete e._willDispose),e._deallocBufferSoon(),yl.c(e).translate(-1e4,-1e4).layerBack(),t.__s._$ASt$disposeInstance.apply(t,n)},dispose:function(){for(var e=this,t=arguments;this.pooledInstanceCount;){var n=this.getInstance();n._canvas.style.cssText="",Sh.canvasPool.disposeInstance(n._canvas),delete n._canvas,delete n.context,delete n._deallocBuffer,delete n._deallocBufferSoon,delete n._bufferDeallocTimeout,delete n._abortBufferDealloc,delete n.retain,delete n._retainCount,delete n.release,delete n.setBackingSize,delete n._isBufferClearSinceLastResize,delete n._backingWidth,delete n._backingHeight,delete n._backingDPR,delete n.setPosition,delete n._effectiveLeft,delete n._effectiveTop,delete n.setSize}e.__s._$Apr$dispose.apply(e,t)},__superMap:{_$A9s$getInstance:"getInstance",_$ASt$disposeInstance:"disposeInstance",_$Apr$dispose:"dispose"}}))}),isShowingSomePortionOfStrip:V.b({readOnly:!0,dependencies:["firstPreparedThumbIndex","lastPreparedThumbIndex"],get:Object.assign((function(){return this.lastPreparedThumbIndex-this.firstPreparedThumbIndex>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])-i.internalGet(this,t[0+n])>0}})}),thumbRenderers:V.b({readOnly:!0,dependencies:["firstVisibleThumbIndex","firstPreparedThumbIndex","lastVisibleThumbIndex","lastPreparedThumbIndex","firstGuaranteedIndexInThumbRenderers","lastGuaranteedIndexInThumbRenderers"],get:Object.assign((function(){var e=this.thumbRendererClass,t=this._thumbRenderers_lastRet,n=this.firstPreparedThumbIndex,i=this._thumbRenderers_lastFirstIndex,r=this.lastPreparedThumbIndex,a=this._thumbRenderers_lastLastIndex,s=this.firstVisibleThumbIndex,o=this._thumbRenderers_lastFirstVisibleIndex,l=this.lastVisibleThumbIndex,c=this._thumbRenderers_lastLastVisibleIndex,u=this.centermostThumbIndex;if(Object.is(n,i)&&Object.is(r,a)&&Object.is(s,o)&&Object.is(l,c))return t;var d=Sh.arrayPool.getInstance();if(this._thumbRenderers_lastRet=d,this._thumbRenderers_lastFirstIndex=n,this._thumbRenderers_lastLastIndex=r,this._thumbRenderers_lastFirstVisibleIndex=o,this._thumbRenderers_lastLastVisibleIndex=c,!t||isNaN(i)||isNaN(a)||isNaN(n)||isNaN(r)){for(var h=0,p=t&&t.length;h<p;h++){var f=t[h];f&&f.release(this,"in thumbRenderers")}for(var g=s;g<=l;g++)d[g-n]=e.create(this,g,s,l,u).retain(this,"in thumbRenderers")}else{for(var m=i,_=Math.min(n-1,a);m<=_;m++){var v=t[m-i];v&&v.release(this,"in thumbRenderers")}for(var b=n,y=Math.min(i-1,r);b<=y;b++)b>=s&&b<=l&&(d[b-n]=e.create(this,b,s,l,u).retain(this,"in thumbRenderers"));for(var w=Math.max(n,i),I=Math.min(r,a);w<=I;w++){var S=t[w-i];!S&&w>=s&&w<=l&&(S=e.create(this,w,s,l,u).retain(this,"in thumbRenderers")),d[w-n]=S,S&&S.detectDerivativeOffscreeninessAndPriority(this,w,s,l,u)}for(var C=Math.max(a+1,n);C<=r;C++)C>=s&&C<=l&&(d[C-n]=e.create(this,C,s,l,u).retain(this,"in thumbRenderers"));for(var E=Math.max(r+1,i);E<=a;E++){var A=t[E-i];A&&A.release(this,"in thumbRenderers")}}return t&&Sh.arrayPool.disposeInstance(t),this._schedulePassiveThumbRendererMaintenance(),d}),{__CW__getter:function(e,t,n,i){var r=this.thumbRendererClass,a=this._thumbRenderers_lastRet,s=i.internalGet(this,t[1+n]),o=this._thumbRenderers_lastFirstIndex,l=i.internalGet(this,t[3+n]),c=this._thumbRenderers_lastLastIndex,u=i.internalGet(this,t[0+n]),d=this._thumbRenderers_lastFirstVisibleIndex,h=i.internalGet(this,t[2+n]),p=this._thumbRenderers_lastLastVisibleIndex,f=this.centermostThumbIndex;if(Object.is(s,o)&&Object.is(l,c)&&Object.is(u,d)&&Object.is(h,p))return a;var g=Sh.arrayPool.getInstance();if(this._thumbRenderers_lastRet=g,this._thumbRenderers_lastFirstIndex=s,this._thumbRenderers_lastLastIndex=l,this._thumbRenderers_lastFirstVisibleIndex=d,this._thumbRenderers_lastLastVisibleIndex=p,!a||isNaN(o)||isNaN(c)||isNaN(s)||isNaN(l)){for(var m=0,_=a&&a.length;m<_;m++){var v=a[m];v&&v.release(this,"in thumbRenderers")}for(var b=u;b<=h;b++)g[b-s]=r.create(this,b,u,h,f).retain(this,"in thumbRenderers")}else{for(var y=o,w=Math.min(s-1,c);y<=w;y++){var I=a[y-o];I&&I.release(this,"in thumbRenderers")}for(var S=s,C=Math.min(o-1,l);S<=C;S++)S>=u&&S<=h&&(g[S-s]=r.create(this,S,u,h,f).retain(this,"in thumbRenderers"));for(var E=Math.max(s,o),A=Math.min(l,c);E<=A;E++){var O=a[E-o];!O&&E>=u&&E<=h&&(O=r.create(this,E,u,h,f).retain(this,"in thumbRenderers")),g[E-s]=O,O&&O.detectDerivativeOffscreeninessAndPriority(this,E,u,h,f)}for(var T=Math.max(c+1,s);T<=l;T++)T>=u&&T<=h&&(g[T-s]=r.create(this,T,u,h,f).retain(this,"in thumbRenderers"));for(var M=Math.max(l+1,o);M<=c;M++){var D=a[M-o];D&&D.release(this,"in thumbRenderers")}}return a&&Sh.arrayPool.disposeInstance(a),this._schedulePassiveThumbRendererMaintenance(),g}})}),_schedulePassiveThumbRendererMaintenance:function(){this._passiveThumbRendererMaintenanceTimeout||(this._passiveThumbRendererMaintenanceTimeout=mu.a(this._passivelyAddSomeThumbRenderers))},_passivelyAddSomeThumbRenderers:Bu.b((function(){if(!this.isDisposed){this._passiveThumbRendererMaintenanceTimeout=null;var e=this.thumbRenderers,t=this.thumbRendererClass,n=this.firstPreparedThumbIndex,i=this.lastPreparedThumbIndex,r=this.firstVisibleThumbIndex,a=this.lastVisibleThumbIndex,s=this.centermostThumbIndex,o=performance.now(),l=r-1,c=a+1;do{if(l>=n&&!e[l-n]&&(e[l-n]=t.create(this,l,r,a,s).retain(this,"in thumbRenderers")),c<=i&&!e[c-n]&&(e[c-n]=t.create(this,c,r,a,s).retain(this,"in thumbRenderers")),c++,--l<n&&c>i)break}while(performance.now()-o<.2);(l>n||c<i)&&this._schedulePassiveThumbRendererMaintenance()}})),scrollAnimationTargetIndex:wi.b(0),_scrollToAnimationTarget:B.g("scrollAnimationTargetIndex",(function(e){this.isAnimatingScroll&&!isNaN(e)&&(this.scrollIsIntended++,this.fractionalCenterThumbIndex=e,this.scrollIsIntended--)})),isAnimatingScroll:V.b({readOnly:!0,dependencies:["isAnimating"],get:Object.assign((function(){return this.isAnimating}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),animateScrollToThumbIndex:function(e,t){this.scrollX===this.scrollX?(this.isAnimatingScroll&&!isNaN(this.scrollAnimationTargetIndex)||(this.scrollAnimationTargetIndex=this.fractionalCenterThumbIndex),this.animate("scrollAnimationTargetIndex",e,t)):this.scrollAnimationTargetIndex=e},handleScroll:function(e){var t=this,n=arguments;return e.deltaX=e.deltaX+e.deltaY,t.__s._$F0S$handleScroll.apply(t,n)},_scrollBy:function(){var e=this,t=arguments;this.scrollIsIntended++;var n=e.__s._$FCA$_scrollBy.apply(e,t);return this.scrollIsIntended--,n},scrollIsIntended:0,scrollMotionTracker:V.b({strong:!0,defaultValue:k.c(nE.a,{zeroSpeedCutoff:3,emaHalfLife:1/4})}),didScrollBy:function(e){var t=this,n=arguments;this.scrollMotionTracker.handleDelta(e),t.__s._$FQ7$didScrollBy.apply(t,n)},isMovingSlowEnoughForLoads:V.b(Oi.c("_isMovingSlowEnoughForLoads_ratchet.value")),_isMovingSlowEnoughForLoads_targetValue:V.b({readOnly:!0,dependencies:["scrollMotionTracker.emaSpeed"],get:Object.assign((function(){return!(this.getPath("scrollMotionTracker.emaSpeed")>1e3)}),{__CW__getter:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])>1e3)}})}),_isMovingSlowEnoughForLoads_ratchet:V.b({strong:!0,defaultValue:k.c(WC.a,{defersUpgrades:500}),downstreamBindings:{targetValue:"(owner)._isMovingSlowEnoughForLoads_targetValue"}}),centermostThumbIndex:V.b({readOnly:!0,dependencies:["insetCenterX","stripLeft","stripWidth","thumbExpansions","thumbWidth","thumbCount"],get:Object.assign((function(){return this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft)}),{__CW__getter:function(e,t,n,i){return this.thumbIndexForLeftInStrip(i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))}})}),centermostMediaIndex:V.b(Oi.c("centermostThumbIndex")),centermostMedia:V.b({readOnly:!0,dependencies:["centermostThumbIndex","collection","collection.contentsDidChangeUntracked","collection.everythingChanged"],get:Object.assign((function(){var e=this.collection;return e&&e.objectAt(this.centermostThumbIndex)||null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return r&&r.objectAt(i.internalGet(this,t[0+n]))||null}})}),_rerender:B.h("stripLeft","stripTop","stripWidth","dpr","thumbRenderers",(function(){if(!this._rerender_isRespondingNeedlessly){if(this._rerender_isRespondingNeedlessly=!0,this.scrollIsIntended){var e=this.thumbIndexForLeftInStrip(this.insetCenterX-this.stripLeft),t=this.rectInViewForThumbIndex(e);this._anchorThumbIndex=e,this._anchorThumbOffsetFromCenter=t?Math.round(t.x+t.width/2-this.insetCenterX):NaN}else{var n=this._anchorThumbIndex,i=this.rectInViewForThumbIndex(n),r=(i?Math.round(i.x+i.width/2-this.insetCenterX):NaN)-this._anchorThumbOffsetFromCenter;r&&(this.scrollX+=r)}this.renderStripSoon(),this._rerender_isRespondingNeedlessly=!1}})),renderStrip:function(){var e=this.stripLeft,t=this.stripTop,n=this.stripWidth,i=this.thumbRenderers;if(!isNaN(t+e)&&n&&i&&i.length){for(var r=this.dpr,a=this.substripWidth,s=this.substripHeight,o=this.thumbWidth,l=this.thumbHeight,c=this.thumbsPerGroup,u=this.thumbExpansions||YE,d=this.appendedSubstripPool,h=this.firstGuaranteedIndexInThumbRenderers,p=this.lastGuaranteedIndexInThumbRenderers,f=this.centermostThumbIndex,g=this.firstPreparedThumbIndex,m=this.firstVisibleThumbIndex,_=this.lastVisibleThumbIndex,v=NaN,b=null,y=null,w=0;b=u[w]||null;w++){if(b.mediaIndex>=m){v=w;break}y=b}for(var I=Sh.mapPool.getInstance(),S=Sh.arrayPool.getInstance(),C=0,E=h,A=p;E<=A;E++){var O=i[E],T=O.mediaIndex,M=NaN,D=b&&b.mediaIndex===T;D?(M=T,y=b,b=u[++v]):M=Math.max(Math.floor(T/c)*c,y?y.mediaIndex+1:0);var P=(T-M)*o,L=D?y.drawnWidthInStrip:o,R=this._weakSubstripMap[M];if(R||((R=this._weakSubstripMap[M]=d.getInstance())._willDispose=of.a(qE,void 0,this._weakSubstripMap,M)),!I.get(R)){I.set(R,!0);var x=e+this.leftInStripForThumbIndex(M)+(D?y.sideGapInStrip:0);R.setBackingSize(a,s,r),R.setPosition(x,t),R.style.zIndex=x}S[C-2]!==R&&(S.push(R),C+=2),S[C-1]=P+L,Pe.a.pause(),O.substrip=R,O.leftInSubstrip=P,O.widthInSubstrip=L,O.isRenderDisabled=R._isBufferClearSinceLastResize,O.detectDerivativeOffscreeninessAndPriority(this,T,m,_,f),Pe.a.resume(),O.isRenderDisabled&&(O.isRenderDisabled=!1,O.render())}for(var N=0,F=h-1;N<=F;N++){var V=i[N];V&&(V.substrip&&(V.substrip=null),V.derivativePriority=111e3+Math.abs(f-(N+g)))}for(var k=p+1,B=i.length-1;k<=B;k++){var j=i[k];j&&(j.substrip&&(j.substrip=null),j.derivativePriority=111e3+Math.abs(f-(k+g)))}Sh.mapPool.disposeInstance(I);for(var U=0;U<C;U+=2)S[U].setSize(S[U+1],l);Sh.arrayPool.disposeInstance(S),this._ensureRangeIfPossible()}},_ensureRangeIfPossible:HC.b((function(){if(this.isMovingSlowEnoughForLoads){var e=this.collection;if(e&&e.length){var t=this.firstPreparedThumbIndex,n=this.lastPreparedThumbIndex,i=n-t;t=t-2*i-20,n=n+2*i+20,t=30*Math.floor(t/30),n=30*Math.ceil(n/30),t=Math.max(0,t),(n=Math.min(e.length-1,n))-t&&this.ensureMediaRange(t,n)}}}),500,!0),ensureMediaRange:function(e,t){var n=this.collection;n&&n.ensureRange&&n.canEnsureRange&&n.ensureRange(e,t)},_reattemptEnsureRangeOnceAgainMovingSlowEnoughForLoads:B.h("isMovingSlowEnoughForLoads",(function(e){e&&this._ensureRangeIfPossible()})),updateToThumbExpansionsSoon:function(){this._thumbExpansionsUpdateTimeout||(this._thumbExpansionsUpdateTimeout=iE.b(this._updateToThumbExpansionsNow))},_updateToThumbExpansionsNow:Bu.b((function(){this._thumbExpansionsUpdateTimeout=null,this.propertyChanged("thumbExpansionsByMediaIndex")})),renderStripSoon:function(){this._renderStripTimeout&&iE.a(this._renderStripTimeout),this._renderStripTimeout=iE.b(this._renderStripNow)},_renderStripNow:Bu.b((function(){this._renderStripTimeout=null,this.renderStrip()})),_weakSubstripMap:k.c(Object),_applyInsetsToScrollIndicator:B.h("insetLeft","insetRight",(function(e,t){var n=this.horizontalScrollIndicator;n&&n.style.set("margin-right",t).set("margin-left",e).set("position","absolute")})),__superMap:{_$F0S$handleScroll:"handleScroll",_$FCA$_scrollBy:"_scrollBy",_$FQ7$didScrollBy:"didScrollBy"}}).extend(Fu.a,{_pressedIndex:NaN,pointerDown:function(e){var t=this,n=arguments,i=this.rect;return this._pressedIndex=i?this.thumbIndexForPointInView(e.clientX-i.left,e.clientY-i.top):NaN,t.__s._$LzG$pointerDown.apply(t,n)},pointerHitTest:function(e){if(!this.isAttached)return!1;var t=this.rectInViewForThumbIndex(this._pressedIndex);if(!t)return!1;var n=this.rect,i=e.clientX-n.left,r=e.clientY-n.top;return i>=t.x&&i<t.x+t.width&&r>=t.y&&r<t.y+t.height},pointerUp:function(e){var t=this,n=arguments,i=t.__s._$M98$pointerUp.apply(t,n);return this._pressedIndex=NaN,i},pointerActivate:function(e){isNaN(this._pressedIndex)||this.sendEvent("thumbnailsStripDidSelectMediaIndex",this._pressedIndex)},_repaintPressedThumb:B.h("isBeingPressed",(function(e){if(!isNaN(this._pressedIndex)){var t=this.thumbRenderers[this._pressedIndex-this.firstPreparedThumbIndex];t&&(t.isBeingPressed=e)}})),__superMap:{_$LzG$pointerDown:"pointerDown",_$M98$pointerUp:"pointerUp"}}).extend(UE.a,{retractionAttachment:"bottom",viewportHeight:70,minimumHeight:45,maximumHeight:200,allowsRetractionDuringResize:V.b(!0),_pressedIndex:V.b(NaN),rectInViewForThumbIndex:function(e){var t=this,n=arguments;if(!isNaN(e))return t.__s._$Mep$rectInViewForThumbIndex.apply(t,n);var i=Sh.objectPool.getAutodisposingInstance();return i.x=0,i.y=0,i.width=this.viewportWidth,i.height=this.insetTop,i},_setCursor:B.h("isBeingHovered","_pressedIndex",(function(e,t){this.style.set("cursor",e&&isNaN(t)?"ns-resize":"default")})),pointerDown:function(e){var t=this,n=arguments,i=t.__s._$Mpc$pointerDown.apply(t,n);return this.isBeingPressed&&isNaN(this._pressedIndex)?(this._dragInitialCursorY=e.clientY,this._dragInitialViewportHeight=this.viewportHeight,i):i},pointerMove:function(e){var t=this,n=arguments,i=t.__s._$MuL$pointerMove.apply(t,n);if(!this._dragInitialCursorY)return i;var r=-e.clientY+this._dragInitialCursorY+this._dragInitialViewportHeight;return this.viewportHeight=this.validViewportHeightForHypotheticalViewportHeight(r),this.allowsRetractionDuringResize&&(r<this.minimumHeight/2?this.retract(150):this.unretract(150)),i},pointerUp:function(e){var t=this,n=arguments,i=t.__s._$N79$pointerUp.apply(t,n);return this._dragInitialCursorY=this._dragInitialViewportHeight=void 0,i},validViewportHeightForHypotheticalViewportHeight:function(e){return Math.round(Math.max(45,Math.min(200,e)))},__superMap:{_$Mep$rectInViewForThumbIndex:"rectInViewForThumbIndex",_$Mpc$pointerDown:"pointerDown",_$MuL$pointerMove:"pointerMove",_$N79$pointerUp:"pointerUp"}}).extend({_momentarilySuspendDerivativeCreations:function(){this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):fr.a.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=X.a(this._resumeDerivativeCreations,250)},_resumeDerivativeCreations:Bu.b({disposeGuarded:!1,function:function(){this._resumeDerivativeCreationsTimeout=null,fr.a.resumeDerivativeCreations()}}),renderStrip:function(){var e=this,t=arguments;e.__s._$NPr$renderStrip.apply(e,t),this._momentarilySuspendDerivativeCreations()},__superMap:{_$NPr$renderStrip:"renderStrip"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasicThumbnailsStripView"}}),zE=P.a.extend(B.b,uc.a,wi.a).extend({ownerStripView:V.b(null),mediaIndex:V.b(NaN),expansionAmount:wi.b(0),media:V.b({readOnly:!0,dependencies:["mediaIndex","ownerStripView.collection","ownerStripView.collection.contentsDidChangeUntracked","ownerStripView.collection.everythingChanged"],get:Object.assign((function(){var e=this.mediaIndex,t=this.getPath("ownerStripView.collection");return isNaN(e)||!t?null:t.objectAt(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return isNaN(r)||!a?null:a.objectAt(r)}})}),mediaAspectRatio:V.b({readOnly:!0,dependencies:["media.aspectRatio"],get:Object.assign((function(){return this.getPath("media.aspectRatio")||1}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||1}})}),drawnWidthInStrip:V.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.thumbWidth","mediaAspectRatio","ownerStripView.thumbHeight","ownerStripView.dpr","ownerStripView.substripWidth"],get:Object.assign((function(){var e=Math.min(this.getPath("ownerStripView.substripWidth"),this.mediaAspectRatio*this.getPath("ownerStripView.thumbHeight")),t=this.expansionAmount,n=(1-t)*this.getPath("ownerStripView.thumbWidth")+t*e,i=this.getPath("ownerStripView.dpr");return Math.round(n*i/2)/i*2}),{__CW__getter:function(e,t,n,i){var r=Math.min(i.internalGetPath(this,t[5+n]),i.internalGet(this,t[2+n])*i.internalGetPath(this,t[3+n])),a=i.internalGet(this,t[0+n]),s=(1-a)*i.internalGetPath(this,t[1+n])+a*r,o=i.internalGetPath(this,t[4+n]);return Math.round(s*o/2)/o*2}}),writeDependencies:[]}),widthInStrip:V.b({readOnly:!0,dependencies:["drawnWidthInStrip","sideGapInStrip"],get:Object.assign((function(){return this.drawnWidthInStrip+2*this.sideGapInStrip}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+2*i.internalGet(this,t[1+n])}})}),sideGapInStrip:V.b({readOnly:!0,dependencies:["expansionAmount","ownerStripView.insetTop","ownerStripView.dpr"],get:Object.assign((function(){var e=Math.round(this.expansionAmount*this.getPath("ownerStripView.insetTop")),t=this.getPath("ownerStripView.dpr");return Math.round(e*t)/t}),{__CW__getter:function(e,t,n,i){var r=Math.round(i.internalGet(this,t[0+n])*i.internalGetPath(this,t[1+n])),a=i.internalGetPath(this,t[2+n]);return Math.round(r*a)/a}}),writeDependencies:[]}),_notifyOwnerOfChanges:B.h({inputs:["mediaAspectRatio","expansionAmount","mediaIndex"],callback:function(e,t,n){var i=this.ownerStripView;if(i){if(this._nOOC_last_mediaIndex!==n){var r=i.thumbExpansionsByMediaIndex;delete r[this._nOOC_last_mediaIndex],r[n]=this,this._nOOC_last_mediaIndex=n}i.updateToThumbExpansionsSoon()}}}),_retainSelfWhileNeeded:B.h("expansionAmount","isAnimating",(function(e,t){var n=Boolean(e||t);!this._rswn_hasRetain&&n&&this.retain(this,"expansion self-retain"),this._rswn_hasRetain&&!n&&this.autorelease(this,"expansion self-retain"),this._rswn_hasRetain=n})),initFromPool:function(e,t,n){this.__s._$Ozl$initFromPool.call(this),this.retain(this,"initial self-retain"),this.autorelease(this,"initial self-retain"),Pe.a.pause(),this.ownerStripView=e,this.mediaIndex=t,this.expansionAmount=n,Pe.a.resume()},cleanup:function(){var e=this,t=arguments;this._nOOC_last_mediaIndex=NaN;var n=this.ownerStripView;n&&(delete n.thumbExpansionsByMediaIndex[this.mediaIndex],n.updateToThumbExpansionsSoon()),Pe.a.pause(),this.ownerStripView=null,this.mediaIndex=NaN,this.expansionAmount=0,Pe.a.resume(),e.__s._$PH2$cleanup.apply(e,t)},__superMap:{_$Ozl$initFromPool:"initFromPool",_$PH2$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbExpansion"}});function KE(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function qE(e,t){delete e[t]}function QE(e,t){return e-t}var YE=[],ZE=$E.extend({BASE_DURATION:250,expandsTargetedThumbs:!0,targetMediaIndex:V.b(),_unRenderOnceUnattached:B.h("isAttached",(function(e){e||(this.scrollX=NaN,this.unexpandAllThumbs())})),_selectMediaDuringScroll:B.h("centermostMediaIndex",(function(e){this.scrollIsIntended&&!this.isAnimatingScroll&&(this.unexpandAllThumbs(this.BASE_DURATION),e>=0&&(this.sendEvent("thumbnailsStripDidSelectMediaIndex",e),this._rescheduleDSBSBUD()))})),_postponeDSBSBUDWhileScrolling:B.h("scrollX",(function(){this.scrollIsIntended&&this._rescheduleDSBSBUD()})),_rescheduleDSBSBUD:function(){clearTimeout(this._dsbsbud_timeout),this._dsbsbud_timeout=X.a(this._didStopBeingScrolledByUserDirectly,this.BASE_DURATION)},_didStopBeingScrolledByUserDirectly:Bu.b((function(){clearTimeout(this._dsbsbud_timeout),this.expandsTargetedThumbs&&(this.unexpandAllThumbs(this.BASE_DURATION,this.centermostThumbIndex),this.expandThumb(this.centermostThumbIndex,1,this.BASE_DURATION))})),dispose:function(){var e=this,t=arguments;clearTimeout(this._dsbsbud_timeout),e.__s._$Zt$dispose.apply(e,t)},attachedWithTargetMediaIndex:V.b({readOnly:!0,dependencies:["isAttached","targetMediaIndex"],get:Object.assign((function(){if(this.isAttached)return this.targetMediaIndex}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return i.internalGet(this,t[1+n])}})}),_scrollSelfToTargetMedia:B.h({inputs:["attachedWithTargetMediaIndex","insetWidth","collection","collection.contentsDidChange","collection.everythingChanged"],callback:function(e,t,n,i){if(e>=0&&t){var r=this._ssttm_lastScrollX!==(this._ssttm_lastScrollX=this.scrollX),a=this._ssttm_lastCollectionGuid!==(this._ssttm_lastCollectionGuid=Yl.b(n)+":"+(n?n.length:null))||Boolean(i),s=n&&n.objectAt(e)||null,o=s&&s.pk||null,l=this._ssttm_lastTargetMediaPK!==(this._ssttm_lastTargetMediaPK=o);n&&(this.scrollIsIntended||-1!==e&&(a||!l||!r||isNaN(this.scrollX)?(this.scrollIsIntended++,this.fractionalCenterThumbIndex=e,this.scrollIsIntended--,this.expandsTargetedThumbs&&(this.unexpandAllThumbs(0,e),this.expandThumb(e,1,0))):(this.animateScrollToThumbIndex(e,this.BASE_DURATION),this.expandsTargetedThumbs&&(this.unexpandAllThumbs(this.BASE_DURATION,e),this.expandThumb(e,1,this.BASE_DURATION)))))}}}),__superMap:{_$Zt$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TargetAwareThumbnailsStripView"}}),XE=Ho.a.extend({staticMembers:{className:"p2-next-prev-button",__QUALIFIED_CLASS_NAME__:"NextPrevButton"},isEnabled:V.b(),isDisabled:V.b({readOnly:!0,dependencies:["isEnabled"],get:Object.assign((function(){return!this.isEnabled}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_assignRepetitionAction:B.h("isBeingPressed","parent",(function(e,t){t&&(t.repetitionAction=e?this.action:"")})),_applyPointerEvents:B.h("parent.shouldUIBeClear",(function(e){this.style.set("pointer-events",e?"none":void 0)}))}),JE=RE.extend(Fu.a,kC.a).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"detailsVCView"},{type:"VIEWOUTLET",tagname:"view",name:"nextButton"},{type:"VIEWOUTLET",tagname:"view",name:"prevButton"},{type:"VIEWOUTLET",tagname:"view",name:"thumbnailsStripView"},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["p2-main-oneup-view"]}},__QUALIFIED_CLASS_NAME__:"UserNavigatableOneUpView"},isInSpinnerMode:V.b(),isFocusable:!0,shouldEnsureOwnMediaRanges:V.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign((function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),isPreloadEnabled:V.b({readOnly:!0,dependencies:["thumbnailsStripView.isShowingSomePortionOfStrip"],get:Object.assign((function(){return!this.getPath("thumbnailsStripView.isShowingSomePortionOfStrip")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),_gated_primaryMedia:BC.b({strong:!0,changesProactivelyButSparsely:!0,source:"primaryMedia",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_primaryMedia=e}}),gated_primaryMedia:V.b(),_gated_canZoom:BC.b({changesProactivelyButSparsely:!0,source:"canZoom",gate:"canUpdateGatedProperties",didChange:function(e){this.gated_canZoom=e}}),gated_canZoom:V.b(),canUpdateGatedProperties:V.b({readOnly:!0,dependencies:["thumbnailsStripView.scrollMotionTracker.isStationary","isSteady"],get:Object.assign((function(){return this.isSteady&&this.getPath("thumbnailsStripView.scrollMotionTracker.isStationary")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&i.internalGetPath(this,t[0+n])}})}),nextButton:V.b({strong:!0,defaultValue:k.c(XE.extend({additionalClassNames:["p2-next-button"],isEnabled:Oi.c("parent.canGoToNext"),action:"goToNext"}))}),prevButton:V.b({strong:!0,defaultValue:k.c(XE.extend({additionalClassNames:["p2-previous-button"],isEnabled:Oi.c("parent.canGoToPrevious"),action:"goToPrevious"}))}),repetitionAction:V.b(""),actionRepetitionTimer:V.b({strong:!0,defaultValue:k.c(Pd.a.extend({delays:[350,250,220,200,180,165,150,138,126,114,102,90,80,72,64],action:Oi.c("owner.repetitionAction"),_startOrStopWhenNecessary:B.h("action","owner.isAttached",(function(e,t){var n=this.isRunning,i=t&&e;n&&!i?this.stop():!n&&i?this.start():n&&i&&this.restart()}))}))}),_spinnerView:V.b({strong:!0,defaultValue:k.c(Jc.a.extend({owner:V.b(),color:"rgba(255, 255, 255, 1.0)",size:48,_updateLayout:B.h("owner.insetCenterX","owner.insetCenterY",(function(e,t){var n=this.size;this.style.translateDevicePixels(e-n/2,t-n/2).set("position","absolute")}))}))}),spinnerView:V.b({strong:!0,readOnly:!0,dependencies:["_spinnerView","isInSpinnerMode"],get:Object.assign((function(){return this.isInSpinnerMode?this._spinnerView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[0+n]):null}})}),thumbnailsStripView:V.b({strong:!0,defaultValue:k.c(ZE.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.baseInsetsProvider.insetBottom",attributes:{},unit:"px",property:"bottom"}}}}},targetMediaIndex:Oi.c("parent.targetMediaIndex"),collection:Oi.c("parent.collection"),viewportWidth:Oi.c("parent.viewportWidth"),viewportHeight:V.b(hi.sharedInstance.bindingFor("thumbnailStripHeight")),contentHeight:V.b({readOnly:!0,dependencies:["viewportHeight"],get:Object.assign((function(){var e=this.viewportHeight;return Math.round(e-4-.16*e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Math.round(r-4-.16*r)}})}),ensureMediaRange:function(e,t){return this.owner.ensureMediaRange(e,t)},_maintainHorizontalInsets:B.h("owner.insetLeft","owner.insetRight",(function(e,t){Pe.a.pause(),this.registerInsetLeft("ownerOneUp",e),this.registerInsetRight("ownerOneUp",t),Pe.a.resume()}))}))}),_adjustSelfForThumbnailsStripInset:B.h("thumbnailsStripView.retractedHeight",(function(e){this.registerInsetBottom(this.thumbnailsStripView,e)})),thumbnailsStripDidSelectMedia:function(e){this.targetMedia=e,this.sendEvent("oneUpViewDidNavigateInternally")},thumbnailsStripDidSelectMediaIndex:function(e){this.targetMediaIndex=e,this.sendEvent("oneUpViewDidNavigateInternally")},_layOutButtons:B.h("insetLeft","insetTop","insetWidth","insetHeight","isAttached",(function(e,t,n,i,r){if(r&&this.nextButton&&this.prevButton){var a=this._buttonSize||(this._buttonSize=this.nextButton.element.offsetWidth);this._nextButtonCenterX=e+n-50-a/2,this._prevButtonCenterX=e+50+a/2,this._nextButtonCenterY=this._prevButtonCenterY=t+i/2,this.nextButton.style.set("left",this._nextButtonCenterX-a/2).set("top",this._nextButtonCenterY-a/2),this.prevButton.style.set("left",this._prevButtonCenterX-a/2).set("top",this._prevButtonCenterY-a/2)}})),_fadeButtons:B.h("mouseX","mouseY","isBeingHovered","insetLeft","insetWidth","insetTop","insetHeight","nextButton.isDisabled","nextButton.isBeingHovered","prevButton.isDisabled","prevButton.isBeingHovered","shouldUIBeClear",(function(e,t,n,i,r,a,s,o,l,c,u,d){if(this.nextButton&&this.prevButton){var h=t>a+35&&t<a+s-35;this.nextButton.style.set("opacity",(n||l)&&!o&&!d&&h&&e>i+r-130?1:0),this.prevButton.style.set("opacity",(n||u)&&!c&&!d&&h&&e<i+130?1:0)}})),pointerActivate:function(e){if(e.targetView!==this.nextButton&&e.targetView!==this.prevButton&&UC(e)){var t=Gd.a(e,"targetView.videoPlayer.el");if(t&&t.contains(e.target))return;this.sendEvent("navigateUp")}}});function eA(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var tA=fi.a.extend(tc.a,Jl,VC,Nf,TC,NC,FC).extend({collection:V.b({strong:!0}),container:V.b(Oi.c("collection.container")),media:V.b({strong:!0}),selectionDelegate:V.b({strong:!0}),isDeleteRemoveActionInProgress:V.b(),surrogateOneUpNavigee:V.b({dependencies:["view"],get:Object.assign((function(e){return e||this.view}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:Tl.a}),useSurrogateOneUpNavigee:function(e){this.surrogateOneUpNavigee=e},parentRoute:V.b({readOnly:!0,dependencies:["collection"],get:function(){var e=this.getPath("collection.container");return e?{routeName:"container",options:{container:e}}:null}}),_didNavigateInternally:!1,didDetach:function(){var e=this,t=arguments;e.__s._$qy$didDetach.apply(e,t),this._didNavigateInternally=!1},oneUpViewDidNavigateInternally:function(){this._didNavigateInternally=!0,this.focus()},toolbarConfiguration:V.b({downstreamBindings:{container:"(owner).container"},defaultValue:k.c(hu.extend({owner:V.b(),container:V.b(),leftItems:V.b({readOnly:!0,dependencies:["owner.surrogateOneUpNavigee.gated_canZoom"],get:Object.assign((function(){return this.getPath("owner.surrogateOneUpNavigee.gated_canZoom")?["zoomSlider","thumbstripButton"]:["thumbstripButton"]}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?["zoomSlider","thumbstripButton"]:["thumbstripButton"]}})}),middleItem:"mediaInfo",rightItems:["favoriteButton","addToAlbumButton","shareButton","downloadButton","deleteButton"],zoomSlider:V.b({defaultValue:k.c(mp.extend({owner:V.b(),isDisabled:Oi.c("owner.owner.surrogateOneUpNavigee.cannotZoom"),value:Oi.c("owner.owner.surrogateOneUpNavigee.zoomLevel"),unzoomedZoomLevel:Oi.c("owner.owner.surrogateOneUpNavigee.unzoomedZoomLevel"),minValue:Oi.c("owner.owner.surrogateOneUpNavigee.minZoomLevel"),maxValue:Oi.c("owner.owner.surrogateOneUpNavigee.maxZoomLevel"),zoomSteps:V.b(Oi.c("owner.owner.surrogateOneUpNavigee.zoomSteps")),notchValues:V.b({readOnly:!0,dependencies:["zoomSteps","unzoomedZoomLevel"],get:Object.assign((function(){var e=this._notchValues_lastRet;e&&(this._notchValues_lastRet=null,Sh.arrayPool.disposeInstance(e));var t=this.zoomSteps,n=this.unzoomedZoomLevel;if(!t||!n)return null;for(var i=Sh.arrayPool.getInstance(),r=Math.log(2),a=1,s=t.length-1;a<s;a++){var o=t[a],l=Math.log(o)/r;l!==(0|l)&&o!==n||i.push(o)}return this._notchValues_lastRet=i}),{__CW__getter:function(e,t,n,i){var r=this._notchValues_lastRet;r&&(this._notchValues_lastRet=null,Sh.arrayPool.disposeInstance(r));var a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]);if(!a||!s)return null;for(var o=Sh.arrayPool.getInstance(),l=Math.log(2),c=1,u=a.length-1;c<u;c++){var d=a[c],h=Math.log(d)/l;h!==(0|h)&&d!==s||o.push(d)}return this._notchValues_lastRet=o}})}),handlePositionTween:V.b({defaultValue:function(){return function(e){return Math.pow(2,Math.pow(e+.3,2))}}})}))}),media:V.b(Oi.c("owner.surrogateOneUpNavigee.gated_primaryMedia")),collection:V.b(Oi.c("owner.surrogateOneUpNavigee.collection")),isDeleteRemoveActionInProgress:V.b(Oi.c("owner.isDeleteRemoveActionInProgress")),mediaInfo:V.b({defaultValue:k.c(zh),downstreamBindings:{media:"(owner).media",collection:"(owner).collection"}}),favoriteButton:V.b({defaultValue:k.c(ou.extend(su,{isDisabled:V.b({readOnly:!0,dependencies:["media",G.a.bindingFor("application.isCreateAllowed")],get:Object.assign((function(){return!this.media||!G.a.application.isCreateAllowed}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||!i.internalGetPath(this,t[1+n])}})}),isOn:V.b(Oi.c("media.isFavorite")),tooltip:s.d("Toolbar.Button.Tooltip.Favorite"),action:"favoriteToggle"})),downstreamBindings:{media:"(owner).media"}}),shareButton:V.b({defaultValue:F.b({action:"shareMedia"}),downstreamBindings:{media:"(owner).media"}}),downloadButton:V.b({downstreamBindings:{media:"(owner).media",container:"(owner).container",collection:"(owner).collection"}}),deleteButton:V.b({defaultValue:F.b({isDeleteRemoveActionInProgress:V.b(),container:V.b(),isDisabled:V.b({type:Boolean,readOnly:!0,dependencies:["media","isDeleteRemoveActionInProgress",G.a.bindingFor("application.isDeleteAllowed")],get:Object.assign((function(){return!this.media||this.isDeleteRemoveActionInProgress||!G.a.application.isDeleteAllowed}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||!i.internalGetPath(this,t[2+n])}})}),tooltip:V.b({readOnly:!0,dependencies:["container",nu.a.get("sharedInstance").bindingFor("activeKeys")],get:Object.assign((function(){var e=this.container;if(!e)return"";var t=nu.a.sharedInstance.activeKeys,n=s.d("Toolbar.Button.Tooltip.Delete"),i=s.d("Toolbar.Button.Tooltip.Remove");if(!e.isNormalAlbum)return n;var r=p.a.sharedInstance.isWindows?ml.a.CTRL:ml.a.OPTION;return t.contains(r)?n:i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return"";var a=nu.a.sharedInstance.activeKeys,o=s.d("Toolbar.Button.Tooltip.Delete"),l=s.d("Toolbar.Button.Tooltip.Remove");if(!r.isNormalAlbum)return o;var c=p.a.sharedInstance.isWindows?ml.a.CTRL:ml.a.OPTION;return a.contains(c)?o:l}})})}),downstreamBindings:{container:"(owner).container",media:"(owner).media",isDeleteRemoveActionInProgress:"(owner).isDeleteRemoveActionInProgress"}}),addToAlbumButton:V.b({defaultValue:F.b({action:"addMediaToAlbum"}),downstreamBindings:{media:"(owner).media"}})}))}),selection:V.b({readOnly:!0,dependencies:["view.gated_primaryMedia"],get:Object.assign((function(){var e=this.getPath("view.gated_primaryMedia"),t=this._internalReusableSetToAvoidAllocatingANewOneEveryTime;return t.clear(),e&&t.add(e),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=this._internalReusableSetToAvoidAllocatingANewOneEveryTime;return a.clear(),r&&a.add(r),a}})}),_internalReusableSetToAvoidAllocatingANewOneEveryTime:k.c(oi.a),sparseSelection:V.b({readOnly:!0,dependencies:["selection","collection"],get:Object.assign((function(){return Up.fromFullyLoadedSelection(this.selection,this.collection)}),{__CW__getter:function(e,t,n,i){return Up.fromFullyLoadedSelection(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),detailsVC:Ci.a.define("detailsVCView"),viewClass:JE.extend(Pl.a,eu).extend({isDeleteRemoveActionInProgress:V.b(),userWantsThumbnailStrip:V.b(hi.sharedInstance.bindingFor("userWantsThumbnailStrip")),_toggleThumbnailStrip:B.h("userWantsThumbnailStrip","shouldAllUIBeClear",(function(e,t){var n=e&&!t,i=this.thumbnailsStripView;n?i.unretract():i.retract()})),showSpinnerViewAsNeeded:B.h("targetMedia","isDeleteRemoveActionInProgress",(function(e,t){this.isInSpinnerMode=!(!e||!t)}))}),toggleThumbnailsStrip:function(){this.view&&(this.view.userWantsThumbnailStrip=!this.view.userWantsThumbnailStrip)},view:V.b({downstreamBindings:{collection:"(owner).collection",targetMedia:"(owner).media",isDeleteRemoveActionInProgress:"(owner).isDeleteRemoveActionInProgress",baseInsetsProvider:"(owner)",feedbackService:"(owner).feedbackService"}}),isFocusable:V.b(!0),autoFocusOnAttach:B.h("isAttached",(function(e){e&&this.focus()})),keyDown:function(e){var t=this.surrogateOneUpNavigee,n="";switch(e.keyCode){case ml.a.UP:case ml.a.LEFT:n=e.altKey?"goToPreviousWithoutSliding":"goToPreviousWithoutAnimation",t.repetitionAction!==n&&t[n](),e.preventDefault();break;case ml.a.DOWN:case ml.a.RIGHT:n=e.altKey?"goToNextWithoutSliding":"goToNextWithoutAnimation",t.repetitionAction!==n&&t[n](),e.preventDefault();break;case ml.a.EQUALS:t.zoomInOneStepIfPossible(),n="zoomInOneStepIfPossible";break;case ml.a.MINUS:t.zoomOutOneStepIfPossible(),n="zoomOutOneStepIfPossible";break;case ml.a.DIGIT_0:t.zoomTo1IfPossible();break;case ml.a.DIGIT_9:t.zoomToFitIfPossible();break;case ml.a.Z:t.toggleZoomIfPossible()}t.repetitionAction=n},keyUp:function(e){var t,n=this.surrogateOneUpNavigee,i=e.altKey,r=e.keyCode;switch(this.isOptionKeyPressed=i,n.repetitionAction&&(n.repetitionAction=""),r){case ml.a.UP:case ml.a.LEFT:e.preventDefault();break;case ml.a.DOWN:case ml.a.RIGHT:e.preventDefault();break;case ml.a.F:this.favoriteToggle();break;case ml.a.ESC:n!==this.view?n.sendEvent("exitBurstMode"):this.sendEvent("navigateUp");break;case ml.a.SPACE:case ml.a.ENTER:if(n!==this.view){var a=n.targetMedia;a&&n.tentativelyTogglePromotionForMedia(a);break}if((t=this.getPath("view.primaryMediaView"))&&Je.a(t.enterBurstMode)){t.enterBurstMode();break}if(t&&Je.a(t.togglePlayback)){t.togglePlayback();break}break;case ml.a.DELETE:case ml.a.BACKSPACE:this.removeSelection(),e.preventDefault()}},resetState:function(){var e=this,t=arguments;e.__s._$71d$resetState.apply(e,t),this.media=null,this.collection=null},navigateUp:function(){var e=this.selectionDelegate,t=this.media;t&&e&&e.selectAndScrollToMedia&&e.selectAndScrollToMedia(t),this.nextResponder.sendEvent("navigateUp")},feedbackService:V.b(G.a.bindingFor("application.feedbackService")),download:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.downloadSingleMedia(t.media);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){eA(a,i,r,s,o,"next",e)}function o(e){eA(a,i,r,s,o,"throw",e)}s(void 0)}))})()},shareMedia:function(e){this.attachedPopoverController&&this.attachedPopoverController!==this.sharingSelectionMenuVC&&this.attachedPopoverController.hide(),this.sharingSelectionMenuVC.toggle(e)},addMediaToAlbum:function(e){this.attachedPopoverController&&this.attachedPopoverController!==this.addToAlbumVC&&this.attachedPopoverController.hide(),this.addToAlbumVC.toggle(e)},favoriteToggle:function(){this.toggleFavorite(this.media)},removeSelection:function(){var e=this,t=arguments;this.isDeleteRemoveActionInProgress||e.__s._$7Um$removeSelection.apply(e,t)},_removeOrDeleteItemsForSelectionContext:function(e){var t=this,n=this.container,i=this.collection,r=this.media;if(n&&i&&r){var a=i.indexOf(r),s=i.length,o=1===s?null:a+1<s?a+1:a-1,l=null!==o?i.objectAt(o):null;this._beginRemoveDeleteActionForMedia(r),this.__s._$7hT$_removeOrDeleteItemsForSelectionContext.call(this,e).then((function(){n.reload()})).then((function(){if(l){if(t.media===r){var e=t.getPath("view.primaryMediaView");e&&Je.a(e.exitBurstMode)&&e.exitBurstMode(),t.media=l}}else t.sendEvent("navigateUp")})).finally((function(){t._endRemoveDeleteActionForMedia(r)}))}},_beginRemoveDeleteActionForMedia:function(e){this.isDeleteRemoveActionInProgress=!0,e.__is_delete_remove_in_progress=!0},_endRemoveDeleteActionForMedia:function(e){this.isDeleteRemoveActionInProgress=!1,delete e.__is_delete_remove_in_progress},_mediaDidChange:B.h("media",(function(e){this.isDeleteRemoveActionInProgress=e&&e.__is_delete_remove_in_progress})),__superMap:{_$qy$didDetach:"didDetach",_$71d$resetState:"resetState",_$7Um$removeSelection:"removeSelection",_$7hT$_removeOrDeleteItemsForSelectionContext:"_removeOrDeleteItemsForSelectionContext"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OneUpViewController"}}),nA=In.a.extend(ku.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"polygon",namespace:"http://www.w3.org/2000/svg",attributes:{points:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"_points",attributes:{},attribute:"points"}}}],name:"_svg",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"is-expanded",falsevalue:"is-collapsed",attributes:{}}],namespace:"http://www.w3.org/2000/svg",attributes:{width:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},attribute:"width"},height:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},attribute:"height"},"pointer-events":"none",version:"1.1",xlink:"http://www.w3.org/1999/xlink"}}]}},className:"cw-ui-collections-toggle-view",__QUALIFIED_CLASS_NAME__:"OutlineToggleView"},_points:Object(V.b)({readOnly:!0,dependencies:["height","width"],get:Object.assign((function(){var e=this.width;return iA(0,0,e,0,e/2,this.height)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return iA(0,0,r,0,r/2,i.internalGet(this,t[0+n]))}})}),height:Object(V.b)(7),width:Object(V.b)(10),content:Object(V.b)(),isExpanded:Object(V.b)(!1),context:Object(Oi.c)("content"),action:Object(V.b)({readOnly:!0,dependencies:["isExpanded"],get:Object.assign((function(){return this.isExpanded?"__spi__userDidRequestItemCollapse":"__spi__userDidRequestItemExpand"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"__spi__userDidRequestItemCollapse":"__spi__userDidRequestItemExpand"}})}),_heightWidthObserver:Object(B.h)("height","width",(function(){var e=this.height,t=this.width;this._svg.setAttribute("viewBox","0 0 "+t+" "+e)}))});function iA(e,t,n,i,r,a){return e+","+t+" "+n+","+i+" "+r+","+a}var rA=zp.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["outline-item-content-view"]}],classes:["outline-item-container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_outlineLevelClassname",attributes:{}}]}},className:"cw-ui-collections-outline-expandable-item-view",__QUALIFIED_CLASS_NAME__:"OutlineExpandableItemView"},toggleView:Object(V.b)({defaultValue:Object(k.c)(nA),downstreamBindings:{isExpanded:"(owner).isExpanded",content:"(owner).content"}}),_outlineLevelClassname:Object(V.b)({readOnly:!0,dependencies:["level"],get:Object.assign((function(){return"outline-level-"+this.level}),{__CW__getter:function(e,t,n,i){return"outline-level-"+i.internalGet(this,t[0+n])}})}),level:Object(V.b)(0),isExpanded:Object(V.b)(!1),isExpandable:Object(V.b)(!0),content:Object(V.b)(),contentView:Object(V.b)({defaultValue:Object(k.c)(In.a),downstreamBindings:{content:"(owner).content"}})}),aA=zp.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["outline-item-container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_outlineLevelClassname",attributes:{}}]}},className:"cw-ui-collections-outline-non-expandable-item-view",__QUALIFIED_CLASS_NAME__:"OutlineNonExpandableItemView"},_outlineLevelClassname:Object(V.b)({readOnly:!0,dependencies:["level"],get:Object.assign((function(){return"outline-level-"+this.level}),{__CW__getter:function(e,t,n,i){return"outline-level-"+i.internalGet(this,t[0+n])}})}),level:Object(V.b)(0),isExpandable:Object(V.b)(!1),content:Object(V.b)(),contentView:Object(V.b)({defaultValue:Object(k.c)(In.a),downstreamBindings:{content:"(owner).content"}})}),sA=Nm.a.extend({expandableItemViewClass:Object(V.b)(In.a),nonExpandableItemViewClass:Object(V.b)(In.a),delegate:Object(V.b)(),itemViewClassForItem:function(e){var t=e.handle.value;return this.delegate.isItemExpandable(t)?this.expandableItemViewClass:this.nonExpandableItemViewClass},itemViewDidEnter:function(e,t){var n=this,i=arguments;n.__s._$Ne$itemViewDidEnter.apply(n,i);var r=t.handle,a=this._levelForHandle(r);e.set("level",a);var s=t.handle.value;this._setUpViewProperties(e,s)},itemViewDidMove:function(e,t){var n=this,i=arguments;n.__s._$S0$itemViewDidMove.apply(n,i);var r=t.handle,a=this._levelForHandle(r);e.set("level",a);var s=t.handle.value;this._setUpViewProperties(e,s)},_setUpViewProperties:function(e,t){var n=this.delegate;n.isItemExpandable(t)?(e.set("isExpandable",!0),n.isItemExpanded(t)?e.set("isExpanded",!0):e.set("isExpanded",!1)):(e.set("isExpandable",!1),e.set("isExpanded",!1))},_levelForHandle:function(e){for(var t=-1;e.isValid;)e=e.parent,t++;return t},__superMap:{_$Ne$itemViewDidEnter:"itemViewDidEnter",_$S0$itemViewDidMove:"itemViewDidMove"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineViewPresenter"}}),oA=Ei.a.extend({expandableItemViewClass:Object(V.b)({readOnly:!0,defaultValue:rA}),nonExpandableItemViewClass:Object(V.b)({readOnly:!0,defaultValue:aA}),delegate:Object(V.b)({defaultValue:Object(k.c)(ac),downstreamBindings:{childrenKey:"(owner).childrenKey"}}),isItemExpandable:function(e){return this.delegate.isItemExpandable(e)},isItemExpanded:function(e){return this.delegate.isItemExpanded(e)},expandItem:function(e){this.delegate.itemWasExpanded(e),this.update()},collapseItem:function(e){this.delegate.itemWasCollapsed(e),this.update()},childrenKey:Object(V.b)("children"),collection:Object(V.b)({downstreamBindings:{handleProviderDelegate:"(owner).delegate"}}),layoutDelegate:Object(k.c)(Um.a),presenter:Object(V.b)({defaultValue:Object(k.c)(sA),downstreamBindings:{expandableItemViewClass:"(owner).expandableItemViewClass",nonExpandableItemViewClass:"(owner).nonExpandableItemViewClass",delegate:"(owner).delegate"}}),__spi__userDidRequestItemExpand:function(e){return this.expandItem(e),!0},__spi__userDidRequestItemCollapse:function(e){return this.collapseItem(e),!0},staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineViewController"}}),lA={setCustomHeightForItem:function(e,t){var n=this.collection.handleFor(e);return this.setCustomHeight(n,t)},setCustomHeight:function(e,t){var n=this.layoutDelegate.cellForHandle(e);-1===n.customHeight&&n.retain(this,"CustomRowHeightSupport: retaining cell with custom height"),n.customHeight=t,n.height=t;var i=Gm.a.create();i.invalidateItemAt(e),this.update(i)},layoutDelegate:Object(F.b)({cellClass:Object(F.b)({customHeight:-1,invalidate:function(){var e=this,t=arguments;-1!==this.customHeight&&this.handle.wasRemoved&&(this.release(this,"CustomRowHeightSupport: retaining cell with custom height"),this.customHeight=-1),e.__s._$Ws$invalidate.apply(e,t)},didEnterPool:function(){var e=this,t=arguments;this.customHeight=-1,e.__s._$Yc$didEnterPool.apply(e,t)},__superMap:{_$Ws$invalidate:"invalidate",_$Yc$didEnterPool:"didEnterPool"}}),sizeForItem:function(e,t){var n=this,i=arguments,r=t.customHeight;return-1!==r?_l.a.create({height:r,width:e.viewportWidth}):n.__s._$fp$sizeForItem.apply(n,i)},__superMap:{_$fp$sizeForItem:"sizeForItem"}})},cA=Jm.extend({_removedItems:Object(V.b)({strong:!0,defaultValue:Object(k.c)(oi.a),downstreamBindings:{serializer:"(owner).collection.serializer"}}),_updateActualSelectionSerializer:Object(B.h)("selection.serializer",(function(e){this._selection.serializer=e})),_selection:null,selection:Object(V.b)({strong:!0,writeDependencies:["selectionDidChange","pivot"],downstreamBindings:{serializer:"(owner).collection.serializer"},defaultValue:Object(k.c)(oi.a),get:function(){var e=this._selection;if(e)return e.clone()},set:Object.assign((function(e){var t=this._selection,n=this.collection,i=this.getPath("collection.serializer");e?!t||e.serializer===t.serializer&&e.clone?e=e.clone():(t.clear(),e&&t.addEach(e),e=t):e=oi.a.create({serializer:i});var r=oi.a.create({serializer:i}),a=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&n&&a&&0===e.length)for(var s=n.startHandle;s.isValid&&!this.selectItemAtHandle(s,r);s=s.next);else for(var o=this.shouldStoreRemovedSelection,l=this.isMultipleSelectionEnabled,c=e.createIterator();c.isValid;c.moveToNext()){var u=c.encodedValue,d=n?n.encodedHandleFor(u).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"):null,h=!1;if(d&&d.isValid?h=this.selectItemAtHandle(d,r):o&&r.encodedAdd(u),d&&d.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),!l&&h)break}this._selection=r;var p=this._pivot,f=p;if((!p||!e.encodedContains(p.encodedValue))&&e.length>0)if(n){for(var g,m=e.createIterator();m.isValid;)g=m.encodedValue,m.moveToNext();f=n.encodedHandleFor(g)}else f=null;return this.pivot=f,this.selectionDidChange=!0,e}),{__CW__setter:function(e,t,n,i,r){var a=this._selection,s=this.collection,o=this.getPath("collection.serializer");e?!a||e.serializer===a.serializer&&e.clone?e=e.clone():(a.clear(),e&&a.addEach(e),e=a):e=oi.a.create({serializer:o});var l=oi.a.create({serializer:o}),c=this.getPath("collection.length");if(!this.isEmptySelectionEnabled&&s&&c&&0===e.length)for(var u=s.startHandle;u.isValid&&!this.selectItemAtHandle(u,l);u=u.next);else for(var d=this.shouldStoreRemovedSelection,h=this.isMultipleSelectionEnabled,p=e.createIterator();p.isValid;p.moveToNext()){var f=p.encodedValue,g=s?s.encodedHandleFor(f).retain(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"):null,m=!1;if(g&&g.isValid?m=this.selectItemAtHandle(g,l):d&&l.encodedAdd(f),g&&g.release(this,"IndexedSelectionController#selectedIndices: enforcing isMultipleSelectionEnabled"),!h&&m)break}this._selection=l;var _=this._pivot,v=_;if((!_||!e.encodedContains(_.encodedValue))&&e.length>0)if(s){for(var b,y=e.createIterator();y.isValid;)b=y.encodedValue,y.moveToNext();v=s.encodedHandleFor(b)}else v=null;return n[1+i]=v,n[0+i]=!0,e}}),writeDependencySetPathMap:[!1,!1]}),_maintainFlags:Object(B.h)({inputs:["delegate","isEmptySelectionEnabled","isMultipleSelectionEnabled"],callback:function(e){e&&(this.selection=this._selection)}}),shouldStoreRemovedSelection:Object(V.b)({readOnly:!0,defaultValue:!1}),updateSelectionForCollectionChange:function(e){if(!this.shouldStoreRemovedSelection){var t=this._selection,n=!1,i=e.itemsChanges;if(i){for(var r=this._removedItems,a=i.length,s=0;s<a;s++){var o=i[s],l=o.encodedItem;o.operation===Wo.b.REMOVE?(t.encodedContains(l)&&r.encodedAdd(l),t.encodedRemove(l)):r.encodedContains(l)&&(t.encodedAdd(l),r.encodedRemove(l))}r.length&&(n=!0,r.clear())}else if(e.collectionChanged)t.length&&(n=!0,t.clear());else if(e.everythingChanged&&t.length){var c=this.collection;t.clone().forEach((function(e){c.contains(e)||(t.remove(e),n=!0)}))}0!==t.length||this.isEmptySelectionEnabled||(n=!0),n&&(this.selection=t)}},clearSelection:function(){this._selection.clear(),this.pivot=null},isItemAtHandleSelected:function(e){return this._selection.encodedContains(e.encodedValue)},selectItemAtHandle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._selection,n=this.delegate;return!!n.selectionControllerShouldSelectItem(this,e)&&(t.encodedAdd(e.encodedValue),n.selectionControllerDidSelectItem(this,e),!0)},deselectItemAtHandle:function(e){var t=this._selection,n=null;if(t.encodedRemove(e.encodedValue),0!==t.length){var i=this.pivot;n=e===i?function(e,t){for(var n=e,i=e;n.isValid&&i.isValid;){if(n.isValid&&t(n=n.previous))return n;if(i.isValid&&t(i=i.next))return i}return n}(e,(function(e){return t.encodedContains(e.encodedValue)})):i}return this.pivot=n,this.delegate.selectionControllerDidDeselectItem(this,e),!0},staticMembers:{__QUALIFIED_CLASS_NAME__:"IdentitySelectionController"}}),uA=n(1266),dA=rA.extend(Qp,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toggleView"},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"},{type:"VIEWOUTLET",tagname:"view",name:"contentView"},{type:"VIEWOUTLET",tagname:"view",name:"addView"}],classes:["outline-item-container"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"leftForLevel",attributes:{},unit:"px",property:"left"}}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"_outlineLevelClassname",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpandable",truevalue:"is-expandable",falsevalue:"is-not-expandable",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDraggedOver",truevalue:"dragged-over",attributes:{}}]},className:"p2-container-list-expandable-item-view",__QUALIFIED_CLASS_NAME__:"ContainerListExpandableItemView"},leftStep:V.b(0),leftForLevel:V.b({readOnly:!0,dependencies:["leftStep","level"],get:Object.assign((function(){var e=this.level||1;return this.leftStep*e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n])||1;return i.internalGet(this,t[0+n])*r}})}),toggleView:V.b({defaultValue:k.c(nA.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"is-visible",falsevalue:"is-hidden",attributes:{}}]}}}})),downstreamBindings:{isVisible:"(owner).isExpandableAndLoaded"}}),isExpandableAndLoaded:V.b({readOnly:!0,dependencies:["isExpandable","content","content.isLoading"],get:Object.assign((function(){var e=this.content;return this.isExpandable&&e&&!e.isLoading}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])&&r&&!r.isLoading}})}),addView:V.b({readOnly:!0,dependencies:["isExpandable","content","content.isLoading"],get:Object.assign((function(){if(this.isExpandable&&this.content&&!this.content.isMediaTypesFolder&&!this.content.isLoading)return Ho.a.extend(Nu,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinner"}],classes:["spinner-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"spinnerIsVisible",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldStayVisible",truevalue:"is-visible",attributes:{}}]}}},shouldStayVisible:V.b(),container:V.b(),spinnerIsVisible:V.b(),_permanentSpinner:V.b({strong:!0,defaultValue:k.c(Jc.a,{size:15,color:"steelgrey"})}),spinner:V.b({readOnly:!0,dependencies:["spinnerIsVisible"],get:Object.assign((function(){return this.spinnerIsVisible?this._permanentSpinner:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this._permanentSpinner:void 0}})})}).create({tooltip:s.d("Sidebar.Button.Tooltip.Add"),additionalClassNames:["add-album-view"],icon:uA,action:"showAddAlbumMenu",container:this.content,spinnerIsVisible:!1})}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&!i.internalGet(this,t[1+n]).isMediaTypesFolder&&!i.internalGetPath(this,t[2+n]))return Ho.a.extend(Nu,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinner"}],classes:["spinner-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"spinnerIsVisible",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldStayVisible",truevalue:"is-visible",attributes:{}}]}}},shouldStayVisible:V.b(),container:V.b(),spinnerIsVisible:V.b(),_permanentSpinner:V.b({strong:!0,defaultValue:k.c(Jc.a,{size:15,color:"steelgrey"})}),spinner:V.b({readOnly:!0,dependencies:["spinnerIsVisible"],get:Object.assign((function(){return this.spinnerIsVisible?this._permanentSpinner:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this._permanentSpinner:void 0}})})}).create({tooltip:s.d("Sidebar.Button.Tooltip.Add"),additionalClassNames:["add-album-view"],icon:uA,action:"showAddAlbumMenu",container:i.internalGet(this,t[1+n]),spinnerIsVisible:!1})}})}),previewDerivativeGeometricLength:V.b({readOnly:!0,get:function(){return G.a.application.previewLength}}),previewRoundedCornerRadius:V.b(2),isDraggedOver:V.b(!1),contentView:V.b({defaultValue:k.c(pf,{additionalClassNames:F.b(["outline-item-content-view"])}),downstreamBindings:{previewDerivativeGeometricLength:"(owner).previewDerivativeGeometricLength",previewRoundedCornerRadius:"(owner).previewRoundedCornerRadius",isDraggedOver:"(owner).isDraggedOver",isDisabled:"(owner).isShowingSpinner"}}),isShowingSpinner:V.b({readOnly:!0,dependencies:["content.isLoading","isExpandable"],get:Object.assign((function(){var e=this.content,t=this.isExpandable;return e&&e.isLoading&&t}),{__CW__getter:function(e,t,n,i){var r=this.content,a=i.internalGet(this,t[1+n]);return r&&r.isLoading&&a}})}),spinnerView:V.b({readOnly:!0,dependencies:["isShowingSpinner"],get:Object.assign((function(){return this.isShowingSpinner?Jc.a.extend({additionalClassNames:F.b(["is-loading-spinner-view"])}).create({size:12,color:"#000000"}):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Jc.a.extend({additionalClassNames:F.b(["is-loading-spinner-view"])}).create({size:12,color:"#000000"}):null}})})}),hA=rA.extend(Qp,{staticMembers:{className:"p2-container-list-group-header-view",__QUALIFIED_CLASS_NAME__:"ContainerListGroupHeaderView"},toggleView:V.b({defaultValue:k.c(nA.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_showTitle",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"is-hidden",falsevalue:"",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_hideTitle",attributes:{}}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"",falsevalue:"is-hidden",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingPressed",truevalue:"cw-being-pressed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingHovered",truevalue:"cw-being-hovered",attributes:{}}],attributes:{"aria-haspopup":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaHasPopup",attributes:{},attribute:"aria-haspopup"},"aria-owns":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaOwns",attributes:{},attribute:"aria-owns"},"aria-pressed":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaPressed",attributes:{},attribute:"aria-pressed"}}}},_hideTitle:H.d(s.d("Sidebar.Group.Hide")),_showTitle:H.d(s.d("Sidebar.Group.Show"))}))}),contentView:V.b({defaultValue:k.c(In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"content.name",attributes:{}}],classes:["label"]}],classes:["label-wrap"]}}}}))})}),pA=ac.extend({_collapsedGroupHeaders:H.d(k.c(oi.a)),isItemExpandable:function(e){return!!e&&("SIDEBAR_GROUP_HEADER"===e.type||!(!e||!e.isFolder))},isItemExpanded:function(e){var t=this,n=arguments;return e&&"SIDEBAR_GROUP_HEADER"===e.type?!this._collapsedGroupHeaders.contains(e):t.__s._$KD$isItemExpanded.apply(t,n)},itemWasExpanded:function(e){var t=this,n=arguments;if(!e||"SIDEBAR_GROUP_HEADER"!==e.type){var i=this.owner;return e&&"VIRTUAL_FOLDER"!==e.type&&e.list({isForcedFetch:!0}).then((function(){return i.update()})),t.__s._$Z6$itemWasExpanded.apply(t,n)}this._collapsedGroupHeaders.remove(e)},itemWasCollapsed:function(e){var t=this,n=arguments;if(!e||"SIDEBAR_GROUP_HEADER"!==e.type)return t.__s._$cn$itemWasCollapsed.apply(t,n);this._collapsedGroupHeaders.add(e)},__superMap:{_$KD$isItemExpanded:"isItemExpanded",_$Z6$itemWasExpanded:"itemWasExpanded",_$cn$itemWasCollapsed:"itemWasCollapsed"},staticMembers:{__QUALIFIED_CLASS_NAME__:"OutlineViewExpansionDelegate"}});function fA(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var gA=oA.extend(xw,lA).extend({mixinDependencies:[Tf],viewClass:F.b(Dp.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["container-list",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"itemSizeMode",attributes:{}}]}}},editAlbumName:NC.editAlbumName}),view:V.b({downstreamBindings:{itemSizeMode:"(owner).itemSizeMode"}}),expandableItemViewClass:V.b((function(){return dA.extend({leftStep:V.b({binding:this.bindingFor("leftStep")}),previewDerivativeGeometricLength:V.b({binding:this.bindingFor("previewDerivativeGeometricLength")}),previewRoundedCornerRadius:V.b({binding:this.bindingFor("previewRoundedCornerRadius")})})})),popoverController:V.b({readOnly:!0,strong:!0,get:function(){var e=Wo.b.create([]),t=Ho.a.extend(Nu).create({title:s.d("AlbumsPopover.NewAlbum"),action:"createNewAlbum",target:this,icon:'<div class="icon" data-icon="album"></div>'}),n=Ho.a.extend(Nu).create({title:s.d("AlbumsPopover.NewFolder"),action:"createNewFolder",target:this,icon:'<div class="icon" data-icon="genericfolder"></div>'});return e.push(t,n),Fl.extend({allowedLayouts:[hl,dl],viewClass:F.b({additionalClassNames:F.b(["png-icon-buttons"])})}).create({buttons:e})}}),createNewAlbum:function(){this.createNewContainer(s.d("AddToAlbum.Album.DefaultTitle"),$o.a.NORMAL)},createNewFolder:function(){this.createNewContainer(s.d("AddToAlbum.Folder.DefaultTitle"),$o.a.FOLDER)},createNewContainer:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var r,a,s,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=i.addButton.container,a="VIRTUAL_FOLDER"!==r.type?r:L.n().cplRootContainer,i.addButton.isDisabled=!0,i.addButton.spinnerIsVisible=!0,i.popoverController.hide(),n.next=7,i.createValidAlbum(e,a,t);case 7:s=n.sent,i.sendEvent("navigateTo",s),o=i.collection.handleFor(s),l=i.layoutDelegate.cellForHandle(o),i.presenter.viewForCell(l).contentView.editLabel(),i.addButton.spinnerIsVisible=!1,i.addButton.isDisabled=!1,i.hideAddAlbumButton();case 16:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){fA(a,i,r,s,o,"next",e)}function o(e){fA(a,i,r,s,o,"throw",e)}s(void 0)}))})()},_popoverControllerObserver:B.h({inputs:["popoverController","popoverController.view.isAttached"],callback:function(e,t){e&&!t&&this.hideAddAlbumButton()}}),showAddAlbumMenu:function(e){this.addButton||(this.addButton=e,this.addButton.shouldStayVisible=!0,this.popoverController.show(e))},addButton:V.b(),hideAddAlbumButton:function(){this.addButton&&!this.addButton.spinnerIsVisible&&(this.addButton.shouldStayVisible=!1,this.addButton=void 0)},provider:V.b({strong:!0,readOnly:!0,dependencies:["delegate"],get:Object.assign((function(){if(this.delegate)return Yc.sharedInstance}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return Yc.sharedInstance}}),downstreamBindings:{expansionDelegate:"(owner).delegate"}}),collection:V.b({strong:!0,readOnly:!0,dependencies:["provider","provider.items"],get:Object.assign((function(){return this.provider.items}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])}})}),childrenKey:"containers",selectionController:V.b(k.c(cA)),isMultipleSelectionEnabled:!1,isEmptySelectionEnabled:!1,userSelectionRequest:function(e){if(e&&e.view){var t=e.view.contentView;if(!t||!t.isDisabled){var n=this.presenter.cellForView(e.view);if("item"===n.cellType&&e.operation===Qm.SET){var i=n.handle.value;if(void 0===i||"SIDEBAR_GROUP_HEADER"===i.type)return;this.sendEvent("navigateTo",i)}}}},clearSelection:function(){this.selectionController.clearSelection()},selectContainer:function(e){var t=this.provider.serializer,n=oi.a.create({serializer:t});if(n.add(e),this.selectionController._selection=n,this.selectionController.propertyChanged("selection"),this.selectionController.selectionDidChange(),e.isNormalAlbum||e.isFolder){for(var i=e.parent;i&&!i.isRootFolder;)this.expandItem(i),i=i.parent;e.isVirtualFolder||this.expandItem(this.provider.myAlbumsFolder)}},delegate:V.b(k.c(pA)),presenter:V.b({defaultValue:k.c(sA.extend(Rw,{itemViewClassForItem:function(e){var t=e.handle.value;return t&&"SIDEBAR_GROUP_HEADER"===t.type?this.groupHeaderItemViewClass:this.expandableItemViewClass},itemViewDidMove:function(e,t){var n=this,i=arguments;n.__s._$2Tb$itemViewDidMove.apply(n,i),e.isSelected=this.owner.isItemAtHandleSelected(t.handle)},groupHeaderItemViewClass:H.d(hA),__superMap:{_$2Tb$itemViewDidMove:"itemViewDidMove"}}))}),layoutMetrics:V.b({downstreamBindings:{rowHeight:"(owner).rowHeight",topInset:"(owner).topInset"}}),topInset:V.b(5),itemSizeMode:V.b({binding:G.a.bindingFor("application.sidebarItemSizeMode")}),rowHeight:V.b({readOnly:!0,dependencies:["itemSizeMode"],get:Object.assign((function(){switch(this.itemSizeMode){case"medium":return 30;case"small":default:return 25}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"medium":return 30;case"small":default:return 25}}})}),leftStep:V.b({readOnly:!0,dependencies:["itemSizeMode"],get:Object.assign((function(){switch(this.itemSizeMode){case"medium":return 15;case"small":default:return 10}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"medium":return 15;case"small":default:return 10}}})}),previewDerivativeGeometricLength:V.b({binding:G.a.bindingFor("application.previewLength")}),previewRoundedCornerRadius:V.b({readOnly:!0,dependencies:["itemSizeMode"],get:Object.assign((function(){switch(this.itemSizeMode){case"medium":return 3;case"small":default:return 2}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"medium":return 3;case"small":default:return 2}}})}),update:function(){var e=this,t=arguments,n=this.collection,i=n&&n.source;i&&i.length&&this.isAttached&&e.__s._$2_2$update.apply(e,t)},currentUploadViewController:V.b(void 0),__superMap:{_$2_2$update:"update"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerListViewController"}}),mA=In.a.extend({mixinDependencies:[UE.a,Fu.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"containerListView"}],classes:["p2-sidebar-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"viewportWidth",attributes:{},unit:"px",property:"width"}}}},__QUALIFIED_CLASS_NAME__:"SidebarView"},viewportWidth:G.a.bindingFor("application.defaultSidebarWidth"),retractionAttachment:"left",minimumWidth:200,maximumWidth:400,allowsRetractionDuringResize:V.b(!0),_setCursor:B.h("isBeingHovered",(function(e){this.style.set("cursor",e?"ew-resize":"default")})),pointerDown:function(e){var t=this,n=arguments,i=t.__s._$Ns$pointerDown.apply(t,n);return this.isBeingPressed?(this._dragInitialCursorX=e.clientX,this._dragInitialViewportWidth=this.viewportWidth,i):i},pointerMove:function(e){var t=this,n=arguments,i=t.__s._$Re$pointerMove.apply(t,n);if(!this._dragInitialCursorX)return i;var r=e.clientX-this._dragInitialCursorX+this._dragInitialViewportWidth;return this.viewportWidth=this.validViewportWidthForHypotheticalViewportWidth(r),this.containerListView.viewController.measureViewport(),this.allowsRetractionDuringResize&&(r<this.minimumWidth/2?this.retract(150):this.unretract(150)),i},pointerUp:function(e){var t=this,n=arguments,i=t.__s._$ez$pointerUp.apply(t,n);return this._dragInitialCursorX=this._dragInitialViewportWidth=void 0,i},validViewportWidthForHypotheticalViewportWidth:function(e){return Math.round(Math.max(this.minimumWidth,Math.min(this.maximumWidth,e)))},_sendRetractionEvents:B.h("finalRetractionAmount",(function(e){this.sendEvent("sidebarViewRetractionChangedTo",e)})),__superMap:{_$Ns$pointerDown:"pointerDown",_$Re$pointerMove:"pointerMove",_$ez$pointerUp:"pointerUp"}}),_A=fi.a.extend({mixinDependencies:[Tf,tc.a],viewClass:mA,containerListViewController:Ci.a.create({defaultValue:k.c(gA),viewOutlet:"containerListView"}),feedbackService:V.b(G.a.bindingFor("application.feedbackService")),addOneMediaToAlbumViaDragAndDrop:function(e,t){var n=this,i=this.feedbackService;i&&i.report("dragDropInsideApp"),this.moveOneMediaToAlbum(e,t).catch((function(){return n.showAddToAlbumErrorMessage()}))},addMediasToAlbumViaDragAndDrop:function(e,t){var n=this,i=this.feedbackService;i&&i.report("dragDropInsideApp"),this.moveMediasToAlbum(e,t).catch((function(){return n.showAddToAlbumErrorMessage()}))},currentUploadViewController:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"SidebarViewController"}}),vA=Kt.Record.extend({staticMembers:{CK_RECORD_TYPE:"CPLLibraryInfo",CK_RECORD_NAME_FOR_CPL:"PrimarySync-0000-LI",CK_RECORD_NAME_FOR_OTHER:"library-info",getRecordNameFromZonePK:function(e){var t=L.n(),n=jd.Zone.find(e,t)===t.cplZone?vA.CK_RECORD_NAME_FOR_CPL:vA.CK_RECORD_NAME_FOR_OTHER;return this.getPrimaryKeyWithZonePK(e,n)},getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName,i=void 0===n?this.getRecordNameFromZonePK(t):n;return this.__s._$VI$getPrimaryKeyFromParts.call(this,{zone:t,recordName:i})},load:function(e){var t=this,n=arguments;return void 0===e.primaryKeys&&(e.primaryKeys=[this.getPrimaryKeyFromParts({zone:e.zonePK})]),t.__s._$bp$load.apply(t,n)},__superMap:{_$VI$getPrimaryKeyFromParts:"getPrimaryKeyFromParts",_$bp$load:"load"},__QUALIFIED_CLASS_NAME__:"LibraryInfo"},audiosCount:qt.e({readOnly:!0}),othersCount:qt.e({readOnly:!0}),photosCount:qt.e({readOnly:!0}),videosCount:qt.e({readOnly:!0}),hiddenAudiosCount:qt.e({readOnly:!0}),hiddenOthersCount:qt.e({readOnly:!0}),hiddenPhotosCount:qt.e({readOnly:!0}),hiddenVideosCount:qt.e({readOnly:!0}),load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.load(Object.assign({zonePK:this.zone.pk},e))}}),bA=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["asset-count-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"\n                        "},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"computedSubtitle",attributes:{}},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"buttonSeparator",attributes:{}},{type:"VIEWOUTLET",tagname:"view",name:"button"}],classes:["asset-count-subtitle",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isEmptySubtitle",truevalue:"is-empty",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"computedWantsSubtitle",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]}]}},className:"asset-count-view",__QUALIFIED_CLASS_NAME__:"AssetCountView"},title:V.b(),subtitle:V.b(),button:V.b(),computedSubtitle:V.b({dependencies:["subtitle","wantsSubtitle"],readOnly:!0,type:String,get:Object.assign((function(){var e=this.subtitle,t=this.wantsSubtitle;return e&&e.trim()&&t?e:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&r.trim()&&a?r:""}})}),wantsSubtitle:V.b(),computedWantsSubtitle:V.b({readOnly:!0,dependencies:["wantsSubtitle","button"],get:Object.assign((function(){var e=this.button,t=this.wantsSubtitle;return Boolean(e||t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);return Boolean(r||a)}})}),_isEmptySubtitle:V.b({readOnly:!0,dependencies:["computedSubtitle","button"],get:Object.assign((function(){var e=this.button;return!this.computedSubtitle&&!e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]);return!i.internalGet(this,t[0+n])&&!r}})}),buttonSeparator:V.b({dependencies:["computedSubtitle","button"],readOnly:!0,type:String,get:Object.assign((function(){var e=this.computedSubtitle,t=this.button;return e&&t?"\xa0\xa0\xb7\xa0\xa0":""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?"\xa0\xa0\xb7\xa0\xa0":""}})})}),yA={photosGridFooterCountHeight:V.b({dependencies:["primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.sizeClass;return e===yn.a.MOUSE||t===dn.a.REGULAR?100:76}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r===yn.a.MOUSE||a===dn.a.REGULAR?100:76}})}),bottomPadding:0,sectionBottomPadding:0},wA={mixinDependencies:[{presenter:F.b({viewClassKeysByCellType:F.b({assetCountItem:"assetCountItemViewClass"}),assetCountItemViewClass:bA,viewForViewClass:function(e){var t=this,n=arguments;return e===this.assetCountItemViewClass?bA.create({title:this.bindingFor("owner.footerTitle"),subtitle:this.bindingFor("owner.footerSubtitle"),wantsSubtitle:this.bindingFor("owner.wantsFooterSubtitle"),button:this.bindingFor("owner.footerButton")}):t.__s._$Ht$viewForViewClass.apply(t,n)},__superMap:{_$Ht$viewForViewClass:"viewForViewClass"}}),footerTitle:V.b(),footerSubtitle:V.b(),footerButton:V.b(),wantsFooterSubtitle:V.b(!0),layoutMetrics:F.b(yA),layoutDelegate:F.b({sizeKeyByCellType:F.b({assetCountItem:"getAssetCountItemItemSize"}),getAssetCountItemItemSize:function(e,t){var n=this.getFooterHeight(e);return _l.a.create(e.viewportWidth,n)},cellClassKeysByCellType:F.b({assetCountItem:"assetCountCellClass"}),assetCountCellClass:_f.a.extend({handle:"assetCountItem",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=this,a=arguments;r.__s._$fk$completeVisibleCells.apply(r,a);var s=this.getFooterHeight(e);this.layoutStickyFooterCell("assetCountItem",s,e,t,n)},getFooterHeight:function(e){return e.layoutMetrics.photosGridFooterCountHeight},spaceBelowCell:function(e){var t=this,n=arguments;return t.__s._$nh$spaceBelowCell.apply(t,n)+this.getFooterHeight(e)},__superMap:{_$fk$completeVisibleCells:"completeVisibleCells",_$nh$spaceBelowCell:"spaceBelowCell"}})}],footerTitle:Oi.c("assetCountString"),footerSubtitle:Oi.c("lastUpdatedString"),assetCountString:V.b({dependencies:["assetCountShouldIncludeHiddenItems","libraryInfo","libraryInfo.photosCount","libraryInfo.audiosCount","libraryInfo.videosCount","libraryInfo.othersCount"],readOnly:!0,get:Object.assign((function(){var e=this.assetCountShouldIncludeHiddenItems,t=this.libraryInfo;return void 0===t?"":aC(t,0,e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return void 0===a?"":aC(a,0,r)}})}),lastUpdatedString:V.b({readOnly:!0,dependencies:["assetCountString","dataManager.cplZone.syncTokenLastUpdated"],get:Object.assign((function(){return this.assetCountString?s.d("Status.LastUpdated",{lastUpdated:Td(this.dataManager.cplZone.syncTokenLastUpdated,Ke.SHORT_TIME)}):""}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("Status.LastUpdated",{lastUpdated:Td(i.internalGetPath(this,t[1+n]),Ke.SHORT_TIME)}):""}})}),assetCountShouldIncludeHiddenItems:V.b(!1),libraryInfo:V.b(),dataManager:V.b({readOnly:!0,strong:!0,get:function(){return L.n()}})},IA=we.b("ToCW.AnimatedChildViewControllerTransitionDirections",{NOT_TRANSITIONING:0,TRANSITIONING_AWAY:1,TRANSITIONING_TO:-1}),SA={transitionDirection:V.b(),isTransitioning:V.b({dependencies:["isTransitioningAway","isTransitioningTo"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.isTransitioningAway||this.isTransitioningTo}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),isTransitioningAway:V.b({dependencies:["transitionDirection"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.transitionDirection===IA.TRANSITIONING_AWAY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===IA.TRANSITIONING_AWAY}})}),isTransitioningTo:V.b({dependencies:["transitionDirection"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.transitionDirection===IA.TRANSITIONING_TO}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===IA.TRANSITIONING_TO}})})},CA={mixinDependencies:[SA],targetViewControllerForAction:function(e,t){if(this.canPerformActionWithSender(t,e))return this;var n=this.parent;return n?n.targetViewControllerForAction?n.targetViewControllerForAction(e,t):n[t]?n:null:null},canPerformActionWithSender:function(e,t){var n=this[e];switch(e){case"showViewController":case"showDetailViewController":case"presentViewController":case"dismissViewController":return n&&n!==CA[e];default:return Boolean(n)}},showViewController:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];EA.apply(void 0,["showViewController",this,e].concat(n))},showDetailViewController:function(e){EA("showDetailViewController",this,e)},presentViewController:function(e,t){e.presentingViewController=this,EA("presentViewController",this,e,t)},dismissViewController:function(e,t){e.presentingViewController=null,EA("dismissViewController",this,e,t)},dismiss:function(e){if(this.presentingViewController)return this.presentingViewController.dismissViewController(this,e);throw new _.a("ViewControllerExtension#dismiss The view controller has no presentingViewController.",{viewController:this})},transitionWillStart:function(e){},transitionDidFinish:function(e){},isScrolledToInitialPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.view;return!(e.normalizedY>0)},scrollToInitialPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.view;e.scrollTo(0,0)}};function EA(e,t){var n=t.targetViewControllerForAction(t,e);if(n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return n[e].apply(n,r)}throw new _.a("ViewControllerExtension#"+e+" No view controller in target hierarchy implements "+e+".",{viewController:t})}var AA={dataManager:V.b({readOnly:!0,dependencies:[],get:function(){return L.n()}}),iCloudPhotoLibraryWasExited:V.b({type:Boolean,readOnly:!0,cacheable:!0,dependencies:["exitedDate"],get:Object.assign((function(){return Boolean(this.exitedDate)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),exitedDate:V.b({type:Number,readOnly:!0,dependencies:["dataManager.cplZoneState"],get:function(){var e=this.dataManager;if(void 0!==e){var t=e.cplZoneState;return t?t.disabledTime:void 0}}}),iCPLEnabled:V.b({type:Boolean,readOnly:!0,dependencies:["dataManager.noZoneError","dataManager.cplZoneState"],get:Object.assign((function(){if(!this.dataManager)return!1;var e=this.dataManager,t=e.cplZoneState;return!e.noZoneError&&(!t||t&&t.enabled)}),{__CW__getter:function(e,t,n,i){if(!this.dataManager)return!1;var r=i.internalGetPath(this,t[1+n]);return!i.internalGetPath(this,t[0+n])&&(!r||r&&r.enabled)}})})},OA={zoomTransitionValue:V.b(),shouldHideMostProminentDisplayOfMediaWithPK:V.b(),getPrimaryZoomRectableMedia:function(){},getRectInWindowForPrimaryZoomRectableMedia:function(){},zoomTransitionWillStartWithMedia:function(e,t){var n=e?e.pk:void 0;this.shouldHideMostProminentDisplayOfMediaWithPK=n,this.getPath("gridViewController.zoomTransitionWillStartWithMedia")&&this.gridViewController.zoomTransitionWillStartWithMedia(e,t)},zoomTransitionDidFinish:function(){this.shouldHideMostProminentDisplayOfMediaWithPK=void 0,this.getPath("gridViewController.zoomTransitionDidFinish")&&this.gridViewController.zoomTransitionDidFinish()}},TA=n(717),MA=n(714),DA={mixinDependencies:[Tn.a],sections:_u.a.define()},PA=n(719),LA={mixinDependencies:[Tn.a,PA.a],firstItem:$n.a.define(),lastItem:$n.a.define()},RA={mixinDependencies:[Tn.a,PA.a],sectionHandle:$n.a.define()},xA=TA.a.extend(RA,{_cachedSectionHandle:Object(H.d)({strong:!0}),sectionHandle:Object(H.d)({readOnly:!0,get:function(){var e=this._cachedSectionHandle;if(e)return e;var t=this.position,n=this.source._sectionsProxy.handleProvider;if(!this.isValid)return n.at(-1);var i=this.source,r=i.sections.binarySearch(WA,i,t),a=n.at(r);return a._registerCache(this),this._cachedSectionHandle=a,a}}),_clearSectionCache:function(){var e=this._cachedSectionHandle;e&&(e._unregisterCache(this),this._cachedSectionHandle=null)},_sectionDidChange:function(){this._cachedSectionHandle=null},_applyRemove:function(){var e=this,t=arguments;e.__s._$bb$_applyRemove.apply(e,t),this.wasRemoved?this._cachedSectionHandle=this.sectionHandle:this._clearSectionCache()},_applyInsert:function(){var e=this,t=arguments;e.__s._$ha$_applyInsert.apply(e,t),this.wasRemoved?this._cachedSectionHandle=this.sectionHandle:this._clearSectionCache()},cleanup:function(){this._clearSectionCache(),this.__s._$o7$cleanup.call(this)},__superMap:{_$bb$_applyRemove:"_applyRemove",_$ha$_applyInsert:"_applyInsert",_$o7$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedCollectionHandle"}}),NA=MA.a.extend({HandleClass:xA,staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedCollectionHandleProvider"}});function FA(e){e._sectionDidChange()}var VA=TA.a.extend(LA,{_handleCache:Object(k.c)(Set),_registerCache:function(e){this._handleCache.add(e)},_unregisterCache:function(e){this._handleCache.delete(e)},_flushCaches:function(){var e=this._handleCache;e.forEach(FA),e.clear()},_handleRemove:function(){this._flushCaches(),this.__s._$_d$_handleRemove.call(this)},cleanup:function(){this._flushCaches(),this.__s._$10w$cleanup.call(this)},_invalidItem:function(){var e=this.source.adapter.handleProvider.at(-1);return e._cachedSectionHandle=this,e},firstItem:Object(H.d)({readOnly:!0,get:function(){var e=this.source.adapter;if(!this.isValid)return this._invalidItem();var t=e._indicesForSection(this.value,this.position);return t.endIndex<t.startIndex?this._invalidItem():e.handleProvider.at(t.startIndex)}}),lastItem:Object(H.d)({readOnly:!0,get:function(){var e=this.source.adapter;if(!this.isValid)return this._invalidItem();var t=e._indicesForSection(this.value,this.position);return t.endIndex<t.startIndex?this._invalidItem():e.handleProvider.at(t.endIndex)}}),__superMap:{_$_d$_handleRemove:"_handleRemove",_$10w$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionHandle"}}),kA=MA.a.extend({HandleClass:VA,staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionHandleProvider"}}),BA=[];function jA(e){BA.push(e)}var UA=oc.extend({HandleProviderClass:kA,adapter:Object(V.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"UnsafeSectionsProxy"}}),GA=UA.extend({source:Object(V.b)({strong:!0}),staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongSectionsProxy"}}),HA=Wo.b.extend(DA,{staticMembers:{init:function(){var e=this,t=arguments;e.__s._$1fE$init.apply(e,t);var n=this.prototype,i=n.getMetadata("source").reference;i===sc.c?Object(_.b)("SectionedOrderedListAdapter may not have a weak reference to its source.",this):n._sourceIsStrongRef=i===sc.a;var r=n.getMetadata("sections").reference;r===sc.c?Object(_.b)("SectionedOrderedListAdapter may not have a weak reference to its sections.",this):n._sectionsProxy=r===sc.a?GA:UA},__superMap:{_$1fE$init:"init"},__QUALIFIED_CLASS_NAME__:"SectionedOrderedListAdapter"},source:Object(V.b)(),objectAt:function(){var e=this.source;if(e)return e.objectAt.apply(e,arguments)},encodedObjectAt:function(){var e=this.source;if(e&&e.length)return e.encodedObjectAt.apply(e,arguments)},rawSplice:function(){var e=this.source;return e.rawSplice.apply(e,arguments)},_internalLength:Object(V.b)({get:function(){return this.source._internalLength}}),length:Object(V.b)({dependencies:[],writeDependencies:["source.length"],get:function(){var e=this.source;return e?e.length:0},set:Object.assign((function(e){return this.source.length=e,e}),{__CW__setter:function(e,t,n,i,r){return n[0+i]=e,e}}),writeDependencySetPathMap:[!0]}),shallowCopy:function(){var e=this.source;return e?e.shallowCopy.apply(e,arguments):null},toJSON:function(){var e=this.source;return e?e.toJSON.apply(e,arguments):[]},push:function(){var e=this.source;return e.push.apply(e,arguments)},indexOf:function(){var e=this.source;return e?e.indexOf.apply(e,arguments):-1},serializer:Object(Oi.c)("source.serializer"),_proxyContentsDidChange:Object(B.g)("source.contentsDidChange",(function(e){this.itemsWillChange();for(var t=this.changes,n=e.context,i=n.length,r=0;r<i;r++){var a=n[r],s=a.operation,o=a.index,l=a.encodedItem;s===Wo.b.REMOVE?t.recordRemoval(o,l):t.recordInsertion(o,l)}this.itemsDidChange()})),_lastSetSource:null,_sourceIsStrongRef:!1,_sourceDidChange:Object(B.h)("source",(function(e){e&&!Object(pi.a)(e,Wo.b)&&Object(_.b)("Only a CW.ObservableArray can be used as the source for an observable array proxy.",{source:e}),e=e||null;var t=this._sourceIsStrongRef;t&&e&&e.retain(this,"SectionedOrderedListAdapter cache reference");var n=this._lastSetSource;if(e!==n){var i=!!n&&!!n.length,r=!!e&&!!e.length;if(this._lastSetSource=e,i||r){this.itemsWillChange();var a,s,o,l=this.changes;if(n)for(s=(a=n.length)-1;s>=0;s--)o=n.encodedObjectAt(s),l.recordRemoval(s,o);if(e)for(a=e.length,s=0;s<a;s++)o=e.encodedObjectAt(s),l.recordInsertion(s,o);this.itemsDidChange(),t&&n&&n.release(this,"SectionedOrderedListAdapter cache reference")}}})),HandleProviderClass:NA,sections:Object(V.b)(),_sectionsProxy:Object(V.b)({downstreamBindings:{source:"(owner).sections",adapter:"(owner)"},strong:!0,defaultValue:Object(k.c)(UA)}),_invalidateCacheOnSectionsChange:Object(B.h)("sections",(function(e){for(var t=this._sectionIndexCache,n=0,i=t.length;n<i;n++){var r=t[n];r&&jA(r)}t.length=0})),beginBatchedChanges:function(){var e=this,t=arguments;this._sectionsProxy.beginBatchedChanges(),e.__s._$42r$beginBatchedChanges.apply(e,t)},endBatchedChanges:function(){var e=this,t=arguments;Pe.a.pause(),this._sectionsProxy.endBatchedChanges(),e.__s._$46J$endBatchedChanges.apply(e,t),this.notifySectionLengthChangedIfNecessary(),Pe.a.resume()},invalidateSectionLengthsOnContentsChange:Object(B.g)({inputs:["contentsDidChange","_sectionsProxy.handleProvider.handlesDidUpdate","_sectionsProxy.contentsDidChange"],callback:function(e){e&&this.invalidateSectionLengths()}}),invalidateSectionLengths:function(){if(!this.invalidateSectionLengthsFiring){this.invalidateSectionLengthsFiring=!0;for(var e=this._sectionIndexCache,t=this._sectionsProxy,n=t.length,i=t.handleProvider,r=0;r<n;r++)this._invalidateSection(r,i,e),this._sectionLengthChanges.add(i.at(r).retain());this.invalidateSectionLengthsFiring=!1}},_invalidateCacheOnSectionsContentsChange:Object(B.g)("_sectionsProxy.contentsDidChange","_sectionsProxy.handleProvider.handlesDidUpdate",(function(e){if(e&&!this._invalidateCacheOnSectionsContentsChangeFiring){this._invalidateCacheOnSectionsContentsChangeFiring=!0;for(var t=this._sectionIndexCache,n=this._sectionsProxy,i=n.length,r=n.handleProvider,a=0;a<i;a++)this._invalidateSection(a,r,t),this._sectionLengthChanges.add(r.at(a).retain());this.notifySectionLengthChangedIfNecessary(),this._invalidateCacheOnSectionsContentsChangeFiring=!1}})),_invalidateSection:function(e,t,n){var i=t.cachedHandleAt(e);i&&(i.retain(),i._flushCaches(),i.release());var r=n[e];r&&(jA(r),n[e]=void 0)},sectionLength:Mn.a.define(),sectionLengthChanged:function(e,t){var n=this.sections;void 0===t&&(t=n.indexOf(e));for(var i=this._sectionIndexCache,r=n.length,a=this._sectionsProxy.handleProvider,s=t;s<r;s++)this._invalidateSection(s,a,i);this._sectionLengthChanges.add(a.at(t).retain()),this.notifySectionLengthChangedIfNecessary()},notifySectionLengthChangedIfNecessary:function(){if(0===this._batchCount){var e=this._sectionLengthChanges;e.length&&!Pe.a.nodeIsDirty(this.downstreamNodes.sectionLengthsDidChange)&&this.sectionLengthsDidChange(e)}},_sectionLengthChanges:Object(H.d)({strong:!0,defaultValue:Object(k.c)(oi.a)}),_sectionIndexCache:Object(k.c)(Array),_indicesForSection:function(e,t,n){n||(n=this._sectionIndexCache);var i,r=n[t];if(void 0!==r)return r;if(r=BA.pop()||{},0===t)i=0;else{var a=t-1;i=this._indicesForSection(this.sections.objectAt(a),a,n).endIndex+1}return r.startIndex=i,r.endIndex=i+this.sectionLength(e)-1,n[t]=r,r},sectionLengthsDidChange:Object(B.i)({didPropagate:function(){this._sectionLengthChanges.forEach((function(e){e.release()})),this._sectionLengthChanges.clear()}}),dispose:function(){var e=this,t=arguments;if(this._sourceIsStrongRef){var n=this._lastSetSource;n&&n.release(this,"SectionedOrderedListAdapter cache reference")}this._lastSetSource=null,e.__s._$5vb$dispose.apply(e,t)},__superMap:{_$42r$beginBatchedChanges:"beginBatchedChanges",_$46J$endBatchedChanges:"endBatchedChanges",_$5vb$dispose:"dispose"}});function WA(e,t,n,i){var r=n._indicesForSection(e,t),a=r.startIndex,s=r.endIndex;return i<a?-1:i>s?1:0}var $A,zA=HA.extend({_sourceDidChange:B.h("source",(function(){this.beginIgnoringChanges(),this.endIgnoringChanges()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"StrongSectionedAdapter"}}),KA=zA.extend({container:V.b({strong:!0,type:P.a}),sections:V.b({strong:!0,readOnly:!0,dependencies:["container"],get:Object.assign((function(){var e=this._sections_lastRet,t=this.container;return e&&1===e.length&&e.objectAt(0)===t||e&&!e.length&&!t?e:this._sections_lastRet=Wo.b.create(t?[t]:[])}),{__CW__getter:function(e,t,n,i){var r=this._sections_lastRet,a=i.internalGet(this,t[0+n]);return r&&1===r.length&&r.objectAt(0)===a||r&&!r.length&&!a?r:this._sections_lastRet=Wo.b.create(a?[a]:[])}})}),_sections_lastRet:H.d({strong:!0}),source:Oi.c("container.medias"),sectionLength:function(e){return Gd.a(e,"medias.length")||0},objectAt:function(){var e=this.source;if(e)return e.objectAt.apply(e,arguments)},canEnsureRange:V.b({readOnly:!0,dependencies:["container.isLoaded"],get:Object.assign((function(){return Boolean(this.getPath("container.isLoaded"))}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n]))}})}),ensureRange:function(e,t){return this.container.loadMediasForRange(e,t)},_sourceObserver:B.h({inputs:["source.length"],callback:function(){this.propertyChanged("length")}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerSectionedAdapter"}}),qA=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"emptyGridStatusView"},{type:"VIEWOUTLET",tagname:"view",name:"photosGridView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isGridEmpty",truevalue:"empty-grid",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"BasePhotosGridPageView"},additionalClassNames:F.b(["base-photos-grid-page"]),emptyGridText:V.b(s.d("Grid.Empty.Text")),emptyGridButton:V.b(),emptyGridStatusView:V.b({readOnly:!0,strong:!0,type:In.a,get:function(){return In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"textContent",attributes:{}}],classes:["empty-grid-text"]},{type:"VIEWOUTLET",tagname:"view",name:"button"}],classes:["empty-grid-content"]}},textContent:V.b(this.bindingFor("emptyGridText")),button:V.b(this.bindingFor("emptyGridButton"))}).create()}}),isGridEmpty:V.b()}),QA=In.a.extend({staticMembers:{className:"cw-ui-collections-list-footer-view",__QUALIFIED_CLASS_NAME__:"ListFooterView"}}),YA=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFloatingToTop",truevalue:"is-floating",attributes:{}}]}},className:"cw-ui-collections-list-header-view",__QUALIFIED_CLASS_NAME__:"ListHeaderView"}}),ZA={headerViewClass:Object(V.b)(),footerViewClass:Object(V.b)(),itemViewDidMove:function(e,t){var n=this,i=arguments;"header"===t.cellType&&(e.isFloatingToTop=t.isFloatingToTop,e.element.style.clip="rect("+t.clipTop+"px auto auto auto)"),n.__s._$EI$itemViewDidMove.apply(n,i)},viewClassKeysByCellType:Object(F.b)({header:"headerViewClass",footer:"footerViewClass"}),__superMap:{_$EI$itemViewDidMove:"itemViewDidMove"}},XA={layoutDelegate:Object(F.b)(jm),presenter:Object(V.b)({defaultValue:Object(F.b)(ZA),downstreamBindings:{headerViewClass:"(owner).headerViewClass",footerViewClass:"(owner).footerViewClass"}}),_updateWhenContentsChange:Object(B.g)({inputs:["collection.contentsDidChange","collection._sectionsProxy.contentsDidChange","collection.sectionLengthsDidChange","collection._invalidateCacheOnSectionsContentsChange","collection.invalidateSectionLengthsOnContentsChange","collection._invalidateCacheOnSectionsChange","collection.handleProvider.handlesDidUpdate","collection._sectionsProxy.handleProvider.handlesDidUpdate","collection._sourceDidChange","collection._sectionsProxy._sourceDidChange"],callback:function(e,t,n,i,r,a,s,o,l){if(e||t||n||l){var c=e&&e.context,u=t&&t.context,d=n&&n.context,h=!!l;this.update(Gm.a.create({itemsChanges:c,sectionsChanges:u,invalidSections:d,collectionChanged:h,everythingChanged:!c&&!u&&!d&&!h}))}}}),headerViewClass:Object(V.b)(YA),footerViewClass:Object(V.b)(QA)},JA=n(792),eO={__hasCheapRectangleAwarenessSupport__:!0,cheapRect:void 0},tO=n(324),nO=new tO.a,iO=new WeakMap,rO=function(e){return.5-.5*Math.cos(e*Math.PI)},aO=function(e){return Math.acos(1-2*e)/Math.PI},sO=function(e,t){return e.style.opacity=1===t||isNaN(t)?"":t};function oO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,r=arguments.length>4?arguments[4]:void 0;lO(e);var a=Sh.objectPool.getInstance();a.from=t,a.to=n,a.startTime=performance.now(),a.duration=i,a.tween=rO,a.render=sO,a.callback=r,nO.add(e),iO.set(e,a),a.render(e,t),$A||($A=requestAnimationFrame(cO))}function lO(e){nO.remove(e);var t=iO.get(e);t&&(iO.delete(e),t.callback&&d.b(t.callback),Sh.objectPool.disposeInstance(t))}function cO(){$A=null;for(var e,t=nO.items,n=performance.now(),i=0;e=t[i];i++){var r=iO.get(e),a=Math.max(0,Math.min(1,r.tween(Math.max(0,Math.min(1,(n-r.startTime)/r.duration)))));r.render(e,r.from+a*(r.to-r.from)),1===a&&(lO(e),i--)}t.length&&($A=requestAnimationFrame(cO))}var uO=zp.a.extend(JA.a,eO).extend({mixinDependencies:[fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"derivativeImageContainer",classes:["derivative-image-container"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldTemporarilyHideSelf",truevalue:"temporarily-hidden",attributes:{}}]},className:"pgk-photo-item-view",__QUALIFIED_CLASS_NAME__:"PhotoItemView"},shouldLayerBack:!te.a.sharedInstance.isSafari,currentTop:NaN,currentLeft:NaN,currentWidth:V.b(NaN),currentHeight:V.b(NaN),currentScale:V.b(NaN),cheapRect:H.d({get:function(){var e=Sh.objectPool.getAutodisposingInstance();return e.x=this.currentLeft,e.y=this.currentTop,e.width=this.currentWidth,e.height=this.currentHeight,e}}),isClearedForReuse:V.b(!0),shouldHideMostProminentDisplayOfMediaWithPK:V.b(),priority:V.b(0),motionSpeed:V.b(0),isStationary:V.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign((function(){return!this.motionSpeed}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isNotMovingFasterThanExtremelyQuickly:V.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign((function(){return!(this.motionSpeed>200*this.currentHeight)}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>200*this.currentHeight)}})}),isNotMovingFasterThanQuickly:V.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign((function(){return!(this.motionSpeed>50*this.currentHeight)}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>50*this.currentHeight)}})}),isNotMovingFasterThanSlowly:V.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign((function(){return!(this.motionSpeed>2*this.currentHeight)}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])>2*this.currentHeight)}})}),canAcceptAllLazyAdornments:V.b({readOnly:!0,dependencies:["isClearedForReuse","isNotMovingFasterThanQuickly"],get:Object.assign((function(){return!this.isClearedForReuse&&this.isNotMovingFasterThanQuickly}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),canAcceptNewLazyAdornments:V.b({readOnly:!0,dependencies:["isClearedForReuse","isNotMovingFasterThanExtremelyQuickly"],get:Object.assign((function(){return!this.isClearedForReuse&&this.isNotMovingFasterThanExtremelyQuickly}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),content:V.b({strong:!0}),media:V.b({strong:!0,readOnly:!0,binding:Oi.c("content")}),derivativeLoader:V.b({strong:!0,defaultValue:k.c(GE.a.extend({derivativeRequestReason:Jp.a.GRID_ASSET,derivativeOffscreeniness:0,shouldDerivativeCoverContainer:!0,shouldCorrectDerivativeForDevicePixelRatio:!0,media:Oi.c("owner.media"),derivativePriority:Oi.c("owner.priority"),derivativeContainerWidth:Oi.c("owner.currentWidth"),derivativeContainerHeight:Oi.c("owner.currentHeight")}))}),derivative:V.b(Oi.c("derivativeLoader.derivative")),imageContent:V.b({readOnly:!0,dependencies:["derivative"],get:Object.assign((function(){return this.derivative}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),minimumAgeToFade:100,hasBeenLaidOutAWhile:H.d({get:function(){return performance.now()>this.timestampAtFirstLayout+this.minimumAgeToFade}}),appendableImageContentElement:V.b({readOnly:!0,dependencies:["imageContent"],get:Object.assign((function(){var e=this.imageContent;return pi.a(e,sf.a)?e.checkOutAppendableImagelike(this):e||void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return pi.a(r,sf.a)?r.checkOutAppendableImagelike(this):r||void 0}}),didChange:function(e){var t=this._aice_existingImage;t&&(t.parentNode===this.derivativeImageContainer&&(t.parentNode.removeChild(t),t.style.cssText="",lO(t)),t.release&&t.release(this)),this._aice_existingImage=e,e?(e.retain&&e.retain(this),this.derivativeImageContainer.appendChild(e),!t&&this.hasBeenLaidOutAWhile?oO(e,void 0,void 0,void 0,of.a(this.set,this,"hasSolidImageContent",!0)):(lO(e),e.style.opacity="",this.hasSolidImageContent=!0),this._styleImagelikeElementToCoverContainer(e)):this.hasSolidImageContent=!1}}),hasSolidImageContent:V.b(!1),cleanup:function(){var e=this,t=arguments;return this.clearForReuse(),e.__s._$2wb$cleanup.apply(e,t)},clearForReuse:function(){this.cancelPointerInteraction&&this.cancelPointerInteraction();var e=this._layoutArgs;e&&(Sh.arrayPool.disposeInstance(e),this._layoutArgs=null),Pe.a.pause(),this.timestampAtFirstLayout=void 0,this.content=void 0,this.currentLeft=this.currentTop=this.currentWidth=this.currentHeight=this.currentScale=NaN,this.isClearedForReuse=!0,Pe.a.resume(),this.ensureLazyAdornmentNonexistences();var t=this.element.style;yl.d(t,-1e4,-1e4),this.shouldLayerBack&&(t.transform+=" translateZ(0)")},doLayout:function(e,t,n,i,r,a,s,o){var l;if(!this.isDoingLayout){this.isDoingLayout=!0;var c=this._layoutArgs,u=arguments.length,d=u&&!c;d&&(this.timestampAtFirstLayout=performance.now(),this.isClearedForReuse=!1);var h=this._previouslyLaidOutCSSLeft,f=this._previouslyLaidOutCSSTop;if(!d&&u&&!o&&h&&f&&n===c[dO]&&i===c[hO]&&r===c[pO]&&a===c[fO]){var g,m=this._previouslyLaidOutCSSLeft=h+e-c[0],_=this._previouslyLaidOutCSSTop=f+t-c[1];m=Math.round(m),_=Math.round(_);var v=this.element.style;return yl.d(v,m,_),this.shouldLayerBack&&(v.transform+=" translateZ(0)"),s&&(v.zIndex=s),this.priority=_+m/1e4,this.currentTop=_,this.currentLeft=m,c&&Sh.arrayPool.disposeInstance(c),(g=c=this._layoutArgs=Sh.arrayPool.getInstance()).push.apply(g,arguments),c[gO]=!0,this._doAdornmentLayouts(),void(this.isDoingLayout=!1)}if(!u)return this.isDoingLayout=!1,void(c&&this.doLayout.apply(this,c));c&&Sh.arrayPool.disposeInstance(c),(l=c=this._layoutArgs=Sh.arrayPool.getInstance()).push.apply(l,arguments),c[gO]=!0;var b=e,y=t,w=n,I=i,S=Boolean(r),C=a||Math.max(w,I);if(w>0&&I>0&&C>0){this._debug_doLayoutCount++;var E=p.a.sharedInstance.devicePixelRatio;this._devicePixelRatio=E;var A=this.media,O=S?Sh.objectPool.getAutodisposingInstanceWithProperties("width",w,"height",I):ef.d(this.aspectRatioForMedia(A),1,w,I,Sh.objectPool.getAutodisposingInstance()),T=O.width,M=O.height,D=(w-T)/2,P=(I-M)/2,L=b+D,R=y+P;this._previouslyLaidOutCSSLeft=L,this._previouslyLaidOutCSSTop=R;var x=L+T,N=R+M;L=Math.round(L),R=Math.round(R),T=Math.round(x)-L,M=Math.round(N)-R,Pe.a.pause(),this.currentLeft=L,this.currentTop=R,this.currentWidth=T,this.currentHeight=M,this.currentScale=C,this.priority=R+L/1e4,Pe.a.resume();var F=this.element,V=F.classList,k=F.style;k.width=T+"px",k.height=M+"px",k.zIndex=isNaN(s)?"":s,k.transform="translateX("+L+"px) translateY("+R+"px)"+(this.shouldLayerBack?" translateZ(0)":""),V.toggle("covering-cell",S),V.toggle("fitting-cell",!S),this._styleImagelikeElementToCoverContainer(this.appendableImageContentElement),this._doAdornmentLayouts(),this.isDoingLayout=!1}else this.isDoingLayout=!1}},aspectRatioForMedia:function(e){return e?e.aspectRatio:1},_styleImagelikeElementToCoverContainer:function(e){if(e){var t=this.currentWidth,n=this.currentHeight,i=this.calculateCropRectDimensions(e.naturalWidth||e.width,e.naturalHeight||e.height,t,n),r=e.style;r.left=i.left+"px",r.top=i.top+"px",r.width=i.width+"px",r.height=i.height+"px"}},calculateCropRectDimensions:function(e,t,n,i){var r=ef.c(e,t,n,i,Sh.objectPool.getAutodisposingInstance()),a=Math.round(r.width),s=Math.round(r.height);return{left:Math.round(n/2-a/2),top:Math.round(i/2-s/2),width:a,height:s}},_doAdornmentLayouts:function(){this.forEachAdornment(this._doAdornmentLayout,this)},_doAdornmentLayout:function(e){e.updateForNewHostLayout&&e.updateForNewHostLayout(this.currentLeft,this.currentTop,this.currentWidth,this.currentHeight,this.currentScale)},adornmentWasAdded:function(e){var t=this,n=arguments;this._doAdornmentLayout(this[e]),t.__s._$6M4$adornmentWasAdded.apply(t,n)},_shouldTemporarilyHideSelf:V.b({readOnly:!0,dependencies:["media.pk","shouldHideMostProminentDisplayOfMediaWithPK"],get:Object.assign((function(){var e=this.getPath("media.pk");return e&&this.shouldHideMostProminentDisplayOfMediaWithPK===e}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&i.internalGet(this,t[1+n])===r}})}),_layoutPropertiesChanged:B.h("media.aspectRatio",p.a.sharedInstance.bindingFor("devicePixelRatio"),(function(){this.doLayout()})),debugPropertyPathAdornment:void 0,pointerEnter:function(){},pointerLeave:function(){},__superMap:{_$2wb$cleanup:"cleanup",_$6M4$adornmentWasAdded:"adornmentWasAdded"}}),dO=2,hO=3,pO=4,fO=5,gO=7,mO=zA.extend({container:V.b(Oi.c("_provider.container")),source:V.b(Oi.c("_provider.items")),sections:V.b(Oi.c("_provider.sections")),sectionLength:function(e){return e&&e.itemCount||0},ensureRange:function(e,t){return this._provider.ensureRange(e,t)},canEnsureRange:V.b({readOnly:!0,dependencies:["container"],get:Object.assign((function(){return Boolean(this.container)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),_provider:V.b(_g),_providerWillBeginBatchedChanges:B.g("_provider.batchedChangesWillBegin",(function(){this.beginBatchedChanges()})),_providerDidEndBatchedChanges:B.g("_provider.batchedChangesDidEnd",(function(){this.endBatchedChanges()})),_ensureEntireRangeImmediately:B.h({inputs:["source","source.length",Ic.bindingFor("moments_ensureEntireRangeImmediately")],callback:function(e,t,n){!this._didEnsureRange&&e&&t&&n&&(this._didEnsureRange=!0,this._provider.ensureRange(0,t-1))}}),everythingChangedListener:B.g("source.everythingChanged",(function(){this._notifyEverythingChanged=!0,Pe.a.pause(),this.notifyEverythingChangedIfNecessary(),this.invalidateSectionLengths(),this.notifySectionLengthChangedIfNecessary(),Pe.a.resume()})),everythingChanged:B.i(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MomentsSectionedAdapter"}}),_O=Km.extend({mixinDependencies:[fl.a],firstItemIndex:V.b(-1),lastItemIndex:V.b(-1),cellsShouldBeSquareAspectRatio:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.primaryInteractionMode;return Ic.alwaysForceSquareCells||e===yn.a.TOUCH}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Ic.alwaysForceSquareCells||r===yn.a.TOUCH}})}),maxPagesDistant:H.d(1),aspectRatioForItemHandle:function(e){if(this.cellsShouldBeSquareAspectRatio)return 1;var t=e&&e.sectionHandle;if((t&&t.value).isPlaceholder)return 1;var n=e.source;if(!n.instanceOf(mO)&&n.length>0)return 1;var i=e.encodedValue;if(void 0===i)return 1;var r=e.source.serializer.store,a=r.readData(i);if(!a)return 1;var s=a.asset,o=jo.a.getStoreIdForPrimaryKey(pr.a,s),l=r.readData(o),c=fr.d(l,!0);if(!c.length){var u=a.master,d=jo.a.getStoreIdForPrimaryKey(eC.a,u),h=r.readData(d);c=fr.d(h,!1)}var p=c,f=p[0],g=p[1];return f&&g?f/g:1},sizeForItem:function(e,t){var n=this.aspectRatioForItemHandle(t.handle),i=e.layoutMetrics,r=i.columnWidth,a=i.rowHeight,s=r/a,o=i.columnSpacing,l=NaN,c=NaN;return n<s?(c=a,l=r):n>=3*s?(l=3*r+2*o,c=3*r/n):n>=2*s?(l=2*r+o,c=2*r/n):(l=r,c=r/n),_l.a.create(l,c)},isCellPreferredAnchor:function(e){var t=this,n=arguments,i=t.__s._$1ZJ$isCellPreferredAnchor.apply(t,n);if(i){var r=e.handle;return r&&r.value}return!1},lastAnchorableItem:function(e,t){var n=this;return t.findLast((function(e){return n.isCellAnchorable(e)&&e.isReusable}))},completeVisibleCells:function(e,t,n,i){var r=this,a=arguments;r.__s._$1oR$completeVisibleCells.apply(r,a),this._ensureVisibleCellRange(t,n)},shouldEstimateSectionLayout:function(e,t){if(this.alwaysForceSquareCells)return!0;var n=e.collection;return!n.instanceOf(mO)&&n.length>0||!t||t.isPlaceholder},estimateRowHeight:function(e,t){return t.rowHeight+(t.hasCaptions?t.captionHeight:0)},shouldCellHaveCaption:function(e,t){return e.layoutMetrics.hasCaptions},captionHeightForCell:function(e,t){return this.shouldCellHaveCaption(e,t)?e.layoutMetrics.captionHeight:0},centerAlign:function(e,t){for(var n=t.y,i=0,r=0,a=t.cells,s=a.length,o=0;o<s;o++){var l=a[o],c=this.sizeForCell(e,l).height;c>i&&(i=c);var u=c+this.captionHeightForCell(e,l);u>r&&(r=u)}for(var d=0;d<s;d++){var h=a[d],p=this.sizeForCell(e,h).height;h.sectionY=n+(i-p)/2}t.height=r},layoutStickyFooterCell:function(e,t,n,i,r){var a=this.lastAnchorableItem(n,r);if(a&&a.handle.position===a.handle.maximumPosition){var s=n.layoutMetrics.bottomPadding,o=n.viewportHeight,l=a.bottom+this.spaceBelowCell(n,a)-t-s;if(l>o)return;var c=this.owner.view.scrollHeight,u=this.owner.view.normalizedY;if(!(u>0&&c-o-u<0)){var d=o-t-s;l=Math.max(d,l)}var h=this.cellForHandle(null,e);h.retain(),h.value=i,this.layOutCellInDirection(n,h,1,l),r.push(h),h.release()}},_ensureVisibleCellRange:function(e,t){var n=t&&t.length;if(n){for(var i=Sh.arrayPool,r=e.length,a=r-1,s=r,o=-1,l=i.getInstance(),c=0;c<n;c++){var u=t.objectAt(c);if("item"===u.cellType){var d=u.handle.position;d<0||d>a?l[l.length]=d:(s=Math.min(s,d),o=Math.max(o,d))}}l.length?i.disposeInstance(l):(i.disposeInstance(l),Zl.a.begin().setIfChanged(this,"firstItemIndex",s).setIfChanged(this,"lastItemIndex",o).end())}},__superMap:{_$1ZJ$isCellPreferredAnchor:"isCellPreferredAnchor",_$1oR$completeVisibleCells:"completeVisibleCells"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridLayoutDelegate"}}),vO=Ic.columnSpacingAspectRatio,bO=Ic.columnSpacingSquare,yO=Ic.rowSpacingAspectRatio,wO=Ic.rowSpacingSquare,IO=Km.LayoutMetricsClass.extend({mixinDependencies:[fl.a],calculatedItemCount:V.b({dependencies:["columnCount","calculatedRowCount"],get:Object.assign((function(){return this.columnCount*this.calculatedRowCount}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}}),readOnly:!0}),calculatedRowCount:V.b({dependencies:["viewportHeight","rowHeight","rowSpacing"],get:Object.assign((function(){var e=this.viewportHeight,t=this.rowHeight,n=this.rowSpacing;return Math.ceil(e/(t+n))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return Math.ceil(r/(a+s))}}),readOnly:!0}),columnCount:V.b(4),columnSpacing:V.b({dependencies:["isSquareCrop"],get:Object.assign((function(){return this.isSquareCrop?bO:vO}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?bO:vO}}),readOnly:!0}),columnWidth:V.b({dependencies:["columnCount","columnSpacing","sectionLeftPadding","sectionRightPadding","viewportWidth"],get:Object.assign((function(){var e=this.columnCount,t=this.columnSpacing,n=this.viewportWidth,i=this.sectionLeftPadding,r=this.sectionRightPadding;return 0===e?0:(n-i-r-(e-1)*t)/e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[4+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[3+n]);return 0===r?0:(s-o-l-(r-1)*a)/r}}),readOnly:!0}),isSquareCrop:V.b(!0),justification:Wm.Left,rowHeight:V.b({readOnly:!0,dependencies:["columnWidth"],get:Object.assign((function(){return Math.round(this.columnWidth)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n]))}})}),rowSpacing:V.b({dependencies:["isSquareCrop"],get:Object.assign((function(){return this.isSquareCrop?wO:yO}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?wO:yO}}),readOnly:!0}),captionHeight:V.b(0),bottomPadding:V.b(23),hasCaption:V.b(!1),hasHeaders:V.b(!1),hasFloatingHeaders:V.b(!1),hasFooters:V.b(!1),headerHeight:V.b(0),footerHeight:V.b(0),initialPosition:V.b(Um.c.Top),sectionBottomPadding:V.b(13),sectionLeftPadding:V.b(16),sectionRightPadding:V.b(16),sectionTopPadding:V.b(0),shouldStickAtBottom:V.b(!0),shouldStickAtTop:V.b(!0),topPadding:V.b(0),viewportHeight:V.b(1024),viewportWidth:V.b(1024),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridLayoutMetrics"}});function SO(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function CO(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){SO(a,i,r,s,o,"next",e)}function o(e){SO(a,i,r,s,o,"throw",e)}s(void 0)}))}}var EO={_ensureRangeDebounce:500,_lastEnsureRangeTimerId:void 0,_hasEnsuredRangeOnce:V.b(!1),pageSize:V.b(1),ensureRangeWithLimiter:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;clearTimeout(this._lastEnsureRangeTimerId),this._lastEnsureRangeTimerId=X.a(CO(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&e.canEnsureRange){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.ensureRange(n,i);case 4:if(!t.isDisposed){r.next=6;break}return r.abrupt("return");case 6:t._hasEnsuredRangeOnce=!0;case 7:case"end":return r.stop()}}),r)}))),this._ensureRangeDebounce)},pagedFirstItemIndex:V.b(0),pagedLastItemIndex:V.b(0),_pagedItemsDidChange:B.h({inputs:["collection","collection.source","calculatedItemCount","firstItemIndex","lastItemIndex","pageSize","_hasEnsuredRangeOnce"],callback:function(e,t,n,i,r,a,s){if(void 0!==e&&void 0!==t){var o=n*(s?a:Math.min(1,a));if(Number.isSafeInteger(o)&&o>0){var l=(Math.min(i,r)+Math.max(i,r))/2,c=Math.max(0,Math.floor(l/o)*o-o),u=Math.max(0,Math.min(e.length-1,Math.ceil(l/o)*o+o));Zl.a.begin().setIfChanged(this,"pagedFirstItemIndex",c).setIfChanged(this,"pagedLastItemIndex",u).end()}}}}),_pagedRangeDidChange:B.h({inputs:["collection","collection.source","collection.canEnsureRange","pagedFirstItemIndex","pagedLastItemIndex"],callback:function(e,t,n,i,r){e&&n&&e.length>0&&Number.isSafeInteger(i)&&i>=0&&Number.isSafeInteger(r)&&r>=0&&i<=r&&this.ensureRangeWithLimiter(e,i,r)}})},AO={MAX:1e3,count:0},OO={mixinDependencies:[fl.a],DERIVATIVE_PRELOAD_BUCKET_SIZE:16,DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_MOUSE:40,DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_TOUCH:10,DERIVATIVE_PRELOAD_EXPANSION_FRACTION_MOUSE:2,DERIVATIVE_PRELOAD_EXPANSION_FRACTION_TOUCH:1,DERIVATIVE_PRELOAD_ABSOLUTE_MAX_EXPANSION:150,DERIVATIVE_PRELOAD_MAINTENANCE_THROTTLE_TIME:250,_expansionConstant:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH?this.DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_TOUCH:this.DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_MOUSE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH?this.DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_TOUCH:this.DERIVATIVE_PRELOAD_EXPANSION_CONSTANT_MOUSE}})}),_expansionFraction:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH?this.DERIVATIVE_PRELOAD_EXPANSION_FRACTION_TOUCH:this.DERIVATIVE_PRELOAD_EXPANSION_FRACTION_MOUSE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH?this.DERIVATIVE_PRELOAD_EXPANSION_FRACTION_TOUCH:this.DERIVATIVE_PRELOAD_EXPANSION_FRACTION_MOUSE}})}),_ensureDerivativePreloadRange:function(e){if(this._isEffectivelyAttached){var t=this.collection,n=t&&t.length;if(t&&n&&!(this._preloaders_lastEDPRTime+this.DERIVATIVE_PRELOAD_MAINTENANCE_THROTTLE_TIME>Date.now())){this._preloaders_lastEDPRTime=Date.now();for(var i,r,a=e&&e.length,s=0;s<a&&!i;s++){var o=e.objectAt(s),l=o&&o.value;(pi.a(l,fr.a)||pi.a(l,jt.a))&&(i=l)}for(var c=a-1;c>=0&&!r;c--){var u=e.objectAt(c),d=u&&u.value;(pi.a(d,fr.a)||pi.a(d,jt.a))&&(r=d)}if(i&&r){var h=t.indexOf(i),p=t.indexOf(r);if(h>=0&&p>=0){var f=this.DERIVATIVE_PRELOAD_BUCKET_SIZE,g=this.getPath("layoutMetrics.columnCount"),m=g*g*this.viewportHeight/this.viewportWidth,_=m+2*Math.min(this.DERIVATIVE_PRELOAD_ABSOLUTE_MAX_EXPANSION,this._expansionConstant+m*this._expansionFraction|0),v=Math.ceil(_/f)*f,b=h/2+p/2-v/2,y=Math.max(0,Math.floor(b/f)*f),w=y+v-1;w>n-1&&(y=Math.max(0,n-v),w=n-1),this._schedulePassivePreloaderRangeMaintenance();var I=this._preloaders,S=this._preloaders_lastFirstIndex,C=this._preloaders_lastLastIndex;if(!Object.is(y,S)||!Object.is(w,C)){var E=Sh.arrayPool.getInstance();if(this._preloaders=E,this._preloaders_lastFirstIndex=y,this._preloaders_lastLastIndex=w,E.length=w-y+1,!I||isNaN(S)||isNaN(C)||isNaN(y)||isNaN(w))for(var A=0,O=I&&I.length;A<O;A++){var T=I[A];T&&T.release(this,"in preloaders")}else{for(var M=S,D=Math.min(y-1,C);M<=D;M++){var P=I[M-S];P&&P.release(this,"in preloaders")}for(var L=Math.max(y,S),R=Math.min(w,C);L<=R;L++){var x=I[L-S];x&&(E[L-y]=x)}for(var N=Math.max(w+1,S);N<=C;N++){var F=I[N-S];F&&F.release(this,"in preloaders")}}I&&Sh.arrayPool.disposeInstance(I),this._preloaders_lastCenterVisibleIndex=h/2+p/2|0,this._preloaders_lastEstimatedMaxItemsPerScreen=m,this._reprioritizePreloaders()}}}}}},_clearAllPreloaders:function(){var e=this._preloaders,t=this._preloaders_lastFirstIndex,n=this._preloaders_lastLastIndex;if(e){for(var i=t;i<=n;i++){var r=e[i-t];r&&r.release(this,"in preloaders")}Sh.arrayPool.disposeInstance(e)}this._preloaders=this._preloaders_lastFirstIndex=this._preloaders_lastLastIndex=this._preloaders_lastEDPRTime=void 0},_schedulePassivePreloaderRangeMaintenance:function(){this._passivePreloaderRangeMaintenanceTimeout||(this._passivePreloaderRangeMaintenanceTimeout=mu.a(this._passivelyAddSomePreloaders))},_passivelyAddSomePreloaders:Bu.b((function(){if(!this.isDisposed){this._passivePreloaderRangeMaintenanceTimeout=null;var e=this._preloaderClass,t=this._preloaders,n=this._preloaders_lastFirstIndex,i=this._preloaders_lastLastIndex,r=this._preloaders_lastCenterVisibleIndex,a=performance.now();if(t&&i-n>0){var s,o,l=0;do{if(o=r+l,(s=r-l)>=n&&!t[s-n]){var c=this._getMediaAtIndex(s);if(c){var u=e.create(c,this.derivativePreloadRequestReason||Jp.a.GRID_ASSET_PREFETCH).retain(this,"in preloaders");this._prioritizePreloaderForIndex(u,s),t[s-n]=u}}if(o<=i&&!t[o-n]){var d=this._getMediaAtIndex(o);if(d){var h=e.create(d,this.derivativePreloadRequestReason||Jp.a.GRID_ASSET_PREFETCH).retain(this,"in preloaders");this._prioritizePreloaderForIndex(h,o),t[o-n]=h}}if(l++,s<n&&o>i)break}while(performance.now()-a<.5);(s>n||o<i)&&this._schedulePassivePreloaderRangeMaintenance()}}})),_reprioritizePreloaders:function(){for(var e=this._preloaders,t=this._preloaders_lastFirstIndex,n=this._preloaders_lastLastIndex,i=t;i<=n;i++)this._prioritizePreloaderForIndex(e[i-t],i)},_prioritizePreloaderForIndex:function(e,t){if(e){var n=Math.abs(t-this._preloaders_lastCenterVisibleIndex);e.derivativePriority=1e5+n,e.derivativeOffscreeniness=n/this._preloaders_lastEstimatedMaxItemsPerScreen}},_underlyingPreloaderClass:GE.a,_preloaderClass:H.d((function(){return this._underlyingPreloaderClass.extend(uc.a,{derivativeContainerWidth:this.bindingFor("layoutMetrics.columnWidth"),derivativeContainerHeight:this.bindingFor("layoutMetrics.rowHeight"),shouldCorrectDerivativeForDevicePixelRatio:!0,shouldDerivativeCoverContainer:V.b(this.bindingFor("layoutMetrics.isSquareCrop")),shouldAvoidDerivativeTranscoder:H.d({get:function(){return AO.count>AO.MAX}}),didUseDerivativeTranscoder:function(){AO.count++},initFromPool:function(e,t){this.__s._$4zv$initFromPool.call(this),this.derivativeRequestReason=t,this.media=e},cleanup:function(){var e=this,t=arguments;e.__s._$51L$cleanup.apply(e,t),this.derivativeRequestReason=this.media=null},derivative:V.b({didChange:U.a}),__superMap:{_$4zv$initFromPool:"initFromPool",_$51L$cleanup:"cleanup"}})})),derivativePreloadRequestReason:void 0,_getMediaAtIndex:function(e){var t=this.collection;if(!t)return null;var n=t.objectAt(e);return n?pi.a(n,fr.a)?n:(n=n.keyMedia,pi.a(n,fr.a)?n:null):null},_scheduleMaintenanceForContentChange:B.h("collection","collection.contentsDidChange",(function(){this._schedulePassivePreloaderRangeMaintenance()})),_clearOrRestartPreloadersForAttachment:function(e){if(e){var t=this.getPath("layoutController.visibleCells");t&&this._ensureDerivativePreloadRange(t)}else this._clearAllPreloaders()},_isEffectivelyAttached:V.b({readOnly:!0,dependencies:["isAttached","view.isAttached"],get:Object.assign((function(){return Boolean(this.isAttached&&this.getPath("view.isAttached"))}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}}),didChange:function(e){this._clearOrRestartPreloadersForAttachment(e)}})},TO=n(785),MO=n(472),DO=TO.a.extend({mixinDependencies:[ZA],singleColumnCellWidth:V.b(0),itemViewDidMove:function(e,t){var n=this.singleColumnCellWidth,i=this.layoutMetrics.isSquareCrop,r=t.x,a=t.y,s=this.presentingView;s&&s.hasMixin(MO.a)&&(r+=s.nativeScrollX,a+=s.nativeScrollY),Je.a(e.doLayout)?(e.__isBaseFlowGridItemView__&&e.style.set("z-index",t.handle.position),e.doLayout(r,a,t.width,t.height,i,n)):e.style.set("width",t.width).set("height",t.height).translateDevicePixels(r,a);var o=e.owningGrid;if("header"===t.cellType)e.isFloatingToTop=t.isFloatingToTop,e.element.style.clip="rect("+t.clipTop+"px auto auto auto)";else if("item"===t.cellType&&o.__hasPhotosGridSelectionSupport){var l=o.isItemAtHandleSelected(t.handle);e.isSelected!==l&&(e.isSelected=l)}},itemViewDidExit:function(e){e&&(e.style.translate(-1e4,-1e4),Je.a(e.clearForReuse)?e.clearForReuse():e.set(this.dataProperty,null),e.isSelected&&(e.isSelected=!1))},cellsDidMove:function(){var e=this,t=arguments;e.__s._$rh$cellsDidMove.apply(e,t),this._momentarilySuspendDerivativeCreations()},_momentarilySuspendDerivativeCreations:function(){this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):fr.a.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=X.a(this._resumeDerivativeCreations,250)},_resumeDerivativeCreations:Bu.b({disposeGuarded:!1,function:function(){this._resumeDerivativeCreationsTimeout=null,fr.a.resumeDerivativeCreations()}}),__superMap:{_$rh$cellsDidMove:"cellsDidMove"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPresenter"}}),PO={mixinDependencies:[Mp.a],_scrollBy:function(e,t){var n=this,i=arguments;n.__s._$3V$_scrollBy.apply(n,i),this.scrollMotionX.handleDelta(e),this.scrollMotionY.handleDelta(t)},scrollMotionX:V.b({strong:!0,defaultValue:k.c(nE.a,{zeroSpeedCutoff:3,emaHalfLife:.05})}),scrollMotionY:V.b({strong:!0,defaultValue:k.c(nE.a,{zeroSpeedCutoff:3,emaHalfLife:.05})}),__superMap:{_$3V$_scrollBy:"_scrollBy"}},LO=C_.a.extend(Dp.a,PO,Pl.a).extend({init:function(){var e=this,t=arguments;if(e.__s._$52$init.apply(e,t),!1===this.nativeScrollIsEnabled){this.killScrollTop=this.killScrollTop.bind(this);var n=this.element;n.addEventListener("scroll",this.killScrollTop),n.firstChild.addEventListener("scroll",this.killScrollTop)}},killScrollTop:function(e){var t=e.target;t&&t.scrollTop&&(t.scrollTop=0)},staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldPixelateImagesRatchet.value",truevalue:"should-pixelate-images",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotosGridView"},additionalClassNames:F.b(["pgk-photos-grid-view"]),horizontalScrollIndicatorClass:Pp.a.extend({useCSSThickness:!0}),verticalScrollIndicatorClass:Pp.c.extend({useCSSThickness:!0}),pointerMove:function(){var e=this.horizontalScrollIndicator,t=this.verticalScrollIndicator;e&&(e.isEnlarged=e.isInstantlyEnlarged=!0),t&&(t.isEnlarged=t.isInstantlyEnlarged=!0),this.showScrollIndicators()},shouldPixelateImages:V.b({readOnly:!0,dependencies:["scrollMotionY.emaSpeed",p.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){return p.a.sharedInstance.devicePixelRatio>=2&&this.getPath("scrollMotionY.emaSpeed")>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])>=2&&i.internalGetPath(this,t[0+n])>0}})}),shouldPixelateImagesRatchet:V.b({strong:!0,defaultValue:k.c(WC.a,{defersDowngrades:250}),downstreamBindings:{targetValue:"(owner).shouldPixelateImages"}}),cleanup:function(){var e=this,t=arguments;if(this.stopMomentumScroll(),!1===this.nativeScrollIsEnabled){var n=this.element;n.removeEventListener("scroll",this.killScrollTop),n.firstChild.removeEventListener("scroll",this.killScrollTop)}e.__s._$um$cleanup.apply(e,t)},__superMap:{_$52$init:"init",_$um$cleanup:"cleanup"}}),RO=YA.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext"}},__QUALIFIED_CLASS_NAME__:"PhotosGridHeaderView"}}),xO=Ei.a.extend({mixinDependencies:[EO,OO,XA],calculatedItemCount:V.b(Oi.c("layoutMetrics.calculatedItemCount")),firstItemIndex:V.b(Oi.c("layoutDelegate.firstItemIndex")),lastItemIndex:V.b(Oi.c("layoutDelegate.lastItemIndex")),pageSize:V.b(2),itemViewClass:uO.extend({motionSpeed:Oi.c("parent.scrollMotionY.emaSpeed")}),isSelectionEnabled:V.b(!0),layoutDelegate:V.b({defaultValue:_O,readOnly:!0}),layoutMetrics:V.b({defaultValue:k.c(IO),downstreamBindings:{viewportHeight:"(owner).viewportHeight",viewportWidth:"(owner).viewportWidth"}}),presenter:DO.extend({owner:V.b(),singleColumnCellWidth:Oi.c("owner.layoutMetrics.columnWidth"),cellsDidMove:function(e){var t=this,n=arguments,i=this.owner;return i&&i._ensureDerivativePreloadRange(e),t.__s._$is$cellsDidMove.apply(t,n)},viewForViewClass:function(){var e=this,t=arguments,n=e.__s._$k0$viewForViewClass.apply(e,t);return pi.a(n,uO)&&n.bind("shouldHideMostProminentDisplayOfMediaWithPK",this.owner.bindingFor("shouldHideMostProminentDisplayOfMediaWithPK")),n.owningGrid=this.owner,n},__superMap:{_$is$cellsDidMove:"cellsDidMove",_$k0$viewForViewClass:"viewForViewClass"}}),viewClass:LO,headerViewClass:RO,shouldHideMostProminentDisplayOfMediaWithPK:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridViewController"}}),NO=n(681),FO={mixinDependencies:[B.b,uc.a],requiresHostMixins:[],staticMembers:{requiresHostMixins:[],existenceDependenciesOnHost:[],shouldExistInHost:function(){return!0}},host:V.b(),initFromPool:function(e){this.__s._$7N$initFromPool.call(this),this.host=e},cleanup:function(){var e=this,t=arguments;this.host=null,e.__s._$8s$cleanup.apply(e,t)},willBeAddedToParent:U.a,wasAddedToParent:U.a,willBeRemovedFromParent:U.a,wasRemovedFromParent:U.a,__superMap:{_$7N$initFromPool:"initFromPool",_$8s$cleanup:"cleanup"}},VO=P.a.extend(FO,{staticMembers:{__QUALIFIED_CLASS_NAME__:"Adornment"}}),kO={mixinDependencies:[FO],element:V.b(),wantsPresenceInHost:V.b(!0),hostOutletName:V.b("element"),didAppendElement:function(){},willRemoveElement:function(){},_hostElement:V.b({readOnly:!0,dependencies:["host","hostOutletName"],get:Object.assign((function(){var e=this.host,t=this.hostOutletName;return e&&t?e[t]:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&a?r[a]:null}})}),_maintainElementPresence:B.h("wantsPresenceInHost","element","_hostElement",(function(e,t,n){var i=e&&n&&t||null,r=this._mep_lastAppendedElement;this._mep_lastAppendedElement=i,r&&r!==i&&r.parentNode&&(this.willRemoveElement(r),r.parentNode.removeChild(r)),i&&i.parentNode!==n&&(i.parentNode&&i.parentNode.removeChild(i),n.appendChild(i),this.didAppendElement(i))}))},BO=P.a.extend(kO,{tagName:"div",classNames:[],element:V.b((function(){var e=document.createElement(this.tagName);return e.className=this.classNames.join(" "),e})),staticMembers:{__QUALIFIED_CLASS_NAME__:"ElementAdornment"}});function jO(e){return UO.call(this,e)}function UO(e,t){var n=e.element,i=n.parentNode;if(i){if(i===this&&t===n.nextSibling)return e;GO.call(i,e)}this.insertBefore(n,t);var r=P_.b(this);return Pe.a.pause(),e.parent=r,e.nextResponder=r,Pe.a.resume(),e}function GO(e){return P_.b(this),this.removeChild(e.element),Pe.a.pause(),e.parent=null,e.nextResponder=null,Pe.a.resume(),e}var HO={mixinDependencies:[kO],_maintainElementPresence:B.h({inputs:["wantsPresenceInHost","_hostElement"],callback:function(e,t){var n=this.element,i=n.parentNode,r=null!==this.parent;if(!(e&&r&&t===i||!e&&!r)){var a=e&&t;r&&(!e||i!==t)&&(this.willRemoveElement(n),GO.call(i,this)),a&&(jO.call(t,this),this.didAppendElement(n))}}})},WO=In.a.extend(HO,{staticMembers:{__QUALIFIED_CLASS_NAME__:"ViewAdornment"}}),$O=function(e){return e.parentNode&&e.parentNode.removeChild(e)},zO={fadeInDuration:200,fadeOutDuration:200,visibleOpacity:1,canFadeElementIn:function(){return!0},canFadeElementOut:function(){return!0},didAppendElement:function(e){var t=this,n=arguments;t.__s._$9f$didAppendElement.apply(t,n);var i=this.host;this.fadeInDuration&&i&&this.canFadeElementIn(i)?oO(e,0,this.visibleOpacity,this.fadeInDuration):1!==this.visibleOpacity?e.style.opacity=this.visibleOpacity:e.style.opacity=""},willRemoveElement:function(e){var t=this,n=arguments;t.__s._$GA$willRemoveElement.apply(t,n),lO(e);var i=KO(e);if(this.fadeOutDuration&&i&&this.canFadeElementOut(i)){var r=Ml(e);r.style.pointerEvents="none",e.parentNode.insertBefore(r,e);var a=parseFloat(e.style.opacity||"1"),s=aO(a);oO(r,a,0,this.fadeOutDuration*s,Object(of.a)($O,void 0,r))}},__superMap:{_$9f$didAppendElement:"didAppendElement",_$GA$willRemoveElement:"willRemoveElement"}};function KO(e){var t=e;do{var n=t.view;if(n&&n.__hasAdornmentHostSupport__)return n}while(t=t.parentNode)}var qO={mixinDependencies:[zO],canFadeElementIn:function(e){return e&&!e.isClearedForReuse&&e.hasBeenLaidOutAWhile},canFadeElementOut:function(e){return e&&!e.isClearedForReuse&&e.hasBeenLaidOutAWhile}},QO=n(1278),YO=new WeakMap,ZO=function(){cancelAnimationFrame(this.timeoutHandle),YO.delete(this.circleSvgElement),Sh.objectPool.disposeInstance(this)},XO=function e(){var t=Math.max(0,Math.min(1,(performance.now()-this.startTime)/this.duration));this.circleSvgElement.setAttribute("stroke-width",this.targetStrokeWidth*t+this.initialStrokeWidth*(1-t)),this.circleSvgElement.setAttribute("r",this.targetRadius*t+this.initialRadius*(1-t)),t<1?this.timeoutHandle=mu.a(of.a(e,this)):this.stopAnimating()};function JO(e,t){if(e){var n=e.firstElementChild;if(n){var i=n.lastElementChild,r=n.firstElementChild;t?(i.removeAttribute("display"),r.setAttribute("fill","#146FDF")):(i.setAttribute("display","none"),r.setAttribute("fill","none"));for(var a=!1,s=e;s=s.parentNode;){var o=s.view;if(o&&!o.isDisposing&&!o.isDisposed&&o.isAttached||s===document.body){a=!0;break}}if(!a){var l=YO.get(r);return l&&l.stopAnimating(),r.setAttribute("stroke-width",t?2:3.5),void r.setAttribute("r",t?23:22.25)}var c=YO.get(r);if(!c||c.isTowardOn!==t){c&&c.stopAnimating();var u=Sh.objectPool.getInstanceWithProperties("isTowardOn",t,"initialStrokeWidth",parseFloat(r.getAttribute("stroke-width")),"initialRadius",parseFloat(r.getAttribute("r")),"targetStrokeWidth",t?2:3.5,"targetRadius",t?23:22.25,"duration",50,"startTime",performance.now(),"circleSvgElement",r,"timeoutHandle",void 0,"handleFrame",XO,"stopAnimating",ZO);u.handleFrame(),YO.set(r,u)}}}}var eT,tT={mixinDependencies:[qO],fadeInDuration:50,fadeOutDuration:50,wantsPresenceInHost:Oi.c("host.isSelected")},nT={classNames:F.b(["dimmed-grid-item"])},iT=BO.extend({mixinDependencies:[tT,fl.a],classNames:F.b(["selection-outline-or-checkmark-adornment"]),fadeInDuration:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?0:50}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?0:50}})}),fadeOutDuration:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?0:50}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?0:50}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SelectionOutlineOrCheckmarkAdornment"}}).extend(nT,{staticMembers:{__QUALIFIED_CLASS_NAME__:"DimmedSelectionOutlineOrCheckmarkAdornment"}}),rT=WO.extend({mixinDependencies:[Qp,qO,fl.a,Nu],init:function(){var e=this,t=arguments;e.__s._$lP$init.apply(e,t);var n=this.singleTapGestureRecognizer=qp.a.create({event:"selectAdornment",delegate:this});this.addGestureRecognizer(n);var i=this.singleTapWithShiftGestureRecognizer=qp.a.create({event:"selectAdornment",delegate:this,modifiers:new Set([Zp.a.Shift])});this.addGestureRecognizer(i)},isInteractionDisabled:V.b(),isSelected:V.b(),isSelectionEnabled:V.b(),additionalClassNames:F.b(["cw-has-right-icon","selection-checkmark-toggle-adornment"]),icon:QO,fadeInDuration:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?0:50}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?0:50}})}),fadeOutDuration:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?0:50}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?0:50}})}),isSelectedObserver:B.h({inputs:["isSelected"],callback:function(){var e=this.element;JO((void 0===e?{firstElementChild:null}:e).firstElementChild,this.isSelected)}}),wantsPresenceInHost:V.b({readOnly:!0,dependencies:["primaryInteractionMode","isSelected","isInteractionDisabled","isSelectionEnabled"],get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.isSelected,n=this.isInteractionDisabled,i=this.isSelectionEnabled;return!n&&(t||e===yn.a.MOUSE&&(Ic.implicitDesktopSelectionMode||i))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]);return!s&&(a||r===yn.a.MOUSE&&(Ic.implicitDesktopSelectionMode||o))}})}),singleTapGestureRecognizer:void 0,selectAdornment:function(e){var t=e.state;this.sendEvent("selectView",{state:t,view:this.host})},gestureRecognizerShouldReceive:function(){var e=this,t=arguments;return this.primaryInteractionMode!==yn.a.TOUCH&&e.__s._$1uC$gestureRecognizerShouldReceive.apply(e,t)},__superMap:{_$lP$init:"init",_$1uC$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SelectionCheckmarkToggleAdornment"}}),aT={mixinDependencies:[Qp],isSelectionEnabled:V.b(),selectionAdornment:NO.adornmentProperty({appliesImmediately:!0,adornmentClass:iT})},sT=ml.a,oT=sT.CTRL,lT=sT.CMD,cT=Qm,uT=nu.a.get("sharedInstance"),dT={mixinDependencies:[xw,fl.a],itemViewClass:F.b(aT),presenter:F.b({viewForViewClass:function(){var e=this,t=arguments,n=e.__s._$EG$viewForViewClass.apply(e,t);return n&&n.singleTapGestureRecognizer&&"selectView"===n.singleTapGestureRecognizer.event&&(n.singleTapGestureRecognizer.dragThreshold=500),n},__superMap:{_$EG$viewForViewClass:"viewForViewClass"}}),__hasPhotosGridSelectionSupport:!0,isMultipleSelectionEnabled:V.b(!0),isSelectAllEnabled:V.b(!0),isMouseSelectionAdditive:V.b(!1),isRangeSelectionEnabled:V.b(!0),isEmptySelectionEnabled:V.b(!0),isWhitespaceDeselectionEnabled:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign((function(e){return void 0!==e?e:this.primaryInteractionMode===yn.a.MOUSE}),{__CW__getter:function(e,t,n,i){return void 0!==e?e:i.internalGet(this,t[0+n])===yn.a.MOUSE}})}),isFocusable:V.b(!0),_focus:B.h({inputs:["isAttached"],callback:function(e){e&&this.focus()}}),get metaKeyForDevice(){return p.a.sharedInstance.isWindows?oT:lT},isMetaKeyPressedForEvent:function(e){var t=e.ctrlKey,n=e.metaKey;return p.a.sharedInstance.isWindows?t:n},deselectAll:function(){this.isEmptySelectionEnabled&&this.selectionController.userPerformedSelectionOperation(null,cT.SET)},deselectItem:function(e){var t=e.handle;this.selectionController.userPerformedSelectionOperation(t,cT.REMOVE)},selectAll:function(){this._focus(),this.isSelectAllEnabled&&this.isMultipleSelectionEnabled&&this.isSelectionEnabled&&this.selectionController.selectAll()},selectItem:function(e){var t=e.handle;this.isSelectionEnabled&&this.selectionController.userPerformedSelectionOperation(t,cT.ADD)},keyDown:function(e){var t=this,n=e.key,i=this.isMetaKeyPressedForEvent(e);return!0===i&&"a"===n?(e.preventDefault(),this.handleKeyboardSelectAll(),!0):!!t.__s._$1cE$keyDown&&t.__s._$1cE$keyDown.apply(this,arguments)},handleKeyboardSelectAll:function(){return this.selectAll()},selectRange:function(e,t){var n=e.handle,i=t.handle;this.isRangeSelectionEnabled&&this.isMultipleSelectionEnabled&&this.isSelectionEnabled&&(this.selectionController.selectRange(n,i),this.selectionController.userPerformedSelectionOperation(i,cT.ADD))},clearSelection:function(){var e=this,t=arguments;if(this._focus(),this.isWhitespaceDeselectionEnabled&&!uT.activeKeys.has(this.metaKeyForDevice)&&!uT.activeKeys.has(ml.a.SHIFT))return e.__s._$2Cd$clearSelection.apply(e,t)},userSelectionRequest:function(e){var t=this,n=arguments;if(this._focus(),e&&this.isSelectionEnabled){var i=e.view,r=i&&this.presenter.cellForView(i),a=this.isMouseSelectionAdditive||this.primaryInteractionMode===yn.a.TOUCH,s=this.selectionController;if(a)if(i.isSelected)this.deselectItem(r);else{var o=s.pivot;uT.activeKeys.has(ml.a.SHIFT)&&o?this.selectRange(r,{handle:o}):this.selectItem(r),s.pivot=r.handle}else{if(i.isSelected&&e.operation.equals(cT.SET))return;t.__s._$2md$userSelectionRequest.apply(t,n)}}},getSelectedMediaPKs:function(){return this.selectionController.selection.encodedToArray()},__superMap:{_$1cE$keyDown:"keyDown",_$2Cd$clearSelection:"clearSelection",_$2md$userSelectionRequest:"userSelectionRequest"}},hT=n(447),pT=n(583),fT={isSelectionRectangleDraggingEnabled:V.b(),doesPointLieInAnItemView:V.b(),allowsScrollingWhileDraggingSelectionRectangle:!1,dragSelectShouldAlwaysInvertSelections:V.b(),selectionDragGR:V.b({strong:!0}),selectionDragGRClass:hT.a.extend(pT.a,B.b,{event:"selectionDrag",assumesViewIsStationary:!0,_ourRect:void 0,invertsSelections:V.b(),x1:V.b(),y1:V.b(),x2:V.b(),y2:V.b(),rectLeft:V.b({readOnly:!0,dependencies:["x1","x2"],get:Object.assign((function(){var e=this.x1,t=this.x2,n=Math.min(e,t),i=Math.max(e,t),r=Math.abs(e-t);return r<3?i-r:n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=Math.min(r,a),o=Math.max(r,a),l=Math.abs(r-a);return l<3?o-l:s}})}),rectWidth:V.b({readOnly:!0,dependencies:["x1","x2"],get:Object.assign((function(){var e=this.x1,t=this.x2;return Math.max(3,Math.abs(e-t))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return Math.max(3,Math.abs(r-a))}})}),rectTop:V.b({readOnly:!0,dependencies:["y1","y2"],get:Object.assign((function(){var e=this.y1,t=this.y2,n=Math.min(e,t),i=Math.max(e,t),r=Math.abs(e-t);return r<3?i-r:n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=Math.min(r,a),o=Math.max(r,a),l=Math.abs(r-a);return l<3?o-l:s}})}),rectHeight:V.b({readOnly:!0,dependencies:["y1","y2"],get:Object.assign((function(){var e=this.y1,t=this.y2;return Math.max(3,Math.abs(e-t))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return Math.max(3,Math.abs(r-a))}})}),rect:V.b({strong:!0,defaultValue:k.c(Ko.a.extend({owner:V.b(),x:Oi.c("owner.rectLeft"),y:Oi.c("owner.rectTop"),width:Oi.c("owner.rectWidth"),height:Oi.c("owner.rectHeight"),invertsSelections:V.b(Oi.c("owner.invertsSelections")),isPresentable:V.b({readOnly:!0,dependencies:["x","y","width","height"],get:Object.assign((function(){return this.x+this.y+this.width+this.height<1/0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+i.internalGet(this,t[3+n])<1/0}})})}))}),pointerDown:function(e){var t=this,n=arguments;this.pauseStateChanges();var i=t.__s._$1uP$pointerDown.apply(t,n),r=this.view.element.getBoundingClientRect();return this.assumesViewIsStationary&&(this._ourRect=r),Pe.a.pause(),this.invertsSelections=this.view.dragSelectShouldAlwaysInvertSelections||e.metaKey||e.altKey||e.shiftKey,this.x1=this.x2=Math.round(e.clientX)-r.left,this.y1=this.y2=Math.round(e.clientY)-r.top,Pe.a.resume(),this.resumeStateChanges(),i},pointerMove:function(e){var t=this,n=arguments;this.pauseStateChanges();var i=t.__s._$2Lw$pointerMove.apply(t,n),r=this._ourRect||this.view.element.getBoundingClientRect();return Pe.a.pause(),this.x2=Math.round(e.clientX)-r.left,this.y2=Math.round(e.clientY)-r.top,Pe.a.resume(),this.resumeStateChanges(),i},reset:function(){var e=this,t=arguments;Pe.a.pause(),this.x1=this.x2=this.y1=this.y2=void 0,Pe.a.resume(),this._ourRect=void 0,e.__s._$2dN$reset.apply(e,t)},__superMap:{_$1uP$pointerDown:"pointerDown",_$2Lw$pointerMove:"pointerMove",_$2dN$reset:"reset"}}),init:function(){var e=this,t=arguments;e.__s._$2gr$init.apply(e,t),this.selectionDragGR=this.selectionDragGRClass.create({delegate:this}),this.addGestureRecognizer(this.selectionDragGR)},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;if(e!==this.selectionDragGR)return n.__s._$2mp$gestureRecognizerShouldReceive.apply(n,i);if(!this.isSelectionRectangleDraggingEnabled)return!1;var r,a=this.doesPointLieInAnItemView;return!(a&&!this.isSelectionDragGestureInProgress&&(r=this.element.getBoundingClientRect())&&a(t.clientX-r.left,t.clientY-r.top))&&n.__s._$2mp$gestureRecognizerShouldReceive.apply(n,i)},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return e!==this.selectionDragGR&&(t===this.selectionDragGR||n.__s._$31M$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i))},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments;return e===this.selectionDragGR||t!==this.selectionDragGR&&n.__s._$37s$gestureRecognizerShouldRequireFailureOf.apply(n,i)},selectionDrag:function(){this.propertyChanged("isSelectionDragGestureInProgress")},isSelectionDragGestureInProgress:V.b({readOnly:!0,get:function(){var e=this.getPath("selectionDragGR.state");return e===L_.b.Began||e===L_.b.Changed}}),selectionDragRect:V.b({readOnly:!0,dependencies:["selectionDragGR.rect","selectionDragGR.rect.isPresentable","isSelectionDragGestureInProgress"],get:Object.assign((function(){return this.isSelectionDragGestureInProgress&&this.getPath("selectionDragGR.rect.isPresentable")?this.getPath("selectionDragGR.rect"):void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])&&i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):void 0}})}),_maintainSelectionRectangleElement:B.h({inputs:["selectionDragRect","selectionDragRect.x","selectionDragRect.y","selectionDragRect.width","selectionDragRect.height"],callback:function(e,t,n,i,r){if(Boolean(this._msre_selectionDragRect)!==Boolean(this._msre_selectionDragRect=e))if(e){var a=this._msre_selectionRectangleElement=Sh.divPool.getInstance();a.style.cssText="position: absolute; background-color: rgba(215,215,215,0.3215686275); border: 1px solid rgba(233,233,233,0.8666666667); box-sizing: border-box; z-index: 1000000; pointer-events: none;",this.element.appendChild(a)}else{var s=this._msre_selectionRectangleElement;s&&(this._msre_selectionRectangleElement=void 0,s.style.transition="opacity 250ms",s.style.opacity=0,X.a((function(){return Sh.divPool.disposeInstance(s)}),270))}var o=this._msre_selectionRectangleElement;o&&(o.style.left=t+"px",o.style.top=n+"px",o.style.width=i+"px",o.style.height=r+"px")}}),_scrollBy:function(e,t){var n=this,i=arguments;if(!this.isSelectionDragGestureInProgress||this.allowsScrollingWhileDraggingSelectionRectangle){n.__s._$4Y9$_scrollBy.apply(n,i);var r=this.selectionDragGR;r.y1<1/0&&(r.y1-=t)}},__superMap:{_$2gr$init:"init",_$2mp$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$31M$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$37s$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$4Y9$_scrollBy:"_scrollBy"}},gT={mixinDependencies:[dT,fl.a],viewClass:F.b(fT),selectionDragRect:V.b(Oi.c("view.selectionDragRect")),isSelectionRectangleDraggingEnabled:V.b({readOnly:!0,dependencies:["isSelectionEnabled","isMultipleSelectionEnabled","isRangeSelectionEnabled","primaryInteractionMode"],get:Object.assign((function(){return this.isSelectionEnabled&&this.isMultipleSelectionEnabled&&this.isRangeSelectionEnabled&&this.primaryInteractionMode===yn.a.MOUSE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])&&i.internalGet(this,t[2+n])&&i.internalGet(this,t[3+n])===yn.a.MOUSE}})}),dragSelectShouldAlwaysInvertSelections:V.b({readOnly:!0,dependencies:["isWhitespaceDeselectionEnabled"],get:Object.assign((function(){return!this.isWhitespaceDeselectionEnabled}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),view:V.b({downstreamBindings:{isSelectionRectangleDraggingEnabled:"(owner).isSelectionRectangleDraggingEnabled",doesPointLieInAnItemView:"(owner).doesPointLieInAnItemView",dragSelectShouldAlwaysInvertSelections:"(owner).dragSelectShouldAlwaysInvertSelections"}}),_actOnChangingSelectionDragRect:B.h({inputs:["selectionDragRect","selectionDragRect.x","selectionDragRect.y","selectionDragRect.width","selectionDragRect.height","selectionDragRect.invertsSelections"],callback:function(e){var t=Boolean(this._aocsdr_selectionDragRect)!==Boolean(this._aocsdr_selectionDragRect=e);t&&e&&!e.invertsSelections&&this.deselectAll();var n=this._aocsdr_mediaPKs||Sh.arrayPool.getInstance(),i=e?this._findMediaPKsWithVisibleCellsIntersectingRect(e):Sh.arrayPool.getInstance();this._aocsdr_mediaPKs=i;var r=Sh.arrayPool.getAutodisposingInstanceFromFilter(i,of.b(_T,void 0,Sh.setPool.getAutodisposingInstanceFromArray(n)).retain().autorelease()),a=Sh.arrayPool.getAutodisposingInstanceFromFilter(n,of.b(_T,void 0,Sh.setPool.getAutodisposingInstanceFromArray(i)).retain().autorelease()),s=Sh.arrayPool.getAutodisposingInstance();s.push.apply(s,r),s.push.apply(s,a);for(var o,l=this.layoutController.visibleCells,c=Sh.setPool.getAutodisposingInstanceFromArray(s),u=Sh.arrayPool.getAutodisposingInstance(),d=0;o=l.objectAt(d);d++)if("item"===o.cellType){var h=o.value;if(h){var p=h.pk;c.has(p)&&u.push(o.handle)}}if(!t||e)for(var f=0,g=u.length;f<g;f++)this.selectionController.userPerformedSelectionOperation(u[f],Qm.TOGGLE);Sh.arrayPool.disposeInstance(n)}}),doesPointLieInAnItemView:V.b({get:function(){var e=this;return function(t,n){var i=e._findMediaPKsWithVisibleCellsIntersectingRect(Sh.objectPool.getAutodisposingInstanceWithProperties("x",t,"y",n,"width",0,"height",0)),r=Boolean(i.length);return Sh.arrayPool.disposeInstance(i),r}}}),_findMediaPKsWithVisibleCellsIntersectingRect:function(e){return Sh.arrayPool.getInstanceFromMap(Sh.arrayPool.getAutodisposingInstanceFromFilter(this.layoutController.visibleCells._array,of.b(vT,void 0,this.presenter.cellsToViews,e).retain().autorelease()),mT)}},mT=function(e){return e.value.pk},_T=function(e,t){return!e.has(t)},vT=function(e,t,n){if("item"!==n.cellType||!n.value)return!1;var i,r,a=e.get(n);return r=t,(i=a&&a.__hasCheapRectangleAwarenessSupport__?a.cheapRect:n).x<r.x+r.width&&i.x+i.width>r.x&&i.y<r.y+r.height&&i.y+i.height>r.y},bT=Sh.arrayPool,yT=Sh.objectPool,wT=of.b,IT=Math.PI,ST=2*IT,CT=IT/2,ET={verticesForRect:function(e){var t=e.x,n=e.y,i=e.width,r=e.height;return bT.getAutodisposingInstanceFromParams(t,n,t+i,n,t+i,n+r,t,n+r)},angleBetweenPoints:function(e,t,n,i){return ET.angleForVector(n-e,i-t)},angleForVector:function(e,t){return 1===arguments.length?ET.angleForVector(e.x,e.y):ET.vectorMagnitude(e,t)<1e-14?void 0:e?t?e>0&&t>0?Math.atan(t/e):e<0&&t>0?IT-Math.atan(t/-e):e<0&&t<0?-IT+Math.atan(t/e):e>0&&t<0?-Math.atan(-t/e):void _.b("Incorrect angle detection logic."):e?e>0?0:IT:void 0:t?t>0?CT:-CT:void 0},vectorMagnitude:function(e,t){return 1===arguments.length?ET.vectorMagnitude(e.x,e.y):Math.pow(Math.pow(e,2)+Math.pow(t,2),.5)},unitVectorForVector:function(e){if(2===arguments.length)return ET.unitVectorForVector(ET.vectorForComponents(e,arguments[1]));var t=ET.vectorMagnitude(e);return ET.vectorForComponents(e.x/t,e.y/t)},unitVectorForAngle:function(e){return ET.vectorForComponents(Math.cos(e),Math.sin(e))},vectorSum:function(){var e=bT.getAutodisposingInstanceFromParams.apply(bT,arguments);return ET.vectorForComponents(ET.sum.apply(ET,bT.getAutodisposingInstanceFromMap(e,wT(ET.getPropFromObject,void 0,"x"))),ET.sum.apply(ET,bT.getAutodisposingInstanceFromMap(e,wT(ET.getPropFromObject,void 0,"y"))))},vectorForComponents:function(e,t){return yT.getAutodisposingInstanceWithProperties("x",e,"y",t)},scalarProjection:function(e,t){if(4===arguments.length)return ET.scalarProjection(ET.vectorForComponents(e,t),ET.vectorForComponents(arguments[2],arguments[3]));var n=ET.angleDifference(ET.angleForVector(e),ET.angleForVector(t));return ET.vectorMagnitude(e)*Math.cos(n)},vectorProjection:function(e,t){if(4===arguments.length)return ET.vectorProjection(ET.vectorForComponents(e,t),ET.vectorForComponents(arguments[2],arguments[3]));var n=ET.scalarProjection(e,t),i=ET.unitVectorForVector(t);return ET.vectorForComponents(i.x*n,i.y*n)},normalizeAngle:function(e){var t=(e%ST+ST)%ST,n=t>IT?t-ST:t;return n===-IT?IT:n},angleSum:function(){return ET.normalizeAngle(ET.sum.apply(ET,arguments))},angleDifference:function(e,t){return ET.angleSum(e,-t)},angleAverage:function(){return ET.normalizeAngle(ET.angleForVector(ET.vectorSum.apply(ET,bT.getAutodisposingInstanceFromMap(bT.getAutodisposingInstanceFromParams.apply(bT,arguments),ET.unitVectorForAngle))))},sum:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t];return e},difference:function(e,t){return ET.sum(e,-t)},product:function(){for(var e=1,t=0,n=arguments.length;t<n;t++)e*=arguments[t];return e},quotient:function(e,t){return ET.product(e,1/t)},getPropFromObject:function(e,t){return t[e]}},AT=Sh.arrayPool,OT=Sh.objectPool,TT=of.b,MT=ET,DT=Math.PI/2,PT={mixinDependencies:[dT],selectionController:F.b({_getHandleOffsetForDirection:function(e,t){var n=this,i=arguments,r=Ym,a=r.UP,s=r.DOWN;return t!==a&&t!==s?n.__s._$Ok$_getHandleOffsetForDirection.apply(n,i):this.owner._getHandleOffsetForAngle(e,t===s?DT:-DT)},pivot:V.b({dependencies:["collection.contentsDidChangeUntracked"],get:function(){var e=this,t=arguments,n=e.__s._$Vr$get.apply(e,t);return this.recoverHandleIfPossible(n)},__superMap:{_$Vr$get:"get"}}),extendedTo:V.b({dependencies:["collection.contentsDidChangeUntracked"],get:function(e){return this.recoverHandleIfPossible(e)},set:Tl.a}),recoverHandleIfPossible:function(e){var t=this.collection;if(e){if(e.isValid&&!e.wasRemoved)return e;var n,i=e.value;return i&&(i.retain&&i.retain(this,"recoverHandleIfPossible"),n=t.handleFor(i),i.release&&i.release(this,"recoverHandleIfPossible")),n&&n.isValid||!(e.position>=0)||(n=t.handleProvider.at(Math.max(0,Math.min(t.length-1,e.position)))),n&&n.isValid||(n=t.startHandle),n}},getSelectableHandleInDirection:function(e,t){var n=this,i=arguments;return t===Ym.LEFT?n.__s._$1G5$getSelectableHandleInDirection.call(n,e,Ym.UP):t===Ym.RIGHT?n.__s._$1G5$getSelectableHandleInDirection.call(n,e,Ym.DOWN):n.__s._$1G5$getSelectableHandleInDirection.apply(n,i)},__superMap:{_$Ok$_getHandleOffsetForDirection:"_getHandleOffsetForDirection",_$1G5$getSelectableHandleInDirection:"getSelectableHandleInDirection"}}),selectionDirectionByKeyCode:(eT={},eT[ml.a.UP]=Ym.UP,eT[ml.a.LEFT]=Ym.LEFT,eT[ml.a.DOWN]=Ym.DOWN,eT[ml.a.RIGHT]=Ym.RIGHT,eT),keyDown:function(e){var t=this,n=arguments,i=t.__s._$1bj$keyDown,r=e.keyCode,a=ml.a,s=a.LEFT,o=a.RIGHT,l=a.UP,c=a.DOWN;if(r===s||r===o||r===l||r===c){var u=this._deferredArrowKeyKeyCodes;return r!==u[u.length-1]&&(u.push(r),this.retain(this,"Holding for deferred arrow key handling from keyDown"),mu.a(of.a(this._flushDeferredArrowKeyHandler,this,i,e))),!0}return t.__s._$1bj$keyDown.apply(t,n)},_deferredArrowKeyKeyCodes:k.c(Array),_flushDeferredArrowKeyHandler:function(e,t){this._deferredArrowKeyKeyCodes.shift(),this.autorelease(this,"Holding for deferred arrow key handling from keyDown"),e.call(this,t)},_getPositionedCellForHandle:function(e){var t,n,i=this.layoutController,r=this.layoutDelegate,a=i.visibleCells,s=this.layoutDelegate.cellForHandle(e);if(a.includes(s))return s;for(var o=0,l=a.length;o<l;o++){var c=n||a.objectAt(l-1-o),u=t||a.objectAt(o);if(!t&&u&&"item"===u.cellType&&(t=u),!n&&c&&"item"===c.cellType&&(n=c),t&&n)break}if(void 0!==t||void 0!==n)for(var d=e.position,h=t.handle.position,p=n.handle.position,f=d<h?-1:d>p?1:_.b("Expected handle in visible cell range to have had a cell in visibleCells."),g=-1===f?t:n;g=r.positionNextCell(i,g,f);)if(g.handle.position===d)return g},_getHandleOffsetForAngle:function(e,t){var n=this._getPositionedCellForHandle(e);if(!n)return 0;var i=this._getBestItemCellForAngleFromStartingCell(n,t);if(!i)return 0;var r=i.handle;if(!r)return 0;var a=r.position;return isNaN(a)?0:a-e.position},_getBestItemCellForAngleFromStartingCell:function(e,t){this._cellBadnessMetricWeightKeys||(this._cellBadnessMetricWeightKeys=Object.keys(this.cellBadnessMetricWeights));for(var n=e,i=e,r=0,a=0,s=this.layoutController,o=this.layoutDelegate,l=this.spatialDisorderToleranceForCellLayouts,c=AT.getAutodisposingInstance(),u=TT(this._updateWinningCellExamsForNewCell,this,c,t,OT.getAutodisposingInstanceFromObject(e,"x","y","width","height"),MT.verticesForRect(e));(n||i)&&(r<=l||a<l);){do{n=n&&o.positionNextCell(s,n,-1)}while(n&&"item"!==n.cellType);do{i=i&&o.positionNextCell(s,i,1)}while(i&&"item"!==i.cellType);r=u(n)?0:r+1,a=u(i)?0:a+1}return c[0]?c[0].cell:void 0},_updateWinningCellExamsForNewCell:function(e,t,n,i,r){if(!r||"item"!==r.cellType)return!1;var a=function(e,t,n,i){var r,a,s=OT.getAutodisposingInstanceWithProperties("cell",i),o=OT.getAutodisposingInstanceFromObject(i,"x","y","width","height"),l=MT.verticesForRect(o),c=o.x,u=o.y,d=o.width,h=o.height,p=t.x,f=t.y,g=t.width,m=t.height,_=c+d/2,v=u+h/2,b=p+g/2,y=f+m/2,w=c<p+g&&c+d>p,I=u<f+m&&u+h>f;if(r=w&&I?0:w?Math.min(Math.abs(u-f+m),Math.abs(u+h-f)):I?Math.min(Math.abs(c-p+g),Math.abs(c+d-p)):Math.min(MT.vectorMagnitude(c-p-g,u-f-m),MT.vectorMagnitude(c+d-p,u-f-m),MT.vectorMagnitude(c+d-p,u+h-f),MT.vectorMagnitude(c-p-g,u+h-f)),s.shortestDistance=r,w&&I)a=0;else{for(var S=AT.getAutodisposingInstance(),C=0,E=n.length;C<E;C+=2)for(var A=n[C],O=n[C+1],T=0,M=l.length;T<M;T+=2){var D=l[T],P=l[T+1],L=MT.angleBetweenPoints(A,O,D,P);S.push(L)}for(var R=-1/0,x=1/0,N=0,F=S.length;N<F;N++){var V=S[N],k=MT.angleDifference(V,e);k>R&&(R=k),k<x&&(x=k)}if(R>=0&&x<=0){if(!(MT.angleDifference(R,x)<Math.PI))return R<-x?R:x;a=0}else R>0&&x>0?a=x:R<0&&x<0&&(a=R)}s.closestAngleDifferenceFromPreferred=a,s.closestAngleDeviationFromPreferred=Math.abs(s.closestAngleDifferenceFromPreferred),s.closestAngleBadness=Math.tan(Math.min(DT,s.closestAngleDeviationFromPreferred));var B=MT.vectorMagnitude(_-b,v-y);s.distanceBetweenCentroids=B;var j=MT.angleBetweenPoints(b,y,_,v);s.angleBetweenCentroidsDifferenceFromPreferred=MT.angleDifference(j,e),s.angleBetweenCentroidsDeviationFromPreferred=Math.abs(s.angleBetweenCentroidsDifferenceFromPreferred),s.angleBetweenCentroidsBadness=Math.tan(Math.min(DT,s.angleBetweenCentroidsDeviationFromPreferred));var U=Math.round(MT.scalarProjection(MT.vectorForComponents(_-b,v-y),MT.unitVectorForAngle(e)));return s.distanceBetweenCentroidsAlongPreferredAngle=U,s.distanceBadnessBetweenCentroidsAlongPreferredAngle=s.distanceBetweenCentroidsAlongPreferredAngle>1?s.distanceBetweenCentroidsAlongPreferredAngle:1/0,s}(t,n,i,r),s=this.compareCellExams(a,e[0]),o=s>=0;return s>0&&(e.length=0),o&&e.push(a),o},compareCellExams:function(e,t){return this.decideCellExamBadness(t)-this.decideCellExamBadness(e)},decideCellExamBadness:function(e){if(!e)return 1/0;for(var t,n=this._cellBadnessMetricWeightKeys,i=this.cellBadnessMetricWeights,r=0,a=0;t=n[a];a++)r+=i[t]*e[t];return r},spatialDisorderToleranceForCellLayouts:30,cellBadnessMetricWeights:{shortestDistance:1e3,closestAngleBadness:1e6,angleBetweenCentroidsBadness:1e6,distanceBadnessBetweenCentroidsAlongPreferredAngle:1e9},__superMap:{_$1bj$keyDown:"keyDown"}};function LT(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function RT(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){LT(a,i,r,s,o,"next",e)}function o(e){LT(a,i,r,s,o,"throw",e)}s(void 0)}))}}var xT=oi.a.create(),NT=oi.a.create(),FT=kp.a.create(),VT={mixinDependencies:[dT,gT,PT,{selectionController:V.b({defaultValue:F.b({selection:V.b(),selectedIndices:V.b(),collection:V.b(),container:V.b(),sparseSelection:V.b({readOnly:!0,get:function(){return Up.create({collection:this.bindingFor("collection"),container:this.bindingFor("container"),selectedIndices:this.bindingFor("selectedIndices"),selection:this.bindingFor("selection")})}}),selectionLength:V.b(Oi.c("sparseSelection.length")),isSelectionFullyLoaded:V.b(Oi.c("sparseSelection.isFullyLoaded")),mostNotableSelectedItem:H.d({get:function(){var e=this.pivot,t=this.extendedTo,n=t&&t.isValid?t.value:e&&e.isValid?e.value:void 0;if(!n){var i=this.collection,r=this.selectedIndices.ranges().retain().autorelease();e:for(;r.isValid;){for(var a=r.value,s=a.start,o=a.end,l=s;l<=o;l++){var c=i.encodedObjectAt(l)?i.objectAt(l):void 0;if(c){n=c.retain().autorelease();break e}}r.moveToNext()}}return n||void 0}}),getFullyLoadedSelection:function(){var e=this;return RT(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sparseSelection.getFullyLoadedSelection(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},ensureSelectionIsFullyLoaded:function(){var e=this;return RT(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sparseSelection.ensureSelectionIsFullyLoaded(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},_updateSparseSelectionOnSelectionDidChange:B.h({inputs:["selectionDidChange"],callback:function(){this.sparseSelection.selectionDidChange()}}),_maintainUnknownSelectedIndices:B.g({inputs:["selectionDidChange"],callback:function(){var e=this;FT.clear(),this.selectedIndices.forEach((function(t){void 0===e.collection.encodedObjectAt(t)&&FT.add(t)}))}}),_containerWasAnnihilated:B.h({inputs:["collection","collection.contentsDidChange"],callback:function(e){var t=this.selectedIndices;if(!(void 0===e||t.length<=0)){for(var n=!0,i=e.length-1;i>=0;i--)if(void 0!==e.encodedObjectAt(i)){n=!1;break}n&&this.updateSelectionForCollectionChange({collectionChanged:!0})}}}),updateSelectionForCollectionChange:function(e){var t=this,n=arguments,i=this._selectedIndices,r=e.itemsChanges;if(r){if(i.length>0){xT.serializer=this.collection.serializer;for(var a=r.length,s=0;s<a;s++){var o=r[s],l=o.index;if(o.operation===Wo.b.REMOVE){if(i.contains(l)){var c=o.encodedItem;void 0!==c?xT.encodedAdd(c):NT.add(l)}i.itemsRemovedAtIndex(l,1),FT.itemsRemovedAtIndex(l,1)}else{i.itemsInsertedAtIndex(l,1);var u=!1,d=o.encodedItem;xT.encodedContains(d)?(i.add(l),xT.encodedRemove(d)):(NT.contains(l)||FT.contains(l))&&(i.add(l),u=!0),FT.itemsInsertedAtIndex(l,1),!0===u&&FT.add(l)}}xT.clear(),NT.clear(),FT.clear()}this.selectedIndices=i}else t.__s._$3SX$updateSelectionForCollectionChange.apply(t,n)},__superMap:{_$3SX$updateSelectionForCollectionChange:"updateSelectionForCollectionChange"}}),downstreamBindings:{container:"(owner).container"}}),getFullyLoadedSelectedMediaPKs:function(){var e=this;return RT(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.selectionController.ensureSelectionIsFullyLoaded();case 2:return t.abrupt("return",e.getSelectedMediaPKs());case 3:case"end":return t.stop()}}),t)})))()},sparseSelection:V.b(Oi.c("selectionController.sparseSelection")),container:V.b()}]},kT={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDeleted",truevalue:"is-disabled",attributes:{}}]}}},gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return!this.isDeleted&&t.__s._$72$gestureRecognizerShouldReceive.apply(t,n)},isDeleted:V.b({readOnly:!0,dependencies:["media","media.primaryAsset","media.primaryAsset.isDeleted"],get:Object.assign((function(){return Boolean(this.getPath("media.primaryAsset.isDeleted"))}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[2+n]))}})}),_deselectSelfOnDelete:B.h({inputs:["isDeleted"],callback:function(e){e&&this.isSelected&&this.sendEvent("userSelectionRequest",{view:this,operation:Qm.REMOVE})}}),__superMap:{_$72$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"}},BT=BO.extend(qO,{staticMembers:{existenceDependenciesOnHost:["media.specificType"],shouldExistInHost:function(e){var t=e.media;return!!t&&t.specificType===t.constructor.Type.AUDIO},__QUALIFIED_CLASS_NAME__:"AudioAdornment"},classNames:["audio-adornment"]}),jT=n(248),UT=n(1280),GT=new Set,HT=BO.extend(qO,{classNames:["error-adornment"],wantsPresenceInHost:V.b({readOnly:!0,dependencies:["host","host.derivative.physicalGeometricLength","host.derivativeLoader.perfectDerivativeGeometricLength","host.derivativeLoader.derivativeError","host.media.renderableImageDerivativeInfos","host.media.loadStatus","host.media.cannotHaveImageDerivative"],get:Object.assign((function(){if(!this.host||this.getPath("host.media.cannotHaveImageDerivative")||this.getPath("host.derivative.physicalGeometricLength")>=this.getPath("host.derivativeLoader.perfectDerivativeGeometricLength"))return!1;var e=this.getPath("host.media.loadStatus");if(e===jT.a.LOADED){var t=this.getPath("host.media.renderableImageDerivativeInfos"),n=this.getPath("host.derivativeLoader.derivativeError");return Boolean(n||!t||!t.length)}return e===jT.a.ERRORED}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||i.internalGetPath(this,t[6+n])||i.internalGetPath(this,t[1+n])>=i.internalGetPath(this,t[2+n]))return!1;var r=i.internalGetPath(this,t[5+n]);if(r===jT.a.LOADED){var a=i.internalGetPath(this,t[4+n]),s=i.internalGetPath(this,t[3+n]);return Boolean(s||!a||!a.length)}return r===jT.a.ERRORED}})}),_maintainBackground:B.h("host.derivative",(function(e){this.element.classList.toggle("on-derivative",Boolean(e))})),_sendErrorStat:B.h("wantsPresenceInHost",(function(e){if(e){var t=this.getPath("host.media.pk");t&&!GT.has(t)&&(GT.add(t),L.n().feedbackService.report("itemViewErrorShown",{itemViewType:"cwGrid"}))}})),staticMembers:{__QUALIFIED_CLASS_NAME__:"ErrorAdornment"}}),WT=n(1279);UT.a(".pgk-photo-item-view .error-adornment",WT.replace("chartreuse","rgba(0,0,0,0.2)")),UT.a(".pgk-photo-item-view .error-adornment.on-derivative",WT.replace("chartreuse","rgba(255,255,255,0.85)"));var $T=BO.extend(qO,{staticMembers:{existenceDependenciesOnHost:["media.specificType"],shouldExistInHost:function(e){var t=e.media;return!!t&&t.specificType===t.constructor.Type.PANORAMA},__QUALIFIED_CLASS_NAME__:"PanoramaAdornment"},classNames:["panorama-adornment"],_maintainVerticalClass:B.h("host.media.aspectRatio",(function(e){this.element.classList.toggle("vertical-panorama",e<1)}))}),zT=(F.b(["media.aspectRatio","currentWidth","currentHeight"]),BO.extend(qO,{staticMembers:{existenceDependenciesOnHost:["media.genericType","media.specificType"],shouldExistInHost:function(e){var t=e.media;if(!t)return!1;var n=t.constructor.Type;return t.genericType===n.VIDEO&&t.specificType!==n.AUDIO},__QUALIFIED_CLASS_NAME__:"VideoAdornment"},classNames:["video-adornment"],durationString:V.b(Oi.c("host.media.durationString")),shouldRenderAsBadge:V.b(!1),maintainAdornment:B.h({inputs:["durationString","shouldRenderAsBadge"],callback:function(e,t){this.element.textContent=t?"":e,this.element.classList.toggle("render-as-badge",t)}})})),KT={init:function(){var e=this,t=arguments;e.__s._$1b$init.apply(e,t)},isBeingHovered:V.b(!1),pointerEnter:function(){var e=this;this.isBeingHovered||(this.isBeingHovered=!0);var t=e.__s._$7Y$pointerDown;return!!t&&t.apply(this,arguments)},pointerLeave:function(){var e=this;this.isBeingHovered&&(this.isBeingHovered=!1);var t=e.__s._$7Y$pointerDown;return!!t&&t.apply(this,arguments)},__superMap:{_$1b$init:"init",_$7Y$pointerEnter:"pointerEnter",_$7Y$pointerDown:"pointerDown",_$Am$pointerLeave:"pointerLeave"}},qT=_i.extend({defaultTransitionClass:Ii.a,transitionClassForTransition:function(e,t,n,i,r){var a;return n&&n.incomingTransitionClass&&(a=n.incomingTransitionClass),e&&e.outgoingTransitionClass&&(a=a?void 0:e.outgoingTransitionClass),a||r.defaultTransitionClass},transitionWillStart:function(e){var t=e.fromViewController,n=e.toViewController,i=IA.TRANSITIONING_AWAY,r=IA.TRANSITIONING_TO;n&&n.instanceOf(CA)&&(n.transitionDirection=r,n.transitionWillStart(e)),t&&t.instanceOf(CA)&&(t.transitionDirection=i,t.transitionWillStart(e)),e.retain()},transitionDidFinish:function(e){var t=e.fromViewController,n=e.toViewController,i=IA.NOT_TRANSITIONING;n&&n.instanceOf(CA)&&(n.transitionDirection=i,n.transitionDidFinish(e)),t&&t.instanceOf(CA)&&(t.transitionDirection=i,t.transitionDidFinish(e)),e.delegate.defaultTransitionClass=Ii.a,e.autorelease()},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnimatedChildViewControllerProperty"}});function QT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return qT.define.apply(qT,[e].concat(n))}var YT=n(479);function ZT(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function XT(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){ZT(a,i,r,s,o,"next",e)}function o(e){ZT(a,i,r,s,o,"throw",e)}s(void 0)}))}}var JT=YT.a.extend({applyStyle:function(e,t){e&&!e.isDisposed&&(void 0!==t?e.style.translateX(t).layerBack():e.style.clear("transform"))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseHorizontalSlideTransition"}}),eM=YT.a.extend({applyStyle:function(e,t){e&&!e.isDisposed&&(void 0!==t?e.style.translateY(t).layerBack():e.style.clear("transform"))},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseVerticalSlideTransition"}}),tM=JT.extend({startAnimation:function(){var e=this;return XT(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A,O,T,M;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fromView,i=e.toView,n&&i){t.next=4;break}return Object(AE.b)((function(){return e.animationDidFinish()})),t.abrupt("return");case 4:return r=e.startValue,a=e.endValue,s=e.duration,o=e.direction,h=.5*a,"left"===o?(l=a,c=r,u=r,d=-a+h):(l=-a+h,c=r,u=r,d=a),p=i.element.parentElement,f="left"===o?i.element:n.element,g=f.getBoundingClientRect(),m=p.style,_=m.maxWidth,v=m.maxHeight,b=m.overflow,y=f.style,w=y["box-shadow"],I=y["z-index"],S=y.position,C=y.top,E=y.height,A=y.width,O=y["margin-top"],yl.c(p,{"max-width":"100%","max-height":"100%",overflow:"hidden"}),yl.c(f,{"box-shadow":"0 0 "+.05*a+"px rgba(0,0,0,.2)","z-index":"1000",position:"fixed",top:g.top+"px","margin-top":0,height:g.height+"px",width:g.width+"px"}),T=e.performDetachedViewSpecificAnimation(i,"toViewAnimationProperty",l,c,s),M=e.performDetachedViewSpecificAnimation(n,"fromViewAnimationProperty",u,d,s),t.next=18,Z.a.all([T,M]);case 18:yl.c(p,{"max-width":_,"max-height":v,overflow:b}),yl.c(f,{"box-shadow":w,"z-index":I,position:S,top:C,height:E,width:A,"margin-top":O}),e.animationDidFinish();case 21:case"end":return t.stop()}}),t)})))()},animationDidFinish:function(){var e=this,t=arguments;return this.applyStyle(this.fromView,void 0),this.applyStyle(this.toView,void 0),e.__s._$1TY$animationDidFinish.apply(e,t)},__superMap:{_$1TY$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"HorizontalSlideToFromTransition"}}),nM=eM.extend({startAnimation:function(){var e=this;return XT(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fromView,i=e.toView,n&&i){t.next=4;break}return Object(AE.b)((function(){return e.animationDidFinish()})),t.abrupt("return");case 4:return r=e.startValue,a=e.endValue,s=e.duration,"up"===(o=e.direction)?(l=i,c="toViewAnimationProperty"):(l=n,c="fromViewAnimationProperty"),u=l.element.parentElement,d=u.style,h=d.maxWidth,p=d.maxHeight,f=d.overflow,g=l.element.style,m=g.height,_=g.position,v=g["margin-top"],yl.c(u,{"max-width":"100%","max-height":"100%",overflow:"hidden"}),"up"===o&&(yl.c(l.element,"height",r-a),yl.c(l.element,"margin-bottom",a)),b=l.element.getBoundingClientRect(),yl.c(l.element,{position:"fixed",top:b.top+"px","margin-top":0}),"down"===o&&yl.c(l.element,{height:b.height+"px","margin-bottom":0}),t.next=16,e.performDetachedViewSpecificAnimation(l,c,r,a,s);case 16:yl.c(l.element,{position:_,height:m,top:top,"margin-top":v}),yl.c(u,{"max-width":h,"max-height":p,overflow:f}),e.animationDidFinish();case 19:case"end":return t.stop()}}),t)})))()},staticMembers:{__QUALIFIED_CLASS_NAME__:"VerticalSlideToTransition"}}),iM=nM.extend({animationDidFinish:function(){this.animationIsFinished||(this.animationIsFinished=!0,this.didFinish())},didFinish:function(){var e=this.parentViewController,t=this.fromViewController,n=this.toViewController,i=this.delegate;if(this.isRunning=!1,i){var r=this.delegateContext||i;i.transitionDidFinish.call(r,this)}this.unmarkViews(),t&&t.release(this,"holding during a transition away from this VC"),n&&n.release(this,"holding during a transition to this VC"),e.release(this,"holding during a transition within this VC"),this.wasCancelled||this.promise.resolve(this)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalSlideUpTransition"}}),rM=nM.extend({start:function(){var e=this.viewsOutlet,t=this.parentViewController.view[e];t||_.b("ViewsArrayViewControllerTransition expects a `viewsOutlet` property"),this._viewsArray=t,this.startAnimation()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ModalSlideDownTransition"}}),aM=iM.extend({duration:300,direction:"up",startValue:H.d({readOnly:!0,get:function(){return this.toView.parent.element.clientHeight}}),endValue:0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideUpTransition"}}),sM=rM.extend({duration:300,direction:"down",startValue:0,endValue:H.d({readOnly:!0,get:function(){return this.fromView.element.clientHeight}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideDownTransition"}}),oM=tM.extend({duration:400,direction:"left",startValue:0,endValue:H.d({readOnly:!0,get:function(){return this.fromView.element.clientWidth}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideLeftTransition"}}),lM=tM.extend({duration:400,direction:"right",startValue:0,endValue:H.d({readOnly:!0,get:function(){return this.fromView.element.clientWidth}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SlideRightTransition"}}),cM=n(480),uM=cM.a.extend({duration:700,staticMembers:{__QUALIFIED_CLASS_NAME__:"SlowOpacityTransition"}}),dM=cM.a.extend({duration:500,staticMembers:{__QUALIFIED_CLASS_NAME__:"MediumOpacityTransition"}}),hM=cM.a.extend({duration:300,staticMembers:{__QUALIFIED_CLASS_NAME__:"FastOpacityTransition"}}),pM={mixinDependencies:[SA],handheldViewControllerTransition:V.b()},fM=n(478),gM={tracksRetains:!0,includesStacksWithRetainTracking:!1,_retainReleaseTracking_retainCount:0,retain:function(e,t){var n=this,i=arguments,r=n.__s._$gk$retain.apply(n,i);if(this._retainReleaseTracking_retainCount++,this.tracksRetains){var a=vM(e)+(t?": "+vM(t):""),s=this._retainDebug=this._retainDebug||{},o=s[a]||(s[a]=new mM);o.retainCount++,o.highestRetainCount=Math.max(o.retainCount,o.highestRetainCount),o.history.push(_M()),this.includesStacksWithRetainTracking&&(o.stacks[o.history.length-1]=Object(fM.a)())}return r},release:function(e,t){var n=this,i=arguments;if(this._retainReleaseTracking_retainCount--,this.tracksRetains){var r=vM(e)+(t?": "+vM(t):""),a=this._retainDebug=this._retainDebug||{},s=a[r]||(a[r]=new mM);s.retainCount--,s.history.push(-_M()),this.includesStacksWithRetainTracking&&(s.stacks[s.history.length-1]=Object(fM.a)()),0===this._retainReleaseTracking_retainCount&&(this._previousRetainDebugs=this._previousRetainDebugs||[],this._previousRetainDebugs.push(this._retainDebug),this._retainDebug=null),s.retainCount<0&&(s.hadOverrelease||(s.hadOverrelease=!0,u.b.warn("Overreleasing object of type "+(this.constructor?q.a(this):"null")+' for reason "'+r+'". Reason arguments for retain/release may be mismatched.')))}return n.__s._$1t2$release.apply(n,i)},logRetainDebug:function(e){wM(this,e)},__superMap:{_$gk$retain:"retain",_$1t2$release:"release"}};function mM(){this.retainCount=0,this.highestRetainCount=0,this.history=[],this.stacks=[],this.hadOverrelease=!1}var _M=function(){var e=performance.now();return function(){return(performance.now()-e)/1e3}}(),vM=function(e){return"string"===typeof e?e:Br.a(e)?"["+q.a(e)+":"+Yl.b(e)+"]":Yl.b(e)},bM=function(e){Function.prototype.call.call(globalThis.console.group||globalThis.console.info,globalThis.console,e)},yM=function(){globalThis.console.groupEnd&&globalThis.console.groupEnd()},wM=function(e,t){var i=t>=1,r=t>=2;bM("Retain/release info for "+e);var a=n(25).Pool.getInstanceInfo(e.instance)===e,s=!a&&e.hasMixin(uc.a),o=!a&&e.hasMixin(n(669).ObjectStore.Support);globalThis.console.log("Retain Count:             "+e._retainCount+"\nCW._Poolable:             "+(s?"YES":"NO")+"\nFrom ObjectStore:         "+(o?"YES":"NO")+"\nFrom ToCW.Pool:           "+(a?"YES":"NO")+"\n"+(o?"    Active outside store: "+(e.isDisposed?"DISPOSED":e.isActiveOutsideStore?"YES":"NO")+"\n":"")+(o?"    Cached in store:      "+(e.ownerObjectStore&&e.ownerObjectStore.cachedItems.contains(e)?"YES":"NO")+"\n":"")+(o?"    Cacheable in store:   "+(e.isDisposed?"DISPOSED":e.isCacheableInStore?"YES":"NO")+"\n":"")+(o?"    Disowned from store:  "+(e.ownerObjectStore?"NO":"YES")+"\n":"")),e._retainDebug&&(bM("Current Lifecycle"),IM(e._retainDebug,i,r),yM());var l=e._previousRetainDebugs;if(l)for(var c=l.length-1;c>=0;c--)bM("Lifecycle #"+(c+1)),IM(l[c],i,r),yM();yM()},IM=function(e,t,n){var i,r="";for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];if(t){bM("Retains from "+("undefined"===a?"unspecified owners":a));var o="";o+="\nCurrent count: "+s.retainCount,o+="\nHighest count: "+s.highestRetainCount,s.hadOverrelease&&(o+="\n*** Warning: this owner overreleased! ***"),o+="\nFull history:";var l=s.history,c=s.stacks,u=c&&n,d=!1,h=-1;for(i=0;i<l.length;i++)d=d||l[i]<0,h=Math.max(h,String(0|Math.abs(l[i])).length+4);for(i=0;i<l.length;i++){var p=String(Math.abs(l[i]));for(p+=-1===p.indexOf(".")?".":"";p.indexOf(".")>=p.length-3;)p+="0";for(;p.length<h;)p=" "+p;o+="\n  "+(l[i]>0?"retain"+(d&&!u?" ":""):"release")+" at "+p+"s";var f=c[i];f&&(o+=n?"\n"+f.replace(/^\s*/gm,"    "):" at "+f.substring(0,f.indexOf("\n")))}globalThis.console.log(o.substring(1)),yM()}else r+="\n"+s.retainCount+" current ("+s.highestRetainCount+" max) retain"+(1===s.retainCount&&1===s.highestRetainCount?"":"s")+" from "+("undefined"===a?"unspecified owners":a)+(s.hadOverrelease?" ***Overreleased!***":"")}r&&globalThis.console.log(r.substring(1))},SM=n(756),CM=n(793),EM={mixinDependencies:[B.b],transitionDuration:250,transitionSpeedMultiplier:1,transitionTween:zC.d,updateTransition:U.a,prepareTransition:U.a,cleanUpTransition:U.a,transitionProgress:V.b({defaultValue:0,get:Tl.a,set:function(e){return Math.max(0,Math.min(1,e))}}),transitionDisplayProgress:V.b({readOnly:!0,dependencies:["transitionProgress"],get:Object.assign((function(){return this.transitionTween(this.transitionProgress)}),{__CW__getter:function(e,t,n,i){return this.transitionTween(i.internalGet(this,t[0+n]))}})}),startTransition:function(){this.retain(this,"self-retain during transition"),this.prepareTransition(),this.updateTransition(this.transitionDisplayProgress),this._scheduleNextFrame()},finishTransition:function(){this._unscheduleNextFrame(),this.transitionProgress=1,this.updateTransition(this.transitionDisplayProgress),this.cleanUpTransition(),this.release(this,"self-retain during transition")},_nextFrame:Object(Bu.b)((function(e){this._unscheduleNextFrame();var t=e-(this._lastTransitionFrameTimestamp||e)||0;this._lastTransitionFrameTimestamp=e,this.transitionProgress+=this.transitionSpeedMultiplier*t/this.transitionDuration,this.updateTransition(this.transitionDisplayProgress),this.transitionProgress<1?this._scheduleNextFrame():this.finishTransition()})),_scheduleNextFrame:function(){this._scheduledFrame||(this._scheduledFrame=mu.a(this._nextFrame))},_unscheduleNextFrame:function(){cancelAnimationFrame(this._scheduledFrame),this._scheduledFrame=null},cleanup:function(){var e=this,t=arguments;this._lastTransitionFrameTimestamp=0,this.transitionProgress=0,this.transitionSpeedMultiplier=1,e.__s._$kT$cleanup.apply(e,t)},__superMap:{_$kT$cleanup:"cleanup"}},AM=n(467),OM={shouldPollEvenWhenNotAttached:V.b(!1),jobToDisplay:V.b({strong:!0,type:zS}),jobProgress:V.b(Oi.c("jobToDisplay.jobProgress")),_currentlyPolledJob:H.d({strong:!0,type:zS}),shouldPollAnyJobToDisplay:V.b({readOnly:!0,dependencies:["isAttached","shouldPollEvenWhenNotAttached"],get:Object.assign((function(){return this.isAttached||this.shouldPollEvenWhenNotAttached}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),_beginAndEndJobPolling:B.h("shouldPollAnyJobToDisplay","jobToDisplay","jobToDisplay.jobStatus",(function(e,t,n){var i=Boolean(!this.isDisposing&&e&&n!==WS.COMPLETED&&n!==WS.FAILED)?t:null,r=this._currentlyPolledJob;r!==i&&(this._currentlyPolledJob=i,r&&r.endPolling(),i&&i.beginPolling())})),dispose:function(){var e=this,t=arguments;return this._beginAndEndJobPolling(),e.__s._$hM$dispose.apply(e,t)},__superMap:{_$hM$dispose:"dispose"}},TM=P.a.extend(B.b,{hidesBackButton:V.b({defaultValue:!1,type:Boolean}),hidesBackButtonTitle:V.b({defaultValue:!1,type:Boolean}),backButtonTitle:V.b({type:String}),hidesNavigationBar:V.b({defaultValue:!1,type:Boolean}),title:V.b({type:String}),titleStyle:V.b({type:Object}),subtitle:V.b({type:String}),leftBarButtonItem:V.b({type:In.a}),leftBarButtonItems:V.b({defaultValue:k.c(Wo.b),type:Wo.b}),rightBarButtonItems:V.b({defaultValue:k.c(Wo.b),type:Wo.b}),rightBarButtonItem:V.b({type:In.a}),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationItem"}}),MM={init:function(e,t){if(!e||!pi.a(e,fi.a))throw new _.a("NavigationViewControllerSupport#create requires that a `rootViewController` be provided.");this.__s._$Gd$init.call(this,t),this.pushViewController(e,!1)},viewControllers:V.b({readOnly:!0,type:Bf.a,get:function(){return Bf.a.create()}}),topViewController:V.b({readOnly:!0,dependencies:["viewControllers","viewControllers.contentsDidChange"],type:fi.a,get:Object.assign((function(){return this.viewControllers.lastItem}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).lastItem}}),didChange:function(){}}),navItems:V.b({readOnly:!0,type:Bf.a,get:function(){return Bf.a.create()}}),navItemClass:TM,topNavItem:V.b({dependencies:["navItems","navItems.contentsDidChange"],readOnly:!0,type:TM,get:Object.assign((function(){return this.navItems.lastItem}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).lastItem}})}),isChildTransitioning:V.b({dependencies:["topViewController.isTransitioning"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.topViewController.isTransitioning}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),pushViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.isChildTransitioning||this.insertViewController(e,this.viewControllers.length)},popViewController:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.isChildTransitioning,n=this.viewControllers;if(!e||!t)return n.length>1?this.removeViewController(n.lastItem):void 0},removeViewController:function(e){if(e){var t=this.navItems,n=this.viewControllers,i=n.indexOf(e);if(!(i<0))return Pe.a.pause(),n.splice(i,1),t.splice(i,1),Pe.a.resume(),e}},insertViewController:function(e,t){if(!e||!pi.a(e,fi.a))throw new _.a("NavigationViewControllerSupport#insertViewController requires that a `viewController` be provided.");if(!(t<0)){var n=e.navItem||this.navItemClass.create();Pe.a.pause(),this.viewControllers.splice(t,0,e),this.navItems.splice(t,0,n),Pe.a.resume()}},shiftViewController:function(){var e=this.viewControllers.firstItem;return this.removeViewController(e)},unshiftViewController:function(e){this.insertViewController(e,0)},popToRootViewController:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.viewControllers,n=t.objectAt(0);return this.popToViewController(n,e)},popToViewController:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||!pi.a(e,fi.a))throw new _.a("NavigationViewControllerSupport#popToViewController requires that a `viewController` be provided.");if(!t||!this.isChildTransitioning){var n=[],i=this.viewControllers;if(!i.length)return n;var r=i.lastItem;if(r===e)return n;for(var a=i.length-2;a>=1;a--){var s=i.objectAt(a);if(s===e)break;var o=this.removeViewController(s,!1);n.push(o)}return i.length>1&&(this.popViewController(t),n.unshift(r)),n}},setViewControllers:function(e){var t=this;if(!e||0===e.length)throw new _.a("NavigationViewControllerSupport#setViewControllers requires that an array of `viewControllers` be provided.");Pe.a.pause(),this.viewControllers.clear(),this.navItems.clear(),e.forEach((function(e){t.pushViewController(e,!1)})),Pe.a.resume()},showViewController:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.pushViewController.apply(this,[e,!0].concat(n))},currentRelativePath:H.d({get:function(){return G.a.application.currentRelativePath},set:function(e){return G.a.application.currentRelativePath=e,e}}),updateShareGUID:function(){this.currentRelativePath&&(G.a.application.updateShareGUID(),this.currentRelativePath=void 0)},__superMap:{_$Gd$init:"init"}},DM={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",name:"svgContainer",classes:["svg-container"]}],classes:["symbol-button"]}}},desiredFontSize:V.b(15),layoutMode:V.b("glyphBox"),symbolMetadata:V.b(),otherSymbolProps:V.b(),_symbolMetadataObserver:B.h({inputs:["desiredFontSize","layoutMode","otherSymbolProps","symbolMetadata"],callback:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,r=this.svgContainer;r.firstChild;)r.removeChild(r.firstChild);if(i&&t){var a=i.svgPath,s=i[t],o=s.viewBox,l=s.height,c=s.width,u=s.translateX,d=s.translateY,h=s.baseline,p=s.capline,f="matrix(1 0 0 1 "+u+" "+d+")";if(e>0){var g=h-p,m=e/g,_=Math.round(l*m),v=_/l,b=Math.round(c*v);n.style="width: "+b+"px; height: "+_+"px; "+(n.style||"")}n.class=n.class||"",n.class+="layoutBox"===t?" layout-box":" glyph-box";var y=document.createElement("svg");for(var w in y.setAttribute("viewBox",o),y.setAttribute("version","1.1"),y.setAttribute("xmlns","http://www.w3.org/2000/svg"),n)n.hasOwnProperty(w)&&y.setAttribute(w,n[w]);var I=document.createElement("g");I.setAttribute("transform",f);var S=document.createElement("path");S.setAttribute("d",a),I.appendChild(S),y.appendChild(I),r.innerHTML=y.outerHTML}}})},PM={name:"chevron.left",svgPath:"M 52.4414 6.39648 C 53.5645 7.4707 54.9316 8.05664 56.4941 8.05664 C 59.7656 8.05664 62.3047 5.51758 62.3047 2.29492 C 62.3047 0.683594 61.6699 -0.78125 60.5469 -1.9043 L 26.3672 -35.3027 L 60.5469 -68.6035 C 61.6699 -69.7266 62.3047 -71.2402 62.3047 -72.8027 C 62.3047 -76.0254 59.7656 -78.5645 56.4941 -78.5645 C 54.9316 -78.5645 53.5645 -77.9785 52.4902 -76.9043 L 14.502 -39.7949 C 13.1348 -38.5254 12.4512 -36.9629 12.4512 -35.2539 C 12.4512 -33.5449 13.1348 -32.0801 14.4531 -30.7617 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:68.94538085937506,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 49.853515625 86.6689453125",width:49.853515625,height:86.6689453125,translateX:-12.451225585937436,translateY:78.564453125,baseline:78.564453125,capline:8.1044921875}},LM={name:"chevron.right",svgPath:"M 18.2617 8.00781 C 19.873 8.00781 21.1914 7.42188 22.3145 6.34766 L 60.3027 -30.7617 C 61.6211 -32.1289 62.3047 -33.5449 62.3047 -35.3027 C 62.3047 -37.0117 61.6699 -38.5254 60.3027 -39.7949 L 22.3145 -76.9531 C 21.1914 -78.0273 19.873 -78.6133 18.2617 -78.6133 C 14.9902 -78.6133 12.4512 -76.0742 12.4512 -72.8516 C 12.4512 -71.2891 13.1348 -69.7754 14.209 -68.6523 L 48.4375 -35.2539 L 14.209 -1.95312 C 13.0859 -0.78125 12.4512 0.634766 12.4512 2.24609 C 12.4512 5.46875 14.9902 8.00781 18.2617 8.00781 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:68.94538085937506,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 49.853515625 86.7666015625",width:49.853515625,height:86.7666015625,translateX:-12.451225585937436,translateY:78.61328125,baseline:78.61328125,capline:8.1533203125}},RM=Ho.a.extend({mixinDependencies:[DM,fl.a],action:"popViewController",additionalClassNames:F.b(["navigation-back-button","expanded-touch-target"]),title:V.b({dependencies:["lowerNavItem","backButtonTitle"],readOnly:!0,get:Object.assign((function(){return this.backButtonTitle||this.getPath("lowerNavItem.title")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])||this.getPath("lowerNavItem.title")}})}),lowerNavItem:V.b(),backButtonTitle:V.b(),desiredFontSize:13,symbolMetadata:V.b({readOnly:!0,dependencies:["isRTL"],get:Object.assign((function(){return this.isRTL?LM:PM}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?LM:PM}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationBackButton"}}),xM=In.a.extend(Pl.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"backBarButtonItem"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"leftBarButtonItem"}],classes:["left-bar-button-item"]},{type:"MULTIVIEWOUTLET",tagname:"views",classes:["bar-button-items","left-bar-button-items"],name:"leftBarButtonItems"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],name:"titleText",classes:["title-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["subtitle-text"]}],classes:["title-content"],name:"titleContent"}],classes:["title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"subtitle",truevalue:"has-subtitle",attributes:{}}],name:"titleWrapper"},{type:"MULTIVIEWOUTLET",tagname:"views",classes:["bar-button-items","right-bar-button-items"],name:"rightBarButtonItems"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"rightBarButtonItem"}],classes:["right-bar-button-item"]}],classes:["main-navbar-content"],name:"mainContent"}],classes:["navigation-bar",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"NavigationBarView"},updateTitleLayout:function(){if(!this.isDisposed&&this.isAttached&&void 0!==this.title){var e=this.titleContent,t=e.offsetWidth,n=(this.titleWrapper.clientWidth-t)/2,i=0;if(n>0){var r=Math.floor(e.getBoundingClientRect().left),a=parseInt(e.style.left,10)||0,s=te.a.sharedInstance.window.width/2,o=t/2+(r-a);i=Math.min(Math.abs(s-o),n),o>s&&(i*=-1)}yl.c(e,{left:i+"px"})}},_maintainLayoutObserver:B.h({inputs:["viewportWidth"],callback:function(){this.updateTitleLayout()}}),_isAttachedObserver:B.h({inputs:["isAttached"],callback:function(e){if(e){if(!globalThis.MutationObserver)return void u.b.warn("No MutationObserver available");if(this._mutationObserver)return;this._mutationObserver=new MutationObserver(this.updateTitleLayout.bind(this)),this._mutationObserver.observe(this.element,{childList:!0,characterData:!0,subtree:!0})}else this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=void 0)}}),isEmpty:V.b({dependencies:["backBarButtonItem","leftBarButtonItem","leftBarButtonItems","leftBarButtonItems.contentsDidChange","rightBarButtonItems","rightBarButtonItems.contentsDidChange","rightBarButtonItem","title","subtitle"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.backBarButtonItem,t=this.leftBarButtonItem,n=this.leftBarButtonItems,i=this.rightBarButtonItems,r=this.rightBarButtonItem,a=this.title,s=this.subtitle;return void 0===e&&void 0===t&&(void 0===n||0===n.length)&&(void 0===i||0===i.length)&&void 0===r&&(void 0===a||0===a.length)&&(void 0===s||0===s.length)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[6+n]),c=i.internalGet(this,t[7+n]),u=i.internalGet(this,t[8+n]);return void 0===r&&void 0===a&&(void 0===s||0===s.length)&&(void 0===o||0===o.length)&&void 0===l&&(void 0===c||0===c.length)&&(void 0===u||0===u.length)}})}),isHidden:V.b({dependencies:["hidesNavigationBar","isEmpty"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.hidesNavigationBar,t=this.isEmpty;return!0===e||!0===t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return!0===r||!0===a}})}),lowerNavItem:V.b({dependencies:["navItems","navItems.contentsDidChange","isAtBottomNavItem","hidesBackButtonTitle"],readOnly:!0,get:Object.assign((function(){var e=this.isAtBottomNavItem,t=this.navItems,n=this.hidesBackButtonTitle;return void 0===t||e||n?{}:t.objectAt(t.length-2)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[3+n]);return void 0===a||r||s?{}:a.objectAt(a.length-2)}})}),backBarButtonItem:V.b({defaultValue:k.c(RM),dependencies:["hidesBackButton","isAtBottomNavItem"],downstreamBindings:{lowerNavItem:"(owner).lowerNavItem",backButtonTitle:"(owner).backButtonTitle"},readOnly:!0,strong:!0,type:RM,get:Object.assign((function(e){var t=this.hidesBackButton,n=this.isAtBottomNavItem;if(!1===t&&!1===n)return e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(!1===r&&!1===a)return e}})}),isAtBottomNavItem:V.b({dependencies:["navItems","navItems.contentsDidChange"],readOnly:!0,get:Object.assign((function(){return void 0!==this.navItems&&this.navItems.length<2}),{__CW__getter:function(e,t,n,i){return void 0!==i.internalGet(this,t[0+n])&&i.internalGet(this,t[0+n]).length<2}})}),hidesBackButton:V.b(Oi.c("topNavItem.hidesBackButton")),hidesBackButtonTitle:V.b(Oi.c("topNavItem.hidesBackButtonTitle")),backButtonTitle:V.b(Oi.c("topNavItem.backButtonTitle")),hidesNavigationBar:V.b(Oi.c("topNavItem.hidesNavigationBar")),leftBarButtonItem:V.b(Oi.c("topNavItem.leftBarButtonItem")),leftBarButtonItems:V.b(Oi.c("topNavItem.leftBarButtonItems")),rightBarButtonItems:V.b(Oi.c("topNavItem.rightBarButtonItems")),rightBarButtonItem:V.b(Oi.c("topNavItem.rightBarButtonItem")),title:V.b(Oi.c("topNavItem.title")),subtitle:V.b(Oi.c("topNavItem.subtitle")),titleStyle:V.b({binding:"topNavItem.titleStyle",didChange:function(e){var t=yl.c(this.titleText);t.clear(),e&&t.set(e)}}),navItems:V.b(),topNavItem:V.b(),_notifyOfSizeChange:B.h("isHidden",(function(){this.sendEvent("navigationBarSizeMayHaveChanged")}))}),NM=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"navigationBar"},{type:"MULTIVIEWOUTLET",tagname:"views",name:"contentViews",classes:["content-views"]}],classes:["navigation-view"]}},__QUALIFIED_CLASS_NAME__:"NavigationView"},navigationBar:V.b({readOnly:!0,strong:!0,type:xM,get:function(){return this.navigationBarViewClass.create({navItems:this.bindingFor("navItems"),topNavItem:this.bindingFor("topNavItem")})}}),navigationBarViewClass:xM,navItems:V.b(),topNavItem:V.b()}),FM=fi.a.extend(CA,MM,{viewClass:NM,view:V.b({downstreamBindings:{navItems:"(owner).navItems",topNavItem:"(owner).topNavItem"}}),topViewController:QT({options:{viewsOutlet:"contentViews"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationViewController"}}),VM=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"items",classes:["toolbar-items"]}],classes:["touch-toolbar-view"]},TOOLBAR_HEIGHT:50,__QUALIFIED_CLASS_NAME__:"TouchToolbarView"},items:V.b({type:Wo.b})}),kM=(n(1281),In.a.extend(Pl.a,Mp.a,Dp.a).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],classes:["to-cw-scroll-view"]}},__QUALIFIED_CLASS_NAME__:"ScrollView"},width:Oi.c("viewportWidth"),height:Oi.c("viewportHeight"),scrollMaxY:Oi.c("contentView.viewportHeight"),scrollMaxX:Oi.c("contentView.viewportWidth"),_updateScrollPosition:B.h({inputs:["normalizedX","normalizedY"],callback:function(e,t){this.contentView.style.translateDevicePixels(-e,-t)}}),_attachedObserver:B.h("isAttached",(function(e){e||this.isDisposed||this.stopMomentumScroll()}))})),BM=In.a.extend(Pl.a,{additionalClassNames:["to-cw-scroll-content-view"],measureViewport:function(){var e=this,t=arguments;if(this.isAttached&&this.isViewportSizeDOMReadingEnabled){var n=e.__s._$V7$measureViewport.apply(e,t);return this.sendEvent("validateScrollPosition"),n}},__superMap:{_$V7$measureViewport:"measureViewport"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ScrollContentView"}}),jM={transitionWillStart:function(e){var t=this,n=arguments;t.__s._$4j$transitionWillStart.apply(t,n),this.view.isViewportSizeDOMReadingEnabled=!1,this.view.contentView.isViewportSizeDOMReadingEnabled=!1},transitionDidFinish:function(e){var t=this,n=arguments;t.__s._$7m$transitionDidFinish.apply(t,n),this.view.isViewportSizeDOMReadingEnabled=!0,this.view.contentView.isViewportSizeDOMReadingEnabled=!0},__superMap:{_$4j$transitionWillStart:"transitionWillStart",_$7m$transitionDidFinish:"transitionDidFinish"}},UM=n(758),GM={mixinDependencies:[Tn.a],operationHandlers:Tn.b.define(),startup:function(){return Z.a.resolve()}},HM=n(761),WM=V.a.extend({staticMembers:{create:function(e){var t=e;return J.a(t)&&(t={viewsOutlet:t}),t.defaultValue||(t.defaultValue=k.c(Wo.b)),this.__s._$Fl$create.call(this,t)},__superMap:{_$Fl$create:"create"},__QUALIFIED_CLASS_NAME__:"MultiChildViewControllerProperty"},viewsOutlet:null,initializeMember:function(e,t){var n=this,i=arguments,r=n.__s._$Mb$initializeMember.apply(n,i),a="_multiChildViewControllerProperty_at_"+t+"_",s=a+"viewsArray",o="_parent"+a+"viewListener",l=a+"viewArrayObserver",c=a+"enteringChildVCs",u=a+"exitingChildVCs";e.registerMetadata(s,Object(Ff.b)({source:t,outputForInput:function(e){return e.view},inputDidEnter:function(e,t){e[o]=e.listen("view",t.bind(void 0,e)),(this[c]||(this[c]=Sh.arrayPool.getInstance())).push(e),e.willMoveToParentViewController(this)},inputDidExit:function(e){e[o].disconnect(),delete e[o],(this[u]||(this[u]=Sh.arrayPool.getInstance())).push(e),e.willMoveToParentViewController(null)}}));var d=this.viewsOutlet;return e.registerMetadata(l,B.h("view",s,s+".contentsDidChange",(function(e,t){if(e){var n,i=t?t.length:0,r=this.view[d];for(r.beginBatchedChanges(),r.clear(),n=0;n<i;n++)r.setIndex(n,t.objectAt(n));r.endBatchedChanges();var a=this[c],s=this[u],o=a?a.length:0,l=s?s.length:0;for(n=0;n<o;n++){var h=a[n];this.addChildViewController(h),h.didMoveToParentViewController(this)}for(n=0;n<l;n++){var p=s[n];this.removeChildViewController(p),p.didMoveToParentViewController(null)}a&&Sh.arrayPool.disposeInstance(a),s&&Sh.arrayPool.disposeInstance(s),this[c]=this[u]=null}}))),r},__superMap:{_$Mb$initializeMember:"initializeMember"}}),$M=function(){return WM.create.apply(WM,arguments)};function zM(e){do{if(e.view)return e.view}while(e=e.parentNode)}function KM(e,t,n,i){return{x:(1-i)*(1-i)*e.x+2*(1-i)*i*t.x+i*i*n.x,y:(1-i)*(1-i)*e.y+2*(1-i)*i*t.y+i*i*n.y}}var qM=n(403),QM={mixinDependencies:[Pl.a,aE.a],measuresOwnViewportSize:V.b(!0),isViewportSizeDOMWritingEnabled:V.b({readOnly:!0,dependencies:["measuresOwnViewportSize"],get:Object.assign((function(){return!this.measuresOwnViewportSize}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),isViewportSizeDOMReadingEnabled:V.b({readOnly:!0,dependencies:["measuresOwnViewportSize"],get:Object.assign((function(){return Boolean(this.measuresOwnViewportSize)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),viewportWidth:V.b({binding:void 0,defaultValue:void 0,dependencies:["isViewportSizeDOMReadingEnabled","measuredViewportWidth"],get:Object.assign((function(e){return this.isViewportSizeDOMReadingEnabled?this.measuredViewportWidth:e}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):e}}),writeDependencies:[],set:function(e){if(!this.isViewportSizeDOMReadingEnabled)return e}}),viewportHeight:V.b({binding:void 0,defaultValue:void 0,dependencies:["isViewportSizeDOMReadingEnabled","measuredViewportHeight"],get:Object.assign((function(e){return this.isViewportSizeDOMReadingEnabled?this.measuredViewportHeight:e}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):e}}),writeDependencies:[],set:function(e){if(!this.isViewportSizeDOMReadingEnabled)return e}})},YM=Ko.a.extend({x:V.b(0),y:V.b(0),width:V.b(0),height:V.b(0),naturalWidth:V.b({dependencies:["width"],get:Object.assign((function(e){return e||this.width}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){return e}}),naturalHeight:V.b({dependencies:["height"],get:Object.assign((function(e){return e||this.height}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){return e}}),innerX:V.b({get:function(e){return e||0},set:function(e){return e}}),innerY:V.b({get:function(e){return e||0},set:function(e){return e}}),innerWidth:V.b({dependencies:["naturalWidth"],get:Object.assign((function(e){return e||this.naturalWidth}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){return e}}),innerHeight:V.b({dependencies:["naturalHeight"],get:Object.assign((function(e){return e||this.naturalHeight}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:function(e){return e}}),effectiveInnerX:V.b({readOnly:!0,dependencies:["innerX","naturalWidth","width"],get:Object.assign((function(){return this.innerX/this.naturalWidth*this.width}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])*i.internalGet(this,t[2+n])}})}),effectiveInnerY:V.b({readOnly:!0,dependencies:["innerY","naturalHeight","height"],get:Object.assign((function(){return this.innerY/this.naturalHeight*this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])*i.internalGet(this,t[2+n])}})}),effectiveX:V.b({dependencies:["x","effectiveInnerX"],get:Object.assign((function(){return this.x+this.effectiveInnerX}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}}),writeDependencies:["x"],set:Object.assign((function(e){this.x=e-this.effectiveInnerX}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e-this.effectiveInnerX}}),writeDependencySetPathMap:[!1]}),effectiveY:V.b({dependencies:["y","effectiveInnerY"],get:Object.assign((function(){return this.y+this.effectiveInnerY}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])}}),writeDependencies:["y"],set:Object.assign((function(e){this.y=e-this.effectiveInnerY}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e-this.effectiveInnerY}}),writeDependencySetPathMap:[!1]}),effectiveWidth:V.b({readOnly:!0,dependencies:["innerWidth","naturalWidth","width"],get:Object.assign((function(){return this.innerWidth/this.naturalWidth*this.width}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])*i.internalGet(this,t[2+n])}})}),effectiveHeight:V.b({readOnly:!0,dependencies:["innerHeight","naturalHeight","height"],get:Object.assign((function(){return this.innerHeight/this.naturalHeight*this.height}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/i.internalGet(this,t[1+n])*i.internalGet(this,t[2+n])}})}),getTransformStringToRect:function(e,t,n,i,r,a){var s=n/this.effectiveWidth,o=i/this.effectiveHeight,l=r;l+=90*(0|a),l-=360*Math.floor(l/360);var c=this.width/2,u=this.height/2,d=(c-this.effectiveInnerX)*(s-1),h=(u-this.effectiveInnerY)*(o-1);return"translate("+(e-this.effectiveInnerX)+"px, "+(t-this.effectiveInnerY)+"px) translate("+d+"px, "+h+"px) rotate("+l+"deg) scale("+s+","+o+") "},staticMembers:{__QUALIFIED_CLASS_NAME__:"NestedRect"}}),ZM=P.a.extend(B.b,EM,{sourceElement:V.b(),sourceParentInsetX:V.b(0),sourceParentInsetY:V.b(0),sourceRect:V.b(k.c(YM)),destElement:V.b(),destParentInsetX:V.b(0),destParentInsetY:V.b(0),destRect:V.b(k.c(YM)),quarterturnCount:V.b(0),shouldFadeSourceElement:!0,shouldFadeDestinationElement:!1,prepareTransition:function(){var e=this,t=arguments;this.retain(this,"self-retain during transition duration"),e.__s._$d8$prepareTransition.apply(e,t)},updateTransition:function(e){var t=this,n=arguments;t.__s._$eE$updateTransition.apply(t,n);var i=e,r=1-i,a=this.sourceRect,s=this.destRect,o=this.quarterturnCount,l=this.sourceElement,c=this.destElement,u=i*s.effectiveX+r*a.effectiveX,d=i*s.effectiveY+r*a.effectiveY,h=i*s.effectiveWidth+r*a.effectiveWidth,p=i*s.effectiveHeight+r*a.effectiveHeight,f=r*-o*90;l&&(yl.c(l,"transform",a.getTransformStringToRect(u-this.sourceParentInsetX,d-this.sourceParentInsetY,h,p,f,o)),this.shouldFadeSourceElement&&(l.style.opacity=r)),c&&(yl.c(c,"transform",s.getTransformStringToRect(u-this.destParentInsetX,d-this.destParentInsetY,h,p,f)),this.shouldFadeDestElement&&(c.style.opacity=i))},cleanUpTransition:function(){var e=this,t=arguments;e.__s._$15X$cleanUpTransition.apply(e,t),this.release(this,"self-retain during transition duration")},__superMap:{_$d8$prepareTransition:"prepareTransition",_$eE$updateTransition:"updateTransition",_$15X$cleanUpTransition:"cleanUpTransition"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RectangleTransition"}}),XM="font-family font-size font-weight line-height transform padding margin border box-sizing".split(" ");function JM(e,t){t.parentNode||_.b("Reference element is not in the document.");var n=e instanceof HTMLInputElement?e:e.element;n.parentNode||_.b("Input element is not in the document.");for(var i,r=t.getBoundingClientRect(),a=n.parentNode.getBoundingClientRect(),s=0;i=XM[s];s++)yl.c(n).set(i,yl.c(t).get(i));n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=Math.ceil(r.width)+"px",n.style.height=Math.ceil(r.height)+"px",yl.c(n).translate(r.left-a.left,r.top-a.top-(p.a.sharedInstance.isiOS?1:0)),e.value=t.textContent}function eD(e,t){var n=e.getAttribute(t);return n&&"false"!==n&&"0"!==n&&"-0"!==n&&"undefined"!==n&&"null"!==n&&"NaN"!==n&&""!==n}var tD=n(794),nD=Bl.extend(uc.a,{supplantedTarget:void 0,keyDown:function(e){var t=this;if(e.keyCode!==ml.a.ESC){if(e.keyCode!==ml.a.ENTER)return t.__s._$Ih$keyDown&&t.__s._$Ih$keyDown.apply(this,arguments),!0;this.commitAndDismiss()}else this.dismiss()},keyUp:function(){return!0},keyPress:function(){return!0},pointerDown:function(){return!0},pointerUp:function(){return!0},initFromPool:function(e){this.__s._$le$initFromPool.call(this),this.supplantedTarget=e,JM(this,e),jO.call(e.parentNode,this),this.focus(),this.select()},cleanup:function(){var e=this,t=arguments;this._isCleaningUp=!0,this.blur(),this.element.parentNode&&GO.call(this.element.parentNode,this),this.style.clear(),Pe.a.pause(),this.supplantedTarget=void 0,this.value="",Pe.a.resume();var n=e.__s._$109$cleanup.apply(e,t);return this._isCleaningUp=!1,n},didEndEditing:function(){this._isCleaningUp||this.commitAndDismiss()},commit:function(){var e=this.supplantedTarget&&this.supplantedTarget.getAttribute("data-temporary-single-line-edit-event");e&&this.sendEvent(e,this.value)},dismiss:function(){this.sendEvent("_temporaryTextFieldIsDismissing",this)},goDormantAndDismissSoon:function(){this.style.set("pointer-events","none").set("opacity",0),this.retain(),X.a(Object(of.a)(this.dismissAndRelease,this),100)},dismissAndRelease:function(){this.dismiss(),this.release()},commitAndDismiss:function(){this.commit(),this.dismiss()},init:function(){var e=this,t=this,n=arguments;t.__s._$1W0$init.apply(t,n),Ze.a(this.controlElement,"blur",this._blurFixFunc=function(){return e.blur()&&!0})},dispose:function(){var e=this,t=arguments;Xe.a(this.controlElement,"blur",this._blurFixFunc),e.__s._$1aK$dispose.apply(e,t)},__superMap:{_$Ih$keyDown:"keyDown",_$le$initFromPool:"initFromPool",_$109$cleanup:"cleanup",_$1W0$init:"init",_$1aK$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TemporaryTextField"}}),iD=new tO.a,rD={_isTSLEGestureRecognizer:!0,event:"editSingleLineTextField",pointerDown:function(e){var t=this,n=arguments;return this.targetedElement=e.target,t.__s._$1fQ$pointerDown.apply(t,n)},reset:function(){var e=this,t=arguments;return this.targetedElement=void 0,e.__s._$1gn$reset.apply(e,t)},__superMap:{_$1fQ$pointerDown:"pointerDown",_$1gn$reset:"reset"}},aD={mixinDependencies:[Kp.a],temporaryTextField:V.b({strong:!0,didChange:function(e){iD[e?"add":"remove"](this)}}),editableSingleLineTextFieldTapGRClass:Zp.b.extend(rD,{_tsleTapType:"tap"}),editableSingleLineTextFieldLongTapGRClass:tD.a.extend(rD,{_tsleTapType:"long-tap"}),editSingleLineTextField:function(e){if(e.state===L_.b.Ended)return iD.length&&iD.items.forEach((function(e){e.temporaryTextField.commit(),e.temporaryTextField.goDormantAndDismissSoon(),e.temporaryTextField=void 0})),this.temporaryTextField=nD.create(e.targetedElement),!0},init:function(){var e=this,t=arguments;e.__s._$29j$init.apply(e,t),this.editableSingleLineTextFieldTapGR=this.editableSingleLineTextFieldTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.editableSingleLineTextFieldTapGR),this.editableSingleLineTextFieldLongTapGR=this.editableSingleLineTextFieldLongTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.editableSingleLineTextFieldLongTapGR)},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments;if(!e._isTSLEGestureRecognizer)return n.__s._$2Nb$gestureRecognizerShouldReceive.apply(n,i);for(var r=this;r=r.parent;)if(pi.a(r,Mp.a)&&(r.hasMomentum||r.scrollGestureRecognizer.state===L_.b.Changed))return!1;return!pi.a(P_.b(t.target),nD)&&!!t.target.hasAttribute("data-temporary-single-line-edit-event")&&!!eD(t.target,"data-temporary-single-line-edit-"+e._tsleTapType+"-enabled")},gestureRecognizerShouldRequireFailureOf:function(e){var t=this,n=arguments;return!e._isTSLEGestureRecognizer&&t.__s._$2nw$gestureRecognizerShouldRequireFailureOf.apply(t,n)},gestureRecognizerShouldBeRequiredToFailBy:function(e){var t=this,n=arguments;return!!e._isTSLEGestureRecognizer||t.__s._$2qy$gestureRecognizerShouldBeRequiredToFailBy.apply(t,n)},_temporaryTextFieldIsDismissing:function(e){this.temporaryTextField===e&&(this.temporaryTextField=void 0)},__superMap:{_$29j$init:"init",_$2Nb$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$2nw$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$2qy$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy"}},sD={_scrollBy:function(){for(var e,t=this,n=arguments;e=iD.oneItem;)e.temporaryTextField.commitAndDismiss();return t.__s._$33P$_scrollBy.apply(t,n)},__superMap:{_$33P$_scrollBy:"_scrollBy"}},oD={mixinDependencies:[Kp.a],init:function(){var e=this,t=arguments;e.__s._$3X$init.apply(e,t),this.singleTapGestureRecognizer=Zp.b.create({delegate:this,event:"_singleTap"}),this.addGestureRecognizer(this.singleTapGestureRecognizer)},gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return e===this.singleTapGestureRecognizer||t.__s._$AD$gestureRecognizerShouldReceive.apply(t,n)},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){var n=this,i=arguments;return e===this.singleTapGestureRecognizer||t===this.singleTapGestureRecognizer||n.__s._$F2$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(n,i)},_singleTap:function(){this.sendEvent("singleTap",this)},__superMap:{_$3X$init:"init",_$AD$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$F2$gestureRecognizerShouldRecognizeSimultaneouslyWith:"gestureRecognizerShouldRecognizeSimultaneouslyWith"}},lD=n(1282),cD=n(1283),uD=n(1284),dD=n(317),hD=n(736),pD=n(737),fD=n(698),gD=n(462),mD=n(463),_D=n(557),vD=n(735),bD=n(396),yD=n(699),wD=P.a.extend(ie.a,{supportsSVG:Object(H.d)({readOnly:!0,get:function(){return!!document.createElementNS}}),supportsCanvas:Object(H.d)({readOnly:!0,get:function(){return!!document.createElement("canvas").getContext}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"Rendering"}}),ID=n(731),SD=n(696),CD=n(309),ED=!!(File&&FileReader&&FileList&&Blob),AD=P.a.extend(ie.a,{isSupported:ED,staticMembers:{__QUALIFIED_CLASS_NAME__:"FileAPICapabilities"}}),OD=AD.sharedInstance,TD=function(e,t){var n,i,r=t.delay||50,a=t.timeout||1e4,s=t.testString||"MMMMMMMIIIa%@!",o=t.testFontFamily||'"Comic Sans MS"',l=t.testFontSize||"300px",c=t.fail,u=t.success,d=t.complete,h=t.fontWeight;h=h?h+" ":"";var p=document.createElement("canvas").getContext("2d");p.font=""+h+l+" "+o;var f=p.measureText(s).width;i=pn((function(){p.font=""+h+l+' "'+e+'", '+o,p.measureText(s).width!==f&&0!==f&&(clearInterval(i),clearTimeout(n),u&&u(),d&&d(!0))}),r),n=Object(X.a)((function(){clearInterval(i),c&&c(),d&&d(!1)}),a)},MD=P.a.extend({init:function(e){this.__s._$5l$init.call(this,e);var t=document.createElement("a");this.isDownloadAttributeSupported=void 0!==t.download},isDownloadAttributeSupported:null,__superMap:{_$5l$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LinkCapabilities"}}),DD=MD.create(),PD=n(344),LD=n(738),RD=n(441),xD=n(763),ND=n(783),FD=n(784),VD=n(576),kD=n(786),BD={staticMembers:{createCollection:function(e){return Wo.b.create(e)},updateCollection:function(e,t){e.beginBatchedChanges();for(var n=0,i=t.length;n<i;n++)t[n]!==e.objectAt(n)&&e.setIndex(n,t[n]);t.length!==e.length&&(e.length=t.length),e.endBatchedChanges()}}},jD=n(394);function UD(e){return this._provider._proxyHandle(e)}var GD={previous:UD,next:UD,start:UD,end:UD,atDistance:UD},HD=Object.assign({mixinDependencies:[B.b,dc.a]},function(e,t,n){var i,r={},a=[e],s=new Set;for(r[t]=Object(V.b)({strong:!0});i=a.shift();)for(var o=function(){var e=c[l],o=e[0],u=e[1];if("mixinDependencies"===o&&a.unshift.apply(a,u),o===t&&Object(_.b)("proxyKey collision proxying "+o+" on "+i),s.has(o))return"continue";var d=n[o]||Tl.a;Object(pi.a)(u,Mn.a)?r[o]=function(){var e;return d.call(this,(e=this[t])[o].apply(e,arguments))}:Object(pi.a)(u,$n.a)?r[o]=Object(H.d)({get:function(){return d.call(this,this[t][o])},set:function(e){return this[t][o]=e}}):Object(pi.a)(u,_u.a)?(Object(_.b)("unable to generate proxy on "+o+" of observable property "+u.toString()),r[o]=Object(V.b)({dependencies:["proxyKey."+o],get:function(){return d.call(this,this[t][o])},set:function(e){return this[t][o]=e}})):Object(pi.a)(u,Tn.b)?Object(_.b)("unable to generate proxy on "+o+" of "+u.toString()):s.add(o)},l=0,c=Object.entries(i);l<c.length;l++)o();return r}(dc.a,"proxiedHandle",GD),{init:function(e,t,n){this.proxiedHandle=n,this.__s._$yY$init.call(this,e,t)},__superMap:{_$yY$init:"init"}}),WD=P.a.extend(HD,LA,{firstItem:Object(H.d)({get:function(){var e=this._provider.source._itemSource;return e.handleProvider._proxyHandle(e.firstItemInSection(this.proxiedHandle))}}),lastItem:Object(H.d)({get:function(){var e=this._provider.source._itemSource;return e.handleProvider._proxyHandle(e.lastItemInSection(this.proxiedHandle))}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListSectionHandle"}}),$D=P.a.extend(HD,RA,{sectionHandle:Object(H.d)({get:function(){return this._provider.source._sectionsProxy.handleProvider._proxyHandle(this.source.sectionForNode(this.proxiedHandle))}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedListHandle"}}),zD=cc.a.extend(B.b,{endHandle:Object(H.d)({get:function(){return this._proxyHandle(this.proxiedHandleProvider.endHandle)}}),startHandle:Object(H.d)({get:function(){return this._proxyHandle(this.proxiedHandleProvider.startHandle)}}),HandleClass:null,at:function(){var e;return this._proxyHandle((e=this.proxiedHandleProvider).at.apply(e,arguments))},_proxyHandle:function(e){var t=this._handleMap,n=t.get(e);if(n)return n;var i=this.source,r=this.HandleClass.create(i,this,e);return t.set(e,r),r.registerWeakReference(this,this._handleWasDisposed,r),r},_handleWasDisposed:function(e){this._handleMap.delete(e.proxiedHandle)},_handleMap:Object(k.c)(Map),proxiedHandleProvider:Object(V.b)({dependencies:["source.source.handleProvider"],readOnly:!0,get:Object.assign((function(){return this.source.source.handleProvider}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),handlesDidUpdate:Object(B.g)("source.source",U.a),staticMembers:{__QUALIFIED_CLASS_NAME__:"ListProxyHandleProvider"}}),KD=P.a.extend(B.b,jD.a,mc.a,{HandleProviderClass:zD,source:Object(V.b)({strong:!0}),contentsDidChange:Object(B.g)("source",U.a),contentsDidChangeUntracked:Object(B.g)("source",U.a),_sourceDidChange:Object(B.g)("source",U.a),iteratorClass:Object(H.d)({get:function(){return this.source.iteratorClass}}),length:Object(H.d)({get:function(){return this.source.length}}),encodedAdd:function(){var e;return(e=this.source).encodedAdd.apply(e,arguments)},encodedRemove:function(){var e;return(e=this.source).encodedAdd.apply(e,arguments)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ListProxy"}}),qD=KD.extend(DA,{sectionForNode:Mn.a.define(),firstItemInSection:Mn.a.define(),lastItemInSection:Mn.a.define(),sections:Object(V.b)({strong:!0}),_sectionsProxy:Object(V.b)({strong:!0,defaultValue:Object(k.c)(KD.extend({HandleProviderClass:Object(F.b)({HandleClass:WD}),_itemSource:Object(V.b)()})),downstreamBindings:{source:"(owner).sections",_itemSource:"(owner)"}}),HandleProviderClass:Object(F.b)({HandleClass:$D}),sectionLengthsDidChange:Object(B.i)(),_invalidateCacheOnSectionsChange:Object(B.i)(),invalidateSectionLengthsOnContentsChange:Object(B.i)(),_invalidateCacheOnSectionsContentsChange:Object(B.i)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"SectionedListAdapter"}}),QD=n(566),YD={loadData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||Object(_.b)("CW.Data.FastBulkLoadingSupport#loadData: No model class provided.",{dataManager:this,modelClass:e,dataHashes:t}),t||Object(_.b)('CW.Data."FastBulkLoadingSupport#loadData: No data hashes provided.',{dataManager:this,modelClass:e,dataHashes:t});var i=[];if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)i.push(ZD(this,e,t[r],n,a));else i.push(ZD(this,e,t,n,1));return this.didChangeDataForStoreIds(i),Z.a.resolve(i)},persistenceDataDidUpdate:function(e){this.isDataForked(e)&&this.resetData(e)}};function ZD(e,t,n,i,r){var a=function(e,t){var n=e.primaryKey;n||Object(_.b)("CW.Data.FastBulkLoadingSupport getPrimaryKeyFromData: Attempted to locate primary key on a model class that does not specify one.",{data:t,modelClass:e});var i=t[e.getDataKeyForKey(n)];return void 0!==i&&null!==i||Object(_.b)("CW.Data.FastBulkLoadingSupport getPrimaryKeyFromData: Data hash does not contain primary key field that was specified by the Model class: "+n+".",{data:t,modelClass:e}),i}(t,n),s=jo.a.getStoreIdForPrimaryKey(t,a);i||(e._loadedStoreIds[s]=!0);var o=e._dataHashes[s],l=e.getExistingModel(s),c=l&&function(e,t,n){var i=Object(_m.a)(t,n);if(!i)return null;if(i.updated&&i.updated.length)for(var r=e.constructor,a=0,s=i.updated.length;a<s;a++){var o=r.getKeyForDataKey(i.updated[a]);if(t[o]&&n[o]){var l=e.getMetadata(o);l&&Object(pi.a)(l,zt.b)&&XD(e[o],t[o],n[o])}}return i}(l,o,n);if(i){var u=e._persistenceStore._dataHashes,d=u[s]||(u[s]={});for(var h in n)d[h]=n[h]}else e._persistenceStore._dataHashes[s]=n;return e.persistenceDataDidUpdate(s,c),c&&l&&(Pe.a.pause(),c.added.length>0&&JD(l,c.added),c.updated.length>0&&JD(l,c.updated),!i&&c.removed.length>0&&JD(l,c.removed),l.propertyChanged("storeStatus"),l.propertyChanged("loadStatus"),l.dataDidLoad(),l._fastBulkDataDidLoad&&l._fastBulkDataDidLoad(n,i,r),Pe.a.resume()),s}function XD(e,t,n){e.changes||(e.changes=e.changesClass.acquire(e));for(var i=e.changes,r=Math.min(t.length,n.length),a=0;a<r;a++)t[a]!==n[a]&&(i.recordRemoval(a,t[a]),i.recordInsertion(a,e.encode(n[a])));var s=t.length-n.length;if(s<0)for(var o=r,l=n.length;o<l;o++)i.recordInsertion(o,e.encode(n[o]));else if(s>0)for(var c=r,u=t.length;c<u;c++)i.recordRemoval(c,t[c])}function JD(e,t){for(var n=e.constructor,i=0,r=t.length;i<r;i++){var a=n.getKeyForDataKey(t[i]),s=e.getMetadata(a);if(s)if(Object(pi.a)(s,zt.b)){var o=e[a];o.changes&&o.changes.length?o.notifyIfNecessary():e.propertyChanged(a)}else e.propertyChanged(a)}}var eP=n(753),tP=n(564),nP=n(565),iP=P.a.extend({staticMembers:{transaction:function(e,t){return"function"===typeof e&&(t=t||this.get("store")||Object(L.n)(),this.set("store",t.branch()),e.call(this,t)),this.__s._$lB$transaction.call(this)},__superMap:{_$lB$transaction:"transaction"},__QUALIFIED_CLASS_NAME__:"Branch"},store:null}),rP=P.a.extend(ie.a,{action:function(e,t){var n=t.get("storeId");return e.isDataForked(n)&&e.resetData(n),Z.a.resolve()},staticMembers:{__QUALIFIED_CLASS_NAME__:"HardResetMergeStrategy"}}),aP=["updated","added","removed"],sP={MergeStrategy:rP,branches:Object(k.c)(Array),branch:function(e){(e=e||{}).parentStore=this,e._dataHashes=Object.create(this._dataHashes),e._revisions=Object.create(this._revisions);var t=jo.a.create(e);return this.get("branches").push(t),t},willMerge:U.a,didMerge:function(e){return e},merge:function(e){this.willMerge(e);var t,n,i=this.getPath("MergeStrategy.sharedInstance"),r=[];for(t=0,n=e.get("length");t<n;t++)r.push(i.action(this,e.objectAt(t)));this.notifyModels(e);var a=this.get("branches");for(t=0,n=a.length;t<n;t++)r.push(a[t].merge(e));var s=this;return Z.a.all(r).then((function(){return s.didMerge(e)}))},notifyModels:function(e){for(var t=0,n=e.get("length");t<n;t++)this.notifyModel(e.objectAt(t))},notifyModel:function(e){var t,n=this._materializedModels;if(n&&(t=n[e.get("storeId")])){var i=e.get("newData");if(!i)return;var r=e.get("diff");if(!r)return;var a,s,o=oP;for(o.length=0,a=0,s=aP.length;a<s;a++)for(var l=r[aP[a]],c=0,u=l.length;c<u;c++){var d=l[c],h=t.getKeyForDataKey(d);if(i.hasOwnProperty(d)){var p=t.get(h);if(Object(pi.a)(p,Ai.a)){var f=e.newData[d];if(f){var g=Object(Me.a)(f);g.unshift(p.get("length")),g.unshift(0),p.splice.apply(p,g)}else{var m=t.getMetadata(h);m&&m.clearCachedValueForObject(t,h)}}var _=t.getMetadata(h);Object(pi.a)(_,Uf.b)&&o.push(h)}}for(Pe.a.pause(),a=0;a<o.length;a++)t.propertyChanged(o[a]);Pe.a.resume(),o.length=0}}},oP=[],lP=n(323),cP=n(465),uP=P.a.extend(ie.a,{action:function(e,t){var n=t.storeId;if(t.changeType===L.d.WRITE.DESTROY)return e.deleteData.bind(e,n);var i=t.newData;for(var r in i)e.writeDataProperty(n,r,i[r]);return Z.a.resolve()},staticMembers:{__QUALIFIED_CLASS_NAME__:"OverwriteMergeStrategy"}}),dP=n(550),hP=Object(we.b)("TRANSACTION_STATES",(function(e){e("PENDING"),e("ACTIVE"),e("COMPLETED"),e("FAILED"),e("CANCELLED")})),pP=P.a.extend(hP.toStaticMixin(),Z.b,B.b,{operation:Object(H.d)(),subtransactions:Object(H.d)(),changes:Object(H.d)(),storeIds:Object(H.d)({readOnly:!0,get:function(){var e=this.changes;if(e)return e.storeIds;var t=this.operation,n=t&&t.type,i=t&&t.operation,r=i&&i.context,a=r&&r.primaryKeys;if(n&&Array.isArray(a)){for(var s=[],o=0,l=a.length;o<l;o++){var c=a[o];s.push(jo.a.getStoreIdForPrimaryKey(n,c))}return s}return n&&a?[jo.a.getStoreIdForPrimaryKey(n,a)]:void 0}}),status:Object(V.b)(hP.PENDING),activate:function(){this.status=hP.ACTIVE},complete:function(e){this.status=hP.COMPLETED,this.resolve(e)},fail:function(e){this.status=hP.FAILED,this.reject(e)},cancel:function(e){this.status=hP.CANCELLED,this.reject(e)},toString:function(){for(var e=this.operation,t=e.type.toString();e=e.operation;)t+=": "+e.type.toString();return t},staticMembers:{__QUALIFIED_CLASS_NAME__:"Transaction"}}),fP=n(458),gP={},mP=[],_P=oi.a.extend(fP.a,{_array:Object(k.c)(Array),encodedRawSplice:function(e,t){var n,i,r,a=this._map,s=this._array,o=e+t;for(n=e;n<o;n++)i=s[n],delete a[Object(Yl.b)(i)];for(mP.length=2,mP[0]=e,mP[1]=t,o=arguments.length,n=2;n<o;n++)i=arguments[n],r=Object(Yl.b)(i),a.hasOwnProperty(r)||(a[r]=e+mP.length-2,mP.push(i));return s.splice.apply(s,mP)},encodedAdd:function(e){var t=Object(Yl.b)(e),n=this._map;return!n.hasOwnProperty(t)&&(n[t]=this._array.push(e)-1,!0)},encodedRemove:function(e){var t=Object(Yl.b)(e),n=this._map;if(!n.hasOwnProperty(t))return!1;var i=n[t];delete n[t];var r=this._array,a=r[i];if(!Object.is(a,e))for(var s=this.get("length"),o=0;o<s;o++){var l=r[o];if(Object.is(l,e)){i=o;break}}return r.splice(i,1),!0},encodedContains:function(e){return oi.a.prototype.encodedContains.apply(this,arguments)},encodedObjectAt:function(e){return this._array[e]},length:Object(H.d)({readOnly:!1,get:vP,set:function(e){e<0&&Object(_.b)("Invalid length %{length}. Must be a positive integer.",{length:e,object:this});var t=this.get("_internalLength"),n=t-e;n>0?this.splice(e,n):n<0&&this.splice(t,0,void 0)}}),_internalLength:Object(H.d)({readOnly:!0,get:vP}),swap:function(e,t){var n=this.objectAt(t),i=this.objectAt(e);return this.setIndex(e,gP),this.setIndex(t,i),this.setIndex(e,n),this},staticMembers:{__QUALIFIED_CLASS_NAME__:"OrderedSet"}});function vP(){return this._array.length}var bP,yP,wP=_P.extend({transactions:Object(H.d)({get:function(){return this._array}}),add:function(e){var t=this,n=arguments;if(t.__s._$Ah$add.apply(t,n)){var i=e.storeIds;if(i)for(var r=this._storeIdSet,a=0,s=i.length;a<s;a++){var o=i[a],l=r[o];l||(l=r[o]=oi.a.create()),l.add(e)}}},remove:function(e){var t=this,n=arguments;if(t.__s._$MP$remove.apply(t,n)){var i=e.storeIds;if(i)for(var r=this._storeIdSet,a=0,s=i.length;a<s;a++){var o=i[a],l=r[o];l&&(l.remove(e),0===l.length&&delete r[o])}}},containsStoreId:function(e){var t=this._storeIdSet;if(t.hasOwnProperty(e)){var n=t[e];return n&&n.length>0}return!1},getTransactionsForStoreId:function(e){var t=this._storeIdSet;if(t.hasOwnProperty(e)){var n=t[e];return n&&n.toArray()}},_storeIdSet:Object(k.c)(Object),__superMap:{_$Ah$add:"add",_$MP$remove:"remove"},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransactionList"}}),IP=n(322),SP=P.a.extend({process:Object(nc.c)(Mn.a),addTransaction:function(e){return!this.supportsBulkTransactions&&this.isBulkTransaction(e)?this.addTransactions(this.splitTransaction(e)):(this._pendingTransactions.add(e),this._process(),e)},addTransactions:function(e){for(var t=0,n=e.length;t<n;t++)this._pendingTransactions.add(e[t]);return this._process(),e},sendTransaction:function(e){var t=Object(L.n)();return t||Object(_.b)("No DataManager to receive transaction."),e.finally(this._transactionDidFinish.bind(this,e)).catch(U.a),t.sendTransaction(e),this._transactionsSentDuringProcess.push(e),e},removeTransaction:function(e){return this._transactionsRemovedDuringProcess.push(e),e},cancelTransaction:function(e){return e.cancel(),this._transactionsRemovedDuringProcess.push(e),e},canSendTransaction:function(e){var t=Object(Yl.b)(e),n=this._transactionDependencies[t];if(n)for(var i=0,r=n.length;i<r;i++)if(n[i].status!==pP.COMPLETED)return!1;return!0},linkTransactions:function(e,t){var n=this._transactionDependencies,i=Object(Yl.b)(t),r=n[i];r||(r=n[i]=bP&&bP.pop()||[]),r.push(e)},splitTransaction:function(e){e.status===pP.ACTIVE&&Object(_.b)("CW.Data.TransactionProcessor#splitTransaction: Can not split a transaction that is already active.",{transaction:e});for(var t=e.changes,n=[],i=0,r=t.length;i<r;i++){var a=lP.a.create();a.recordChange(t.objectAt(i));var s=pP.create({changes:a,operation:a.operation});n[i]=s}return Z.a.all(n).then((function(t){e.complete(t)}),(function(t){e.fail(t)})),this._transactionsRemovedDuringProcess.push(e),n},splitTransactions:function(e){var t,n=e.length;if(1===n)t=this.splitTransaction(e[0]);else{t=[];for(var i=0;i<n;i++){var r=this.splitTransaction(e[i]);Object(dP.a)(t,r)}}return t||null},supportsBulkTransactions:Object(H.d)(!0),isBulkTransaction:function(e){var t=e.operation;return t&&t.type===L.d.WRITE.BULK},getNetworkStatus:function(e,t){e||Object(_.b)("CW.Data.TransactionProcessor#getNetworkStatus: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.TransactionProcessor#getNetworkStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=jo.a.getStoreIdForPrimaryKey(e,t);return this._activeTransactions.containsStoreId(n)?IP.a.ACTIVE.TRANSMITTING:this._pendingTransactions.containsStoreId(n)?IP.a.ACTIVE.QUEUED:IP.a.IDLE},getActiveTransactions:function(e,t){e||Object(_.b)("CW.Data.TransactionProcessor#getActiveTransactions: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.TransactionProcessor#getActiveTransactions: No primary key provided.",{dataManager:this,modelClass:e});var n,i=jo.a.getStoreIdForPrimaryKey(e,t),r=this._activeTransactions;r.containsStoreId(i)&&(n=r.getTransactionsForStoreId(i).slice(0));var a=this._pendingTransactions;return a.containsStoreId(i)&&(n=n||[]).push.apply(n,a.getTransactionsForStoreId(i)),n},_pendingTransactions:Object(k.c)(wP),_activeTransactions:Object(k.c)(wP),_transactionsSentDuringProcess:Object(k.c)(Array),_transactionsRemovedDuringProcess:Object(k.c)(Array),_transactionDependencies:Object(k.c)(Object),_process:function(){if(!this._isProcessing){this._isProcessing=!0;var e=this._pendingTransactions,t=this._activeTransactions;this.process(e.transactions,t.transactions),this._isProcessing=!1;var n=this._transactionsSentDuringProcess,i=n.length;if(i>0){for(var r=0;r<i;r++){var a=n[r];e.remove(a),t.add(a)}n.length=0}var s=this._transactionsRemovedDuringProcess,o=s.length;if(o>0){for(var l=0;l<o;l++){var c=s[l];e.remove(c),t.remove(c)}s.length=0}}},_transactionDidFinish:function(e){this._activeTransactions.remove(e),function(e,t){var n=Object(Yl.b)(t),i=e[n];Array.isArray(i)&&(i.length=0,(bP||(bP=[])).push(i)),delete e[n]}(this._transactionDependencies,e),0!==this._pendingTransactions.length&&this._process()},staticMembers:{__QUALIFIED_CLASS_NAME__:"TransactionProcessor"}}),CP=SP.extend({maximumActiveTransactions:6,prioritizeReads:!1,process:function(e,t){var n=this.maximumActiveTransactions-t.length;if(!(n<=0)){var i;if(this.prioritizeReads){i=[];for(var r=e.length,a=0;a<r&&i.length<n;a++){var s=e[a];s.isRead&&i.push(s)}for(var o=0;o<r&&i.length<n;o++){var l=e[o];l.isRead||i.push(l)}}else i=e.slice(0,n);for(var c=0,u=i.length;c<u;c++)this.sendTransaction(i[c])}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ParallelTransactionProcessor"}}),EP=CP.extend({maximumActiveTransactions:1,prioritizeReads:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SerializedTransactionProcessor"}}),AP=[],OP={mixinDependencies:[B.b],loadData:function(e,t,n){e||Object(_.b)("CW.Data.DataManager#loadData: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.DataManager#loadData: No data hash provided.",{dataManager:this,modelClass:e});var i,r,a=lP.a.create(),s=this._loadedStoreIds;if(Array.isArray(t))for(var o=0,l=t.length;o<l;o++)r=xP(e,t[o]),i=jo.a.getStoreIdForPrimaryKey(e,r),n||(s[i]=!0),a.recordChange(this.createChangeForDataItem(i,t[o],n));else r=xP(e,t),i=jo.a.getStoreIdForPrimaryKey(e,r),n||(s[i]=!0),a.recordChange(this.createChangeForDataItem(i,t,n));return this.merge(a).then(this.didLoadData.bind(this,a))},removeData:function(e,t){e||Object(_.b)("CW.Data.DataManager#removeData: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.DataManager#removeData: No primary key(s) provided.",{dataManager:this,modelClass:e});var n,i=lP.a.create();if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)n=jo.a.getStoreIdForPrimaryKey(e,t[r]),i.recordChange(this.createChangeForDataItem(n,null));else n=jo.a.getStoreIdForPrimaryKey(e,t),i.recordChange(this.createChangeForDataItem(n,null));return this.merge(i).then(this.didRemoveData.bind(this,i))},didLoadData:function(e){return this.didChangeDataForStoreIds(e.storeIds),e},didRemoveData:function(e){return this.didChangeDataForStoreIds(e.storeIds),e},MergeStrategy:rP,willMergeData:function(e){return e},didMergeData:function(e){return e},merge:function(e){var t,n,i=this,r=this.getPath("MergeStrategy.sharedInstance"),a=e.length;this.willMergeData(e);var s=[];for(n=0;n<a;n++)t=e.objectAt(n),s.push(r.action(this,t));for(n=0;n<a;n++)t=e.objectAt(n),this.notifyModel(t.storeId,LP,t);return Z.a.all(s).then((function(){return i.didMergeData(e)}))},notifyModel:function(e,t){var n=this._materializedModels,i=n&&n[e];if(i){var r=1,a=2,s=arguments.length;AP.length=s+r-a;for(var o=a,l=r;o<s;o++,l++)AP[l]=arguments[o];var c=AP;c[0]=i,t.apply(this,c)}},getNetworkStatus:function(e,t){e||Object(_.b)("CW.Data.DataManager#getNetworkStatus: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.DataManager#getNetworkStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=this.transactionProcessor;return n||Object(_.b)("CW.Data.DataManager#getNetworkStatus: No transaction processor defined.",{dataManager:this,modelClass:e,primaryKey:t}),n.getNetworkStatus(e,t)},getLoadStatus:function(e,t){e||Object(_.b)("CW.Data.DataManager#getLoadStatus: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.DataManager#getLoadStatus: No primary key provided.",{dataManager:this,modelClass:e});var n=jo.a.getStoreIdForPrimaryKey(e,t);return this._loadedStoreIds[n]?jT.a.LOADED:jT.a.NOT_LOADED},transactionProcessor:Object(k.c)(EP),operationHandlers:Object(k.c)(Array),getActiveTransactions:function(e,t){e||Object(_.b)("CW.Data.DataManager#getActiveTransactions: No model class provided.",{dataManager:this}),t||Object(_.b)("CW.Data.DataManager#getActiveTransactions: No primary key provided.",{dataManager:this,modelClass:e});var n=this.transactionProcessor;return n||Object(_.b)("CW.Data.DataManager#getActiveTransactions: No transaction processor defined.",{dataManager:this,modelClass:e,primaryKey:t}),n.getActiveTransactions(e,t)},performOperation:function(e,t){e||Object(_.b)("CW.Data.DataManager#performOperation: No operation provided.",{dataManager:this}),Object(J.a)(e)&&(e={type:e}),t?e.context?Object(_.b)("CW.Data.DataManager#performOperation: Conflict with `context` parameter; `operation` already contains a `context`. You must only provide one context per operation.",{dataManager:this,operation:e}):e.context=t:t=e.context||{},Object(g.a)(t)||Object(_.b)("CW.Data.DataManager#performOperation: context must be of type: object.",{dataManager:this}),t.operation=e;var n=this.transactionProcessor;n||Object(_.b)("CW.Data.DataManager#performOperation: No transaction processor defined.");var i=pP.create(t),r=this._outstandingTransactions,a=Object(Yl.b)(i);return r[a]=i,i.finally((function(){delete r[a]})).catch(U.a),n.addTransaction(i),i},commit:function(){var e,t=this._changes;if(this._changes=null,t&&t.length){e=this.performOperation(t.operation);for(var n=0,i=t.length;n<i;n++){var r=t.objectAt(n);this._commitChange(r)}}else(e=pP.create()).complete();return e},commitStoreIds:function(e){var t=this,n=this._changes;if(!n){var i=pP.create();return i.complete(),i}Array.isArray(e)||(e=[e]);var r=e.map((function(e){return n.removeChangeForStoreId(e)})).filter(K.a);if(0===r.length){var a=pP.create();return a.complete(),a}var s=r.reduce((function(e,t){return e.recordChange(t),e}),lP.a.create()),o=void 0;s.getPath("operation.context")||(o={changes:s});var l=this.performOperation(s.operation,o);return r.forEach((function(e){return t._commitChange(e)})),l},commitPrimaryKeys:function(e,t){var n;return n=Array.isArray(t)?t.map((function(t){return jo.a.getStoreIdForPrimaryKey(e,t)})):jo.a.getStoreIdForPrimaryKey(e,t),this.commitStoreIds(n)},findHandlerForOperation:function(e){return Object(tP.a)(e.type,this.operationHandlers)},sendTransaction:function(e){e||Object(_.b)("CW.Data.DataManager#sendTransaction: No transaction provided.",{dataManager:this}),e.status===pP.ACTIVE&&Object(_.b)("CW.Data.DataManager#sendTransaction: Transaction is already active.",{dataManager:this,transaction:e});var t=e.operation,n=this.findHandlerForOperation(t);if(n){e.activate();var i=e.changes;if(i)for(var r=0,a=i.length;r<a;r++){var s=i.objectAt(r);this.notifyModel(s.storeId,RP)}n.action(t).then(function(t){if(Object(pi.a)(t,cP.a))this.notifyModel(t.storeId,RP),t=t.model;else if(Object(pi.a)(t,lP.a))if(1===t.length)t=t.objectAt(0).model,this.notifyModel(t.storeId,RP);else{for(var n=0,i=t.length;n<i;n++){var r=t.objectAt(n);this.notifyModel(r.storeId,RP)}t=t.models}e.complete(t)}.bind(this),(function(t){e.fail(t)}))}else{for(var o,l=Yr.a,c=q.a,u=[],d=t;d;)o=l(d.type)?c(d.type):String(d.type),u.push(o),d=d.operation;e.fail("No handler for operation: "+u.join(" > "))}},cancelAllTransactions:function(){this.cancelAllActiveTransactions(),this.cancelAllPendingTransactions()},cancelAllActiveTransactions:function(){PP(this._outstandingTransactions,"cancel",pP.ACTIVE)},cancelAllPendingTransactions:function(){PP(this._outstandingTransactions,"cancel",pP.PENDING)},failAllTransactions:function(){this.failAllActiveTransactions(),this.failAllPendingTransactions()},failAllActiveTransactions:function(){PP(this._outstandingTransactions,"fail",pP.ACTIVE)},failAllPendingTransactions:function(){PP(this._outstandingTransactions,"fail",pP.PENDING)},_outstandingTransactions:Object(k.c)(Object),createChangeForDataItem:function(e,t){var n=Object(Me.a)(this._persistenceStore.readData(e));if(t)for(var i in t)this._persistenceStore.writeDataProperty(e,i,t[i]);else this._persistenceStore.deleteData(e);return cP.a.create(e,n,t)},_loadedStoreIds:Object(k.c)(Object),init:function(e){var t=this,n=arguments,i=Object(L.n)();i&&Object(_.b)("CW.Data.DataManager#init: Data manager already exists. Only one data manager can be instantiated.",{existingDataManager:i,erroringDataManager:this}),Object(L.v)(this),t.__s._$8R0$init.apply(t,n),this._dataHashes=Object.create(this._persistenceStore._dataHashes)},_persistenceStore:Object(H.d)({readOnly:!0,defaultValue:function(){return jo.a.create({MergeStrategy:uP})}}),_commitChange:function(e){var t=e.storeId,n=e.newData,i=e.modelClass;this.notifyModel(t,RP);var r=n&&xP(i,n);null!==r&&void 0!==r&&r!==jo.a.getPrimaryKeyForStoreId(t)&&jo.a.setPrimaryKeyForStoreId(t,r)},__superMap:{_$8R0$init:"init"}};function TP(e){return(yP||(yP=jo.a.extend(OP))).create(e)}var MP=["updated","added","removed"],DP=[];function PP(e,t,n){for(var i in e){var r=e[i];r.status===n&&r[t]()}}function LP(e,t){var n=t.newData;if(n){var i=t.diff;if(i){var r=DP;r.length=0;for(var a=t.modelClass,s=0,o=MP.length;s<o;s++)for(var l=i[MP[s]],c=0,u=l.length;c<u;c++){var d=l[c];if(n.hasOwnProperty(d)){var h=a.getKeyForDataKey(d),p=e.get(h),f=void 0;if(Object(pi.a)(p,Ai.a)){var g=Object(pi.a)(p,nP.a)||Object(pi.a)(p,QD.a),m=n[d];if(m)if(g){var _=t.originalData,v=Wo.a.fromArrays(_&&_[d],m,e);p.contentsDidChange(v)}else{var b=Object(Me.a)(m);b.unshift(p.length),b.unshift(0),p.splice.apply(p,b)}else f=e.getMetadata(h),Object(pi.a)(f,Uf.b)&&f.clearCachedValueForObject(e,h)}f=f||e.getMetadata(h),Object(pi.a)(f,Uf.b)&&r.push(h)}}Pe.a.pause();for(var y=0,w=r.length;y<w;y++)e.propertyChanged(r[y]);e.propertyChanged("loadStatus"),e.propertyChanged("networkStatus"),e.dataDidLoad(),Pe.a.resume(),r.length=0}}}function RP(e){e.propertyChanged("networkStatus")}function xP(e,t){var n=e.primaryKey;return n||Object(_.b)("CW.Data.DataManager#getPrimaryKeyFromData: Attempted to locate primary key on a model class that does not specify one.",{data:t,modelClass:e}),t[e.getDataKeyForKey(n)]}var NP={mixinDependencies:[Tn.a],baseValue:$n.a.define(),direction:$n.a.define(),key:$n.a.define(),leftValue:$n.a.define(),rightValue:$n.a.define(),type:$n.a.define()},FP={valueForChange:null,valueForChangeInChangeSets:null},VP=n(563),kP=n(453),BP=n(725),jP=n(544),UP=n(730),GP=n(443),HP=n(352),WP=n(473),$P=n(775),zP=n(728),KP=n(727),qP=n(724),QP=n(395),YP=n(726),ZP=n(723),XP=n(734),JP=n(732),eL=n(528),tL=n(729),nL=n(542),iL=n(795),rL=n(1257),aL=P.a.extend({downloadFromURL:function(e){return this._createLinkAndTrigger(e.toString()),Z.a.resolve(e)},downloadFromURLs:function(e){for(var t=e.length,n=new Array(t),i=0;i<t;i++)n[i]=this.downloadFromURL(e[i]);return n},_createLinkAndTrigger:function(e){var t=document.createElement("a");t.href=e,t.download="";var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),t.dispatchEvent(n)},staticMembers:{__QUALIFIED_CLASS_NAME__:"LinkDownloader"}}),sL=P.a.extend({_downloader:null,init:function(){var e=this,t=arguments;e.__s._$Fs$init.apply(e,t);var n=te.a.sharedInstance;DD.isDownloadAttributeSupported&&(n.isChrome&&n.majorVersion<65||n.isEdge)?this._downloader=this.linkDownloaderClass.create():this._downloader=this.iframeDownloaderClass.create()},downloadFromURL:function(e){return this._downloader.downloadFromURL(e)},downloadFromURLs:function(e){return this._downloader.downloadFromURLs(e)},iframeDownloaderClass:xd,linkDownloaderClass:aL,__superMap:{_$Fs$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DownloadManager"}}),oL=n(773),lL=n(1258),cL=n(772),uL=n(743),dL=n(744),hL=n(745),pL={Audio:"audio.*",Image:"image.*",Video:"video.*"},fL=P.a.extend({staticMembers:{KILOBYTE:1024,MEGABYTE:1048576,GIGABYTE:1073741824,TERABYTE:1099511627776,PETABYTE:0x4000000000000,__QUALIFIED_CLASS_NAME__:"FileValidator"},allowedFileTypes:null,maxSize:null,minSize:null,validate:function(e){Zg.get("sharedInstance").isFile(e)||Object(_.b)("Must provide a file.");var t=this.get("allowedFileTypes");if(t&&!e.type.match(t))return!1;var n=e.size,i=this.get("minSize"),r=this.get("maxSize");return!(r&&n>r)&&!(i&&n<i)}}),gL=n(774),mL=fi.a.extend({viewClass:In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"subject"}],styles:{position:"absolute",left:"0",top:"0",height:"200px",width:"200px"}}},className:"cw-responder-container"},isRootView:!0}),subject:Object(Ci.b)("subject"),isRootViewController:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerViewController"}}),_L=P.a.extend({init:function(e){this.__s._$C0$init.call(this);var t=this.container;document.body.appendChild(t.view.element),t._setIsAttached(!0),t.view.isAttached=!0,(e.instanceOf(fi.a)?t:t.view).subject=e},container:Object(H.d)({strong:!0,defaultValue:Object(k.c)(mL)}),dispose:function(){var e=this.container;document.body.removeChild(e.view.element),this.__s._$LJ$dispose.call(this)},__superMap:{_$C0$init:"init",_$LJ$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DOMInjector"}});function vL(e,t,n){for(var i=n.length,r=0;r<i;r++){var a=n[r];t[a]=e[a]}return t}var bL=P.a.extend({event:null,handled:!1,prevented:!1,rootResponder:null,eventType:null,eventKeys:["target"],generateEvent:function(e,t,n){t||(t=this.eventType),n||(n={});var i,r=!1;if(n instanceof Event){vL(i=n,n={cwType:e,nativeEvent:i},t.nativePropertiesToCopy);var a=i.preventDefault;i.preventDefault=function(){r=!0,a.apply(this,arguments)}}else i=t.create(Object(gi.a)(n,{preventDefault:function(){r=!0}})),n=Object(gi.a)(n,{cwType:e,nativeEvent:i});var s=t.create(n);vL(this,s,this.eventKeys),this.handled=this.rootResponder.dispatchEvent(s),this.event=s,this.prevented=r;for(var o=this.callbacks,l=o.length,c=0;c<l;c++)o[c](this);return this},init:function(){var e=this,t=arguments;e.__s._$px$init.apply(e,t),this.callbacks||(this.callbacks=[])},callbacks:null,afterEach:function(e){return this.callbacks.push(e),this},__superMap:{_$px$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EventGenerator"}}),yL={},wL=bL.extend({pointerId:null,eventType:gl.a,eventKeys:Object(F.b)(["pointerId","clientX","clientY","screenX","screenY","pointerType"]),init:function(){var e=this,t=arguments;e.__s._$Eb$init.apply(e,t);var n=this.pointerId;yL[n]?Object(_.b)("cannot create another cycle with this same pointerId"):yL[n]=!0,this.generateEvent("pointerDown")},moveTo:function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.clientX=e,this.screenX=e,this.clientY=t,this.screenY=t,this.generateEvent("pointerMove"),this},move:function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.clientX+=e,this.screenX+=e,this.clientY+=t,this.screenY+=t,this.generateEvent("pointerMove"),this},_end:function(){return yL[this.pointerId]=!1,this.parent},end:function(){return this.generateEvent("pointerUp"),this._end()},cancel:function(){return this.generateEvent("pointerCancel"),this._end()},finish:function(){return this.end().finish()},__superMap:{_$Eb$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PointerCycle"}}),IL=kP.a.extend({staticMembers:{nativePropertiesToCopy:kP.a.nativePropertiesToCopy.concat(["type","data","inputType"]),__QUALIFIED_CLASS_NAME__:"InputEvent"},init:function(e){var t=this,n=arguments,i=e.nativeEvent||e;"function"===typeof i.getTargetRanges&&(this.ranges=i.getTargetRanges()),t.__s._$7m$init.apply(t,n)},stopped:!1,stopPropagation:function(){this.stopped=!0},getTargetRanges:function(){return this.ranges},__superMap:{_$7m$init:"init"}}),SL=kP.a.extend({staticMembers:{nativePropertiesToCopy:kP.a.nativePropertiesToCopy.concat(["type","key","code","which","isComposing","repeat","location"]),__QUALIFIED_CLASS_NAME__:"KeyEvent"},stopped:!1,stopPropagation:function(){this.stopped=!0}});function CL(e,t,n){return(CL=EL()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&AL(r,n.prototype),r}).apply(null,arguments)}function EL(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function AL(e,t){return(AL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}try{new KeyboardEvent("keydown",{key:"a"})}catch(aY){window.KeyboardEvent=function(e,t){this.type=e,t&&Object.assign(this,t)}}try{new InputEvent("beforeinput",{data:"b"})}catch(aY){window.InputEvent=function(e,t){if(this.type=e,t){var n=(t||{}).ranges;Object.assign(this,{getTargetRanges:function(){return n}},t)}}}var OL=function e(t){var n=t;if("function"===typeof t?t=n.name:n=window[t],"function"!==typeof n)throw new Error("Can't produce nativeEvent without a constructor");for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var s=CL(n,r),o=e[t];return"function"===typeof o?o.apply(void 0,[s].concat(r)):s};OL.InputEvent=function(e,t,n){if(!e.inputType){var i=n.inputType;e.__defineGetter__("inputType",(function(){return i}))}var r=n.ranges;return r&&e.getTargetRanges().length!==r.length&&e.__defineGetter__("getTargetRanges",(function(){return function(){return r}})),e};var TL=1;function ML(){return TL++}var DL=bL.extend({init:function(e){this.__s._$Rs$init.call(this);var t,n=this.target=e.instanceOf(fi.a)?e.view.element:e.element;if(e.isAttached)t=n;else{for(var i,r=e;i=r.parent;)r=i;t=(this._domInjector=_L.create(r)).container.view.element}this.rootResponder=P_.a.create({element:t})},_domInjector:Object(H.d)({strong:!0}),feedNativeEvents:function(e){var t=this;return e.forEach((function(e){e instanceof Array&&(e=OL.apply(void 0,e));var n=e.type,i=kP.a;switch(e.type){case"keydown":n="keyDown",i=SL;break;case"keyup":n="keyUp",i=SL;break;case"beforeinput":n="beforeInput",i=IL;break;case"input":i=IL}t.generateEvent(n,i,e)})),this},spawnCycle:function(e,t){return e.create(Object(gi.a)(t,{parent:this,rootResponder:this.rootResponder,target:this.target,callbacks:Object(vl.a)(this.callbacks)}))},click:function(e,t,n){return"object"===typeof e&&(n=e,e=void 0),void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.spawnCycle(wL,{pointerId:0,clientX:e,screenX:e,clientY:t,screenY:t,pointerType:gl.b.MOUSE}).end()},tap:function(e,t,n){return"object"===typeof e&&(n=e,e=void 0),void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.spawnCycle(wL,{pointerId:ML(),clientX:e,screenX:e,clientY:t,screenY:t,pointerType:gl.b.TOUCH}).end()},beginClick:function(e,t,n){return"object"===typeof e&&(n=e,e=void 0),void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.spawnCycle(wL,{pointerId:0,clientX:e,screenX:e,clientY:t,screenY:t,pointerType:gl.b.MOUSE})},beginTouch:function(e,t,n){return"object"===typeof e&&(n=e,e=void 0),void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n),this.spawnCycle(wL,{pointerId:ML(),clientX:e,screenX:e,clientY:t,screenY:t,pointerType:gl.b.TOUCH})},wheel:function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),n&&(this.target=n);var i=ID.a.sharedInstance.deltaMultiplierForScrollEvent();return this.generateEvent("wheel",UP.a,{deltaX:e/i,deltaY:t/i})},finish:function(){this.finished||(this._domInjector=null,this.finished=!0)},finished:!1,dispose:function(){this.finish(),this.__s._$2I1$dispose.call(this)},__superMap:{_$Rs$init:"init",_$2I1$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"EventSimulator"}}),PL=!1;function LL(){if(!PL){var e=G.a.application||G.a.create().retain().autorelease();return Z.a.resolve(pD.a.create().retain().autorelease().action(e)).finally((function(){PL=!0}))}}var RL=n(536),xL=n(456),NL=n(710),FL=n(708),VL=n(354),kL=n(546),BL=n(320),jL=n(459),UL=jL.a.extend({_node:null,initFromPool:function(e,t,n){var i=this,r=arguments;arguments.length<=2?i.__s._$7y$initFromPool.apply(i,r):(this._node=n,i.__s._$7y$initFromPool.call(i,e),this._previousPosition=this._position=t)},didEnterPool:function(){this._previousPosition=0,this._node=null,this.__s._$E8$didEnterPool.call(this)},_previousPosition:0,position:Object(H.d)({set:function(e){var t=this.get("source");if(!t)return e;var n=this.get("length");if(e<0||e>=n)return this._node=null,this._previousPosition=e;var i=!this._node;if(!i){var r=Math.abs(e-this._previousPosition);(r>e||r>n-1-e)&&(i=!0)}i&&(e<n/2?(this._node=t._firstNode,this._previousPosition=0):(this._node=t._lastNode,this._previousPosition=n-1));for(var a=e-this._previousPosition;a>0;)this._node=this._node.next,a--;for(;a<0;)this._node=this._node.prev,a++;return this._previousPosition=e}}),value:Object(H.d)({get:function(){return this.source.decode(this.encodedValue)},set:function(e){return this.encodedValue=this.source.encode(e),e}}),encodedValue:Object(H.d)({get:function(){return this._node?this._node.item:void 0},set:function(e){return this._node.item=e,e}}),clone:function(){return this.constructor.create(this.get("source"),this.get("position"),this._node)},remove:function(){var e=this._node;if(!e)return!1;var t=e.next,n=this.clone().retain();return this.get("source")._spliceWithIterator(n,this.get("position"),1),n.release(),this._node=t,!0},add:function(e){var t=this.get("position")+1,n=this.clone().retain();return this.get("source")._spliceWithIterator(n,t,0,e),n.release(),this.set("position",Math.min(t,this.get("length")-1)),!0},__superMap:{_$7y$initFromPool:"initFromPool",_$E8$didEnterPool:"didEnterPool"},staticMembers:{__QUALIFIED_CLASS_NAME__:"LinkedListIterator"}}),GL=[],HL=P.a.extend(fP.a,{staticMembers:{_recycleNode:function(e){e.item=null,e.next=null,e.prev=null,GL.push(e)},__QUALIFIED_CLASS_NAME__:"LinkedList"},iteratorClass:UL,_firstNode:null,_lastNode:null,length:Object(H.d)({defaultValue:0,set:function(e,t,n,i,r){e<0&&Object(_.b)("Invalid length %{length}. Must be a non-negative integer.",{length:e,object:this});var a=this.get("_internalLength"),s=a-e;if(this.itemsWillChange(),s>0)this.itemsWillBeRemoved(e,s),this.splice(e,s),this.itemsWereRemoved(e,s);else if(s<0){var o=-s;this.itemsWillBeInserted(e,o);for(var l=o;l>0;){var c=l<=$L?l:$L;WL.length=c+2,WL[0]=a,WL[1]=0,this.splice.apply(this,WL),l-=c,a+=c}this.itemsWereInserted(e,o)}return this.itemsDidChange(),WL.length=0,e}}),_internalLength:Object(H.d)({readOnly:!0,get:function(){return this._length}}),encodedRawSplice:function(e,t){var n=this.createIterator().retain(),i=Object(gm.a)(arguments,1);i[0]=n;var r=this._spliceWithIterator.apply(this,i);return n.release(),r},_spliceWithIterator:function(e,t,n){var i=this._length;t<0?(t+=i)<0&&(t=0):t>i&&(t=i);var r=arguments.length-3||0,a=n;this.itemsWillChange(),a>0&&this.itemsWillBeRemoved(t,a),r>0&&this.itemsWillBeInserted(t,r),e.moveTo(t-1);var s=e._node;e.moveTo(Math.min(i,t+n));for(var o,l=e._node,c=arguments.length;c-- >3;){var u=GL.pop()||{};u.item=arguments[c],u.next=l,u.prev=null,l?l.prev=u:this._lastNode=u,l=u,this._length++}0===t?(o=this._firstNode,this._firstNode=l):(o=s.next,s.next=l,l?l.prev=s:this._lastNode=s);for(var d=[];o&&n--;){d.push(o.item);var h=o.next;this.constructor._recycleNode(o),o=h,this._length--}return r>0&&this.itemsWereInserted(t,r),a>0&&this.itemsWereRemoved(t,a),this.itemsDidChange(),d},encodedObjectAt:function(e){var t=this.createIteratorAt(e).retain(),n=t.encodedValue;return t.release(),n}}),WL=[],$L=1e4,zL=n(547),KL=n(702),qL=n(703),QL=n(393),YL=n(701),ZL=n(707),XL=n(709),JL={mixinDependencies:[Tn.a],didRemoveItem:function(e){}},eR=P.a.extend(fP.a,{_items:[],_index:0,_sizeLimit:null,init:function(e){var t,n=this;"object"===typeof e?(t=e.sizeLimit,this.set("delegate",e.delegate)):t=e,("number"!==typeof t||t<=0)&&Object(_.b)("sizeLimit must be a positive integer before pushing items."),this._sizeLimit=t,this._items=[];for(var i=1,r=arguments.length;i<r;i++)this.push(arguments[i]);n.__s._$1Gb$init.call(n)},delegate:null,rawSplice:function(){this.normalizeIndex();var e=this._items,t=this._sizeLimit,n=e.splice.apply(e,arguments),i=e.length;return i>t&&(this._items=e.splice(0,t),n=this._items),this._index=e.length,n},encodedRawSplice:function(){return this.rawSplice.apply(this,arguments)},normalizeIndex:function(){var e=this._items,t=this._sizeLimit,n=this._index,i=[];if(!t||n<t||n%t===0)return e;for(var r=n;r%t!==0;)i.push(e[r%t]),r++;for(var a=0,s=n%t;a<s;a++)i.push(e[a]);return this._items=i,this._index=i.length,i},toArray:function(){return this.normalizeIndex(),this._items},push:function(){for(var e,t,n=this.get("delegate"),i=n?n.get("didRemoveItem"):null,r=0,a=arguments.length;r<a;r++)e=this._index%this._sizeLimit,t=this._items[e],this._items[e]=arguments[r],this._index++,t&&i&&i(t)},objectAt:function(e){var t=this._sizeLimit,n=this._items,i=this._index%t,r=e+i;return"number"!==typeof t||e<0||e>=t?void 0:n.length<t||0===i?n[e]:r<t?n[r]:n[r-t]},encodedObjectAt:function(e){return this.objectAt(e)},length:Object(H.d)({get:tR}),_internalLength:Object(H.d)({get:tR}),__superMap:{_$1Gb$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"RollingArray"}});function tR(){return this._items.length}var nR=n(476),iR=n(570),rR=n(537),aR=n(314),sR=n(348),oR=n(733),lR=[],cR={mixinDependencies:[aR.a],staticMembers:{cloneKeys:[]},clone:function(){var e=this.constructor.get("cloneKeys");Object(sR.a)(lR,e,2,0),lR[0]=this,lR[1]={};var t=oR.a.apply(null,lR);return this.constructor.create(t)}},uR=n(526),dR=n(440),hR={mixinDependencies:[Tn.a],staticMembers:{subclassFor:Object(nc.c)(Mn.a),shouldAutomaticallySubclass:!0,init:function(){var e=this,t=arguments;e.__s._$NE$init.apply(e,t),this.hasOwnProperty("subclassFor")||this.hasOwnProperty("shouldAutomaticallySubclass")||(this.shouldAutomaticallySubclass=!1)},create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=arguments;if(!this.shouldAutomaticallySubclass)return i.__s._$SR$create.apply(i,r);var a=this.subclassFor.apply(this,t);return a||Object(_.b)("SubclassFactoryProtocol: No subclass exists for the given combination of arguments",{class:this,properties:t}),a.kindOf(this)||Object(_.b)("SubclassFactoryProtocol: Subclasses returned from `subclassFor` must be subclasses of the extending class.",{class:this,subclass:a}),i.__s._$SR$create.apply(a,arguments)},extend:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=arguments;if(!this.shouldAutomaticallySubclass)return i.__s._$nL$extend.apply(i,r);var a=this.subclassFor.apply(this,t);return a?a.kindOf(this)||Object(_.b)("SubclassFactoryProtocol: Subclasses returned from `subclassFor` must be subclasses of the extending class.",{class:this,subclass:a}):a=this,i.__s._$nL$extend.apply(a,arguments)},__superMap:{_$NE$init:"init",_$SR$create:"create",_$nL$extend:"extend"}}},pR=H.a.extend({requiresSupport:hR,readOnly:!0,staticMembers:{__QUALIFIED_CLASS_NAME__:"SubclassProperty"}});function fR(){return pR.create.apply(pR,arguments)}var gR={mixinDependencies:[nc.b,hR],staticMembers:{initializeClass:function(){var e,t=this,n=arguments,i=this.prototype.getMetadataByType(pR),r=!0;for(var a in i)i.hasOwnProperty(a)&&(r&&(r=!1,e=this.subclassProperties=Object(vl.a)(this.subclassProperties)),e.push(a));r||(this._subclassInfo=new Array(e.length)),this._subclasses=null,this._isBaseClass&&(this._isBaseClass=!1,this.registerSubclass(this)),t.__s._$10G$initializeClass.apply(t,n)},_isBaseClass:!0,subclassProperties:[],extendAndRegister:function(){var e=this.extend.apply(this,Array.prototype.slice.call(arguments).concat([{staticMembers:{__QUALIFIED_CLASS_NAME__:"subclass"}}]));return e.shouldAutomaticallySubclass=!0,this.registerSubclass(e),e},subclassFor:function(e){var t=this._subclasses;if(null===t||void 0!==e&&!Object(g.a)(e))return this;var n,i,r=this.subclassProperties,a=r.length,s=this._subclassInfo,o=this.prototype;for(n=0;n<a;n++){var l=r[n];i=void 0,e&&(i=e[l]),void 0===i&&(i=o[l]),s[n]=i}return t[Object(af.a)(s)]},registerSubclass:function(e){var t=this._subclasses;t||(t=this._subclasses={});for(var n=this.subclassProperties,i=this._subclassInfo,r=n.length,a=e.prototype,s=0;s<r;s++){var o=a[n[s]];i[s]=o}t[Object(af.a)(i)]=e,e._subclasses=t},_subclasses:null,_subclassInfo:null,__superMap:{_$10G$initializeClass:"initializeClass"}}},mR=n(687),_R=n(452),vR=n(747),bR=Ae.extend({message:"Validation.InvalidEmail",pattern:/^.+@.+$/i,staticMembers:{__QUALIFIED_CLASS_NAME__:"EmailValidator"}}),yR=Ee.extend({message:"Validation.InvalidLength",min:Object(H.d)({type:"number",defaultValue:0,set:function(e){return e<0&&Object(_.b)("Minimal value of a length can't be lower then 0"),e}}),max:Object(H.d)({type:"number",defaultValue:Number.POSITIVE_INFINITY}),validate:function(e){return("string"===typeof e||e instanceof String)&&e.length>=this.get("min")&&e.length<=this.get("max")},staticMembers:{__QUALIFIED_CLASS_NAME__:"LengthValidator"}}),wR=Ee.extend({message:"Validation.IsEmpty",validate:function(e){return"boolean"===typeof e||e instanceof Boolean||(e="number"===typeof e||e instanceof Number?e.toString():e,!Object(Vn.a)(e))},staticMembers:{__QUALIFIED_CLASS_NAME__:"NotEmptyValidator"}}),IR=Ee.extend({message:"Validation.InvalidRange",min:Object(H.d)({type:"number",defaultValue:Number.NEGATIVE_INFINITY}),max:Object(H.d)({type:"number",defaultValue:Number.POSITIVE_INFINITY}),validate:function(e){return("number"===typeof e||e instanceof Number)&&e>=this.get("min")&&e<=this.get("max")},staticMembers:{__QUALIFIED_CLASS_NAME__:"RangeValidator"}}),SR=Jh.a.extend({_poolArray:null,_poolObjectCount:0,objectClass:null,init:function(){var e=this,t=arguments;e.__s._$Dc$init.apply(e,t),this._poolArray=[],this._poolObjectCount=0,this._generateClosures()},_generateClosures:function(){var e=this._poolObjectCount,t=this._poolArray,n=this.objectClass;this.getOrCreate=function(){var i;return e>0?(i=t[e-1],t[e-1]=void 0,e--):i=n.create(),i},this.returnToPool=function(n){t[e]=n,e++}},getOrCreate:null,returnToPool:null,__superMap:{_$Dc$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"_ObjectPool"}}),CR=n(457),ER=n(716),AR=n(715),OR=n(712),TR=n(713),MR=n(711),DR=n(752),PR=n(695),LR=n(296),RR=n(278),xR=n(351),NR=n(282),FR=n(442),VR=n(691),kR=n(693),jR=n(692),UR=n(539),GR=n(253),HR=n(538),WR=n(689),$R=n(690),zR=n(694),KR=n(460),qR=n(229),QR=P.a.extend(B.b,{benchmarkEvent:Object(B.i)(),start:function(e,t){e?this.benchmarkEvent({name:e,context:t,timestamp:window.performance.now(),type:"start"}):Object(_.b)("Benchmark: name required")},stop:function(e,t){e?this.benchmarkEvent({name:e,context:t,timestamp:window.performance.now(),type:"stop"}):Object(_.b)("Benchmark: name required")},staticMembers:{__QUALIFIED_CLASS_NAME__:"Benchmark"}}).create();function YR(){}var ZR={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",attributes:{draggable:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"isDraggable",attributes:{},attribute:"draggable"}}}}},mixinDependencies:[Tn.a,B.b],isDraggable:Object(V.b)(!0),isDragging:Object(V.b)(!1),providedDragTypes:Object(H.d)(Object(k.c)([Pn.TEXT])),provideDataForDragType:Mn.a.define(),getAllowedOperationsForDrag:function(e){return[Dn.MOVE]},dragDidStart:U.a,dragDidMove:U.a,dragDidEnd:U.a,dragStart:function(e){var t=this.getAllowedOperationsForDrag(e);if(!(t&&t.length>0))return!1;var n=[];if(-1!==t.indexOf(Dn.COPY)&&n.push(Dn.COPY),-1!==t.indexOf(Dn.LINK)&&n.push(Dn.LINK),-1!==t.indexOf(Dn.MOVE)&&n.push(Dn.MOVE),0===n.length)return e.dataTransfer.effectAllowed="none",!1;if(3===n.length)e.dataTransfer.effectAllowed="all";else{var i=n[0];if(n.length>1){var r=n[1];i+=r.charAt(0).toUpperCase()+r.slice(1)}e.dataTransfer.effectAllowed=i}for(var a=this.providedDragTypes,s=!1,o=0,l=a.length;o<l;o++){var c=a[o],u=this.provideDataForDragType(e,c);null!==u&&void 0!==u&&(Ln.setDataForType(u,c),e.dataTransfer.setData("Text",""),s=!0)}return!!s&&(this.dragDidStart(e),this.isDragging=!0,!0)},drag:function(e){return!!this.isDragging&&(this.dragDidMove(e),!0)},dragEnd:function(e){return!!this.isDragging&&(this.isDragging=!1,this.dragDidEnd(e),Ln.clearAllData(),!0)}},XR=(n(1285),function(e,t,n,i){if("function"===typeof e.dataTransfer.setDragImage)e.dataTransfer.setDragImage(t,n,i);else{var r=e.target;r.classList.add("cw-set-drag-image-original"),t.style.top=0,t.style.left=0,t.classList.add("cw-set-drag-image-ghost"),r.appendChild(t),Object(X.a)((function(){t.parentNode.removeChild(t),r.classList.remove("cw-set-drag-image-original")}),0)}}),JR=n(780),ex=n(771),tx=n(776),nx=n(404),ix=n(310),rx=(n(1286),In.a.extend(Mp.a,nx.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}],name:"container",classes:["container","cw-scrolling-container"]}],classes:["cw-scroll-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"nativeScrollIsEnabled",truevalue:"cw-native-scrolling",attributes:{}}]}},className:"cw-ui-scroll-view",__QUALIFIED_CLASS_NAME__:"ScrollView"},init:function(){var e=this,t=arguments;e.__s._$J3$init.apply(e,t),this._syncScrollFromDomChanges=this._syncScrollFromDomChanges.bind(this),Object(Ze.a)(this.container,"scroll",this._syncScrollFromDomChanges,!1)},scrollContainer:Object(H.d)({get:function(){return this.container}}),dispose:function(){var e=this,t=arguments;Object(Xe.a)(this.container,"scroll",this._syncScrollFromDomChanges,!1),e.__s._$Rm$dispose.apply(e,t)},_syncScrollFromDomChanges:function(){var e=this.container,t=this.scrollY,n=this.scrollX,i=e.scrollTop-(parseInt(e.style.top,10)||0)+(parseInt(e.style.bottom,10)||0);Math.trunc(t)!==i&&(this.scrollY=i);var r=e.scrollLeft-(parseInt(e.style.left,10)||0)+(parseInt(e.style.right,10)||0);Math.trunc(n)!==r&&(this.scrollX=r)},windowSize:Object(V.b)(te.a.get("sharedInstance").window),scrollMaxX:Object(V.b)({readOnly:!0,cacheable:!1,dependencies:["isAttached","windowSize.width","contentView"],get:function(){return this.get("container").scrollWidth}}),scrollMaxY:Object(V.b)({readOnly:!0,cacheable:!1,dependencies:["isAttached","windowSize.height","contentView"],get:function(){return this.get("container").scrollHeight}}),height:Object(V.b)({readOnly:!0,cacheable:!1,dependencies:["element","isAttached"],get:Object.assign((function(){return this.element.clientHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).clientHeight}})}),width:Object(V.b)({readOnly:!0,cacheable:!1,dependencies:["element","isAttached"],get:Object.assign((function(){return this.element.clientWidth}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).clientWidth}})}),scrollElementY:Object(B.h)("scrollY","height","scrollHeight",(function(e,t,n){var i=Math.max(0,n-t),r=ax(e,0,i),a=sx(e,0),s=ox(e,0,i),o=this.container,l=o.style;o.scrollTop=r,l.top=a?a+"px":"",l.bottom=s?s+"px":""})),scrollElementX:Object(B.h)("scrollX","width","scrollWidth",(function(e,t,n){var i=Math.max(0,n-t),r=ax(e,0,i),a=sx(e,0),s=ox(e,0,i),o=this.container,l=o.style;o.scrollLeft=r,l.left=a?a+"px":"",l.right=s?s+"px":""})),__superMap:{_$J3$init:"init",_$Rm$dispose:"dispose"}}));function ax(e,t,n){return e<t?t:e>n?n:e}function sx(e,t,n){return e<t?t-e:0}function ox(e,t,n){return e>n?e-n:0}var lx=n(781),cx=(n(1287),{mixinDependencies:[B.b],arrowIsShowing:Object(V.b)(!0),arrowDirection:Object(V.b)("bottom"),arrowAlignment:Object(V.b)("left"),arrowOffset:Object(V.b)(0),_updateArrow:Object(B.h)("element","arrowIsShowing","arrowDirection","arrowAlignment","arrowOffset",(function(e,t,n,i,r){if(e){var a=this._arrowDiv,s=this._arrowContainer;if(t){if(ux[n]||Object(_.b)('Attempted to point arrow: "'+n+'". Arrows can only be point in the `left`, `right`, `top` or `bottom` direction.',this),dx[n][i]||(i=hx[n]),!a){var o=document.createElement("div");s=this._arrowContainer=document.createElement("div"),a=this._arrowDiv=document.createElement("div"),s.className="cw-arrow-container",o.className="cw-arrow-centering",a.className="cw-arrow",o.appendChild(a),s.appendChild(o),e.appendChild(s)}var l=e.className.replace(/(\s|^)cw-arrow-\w*(\s|$)/,"$2");e.className=l,l=s.className.replace(/(\s|^)cw-align-\w*(\s|$)/,"$2"),s.className=l,e.classList.add("cw-has-arrow","cw-arrow-"+n),s.classList.add("cw-align-"+i),"center"===i&&(i=hx[n]),Object(yl.c)(a,i,r)}else s&&(e.classList.remove("cw-has-arrow"),e.removeChild(s))}}))}),ux={top:!0,bottom:!0,right:!0,left:!0},dx={};dx.top=dx.bottom={left:!0,center:!0,right:!0,defaultAlignment:"left"},dx.left=dx.right={top:!0,center:!0,bottom:!0,defaultAlignment:"top"};var hx={};hx.top=hx.bottom="left",hx.left=hx.right="top";var px,fx,gx,mx=n(353),_x=n(704),vx=n(705),bx=n(548),yx=n(297),wx=n(706),Ix=n(720),Sx=n(284),Cx=n(247),Ex=n(527),Ax=n(721),Ox=n(219),Tx=n(722),Mx=n(555),Dx=P.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuDividerItem"}}),Px=km.a.extend({staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuDividerItemCell"}}),Lx=P.a.extend(B.b,{title:Object(V.b)({type:"string"}),titleIsAlwaysLTR:Object(V.b)({defaultValue:!1,type:"boolean"}),iconClass:Object(V.b)({type:"string"}),isDisabled:Object(V.b)({defaultValue:!1,type:"boolean"}),hasCheckmark:Object(V.b)({defaultValue:!1,type:"boolean"}),shouldEscapeTitle:Object(V.b)({defaultValue:!0,type:"boolean"}),ariaLabel:Object(V.b)({type:"string"}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuItem"}}),Rx=Um.b.extend({dividerRowHeight:Object(V.b)(),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuListLayoutMetrics"}}),xx=(n(438),n(439),Object(we.b)("Direction",{EAST:0,NORTHEAST:45,NORTH:90,NORTHWEST:135,WEST:180,SOUTHWEST:225,SOUTH:270,SOUTHEAST:315})),Nx={mixinDependencies:[Tn.a],shouldHighlightMenuItem:Mn.a.define(),willHighlightMenuItem:null,didHighlightMenuItem:null,willUnhighlightMenuItem:null,didUnhighlightMenuItem:null,shouldCommitMenuWithItem:Mn.a.define(),willCommitMenuWithItem:null,didCommitMenuWithItem:null},Fx={mixinDependencies:[Nx],shouldHighlightMenuItem:function(e,t){return t.constructor.kindOf(Lx)?!t.isDisabled:!t.constructor.kindOf(Dx)},shouldUnhighlightMenuItem:function(e,t){return!0},shouldCommitMenuWithItem:function(e,t){return t.constructor.kindOf(Lx)?!t.isDisabled:!t.constructor.kindOf(Dx)}},Vx=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"cw-menu-divider-item-view",attributes:{role:"separator"}},__QUALIFIED_CLASS_NAME__:"MenuDividerItemView"}}),kx=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-menu-item-view",children:[{type:"ELEMENT",tagname:"div",classes:["checkmark"]},{type:"ELEMENT",tagname:"div",classes:["icon",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"content.iconClass",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayTitle",attributes:{}}],classes:["title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"content.titleIsAlwaysLTR",truevalue:"is-always-ltr",attributes:{}}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"content.hasCheckmark",truevalue:"has-checkmark",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasIconClass",truevalue:"has-icon-class",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"content.isDisabled",truevalue:"cw-disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}}],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"elementGUID",attributes:{},attribute:"id"},role:"menuitem"}}},__QUALIFIED_CLASS_NAME__:"MenuItemView"},isHighlighted:Object(V.b)({defaultValue:!1,type:Boolean}),ariaHidden:Object(V.b)(Object(Oi.c)("isPooledInDom")),ariaLabel:Object(V.b)(Object(Oi.c)("content.ariaLabel")),isPooledInDom:Object(V.b)(),content:Object(V.b)({type:Lx}),elementGUID:Object(V.b)({type:"string",defaultValue:function(){return Object(Yl.b)(this)+"MenuItemView"}}),displayTitle:Object(V.b)({dependencies:["content","content.title","content.shouldEscapeTitle"],readOnly:!0,get:Object.assign((function(){var e=this.content;if(e){var t=e.shouldEscapeTitle,n=e.title;return t?Object(d_.b)(n):n}return""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.shouldEscapeTitle,s=r.title;return a?Object(d_.b)(s):s}return""}})}),hasIconClass:Object(V.b)({dependencies:["content","content.iconClass"],readOnly:!0,get:Object.assign((function(){var e=this.content;return!(!e||Object(Vn.a)(e.iconClass))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return!(!r||Object(Vn.a)(r.iconClass))}})})}),Bx=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"cw-repeater-button"},__QUALIFIED_CLASS_NAME__:"RepeaterButton"},additionalClassNames:Object(k.c)([]),period:Object(V.b)({defaultValue:16.66666667,didChange:function(e){this.timer.delay=e}}),timer:Object(H.d)({defaultValue:Object(k.c)(Pd.a,{action:"triggerButtonAction",target:void 0,timesToFire:1/0}),strong:!0}),pointerEnter:function(e){this.timer.start()},pointerLeave:function(e){this.timer.stop()}}).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["arrow"]}],classes:["scroll",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"directionClassname",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"none",falsevalue:"flex",attributes:{},unit:null,property:"display"}}}},__QUALIFIED_CLASS_NAME__:"ScrollRepeaterButton"},action:"scrollInDirection",contextKeys:Object(k.c)(["direction"]),period:60,direction:Object(V.b)({defaultValue:xx.NORTH,type:xx}),directionClassname:Object(V.b)({dependencies:["direction"],readOnly:!0,type:"string",get:Object.assign((function(){return"direction-"+this.direction.value+"\xb0"}),{__CW__getter:function(e,t,n,i){return"direction-"+i.internalGet(this,t[0+n]).value+"\xb0"}})})}),jx=In.a.extend(Mp.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"startScrollButton"},{type:"MULTIVIEWOUTLET",tagname:"views",name:"itemViews",classes:["collection-content"]},{type:"VIEWOUTLET",tagname:"view",name:"endScrollButton"}],classes:["cw-collection-view","cw-menu-list-view"],attributes:{role:"menu","aria-activedescendant":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"activeDescendant",attributes:{},attribute:"aria-activedescendant"}}},__QUALIFIED_CLASS_NAME__:"MenuListView"},activeDescendant:Object(V.b)({type:String}),isFocusable:!0,endScrollButton:Object(V.b)({defaultValue:Object(k.c)(Bx.extend({direction:xx.SOUTH})),strong:!0,downstreamBindings:{isDisabled:"(owner).endScrollButtonIsDisabled"}}),endScrollButtonIsDisabled:Object(V.b)({readOnly:!0,dependencies:["canScrollVertically","height","scrollMaxY"],get:Object.assign((function(){return!this.canScrollVertically||this.scrollMaxY===this.height}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])===i.internalGet(this,t[1+n])}})}),startScrollButton:Object(V.b)({defaultValue:Object(k.c)(Bx.extend({direction:xx.NORTH})),strong:!0,downstreamBindings:{isDisabled:"(owner).startScrollButtonIsDisabled"}}),startScrollButtonIsDisabled:Object(V.b)({readOnly:!0,dependencies:["canScrollVertically","scrollHeight","scrollMaxY"],get:Object.assign((function(){return!this.canScrollVertically||this.scrollHeight===this.scrollMaxY}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])===i.internalGet(this,t[2+n])}})}),didScrollBy:function(e,t,n){this.viewController.sendEvent("didScrollBy",e,t,n)},_scrollBy:function(e,t){this.viewController.sendEvent("didScroll",e,t)}}),Ux=L_.b.Began,Gx=L_.b.Ended,Hx=Pm.a.extend({mixinDependencies:[Kp.a,qp.b],commitDurations:Object(H.d)({defaultValue:Object(k.c)(Array,[50,50]),type:Array}),commitOnPointerDown:Object(V.b)({defaultValue:!1,type:Boolean}),commitTimeoutId:Object(V.b)(null),desiredSize:Object(V.b)({strong:!0,dependencies:["collection","collection.contentsDidChangeUntracked","isAttached","layoutController","layoutDelegate","layoutMetrics","layoutMetrics.bottomPadding","layoutMetrics.rowHeight","layoutMetrics.dividerRowHeight","layoutMetrics.rowSpacing","layoutMetrics.topPadding","maximumWidth","minimumWidth"],readOnly:!0,get:Object.assign((function(){var e=0,t=0,n=this.collection;if(n&&this.isAttached){var i=this.layoutController,r=this.layoutDelegate,a=this.layoutMetrics,s=this.maximumWidth,o=this.minimumWidth,l=this.view;if(a){t+=a.topPadding+a.bottomPadding;var c=n.length;t+=a.rowSpacing*(c-1)}var u,d=l.style,h=d.getInline("position"),p=d.getInline("width"),f=d.getInline("height");for(d.set({position:"absolute",width:window.innerWidth+"px",height:window.innerHeight+"px"}),u=n.startHandle;u.isValid;u=u.next){var g=r.cellForHandle(u),m=g.cellType,_=("item"===m?r.sizeForItemNaturally:"divider-item"===m?r.sizeForDividerItem:r.sizeForCell).call(r,i,g);e=Math.max(_.width,e),t+=_.height}e=Math.min(Math.max(e,o),s),d.set({position:h,width:p,height:f})}return _l.a.create(e,t)}),{__CW__getter:function(e,t,n,i){var r=0,a=0,s=i.internalGet(this,t[0+n]);if(s&&i.internalGet(this,t[2+n])){var o=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]),c=i.internalGet(this,t[5+n]),u=i.internalGet(this,t[11+n]),d=i.internalGet(this,t[12+n]),h=this.view;if(c){a+=c.topPadding+c.bottomPadding;var p=s.length;a+=c.rowSpacing*(p-1)}var f,g=h.style,m=g.getInline("position"),_=g.getInline("width"),v=g.getInline("height");for(g.set({position:"absolute",width:window.innerWidth+"px",height:window.innerHeight+"px"}),f=s.startHandle;f.isValid;f=f.next){var b=l.cellForHandle(f),y=b.cellType,w=("item"===y?l.sizeForItemNaturally:"divider-item"===y?l.sizeForDividerItem:l.sizeForCell).call(l,o,b);r=Math.max(w.width,r),a+=w.height}r=Math.min(Math.max(r,d),u),g.set({position:m,width:_,height:v})}return _l.a.create(r,a)}})}),dividerItemViewClass:Object(V.b)(Vx),highlightedCell:Object(V.b)({dependencies:["collection","highlightedItem","layoutDelegate"],type:km.a,writeDependencies:["highlightedItem"],get:Object.assign((function(){var e=null,t=this.collection,n=this.highlightedItem,i=this.layoutDelegate;if(t&&i){var r=t.indexOf(n);if(r>=0){var a=t.startHandle.at(r);e=i.cellForHandle(a)}}return e}),{__CW__getter:function(e,t,n,i){var r=null,a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]);if(a&&o){var l=a.indexOf(s);if(l>=0){var c=a.startHandle.at(l);r=o.cellForHandle(c)}}return r}}),set:Object.assign((function(e){this.highlightedItem=e?e.handle.value:null}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e?e.handle.value:null}}),writeDependencySetPathMap:[!1]}),highlightedItem:Object(V.b)(),isCommitting:Object(V.b)({dependencies:["commitTimeoutId"],readOnly:!0,get:Object.assign((function(){return Object(K.a)(this.commitTimeoutId)}),{__CW__getter:function(e,t,n,i){return Object(K.a)(i.internalGet(this,t[0+n]))}})}),isFocusable:!0,itemViewClass:Object(V.b)(kx),maximumWidth:Object(V.b)(1/0),minimumWidth:Object(V.b)(50),previousHighlightedCell:null,menuDelegate:Object(V.b)({defaultValue:Object(k.c)(P.a.extend(Fx)),type:Nx}),layoutDelegate:Object(V.b)({defaultValue:Object(k.c)(xm.a.extend({staticMembers:{LayoutMetricsClass:Rx},dividerItemCellClass:Px,cellClassKeysByCellType:Object(F.b)((px={},px["divider-item"]="dividerItemCellClass",px)),sizeKeyByCellType:Object(F.b)((fx={},fx["divider-item"]="sizeForDividerItem",fx)),cellForHandle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"item",n=this,i=e.value;return i.instanceOf(Dx)&&(t="divider-item"),n.__s._$3Ty$cellForHandle.call(n,e,t)},sizeForItemNaturally:function(e,t){return _l.a.create({height:e.layoutMetrics.rowHeight,width:Math.ceil(Wx(e,t))})},sizeForDividerItem:function(e,t){return _l.a.create({height:e.layoutMetrics.dividerRowHeight,width:e.viewportWidth})},__superMap:{_$3Ty$cellForHandle:"cellForHandle"}}))}),presenter:Object(V.b)({defaultValue:Object(k.c)(Nm.a.extend({itemViewClass:Object(V.b)(kx),dividerItemViewClass:Object(V.b)(Vx),viewClassKeysByCellType:Object(F.b)((gx={},gx["divider-item"]="dividerItemViewClass",gx)),itemViewDidMove:function(e,t){var n=this,i=arguments;n.__s._$49H$itemViewDidMove.apply(n,i),t===this.owner.highlightedCell?e.isHighlighted=!0:e.isHighlighted=!1},viewForViewClass:function(){var e=this,t=arguments,n=e.__s._$4FV$viewForViewClass.apply(e,t),i=qp.a.create({event:"commitFromTap",delegate:this.owner});return n.addGestureRecognizer(i),n},__superMap:{_$49H$itemViewDidMove:"itemViewDidMove",_$4FV$viewForViewClass:"viewForViewClass"}})),downstreamBindings:{itemViewClass:"(owner).itemViewClass",dividerItemViewClass:"(owner).dividerItemViewClass"}}),viewLayout:Object(V.b)({type:Object}),cellForEvent:function(e){var t=Object(P_.c)(e);return this.presenter.cellForView(t)},commit:function(){var e=this.highlightedCell;e?this.commitWithCell(e):this.completeCommitWithItem()},commitFromTap:function(e){var t=e.state,n=e.view;if(this.isCommitting)return!1;if(t===Ux||t===Gx){var i=this.commitOnPointerDown;if((t!==Ux||i)&&(t!==Gx||!i)){var r=this.presenter.cellForView(n);r&&"item"===r.cellType&&this.commitWithCell(r)}}},commitWithCell:function(e){var t=e.handle.value,n=this.menuDelegate;if(n.shouldCommitMenuWithItem(this,t)){n.willCommitMenuWithItem&&n.willCommitMenuWithItem(this,t);var i=this.presenter.viewForCell(e);if(i){var r=this.commitDurations;this.flashCommittingViewAndComplete(i,r,t)}else this.completeCommitWithItem(t)}},completeCommitWithItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.commitTimeoutId=Object(X.a)((function(){var n=e.menuDelegate;e.owner.dismissWithItem(t).then((function(){e.isDisposed||(e.commitTimeoutId=null)})),n.didCommitMenuWithItem&&n.didCommitMenuWithItem(e,t)}),n)},didScrollBy:function(e,t,n){if(n&&!this.isCommitting){var i,r=this.collection,a=this.highlightedCell,s=this.layoutController,o=this.layoutDelegate;if(a)i=a;else{var l=s.visibleCells;i=o.topMostItem(s,l)}var c=n.nativeEvent.clientY-(this.viewLayout.top+i.top);if(c>0&&(c=Math.max(c-i.height,0)),0!==c){var u=o.setUpCellAtDistance(s,r,i,0,c);this.highlightCell(u)}}},flashCommittingViewAndComplete:function(e,t,n){var i=this;t.length?this.commitTimeoutId=Object(X.a)((function(){e.isHighlighted=!e.isHighlighted,i.flashCommittingViewAndComplete(e,t.slice(1),n)}),t[0]):this.completeCommitWithItem(n,50)},highlightCell:function(e){var t=!1,n=this.highlightedCell;if(e&&e!==n){var i=this.beginBatchSet();if(this.unhighlightHighlightedCell()){var r=this.menuDelegate,a=e.handle.value;r.shouldHighlightMenuItem(this,a)&&(r.willHighlightMenuItem&&r.willHighlightMenuItem(this,a),this.highlightedCell=e,r.didHighlightMenuItem&&r.didHighlightMenuItem(this,a),t=!0)}i.end()}return t},unhighlightHighlightedCell:function(){var e=!0,t=this.highlightedCell;if(t&&t.isLaidOut){var n=this.menuDelegate,i=t.handle.value;n.shouldUnhighlightMenuItem(this,i)?(n.willUnhighlightMenuItem&&n.willUnhighlightMenuItem(this,i),this.highlightedCell=null,n.didUnhighlightMenuItem&&n.didUnhighlightMenuItem(this,i)):e=!1}return e},measureViewport:function(){var e=this,t=arguments;if(e.__s._$6pa$measureViewport.apply(e,t),this.isAttached){var n=this.view;if(n){var i=n.element;i&&(this.viewLayout=i.getBoundingClientRect())}}},pointerMove:function(e){if(this.isCommitting)return!1;var t=this.cellForEvent(e);this.highlightCell(t)},pointerCancel:function(e){this.unhighlightHighlightedCell()},pointerOut:function(e){this.unhighlightHighlightedCell()},scrollInDirection:function(e){switch(e){case xx.NORTH:this.scrollAnItemBack();break;case xx.SOUTH:this.scrollAnItemForward();break;default:throw new _.a("CW.MenuListViewController does not support scrolling in the direction, "+e+".")}},viewClass:jx,highlightNextItem:function(){var e,t=this.highlightedCell;for(e=t?t.handle.next:this.collection.startHandle;e&&e.isValid;){var n=this.layoutDelegate.cellForHandle(e);if(n.instanceOf(Px))e=e.next;else{if(this.highlightCell(n)){this.scrollToItem(e.value);break}e=e.next}}},highlightPreviousItem:function(){var e,t=this.highlightedCell;for(e=t?t.handle.previous:this.collection.handleProvider.endHandle;e&&e.isValid;){var n=this.layoutDelegate.cellForHandle(e);if(n.instanceOf(Px))e=e.previous;else{if(this.highlightCell(n)){this.scrollToItem(e.value);break}e=e.previous}}},keyDown:function(e){if(this.isCommitting)return!1;var t=!0,n=this.highlightedCell;switch(e.which){case ml.a.DOWN:this.highlightNextItem();break;case ml.a.UP:this.highlightPreviousItem();break;case ml.a.LEFT:case ml.a.RIGHT:e.preventDefault();break;case ml.a.ENTER:case ml.a.SPACE:n?this.commitWithCell(n):t=!1;break;default:t=!1}return t},scrollAnItemBack:function(){var e=this.layoutController.visibleCells.objectAt(0),t=this.layoutDelegate.positionNextCell(this.layoutController,e,-1);t?this.scrollBy(0,t.height+10):this.scrollBy(0,e.height+10),this.update()},scrollAnItemForward:function(){var e=this.layoutController.visibleCells.lastItem,t=this.layoutDelegate.positionNextCell(this.layoutController,e,1);t?this.scrollBy(0,-t.height-10):this.scrollBy(0,-e.height-10),this.update()},highlightedCellDidChange:Object(B.h)("highlightedCell",(function(e){var t=this.presenter,n=this.previousHighlightedCell;if(n){var i=t.viewForCell(n);i&&(i.isHighlighted=!1)}if(e){var r=t.viewForCell(e);r&&(r.isHighlighted=!0,this.view.activeDescendant=r.elementGUID)}this.previousHighlightedCell=e})),__superMap:{_$6pa$measureViewport:"measureViewport"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuListViewController"}});function Wx(e,t){var n=e.presenter,i=n.itemViewClassForItem(t),r=n.viewForCell(t,i),a=!r.isAttached;a&&(n.cellDidEnter(t),n.cellDidMove(t));var s=r.style,o=s.get("width");s.set("width","");var l=Object($u.a)(r.element);return s.set("width",o),a&&n.cellDidExit(t),l.width}var $x=El.extend({collection:Object(V.b)({defaultValue:Object(k.c)(Wo.b),strong:!0}),highlightedItem:Object(V.b)(),delegate:Object(V.b)({defaultValue:Object(k.c)(P.a.extend(Fx))}),layoutMetrics:Object(V.b)({defaultValue:Object(k.c)(Rx,{bottomPadding:5,dividerRowHeight:12,rowHeight:19,topPadding:5}),strong:!0}),allowedLayouts:Object(k.c)([hl,cl,ul,dl]),maximumWidth:Object(V.b)(1/0),minimumWidth:Object(V.b)(50),dismissDuration:Object(H.d)({defaultValue:350,type:"integer"}),dismissTimeoutId:Object(V.b)(null),hasOverlay:Object(H.d)(!0),isDismissing:Object(V.b)({dependencies:["dismissTimeoutId"],type:Boolean,readOnly:!0,get:Object.assign((function(){return Object(K.a)(this.dismissTimeoutId)}),{__CW__getter:function(e,t,n,i){return Object(K.a)(i.internalGet(this,t[0+n]))}})}),dismissWithItem:function(){var e=this,t=Z.a.create(),n=this.dismissDuration;return this.dismissTimeoutId=Object(X.a)((function(){e.dismissTimeoutId=null,e.hide(),t.resolve()}),n),t},shouldAutosize:!0,_calculateSize:function(){this.desiredSize=this.contentController.desiredSize},view:Object(V.b)({downstreamBindings:{isHiding:"(owner).isDismissing"}}),viewClass:Object(V.b)({readOnly:!0,get:function(){return this.hasOverlay?Kx:zx}}),arrowLength:0,arrowWidth:0,arrowAlignment:Il.None,contentController:Object(V.b)({defaultValue:Object(k.c)(Hx),downstreamBindings:{collection:"(owner).collection",commitOnPointerDown:"(owner).commitOnPointerDown",dividerItemViewClass:"(owner).dividerItemViewClass",highlightedItem:"(owner).highlightedItem",itemViewClass:"(owner).itemViewClass",layoutMetrics:"(owner).layoutMetrics",maximumWidth:"(owner).maximumWidth",minimumWidth:"(owner).minimumWidth",menuDelegate:"(owner).delegate"}}),isFocusable:!0,spaceInset:20,commitOnPointerDown:Object(V.b)({defaultValue:!1,type:Boolean}),dividerItemViewClass:Object(V.b)(Vx),itemViewClass:Object(V.b)(kx),keyDown:function(e){if(this.isDismissing)return!1;switch(e.which){case ml.a.ESC:this.hide();break;case ml.a.ENTER:case ml.a.SPACE:this.contentController.keyDown(e)||this.hide();break;default:return this.contentController.keyDown(e)}},modalBackgroundWasClicked:function(){if(this.isDismissing)return!1;this.hide()},matchedLayoutObserver:Object(B.g)("matchedLayout.layout.width","matchedLayout.layout.height",(function(e,t){this.contentController.measureViewport()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewController"}}),zx=Sl.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHiding",truevalue:"cw-hiding",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"MenuArrowPopoverView"},additionalClassNames:["cw-menu-arrow-popover-view"],isFocusable:!0,isHiding:Object(V.b)({defaultValue:!1,type:Boolean})}),Kx=R_.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",attributes:{"aria-modal":"true"}}},__QUALIFIED_CLASS_NAME__:"ModalMenuArrowPopoverView"},popoverView:Object(V.b)({defaultValue:Object(k.c)(zx),downstreamBindings:{isHiding:"(owner).isHiding"}}),isFocusable:!0,isHiding:Object(V.b)()}),qx={mixinDependencies:[{mixinDependencies:[Tn.a],collectionViewDidScroll:Mn.a.define()}],collectionViewDidScrollInDirection:Mn.a.define()},Qx=Object(we.b)("SPLIT_LAYOUT_STYLES",(function(e){e("FIXED_STYLE"),e("MANUAL_STYLE"),e("AUTO_STYLE")})),Yx=P.a.extend(B.b,Qx.toStaticMixin(),{splitView:Object(V.b)(null),managedView:Object(V.b)(null),constraintStyle:Object(V.b)(Qx.MANUAL_STYLE),minimumSize:Object(V.b)(0),maximumSize:Object(V.b)(0),preferredSize:Object(V.b)(0),size:Object(V.b)(0),_constraintsDidChange:Object(B.h)("splitView","constraintStyle","minimumSize","maximumSize","preferredSize",(function(e){e&&e.constraintsDidChange()})),_updateSize:Object(B.h)("managedView","size","splitView.isVertical",(function(e,t,n){e&&(n?(e.set("width",t),e.set("height","100%")):(e.set("width","100%"),e.set("height",t)))})),staticMembers:{__QUALIFIED_CLASS_NAME__:"SplitLayout"}});Yx.AUTO=Yx.extend({constraintStyle:Qx.AUTO_STYLE}),n(525);var Zx,Xx=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}},classes:["split-resize-handle"]}},className:"cw-ui-resize-handle-view",__QUALIFIED_CLASS_NAME__:"ResizeHandleView"},size:Object(H.d)(1),width:Object(V.b)({readOnly:!0,dependencies:["parent.isVertical"],get:Object.assign((function(){return this.getPath("parent.isVertical")?this.get("size"):"100%"}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?this.get("size"):"100%"}})}),height:Object(V.b)({readOnly:!0,dependencies:["parent.isVertical"],get:Object.assign((function(){return this.getPath("parent.isVertical")?"100%":this.get("size")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?"100%":this.get("size")}})}),constraintStyle:Object(H.d)(Yx.FIXED_STYLE),managedConstraint:Object(H.d)(null),pointerDown:function(e){if(0===e.button){var t=this.get("managedConstraint");if(t){this.setPointerCapture(e.pointerId);var n=this.get("parent"),i=n&&n.get("isVertical");return this._cursorStartedAt=i?e.clientX:e.clientY,this._sizeStartedAt=t.get("size"),this.sendEvent("lockCursor",i?"vertical-resize":"horizontal-resize"),!0}}return!1},pointerUp:function(e){var t=e.pointerId;return this.getPointerCapture(t)===this&&(this.releasePointerCapture(t),this._cursorStartedAt=this._sizeStartedAt=null,this.sendEvent("releaseCursor"),!0)},pointerMove:function(e){if(this.getPointerCapture(e.pointerId)===this){var t=this.get("managedConstraint");if(t){var n=this.get("parent"),i=(n&&n.get("isVertical")?e.clientX:e.clientY)-this._cursorStartedAt,r=this._sizeStartedAt;return t.set("preferredSize",r+i),n.userDidMoveResizeHandle(),!0}}return!1}}),Jx=Object(we.b)("SPLIT_VIEW_DIRECTIONS",(function(e){e("VERTICAL"),e("HORIZONTAL")})),eN=In.a.extend({staticMembers:{template:{type:"MULTIVIEWOUTLET",tagname:"views",name:"_contents",classes:["split-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVertical",truevalue:"split-view-vertical",falsevalue:"split-view-horizontal",attributes:{}}]},VERTICAL:Jx.VERTICAL,HORIZONTAL:Jx.HORIZONTAL,className:"cw-ui-split-view",__QUALIFIED_CLASS_NAME__:"SplitView"},direction:Object(V.b)(Jx.VERTICAL),isVertical:Object(V.b)({readOnly:!0,dependencies:["direction"],get:Object.assign((function(){return this.direction===Jx.VERTICAL}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Jx.VERTICAL}})}),resizeHandleViewClass:Object(V.b)(Xx),splits:Object(V.b)(Object(k.c)(Wo.b)),constraintsDidChange:Object(B.i)(),userDidMoveResizeHandle:Object(B.i)(),sizesDidUpdateInDOM:Object(B.i)(),getLayout:function(e){return this._layouts[e]},setLayout:function(e,t){this._layouts[e]=t,this._layoutsDidChange()},_constraints:null,_layouts:Object(k.c)(Array),_layoutsDidChange:Object(B.i)(),_updateContentsAndConstraints:Object(B.h)("splits","resizeHandleViewClass","splits.contentsDidChange","_layoutsDidChange",(function(e,t){var n,i,r=Zl.a.begin(),a=!0;if(e){n=[],i=[];for(var s,o=this.get("_contents"),l=e.get("length"),c=0;c<l;c++){if(s&&t){var u=o.objectAt(2*c-1);u&&Object(pi.a)(u,t)?u.set("managedConstraint",s):u=t.create({managedConstraint:s}),n.push(u),i.push(u)}var d=e.objectAt(c),h=d.get("parent");h&&Object(pi.a)(h,tN)||(h=tN.create({split:d})),n.push(h);var p=this.getLayout(c)||Yx.AUTO.create();i.push(p),r.set(p,"splitView",this),a=!1,r.set(p,"managedView",h),s=p}}aN(this._contents,n)&&r.set(this,"_contents",n),aN(this._constraints,i)&&r.set(this,"_constraints",i),r.end(),a&&this.constraintsDidChange()})),_updateSizes:Object(B.h)("isAttached","isVertical","constraintsDidChange",(function(e,t){var n=e&&this.get("rect"),i=n&&(t?n.width:n.height);if(i){var r=this._constraints;if(r)for(var a=rN(i,r),s=0,o=a.length;s<o;s++)r[s].set("size",a[s])}this.sizesDidUpdateInDOM()}))}),tN=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"split"}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}},classes:["split-wrapper"]}},className:"cw-ui-split-wrapper-view",__QUALIFIED_CLASS_NAME__:"SplitWrapperView"}}),nN=Yx.FIXED_STYLE,iN=Yx.MANUAL_STYLE;function rN(e,t){var n=Zx;n||(n=Zx=[]),n.length=0;var i,r,a,s,o,l=e,c=t.length,u=0,d=0;for(s=0;s<c;s++)(a=(i=t[s]).get("constraintStyle"))===nN?r=i.get("size")||0:a===iN?(r=i.get("preferredSize")||0,r=Math.max(i.get("minimumSize")||-1/0,r),r=Math.min(i.get("maximumSize")||1/0,r),d++):(r=i.get("minimumSize")||0,u++),l-=n[s]=r;if(l>0&&u>0)for(o=l/u,s=0;s<c;s++)(a=(i=t[s]).get("constraintStyle"))!==nN&&a!==iN&&(r=n[s],l-=(n[s]=Math.min(r+o,i.get("maximumSize")||1/0))-r);if(l>0&&d>0)for(o=l/d,s=0;s<c;s++)(a=(i=t[s]).get("constraintStyle"))===iN&&(r=n[s],l-=(n[s]=Math.min(r+o,i.get("maximumSize")||1/0))-r);if(l<0&&d>0)for(o=l/d,s=0;s<c;s++)(a=(i=t[s]).get("constraintStyle"))===iN&&(r=n[s],l-=(n[s]=Math.max(r+o,i.get("minimumSize")||-1/0))-r);if(0!==l&&u>0)for(o=l/u,s=0;s<c;s++)(a=(i=t[s]).get("constraintStyle"))!==nN&&a!==iN&&(r=n[s],l-=(n[s]=r+o)-r);return n}function aN(e,t){return!(e&&t&&e.length===t.length&&e.every((function(e,n){return e===t[n]})))}var sN=eN.extend({masterView:Object(V.b)(),detailView:Object(V.b)(),masterViewLayout:Object(V.b)({didChange:function(e){this.setLayout(0,e)}}),detailViewLayout:Object(V.b)({didChange:function(e){this.setLayout(1,e)}}),splitsDidChange:Object(B.h)("splits","masterView","detailView",(function(e,t,n){e&&t&&n&&(e.setIndex(0,t),e.setIndex(1,n))})),staticMembers:{className:"cw-ui-master-detail-view",__QUALIFIED_CLASS_NAME__:"MasterDetailView"}}),oN=fi.a.extend({viewClass:sN,view:Object(V.b)({downstreamBindings:{masterViewLayout:"(owner).masterLayout",detailViewLayout:"(owner).detailLayout"}}),selection:Object(V.b)(null),masterViewController:Ci.a.create({viewOutlet:"masterView"}),detailViewController:Ci.a.create({viewOutlet:"detailView"}),masterLayout:Object(V.b)(Object(k.c)(Yx,{constraintStyle:Yx.MANUAL_STYLE})),detailLayout:Object(V.b)(Object(k.c)(Yx,{constraintStyle:Yx.AUTO_STYLE})),staticMembers:{__QUALIFIED_CLASS_NAME__:"MasterDetailViewController"}}),lN=n(767),cN=fi.a.extend({items:Object(V.b)({type:Wo.b,set:function(e){return Object(Zr.a)(e)&&(e=Wo.b.create(e)),e}}),itemKeyMap:null,keyMapForItem:function(e){return this.itemKeyMap},itemViewClass:Object(V.b)(),viewClassForItem:function(e){return this.itemViewClass},proxyForItem:Tl.a,viewForItem:function(e){var t=this.proxyForItem(e),n=this.keyMapForItem(e),i=this.viewClassForItem(e);n||Object(_.b)("SimpleListViewController requires that you provide an itemKeyMap to map values from items to views.",{viewController:this,viewClass:i}),i||Object(_.b)("SimpleListViewController requires that you provide an itemViewClass.",{viewController:this,itemKeyMap:n});var r,a,s=t&&t.hasMixin&&t.hasMixin(B.b),o={};for(a in n)(r=n[a])===D_.a?o[a]=t:o[a]=s?t.bindingFor(r):t[r];return i.create(o)},viewClass:In.a.extend({staticMembers:{template:{type:"MULTIVIEWOUTLET",tagname:"views",name:"itemViews"}}}),itemViews:Object(V.b)(Object(k.c)(Wo.b)),view:Object(V.b)({downstreamBindings:{itemViews:"(owner).itemViews"}}),_updateViewsForItems:Object(B.h)("items","items.contentsDidChange",(function(e,t){var n,i,r,a,s=this.itemViews;if(t){var o,l,c,u=t.context;for(r=0,a=u.length;r<a;r++)i=(o=u[r]).item,l=o.index,(c=o.operation)===Wo.b.REMOVE?s.removeAt(l):c===Wo.b.INSERT&&(n=this.viewForItem(i),s.insertAt(l,n))}else if(s.clear(),e)for(r=0,a=e.length;r<a;r++)i=e.objectAt(r),n=this.viewForItem(i),s.push(n)})),staticMembers:{__QUALIFIED_CLASS_NAME__:"SimpleListViewController"}}),uN=cN.extend(vh,{itemViewClass:bh,value:Object(V.b)(),itemKeyMap:Object(k.c)(Object,{title:"title",value:"value",isDisabled:"isDisabled"}),radioGroupValue:Object(V.b)(Object(Oi.c)("value")),staticMembers:{__QUALIFIED_CLASS_NAME__:"RadioGroupViewController"}}),dN=cN.extend({reorderItem:function(e,t){void 0!==e&&void 0!==t||Object(_.b)("reorderItem requires values for both `oldIndex` and `newIndex`");for(var n,i=this.itemViews,r=Ai.a.create(),a=Ai.a.create(),s=0,o=i.length;s<o;s++)r.setIndex(s,s),n=i.objectAt(s),a.setIndex(s,n);r.move(e,t),a.move(e,t),this._oldIndexByNewIndex=r,this._virtualItemViews=a,this._listIsMeasured||this._measureListItems(),this._recalculateTranslates(),this._itemIsReadyToBeReordered=!0},didVisuallyReorderList:U.a,didGrabItemView:U.a,didUngrabItemView:U.a,commitChangesToList:function(){if(this._hasUncommittedChanges)return this._recalculateTranslates(),this._itemIsReadyToBeReordered=!0,!0},cancelGrab:function(){if(this.grabbedItemView)return this._recomputeVirtualList(),this._ungrabItemView(),this._recalculateTranslates(),this.view._itemViewBeingPressed=null,this._writeTextToAriaLiveRegion(Object(s.d)("ReorderableSimpleListViewController.CancelledMove")),!0},grabbedItemView:Object(V.b)(),grabOrReleaseView:function(e){e||Object(_.b)("grabOrReleaseView called without an itemView");var t=this.grabbedItemView;t?(this._ungrabItemView(),e!==t?this._grabItemView(e):this.commitChangesToList()):this._grabItemView(e)},moveGrabbedItemViewUp:function(e){this.grabbedItemView===e&&this._moveItemView(e,-1)},moveGrabbedItemViewDown:function(e){this.grabbedItemView===e&&this._moveItemView(e,1)},itemAccessibilityTitleKey:Object(H.d)(null),accessibilityTitleForItem:function(e){var t=this.itemAccessibilityTitleKey;return t===D_.a?e:Object(K.a)(t)&&""!==t?e[t]:void Object(_.b)("ReorderableSimpleListViewController: Unexpected value '"+t+"' for required property `itemAccessibilityTitleKey`.")},_recomputeVirtualList:function(){var e=this.itemViews,t=this._virtualItemViews,n=this._oldIndexByNewIndex,i=this._storedItemViewInfoByView;t.clear(),n.clear(),i.clear(),this._hasUncommittedChanges=!1;for(var r=0,a=e.length;r<a;r++)t.push(e.objectAt(r)),n.setIndex(r,r);var s=this.view.element.getBoundingClientRect();this._listStartEdgePos=s.top,this._listIsMeasured=!1},_measureListItems:function(){for(var e=this.itemViews,t=0+this.view.element.offsetHeight,n=0,i=e.length;n<i;n++){var r=e.objectAt(n),a=r.element,s=a.offsetTop,o=a.offsetHeight,l=s+o,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;if(n-1>=0&&(d=n-1,p=e.objectAt(d)),n+1<=e.length-1&&(h=n+1,f=e.objectAt(h)),0===n)c=s-0;else{var g=p.element,m=g.offsetHeight;c=s-(g.offsetTop+m)}u=n===e.length-1?t-l:f.element.offsetTop-l;var _=this._storedItemViewInfoByView.get(r),v=void 0;_&&(v=_.translatedOffset);var b={dragDimensionSize:o,dragAxisCoordinate:s,spaceBefore:c,spaceAfter:u,translatedOffset:v||0},y=t-l+0,w=0-s-0;b.maxPositiveOffset=y,b.maxNegativeOffset=w,this._storedItemViewInfoByView.set(r,b)}this._listIsMeasured=!0},_recalculateTranslates:function(e){var t=this._virtualItemViews;this._listIsMeasured||(this._recomputeVirtualList(),this._measureListItems());for(var n=0,i=0,r=t.length;i<r;i++){var a=t.objectAt(i),s=this._storedItemViewInfoByView.get(a),o=a===e,l=n-s.dragAxisCoordinate;if(!o){var c=a.style.get("transition-duration").split(",")[0],u=1e3*parseFloat(c.slice(0,-1),10);this._translateItemElement(a,l,u)}var d=s.spaceBefore,h=s.spaceAfter;n+=s.dragDimensionSize+(d||h)}var p=this._oldIndexByNewIndex.slice(0);this.didVisuallyReorderList(p),this._hasUncommittedChanges=!0},_updateStoredItemViewInfoForKey:function(e,t,n){var i=this._storedItemViewInfoByView,r=i.get(e);r?(r[t]=n,i.set(e,r)):Object(_.b)("_updateStoredItemViewInfoForKey unable to find stored info to update for provided itemView")},_storedItemViewInfoByView:Object(V.b)(Object(k.c)(wc.a)),_listStartEdgePos:null,_updateLiveRegionForItemMove:function(e,t,n){if(t>n){var i=n+1,r=this._oldIndexByNewIndex.objectAt(i),a=this.items.objectAt(r),o=this.accessibilityTitleForItem(a);this._writeTextToAriaLiveRegion(Object(s.d)("ReorderableSimpleListViewController.GrabbedItem.MovedUp",{itemTitle:o}))}else{var l=n-1,c=this._oldIndexByNewIndex.objectAt(l),u=this.items.objectAt(c),d=this.accessibilityTitleForItem(u);this._writeTextToAriaLiveRegion(Object(s.d)("ReorderableSimpleListViewController.GrabbedItem.MovedDown",{itemTitle:d}))}},_listIsMeasured:!1,_hasUncommittedChanges:!1,_isInFocusedLayerObserver:Object(B.h)("isInFocusedLayer",(function(){!this.isInFocusedLayer&&this.grabbedItemView&&(this._ungrabItemView(),this.commitChangesToList())})),_grabItemView:function(e){this.grabbedItemView=e,this.didGrabItemView(e)},_ungrabItemView:function(){var e=this.grabbedItemView;if(this.grabbedItemView=null,e){var t=this._virtualItemViews.indexOf(e);this._writeTextToAriaLiveRegion(Object(s.d)("ReorderableSimpleListViewController.ItemDropped",{itemTitle:e.title,positionNumber:t+1}))}this.didUngrabItemView(e)},_handleDragItem:function(e,t){this._listIsMeasured||(this._recomputeVirtualList(),this._measureListItems());var n=t.clientY-this._listStartEdgePos,i=this._storedItemViewInfoByView.get(e),r=-(i.dragAxisCoordinate+i.dragDimensionSize/2-n);this._translateItemElement(e,r);for(var a,s=this.itemViews,o=0,l=s.length;o<l;o++)if((a=s.objectAt(o))!==e&&this._hitCheck(a,e)){this._handleHitItem(a,e);break}},_hitCheck:function(e,t){e===t&&Object(_.b)("Passed identical views to _hitCheck");var n=this._storedItemViewInfoByView.get(t),i=n.translatedOffset,r=n.dragAxisCoordinate,a=n.dragDimensionSize,s=r+i,o=r+a/2+i,l=r+a+i,c=this._storedItemViewInfoByView.get(e),u=c.dragDimensionSize,d=c.translatedOffset,h=c.dragAxisCoordinate+d,p=c.dragAxisCoordinate+u/2+d,f=c.dragAxisCoordinate+c.dragDimensionSize+d,g=!1;return p>o?hN(l,h,f)&&l>p&&(g=!0):hN(s,h,f)&&s<p&&(g=!0),!!g},_handleHitItem:function(e,t){for(var n,i,r=this._virtualItemViews,a=0,s=r.length;a<s;a++){var o=r.objectAt(a);t===o?n=a:e===o&&(i=a)}this._updateVirtualItemIndexes(n,i),this._recalculateTranslates(t),this._updateLiveRegionForItemMove(t,n,i)},_updateVirtualItemIndexes:function(e,t){this._virtualItemViews.move(e,t),this._oldIndexByNewIndex.move(e,t)},_moveItemView:function(e,t){if(e&&e===this.grabbedItemView){0===this._virtualItemViews.length&&this._recomputeVirtualList(),this._listIsMeasured||this._measureListItems();var n=this._virtualItemViews.findIndex((function(t){return t===e})),i=n+t;i<this.itemViews.length&&i>-1&&(this._updateVirtualItemIndexes(n,i),this._recalculateTranslates(),this._updateLiveRegionForItemMove(e,n,i))}else Object(_.b)("The itemViewToMove passed to _moveItemView must exist and be equal to the grabbedItemView")},_virtualItemViews:Object(k.c)(Ai.a),_oldIndexByNewIndex:Object(k.c)(Ai.a),_translateItemElement:function(e,t,n){var i=this;if(e.style.getInline("transform")||0!==t){var r=this._storedItemViewInfoByView.get(e),a=r.maxPositiveOffset,s=r.maxNegativeOffset;if(t>a&&(t=a),t<s&&(t=s),e.style.translateY(t),this._updateStoredItemViewInfoForKey(e,"translatedOffset",t),n>0){var o=this._animatingItemViews;o.add(e),this.propertyChanged("_itemViewIsAnimating"),Object(X.a)((function(){o.delete(e),i.propertyChanged("_itemViewIsAnimating")}),n)}}},_itemViewIsAnimating:Object(V.b)({readOnly:!0,dependencies:["_animatingItemViews"],get:Object.assign((function(){return this._animatingItemViews.length>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).length>0}})}),_animatingItemViews:Object(V.b)(Object(k.c)(oi.a)),_reorderItemWhenNeeded:Object(B.h)("_itemViewIsAnimating","_itemIsReadyToBeReordered",(function(e,t){!e&&t&&this._reorderItems()})),_reorderItems:function(){this._itemIsReadyToBeReordered=!1;var e,t=this._oldIndexByNewIndex;if(0===t.length&&this._recomputeVirtualList(),this.isInFocusedLayer){var n=this.focusResponder;n&&n.parent===this.view&&(e=this._virtualItemViews.indexOf(n))}this._actuallyReorderItems(t),Object(K.a)(e)&&this.itemViews.objectAt(e).focus(),this._recomputeVirtualList()},_actuallyReorderItems:function(e){this._listIsMeasured=!1;var t=this.items,n=[];e.forEach((function(e){n.push(t.objectAt(e))}));for(var i=0,r=t.length;i<r;i++)t.setIndex(i,n[i])},_itemIsReadyToBeReordered:Object(V.b)(),_handleDropItem:function(e){if(this._ungrabItemView(),this._recalculateTranslates(),this._hasUncommittedChanges){var t=this.itemViews,n=this._oldIndexByNewIndex,i=t.findIndex((function(t){return t===e})),r=n.findIndex((function(e){return e===i}));this.reorderItem(i,r)}},_writeTextToAriaLiveRegion:function(e){G.a.application.writeTextToAriaLiveRegion(e)},viewClass:Object(F.b)({mixinDependencies:[Fu.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",styles:{position:"relative"}}}},_itemViewBeingPressed:null,_findItemViewForEvent:function(e){var t,n=Object(P_.c)(e);do{t=this.itemViews.includes(n)}while(!t&&n&&(n=n.parent));if(t)return n},pointerDown:function(e){var t=this,n=arguments,i=t.__s._$B2T$pointerDown.apply(t,n);if(i){var r=this._findItemViewForEvent(e);r?this.handlePointerDownForItemView(r):i=!1}return i},handlePointerDownForItemView:function(e){this._itemViewBeingPressed=e,this.sendEvent("_grabItemView",e)},pointerMove:function(e){var t=this._itemViewBeingPressed;t&&this.sendEvent("_handleDragItem",t,e)},pointerUp:function(e){var t=this,n=arguments;t.__s._$BI0$pointerUp.apply(t,n);var i=this._itemViewBeingPressed;i&&this.sendEvent("_handleDropItem",i),this._itemViewBeingPressed=null},keyDown:function(e){var t=this._findItemViewForEvent(e),n=!0;if(t)switch(e.keyCode){case ml.a.ENTER:this.sendEvent("grabOrReleaseView",t);break;case ml.a.SPACE:this.sendEvent("grabOrReleaseView",t),e.preventDefault();break;case ml.a.UP:this.sendEvent("moveGrabbedItemViewUp",t),e.preventDefault();break;case ml.a.DOWN:this.sendEvent("moveGrabbedItemViewDown",t),e.preventDefault();break;case ml.a.ESC:this.sendEvent("cancelGrab",t);break;default:n=!1}else n=!1;return n},__superMap:{_$B2T$pointerDown:"pointerDown",_$BI0$pointerUp:"pointerUp"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReorderableSimpleListViewController"}});function hN(e,t,n){return e>=t&&e<=n}var pN=n(766),fN=Ho.a.extend({staticMembers:{className:"cw-ax-grab-toggle-button",shouldInheritClassNames:!1,__QUALIFIED_CLASS_NAME__:"AXGrabToggleButton"},titleOfThingToBeGrabbed:Object(V.b)(),isOn:Object(V.b)(),ariaLabel:Object(V.b)({readOnly:!0,dependencies:["titleOfThingToBeGrabbed","isOn"],get:Object.assign((function(){return this.isOn?Object(s.d)("AXGrabToggleButton.AriaLabel.Grabbed"):Object(s.d)("AXGrabToggleButton.AriaLabel.Ungrabbed",{title:this.titleOfThingToBeGrabbed})}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?Object(s.d)("AXGrabToggleButton.AriaLabel.Grabbed"):Object(s.d)("AXGrabToggleButton.AriaLabel.Ungrabbed",{title:i.internalGet(this,t[0+n])})}})}),action:"grabOrReleaseView",context:null,isFocusable:!1}),gN=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"titleView"},{type:"VIEWOUTLET",tagname:"view",name:"subtitleView"}],attributes:{role:"tooltip",id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"idRelationshipGuid",attributes:{},attribute:"id"}}}},className:"cw-tooltip-content",__QUALIFIED_CLASS_NAME__:"TooltipContentView"},idRelationshipGuid:Object(V.b)({type:String}),title:Object(V.b)({type:String}),subtitle:Object(V.b)({type:String}),titleView:Object(V.b)({defaultValue:Object(k.c)(In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["title"]}}}})),downstreamBindings:{title:"(owner).title"}}),subtitleView:Object(V.b)({defaultValue:Object(k.c)(In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["subtitle"]}}}})),downstreamBindings:{subtitle:"(owner).subtitle"}})}),mN=In.a.extend(Fu.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-capacity-bar-item",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabel",attributes:{}}],styles:{"flex-grow":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"percentage",attributes:{},unit:null,property:"flex-grow"},"background-color":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"color",attributes:{},unit:null,property:"background-color"}}}},className:!1,__QUALIFIED_CLASS_NAME__:"CapacityMeterBarItemView"},percentage:Object(V.b)({type:Number,readOnly:!0,get:function(){return this._percentage}}),color:Object(V.b)({type:String}),nameForDisplay:Object(V.b)({type:String}),legendNameForDisplay:Object(V.b)({type:String}),valueForDisplay:Object(V.b)({binding:"value",type:String}),value:Object(V.b)({type:Number}),guidForTooltip:Object(V.b)({type:String,defaultValue:function(){return Object(Yl.b)(this)+"BarItemTooltip"}}),ariaDescribedBy:Object(V.b)({binding:"guidForTooltip"}),ariaLabel:Object(V.b)({readOnly:!0,type:String,dependencies:["legendNameForDisplay","nameForDisplay"],get:Object.assign((function(){return this.legendNameForDisplay||this.nameForDisplay}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])}})}),tooltipContentViewClass:Object(V.b)(gN),tooltipPopover:Object(V.b)({readOnly:!0,get:function(){return this._tooltip||(this._tooltip=this.createTooltip())},strong:!0}),createTooltip:function(){var e=this.tooltipContentViewClass.extend({title:this.bindingFor("nameForDisplay"),subtitle:this.bindingFor("valueForDisplay"),idRelationshipGuid:this.bindingFor("guidForTooltip"),staticMembers:{__QUALIFIED_CLASS_NAME__:"ItemTooltipContentView"}}),t=fi.a.create({viewClass:e});return El.create({contentController:t,allowedLayouts:[dl,hl],shouldAutosize:!0,inheritsFocusLayer:!0,shouldFocusPaneOnAttach:!1})},ariaRole:"tab",isFocusable:!0,_percentage:Object(V.b)({type:Number}),_isBeingHoveredObserver:Object(B.h)("isBeingHovered","isFocused",(function(e,t){var n=this.tooltipPopover;e||t?n.show(this):n.hide(this)}))}),_N=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-capacity-legend-item",children:[{type:"ELEMENT",tagname:"span",classes:["color-indicator"],styles:{"background-color":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"color",attributes:{},unit:null,property:"background-color"}}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"legendNameForDisplay",attributes:{}}],classes:["label"]}]}},__QUALIFIED_CLASS_NAME__:"CapacityMeterLegendItemView"},color:Object(V.b)({type:String}),nameForDisplay:Object(V.b)({type:String}),legendNameForDisplay:Object(V.b)({binding:"nameForDisplay",type:String})}),vN=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"cw-capacity-meter",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"_barItemViews",attributes:{tagName:"cw-capacity-bar",role:"list","aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabel",attributes:{},attribute:"aria-label"}}},{type:"MULTIVIEWOUTLET",tagname:"views",name:"_legendItemViews",attributes:{tagName:"cw-capacity-legend","aria-hidden":"true"}},{type:"VIEWOUTLET",tagname:"view",name:"emptyView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEmpty",truevalue:"is-empty",attributes:{}}],attributes:{"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"false",attributes:{},attribute:"aria-label"}}}},className:!1,__QUALIFIED_CLASS_NAME__:"CapacityMeterView"},items:Object(V.b)({type:Array}),reloadData:function(){if(!this.isEmpty){var e=this.items;if(e){var t=this.totalCapacity;this._barItemViews=void 0,this._legendItemViews=void 0;var n=this.barItemViewClass,i=e.map((function(e){var i=e.value/t;return n.create(Object.assign({},e,{_percentage:i}))}));if(this._barItemViews=Bf.a.create(i),this.hasLegend){var r=this.legendItemViewClass,a=e.reduce((function(e,t){return!1!==t.showInLegend&&e.push(r.create(Object.assign({},t))),e}),[]);this._legendItemViews=Bf.a.create(a)}}}},emptyTitle:Object(V.b)({type:String}),hasLegend:Object(V.b)({defaultValue:!0,type:Boolean}),totalCapacity:Object(V.b)({readOnly:!0,dependencies:["items"],get:Object.assign((function(){var e=this.items;if(e){var t=e.reduce((function(e,t){return e+t.value}),0);return t&&"number"===typeof t?t:void Object(_.b)("Capacity Meter: Unable to calculate total capacity from provided items.")}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.reduce((function(e,t){return e+t.value}),0);return a&&"number"===typeof a?a:void Object(_.b)("Capacity Meter: Unable to calculate total capacity from provided items.")}}})}),barItemViewClass:Object(V.b)(mN),legendItemViewClass:Object(V.b)(_N),isEmpty:Object(V.b)({readOnly:!0,dependencies:["items","totalCapacity"],get:Object.assign((function(){return!this.items||!this.totalCapacity}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])||!i.internalGet(this,t[1+n])}})}),emptyView:Object(V.b)({defaultValue:Object(k.c)(In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"emptyTitle",attributes:{}}],classes:["empty-message"],attributes:{hidden:{type:"ATTRIBUTEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"",attributes:{},attribute:"hidden"}}}}}})),downstreamBindings:{isHidden:"(owner)._emptyViewIsHidden",emptyTitle:"(owner).emptyTitle"}}),_barItemViews:Object(V.b)({type:Bf.a,strong:!0}),_legendItemViews:Object(V.b)({type:Bf.a,strong:!0}),_dataObserver:Object(B.h)("items","hasLegend","barItemViewClass","legendItemViewClass","totalCapacity","isEmpty",(function(){this.reloadData()})),_emptyViewIsHidden:Object(V.b)({readOnly:!0,dependencies:["isEmpty"],get:Object.assign((function(){return!this.isEmpty}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})})}),bN=(n(1288),In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",name:"canvasNode"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"percentageText",attributes:{}}],classes:["text"],name:"textNode",styles:{"font-size":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"textSize",attributes:{},unit:"px",property:"font-size"},"line-height":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"line-height"}}}],classes:["cw-circular-progress-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isComplete",truevalue:"complete",attributes:{}}],attributes:{role:"progressbar","aria-valuenow":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"value",attributes:{},attribute:"aria-valuenow"},"aria-valuemin":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"minimumValue",attributes:{},attribute:"aria-valuemin"},"aria-valuemax":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"maximumValue",attributes:{},attribute:"aria-valuemax"}}}},className:"cw-ui-circular-progress-view",__QUALIFIED_CLASS_NAME__:"CircularProgressView"},progressColor:Object(V.b)("#1994FB"),outlineColor:Object(V.b)("#EFEFEF"),thickness:Object(V.b)(1),outlineThickness:Object(V.b)(0),progressOverlaysOutline:Object(V.b)(!1),size:Object(V.b)(50),minimumValue:Object(V.b)({defaultValue:0,type:"number"}),maximumValue:Object(V.b)({defaultValue:100,type:"number"}),value:Object(V.b)(0),showValueAsInteger:Object(V.b)({defaultValue:!1,type:"boolean"}),fractionalProgress:Object(V.b)({readOnly:!0,dependencies:["value","minimumValue","maximumValue"],get:Object.assign((function(){return Math.min(1,Math.max(0,(this.value-this.minimumValue)/(this.maximumValue-this.minimumValue)))}),{__CW__getter:function(e,t,n,i){return Math.min(1,Math.max(0,(i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]))/(i.internalGet(this,t[2+n])-i.internalGet(this,t[1+n]))))}}),didChange:function(){this.isAttached&&this._draw()}}),isComplete:Object(V.b)({readOnly:!0,dependencies:["fractionalProgress"],get:Object.assign((function(){return 1===this.fractionalProgress}),{__CW__getter:function(e,t,n,i){return 1===i.internalGet(this,t[0+n])}})}),percentageText:Object(V.b)({readOnly:!0,dependencies:["showValueAsInteger","fractionalProgress"],get:Object.assign((function(){var e=100*this.fractionalProgress;return this.showValueAsInteger?e.toFixed(0)+"%":e.toFixed(1)+"%"}),{__CW__getter:function(e,t,n,i){var r=100*i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])?r.toFixed(0)+"%":r.toFixed(1)+"%"}})}),textSize:Object(V.b)({dependencies:["size"],get:Object.assign((function(e){return e||Math.round(this.size/6)}),{__CW__getter:function(e,t,n,i){return e||Math.round(i.internalGet(this,t[0+n])/6)}}),set:Tl.a}),init:function(){var e=this,t=arguments;e.__s._$1xf$init.apply(e,t);var n=this._context=this.canvasNode.getContext("2d");n.lineCap="square"},_drawOutline:function(){var e=this._context,t=this.size,n=t/2,i=t/2,r=t/3,a=2*Math.PI,s=Math.PI/2,o=this.outlineThickness,l=this.thickness,c=this.progressOverlaysOutline||!o?(this.fractionalProgress||0)*a:0,u=a-c;c>0&&(e.beginPath(),e.strokeStyle=this.progressColor,e.lineWidth=o||l,e.arc(n,i,r,-s,c-s,!1),e.stroke()),u>0&&(e.beginPath(),e.strokeStyle=this.outlineColor,e.lineWidth=o||l,e.arc(n,i,r,a-u-s,a-s,!1),e.stroke())},_drawProgress:function(){var e=this.size,t=e/2,n=e/2,i=Math.max(0,e/3-this.outlineThickness),r=this._context,a=Math.PI/2,s=2*Math.PI;r.beginPath(),r.lineWidth=this.thickness,r.strokeStyle=this.progressColor,r.arc(t,n,i,-a,s*this.fractionalProgress-a,!1),r.stroke()},_drawUpArrow:function(){var e=this._context;e.beginPath(),e.strokeStyle=this.progressColor;var t=this.size,n=t/2;e.moveTo(n,.3*t),e.lineTo(n,.7*t),e.moveTo(n,.3*t),e.lineTo(.7*n,.9*n),e.moveTo(n,.3*t),e.lineTo(1.3*n,.9*n),e.stroke()},_draw:function(){var e=this.size;this._context.clearRect(0,0,e,e),this._drawOutline(),this.outlineThickness&&this._drawProgress()},_effectiveDPR:Object(V.b)({readOnly:!0,dependencies:[p.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){return Math.ceil(p.a.sharedInstance.devicePixelRatio)}),{__CW__getter:function(e,t,n,i){return Math.ceil(i.internalGet(this,t[0+n]))}})}),_updateWhenNecessary:Object(B.h)("isAttached","_effectiveDPR","_context","size","progressColor","outlineColor","thickness","outlineThickness","progressOverlaysOutline",(function(e,t,n,i){if(e&&n){var r=this.canvasNode;r.width=r.height=i*t,r.style.width=r.style.height=i+"px",n.scale(t,t),this._draw()}})),_context:Object(V.b)(),__superMap:{_$1xf$init:"init"}})),yN=n(446),wN=n(769),IN=(n(1289),In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["progress-bar"],name:"progressNode",attributes:{role:"progressbar","aria-valuenow":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"value",attributes:{},attribute:"aria-valuenow"},"aria-valuemin":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"minimumValue",attributes:{},attribute:"aria-valuemin"},"aria-valuemax":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"maximumValue",attributes:{},attribute:"aria-valuemax"}}}],classes:["total"]}],classes:["cw-progress-view"]}},className:"cw-ui-progress-view",__QUALIFIED_CLASS_NAME__:"ProgressView"},minimumValue:Object(V.b)({defaultValue:0,type:"number"}),maximumValue:Object(V.b)({defaultValue:100,type:"number"}),value:Object(V.b)({defaultValue:0}),_updateDOM:Object(B.h)("value",(function(e){this.get("progressNode").setAttribute("style","width:"+(e||0)+"%")}))})),SN=In.a.extend({width:Object(V.b)(),height:Object(V.b)(),didCreateSVG:function(e){},didCreateSVGPath:function(e){},createSVG:function(){var e=this.width,t=this.height,n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),n.setAttribute("width",e),n.setAttribute("height",t),n.setAttribute("viewBox","0 0 "+e+" "+t),this.didCreateSVG(n),n},createSVGPath:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.didCreateSVGPath(e),e},init:function(){var e=this,t=arguments;e.__s._$nV$init.apply(e,t);var n=this.createSVG();n.appendChild(this.createSVGPath()),this.element.appendChild(n)},__superMap:{_$nV$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SVGView"}}),CN=SN.extend({staticMembers:{className:"icon-magnifying-glass",__QUALIFIED_CLASS_NAME__:"MagnifyingGlass"},width:60,height:60,didCreateSVGPath:function(e){e.setAttribute("d","M41.392,36.916a22.97,22.97,0,1,0-18.415,9.295A22.806,22.806,0,0,0,36.9,41.472L55.357,60.012l4.661-4.389Zm-18.415,5.2A19.019,19.019,0,1,1,41.909,23.1,19,19,0,0,1,22.976,42.115Z"),e.setAttribute("stroke-width","1"),e.setAttribute("fill-rule","nonzero")}}),EN=SN.extend(ku.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["clear-button",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"ClearButton"},width:60,height:60,didCreateSVGPath:function(e){e.setAttribute("d","M57.623,18.293 C56.0926123,14.7346918 53.9093051,11.494497 51.186,8.74 C48.4552911,5.9853652 45.2052214,3.79984457 41.624,2.31 C37.9366062,0.790802439 33.9880819,0.00612495591 30,0 C25.9849897,0.002963187 22.0112149,0.809822753 18.313,2.373 C14.7526246,3.90004018 11.5094686,6.0798942 8.751,8.8 C6.00764443,11.5009524 3.83913873,14.7290495 2.376,18.29 C0.810893178,21.9849179 0.00295222048,25.9562741 3.33066907e-15,29.969 C-0.00248369622,33.9610486 0.806209529,37.911976 2.377,41.582 C3.88313264,45.1726863 6.0688578,48.4385406 8.814,51.2 C11.5444828,53.9551583 14.7945936,56.1410465 18.376,57.631 C25.845902,60.7943366 34.279098,60.7943366 41.749,57.631 C45.3344344,56.1485511 48.5859488,53.9617189 51.311,51.2 C54.0678553,48.4735281 56.2558371,45.2267358 57.748,41.648 C59.2204476,37.929511 59.9842523,33.9683767 60,29.969 C59.9963302,25.9572161 59.1880567,21.9869167 57.623,18.293 L57.623,18.293 Z M41.374,38.335 L38.374,41.335 L30,32.966 L21.625,41.332 L18.625,38.332 L27,29.969 L18.626,21.6 L21.626,18.6 L30,26.972 L38.374,18.606 L41.374,21.606 L33,29.969 L41.374,38.335 Z"),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","1")}}),AN=In.a.extend({staticMembers:{className:!1,templateExtensions:{root:{type:"ELEMENT",tagname:"cw-search-field",children:[{type:"VIEWOUTLET",tagname:"view",name:"magnifyingGlass"},{type:"VIEWOUTLET",tagname:"view",name:"searchInputView"},{type:"VIEWOUTLET",tagname:"view",name:"clearButton"}]}},__QUALIFIED_CLASS_NAME__:"SearchField"},value:Object(V.b)(""),placeholder:Object(V.b)(),isDisabled:Object(V.b)(!1),maxLength:Object(V.b)(),autocomplete:Object(V.b)("off"),autocorrect:Object(V.b)("off"),autocapitalize:Object(V.b)("off"),spellcheck:Object(V.b)("false"),clear:function(){this.value="",this.searchInputView.focus()},magnifyingGlass:Object(V.b)({strong:!0,readOnly:!0,defaultValue:Object(k.c)(CN)}),searchInputView:Object(V.b)({strong:!0,readOnly:!0,defaultValue:Object(k.c)(Bl),downstreamBindings:{value:"(owner).value",placeholder:"(owner).placeholder",isDisabled:"(owner).isDisabled",maxLength:"(owner).maxLength",autocomplete:"(owner).autocomplete",autocorrect:"(owner).autocorrect",autocapitalize:"(owner).autocapitalize",spellcheck:"(owner).spellcheck"}}),clearButton:Object(V.b)({strong:!0,readOnly:!0,defaultValue:Object(k.c)(EN,{action:"clear"}),downstreamBindings:{isVisible:"(owner).value",isDisabled:"(owner).isDisabled"}})}),ON=In.a.extend(kl.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"select",classes:["cw-select-view"],attributes:{"aria-label":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"ariaLabel",attributes:{},attribute:"aria-label"}}}},__QUALIFIED_CLASS_NAME__:"SelectView"},value:Object(V.b)({defaultValue:"",get:function(e){return e},set:function(e){var t=this.findOptionWithValue(e);return t||""===e||Object(_.b)("Attempted to set value of "+this+" to `"+e+"`, which is not an option. Please see the documentation for SelectView."),t?t.value:""}}),options:Object(V.b)(Object(k.c)(Wo.b)),findOptionWithValue:function(e){return function e(t,n){for(var i=0,r=t.length;i<r;i++){var a=t.objectAt(i);if(a.hasOwnProperty("value")){if(a.value==n)return a}else if(a.hasOwnProperty("options"))for(var s=a.options,o=0,l=s.length;o<l;o++){var c=e(s[o],n);if(c)return c}}return null}(this.options,e)},updateOption:function(e,t){var n=this.findOptionWithValue(e);return n||Object(_.b)("Attempted to update an option with the value: "+e+", but no option with that value exists in select view: "+this),function e(t,n,i){for(var r=0,a=t.length;r<a;r++){var s=t.objectAt(r);if(s===n)return t.splice(r,1,i),!0;if(s.hasOwnProperty("options"))return e(s.options,n,i)}return!1}(this.options,n,t),n},isFocusable:!0,_render:function(){for(var e,t=this.element,n=this.options,i=this.value;e=t.lastChild;)t.removeChild(e);(function e(t,n){return t.map((function(t){var i,r=t.label,a=t.value,s=t.isDisabled,o=t.isHidden,l=t.options,c=t._element;if(l)(i=c&&c.cloneNode(!1)||document.createElement("optgroup")).setAttribute("label",r),(s||o)&&i.setAttribute("disabled",!0),e(l,n).forEach((function(e){e&&i.appendChild(e)}));else{if(o&&a!=n)return null;if(c)return c;(i=document.createElement("option")).setAttribute("value",a),(s||o)&&i.setAttribute("disabled",!0),i.innerText=r}return t._element=i}))})(n,i).forEach((function(e){e&&t.appendChild(e)}))},_redraw:Object(B.h)("value","element","options","options.contentsDidChange",(function(e,t,n,i){t&&n&&(this._render(),this.element.value=e)})),change:function(){this.value=this.element.value}});n(1290);var TN=In.a.extend(ku.a,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ui-switch",children:[{type:"ELEMENT",tagname:"ui-switch-knob"},{type:"VIEWOUTLET",tagname:"view",name:"hiddenInput"}],attributes:{id:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"id",attributes:{},attribute:"id"},"aria-checked":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"isOn",attributes:{},attribute:"aria-checked"}}}},className:"standard",__QUALIFIED_CLASS_NAME__:"Switch"},ariaRole:"switch",id:Object(V.b)({type:"string"}),tabIndex:Object(V.b)({type:"integer",set:function(e){return e},get:function(e){return e||0}}),isOn:Object(V.b)({type:"boolean",defaultValue:!1}),name:Object(V.b)({type:"string"}),form:Object(V.b)({type:"string"}),hiddenInputView:Object(V.b)({strong:!0,readOnly:!0,type:In.a,defaultValue:Object(k.c)(In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"input",attributes:{type:"hidden",form:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"form",attributes:{},attribute:"form"},value:"on"}}}},name:Object(V.b)({type:"string"}),form:Object(V.b)({type:"string"}),nameObserver:Object(B.h)("name",(function(e){e&&this.element.setAttribute("name",e)}))})),downstreamBindings:{name:"(owner).name",form:"(owner).form"}}),hiddenInput:Object(V.b)({readOnly:!0,type:In.a,dependencies:["isDisabled","isOn"],get:Object.assign((function(){var e=this.name,t=this.isDisabled,n=this.isOn,i=this.hiddenInputView;return e&&!t&&n?i:null}),{__CW__getter:function(e,t,n,i){var r=this.name,a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=this.hiddenInputView;return r&&!a&&s?o:null}})}),toggleState:function(){this.set("isOn",!this.get("isOn"))},wasActivated:function(){this.toggleState()}}),MN=n(475),DN=n(777),PN=n(474);function LN(e,t){return(LN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RN=2/Math.cbrt(2),xN=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).timeTarget=n.timeToStop(n.initialVelocity),n.positionTarget=n.catesPositionAtTime(n.timeTarget),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,LN(t,n);var r=i.prototype;return r.calculatePositionAtTime=function(e){var t=this.timeTarget,n=this.positionTarget,i=Math.min(e,t);return n-this.catesPositionAtTime(t-i)},r.calculateVelocityAtTime=function(e){var t=this.timeTarget,n=Math.min(e,t);return 200*Math.pow((t-n)/1e3,3)},r.calculateTimeAtPosition=function(e){return[this.timeTarget-1e3*Math.sqrt(Math.sqrt(e/50))]},r.timeToStop=function(e){return 1e3*Math.cbrt(1e3*e/50)/RN},r.catesPositionAtTime=function(e){return 50*Math.pow(e/1e3,4)},i}(MN.a);function NN(e,t){for(var n=Fm.a,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return n.apply(void 0,[0,e.length-1,function(t){return e[t]},t].concat(r))}var FN=/^[$A-Z_][$A-Z_0-9]*$/i;function VN(e){return FN.test(e)}var kN=n(349),BN=n(315),jN=n(281),UN=n(540),GN=n(386),HN=function(e,t,n,i){var r=UN.a;r.push(e);var a=t.apply(i,n);return r.pop(),a};function WN(e,t){return e-t*Math.floor(e/t)}var $N=n(533);function zN(e){for(var t=[],n=Object.keys(e),i=n.length,r=0;r<i;r++){var a=n[r];e[a]&&t.push(a)}return t}function KN(e,t,n){for(var i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,i,e[i],e))break}var qN=n(534),QN=n(532),YN=n(688),ZN=n(561),XN=n(560),JN=n(346);function eF(e,t,n){t=t||[],n=n||0;for(var i=0;i<e.length;){var r=e.charCodeAt(i++);if(r<55296||r>57343)t[n++]=r;else if(55296<=r&&r<=56319){var a=e.charCodeAt(i++);56320<=a&&a<=57343?t[n++]=((1023&r)<<10)+(1023&a)+65536:Object(_.b)("Invalid low surrogate: %{invalidLowSurrogate} [%{index}]",{invalidLowSurrogate:a,index:i})}else Object(_.b)("Unpaired low surrogate: %{unpairedLowSurrogate} [%{index}]",{unpairedLowSurrogate:r,index:i})}return t}function tF(e,t,n){var i=new Uint8Array(e);t=t||[],n=n||0;for(var r=0,a=i.length;r<a;r++){var s=i[r];s<=127?t[n++]=s:192<=s&&s<=223?t[n++]=((31&s)<<6)+((63&i[++r])<<0):224<=s&&s<=239?t[n++]=((15&s)<<12)+((63&i[++r])<<6)+((63&i[++r])<<0):240<=s&&s<=247?t[n++]=((7&s)<<18)+((63&i[++r])<<12)+((63&i[++r])<<6)+((63&i[++r])<<0):Object(_.b)("Invalid sequence starting byte: %{firstByte} [%{index}]",{firstByte:s,index:r})}return t}function nF(e){return function(){return rF(e)}}var iF=function(e){this.message=e,this.name=this.constructor.name;var t=Error(e);this.stack=t.stack};function rF(e){throw new iF(e||"Test Not Implemented")}function aF(e,t){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n}function sF(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=n;return t}function oF(e){return e instanceof HTMLElement?e.innerText:e.textContent}function lF(e){return!(!e||!e.isSinonProxy)}iF.prototype=Object.create(Error.prototype),iF.prototype.constructor=iF;var cF=n(263);function uF(e,t){var n=t?e[t]:e;if(lF(n))return n;var i=sinon.spy(e,t);return i._wasSpiedBySpyIfNecessary=!0,i}function dF(e,t){var n=e[t];n&&n._wasSpiedBySpyIfNecessary&&n.restore()}function hF(e,t,n){uF(e,"retain"),uF(e,"release");var i=e.retain.callCount,r=e.release.callCount,a=Object(cF.e)(t),s=e.retain.callCount,o=e.release.callCount;return n||!1===a||i===s&&r===o&&Object(_.b)("netRetains (or related) test was instructed to expect reference activity (retains/releases), but found none."),s-i-(o-r)}function pF(e,t){return 0-hF(e,t)}function fF(e,t){return hF(e,t,!0)}function gF(e,t){return 0-hF(e,t,!0)}function mF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sinon,i=e.__s,r=e.__superMap;for(var a in r){var s=r[a];if(s===t)return n.stub(i,a)}throw new Error("CW.Tests.stubSuper: super method does not exist: "+t)}function _F(e,t,n,i){for(var r={},a=t;a;){for(var s=Object.keys(a.__superMap),o=0,l=s.length;o<l;o++){var c=s[o],u=a.__superMap[c];i&&void 0!==i[u]?r[c]=n.stub().returns(i[u]):r[c]=n.stub()}a=a.prototype}e.__s=r}var vF=[null,void 0,{},[],[1],NaN,0,-0,1,"","hello world",!1,!0,function(){}],bF=n(750),yF=n(751);function wF(e,t){t=t||new IF(16);for(var n=0,i=0;i<36;n++,i+=2){8!==i&&13!==i&&18!==i&&23!==i||i++;var r=e.substring(i,i+2);t[n]=parseInt(r,16)}return t}var IF=Uint8Array||Array,SF=Bl.extend(HO,{staticMembers:{init:function(){var e=this,t=arguments;e.__s._$6T$init.apply(e,t);var n="host."+this.prototype.hostPathToEditableElement;this.prototype.registerMetadata("reflectedHostElement",V.b({readOnly:!0,dependencies:[n],get:function(){return this.getPath(n)}}))},__superMap:{_$6T$init:"init"},__QUALIFIED_CLASS_NAME__:"SingleLineEditorAdornment"},hostPathToEditableElement:void 0,commitmentEventName:void 0,motionSpeed:V.b(0),keyDown:function(e){var t=this;if(e.keyCode!==ml.a.ESC){if(e.keyCode!==ml.a.ENTER)return t.__s._$b_$keyDown&&t.__s._$b_$keyDown.apply(this,arguments),!0;this.commitAndDismiss()}else this.dismiss()},keyUp:function(){return!0},keyPress:function(){return!0},pointerDown:function(){return!!this.isFocused},pointerUp:function(){return!!this.isFocused},didEndEditing:function(){return this.commit(),!0},commit:function(){this._isCommitmentDisabled||this.value!==this._lastAuthoritativeValue&&this.sendEvent(this.commitmentEventName,this.value)},commitAndDismiss:Object(Bu.b)((function(){this.commit(),this.dismiss()})),dismiss:function(){this._isCommitmentDisabled=!0,this.blur(),this._isCommitmentDisabled=!1},didBlur:function(){var e=this,t=arguments;e.__s._$1Ho$didBlur.apply(e,t),this._mimicOnAttachment()},_mimicOnAttachment:B.h("isAttached","reflectedHostElement",(function(e,t){e&&t&&(JM(this,t),this._lastAuthoritativeValue=this.value)})),_commitAndDismissOnMotion:B.h("motionSpeed",(function(e){e&&this.commitAndDismiss()})),_maintainVisibility:B.h("isFocused",(function(e){this.style.set("opacity",e?1:1e-4),e&&this.select(),r[e?"addEventListener":"removeEventListener"](document,"focusout",this.commitAndDismiss)})),wantsPresenceInHost:V.b({readOnly:!0,dependencies:["reflectedHostElement"],get:Object.assign((function(){return Boolean(this.reflectedHostElement)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),willBeRemovedFromParent:function(){var e=this,t=arguments;this.commit(),this._isCommitmentDisabled=!0,e.__s._$26e$willBeRemovedFromParent.apply(e,t)},wasRemovedFromParent:function(){var e=this,t=arguments;e.__s._$28W$wasRemovedFromParent.apply(e,t),this._isCommitmentDisabled=!1},cleanup:function(){var e=this,t=arguments;return this.style.clear(),this.value="",this._ufnhl_lastSize=void 0,this._lastAuthoritativeValue=void 0,e.__s._$2Po$cleanup.apply(e,t)},updateForNewHostLayout:function(e,t,n,i){this._ufnhl_lastSize!==(this._ufnhl_lastSize=1e9*n+i)&&this._ufnhl_lastSize&&this._mimicOnAttachment(),this.element.setAttribute("tabindex",1e9+1e5*t+e||-1)},__superMap:{_$b_$keyDown:"keyDown",_$1Ho$didBlur:"didBlur",_$26e$willBeRemovedFromParent:"willBeRemovedFromParent",_$28W$wasRemovedFromParent:"wasRemovedFromParent",_$2Po$cleanup:"cleanup"}}),CF=n(787);function EF(e,t,n){for(var i in Pe.a.pause(),n){var r=n[i];t.bind(i,e.bindingFor(r))}Pe.a.resume()}function AF(e,t){Pe.a.pause();for(var n=0,i=t.length;n<i;n++)e.unbind(t[n]);Pe.a.resume()}function OF(e,t){var n={};for(var i in t){var r=t[i];n[i]=e.bindingFor(r)}return n}var TF=n(1236),MF=n(1238),DF=n(581);function PF(e){var t=Yl.b(e);return(LF[t]||(LF[t]=RF.create(e))).thenable}var LF={},RF=P.a.extend({className:null,staticMembers:{_imageCache:{},_styleReaderDiv:document.createElement("div"),_srcForURLStyle:function(e){return e?"url("!==e.substring(0,4)?null:'"'===e[4]||"'"===e[4]?e.slice(5,-2):e.slice(4,-1):null},_imageLoadHandler:function(){for(var e=this._preparers,t=e.length;t--;)e[t].prepareAsFarAsPossible()},_imageErrorHandler:function(){for(var e=this._preparers,t=e.length;t--;)e[t].handleFailure()},__QUALIFIED_CLASS_NAME__:"CanvasPreparer"},init:function(e){this.__s._$rz$init.call(this),"string"===typeof e?this.className=e:this.element=e,this.thenable=DF.a.create(),this.prepareAsFarAsPossible()},handleFailure:function(){this._hasFailed=!0,this.thenable.reject()},prepareAsFarAsPossible:function(){this.canvas&&this._hasFailed||(this._addBackgroundStylingInfoIfNeeded(),this.src?(this._addImageIfNeeded(),this.image.complete&&(this._computeDrawMetricsIfNeeded(),this._createCanvasIfNeeded(),this.thenable.resolve(this.canvas))):this.handleFailure())},_addBackgroundStylingInfoIfNeeded:function(){if(!this.hasStyleInfo){this.hasStyleInfo=!0;var e=this.element;e||((e=this.constructor._styleReaderDiv).className=this.className,document.body.appendChild(e));var t=yl.c(e);if(this.src=this.constructor._srcForURLStyle(t.get("background-image")),this.src){var n=t.get("background-position");this.bgX=-Math.round(parseFloat(n)),this.bgY=-Math.round(parseFloat(n.substring(n.indexOf(" ")+1))),this.divW=Math.round(parseFloat(t.get("width"))),this.divH=Math.round(parseFloat(t.get("height")));var i=t.get("background-size");i?(this.bgW=Math.round(parseFloat(i)),this.bgH=Math.round(parseFloat(i.substring(i.indexOf(" ")+1)))):this.bgW=this.bgH=NaN,e===this.constructor._styleReaderDiv&&document.body.removeChild(e)}}},_addImageIfNeeded:function(){var e=this.image;if(!e){var t=this.src,n=this.constructor._imageCache;(e=n[t])||((e=n[t]=new Image)._preparers=[],e.onload=this.constructor._imageLoadHandler,e.src=t),e._preparers.push(this),this.image=e}},_computeDrawMetricsIfNeeded:function(){if(!this.hasDrawMetrics){this.hasDrawMetrics=!0;var e=this.image,t=this.imageW=e.naturalWidth,n=this.imageH=e.naturalHeight,i=t/(this.bgW||t),r=n/(this.bgH||n);i===r&&i%1===0||_.b('The background-size provided by sprited-image class name "'+this.className+"\" should be the sprite's size divided by an integer.\n    sprite is "+t+" by "+n+"\n    background size is "+this.bgW+" by "+this.bgH+"\n    horizontal downscale is "+i+"\n    vertical downscale is "+r);var a=i;this.sourceX=this.bgX*a,this.sourceY=this.bgY*a,this.sourceW=this.divW*a,this.sourceH=this.divH*a,this.pixelRatio=a}},_createCanvasIfNeeded:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");e.width=this.sourceW,e.height=this.sourceH,e.getContext("2d").drawImage(this.image,this.sourceX,this.sourceY,this.sourceW,this.sourceH,0,0,this.sourceW,this.sourceH),e.pixelRatio=this.pixelRatio}},__superMap:{_$rz$init:"init"}}),xF=P.a.extend(zS,gM).extend({init:function(){var e=this,t=arguments;this._mutationObserversByChildJob=new Map,e.__s._$NU$init.apply(e,t)},addChildJob:function(e){this._childJobSet.add(e)&&this._scheduleInvalidation("_childJobs")},removeChildJob:function(e){this._childJobSet.remove(e)&&this._scheduleInvalidation("_childJobs")},removeAllChildJobs:function(){this._childJobs.length&&(this._childJobSet.clear(),this._scheduleInvalidation("_childJobs"))},numberOfChildren:H.d({get:function(){return this._childJobs.length}}),_childJobSet:H.d((function(){return new tO.a})),_childJobs:V.b({readOnly:!0,get:function(){return this._childJobSet.items}}),_mutationObserversByChildJob:void 0,_isPollingByChildJob:H.d((function(){return new Map})),_childJobInfos:Object(Ff.b)({source:"_childJobs",outputForInput:function(e){return Sh.arrayPool.getInstanceFromParams(e.jobStatus,e.jobProgress,e.jobSize)},outputDidEnter:function(e){Sh.arrayPool.retainInstance(e)},outputDidExit:function(e){Sh.arrayPool.releaseInstance(e)},inputDidEnter:function(e,t){var n=this._mutationObserversByChildJob,i=this._isPollingByChildJob;n.set(e,e.listen("jobProgress","jobStatus","jobSize",(function(){t(this)}))),this.isPolling&&e.hasMixin(HS.b)&&!i.get(e)&&(i.set(e,!0),e.beginPolling())},inputDidExit:function(e){var t=this._mutationObserversByChildJob,n=this._isPollingByChildJob;t.get(e).disconnect(),t.delete(e),this.isPollingNonObservable&&e.hasMixin(HS.b)&&n.get(e)&&(n.delete(e),e.endPolling())},inputDidMutate:function(){this._scheduleInvalidation("_childJobInfos")}}),_scheduleInvalidation:function(e){this["_"+e+"InvalidationTimeout"]||(this["_"+e+"InvalidationTimeout"]=Object(iE.b)(this._doInvalidation,e))},_doInvalidation:Object(Bu.b)((function(e){this.isDisposed||(this["_"+e+"InvalidationTimeout"]=void 0,this.propertyChanged(e))})),jobStatus:V.b({readOnly:!0,dependencies:["_childJobInfos"],get:Object.assign((function(){var e=Sh.arrayPool.getAutodisposingInstanceFromMap(this._childJobInfos,$F);return e.some(WF)?BF:e.every(jF)?NF:e.every(UF)?FF:e.every(HF)?kF:e.some(GF)?VF:void _.b("Found unknown progress situation in child jobs of CompoundLongJob.")}),{__CW__getter:function(e,t,n,i){var r=Sh.arrayPool.getAutodisposingInstanceFromMap(i.internalGet(this,t[0+n]),$F);return r.some(WF)?BF:r.every(jF)?NF:r.every(UF)?FF:r.every(HF)?kF:r.some(GF)?VF:void _.b("Found unknown progress situation in child jobs of CompoundLongJob.")}})}),getCompletedJobs:function(){return this.getJobsByStatus(kF)},getFailedJobs:function(){return this.getJobsByStatus(BF)},getJobsByStatus:function(e){return this._childJobs.filter((function(t){return t.jobStatus===e}))},jobProgress:V.b({readOnly:!0,dependencies:["jobStatus","jobSize","_childJobInfos"],get:Object.assign((function(){var e=this.jobStatus,t=this._childJobInfos;if(!t.every(zF)){if(e===NF)return 0;if(e===kF)return 1;for(var n,i=0,r=0;n=t[r];r++)i+=(n[1]||0)*(n[2]||0);var a=Math.min(1,Math.max(0,i/this.jobSize));return isNaN(a)?void 0:a}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);if(!a.every(zF)){if(r===NF)return 0;if(r===kF)return 1;for(var s,o=0,l=0;s=a[l];l++)o+=(s[1]||0)*(s[2]||0);var c=Math.min(1,Math.max(0,o/i.internalGet(this,t[1+n])));return isNaN(c)?void 0:c}}})}),jobSize:V.b({readOnly:!0,dependencies:["_childJobInfos"],get:Object.assign((function(){var e=this._childJobInfos;if(!e.every(KF)){for(var t,n=0,i=0;t=e[i];i++)n+=t[2]||0;return n}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r.every(KF)){for(var a,s=0,o=0;a=r[o];o++)s+=a[2]||0;return s}}})}),isReceivingPeriodicJobProgressUpdates:V.b({readOnly:!0,dependencies:["isPolling","_childJobInfos"],get:Object.assign((function(){return Boolean(this.isPolling&&this._childJobInfos.length)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n]).length)}})}),beginPolling:function(){this._beginPollingCount++},endPolling:function(){this._beginPollingCount--},staticMembers:{pollInstances:U.a,__QUALIFIED_CLASS_NAME__:"CompoundLongJob"},_startOrStopChildJobPolling:B.h("isPolling",(function(){var e=this.isPolling;if(Boolean(this._lastIsPolling)!==e){this._lastIsPolling=e;var t=this._childJobs,n=this._isPollingByChildJob;if(e)for(var i,r=0;i=t[r];r++)i.hasMixin(HS.b)&&!n.get(i)&&(n.set(i,!0),i.beginPolling());else for(var a,s=0;a=t[s];s++)a.hasMixin(HS.b)&&n.get(a)&&(n.delete(a),a.endPolling())}})),__superMap:{_$NU$init:"init"}}),NF=WS.NOT_STARTED,FF=WS.PREPARING,VF=WS.IN_PROGRESS,kF=WS.COMPLETED,BF=WS.FAILED,jF=function(e){return e===NF},UF=function(e){return e===FF||jF(e)},GF=function(e){return e===VF||HF(e)},HF=function(e){return e===kF},WF=function(e){return e===BF},$F=function(e){return e[0]},zF=function(e){return isNaN(e[1])},KF=function(e){return isNaN(e[2])};function qF(e,t){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function QF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("string"===typeof e)return e.indexOf(t,n);for(var i=t.length,r=t[0],a=e.length-i,s=n;s<=a;s++)if(e[s]===r)for(var o=0;o<i&&e[s+o]===t[o];o++)if(o===i-1)return s;return-1}function YF(e,t,n,i){if(qF(e,t))return e?[[0,e]]:[];if(null!=n){if("string"!==typeof e||"string"!==typeof t)throw new Error("Argument `cursor_pos` is unsupported while attempting to diff Arrays.");var r=function(e,t,n){var i="string"===typeof e&&"string"===typeof t,r="number"===typeof n?{index:n,length:0}:n.oldRange,a="number"===typeof n?null:n.newRange,s=e.length,o=t.length;if(0===r.length&&(null===a||0===a.length)){var l=r.index,c=e.slice(0,l),u=e.slice(l),d=a?a.index:null,h=l+o-s;if((null===d||d===h)&&!(h<0||h>o)){var p=t.slice(0,h),f=t.slice(h);if(i?f===u:qF(f,u)){var g=Math.min(l,h),m=c.slice(0,g),_=p.slice(0,g);if(i?m===_:qF(m,_)){var v=c.slice(g),b=p.slice(g);return rV(m,v,b,u)}}}if(null===d||d===l){var y=l;if(p=t.slice(0,y),f=t.slice(y),i?p===c:qF(p,c)){var w=Math.min(s-y,o-y),I=u.slice(u.length-w),S=f.slice(f.length-w);if(i?I===S:qF(I,S))return rV(c,v=u.slice(0,u.length-w),b=f.slice(0,f.length-w),I)}}}return r.length>0&&a&&0===a.length&&(m=e.slice(0,r.index),I=e.slice(r.index+r.length),!(o<(g=m.length)+(w=I.length))&&(_=t.slice(0,g),S=t.slice(o-w),(i?m===_:qF(m,_))&&(i?I===S:qF(I,S))))?rV(m,v=e.slice(g,s-w),b=t.slice(g,o-w),I):null}(e,t,n);if(r)return r}var a=XF(e,t),s=e.slice(0,a);a=JF(e=e.slice(a),t=t.slice(a));var o=e.slice(e.length-a),l=function(e,t){var n;if(!e.length)return[[1,t]];if(!t.length)return[[-1,e]];var i=e.length>t.length?e:t,r=e.length>t.length?t:e,a=QF(i,r);if(-1!==a)return n=[[1,i.slice(0,a)],[0,r],[1,i.slice(a+r.length)]],e.length>t.length&&(n[0][0]=n[2][0]=-1),n;if(1===r.length)return[[-1,e],[1,t]];var s=function(e,t){var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;function r(e,t,n){for(var i,r,a,s,o=e.slice(n,n+Math.floor(e.length/4)),l=-1,c="string"===typeof e&&"string"===typeof t,u=c?"":[];-1!==(l=QF(t,o,l+1));){var d=XF(e.slice(n),t.slice(l)),h=JF(e.slice(0,n),t.slice(0,l));u.length<h+d&&(u=c?t.slice(l-h,l)+t.slice(l,l+d):[].concat(t.slice(l-h,l),t.slice(l,l+d)),i=e.slice(0,n-h),r=e.slice(n+d),a=t.slice(0,l-h),s=t.slice(l+d))}return 2*u.length>=e.length?[i,r,a,s,u]:null}var a,s,o,l,c,u=r(n,i,Math.ceil(n.length/4)),d=r(n,i,Math.ceil(n.length/2));return u||d?(a=d?u&&u[4].length>d[4].length?u:d:u,e.length>t.length?(s=a[0],o=a[1],l=a[2],c=a[3]):(l=a[0],c=a[1],s=a[2],o=a[3]),[s,o,l,c,a[4]]):null}(e,t);if(s){var o=s[0],l=s[1],c=s[2],u=s[3],d=s[4],h=YF(o,c),p=YF(l,u);return h.concat([[0,d]],p)}return function(e,t){for(var n=e.length,i=t.length,r=Math.ceil((n+i)/2),a=r,s=2*r,o=new Array(s),l=new Array(s),c=0;c<s;c++)o[c]=-1,l[c]=-1;o[a+1]=0,l[a+1]=0;for(var u=n-i,d=u%2!==0,h=0,p=0,f=0,g=0,m=0;m<r;m++){for(var _=-m+h;_<=m-p;_+=2){for(var v=a+_,b=(C=_===-m||_!==m&&o[v-1]<o[v+1]?o[v+1]:o[v-1]+1)-_;C<n&&b<i&&e[C]===t[b];)C++,b++;if(o[v]=C,C>n)p+=2;else if(b>i)h+=2;else if(d&&(I=a+u-_)>=0&&I<s&&-1!==l[I]){var y=n-l[I];if(C>=y)return ZF(e,t,C,b)}}for(var w=-m+f;w<=m-g;w+=2){for(var I=a+w,S=(y=w===-m||w!==m&&l[I-1]<l[I+1]?l[I+1]:l[I-1]+1)-w;y<n&&S<i&&e[n-y-1]===t[i-S-1];)y++,S++;if(l[I]=y,y>n)g+=2;else if(S>i)f+=2;else if(!d&&(v=a+u-w)>=0&&v<s&&-1!==o[v]){var C=o[v];if(b=a+C-v,C>=(y=n-y))return ZF(e,t,C,b)}}}return[[-1,e],[1,t]]}(e,t)}(e=e.slice(0,e.length-a),t=t.slice(0,t.length-a));return s.length&&l.unshift([0,s]),o.length&&l.push([0,o]),function e(t,n,i){t.push([0,i?"":[]]);for(var r,a=0,s=0,o=0,l=i?"":[],c=i?"":[];a<t.length;)if(a<t.length-1&&!t[a][1].length)t.splice(a,1);else switch(t[a][0]){case 1:var u;o++,i?c+=t[a][1]:(u=c).push.apply(u,t[a][1]),a++;break;case-1:var d;s++,i?l+=t[a][1]:(d=l).push.apply(d,t[a][1]),a++;break;case 0:var h,p=a-o-s-1;if(n&&i){if(p>=0&&iV(t[p][1])){var f=t[p][1].slice(-1);if(t[p][1]=t[p][1].slice(0,-1),l=f+l,c=f+c,!t[p][1]){t.splice(p,1),a--;var g=p-1;t[g]&&1===t[g][0]&&(o++,c=t[g][1]+c,g--),t[g]&&-1===t[g][0]&&(s++,l=t[g][1]+l,g--),p=g}}nV(t[a][1])&&(f=t[a][1][0],t[a][1]=t[a][1].slice(1),l+=f,c+=f)}if(a<t.length-1&&!t[a][1].length){t.splice(a,1);break}if(l.length>0||c.length>0){if(l.length>0&&c.length>0){var m,_;if(0!==(r=XF(c,l)))p>=0?i?t[p][1]+=c.slice(0,r):(m=t[p][1]).push.apply(m,c.slice(0,r)):(t.splice(0,0,[0,c.slice(0,r)]),a++),c=c.slice(r),l=l.slice(r);if(0!==(r=JF(c,l)))i?t[a][1]=c.slice(c.length-r)+t[a][1]:(_=t[a][1]).unshift.apply(_,c.slice(c.length-r)),c=c.slice(0,c.length-r),l=l.slice(0,l.length-r)}var v=o+s;0===l.length&&0===c.length?(t.splice(a-v,v),a-=v):0===l.length?(t.splice(a-v,v,[1,c]),a=a-v+1):0===c.length?(t.splice(a-v,v,[-1,l]),a=a-v+1):(t.splice(a-v,v,[-1,l],[1,c]),a=a-v+2)}if(0!==a&&0===t[a-1][0])i?t[a-1][1]+=t[a][1]:(h=t[a-1][1]).push.apply(h,t[a][1]),t.splice(a,1);else a++;o=0,s=0,l=i?"":[],c=i?"":[]}0===t[t.length-1][1].length&&t.pop();var b=!1;for(a=1;a<t.length-1;){if(0===t[a-1][0]&&0===t[a+1][0])if(qF(t[a][1].slice(t[a][1].length-t[a-1][1].length),t[a-1][1]))i?(t[a][1]=t[a-1][1]+t[a][1].slice(0,t[a][1].length-t[a-1][1].length),t[a+1][1]=t[a-1][1]+t[a+1][1]):(t[a][1]=[].concat(t[a-1][1],t[a][1].slice(0,t[a][1].length-t[a-1][1].length)),t[a+1][1]=[].concat(t[a-1][1],t[a+1][1])),t.splice(a-1,1),b=!0;else if(qF(t[a][1].slice(0,t[a+1][1].length),t[a+1][1])){var y;i?(t[a-1][1]+=t[a+1][1],t[a][1]=t[a][1].slice(t[a+1][1].length)+t[a+1][1]):((y=t[a-1][1]).push.apply(y,t[a+1][1]),t[a][1]=[].concat(t[a][1].slice(t[a+1][1].length),t[a+1][1])),t.splice(a+1,1),b=!0}a++}b&&e(t,n,i)}(l,i,"string"===typeof e&&"string"===typeof t),l}function ZF(e,t,n,i){var r=e.slice(0,n),a=t.slice(0,i),s=e.slice(n),o=t.slice(i),l=YF(r,a),c=YF(s,o);return l.concat(c)}function XF(e,t){if(!e.length||!t.length||e[0]!==t[0])return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,a=0,s=!("string"===typeof e&&"string"===typeof t);n<r;)(s?qF(e.slice(a,r),t.slice(a,r)):e.substring(a,r)==t.substring(a,r))?a=n=r:i=r,r=Math.floor((i-n)/2+n);return!s&&eV(e.charCodeAt(r-1))&&r--,r}function JF(e,t){if(!e.length||!t.length||e[e.length-1]!==t[t.length-1])return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,a=0,s=!("string"===typeof e&&"string"===typeof t);n<r;)(s?qF(e.slice(e.length-r,e.length-a),t.slice(t.length-r,t.length-a)):e.substring(e.length-r,e.length-a)==t.substring(t.length-r,t.length-a))?a=n=r:i=r,r=Math.floor((i-n)/2+n);return!s&&tV(e.charCodeAt(e.length-r))&&r--,r}function eV(e){return e>=55296&&e<=56319}function tV(e){return e>=56320&&e<=57343}function nV(e){return tV(e.charCodeAt(0))}function iV(e){return eV(e.charCodeAt(e.length-1))}function rV(e,t,n,i){return iV(e)||nV(i)?null:function(e){for(var t=[],n=0;n<e.length;n++)e[n][1].length>0&&t.push(e[n]);return t}([[0,e],[-1,t],[1,n],[0,i]])}var aV=we.b("DiffAction",{INSERT:"insert",REMOVE:"remove",KEEP:"keep"});function sV(e,t,n){"string"!==typeof e&&"string"!==typeof t&&(Array.isArray(e)||(e=Array.from(e)),Array.isArray(t)||(t=Array.from(t)));for(var i,r,a,s=YF(e,t,n,!0),o=0;i=s[o];o++){var l=i[0];i[0]=1===l?aV.INSERT:0===l?aV.KEEP:aV.REMOVE}return{diff:s,get playback(){return r||(r=function(e){for(var t,n=aV.INSERT,i=aV.KEEP,r=aV.REMOVE,a=[],s=0,o=0;t=e[o];o++){var l=t,c=l[0],u=l[1];c!==n&&c!==r||a.push({action:c,content:u,length:u.length,index:s}),c!==n&&c!==i||(s+=u.length)}return a}(s))},get splices(){return a||(a=function(e){for(var t,n,i,r=aV.INSERT,a=aV.REMOVE,s=[],o=0;t=e[o];o++)if(i&&i.index===t.index&&i.action===a&&t.action===r)n.replacementContent=t.content,i=n=void 0;else{var l={index:t.index,length:t.action===a?t.length:0,replacementContent:t.action===r?t.content:"string"===typeof t.content?"":[]};s.push(l),i=t,n=l}return s}(this.playback))},oldContent:e,newContent:t}}function oV(e){}var lV=n(757),cV=n(755),uV=n(1239),dV=n(569);function hV(e,t,n,i){var r={};if(i)return r;var a=mV(e,t,n),s=gV(e,t,n);if(e>1){var o=Math.round(n/2-a/2);r.marginTop=o+"px"}else if(e<1){var l=Math.round(t/2-s/2);r.marginLeft=l+"px"}return r.height=a+"px",r.width=s+"px",r}function pV(e,t,n,i){var r={};if(t&&1!==t){var a=0,s=!1;if(7===t||8===t?(s=!0,a=270):3===t||4===t?a=180:5!==t&&6!==t||(s=!0,a=90),s){var o=gV(e,n,i),l=mV(e,n,i),c=Math.round(o/2-l/2),u=Math.round(l/2-o/2);r.marginTop=u+"px",r.marginLeft=c+"px",r.width=l+"px",r.height=o+"px"}var d="",h="";a>0&&(d="rotate("+a+"deg)"),2===t||4===t?h=" scaleX(-1)":5!==t&&7!==t||(h=" scaleY(-1)"),r.transform=""+d+h}return r}function fV(e){var t="";return e.marginTop&&(t+="margin-top:"+e.marginTop+";"),e.marginLeft&&(t+="margin-left:"+e.marginLeft+";"),e.width&&(t+="width:"+e.width+";"),e.height&&(t+="height:"+e.height+";"),e.transform&&(t+="transform:"+e.transform+";"),t}function gV(e,t,n){return Math.min(t,Math.round(e*n))}function mV(e,t,n){return Math.min(n,Math.round(1/e*t))}var _V=function(e){return new Promise((function(t){return X.a(t,e)}))};function vV(e,t){if(0===e.length)return Array.from(Array(t).keys());if(e.length===t)return[];for(var n=[],i=0,r=0;r<t;r++)r!==e[i]?n.push(r):i+=1;return n}var bV=P.a.extend(B.b,{targetIndex:V.b(NaN),windowRadius:V.b(NaN),startIndex:V.b({get:function(){return this.targetIndex-this.windowRadius}}),endIndex:V.b({get:function(){return this.targetIndex+this.windowRadius}}),canGrow:V.b(!0),canShrink:V.b(!0),delayBeforeGrow:V.b(50),delayBeforeShrink:V.b(50),wantsToGrow:V.b({}),wantsToShrink:V.b({}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MovingIndexWindow"}}),yV=n(1235),wV=function(e,t){for(var n=[],i=[],r=0,a=e.length;r<a;r++){var s=e[r];t.call(this,s)?n.push(s):i.push(s)}return[n,i]};function IV(e){var t,n,i,r,a=function(e){if("string"===typeof e)return e.replace(/ /g,"").replace(/\{/g,"").replace(/\}/g,"").split(",").map(parseFloat)}(e);return a&&4===a.length&&a.every((function(e){return"number"===typeof e&&!isNaN(e)}))?(t=a[0],n=a[1],i=a[2],r=a[3]):(t=0,n=0,i=1,r=1),{x:t,y:n=1-(r+n),width:i,height:r}}function SV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var CV=function(e,t){for(var n,i=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return SV(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SV(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(n=i()).done;){var r=n.value;if(!e.has(r))return!1}return!0},EV={isSetSubsetOf:function(e,t){return CV(t,e)},isSetSupersetOf:CV},AV=Math.log(Number.MAX_SAFE_INTEGER)/Math.log(2)|0,OV=Math.pow(2,AV/2|0),TV={};function MV(e,t){return e<OV&&e>=0||t<OV&&t>=0?OV*(0|e)+(0|t):NaN}function DV(e){if(e>=0)return TV.a=e/OV|0,TV.b=e%OV,TV}function PV(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return LV(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LV(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function RV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xV=function(){function e(){this._map=arguments.length?new Map(arguments[0]):new Map;for(var e,t=PV(this.values());!(e=t()).done;){var n=e.value;FV(n)}}var t,n,i=e.prototype;return i.set=function(e,t){var n=this.get(e);FV(t);var i=this._map.set(e,t);return NV(n),i},i.delete=function(e){var t=this.get(e),n=this._map.delete(e);return NV(t),n},i.clear=function(){var e=Array.from(this.values());this._map.clear();for(var t=0,n=e.length;t<n;t++)NV(e[t])},i.entries=function(){var e;return(e=this._map).entries.apply(e,arguments)},i.forEach=function(){var e;return(e=this._map).forEach.apply(e,arguments)},i.get=function(){var e;return(e=this._map).get.apply(e,arguments)},i.has=function(){var e;return(e=this._map).has.apply(e,arguments)},i.keys=function(){var e;return(e=this._map).keys.apply(e,arguments)},i.values=function(){var e;return(e=this._map).values.apply(e,arguments)},t=e,(n=[{key:"size",get:function(){return this._map.size}}])&&RV(t.prototype,n),e}();function NV(e){var t=e||Sh.Pool.getInstanceInfo(e);t&&"function"===typeof t.release&&t.release()}function FV(e){var t=e||Sh.Pool.getInstanceInfo(e);t&&"function"===typeof t.retain&&t.retain()}xV.prototype[Symbol.iterator]=function(){var e;return(e=this._map).entries.apply(e,arguments)};var VV,kV=n(1291),BV=n(1274),jV=n(1292),UV=function(){function e(e){this.currentSeed=Math.sin(e||1)}var t=e.prototype;return t.next=function(e){for(var t="";t.length<20;)this.currentSeed=2*Math.cos(parseInt(String(this.currentSeed).substring(5),10)/1e8)+2,t+=String(this.currentSeed).substring(5,10);return parseInt(t,10)/1e20*(e||1)},t.nextBetween=function(e,t){return this.next(t-e)+e},t.nextIntBetween=function(e,t){return 0|this.nextBetween(e,t)},t.nextInt=function(e){return 0|this.next(e)},t.nextBool=function(){return this.next()>.5},e}(),GV=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF]))(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/;function HV(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=0;return zV(e,t,n,Object.assign({},i,{squashDirection:r}))}function WV(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=-1;return zV(e,t,n,Object.assign({},i,{squashDirection:r}))}function $V(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=1;return zV(e,t,n,Object.assign({},i,{squashDirection:r}))}function zV(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null==t)return e;for(var r=i.insertionStr,a=void 0===r?"\u2026":r,s=i.numberOfLines,o=void 0===s?1:s,l=i.squashDirection,c=void 0===l?0:l,u=1,d="",h=[];d.length<e.length;){var p=e.substr(d.length),f=p.match(/^\s*\S+|\s+$/),g=d+f[0],m=QV(g,n).width;if(m<=t)d=g;else{if(u===o){d=KV(e,t,a,n,c);break}""===d&&(d=KV(f[0],t,a,n,c),p=e.substr(f[0].length)),h.push(d),e=p.trim(),d="",u++}}return h.push(d),h.join("\n")}function KV(e,t,n,i,r){var a=t-QV(n,i).width,s="",o="";switch(r){case 1:s=qV(e,a,1).replace(/\s+$/,"");break;case-1:o=qV(e,a,-1).replace(/^\s+/,"");break;default:var l=a/2;s=qV(e,l,1).replace(/\s+$/,""),o=qV(e,l,-1).replace(/^\s+/,"")}return""+s+n+o}function qV(e,t,n){for(var i=0,r=0,a=0,s="",o="",l=e.length;i<l;)if(i++,s=n>0?e.substr(0,i):e.substr(l-i),!e.substr(i-1,i).match(GV)){if((r=QV(s).width)>t)return o;r!==a&&(o=s),a=r}return o}function QV(e,t){if(!VV){var n=document.createElement("canvas");n.width=n.height=0,VV=n.getContext("2d")}return VV.font=t,VV.measureText(e)}function YV(e,t,n){var i=e.height,r=e.width,a=t.height,s=t.width,o=n.height,l=n.width,c=n.x,u=n.y,d=Object(ef.d)(l*s,o*a,r,i),h=Object(ef.c)(s,a,r,i),p=Math.max(d.width/(l*s),d.height/(o*a),h.width/s,h.height/a),f=p*s,g=p*a,m=r/2-p*l*s/2-c*f,_=i/2-p*o*a/2-u*g,v=Math.max(r-f,Math.min(0,m)),b=Math.max(i-g,Math.min(0,_)),y=Sh.objectPool.getAutodisposingInstance();return y.width=f,y.height=g,y.x=v,y.y=b,y}var ZV={EXPIRED:"Expired",SHOW_HOUR:"ShowHour",TOMORROW:"Tomorrow",WITHIN_YEAR:"WithinYear",OTHERS:"Others"};function XV(e,t){if(!tk(e))throw new Error("now must be a Date object.");if(!tk(t))throw new Error("target must be a Date object.");var n=t-e;switch(!0){case n<=0:return"Expired";case mn(e,t)||n<=396e5:return"ShowHour";case n<=864e5:return"Tomorrow";case n<=2592e7:return"WithinYear";default:return"Others"}}function JV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Time.Remaining.Expires.";if(void 0===e)throw new Error("timeRemaining must be one of "+Object.keys(ZV).join(", ")+".");return s.d(n+e,{date:t,dateFormatter:Hd})}function ek(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Time.Remaining.Expires.",i=XV(e,t);return JV(i,t,n)}function tk(e){return e instanceof Date}var nk=n(326),ik=n(568),rk=new WeakMap,ak=new WeakMap,sk=new WeakMap;function ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){throw new Error("Spiny Object Access Violation")},i={};pk(e,i),pk(t,i);var r=new Proxy(i,{get:function(t,i){return fk.includes(i)?gk:(dk(r)?e:t).hasOwnProperty(i)?t[i]:void n()},set:function(t,i,a){if((dk(r)?e:t).hasOwnProperty(i))return t[i]=a,!0;n()}});return rk.set(r,1),sk.set(r,parseInt(String(Math.random()).substring(2)).toString(16)),r}function lk(e){if(e=ak.get(e)||e,!rk.has(e))throw new Error("Cannot extend spines on a non-spiny object.");rk.set(e,rk.get(e)+1)}function ck(e){if(e=ak.get(e)||e,!rk.has(e))throw new Error("Cannot extend spines on a non-spiny object.");var t=rk.get(e);if(!(t>=1))throw new Error("Mismatched extensions and retractions of spines. Spininess is "+t+". SpinyObject ID is "+sk.get(e));rk.set(e,t-1)}function uk(e){if(e=ak.get(e)||e,!rk.has(e))throw new Error("Cannot extend spines on a non-spiny object.");rk.set(e,1)}function dk(e){return e=ak.get(e)||e,!!rk.get(e)}function hk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var s=a[r];ak.set(s,e)}}function pk(e,t){var n=Object.getOwnPropertyDescriptors(e);for(var i in n)Object.defineProperty(t,i,n[i])}var fk=["valueOf","toString",Symbol.toPrimitive,Symbol.toStringTag],gk=function(){return"[object SpinyObject]"};function mk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ok(Object.assign({},t,{location:ok({get href(){return dk(n.location)?_k():e},set href(t){e=t}},Object.assign({},t.location?t.location:{}),_k)}),{},_k);return hk(n,n.location),n}function _k(){throw new DOMException("Fake cross-origin frame access violation!")}var vk,bk=BO.extend(qO,{staticMembers:{textContentDependenciesOnHost:[],getTextContentForHost:function(){},_getTrimmedTextContentForHost:function(e){return String(e&&this.getTextContentForHost(e)||"").trim()},existenceDependenciesOnHost:H.d({get:function(e){var t;return(t=Sh.arrayPool).getInstanceFromUniquesOfParams.apply(t,this.textContentDependenciesOnHost.concat(e))},set:Tl.a}),shouldExistInHost:function(e){return Boolean(this._getTrimmedTextContentForHost(e))},init:function(){var e=this,t=arguments;e.__s._$gt$init.apply(e,t);var n=function(e){if(this.host===e){var t=this.constructor._getTrimmedTextContentForHost(e);this._mtcid_lastTextContent!==(this._mtcid_lastTextContent=t)&&(this.element.innerHTML=t)}};this.prototype.registerMetadata("_maintainTextContentInDOM",B.h({inputs:["host"].concat(this.textContentDependenciesOnHost.map((function(e){return"host."+e}))),callback:function(){var e,t=(e=Sh.arrayPool).getAutodisposingInstanceFromParams.apply(e,arguments);t.unshift(n,this),iE.b(of.a.apply(a,t))}}))},__superMap:{_$gt$init:"init"},__QUALIFIED_CLASS_NAME__:"TextContainerAdornment"},fadeInDuration:H.d({get:function(e){return this.getPath("host.isBeingHovered")?0:e},set:Tl.a}),classNames:F.b(["text-container-adornment"])}).extend({staticMembers:{requiresHostMixins:F.b([fl.a]),visibilityWidthThresholds:(vk={},vk[dn.a.COMPACT]=1/0,vk[dn.a.REGULAR]=40,vk),existenceDependenciesOnHost:F.b(["sizeClass","currentScale"]),shouldExistInHost:function(e){var t=this;return e.currentScale>=this.visibilityWidthThresholds[e.sizeClass]&&t.__s._$Nb$shouldExistInHost.apply(this,arguments)},textContentDependenciesOnHost:F.b(["media.caption"]),getTextContentForHost:function(e){var t=e.media;return String(t&&t.caption||"").trim()},__superMap:{_$Nb$shouldExistInHost:"shouldExistInHost"},__QUALIFIED_CLASS_NAME__:"MediaCaptionAdornment"},classNames:F.b(["media-caption-adornment"])}),yk=bk.extend({staticMembers:{requiresHostMixins:F.b([fl.a,KT]),textContentDependenciesOnHost:F.b(["isBeingHovered","primaryInteractionMode"]),getTextContentForHost:function(e){var t=this,n=String(t.__s._$eH$getTextContentForHost.apply(this,arguments)||"").trim();if(n)return n;var i=e.isBeingHovered,r=e.primaryInteractionMode,a=i&&r===yn.a.MOUSE;return a?s.d("MediaCaptionAdornment.NoCaption.Placeholder"):""},__superMap:{_$eH$getTextContentForHost:"getTextContentForHost"},__QUALIFIED_CLASS_NAME__:"HoverableMediaCaptionAdornment"},_isShowingUntitledHoverText:V.b({readOnly:!0,dependencies:["host.isBeingHovered","host.primaryInteractionMode","host.media.caption"],get:Object.assign((function(){return Boolean(this.getPath("host.isBeingHovered")&&this.getPath("host.primaryInteractionMode")===yn.a.MOUSE&&!String(this.getPath("host.media.caption")||"").trim())}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])===yn.a.MOUSE&&!String(i.internalGetPath(this,t[2+n])||"").trim())}}),didChange:function(){iE.b(this._updateColorInDOM)}}),_updateColorInDOM:Bu.b((function(){this.element.classList.toggle("just-untitled-hover-text",this._isShowingUntitledHoverText)}))}),wk={mixinDependencies:[fl.a],isSelectionEnabled:V.b(),shouldAllowSingleTapToNavigateToOneUp:V.b({readOnly:!0,dependencies:["primaryInteractionMode","isSelectionEnabled"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE||!this.isSelectionEnabled}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE||!i.internalGet(this,t[1+n])}})}),init:function(){var e=this,t=arguments;e.__s._$Ah$init.apply(e,t),this.oneUpNavigationTapGR=this.oneUpNavigationTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.oneUpNavigationTapGR),this.oneUpNavigationLongTapGR=this.oneUpNavigationLongTapGRClass.create({delegate:this}),this.addGestureRecognizer(this.oneUpNavigationLongTapGR)},oneUpNavigationLongTapGRClass:tD.a.extend({event:"oneUpNavigationLongTap"}),oneUpNavigationTapGRClass:Zp.b.extend(pT.a,{event:"oneUpNavigationTap"}),gestureRecognizerShouldReceive:function(e){var t=this,n=arguments;return!(e===this.oneUpNavigationTapGR&&!this.shouldAllowSingleTapToNavigateToOneUp)&&t.__s._$Tl$gestureRecognizerShouldReceive.apply(t,n)},gestureRecognizerShouldRequireFailureOf:function(e,t){var n=this,i=arguments,r=this.oneUpNavigationTapGR,a=this.oneUpNavigationLongTapGR;return e!==a&&t!==a&&(!(!this.isOneUpGR(e)||!this.isGRFromChild(t))||(!this.isGRFromChild(e)||!this.isOneUpGR(t))&&(!this.isOneUpGR(e)&&t===r||!(e===r&&!this.isOneUpGR(t))&&n.__s._$12z$gestureRecognizerShouldRequireFailureOf.apply(n,i)))},isOneUpGR:function(e){return e===this.oneUpNavigationLongTapGR||e===this.oneUpNavigationTapGR},isGRFromChild:function(e){var t=this.element,n=e.view.element;return t!==n&&t.contains(n)},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){var n=this,i=arguments,r=this.oneUpNavigationLongTapGR;return e===r||t===r||n.__s._$1C_$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(n,i)},_shouldAllowNavigation:function(e){return!(!this.isAttached||e.state!==L_.b.Ended)},oneUpNavigationTap:function(){this._shouldAllowNavigation(this.oneUpNavigationTapGR)&&this.sendEvent("userDidIndicateDesireToNavigateToMedia",this.media)},oneUpNavigationLongTap:function(){this._shouldAllowNavigation(this.oneUpNavigationLongTapGR)&&this.sendEvent("userDidIndicateDesireToNavigateToMedia",this.media)},__superMap:{_$Ah$init:"init",_$Tl$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$12z$gestureRecognizerShouldRequireFailureOf:"gestureRecognizerShouldRequireFailureOf",_$1C_$gestureRecognizerShouldRecognizeSimultaneouslyWith:"gestureRecognizerShouldRecognizeSimultaneouslyWith"}},Ik=uO.extend({mixinDependencies:[aT,wk,kT],audioAdornment:NO.adornmentProperty(BT),errorAdornment:NO.adornmentProperty(HT),panoramaAdornment:NO.adornmentProperty($T),videoAdornment:NO.adornmentProperty(zT),mediaCaptionAdornment:NO.adornmentProperty(bk),motionSpeed:Oi.c("parent.scrollMotionY.emaSpeed"),layoutMetrics:F.b({hasHeaders:!1,headerHeight:0,sectionBottomPadding:0}),gestureRecognizerShouldReceive:function(){var e=this,t=arguments;return!!this.media&&e.__s._$Vd$gestureRecognizerShouldReceive.apply(e,t)},__superMap:{_$Vd$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridItemView"}}),Sk=dn.a,Ck=Sk.COMPACT,Ek=Sk.REGULAR,Ak=yn.a.MOUSE,Ok=ik.a.PORTRAIT,Tk=$l.uiSizeClassRegularInset,Mk=$l.uiSizeIPhoneSELandscapeWidth,Dk=$l.uiSizeIPhone4LandscapeWidth,Pk=$l.uiPhotosColumnCountCompact,Lk=$l.uiPhotosColumnCountDesktop,Rk=$l.uiPhotosColumnCountPortrait,xk=$l.uiPhotosColumnCountLandscape,Nk=$l.uiPhotosColumnCountIPhone4Like,Fk=$l.uiPhotosColumnCountIPhone3GSLike,Vk=$l.uiPhotosGridGutterDesktop,kk={apparentLayoutWidth:V.b({dependencies:["viewportWidth","sectionLeftPadding","sectionRightPadding"],readOnly:!0,type:Number,get:Object.assign((function(){return this.viewportWidth-this.sectionLeftPadding-this.sectionRightPadding}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),columnCount:V.b({dependencies:["preferredMouseColumnCount","orientationType","primaryInteractionMode","sizeClass","viewportWidth"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.orientationType,t=this.preferredMouseColumnCount,n=this.primaryInteractionMode,i=this.sizeClass,r=this.viewportWidth;return n===Ak?void 0!==t?t:Lk:i===Ck?r<Dk?Fk:r<Mk?Nk:Pk:e===Ok?Rk:xk}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]);return s===Ak?void 0!==a?a:Lk:o===Ck?l<Dk?Fk:l<Mk?Nk:Pk:r===Ok?Rk:xk}})}),isSquareCrop:V.b({dependencies:["primaryInteractionMode","sizeClass"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.sizeClass;return e!==Ak&&t!==Ek}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r!==Ak&&a!==Ek}})}),photosGridGutter:V.b({dependencies:["primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.sizeClass,n=0;return e===Ak?n=Vk:t===Ek&&(n=Tk),Math.max(n,0)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=0;return r===Ak?s=Vk:a===Ek&&(s=Tk),Math.max(s,0)}})}),photosGridMaxWidth:V.b(1/0),sectionPaddingObserver:B.h({inputs:["photosGridGutter","photosGridMaxWidth","viewportWidth"],callback:function(e,t,n){var i=(n-Math.min(n,t))/2,r=Math.max(i,e);Pe.a.pause(),this.sectionLeftPadding=this.sectionRightPadding=r,Pe.a.resume()}}),preferredMouseColumnCount:V.b()},Bk=xO.extend({mixinDependencies:[VT,fl.a],itemViewClass:Ik,layoutMetrics:F.b(kk),scrollIndicatorShouldEnlarge:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode!==yn.a.TOUCH}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])!==yn.a.TOUCH}})}),view:V.b({strong:!0,downstreamBindings:{"verticalScrollIndicator.scrollIndicatorShouldEnlarge":"(owner).scrollIndicatorShouldEnlarge","horizontalScrollIndicator.scrollIndicatorShouldEnlarge":"(owner).scrollIndicatorShouldEnlarge"}}),presenter:F.b({viewForViewClass:function(){var e=this,t=arguments,n=e.__s._$SV$viewForViewClass.apply(e,t);return pi.a(n,uO)&&n.bind("isSelectionEnabled",this.owner.bindingFor("isSelectionEnabled")),n},__superMap:{_$SV$viewForViewClass:"viewForViewClass"}}),keyDown:function(e){var t=this,n=arguments,i=e.keyCode,r=ml.a,a=!p.a.sharedInstance.isWindows&&e.metaKey,s=this.view;if(i===r.RETURN){var o=this.selectionController.mostNotableSelectedItem;if(this.userDidPressReturnWithSelection&&o){var l=this.userDidPressReturnWithSelection(o,this.selection,e);if(!0===l||void 0===l)return!0}}else if(a&&!e.shiftKey){if(i===r.DOWN)return s.scrollTo(0,100),!0;if(i===r.UP)return s.scrollTo(0,0),!0}return t.__s._$17X$keyDown.apply(t,n)},isSelectionEnabled:V.b(),__superMap:{_$17X$keyDown:"keyDown"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridViewController"}});function jk(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function Uk(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){jk(a,i,r,s,o,"next",e)}function o(e){jk(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Gk=fi.a.extend({mixinDependencies:[CA,OA],viewClass:qA,view:V.b({downstreamBindings:{isGridEmpty:"(owner).isGridEmpty"}}),container:V.b({strong:!0}),containerAdapterClass:KA,collection:V.b({strong:!0,readOnly:!0,get:function(){return this.containerAdapterClass.create()},downstreamBindings:{container:"(owner).container"}}),hostedByCloudOSOne:V.b(!1),gridViewController:Ci.b({defaultValue:k.c(Bk),downstreamBindings:{collection:"(owner).collection",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK"},strong:!0,readOnly:!0,viewOutlet:"photosGridView"}),isGridEmpty:V.b({dependencies:["collection.length"],readOnly:!0,type:Boolean,get:Object.assign((function(){return!(this.collection.length>0)}),{__CW__getter:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])>0)}})}),_containerDidChange:B.h({inputs:["container"],callback:function(e){var t=this;return Uk(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.updateContainer(e);case 4:return n.next=6,t.containerDidUpdate(e);case 6:case"end":return n.stop()}}),n)})))()}}),updateContainer:function(e){var t=this;return Uk(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.load({isDelayable:!1});case 2:if(!t.isDisposed&&!t.isDisposing){n.next=4;break}return n.abrupt("return");case 4:t.gridViewController.update();case 5:case"end":return n.stop()}}),n)})))()},containerDidUpdate:function(){return Uk(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},measureViewport:function(){this.gridViewController.measureViewport()},isScrolledToInitialPosition:function(){var e=this.gridViewController;if("function"===typeof e.isScrolledToInitialPosition)return e.isScrolledToInitialPosition();var t=e.view;return e.layoutMetrics.initialPosition===Um.c.Bottom?t.height+t.normalizedY>=t.normalizedMaxY:this.__s._$126$isScrolledToInitialPosition.call(this,t)},scrollToInitialPosition:function(){var e=this.gridViewController;if("function"!==typeof e.scrollToInitialPosition){var t=e.view;e.layoutMetrics.initialPosition===Um.c.Bottom?t.scrollTo(0,100):this.__s._$1DT$scrollToInitialPosition.call(this,t)}else e.scrollToInitialPosition()},shouldHideMostProminentDisplayOfMediaWithPK:V.b(),getRectInWindowForPrimaryZoomRectableMedia:function(e){var t,n=this.gridViewController;if("function"===typeof n.getRectInWindowForPrimaryZoomRectableMediaPK)return n.getRectInWindowForPrimaryZoomRectableMediaPK(e.pk);for(var i=n.presenter.views,r=0;r<i.length;r++){var a=i.objectAt(r);if(a.content===e){t=a;break}}return t?t.rect:void 0},__superMap:{_$126$isScrolledToInitialPosition:"isScrolledToInitialPosition",_$1DT$scrollToInitialPosition:"scrollToInitialPosition"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasePhotosGridPageViewController"}}),Hk={gridViewController:$n.a.define(),transitionWillStart:function(e){var t=this.getPath("gridViewController.view.verticalScrollIndicator.element");t&&yl.c(t,"display","none")},transitionDidFinish:function(e){var t=this.getPath("gridViewController.view.verticalScrollIndicator.element");t&&yl.c(t,"display","block"),this.measureViewport()}},Wk=yn.a,$k=BO.extend(wi.a).extend({staticMembers:{existenceDependenciesOnHost:["primaryInteractionMode"],shouldExistInHost:function(e){return e.primaryInteractionMode===Wk.MOUSE},__QUALIFIED_CLASS_NAME__:"FavoriteToggleButtonAdornment"},requiresHostMixins:[KT,fl.a],isOn:V.b(Oi.c("host.media.isFavorite")),isBeingHovered:V.b(),wantsVisibilityInHost:V.b({readOnly:!0,dependencies:["host","host.isBeingHovered","isOn","isBeingHovered"],get:Object.assign((function(){return!!this.host&&(this.getPath("host.isBeingHovered")||this.isOn||this.isBeingHovered)}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])&&(i.internalGetPath(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n]))}})}),invisibleOpacity:0,visibleOpacity:.9,hoverOpacity:1,currentOpacity:gu({readOnly:!0,dependencies:["host","wantsVisibilityInHost","isBeingHovered"],get:Object.assign((function(){return this.host&&this.wantsVisibilityInHost?this.isBeingHovered?this.hoverOpacity:this.visibleOpacity:this.invisibleOpacity}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])?i.internalGet(this,t[2+n])?this.hoverOpacity:this.visibleOpacity:this.invisibleOpacity}}),decideDuration:function(e,t){return this.host?!this.isBeingHovered&&this.isOn&&this.host.hasBeenLaidOutAWhile?200:e>t?0:200:0}}),_wantsPresenceInHost:V.b({readOnly:!0,dependencies:["currentOpacity"],get:Object.assign((function(){return this.currentOpacity>0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])>0}}),didChange:function(e){this.wantsPresenceInHost=e}}),_internalView:V.b({readOnly:!0,strong:!0,dependencies:["wantsPresenceInHost"],get:Object.assign((function(){return this.wantsPresenceInHost?zk.create():null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?zk.create():null}}),downstreamBindings:{isOn:"(owner).isOn"}}),element:Oi.c("_internalView.element"),_maintainOpacity:B.h("element","currentOpacity",(function(e,t){e&&(e.style.opacity=t)})),_circleBackHoveredness:B.h("host","_internalView.isBeingHovered",(function(e,t){this.isBeingHovered=Boolean(e&&t)}))}),zk=Ru.extend(uc.a,{additionalClassNames:F.b(["favorite-adornment"]),staticMembers:{__QUALIFIED_CLASS_NAME__:"FavoriteToggleButton"}}),Kk=yn.a,qk=BO.extend(qO,{staticMembers:{existenceDependenciesOnHost:["media.isFavorite","primaryInteractionMode"],shouldExistInHost:function(e){if(e.primaryInteractionMode!==Kk.TOUCH)return!1;var t=e.media;return!!t&&t.isFavorite},__QUALIFIED_CLASS_NAME__:"FavoriteBadgeAdornment"},requiresHostMixins:[fl.a],classNames:["favorite-adornment","cw-on"]}),Qk=Ik.extend({mixinDependencies:[KT],favoriteToggleButtonAdornment:NO.adornmentProperty($k),favoriteBadgeAdornment:NO.adornmentProperty(qk),mediaCaptionAdornment:NO.adornmentProperty(yk),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPageItemView"}}),Yk={topPadding:V.b({dependencies:["primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?8:this.sizeClass===dn.a.REGULAR?20:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?8:i.internalGet(this,t[1+n])===dn.a.REGULAR?20:0}})})},Zk=TM.extend({shouldHideGlobalProgressBar:V.b(!1),shouldHideSideBar:V.b(!1),shouldHideTabBar:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"NavigationItem"}}),Xk=["","Grid.View.Header.NumberOfSelectedItems.1","Grid.View.Header.NumberOfSelectedItems.2","Grid.View.Header.NumberOfSelectedItems.More"],Jk=Zk.extend({mixinDependencies:[fl.a],leftBarButtonItem:V.b({dependencies:["selectionModeIsActive","primaryInteractionMode","sizeClass"],readOnly:!0,strong:!0,type:Ho.a,get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.selectionModeIsActive,n=this.sizeClass;if(t&&e===yn.a.TOUCH&&n===dn.a.COMPACT)return this.createSelectAllButton()}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[2+n]);if(a&&r===yn.a.TOUCH&&s===dn.a.COMPACT)return this.createSelectAllButton()}})}),rightBarButtonItem:V.b({dependencies:["selectionModeIsActive","isGridEmpty","primaryInteractionMode"],readOnly:!0,strong:!0,type:Ho.a,get:Object.assign((function(){if(this.primaryInteractionMode!==yn.a.MOUSE&&(!this.isGridEmpty||this.selectionModeIsActive))return this._selectButton}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n])!==yn.a.MOUSE&&(!i.internalGet(this,t[1+n])||i.internalGet(this,t[0+n])))return this._selectButton}})}),_selectButton:V.b({readOnly:!0,strong:!0,get:function(){return Ho.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"selectionButtonClassName",attributes:{}}]}}},selectionButtonClassName:V.b()}).create({action:"toggleSelectionMode",selectionButtonClassName:this.bindingFor("selectionButtonClassName"),target:this.viewController,title:this.bindingFor("selectionButtonTitle")})}}),rightBarButtonItems:V.b({dependencies:["additionalRightBarButtonItems","additionalRightBarButtonItems.contentsDidChange","primaryInteractionMode","selectionModeIsActive","sizeClass"],readOnly:!0,strong:!0,type:Wo.b,get:Object.assign((function(){var e=this.additionalRightBarButtonItems,t=this.primaryInteractionMode,n=this.selectionModeIsActive,i=this.sizeClass,r=Wo.b.create(e);return n&&t===yn.a.TOUCH&&i===dn.a.REGULAR&&r.push(this.createSelectAllButton()),r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]),s=i.internalGet(this,t[3+n]),o=i.internalGet(this,t[4+n]),l=Wo.b.create(r);return s&&a===yn.a.TOUCH&&o===dn.a.REGULAR&&l.push(this.createSelectAllButton()),l}})}),createSelectAllButton:function(){return Ho.a.create({action:"toggleSelectAll",target:this,title:this.bindingFor("selectAllButtonTitle")})},selectAllButtonTitle:V.b({dependencies:["areAllItemsSelected"],readOnly:!0,type:String,get:Object.assign((function(){return this.areAllItemsSelected?s.d("GridPage.SelectAllButton.DeselectAll"):s.d("GridPage.SelectAllButton.SelectAll")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("GridPage.SelectAllButton.DeselectAll"):s.d("GridPage.SelectAllButton.SelectAll")}})}),toggleSelectAll:function(){var e=this.areAllItemsSelected,t=this.viewController.gridViewController;e?t.deselectAll():t.selectAll()},title:V.b({readOnly:!0,dependencies:["navTitle","selectionModeIsActive","selectedItemCount"],get:Object.assign((function(){var e=this.selectionModeIsActive,t=this.selectedItemCount;return e?0===t?s.d("Selection.Title.Empty"):Md(Xk,t):this.navTitle}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[2+n]);return r?0===a?s.d("Selection.Title.Empty"):Md(Xk,a):i.internalGet(this,t[0+n])}})}),selectionButtonClassName:V.b({readOnly:!0,strong:!0,dependencies:["selectionModeIsActive"],get:Object.assign((function(){return this.selectionModeIsActive?"primary":void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"primary":void 0}})}),selectionButtonTitle:V.b({readOnly:!0,dependencies:["selectionModeIsActive"],get:Object.assign((function(){return this.selectionModeIsActive?s.d("Button.Cancel"):s.d("Button.Select")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("Button.Cancel"):s.d("Button.Select")}})}),shouldHideTabBar:V.b({dependencies:["selectionModeIsActive"],writeDependencies:[],get:Object.assign((function(e){return!!this.selectionModeIsActive||e}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[0+n])||e}}),set:Tl.a}),additionalRightBarButtonItems:V.b(),areAllItemsSelected:V.b(),isGridEmpty:V.b(),navTitle:V.b(),selectedItemCount:V.b(),selectionModeIsActive:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPageNavItem"}}),eB=In.a.extend(Kp.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"escapedTitle",attributes:{escape:"false"}}],classes:["grid-title"]},__QUALIFIED_CLASS_NAME__:"GridHeaderTitle"},init:function(){var e=this,t=arguments;e.__s._$5c$init.apply(e,t),this.addGestureRecognizer(Zp.b.create({delegate:this,event:"editTitle"}))},title:V.b(),container:V.b(),escapedTitle:V.b({readOnly:!0,dependencies:["title","container"],get:Object.assign((function(){var e=this.title,t=this.container;if(e&&t){var n=t.isMomentsAlbum,i=t.isAllPhotosAlbum;return n||i?e:d_.b(e)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a){var s=a.isMomentsAlbum,o=a.isAllPhotosAlbum;return s||o?r:d_.b(r)}}})}),editTitle:function(){var e=this.container,t=e.isFolder,n=e.isNormalAlbum;if(!e.isVirtualFolder&&(t||n)){var i=$u.a(this.element.parentElement).width,r=$u.a(this.element).width,a=Math.max(Math.min(i,r),250),s=nf;s.action="editAlbumName",s.model=this.container,s.value=this.title,s.insert(this.element,this),yl.c(s.element).set("width",a).set("text-align","left"),this._toggleParentOverflow(!0)}},editAlbumName:function(){return this._toggleParentOverflow(!1),!1},_toggleParentOverflow:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];yl.c(this.element.parentElement,{overflow:e?"visible":"hidden"})},__superMap:{_$5c$init:"init"}});function tB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nB=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"canvas",name:"primaryCanvas",classes:["primary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"primaryImageHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"}}},{type:"ELEMENT",tagname:"canvas",name:"secondaryCanvas",classes:["secondary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryWidth",attributes:{},unit:"px",property:"width"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryTop",attributes:{},unit:"px",property:"top"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"secondaryLeft",attributes:{},unit:"px",property:"left"}}},{type:"ELEMENT",tagname:"canvas",name:"tertiaryCanvas",classes:["tertiary-img"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripHeight",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"tertiaryWidth",attributes:{},unit:"px",property:"width"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"tertiaryLeft",attributes:{},unit:"px",property:"left"}}}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:"px",property:"height"}},classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"is-hidden",attributes:{}}]}},DEFAULT_THUMB_ASPECT_RATIO:35/26,PREFERRED_SECONDARY_WIDTH_RATIO:.9,PREFERRED_TERTIARY_WIDTH_RATIO:.76,STRIP_SPACING:1,__QUALIFIED_CLASS_NAME__:"PhotoStack"},width:V.b(36),height:V.b({readOnly:!0,dependencies:["primaryImageHeight","stripHeight"],get:Object.assign((function(){return this.primaryImageHeight+2*this.stripHeight+2}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+2*i.internalGet(this,t[1+n])+2}})}),isHidden:V.b({readOnly:!0,dependencies:["primaryMedia"],get:Object.assign((function(){return!this.primaryMedia}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),stripHeight:V.b(1),dpr:V.b({readOnly:!0,dependencies:p.a.sharedInstance.bindingFor("devicePixelRatio"),get:function(){return Math.ceil(p.a.sharedInstance.devicePixelRatio)}}),backingWidth:V.b({readOnly:!0,dependencies:["width","dpr"],get:Object.assign((function(){return this.width*this.dpr}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),primaryImageHeight:V.b({readOnly:!0,dependencies:["width"],get:Object.assign((function(){return Math.round(this.width/(35/26))}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/(35/26))}})}),backingPrimaryImageHeight:V.b({readOnly:!0,dependencies:["primaryImageHeight","dpr"],get:Object.assign((function(){return this.primaryImageHeight*this.dpr}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),backingStripHeight:V.b({readOnly:!0,dependencies:["dpr","stripHeight"],get:Object.assign((function(){return this.dpr*this.stripHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])*i.internalGet(this,t[1+n])}})}),secondaryWidth:V.b({readOnly:!0,dependencies:["width"],get:Object.assign((function(){return sB(this.width,.9)}),{__CW__getter:function(e,t,n,i){return sB(i.internalGet(this,t[0+n]),.9)}})}),secondaryTop:V.b({readOnly:!0,dependencies:["stripHeight"],get:Object.assign((function(){return this.stripHeight+1}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+1}})}),secondaryLeft:V.b({readOnly:!0,dependencies:["secondaryWidth"],get:Object.assign((function(){return Math.round((this.width-this.secondaryWidth)/2)}),{__CW__getter:function(e,t,n,i){return Math.round((this.width-i.internalGet(this,t[0+n]))/2)}})}),tertiaryWidth:V.b({readOnly:!0,dependencies:["width"],get:Object.assign((function(){return sB(this.width,.76)}),{__CW__getter:function(e,t,n,i){return sB(i.internalGet(this,t[0+n]),.76)}})}),tertiaryLeft:V.b({readOnly:!0,dependencies:["tertiaryWidth"],get:Object.assign((function(){return Math.round((this.width-this.tertiaryWidth)/2)}),{__CW__getter:function(e,t,n,i){return Math.round((this.width-i.internalGet(this,t[0+n]))/2)}})}),primaryMedia:V.b({strong:!0}),primaryIDL:aB("width","primaryImageHeight","primaryMedia"),_drawPrimaryDerivative:B.h("backingWidth","backingPrimaryImageHeight","primaryIDL.derivative","primaryCanvas",iB),secondaryMedia:V.b({strong:!0}),secondaryIDL:aB("width","stripHeight","secondaryMedia"),_drawSecondaryDerivative:B.h("backingWidth","backingStripHeight","secondaryIDL.derivative","secondaryCanvas",rB),tertiaryMedia:V.b({strong:!0}),tertiaryIDL:aB("width","stripHeight","tertiaryMedia"),_drawTertiaryDerivative:B.h("backingWidth","backingStripHeight","tertiaryIDL.derivative","tertiaryCanvas",rB),mediaProvider:V.b(),_calculateLayoutOnMediaProviderChange:B.h({inputs:["mediaProvider"],callback:function(){var e=this.mediaProvider;if(e){var t=this._updateStack(e);if(t.length){var n=t.toArray(),i=n[0],r=n[1],a=n[2];this.primaryMedia=i,this.secondaryMedia=r,this.tertiaryMedia=a}}}}),_updateStack:function(e){for(var t=["primaryMedia","secondaryMedia","tertiaryMedia"],n=_P.create(),i=0;i<t.length;i++){var r=this[t[i]];if(r){var a=e.encode(r);e.encodedContains(a)?n.push(r):this[t[i]]=void 0}}for(var s,o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return tB(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tB(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(s=o()).done;){var l=s.value;if(n.length>=3)break;l&&l.renderableImageDerivativeInfos&&l.renderableImageDerivativeInfos.length&&n.push(l)}return n}});function iB(e,t,n,i){var r=i.getContext("2d");if(i.width!==e||i.height!==t?(i.width=e,i.height=t):r.clearRect(0,0,e,t),n){var a=ef.c(n.physicalWidth,n.physicalHeight,e,t);n.drawIntoContextUsingCustomDrawImage(r,tf.b,e/2-a.width/2,t/2-a.height/2,a.width,a.height)}}function rB(e,t,n,i){if(iB(e,t,n,i),n){var r=i.getContext("2d");r.fillStyle="rgba(0, 0, 0, 0.15)",r.fillRect(0,0,e,t)}}function aB(e,t,n){return V.b({strong:!0,defaultValue:k.c(Xp.a,{shouldCorrectForDevicePixelRatio:!0}),downstreamBindings:{width:"(owner)."+e,height:"(owner)."+t,media:"(owner)."+n}})}function sB(e,t){if(t<=0||t>=1)return e;for(var n=Math.floor(e*t);(e-n)%2>0;)--n;return n}var oB=Ho.a.extend({action:"recoverMedia",title:s.d("RecentlyDeleted.Action.Recover"),isDisabled:V.b({readOnly:!0,type:"boolean",dependencies:["sparseSelection.length"],get:function(){var e=this.sparseSelection;return!(e&&e.length>0)}}),sparseSelection:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecoverButton"}}),lB=Ho.a.extend({action:"permanentlyDeleteMedia",isDisabled:V.b({readOnly:!0,type:"boolean",dependencies:["medias.length"],get:function(){var e=this.medias;return!(e&&e.length>0)}}),title:V.b({readOnly:!0,type:"string",dependencies:["sparseSelection.length"],get:function(){var e=0,t=this.sparseSelection;return t&&t.length&&(e=t.length),Md(["RecentlyDeleted.Action.Delete.0","RecentlyDeleted.Action.Delete.1","RecentlyDeleted.Action.Delete.2","RecentlyDeleted.Action.Delete.More"],e)}}),sparseSelection:V.b(),medias:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"DeleteAllButton"}}),cB=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"recoverButton"},{type:"VIEWOUTLET",tagname:"view",name:"deleteButton"}]}},__QUALIFIED_CLASS_NAME__:"RecentlyDeletedActionButtonsView"},recoverButton:V.b({readOnly:!0,defaultValue:k.c(oB),downstreamBindings:{sparseSelection:"(owner).sparseSelection"}}),deleteButton:V.b({readOnly:!0,defaultValue:k.c(lB),downstreamBindings:{sparseSelection:"(owner).sparseSelection",medias:"(owner).medias"}}),sparseSelection:V.b(),medias:V.b()});function uB(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function dB(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){uB(a,i,r,s,o,"next",e)}function o(e){uB(a,i,r,s,o,"throw",e)}s(void 0)}))}}var hB=3;function pB(e){for(var t=e.length,n=t-1,i=null,r=null,a=0;a<t;a++){var s=e.objectAt(a),o=e.objectAt(n-a);if(null===i&&"item"===s.cellType&&(i=s),null===r&&"item"===o.cellType&&(r=o),null!==i&&null!==r)break}return{firstVisibleCell:i,lastVisibleCell:r}}function fB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"date",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e&&e.getPath("value."+n)||t&&t.bucketStart+i;return isNaN(r)?void 0:new Date(r)}function gB(e,t,n,i){if(!n)return u.b.warn("No histogram available for dateRangeForVisibleItems."),{};if(!e||!t||!e.handle||!t.handle)return u.b.warn("Invalid cells provided to dateRangeForVisibleItems."),{};for(var r,a,s=n.buckets,o=n.bucketWidth,l=e.handle.position,c=t.handle.position,d=0,h=s.length;d<h;d++){var p=s[d],f=d===h-1,g=p.startIndex+p.count;if(r||(f||l>=p.startIndex&&l<g)&&(r=fB(e,p,i)),f||c>p.startIndex&&c<=g){a=fB(t,p,i,o);break}}return a=a||r,{startDate:r=r||a,endDate:a}}function mB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DateRange.Unstyled.";if(!e||!t||isNaN(e.getTime())||isNaN(t.getTime())){u.b.warn("Invalid dates for date range string.");var i=G.a.getPath("application.feedbackService");return i&&i.report&&hB-- >0&&i.reportError({errorType:"invalidDatesForDateRangeStringNoDateRangeDisplayed"}),""}var r=e<t?e:t,a=e<t?t:e,o=r.getMonth(),l=r.getFullYear(),c=a.getMonth(),d=a.getFullYear(),h=n;return h+=l===d?o===c?"SameMonthSameYear":"DiffMonthSameYear":"DiffYear",s.d(h,{startDate:r,endDate:a,startDateFormatter:Hd,endDateFormatter:Hd})}function _B(e,t,n){return vB.apply(this,arguments)}function vB(){return(vB=dB(regeneratorRuntime.mark((function e(t,n,i){var r,a,s,o,l,c,d,h,p,f,g,m,_,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>3&&void 0!==v[3]?v[3]:"date",a=v.length>4?v[4]:void 0,s=t.container,o=t.layoutController,s&&o){e.next=6;break}return u.b.warn("Visible date range can only run on grid controllers."),e.abrupt("return");case 6:return e.next=8,s.loadHistogram();case 8:if((l=s.histogram)&&o&&!o.isDisposing&&!o.isDisposed){e.next=11;break}return e.abrupt("return");case 11:return n&&i&&n.handle&&i.handle?(c=n,d=i):(h=pB(o.visibleCells),p=h.firstVisibleCell,f=h.lastVisibleCell,c=p,d=f),g=gB(c,d,l,r),m=g.startDate,_=g.endDate,e.abrupt("return",m&&_?mB(m,_,a):"");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bB=["","Grid.View.Header.Item.Count.1","Grid.View.Header.Item.Count.2","Grid.View.Header.Item.Count.More"],yB=["","Grid.View.Header.Album.Count.1","Grid.View.Header.Album.Count.2","Grid.View.Header.Album.Count.More"],wB=["","Grid.View.Header.Folder.Count.1","Grid.View.Header.Folder.Count.2","Grid.View.Header.Folder.Count.More"],IB={container:V.b(),containerItemCountString:V.b({readOnly:!0,dependencies:["container.medias.length"],get:function(){var e=this.container;if(e&&!e.isFolder&&e.medias&&0!==e.medias.length)return Md(bB,e.medias.length)}}),containerDateRangeStringAsText:V.b({readOnly:!0,dependencies:["containerDateRangeStrings"],get:Object.assign((function(){var e=this.containerDateRangeStrings;return e?e.text:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.text:""}})}),containerDateRangeStringAsHTML:V.b({readOnly:!0,dependencies:["containerDateRangeStrings"],get:Object.assign((function(){var e=this.containerDateRangeStrings;return e?e.html:""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.html:""}})}),containerDateRangeStrings:V.b({readOnly:!0,dependencies:["container","container.firstMediaByDate","container.lastMediaByDate","container.medias.length"],get:Object.assign((function(){var e=this.container;if(e&&!e.isFolder){var t=e.medias,n=e.firstMediaByDate,i=e.lastMediaByDate,r=t.length,a=this._cachedMediasLength!==r;if(this._cachedMediasLength=r,0!==r&&(!a&&n&&i||e.loadFirstAndLastMediasByDate(void 0,a),n&&n.date&&i&&i.date)){var s=SB(n.date),o=SB(i.date);return{html:mB(s,o,"DateRange.Styled."),text:mB(s,o,"DateRange.Unstyled.")}}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r&&!r.isFolder){var a=r.medias,s=r.firstMediaByDate,o=r.lastMediaByDate,l=a.length,c=this._cachedMediasLength!==l;if(this._cachedMediasLength=l,0!==l&&(!c&&s&&o||r.loadFirstAndLastMediasByDate(void 0,c),s&&s.date&&o&&o.date)){var u=SB(s.date),d=SB(o.date);return{html:mB(u,d,"DateRange.Styled."),text:mB(u,d,"DateRange.Unstyled.")}}}}})}),_cachedMediasLength:void 0,containerChildCountString:V.b({readOnly:!0,dependencies:["container","container.containers","container.containers.length"],get:Object.assign((function(){var e=this.container;if(e&&e.isFolder){var t=e.containers,n=void 0===t?[]:t,i=n.length;if(i){if(i<=60){var r=0,a=0;if(n.forEach((function(e){e&&(r+=e.isFolder?0:1,a+=e.isFolder?1:0)})),r+a===i)return r&&!a?Md(yB,r):!r&&a?Md(wB,a):s.d("Grid.View.Header.Album.Folders.Count",{albumCount:Md(yB,r),folderCount:Md(wB,a)})}return Md(bB,i)}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r&&r.isFolder){var a=r.containers,o=void 0===a?[]:a,l=o.length;if(l){if(l<=60){var c=0,u=0;if(o.forEach((function(e){e&&(c+=e.isFolder?0:1,u+=e.isFolder?1:0)})),c+u===l)return c&&!u?Md(yB,c):!c&&u?Md(wB,u):s.d("Grid.View.Header.Album.Folders.Count",{albumCount:Md(yB,c),folderCount:Md(wB,u)})}return Md(bB,l)}}}})})};function SB(e){return e instanceof Date?e:new Date(e)}function CB(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var EB={mixinDependencies:[fl.a],visibleDateRange:V.b(),_visibleDateRangeObserver:B.h({inputs:["isAttached","scrollMinY","container","gridViewController.collection.contentsDidChange","primaryInteractionMode","sizeClass"],callback:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(i=n.container,r=n.gridViewController,a=n._shouldCalculateVisibleDateRange,i){t.next=5;break}return t.abrupt("return");case 5:if(a){t.next=7;break}return t.abrupt("return");case 7:if(s=r.layoutController.visibleCells,o=pB(s),l=o.firstVisibleCell,c=o.lastVisibleCell,u=i.isAllPhotosAlbum?"primaryAsset.addedDate":"date",l===n._previousFirstVisibleCell||c===n._previousLastVisibleCell){t.next=21;break}return d="DateRange.Styled.",n.primaryInteractionMode===yn.a.TOUCH&&(d=n.sizeClass===dn.a.COMPACT?"DateRange.Unstyled.Short.":"DateRange.Unstyled.Medium."),t.next=15,_B(r,l,c,u,d);case 15:if(h=t.sent,!n.isDisposing&&!n.isDisposed){t.next=18;break}return t.abrupt("return");case 18:n.visibleDateRange=h,n._previousFirstVisibleCell=l,n._previousLastVisibleCell=c;case 21:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){CB(a,i,r,s,o,"next",e)}function o(e){CB(a,i,r,s,o,"throw",e)}s(void 0)}))})()}}),_previousFirstVisibleCell:null,_previousLastVisibleCell:null,_shouldCalculateVisibleDateRange:V.b({readOnly:!0,dependencies:["container"],get:Object.assign((function(){var e=this.container;if(!e)return!1;if(e.isVirtualFolder)return!1;var t=e.recordName,n=e.constructor.PredefinedName;return[n.MOMENTS,n.PHOTOS].includes(t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return!1;if(r.isVirtualFolder)return!1;var a=r.recordName,s=r.constructor.PredefinedName;return[s.MOMENTS,s.PHOTOS].includes(a)}})})},AB=["","Grid.View.Header.NumberOfSelectedItems.1","Grid.View.Header.NumberOfSelectedItems.2","Grid.View.Header.NumberOfSelectedItems.More"],OB=In.a.extend(IB,EB).extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"gridTitleView"}],classes:["grid-title-wrapper"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["spinner-view-in-header"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"selectionCount",attributes:{}}],classes:["selection-count"]},{type:"VIEWOUTLET",tagname:"view",name:"photoStack"}],classes:["selection-info",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isSelectionCountVisible",truevalue:"",falsevalue:"cw-hidden",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"recentlyDeletedActions"}],classes:["top-row"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"gridDescription",attributes:{escape:"false"}}],classes:["grid-description"]},{type:"VIEWOUTLET",tagname:"view",name:"deselectAll"}],classes:["bottom-row"]}]}},__QUALIFIED_CLASS_NAME__:"GridHeaderView"},additionalClassNames:F.b(["grid-header-view"]),gridTitleView:V.b({readOnly:!0,defaultValue:k.c(eB),downstreamBindings:{title:"(owner).gridTitle",container:"(owner).container"}}),gridTitle:V.b({readOnly:!0,dependencies:["container","visibleDateRange","container.name","container.type"],get:Object.assign((function(){var e=this.container,t=this.visibleDateRange;if(e){var n=e.isMomentsAlbum,i=e.isAllPhotosAlbum,r=e.isPredefinedSmartAlbum,a=e.recordName,o=e.name;return n||i?t:r?s.d("Container.Title."+a):o}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r){var o=r.isMomentsAlbum,l=r.isAllPhotosAlbum,c=r.isPredefinedSmartAlbum,u=r.recordName,d=r.name;return o||l?a:c?s.d("Container.Title."+u):d}}})}),gridDescription:V.b({readOnly:!0,dependencies:["container","containerItemCountString","containerDateRangeStringAsHTML","containerChildCountString","isGridEmpty"],get:Object.assign((function(){var e=this.container,t=this.isGridEmpty;if(e&&!t){if(e.isRecentlyDeletedAlbum){var n=this.containerItemCountString,i=s.d("Grid.View.Header.Recently.Deleted.Note");return n?s.d("Grid.View.Header.Recently.Deleted.Description",{itemCount:n,note:i}):i}return e.isMomentsAlbum||e.isAllPhotosAlbum?this.containerItemCountString:e.isFolder?this.containerChildCountString:this.containerDateRangeStringAsHTML?s.d("Grid.View.Header.Album.Description",{monthYearRange:this.containerDateRangeStringAsHTML,itemCount:this.containerItemCountString}):void 0}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[4+n]);if(r&&!a){if(r.isRecentlyDeletedAlbum){var o=i.internalGet(this,t[1+n]),l=s.d("Grid.View.Header.Recently.Deleted.Note");return o?s.d("Grid.View.Header.Recently.Deleted.Description",{itemCount:o,note:l}):l}return r.isMomentsAlbum||r.isAllPhotosAlbum?i.internalGet(this,t[1+n]):r.isFolder?i.internalGet(this,t[3+n]):i.internalGet(this,t[2+n])?s.d("Grid.View.Header.Album.Description",{monthYearRange:i.internalGet(this,t[2+n]),itemCount:i.internalGet(this,t[1+n])}):void 0}}})}),selectionCount:V.b({readOnly:!0,dependencies:["sparseSelection.length","isSelectionCountVisible"],get:Object.assign((function(){if(this.isSelectionCountVisible)return Md(AB,this.sparseSelection.length)}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[1+n]))return Md(AB,i.internalGetPath(this,t[0+n]))}})}),isSelectionCountVisible:V.b({readOnly:!0,dependencies:["sparseSelection.length","container"],get:Object.assign((function(){var e=this.sparseSelection,t=this.container;return!(!e||t&&t.isRecentlyDeletedAlbum)&&TB(e.length)}),{__CW__getter:function(e,t,n,i){var r=this.sparseSelection,a=i.internalGet(this,t[1+n]);return!(!r||a&&a.isRecentlyDeletedAlbum)&&TB(r.length)}})}),selectionLimit:V.b($l.selectionLimit),photoStack:V.b({readOnly:!0,dependencies:["isSelectionCountVisible"],get:Object.assign((function(){if(this.isSelectionCountVisible)return this._photoStack}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._photoStack}})}),_photoStack:V.b({readOnly:!0,get:function(){return nB.create({mediaProvider:this.bindingFor("sparseSelection.selection")})}}),deselectAll:V.b({readOnly:!0,dependencies:["sparseSelection.length"],get:Object.assign((function(){if(this.sparseSelection&&TB(this.sparseSelection.length))return this._deselectAll}),{__CW__getter:function(e,t,n,i){if(this.sparseSelection&&TB(i.internalGetPath(this,t[0+n])))return this._deselectAll}})}),_deselectAll:V.b({readOnly:!0,get:function(){return Ho.a.extend({additionalClassNames:F.b(["deselect-all"]),action:"gridHeaderDeselectAll",title:s.d("Grid.View.Header.Deselect.All.Title"),tooltip:s.d("Grid.View.Header.Deselect.All.Tooltip")}).create()}}),recentlyDeletedActions:V.b({readOnly:!0,dependencies:["container","isGridEmpty"],get:Object.assign((function(){var e=this.container,t=this.isGridEmpty;if(e&&!t&&e.isRecentlyDeletedAlbum)return this._recentlyDeletedActions}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&!a&&r.isRecentlyDeletedAlbum)return this._recentlyDeletedActions}})}),_recentlyDeletedActions:V.b({readOnly:!0,defaultValue:k.c(cB),get:function(){return cB.create({sparseSelection:this.bindingFor("sparseSelection"),medias:this.bindingFor("container.medias")})}}),container:V.b(),gridViewController:V.b(),isGridEmpty:V.b(),scrollMinY:V.b(),sparseSelection:V.b(),shouldShowSpinnerInHeader:V.b(),spinnerView:V.b({readOnly:!0,dependencies:["shouldShowSpinnerInHeader"],get:Object.assign((function(){if(this.shouldShowSpinnerInHeader)return this._spinnerView}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._spinnerView}})}),_spinnerView:k.c(Jc.a,{size:25,color:"rgba(120, 120, 120, 1)"})});function TB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=t}var MB=qA.extend(wi.a).extend({mixinDependencies:[fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"headerView"},{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"headerView",truevalue:"has-grid-header",attributes:{}}]}},__QUALIFIED_CLASS_NAME__:"PhotosGridPageView"},additionalClassNames:F.b(["photos-grid-page"]),headerView:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,strong:!0,type:OB,get:Object.assign((function(){if(this.primaryInteractionMode===yn.a.MOUSE)return OB.create({container:this.bindingFor("container"),gridViewController:this.bindingFor("gridViewController"),isGridEmpty:this.bindingFor("isGridEmpty"),scrollMinY:this.bindingFor("scrollMinY"),sparseSelection:this.bindingFor("sparseSelection"),batchActionProgress:this.bindingFor("batchActionProgress"),shouldShowSpinnerInHeader:this.bindingFor("shouldShowSpinnerInHeader")})}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])===yn.a.MOUSE)return OB.create({container:this.bindingFor("container"),gridViewController:this.bindingFor("gridViewController"),isGridEmpty:this.bindingFor("isGridEmpty"),scrollMinY:this.bindingFor("scrollMinY"),sparseSelection:this.bindingFor("sparseSelection"),batchActionProgress:this.bindingFor("batchActionProgress"),shouldShowSpinnerInHeader:this.bindingFor("shouldShowSpinnerInHeader")})}})}),toolbarView:V.b({dependencies:["isToolbarVisible"],readOnly:!0,strong:!0,type:VM,get:Object.assign((function(){if(this.isToolbarVisible)return this._cachedTouchToolbarView=this._cachedTouchToolbarView||VM.extend(Pl.a).create({additionalClassNames:["fixed-bottom"],items:this.bindingFor("toolbarButtons")}),this._cachedTouchToolbarView}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._cachedTouchToolbarView=this._cachedTouchToolbarView||VM.extend(Pl.a).create({additionalClassNames:["fixed-bottom"],items:this.bindingFor("toolbarButtons")}),this._cachedTouchToolbarView}})}),_cachedTouchToolbarView:V.b({strong:!0,type:VM}),_remeasureWhenAppropriate:B.h({inputs:["isToolbarVisible"],callback:function(e){this.element.classList.toggle("has-bottom-toolbar",e),this.isAttached&&this.viewController.measureViewport()}}),batchActionProgress:V.b(),container:V.b(),gridViewController:V.b(),isToolbarVisible:V.b(),scrollMinY:V.b(),shouldShowSpinnerInHeader:V.b(),sparseSelection:V.b(),toolbarButtons:V.b()}),DB={name:"trash",svgPath:"M 89.1602 3.27148 L 92.5293 -67.7246 L 98.3887 -67.7246 C 100.391 -67.7246 102.002 -69.4336 102.002 -71.4355 C 102.002 -73.4375 100.391 -75.0977 98.3887 -75.0977 L 76.0742 -75.0977 L 76.0742 -82.4219 C 76.0742 -89.4531 71.3379 -93.9453 63.8184 -93.9453 L 45.5566 -93.9453 C 38.0371 -93.9453 33.3496 -89.4531 33.3496 -82.4219 L 33.3496 -75.0977 L 11.084 -75.0977 C 9.13086 -75.0977 7.4707 -73.3887 7.4707 -71.4355 C 7.4707 -69.4336 9.13086 -67.7246 11.084 -67.7246 L 16.9922 -67.7246 L 20.3613 3.32031 C 20.7031 10.3027 25.293 14.7949 32.373 14.7949 L 77.1484 14.7949 C 84.1309 14.7949 88.8184 10.2539 89.1602 3.27148 Z M 41.1621 -81.9336 C 41.1621 -84.7168 43.1641 -86.6699 46.1426 -86.6699 L 63.2812 -86.6699 C 66.2598 -86.6699 68.3105 -84.7168 68.3105 -81.9336 L 68.3105 -75.0977 L 41.1621 -75.0977 Z M 33.0566 7.42188 C 30.2734 7.42188 28.1738 5.32227 28.0273 2.44141 L 24.6094 -67.7246 L 84.7168 -67.7246 L 81.4941 2.44141 C 81.3477 5.37109 79.2969 7.42188 76.3672 7.42188 Z M 69.2383 -1.12305 C 70.8496 -1.12305 72.0215 -2.44141 72.0703 -4.29688 L 73.5352 -55.5176 C 73.584 -57.3242 72.3633 -58.6914 70.7031 -58.6914 C 69.1895 -58.6914 67.9199 -57.2754 67.8711 -55.5176 L 66.4062 -4.3457 C 66.3574 -2.53906 67.5781 -1.12305 69.2383 -1.12305 Z M 40.2832 -1.12305 C 41.9434 -1.12305 43.1641 -2.53906 43.1152 -4.3457 L 41.6016 -55.5176 C 41.5527 -57.2754 40.2832 -58.6914 38.7695 -58.6914 C 37.1094 -58.6914 35.8887 -57.3242 35.9375 -55.5176 L 37.4023 -4.29688 C 37.4512 -2.44141 38.623 -1.12305 40.2832 -1.12305 Z M 54.7363 -1.12305 C 56.3477 -1.12305 57.7148 -2.53906 57.7148 -4.29688 L 57.7148 -55.5176 C 57.7148 -57.2754 56.3477 -58.6914 54.7363 -58.6914 C 53.1738 -58.6914 51.8066 -57.2754 51.8066 -55.5176 L 51.8066 -4.29688 C 51.8066 -2.53906 53.1738 -1.12305 54.7363 -1.12305 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:51.5870507812499,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 94.53125 117.4306640625",width:94.53125,height:117.4306640625,translateX:-7.4706884765626,translateY:93.9453125,baseline:93.9453125,capline:23.4853515625}},PB=Ho.a.extend(DM,{additionalClassNames:F.b(["delete-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return DB}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"DeleteButton"}}),LB={name:"heart",svgPath:"M 12.0605 -49.0723 C 12.0605 -28.2715 29.4922 -7.8125 57.0312 9.76562 C 58.0566 10.4004 59.5215 11.084 60.5469 11.084 C 61.5723 11.084 63.0371 10.4004 64.1113 9.76562 C 91.6016 -7.8125 109.033 -28.2715 109.033 -49.0723 C 109.033 -66.3574 97.168 -78.5645 81.3477 -78.5645 C 72.3145 -78.5645 64.9902 -74.2676 60.5469 -67.6758 C 56.2012 -74.2188 48.7793 -78.5645 39.7461 -78.5645 C 23.9258 -78.5645 12.0605 -66.3574 12.0605 -49.0723 Z M 19.9219 -49.0723 C 19.9219 -62.0605 28.3203 -70.7031 39.6484 -70.7031 C 48.8281 -70.7031 54.1016 -64.9902 57.2266 -60.1074 C 58.5449 -58.1543 59.375 -57.6172 60.5469 -57.6172 C 61.7188 -57.6172 62.4512 -58.2031 63.8672 -60.1074 C 67.2363 -64.8926 72.3145 -70.7031 81.4453 -70.7031 C 92.7734 -70.7031 101.172 -62.0605 101.172 -49.0723 C 101.172 -30.9082 81.9824 -11.3281 61.5723 2.24609 C 61.084 2.58789 60.7422 2.83203 60.5469 2.83203 C 60.3516 2.83203 60.0098 2.58789 59.5703 2.24609 C 39.1113 -11.3281 19.9219 -30.9082 19.9219 -49.0723 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:45.776562499999955,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 96.972412109375 92.6279296875",width:96.972412109375,height:92.6279296875,translateX:-12.060595703125045,translateY:81.5439453125,baseline:81.5439453125,capline:11.083984375}},RB={name:"heart.fill",svgPath:"M 60.5469 11.084 C 61.5723 11.084 63.0371 10.4004 64.1113 9.76562 C 91.6016 -7.8125 109.033 -28.2715 109.033 -49.0723 C 109.033 -66.3574 97.168 -78.5645 81.8359 -78.5645 C 72.3145 -78.5645 64.9902 -73.291 60.5469 -65.2344 C 56.2012 -73.2422 48.7793 -78.5645 39.2578 -78.5645 C 23.9258 -78.5645 12.0605 -66.3574 12.0605 -49.0723 C 12.0605 -28.2715 29.4922 -7.8125 57.0312 9.76562 C 58.0566 10.4004 59.5215 11.084 60.5469 11.084 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:45.776562499999955,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 96.972412109375 92.6279296875",width:96.972412109375,height:92.6279296875,translateX:-12.060595703125045,translateY:81.5439453125,baseline:81.5439453125,capline:11.083984375}},xB=Ho.a.extend(DM,{additionalClassNames:F.b(["favorite-button"]),symbolMetadata:V.b({readOnly:!0,strong:!0,dependencies:["isFilled"],get:Object.assign((function(){return this.isFilled?RB:LB}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?RB:LB}})}),isFilled:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"FavoriteButton"}}),NB={name:"square.and.arrow.up",svgPath:"M 55.8105 -21.9727 C 57.9102 -21.9727 59.668 -23.7305 59.668 -25.7812 L 59.668 -75.9277 L 59.375 -83.252 L 62.6465 -79.7852 L 70.0684 -71.875 C 70.752 -71.0938 71.7773 -70.7031 72.7051 -70.7031 C 74.707 -70.7031 76.2695 -72.168 76.2695 -74.1699 C 76.2695 -75.1953 75.8301 -75.9766 75.0977 -76.709 L 58.5938 -92.627 C 57.6172 -93.6035 56.7871 -93.9453 55.8105 -93.9453 C 54.7852 -93.9453 53.9551 -93.6035 52.9785 -92.627 L 36.4746 -76.709 C 35.7422 -75.9766 35.3027 -75.1953 35.3027 -74.1699 C 35.3027 -72.168 36.7676 -70.7031 38.8184 -70.7031 C 39.7461 -70.7031 40.8203 -71.0938 41.5039 -71.875 L 48.9258 -79.7852 L 52.1973 -83.252 L 51.9043 -75.9277 L 51.9043 -25.7812 C 51.9043 -23.7305 53.7109 -21.9727 55.8105 -21.9727 Z M 27.7832 16.2598 L 83.7891 16.2598 C 93.9941 16.2598 99.1211 11.1816 99.1211 1.12305 L 99.1211 -47.6074 C 99.1211 -57.666 93.9941 -62.7441 83.7891 -62.7441 L 70.166 -62.7441 L 70.166 -54.8828 L 83.6426 -54.8828 C 88.4766 -54.8828 91.2598 -52.2461 91.2598 -47.168 L 91.2598 0.683594 C 91.2598 5.76172 88.4766 8.39844 83.6426 8.39844 L 27.8809 8.39844 C 22.998 8.39844 20.3125 5.76172 20.3125 0.683594 L 20.3125 -47.168 C 20.3125 -52.2461 22.998 -54.8828 27.8809 -54.8828 L 41.4062 -54.8828 L 41.4062 -62.7441 L 27.7832 -62.7441 C 17.5781 -62.7441 12.4512 -57.666 12.4512 -47.6074 L 12.4512 1.12305 C 12.4512 11.1816 17.5781 16.2598 27.7832 16.2598 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:50.537172851562445,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 86.669921875 117.4306640625",width:86.669921875,height:117.4306640625,translateX:-12.451230468750055,translateY:93.9453125,baseline:93.9453125,capline:23.4853515625}},FB=Ho.a.extend(DM,{additionalClassNames:F.b(["sharrow-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return NB}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareButton"}}),VB={name:"ellipsis.circle",svgPath:"M 58.5449 14.5508 C 85.791 14.5508 108.35 -8.00781 108.35 -35.2539 C 108.35 -62.4512 85.7422 -85.0586 58.4961 -85.0586 C 31.2988 -85.0586 8.74023 -62.4512 8.74023 -35.2539 C 8.74023 -8.00781 31.3477 14.5508 58.5449 14.5508 Z M 58.5449 6.25 C 35.498 6.25 17.0898 -12.207 17.0898 -35.2539 C 17.0898 -58.252 35.4492 -76.7578 58.4961 -76.7578 C 81.543 -76.7578 100 -58.252 100.049 -35.2539 C 100.098 -12.207 81.5918 6.25 58.5449 6.25 Z M 42.4316 -35.2051 C 42.4316 -38.7695 39.4043 -41.7969 35.8398 -41.7969 C 32.2266 -41.7969 29.248 -38.7695 29.248 -35.2051 C 29.248 -31.6406 32.2754 -28.6133 35.8398 -28.6133 C 39.4043 -28.6133 42.4316 -31.6406 42.4316 -35.2051 Z M 65.0879 -35.2051 C 65.0879 -38.7695 62.0605 -41.7969 58.4961 -41.7969 C 54.9316 -41.7969 51.9043 -38.7695 51.9043 -35.2051 C 51.9043 -31.6406 54.9805 -28.6133 58.4961 -28.6133 C 62.0605 -28.6133 65.0879 -31.6406 65.0879 -35.2051 Z M 87.7441 -35.2051 C 87.7441 -38.7695 84.7656 -41.7969 81.1523 -41.7969 C 77.5879 -41.7969 74.5605 -38.7695 74.5605 -35.2051 C 74.5605 -31.6406 77.6367 -28.6133 81.1523 -28.6133 C 84.7656 -28.6133 87.7441 -31.6406 87.7441 -35.2051 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:47.778210449218705,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6572265625",width:99.6097412109375,height:99.6572265625,translateX:-8.740283203125045,translateY:85.05859375,baseline:85.05859375,capline:14.5986328125}},kB=Ho.a.extend(DM,{additionalClassNames:F.b(["more-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return VB}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MoreButton"}});function BB(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var jB=function(e){return PB.create({action:"deleteSelectedPhotosAction",isDisabled:e.bindingFor("isEmptySelection"),nextResponder:e})},UB=function(e){return xB.create({action:"favoriteSelectedPhotosAction",isDisabled:e.bindingFor("isEmptySelection"),nextResponder:e})},GB=function(e){return kB.create({action:"showMoreActions",isDisabled:e.bindingFor("isEmptySelection"),nextResponder:e})},HB=function(e){return FB.create({action:"shareSelectedPhotosAction",isDisabled:e.bindingFor("sharrowIconIsDisabled"),nextResponder:e})},WB=Gk.extend({mixinDependencies:[AA,fl.a,CA,Hk,fh,Uo],viewClass:MB,view:V.b({downstreamBindings:{container:"(owner).container",isToolbarVisible:"(owner).isToolbarVisible",gridViewController:"(owner).gridViewController",scrollMinY:"(owner).scrollMinY",sparseSelection:"(owner).sparseSelection",shouldShowSpinnerInHeader:"(owner).shouldShowSpinnerInHeader",toolbarButtons:"(owner).toolbarButtons"}}),gridViewController:Ci.b({defaultValue:k.c(Bk.extend({itemViewClass:Qk,layoutMetrics:F.b(Yk),container:V.b(),owner:V.b()})),downstreamBindings:{container:"(owner).container",isSelectionEnabled:"(owner).selectionModeIsActive"},strong:!0,readOnly:!0,viewOutlet:"photosGridView"}),_deleteButtonActionSheetAnchor:V.b({readOnly:!0,strong:!0,type:Ho.a,get:function(){return jB(this)}}),_moreButtonActionSheetAnchor:V.b({readOnly:!0,strong:!0,type:Ho.a,get:function(){return GB(this)}}),_shareButtonActionSheetAnchor:V.b({readOnly:!0,strong:!0,type:Ho.a,get:function(){return HB(this)}}),navItem:V.b({readOnly:!0,strong:!0,type:Jk,get:function(){return Jk.create({additionalRightBarButtonItems:this.bindingFor("rightBarButtonItems"),areAllItemsSelected:this.bindingFor("areAllItemsSelected"),navTitle:this.bindingFor("navTitle"),titleStyle:this.bindingFor("navTitleStyle"),hidesBackButton:this.bindingFor("hidesBackButton"),backButtonTitle:this.bindingFor("backButtonTitle"),isGridEmpty:this.bindingFor("isGridEmpty"),leftBarButtonItems:this.bindingFor("leftBarButtonItems"),selectedItemCount:this.bindingFor("selectedItemCount"),selectionModeIsActive:this.bindingFor("selectionModeIsActive"),viewController:this})}}),isToolbarVisible:V.b({dependencies:["primaryInteractionMode","selectionModeIsActive","sizeClass"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.selectionModeIsActive,n=this.sizeClass;return e===yn.a.TOUCH&&!0===t&&n===dn.a.COMPACT}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return r===yn.a.TOUCH&&!0===a&&s===dn.a.COMPACT}})}),visibleToolbarHeight:V.b({dependencies:["isToolbarVisible","view.toolbarView.viewportHeight"],readOnly:!0,get:Object.assign((function(){return this.isToolbarVisible?this.getPath("view.toolbarView.viewportHeight"):0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGetPath(this,t[1+n]):0}})}),_leftBarButtonItemsCache:V.b({readOnly:!0,strong:!0,type:Wo.b,get:function(){return Wo.b.create([UB(this),this._shareButtonActionSheetAnchor,this._deleteButtonActionSheetAnchor,this._moreButtonActionSheetAnchor])}}),leftBarButtonItems:V.b({defaultValue:function(){return Wo.b.create()},dependencies:["primaryInteractionMode","selectionModeIsActive","sizeClass"],readOnly:!0,strong:!0,type:Wo.b,get:Object.assign((function(e){var t=this.primaryInteractionMode,n=this.selectionModeIsActive,i=this.sizeClass;return t===yn.a.MOUSE||!0===n&&i===dn.a.REGULAR?this._leftBarButtonItemsCache:e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return r===yn.a.MOUSE||!0===a&&s===dn.a.REGULAR?this._leftBarButtonItemsCache:e}})}),rightBarButtonItems:V.b(),toolbarButtons:V.b({readOnly:!0,strong:!0,type:Wo.b,get:function(){return Wo.b.create([HB(this),UB(this),jB(this),GB(this)])}}),_selectionModeIsActive:V.b(),selectionModeIsActive:V.b({defaultValue:!1,dependencies:["_selectionModeIsActive","primaryInteractionMode"],writeDependencies:["_selectionModeIsActive"],type:Boolean,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE||this._selectionModeIsActive}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===yn.a.MOUSE||i.internalGet(this,t[0+n])}}),set:Object.assign((function(e){this._selectionModeIsActive=e}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e}}),writeDependencySetPathMap:[!1]}),hidesBackButton:V.b({defaultValue:!1,dependencies:["selectionModeIsActive","primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.primaryInteractionMode!==yn.a.MOUSE&&this.selectionModeIsActive}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])!==yn.a.MOUSE&&i.internalGet(this,t[0+n])}})}),backButtonTitle:V.b(),scrollMinY:V.b(Oi.c("gridViewController.view.scrollMinY")),selection:V.b(Oi.c("gridViewController.selectionController.selection")),sparseSelection:V.b(Oi.c("gridViewController.selectionController.sparseSelection")),selectedIndices:V.b(Oi.c("gridViewController.selectionController.selectedIndices")),sharrowIconIsDisabled:V.b({readOnly:!0,dependencies:["isEmptySelection","iCloudPhotoLibraryWasExited"],get:Object.assign((function(){return!this.iCPLEnabled||this.iCloudPhotoLibraryWasExited||this.isEmptySelection}),{__CW__getter:function(e,t,n,i){return!this.iCPLEnabled||i.internalGet(this,t[1+n])||i.internalGet(this,t[0+n])}})}),isEmptySelection:V.b({readOnly:!0,dependencies:["selectedItemCount"],get:Object.assign((function(){return 0===this.selectedItemCount}),{__CW__getter:function(e,t,n,i){return 0===i.internalGet(this,t[0+n])}})}),selectedItemCount:V.b({readOnly:!0,dependencies:["sparseSelection.length"],get:Object.assign((function(){return this.sparseSelection.length}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),navTitle:V.b({defaultValue:"",type:String}),navTitleStyle:V.b({type:Object}),gridHeaderDeselectAll:function(){this.gridViewController.deselectAll()},toggleSelectionMode:function(){this.selectionModeIsActive=!this.selectionModeIsActive},deleteSelectedPhotosAction:function(){if(!this.isEmptySelection){var e=this._deleteButtonActionSheetAnchor,t=this.sparseSelection,n=this.container;this.removeOrDeleteSelection(t,n,e,wn.b)}},favoriteSelectedPhotosAction:function(){if(!this.isEmptySelection){var e=this.sparseSelection;this.determineFavoriteValueForSparseSelectionAndSetIt(e)}},hideSelectedPhotosAction:function(){if(!this.isEmptySelection){var e=this.sparseSelection,t=this.container.isHiddenAlbum;this.setHiddenOnSelection(e,!t)}},downloadSelectedPhotosAction:function(){this.isEmptySelection||this.downloadSelection(this.sparseSelection)},addSelectedPhotosToAlbumAction:function(){var e=this;if(!this.isEmptySelection){var t=this.sparseSelection;Dd.isSelectionOverLimit(t)?Dd.showSelectionLimitAlert(ph.ADD_TO_ALBUM):this.sendEvent("navigateToAddToAlbumPage",t,function(){var n,i=(n=regeneratorRuntime.mark((function n(i){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getFullyLoadedSelection();case 2:r=n.sent,e.moveMediasToAlbum(r,i),e.selectionModeIsActive=!1;case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){BB(a,i,r,s,o,"next",e)}function o(e){BB(a,i,r,s,o,"throw",e)}s(void 0)}))});return function(e){return i.apply(this,arguments)}}())}},showMoreActions:function(){if(!this.isEmptySelection){var e=this.container.isHiddenAlbum,t=[Ho.a.create({title:s.d("Alert.AddToAlbum.Button.Title"),target:this,action:"addSelectedPhotosToAlbumAction"}),Ho.a.create({title:s.d("Alert.Download.Button.Title"),action:"downloadSelectedPhotosAction",target:this}),Ho.a.create({title:s.d(e?"Alert.Unhide.Button.Title":"Alert.Hide.Button.Title"),additionalClassNames:e?void 0:["destructive"],action:"hideSelectedPhotosAction",target:this}),Ho.a.create({title:s.d("Alert.Cancel.Button.Title"),isCancel:!0})];Vl.show({buttons:t,anchor:this._moreButtonActionSheetAnchor})}},shareSelectedPhotosAction:function(){this.sendEvent("showShareActionSheet",this._shareButtonActionSheetAnchor)},dataManager:V.b((function(){return L.n()})),transactionProcessor:V.b(Oi.c("dataManager.transactionProcessor")),shouldShowSpinnerInHeader:V.b({readOnly:!0,dependencies:["sparseSelection.loadsInProgress","transactionProcessor.progressTrackedPendingTransactions.length","transactionProcessor.progressTrackedCompletedTransactions.length"],get:function(){var e=this.sparseSelection,t=this.transactionProcessor,n=t.progressTrackedPendingTransactions.length,i=t.progressTrackedCompletedTransactions.length;return e.loadsInProgress>0&&e.loadsInProgress<=Pu.maxOperationsInSingleRequest||1===n&&0===i}}),areAllItemsSelected:V.b({type:Boolean,dependencies:["collection.length","selectedItemCount"],readOnly:!0,get:Object.assign((function(){return this.selectedItemCount===this.collection.length}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===i.internalGetPath(this,t[0+n])}})}),emptyGridObserver:B.h({inputs:["isGridEmpty"],callback:function(e){!0===e&&!0===this.selectionModeIsActive&&(this.selectionModeIsActive=!1)}}),container:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosGridPageViewController"}}),$B={minimumColumnCount:V.b(4),maximumColumnCount:V.b(10),preferredColumnCount:V.b(hi.sharedInstance.bindingFor("columnCount")),columnCount:V.b(Oi.c("preferredColumnCount"))},zB={PHOTOS:"Container.Title.PHOTOS",FAVORITES:"Container.Title.FAVORITES",LIVE:"Container.Title.LIVE",EXPOSURE:"Container.Title.EXPOSURE",PANORAMAS:"Container.Title.PANORAMAS",VIDEOS:"Container.Title.VIDEOS",SLOMO:"Container.Title.SLOMO",DEPTH:"Container.Title.DEPTH",TIMELAPSE:"Container.Title.TIMELAPSE",SCREENSHOT:"Container.Title.SCREENSHOT",ANIMATED:"Container.Title.ANIMATED",BURSTS:"Container.Title.BURSTS",HIDDEN:"Container.Title.HIDDEN",DELETED:"Container.Title.DELETED"};function KB(e){return s.d(zB[e])||""}function qB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var QB,YB,ZB,XB,JB,ej,tj,nj,ij,rj,aj,sj={day:864e5,hour:36e5,minute:6e4},oj={day:[void 0,"RecentlyDeleted.DaysRemaining.1","RecentlyDeleted.DaysRemaining.2","RecentlyDeleted.DaysRemaining.More"],hour:[void 0,"RecentlyDeleted.HoursRemaining.1","RecentlyDeleted.HoursRemaining.2","RecentlyDeleted.HoursRemaining.More"],minute:["RecentlyDeleted.MinutesRemaining.0","RecentlyDeleted.MinutesRemaining.1","RecentlyDeleted.MinutesRemaining.2","RecentlyDeleted.MinutesRemaining.More"]},lj=["Container.Folder.NumberOfItems.0","Container.Folder.NumberOfItems.1","Container.Folder.NumberOfItems.2","Container.Folder.NumberOfItems.More"],cj={SQUARE_SIZE:128,FOLDER_ITEM_SPACING:2,FOLDER_ITEM_SIZE:63,BORDER_RADIUS:3},uj=te.a.sharedInstance.isFirefox,dj=In.a.extend(Rn,Qp,eO).extend(ZR,Kp.a,qp.b,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",name:"_canvas"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_textContent",attributes:{}}],name:"_textContainer",classes:["p2-text-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isShowingRecentlyDeleted",truevalue:"p2-media-time-remaining",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isExpungeImminent",truevalue:"expunge-imminent",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_hasUntitledCaption",truevalue:"untitled-caption",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_shouldShowTextContainer",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_subtextContent",attributes:{}}],name:"_subtextContainer",classes:["p2-text-container",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isShowingContainer",truevalue:"p2-container-subtitle",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_isShowingContainer",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}}],classes:["p2-base-flow-grid-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInteractionDisabled",truevalue:"disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_shouldShowError",truevalue:"warning-displayed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_derivative",truevalue:"derivative-displayed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isAudio",truevalue:"audio-displayed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isFavorite",truevalue:"is-favorite",attributes:{}}]},className:"p2-base-flow-grid-item-view",__QUALIFIED_CLASS_NAME__:"BaseFlowGridItemView"},__isBaseFlowGridItemView__:!0,isBeingHovered:V.b(!1),providedDragTypes:H.d(["MediaTileDragType"]),isFocusable:V.b({readOnly:!0,defaultValue:function(){return!!te.a.sharedInstance.isIE}}),tabIndex:-1,isDraggable:V.b({readOnly:!0,dependencies:["isBeingHovered","_container","_derivative","_isShowingRecentlyDeleted","_isClickableHeartBeingPressed","_isCaptionEditorAttached"],get:Object.assign((function(){return this.isBeingHovered&&!(this._container||this._isShowingRecentlyDeleted||!this._derivative||this._isClickableHeartBeingPressed||this._isCaptionEditorAttached)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!(i.internalGet(this,t[1+n])||this._isShowingRecentlyDeleted||!i.internalGet(this,t[2+n])||this._isClickableHeartBeingPressed||this._isCaptionEditorAttached)}})}),ownersSparseSelection:H.d({get:function(){return this.owningGrid&&this.owningGrid.sparseSelection},readOnly:!0}),cheapRect:H.d({get:function(){var e=Sh.objectPool.getAutodisposingInstance();return e.x=this._currentDrawnRectLeftInParentView,e.y=this._currentDrawnRectTopInParentView,e.width=this._currentDrawnRectWidth,e.height=this._currentDrawnRectPlusTextHeight,e}}),shouldAllowExtendGesture:V.b(!1),provideDataForDragType:function(){return this},dragDidStart:function(e){if(!te.a.sharedInstance.isIE&&!te.a.sharedInstance.isEdge){var t=this._lastMeasuredRectSinceLayout,n=t.left>0&&t.top>-this._currentDrawnRectHeight,i=n?e.clientX-t.left-this._currentDrawnRectLeftInView:15,r=n?e.clientY-t.top-this._currentDrawnRectTopInView:15,a=this._getCanvasOfSelfForDragImage(),s=a.width,o=a.height;i*=s/this._currentDrawnRectWidth,r*=o/this._currentDrawnRectHeight;var l=Sh.arrayPool.getAutodisposingInstance(),c=this.ownersSparseSelection,u=c?c.size:0;if(c){for(var d,h,p=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return qB(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qB(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(c.selection.createIterator().retain().autorelease());!(h=p()).done;){var f,g=h.value;if(5===l.length)break;g&&g!==this._media&&g.getBestLoadedDerivative(1)&&(d||(d=this.constructor.create().retain()),d.content=g,(f=d).doLayout.apply(f,this._layoutArgs.slice(0,-1)),d._forcePaint(),l.push(d._getCanvasOfSelfForDragImage()),d.clearForReuse())}d&&d.release()}l.push(a);for(var m=l.length,_=m/2,v=-Math.min(22,7*_)*Math.PI/180/_,b=s,y=o,w=0;w<m;w++){var I=l[w],S=I.width,C=I.height,E=Math.ceil((m-1-w)/2)*(w%2===0?1:-1)*v,A=Math.abs(E),O=Math.cos(A)*S+Math.sin(A)*C,T=Math.sin(A)*S+Math.cos(A)*C;b=Math.max(b,O),y=Math.max(y,T)}b=Math.ceil(b),y=Math.ceil(y);var M=Sh.canvasPool.getInstance(),D=M.getContext("2d");M.width=b+50,M.height=y+50;var P=Sh.canvasPool.getAutodisposingInstance(),L=P.getContext("2d");P.width=b+50,P.height=y+50;for(var R=.6-.15*Math.min(1,Math.max(0,(m-3)/8)),x=1-Math.pow(R,1/(m-1)),N=0;N<m;N++){var F=l[N],V=Math.ceil((m-1-N)/2)*(N%2===0?1:-1)*v;D.translate(b/2,y/2),D.rotate(V),D.shadowBlur=(b+y)/2*.09,D.shadowColor="rgba(0, 0, 0, 0.5)",D.drawImage(F,-F.width/2,-F.height/2),D.shadowColor="transparent",D.shadowBlur=0,m>1&&N===m-1&&(D.shadowBlur=(b+y)/2*.015,D.shadowColor="rgba(255, 255, 255, 1)",D.drawImage(F,-F.width/2,-F.height/2),D.shadowColor="transparent",D.shadowBlur=0),D.setTransform(1,0,0,1,0,0),L.translate(b/2,y/2),L.rotate(V),L.fillStyle="black",L.fillRect(-F.width/2+.5,-F.height/2+.5,F.width-1,F.height-1),L.setTransform(1,0,0,1,0,0),L.globalCompositeOperation="destination-out",L.globalAlpha=N===m-1?.1:x,L.fillRect(0,0,b,y),L.globalAlpha=1,L.globalCompositeOperation="source-over"}D.globalCompositeOperation="destination-in",D.drawImage(P,0,0),D.globalCompositeOperation="source-over";var k=i+(b-s)/2,B=r+(y-o)/2;D.globalCompositeOperation="destination-out";var j=D.createRadialGradient(k,B+9,0,k,B+9,Math.min(b/2,y/2));if(j.addColorStop(0,"rgba(0, 0, 0, 0.68)"),j.addColorStop(.2,"rgba(0, 0, 0, 0.64)"),j.addColorStop(1,"rgba(0, 0, 0, 0)"),D.fillStyle=j,D.fillRect(0,0,b,y),D.globalCompositeOperation="source-over",u>1){var U=k+30,G=B+31;D.translate(U,G),D.beginPath(),D.moveTo(0,0),D.arc(0,0,u>100?25/1.3:12.5,0,2*Math.PI),D.closePath(),D.fillStyle="red",D.shadowColor="rgba(0, 0, 0, 0.5)",D.shadowOffsetY=2,D.shadowBlur=4,D.fill(),D.shadowBlur=0,D.shadowOffsetY=0,D.shadowColor="transparent",D.font="15px "+this.style.get("font-family");var H=D.measureText(String(u));D.fillStyle="white",D.fillText(String(u),-H.width/2,5.25),D.setTransform(1,0,0,1,0,0)}if(te.a.sharedInstance.isChrome){var W=Sh.imagePool.getInstance();W.src=M.toDataURL(),Sh.canvasPool.disposeInstance(M),W.style.cssText="position: absolute; z-index: -100000; left: -10000px; top: -10000px;",document.body.appendChild(W),e.dataTransfer.setDragImage(W,k,B);var $=Sh.objectPool.getInstance();$.cleanUpFunc=of.a(this._cleanUpImageFromDragGeneration,this,W,$),Ze.a(W,"load",$.cleanUpFunc)}else M.style.cssText="position: absolute; z-index: -100000; left: -10000px; top: -10000px;",document.body.appendChild(M),e.dataTransfer.setDragImage(M,k,B),X.a(of.a(this._cleanUpTempCanvasFromDragGeneration,this,M),100)}},_getCanvasOfSelfForDragImage:function(){var e=this._currentDrawnRectWidth,t=this._currentDrawnRectHeight,n=ef.d(e,t,1e3,1e3,Sh.objectPool.getAutodisposingInstance()),i=n.width,r=n.height,a=Math.min(e,Math.round(i)),s=Math.min(t,Math.round(r)),o=Sh.canvasPool.getAutodisposingInstance(),l=o.getContext("2d");return o.width=a,o.height=s,l.drawImage(this._canvas,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas,0,0,a,s),o},_cleanUpTempCanvasFromDragGeneration:function(e){e.style.cssText="",document.body.removeChild(e),Sh.canvasPool.disposeInstance(e)},_cleanUpImageFromDragGeneration:function(e,t){Xe.a(e,"load",t.cleanUpFunc),Sh.objectPool.disposeInstance(t),X.a(of.a(this._removeImageFromDragGeneration,this,e),100)},_removeImageFromDragGeneration:function(e){document.body.removeChild(e),e.style.cssText="",Sh.imagePool.disposeInstance(e)},_lastMeasuredRectSinceLayout:H.d({readOnly:!0,get:function(){return this.__lastMeasuredRectSinceLayout||(this.__lastMeasuredRectSinceLayout=this.element.getBoundingClientRect())}}),_debug_doLayoutCount:0,_debug_paintCount:0,targetEdgeRipSize:3,selectionWeight:3,selectionOutset:4,shouldLayerBack:!0,_shouldShowError:V.b({readOnly:!0,dependencies:["_derivative.physicalGeometricLength","_derivativeLoader.perfectDerivativeGeometricLength","_derivativeLoader.derivativeError","_media.renderableImageDerivativeInfos","_media.loadStatus","_cannotHaveImageDerivative"],get:Object.assign((function(){if(this._cannotHaveImageDerivative||this.getPath("_derivative.physicalGeometricLength")>=this.getPath("_derivativeLoader.perfectDerivativeGeometricLength"))return!1;var e=this.getPath("_media.loadStatus");if(e===jT.a.LOADED){var t=this.getPath("_media.renderableImageDerivativeInfos"),n=this.getPath("_derivativeLoader.derivativeError");return Boolean(n||!t||!t.length)}return e===jT.a.ERRORED}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[5+n])||i.internalGetPath(this,t[0+n])>=i.internalGetPath(this,t[1+n]))return!1;var r=i.internalGetPath(this,t[4+n]);if(r===jT.a.LOADED){var a=i.internalGetPath(this,t[3+n]),s=i.internalGetPath(this,t[2+n]);return Boolean(s||!a||!a.length)}return r===jT.a.ERRORED}})}),_isAudio:V.b({readOnly:!0,dependencies:["_media.specificType"],get:Object.assign((function(){return this._media.specificType===fr.a.Type.AUDIO}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===fr.a.Type.AUDIO}})}),_derivative:V.b({readOnly:!0,dependencies:["_derivativeLoader.derivative"],get:Object.assign((function(){var e=this.getPath("_derivativeLoader.derivative");return e&&!e.isDisposed?e:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&!r.isDisposed?r:void 0}})}),priority:V.b(0),_derivativeLoader:V.b({strong:!0,defaultValue:k.c(GE.a.extend({shouldCover:!0,shouldCorrectForDevicePixelRatio:!1,derivativeOffscreeniness:0,derivativePriority:Oi.c("owner.priority"),media:Oi.c("owner._media"),derivativeRequestReason:V.b(Oi.c("owner._derivativeRequestReason")),width:V.b(Oi.c("derivativeContainerWidth")),height:V.b(Oi.c("derivativeContainerHeight"))}))}),_derivativeRequestReason:V.b({readOnly:!0,dependencies:["_isShowingContainer"],get:Object.assign((function(){return this._isShowingContainer?Jp.a.GRID_CONTAINER:Jp.a.GRID_ASSET}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?Jp.a.GRID_CONTAINER:Jp.a.GRID_ASSET}})}),_cannotHaveImageDerivative:V.b({readOnly:!0,dependencies:["_media","_media.cannotHaveImageDerivative"],get:Object.assign((function(){return void 0===this._media||this.getPath("_media.cannotHaveImageDerivative")}),{__CW__getter:function(e,t,n,i){return void 0===i.internalGet(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),_notifyParentsOfLikelySubstantialShapeChange:B.g("_media.derivativesWereReset",(function(){this.sendEvent("bfgivShapeChangedSubstantially")})),isTimeRemainingTextAllowed:V.b(!1),unloadedMediaBoxColor:"#eeeeee",_isFavoritingDisabled:V.b({readOnly:!0,dependencies:["_media.loadStatus","_isShowingContainer","_isShowingRecentlyDeleted","isInteractionDisabled",G.a.bindingFor("application.isCreateAllowed")],get:Object.assign((function(){return Boolean(this.getPath("_media.loadStatus")!==jT.a.LOADED||this._isShowingContainer||this._isShowingRecentlyDeleted||this.isInteractionDisabled||!G.a.application.isCreateAllowed)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n])!==jT.a.LOADED||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[3+n])||!i.internalGetPath(this,t[4+n]))}})}),_containerRelation:V.b({readOnly:!0,dependencies:["_media","_media.containerRelations","_media.containerRelations.contentsDidChange"],get:Object.assign((function(){var e=this.owningGrid,t=this._media;if(void 0!==e&&t&&0!==t.containerRelations.length){var n=hr.a.getRecordNameForItemInContainer(t.asset.recordName,e.container.recordName),i=hr.a.getPrimaryKeyWithZonePK(t.asset.zone.pk,n);return hr.a.find(i)}}),{__CW__getter:function(e,t,n,i){var r=this.owningGrid,a=i.internalGet(this,t[0+n]);if(void 0!==r&&a&&0!==a.containerRelations.length){var s=hr.a.getRecordNameForItemInContainer(a.asset.recordName,r.container.recordName),o=hr.a.getPrimaryKeyWithZonePK(a.asset.zone.pk,s);return hr.a.find(o)}}})}),isInteractionDisabled:V.b({readOnly:!0,dependencies:["_containerRelation.storeStatus","_container.storeStatus","_media.primaryAsset.isDeleted"],get:Object.assign((function(){var e=this,t=function(t,n){var i=n?e[t][n]:e[t];return i.storeStatus!==jo.b.CLEAN&&i.storeStatus!==jo.b.DIRTYREAD};return void 0!==this._container?t("_container"):this._containerRelation?t("_containerRelation"):!!this.getPath("_media.primaryAsset.isDeleted")&&t("_media","primaryAsset")}),{__CW__getter:function(e,t,n,i){var r=this,a=function(e,t){var n=t?r[e][t]:r[e];return n.storeStatus!==jo.b.CLEAN&&n.storeStatus!==jo.b.DIRTYREAD};return void 0!==this._container?a("_container"):this._containerRelation?a("_containerRelation"):!!i.internalGetPath(this,t[2+n])&&a("_media","primaryAsset")}})}),_isShowingRecentlyDeleted:V.b({readOnly:!0,dependencies:["_media.dateExpunged","isTimeRemainingTextAllowed"],get:Object.assign((function(){var e=this.getPath("_media.dateExpunged");return Number.isFinite(e)&&this.isTimeRemainingTextAllowed}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return Number.isFinite(r)&&i.internalGet(this,t[1+n])}})}),_isShowingContainer:V.b({readOnly:!0,dependencies:["_container"],get:Object.assign((function(){return Boolean(this._container)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),isSelected:V.b(!1),content:V.b({strong:!0}),_container:V.b({readOnly:!0,dependencies:["content"],get:Object.assign((function(){var e=this.content;return e instanceof jt.a.Constructor?e:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r instanceof jt.a.Constructor?r:void 0}}),didChange:function(e){PD.b("containerName",e&&e.isPredefinedSmartAlbum?e.recordName.toLowerCase():null,this.element,"data-")}}),_containerModelIsLoaded:V.b(),_media:V.b({strong:!0,readOnly:!0,dependencies:["_container","_container.keyMedia","content"],get:Object.assign((function(){var e=this.content,t=this._container;return void 0===t?e:t.isRecentlyDeletedAlbum||t.isHiddenAlbum?void 0:t.keyMedia}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[0+n]);return void 0===a?r:a.isRecentlyDeletedAlbum||a.isHiddenAlbum?void 0:a.keyMedia}}),didChange:function(e){this._mediaPK=e?e.pk:void 0}}),_contentAspectRatio:V.b({readOnly:!0,dependencies:["_media","_media.aspectRatio","_container"],get:Object.assign((function(){var e=this._media;return void 0!==this._container?1:void 0!==e?e.aspectRatio:1}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==i.internalGet(this,t[2+n])?1:void 0!==r?r.aspectRatio:1}})}),_requiresPrettierPaint:!1,motionSpeed:V.b(0),_isStationary:V.b({readOnly:!0,dependencies:["motionSpeed"],get:Object.assign((function(){return!this.motionSpeed}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),_isStationaryDidChange:B.h("_isStationary",(function(e){e&&this._requiresPrettierPaint?this._stationaryPrettyPaintTimeout||(this._stationaryPrettyPaintTimeout=X.a(this._didStayStationaryWhileNeedingPrettierPaint,tj+nj*(this._currentDrawnRectTopInParentView/window.innerHeight+this._currentDrawnRectLeftInParentView/window.innerWidth*.1)|0)):this._cancelStationaryPrettyPaintTimeout()})),_cancelStationaryPrettyPaintTimeout:function(){this._stationaryPrettyPaintTimeout&&(clearTimeout(this._stationaryPrettyPaintTimeout),this._stationaryPrettyPaintTimeout=null)},_didStayStationaryWhileNeedingPrettierPaint:Bu.b((function(){this._isStationary&&this._requiresPrettierPaint&&this._forcePaintOnceSoon("_didStayStationaryWhileNeedingPrettierPaint")})),_millisRemainingUntilExpunge:V.b({readOnly:!0,dependencies:["_media.dateExpunged","_heartbeatBinding"],get:Object.assign((function(){var e=this.getPath("_media.dateExpunged"),t=Math.max(0,(Number(e)||NaN)-Date.now());return t&&!this._mrue_isHeartbeatConnected&&(this._mrue_isHeartbeatConnected=!0,iE.b(this.bind.bind(this,"_heartbeatBinding",fn.bindingFiringEverySecond()))),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=Math.max(0,(Number(r)||NaN)-Date.now());return a&&!this._mrue_isHeartbeatConnected&&(this._mrue_isHeartbeatConnected=!0,iE.b(this.bind.bind(this,"_heartbeatBinding",fn.bindingFiringEverySecond()))),a}})}),_heartbeatBinding:V.b(),_isExpungeImminent:V.b({readOnly:!0,dependencies:["_millisRemainingUntilExpunge","_isShowingRecentlyDeleted"],get:Object.assign((function(){return this._isShowingRecentlyDeleted&&Math.floor(this._millisRemainingUntilExpunge/sj.day)<=ej}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&Math.floor(i.internalGet(this,t[0+n])/sj.day)<=ej}})}),_timeRemainingText:V.b({readOnly:!0,dependencies:["_millisRemainingUntilExpunge","_isShowingRecentlyDeleted"],get:Object.assign((function(){if(!this._isShowingRecentlyDeleted)return"";var e=this._millisRemainingUntilExpunge;if(isNaN(e))return"";var t=e>=sj.day?"day":e>=sj.hour?"hour":"minute",n=pj.count=Math.floor(e/sj[t]),i=Math.max(0,Math.min(3,0|n));return s.d(oj[t][i],pj)}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return"";var r=i.internalGet(this,t[0+n]);if(isNaN(r))return"";var a=r>=sj.day?"day":r>=sj.hour?"hour":"minute",o=pj.count=Math.floor(r/sj[a]),l=Math.max(0,Math.min(3,0|o));return s.d(oj[a][l],pj)}})}),_shouldShowTextContainer:V.b({readOnly:!0,dependencies:[f.bindingFor("showMediaCaptionsInGrid"),"_isShowingContainer","_isShowingRecentlyDeleted","_textContent"],get:Object.assign((function(){return!!this._textContent&&(!!this._isShowingContainer||!!this._isShowingRecentlyDeleted||f.showMediaCaptionsInGrid)}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[3+n])&&(!!i.internalGet(this,t[1+n])||!!i.internalGet(this,t[2+n])||i.internalGet(this,t[0+n]))}})}),_textContent:V.b({readOnly:!0,dependencies:["_wantsTextContent","_isShowingContainer","_timeRemainingText","_container.name","_media.caption","_media","_isShowingRecentlyDeleted","isBeingHovered","_derivative","isInteractionDisabled"],get:Object.assign((function(){if(!this._wantsTextContent)return"";var e;if(this._isShowingContainer){var t=this._container;e=t.isPredefinedSmartAlbum?KB(t.recordName):t.name}else this._isShowingRecentlyDeleted?Boolean(this._derivative)&&(e=this._timeRemainingText):!(e=this.getPath("_media.caption"))&&this.isBeingHovered&&!this.isInteractionDisabled&&this._media&&(e=s.d("Asset.Caption.Untitled"));return e||""}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return"";var r;if(i.internalGet(this,t[1+n])){var a=this._container;r=a.isPredefinedSmartAlbum?KB(a.recordName):a.name}else i.internalGet(this,t[6+n])?Boolean(i.internalGet(this,t[8+n]))&&(r=i.internalGet(this,t[2+n])):!(r=i.internalGetPath(this,t[4+n]))&&i.internalGet(this,t[7+n])&&!i.internalGet(this,t[9+n])&&i.internalGet(this,t[5+n])&&(r=s.d("Asset.Caption.Untitled"));return r||""}})}),_subtextContent:V.b({readOnly:!0,dependencies:["_wantsTextContent","_isShowingContainer","_container.medias","_container.medias.length","_container.containers","_container.containers.contentsDidChange","_containerModelIsLoaded"],get:Object.assign((function(){if(!this._wantsTextContent||!this._isShowingContainer||!this._containerModelIsLoaded)return"";var e,t,n=this._container;return n.isFolder?(t=n.containers.length,e=Md(lj,t)):e=Ed(n.medias.length),e}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||!i.internalGet(this,t[1+n])||!i.internalGet(this,t[6+n]))return"";var r,a,s=this._container;return s.isFolder?(a=s.containers.length,r=Md(lj,a)):r=Ed(s.medias.length),r}})}),_hasTextContent:V.b({readOnly:!0,dependencies:["_textContent","_subtextContent"],get:Object.assign((function(){return Boolean(this._textContent||this._subtextContent)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n]))}})}),_hasUntitledCaption:V.b({readOnly:!0,dependencies:["_textContent"],get:Object.assign((function(){return this._textContent===s.d("Asset.Caption.Untitled")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===s.d("Asset.Caption.Untitled")}})}),_captionEditor:nf,_isCaptionEditorAttached:V.b({dependencies:["_captionEditor.parent"],readOnly:!0,get:Object.assign((function(){return this._captionEditor.parent===this}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===this}})}),_wantsTextContent:V.b(),_topStripeCount:V.b({readOnly:!0,dependencies:["_isShowingContainer","_media.isBurst"],get:Object.assign((function(){return this._isShowingContainer?0:this._media.isBurst?3:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?0:i.internalGetPath(this,t[1+n])?3:void 0}})}),_isFavorite:V.b({readOnly:!0,dependencies:["_media.isFavorite"],get:Object.assign((function(){return Boolean(this.getPath("_media.isFavorite"))}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGetPath(this,t[0+n]))}})}),_layoutPropertiesChanged:B.h("isSelected","_topStripeCount","_shouldShowError","_derivative","_container.loadStatus","_media.loadStatus","_media.isFavorite","_isShowingRecentlyDeleted","_contentAspectRatio","isBeingHovered","_isClickableHeartBeingPressed","_shouldFavoriteHeartBadgeBeVisibleEvenWhenNotFavorited","isInteractionDisabled",p.a.sharedInstance.bindingFor("devicePixelRatio"),(function(){this._forcePaintOnceSoon("_layoutPropertiesChanged")})),_buildFontString:function(e){var t=this._font;if(!t&&!(t=this._font=this.style.get("font-family")))return"";var n=this._fontWeight;return n||(n=this._fontWeight=this.style.get("font-weight")),n+" "+e+"px "+t},init:function(){var e=this,t=arguments;e.__s._$G24$init.apply(e,t);var n=this.doubleTapGestureRecognizer=Zp.b.create({numberOfTapsRequired:2,event:"doubleTap",delegate:this});this.addGestureRecognizer(n);var i=this.favoriteTapGestureRecognizer=qp.a.create({shouldAllowMovementOutsideTarget:!CD.c.isTouchSupported,event:"favoriteTap",delegate:this});this.addGestureRecognizer(i);var r=this.textTapGestureRecognizer=Zp.b.create({event:"textTap",delegate:this});if(this.addGestureRecognizer(r),!this._canvas){var a=this.element,s=a instanceof HTMLCanvasElement?a:document.createElement("canvas");s.width=s.height=0,a!==s&&a.appendChild(s),this._canvas=s}this._context=this._canvas.getContext("2d")},gestureRecognizerShouldReceive:function(e,t){var n=this,i=arguments,r={x:t.clientX,y:t.clientY};if(this.isInteractionDisabled)return!1;if(!1===this.shouldAllowExtendGesture&&e===this.extendGestureRecognizer)return!1;if(this.content){if(this.pointerHitTestHeartButton(r))return this._isFavoritingDisabled?n.__s._$Gro$gestureRecognizerShouldReceive.apply(n,i):e===this.favoriteTapGestureRecognizer;if(e===this.favoriteTapGestureRecognizer)return!1;if(t.target===this._textContainer)return e===this.textTapGestureRecognizer;if(e===this.textTapGestureRecognizer)return!1}return this.pointerHitTest(r)&&n.__s._$Gro$gestureRecognizerShouldReceive.apply(n,i)},shouldSelectOnPointerDown:!CD.c.isTouchSupported,gestureRecognizerShouldBeRequiredToFailBy:function(e,t){var n=this,i=arguments;return this.shouldSelectOnPointerDown?n.__s._$HI4$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i):e.instanceOf(Zp.b)&&t.instanceOf(Zp.b)&&2===e.numberOfTapsRequired&&1===t.numberOfTapsRequired||n.__s._$HI4$gestureRecognizerShouldBeRequiredToFailBy.apply(n,i)},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(e,t){var n=this,i=arguments;if(!this.shouldSelectOnPointerDown)return n.__s._$HYB$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(n,i);var r=e.event,a=t.event;return"selectView"===r&&"doubleTap"===a||n.__s._$HYB$gestureRecognizerShouldRecognizeSimultaneouslyWith.apply(n,i)},pointerMove:function(e){var t={x:e.clientX,y:e.clientY};this.isBeingHovered=this.pointerHitTest(t)},pointerLeave:function(){this.isBeingHovered=!1},pointerEnter:function(e){var t={x:e.clientX,y:e.clientY};this.isBeingHovered=this.pointerHitTest(t)},clearForReuse:function(){this._isLayoutDisabled=!0;var e=this._canvas,t=this._context;e&&t&&(t.clearRect(0,0,e.width,e.height),this._scheduleReclaimCanvasBufferMemory()),this._layoutArgs&&(Sh.arrayPool.disposeInstance(this._layoutArgs),this._layoutArgs=null),this._isCaptionEditorAttached&&this._captionEditor.remove(),this._containerModelIsLoaded=!1,this._paintInputsGuid=null,this._currentDrawnRectLeftInParentView=NaN,this._currentDrawnRectTopInParentView=NaN,this._currentDrawnRectLeftInView=NaN,this._currentDrawnRectTopInView=NaN,this._currentDrawnRectWidth=NaN,this._currentDrawnRectHeight=NaN,this._currentDrawnRectPlusTextHeight=NaN,this._debug_paintCount=0,this._debug_doLayoutCount=0,this.__lastMeasuredRectSinceLayout=null,this._requiresPrettierPaint=!1,this._cancelStationaryPrettyPaintTimeout(),this._unscheduleForcedPaint(),this.style.scale(0).layerBackIf(this.shouldLayerBack),this._updateDerivativeLoader(!0),this.isBeingHovered=!1,this._isLayoutDisabled=!1},_scheduleReclaimCanvasBufferMemory:function(){this._timeout_reclaimCanvasBufferMemory||(this._timeout_reclaimCanvasBufferMemory=X.a(this._reclaimCanvasBufferMemory,4e3))},_unscheduleReclaimCanvasBufferMemory:function(){clearTimeout(this._timeout_reclaimCanvasBufferMemory),this._timeout_reclaimCanvasBufferMemory=void 0},_reclaimCanvasBufferMemory:Bu.b((function(){this._unscheduleReclaimCanvasBufferMemory();var e=this._canvas;e.width=e.height=0})),dispose:function(){var e=this,t=arguments;e.__s._$In6$dispose.apply(e,t),this._unscheduleReclaimCanvasBufferMemory()},_ensureThatModelsAreLoaded:B.h("_container",(function(e){e&&(e.loadStatus===jT.a.LOADED?this._containerModelIsLoaded=!0:e.load().then(this._setTrue_containerModelIsLoaded))})),_setTrue_containerModelIsLoaded:Bu.b((function(){this._containerModelIsLoaded=!0})),pointerHitTest:function(e){var t=this._lastMeasuredRectSinceLayout,n=e.x-t.left-this._currentDrawnRectLeftInView,i=e.y-t.top-this._currentDrawnRectTopInView,r=this._currentDrawnRectWidth,a=this._currentDrawnRectPlusTextHeight;return n>=0&&n<=r&&i>=0&&i<=a},pointerHitTestHeartButton:function(e){var t=this._lastMeasuredRectSinceLayout,n=e.x-t.left-this._currentDrawnRectLeftInView,i=e.y-t.top-this._currentDrawnRectTopInView,r=this._clickableHeartWidthInDrawnRect,a=this._clickableHeartHeightInDrawnRect;return n-=this._clickableHeartLeftInDrawnRect,i-=this._clickableHeartTopInDrawnRect,n>=0&&n<=r&&i>=0&&i<=a},_isClickableHeartBeingPressed:V.b(!1),_isInteractable:function(){return!this.isInteractionDisabled&&this.content},selectView:function(e){if(!this._isInteractable())return!1;var t=e.state;if(this.shouldSelectOnPointerDown){if(t!==L_.b.Began)return}else if(t!==L_.b.Ended)return;this.sendEvent("userSelectionRequest",{view:this,operation:Qm.SET})},gestureRecognizerShouldActivateButton:function(e,t){if(e===this.favoriteTapGestureRecognizer){var n={x:t.clientX,y:t.clientY};return this._isBeingHoveredWhileFavoriteHeld=this.pointerHitTest(n),this.pointerHitTestHeartButton(n)}return this.__s._$JyX$gestureRecognizerShouldActivateButton.call(this,e,t)},_isBeingHoveredWhileFavoriteHeld:!1,favoriteTap:function(e){if(this._isInteractable()){var t=e.state;if(t===L_.b.Cancelled)return this._isClickableHeartBeingPressed=!1,void(this.isBeingHovered=this._isBeingHoveredWhileFavoriteHeld);t===L_.b.Ended?(this._isClickableHeartBeingPressed=!1,this.isBeingHovered=this._isBeingHoveredWhileFavoriteHeld,this.sendEvent("toggleFavorite",this._media)):this._isClickableHeartBeingPressed=e.willGestureSucceed}},textTap:function(){if(this._isInteractable()){var e=this._captionEditor;return this.__isShowingContainer||this._isShowingRecentlyDeleted?this.__isShowingContainer&&!this._container.isPredefinedSmartAlbum?(e.action="editAlbumName",e.model=this._container,e.value=this._container.name,e.insert(this._textContainer,this),this._forcePaintOnceSoon("_pointerActivate:editAlbumName"),!0):void 0:(e.action="editCaption",e.model=this._media,e.value=this._media.caption,e.insert(this._textContainer,this),this._forcePaintOnceSoon("_pointerActivate:editCaption"),!0)}},doubleTap:function(){if(!this._isInteractable())return!1;this.sendEvent("userNavigationRequest",{view:this})},acceptDataForDragType:function(e,t,n,i){return!1},_maintainDropTargetStyling:B.h("isDraggingOver",(function(e){var t=this._dropTargetDecor;if((!t||!e)&&(t||e)){if(e){(t=document.createElement("div")).classList.add("p2-fgiv-drop-target");var n=p.a.sharedInstance.devicePixelRatio,i=6+Math.max(this._drawnWidthInCanvas,this._drawnHeightInCanvas)*(1/15),r=.6*uf.multiStripesHeightForSizeAndQuantity(this._backingBaseSize,this._topStripeCount),a=-i+(this._drawnTopInCanvas-r)/n,s=-i,o=2*i+(this._drawnLeftInCanvas+this._drawnWidthInCanvas)/n,l=i+Math.max(this._textContentVisualHeight,i)+(this._drawnHeightInCanvas+r)/n;yl.c(t).set("top",0|a).set("left",0|s).set("width",Math.ceil(o)).set("height",Math.ceil(l)).set("border-radius",i).set("transition","opacity 150ms").set("opacity",1),this.element.appendChild(t)}else yl.c(t).set("opacity",0),setTimeout(this.element.removeChild.bind(this.element,t),150),t=null;this._dropTargetDecor=t}})),doLayout:function(e,t,n,i,r,a,s){var o;if(!this._isDoingLayout&&!this._isLayoutDisabled){this._isDoingLayout=!0,this._fadeoutTransition&&this._fadeoutTransition.finishTransition(),this.__lastMeasuredRectSinceLayout=null;var l=this._layoutArgs,c=arguments.length,u=!l,d=this._previouslyLaidOutCSSLeft,h=this._previouslyLaidOutCSSTop;if(!u&&c&&!s&&d&&h&&n===l[2]&&i===l[3]&&a===l[5]){var f,g=this._previouslyLaidOutCSSLeft=d+e-l[0],m=this._previouslyLaidOutCSSTop=h+t-l[1];g=Math.round(g*this._devicePixelRatio)/this._devicePixelRatio,m=Math.round(m*this._devicePixelRatio)/this._devicePixelRatio;var _=this.style;return _.layerBackIf(this.shouldLayerBack).translate(g,m),this._currentDrawnRectLeftInParentView=this._currentDrawnRectLeftInView+g,this._currentDrawnRectTopInParentView=this._currentDrawnRectTopInView+m,this.priority=m+g/1e4,l&&Sh.arrayPool.disposeInstance(l),(f=l=this._layoutArgs=Sh.arrayPool.getInstance()).push.apply(f,arguments),l[6]=!0,void(this._isDoingLayout=!1)}if(c){l&&Sh.arrayPool.disposeInstance(l),(o=l=this._layoutArgs=Sh.arrayPool.getInstance()).push.apply(o,arguments),l[6]=!0;var v=e,b=t,y=n,w=i,I=a;if(y>0&&w>0&&!(I<0)){this._debug_doLayoutCount++;var S=p.a.sharedInstance.devicePixelRatio;this._devicePixelRatio=S,y=Math.round(y*S)/S,w=Math.round(w*S)/S,I=Math.round(I*S)/S;var C=this.selectionOutset,E=this._drawnTotalOutset=Math.round(C*S);this._backingBaseSize=I*S,this._backingWidth=y*S+2*E,this._backingHeight=I*S+2*E,this._backingCellHeight=w*S+2*E;var A=this._canvas,O=this._derivative,T=!this.__currentDerivativeId,M=this.__currentDerivativeId!==(this.__currentDerivativeId=O?O.derivativeId:void 0),D=this.__currentDerivativeOutdateCount,P=this.__currentDerivativeOutdateCount=O?O.outdateCount:void 0;this.__derivative=O,this.__topStripeCount=this._topStripeCount,this.__shouldShowError=this._shouldShowError,this.__isShowingContainer=this._isShowingContainer,this.__contentAspectRatio=this._contentAspectRatio,this._mediaSpecificType=this.getPath("_media.specificType"),this._isSelected=this.isSelected;var L=this.__isStationary=this._isStationary;this._topStripesHeight=uf.multiStripesHeightForSizeAndQuantity(this._backingBaseSize,this.__topStripeCount),this._shouldAllowUpscalingOfSmallMedias=this.__isShowingContainer||YB,this._spansMultipleColumns=this._backingWidth>this._backingHeight,this._cropInset=(this.targetEdgeRipSize*S*.75|0)/S;var R=Date.now();u&&(this._firstLayoutTimestamp=R),O||(this._timestampLastRenderedWithoutDerivative=R);var x=A.parentNode.parentNode,N=M&&(T||P>D)&&L&&!u&&R>this._firstLayoutTimestamp+250&&R>this._timestampLastRenderedWithoutDerivative+250&&x;if(N){var V=this.element,k=this,B=k;this._fadeoutTransition&&this._fadeoutTransition.finishTransition(),this._fadeoutTransition=ZM.extend({transitionDuration:200,sourceElement:Sh.canvasPool.getInstanceFromImage(A),destElement:A,sourceRect:F.b({width:A.width,height:A.height,effectiveX:this._currentDrawnRectLeftInParentView,effectiveY:this._currentDrawnRectTopInParentView,innerX:this._currentDrawnRectLeftInView,innerY:this._currentDrawnRectTopInView,innerWidth:this._currentDrawnRectWidth,innerHeight:this._currentDrawnRectHeight}),prepareTransition:function(){var e=this,t=arguments,n=this.sourceElement.style;n.position="absolute",n.zIndex=2*parseInt(V.style.zIndex,10),n.width=A.style.width,n.height=A.style.height,x.appendChild(this.sourceElement),e.__s._$P6h$prepareTransition.apply(e,t)},updateTransition:function(){var e=this,t=arguments;this.destParentInsetX=B._currentDrawnRectLeftInParentView-B._currentDrawnRectLeftInView,this.destParentInsetY=B._currentDrawnRectTopInParentView-B._currentDrawnRectTopInView;var n=this.destRect;n.width=A.width,n.height=A.height,n.effectiveX=B._currentDrawnRectLeftInParentView,n.effectiveY=B._currentDrawnRectTopInParentView,n.innerX=B._currentDrawnRectLeftInView,n.innerY=B._currentDrawnRectTopInView,n.innerWidth=B._currentDrawnRectWidth,n.innerHeight=B._currentDrawnRectHeight,e.__s._$POx$updateTransition.apply(e,t)},cleanUpTransition:function(){var e=this,t=arguments,n=this.sourceElement;x.removeChild(n),yl.c(this.destElement).clear("transform"),B._fadeoutTransition=null,e.__s._$PUW$cleanUpTransition.apply(e,t),n.style.cssText="",Sh.canvasPool.disposeInstance(n)},__superMap:{_$P6h$prepareTransition:"prepareTransition",_$POx$updateTransition:"updateTransition",_$PUW$cleanUpTransition:"cleanUpTransition"}}).create(),this._fadeoutTransition.startTransition()}this._paintIfNeeded();var j=this._canvasWidth/S,U=this._canvasHeight/S,G=this._drawnLeftInCanvas/S,H=this._drawnTopInCanvas/S,W=this._drawnWidthInCanvas/S,$=this._drawnHeightInCanvas/S,z=(y-W-G)/2,K=v+z,q=(w-$-H)/2,Q=b+q;if(K-=C/2,Q-=C/2,this._previouslyLaidOutCSSLeft=K,this._previouslyLaidOutCSSTop=Q,K=Math.round(K*S)/S,Q=Math.round(Q*S)/S,this._textContentVisualHeight=H+4+12,!ZB){var Y=y>=40;this._wantsTextContent!==Y&&(this._wantsTextContent=Y);var Z=this.style;Z.layerBackIf(this.shouldLayerBack).translate(K,Q),yl.c(A).set("width",j).set("height",U);var X=W,J=G;if(this.__isShowingContainer){var ee=cj,te=I/ee.SQUARE_SIZE,ne=Math.round(ee.BORDER_RADIUS*S),ie=15,re=13,ae=w-q+12*Math.min(1,te),se=ie+3,oe=ae+se+2;yl.c(this._textContainer).set("font-size",ie).set("top",ae).set("left",J).set("width",X).set("height",se).set("line-height",se).clear("transform"),yl.c(this._subtextContainer).set("font-size",re).set("top",oe).set("left",J).set("width",X).set("height",Math.ceil(1.1*re)).clear("transform"),this._textContentVisualHeight=1.2*(ie+re),this._paintRoundedCornersOfRect(this._context,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas,ne),this._isCaptionEditorAttached&&yl.c(this._captionEditor.element).set("width",y).set("left",G).set("top",ae).set("height",se).set("line-height",se).clear("transform")}else yl.c(this._textContainer).set("width",X).translateDevicePixels(J,Math.ceil($+H+4)).layerBack(),this._isCaptionEditorAttached&&yl.c(this._captionEditor.element).set("width",X).translateDevicePixels(J,Math.ceil($+H+4))}var le=Math.ceil($+4+12+4);this._shouldShowTextContainer||(le=$),this._currentDrawnRectLeftInParentView=G+K,this._currentDrawnRectTopInParentView=H+Q,this._currentDrawnRectLeftInView=G,this._currentDrawnRectTopInView=H,this._currentDrawnRectWidth=W,this._currentDrawnRectHeight=$,this._currentDrawnRectPlusTextHeight=le,this.priority=Q+K/1e4,u&&this._unscheduleReclaimCanvasBufferMemory(),this._isDoingLayout=!1}else this._isDoingLayout=!1}else{if(this._isDoingLayout=!1,!l)return;this.doLayout.apply(this,l)}}},_paintIfNeeded:function(){this._needsPaint()&&(this._debug_paintCount++,this._sizeCanvas(),this._computeDrawnRectangle(),this._updateDerivativeLoader(),this._decideVisualCropIndication(),ZB||(this._paintInProperlySizedCanvas(),this._drawHDROrSDOFBadgeIfNeeded(),this._drawBottomRightBadgeIfNeeded(),this._drawBottomLeftBadgeIfNeeded(),this._drawWarningBadgeIfNeeded(),this._drawEmptyAlbumBadgeIfNeeded(),this._drawDebugInfoIfNeeded(),this._finalizeTopStripeOpacitiesIfNeeded(),this._tearCroppedEdgesIfNeeded(),this._drawSelectedStylingIfNeeded()))},_forcePaint:Bu.b((function(){this.isDisposed||(this._unscheduleForcedPaint(),this._paintInputsGuid=null,this.doLayout())})),_forcePaintOnceSoon:Bu.b((function(e){this._forcePaintFrame||(this._forcePaintFrame=iE.b(this._forcePaint),this._forcePaintReasons||(this._forcePaintReasons=Sh.arrayPool.getInstance()).push(e))})),_unscheduleForcedPaint:function(){this._forcePaintFrame&&(iE.a(this._forcePaintFrame),this._forcePaintFrame=null,this._forcePaintReasons&&(Sh.arrayPool.disposeInstance(this._forcePaintReasons),this._forcePaintReasons=null))},_forcePaintFrame:null,_needsPaint:function(){return this._havePaintInputsChanged(this._backingWidth,this._backingCellHeight,this.getPath("content.loadStatus")+":"+(this.__isShowingContainer?this.getPath("_media.loadStatus"):""),this.__derivative,this.__contentAspectRatio,this.__topStripeCount,this._isSelected,this.__shouldShowError,this.isBeingHovered,this._isClickableHeartBeingPressed,this.getPath("_media.isFavorite"))},_havePaintInputsChanged:function(){return this._paintInputsGuid!==(this._paintInputsGuid=af.a(arguments))},_sizeCanvas:function(){var e=this._canvas,t=this._context,n=this._backingWidth,i=this._backingHeight;this._imageWidthInCanvas=n,this._imageHeightInCanvas=i;var r=this._devicePixelRatio;n=Math.ceil(n/r)*r,i=Math.ceil(i/r)*r,this._canvasWidth=n,this._canvasHeight=i,ZB||(e.width!==n||e.height!==i?(e.width=n,e.height=i):t.clearRect(0,0,n,i))},_computeDrawnRectangle:function(){var e=this._devicePixelRatio,t=this._drawnTotalOutset,n=this._imageWidthInCanvas-2*t,i=this._backingCellHeight-2*t,r=t,a=t,s=this.__contentAspectRatio,o=1,l=this._topStripesHeight;a+=l,i-=l,this._spansMultipleColumns?(o=Math.min(i,n/(s/o)),s=n):(ef.d(s,o,n,i,hj),s=hj.width,o=hj.height);var c=this._media,u=c&&c.width,d=c&&c.height,h=Math.max(e,1);u&&d&&!this._shouldAllowUpscalingOfSmallMedias&&(s=Math.min(s,h*u),o=Math.min(o,h*d));var p=aj*e,f=aj*e,g=(1-ij)*p+ij*n,m=(1-ij)*f+ij*i;(s<p||o<f)&&(ef.c(s,o,g,m,hj),s=hj.width,o=hj.height),s=Math.ceil(s),o=Math.ceil(o),s=Math.min(s,n),o=Math.min(o,i),this._drawnLeftInCanvas=r,this._drawnTopInCanvas=a,this._drawnWidthInCanvas=Math.max(0,s),this._drawnHeightInCanvas=Math.max(0,o)},_updateDerivativeLoader:function(e){var t=this._derivativeLoader;Zl.a.begin().setIfChanged(t,"width",e?0:this._drawnWidthInCanvas).setIfChanged(t,"height",e?0:this._drawnHeightInCanvas).end()},_paintInProperlySizedCanvas:function(){var e=this.__derivative,t=e&&e.isLoaded?e:this.unloadedMediaBoxColor,i=this._context,r=!this.__isStationary,a=!0;a=uf.paintInRect(i,t,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas,NaN,NaN,r)&&a,this.__topStripeCount&&(a=uf.drawMultiStripes(i,t,this.__topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,!this.__isShowingContainer,!0,r)&&a);var s=!1;e||this._mediaSpecificType!==fr.a.Type.AUDIO||(CE.a(n(1293)).thenSync(this._paintCentralBadgeImage),s=!0),this._didPaintDerivative=Boolean(e===t||s),this._requiresPrettierPaint=!a},_paintRoundedCornersOfRect:function(e,t,n,i,r,a){e.globalCompositeOperation="destination-out",e.fillStyle="black",e.globalAlpha=1,uf.fillRoundedCornersOfRect(e,t,n,i,r,a),e.globalCompositeOperation="source-over"},_paintFolderGridBadgeImage:function(e,t,n,i,r,a,s,o,l){e.fillStyle=n,e.fillRect(r,a,s,o),e.globalAlpha=l;var c=i/1.6,u=ef.d(t.naturalWidth||t.width,t.naturalHeight||t.height,c,c,hj);u.width|=0,u.height|=0,e.drawImage(t,Math.ceil(r+i/2-u.width/2),Math.ceil(a+i/2-u.height/2),u.width,u.height),e.globalAlpha=1},_debuggingConfigDidChange:B.g(f.bindingFor("bfgiv_allowUpscalingOfSmallMedias"),f.bindingFor("bfgiv_drawPaintCounts"),f.bindingFor("bfgiv_drawMediaPKs"),f.bindingFor("bfgiv_drawValueAtPropertyPath"),f.bindingFor("bfgiv_croppedPhotoCellFillDesire"),f.bindingFor("bfgiv_enableVisualCropIndication"),f.bindingFor("bfgiv_minimumShorterAxisLength"),(function(){this._forcePaintOnceSoon("_debuggingConfigDidChange")})),_paintCentralBadgeImage:Bu.b((function(e,t,n){if(!this.isDisposed){if(!n)return this._forcePaintOnceSoon("_paintCentralBadgeImage"),!1;this._context.globalAlpha=.15,this._drawUXImage(e,"center","center",0,0,.25,.25,1/0,1/0),this._context.globalAlpha=1}})),_finalizeTopStripeOpacitiesIfNeeded:function(){if(this.__topStripeCount){var e=this._context;e.fillStyle="black",e.globalCompositeOperation="destination-out",uf.forEachMultiStripe(this._applySingleStripeOpacity,this.__topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas),e.globalCompositeOperation="source-over"}},_applySingleStripeOpacity:Bu.b((function(e,t,n,i,r){var a=this._context;a.globalAlpha=1-e.opacity,a.fillRect(t,n,i,r),a.globalAlpha=1,a.drawImage(mj,t,n,i,r)})),_drawBottomLeftBadgeIfNeeded:function(){this.__isShowingContainer?this._container.isFavoritesAlbum&&CE.a(n(682)).thenSync(this._drawFavoritesAlbumHeartBadge):this._drawMediaFavoriteHeartBadgeIfNeeded()},_shouldFavoriteHeartBadgeBeVisibleEvenWhenNotFavorited:V.b({readOnly:!0,dependencies:["isBeingHovered","_isFavoritingDisabled"],get:Object.assign((function(){return this.isBeingHovered&&!this._isFavoritingDisabled}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),_drawMediaFavoriteHeartBadgeIfNeeded:function(){this._clickableHeartWidthInDrawnRect&&(this._clickableHeartTopInDrawnRect=null,this._clickableHeartLeftInDrawnRect=null,this._clickableHeartWidthInDrawnRect=null,this._clickableHeartHeightInDrawnRect=null);var e=this.getPath("_media.isFavorite");if(e||this._shouldFavoriteHeartBadgeBeVisibleEvenWhenNotFavorited){var t=this._isClickableHeartBeingPressed,i=this._devicePixelRatio,r=uj,a=!1;2===i&&(r=!0),1===i&&(r=a=!0);var s=n(a?e?1294:1295:r?e?1296:1297:e?682:i<=1.66?1298:1299),o=r?t?this._drawMediaFavoriteHeartBadge_raster_dark:this._drawMediaFavoriteHeartBadge_raster:t?this._drawMediaFavoriteHeartBadge_dark:this._drawMediaFavoriteHeartBadge;CE.a(s).thenSync(o)}},_drawMediaFavoriteHeartBadge_raster_dark:Bu.b((function(e,t,n){this._drawMediaFavoriteHeartBadge(e,t,n,!0,!0)})),_drawMediaFavoriteHeartBadge_raster:Bu.b((function(e,t,n){this._drawMediaFavoriteHeartBadge(e,t,n,!1,!0)})),_drawMediaFavoriteHeartBadge_dark:Bu.b((function(e,t,n){this._drawMediaFavoriteHeartBadge(e,t,n,!0)})),_drawMediaFavoriteHeartBadge:Bu.b((function(e,t,n,i,r){if(!this.isDisposed){if(!n)return this._forcePaintOnceSoon("_drawMediaFavoriteHeartBadge"),!1;var a=this._devicePixelRatio,s=this._context,o=!r;o&&(s.shadowColor="rgba(0, 0, 0, 0.75)",s.shadowBlur=1.75*a,s.shadowOffsetY=.5*a),this._drawUXImage(e,"left","bottom",r?3:4,r?3:4,r?3:4,r?3:4,16,r?16:14,r?void 0:i?"#ccc":"white",r&&i?"rgba(0, 0, 0, 0.2)":void 0,fj),o&&(s.shadowColor="rgba(0, 0, 0, 0)",s.shadowBlur=0,s.shadowOffsetY=0),this._clickableHeartTopInDrawnRect=(fj.y-this._drawnTopInCanvas)/a|0,this._clickableHeartLeftInDrawnRect=(fj.x-this._drawnLeftInCanvas)/a|0,this._clickableHeartWidthInDrawnRect=Math.ceil(fj.width/a),this._clickableHeartHeightInDrawnRect=Math.ceil(fj.height/a)}})),_drawFavoritesAlbumHeartBadge:Bu.b((function(e,t,n){if(!this.isDisposed){if(!n)return this._forcePaintOnceSoon("_drawFavoritesAlbumHeartBadge"),!1;var i=this._backingBaseSize,r=128*this._devicePixelRatio,a=24*Math.sqrt(i)/Math.sqrt(r)/2+24*i/r/2;this.__drawFavoritesAlbumHeartBadgeHeart(e,a,.75/a,"rgba(0, 0, 0, 0.3)");var s=this._context;s.shadowColor="rgba(0, 0, 0, 0.3)",s.shadowBlur=2/24*a,s.shadowOffsetY=1/24*a,this.__drawFavoritesAlbumHeartBadgeHeart(e,a,0,"white"),s.shadowColor="rgba(0, 0, 0, 0)",s.shadowBlur=0,s.shadowOffsetY=0}})),__drawFavoritesAlbumHeartBadgeHeart:function(e,t,n,i){this._drawUXImage(e,"left","bottom",4/24*t,4/24*t+n,0,0,t,41.5*t/44,i)},_drawHDROrSDOFBadgeIfNeeded:function(){if(!this.__isShowingContainer){var e=this._media;if(e){var t=e.isHdr,n=e.isSDOF;if(t||n){var i=t?s.d("Badge.HDR"):s.d("Badge.SDOF"),r=this._devicePixelRatio,a=3*r,o=fE(r,i,!1),l=a+this._drawnLeftInCanvas,c=2*a+o.width+this._drawnLeftInCanvas;!(a+o.width)>this._drawnLeftInCanvas||c>this._drawnLeftInCanvas+this._drawnWidthInCanvas||this._drawnTopInCanvas+a+o.height<=this._drawnTopInCanvas+this._drawnHeightInCanvas-a&&hE(this._context,l,this._drawnTopInCanvas+a,r,i,!1)}}}},_drawBottomRightBadgeIfNeeded:function(){this._drawnBottomRightBadgeRightInset=this._drawnBottomRightBadgeBottomInset=0,this._drawDurationBadgeIfNeeded()||this._drawPanoramaBadgeIfNeeded()},_drawDurationBadgeIfNeeded:function(){if(this.__isShowingContainer)return!1;var e=this.getPath("_media.durationString"),t=this.getPath("_media.genericType"),n=this.getPath("_media.specificType");if(!e||t!==fr.a.Type.VIDEO&&n!==fr.a.Type.AUDIO)return!1;var i=this._context,r=this._devicePixelRatio,a=Math.round(11*r),s=this._buildFontString(a);if(s){i.font=s;var o=Math.ceil(i.measureText(e).width),l=4*r,c=o+2*l+1*r,u=18*r,d=4*r,h=this._drawnWidthInCanvas,p=this._drawnHeightInCanvas;return c<.75*h&&u<.75*p&&(h-=this._horizontalCropInset*r,p-=this._verticalCropInset*r,h+=this._drawnLeftInCanvas,p+=this._drawnTopInCanvas,i.fillStyle="rgba(0, 0, 0, 0.6)",i.beginPath(),i.moveTo(h,p),i.lineTo(h,p-u),i.arcTo(h-c,p-u,h-c,p,d),i.lineTo(h-c,p),i.lineTo(h,p),i.closePath(),i.fill(),i.fillRect(h,p-u,this._horizontalCropInset*r,u),i.fillRect(h-c,p,c,this._verticalCropInset*r),i.fillStyle="white",i.fillText(e,h-l-o,p-5*r),this._drawnBottomRightBadgeRightInset=c/r,this._drawnBottomRightBadgeBottomInset=u/r,!0)}},_drawPanoramaBadgeIfNeeded:function(){this._spansMultipleColumns||this._mediaSpecificType===fr.a.Type.PANORAMA&&CE.a(n(1300)).thenSync(this._drawPanoramaBadge)},_drawPanoramaBadge:Bu.b((function(e,t,n){if(!this.isDisposed){if(!n)return this._forcePaintOnceSoon("_drawPanoramaBadge"),!1;var i=this._context;i.shadowColor="rgba(0, 0, 0, 0.5)",i.shadowBlur=1.25*this._devicePixelRatio,i.shadowOffsetY=.625*this._devicePixelRatio,this._drawUXImage(e,"right","bottom",5,5,5,5,15,15,"white",void 0,fj),i.shadowColor="rgba(0, 0, 0, 0)",i.shadowBlur=0,i.shadowOffsetY=0,this._drawnBottomRightBadgeRightInset=fj.width+5,this._drawnBottomRightBadgeBottomInset=fj.height+5}})),_drawWarningBadgeIfNeeded:function(){this._didPaintWarningBadge=!1,this.__shouldShowError&&PF("warning-badge").thenSync(this._drawWarningBadge)},_drawWarningBadge:Bu.b((function(e,t,n){if(!this.isDisposed){if(!n)return this._forcePaintOnceSoon("_drawWarningBadge"),!1;var i=this._context;this._didPaintDerivative?(i.save(),i.globalAlpha=.85,i.shadowBlur=5,i.shadowOffsetX=0,i.shadowOffsetY=1,i.shadowColor="rgba(0, 0, 0, 0.4)",this._drawUXImage(e,"right","bottom",5,5+this._drawnBottomRightBadgeBottomInset,5,5,25,23,"white"),i.restore()):this._drawUXImage(e,"center","center",0,0,.3,.3,0,0,"rgba(0, 0, 0, 0.15)"),this._didPaintWarningBadge=!0}})),_drawEmptyAlbumBadgeIfNeeded:function(){if(!this._didPaintDerivative&&!this._didPaintWarningBadge&&this.__isShowingContainer){var e=this._badgeUrlForContainer(this._container);void 0!==e&&CE.a(e).thenSync(this._paintCentralBadgeImage)}},_badgeUrlForContainer:function(e){return e?e.isRecentlyDeletedAlbum?n(1301):e.isHiddenAlbum?n(1302):e.isPredefinedSmartAlbum||e.isNormalAlbum?n(683):e.isFolder?n(1303):void 0:void 0},_drawSelectedStylingIfNeeded:function(){if(this._isSelected){var e=this._context,t=this._showingHorizontalCrop,n=this._showingVerticalCrop,i=this._devicePixelRatio,r=this._drawnSelectionOutset=Math.round(this.selectionOutset*i),a=this._drawnSelectionWeight=Math.round(this.selectionWeight*i);this._drawSingleSelectionBox(null,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas),uf.forEachMultiStripe(this._drawSingleSelectionBox,this.__topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,!1,!1,!1,!0),(t||n)&&(e.fillStyle="rgb(38, 121, 251)",this._fillJaggedEdges((a-r)*Math.sqrt(2)-.5),e.globalCompositeOperation="destination-out",e.fillStyle="black",this._fillJaggedEdges(-this._drawnSelectionOutset*Math.sqrt(2)),e.globalCompositeOperation="source-over")}},_drawSingleSelectionBox:Bu.b((function(e,t,n,i,r,a,s,o,l){var c=t,u=n,d=i,h=r;e||(this._previousStripeTop=void 0);var p=this._previousStripeTop,f=this._context,g=this._drawnSelectionOutset;c-=g,u-=g,d+=2*g,h+=2*g;var m=this._drawnSelectionWeight;f.fillStyle="rgb(38, 121, 251)",e&&(f.globalAlpha=e.opacity),this._previousStripeTop=u,s||f.fillRect(c,u,d,p?Math.max(0,Math.min(m,p-u)):m),a||f.fillRect(c,u+m,m,p?Math.max(0,p-(u+m)):h-2*m),o||f.fillRect(c+d-m,u+m,m,p?Math.max(0,p-(u+m)):h-2*m),l||f.fillRect(c,u+h-m,d,m),f.globalCompositeOperation="destination-out",f.fillStyle="black",f.globalAlpha=1,uf.fillRoundedCornersOfRect(f,c,u,d,h,4*this._devicePixelRatio,a&&s,o&&s,a&&l||e,o&&l||e),f.globalCompositeOperation="source-over",c+=m,u+=m,d-=2*m,h-=2*m,f.fillStyle="rgb(38, 121, 251)",e&&(f.globalAlpha=e.opacity),uf.fillRoundedCornersOfRect(f,c,u,d,h,1*this._devicePixelRatio,a||s||p<=u,o||s||p<=u,a||l,o||l),f.globalAlpha=1})),_drawUXImage:function(e,t,n,i,r,a,s,o,l,c,u,d){var h=e,p=i,f=r,g=a,m=s,_=o,v=l;p=p||0,f=f||0,g=g||0,m=m||0;var b=h.pixelRatio||1,y=this._devicePixelRatio,w=this._drawnTopInCanvas+this._verticalCropInset*y,I=this._drawnLeftInCanvas+this._horizontalCropInset*y,S=this._drawnWidthInCanvas-2*this._horizontalCropInset*y,C=this._drawnHeightInCanvas-2*this._verticalCropInset*y,E=h.naturalWidth||h.width,A=h.naturalHeight||h.height;_!==1/0&&v!==1/0||(_=1e5*E,v=1e5*A),_&&v&&(ef.d(E,A,_,v,hj),_=hj.width,v=hj.height);var O=(_||E/b)*y,T=(v||A/b)*y;if(p=Math.round(p*y),f=Math.round(f*y),g=g<1&&g>0?Math.round(g*S):Math.round(y*g),m=m<1&&m>0?Math.round(m*C):Math.round(y*m),ef.d(O,T,O-Math.max(0,p+O+("center"===t?2:1)*g-S),T-Math.max(0,f+T+("center"===n?2:1)*m-C),hj),O=Math.round(hj.width),T=Math.round(hj.height),O>0&&T>0){if(c||u){var M=Yl.b(h)+c+u+O+"x"+T,D=gj.getImage(M,5e3);if(!D){var P=(D=document.createElement("canvas")).getContext("2d");D.width=O,D.height=T,c&&(P.fillStyle=c,P.fillRect(0,0,D.width,D.height),P.globalCompositeOperation="destination-in"),tf.b(P,h,0,0,O,T),u&&(P.globalCompositeOperation="source-atop",P.fillStyle=u,P.fillRect(0,0,D.width,D.height)),gj.saveImage(M,D,5e3)}h=D}var L=I+Math.round("left"===t?p:"right"===t?S-O-p:S/2-O/2+p),R=w+Math.round("top"===n?f:"bottom"===n?C-T-f:C/2-T/2+f);tf.b.usingCache()(this._context,h,L,R,O,T),d&&(d.x=L,d.y=R,d.width=O,d.height=T)}},_tearCroppedEdgesIfNeeded:function(){if(this._showingHorizontalCrop||this._showingVerticalCrop){this._didPaintDerivative&&(this._context.fillStyle="rgba(0, 0, 0, 0.2)",this._fillJaggedEdges(Math.sqrt(2)));var e=this._context;e.globalCompositeOperation="destination-out",e.fillStyle="black",this._fillJaggedEdges(0),e.globalCompositeOperation="source-over"}},_fillJaggedEdges:function(e){var t=this._showingHorizontalCrop,n=this._showingVerticalCrop;if(t||n){var i=e||0,r=this._drawnLeftInCanvas,a=this._drawnTopInCanvas,s=this._drawnWidthInCanvas,o=this._drawnHeightInCanvas,l=this._drawnTotalOutset,c=this._devicePixelRatio,u=2*this.targetEdgeRipSize*c,d=t?o:s,h=Math.round(d/u),p=d/h,f=p/2,g=this._context;g.save(),g.translate(r,a);for(var m=0;m<2;m++){g.translate(s,o),g.rotate(Math.PI),g.beginPath(),g.moveTo(t?-l:0,t?0:-l),g.lineTo(t?i:0,t?0:i);for(var _=0;_<h;_++)g.lineTo(t?f+i:f+_*p,t?f+_*p:f+i),g.lineTo(t?i:(1+_)*p,t?(1+_)*p:i);g.lineTo(t?0:d,t?d:0),g.lineTo(t?-l:d,t?d:-l),g.closePath(),g.fill()}g.restore()}},_decideVisualCropIndication:function(){var e=!1,t=!1;if(rj){var n=this.__contentAspectRatio;if(n){var i=this._drawnWidthInCanvas/this._drawnHeightInCanvas;e=n/i>1.2,t=i/n>1.2}t=t&&!(e||this._spansMultipleColumns||this.__topStripeCount),this.__isShowingContainer&&(e=t=!1)}this._showingHorizontalCrop=e,this._showingVerticalCrop=t,this._horizontalCropInset=this._showingHorizontalCrop?this._cropInset:0,this._verticalCropInset=this._showingVerticalCrop?this._cropInset:0},_latlonish:V.b({readOnly:!0,dependencies:["content"],get:Object.assign((function(){var e=this.content;return void 0!==e&&Number.isFinite(e.locationLatitude)&&Number.isFinite(e.locationLongitude)?"[geo]":""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return void 0!==r&&Number.isFinite(r.locationLatitude)&&Number.isFinite(r.locationLongitude)?"[geo]":""}})}),_drawDebugInfoIfNeeded:function(){var e,t,n,i,r=this._context,a=this._devicePixelRatio,s="-apple-system";QB&&(t=.85*(e=.1*Math.min(this._drawnWidthInCanvas,this._drawnHeightInCanvas)|0)|0,n=this._debug_doLayoutCount+" layouts, "+this._debug_paintCount+" paints.",r.font="bold "+e+"px "+s,i=r.measureText(n).width,r.fillStyle="red",r.fillText(n,this._drawnWidthInCanvas-i-5*a-this._horizontalCropInset|0,this._drawnHeightInCanvas-t-5*a-this._verticalCropInset|0)),XB&&(t=.85*(e=.1*Math.min(this._drawnWidthInCanvas,this._drawnHeightInCanvas)|0)|0,n=String(this._mediaPK||"no mediaPK"),r.font="bold "+e+"px "+s,i=r.measureText(n).width,r.fillStyle="red",r.fillText(n,this._drawnWidthInCanvas/2-i/2|0,this._drawnHeightInCanvas/2+t/2|0));var o=JB;o&&(o=o.trim())&&(t=.85*(e=Math.ceil(.1*Math.min(this._drawnWidthInCanvas,this._drawnHeightInCanvas)))|0,r.font=e+"px "+s,r.fillStyle="red",r.fillText(String(this.getPath(o)),this._drawnLeftInCanvas+this._horizontalCropInset+5*a,this._drawnTopInCanvas+this._verticalCropInset+5*a+t),_j(this))},__superMap:{_$G24$init:"init",_$Gro$gestureRecognizerShouldReceive:"gestureRecognizerShouldReceive",_$HI4$gestureRecognizerShouldBeRequiredToFailBy:"gestureRecognizerShouldBeRequiredToFailBy",_$HYB$gestureRecognizerShouldRecognizeSimultaneouslyWith:"gestureRecognizerShouldRecognizeSimultaneouslyWith",_$In6$dispose:"dispose",_$JyX$gestureRecognizerShouldActivateButton:"gestureRecognizerShouldActivateButton"}}),hj={},pj={},fj={},gj=P.a.extend({timeouts:{},timeoutTimes:{},images:{},getImage:function(e,t){var n=this.images[e];return n&&this.ensureAtLeastLifespan(e,t),n},saveImage:function(e,t,n){this.images[e]=t,this.ensureAtLeastLifespan(e,n)},purgeImage:Bu.b((function(e){var t=this.timeouts,n=t[e];n&&clearTimeout(n),delete this.images[e],delete this.timeoutTimes[e],delete t[e]})),ensureAtLeastLifespan:function(e,t){var n=this.timeoutTimes,i=n[e],r=Date.now();if(!(i&&i>r+t-50)){n[e]=r+t;var a=this.timeouts,s=a[e];s&&clearTimeout(s),a[e]=X.a(this.purgeImage,t,e)}}}).create(),mj=function(){var e=document.createElement("canvas");e.width=1,e.height=32;var t=e.getContext("2d"),n=t.createLinearGradient(0,0,0,e.height);return n.addColorStop(0,"transparent"),n.addColorStop(.9,"rgba(0, 0, 0, 0.35)"),n.addColorStop(1,"black"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}();f.observe("bfgiv_disableFullDerivativeLoading",(function(e){})),f.observe("bfgiv_drawPaintCounts",(function(e){QB=e})),f.observe("bfgiv_allowUpscalingOfSmallMedias",(function(e){YB=e})),f.observe("bfgiv_disableRendering",(function(e){ZB=e})),f.observe("bfgiv_drawMediaPKs",(function(e){XB=e})),f.observe("bfgiv_drawValueAtPropertyPath",(function(e){JB=e})),f.observe("bfgiv_turnRecentlyDeletedTimeRemainingRedBelowDays",(function(e){ej=e})),f.observe("bfgiv_proactivelyStoreDownsampledDerivatives",(function(e){})),f.observe("bfgiv_prettyPaintDelayFromIdle",(function(e){tj=e})),f.observe("bfgiv_prettyPaintDuration",(function(e){nj=e})),f.observe("bfgiv_croppedPhotoCellFillDesire",(function(e){ij=e})),f.observe("bfgiv_enableVisualCropIndication",(function(e){rj=e})),f.observe("bfgiv_minimumShorterAxisLength",(function(e){aj=e}));var _j=function(){var e,t=function(){for(var e=n.length,t=JB.trim(),i=n.items;e--;){var r=i[e],a=r._debug_lastSeenDebugText;(r._debug_lastSeenDebugText=r.getPath(t))!==a&&r._forcePaintOnceSoon("_debug_ensureContinuousPainting")}},n=new tO.a;return function(i){e=e||pn(t,32),n.add(i)}}(),vj=Object.assign({userNavigationRequest:function(e){var t=e.view;pi.a(t,this.itemViewClass)&&this.navigateToContent(t.content)},userDidPressReturnWithSelection:function(e){this.navigateToContent(e)},navigateToContent:function(e){pi.a(e,fr.a)?this.sendEvent("navigateToOneUp",e,this.collection,this):this.sendEvent("navigateTo",e)},itemViewClass:dj.extend({shouldAllowExtendGesture:V.b(!0),motionSpeed:Oi.c("parent.scrollMotionY.emaSpeed"),_deselectSelfWhenWeBecomeDisabled:B.h("isInteractionDisabled",(function(e){e&&this.isSelected&&this.sendEvent("userSelectionRequest",{view:this,operation:Qm.REMOVE})}))})},$B,{layoutMetrics:V.b({downstreamBindings:{preferredMouseColumnCount:"(owner).preferredColumnCount"}}),isEmpty:V.b({dependencies:["collection.length"],readOnly:!0,type:Boolean,get:Object.assign((function(){return 0===this.collection.length}),{__CW__getter:function(e,t,n,i){return 0===i.internalGetPath(this,t[0+n])}})}),selectAndScrollToMedia:function(e){var t=this.layoutController;if(e&&t){this.selection=[e],this.scrollToItem(e);var n=this.viewportHeight,i=t.rectForItem(e);if(i){var r=n/2-i.height/2,a=i.top,s=n-i.top-i.height;a<50?this.scrollBy(0,r-a):s<50&&this.scrollBy(0,-r+s)}}}}),bj={isAuthenticated:V.b(!0),hostedByCloudOSOne:V.b(!0)},yj=WB.extend(bj,Jl,VC,FC,tc.a,NC).extend({viewClass:F.b(eu),renderInsetsAsPositioning:function(){var e=this,t=arguments;e.__s._$Q3$renderInsetsAsPositioning.apply(e,t),this.gridViewController.measureViewport()},gridViewController:F.b(vj),shouldRenderInsetsAsPositioning:!0,toolbarConfiguration:V.b({readOnly:!0,type:hu,get:function(){return hu.create({leftItems:["zoomSlider"],middleItem:this.bindingFor("middleToolbarItem"),rightItems:this.bindingFor("rightToolbarItems"),zoomSlider:_p.create({gridViewController:this.bindingFor("gridViewController")}),gridViewController:this.bindingFor("gridViewController"),container:this.bindingFor("container"),collection:this.bindingFor("collection")})}}),middleToolbarItem:V.b(),rightToolbarItems:V.b(["uploadButton","addToAlbumButton","shareButton","downloadButton","deleteButton"]),parentRoute:V.b({readOnly:!0,dependencies:["container","container.parent"],get:Object.assign((function(){var e=this.container;if(e)return{routeName:"container",options:{container:Xc(e)}}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return{routeName:"container",options:{container:Xc(r)}}}})}),keyUp:function(e){switch(e.keyCode){case ml.a.DELETE:case ml.a.BACKSPACE:this.removeSelection(),e.preventDefault()}},__superMap:{_$Q3$renderInsetsAsPositioning:"renderInsetsAsPositioning"},staticMembers:{__QUALIFIED_CLASS_NAME__:"P2GridPageViewController"}});function wj(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Ij=yj.extend({viewClass:F.b({additionalClassNames:F.b(["all-photos-page"])}),gridViewController:Ci.b({defaultValue:F.b(wA,{layoutMetrics:F.b({initialPosition:Um.c.Bottom})}),downstreamBindings:{assetCountShouldIncludeHiddenItems:"(owner).assetCountShouldIncludeHiddenItems",libraryInfo:"(owner).libraryInfo"}}),assetCountShouldIncludeHiddenItems:V.b(!0),libraryInfo:V.b(),containerDidUpdate:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vA.load({zonePK:e.zone.pk});case 2:(i=t.sent)&&i.length&&(n.libraryInfo=i.objectAt(0));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){wj(a,i,r,s,o,"next",e)}function o(e){wj(a,i,r,s,o,"throw",e)}s(void 0)}))})()},middleToolbarItem:V.b("routeSwitcher"),staticMembers:{__QUALIFIED_CLASS_NAME__:"P2AllPhotosPageViewController"}}),Sj=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"text",attributes:{}}]},className:"message-string-view",__QUALIFIED_CLASS_NAME__:"MessageStringView"},text:null}),Cj=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["hyperion-logo"]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"\n                    "},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}},{type:"TEXT",data:"\n                "}],classes:["first-run-message-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"_contents"}],classes:["first-run-message-contents"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"_emphasis"}],classes:["first-run-message-emphasis"]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"\n                    "},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"footnote",attributes:{}},{type:"TEXT",data:"\n                "}],classes:["first-run-message-footnote"]}],classes:["first-run-message-list"]},className:"first-run-message-view",__QUALIFIED_CLASS_NAME__:"FirstRunMessageView"},title:null,contents:null,emphasis:null,footnote:null,_contents:V.b({defaultValue:function(){return Sj.create({text:this.contents})}}),_emphasis:V.b({defaultValue:function(){return Sj.create({text:this.emphasis})}})}),Ej=globalThis.CloudKit,Aj=we.b("FRVStates",{NOT_ENABLED:0,INDEXING_STATE_ERROR:1,UNKNOWN_ERROR:2}),Oj=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["first-run-image"]}],classes:["first-run-image-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"_errorStateView"}],classes:["first-run-message-container"],name:"_firstRunMessageContainer"}]},className:"first-run-page-view",__QUALIFIED_CLASS_NAME__:"FirstRunPageView"},init:function(){var e=this,t=this,n=arguments;t.__s._$Dr$init.apply(t,n),globalThis.P2ErrorViewStates=Aj.items.map((function(e){return e.name})),globalThis.P2SwitchErrorViewState=function(t){Aj[t]&&(e.errorState=Aj[t])}},errors:V.b(),errorState:V.b(),_onErrorChange:B.h("errors",(function(e){if(!e)return null;for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i.ckErrorCode&&i.ckErrorCode===Ej.CKError.ZONE_NOT_FOUND)return this.errorState=Aj.NOT_ENABLED;if(i.type){if(i.type===Ut.INDEXING_STATE_ERROR)return this.errorState=Aj.INDEXING_STATE_ERROR;if(i.type===Ut.NO_ZONES)return this.errorState=Aj.NOT_ENABLED}}this.errorState=Aj.UNKNOWN_ERROR})),_errorStateView:V.b({readOnly:!0,dependencies:["errorState"],get:Object.assign((function(){if(!this.errorState)return null;switch(this.errorState){case Aj.INDEXING_STATE_ERROR:return this._indexingStateErrorView;case Aj.NOT_ENABLED:return this._notEnabledView;default:return this._defaultErrorView}}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return null;switch(i.internalGet(this,t[0+n])){case Aj.INDEXING_STATE_ERROR:return this._indexingStateErrorView;case Aj.NOT_ENABLED:return this._notEnabledView;default:return this._defaultErrorView}}})}),_notEnabledView:V.b({defaultValue:function(){return Cj.create({title:s.d("FirstRun.Title"),contents:s.d("FirstRun.Contents.Message"),emphasis:s.d("FirstRun.NotEnabled.Advice"),footnote:s.d("FirstRun.Footnote")})}}),_indexingStateErrorView:V.b({defaultValue:function(){return Cj.create({title:s.d("FirstRun.IndexingError.Title"),contents:s.d("FirstRun.IndexingError.Message.Content"),showProgressBar:!0})}}),_defaultErrorView:V.b({defaultValue:function(){return Cj.create({title:s.d("FirstRun.Error.Title"),contents:s.d("FirstRun.Error.Message")})}}),__superMap:{_$Dr$init:"init"}}),Tj=fi.a.extend({mixinDependencies:[SA],viewClass:Oj,view:V.b({downstreamBindings:{errors:"(owner).errors"}}),errors:V.b(),navItem:V.b({readOnly:!0,strong:!0,get:function(){return Zk.create({shouldHideTabBar:!0})}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FirstRunPageViewController"}}).extend(Jl,VC,FC).extend({viewClass:F.b(eu),container:V.b(),parentRoute:V.b(),toolbarConfiguration:V.b({defaultValue:k.c(hu)}),staticMembers:{__QUALIFIED_CLASS_NAME__:"P2FirstRunPageViewController"}}),Mj=KA.extend({source:Oi.c("container.containers"),ensureRange:U.a,canEnsureRange:V.b({readOnly:!0,get:function(){return!0}}),_loadContainerContainers:B.h({inputs:["container"],callback:function(e){e&&(e.retain(),e.list().then((function(){var t=[];e.containers.forEach((function(e){e&&(e.keyMedia||t.push(e.ensureKeyMedia()))})),e.release(),Z.a.all(t)})))}}),sectionLength:function(){return this.source?this.source.length:0},_sourceObserver:B.h({inputs:["source.length"],callback:function(){this.propertyChanged("length")}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FolderSectionedAdapter"}}),Dj=dn.a.COMPACT,Pj=yn.a,Lj=Pj.MOUSE,Rj=Pj.TOUCH,xj={mixinDependencies:[fl.a],initialPosition:Um.c.Top,sectionTopPadding:0,bottomPadding:0,topPadding:V.b({get:function(){return 22}}),photosGridGutter:V.b({dependencies:["viewportWidth","primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.viewportWidth,t=this.primaryInteractionMode,n=this.sizeClass;return t===Lj?$l.uiPhotosGridFolderGutterDesktop:n===Dj?e<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosGridFolderGutterCompact:$l.uiPhotosGridFolderGutterCompactLandscape:e<$l.uiSizeIPad97LandscapeWidth?$l.uiPhotosGridFolderGutterRegular:$l.uiPhotosGridFolderGutterRegularLandscape}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return a===Lj?$l.uiPhotosGridFolderGutterDesktop:s===Dj?r<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosGridFolderGutterCompact:$l.uiPhotosGridFolderGutterCompactLandscape:r<$l.uiSizeIPad97LandscapeWidth?$l.uiPhotosGridFolderGutterRegular:$l.uiPhotosGridFolderGutterRegularLandscape}})}),columnCount:V.b({get:function(){var e=this,t=arguments,n=this.viewportWidth,i=this.primaryInteractionMode,r=this.sizeClass;return i===Rj?r===Dj?n<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosFolderColumnCountCompact:$l.uiPhotosFolderColumnCountCompactLandscape:n<$l.uiSizeIPad97LandscapeWidth?$l.uiPhotosFolderColumnIPad97Like:n<$l.uiSizeIPad129LandscapeWidth?$l.uiPhotosFolderColumnIPad129Like:$l.uiPhotosFolderColumnIPad129LandscapeLike:e.__s._$g8$get.apply(e,t)},__superMap:{_$g8$get:"get"}}),rowSpacing:V.b({readOnly:!0,dependencies:["primaryInteractionMode","sizeClass"],get:Object.assign((function(){return this.primaryInteractionMode===Rj?this.sizeClass===Dj?$l.uiPhotosGridFolderRowSpacingCompact:$l.uiPhotosGridFolderRowSpacingRegular:$l.uiPhotosGridFolderRowSpacingDesktop}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===Rj?i.internalGet(this,t[1+n])===Dj?$l.uiPhotosGridFolderRowSpacingCompact:$l.uiPhotosGridFolderRowSpacingRegular:$l.uiPhotosGridFolderRowSpacingDesktop}})}),columnSpacing:V.b({readOnly:!0,dependencies:["viewportWidth","primaryInteractionMode","sizeClass"],get:Object.assign((function(){var e=this.viewportWidth,t=this.primaryInteractionMode,n=this.sizeClass;return t===Rj?n===Dj?e<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosGridFolderColumnSpacingCompact:$l.uiPhotosGridFolderColumnSpacingCompactLandscape:e<$l.uiSizeIPad97LandscapeWidth?$l.uiPhotosGridFolderColumnSpacingRegular:$l.uiPhotosGridFolderColumnSpacingRegularLandscape:$l.uiPhotosGridFolderColumnSpacingDesktop}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return a===Rj?s===Dj?r<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosGridFolderColumnSpacingCompact:$l.uiPhotosGridFolderColumnSpacingCompactLandscape:r<$l.uiSizeIPad97LandscapeWidth?$l.uiPhotosGridFolderColumnSpacingRegular:$l.uiPhotosGridFolderColumnSpacingRegularLandscape:$l.uiPhotosGridFolderColumnSpacingDesktop}})}),isSquareCrop:V.b({readOnly:!0,get:function(){return!0}}),sectionBottomPadding:V.b({readOnly:!0,dependencies:["rowSpacing"],get:Object.assign((function(){return this.rowSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})})},Nj=yj.extend({containerAdapterClass:Mj,viewClass:F.b({emptyGridText:s.d("Folder.Empty.Text")}),gridViewController:F.b({layoutMetrics:F.b(xj),derivativePreloadRequestReason:Jp.a.GRID_CONTAINER_PREFETCH}),rightToolbarItems:V.b(["addToAlbumButton","deleteButton"]),isGridEmpty:V.b({dependencies:["container.isLoaded","collection.length"],readOnly:!0,type:Boolean,get:Object.assign((function(){return!(!this.container||!this.container.isLoaded)&&0===this.collection.length}),{__CW__getter:function(e,t,n,i){return!(!this.container||!i.internalGetPath(this,t[0+n]))&&0===i.internalGetPath(this,t[1+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"P2FolderPageViewController"}}),Fj=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}return e.from=function(e){return new this(e.x,e.y)},e}(),Vj=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.width=e,this.height=t}return e.from=function(e){return new this(e.width,e.height)},e}();function kj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Bj=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fj,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vj;this.origin=Fj.from(e),this.size=Vj.from(t)}var t,n;return e.from=function(e){return new this(e.origin,e.size)},t=e,(n=[{key:"height",get:function(){return this.size.height},set:function(e){this.size.height=e}},{key:"width",get:function(){return this.size.width},set:function(e){this.size.width=e}},{key:"minX",get:function(){return this.origin.x},set:function(e){this.origin.x=e}},{key:"midX",get:function(){return this.origin.x+this.size.width/2}},{key:"maxX",get:function(){return this.origin.x+this.size.width}},{key:"minY",get:function(){return this.origin.y},set:function(e){this.origin.y=e}},{key:"midY",get:function(){return this.origin.y+this.size.height/2}},{key:"maxY",get:function(){return this.origin.y+this.size.height}},{key:"isEmpty",get:function(){return 0===this.width||0===this.height}}])&&kj(t.prototype,n),e}();Bj.ZERO=new Bj(new Fj(0,0),new Vj(0,0));function jj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Uj(e,t){return(Uj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gj=function(e){var t,n,i,r;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Uj(t,n),a.denormalize=function(e,t){var n=this.from(a.ZERO);return n.minX=e.minX*t.width+t.minX,n.minY=e.minY*t.height+t.minY,n.width=e.width*t.width,n.height=e.height*t.height,n},a.normalize=function(e,t){var n=this.from(a.ZERO);return n.minX=(e.minX-t.minX)/t.width,n.minY=(e.minY-t.minY)/t.height,n.width=e.width/t.width,n.height=e.height/t.height,n},a.from=function(e){return new this(e.origin,e.size)},a.withAspectRatioFittingSize=function(e,t){var n=Vj.from(t);return e<this.fromSize(n).aspectRatio?n.width=n.height*e:n.height=n.width/e,new this(new Fj(0,0),n)},a.withAspectRatioFittingRect=function(e,t){var n=this.withAspectRatioFittingSize(e,t.size);return this.fromCenterAndSize(t.center,n.size)},a.fromCenterAndSize=function(e,t){var n=t.width,i=t.height,r=new Vj(n,i);return new this(new Fj(e.x-r.width/2,e.y-r.height/2),r)},a.fromHash=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i,a=e.width,s=void 0===a?0:a,o=e.height,l=void 0===o?0:o;return new this(new Fj(n,r),new Vj(s,l))},a.fromLargestSalientAspectFilledCropRect=function(e,t,n,i){var r=this.withAspectRatioFittingRect(t,e),a=this.denormalize(i,e),s=this.denormalize(n,e);r=this.fromCenterAndSize(a.center,r.size);var o=s.minX,l=s.midX,c=s.maxX,u=s.width,d=r.minX,h=r.maxX,p=r.width,f=e.width-p;d<o?r.minX=u<p?l-.5*r.width:o:h>c&&(r.minX=u<p?l-.5*p:c-p);var g=s.minY,m=s.midY,_=s.maxY,v=s.height,b=r.minY,y=r.maxY,w=r.height,I=e.height-w;return b<g?r.minY=v<w?m-.5*w:g:y>_&&(r.minY=v<w?m-.5*w:_-w),r.minX=Math.max(Math.min(r.minX,f),0),r.minY=Math.max(Math.min(r.minY,I),0),r},a.rectFlipped=function(e,t){return new this(new Fj(e.minX,t.maxY-e.maxY),Vj.from(e.size))},a.fromSize=function(e){var t=e.width,n=e.height;return new this(new Fj(0,0),new Vj(t,n))},a.prototype.bestCropRectForAspectRatio=function(e,t){var n=this.aspectRatio;if(function(e,t,n){return Math.abs(e-t)<=1e-5}(n,e))return this.constructor.UNIT;var i=new this.constructor(new Fj(0,0),new Vj(this.width,this.height)),r=t,a=this.constructor.from(Bj.ZERO);return t.isEmpty||(a=this.constructor.fromLargestSalientAspectFilledCropRect(i,e,t,r)),a.isEmpty||i.isEmpty?this.constructor.UNIT:this.constructor.normalize(a,i)},i=a,(r=[{key:"aspectRatio",get:function(){return this.height>0?this.width/this.height:1}},{key:"center",get:function(){return new Fj(this.midX,this.midY)}}])&&jj(i.prototype,r),a}(Bj);Gj.UNIT=new Gj(new Fj(0,0),new Vj(1,1));var Hj,Wj=function(e){var t=e.cropRect,n=e.imageWidth,i=e.imageHeight,r=e.viewportWidth,a=e.viewportHeight,s=e.needsBlurRadius,o=p.a.sharedInstance.devicePixelRatio,l=Math.max(0,r*o/250/1.15-1),c=Gj.fromHash({width:n,height:i}),u=Gj.fromHash(t),d=Gj.fromHash({x:0-l,y:0-l,width:r+2*l,height:a+2*l}),h=d.aspectRatio;0===u.height&&(u.height=1e-5),0===u.width&&(u.width=1e-5);var f=c.bestCropRectForAspectRatio(h,u);f===Gj.UNIT&&(f=Gj.withAspectRatioFittingRect(h,f));var g=d.width/f.width,m=d.height/f.height,_=s?Math.min(l,Math.max(0,f.width*o/n/1.15-1)):0;return{rect:{top:-f.minY*m,left:-f.minX*g,width:g,height:m},blurRadius:_}},$j=globalThis.URL,zj={rootRecord:V.b(),previewData:HM.b({readOnly:!0,shouldExposeRejectionErrors:!0,dependencies:["rootRecord"],get:Object.assign((function(){var e=this.rootRecord;return e&&e.previewData&&e.loadPreviewData()}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.previewData&&r.loadPreviewData()}})}),previewDataCropRectString:V.b({readOnly:!0,dependencies:["previewData"],get:Object.assign((function(){var e=this.previewData;return e&&e.cropRectString}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.cropRectString}})}),previewDataCropRect:V.b({readOnly:!0,dependencies:["previewDataCropRectString"],get:Object.assign((function(){return IV(this.previewDataCropRectString)}),{__CW__getter:function(e,t,n,i){return IV(i.internalGet(this,t[0+n]))}})}),previewDataImage:HM.b({readOnly:!0,dependencies:["previewData"],get:Object.assign((function(){var e=this.previewData;if(e&&!(e instanceof Error)){var t=Z.a.create(),n=new Image;return n.src=$j.createObjectURL(new Blob(e.previewImageData,{type:"image/jpeg"})),Ze.a(n,"load",(function(){$j.revokeObjectURL(n.src),t.resolve(n)})),Ze.a(n,"error",(function(){$j.revokeObjectURL(n.src),t.reject()})),t}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r&&!(r instanceof Error)){var a=Z.a.create(),s=new Image;return s.src=$j.createObjectURL(new Blob(r.previewImageData,{type:"image/jpeg"})),Ze.a(s,"load",(function(){$j.revokeObjectURL(s.src),a.resolve(s)})),Ze.a(s,"error",(function(){$j.revokeObjectURL(s.src),a.reject()})),a}}})}),isMissingPreviewData:V.b({readOnly:!0,dependencies:["previewData"],get:Object.assign((function(){return null===this.previewData||this.previewData instanceof Error}),{__CW__getter:function(e,t,n,i){return null===i.internalGet(this,t[0+n])||i.internalGet(this,t[0+n])instanceof Error}})}),loadedKeyMedia:HM.b({strong:!0,readOnly:!0,dependencies:["previewData","rootRecord.zone.pk"],get:Object.assign((function(){var e=this.previewData;if(e&&e.keyAssetIdentifier){var t=this.getPath("rootRecord.zone.pk");if(t)return fr.a.load({primaryKeys:[Kt.Record.getPrimaryKeyWithZonePK(t,e.keyAssetIdentifier)]}).then((function(e){return e.objectAt(0)}))}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r&&r.keyAssetIdentifier){var a=i.internalGetPath(this,t[1+n]);if(a)return fr.a.load({primaryKeys:[Kt.Record.getPrimaryKeyWithZonePK(a,r.keyAssetIdentifier)]}).then((function(e){return e.objectAt(0)}))}}})})},Kj=In.a.extend(Pl.a,zj,{additionalClassNames:F.b(["placard-image-view"]),thumbnailImage:HM.b({readOnly:!0,dependencies:["rootRecord.share.thumbnailImageData"],get:Object.assign((function(){var e=this.getPath("rootRecord.share.thumbnailImageData");if(e){var t=Z.a.create(),n=new Image;return n.src="data:image/jpeg;base64,"+e,Ze.a(n,"load",(function(){t.resolve(n)})),Ze.a(n,"error",(function(){t.reject()})),t}}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var a=Z.a.create(),s=new Image;return s.src="data:image/jpeg;base64,"+r,Ze.a(s,"load",(function(){a.resolve(s)})),Ze.a(s,"error",(function(){a.reject()})),a}}})}),blurredThumbnailImage:V.b({readOnly:!0,dependencies:["thumbnailImage"],get:Object.assign((function(){var e=this.thumbnailImage;if(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),EE.a(t,3,2,void 0,!0),t}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=document.createElement("canvas");return a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),EE.a(a,3,2,void 0,!0),a}}})}),derivativeLoader:V.b({strong:!0,defaultValue:k.c(Xp.a,{derivativeRequestReason:Jp.a.CMM_SHARE_PLACARD,offscreeniness:0,shouldCover:!0,shouldCorrectForDevicePixelRatio:!0}),downstreamBindings:{media:"(owner).loadedKeyMedia",width:"(owner).viewportWidth",height:"(owner).viewportHeight"}}),derivativeImage:V.b(),_maintainDerivativeImage:B.h("derivativeLoader.derivative",(function(e){this.derivativeImage=e?e.toAppendableImagelike():void 0})),finalImage:V.b({readOnly:!0,dependencies:["derivativeImage","previewDataImage","blurredThumbnailImage"],get:Object.assign((function(){var e=this.derivativeImage,t=this.previewDataImage,n=this.blurredThumbnailImage;return e||t||n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return r||a||s}})}),INITIAL_FADE_DURATION:400,DEFAULT_FADE_DURATION:900,RECENT_CHANGE_TIME:100,_maintainFinalImage:B.h({inputs:["finalImage","viewportWidth","viewportHeight","previewDataCropRect"],callback:function(e,t,n,i){var r=this,a=this._mfi_lastFinalImage,s=!1;a&&a!==e&&(s=!0),this._mfi_lastFinalImage=e;var o=Date.now();this._mfi_lastSize!==(this._mfi_lastSize=1e4*t+n)&&(this._mfi_lastSizeChangeDate=o);var l=o-this._mfi_lastSizeChangeDate<this.RECENT_CHANGE_TIME?0:a?this.DEFAULT_FADE_DURATION:this.INITIAL_FADE_DURATION;if(e){var c=Wj({cropRect:i,imageWidth:e.width,imageHeight:e.height,viewportWidth:t,viewportHeight:n,needsBlurRadius:!this.derivativeLoader.isPerfect}),u=c.rect,d=c.blurRadius;if(yl.c(e).set(u).set("filter",d?"blur("+d+"px)":void 0).layerBackIf(d),!e.parentNode&&(this.element.appendChild(e),l)){var h=s;oO(e,0,1,l,(function(){h&&!r.isDisposed&&r.element.removeChild(a)})),s=!1}}s&&this.element.removeChild(a)}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareImageView"}}),qj=((Hj={}).PHOTOS=["ImportSuccess.Placard.Photos.0","ImportSuccess.Placard.Photos.1","ImportSuccess.Placard.Photos.2","ImportSuccess.Placard.Photos.More"],Hj.VIDEOS=["ImportSuccess.Placard.Videos.0","ImportSuccess.Placard.Videos.1","ImportSuccess.Placard.Videos.2","ImportSuccess.Placard.Videos.More"],Hj.ITEMS=["ImportSuccess.Placard.Items.0","ImportSuccess.Placard.Items.1","ImportSuccess.Placard.Items.2","ImportSuccess.Placard.Items.More"],Hj),Qj=n(684),Yj=In.a.extend(Nu,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"text",attributes:{}}]}]},className:"share-import-status",__QUALIFIED_CLASS_NAME__:"ShareImportStatusView"},icon:Qj,importedAssetDescriptor:V.b(""),importedAssetCount:V.b(0),text:V.b({readOnly:!0,dependencies:["importedAssetCount","importedAssetDescriptor"],get:Object.assign((function(){var e=this.importedAssetCount,t=this.importedAssetDescriptor,n=qj[t];if(e>0&&""!==t&&void 0!==t)return Md(n,{count:e})}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=qj[a];if(r>0&&""!==a&&void 0!==a)return Md(s,{count:r})}})})}),Zj={shareOwnerDisplayName:function(e){if(e){var t=Gd.a(e,"share.owner.userIdentity.nameComponents");if(void 0!==t)return Ne(t)}},shareDateRange:function(e){if(!e)return"";var t=e.startDate,n=e.endDate;if(t||(t=n),n||(n=t),!t)return"";var i=Wp.formatStyle.MEDIUM;return Wp.fmt(t,n,i)},shareTitle:function(e){return e&&Gd.a(e,"share.title")||""},shareTitleOrDate:function(e){return e?Gd.a(e,"share.title")||Zj.shareDateRange(e):""}},Xj=In.a.extend({mixinDependencies:[fl.a,aE.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareImageView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"mainTitleText",attributes:{}}],classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"dateRangeText",attributes:{}}],classes:["date-range"]}],name:"titleAndDateContainer",classes:["title-and-date-container"]},{type:"VIEWOUTLET",tagname:"view",name:"shareImportStatusView"}],classes:["share-placard-view"]},__QUALIFIED_CLASS_NAME__:"SharePlacardView"},rootRecord:V.b(),availableHeightToDesire:V.b(),minimumHeight:V.b(0),equilibriumAspectRatio:V.b({readOnly:!0,dependencies:["viewportWidth"],get:Object.assign((function(){var e=this.viewportWidth;return e<400?16/9:e<920?(e-400)/520*(2.3-16/9)+16/9:e<1250?(e-920)/330*(3.2-2.3)+2.3:3.2}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r<400?16/9:r<920?(r-400)/520*(2.3-16/9)+16/9:r<1250?(r-920)/330*(3.2-2.3)+2.3:3.2}})}),equilibriumHeight:V.b({readOnly:!0,dependencies:["viewportWidth","equilibriumAspectRatio","minimumHeight","availableHeightToDesire"],get:function(){var e=this.availableHeightToDesire,t=void 0===e?1/0:e,n=this.viewportWidth,i=this.equilibriumAspectRatio,r=this.minimumHeight,a=n/i,s=Math.min(t,a),o=Math.max(r,s);return Math.round(o)}}),shareTitle:V.b(Oi.c("rootRecord.share.title")),shareDateRange:V.b({readOnly:!0,dependencies:["rootRecord.startDate","rootRecord.endDate"],get:function(){return Zj.shareDateRange(this.rootRecord)}}),mainTitleText:V.b({readOnly:!0,dependencies:["shareTitle","shareDateRange"],get:function(){return Zj.shareTitleOrDate(this.rootRecord)}}),dateRangeText:V.b({readOnly:!0,dependencies:["shareTitle","shareDateRange"],get:Object.assign((function(){return this.shareTitle?this.shareDateRange:""}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n]):""}})}),importedAssetDescriptor:V.b(),importedAssetCount:V.b(),shareImportStatusView:V.b({readOnly:!0,dependencies:["importedAssetCount"],get:Object.assign((function(){if(this.importedAssetCount>0)return this._shareImportStatusView}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])>0)return this._shareImportStatusView}}),downstreamBindings:{importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount"}}),shareImageView:V.b({strong:!0,defaultValue:k.c(Kj,{isViewportSizeDOMReadingEnabled:!1}),downstreamBindings:{rootRecord:"(owner).rootRecord",viewportWidth:"(owner).viewportWidth",viewportHeight:"(owner).viewportHeight"}}),_shareImportStatusView:k.c(Yj),_maintainLayoutSoon:B.h({inputs:["isAttached","viewportWidth","dateRangeText","mainTitleText","primaryInteractionMode"],callback:function(){this._layoutTimeout||(this._layoutTimeout=iE.b(this._maintainLayout))}}),_maintainLayout:Bu.b((function(){if(!this.isDisposed){this._layoutTimeout=void 0;var e=this.isAttached,t=this.viewportWidth,n=this.dateRangeText,i=this.mainTitleText,r=this.primaryInteractionMode;if(e&&t&&(n||i)&&r){var a=this.titleAndDateContainer,o=a.style,l=s.a.sharedInstance.isRTL?"right":"left",c=this._measuredTADContainerInset||(this._measuredTADContainerInset=parseFloat(yl.c(a).get(l))),u=this._measuredMinimumTADContainerHeight;if(!u){var d=o.width;o.width="100000px",u=this._measuredMinimumTADContainerHeight=a.offsetHeight,o.oldWidth=d}var h=t-2*c;o.width=h+"px";var p=$V(this.mainTitleText,h,yl.c(this.titleAndDateContainer).get("font"),{numberOfLines:2});a.firstChild.textContent=p;var f=this._finalTADContainerHeight=a.offsetHeight,g=this._measuredTADContainerTop||(this._measuredTADContainerTop=a.offsetTop);this.minimumHeight=g+f}}})),_applyTADOffset:B.h("equilibriumHeight","viewportHeight","minimumHeight",(function(e,t,n){e&&t&&n&&yl.c(this.titleAndDateContainer).translateDevicePixels(0,NaN)}))}),Jj=s.d("LegalFooterView.Text.Fragment.PrivacyUrl.Href"),eU=s.d("LegalFooterView.Text.Fragment.PrivacyUrl.Title"),tU=s.d("LegalFooterView.Text.Fragment.TermsUrl.Href"),nU=s.d("LegalFooterView.Text.Fragment.TermsUrl.Title"),iU=In.a.extend({mixinDependencies:[Kp.a,qp.b,fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"a",classes:["apple-icon"],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appleDotComTitle",attributes:{},attribute:"title"},href:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appleDotComUrl",attributes:{},attribute:"href"},target:"_blank"}},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"appleLegalHtml",attributes:{escape:"false"}}],classes:["cmm-legal-footer-content"]}]}},className:"cmm-legal-footer",__QUALIFIED_CLASS_NAME__:"LegalFooterView"},appleDotComUrl:V.b(s.d("LegalFooterView.AppleDotComUrl.Href")),appleDotComTitle:V.b(s.d("LegalFooterView.AppleDotComUrl.Title")),appleLegalHtml:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){var e,t=this.primaryInteractionMode;if(t){switch(t){case yn.a.TOUCH:e=".Mobile";break;case yn.a.MOUSE:e=".Desktop";break;default:u.b.warn("Unexpected primaryInteractionMode="+t+"; Using MOUSE"),e=".Desktop"}var n=(new Date).getFullYear(),i=s.d("LegalFooterView.Text.Fragment.Copyright",{year:n});return s.d("LegalFooterView.Text"+e,{privacyAnchorTag:'<a class="privacy expanded-touch-target" target="_blank" href="'+Jj+'">'+eU+"</a>",termsAnchorTag:'<a class="terms expanded-touch-target" target="_blank" href="'+tU+'">'+nU+"</a>",copyrightText:'<span class="copyright">'+i+"</span>"})}}),{__CW__getter:function(e,t,n,i){var r,a=i.internalGet(this,t[0+n]);if(a){switch(a){case yn.a.TOUCH:r=".Mobile";break;case yn.a.MOUSE:r=".Desktop";break;default:u.b.warn("Unexpected primaryInteractionMode="+a+"; Using MOUSE"),r=".Desktop"}var o=(new Date).getFullYear(),l=s.d("LegalFooterView.Text.Fragment.Copyright",{year:o});return s.d("LegalFooterView.Text"+r,{privacyAnchorTag:'<a class="privacy expanded-touch-target" target="_blank" href="'+Jj+'">'+eU+"</a>",termsAnchorTag:'<a class="terms expanded-touch-target" target="_blank" href="'+tU+'">'+nU+"</a>",copyrightText:'<span class="copyright">'+l+"</span>"})}}})}),init:function(){var e=this,t=arguments;e.__s._$tn$init.apply(e,t);var n=Zp.b.create({gestureWasRecognized:U.a,delegate:this,shouldPreventDefault:!1});this.addGestureRecognizer(n)},__superMap:{_$tn$init:"init"}}),rU=Ec.cmmUIPhotosMaxWidthDesktop,aU=rC("IncompleteStatePageView.Sharing.Incomplete."),sU=rC("IncompleteStatePageView.Sharing.Incomplete.Originator."),oU=yn.a,lU=(oU.MOUSE,oU.TOUCH,In.a.extend({mixinDependencies:[fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sharePlacardView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"sharingPhotosSubtitle",attributes:{}}],classes:["subtitle"]},{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"sharingPhotosText",attributes:{}}],classes:["title"]}],classes:["incomplete-share-info"],name:"incompleteShareInfo"},{type:"VIEWOUTLET",tagname:"view",name:"legalFooterView"}]}},className:"cmm-incomplete-state-page",__QUALIFIED_CLASS_NAME__:"IncompleteStatePageView"},originatorName:V.b(),viewportWidth:V.b(),shareInfoMaxWidth:V.b({readOnly:!0,dependencies:["isAttached","primaryInteractionMode","viewportWidth"],get:Object.assign((function(){var e,t=this.primaryInteractionMode,n=this.viewportWidth;return e=t===yn.a.TOUCH?n-46:n-60,Math.min(rU,e)}),{__CW__getter:function(e,t,n,i){var r,a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return r=a===yn.a.TOUCH?s-46:s-60,Math.min(rU,r)}})}),_shareInfoMaxWidthObserver:B.h({inputs:["shareInfoMaxWidth"],callback:function(e){yl.c(this.incompleteShareInfo,{"max-width":e+"px"}),yl.c(this.legalFooterView.element,{"max-width":e+"px"})}}),sharePlacardView:V.b({strong:!0,defaultValue:k.c(Xj),downstreamBindings:{rootRecord:"(owner).rootRecord",viewportHeight:"(owner).sharePlacardView.equilibriumHeight",viewportWidth:"(owner).shareInfoMaxWidth"}}),sharingPhotosSubtitle:V.b(s.d("IncompleteStatePageView.Check")),sharingPhotosText:V.b({readOnly:!0,dependencies:["rootRecord","originatorName","currentUserIsShareOwner"],get:Object.assign((function(){var e=this.rootRecord,t=this.originatorName,n=this.currentUserIsShareOwner;if(e&&t){var i=e.photosCount,r=void 0===i?0:i,a=e.videosCount,s=void 0===a?0:a,o=e.assetCount,l=void 0===o?0:o,c=iC(l,r,s);return n?Md(sU[c],{count:l}):Md(aU[c],{count:l,originatorName:t})}return""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);if(r&&a){var o=r.photosCount,l=void 0===o?0:o,c=r.videosCount,u=void 0===c?0:c,d=r.assetCount,h=void 0===d?0:d,p=iC(h,l,u);return s?Md(sU[p],{count:h}):Md(aU[p],{count:h,originatorName:a})}return""}})}),legalFooterView:V.b({type:iU,defaultValue:k.c(iU)}),currentUserIsShareOwner:V.b(),rootRecord:V.b()}));function cU(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var uU={mixinDependencies:[B.b],rootRecord:V.b(),shortGUID:V.b(Oi.c("rootRecord.shortGUID")),rootRecordPK:V.b({didChange:function(e){void 0!==e&&this.resolveRootRecordPK(e)}}),dataManager:V.b(L.n),feedbackService:V.b(Oi.c("dataManager.feedbackService")),resolveRootRecordPK:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=on.find(e),r=i.container,Pe.a.pause(),n.container=r,n.rootRecord=i,Pe.a.resume();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){cU(a,i,r,s,o,"next",e)}function o(e){cU(a,i,r,s,o,"throw",e)}s(void 0)}))})()},currentPlatformType:V.b({type:String,readOnly:!0,defaultValue:function(){return ao.a.sharedInstance.current}}),shareRecordOwnerDisplayName:V.b({dependencies:["rootRecord"],type:String,readOnly:!0,get:Object.assign((function(){return Zj.shareOwnerDisplayName(this.rootRecord)}),{__CW__getter:function(e,t,n,i){return Zj.shareOwnerDisplayName(i.internalGet(this,t[0+n]))}})}),currentUserIsShareOwner:V.b({dependencies:["dataManager.userRecordName","rootRecord"],type:Boolean,readOnly:!0,get:Object.assign((function(){var e=this.dataManager;return void 0!==e&&e.isRecordOwnedByCurrentUser(this.rootRecord)}),{__CW__getter:function(e,t,n,i){var r=this.dataManager;return void 0!==r&&r.isRecordOwnedByCurrentUser(i.internalGet(this,t[1+n]))}})})};function dU(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var hU={shouldNavigateAwayWhenZoneIsDeleted:V.b(!1),zone:V.b(),isAuthenticated:V.b(),finishedFetchingZones:V.b(!1),hasZoneFetchErrorOccurred:V.b(!1),zoneWasDeleted:B.h({inputs:["shouldNavigateAwayWhenZoneIsDeleted","zone.deleted","isAuthenticated"],callback:function(e,t,n){e&&t&&n&&this.actionForWhenZoneIsDeleted()}}),zoneChangesPollingObserver:B.h({inputs:["isAttached","isAuthenticated"],callback:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=L.n(),!e||!t){n.next=13;break}return n.prev=2,n.next=5,r.startFetchingZonesForShareListingPage();case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),i.hasZoneFetchErrorOccurred=!0;case 10:i.finishedFetchingZones=!0,n.next=14;break;case 13:r.stopFetchingZonesForShareListingPage();case 14:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){dU(a,i,r,s,o,"next",e)}function o(e){dU(a,i,r,s,o,"throw",e)}s(void 0)}))})()}}),actionForWhenZoneIsDeleted:function(){this.sendEvent("popToRootViewController")}};function pU(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var fU={acceptShare:B.h({inputs:["currentUserIsShareOwner","isAuthenticated","rootRecord"],callback:function(e,t,n){return(i=regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(n instanceof Object&&!0===t&&!1===e)){i.next=9;break}return i.prev=1,i.next=4,n.accept();case 4:i.next=9;break;case 6:i.prev=6,i.t0=i.catch(1),u.b.warn("CMMShare could not be accepted",i.t0);case 9:case"end":return i.stop()}}),i,null,[[1,6]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){pU(a,n,r,s,o,"next",e)}function o(e){pU(a,n,r,s,o,"throw",e)}s(void 0)}))})();var i}})},gU={name:"ellipsis.circle.fill",svgPath:"M 58.5449 14.5508 C 85.791 14.5508 108.35 -8.00781 108.35 -35.2539 C 108.35 -62.4512 85.7422 -85.0586 58.4961 -85.0586 C 31.2988 -85.0586 8.74023 -62.4512 8.74023 -35.2539 C 8.74023 -8.00781 31.3477 14.5508 58.5449 14.5508 Z M 41.3574 -35.2051 C 41.3574 -31.3477 37.9395 -27.9297 34.0332 -27.9297 C 30.127 -27.9297 26.8066 -31.3477 26.8066 -35.2051 C 26.8066 -39.1113 30.0293 -42.5293 34.0332 -42.5293 C 37.9395 -42.5293 41.3574 -39.0625 41.3574 -35.2051 Z M 65.7227 -35.2051 C 65.7227 -31.3477 62.4023 -27.9297 58.4961 -27.9297 C 54.5898 -27.9297 51.2695 -31.3477 51.2695 -35.2051 C 51.2695 -39.1113 54.541 -42.5293 58.4961 -42.5293 C 62.4023 -42.5293 65.7227 -39.0625 65.7227 -35.2051 Z M 90.1855 -35.2051 C 90.1855 -31.3477 86.9141 -27.9297 82.959 -27.9297 C 79.0527 -27.9297 75.6836 -31.3477 75.6836 -35.2051 C 75.6836 -39.1113 79.0039 -42.5293 82.959 -42.5293 C 86.9141 -42.5293 90.1855 -39.0625 90.1855 -35.2051 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:47.778210449218705,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6572265625",width:99.6097412109375,height:99.6572265625,translateX:-8.740283203125045,translateY:85.05859375,baseline:85.05859375,capline:14.5986328125}},mU=Ho.a.extend(DM,{mixinDependencies:[fl.a],additionalClassNames:F.b(["dot-dot-dot-button"]),symbolMetadata:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?VB:gU}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?VB:gU}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"DotDotDotButton"}});function _U(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var vU={currentUserIsShareOwner:V.b(),locPrefix:V.b({dependencies:["currentUserIsShareOwner"],readOnly:!0,type:String,get:Object.assign((function(){return!0===this.currentUserIsShareOwner?"StopSharingButton":"RemoveFromShareButton"}),{__CW__getter:function(e,t,n,i){return!0===i.internalGet(this,t[0+n])?"StopSharingButton":"RemoveFromShareButton"}})}),_showStopSharingAlertConfirmationAlert:function(){var e={title:s.d(this.locPrefix+".Alert.Button.Cancel"),isCancel:!0},t={title:s.d(this.locPrefix+".Alert.Button.Confirm"),target:this,action:"_deleteShare",additionalClassNames:F.b(["destructive"]),isPrimary:!0},n={iconNames:["photos-icon"],description:s.d(this.locPrefix+".Alert.Description"),alwaysRenderAsAlert:!0,buttons:[t,e]};this.primaryInteractionMode===yn.a.MOUSE&&(n.message=s.d(this.locPrefix+".Alert.Message")),Vl.show(n)},_deleteShare:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.zone,i=t.currentUserIsShareOwner,e.prev=1,n){e.next=4;break}throw new TypeError("Expected zone to not be undefined");case 4:return(r=G.a.application.feedbackService)&&r.report&&r.report(i?"cmmShareStopped":"cmmShareRemoved"),e.next=8,n.delete();case 8:t.actionsToTakeAfterShareDeletion(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),u.b.error("Failed to remove share",e.t0),wn.b.show({iconNames:["photos-icon","error"],message:s.d(t.locPrefix+".Error.Alert.Message"),primaryButton:{title:s.d(t.locPrefix+".Error.Alert.Button"),action:"hide"}});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){_U(a,i,r,s,o,"next",e)}function o(e){_U(a,i,r,s,o,"throw",e)}s(void 0)}))})()},actionsToTakeAfterShareDeletion:U.a},bU=Ho.a.extend(vU,{mixinDependencies:[fl.a],additionalClassNames:F.b(["destructive"]),title:V.b({dependencies:["locPrefix"],readOnly:!0,type:String,get:Object.assign((function(){return s.d(this.locPrefix+".Title")}),{__CW__getter:function(e,t,n,i){return s.d(i.internalGet(this,t[0+n])+".Title")}})}),action:"_showStopSharingAlertConfirmationAlert",zone:V.b(),currentUserIsShareOwner:V.b(),navigateToShareListingPage:U.a,dataManager:V.b(L.n),actionsToTakeAfterShareDeletion:function(e){var t=this.dataManager;this.navigateToShareListingPage(),t.removeThisZoneFromTheOrderedCMMZones(e._cwStoreId)},staticMembers:{__QUALIFIED_CLASS_NAME__:"StopSharingButton"}}),yU=Zk.extend({mixinDependencies:[Ti.a,fl.a],rightBarButtonItem:V.b({dependencies:["dotDotDotMenuIsEmpty"],readOnly:!0,get:Object.assign((function(){if(!1===this.dotDotDotMenuIsEmpty)return this.dotDotDotButton}),{__CW__getter:function(e,t,n,i){if(!1===i.internalGet(this,t[0+n]))return this.dotDotDotButton}})}),dotDotDotButton:V.b({defaultValue:k.c(mU.extend({action:"showDotDotDotMenu"})),downstreamBindings:{target:"(owner)"},readOnly:!0,strong:!0,type:mU}),showDotDotDotMenu:function(){var e=[{action:"hide",isPrimary:!0,title:s.d("CMMReceiver.DotDotDotMenu.Cancel")}];void 0!==this.copyLinkMenuButton&&e.push(this.copyLinkMenuButton),void 0!==this.shareBackMenuButton&&e.push(this.shareBackMenuButton),void 0!==this.stopSharingMenuButton&&e.push(this.stopSharingMenuButton),e.forEach((function(e){e.isDisabled=!1})),this._dotDotDotMenu=Vl.show({anchor:this.dotDotDotButton,buttons:e})},hideDotDotDotMenu:function(){this._dotDotDotMenu&&(this._dotDotDotMenu.hide(),this._dotDotDotMenu=void 0)},dotDotDotMenuIsEmpty:V.b({dependencies:["copyLinkMenuButton","shareBackMenuButton","stopSharingMenuButton"],readOnly:!0,type:Boolean,get:Object.assign((function(){var e=this.copyLinkMenuButton,t=this.shareBackMenuButton,n=this.stopSharingMenuButton;return void 0===e&&void 0===t&&void 0===n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);return void 0===r&&void 0===a&&void 0===s}})}),stopSharingMenuButton:V.b({dependencies:["isAuthenticated","primaryInteractionMode"],readOnly:!0,type:Ho.a,get:Object.assign((function(){var e=this;if(!0===this.isAuthenticated)return bU.create({zone:this.bindingFor("zone"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),navigateToShareListingPage:function(){return e.navigateToShareListingPage()}})}),{__CW__getter:function(e,t,n,i){var r=this;if(!0===i.internalGet(this,t[0+n]))return bU.create({zone:this.bindingFor("zone"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),navigateToShareListingPage:function(){return r.navigateToShareListingPage()}})}})}),shareBackMenuButton:V.b({dependencies:["primaryInteractionMode","shareBackReadyForDisplay"],readOnly:!0,type:Ho.a,get:Object.assign((function(){if(!0===this.shareBackReadyForDisplay)return Ho.a.create({target:this,action:"shareBackPressed",title:s.d("CMMReceiver.DotDotDotMenu.ShareBack")})}),{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[1+n]))return Ho.a.create({target:this,action:"shareBackPressed",title:s.d("CMMReceiver.DotDotDotMenu.ShareBack")})}})}),copyLinkMenuButton:V.b({dependencies:["primaryInteractionMode","isAuthenticated"],readOnly:!0,type:Ho.a,get:Object.assign((function(){if(!0===this.isAuthenticated)return Ho.a.create({target:this,action:"copyLinkPressed",title:s.d("CMMReceiver.DotDotDotMenu.CopyLink")})}),{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[1+n]))return Ho.a.create({target:this,action:"copyLinkPressed",title:s.d("CMMReceiver.DotDotDotMenu.CopyLink")})}})}),copyLinkPressed:function(){var e=G.a.application.feedbackService,t={beginStat:U.a,endStat:U.a,recordStat:e?e.report:U.a},n=this.currentUserIsShareOwner,i=this.hostedByCloudOSOne,r=this.primaryInteractionMode,a=this.rootRecord;e&&e.report&&e.report("cmmShareCopyLink"),gC.showCopyLink(a,r,n,t,i)},shareBackPressed:function(){this.sendEvent("viewShareBack")},zone:V.b({dependencies:["container"],readOnly:!0,get:function(){return this.getPath("container.zone")}}),navigateToShareListingPage:U.a,shouldHideGlobalProgressBar:V.b(!0),container:V.b(),currentUserIsShareOwner:V.b(),isAuthenticated:V.b(),nextResponder:V.b(),shareBackReadyForDisplay:V.b(),hostedByCloudOSOne:V.b(),rootRecord:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageNavItem"}}),wU=fi.a.extend({mixinDependencies:[CA,uU,fU,hU],viewClass:lU,view:V.b({downstreamBindings:{currentUserIsShareOwner:"(owner).currentUserIsShareOwner",rootRecord:"(owner).rootRecord",viewportWidth:"(owner).viewportWidth",originatorName:"(owner).shareRecordOwnerDisplayName"}}),viewportWidth:V.b(te.a.sharedInstance.window.bindingFor("width")),cleanup:function(){var e=this,t=arguments;this.container&&(this.container=void 0),e.__s._$Ne$cleanup.apply(e,t)},container:V.b({strong:!0,type:jt.a,didChange:function(e){var t=this._lastContainer;t&&t.endPolling(),this._lastContainer=e,e&&e.beginPolling()}}),zone:V.b(Oi.c("container.zone")),shouldNavigateAwayWhenZoneIsDeleted:V.b(!0),isAuthenticated:V.b(),hostedByCloudOSOne:!1,navItem:V.b({readOnly:!0,strong:!0,type:yU,get:function(){var e=this;return yU.create({container:this.bindingFor("container"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),isAuthenticated:this.bindingFor("isAuthenticated"),rootRecord:this.bindingFor("rootRecord"),hostedByCloudOSOne:this.hostedByCloudOSOne,nextResponder:this,shareBackReadyForDisplay:!1,navigateToShareListingPage:function(){return e.navigateToShareListingPage()}})}}),_containerMediasObserver:B.h({inputs:["container.medias.length"],callback:function(e){void 0!==e&&e>0&&!0===on.isShareCompleteEnough(this.rootRecord,this.container)&&(this.navItem.hideDotDotDotMenu(),this.shareIsCompleteEnough(this.rootRecordPK))}}),viewDidLoad:function(){var e=this.feedbackService;e&&e.report("shareIncomplete")},shareIsCompleteEnough:U.a,navigateToShareListingPage:U.a,__superMap:{_$Ne$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"IncompleteStatePageViewController"}}).extend({mixinDependencies:[bj,Jl,VC,FC],container:V.b({strong:!0}),parentRoute:V.b({readOnly:!0,get:function(){var e=this.getPath("dataManager.cplSystemContainersMap");if(e){var t=e.get(jt.a.PredefinedName.MOMENTS);if(t)return{routeName:"container",options:{container:t}}}}}),toolbarConfiguration:V.b({defaultValue:k.c(hu),downstreamBindings:{parentRoute:"(owner).parentRoute"}}),navigateToReceiverPage:function(){this.sendEvent("navigateTo",{routeName:"cmmReceiver",options:{rootRecordPK:this.rootRecord.pk}})},staticMembers:{__QUALIFIED_CLASS_NAME__:"P2IncompleteStatePageViewController"}}),IU={mixinDependencies:[xw],userSelectionRequest:function(e){var t=this,n=arguments,i=e.view,r=this.selectionController,a=this.selection;i&&i!==this.view?i.content&&t.__s._$Fv$userSelectionRequest.apply(t,n):a&&a.length&&r.clearSelection()},selectSection:function(e){if(e&&!e.isPlaceholder){var t=this.collection,n=t.sections,i=t.source,r=n.indexOf(e),a=t._sectionIndexCache[r],s=this.selectionController,o=a.startIndex,l=i.handleProvider,c=l.at(o),u=l.at(a.endIndex);s.selectRange(c,u),s.pivot=s.extendedTo=t.startHandle.at(o)}},deselectSection:function(e){if(e&&!e.isPlaceholder){var t=this.collection,n=t.sections,i=t.source,r=n.indexOf(e),a=t._sectionIndexCache[r],s=this.selectionController,o=a.startIndex,l=a.endIndex,c=s.selectedIndices,u=null;if(c.length>1){var d=c.lastIndexBefore(o);-1===d&&(d=c.firstIndexAfter(l)),-1!==d&&(u=t.startHandle.at(d))}var h=i.handleProvider,p=h.at(o),f=h.at(a.endIndex);s.deselectRange(p,f),!u||!u.isDisposed&&u.isValid||(u=null),s.pivot=s.extendedTo=u}},isSectionFullySelected:function(e){var t=this.selectionController.selectedIndices;if(!t||!t.length)return!1;var n=this.collection,i=n.sections.indexOf(e),r=n._sectionIndexCache[i];return!!r&&t.contains(r.startIndex,r.endIndex)},isSectionPartiallySelected:function(e){if(!e)return!1;if(e.isPlaceholder)return!1;var t=this.selectionController.selectedIndices;if(!t||!t.length)return!1;for(var n=this.collection,i=n.sections.indexOf(e),r=n._sectionIndexCache[i],a=r.startIndex,s=r.endIndex,o=a;o<=s;o++)if(t.contains(o))return!0;return!1},selectionController:F.b({clearSelection:function(){var e=this,t=arguments;e.__s._$1ma$clearSelection.apply(e,t),this.propertyChanged("selectedIndices"),this.selectionDidChange(),this.owner.update()},selectRange:function(){var e=this,t=arguments;e.__s._$1pS$selectRange.apply(e,t),this.propertyChanged("selectedIndices"),this.selectionDidChange(),this.owner.update()},deselectRange:function(){var e=this,t=arguments;e.__s._$1sM$deselectRange.apply(e,t),this.propertyChanged("selectedIndices"),this.selectionDidChange(),this.owner.update()},__superMap:{_$1ma$clearSelection:"clearSelection",_$1pS$selectRange:"selectRange",_$1sM$deselectRange:"deselectRange"}}),getSelectedMediaPKs:function(){var e=this.selectionController.selection.encodedToArray(),t=L.n().constructor.getPrimaryKeyForStoreId;return e.map((function(e){return t(e)}))},__superMap:{_$Fv$userSelectionRequest:"userSelectionRequest"}},SU=YA.extend({mixinDependencies:[fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"placeholderLoadingSpinner"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["title"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"startingDate",attributes:{}}],classes:["date"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["subtitle"]}],classes:["sub-desc"]}],classes:["moment-details",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasTitleOrSubtitle",truevalue:"",falsevalue:"title-only",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowSpinner",truevalue:"is-loading",attributes:{}}]},{type:"VIEWOUTLET",tagname:"view",name:"selectMomentToggle"}]}},className:"moments-grid-header-view",__QUALIFIED_CLASS_NAME__:"MomentsGridHeaderView"},content:V.b(),owningGrid:V.b(),title:V.b(),subtitle:V.b(),startingDate:V.b(),isPooledInDom:V.b(),isBeingHovered:V.b(!1),pointerEnter:function(){this.isBeingHovered=!0},pointerLeave:function(){this.isBeingHovered=!1},hasTitleOrSubtitle:V.b({type:Boolean,readOnly:!0,dependencies:["content.title","content.subtitle"],get:function(){var e=this.content;return Boolean(e&&(e.title||e.subtitle))}}),shouldShowSelectionToggle:V.b({readOnly:!0,type:Boolean,dependencies:["isPlaceholderMoment","isBeingHovered","owningGrid.hoveredMoment","owningGrid.isSelectionEnabled","primaryInteractionMode"],get:Object.assign((function(){var e=this.isPlaceholderMoment,t=this.isBeingHovered,n=this.owningGrid,i=this.content,r=n.hoveredMoment,a=n.isSelectionEnabled,s=n.primaryInteractionMode;return!e&&(!(s!==yn.a.MOUSE||!t&&r!==i)||!(s!==yn.a.TOUCH||!a))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this.owningGrid,o=this.content,l=s.hoveredMoment,c=s.isSelectionEnabled,u=s.primaryInteractionMode;return!r&&(!(u!==yn.a.MOUSE||!a&&l!==o)||!(u!==yn.a.TOUCH||!c))}})}),isPlaceholderMoment:V.b(Oi.c("content.isPlaceholder")),isSectionPartiallySelected:V.b({readOnly:!0,dependencies:["content","owningGrid.selection","shouldShowSelectionToggle"],get:Object.assign((function(){var e=this.owningGrid,t=this.content,n=this.isPlaceholderMoment,i=this.shouldShowSelectionToggle;return!(n||!i)&&e.isSectionPartiallySelected(t)}),{__CW__getter:function(e,t,n,i){var r=this.owningGrid,a=i.internalGet(this,t[0+n]),s=this.isPlaceholderMoment,o=i.internalGet(this,t[2+n]);return!(s||!o)&&r.isSectionPartiallySelected(a)}})}),shouldShowSpinner:V.b({readOnly:!0,dependencies:["isPooledInDom","isPlaceholderMoment"],get:Object.assign((function(){return!this.isPooledInDom&&this.isPlaceholderMoment}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),placeholderLoadingSpinner:V.b({readOnly:!0,defaultValue:k.c(Jc.a,{size:20}),downstreamBindings:{isVisible:"(owner).shouldShowSpinner"}}),selectMomentToggle:V.b({readOnly:!0,dependencies:["isAttached","shouldShowSelectionToggle","isSectionPartiallySelected"],get:Object.assign((function(){if(this.isAttached){var e=this.shouldShowSelectionToggle,t=this.isSectionPartiallySelected;if(e){var n=this._selectMomentToggle,i=t?"Deselect":"Select";return n.title=s.d("Moments.Grid.Header.Toggle.Selection."+i),n.tooltip=s.d("Moments.Grid.Header.Toggle.Selection."+i+".Tooltip"),n}}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[2+n]);if(r){var o=this._selectMomentToggle,l=a?"Deselect":"Select";return o.title=s.d("Moments.Grid.Header.Toggle.Selection."+l),o.tooltip=s.d("Moments.Grid.Header.Toggle.Selection."+l+".Tooltip"),o}}}})}),_selectMomentToggle:V.b({readOnly:!0,defaultValue:k.c(Ho.a,{additionalClassNames:F.b(["toggle-moment-select","expanded-touch-target"]),action:"toggleSectionSelection",title:s.d("Moments.Grid.Header.Toggle.Selection.Select"),tooltip:s.d("Moments.Grid.Header.Toggle.Selection.Select.Tooltip")})}),toggleSectionSelection:function(){var e=this.content,t=this.owningGrid;this.isSectionPartiallySelected?t.deselectSection(e):t.selectSection(e)},_updateText:B.h({inputs:["content","content.title","content.subtitle","content.startingDate","content.itemCount",Wp.bindingFor("dateOrTimezoneDidChange")],callback:function(e,t,n,i){if(void 0!==e){var r,a=t&&t.localizedTitleForNameInfo(),o=n&&n.localizedTitleForNameInfo();i&&(r=Wp.fmt(i)),a||o?(i&&(r=r.replace(/^\\/,"")),a=a||o,o=o||""):i?(a=r,r=""):a=s.d("Moments.Moment.Title.Progress"),this.title=a,this.subtitle=o,this.startingDate=r}}})}),CU={layoutMetrics:F.b({hasHeaders:!0,hasFloatingHeaders:!0,headerHeight:V.b({dependencies:["sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){return this.sizeClass===dn.a.COMPACT?60:40}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===dn.a.COMPACT?60:40}})}),sectionSpacing:V.b({dependencies:["sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){return this.sizeClass===dn.a.COMPACT?10:33}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===dn.a.COMPACT?10:33}})})}),presenter:F.b({viewClassKeysByCellType:F.b({hoverCatcher:"hoverCatcherViewClass"}),hoverCatcherViewClass:In.a.extend({additionalClassNames:["moments-grid-hover-catcher"],pointerEnter:function(){this.isPooledInDom||this.sendEvent("momentHovered",this)},pointerLeave:function(){this.isPooledInDom||this.sendEvent("momentNotHovered",this)},clearForReuse:function(){this.sendEvent("momentNotHovered",this),this.style.translate(-1e4,-1e4)}})}),selectionController:F.b({__lastItemChange:void 0,updateSelectionForCollectionChange:function(e){var t=this,n=arguments,i=e.itemsChanges;if(i&&i.length){var r=i[i.length-1];if(r&&r===this.__lastItemChange)return;this.__lastItemChange=r}else this.__lastItemChange=void 0;t.__s._$10N$updateSelectionForCollectionChange.apply(t,n)},__superMap:{_$10N$updateSelectionForCollectionChange:"updateSelectionForCollectionChange"}}),userSelectionRequest:function(e){var t=this,n=arguments,i=e.view;return pi.a(i,this.presenter.hoverViewClass)?t.__s._$13H$userSelectionRequest.call(t,{view:null,operation:e.operation}):t.__s._$13H$userSelectionRequest.apply(t,n)},itemViewClass:F.b({pointerEnter:function(){var e=this,t=arguments;e.__s._$1Ay$pointerEnter.apply(e,t),this.isPooledInDom||this.sendEvent("momentHovered",this)},pointerLeave:function(){var e=this,t=arguments;e.__s._$1EQ$pointerLeave.apply(e,t),this.isPooledInDom||this.sendEvent("momentNotHovered",this)},clearForReuse:function(){var e=this,t=arguments;e.__s._$1Gu$clearForReuse.apply(e,t),this.sendEvent("momentNotHovered",this)},__superMap:{_$1Ay$pointerEnter:"pointerEnter",_$1EQ$pointerLeave:"pointerLeave",_$1Gu$clearForReuse:"clearForReuse"}}),headerViewClass:SU,hoveredMoment:V.b({dependencies:["hoveredHandle"],readOnly:!0,get:Object.assign((function(){var e=this.hoveredHandle;return e&&e.value}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r&&r.value}})}),hoveredHandle:V.b(),sectionHandleForView:function(e){var t=this.presenter.cellForView(e),n=t.handle;return"item"===t.cellType&&(n=n.sectionHandle),n},momentHovered:function(e){this.hoveredHandle=this.sectionHandleForView(e)},momentNotHovered:function(e){this.hoveredHandle===this.sectionHandleForView(e)&&(this.hoveredHandle=null)},layoutDelegate:F.b({cellClassKeysByCellType:F.b({hoverCatcher:"hoverCatcherCellClass"}),hoverCatcherCellClass:km.a.extend({isReusable:!1}),completeVisibleCells:function(e,t,n){var i=this,r=this,a=arguments;r.__s._$1eE$completeVisibleCells.apply(r,a);for(var s=e.layoutMetrics,o=s.sectionTopPadding+s.sectionHeaderPadding,l=o+s.sectionBottomPadding,c=n.length-1;c>=0;c--){var u=n.objectAt(c);if("header"===u.cellType){var d=function(){var e=u.handle,t=u.bottom;if(u.isFloatingToTop){var r=n.find((function(t){return t.handle.sectionHandle===e}));if(!r)return"continue";t=r.y-r.sectionY-o}var a=i.cellForHandle(e,"section").retain(i,"sectionCell"),s=i.cellForHandle(e,"hoverCatcher").retain(i,"hoverCatcher");u.hoverCatcherCell=s,s.y=t,s.x=u.x,s.width=u.width,s.height=a.height+l,s.isLaidOut=!0,n.insertAt(c+1,s),s.release(i,"hoverCatcher"),a.release(i,"sectionCell")}();if("continue"===d)continue}}},__superMap:{_$1eE$completeVisibleCells:"completeVisibleCells"}}),attemptTitleCreationForSharing:V.b(!0),_updateWhenContentsChange:B.g({inputs:["collection.contentsDidChange","collection.everythingChanged","collection._sectionsProxy.contentsDidChange","collection.sectionLengthsDidChange","collection._invalidateCacheOnSectionsContentsChange","collection.invalidateSectionLengthsOnContentsChange","collection._invalidateCacheOnSectionsChange","collection.handleProvider.handlesDidUpdate","collection.handleProvider.everythingChanged","collection._sectionsProxy.handleProvider.handlesDidUpdate","collection._sectionsProxy.handleProvider.everythingChanged","collection._sourceDidChange"],callback:function(e,t,n,i){(e||t||n||i)&&this.update(Gm.a.create({everythingChanged:Boolean(t),itemsChanges:e&&e.context,sectionsChanges:n&&n.context,invalidSections:i&&i.context}))}}),__superMap:{_$13H$userSelectionRequest:"userSelectionRequest"}},EU=Ij.extend({containerAdapterClass:mO,container:V.b({dependencies:["collection._provider.container"],readOnly:!0,get:Object.assign((function(){return this.collection._provider.container}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),assetCountShouldIncludeHiddenItems:V.b(!1),gridViewController:F.b(IU,CU),middleToolbarItem:V.b("routeSwitcher"),staticMembers:{__QUALIFIED_CLASS_NAME__:"P2MomentsPageViewController"}}),AU={mixinDependencies:[CA],oneUpPageViewControllerClass:void 0,userDidIndicateDesireToNavigateToMedia:function(e){var t=this.collection;if(!this.isTransitioning){var n=this.getOrCreateOneUpPageViewController();n.media=e,n.collection=t,n.selectionDelegate=this.gridViewController,this.showViewController(n);var i=L.n().feedbackService;i&&i.report("oneUpViewed")}},oneUpPageViewController:V.b({strong:!0,readOnly:!0,dependencies:["_cachedOneUpPageViewController"],get:Object.assign((function(){return this._cachedOneUpPageViewController}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),getOrCreateOneUpPageViewController:function(){return this._cachedOneUpPageViewController||(this._cachedOneUpPageViewController=this.oneUpPageViewControllerClass.create()),this._cachedOneUpPageViewController},_cachedOneUpPageViewController:V.b()};function OU(){Ud()}function TU(e,t,n,i,r){var a=Z.a.create(),o={title:s.d("CMMReceiver.UnauthenticatedSigninDialog.Button.SignInAndImport"),isPrimary:!0,wasActivated:function(){return n(t).then((function(e){return a.resolve(e),e}),(function(e){a.reject(e)}))}},l={title:s.d("CMMReceiver.UnauthenticatedSigninDialog.Button.Download"),wasActivated:function(){var e=this.parent&&this.parent.parent&&this.parent.parent.animationDuration||0;X.a((function(){i(t).then((function(e){return a.resolve(e),e}),(function(e){a.reject(e)}))}),e)}},c={title:s.d("CMMReceiver.UnauthenticatedSigninDialog.Button.Cancel"),isCancel:!0,isAlternate:!0,wasActivated:function(){a.resolve(!1)}},u=T(r?t.length:e.length),d={iconNames:["photos-icon"],message:s.d("CMMReceiver.UnauthenticatedSigninDialog.Message"),description:s.d("CMMReceiver.UnauthenticatedSigninDialog.Description.Items"+u),alwaysRenderAsAlert:!0,buttons:[o,l,c]};return Vl.show(d),a}function MU(e,t){return(MU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DU=function(e){var t,n;function i(t){var n;return(n=e.call(this)||this).rootRecord=t,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,MU(t,n),i.prototype.createDownloadDetailsForArchive=function(){return qd(this.rootRecord)},i}(Xd);function PU(e,t){return(PU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LU=function(e){var t,n;function i(t,n,i){var r;return(r=e.call(this,t,n)||this).rootRecord=i,r}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,PU(t,n),i.prototype.getIncludeExcludeIndices=function(e){var t=this.collection,n=this.container,i=this.rootRecord;if(!Boolean(void 0!==i&&void 0!==n&&n.isLoaded&&i.assetCount===n.medias.length))return{includeIndices:e};var r=Array.from(new Array(t.length).keys()).map((function(e){return t.encodedObjectAt(e)})),a=e,s=vV(a,r.length),o=a.filter((function(e){return!r[e]})).length,l=s.filter((function(e){return!r[e]})).length;return Math.ceil(o/30)+a.length/1e4<Math.ceil(l/30)+s.length/1e4?{includeIndices:a}:{excludeIndices:s}},i}(Bd);function RU(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var xU=uh.extend({prepareDownloadURL:function(e){var t=e.rootRecord,n=RU(e,["rootRecord"]),i=n.collection,r=n.container,a=new DU(t),s=new LU(i,r,t);return this.__s._$E0$prepareDownloadURL.call(this,Object.assign({},n,{includeExcludeRecordsLoader:s,downloadDetailsGenerator:a}))},downloadFromURL:function(e){var t=e.assetCount,n=e.libraryInfo,i=RU(e,["assetCount","libraryInfo"]);return this.__s._$Yx$downloadFromURL.call(this,Object.assign({feedbackStatGenerator:function(e,i){if(e&&t&&t>0&&n){var r=(n.audiosCount||0)+(n.othersCount||0);return{eventName:"shareDownload",stats:{didDownloadWholeZone:e===t,mediasCount:i.roundToNearestTen(e),otherItemsCount:i.roundToNearestTen(r)}}}}},i))},getZipURLGenerationParameters:function(e){var t=this,n=arguments,i=t.__s._$cW$getZipURLGenerationParameters.apply(t,n);return i.shareName=tn.RECORD_NAME,i},__superMap:{_$E0$prepareDownloadURL:"prepareDownloadURL",_$Yx$downloadFromURL:"downloadFromURL",_$cW$getZipURLGenerationParameters:"getZipURLGenerationParameters"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMDownloadMediasManager"}}),NU=n(286);function FU(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return VU(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VU(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function kU(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function BU(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){kU(a,i,r,s,o,"next",e)}function o(e){kU(a,i,r,s,o,"throw",e)}s(void 0)}))}}var jU,UU=P.a.extend(ie.a,B.b,{isPreparingToImportItems:V.b(!1),normalizeSelectedIndices:function(e,t,n){return n&&t.length>0?t.toArray():Array.from(Array(e.length).keys())},importMedias:function(e,t,n,i,r){var a=this;return BU(regeneratorRuntime.mark((function s(){var o,l,c,d,h,p,f;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.isPreparingToImportItems=!0,o=a.normalizeSelectedIndices(e,i,r),l=Boolean(void 0!==n&&void 0!==t&&t.isLoaded&&n.assetCount===t.medias.length),c={},l&&(d=a.getItemCountsWithoutLoadingIndices(e,n,o)),s.prev=5,d){s.next=10;break}return s.next=9,a.loadIndicesAndGetItemCounts(t,o);case 9:d=s.sent;case 10:return h=new LU(e,t,n),s.next=13,h.getIncludeExcludeRecords(o);case 13:p=s.sent,f=Object.assign({},p,{itemCounts:d,selectedIndices:i}),(c.recordCopierJob=JS.beginNewJob(Object.assign({sourceZoneID:t.zone.zoneID,targetZoneID:L.n().cplZone.zoneID,sourceShareName:"cmm-share"},f),f.includeRecords?f.includeRecords.length:f.excludeRecords?e.length-f.excludeRecords.length:0,uC.ADD_TO_LIBRARY.value)).retain().autorelease(),s.next=23;break;case 19:s.prev=19,s.t0=s.catch(5),u.b.error(s.t0 instanceof Error?s.t0.stack||s.t0.message:String(s.t0)),c.hasError=!0;case 23:return a.isPreparingToImportItems=!1,s.abrupt("return",c);case 25:case"end":return s.stop()}}),s,null,[[5,19]])})))()},importSingleMedia:function(e,t,n){var i=t.specificType,r=fr.a.genericTypeForSpecificType(i),a={assetCount:1,photosCount:r===fr.a.Type.IMAGE?1:0,videosCount:r===fr.a.Type.VIDEO&&i!==fr.a.Type.AUDIO?1:0};this.isPreparingToImportItems=!0;var s=t.asset.recordName,o=JS.beginNewJob({includeRecords:[s],selectedIndices:[n],sourceShareName:"cmm-share",targetZoneID:L.n().cplZone.zoneID,itemCounts:a,sourceZoneID:e},1,uC.ADD_TO_LIBRARY.value);return o.retain().autorelease(),this.isPreparingToImportItems=!1,{recordCopierJob:o,hasError:!1}},getItemCountsWithoutLoadingIndices:function(e,t,n){var i=Array.from(new Array(e.length).keys()).map((function(t){return e.encodedObjectAt(t)})),r=n,a=vV(r,e.length),s=r.filter((function(e){return i[e]})),o=a.filter((function(e){return i[e]})),l=r.length-s.length,c=a.length-o.length;if(!l||!c){var u=t.photosCount,d=t.videosCount,h=this._getItemCountsFromMedias(e,s),p=this._getItemCountsFromMedias(e,o);return l?{photosCount:u-p.photosCount,videosCount:d-p.videosCount,assetCount:r.length}:h}},loadIndicesAndGetItemCounts:function(e,t){var n=this;return BU(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.loadMediasForIndices(t);case 2:return i.abrupt("return",n._getItemCountsFromMedias(e.medias,t));case 3:case"end":return i.stop()}}),i)})))()},_getItemCountsFromMedias:function(e,t){for(var n,i=t.length,r=0,a=0,s=FU(t);!(n=s()).done;){var o=n.value,l=e.objectAt(o).retain(),c=l.specificType;l.release();var u=fr.a.genericTypeForSpecificType(c);u===fr.a.Type.IMAGE&&(r+=1),u===fr.a.Type.VIDEO&&c!==fr.a.Type.AUDIO&&(a+=1)}return{photosCount:r,videosCount:a,assetCount:i}},isMediaImported:function(e){if(!(e instanceof fr.a.Constructor))return!1;var t=e.asset,n=t.recordName,i=t.zoneID;return this.isRecordImported(n,i)},isRecordImported:function(e,t){for(var n,i=L.n().cplZoneID,r=FU(JS.allModels);!(n=r()).done;){var a=n.value;if(a.status!==ZS.FAILED&&NU.a.isSameZoneID(a.sourceZoneID,t)&&NU.a.isSameZoneID(a.targetZoneID,i)&&a.includesRecordName(e))return!0}return!1},hasExcludeJob:function(e){for(var t,n=L.n().cplZoneID,i=FU(JS.allModels);!(t=i()).done;){var r=t.value;if(r.status!==ZS.FAILED&&NU.a.isSameZoneID(r.sourceZoneID,e)&&NU.a.isSameZoneID(r.targetZoneID,n)&&Array.isArray(r.excludeRecords))return!0}return!1},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMImportMediasManager"}});function GU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e[e.Stationary=0]="Stationary",e[e.Slow=1]="Slow",e[e.Fast=2]="Fast"}(jU||(jU={}));var HU,WU=function(){function e(){var e=this;this.zeroSpeedCutoff=1e-5,this.emaHalfLife=1,this.lastDelta=0,this.speed=0,this.velocity=0,this.emaVelocity=0,this.isStationary=!0,this._emaSpeed=0,this._lastDeltaDate=0,this._averagingFrameId=0,this._runAveragingFrame=function(t,n){window.cancelAnimationFrame(e._averagingFrameId);var i=!1,r=60*e.emaHalfLife,a=Math.pow(10,Math.log(.5)/r),s=e.emaVelocity,o=s*a+(n?e.velocity:0)*(1-a);Math.abs(o)>e.zeroSpeedCutoff?(s!==o&&(e.emaVelocity=o),i=!0):0!==s&&(e.emaVelocity=0);var l=e.emaSpeed,c=l*a+(n?e.speed:0)*(1-a);Math.abs(c)>e.zeroSpeedCutoff?(l!==c&&(e.emaSpeed=c),i=!0):0!==l&&(e.emaSpeed=0),i&&(e._averagingFrameId=requestAnimationFrame(e._runAveragingFrame))}}var t,n,i=e.prototype;return i.handleDelta=function(e){var t=this._lastDeltaDate,n=Date.now(),i=n-t||1/0;this._lastDeltaDate=n;var r=e/i*1e3;this.velocity=r,this.speed=Math.abs(r),this._runAveragingFrame(NaN,!0)},i.cleanup=function(){cancelAnimationFrame(this._averagingFrameId),this.lastDelta=0,this._lastDeltaDate=-1/0,this.speed=0,this.velocity=0,this.emaSpeed=0,this.emaVelocity=0},t=e,(n=[{key:"emaSpeed",get:function(){return this._emaSpeed},set:function(e){this._emaSpeed=e,this.isStationary=!e}}])&&GU(t.prototype,n),e}();function $U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.POSSIBLE="POSSIBLE",e.COMPLETE="COMPLETE",e.FAILED="FAILED"}(HU||(HU={}));var zU=function(){function e(e,t){this.isActive=!1,this.status=HU.POSSIBLE,this.isDestroyed=!1,this._lastStatus=this.status,this._isEnabled=!0,this.element=e,t&&(this.statusDidChange=t)}var t,n,i=e.prototype;return i.statusDidChange=function(){},i.hitTest=function(e){for(var t=this.element,n=document.elementFromPoint(e.clientX,e.clientY);n;){if(n===t)return!0;n=n.parentNode}return!1},i.didBecomeActive=function(){this.isActive=!0},i.didBecomeInactive=function(){this.isActive=!1},i.handleStatusChange=function(){this._lastStatus!==(this._lastStatus=this.status)&&this.statusDidChange()},i.pointerDown=function(e){},i.pointerMove=function(e){},i.pointerUp=function(e){},i.pointerCancel=function(e){},i.pointerEnter=function(e){},i.pointerLeave=function(e){},i.destroy=function(){this.isDestroyed=!0},t=e,(n=[{key:"isDone",get:function(){return this.status===HU.COMPLETE||this.status===HU.FAILED}},{key:"isComplete",get:function(){return this.status===HU.COMPLETE}},{key:"isFailed",get:function(){return this.status===HU.FAILED}},{key:"isEnabled",get:function(){return this._isEnabled},set:function(e){this._isEnabled=e}}])&&$U(t.prototype,n),e}();function KU(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return qU(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qU(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function QU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var YU=function(){function e(e){this.pointerIds=[],this.gestures=[],this.hoveredGestures=[],this.gesturesMap=new Map,this.hasHadPointerDown=!1,this._lastPointerMoveEvent=void 0,this._lastPrimaryGesture=void 0,this._isHandlingPointerUp=!1,e.didConclude&&(this.didConclude=e.didConclude),this.gestureStateChanged=this.gestureStateChanged.bind(this)}var t,n,i=e.prototype;return i.didConclude=function(){},i.pointerDown=function(e){this.updateGesturesIfNeeded(e),this.hasHadPointerDown=!0;for(var t,n=KU(this.gestures);!(t=n()).done;)t.value.pointerDown(e)},i.pointerMove=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._lastPointerMoveEvent;if(e){this._lastPointerMoveEvent=e,this.updateGesturesIfNeeded(e);for(var t,n=KU(this.gestures);!(t=n()).done;){var i=t.value;i.pointerMove(e)}}},i.pointerUp=function(e){this._isHandlingPointerUp=!0;for(var t,n=KU(this.gestures);!(t=n()).done;)t.value.pointerUp(e);this.updateGesturesIfNeeded(e,!0),this._isHandlingPointerUp=!1,this.canConcludeHandlingGestures&&this.concludeHandlingGestures()},i.pointerCancel=function(e){this.updateGesturesIfNeeded(e,!0);for(var t,n=KU(this.gestures);!(t=n()).done;)t.value.pointerCancel(e)},i.gestureStateChanged=function(){this.canConcludeHandlingGestures?this._isHandlingPointerUp||this.concludeHandlingGestures():this.updateGesturesIfNeeded()},i.getGesturesForElement=function(e){var t=[],n=e;if(n)do{var i=n.Gestures;if(i)for(var r,a=0;r=i[a];a++){var s=this.getGesture(r,n);s.isEnabled&&t.push(s)}}while(n=n.parentNode);return t},i.updateGesturesIfNeeded=function(e,t,n){if(e){var i=e.pointerId,r=this.pointerIds;void 0===i||r.includes(i)||r.push(i)}var a;n?this.gestures=[]:(!this.areHandlersFixed&&null!=(a=e)&&a.target&&(this.gestures=this.getGesturesForElement(e.target)),this.gestures=this.gestures.filter((function(e){return!e.isDone})));var s,o,l=this._lastPrimaryGesture,c=this.primaryGesture;if(this._lastPrimaryGesture=c,e||(e=this._lastPointerMoveEvent)){var u=this.hoveredGestures,d=this.hoveredGestures=t?[]:this.gestures.filter((function(t){return t.status===HU.POSSIBLE&&t.hitTest(e)})),h=new Set(u),p=new Set(d);s=d.filter((function(e){return!h.has(e)})),o=u.filter((function(e){return!p.has(e)}))}o&&e&&o.forEach((function(t){return t.pointerLeave(e)})),l&&l!==c&&l.didBecomeInactive(),c&&l!==c&&c.didBecomeActive(),s&&e&&s.forEach((function(t){return t.pointerEnter(e)}))},i.concludeHandlingGestures=function(){this.updateGesturesIfNeeded(void 0,!1,!0),this.didConclude()},i.getGesture=function(e,t){var n=this.gesturesMap,i=n.get(e);i||n.set(e,i=new Map);var r=i.get(t);return r||i.set(t,r=new e(t,this.gestureStateChanged)),r},i.destroyGestures=function(){for(var e,t=KU(this.gesturesMap.values());!(e=t()).done;)for(var n,i=KU(e.value.values());!(n=i()).done;)n.value.destroy();this.gesturesMap.clear(),this.gestures.length=0,this.hoveredGestures.length=0,this._lastPrimaryGesture=void 0},i.destroy=function(){this.destroyGestures()},i.wantsNewPointerId=function(e){return!1},t=e,(n=[{key:"primaryGesture",get:function(){for(var e,t=KU(this.gestures);!(e=t()).done;){var n=e.value;if(!n.isFailed)return n}}},{key:"areHandlersFixed",get:function(){return this.hasHadPointerDown}},{key:"canConcludeHandlingGestures",get:function(){return this.gestures.filter((function(e){return e.isActive})).every((function(e){return e.isComplete}))||this.gestures.every((function(e){return e.isDone}))}}])&&QU(t.prototype,n),e}();function ZU(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return XU(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XU(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function XU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function JU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eG,tG=function(){function e(e){if(this.activePointerIds=new Set,this.activeGestureHandlers=[],this.activeGestureHandlersByPointerId={},this._areEventListenersGlobalized=!1,this._areEventListenersActive=!1,!(this.element=e.element))throw new Error("Cannot create a RootPointerEventHandler without an element.");this.shouldIgnorePointerEvent=e.shouldIgnorePointerEvent||function(){return!1},this.selfPointerDown=this.selfPointerDown.bind(this),this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerCancel=this.pointerCancel.bind(this)}var t,n,i=e.prototype;return i.selfPointerDown=function(e){this.shouldIgnorePointerEvent(e)||this._globalizeListeners()},i.pointerDown=function(e){if(!this.shouldIgnorePointerEvent(e)){"touch"===e.pointerType&&this.activePointerIds.add(e.pointerId);var t=this.activeGestureHandlersByPointerId[e.pointerId];if(!t)for(var n,i=ZU(this.activeGestureHandlers);!(n=i()).done;){var r=n.value;if(r.wantsNewPointerId(e)){t=r,this.activeGestureHandlersByPointerId[e.pointerId]=t;break}}t||(t=this.createNewGestureHandlerForPointerEvent(e)),t.pointerDown(e)}},i.pointerMove=function(e){if(!this.shouldIgnorePointerEvent(e)&&("touch"!==e.pointerType||this.activePointerIds.has(e.pointerId))){var t=this.activeGestureHandlersByPointerId[e.pointerId];t||(t=this.createNewGestureHandlerForPointerEvent(e)),t.pointerMove(e)}},i.createNewGestureHandlerForPointerEvent=function(e){var t=this,n=new YU({didConclude:function(){return t.cleanUpGestureHandler(n)}});return this.activeGestureHandlers.push(n),this.activeGestureHandlersByPointerId[e.pointerId]=n,n},i.pointerUp=function(e,t){if(!this.shouldIgnorePointerEvent(e)&&("touch"!==e.pointerType||this.activePointerIds.has(e.pointerId))){this.activePointerIds.delete(e.pointerId);var n=this.activeGestureHandlersByPointerId[e.pointerId];n&&(t?this.cleanUpGestureHandler(n):n.pointerUp(e))}},i.pointerCancel=function(e){return this.pointerUp(e,!0)},i.cleanUpGestureHandler=function(e){var t=this.activeGestureHandlers;if(t.includes(e)){t.splice(t.indexOf(e),1);for(var n,i=ZU(e.pointerIds);!(n=i()).done;){var r=n.value;delete this.activeGestureHandlersByPointerId[r],this.activePointerIds.delete(r)}t.length||this._privatizeListeners(),e.destroy()}},i.activateListeners=function(){this._areEventListenersActive||(this._areEventListenersActive=!0,this._areEventListenersGlobalized?this._toggleDocumentListeners(!0):this._toggleElementListeners(!0))},i.deactivateListeners=function(){var e=this;this._areEventListenersActive&&(this._areEventListenersActive=!1,this.activeGestureHandlers.forEach((function(t){return e.cleanUpGestureHandler(t)})),this._areEventListenersGlobalized?this._toggleDocumentListeners(!1):this._toggleElementListeners(!1))},i._globalizeListeners=function(){this._areEventListenersGlobalized||(this._areEventListenersGlobalized=!0,this._areEventListenersActive&&(this._toggleElementListeners(!1),this._toggleDocumentListeners(!0)))},i._privatizeListeners=function(){this._areEventListenersGlobalized&&(this._areEventListenersGlobalized=!1,this._areEventListenersActive&&(this._toggleElementListeners(!0),this._toggleDocumentListeners(!1)))},i._toggleElementListeners=function(e){var t=this.element,n=e?"addEventListener":"removeEventListener";t[n](this.pointerMoveEvent,this.pointerMove),t[n](this.pointerLeaveEvent,this.pointerMove),t[n](this.pointerDownEvent,this.selfPointerDown)},i._toggleDocumentListeners=function(e){var t=e?"addEventListener":"removeEventListener";document[t](this.pointerMoveEvent,this.pointerMove),document[t](this.pointerDownEvent,this.pointerDown),document[t](this.pointerUpEvent,this.pointerUp),document[t](this.pointerCancelEvent,this.pointerCancel)},t=e,(n=[{key:"pointerDownEvent",get:function(){return"pointerdown"}},{key:"pointerUpEvent",get:function(){return"pointerup"}},{key:"pointerMoveEvent",get:function(){return"pointermove"}},{key:"pointerCancelEvent",get:function(){return"pointercancel"}},{key:"pointerLeaveEvent",get:function(){return"pointerleave"}}])&&JU(t.prototype,n),e}(),nG={0:1,1:4,2:2};try{new UIEvent("test"),eG=function(e){return new UIEvent(e,{view:window,bubbles:!0})}}catch(sY){eG=function(e){var t=document.createEvent("UIEvents");return t.initUIEvent(e,!0,!0,window),t}}function iG(e,t){var n,i;void 0!==t.buttons?(i=t.buttons,n=t.buttons?t.button:-1):0===t.button&&0===t.which?(n=-1,i=0):(n=t.button,i=nG[n]);var r=i?.5:0;return aG(e,t,{screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,target:t.target,relatedTarget:t.relatedTarget,detail:t.detail,button:n,buttons:i,pointerId:1,pointerType:"mouse",width:0,height:0,pressure:r,tiltX:0,tiltY:0,preventDefault:sG,stopPropagation:oG})}function rG(e,t,n){return aG(e,t,{screenX:t.screenX,screenY:t.screenY,clientX:n.clientX,clientY:n.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,target:t.target,relatedTarget:t.relatedTarget,detail:t.detail,button:0,buttons:1,pointerId:n.identifier+2,pointerType:"touch",width:20,height:20,pressure:.5,tiltX:0,tiltY:0,preventDefault:sG,stopPropagation:oG})}function aG(e,t,n){for(var i=eG(e),r=Object.keys(n),a=0;a<r.length;a++){var s=r[a];Object.defineProperty(i,s,{value:n[s],writable:!1})}return Object.defineProperty(i,"originalEvent",{value:t,writable:!1}),Object.defineProperty(i,"preventDefault",{value:sG,writable:!1}),Object.defineProperty(i,"stopPropagation",{value:oG,writable:!1}),i}function sG(){this.originalEvent.preventDefault()}function oG(){this.originalEvent.stopPropagation()}function lG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cG(e,t){return(cG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uG=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,cG(t,n);var r,a,s=i.prototype;return s.pointerDown=function(t){if(!this.shouldIgnorePointerEvent(t)){var n=iG("pointerdown",t);e.prototype.pointerDown.call(this,n)}},s.pointerMove=function(t){if(!this.shouldIgnorePointerEvent(t)){var n=iG("pointermove",t);e.prototype.pointerMove.call(this,n)}},s.pointerUp=function(t,n){if(!this.shouldIgnorePointerEvent(t)){var i=iG("pointerup",t);e.prototype.pointerUp.call(this,i,n)}},r=i,(a=[{key:"pointerDownEvent",get:function(){return"mousedown"}},{key:"pointerUpEvent",get:function(){return"mouseup"}},{key:"pointerMoveEvent",get:function(){return"mousemove"}},{key:"pointerLeaveEvent",get:function(){return"mouseleave"}}])&&lG(r.prototype,a),i}(tG);function dG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hG(e,t){return(hG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pG=function(e){var t,n;function i(){var t;return(t=e.apply(this,arguments)||this)._scrollInfoByPointerID={},t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,hG(t,n);var r,a,s=i.prototype;return s.pointerDown=function(t){if(!this.shouldIgnorePointerEvent(t)){var n=rG("pointerdown",t,t.changedTouches[0]),i=this.getScrollableAncestor(t.target);this._scrollInfoByPointerID[n.pointerId]={scrollableAncestor:i,pointerDownScrollLeft:null==i?void 0:i.scrollLeft,pointerDownScrollTop:null==i?void 0:i.scrollTop},e.prototype.pointerDown.call(this,n)}},s.pointerMove=function(t){if(!this.shouldIgnorePointerEvent(t)){var n=rG("pointermove",t,t.changedTouches[0]),i=this._scrollInfoByPointerID[n.pointerId];i&&i.scrollableAncestor&&(Math.abs(i.scrollableAncestor.scrollTop-i.pointerDownScrollTop)>1||Math.abs(i.scrollableAncestor.scrollLeft-i.pointerDownScrollLeft)>1)?this.pointerCancel(t):e.prototype.pointerMove.call(this,n)}},s.pointerUp=function(t,n){if(!this.shouldIgnorePointerEvent(t)){var i=rG("pointerup",t,t.changedTouches[0]);delete this._scrollInfoByPointerID[i.pointerId],e.prototype.pointerUp.call(this,i,n)}},s.getScrollableAncestor=function(e){for(var t=e;t;){if(this.isScrollable(t))return t;t=t.parentElement}},s.isScrollable=function(e){if(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth){var t=getComputedStyle(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowX||"scroll"===t.overflowX||"auto"===t.overflowY||"scroll"===t.overflowY}return!1},r=i,(a=[{key:"pointerDownEvent",get:function(){return"touchstart"}},{key:"pointerUpEvent",get:function(){return"touchend"}},{key:"pointerMoveEvent",get:function(){return"touchmove"}},{key:"pointerCancelEvent",get:function(){return"touchcancel"}}])&&dG(r.prototype,a),i}(tG);function fG(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return gG(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gG(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function mG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _G=function(){function e(e){this._firstVisibleIndex=-1,this._cells=[],this._cellsByItemView=new WeakMap,this._itemViews={},this._itemViewsByElement=new WeakMap,this._scrollTop=0,this._previousScrollTop=0,this._needsReorderOnScrollFinish=!1,this._numItems=e.numItems,this._layoutMetrics=e.layoutMetrics,this._createItemView=e.createItemView,this._itemStateForIndex=e.itemStateForIndex,this._headerElement=e.headerElement,this._footerElement=e.footerElement,this._primaryInteractionMode=e.primaryInteractionMode,this.onVisibleIndexesChange=e.onVisibleIndexesChange,this.onScroll=e.onScroll,this.onScrollFinished=e.onScrollFinished,this.onGridMetricsChange=e.onGridMetricsChange,this.onGridRender=e.onGridRender,this.shouldIgnorePointerEvent=e.shouldIgnorePointerEvent,this.handleScroll=this.handleScroll.bind(this),this._shouldIgnorePointerEvent=this._shouldIgnorePointerEvent.bind(this);var t=new WU;t.zeroSpeedCutoff=3,t.emaHalfLife=2,this._motionTracker=t}var t,n,i=e.prototype;return i.getCellsOrderedByOffscreeniness=function(){var e=this._cells,t=e.length;if(0===t)return[];for(var n=this.firstVisibleIndex,i=this.lastVisibleIndex,r=this.getVisibleCells(),a=e[0].index,s=n-a-1,o=i-a+1;s>=0||o<t;)s>=0&&(r.push(e[s]),s--),o<t&&(r.push(e[o]),o++);return r},i.render=function(e){var t=document.createElement("div");this._root=t,t.className="grid",this._scrollContainer=document.createElement("div"),this._scrollContainer.className="grid-scroll",this._innerScrollContainer=document.createElement("div"),this._innerScrollContainer.className="grid-scroll-inner",this._scrollContainer.appendChild(this._innerScrollContainer),this._itemsContainer=document.createElement("div"),this._itemsContainer.className="grid-items",this._innerScrollContainer.appendChild(this._itemsContainer),this._headerElement&&this.appendHeader(this._headerElement),this._footerElement&&this.appendFooter(this._footerElement),t.appendChild(this._scrollContainer),e.appendChild(t),this.refreshGrid(),this._scrollContainer.addEventListener("scroll",this.handleScroll),this.assignRootPointerEventHandler()},i.refreshGrid=function(){var e=this._gridMetrics,t=this._firstVisibleIndex,n=this.lastVisibleIndex;if(this.updateGridMetrics(),this._gridMetrics){var i=this.calculateFirstVisibleIndex(this.scrollTop);this._firstVisibleIndex=i;var r=this.lastVisibleIndex,a=this.getIndexesOfCellsToRender(i),s=a.startIndex,o=a.endIndex;this._cells=this.renderCells(s,o-s+1),this.updateCellPositions(),this.onGridMetricsChange&&!this.isShallowEqual(e,this._gridMetrics)&&this.onGridMetricsChange({gridMetrics:this._gridMetrics,grid:this}),!this.onVisibleIndexesChange||i===t&&r===n||this.onVisibleIndexesChange({firstVisibleIndex:i,lastVisibleIndex:r,grid:this}),this.onGridRender&&this.onGridRender({grid:this})}},i.getRectForIndex=function(e){var t=this._gridMetrics,n=t.averageCellWidth,i=t.gridInnerWidth,r=t.cellHeight,a=this._layoutMetrics,s=a.paddingInlineStart,o=void 0===s?0:s,l=a.paddingInlineEnd,c=void 0===l?0:l,u=a.paddingBlockStart,d=void 0===u?0:u,h=a.numColumns,p=a.columnGap,f=void 0===p?0:p,g=a.rowGap,m=void 0===g?0:g,_=Math.floor(e/h),v=e%h,b=f*(h-1),y=Math.round(n),w=y*v+f*v+o,I=r*_+m*_+d,S=i-o-c-b-y*h;if(S){var C=Math.floor(h/Math.abs(S)),E=Math.sign(S);(v+1)%C===0&&(y+=E),w+=E*Math.floor(v/C)}return{x:w,y:I,width:y,height:r}},i.getVisibleCells=function(){var e=this._cells,t=this.firstVisibleIndex,n=this.lastVisibleIndex;if(0===e.length)return[];var i=e[0].index;return e.slice(t-i,n-i+1)},i.getCellForIndex=function(e){var t=this._cells;if(t.length){var n=e-t[0].index;if(!(n<0||n>=t.length))return t[n]}},i.getCellForItemView=function(e){return this._cellsByItemView.get(e)},i.getItemViewForIndex=function(e){var t=this.getCellForIndex(e);return t?t.itemView:void 0},i.getItemViewIndex=function(e){var t=this.getCellForItemView(e);return t?t.index:-1},i.isCell=function(e){return Boolean(e&&e.matches&&e.matches(".grid-item"))},i.getItemViewForElement=function(e){return this._itemViewsByElement.get(e)},i.getScrollTopForIndex=function(e){var t=Math.min(this.numItems-1,Math.max(e,0));return this.getRectForIndex(t).y+this.getItemsContainerOffsetTop()},i.getItemsContainerOffsetTop=function(){return this._itemsContainer.offsetTop},i.scrollToIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scrollTop=this.getScrollTopForIndex(e)+t},i.isIndexInViewport=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<0||e>=this.numItems)return!1;var n=this.getScrollTopForIndex(e),i=n+this.getRectForIndex(e).height,r=t?n:i,a=t?i:n;return r>=this.scrollTop&&a<=this.scrollTop+this._gridMetrics.gridHeight},i.destroy=function(){var e=this.element;e&&(this._scrollContainer.removeEventListener("scroll",this.handleScroll),this.rootPointerEventHandler=void 0,this._scrollTimer&&(clearTimeout(this._scrollTimer),this._scrollTimer=void 0),this.removeCells(),e.remove())},i.updateGridMetrics=function(){if(this._root.clientWidth&&this._root.clientHeight){var e=this.calculateGridMetrics();this.updateItemsContainerHeight(e.itemsScrollHeight);var t=this.calculateGridMetrics();t.itemsScrollHeight!==e.itemsScrollHeight&&this.updateItemsContainerHeight(t.itemsScrollHeight),this._gridMetrics=t}},i.updateItemsContainerHeight=function(e){this._itemsContainer.style.height=Math.ceil(e)+"px"},i.calculateGridMetrics=function(){var e=this._root.clientWidth,t=this._itemsContainer.clientWidth,n=this._root.clientHeight,i=this.layoutMetrics,r=i.itemAspectRatio,a=void 0===r?1:r,s=i.itemHeight,o=i.numColumns,l=i.rowGap,c=void 0===l?0:l,u=i.columnGap,d=void 0===u?0:u,h=i.paddingInlineStart,p=void 0===h?0:h,f=i.paddingInlineEnd,g=void 0===f?0:f,m=i.paddingBlockStart,_=void 0===m?0:m,v=i.paddingBlockEnd,b=void 0===v?0:v,y=(t-d*(o-1)-p-g)/o,w=Math.round(s||y*Math.max(0,a)),I=Math.ceil(this._numItems/o),S=w+c;return{gridHeight:n,gridWidth:e,gridInnerWidth:t,totalRows:I,cellHeight:w,rowHeight:S,averageCellWidth:y,averageColumnWidth:y+d,itemsPerPage:Math.ceil(n/S)*o+o,itemsScrollHeight:Math.max(0,I*S-c+_+b)}},i.handleScroll=function(e){var t=this,n=e.target.scrollTop,i=n-this._previousScrollTop;this._previousScrollTop=n,this._motionTracker.handleDelta(i),this._scrollTimer&&clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout((function(){t._scrollTimer=void 0,t.handleScrollFinished(),t.onScrollFinished&&t.onScrollFinished({grid:t})}),200);var r=this.calculateFirstVisibleIndex(n),a=this.calculateLastVisibleIndex(r),s=this.firstVisibleIndex,o=this.lastVisibleIndex,l=!1;r===s&&a===o||(this._firstVisibleIndex=r,l=!0),l&&(this.moveItemsOnScroll(s,o),this.onVisibleIndexesChange&&this.onVisibleIndexesChange({firstVisibleIndex:r,lastVisibleIndex:a,grid:this})),this.onScroll&&this.onScroll({scrollTop:n,grid:this})},i.calculateFirstVisibleIndex=function(e){var t=this._gridMetrics,n=t.itemsScrollHeight,i=t.gridHeight,r=t.rowHeight,a=e-this.getItemsContainerOffsetTop(),s=Math.min(a,Math.floor(n-i));return Math.max(0,Math.floor(s/r)*this.layoutMetrics.numColumns)},i.calculateLastVisibleIndex=function(e){return this._gridMetrics?Math.min(this._numItems-1,e+this._gridMetrics.itemsPerPage-1):-1},i.handleItemStateChanged=function(){for(var e=this.firstVisibleIndex,t=this.lastVisibleIndex,n=this.getCellsOrderedByOffscreeniness(),i=0;i<n.length;i++){var r=n[i],a=r.index,s=r.itemView,o=this._itemStateForIndex(a);this.isShallowEqual(s.itemState,o)||(s.itemState=o,this.renderItemViewIfNeeded(s,a,e,t))}},i.isShallowEqual=function(e,t){if(!e&&!t||e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(e[a]!==t[a])return!1}for(var s=0;s<i.length;s++){var o=i[s];if(e[o]!==t[o])return!1}return!0},i.renderCells=function(e,t){var n=[],i=document.createDocumentFragment(),r=this._cells;this.removeCells();for(var a=e,s=0;s<t;s++){var o=this.renderCell(a,r.length>s?r[s]:void 0),l=this.createItemViewAtIndex(a);this._itemViews[l.id]=l;var c={index:a,element:o,itemView:l};this._cellsByItemView.set(l,c),n.push(c),this.renderItemView(l),o.appendChild(l.element),i.appendChild(o),a++}return this._itemsContainer.appendChild(i),n},i.removeCells=function(){if(this._itemsContainer.firstElementChild)for(var e,t=fG(this._cells);!(e=t()).done;){var n=e.value;n.element.remove(),n.itemView.element.remove(),delete this._itemViews[n.itemView.id],n.itemView.wasRemoved()}},i.renderCell=function(e,t){var n=this.getRectForIndex(e),i=n.width,r=n.height,a=t?t.element:void 0;a||((a=document.createElement("div")).className="grid-item");var s="width: "+i+"px; height: "+r+"px;";return a.setAttribute("style",s),a},i.createItemViewAtIndex=function(e){var t=this._createItemView();return this._itemViewsByElement.set(t.element,t),t.id=Math.random().toString(36).substring(2)+"_"+e,t.itemState=this._itemStateForIndex(e),t},i.moveItemsOnScroll=function(e,t){var n=this._cells;if(n.length){var i=this.lastVisibleIndex,r=n[0].index,a=n[n.length-1].index,s=this._layoutMetrics.numColumns,o=!1;if((a<this._numItems-1&&i>a-s||r>0&&this._firstVisibleIndex<r+s)&&(o=!0),o){this._needsReorderOnScrollFinish=!0;for(var l=this.getIndexesOfCellsToRender(this._firstVisibleIndex),c=l.startIndex,u=l.endIndex,d=0,h=0;h<n.length;h++){var p=n[h],f=p.index,g=-1;if(f<c?g=Math.max(c+d,a+d+1):f>u&&(g=c+d),g>=0){p.index=g,p.itemView.element.remove(),delete this._itemViews[p.itemView.id],p.itemView.wasRemoved();var m=this.createItemViewAtIndex(p.index);p.itemView=m,this._cellsByItemView.set(m,p),this.renderItemViewOnScrollIfNeeded(m,g,this._firstVisibleIndex,i),this._itemViews[m.id]=m,p.element.appendChild(m.element),d++}else this.renderItemViewOnScrollIfNeeded(p.itemView,f,this._firstVisibleIndex,i,e,t)}n.sort((function(e,t){return e.index-t.index})),this.updateCellPositions()}else for(var _=0;_<n.length;_++){var v=n[_];this.renderItemViewOnScrollIfNeeded(v.itemView,v.index,this._firstVisibleIndex,i,e,t)}}},i.handleScrollFinished=function(){this._motionTracker.cleanup();for(var e=this.getCellsOrderedByOffscreeniness(),t=this.firstVisibleIndex,n=this.lastVisibleIndex,i=0;i<e.length;i++){var r=e[i];this.renderItemViewIfNeeded(r.itemView,r.index,t,n)}if(this._needsReorderOnScrollFinish){this._needsReorderOnScrollFinish=!1;for(var a=this._cells,s=document.createDocumentFragment(),o=0;o<a.length;o++){var l=a[o].element;l.remove(),s.appendChild(l)}this._itemsContainer.appendChild(s)}},i.renderItemView=function(e){var t=this._gridMetrics.itemsPerPage,n=this.getCellForItemView(e).index,i=Math.floor((n-this.firstVisibleIndex)/t),r=this.getRectForIndex(n),a=r.width,s=r.height;e.render({itemSize:{width:a,height:s},scrollSpeed:this.scrollSpeedEnum,pageOffset:i})},i.renderItemViewIfNeeded=function(e,t,n,i){if(!this.isIndexWithinScrollingRenderBuffer(t,n,i)){if(!this._motionTracker.isStationary)return;if(!this.isIndexWithinStationaryRenderBuffer(t,n,i))return}this.renderItemView(e)},i.renderItemViewOnScrollIfNeeded=function(e,t,n,i,r,a){!this.isIndexWithinScrollingRenderBuffer(t,n,i)||void 0!==r&&void 0!==a&&this.isIndexWithinScrollingRenderBuffer(t,r,a)||this.renderItemView(e)},i.isIndexWithinScrollingRenderBuffer=function(e,t,n){var i=this.scrollingRenderBufferSize;return e>=t-i&&e<=n+i},i.isIndexWithinStationaryRenderBuffer=function(e,t,n){var i=this.stationaryRenderBufferSize;return e>=t-i&&e<=n+i},i.getIndexesOfCellsToRender=function(e){if(-1===e)return{startIndex:-1,endIndex:-1};var t=this._gridMetrics.itemsPerPage,n=this._numItems,i=Math.ceil(1*t),r=Math.min(n,t+2*i),a=Math.max(0,e-i),s=a+r-n;return s>0&&(a=Math.max(0,a-s)),{startIndex:a,endIndex:Math.min(n-1,a+r-1)}},i.updateCellPositions=function(){for(var e,t=fG(this._cells);!(e=t()).done;){var n=e.value;this.updateCellPosition(n)}},i.updateCellPosition=function(e){var t=e.index,n=e.element,i=this.getRectForIndex(t),r=i.x,a=i.y;n.style.transform="translateX("+r+"px) translateY("+a+"px)"},i.appendHeader=function(e){this._headerContainer||(this._headerContainer=document.createElement("div"),this._headerContainer.className="grid-header",this._innerScrollContainer.insertBefore(this._headerContainer,this._itemsContainer)),this._headerContainer.appendChild(e)},i.appendFooter=function(e){this._footerContainer||(this._footerContainer=document.createElement("div"),this._footerContainer.className="grid-footer",this._innerScrollContainer.appendChild(this._footerContainer)),this._footerContainer.appendChild(e)},i.assignRootPointerEventHandler=function(){var e,t;this.element&&(this.rootPointerEventHandler=(e=this._primaryInteractionMode,t={element:this.element,shouldIgnorePointerEvent:this._shouldIgnorePointerEvent},void 0!==globalThis.onpointerdown?new tG(t):e===yn.a.TOUCH?new pG(t):new uG(t)))},i._shouldIgnorePointerEvent=function(e){return!!this.shouldIgnorePointerEvent&&this.shouldIgnorePointerEvent(e)},t=e,(n=[{key:"element",get:function(){return this._root}},{key:"numItems",get:function(){return this._numItems},set:function(e){this._numItems!==e&&(this._numItems=e,this.refreshGrid())}},{key:"layoutMetrics",get:function(){return this._layoutMetrics},set:function(e){this._layoutMetrics!==e&&(this._layoutMetrics=e,this.refreshGrid())}},{key:"firstVisibleIndex",get:function(){return this._firstVisibleIndex},set:function(e){if(e<0||0===this._numItems)return this._firstVisibleIndex=-1,void(this.scrollTop=0);var t=Math.min(this._numItems-1,e);this._firstVisibleIndex=t;var n=this.getRectForIndex(t).y;this.scrollTop=n}},{key:"lastVisibleIndex",get:function(){return this.calculateLastVisibleIndex(this.firstVisibleIndex)}},{key:"scrollTop",get:function(){return this._scrollContainer.scrollTop},set:function(e){this._scrollContainer.scrollTop!==e&&(this._scrollContainer.scrollTop=e)}},{key:"scrollBottom",get:function(){return this._gridMetrics?this.scrollHeight-this._gridMetrics.gridHeight-this.scrollTop:0},set:function(e){this._gridMetrics&&(this.scrollTop=Math.max(0,this.scrollHeight-this._gridMetrics.gridHeight-e))}},{key:"createItemView",get:function(){return this._createItemView},set:function(e){this._createItemView!==e&&(this._createItemView=e,this.refreshGrid())}},{key:"itemStateForIndex",get:function(){return this._itemStateForIndex},set:function(e){this._itemStateForIndex!==e&&(this._itemStateForIndex=e,this.handleItemStateChanged())}},{key:"headerContainerElement",get:function(){return this._headerContainer}},{key:"headerElement",get:function(){return this._headerElement},set:function(e){this._headerElement!==e&&(this._headerElement&&this._headerElement.remove(),this._headerElement=e,e?this.appendHeader(e):this._headerContainer&&(this._headerContainer.remove(),this._headerContainer=void 0))}},{key:"footerContainerElement",get:function(){return this._footerContainer}},{key:"footerElement",get:function(){return this._footerElement},set:function(e){this._footerElement!==e&&(this._footerElement&&this._footerElement.remove(),this._footerElement=e,e?this.appendFooter(e):this._footerContainer&&(this._footerContainer.remove(),this._footerContainer=void 0))}},{key:"primaryInteractionMode",get:function(){return this._primaryInteractionMode},set:function(e){this._primaryInteractionMode!==e&&(this._primaryInteractionMode=e,this.assignRootPointerEventHandler())}},{key:"motionTracker",get:function(){return this._motionTracker}},{key:"scrollVelocity",get:function(){return this._motionTracker.emaVelocity}},{key:"scrollSpeed",get:function(){return this._motionTracker.emaSpeed}},{key:"scrollSpeedEnum",get:function(){return this._motionTracker.isStationary?jU.Stationary:this.scrollSpeed>1e3?jU.Fast:jU.Slow}},{key:"gridMetrics",get:function(){return this._gridMetrics}},{key:"scrollHeight",get:function(){return this._scrollContainer.scrollHeight}},{key:"cells",get:function(){return this._cells}},{key:"itemViews",get:function(){return this._cells.map((function(e){return e.itemView}))}},{key:"rootPointerEventHandler",set:function(e){this._rootPointerEventHandler!==e&&(this._rootPointerEventHandler&&this._rootPointerEventHandler.deactivateListeners(),this._rootPointerEventHandler=e,this._rootPointerEventHandler&&this._rootPointerEventHandler.activateListeners())}},{key:"stationaryRenderBufferSize",get:function(){var e=this._layoutMetrics.numColumns;return Math.floor(24/e)*e}},{key:"scrollingRenderBufferSize",get:function(){return this._layoutMetrics.numColumns}}])&&mG(t.prototype,n),e}(),vG=n(361),bG=n(686),yG=n(287);function wG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var IG=function(){function e(e,t,n,i,r){this.derivativeId=void 0,this.mediaPK=void 0,this._releaseImageRequest=this._releaseImageRequest.bind(this),this.derivativeId=e,this.mediaPK=t,this.incomingImageMsl=n||NaN,this.promise=i,this.imageRequest=r}var t,n,i=e.prototype;return i.cancel=function(){this._releaseImageRequest()},i._releaseImageRequest=function(){this.imageRequest=void 0},t=e,(n=[{key:"imageRequest",set:function(e){this._imageRequest&&this._imageRequest.cleanup(),this._imageRequest=e}},{key:"promise",get:function(){return this._promise},set:function(e){if(this._promise)throw new Error("DerivativeLoadRequest promise should be immutable");this._promise=e,e&&e.then(this._releaseImageRequest)}}])&&wG(t.prototype,n),e}();function SG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var CG,EG,AG=[function(){return 0},function(){return 150+300*Math.random()},function(){return 500+1e3*Math.random()}],OG=[null],TG={type:null},MG=YC.a.derivativeRequestFeedbackReportProbability;!function(e){e.UNLOADED="unloaded",e.LOADING="loading",e.PREPARING="preparing",e.LOADED="loaded",e.ERRORED="errored"}(CG||(CG={})),function(e){e.RESOURCE_PREFETCH="Resource Prefetch",e.RESOURCE_DOWNLOAD="Resource Download"}(EG||(EG={}));var DG=function(){function e(e){if(this._image=void 0,this._state=CG.UNLOADED,this._progress=NaN,this._remainingLoadAttemptCount=3,this._exifOrientation=NaN,this._xhr=new XMLHttpRequest,e.shouldCheckOrientation&&"image/jpeg"!==e.mimeType)throw new Error("Unable to do orientation check on non-jpeg image.");this.url=e.url,this.mimeType=e.mimeType,this.shouldCheckOrientation=e.shouldCheckOrientation||!1,this.offscreeniness=e.offscreeniness||0,this.priority=e.priority,this.feedbackService=e.feedbackService,this.isTranscoderRequest=e.isTranscoderRequest,this.reportingData=e.reportingData,this.onFinish=e.onFinish,this.onFail=e.onFail,this.onCancel=e.onCancel,this.onProgressChange=e.onProgressChange,this._handleXHRReadyStateChange=this._handleXHRReadyStateChange.bind(this),this._handleXHRProgress=this._handleXHRProgress.bind(this),this._physicallySendXHR=this._physicallySendXHR.bind(this),this._imageLoadDidFinish=this._imageLoadDidFinish.bind(this),this._imageLoadDidFail=this._imageLoadDidFail.bind(this)}var t,n,i=e.prototype;return i.send=function(){this.state=CG.LOADING,this._offscreeninessAtSend=this.offscreeniness,this._priorityAtSend=this.priority,this._sendWithXHR()},i.cleanup=function(){this._cleanUpXHR(),this.state===CG.PREPARING&&this._cleanUpImageElement(),this._image=void 0},i._finalURLTransform=function(e){var t=this._offscreeninessAtSend<=YC.a.offscreeninessThresholdForHighLatency?EG.RESOURCE_DOWNLOAD:EG.RESOURCE_PREFETCH;return e+"&og="+encodeURIComponent(t)},i._sendWithXHR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._xhr;t.open("GET",this._finalURLTransform(this.url),!0),t.responseType=this.shouldUseArrayBufferModeOnXHR?"arraybuffer":"blob",t.addEventListener("readystatechange",this._handleXHRReadyStateChange),t.addEventListener("progress",this._handleXHRProgress),e>0?this._delayedSendTimeout=setTimeout(this._physicallySendXHR,e):this._physicallySendXHR(),this._remainingLoadAttemptCount--},i._physicallySendXHR=function(){this._xhrSentTimestamp=Date.now(),this._xhr.send(null)},i._handleXHRReadyStateChange=function(){if(this.state===CG.LOADING){var e=this._xhr;return e.readyState>=2&&200!==e.status?this._xhrLoadDidFail():4===e.readyState&&200===e.status?this._xhrLoadDidFinish():void 0}},i._handleXHRProgress=function(e){this.state===CG.LOADING&&(!this._timeToFirstByte&&this._xhrSentTimestamp&&(this._timeToFirstByte=Date.now()-this._xhrSentTimestamp),this._progress=e.lengthComputable?e.loaded/e.total:NaN,this.onProgressChange&&this.onProgressChange(this,this._progress))},i._loadDidFail=function(){this.state=CG.ERRORED},i._xhrLoadDidFail=function(){var e=0,t=this._xhr,n=t.status;if(this._remainingLoadAttemptCount>0&&n>=500&&520!==n){var i=t.getResponseHeader("Retry-After");if(i&&(e=Math.floor(1e3*parseFloat(i))),!e){var r=AG[this.totalLoadAttemptsMade];e=Math.floor(r&&r())}}var a=Date.now()-this._xhrSentTimestamp;if(ZC.b(n,a),this._cleanUpXHR(),e>0)this._sendWithXHR(e);else{var s=this.feedbackService;s&&s.report("cvwsRequestFailure",{totalLoadAttemptsMade:this.totalLoadAttemptsMade,xhrStatus:n,derivativeIsTranscoded:this.isTranscoderRequest}),this._loadDidFail()}},i._cleanUpXHR=function(){clearTimeout(this._delayedSendTimeout);var e=this._xhr;e.removeEventListener("readystatechange",this._handleXHRReadyStateChange),e.removeEventListener("progress",this._handleXHRProgress),e.abort()},i._xhrLoadDidFinish=function(){(MG>=1||MG>=0&&Math.random()<MG)&&this._reportDerivativeRequest(),this.state=CG.PREPARING;var e=this._xhr.response;if(this.shouldUseArrayBufferModeOnXHR){var t=1;if(this.shouldCheckOrientation){var n=jn.a.readAndZeroOrientation(e);n&&(t=n.Orientation)}this._exifOrientation=t,this._loadImageFromArrayBuffer(e)}else this._exifOrientation=1,this._loadImageFromBlob(e)},i._reportDerivativeRequest=function(){var e=this.reportingData;if(e){var t=Date.now()-this._xhrSentTimestamp,n=this._xhr.response||{},i=n.size||n.byteLength;ZC.a(Object.assign({derivativeApproxByteSize:qC.a(i),derivativeTimeToFirstByte:this._timeToFirstByte||t,derivativeTimeToComplete:t,derivativeMIMETypeForWebClient:this.mimeType,derivativeIsTranscoded:this.isTranscoderRequest,derivativeTotalLoadAttemptsMade:this.totalLoadAttemptsMade,derivativeOffscreeninessAtSend:this._offscreeninessAtSend,derivativeOffscreeninessAtReceipt:this.offscreeniness,derivativeLoadRefPriorityAtSend:this._priorityAtSend,derivativeRequestReportProbability:MG,xhrStatus:this._xhr.status||0},e))}},i._loadImageFromArrayBuffer=function(e){OG[0]=e,TG.type=this.mimeType,this._loadImageFromBlob(new Blob(OG,TG)),OG[0]=null,TG.type=null},i._loadImageFromBlob=function(e){this._loadImageFromSrc(URL.createObjectURL(e))},i._loadImageFromSrc=function(e){var t=new Image;this._image=t,t.addEventListener("load",this._imageLoadDidFinish),t.addEventListener("error",this._imageLoadDidFail),t.decoding="async",t.src=e},i._imageLoadDidFinish=function(){this._cleanUpImageElement(),this._image&&1!==this._exifOrientation&&(this._image._photosExifOrientation=this._exifOrientation),this.state=CG.LOADED},i._imageLoadDidFail=function(){this._cleanUpImageElement(),this._image=void 0,this._loadDidFail()},i._cleanUpImageElement=function(){var e=this._image;e&&(URL.revokeObjectURL(e.src),e.removeEventListener("load",this._imageLoadDidFinish),e.removeEventListener("error",this._imageLoadDidFail))},t=e,(n=[{key:"image",get:function(){return this.state===CG.LOADED?this._image:void 0}},{key:"progress",get:function(){return this._progress}},{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,e===CG.LOADED&&this.onFinish&&this.onFinish(this,this._image),e===CG.ERRORED&&this.onFail&&this.onFail(this),e!==CG.UNLOADED||!this.onCancel||t!==CG.LOADING&&t!==CG.PREPARING||this.onCancel(this)}},{key:"totalLoadAttemptsMade",get:function(){return 3-this._remainingLoadAttemptCount}},{key:"shouldUseArrayBufferModeOnXHR",get:function(){return this.shouldCheckOrientation}}])&&SG(t.prototype,n),e}(),PG=["JPEGThumb","JPEGMed","JPEGLarge","JPEGFull","Original"].map((function(e){return"res"+e})),LG={},RG=new cV.a,xG=new WeakMap,NG=new WeakMap,FG=new Set,VG={},kG=Vf.a.derivativeId;function BG(e,t){var n,i=LG[e];if(i)for(var r=0;r<i.length&&!(nH(n=i[r])>=t);r++);return n&&RG.unshift(n,!0),n}function jG(e,t){for(var n,i=0;i<PG.length;i++){var r=PG[i];if(ZG(e,r)){if(qG(e,r)>=t)return r;n=r}}return n}function UG(e,t){var n=-1!==t.indexOf("Original")&&e.originalOrientation>=5;return[e[t+(n?"Height":"Width")],e[t+(n?"Width":"Height")]]}function GG(e,t){return e[t+"MimeType"]}function HG(e,t){return e[t+"ResDownloadUrl"]}function WG(e,t,n){return e.replace("${f}",encodeURIComponent(t||"media.jpeg")).replace("${m}",n?String(n):"")}function $G(e){var t,n=yG.b["public.jpeg"];return(void 0===(t=e.filenameEnc)?"media":t.lastIndexOf(".")>0?t.slice(0,t.lastIndexOf(".")-1+1):t)+"."+n}function zG(e,t){var n=fr.b(void 0,e),i=XC.d[t.replace("res","")],r=Math.sqrt(i/n),a=i/r;return[Math.round(a),Math.round(r)]}function KG(e,t){return e[t+"ResDownloadUrl"]?UG(e,t):zG(e,t)}function qG(e,t){return Math.max.apply(Math,UG(e,t))}function QG(e,t){return e[t+"FileType"]}function YG(e){return"resOriginal"===e}function ZG(e,t){if(!t)return!1;if(YG(t)){var n=GG(e,t);if(!n||Vf.d(n,fr.a)!==fr.a.Type.IMAGE||!vG.c(n))return!1}return Boolean(HG(e,t)||function(e){return e.dynamicTemplateURLFromOriginal}(e))}function XG(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e7,n=RG.toArray(),i=0,r=0;e=n[r];r++)i+=(e.naturalWidth||e.width)*(e.naturalHeight||e.height);for(var a,s=n.length-1;i>t&&(a=n[s]);s--)eH(a)||(i-=(a.naturalWidth||a.width)*(a.naturalHeight||a.height),JG(a));bG.imageDerivativeStore.externalPixelCount=i,bG.imageDerivativeStore.pruneCache()}function JG(e){var t=NG.get(e),n=LG[t];n&&(CF.c(n,e),n.length||delete LG[t]),RG.remove(e),NG.delete(e),xG.delete(e)}function eH(e){return e&&!!e.parentNode}function tH(e,t){return(e.naturalWidth||e.width)-(t.naturalWidth||t.width)||(e.naturalHeight||e.height)-(t.naturalHeight||t.height)}function nH(e){return e?Math.max(e.naturalWidth||e.width||0,e.naturalHeight||e.height||0):0}bG.imageDerivativeStore.listen("cacheSizeIncreased",(function(){XG(0)}));var iH=function(){function e(){this._lastEnsureRange={startIndex:1/0,endIndex:-1/0},this._passiveRequestsRemaining=0}var t=e.prototype;return t.ensureRangeStationary=function(e,t){var n=this,i=e.firstVisibleIndex,r=e.lastVisibleIndex;this._passiveRequestsRemaining=3;var a=this.ensureRange(t,i,r);a.then((function(){a===n._passiveRequestPromise&&n._ensureRangePassive(t)})),this._passiveRequestPromise=a},t.ensureRangeOnScroll=function(e,t,n){var i=n.firstVisibleIndex,r=n.lastVisibleIndex,a=e.scrollVelocity;if(e.scrollSpeedEnum>=jU.Fast)this._cancelPassiveRequests();else{var s,o,l=a>0,c=a<0,u=e.gridMetrics.itemsPerPage,d=Math.min(u,30),h=this._lastEnsureRange,p=h.startIndex,f=h.endIndex;l&&f>r+d||c&&p<i-d||(l?(s=i,o=r+2*d):c?(s=i-2*d,o=r):(s=i,o=r),this._cancelPassiveRequests(),this.ensureRange(t,s,o))}},t.ensureRange=function(e,t,n){if(!e||e.isDisposed||e.isDisposing)return Promise.resolve();if(t>=e.length||n<0)return Promise.resolve();this._lastEnsureRange={startIndex:t,endIndex:n};var i=Math.max(0,t),r=Math.min(e.length-1,n);return e.ensureRange(i,r)},t._ensureRangePassive=function(e){var t=this;if(this._passiveRequestsRemaining<=0)this._cancelPassiveRequests();else{this._passiveRequestsRemaining-=1;var n=this._lastEnsureRange,i=n.startIndex,r=n.endIndex,a=i-30,s=r+30,o=[this.ensureRange(e,a,i-1),this.ensureRange(e,r+1,s)],l=Promise.all(o);l.then((function(){l===t._passiveRequestPromise&&t._ensureRangePassive(e)})),this._passiveRequestPromise=l,this._lastEnsureRange={startIndex:a,endIndex:s}}},t.cleanup=function(){this._cancelPassiveRequests(),this._lastEnsureRange={startIndex:1/0,endIndex:-1/0}},t._cancelPassiveRequests=function(){this._passiveRequestPromise=void 0,this._passiveRequestsRemaining=0},e}();function rH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aH(e,t){return(aH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sH=function(e){var t,n;function i(){var t;return(t=e.apply(this,arguments)||this).requiresActiveForHover=!0,t.requiresActiveForPress=!0,t.cssClassPrefix="",t.pointerIsOver=!1,t.pointerIsDown=!1,t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,aH(t,n);var r,a,s=i.prototype;return s.buttonAction=function(){},s.didBecomeActive=function(){this.isActive=!0,this._renderButtonActivity()},s.didBecomeInactive=function(){this.isActive=!1,this._renderButtonActivity()},s.pointerDown=function(e){this.pointerIsDown=!0,this._renderButtonActivity()},s.pointerUp=function(e){this.pointerIsDown=!1,this._renderButtonActivity(),this.isActive&&this.pointerIsOver&&this.buttonAction(),this.status=HU.COMPLETE,this.handleStatusChange()},s.pointerEnter=function(e){this.pointerIsOver=!0,this._renderButtonActivity()},s.pointerLeave=function(e){this.pointerIsOver=!1,this._renderButtonActivity()},s._renderButtonActivity=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(this.isActive||!this.requiresActiveForHover)&&this.isBeingHovered&&!e,n=(this.isActive||!this.requiresActiveForPress)&&this.isBeingPressed&&!e,i=this.onButtonActivity,r=this.element;if(i&&i(t,n),r){var a=this.cssClassPrefix?this.cssClassPrefix+"-":"";r.classList.toggle(a+"being-hovered",t),r.classList.toggle(a+"being-pressed",n)}},s.destroy=function(){this.isActive=!1,this._renderButtonActivity(!0),e.prototype.destroy.call(this)},r=i,(a=[{key:"isBeingHovered",get:function(){return this.pointerIsOver||this.pointerIsDown}},{key:"isBeingPressed",get:function(){return this.pointerIsOver&&this.pointerIsDown}}])&&rH(r.prototype,a),i}(zU);function oH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lH(e,t){return(lH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cH=function(e){var t,n,i,r;function a(){var t;return(t=e.apply(this,arguments)||this).cssClassPrefix="navigation",t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,lH(t,n),a.prototype.buttonAction=function(){this.element.view.wasActivatedForNavigation()},i=a,(r=[{key:"isEnabled",get:function(){var e,t,n,i=this.element.view;return!(null!=(e=i.itemState)&&e.isDisabled)&&((null==(t=i.itemState)?void 0:t.primaryInteractionMode)===yn.a.MOUSE||!(null!=(n=i.itemState)&&n.selectionModeIsActive))}}])&&oH(i.prototype,r),a}(sH);function uH(e,t){return(uH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hH(e,t){return(hH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pH=function(e){var t,n,i,r;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,hH(t,n),a.prototype.longPressAction=function(){this.element.view.wasActivatedForNavigation()},i=a,(r=[{key:"isEnabled",get:function(){var e,t,n,i=this.element.view;return!(null!=(e=i.itemState)&&e.isDisabled)&&(null==(t=i.itemState)?void 0:t.primaryInteractionMode)===yn.a.TOUCH&&(null==(n=i.itemState)?void 0:n.selectionModeIsActive)}}])&&dH(i.prototype,r),a}(function(e){var t,n;function i(){var t;return(t=e.apply(this,arguments)||this).movementTolerance=5,t.longPressDuration=500,t.downX=void 0,t.downY=void 0,t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,uH(t,n);var r=i.prototype;return r.longPressAction=function(){},r.pointerDown=function(e){this.downX=e.clientX,this.downY=e.clientY,clearTimeout(this.commitmentTimeout),this.commitmentTimeout=setTimeout(this.commitLongPress.bind(this),this.longPressDuration)},r.pointerMove=function(e){(!this.downX||!this.downY||Math.sqrt(Math.pow(e.clientX-this.downX,2)+Math.pow(e.clientY-this.downY,2))>this.movementTolerance)&&this.cancelLongPress()},r.pointerUp=function(){this.cancelLongPress()},r.cancelLongPress=function(){clearTimeout(this.commitmentTimeout),this.status=HU.FAILED,this.handleStatusChange()},r.commitLongPress=function(){clearTimeout(this.commitmentTimeout),this.status=HU.COMPLETE,this.handleStatusChange(),this.longPressAction()},r.destroy=function(){clearTimeout(this.commitmentTimeout)},i}(zU));function fH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var mH=new Set,_H=function(){function e(e){this._prevOuterAspectRatio=0,this.isBeforeFirstPaint=!0,this._firstRenderFrameTimeout=void 0,this.renderExtensions=e.renderExtensions||[],this.wasActivatedForNavigation=e.wasActivatedForNavigation||function(){},this.wasActivatedForSelection=e.wasActivatedForSelection||function(){},this._feedbackService=e.feedbackService}var t,n,i=e.prototype;return i.render=function(e){var t=this,n=e.itemSize,i=e.scrollSpeed,r=e.pageOffset,a=this.itemState;if(this._itemSize=n,a){if(this._firstRenderFrameTimeout||(this._firstRenderFrameTimeout=iE.b((function(){return t.isBeforeFirstPaint=!1}))),this._updateClassName(),this._lastRenderedPK!==a.pk&&(this._disposeImageElement(),this._disposeErrorElement()),this.renderExtensions)for(var s,o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return fH(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fH(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.renderExtensions);!(s=o()).done;)(0,s.value)(this,e);this._lastRenderedPK=a.pk;var l=a.masterData,c=a.assetData,u=a.pk;if(l&&c&&u){this._updateOuterAspectRatio();var d=window.devicePixelRatio||1,h=Math.min(2,d),p=nH(ef.b(this.isSquare,this.mediaAspectRatio,1,Math.floor(n.width*h),Math.floor(n.height*h))),f=this._imageElement,g=f&&nH(f)>=p?f:BG(u,p);if(g)this._replaceImageElement(g);else if(!this._errorElement&&!(i>=jU.Fast)){var m=this._latestLoadRequest;if(!(m&&m.mediaPK===u&&p<=m.incomingImageMsl)){var _=this._loadDerivative(u,l,c,p,r);_.then((function(e){t._latestLoadRequest&&t._latestLoadRequest.promise===_&&(t._latestLoadRequest=void 0,e.ok?t._replaceImageElement(e.data):e.failed&&t._handleLoadFailed())}))}}}}},i._loadDerivative=function(e,t,n,i,r){this._cancelExistingLoadRequest();var a=function(e,t,n,i,r){if(!function(e){var t=e.dataClassType,n=tC.a;return t===n.IMAGE.value||t===n.MOVIE.value||t===n.UNKNOWN.value&&"com.adobe.pdf"===e.itemType}(t))return new IG(void 0,e,void 0,Promise.resolve(c.okResult()));var a=BG(e,i),s=a&&nH(a);if(s&&s>=i)return new IG(void 0,e,s,Promise.resolve(c.okResult(a)));var o=n,l=jG(o,i);if(!l&&!(l=jG(o=t,i)))return new IG(void 0,e,void 0,Promise.resolve(c.failedResult()));if(Date.now()-o._receiptTimestamp>YC.a.derivativeUrlExpiry)return function(e){FG.has(e)||(FG.add(e),1===FG.size&&setTimeout((function(){FG.size&&(fr.a.reload({primaryKeys:Array.from(FG)}),FG.clear())}),1e3))}(e),new IG(void 0,e,void 0,Promise.resolve(c.cancelledResult()));var u=function(e,t,n){var i=!t[n+"ResDownloadUrl"],r=VG;r.mediaPK=e;var a=KG(t,n);return r.width=a[0],r.height=a[1],r.mimeType=i?"image/jpeg":t[n+"MimeType"],r.isOriginal=-1!==n.indexOf("Original"),r.reflectsEdits="CPLAsset"===t.recordType,r.isDynamic=i,r.outdateCount=0,kG.call(r)}(e,o,l),d=new IG(u,e,function(e,t){return Math.max.apply(Math,KG(e,t))}(o,l));return d.promise=new Promise((function(t){var n=function(e,t){return function(e,t){var n=e[t+"ResDownloadUrl"];if(void 0!==n)return WG(n,$G(e))}(e,t)||function(e,t){var n=e.dynamicTemplateURLFromOriginal;if(void 0!==n)return WG(n,$G(e),function(e,t){return Math.max.apply(Math,zG(e,t))}(e,t))}(e,t)}(o,l),i=GG(o,l),a=function(e,t){var n=e[t+"Width"]*e[t+"Height"],i=e.dynamicTemplateURLFromOriginal?e.resOriginalWidth*e.resOriginalHeight:void 0;return Object.assign({derivativeRequestReason:Jp.a.GRID_ASSET.value,derivativeApproxArea:qC.a(n),derivativeNameByArea:XC.e(n),derivativeNameNominal:t.substring("res".length),derivativeUTI:QG(e,t)},e.dynamicTemplateURLFromOriginal?{derivativeTranscodeSourceApproxByteSize:qC.a(e.resOriginalResSize),derivativeTranscodeSourceApproxDerivativeArea:qC.a(i),derivativeTranscodeSourceDerivativeNameByArea:i?XC.e(i/1.2):void 0,derivativeTranscodeSourceDerivativeNameNominal:"Original",derivativeTranscodeSourceUTI:e.resOriginalFileType}:{})}(o,l);if(n&&i){var s=new DG({url:n,mimeType:i,shouldCheckOrientation:YG(l)&&"image/jpeg"===o.resOriginalMimeType,feedbackService:L.n().feedbackService,offscreeniness:r,reportingData:a,isTranscoderRequest:!HG(o,l),onFinish:function(n,i){XG(),function(e,t,n){(LG[t]||(LG[t]=[])).push(e),LG[t].sort(tH),RG.unshift(e,!0),xG.set(e,n),NG.set(e,t)}(i,e,u),t(c.okResult(i))},onFail:function(){t(c.failedResult())}});s.send(),d.imageRequest=s}else t(c.failedResult())})),d}(e,t,n,i,Math.abs(r));return this._latestLoadRequest=a,a.promise},i._replaceImageElement=function(e){var t=this._imageElement;if(t!==e&&this._element&&this._itemSize&&(this._disposeErrorElement(),this._disposeImageElement(),this._imageElement=e,e)){var n=e._photosExifOrientation;n&&(this._updateOuterAspectRatio(),this._rotateImage(e,n)),e.classList.add("derivative-image"),t||this.isBeforeFirstPaint||oO(e,0,1,200),this._element.insertBefore(e,this._element.firstChild)}},i._updateClassName=function(){if(this.itemState){var e=this.itemState,t=e.isSelected,n=e.isHidden,i=e.isDisabled,r=e.isDimmed,a=e.pk,s=this.element.classList;s.toggle("is-selected",Boolean(t)),s.toggle("is-hidden",Boolean(n)),s.toggle("is-disabled",Boolean(i)),s.toggle("has-media",Boolean(a)),s.toggle("is-dimmed",Boolean(r)),s.toggle("is-errored",Boolean(this._errorElement))}},i._updateOuterAspectRatio=function(){if(this.itemState&&this._itemSize){var e=this.outerAspectRatio;if(this._prevOuterAspectRatio!==e){var t=hV(e,this._itemSize.width,this._itemSize.height,this.isSquare);this.element.setAttribute("style",fV(t)),this._prevOuterAspectRatio=e}}},i._rotateImage=function(e,t){if(this._itemSize){var n=pV(this.outerAspectRatio,t,this._itemSize.width,this._itemSize.height);e.setAttribute("style",fV(n))}},i._disposeImageElement=function(){var e=this._imageElement;this._imageElement=void 0,e&&e.parentNode===this._element&&(e.classList.remove("derivative-image"),lO(e),e.setAttribute("style",""),e.remove())},i._disposeErrorElement=function(){this._errorElement&&(this._errorElement.remove(),this._errorElement=void 0)},i._cancelExistingLoadRequest=function(){this._latestLoadRequest&&(this._latestLoadRequest.cancel(),this._latestLoadRequest=void 0)},i._handleLoadFailed=function(){this._element&&void 0===this._errorElement&&(this._disposeImageElement(),this._errorElement=document.createElement("div"),this._errorElement.className="error-triangle",this._element.appendChild(this._errorElement),this.isBeforeFirstPaint||oO(this._errorElement,0,1,200),this._updateClassName(),this._sendErrorStat())},i._sendErrorStat=function(){var e,t=null==(e=this.itemState)?void 0:e.pk;t&&this._feedbackService&&!mH.has(t)&&(mH.add(t),this._feedbackService.report("itemViewErrorShown",{itemViewType:"nativeScrollingGrid"}))},i.wasRemoved=function(){this._cancelExistingLoadRequest(),this._disposeImageElement(),this._disposeErrorElement(),this._element=void 0,this.itemState=void 0,this._lastRenderedPK=void 0},t=e,(n=[{key:"element",get:function(){return this._element||(this._element=document.createElement("div"),this._element.className="cw-photo-item-view",this._element.view=this,this._element.Gestures=[cH,pH]),this._element}},{key:"imageElement",get:function(){return this._imageElement}},{key:"isSquare",get:function(){var e=this.itemState;return!(!e||e.sizeClass!==dn.a.COMPACT||e.primaryInteractionMode!==yn.a.TOUCH)}},{key:"outerAspectRatio",get:function(){return this.isSquare?1:this.mediaAspectRatio}},{key:"mediaAspectRatio",get:function(){var e=this.itemState;return e&&e.masterData&&e.assetData?fr.b(e.masterData,e.assetData):1}}])&&gH(t.prototype,n),e}();function vH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bH(e,t){return(bH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yH=function(e){var t,n,i,r;function a(){var t;return(t=e.apply(this,arguments)||this).cssClassPrefix="selection",t.requiresActiveForPress=!1,t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,bH(t,n),a.prototype.buttonAction=function(){this.element.view.wasActivatedForSelection()},i=a,(r=[{key:"isEnabled",get:function(){var e,t,n=this.element.view;return(null==(e=n.itemState)?void 0:e.primaryInteractionMode)===yn.a.TOUCH&&(null==(t=n.itemState)?void 0:t.selectionModeIsActive)}}])&&vH(i.prototype,r),a}(sH);function wH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IH(e,t){return(IH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SH=function(e){var t,n,i,r;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,IH(t,n),a.prototype.buttonAction=function(){zM(this.element).wasActivatedForSelection()},i=a,(r=[{key:"isEnabled",get:function(){var e;return(null==(e=zM(this.element).itemState)?void 0:e.primaryInteractionMode)===yn.a.MOUSE}}])&&wH(i.prototype,r),a}(sH),CH=function(e,t){var n=e.element,i=e.itemState;if(i){n.Gestures.includes(yH)||n.Gestures.push(yH);var r=e.selectionCheckmark,a=!1;if(i.isDisabled||i.isDimmed||(a=i.primaryInteractionMode===yn.a.MOUSE?Boolean(i.pk&&i.selectionModeIsActive):Boolean(i.selectionModeIsActive&&i.isSelected)),a&&!r&&((r=e.selectionCheckmark=document.createElement("div")).className="selection-checkmark",i.primaryInteractionMode===yn.a.TOUCH&&(r.selOverlay=document.createElement("div"),r.selOverlay.className="selection-overlay",r.selOverlay.appendChild(r),e.isBeforeFirstPaint||oO(r.selOverlay,0,1,100)),n.appendChild(r.selOverlay||r),r.Gestures=[SH]),!a&&r){var s=r.selOverlay;s?oO(s,1,0,100,(function(){return s.remove()})):r.remove(),r.Gestures=void 0,r=e.selectionCheckmark=void 0}a&&r&&r.classList.toggle("is-checked",Boolean(i.isSelected))}},EH=function(e,t){var n=e.element,i=e.itemState;if(i&&i.masterData&&i.masterData.dataClassType===tC.a.AUDIO.value&&!e.audioBadge){var r=e.audioBadge=document.createElement("div");r.className="audio-badge",n.appendChild(r)}},AH=function(e,t){var n=e.element,i=e.itemState;if(i&&i.masterData&&i.masterData.dataClassType===tC.a.MOVIE.value&&!e.videoBadge){var r=i.primaryInteractionMode===yn.a.TOUCH,a=e.videoBadge=document.createElement("div");a.className="video-badge "+(r?"render-as-duration":"render-as-badge"),n.appendChild(a),r&&(a.textContent=fr.c(i.masterData,i.assetData))}};function OH(e){var t=e.primaryInteractionMode,n=e.orientationType,i=e.sizeClass,r=e.viewportWidth,a=0;t===yn.a.MOUSE?a=$l.uiPhotosGridGutterDesktop:i===dn.a.COMPACT&&n===ik.a.LANDSCAPE?a=Ec.cmmUISizeClassCompactLandscapeInset:i===dn.a.REGULAR&&(a=n===ik.a.LANDSCAPE?Ec.cmmUISizeClassRegularLandscapeInset:Ec.cmmUISizeClassRegularPortraitInset);var s=function(e){var t=e.sizeClass,n=e.viewportWidth,i=e.inlinePadding;return e.primaryInteractionMode===yn.a.MOUSE?Ec.cmmUIPhotosColumnCountDesktop:n>$l.uiSizeIPad129LandscapeWidth?Ec.cmmUIPhotosColumnCountIPad129Like:t===dn.a.COMPACT?n<$l.uiSizeIPhone4LandscapeWidth?Ec.cmmUIPhotosColumnCountCompactPortrait:n<$l.uiSizeIPhoneSELandscapeWidth?$l.uiPhotosColumnCountIPhone4Like:$l.uiPhotosColumnCountCompact:n>$l.uiSizeIPad129LandscapeWidth?Ec.cmmUIPhotosColumnCountIPad129Like:Math.floor((n-2*i+$l.uiPhotosItemMinSpacing)/($l.uiPhotosDefaultItemSideSize+$l.uiPhotosItemMinSpacing))}({primaryInteractionMode:t,orientationType:n,sizeClass:i,viewportWidth:r,inlinePadding:a}),o=function(e){var t=e.preferredMouseColumnCount,n=e.primaryInteractionMode,i=e.orientationType,r=e.sizeClass,a=e.viewportWidth,s=n===yn.a.TOUCH,o=r===dn.a.COMPACT,l=s&&o,c=function(e){var t=e.preferredMouseColumnCount,n=e.orientationType,i=e.sizeClass,r=e.viewportWidth;return e.primaryInteractionMode===yn.a.MOUSE?void 0!==t?t:$l.uiPhotosColumnCountDesktop:i===dn.a.COMPACT?r<$l.uiSizeIPhone4LandscapeWidth?$l.uiPhotosColumnCountIPhone3GSLike:r<$l.uiSizeIPhoneSELandscapeWidth?$l.uiPhotosColumnCountIPhone4Like:$l.uiPhotosColumnCountCompact:n===ik.a.PORTRAIT?$l.uiPhotosColumnCountPortrait:$l.uiPhotosColumnCountLandscape}({preferredMouseColumnCount:t,primaryInteractionMode:n,orientationType:i,sizeClass:r,viewportWidth:a}),u=l?Ic.rowSpacingSquare:Ic.rowSpacingAspectRatio,d=l?Ic.columnSpacingSquare:Ic.columnSpacingAspectRatio,h=0;return s&&!o?h=$l.uiSizeClassRegularInset:s||(h=$l.uiPhotosGridGutterDesktop),{numColumns:c,itemAspectRatio:1,rowGap:u,columnGap:d,paddingInlineStart:h,paddingInlineEnd:h}}({primaryInteractionMode:t,orientationType:n,sizeClass:i,viewportWidth:r});return Object.assign({},o,{paddingInlineStart:a,paddingInlineEnd:a,numColumns:s})}var TH,MH,DH,PH,LH,RH=fi.a.extend({mixinDependencies:[fl.a],init:function(){var e=this,t=arguments;e.__s._$F4$init.apply(e,t),this.metadataLoader=new iH},viewClass:In.a.extend({mixinDependencies:[Pl.a],additionalClassNames:F.b(["cw-photo-grid-view"]),isViewportSizeDOMReadingEnabled:V.b(!1)}),metadataLoader:void 0,grid:void 0,gridHasRendered:V.b(!1),gridDidRefresh:B.i(),gridScrollTop:V.b(0),gridMetrics:V.b(),gridDidFinishScroll:B.i(),selectedIndices:V.b({strong:!0,defaultValue:k.c(kp.a),type:kp.a}),selectionModeIsActive:V.b(!0),selection:V.b({dependencies:["selectedIndices","collection","collection.contentsDidChangeUntracked","collection.length"],readOnly:!0,strong:!0,type:oi.a,get:Object.assign((function(){var e=this.collection,t=oi.a.create();return e&&(t.serializer=e.serializer,this.selectedIndices.forEach((function(n){t.encodedAdd(e.encodedObjectAt(n))}))),t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=oi.a.create();return r&&(a.serializer=r.serializer,i.internalGet(this,t[0+n]).forEach((function(e){a.encodedAdd(r.encodedObjectAt(e))}))),a}})}),handleSelectionChange:function(e){var t=e.selectedIndexes,n=e.added,i=e.removed;if(t){var r=kp.a.create();t.forEach((function(e){r.add(e)})),this.selectedIndices=r}else{var a=this.selectedIndices.clone();n&&n.forEach((function(e){a.add(e)})),i&&i.forEach((function(e){a.remove(e)})),this.selectedIndices=a}},collection:V.b({type:Wo.b}),gridLayoutMetrics:V.b({didChange:function(e){this.grid&&!Q.a(this.grid.layoutMetrics,e)&&(this.grid.layoutMetrics=e)}}),itemDataDidChange:B.i(),itemStateForIndex:V.b({readOnly:!0,strong:!0,dependencies:["collection","collection.length","collection.contentsDidChangeUntracked","primaryInteractionMode","sizeClass","selectedIndices","selectionModeIsActive","shouldHideMostProminentDisplayOfMediaWithPK","itemDataDidChange"],get:Object.assign((function(){var e=this,t=this.primaryInteractionMode,n=this.sizeClass,i=this.selectedIndices,r=this.selectionModeIsActive,a=this.shouldHideMostProminentDisplayOfMediaWithPK;return function(s){var o=e.getPKForIndex(s),l=e.getMediaDataForPK(o),c=l.masterData,u=l.assetData;return{primaryInteractionMode:t,sizeClass:n,isSelected:r?i.contains(s):void 0,selectionModeIsActive:r,isHidden:Boolean(o&&o===a),pk:o,masterData:c,assetData:u}}}),{__CW__getter:function(e,t,n,i){var r=this,a=i.internalGet(this,t[3+n]),s=i.internalGet(this,t[4+n]),o=i.internalGet(this,t[5+n]),l=i.internalGet(this,t[6+n]),c=i.internalGet(this,t[7+n]);return function(e){var t=r.getPKForIndex(e),n=r.getMediaDataForPK(t),i=n.masterData,u=n.assetData;return{primaryInteractionMode:a,sizeClass:s,isSelected:l?o.contains(e):void 0,selectionModeIsActive:l,isHidden:Boolean(t&&t===c),pk:t,masterData:i,assetData:u}}}}),didChange:function(e){this.grid&&(this.grid.itemStateForIndex=e)}}),getPKForIndex:function(e){return this.collection?this.collection.encodedObjectAt(e):void 0},getItemViewForPK:function(e){if(e&&this.grid)for(var t=this.grid.itemViews,n=0;n<t.length;n++){var i=t[n];if(i.itemState&&i.itemState.pk===e)return i}},getMediaDataForPK:function(e){var t=void 0,n=void 0;if(e){var i=fr.a.getDataHashForPrimaryKey(e);i&&(t=eC.a.getDataHashForPrimaryKey(i.master),n=pr.a.getDataHashForPrimaryKey(i.asset))}return{masterData:t,assetData:n}},headerElement:V.b({didChange:function(e){if(this.grid){var t=this.grid.headerElement;this.grid.headerElement=e,e.view&&(e.view.parent=this.view),t&&t.view&&(t.view.parent=void 0)}}}),footerElement:V.b({didChange:function(e){if(this.grid){var t=this.grid.footerElement;this.grid.footerElement=e,e.view&&(e.view.parent=this.view),t&&t.view&&(t.view.parent=void 0)}}}),initGrid:function(){var e=this.itemWasActivatedForNavigation,t=this.itemWasActivatedForSelection,n=L.n().feedbackService,i=this.collection?this.collection.length:0;this.grid=new _G({numItems:i,layoutMetrics:this.gridLayoutMetrics,createItemView:function(){return new _H({wasActivatedForNavigation:function(t){e(this,t)},wasActivatedForSelection:function(e){t(this,e)},renderExtensions:[CH,EH,AH],feedbackService:n})},itemStateForIndex:this.itemStateForIndex,primaryInteractionMode:this.primaryInteractionMode,headerElement:this.headerElement,footerElement:this.footerElement,onScroll:this.handleScroll.bind(this),onScrollFinished:this.handleScrollFinished.bind(this),onVisibleIndexesChange:this.handleVisibleIndexesChange.bind(this),onGridMetricsChange:this.handleGridMetricsChange.bind(this),onGridRender:this.handleGridRendered.bind(this)}),this.grid.render(this.view.element),!this.grid.gridMetrics&&i>0&&n.report("initialGridRenderFailed",{vc:this.getPath("parent.constructor.name")||""}),this.headerElement&&this.headerElement.view&&(this.headerElement.view.parent=this.view),this.footerElement&&this.footerElement.view&&(this.footerElement.view.parent=this.view),this._storeListener=L.n().listen("dataDidChangeForPrimaryKeys",this.handleStoreDataChanged.bind(this)),this.gridHasRendered=!0},handleStoreDataChanged:function(e){if(this.grid&&e&&e.context){var t=e.context,n=t.get(eC.a),i=t.get(pr.a);if(n||i)for(var r=this.grid.itemViews,a=0;a<r.length;a++){var s=r[a].itemState.pk;if(s){var o=fr.a.getDataHashForPrimaryKey(s),l=o&&o.master,c=o&&o.asset;if(c&&i&&i.has(c)||l&&n&&n.has(l))return void this.itemDataDidChange()}}}},handleGridRendered:function(){this.gridHasRendered&&this.sendEvent("gridDidRefresh")},handleScroll:function(e){var t=e.scrollTop;this.view.isAttached&&(this.gridScrollTop=t)},handleScrollFinished:function(){this.metadataLoader.ensureRangeStationary(this.grid,this.collection),this.sendEvent("gridDidFinishScroll")},handleGridMetricsChange:function(e){var t=e.gridMetrics;this.gridMetrics=t},handleVisibleIndexesChange:function(e){e.lastVisibleIndex<0||(this.grid.scrollSpeedEnum!==jU.Stationary?this.metadataLoader.ensureRangeOnScroll(this.grid,this.collection,e):this.metadataLoader.ensureRangeStationary(this.grid,this.collection))},measureViewport:function(){if(this.view.isAttached){var e=this.view.viewportWidth,t=this.view.viewportHeight;this.view.measureViewport(),!this.gridHasRendered||e===this.view.viewportWidth&&t===this.view.viewportHeight||this.grid.refreshGrid()}},update:function(){},isIndexSelectable:function(e){return!0},selectAll:function(){for(var e=kp.a.create(),t=0;t<this.collection.length;t++)this.isIndexSelectable(t)&&e.add(t);this.selectedIndices=e},deselectAll:function(){var e=kp.a.create();this.selectedIndices=e},selectItem:function(e){var t=e.handle;this.selectIndex(t.position)},deselectItem:function(e){var t=e.handle;this.deselectIndex(t.position)},selectIndex:function(e){this.selectRange(e)},deselectIndex:function(e){this.deselectRange(e)},selectRange:function(e,t){this.toggleSelectionInRange(e,t,!0)},deselectRange:function(e,t){this.toggleSelectionInRange(e,t,!1)},toggleSelectionInRange:function(e,t,n){var i=this.selectedIndices.clone();t=void 0===t?e:t;for(var r=Math.min(e,t),a=Math.max(e,t),s=r;s<=a;s++)n?this.isIndexSelectable(s)&&i.add(s):i.remove(s);this.selectedIndices=i},_initialRender:B.h("isAttached","view.isAttached","collection",(function(e,t){!this.isDisposed&&!this.gridHasRendered&&e&&t&&this.collection&&this.initGrid()})),_didAttach:B.h("view.isAttached",(function(e){e&&this.view.measureViewport(),e&&this.gridHasRendered&&this.gridScrollTop&&this.grid.scrollTop!==this.gridScrollTop&&(this.grid.scrollTop=this.gridScrollTop)})),_clearFocusedChild:B.h({inputs:[G.a.bindingFor("application.topFocusLayer")],callback:function(e){e&&!e.isDisposed&&e.defaultFocusChild!==G.a.application.rootViewController&&this.focusedChild&&(this.focusedChild=null)}}),shouldHideMostProminentDisplayOfMediaWithPK:V.b(),itemWasActivatedForNavigation:Bu.b((function(e,t){var n=Gd.a(e,"itemState.pk"),i=n&&fr.a.find(n);i&&this.navigateToOneUp(i)})),itemWasActivatedForSelection:Bu.b((function(e,t){var n=this.grid.getItemViewIndex(e);n>=0&&(this.selectedIndices.contains(n)?this.deselectIndex(n):(nu.a.sharedInstance.activeKeys.has(ml.a.SHIFT)&&this._currentPivotIndex>=0?this.selectRange(n,this._currentPivotIndex):this.selectIndex(n),this._currentPivotIndex=n))})),_currentPivotIndex:-1,navigateToOneUp:function(e){!function(e){var t,n;if("string"===typeof e){var i=LG[t=e];n=i&&i[i.length-1]}else n=e,t=NG.get(n);if(n&&t){var r=fr.a.find(t),a=r&&r.getDerivative(xG.get(n));a&&(a.isLoaded||(a.retain().autorelease(),a.element=Sh.canvasPool.getInstanceFromRotatedImage(n,n._photosExifOrientation)))}}(e.pk),this.sendEvent("userDidIndicateDesireToNavigateToMedia",e)},getRectInWindowForPrimaryZoomRectableMediaPK:function(e){var t=this.getItemViewForPK(e);if(t)return t.element.getBoundingClientRect()},isScrolledToInitialPosition:function(){return 0===this.gridScrollTop},scrollToInitialPosition:function(){this.grid&&(this.grid.scrollTop=0)},zoomTransitionWillStartWithMedia:function(e,t){if(this.grid&&this.collection&&e&&t){for(var n=-1,i=e.pk,r=0;r<this.collection.length;r++)if(this.collection.encodedObjectAt(r)===i){n=r;break}if(!(n<0)&&!this.grid.isIndexInViewport(n,!0)){var a=this.grid.gridMetrics.cellHeight;this.grid.scrollToIndex(n,-this.view.viewportHeight/2+a/2),this.handleScroll({scrollTop:this.grid.scrollTop})}}},dispose:function(){var e=this,t=arguments;this.grid&&(this.grid.destroy(),this.grid=void 0),this._storeListener&&(this._storeListener.disconnect(),this._storeListener=void 0),this.metadataLoader.cleanup(),e.__s._$5sC$dispose.apply(e,t)},__superMap:{_$F4$init:"init",_$5sC$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CWPhotoGridViewController"}}).extend({viewClass:F.b({additionalClassNames:F.b("cmm-photo-grid-view")}),rootRecord:V.b(),gridLayoutMetrics:V.b({readOnly:!0,strong:!0,dependencies:["primaryInteractionMode","orientationType","sizeClass","view.viewportWidth"],get:Object.assign((function(){return OH({primaryInteractionMode:this.primaryInteractionMode,orientationType:this.orientationType,sizeClass:this.sizeClass,viewportWidth:this.view.viewportWidth})}),{__CW__getter:function(e,t,n,i){return OH({primaryInteractionMode:i.internalGet(this,t[0+n]),orientationType:i.internalGet(this,t[1+n]),sizeClass:i.internalGet(this,t[2+n]),viewportWidth:i.internalGetPath(this,t[3+n])})}})}),itemStateForIndex:V.b({dependencies:F.b([JS.bindingFor("allModels"),JS.bindingFor("allModels.contentsDidChange")]),get:function(){var e=this,t=arguments,n=e.__s._$Pj$get.apply(e,t);return function(e){var t=n(e),i=!1;if(t.assetData){var r=t.assetData,a=r.recordName,s=r.zoneID;i=UU.sharedInstance.isRecordImported(a,s)}return t.isDimmed=i,t}},__superMap:{_$Pj$get:"get"}}),isIndexSelectable:function(e){var t=this,n=arguments,i=this.getPKForIndex(e),r=this.getMediaDataForPK(i),a=r.assetData;if(a){if(UU.sharedInstance.isRecordImported(a.recordName,a.zoneID))return!1}else if(UU.sharedInstance.hasExcludeJob(this.rootRecord.zoneID))return!1;return t.__s._$p3$isIndexSelectable.apply(t,n)},navigateToOneUp:function(){var e=this,t=arguments,n=G.a.application.feedbackService;n&&n.report("cmmOneUpEntered"),e.__s._$t4$navigateToOneUp.apply(e,t)},userHasManipulatedSelection:V.b(),_selectionManipulationObserver:B.g("selectedIndices",(function(){this.selectedIndices.length!==this.collection.length&&(this.userHasManipulatedSelection=!0)})),__superMap:{_$p3$isIndexSelectable:"isIndexSelectable",_$t4$navigateToOneUp:"navigateToOneUp"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMPhotoGridViewController"}}),xH=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareDetailView"},{type:"VIEWOUTLET",tagname:"view",name:"actionButton"}],name:"contentContainer",classes:["cmm-share-detail-action-bar-content"]}],name:"floatingContainer",classes:["cmm-share-detail-action-bar-floater"]},__QUALIFIED_CLASS_NAME__:"ShareDetailActionBarFloatingView"},actionButton:V.b({type:In.a}),shareDetailView:V.b({type:In.a})}),NH=In.a.extend(Pl.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",name:"outerContainer"},className:"cmm-share-detail-action-bar",__QUALIFIED_CLASS_NAME__:"ShareDetailActionBarView"},actionButton:V.b({type:In.a}),shareDetailView:V.b({type:In.a}),floatingView:V.b({defaultValue:k.c(xH),downstreamBindings:{actionButton:"(owner).actionButton",shareDetailView:"(owner).shareDetailView"}}),init:function(){var e=this,t=arguments;e.__s._$Ev$init.apply(e,t),this.setIsFloating(!1)},isFloating:H.d({type:"boolean",readOnly:!0,get:function(){return this._isFloating}}),_isFloating:void 0,setIsFloating:function(e,t,n,i){var r=this.outerContainer,a=this.floatingView,s=a.floatingContainer,o=a.contentContainer;e?(yl.c(o).set("width",t).set("left",n),this._isFloating||(yl.c(r).set("height",r.offsetHeight),s.classList.add("is-floating"),s.remove(),i.element.appendChild(s),this.floatingView.parent=i)):!1!==this._isFloating&&(yl.c(r).clear("height"),s.classList.remove("is-floating"),yl.c(o).clear("width").clear("left"),s.remove(),r.appendChild(s),this.floatingView.parent=this),this._isFloating=e},__superMap:{_$Ev$init:"init"}}),FH=Ho.a.extend({staticMembers:{className:"cmm-mode-selection-toolbar-button",__QUALIFIED_CLASS_NAME__:"ModeSelectionButton"},additionalClassNames:["expanded-touch-target"],title:V.b({dependencies:["selectionModeIsActive"],readOnly:!0,get:Object.assign((function(){var e=this.selectionModeIsActive?"ModeSelectionButton.Cancel":"ModeSelectionButton.Select";return s.d(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?"ModeSelectionButton.Cancel":"ModeSelectionButton.Select";return s.d(r)}})}),action:"toggleSelectionMode",selectionModeIsActive:V.b({readOnly:!0,defaultValue:!1})}),VH=Ho.a.extend({staticMembers:{className:"cmm-mode-selection-toolbar-button",__QUALIFIED_CLASS_NAME__:"SelectAllButton"},additionalClassNames:["expanded-touch-target"],title:V.b({type:String,dependencies:["_areAllItemsSelected"],readOnly:!0,get:Object.assign((function(){var e=this._areAllItemsSelected?"SelectAllButton.DeselectAll":"SelectAllButton.SelectAll";return s.d(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n])?"SelectAllButton.DeselectAll":"SelectAllButton.SelectAll";return s.d(r)}})}),action:V.b({type:String,dependencies:["_areAllItemsSelected"],readOnly:!0,get:Object.assign((function(){return this._areAllItemsSelected?"deselectAll":"selectAll"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?"deselectAll":"selectAll"}})}),_areAllItemsSelected:V.b({type:Boolean,dependencies:["numSelectableItems","selectedItemCount"],readOnly:!0,get:Object.assign((function(){return this.selectedItemCount===this.numSelectableItems}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])===i.internalGet(this,t[0+n])}})}),selectedItemCount:V.b({type:Number}),numSelectableItems:V.b({type:Number})}),kH=In.a.extend({mixinDependencies:[fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"left"},{type:"VIEWOUTLET",tagname:"view",name:"right"}]},className:"cmm-mode-selection-toolbar",__QUALIFIED_CLASS_NAME__:"ModeSelectionToolbarView"},left:V.b({strong:!0,readOnly:!0,dependencies:["currentUserIsShareOwner","selectionModeIsActive"],get:Object.assign((function(){return this.selectionModeIsActive&&!1===this.currentUserIsShareOwner?this._selectAllButton:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&!1===i.internalGet(this,t[0+n])?this._selectAllButton:void 0}})}),right:V.b({defaultValue:k.c(FH),dependencies:["currentUserIsShareOwner","primaryInteractionMode"],downstreamBindings:{selectionModeIsActive:"(owner).selectionModeIsActive",isDisabled:"(owner).isAllAddedToLibrary"},readOnly:!0,strong:!0,get:Object.assign((function(e){if(!1===this.currentUserIsShareOwner&&(this.primaryInteractionMode===yn.a.TOUCH||!1===Ec.implicitDesktopSelectionMode))return e}),{__CW__getter:function(e,t,n,i){if(!1===i.internalGet(this,t[0+n])&&(i.internalGet(this,t[1+n])===yn.a.TOUCH||!1===Ec.implicitDesktopSelectionMode))return e}})}),_selectAllButton:V.b({strong:!0,defaultValue:k.c(VH),downstreamBindings:{numSelectableItems:"(owner).numSelectableItems",selectedItemCount:"(owner).selectedItemCount",isDisabled:"(owner).isAllAddedToLibrary"}}),collectionLength:V.b(),numSelectableItems:V.b(),currentUserIsShareOwner:V.b(),importIsInProgress:V.b(),isAllAddedToLibrary:V.b(),selectedItemCount:V.b(),selectionModeIsActive:V.b()}),BH=In.a.extend(qM.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sharePlacardView"},{type:"VIEWOUTLET",tagname:"view",name:"shareDetailActionBarView"},{type:"VIEWOUTLET",tagname:"view",name:"modeSelectionToolbarView"}],classes:["cmm-share-header-view"]},__QUALIFIED_CLASS_NAME__:"ShareHeaderViewV2"},equilibriumHeight:V.b({readOnly:!0,dependencies:["sharePlacardView.equilibriumHeight","detailActionBarHeight","measuredModeSelectionToolbarHeight","extraBottomSpacing"],get:Object.assign((function(){return this.getPath("sharePlacardView.equilibriumHeight")+this.detailActionBarHeight+this.measuredModeSelectionToolbarHeight+this.extraBottomSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+i.internalGet(this,t[3+n])}})}),extraBottomSpacing:V.b({type:Number,readOnly:!0,dependencies:["rowSpacing","modeSelectionToolbarView"],get:Object.assign((function(){return this.modeSelectionToolbarView?0:this.rowSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?0:i.internalGet(this,t[0+n])}})}),availableViewportHeight:V.b(),viewportHeight:V.b({readOnly:!0,dependencies:["availableViewportHeight","detailActionBarHeight"],get:Object.assign((function(){return Math.max(this.availableViewportHeight,this.detailActionBarHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),sharePlacardView:V.b({strong:!0,defaultValue:k.c(Xj),downstreamBindings:{rootRecord:"(owner).rootRecord",viewportWidth:"(owner).viewportWidth",availableHeightToDesire:"(owner).availableHeightForPlacardToDesire",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount"}}),actionButton:V.b({type:In.a}),shareDetailView:V.b({type:In.a}),shareDetailActionBarView:V.b({strong:!0,readOnly:!0,get:function(){var e=this.actionButton,t=this.shareDetailView;return NH.create({actionButton:e,shareDetailView:t})}}),expiryDate:V.b({dependencies:["rootRecord.expiryDate"],readOnly:!0,get:Object.assign((function(){return this.getPath("rootRecord.expiryDate")||0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||0}})}),modeSelectionToolbarView:V.b({strong:!0,readOnly:!0,downstreamBindings:{collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",importIsInProgress:"(owner).importIsInProgress",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive"},defaultValue:k.c(kH)}),measuredModeSelectionToolbarHeight:V.b({readOnly:!0,dependencies:["modeSelectionToolbarView.isAttached"],get:Object.assign((function(){if(!this.getPath("modeSelectionToolbarView.isAttached"))return 0;var e=this._mmstHeight;if(e)return e;var t=this.modeSelectionToolbarView.element,n=t.style,i=n.width;return n.width="10000px",e=t.offsetHeight,n.width=i,this._mmstHeight=e}),{__CW__getter:function(e,t,n,i){if(!i.internalGetPath(this,t[0+n]))return 0;var r=this._mmstHeight;if(r)return r;var a=this.modeSelectionToolbarView.element,s=a.style,o=s.width;return s.width="10000px",r=a.offsetHeight,s.width=o,this._mmstHeight=r}})}),detailActionBarHeight:V.b(Oi.c("shareDetailActionBarView.viewportHeight")),modeSelectionToolbarHeight:V.b({readOnly:!0,dependencies:["viewportHeight","sharePlacardHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign((function(){return Math.max(0,this.viewportHeight-this.sharePlacardHeight-this.detailActionBarHeight-this.extraBottomSpacing)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),sharePlacardHeight:V.b({readOnly:!0,dependencies:["viewportHeight","measuredModeSelectionToolbarHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign((function(){return Math.max(0,this.viewportHeight-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight-this.extraBottomSpacing)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),availableHeightForPlacardToDesire:V.b({readOnly:!0,dependencies:["availableHeightToDesire","measuredModeSelectionToolbarHeight","detailActionBarHeight"],get:Object.assign((function(){return this.availableHeightToDesire-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),_maintainWidth:B.h({inputs:["viewportWidth","actionButton.titleDidRender"],callback:function(){this.style.set("width",this.viewportWidth),this.shareDetailView.didResizeHorizontally()}}),_maintainLayout:B.h({inputs:["viewportHeight","sharePlacardView","shareDetailActionBarView","modeSelectionToolbarView","sharePlacardHeight","detailActionBarHeight","modeSelectionToolbarHeight","measuredModeSelectionToolbarHeight"],callback:function(e,t,n,i,r,a,s,o){if(e&&t&&n&&!isNaN(r)&&a){var l=t.equilibriumHeight;t.viewportHeight=l}}}),rootRecord:V.b(),collectionLength:V.b(),numSelectableItems:V.b(),currentUserIsShareOwner:V.b(),name:V.b(),isAuthenticated:V.b(),selectedItemCount:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),selectionModeIsActive:V.b(),uploadIsComplete:V.b(),availableHeightToDesire:V.b(),selectionHasBeenManipulated:V.b(),rowSpacing:V.b(),downloadIsInProgress:V.b(),importIsInProgress:V.b(),importedAssetDescriptor:V.b(),importedAssetCount:V.b(),isAllAddedToLibrary:V.b(),userIsUnableToImport:V.b()}),jH=Ho.a.extend({mixinDependencies:[fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldHaveLargeTapTarget",truevalue:"expanded-touch-target",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPrimaryAction",truevalue:"primary-action",attributes:{}}]}},className:"cmm-button",__QUALIFIED_CLASS_NAME__:"ThemedButton"},shouldHaveLargeTapTarget:V.b({type:Boolean,readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH}})}),isHidden:V.b(!1),isPrimaryAction:V.b(!1),isDisabled:V.b({readOnly:!0,dependencies:["downloadIsInProgress","selectedItemCount","selectionModeIsActive","isAllAddedToLibrary"],get:Object.assign((function(){return this.downloadIsInProgress||this.selectionModeIsActive&&this.selectedItemCount<=0||this.isAllAddedToLibrary}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])&&i.internalGet(this,t[1+n])<=0||i.internalGet(this,t[3+n])}})}),keyEquivalent:V.b({readOnly:!0,dependencies:["isPrimaryAction"],get:Object.assign((function(){if(this.isPrimaryAction)return ml.a.ENTER}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return ml.a.ENTER}})}),downloadIsInProgress:V.b(!1),importIsInProgress:V.b(!1),selectedItemCount:V.b(0),selectionModeIsActive:V.b(),isAllAddedToLibrary:V.b(!1)}),UH=jH.extend({title:V.b({readOnly:!0,dependencies:["isAuthenticated","primaryInteractionMode","selectionModeIsActive","assetCount","selectedItemCount","userIsUnableToImport"],get:Object.assign((function(){if(!this.isAuthenticated||this.userIsUnableToImport)return s.d("DownloadButton.Title");var e=this.primaryInteractionMode===yn.a.TOUCH?"Mobile":"Desktop",t=this.selectionModeIsActive&&this.assetCount!==this.selectedItemCount?"Active":"Inactive";return s.d("AddToLibraryButton."+e+".Selection.Mode."+t+".Title")}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])||i.internalGet(this,t[5+n]))return s.d("DownloadButton.Title");var r=i.internalGet(this,t[1+n])===yn.a.TOUCH?"Mobile":"Desktop",a=i.internalGet(this,t[2+n])&&i.internalGet(this,t[3+n])!==i.internalGet(this,t[4+n])?"Active":"Inactive";return s.d("AddToLibraryButton."+r+".Selection.Mode."+a+".Title")}})}),action:"doAddToLibraryButtonAction",isPrimaryAction:V.b(!0),isHidden:V.b({type:Boolean,readOnly:!0,dependencies:["currentUserIsShareOwner"],get:Object.assign((function(){return!0===this.currentUserIsShareOwner}),{__CW__getter:function(e,t,n,i){return!0===i.internalGet(this,t[0+n])}})}),isAuthenticated:V.b(),assetCount:V.b(),userIsUnableToImport:V.b(!1),currentUserIsShareOwner:V.b(!1),staticMembers:{__QUALIFIED_CLASS_NAME__:"AddToLibraryButton"}}),GH=["ReviewTitleView.NumberOfAvailableItems.0","ReviewTitleView.NumberOfAvailableItems.1","ReviewTitleView.NumberOfAvailableItems.2","ReviewTitleView.NumberOfAvailableItems.More"],HH=["ReviewTitleView.NumberOfSelectedItems.0","ReviewTitleView.NumberOfSelectedItems.1","ReviewTitleView.NumberOfSelectedItems.2","ReviewTitleView.NumberOfSelectedItems.More"],WH=((TH={}).PHOTOS=["ReviewTitleView.NumberOfPhotos.0","ReviewTitleView.NumberOfPhotos.1","ReviewTitleView.NumberOfPhotos.2","ReviewTitleView.NumberOfPhotos.More"],TH.VIDEOS=["ReviewTitleView.NumberOfVideos.0","ReviewTitleView.NumberOfVideos.1","ReviewTitleView.NumberOfVideos.2","ReviewTitleView.NumberOfVideos.More"],TH.ITEMS=["ReviewTitleView.NumberOfItems.0","ReviewTitleView.NumberOfItems.1","ReviewTitleView.NumberOfItems.2","ReviewTitleView.NumberOfItems.More"],TH),$H=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"titleString",attributes:{}}],name:"titleStringContainer",classes:["title-first-line"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displaySubtitleString",attributes:{}}],name:"displaySubtitleStringContainer",classes:["title-second-line"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"expiryDateString",attributes:{}}],name:"expiryDateStringContainer",classes:["title-sub"]}],classes:["title-main",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"subtitleString",truevalue:"has-subtitle",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isLoading",truevalue:"is-loading",attributes:{}}]}]}},className:"cmm-review-title",__QUALIFIED_CLASS_NAME__:"ReviewTitleView"},currentUserIsShareOwner:V.b(),name:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),uploadIsComplete:V.b(),selectedItemCount:V.b(),collectionLength:V.b(),expiryDate:V.b(),selectionHasBeenManipulated:V.b(),isLoading:V.b({type:Boolean,readOnly:!0,dependencies:["uploadIsComplete"],get:Object.assign((function(){return"boolean"!==typeof this.uploadIsComplete}),{__CW__getter:function(e,t,n,i){return"boolean"!==typeof i.internalGet(this,t[0+n])}})}),didResizeHorizontally:B.i(),titleString:V.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","name","currentUserIsShareOwner"],get:Object.assign((function(){if(this.isAttached){var e=this.name,t=this.currentUserIsShareOwner?s.d("ReviewTitleView.OriginatorTitle.You"):s.d("ReviewTitleView.OriginatorTitle.Name",{name:e});return this._fitStringToContainer(t,this.titleStringContainer)}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[3+n])?s.d("ReviewTitleView.OriginatorTitle.You"):s.d("ReviewTitleView.OriginatorTitle.Name",{name:r});return this._fitStringToContainer(a,this.titleStringContainer)}}})}),subtitleString:V.b({type:String,readOnly:!0,dependencies:["isLoading","selectionHasBeenManipulated","_areItemsSelected","_availableSubtitleString","_selectedSubtitleString","uploadIsComplete","titleString","_itemsSubtitleString"],get:Object.assign((function(){if(!this.isLoading){var e=this.selectionHasBeenManipulated,t=this._areItemsSelected,n=this._availableSubtitleString,i=this._selectedSubtitleString,r=this.uploadIsComplete,a=this.titleString,s=this._itemsSubtitleString;if(a)return t&&e?i:r?s:n}}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[2+n]),s=i.internalGet(this,t[3+n]),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[5+n]),c=i.internalGet(this,t[6+n]),u=i.internalGet(this,t[7+n]);if(c)return a&&r?o:l?u:s}}})}),displaySubtitleString:V.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","subtitleString"],get:Object.assign((function(){if(this.isAttached){var e=this.subtitleString,t=e?this._lastSubtitleString=e:this._lastSubtitleString;return this._fitStringToContainer(t,this.displaySubtitleStringContainer)}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[2+n]),a=r?this._lastSubtitleString=r:this._lastSubtitleString;return this._fitStringToContainer(a,this.displaySubtitleStringContainer)}}})}),expiryDateString:V.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","expiryDate"],get:Object.assign((function(){if(this.expiryDate&&this.isAttached){var e=ek(new Date,new Date(this.expiryDate));return this._fitStringToContainer(e,this.expiryDateStringContainer)}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[2+n])&&i.internalGet(this,t[0+n])){var r=ek(new Date,new Date(i.internalGet(this,t[2+n])));return this._fitStringToContainer(r,this.expiryDateStringContainer)}}})}),_areItemsSelected:V.b({type:Boolean,readOnly:!0,dependencies:["selectedItemCount"],get:function(){var e=this.selectedItemCount;return(void 0===e?0:e)>=1}}),_availableSubtitleString:V.b({type:String,readOnly:!0,dependencies:["collectionLength","assetCount"],get:function(){var e=this.collectionLength,t=void 0===e?0:e,n=this.assetCount;if(t)return Md(GH,{count:t,assetCount:Ed(void 0===n?0:n)})}}),_itemsSubtitleString:V.b({type:String,readOnly:!0,dependencies:["collectionLength","photosCount","videosCount"],get:function(){var e=this.collectionLength,t=void 0===e?0:e,n=this.photosCount,i=void 0===n?0:n,r=this.videosCount;return function(e,t,n,i){return Md(i[iC(e,t,n)],{count:e})}(t,i,void 0===r?0:r,WH)}}),_selectedSubtitleString:V.b({type:String,readOnly:!0,dependencies:["selectedItemCount"],get:function(){var e=this.selectedItemCount;return Md(HH,{count:void 0===e?0:e})}}),_fitStringToContainer:function(e,t){if(!e)return"";var n=t.firstChild;t.removeChild(n);var i=this.element.offsetWidth;return t.insertBefore(n,t.firstChild),$V(e,i,yl.c(t).get("font"))}}),zH={rootRecord:V.b(),collectionLength:V.b(Oi.c("collection.length")),currentUserIsShareOwner:V.b(),isAuthenticated:V.b(),selectedItemCount:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),selectionModeIsActive:V.b(),uploadIsComplete:V.b(),selectionHasBeenManipulated:V.b(),rowSpacing:V.b(),downloadIsInProgress:V.b(),importIsInProgress:V.b(),importedAssetDescriptor:V.b(),importedAssetCount:V.b(),importingAssetCount:V.b(),isAllAddedToLibrary:V.b(),userIsUnableToImport:V.b(),availableShareHeaderHeight:V.b(Oi.c("shareHeaderView.equilibriumHeight")),headerWidth:V.b({readOnly:!0,dependencies:["gridViewController.gridHasRendered","gridViewController.gridDidRefresh","view.isAttached"],get:Object.assign((function(){var e=0;if(this.gridViewController.gridHasRendered){var t=this.gridViewController.grid.headerContainerElement;if(t){e=t.getBoundingClientRect().width;var n=this.gridViewController.gridLayoutMetrics;n&&(e-=(n.paddingInlineStart||0)+(n.paddingInlineEnd||0))}}return e}),{__CW__getter:function(e,t,n,i){var r=0;if(i.internalGetPath(this,t[0+n])){var a=this.gridViewController.grid.headerContainerElement;if(a){r=a.getBoundingClientRect().width;var s=this.gridViewController.gridLayoutMetrics;s&&(r-=(s.paddingInlineStart||0)+(s.paddingInlineEnd||0))}}return r}})}),availableHeightForHeaderToDesire:V.b(1/0),shareHeaderView:V.b({strong:!0,defaultValue:k.c(BH.extend({actionButton:V.b({defaultValue:k.c(UH),downstreamBindings:{isAuthenticated:"(owner).isAuthenticated",assetCount:"(owner).assetCount",userIsUnableToImport:"(owner).userIsUnableToImport",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive",isAllAddedToLibrary:"(owner).isAllAddedToLibrary"}}),shareDetailView:V.b({defaultValue:k.c($H),downstreamBindings:{name:"(owner).name",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectedItemCount:"(owner).selectedItemCount",uploadIsComplete:"(owner).uploadIsComplete",collectionLength:"(owner).collectionLength",expiryDate:"(owner).expiryDate",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated"}})})),downstreamBindings:{rootRecord:"(owner).rootRecord",availableViewportHeight:"(owner).availableShareHeaderHeight",viewportWidth:"(owner).headerWidth",collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).shareRecordOwnerDisplayName",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightToDesire:"(owner).availableHeightForHeaderToDesire",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),numSelectableItems:V.b({readOnly:!0,dependencies:["collection","collection.length","importedAssetCount","importingAssetCount"],get:Object.assign((function(){var e=this.collection,t=this.importedAssetCount,n=this.importingAssetCount;if(!e)return 0;var i=t||0,r=n||0;return e.length-i-r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]),s=i.internalGet(this,t[3+n]);if(!r)return 0;var o=a||0,l=s||0;return r.length-o-l}})}),_updateFloatingHeader:B.h("gridViewController.gridScrollTop",(function(e){var t=this.shareHeaderView.shareDetailActionBarView,n=t.element,i=this.gridViewController.grid;if(i){var r=i.element.getBoundingClientRect();n.getBoundingClientRect().top<r.top?t.isFloating||t.setIsFloating(!0,this.headerWidth,this.getHeaderInset(),this.gridViewController.view):t.isFloating&&t.setIsFloating(!1)}})),_observeViewportResize:B.h({inputs:["headerWidth","isAttached","gridViewController.gridDidRefresh"],callback:function(e,t){if(t){var n=this.gridViewController.grid,i=this.shareHeaderView.shareDetailActionBarView;n&&i.isFloating&&e&&i.setIsFloating(!0,e,this.getHeaderInset())}}}),getHeaderInset:function(){return this.shareHeaderView.element.getBoundingClientRect().left-this.gridViewController.view.element.getBoundingClientRect().left}},KH=yn.a.MOUSE,qH=wn.b.extend({mixinDependencies:[fl.a],iconNames:["photos-icon"],message:s.d("ReportSpamAlertView.Title"),_description:s.d("ReportSpamAlertView.Description"),description:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===KH?this._description:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===KH?this._description:void 0}})}),alertStyle:pl.a.ACTION_SHEET,shortGUID:V.b(),buttons:V.b({readOnly:!0,dependencies:["primaryInteractionMode","cancelButtonInfo","confirmButtonInfo"],defaultValue:function(){return Wo.b.create()},get:Object.assign((function(e){var t=[this.confirmButtonInfo,this.cancelButtonInfo];return this.primaryInteractionMode!==KH&&t.reverse(),e.splice.apply(e,[0,e.length].concat(t)),e}),{__CW__getter:function(e,t,n,i){var r=[i.internalGet(this,t[2+n]),i.internalGet(this,t[1+n])];return i.internalGet(this,t[0+n])!==KH&&r.reverse(),e.splice.apply(e,[0,e.length].concat(r)),e}})}),cancelButtonInfo:V.b((function(){var e=this;return{title:s.d("ReportSpamAlertView.Cancel"),wasActivated:function(){return e.onCancel()},isAlternate:!0}})),onCancel:U.a,confirmButtonInfo:V.b((function(){var e=this;return{title:s.d("ReportSpamAlertView.Confirm"),wasActivated:function(){return e._onConfirm()},isPrimary:!0}})),onConfirm:Tl.a,_onConfirm:function(){var e=this._report();return this.onConfirm(e)},_report:function(){return L.n().reportShareAsSpam(this.shortGUID)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReportSpamAlertViewController"}}),QH=n(684),YH=Ho.a.extend({mixinDependencies:[Nu],title:V.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign((function(){return this.isDisabled?s.d("ReportSpamButton.Title.Confirmed"):s.d("ReportSpamButton.Title")}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?s.d("ReportSpamButton.Title.Confirmed"):s.d("ReportSpamButton.Title")}})}),icon:V.b({readOnly:!0,dependencies:["isDisabled"],get:Object.assign((function(){return this.isDisabled?QH:void 0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?QH:void 0}})}),additionalClassNames:["report-spam-button"],shortGUID:V.b(),wasActivated:function(){var e=this;return qH.show({shortGUID:this.bindingFor("shortGUID"),onCancel:function(){return e.onCancel()},onConfirm:function(t){return e._onConfirm(t)}})},onCancel:U.a,onConfirm:Tl.a,_onConfirm:function(e){return this.isDisabled=!0,this.onConfirm(e)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReportSpamButton"}}),ZH=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"mediaCountString",attributes:{}}],classes:["total"]},{type:"VIEWOUTLET",tagname:"view",name:"reportSpamButton"}],classes:["collection-info"]}]}},className:"cmm-share-counts",__QUALIFIED_CLASS_NAME__:"ShareCountsInfoView"},reportSpamButton:V.b({dependencies:["isAuthenticated","currentUserIsShareOwner"],readOnly:!0,strong:!0,get:Object.assign((function(){if(!0===this.isAuthenticated&&!0!==this.currentUserIsShareOwner)return YH.create({shortGUID:this.bindingFor("shortGUID"),onConfirm:function(e){return e.catch((function(){u.b.error("Error reporting this share as spam.")}))}})}),{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n])&&!0!==i.internalGet(this,t[1+n]))return YH.create({shortGUID:this.bindingFor("shortGUID"),onConfirm:function(e){return e.catch((function(){u.b.error("Error reporting this share as spam.")}))}})}})}),isAuthenticated:V.b(),shortGUID:V.b(),currentUserIsShareOwner:V.b(),libraryInfo:V.b(),itemsRemaining:V.b(),mediaCountString:V.b({dependencies:["itemsRemaining","libraryInfo"],readOnly:!0,get:function(){var e=this.libraryInfo,t=this.itemsRemaining;return void 0===e?"":aC(e,void 0===t?0:t)}})}),XH=((MH={})[yn.a.MOUSE]=100,MH[yn.a.TOUCH]=50,MH),JH=In.a.extend({mixinDependencies:[fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",name:"derivativeContainer",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"imageSize",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"imageSize",attributes:{},unit:null,property:"height"}}},className:"cmm-share-back-image",__QUALIFIED_CLASS_NAME__:"ShareBackImageView"},shareBackSuggestionsService:V.b(),imageSize:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){var e=this.primaryInteractionMode;return e?XH[e]:NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?XH[r]:NaN}})}),media:V.b({strong:!0,readOnly:!0,dependencies:["shareBackSuggestionsService","shareBackSuggestionsService.shareBackPlacardMediaPK"],get:Object.assign((function(){var e=this.shareBackSuggestionsService;if(e){var t=e.shareBackPlacardMediaPK;if(t)return fr.a.find(t)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=r.shareBackPlacardMediaPK;if(a)return fr.a.find(a)}}})}),imageDerivativeLoader:V.b({strong:!0,defaultValue:k.c(Xp.a.extend({shouldCorrectForDevicePixelRatio:!0,offscreeniness:0})),downstreamBindings:{width:"(owner).imageSize",height:"(owner).imageSize",media:"(owner).media",derivativeRequestReason:"(owner).derivativeRequestReason"}}),derivativeRequestReason:V.b(),appendDerivativeImageWhenReady:B.h({inputs:["imageDerivativeLoader","imageDerivativeLoader.derivative"],callback:function(){this._cleanUpAppendedDerivativeImage();var e=this.imageSize,t=this.imageDerivativeLoader;if(t){var n=t.derivative;if(n){var i=n.checkOutAppendableImagelike(this).retain(this),r=i.width,a=i.height,s=ef.c(r,a,e,e),o=e/2-s.width/2,l=e/2-s.height/2;i.style.width=s.width+"px",i.style.height=s.height+"px",i.style.left=o+"px",i.style.top=l+"px",this.derivativeContainer.appendChild(i),this._appendedDerivativeImage=i}}}}),_cleanUpAppendedDerivativeImage:function(){var e=this._appendedDerivativeImage;this._appendedDerivativeImage=void 0,e&&(e.parentNode&&e.parentNode.removeChild(e),e.release(this))},cleanup:function(){var e=this,t=arguments;this._cleanUpAppendedDerivativeImage(),e.__s._$1CB$cleanup.apply(e,t)},__superMap:{_$1CB$cleanup:"cleanup"}}),eW=In.a.extend({mixinDependencies:[wi.a,fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["cmm-touch-share-back-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareBackImageView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["cmm-share-back-title"],name:"titleContainer"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"question",attributes:{}}],classes:["cmm-share-back-question"],name:"questionContainer"}],classes:["cmm-share-back-wrapper"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"actionButton"},{type:"VIEWOUTLET",tagname:"view",name:"closeButton"}],classes:["cmm-share-back-wrapper","btn-wrapper"]}],classes:["cmm-share-back-row"]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"cssClass",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHovering",truevalue:"share-back-hover",falsevalue:"share-back-inline",attributes:{}}]},className:"cmm-share-back-toast-footer-content",__QUALIFIED_CLASS_NAME__:"ShareBackToastFooterContentView"},shareBackSuggestionsService:V.b(),isHovering:V.b(),finalWidthForSBToast:V.b(),cssClass:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){var e=this.primaryInteractionMode;return e?"share-back-"+e.toLocaleLowerCase():""}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?"share-back-"+r.toLocaleLowerCase():""}})}),shareBackImageView:V.b({strong:!0,defaultValue:k.c(JH.extend({derivativeRequestReason:Jp.a.CMM_SHAREBACK_TOAST_FOOTER})),downstreamBindings:{shareBackSuggestionsService:"(owner).shareBackSuggestionsService"}}),title:s.d("ShareBackFooter.Content.Title"),question:V.b({readOnly:!0,dependencies:["shareTitle","primaryInteractionMode","isHovering","finalWidthForSBToast","isAttached"],get:Object.assign((function(){var e=this.isAttached,t=this.shareTitle,n=this.isHovering;if(!e)return"";var i=Vn.a(t)||void 0===this.primaryInteractionMode||void 0===this.finalWidthForSBToast||void 0===n?s.d("ShareBackFooter.Content.Default.Question"):s.d("ShareBackFooter.Content.Question",{shareTitle:t});return this._fitStringToContainer(i,this.questionContainer,n)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[4+n]),a=i.internalGet(this,t[0+n]),o=i.internalGet(this,t[2+n]);if(!r)return"";var l=Vn.a(a)||void 0===i.internalGet(this,t[1+n])||void 0===i.internalGet(this,t[3+n])||void 0===o?s.d("ShareBackFooter.Content.Default.Question"):s.d("ShareBackFooter.Content.Question",{shareTitle:a});return this._fitStringToContainer(l,this.questionContainer,o)}})}),actionButton:V.b({readOnly:!0,strong:!0,defaultValue:k.c(Ho.a.extend({mixinDependencies:[fl.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:["cmm-button",{type:"CLASSNAMEOUTLET",bindingtype:"DIRECTBINDING",name:"buttonClass",attributes:{}}]}}},title:s.d("ShareBackFooter.Action.Button.Title"),action:"viewShareBack",isHovering:V.b(),buttonClass:V.b({readOnly:!0,dependencies:["isHovering","primaryInteractionMode"],get:Object.assign((function(){return this.isHovering&&this.primaryInteractionMode===yn.a.MOUSE?"cmm-view-share-back":"secondary-action"}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])===yn.a.MOUSE?"cmm-view-share-back":"secondary-action"}})})})),downstreamBindings:{isHovering:"(owner).isHovering"}}),closeButton:V.b({strong:!0,type:Ho.a,defaultValue:k.c(Ho.a,{title:s.d("ShareBackFooter.Action.Button.Close"),additionalClassNames:["share-back-close","cmm-button"],action:"closeShareBackToast"})}),shareTitle:V.b(Oi.c("shareBackSuggestionsService.shareBackShareTitle")),_fitStringToContainer:function(e,t,n){var i=this._guessNumOfLinesUsedByTitle(),r=n?1===i?2:1:3;return $V(e,t.getBoundingClientRect().width,yl.c(t).get("font"),{numberOfLines:r})},_guessNumOfLinesUsedByTitle:function(){var e=this.titleContainer,t=this.title.toUpperCase(),n=yl.c(e).get("font");return t===$V(t,this.titleContainer.offsetWidth,n,{numberOfLines:1})?1:2}}),tW=((DH={})[yn.a.MOUSE]=140,DH[yn.a.TOUCH]=110,DH),nW=((PH={})[yn.a.MOUSE]=140,PH[yn.a.TOUCH]=70,PH),iW=((LH={})[yn.a.MOUSE]=650,LH[yn.a.TOUCH]=500,LH),rW=In.a.extend({mixinDependencies:[wi.a,fl.a],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"contentView"}]},className:"cmm-share-back-toast-footer",__QUALIFIED_CLASS_NAME__:"ShareBackToastFooterView"},init:function(){var e=this,t=arguments;e.__s._$Hh$init.apply(e,t);var n=this.panGestureRecognizer=hT.a.create({event:"cmmPanGesture",delegate:this});this.addGestureRecognizer(n)},contentView:V.b({strong:!0,defaultValue:k.c(eW),downstreamBindings:{shareBackSuggestionsService:"(owner).shareBackSuggestionsService",isHovering:"(owner).isHovering",finalWidthForSBToast:"(owner).finalWidthForSBToast"}}),shareBackSuggestionsService:V.b(),preferredHoverInset:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE?22:15}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE?22:15}})}),preferredHoverWidth:V.b({readOnly:!0,dependencies:["primaryInteractionMode","parentLayoutWidth","preferredHoverInset"],get:Object.assign((function(){return Math.min(iW[this.primaryInteractionMode],this.parentLayoutWidth-2*this.preferredHoverInset)}),{__CW__getter:function(e,t,n,i){return Math.min(iW[i.internalGet(this,t[0+n])],i.internalGet(this,t[1+n])-2*i.internalGet(this,t[2+n]))}})}),preferredHeight:V.b({readOnly:!0,dependencies:["primaryInteractionMode","isHovering"],defaultValue:tW[yn.a.TOUCH],get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.isHovering;return e&&void 0!==t?t?nW[e]:tW[e]:NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r&&void 0!==a?a?nW[r]:tW[r]:NaN}})}),shouldLayerBack:uO.prototype.shouldLayerBack,parentLayoutWidth:V.b(),parentViewportHeight:V.b(),parentViewportY:V.b(),inlineY:V.b(),inlineWidth:V.b(Oi.c("parentLayoutWidth")),inlineHeight:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,get:Object.assign((function(){return tW[this.primaryInteractionMode]}),{__CW__getter:function(e,t,n,i){return tW[i.internalGet(this,t[0+n])]}})}),hoverIngressEgressVisibilityFactor:gu({duration:350,readOnly:!0,dependencies:["isAttached","isForeverInlineMode","isTempInlineMode","shouldShowShareBackToastIfAvailable"],get:Object.assign((function(){return this.isAttached&&this.shouldShowShareBackToastIfAvailable?1:!this.isAttached||this.isTempInlineMode||this.isForeverInlineMode?0:1}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[3+n])?1:!i.internalGet(this,t[0+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[1+n])?0:1}})}),hasBeenInForcedInlineModeForAtLeastAWhile:V.b(Oi.c("isForeverInlineModeRatchet.value")),isForeverInlineModeRatchet:V.b(k.c(WC.a.extend({defersUpgrades:400,targetValue:Oi.c("owner.isForeverInlineMode")}))),hasBeenInInlineModeForAtLeastAWhile:V.b(Oi.c("isTempInlineModeRatchet.value")),isTempInlineModeRatchet:V.b(k.c(WC.a.extend({defersUpgrades:400,targetValue:Oi.c("owner.isTempInlineMode")}))),hoverY:V.b({readOnly:!0,dependencies:["parentViewportHeight","hoverHeight","preferredHoverInset","hoverIngressEgressVisibilityFactor"],get:Object.assign((function(){return Math.round(this.parentViewportHeight-this.hoverIngressEgressVisibilityFactor*(this.hoverHeight+this.preferredHoverInset))}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])-i.internalGet(this,t[3+n])*(i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])))}})}),hoverWidth:V.b(Oi.c("preferredHoverWidth")),hoverHeight:V.b(Oi.c("preferredHeight")),isHovering:V.b({readOnly:!0,dependencies:["inlineY","inlineHeight","parentViewportY","parentViewportHeight","hasBeenInForcedInlineModeForAtLeastAWhile","hasBeenInInlineModeForAtLeastAWhile"],get:Object.assign((function(){var e=this.inlineY,t=this.inlineHeight,n=this.parentViewportHeight;return!isNaN(e+t+n)&&!0!==this.hasBeenInForcedInlineModeForAtLeastAWhile&&!0!==this.hasBeenInInlineModeForAtLeastAWhile&&e>n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[3+n]);return!isNaN(r+a+s)&&!0!==i.internalGet(this,t[4+n])&&!0!==i.internalGet(this,t[5+n])&&r>s}})}),isForeverInlineMode:V.b(),isTempInlineMode:V.b(),shouldShowShareBackToastIfAvailable:V.b(!1),sendIsHoveringSignal:B.g({inputs:["isHovering"],callback:function(e){this.sendEvent("shareBackToastChangedHoverState",{isHovering:e})}}),hoveringness:gu({duration:350,readOnly:!0,dependencies:["isHovering"],get:Object.assign((function(){return Number(this.isHovering)}),{__CW__getter:function(e,t,n,i){return Number(i.internalGet(this,t[0+n]))}})}),finalY:V.b({readOnly:!0,dependencies:["inlineY","hoverY","hoveringness"],get:Object.assign((function(){var e=this.hoveringness;return e*this.hoverY+(1-e)*this.inlineY}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),finalWidth:V.b({readOnly:!0,dependencies:["inlineWidth","hoverWidth","hoveringness"],get:Object.assign((function(){var e=this.hoveringness;return e*this.hoverWidth+(1-e)*this.inlineWidth}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),finalWidthForSBToast:V.b(Oi.c("finalWidth")),finalHeight:V.b({readOnly:!0,dependencies:["inlineHeight","hoverHeight","hoveringness"],get:Object.assign((function(){var e=this.hoveringness;return e*this.hoverHeight+(1-e)*this.inlineHeight}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);return r*i.internalGet(this,t[1+n])+(1-r)*i.internalGet(this,t[0+n])}})}),hoveringMarginX:0,actuallyDoLayout:B.h({inputs:["hoveringness","finalWidth","finalHeight","primaryInteractionMode","hoverY"],callback:function(e,t,n,i){var r=this.finalY;if(i){var a=5;if(i===yn.a.TOUCH&&(a*=3*e),e>0){if(isNaN(e+r+t+n))return;var s="0px 2px 10px rgba(0, 0, 0, "+.2*e+")";yl.c(this.element).set("border-radius",a).set("position","absolute").set("box-shadow",s).set("left","50%").set("transform","translateX(calc(-50% - "+(this.hoveringMarginX||0)+"px))").set("width",t).set("height",n).set("top",r)}else yl.c(this.element).set("border-radius",a).clear("position").clear("box-shadow").clear("left").clear("transform").clear("width").clear("height").clear("top")}}}),cmmPanGesture:function(e){e&&e.velocity&&e.velocity.y>.1&&this.sendEvent("closeShareBackToast")},_isInteractable:function(){return Boolean(this.isHovering)&&this.primaryInteractionMode===yn.a.TOUCH},gestureRecognizerShouldReceive:function(){return!!this._isInteractable()},gestureRecognizerShouldBeRequiredToFailBy:function(e,t){return!(!e.instanceOf(hT.a)||!t.instanceOf(hT.a))},gestureRecognizerShouldRequireFailureOf:function(e,t){return!!t.instanceOf(Zp.b)},gestureRecognizerShouldBegin:function(){return!0},gestureRecognizerShouldRecognizeSimultaneouslyWith:function(){return!1},__superMap:{_$Hh$init:"init"}}),aW=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"countsInfoView"},{type:"ELEMENT",tagname:"div",classes:["cmm-share-back-view-container"],name:"shareBackViewContainer",styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"shareBackView.inlineHeight",attributes:{},unit:"px",property:"height"}}},{type:"VIEWOUTLET",tagname:"view",name:"legalView"}],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parentLayoutWidth",attributes:{},unit:"px",property:"width"}}},className:"cmm-share-footer-view",__QUALIFIED_CLASS_NAME__:"ShareFooterView"},countsInfoView:V.b({strong:!0,readOnly:!0,get:function(){return ZH.create({isAuthenticated:this.bindingFor("isAuthenticated"),shortGUID:this.bindingFor("shortGUID"),libraryInfo:this.bindingFor("libraryInfo"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner")})}}),shareBackView:V.b({readOnly:!0,strong:!0,dependencies:["isShareBackToastFooterDesired"],get:Object.assign((function(){if(this.isShareBackToastFooterDesired)return this._shareBackView||(this._shareBackView=rW.create({parentLayoutWidth:this.bindingFor("parentLayoutWidth"),parentViewportHeight:this.bindingFor("parentViewportHeight"),parentViewportY:this.bindingFor("parentViewportY"),inlineY:this.bindingFor("shareBackViewInlineY"),shareBackSuggestionsService:this.bindingFor("shareBackSuggestionsService"),isForeverInlineMode:this.bindingFor("isShareBackToastForeverInlineMode"),isTempInlineMode:this.bindingFor("isShareBackToastTempInlineMode"),shouldShowShareBackToastIfAvailable:this.bindingFor("shouldShowShareBackToastIfAvailable")})),this._shareBackView}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._shareBackView||(this._shareBackView=rW.create({parentLayoutWidth:this.bindingFor("parentLayoutWidth"),parentViewportHeight:this.bindingFor("parentViewportHeight"),parentViewportY:this.bindingFor("parentViewportY"),inlineY:this.bindingFor("shareBackViewInlineY"),shareBackSuggestionsService:this.bindingFor("shareBackSuggestionsService"),isForeverInlineMode:this.bindingFor("isShareBackToastForeverInlineMode"),isTempInlineMode:this.bindingFor("isShareBackToastTempInlineMode"),shouldShowShareBackToastIfAvailable:this.bindingFor("shouldShowShareBackToastIfAvailable")})),this._shareBackView}})}),shareBackViewInlineY:V.b({dependencies:["shareBackViewContainer","gridScrollTop","parentViewportY","isAttached"],readOnly:!0,get:Object.assign((function(){return this.isAttached?this.shareBackViewContainer.getBoundingClientRect().top-this.parentViewportY:NaN}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[3+n])?i.internalGet(this,t[0+n]).getBoundingClientRect().top-i.internalGet(this,t[2+n]):NaN}})}),_shareBackHoverObserver:B.h("shareBackView.hoveringness",(function(e){var t=e>0,n=this.shareBackView;if(n){var i=0;if(e>0&&e<1){var r=this.shareBackViewContainer.getBoundingClientRect(),a=r.width,s=r.left;i=(1-e)*((this.hoveringParentView.element.getBoundingClientRect().width-a)/2-s)}n.hoveringMarginX=i,t||n.parent===this?t&&n.parent!==this.hoveringParentView&&(n.element.remove(),this.hoveringParentView.element.appendChild(n.element),n.parent=this.hoveringParentView):(n.element.remove(),this.shareBackViewContainer.appendChild(n.element),n.parent=this)}})),_shareBackView:void 0,hoveringParentView:V.b(),legalView:V.b({readOnly:!0,strong:!0,dependencies:["isAuthenticated"],get:Object.assign((function(){if(!this.isAuthenticated)return this._legalView||(this._legalView=iU.create()),this._legalView}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return this._legalView||(this._legalView=iU.create()),this._legalView}})}),_legalView:void 0,isAuthenticated:V.b(),shortGUID:V.b(),libraryInfo:V.b(),currentUserIsShareOwner:V.b(),gridScrollTop:V.b(),isShareBackToastFooterDesired:V.b(),parentSectionLeftPadding:V.b(),parentLayoutWidth:V.b(),parentViewportY:V.b(),parentViewportHeight:V.b(),shareBackSuggestionsService:V.b(),isShareBackToastForeverInlineMode:V.b(),isShareBackToastTempInlineMode:V.b(),shouldShowShareBackToastIfAvailable:V.b()}),sW={mixinDependencies:[{shareBackSuggestionsService:V.b(),isShareBackToastFooterDesired:V.b({readOnly:!0,dependencies:["shareBackSuggestionsService","shareBackSuggestionsService.shareBackReadyForDisplay"],get:Object.assign((function(){var e=this.shareBackSuggestionsService;return Boolean(e&&e.shareBackReadyForDisplay)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Boolean(r&&r.shareBackReadyForDisplay)}})}),parentViewportHeight:V.b(Oi.c("gridViewController.view.viewportHeight")),parentViewportY:V.b({readOnly:!0,dependencies:["isAttached","gridViewController.view.viewportWidth","gridViewController.view.viewportHeight"],get:Object.assign((function(){return this.isAttached?this.view.element.getBoundingClientRect().top:NaN}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.view.element.getBoundingClientRect().top:NaN}})}),isSharebackToastHoveringState:V.b(!1),isShareBackToastForeverInlineMode:V.b(!1),isShareBackToastTempInlineMode:V.b(!1),shouldShowShareBackToastIfAvailable:V.b(!1),isScrollSpeedBelowThresholdRatchet:V.b({readOnly:!0,strong:!0,type:WC.a,get:function(){return WC.a.create({allowsDowngrades:!0,defersUpgrades:500,targetValue:this.bindingFor("isScrollSpeedBelowThreshold")})}}),isScrollSpeedBelowThreshold:V.b({dependencies:["gridViewController.gridScrollTop","gridViewController.gridDidFinishScroll"],readOnly:!0,get:function(){var e=this.gridViewController.grid;return!e||Math.max(e.motionTracker.speed,e.motionTracker.emaSpeed)<500}}),wasScrolledObserver:B.h({inputs:["isScrollSpeedBelowThresholdRatchet.value","isSharebackToastHoveringState","shouldShowShareBackToastIfAvailable","gridViewController.gridHasRendered"],callback:function(e,t,n,i){i&&(n?this.isShareBackToastTempInlineMode=!1:(e||!0===t)&&this.updateIsTempInlineMode())}}),updateIsTempInlineMode:function(){if(!0!==this.isDisposed){var e=this.view,t=this.getPath("gridViewController.gridMetrics.rowHeight");if(e&&t){var n=0,i=this.getPath("gridViewController.grid.headerElement");i&&(n=i.getBoundingClientRect().height);var r=2.3*t+n,a=this.gridViewController.gridScrollTop;this.isShareBackToastTempInlineMode=Boolean(a+this.parentViewportHeight<r)}}},shareBackToastChangedHoverState:function(e){this.isSharebackToastHoveringState=e.isHovering},closeShareBackToast:function(){this.shouldShowShareBackToastIfAvailable=!1,this.isShareBackToastForeverInlineMode=!0}}],isAuthenticated:V.b(),libraryInfo:V.b(),currentUserIsShareOwner:V.b(),footerWidth:V.b({readOnly:!0,dependencies:["gridViewController.gridHasRendered","gridViewController.gridDidRefresh","view.isAttached"],get:Object.assign((function(){var e=0;if(this.gridViewController.gridHasRendered){var t=this.gridViewController.grid.footerContainerElement;if(t){e=t.offsetWidth;var n=this.gridViewController.gridLayoutMetrics;n&&(e=e-(n.paddingInlineStart||0)-(n.paddingInlineEnd||0))}}return e}),{__CW__getter:function(e,t,n,i){var r=0;if(i.internalGetPath(this,t[0+n])){var a=this.gridViewController.grid.footerContainerElement;if(a){r=a.offsetWidth;var s=this.gridViewController.gridLayoutMetrics;s&&(r=r-(s.paddingInlineStart||0)-(s.paddingInlineEnd||0))}}return r}})}),shareFooterView:V.b({strong:!0,readOnly:!0,get:function(){return aW.create({isAuthenticated:this.bindingFor("isAuthenticated"),shortGUID:this.bindingFor("shortGUID"),libraryInfo:this.bindingFor("libraryInfo"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),gridScrollTop:this.bindingFor("gridViewController.gridScrollTop"),isShareBackToastFooterDesired:this.bindingFor("isShareBackToastFooterDesired"),parentLayoutWidth:this.bindingFor("footerWidth"),parentViewportHeight:this.bindingFor("parentViewportHeight"),parentViewportY:this.bindingFor("parentViewportY"),hoveringParentView:this.bindingFor("gridViewController.view"),shareBackSuggestionsService:this.bindingFor("shareBackSuggestionsService"),isShareBackToastForeverInlineMode:this.bindingFor("isShareBackToastForeverInlineMode"),isShareBackToastTempInlineMode:this.bindingFor("isShareBackToastTempInlineMode"),shouldShowShareBackToastIfAvailable:this.bindingFor("shouldShowShareBackToastIfAvailable")})}})},oW={mixinDependencies:[wi.a],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"importProgressView"}]}}},importProgressView:V.b({defaultValue:k.c(Au.extend({progressDuration:0})),downstreamBindings:{isIndeterminate:"(owner).importProgressIsIndeterminate",possibleProgressLabels:"(owner).possibleImportProgressLabels",progressLabel:"(owner).importProgressLabel",progressValue:"(owner).importProgressValue"},readOnly:!0,strong:!0,type:Au}),shouldShowImportProgressView:V.b({type:Boolean,didChange:function(e){this.importProgressView._moveProgressViewInAndOutAsNecessary(e)}}),_progressViewHeightObserver:B.g({inputs:["isAttached","importProgressView.isVisible","importProgressView.sizeChanged"],callback:function(e,t){e&&t&&this.viewController.measureViewport()}}),importProgressLabel:V.b(""),importProgressIsIndeterminate:V.b(!1),importProgressValue:V.b(0),possibleImportProgressLabels:V.b([])},lW=qA.extend({mixinDependencies:[oW,xn],additionalClassNames:F.b(["cmm-receiver-page"]),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageView"}}),cW={mixinDependencies:[Tn.a],verifyUserCanImport:Mn.a.define(),importDidFail:Mn.a.define()};function uW(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function dW(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){uW(a,i,r,s,o,"next",e)}function o(e){uW(a,i,r,s,o,"throw",e)}s(void 0)}))}}var hW=rC("ImportJob.Adding"),pW=rC("ImportSuccess.Alert.Description."),fW=WS,gW=fW.NOT_STARTED,mW=fW.PREPARING,_W=fW.IN_PROGRESS,vW=fW.COMPLETED,bW={mixinDependencies:[OM,cW],shouldPollEvenWhenNotAttached:!0,shouldShowShareBackToastIfAvailable:V.b(!1),importedAssetDescriptor:V.b(""),importedAssetCount:V.b({defaultValue:0,type:Number,get:Tl.a,set:function(e){var t=Gd.a(this,"container.medias.length")||0;return Math.max(0,Math.min(t,e))}}),importingAssetCount:V.b({dependencies:["_importingAssetCount"],readOnly:!0,type:Number,get:Object.assign((function(){var e=Gd.a(this,"container.medias.length")||0;return Math.max(0,Math.min(e,this._importingAssetCount))}),{__CW__getter:function(e,t,n,i){var r=Gd.a(this,"container.medias.length")||0;return Math.max(0,Math.min(r,i.internalGet(this,t[0+n])))}})}),importIsInProgress:V.b({defaultValue:!1,type:Boolean}),importProgressIsIndeterminate:V.b({defaultValue:!1,type:Boolean}),importProgressLabel:V.b(""),importProgressValue:V.b(0),possibleImportProgressLabels:V.b([]),shouldShowImportProgressView:V.b(!1),_importingAssetDescriptor:V.b("PHOTOS"),_importingAssetCount:V.b(0),_importJobFinishedTimeout:void 0,jobToDisplay:V.b({dependencies:["container.zoneID"],readOnly:!0,strong:!0,type:xF,get:Object.assign((function(){var e=xF.create(),t=this.getPath("container.zoneID");return void 0!==t&&(JS.allModels.filter((function(e){return NU.a.isSameZoneID(e.getDataHash().sourceZoneID,t)})).forEach((function(t){return e.addChildJob(t)})),this._cleanUpImport(e)),e}),{__CW__getter:function(e,t,n,i){var r=xF.create(),a=i.internalGetPath(this,t[0+n]);return void 0!==a&&(JS.allModels.filter((function(e){return NU.a.isSameZoneID(e.getDataHash().sourceZoneID,a)})).forEach((function(e){return r.addChildJob(e)})),this._cleanUpImport(r)),r}})}),_importInfoObserver:B.h({inputs:["jobToDisplay._childJobInfos"],callback:function(){var e=this.determineAssetCounts(),t=e.assetCount,n=e.locKey;this._importingAssetCount=t,this._importingAssetDescriptor=n,this.possibleImportProgressLabels=[s.d("ImportJob.Preparing"),Md(hW.PHOTOS,{count:t}),Md(hW.VIDEOS,{count:t}),Md(hW.ITEMS,{count:t})]}}),_importProgressObserver:B.h({inputs:["jobToDisplay.animatedJobProgress","jobToDisplay.jobStatus","jobToDisplay._childJobInfos"],callback:function(e,t,n){if(0!==n.length){var i=this.jobToDisplay.getFailedJobs();if(i.length>0)this.importDidFail(i);else{if(t===gW||t===mW)this.importProgressIsIndeterminate=!0,this.importProgressLabel=s.d("ImportJob.Preparing");else if(t===_W||t===vW){var r=this._importingAssetCount,a=this._importingAssetDescriptor;this.importProgressLabel=Md(hW[a],{count:r}),this.importProgressIsIndeterminate=!1,this.shouldShowShareBackToastIfAvailable=!0}this.shouldShowImportProgressView=!0,this.importIsInProgress=!0}isNaN(e)||(this.importProgressValue=100*e,1===e&&t===vW&&this.importDidFinish())}else this.shouldShowImportProgressView=!1}}),signInAndImportMedias:function(e){var t=this;return dW(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.signIn();case 2:if(!n.sent.ok){n.next=5;break}return n.abrupt("return",t.importSelectionToLibrary(e));case 5:return n.abrupt("return");case 6:case"end":return n.stop()}}),n)})))()},determineAssetCounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.jobToDisplay._childJobs,t={assetCount:0,photosCount:0,videosCount:0};e.forEach((function(e){var n=e.getDataHash().itemCounts;t.assetCount+=n.assetCount,t.photosCount+=n.photosCount,t.videosCount+=n.videosCount}));var n=t.assetCount,i=t.photosCount,r=t.videosCount,a=iC(n,i,r);return{assetCount:n,locKey:a}},removeItemsSelectedIndicesFromSelection:function(e){var t=this.gridViewController.selectedIndices.clone();e.forEach((function(e){t.remove(e)})),this.gridViewController.selectedIndices=t},importSelectionToLibrary:function(e){var t=this;return dW(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.verifyUserCanImport()){n.next=2;break}return n.abrupt("return");case 2:if(i=t.collection,r=t.container,a=t.rootRecord,s=t.selectionModeIsActive,1!==e.length){n.next=11;break}c=e.firstIndexAfter(-1),u=i.objectAt(c),d=t.importMediasManager.importSingleMedia(r.zoneID,u,c),l=d.hasError,o=d.recordCopierJob,n.next=16;break;case 11:return n.next=13,t.importMediasManager.importMedias(i,r,a,e,s);case 13:h=n.sent,l=h.hasError,o=h.recordCopierJob;case 16:l?t.importDidFail():(t.jobToDisplay.addChildJob(o),t.removeItemsSelectedIndicesFromSelection(e));case 17:case"end":return n.stop()}}),n)})))()},updateImportedCounts:function(e){var t=this.determineAssetCounts(e),n=t.assetCount,i=t.locKey;this.importedAssetCount+=n,""===this.importedAssetDescriptor?this.importedAssetDescriptor=i:this.importedAssetDescriptor!==i&&(this.importedAssetDescriptor="ITEMS")},importDidFail:function(e){var t=this;e.forEach((function(e){return t.jobToDisplay.removeChildJob(e)})),-1!==e.map((function(e){return e.serverErrorCode})).indexOf(globalThis.CloudKit.CKError.QUOTA_EXCEEDED)?(this.showUnableToImportErrorDialog(),this.userIsUnableToImport=!0,1===e.length&&e[0].excludeRecords&&0===e[0].excludeRecords.length&&this.selectionModeIsActive&&this.gridViewController.selectAll()):this.showImportErrorDialog()},importDidFinish:function(){var e=this;this.shouldShowImportProgressView=!1,this.isAttached?this._importJobFinishedTimeout=X.a((function(){e._cleanUpImport()}),850):this._cleanUpImport()},_cleanUpImport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.jobToDisplay,t=e.getCompletedJobs();this.updateImportedCounts(t),!0===this.isAllAddedToLibrary&&(this.gridViewController.deselectAll(),this.selectionModeIsActive=!1);var n=this._importingAssetCount;if(this.isAttached&&n>0){var i=this._importingAssetDescriptor;this.showImportSuccessDialog(n,i)}this._importingAssetCount=0,this._importingAssetDescriptor="PHOTOS",t.forEach((function(t){return e.removeChildJob(t)}))},showImportSuccessDialog:function(e,t){var n,i=this,r=this.primaryInteractionMode===yn.a.TOUCH,a=pW[t];n=r?{message:Md(a,{count:e}),primaryButton:{title:s.d("ImportSuccess.Alert.Button.GoToPhotos"),wasActivated:function(){return i.navigateToAllPhotos()}},alternateButton:{title:s.d("ImportSuccess.Alert.Button.Dismiss"),action:"hide"}}:{iconNames:["photos-icon"],message:s.d("ImportSuccess.Alert.Message.Photos"),description:Md(a,{count:e}),primaryButton:{title:s.d("ImportSuccess.Alert.Button.GoToPhotos"),wasActivated:function(){return i.redirectToPhotos()}},alternateButton:{title:s.d("ImportSuccess.Alert.Button.Dismiss"),action:"hide"}},wn.b.show(n)},navigateToAllPhotos:function(){this.sendEvent("navigateToPhotosPage")},showImportErrorDialog:function(){var e={iconNames:["photos-icon"],message:s.d("Import.Error.Alert.Message"),description:s.d("Import.Error.Alert.Description"),primaryButton:{title:s.d("Import.Error.Alert.Button"),action:"hide"}};wn.b.show(e)},showUnableToImportErrorDialog:function(){var e={iconNames:["photos-icon"],message:s.d("UnableToImport.Error.Alert.Message"),description:s.d("UnableToImport.Error.Alert.Description"),primaryButton:{title:s.d("UnableToImport.Error.Alert.Button"),action:"hide"}};wn.b.show(e)},redirectToPhotos:function(){this.sendEvent("redirectToPhotos2")},verifyUserCanImport:function(){var e=L.n();return e&&!e.isCplZoneWritable?(this.showUnableToImportErrorDialog(),this.userIsUnableToImport=!0,!1):!this.currentUserIsShareOwner}},yW=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"photosOneUpView"}]}},className:"base-photos-oneup-container-view",__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpContainerView"}}),wW=yW.extend({mixinDependencies:[xn],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"},{type:"ELEMENT",tagname:"div",classes:["photos-oneup-with-toolbar-safearea"]}],classes:["photos-oneup-with-toolbar"]}},__QUALIFIED_CLASS_NAME__:"PhotosOneUpWithToolbarView"},toolbarView:V.b({readOnly:!0,strong:!0,dependencies:["hasBottomToolbar"],get:Object.assign((function(){if(this.hasBottomToolbar)return this._bottomToolbarView}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return this._bottomToolbarView}})}),_bottomToolbarView:V.b({readOnly:!0,strong:!0,get:function(){return VM.create({additionalClassNames:this.bindingFor("toolbarAdditionalClassNames"),items:this.bindingFor("toolbarButtons")})}}),hasBottomToolbar:V.b(),toolbarButtons:V.b(),toolbarAdditionalClassNames:V.b(["fixed-bottom"]),_remeasureWhenAppropriate:B.h("hasBottomToolbar","photosOneUpView",(function(e,t){this.element.classList.toggle("has-bottom-toolbar",e),t&&t.measureViewport()}))}),IW={name:"square.and.arrow.down",svgPath:"M 55.8105 -15.8691 C 56.7871 -15.8691 57.6172 -16.1621 58.5938 -17.1387 L 75.0977 -33.1055 C 75.8301 -33.8379 76.2695 -34.6191 76.2695 -35.6445 C 76.2695 -37.6465 74.707 -39.0625 72.7051 -39.0625 C 71.7773 -39.0625 70.752 -38.6719 70.0684 -37.8906 L 62.6465 -30.0293 L 59.375 -26.5625 L 59.668 -33.8867 L 59.668 -85.3516 C 59.668 -87.4023 57.9102 -89.1602 55.8105 -89.1602 C 53.7109 -89.1602 51.9043 -87.4023 51.9043 -85.3516 L 51.9043 -33.8867 L 52.1973 -26.5625 L 48.9258 -30.0293 L 41.5039 -37.8906 C 40.8203 -38.6719 39.7461 -39.0625 38.8184 -39.0625 C 36.7676 -39.0625 35.3027 -37.6465 35.3027 -35.6445 C 35.3027 -34.6191 35.7422 -33.8379 36.4746 -33.1055 L 52.9785 -17.1387 C 53.9551 -16.1621 54.7852 -15.8691 55.8105 -15.8691 Z M 27.7832 16.2598 L 83.7891 16.2598 C 93.9941 16.2598 99.1211 11.1816 99.1211 1.12305 L 99.1211 -47.6074 C 99.1211 -57.666 93.9941 -62.7441 83.7891 -62.7441 L 70.166 -62.7441 L 70.166 -54.8828 L 83.6426 -54.8828 C 88.4766 -54.8828 91.2598 -52.2461 91.2598 -47.168 L 91.2598 0.683594 C 91.2598 5.76172 88.4766 8.39844 83.6426 8.39844 L 27.8809 8.39844 C 22.998 8.39844 20.3125 5.76172 20.3125 0.683594 L 20.3125 -47.168 C 20.3125 -52.2461 22.998 -54.8828 27.8809 -54.8828 L 41.4062 -54.8828 L 41.4062 -62.7441 L 27.7832 -62.7441 C 17.5781 -62.7441 12.4512 -57.666 12.4512 -47.6074 L 12.4512 1.12305 C 12.4512 11.1816 17.5781 16.2598 27.7832 16.2598 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:50.537172851562445,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 86.669921875 107.8603515625",width:86.669921875,height:107.8603515625,translateX:-12.451230468750055,translateY:89.16015625,baseline:89.16015625,capline:18.7001953125}},SW=Ho.a.extend(DM,{additionalClassNames:F.b(["add-to-library-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return IW}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AddToLibraryButton"}}),CW={name:"icloud.and.arrow.down",svgPath:"M 84.7168 -13.5742 L 84.7168 -5.71289 L 107.52 -5.71289 C 122.51 -5.71289 131.494 -14.7461 131.494 -26.5625 C 131.494 -36.4258 125.586 -44.5312 116.064 -48.3887 C 116.162 -70.166 100.488 -85.8887 80.5176 -85.8887 C 67.2852 -85.8887 57.8613 -78.8086 52.002 -70.2637 C 40.918 -73.2422 26.9043 -64.6484 26.6602 -50.9277 C 15.625 -49.2188 8.74023 -40.1855 8.74023 -28.6621 C 8.74023 -15.9668 18.2617 -5.71289 34.2773 -5.71289 L 55.957 -5.71289 L 55.957 -13.5742 L 34.2285 -13.5742 C 22.6562 -13.5742 16.6016 -20.2637 16.6016 -28.6621 C 16.6016 -37.9883 22.5098 -44.9219 32.8613 -44.9219 C 33.5449 -44.9219 33.7891 -45.3125 33.7891 -45.9473 C 33.7891 -60.9375 44.5801 -65.0879 54.6387 -62.1582 C 55.2246 -61.9629 55.5664 -62.0605 55.8594 -62.5977 C 60.5957 -71.0449 67.8711 -78.0273 80.5176 -78.0273 C 96.5332 -78.0273 107.617 -65.332 108.447 -50.7812 C 108.594 -48.584 108.447 -45.9473 108.252 -43.6523 C 108.203 -43.0176 108.447 -42.627 109.033 -42.5293 C 117.92 -40.5762 123.633 -35.0098 123.633 -26.5625 C 123.633 -19.043 118.164 -13.5742 107.471 -13.5742 Z M 70.3613 23.291 C 71.3379 23.291 72.1191 22.9004 73.1445 21.9727 L 89.6484 6.54297 C 90.4297 5.85938 90.8203 5.0293 90.8203 3.95508 C 90.8203 2.00195 89.2578 0.537109 87.2559 0.537109 C 86.3281 0.537109 85.3516 0.976562 84.6191 1.70898 L 77.1973 9.13086 L 73.9258 12.5488 L 74.2188 5.27344 L 74.2188 -36.6211 C 74.2188 -38.6719 72.4609 -40.4297 70.3613 -40.4297 C 68.2617 -40.4297 66.4551 -38.6719 66.4551 -36.6211 L 66.4551 5.27344 L 66.748 12.5977 L 63.4766 9.13086 L 56.0547 1.70898 C 55.3223 0.976562 54.2969 0.537109 53.3691 0.537109 C 51.3184 0.537109 49.8535 2.00195 49.8535 3.95508 C 49.8535 5.0293 50.1953 5.85938 51.0254 6.54297 L 67.5293 21.9727 C 68.5547 22.9004 69.3359 23.291 70.3613 23.291 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:36.20625732421877,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 122.7537841796875 117.0419921875",width:122.7537841796875,height:117.0419921875,translateX:-8.740214843749982,translateY:93.7509765625,baseline:93.7509765625,capline:23.291015625}},EW=Ho.a.extend(DM,{additionalClassNames:F.b(["download-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return CW}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"DownloadButton"}}),AW=n(1318),OW=n(1323),TW=In.a.extend(ku.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"checkmarkView"}],classes:["scou-badge-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"SelectionCheckmarkOneUpBadgeView"},isSelected:V.b(),isHidden:V.b(),checkmarkView:V.b({readOnly:!0,strong:!0,dependencies:["isHidden"],get:Object.assign((function(){if(!this.isHidden)return this._checkmarkButton}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[0+n]))return this._checkmarkButton}})}),media:V.b(),descriptor:V.b({readOnly:!0,dependencies:["media"],get:Object.assign((function(){var e=this.media;if(e)return e.genericType===fr.a.Type.VIDEO?"Video":e.genericType===fr.a.Type.IMAGE?"Photo":"Other"}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return r.genericType===fr.a.Type.VIDEO?"Video":r.genericType===fr.a.Type.IMAGE?"Photo":"Other"}})}),_checkmarkButton:V.b({readOnly:!0,strong:!0,get:function(){return Ho.a.extend(Nu,{isSelected:V.b(),descriptor:V.b(),tooltip:V.b({readOnly:!0,dependencies:["isSelected","descriptor"],get:Object.assign((function(){var e=this.isSelected,t=this.descriptor;return e?s.d("SelectionCheckmark.Deselect."+t):s.d("SelectionCheckmark.Select."+t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r?s.d("SelectionCheckmark.Deselect."+a):s.d("SelectionCheckmark.Select."+a)}})})}).create({additionalClassNames:["expanded-touch-target"],icon:QO,action:"toggleIsSelected"})},downstreamBindings:{isSelected:"(owner).isSelected",descriptor:"(owner).descriptor"}}),_isSelectedObserver:B.h({inputs:["isSelected"],callback:function(e){JO(this._checkmarkButton.svgContainer,e)}})}),MW=fi.a.extend(OA,{mixinDependencies:[fl.a,CA,pM,$h],incomingTransitionClass:AW.a,outgoingTransitionClass:AW.b,viewClass:yW.extend({mixinDependencies:[xn]}),media:V.b({strong:!0}),handheldViewControllerTransition:V.b(),hostedByCloudOSOne:V.b(!1),customPresenterViewModifications:V.b({readOnly:!0,get:function(){return{containerViewController:V.b(this),bottomRightBadgeViewClasses:F.b([TW.extend({isSelected:Oi.c("presenterView.isSelected"),isHidden:Oi.c("presenterView.isSelectionBadgeHidden"),media:Oi.c("presenterView.media")})]),isSelectionBadgeHidden:V.b({readOnly:!0,dependencies:["containerViewController.oneUpSelectionIsAllowed"],get:Object.assign((function(){return!this.getPath("containerViewController.oneUpSelectionIsAllowed")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),isSelected:V.b({readOnly:!0,dependencies:["media","containerViewController","containerViewController.isAttached"],get:Object.assign((function(){return this.containerViewController.getSelectedStateForMedia(this.media)}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n]).getSelectedStateForMedia(i.internalGet(this,t[0+n]))}})}),toggleIsSelected:function(){this.nextResponder.sendEvent("toggleIsSelected",this)}}}}),oneUpViewController:Ci.b({strong:!0,viewOutlet:"photosOneUpView",defaultValue:k.c(OW.a),downstreamBindings:{collection:"(owner).collection",media:"(owner).media",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK",customPresenterViewModifications:"(owner).customPresenterViewModifications",handheldViewControllerTransition:"(owner).handheldViewControllerTransition"}}),containerDidUpdate:function(){},getPrimaryZoomRectableMedia:function(){return this.media},getRectInWindowForPrimaryZoomRectableMedia:function(e){var t=this.oneUpViewController,n=t.getPath("view.desiredMediaView");if(n&&n.media===e){var i=t.view.rect;return{left:i.left+n.imageLeft,top:i.top+n.imageTop,width:n.imageWidth,height:n.imageHeight}}},_remaskThumbstrip:B.g("zoomTransitionValue",(function(e){var t=this.getPath("oneUpViewController.view.thumbnailsStripView");if(t){var n=1-e;n=Math.min(1,2*n-.5),t.style.set("clip-path","inset("+100*n+"% 0px 0px 0px)"),te.a.sharedInstance.isSafari&&t.style.set("-webkit-clip-path","inset("+100*n+"% 0px 0px 0px)")}})),zoomTransitionDidFinish:function(){var e=this,t=arguments,n=this.getPath("oneUpViewController.view.thumbnailsStripView");if(!n)return e.__s._$2V8$zoomTransitionDidFinish.apply(e,t);n.style.clear("clip-path"),te.a.sharedInstance.isSafari&&n.style.clear("-webkit-clip-path"),e.__s._$2V8$zoomTransitionDidFinish.apply(e,t)},selectionDelegate:V.b(),oneUpSelectionIsAllowed:V.b(),getSelectedStateForMedia:function(e){var t=this.selectionDelegate;return!(!t||!e)&&t.selection.contains(e)},setSelectedStateForMedia:function(e,t){var n=this.selectionDelegate,i=this.collection;if(!n||!e)return!1;var r=i.handleFor(e);return!!r&&(t?n.selectItem({handle:r}):n.deselectItem({handle:r}),t)},toggleIsSelected:function(e){e&&e.media&&(this.setSelectedStateForMedia(e.media,!e.isSelected),e.propertyChanged("isSelected"))},measureViewport:function(){this.oneUpViewController.view.measureViewport()},isGridEmpty:V.b({defaultValue:!1,type:Boolean,didChange:function(e){!0===e&&this.sendEvent("popViewController")}}),userDidDoubleTapInOneUp:function(){this.primaryInteractionMode===yn.a.MOUSE&&this.sendEvent("popViewController")},tentativelyPopViewController:function(e){this.outgoingTransitionClass=e,this.sendEvent("popViewController"),this.outgoingTransitionClass=this.constructor.prototype.outgoingTransitionClass},container:V.b(Oi.c("collection.container")),collection:V.b({strong:!0}),__superMap:{_$2V8$zoomTransitionDidFinish:"zoomTransitionDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BasePhotosOneUpContainerViewController"}}),DW={name:"squares.below.rectangle",svgPath:"M 27.5391 -16.4062 L 110.498 -16.4062 C 120.605 -16.4062 125.586 -21.3379 125.586 -31.2988 L 125.586 -64.3066 C 125.586 -74.3164 120.605 -79.1992 110.498 -79.1992 L 27.5391 -79.1992 C 17.4805 -79.1992 12.4512 -74.3164 12.4512 -64.3066 L 12.4512 -31.2988 C 12.4512 -21.3379 17.4805 -16.4062 27.5391 -16.4062 Z M 27.6367 -24.2676 C 22.8516 -24.2676 20.3125 -26.709 20.3125 -31.6895 L 20.3125 -63.916 C 20.3125 -68.8965 22.8516 -71.3867 27.6367 -71.3867 L 110.4 -71.3867 C 115.186 -71.3867 117.725 -68.8965 117.725 -63.916 L 117.725 -31.6895 C 117.725 -26.709 115.186 -24.2676 110.4 -24.2676 Z M 17.334 8.34961 L 27.6367 8.34961 C 29.0527 8.34961 30.1758 7.27539 30.1758 5.85938 L 30.1758 -4.3457 C 30.1758 -5.85938 29.1016 -6.93359 27.6367 -6.93359 L 17.334 -6.93359 C 15.7715 -6.93359 14.7461 -5.85938 14.7461 -4.3457 L 14.7461 5.85938 C 14.7461 7.27539 15.8203 8.34961 17.334 8.34961 Z M 40.625 8.34961 L 50.9277 8.34961 C 52.3438 8.34961 53.4668 7.27539 53.4668 5.85938 L 53.4668 -4.3457 C 53.4668 -5.85938 52.3926 -6.93359 50.9277 -6.93359 L 40.625 -6.93359 C 39.0625 -6.93359 38.0371 -5.85938 38.0371 -4.3457 L 38.0371 5.85938 C 38.0371 7.27539 39.1113 8.34961 40.625 8.34961 Z M 63.916 8.34961 L 74.2188 8.34961 C 75.6348 8.34961 76.7578 7.27539 76.7578 5.85938 L 76.7578 -4.3457 C 76.7578 -5.85938 75.6836 -6.93359 74.2188 -6.93359 L 63.916 -6.93359 C 62.3535 -6.93359 61.3281 -5.85938 61.3281 -4.3457 L 61.3281 5.85938 C 61.3281 7.27539 62.4023 8.34961 63.916 8.34961 Z M 87.207 8.34961 L 97.5098 8.34961 C 98.9258 8.34961 100.049 7.27539 100.049 5.85938 L 100.049 -4.3457 C 100.049 -5.85938 98.9746 -6.93359 97.5098 -6.93359 L 87.207 -6.93359 C 85.6445 -6.93359 84.6191 -5.85938 84.6191 -4.3457 L 84.6191 5.85938 C 84.6191 7.27539 85.6934 8.34961 87.207 8.34961 Z M 110.498 8.34961 L 120.801 8.34961 C 122.217 8.34961 123.34 7.27539 123.34 5.85938 L 123.34 -4.3457 C 123.34 -5.85938 122.266 -6.93359 120.801 -6.93359 L 110.498 -6.93359 C 108.936 -6.93359 107.91 -5.85938 107.91 -4.3457 L 107.91 5.85938 C 107.91 7.27539 108.984 8.34961 110.498 8.34961 Z",layoutBox:{viewBox:"0 0 212.646728515625 159.98291015625",width:212.646728515625,height:159.98291015625,translateX:37.30479248046868,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 113.1348876953125 87.9384765625",width:113.1348876953125,height:87.9384765625,translateX:-12.451127929687573,translateY:79.19921875,baseline:79.19921875,capline:8.7392578125}},PW=Ho.a.extend(DM,{additionalClassNames:F.b(["thumbstrip-button"]),symbolMetadata:V.b({readOnly:!0,get:function(){return DW}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ThumbstripButton"}}),LW=dp.extend({staticMembers:{className:"toolbar-slider",__QUALIFIED_CLASS_NAME__:"ToolbarSliderView"},isDisabled:V.b(!1),tooltip:V.b(""),value:V.b(NaN),minValue:V.b(NaN),maxValue:V.b(NaN),notchValues:V.b(),handlePositionTween:V.b(),step:V.b(NaN),isScrollingEnabled:V.b(!0)}).extend({staticMembers:{className:"toolbar-zoom-slider",__QUALIFIED_CLASS_NAME__:"ToolbarZoomSliderView"},unzoomedZoomLevel:V.b(),_maintainHandleReadout:B.h({inputs:["value","unzoomedZoomLevel","minValue","maxValue"],callback:function(e,t,n){if(e&&t){e!==n&&this._bringUpHandleReadout();var i=this._readoutElement;if(i){var r=Math.round(100*e),a=r?e===t?s.d("Slider.ToolbarSlider.Tooltip.FitsInWindow"):r+"%":"";i.textContent=a,i.classList.toggle("percentage","%"===a.slice(-1))}}}}),_bringUpHandleReadout:function(){var e=this._readoutElement;e||(this._readoutElement=e=document.createElement("div"),e.classList.add("handle-readout"),this.handle.appendChild(e)),yl.c(e).set("opacity",1),this._readoutDeathTimeout&&clearTimeout(this._readoutDeathTimeout),this._readoutDeathTimeout=X.a(this._killHandleReadout.bind(this),1e3)},_killHandleReadout:function(){var e=this._readoutElement;e&&yl.c(e).set("opacity",0)}}),RW={zoomSlider:V.b({readOnly:!0,strong:!0,get:function(){var e=this,t="oneUpViewController.surrogateOneUpNavigee";return LW.create({value:this.bindingFor(t+".zoomLevel"),isDisabled:this.bindingFor(t+".cannotZoom"),unzoomedZoomLevel:this.bindingFor(t+".unzoomedZoomLevel"),minValue:this.bindingFor(t+".minZoomLevel"),maxValue:this.bindingFor(t+".maxZoomLevel"),zoomSteps:this.bindingFor(t+".zoomSteps"),notchValues:this.bindingFor("zoomSliderNotchValues"),handlePositionTween:function(){return e.zoomSliderHandlePositionTween}})}}),zoomSliderHandlePositionTween:function(e){return Math.pow(2,Math.pow(e+.3,2))},zoomSliderNotchValues:V.b({readOnly:!0,dependencies:["oneUpViewController.surrogateOneUpNavigee.zoomSteps","oneUpViewController.surrogateOneUpNavigee.unzoomedZoomLevel"],get:Object.assign((function(){var e=this._notchValuesLastRet;e&&(this._notchValuesLastRet=null,Sh.arrayPool.disposeInstance(e));var t=this.oneUpViewController.surrogateOneUpNavigee,n=t.zoomSteps,i=t.unzoomedZoomLevel;if(!n||!i)return null;for(var r=Sh.arrayPool.getInstance(),a=Math.log(2),s=1,o=n.length-1;s<o;s++){var l=n[s],c=Math.log(l)/a;c!==(0|c)&&l!==i||r.push(l)}return this._notchValuesLastRet=r}),{__CW__getter:function(e,t,n,i){var r=this._notchValuesLastRet;r&&(this._notchValuesLastRet=null,Sh.arrayPool.disposeInstance(r));var a=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);if(!a||!s)return null;for(var o=Sh.arrayPool.getInstance(),l=Math.log(2),c=1,u=a.length-1;c<u;c++){var d=a[c],h=Math.log(d)/l;h!==(0|h)&&d!==s||o.push(d)}return this._notchValuesLastRet=o}})})},xW=MW.extend({mixinDependencies:[fh,RW],navItem:V.b({readOnly:!0,strong:!0,type:Zk,get:function(){return Zk.create({title:this.bindingFor("navbarTitle"),subtitle:this.bindingFor("navbarSubtitle"),leftBarButtonItems:this.bindingFor("leftBarButtonItems"),hidesBackButtonTitle:!0,shouldHideGlobalProgressBar:!0,shouldHideTabBar:!0})}}),leftBarButtonItems:V.b({readOnly:!0,strong:!0,dependencies:["primaryInteractionMode","oneUpViewController.surrogateOneUpNavigee.gated_canZoom"],get:Object.assign((function(){if(this.primaryInteractionMode!==yn.a.TOUCH){var e=[];return this.oneUpViewController.surrogateOneUpNavigee.gated_canZoom&&e.push(this.zoomSlider),e.push(this.thumbstripButton),Wo.b.create(e)}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])!==yn.a.TOUCH){var r=[];return i.internalGetPath(this,t[1+n])&&r.push(this.zoomSlider),r.push(this.thumbstripButton),Wo.b.create(r)}}})}),thumbstripButton:V.b({readOnly:!0,strong:!0,get:function(){return PW.create({tooltip:s.d("OneUp.Navbar.Button.Thumbstrip.Tooltip"),action:"toggleThumbstrip",target:this})}}),toggleThumbstrip:function(){var e=this.oneUpViewController.view.thumbnailsStripView;e&&(e.isFullyRetracted?e.unretract():e.retract())},staticMembers:{__QUALIFIED_CLASS_NAME__:"OneUpPageViewController"}}),NW=In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinnerOrCheckView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"importText",attributes:{}}],classes:["roup-import-view-text"]}],classes:["roup-import-badge-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHidden",truevalue:"cw-hidden",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"importIsInProgress",truevalue:"dim-image-during-import",attributes:{}}]},__QUALIFIED_CLASS_NAME__:"ReceiverOneUpPageImportBadgeView"},importIsInProgress:V.b(),isImported:V.b(),isHidden:V.b({readOnly:!0,dependencies:["importIsInProgress","isImported"],get:Object.assign((function(){return!this.importIsInProgress&&!this.isImported}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),importText:V.b({readOnly:!0,dependencies:["importIsInProgress","isImported"],get:Object.assign((function(){var e=this.importIsInProgress;return this.isImported?s.d("CMMReceiver.OneUp.Added"):e?s.d("CMMReceiver.OneUp.Adding"):void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])?s.d("CMMReceiver.OneUp.Added"):r?s.d("CMMReceiver.OneUp.Adding"):void 0}})}),spinnerOrCheckView:V.b({readOnly:!0,strong:!0,dependencies:["importIsInProgress","isImported"],get:Object.assign((function(){var e=this.importIsInProgress;return this.isImported?this._checkView:e?this._spinnerView:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return i.internalGet(this,t[1+n])?this._checkView:r?this._spinnerView:void 0}})}),_spinnerView:V.b({strong:!0,readOnly:!0,type:Jc.a,get:function(){return Jc.a.create({size:15,color:"#000000",isVisible:this.bindingFor("importIsInProgress")})}}),_checkView:V.b({strong:!0,readOnly:!0,type:In.a,get:function(){return In.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"polyline",namespace:"http://www.w3.org/2000/svg",attributes:{fill:"none",stroke:"#000000","stroke-width":"4",points:"12,25 19,32 35,16 "}}],namespace:"http://www.w3.org/2000/svg",attributes:{version:"1.0",xlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48"}}]},className:"roup-import-checkmark-view"}}).create()}})});function FW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function VW(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function kW(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){VW(a,i,r,s,o,"next",e)}function o(e){VW(a,i,r,s,o,"throw",e)}s(void 0)}))}}var BW=xW.extend({viewClass:wW.extend({toolbarAdditionalClassNames:F.b(["centered-buttons"])}),view:V.b({downstreamBindings:{hasBottomToolbar:"(owner).hasBottomToolbar",toolbarButtons:"(owner).touchToolbarButtons"}}),isAuthenticated:V.b(),currentUserIsShareOwner:V.b(),userIsUnableToImport:V.b(),rootRecord:V.b(),libraryInfo:V.b(),navItem:V.b({downstreamBindings:{rightBarButtonItems:"(owner).rightBarButtonItems"}}),addToLibraryDelegate:V.b(),customPresenterViewModifications:V.b({readOnly:!0,get:function(){var e=this,t=arguments;return{mixinDependencies:[e.__s._$mn$get.apply(e,t)],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"importIsInProgress",truevalue:"dim-image-during-import",attributes:{}}]}}},bottomRightBadgeViewClasses:F.b([NW.extend({importIsInProgress:Oi.c("presenterView.importIsInProgress"),isImported:Oi.c("presenterView.isImported")})]),isSelectionBadgeHidden:V.b({readOnly:!0,dependencies:["containerViewController.oneUpSelectionIsAllowed","importIsInProgress","isImported"],get:Object.assign((function(){return!this.getPath("containerViewController.oneUpSelectionIsAllowed")||this.importIsInProgress||this.isImported}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])}})}),importIsInProgress:V.b({readOnly:!0,dependencies:["media",JS.bindingFor("allModels.contentsDidChangeUntracked")],get:Object.assign((function(){return this.containerViewController.getImportIsInProgressStatusForMedia(this.media)}),{__CW__getter:function(e,t,n,i){return this.containerViewController.getImportIsInProgressStatusForMedia(i.internalGet(this,t[0+n]))}})}),isImported:V.b({readOnly:!0,dependencies:["media",JS.bindingFor("allModels.contentsDidChangeUntracked")],get:Object.assign((function(){return this.containerViewController.getIsImportedStatusForMedia(this.media)}),{__CW__getter:function(e,t,n,i){return this.containerViewController.getIsImportedStatusForMedia(i.internalGet(this,t[0+n]))}})})}},__superMap:{_$mn$get:"get"}}),canImport:V.b({readOnly:!0,dependencies:["isAuthenticated","userIsUnableToImport"],get:Object.assign((function(){return this.isAuthenticated&&!this.userIsUnableToImport}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),isTouchCompact:V.b({readOnly:!0,dependencies:["primaryInteractionMode","sizeClass"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH&&this.sizeClass===dn.a.COMPACT}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.TOUCH&&i.internalGet(this,t[1+n])===dn.a.COMPACT}})}),hasBottomToolbar:V.b({readOnly:!0,dependencies:["isTouchCompact","currentUserIsShareOwner"],get:Object.assign((function(){return!this.currentUserIsShareOwner&&this.isTouchCompact}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n])}})}),rightBarButtonItems:V.b({readOnly:!0,strong:!0,type:Wo.b,dependencies:["primaryInteractionMode","canImport","currentUserIsShareOwner","hasBottomToolbar"],get:Object.assign((function(){var e=this.primaryInteractionMode,t=this.canImport,n=this.currentUserIsShareOwner;if(e===yn.a.TOUCH){if(this.hasBottomToolbar)return;return this._createTouchButtons(t,n,!0)}return this._createMouseButtons(t,n)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);if(r===yn.a.TOUCH){if(i.internalGet(this,t[3+n]))return;return this._createTouchButtons(a,s,!0)}return this._createMouseButtons(a,s)}})}),touchToolbarButtons:V.b({readOnly:!0,strong:!0,dependencies:["canImport","currentUserIsShareOwner"],get:Object.assign((function(){return this._createTouchButtons(this.canImport,this.currentUserIsShareOwner)}),{__CW__getter:function(e,t,n,i){return this._createTouchButtons(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),_createTouchButtons:function(e,t){var n;if(!t)return n=e?Ho.a.create({title:s.d("OneUp.Navbar.Button.Import.Text"),action:"addToLibrary",target:this,isDisabled:this.bindingFor("importIsInProgressOrCompleted")}):Ho.a.create({title:s.d("OneUp.Navbar.Button.Download.Text"),action:"download",target:this}),Wo.b.create([n])},_createMouseButtons:function(e,t){var n=[];return e&&!t&&n.push(SW.create({additionalClassNames:["import-button"],action:"addToLibrary",target:this,tooltip:s.d("OneUp.Navbar.Button.Import.Tooltip"),isDisabled:this.bindingFor("importIsInProgressOrCompleted")})),n.push(EW.create({additionalClassNames:["download-button"],action:"download",target:this,tooltip:s.d("OneUp.Navbar.Button.Download.Tooltip")})),Wo.b.create(n)},download:function(){var e=this.collection,t=this.media,n=e.indexOf(t);if(n<0)OU();else{var i=kp.a.create([n]);this.isAuthenticated||this._didShowSignInDialog?this._initiateDownload(i):(this._didShowSignInDialog=!0,TU(e,i,this._signInAndImport.bind(this),this._initiateDownload.bind(this),!0).catch((function(e){throw e})))}},_initiateDownload:function(e){var t=this;return kW(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.collection,r=t.container,a=t.rootRecord,s=t.primaryInteractionMode,o=t.libraryInfo,l=xU.sharedInstance,c=e.toArray(),n.next=5,l.prepareDownloadURL({collection:i,container:r,selectedIndicesArray:c,primaryInteractionMode:s,rootRecord:a});case 5:if(!(u=n.sent).hasError){n.next=9;break}return OU(),n.abrupt("return");case 9:return n.next=11,l.downloadFromURL({downloadURL:u.downloadURL,downloadCount:c.length,primaryInteractionMode:s,downloadWindow:u.downloadWindow,assetCount:a.assetCount,libraryInfo:o});case 11:case"end":return n.stop()}}),n)})))()},addToLibrary:function(){var e=this.addToLibraryDelegate;if(!this.importIsInProgressOrCompleted&&e.verifyUserCanImport()){var t=this.collection,n=this.media,i=t.indexOf(n),r=kp.a.create();r.add(i),e.importSelectionToLibrary(r)}},importIsInProgressOrCompleted:V.b({readOnly:!0,dependencies:["isImported","importIsInProgress"],get:Object.assign((function(){var e=this.isImported,t=this.importIsInProgress;return e||t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r||a}})}),importIsInProgress:V.b({readOnly:!0,dependencies:["media",JS.bindingFor("allModels.contentsDidChangeUntracked")],type:Boolean,get:Object.assign((function(){return this.getImportIsInProgressStatusForMedia(this.media)}),{__CW__getter:function(e,t,n,i){return this.getImportIsInProgressStatusForMedia(i.internalGet(this,t[0+n]))}})}),getImportIsInProgressStatusForMedia:function(e){if(!pi.a(e,fr.a))return!1;var t=this._findJobForMediaInCPLZone(e);return this._decideIfJobIsSubmittedOrInProgress(t)},isImported:V.b({readOnly:!0,dependencies:["media",JS.bindingFor("allModels"),JS.bindingFor("allModels.contentsDidChange")],type:Boolean,get:Object.assign((function(){var e=this.media;return this.getIsImportedStatusForMedia(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return this.getIsImportedStatusForMedia(r)}})}),getIsImportedStatusForMedia:function(e){if(!pi.a(e,fr.a))return!1;var t=this._findJobForMediaInCPLZone(e);return!(!t||t.status!==ZS.COMPLETED)},_findJobForMediaInCPLZone:function(e){for(var t,n=e.asset,i=n.recordName,r=n.zoneID,a=L.n().cplZoneID,s=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return FW(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FW(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(JS.allModels);!(t=s()).done;){var o=t.value;if(NU.a.isSameZoneID(o.sourceZoneID,r)&&NU.a.isSameZoneID(o.targetZoneID,a)&&o.includesRecordName(i))return o}},_signInAndImport:function(){var e=this;return kW(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signIn();case 2:t.sent&&e.addToLibrary();case 4:case"end":return t.stop()}}),t)})))()},signIn:function(){return!1},_decideIfJobIsSubmittedOrInProgress:function(e){return e&&(e.status===ZS.SUBMITTED||e.status===ZS.INPROGRESS||e.status===ZS.UNKNOWN)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverOneUpPageViewController"}}),jW=n(1307),UW=In.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"addButton"}]}},className:"add-assets-tile-view",__QUALIFIED_CLASS_NAME__:"AddAssetsTileView"},addButton:k.c(In.a.extend(Nu,ku.a,{icon:jW,additionalClassNames:["add-asset-button"],action:"showAddAssetSelectionViewController"}))}),GW={presenter:F.b({viewClassKeysByCellType:F.b({addAssetsTile:"addAssetsTileItemViewClass"}),addAssetsTileItemViewClass:UW}),viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"collectionIsEmptyView"}]}}},layoutMetrics:V.b(),collectionIsEmpty:V.b(),collectionIsEmptyView:V.b({readOnly:!0,dependencies:["collectionIsEmpty"],get:Object.assign((function(){if(!0===this.collectionIsEmpty)return this._addAssetTile}),{__CW__getter:function(e,t,n,i){if(!0===i.internalGet(this,t[0+n]))return this._addAssetTile}})}),_addAssetTile:V.b({defaultValue:k.c(UW),readOnly:!0,strong:!0})}),view:V.b({downstreamBindings:{collectionIsEmpty:"(owner).collectionIsEmpty",layoutMetrics:"(owner).layoutMetrics"}}),collection:$n.a.define(),collectionIsEmpty:V.b({readOnly:!0,type:Boolean,dependencies:["collection","collection.length"],get:Object.assign((function(){return Boolean(this.collection&&0===this.collection.length)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n])&&0===i.internalGetPath(this,t[1+n]))}})}),layoutDelegate:F.b({sizeKeyByCellType:F.b({addAssetsTile:"getAddAssetsTileItemSize"}),fractionalTileSize:H.d(.75),getAddAssetsTileItemSize:function(e,t){var n=e.layoutMetrics,i=n.columnWidth,r=n.isSquareCrop,a=n.rowHeight,s=i;if(!r){var o=this.fractionalTileSize;a*=o,s*=o}return _l.a.create(s,a)},cellClassKeysByCellType:F.b({addAssetsTile:"addAssetsTileCellClass"}),addAssetsTileCellClass:_f.a.extend({handle:"addAssetsTile",isReusable:!1}),completeVisibleCells:function(e,t,n,i){var r=this,a=arguments;r.__s._$la$completeVisibleCells.apply(r,a);var s=this.lastAnchorableItem(e,n);if(s&&s.handle.position===s.handle.maximumPosition){var o=e.viewportWidth,l=e.layoutMetrics,c=l.columnSpacing,u=l.columnWidth,d=l.isSquareCrop,h=l.rowHeight,p=l.rowSpacing,f=l.sectionLeftPadding,g=l.sectionRightPadding,m=1,_=1,v=s.right+c,b=s.top,y=this.cellForHandle(null,"addAssetsTile");if(v>=o-g&&(v=f,b=s.bottom+p),!d){var w=this.fractionalTileSize;v+=u/2-u*w/2,b+=h/2-h*w/2}y.retain(),this.layOutCellInDirection(e,y,_,b,m,v),n.push(y),y.release()}},spaceBelowCell:function(e){var t=this,n=arguments,i=t.__s._$1L1$spaceBelowCell.apply(t,n),r=this.cellForHandle(null,"addAssetsTile"),a=e.layoutMetrics,s=a.columnWidth,o=void 0===s?0:s,l=a.rowHeight,c=void 0===l?0:l,u=a.rowSpacing,d=void 0===u?0:u,h=a.sectionLeftPadding,p=void 0===h?0:h,f=o/2-r.width/2;return r.left===p||r.left===p+f?i+c+d:i},__superMap:{_$la$completeVisibleCells:"completeVisibleCells",_$1L1$spaceBelowCell:"spaceBelowCell"}})},HW={sectionRightPadding:V.b(),sectionLeftPadding:V.b()},WW=BO.extend({mixinDependencies:[qO,fl.a],fadeInDuration:V.b(250),fadeOutDuration:V.b(250),visibleOpacity:V.b(.25),wantsPresenceInHost:V.b({readOnly:!0,dependencies:["host.isSelected","host.isSelectionEnabled","primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===yn.a.TOUCH&&!0===this.host.isSelectionEnabled&&!0===this.host.isSelected}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])===yn.a.TOUCH&&!0===i.internalGetPath(this,t[1+n])&&!0===i.internalGetPath(this,t[0+n])}})}),classNames:["dim-adornment"],staticMembers:{__QUALIFIED_CLASS_NAME__:"DimAdornment"}}),$W=WW.extend({visibleOpacity:V.b(.65),wantsPresenceInHost:V.b({readOnly:!0,dependencies:["host.isImported"],get:Object.assign((function(){return this.host.isImported}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ImportedAdornment"}}),zW=Ik.extend({mixinDependencies:[fl.a],mediaCaptionAdornment:NO.adornmentProperty(bk),panoramaAdornment:NO.adornmentProperty($T.extend({classNames:F.b(["position-top-left"])})),dimAdornment:NO.adornmentProperty({appliesImmediately:!0,adornmentClass:WW}),importedAdornment:NO.adornmentProperty({appliesImmediately:!0,adornmentClass:$W}),selectionAdornment:NO.adornmentProperty({appliesImmediately:!0,adornmentClass:rT.extend({media:V.b(),descriptor:V.b({readOnly:!0,dependencies:["media"],get:Object.assign((function(){var e=this.media;if(e)return e.genericType===fr.a.Type.VIDEO?"Video":e.genericType===fr.a.Type.IMAGE?"Photo":"Other"}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return r.genericType===fr.a.Type.VIDEO?"Video":r.genericType===fr.a.Type.IMAGE?"Photo":"Other"}})}),tooltip:V.b({readOnly:!0,dependencies:["isSelected","descriptor"],get:Object.assign((function(){var e=this.isSelected,t=this.descriptor;return e?s.d("SelectionCheckmark.Deselect."+t):s.d("SelectionCheckmark.Select."+t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return r?s.d("SelectionCheckmark.Deselect."+a):s.d("SelectionCheckmark.Select."+a)}})}),selectAdornment:function(e){e.state===L_.b.Ended&&this.sendEvent("userSelectionRequest",{view:this,operation:Qm.SET})}}),downstreamBindings:{isInteractionDisabled:"(owner).isSelectionAdornmentInteractionDisabled",isSelectionEnabled:"(owner).isSelectionEnabled",isSelected:"(owner).isSelected",media:"(owner).media"}}),videoAdornment:NO.adornmentProperty({adornmentClass:zT,downstreamBindings:{shouldRenderAsBadge:"(owner).shouldRenderVideoAdornmentAsBadge"}}),isImported:V.b({readOnly:!0,dependencies:["media",JS.bindingFor("allModels"),JS.bindingFor("allModels.contentsDidChange")],type:Boolean,get:Object.assign((function(){var e=this.media;return UU.sharedInstance.isMediaImported(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return UU.sharedInstance.isMediaImported(r)}})}),itemIsNotReady:V.b({readOnly:!0,dependencies:["derivative","media.cannotHaveImageDerivative"],get:Object.assign((function(){return!(this.derivative||this.getPath("media.cannotHaveImageDerivative"))}),{__CW__getter:function(e,t,n,i){return!(i.internalGet(this,t[0+n])||i.internalGetPath(this,t[1+n]))}})}),isSelectionAdornmentInteractionDisabled:V.b({readOnly:!0,dependencies:["currentUserIsShareOwner","itemIsNotReady","isImported"],get:Object.assign((function(){return this.itemIsNotReady||this.isImported||this.currentUserIsShareOwner}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])||i.internalGet(this,t[0+n])}})}),isInteractionDisabled:V.b({readOnly:!0,dependencies:["currentUserIsShareOwner","itemIsNotReady","primaryInteractionMode","isImported"],get:Object.assign((function(){var e=this.currentUserIsShareOwner,t=this.itemIsNotReady,n=this.primaryInteractionMode,i=this.isImported;return t||e||n!==yn.a.TOUCH||i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]);return a||r||s!==yn.a.TOUCH||o}})}),shouldRenderVideoAdornmentAsBadge:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Boolean,get:Object.assign((function(){return this.primaryInteractionMode===yn.a.MOUSE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===yn.a.MOUSE}})}),currentUserIsShareOwner:V.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMPhotosGridItemView"}}),KW=dn.a,qW=KW.COMPACT,QW=KW.REGULAR,YW=ik.a.LANDSCAPE,ZW=yn.a.MOUSE,XW=Ec.cmmUISizeClassCompactLandscapeInset,JW=Ec.cmmUISizeClassRegularPortraitInset,e$=Ec.cmmUISizeClassRegularLandscapeInset,t$=Ec.cmmUIPhotosColumnCountIPad129Like,n$=Ec.cmmUIPhotosMaxWidthDesktop,i$=$l,r$=i$.uiSizeIPad129LandscapeWidth,a$=i$.uiSizeIPhoneSELandscapeWidth,s$=i$.uiSizeIPhone4LandscapeWidth,o$=i$.uiPhotosColumnCountCompact,l$=i$.uiPhotosColumnCountDesktop,c$=i$.uiPhotosColumnCountIPhone4Like,u$=i$.uiPhotosColumnCountIPhone3GSLike,d$=i$.uiPhotosDefaultItemSideSize,h$=i$.uiPhotosGridGutterDesktop,p$=i$.uiPhotosItemMinSpacing,f$={columnCount:V.b({dependencies:["apparentLayoutWidth","preferredMouseColumnCount","primaryInteractionMode","sizeClass","viewportWidth"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.apparentLayoutWidth,t=this.preferredMouseColumnCount,n=this.primaryInteractionMode,i=this.sizeClass,r=this.viewportWidth;return n===ZW?void 0!==t?t:l$:i===qW?r<s$?u$:r<a$?c$:o$:r>r$?t$:Math.floor((e+p$)/(d$+p$))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[3+n]),l=i.internalGet(this,t[4+n]);return s===ZW?void 0!==a?a:l$:o===qW?l<s$?u$:l<a$?c$:o$:l>r$?t$:Math.floor((r+p$)/(d$+p$))}})}),photosGridMaxWidth:V.b({dependencies:["primaryInteractionMode"],readOnly:!0,type:Number,get:Object.assign((function(){return this.primaryInteractionMode===ZW?n$:r$}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===ZW?n$:r$}})}),photosGridGutter:V.b({dependencies:["orientationType","primaryInteractionMode","sizeClass"],readOnly:!0,type:Number,get:Object.assign((function(){var e=this.orientationType,t=this.primaryInteractionMode,n=this.sizeClass,i=0;return t===ZW?i=h$:n===qW&&e===YW?i=XW:n===QW&&(i=e===YW?e$:JW),Math.max(i,0)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]),o=0;return a===ZW?o=h$:s===qW&&r===YW?o=XW:s===QW&&(o=r===YW?e$:JW),Math.max(o,0)}})}),initialPosition:V.b(Um.c.Top),bottomPadding:V.b(0),sectionBottomPadding:V.b(32),sectionLeftPadding:V.b(16),sectionRightPadding:V.b(16)},g$=Gk.extend(CA,HW).extend({sectionRightPadding:V.b(Oi.c("gridViewController.layoutMetrics.sectionRightPadding")),sectionLeftPadding:V.b(Oi.c("gridViewController.layoutMetrics.sectionLeftPadding")),gridViewController:F.b({layoutMetrics:F.b(f$,{initialPosition:V.b(Um.c.Bottom)}),selectionController:k.c(cA.extend({container:V.b(),sparseSelection:V.b()}),{shouldStoreRemovedSelection:!0}),isSelectAllEnabled:!1,isMouseSelectionAdditive:!0,isRangeSelectionEnabled:!1,isWhitespaceDeselectionEnabled:!1,itemViewClass:zW,userSelectionRequest:function(e){if(void 0!==e){var t=e.view;if(!0!==t.isSelectionAdornmentInteractionDisabled)return t.instanceOf(rT)&&(e.view=t.host),this.sendEvent("selectionWasManipulated"),this.__s._$qW$userSelectionRequest.call(this,e)}},presenter:F.b({viewForViewClass:function(e){var t=this,n=arguments,i=t.__s._$sg$viewForViewClass.apply(t,n);if(e===this.itemViewClass){var r=this.owner;i.bind("isSelectionEnabled",r.bindingFor("isSelectionEnabled"))}return i},__superMap:{_$sg$viewForViewClass:"viewForViewClass"}}),__superMap:{_$qW$userSelectionRequest:"userSelectionRequest"}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetSelectionViewController"}}),m$=FM.extend({dismiss:function(){var e=this,t=arguments,n=this.presentingViewController,i=this.topViewController;if(!pi.a(i,g$))return e.__s._$Dz$dismiss.apply(e,t);var r=i.gridViewController.getSelectedMediaPKs();r&&n.addMedias(r);var a=n.gridViewController;return a.selection=i.gridViewController.selection,n.navItem.hidesBackButton=!1,this.topNavItem.rightBarButtonItem.isDisabled=!0,a.scrollBy(0,-a.viewportHeight),a.update(),e.__s._$Dz$dismiss.apply(e,t)},selectionWasManipulated:function(){var e=this.presentingViewController,t=e&&e.gridViewController;t&&(t.selectionModeIsActive=!0)},transitionDidFinish:function(e){var t=this.topViewController;pi.a(t,g$)&&t.gridViewController.measureViewport()},_adjustPositionOfToolbarItemsBasedOnChild:B.h({inputs:["topViewController.sectionRightPadding","topViewController.sectionLeftPadding"],callback:function(){var e=this.topViewController;if(e&&e.primaryInteractionMode!==yn.a.TOUCH){var t=this.view.navigationBar.element,n=this.getPath("topViewController.sectionRightPadding"),i=this.getPath("topViewController.sectionLeftPadding");void 0!==n&&void 0!==i&&yl.c(t,{padding:"0px "+n+"px 0px "+i+"px"})}}}),__superMap:{_$Dz$dismiss:"dismiss"},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetSelectionNavigationContextViewController"}}),_$=Bk.extend({isAuthenticated:V.b(),shortGUID:V.b(),libraryInfo:V.b(),currentUserIsShareOwner:V.b(),itemsRemaining:V.b(),isAllAddedToLibrary:V.b(),shareBackSuggestionsService:V.b(),userIsUnableToImport:V.b(),userHasManipulatedSelection:V.b(!1),isMouseSelectionAdditive:!0,userSelectionRequest:function(e){if(void 0!==e){var t=e.view;if(!0!==t.isInteractionDisabled)return t.instanceOf(rT)&&(e.view=t.host),this.userHasManipulatedSelection=!0,this.__s._$Y9$userSelectionRequest.call(this,e)}},selectItem:function(e){this.userHasManipulatedSelection=!0,this.__s._$a4$selectItem.call(this,e)},deselectItem:function(e){this.userHasManipulatedSelection=!0,this.__s._$bz$deselectItem.call(this,e)},userDidPressReturnWithSelection:function(e){this.sendEvent("userDidIndicateDesireToNavigateToMedia",e)},keyDown:function(e){var t=this.__s._$pF$keyDown.call(this,e);return t&&(this.userHasManipulatedSelection=!0),t},clearSelection:function(){this.__s._$vm$clearSelection.call(this),this.isWhitespaceDeselectionEnabled&&(this.userHasManipulatedSelection=!0)},handleKeyboardSelectAll:function(){var e=this,t=arguments;this.isAllAddedToLibrary||e.__s._$11_$handleKeyboardSelectAll.apply(e,t)},itemViewClass:zW,layoutMetrics:F.b(f$),presenter:F.b({views:V.b({strong:!0}),dispose:function(){for(var e=this,t=arguments,n=this.views,i=0,r=n.length;i<r;i++){var a=n.objectAt(i);this._unbindPropertiesForView(a)}return e.__s._$1Mw$dispose.apply(e,t)},viewForViewClass:function(e){var t=this,n=arguments,i=t.__s._$1VL$viewForViewClass.apply(t,n);return this._bindPropertiesForView(i),i},itemViewBindingsByClassKey:{itemViewClass:{currentUserIsShareOwner:"owner.currentUserIsShareOwner",isSelectionEnabled:"owner.isSelectionEnabled"}},_getBindingPathsForView:function(e){for(var t=this.itemViewBindingsByClassKey,n=Object.keys(t),i=0,r=n.length;i<r;i++){var a=n[i],s=this[a];if(s instanceof Object&&e instanceof s.Constructor)return t[a]}},_bindPropertiesForView:function(e){var t=this._getBindingPathsForView(e);t instanceof Object&&EF(this,e,t)},_unbindPropertiesForView:function(e){var t=this._getBindingPathsForView(e);t instanceof Object&&AF(e,Object.keys(t))},__superMap:{_$1Mw$dispose:"dispose",_$1VL$viewForViewClass:"viewForViewClass"}}),__superMap:{_$Y9$userSelectionRequest:"userSelectionRequest",_$a4$selectItem:"selectItem",_$bz$deselectItem:"deselectItem",_$pF$keyDown:"keyDown",_$vm$clearSelection:"clearSelection",_$11_$handleKeyboardSelectAll:"handleKeyboardSelectAll"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMPhotosGridViewController"}}),v$=In.a.extend(qM.a,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"sharePlacardView"},{type:"VIEWOUTLET",tagname:"view",name:"modeSelectionToolbarView"},{type:"VIEWOUTLET",tagname:"view",name:"shareDetailActionBarView"}],classes:["share-header-view"]},__QUALIFIED_CLASS_NAME__:"ShareHeaderView"},equilibriumHeight:V.b({readOnly:!0,dependencies:["sharePlacardView.equilibriumHeight","detailActionBarHeight","measuredModeSelectionToolbarHeight","extraBottomSpacing"],get:Object.assign((function(){return this.getPath("sharePlacardView.equilibriumHeight")+this.detailActionBarHeight+this.measuredModeSelectionToolbarHeight+this.extraBottomSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGet(this,t[1+n])+i.internalGet(this,t[2+n])+i.internalGet(this,t[3+n])}})}),extraBottomSpacing:V.b({type:Number,readOnly:!0,dependencies:["rowSpacing","modeSelectionToolbarView"],get:Object.assign((function(){return this.modeSelectionToolbarView?0:this.rowSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?0:i.internalGet(this,t[0+n])}})}),availableViewportHeight:V.b(),viewportHeight:V.b({readOnly:!0,dependencies:["availableViewportHeight","detailActionBarHeight"],get:Object.assign((function(){return Math.max(this.availableViewportHeight,this.detailActionBarHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),sharePlacardView:V.b({strong:!0,defaultValue:k.c(Xj),downstreamBindings:{rootRecord:"(owner).rootRecord",viewportWidth:"(owner).viewportWidth",availableHeightToDesire:"(owner).availableHeightForPlacardToDesire",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount"}}),actionButton:V.b({type:In.a}),shareDetailView:V.b({type:In.a}),shareDetailActionBarView:V.b({strong:!0,readOnly:!0,get:function(){var e=this.actionButton,t=this.shareDetailView;return NH.create({actionButton:e,shareDetailView:t})}}),expiryDate:V.b({dependencies:["rootRecord.expiryDate"],readOnly:!0,get:Object.assign((function(){return this.getPath("rootRecord.expiryDate")||0}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||0}})}),modeSelectionToolbarView:V.b({strong:!0,readOnly:!0,downstreamBindings:{collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",importIsInProgress:"(owner).importIsInProgress",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive"},defaultValue:k.c(kH)}),measuredModeSelectionToolbarHeight:V.b({readOnly:!0,dependencies:["modeSelectionToolbarView.isAttached"],get:Object.assign((function(){if(!this.getPath("modeSelectionToolbarView.isAttached"))return 0;var e=this._mmstHeight;if(e)return e;var t=this.modeSelectionToolbarView.element,n=t.style,i=n.width;return n.width="10000px",e=t.offsetHeight,n.width=i,this._mmstHeight=e}),{__CW__getter:function(e,t,n,i){if(!i.internalGetPath(this,t[0+n]))return 0;var r=this._mmstHeight;if(r)return r;var a=this.modeSelectionToolbarView.element,s=a.style,o=s.width;return s.width="10000px",r=a.offsetHeight,s.width=o,this._mmstHeight=r}})}),detailActionBarHeight:V.b(Oi.c("shareDetailActionBarView.viewportHeight")),modeSelectionToolbarHeight:V.b({readOnly:!0,dependencies:["viewportHeight","sharePlacardHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign((function(){return Math.max(0,this.viewportHeight-this.sharePlacardHeight-this.detailActionBarHeight-this.extraBottomSpacing)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),sharePlacardHeight:V.b({readOnly:!0,dependencies:["viewportHeight","measuredModeSelectionToolbarHeight","detailActionBarHeight","extraBottomSpacing"],get:Object.assign((function(){return Math.max(0,this.viewportHeight-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight-this.extraBottomSpacing)}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])-i.internalGet(this,t[3+n]))}})}),availableHeightForPlacardToDesire:V.b({readOnly:!0,dependencies:["availableHeightToDesire","measuredModeSelectionToolbarHeight","detailActionBarHeight"],get:Object.assign((function(){return this.availableHeightToDesire-this.measuredModeSelectionToolbarHeight-this.detailActionBarHeight}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n])-i.internalGet(this,t[2+n])}})}),_maintainWidth:B.h({inputs:["viewportWidth","actionButton.titleDidRender"],callback:function(){this.style.set("width",this.viewportWidth),this.shareDetailView.didResizeHorizontally()}}),_maintainLayout:B.h({inputs:["viewportHeight","sharePlacardView","shareDetailActionBarView","modeSelectionToolbarView","sharePlacardHeight","detailActionBarHeight","modeSelectionToolbarHeight","measuredModeSelectionToolbarHeight"],callback:function(e,t,n,i,r,a,s,o){if(e&&t&&n&&!isNaN(r)&&a){var l=t.equilibriumHeight;t.viewportHeight=l,t.style.translateDevicePixels(0,r-l),n.style.translateDevicePixels(0,r),i&&i.style.translateDevicePixels(0,r+a+s-o)}}}),rootRecord:V.b(),collectionLength:V.b(),numSelectableItems:V.b(),currentUserIsShareOwner:V.b(),name:V.b(),isAuthenticated:V.b(),selectedItemCount:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),selectionModeIsActive:V.b(),uploadIsComplete:V.b(),availableHeightToDesire:V.b(),selectionHasBeenManipulated:V.b(),rowSpacing:V.b(),downloadIsInProgress:V.b(),importIsInProgress:V.b(),importedAssetDescriptor:V.b(),importedAssetCount:V.b(),isAllAddedToLibrary:V.b(),userIsUnableToImport:V.b()});function b$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y$={viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"shareHeaderView"}]}}},shareHeaderView:V.b({strong:!0,defaultValue:k.c(v$.extend({actionButton:V.b({defaultValue:k.c(UH),downstreamBindings:{isAuthenticated:"(owner).isAuthenticated",assetCount:"(owner).assetCount",userIsUnableToImport:"(owner).userIsUnableToImport",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive",isAllAddedToLibrary:"(owner).isAllAddedToLibrary"}}),shareDetailView:V.b({defaultValue:k.c($H),downstreamBindings:{name:"(owner).name",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectedItemCount:"(owner).selectedItemCount",uploadIsComplete:"(owner).uploadIsComplete",collectionLength:"(owner).collectionLength",expiryDate:"(owner).expiryDate",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated"}})})),downstreamBindings:{rootRecord:"(owner).rootRecord",availableViewportHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collectionLength",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightToDesire:"(owner).availableHeightForHeaderToDesire",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),rootRecord:V.b(),availableShareHeaderHeight:V.b(),collectionLength:V.b(),numSelectableItems:V.b(),currentUserIsShareOwner:V.b(),name:V.b(),isAuthenticated:V.b(),selectedItemCount:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),selectionModeIsActive:V.b(),uploadIsComplete:V.b(),availableHeightForHeaderToDesire:V.b(),selectionHasBeenManipulated:V.b(),rowSpacing:V.b(),downloadIsInProgress:V.b(),importIsInProgress:V.b(),importedAssetDescriptor:V.b(),importedAssetCount:V.b(),isAllAddedToLibrary:V.b(),userIsUnableToImport:V.b()}),view:V.b({strong:!0,downstreamBindings:{rootRecord:"(owner).rootRecord",availableShareHeaderHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collection.length",numSelectableItems:"(owner).numSelectableItems",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightForHeaderToDesire:"(owner).availableHeightForHeaderToDesire",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).layoutMetrics.rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}}),numSelectableItems:V.b({readOnly:!0,dependencies:["collection","collection.length","importedAssetCount"],get:Object.assign((function(){var e=this.collection,t=this.importedAssetCount;if(!e)return 0;var n=t||0;return e.length-n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[2+n]);if(!r)return 0;var s=a||0;return r.length-s}})}),availableShareHeaderHeight:V.b({readOnly:!0,dependencies:["emptyAvailableSpaceAtTop","view.shareHeaderView.equilibriumHeight"],get:Object.assign((function(){var e=this.emptyAvailableSpaceAtTop,t=isNaN(e)?this.getPath("view.shareHeaderView.equilibriumHeight"):e;return Math.max(0,t)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=isNaN(r)?i.internalGetPath(this,t[1+n]):r;return Math.max(0,a)}})}),availableHeightForHeaderToDesire:V.b({readOnly:!0,dependencies:["layoutMetrics.rowHeight","layoutMetrics.rowSpacing","viewportHeight"],get:Object.assign((function(){return 0+this.viewportHeight-this.getPath("layoutMetrics.rowHeight")/2-this.getPath("layoutMetrics.rowSpacing")}),{__CW__getter:function(e,t,n,i){return 0+i.internalGet(this,t[2+n])-i.internalGetPath(this,t[0+n])/2-i.internalGetPath(this,t[1+n])}})}),layoutMetricsTopPadding:V.b({readOnly:!0,dependencies:["view.shareHeaderView.equilibriumHeight"],get:Object.assign((function(){return Math.max(0,this.getPath("view.shareHeaderView.equilibriumHeight"))}),{__CW__getter:function(e,t,n,i){return Math.max(0,i.internalGetPath(this,t[0+n]))}})}),layoutMetrics:V.b({defaultValue:F.b({headerHeight:0}),downstreamBindings:{topPadding:"(owner).layoutMetricsTopPadding"}}),emptyAvailableSpaceAtTop:V.b(),presenter:F.b({cellsDidMove:function(e){var t=this,n=arguments;t.__s._$3qb$cellsDidMove.apply(t,n),this.owner._updateEmptyAvailableSpaceAtTop(e)},__superMap:{_$3qb$cellsDidMove:"cellsDidMove"}}),_updateEmptyAvailableSpaceAtTop:function(e){var t=this.collection.objectAt(0),n=1/0,i=!1;t||0===e.length||(i=!0);for(var r,a=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return b$(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b$(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(r=a()).done;){var s=r.value;if("item"===s.cellType){s.y<n&&(n=s.y);try{s.value===t&&(i=!0)}catch(A){var o=s?s.handle:"{nonexistent cell}",l=o&&"{nonexistent cell}"!==o?"string"===typeof o.encodedValue?o.encodedValue.replace(/[\w\d]/g,"X"):o.encodedValue:"{nonexistent cell.handle}",c=o&&"{nonexistent cell}"!==o?o.isValid:"{nonexistent cell.handle}",u=o&&"{nonexistent cell}"!==o?o.wasRemoved:"{nonexistent cell.handle}",d=o&&"{nonexistent cell}"!==o?o.isDisposed:"{nonexistent cell.handle}",h=o&&"{nonexistent cell}"!==o?o.isPooled:"{nonexistent cell.handle}",p=o&&"{nonexistent cell}"!==o?o._retainCount:"{nonexistent cell.handle}",f=s?s._owner:"{nonexistent cell}",g=f&&"{nonexistent cell}"!==f?f.owner:"{nonexistent cell._owner}",m=g&&"{nonexistent cell._owner}"!==g?g===this:"{nonexistent cell._owner.owner}",v=s?s._retainCount:"{nonexistent cell}",b=s?s.isDisposed:"{nonexistent cell}",y=s?s.isPooled:"{nonexistent cell}",w=this.view,I=w?w.isDisposed:"{nonexistent this.view}",S=w?!1===I?w.isAttached:"{disposed this.view}":"{nonexistent this.view}",C=this.isAttached,E=this.isDisposed;this.reportFeedback("invalidStoreID",{cellHandleEncodedValuePeek:l,cellHandleStringified:String(o),cellHandleIsValid:c,cellHandleWasRemoved:u,cellHandleIsDisposed:d,cellHandleIsPooled:h,cellHandleRetainCount:p,cellOwnerStringified:String(f),cellOwnerOwnerStringified:String(g),cellOwnerOwnerIsThisGridVC:m,cellRetainCount:v,cellIsDisposed:b,cellIsPooled:y,ourViewIsDisposed:I,ourViewIsAttached:S,thisVCIsAttached:C,thisVCIsDisposed:E}),_.b("Could not look up `cell.value`. Likely an invalid store ID was provided. Error: "+A)}}}this.emptyAvailableSpaceAtTop=i?Math.round(Math.max(0,n)):e.length?0:void 0},reportFeedback:function(e,t){var n=L.n().feedbackService;n&&n.report&&n.report(e,t)},viewportWidth:$n.a.define(),_maintainHeaderLayout:B.h({inputs:["viewportWidth","layoutMetrics.sectionLeftPadding","layoutMetrics.sectionRightPadding"],callback:function(e,t,n){this.view&&this.view.shareHeaderView&&(this.view.shareHeaderView.style.set("left",Math.round(t)),this.view.shareHeaderView.viewportWidth=Math.max(0,Math.ceil(0+e-t-n)))}}),rootRecord:V.b(),currentUserIsShareOwner:V.b(),name:V.b(),isAuthenticated:V.b(),selectedItemCount:V.b(),assetCount:V.b(),photosCount:V.b(),videosCount:V.b(),selectionModeIsActive:V.b(),uploadIsComplete:V.b(),selectionHasBeenManipulated:V.b(),downloadIsInProgress:V.b(),importIsInProgress:V.b(),importedAssetDescriptor:V.b(),importedAssetCount:V.b()},w$=jH.extend({title:V.b({readOnly:!0,dependencies:["selectionModeIsActive","selectedItemCount","collectionLength"],get:Object.assign((function(){var e=this.selectionModeIsActive,t=this.selectedItemCount,n=this.collectionLength,i=!e||e&&t===n?"All":"Partial";return s.d("CreateShareButton.Title."+i)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]),l=!r||r&&a===o?"All":"Partial";return s.d("CreateShareButton.Title."+l)}})}),action:"doCreateShareButtonAction",isPrimaryAction:V.b(!0),collectionLength:V.b(0),staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateShareButton"}}),I$=$H.extend({titleString:V.b({type:String,readOnly:!0,dependencies:["isAttached","didResizeHorizontally","shareOwner"],get:Object.assign((function(){var e=this.shareOwner;if(!this.isAttached||!e)return"";var t=e.userIdentity.nameComponents.givenName,n=s.d("ReciprocateTitleView.ShareWithOriginator",{originatorName:t});return this._fitStringToContainer(n,this.titleStringContainer)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]);if(!i.internalGet(this,t[0+n])||!r)return"";var a=r.userIdentity.nameComponents.givenName,o=s.d("ReciprocateTitleView.ShareWithOriginator",{originatorName:a});return this._fitStringToContainer(o,this.titleStringContainer)}})}),subtitleString:V.b(""),displaySubtitleString:V.b({readOnly:!0,get:function(){return""}}),selectionModeIsActive:V.b(!1),shareOwner:V.b(),expiryDateString:V.b({dependencies:["isAttached","selectedItemCount","collectionLength","selectionModeIsActive"],get:Object.assign((function(){if(this.isAttached){var e=this.selectionModeIsActive?this.selectedItemCount:this.collectionLength,t=e>2?"More":Number(e).toString();return s.d("ReviewTitleView.NumberOfPhotos."+t,{count:e})}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r=i.internalGet(this,t[3+n])?i.internalGet(this,t[1+n]):i.internalGet(this,t[2+n]),a=r>2?"More":Number(r).toString();return s.d("ReviewTitleView.NumberOfPhotos."+a,{count:r})}}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"ReciprocateTitleView"}});function S$(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function C$(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){S$(a,i,r,s,o,"next",e)}function o(e){S$(a,i,r,s,o,"throw",e)}s(void 0)}))}}var E$=yn.a,A$=E$.MOUSE,O$=E$.TOUCH,T$=Gk.extend(CA,AU,Hk).extend({viewClass:F.b({mixinDependencies:[xn]}),oneUpPageViewControllerClass:xW,oneUpPageViewController:V.b({downstreamBindings:{oneUpSelectionIsAllowed:"(owner).gridViewController.selectionModeIsActive"}}),init:function(){var e=this,t=arguments;Object.defineProperties(this,{_dataManager:{value:L.n()}}),e.__s._$gg$init.apply(e,t)},navItem:V.b({readOnly:!0,strong:!0,type:Zk,get:function(){return Zk.create({shouldHideGlobalProgressBar:!0})}}),gridViewController:Ci.b({readOnly:!0,strong:!0,viewOutlet:"photosGridView",defaultValue:k.c(_$.extend(y$,GW,{isWhitespaceDeselectionEnabled:V.b(Ec.isWhitespaceDeselectionEnabled),rootRecord:V.b(),uploadIsComplete:V.b(!0),_shareBackPlacardMediaPK:HM.b({readOnly:!0,dependencies:["collection","collection.contentsDidChange","selectionController.selectionDidChange","selectionModeIsActive"],get:Object.assign(C$(regeneratorRuntime.mark((function e(){var t,n,i,r,a,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_V(this.shareBackPlacardMediaPK?1e3:0);case 2:if(t=this.collection,n=this.selectedIndices,i=this.selectionModeIsActive,t&&(!i||n)){e.next=5;break}return e.abrupt("return",void 0);case 5:for(r=i?n.toArray():Array.from(new Array(t.length).keys()),a=[],s=0,o=r.length;s<o;s++)l=r[s],a.push(t.encodedObjectAt(l));return e.abrupt("return",gC.chooseBestPlacardMedia(a));case 9:case"end":return e.stop()}}),e,this)}))),{__CW__getter:function(){var e=C$(regeneratorRuntime.mark((function e(t,n,i,r){var a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_V(this.shareBackPlacardMediaPK?1e3:0);case 2:if(a=r.internalGet(this,n[0+i]),s=this.selectedIndices,o=r.internalGet(this,n[3+i]),a&&(!o||s)){e.next=5;break}return e.abrupt("return",void 0);case 5:for(l=o?s.toArray():Array.from(new Array(a.length).keys()),c=[],u=0,d=l.length;u<d;u++)h=l[u],c.push(a.encodedObjectAt(h));return e.abrupt("return",gC.chooseBestPlacardMedia(c));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()})}),shareBackPlacardMediaPK:BC.b({source:"_shareBackPlacardMediaPK",gate:"_shareBackPlacardMediaPK"}),hasModeSelectionToolbar:V.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===O$||!Ec.implicitDesktopSelectionMode}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===O$||!Ec.implicitDesktopSelectionMode}})}),view:V.b({downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}}),viewClass:F.b({shareBackPlacardMediaPK:V.b(),shareHeaderView:V.b({strong:!0,defaultValue:k.c(v$.extend({shareBackPlacardMediaPK:V.b(),sharePlacardView:V.b({defaultValue:F.b({shareBackPlacardMediaPK:V.b(),shareImageView:V.b({defaultValue:F.b({rootRecord:V.b({get:function(){}}),shareBackPlacardMediaPK:V.b(),loadedKeyMedia:HM.b({dependencies:["shareBackPlacardMediaPK"],readOnly:!0,get:Object.assign((function(){var e=this.shareBackPlacardMediaPK;if(e)return fr.a.find(e)||fr.a.load({primaryKeys:[e]}).then((function(e){return e.objectAt(0)}))}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return fr.a.find(r)||fr.a.load({primaryKeys:[r]}).then((function(e){return e.objectAt(0)}))}})})}),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}})}),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK"}}),actionButton:V.b({defaultValue:k.c(w$),downstreamBindings:{downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",selectedItemCount:"(owner).selectedItemCount",selectionModeIsActive:"(owner).selectionModeIsActive",isAllAddedToLibrary:"(owner).isAllAddedToLibrary"}}),shareDetailView:V.b({defaultValue:k.c(I$),downstreamBindings:{shareOwner:"(owner).rootRecord.share.owner",name:"(owner).name",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectedItemCount:"(owner).selectedItemCount",uploadIsComplete:"(owner).uploadIsComplete",collectionLength:"(owner).collectionLength",expiryDate:"(owner).expiryDate",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated"}})})),downstreamBindings:{shareBackPlacardMediaPK:"(owner).shareBackPlacardMediaPK",rootRecord:"(owner).rootRecord",availableViewportHeight:"(owner).availableShareHeaderHeight",collectionLength:"(owner).collectionLength",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",name:"(owner).name",isAuthenticated:"(owner).isAuthenticated",selectedItemCount:"(owner).selectedItemCount",assetCount:"(owner).assetCount",photosCount:"(owner).photosCount",videosCount:"(owner).videosCount",selectionModeIsActive:"(owner).selectionModeIsActive",uploadIsComplete:"(owner).uploadIsComplete",availableHeightToDesire:"(owner).availableHeightForHeaderToDesire",selectionHasBeenManipulated:"(owner).selectionHasBeenManipulated",rowSpacing:"(owner).rowSpacing",downloadIsInProgress:"(owner).downloadIsInProgress",importIsInProgress:"(owner).importIsInProgress",importedAssetDescriptor:"(owner).importedAssetDescriptor",importedAssetCount:"(owner).importedAssetCount",isAllAddedToLibrary:"(owner).isAllAddedToLibrary",userIsUnableToImport:"(owner).userIsUnableToImport"}})}),assetCount:V.b(Oi.c("rootRecord.assetCount")),selectionModeIsActive:V.b({writeDependencies:[],dependencies:["primaryInteractionMode"],get:Object.assign((function(e){return e||this.primaryInteractionMode===A$&&Ec.implicitDesktopSelectionMode}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])===A$&&Ec.implicitDesktopSelectionMode}})}),isSelectionEnabled:V.b(Oi.c("selectionModeIsActive")),toggleSelectionMode:function(){(this.selectionModeIsActive=!this.selectionModeIsActive)&&this.selectAll()},isSelectAllEnabled:!0,selectedItemCount:V.b({readOnly:!0,dependencies:["selectedIndices","selectedIndices.length"],get:Object.assign((function(){return this.selectedIndices.length}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])}})}),selectedIndices:V.b(Oi.c("selectionController.selectedIndices"))})),downstreamBindings:{rootRecord:"(owner).rootRecord",currentUserIsShareOwner:"(owner).currentUserIsShareOwner"}}),assetSelectionViewContainer:V.b({readOnly:!0,strong:!0,type:jt.a,get:function(){return this._dataManager.cplSystemContainersMap.get(jt.a.PredefinedName.PHOTOS)}}),updateContainer:function(e){return C$(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},containerDidUpdate:function(){var e=this;return C$(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!0===e.gridViewController.selectionModeIsActive&&e.gridViewController.selectAll();case 1:case"end":return t.stop()}}),t)})))()},doCreateShareButtonAction:function(){var e=this;return C$(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.gridViewController,i=n.selection,r=n.selectionModeIsActive,a=e.container.medias,s=e._dataManager,o=(r?i:a).encodedToArray(),(l=G.a.application.feedbackService)&&l.report&&l.report("cmmShareBackInitiated"),c={beginStat:U.a,endStat:U.a,recordStat:function(e,t){l.report(e,t,!0)}},u=Gd.a(e,"rootRecord.share.title"),d=e.primaryInteractionMode,h=e.hostedByCloudOSOne,t.next=10,gC.initiateCMMShare(u,d,s,o,c,void 0,e.rootRecord,h);case 10:return(p=t.sent).status===oC.OK&&e.sendEvent("popViewController",!0),t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)})))()},rootRecord:V.b(),addMedias:function(e){var t=this.container,n=t.pk,i=t.medias.encodedToArray(),r={pk:n,medias:Array.from(new Set([].concat(i,e)))};this._dataManager.loadData(jt.a,r,!0)},showAddAssetSelectionViewController:function(){var e=this.gridViewController,t=this.container,n=this.assetSelectionViewContainer,i=this.primaryInteractionMode,r=!0===e.selectionModeIsActive?e.selection:oi.a.create(t.medias.toArray()),a=g$.create({container:n,primaryInteractionMode:i});a.gridViewController.selection=r,i===A$&&(this.navItem.hidesBackButton=!0);var s=this._createNavigationContextForAssetSelection(a);this.presentViewController(s,!0)},_createNavigationContextForAssetSelection:function(e){var t=Ho.a.create({title:s.d("Review.AddAssets.Done"),action:"dismiss"});return e.navItem=Zk.create({rightBarButtonItem:t}),m$.create(e)},currentUserIsShareOwner:V.b(!1),__superMap:{_$gg$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReviewPageViewController"}}),M$=n(808),D$=Math.PI/180;function P$(e,t,n,i,r){var a=(e+n)*D$/2,s=(n-e)*D$,o=t,l=i;o<0&&(o+=360),l<0&&(l+=360);var c=l-o;c>180?c-=360:c<-180&&(c+=360);var u=Math.abs(parseInt(c,10)),d=Math.abs(parseInt(n,10)-parseInt(e,10)),h=c*D$;if(d<=2&&u<=2){var p=Math.sin(a),f=Math.sqrt(1-.00669437999014132*p*p),g=s*(6335439.3272928195/(p=f*f*f)),m=h*(6378137/f*Math.cos(a));return Math.sqrt(g*g+m*m)}var _=6367e3;r&&(_=6378160-21e3*Math.sin(a));var v=Math.pow(Math.sin(s/2),2)+Math.cos(D$*e)*Math.cos(D$*n)*Math.pow(Math.sin(h/2),2),b=1-v;return v<0&&(v=0),b<0&&(b=0),_*(2*Math.atan2(Math.sqrt(v),Math.sqrt(b)))}function L$(e){if(Number.isFinite(e))return parseFloat(e.toFixed(6))}function R$(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function x$(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){R$(a,i,r,s,o,"next",e)}function o(e){R$(a,i,r,s,o,"throw",e)}s(void 0)}))}}var N$=Ec.maxShareAssetsToUseForLocationFilter,F$=Ec.maximumShareBackSize,V$=Ec.maxDistanceBetweenLocationsInMeters,k$=Ec.paddingForShareBackTimeInMillis,B$=Ec.maxShareTimeRangeForShareBackInMillis,j$=Ec.disableShareBack,U$=Ec.earlyExitContiguousChunkGapInMillis,G$=Ec.earlyExitMaxNonContiguousChunksAllowed,H$=P.a.extend(B.b,AA,{container:V.b(),momentsCollection:V.b({readOnly:!0,strong:!0,type:mO,get:function(){return mO.create()}}),rootRecord:V.b(),currentUserIsShareOwner:V.b(),shareBackResults:V.b(k.c(Wo.b)),dataManager:V.b({readOnly:!0,defaultValue:function(){return L.n()}}),shareBackReadyForDisplay:V.b({readOnly:!0,dependencies:["shareBackResults.length","iCPLEnabled","iCloudPhotoLibraryWasExited"],get:Object.assign((function(){var e=this.iCloudPhotoLibraryWasExited,t=this.iCPLEnabled,n=this.getPath("shareBackResults.length");return!e&&t&&n>0}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!r&&a&&s>0}})}),shareBackZone:V.b({dependencies:["shareBackReadyForDisplay"],readOnly:!0,strong:!0,type:jd.Zone,get:Object.assign((function(){if(this.shareBackReadyForDisplay){var e="CMM-"+Y.a().toUpperCase(),t=this.dataManager.cplZone.zoneID.ownerRecordName,n=NU.a.create({ownerRecordName:t,zoneName:e}),i=jd.Zone.getPrimaryKey(n);return jd.Zone.createFromDataHash({pk:i,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:n})}}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n])){var r="CMM-"+Y.a().toUpperCase(),a=this.dataManager.cplZone.zoneID.ownerRecordName,s=NU.a.create({ownerRecordName:a,zoneName:r}),o=jd.Zone.getPrimaryKey(s);return jd.Zone.createFromDataHash({pk:o,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:s})}}})}),shareBackContainer:V.b({dependencies:["shareBackZone"],readOnly:!0,strong:!0,type:jt.a,get:Object.assign((function(){var e=this.dataManager,t=this.shareBackZone;if(t){var n=jt.a.PredefinedName.MOMENTS,i=jt.a.getPrimaryKeyWithZonePK(t.pk,n),r=this.shareBackResults,a={pk:i,albumType:$o.a.PREDEFINED_SMART,isDeleted:!1,isExpunged:!1,recordType:jt.a.CK_RECORD_TYPE,_sortType:zo.a.CREATION_DATE.value,medias:r.toArray(),zone:t.pk};return e.loadData(jt.a,a),jt.a.find(i)}}),{__CW__getter:function(e,t,n,i){var r=this.dataManager,a=i.internalGet(this,t[0+n]);if(a){var s=jt.a.PredefinedName.MOMENTS,o=jt.a.getPrimaryKeyWithZonePK(a.pk,s),l=this.shareBackResults,c={pk:o,albumType:$o.a.PREDEFINED_SMART,isDeleted:!1,isExpunged:!1,recordType:jt.a.CK_RECORD_TYPE,_sortType:zo.a.CREATION_DATE.value,medias:l.toArray(),zone:a.pk};return r.loadData(jt.a,c),jt.a.find(o)}}})}),shareBackPlacardMediaPK:V.b({readOnly:!0,dependencies:["shareBackReadyForDisplay"],get:Object.assign((function(){if(this.shareBackReadyForDisplay)return gC.chooseBestPlacardMedia(this.shareBackResults.toArray())}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return gC.chooseBestPlacardMedia(this.shareBackResults.toArray())}})}),shareBackShareTitle:V.b(Oi.c("rootRecord.share.title")),attemptedToCalculateShareBack:!1,isReadyToCalculate:V.b({readOnly:!0,dependencies:["rootRecord","container","container.medias","container.medias.contentsDidChange","dataManager","dataManager.cplSystemContainersMap","currentUserIsShareOwner"],get:Object.assign((function(){var e=this.rootRecord,t=this.container,n=this.dataManager,i=this.currentUserIsShareOwner;if(void 0===e||void 0===t||void 0===n||void 0===n.cplSystemContainersMap||void 0===i)return!1;for(var r=t.getDataHash().medias,a=!0,s=0;s<Math.min(r.length,N$);s++)if(void 0===r[s]){a=!1;break}return a}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[4+n]),o=i.internalGet(this,t[6+n]);if(void 0===r||void 0===a||void 0===s||void 0===s.cplSystemContainersMap||void 0===o)return!1;for(var l=a.getDataHash().medias,c=!0,u=0;u<Math.min(l.length,N$);u++)if(void 0===l[u]){c=!1;break}return c}})}),calculateShareBack:function(){var e=this;return x$(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(n=e.rootRecord)){t.next=26;break}if(i=n.endDate,r=n.startDate,!e._shouldSuppressShareBackMutableReasons()){t.next=5;break}return t.abrupt("return");case 5:return e.attemptedToCalculateShareBack=!0,t.next=8,e._shouldSuppressShareBackImmutableReasons();case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1=e.isDisposed;case 11:if(t.t0=t.t1,t.t0){t.next=14;break}t.t0=!e.container;case 14:if(!t.t0){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,e._fetchMediasFromUserLibraryForShareBack(r,i);case 18:if(a=t.sent,!e.isDisposed&&e.container){t.next=21;break}return t.abrupt("return");case 21:s=e._getValidShareBackCandidatesFromResults(a),(o=e._filterCandidatesByLocation(s,V$,N$,k$)).length>0&&e.shareBackResults.addEach(o),(l=G.a.application.feedbackService)&&l.report&&l.getSignificantNum&&(c=l.getSignificantNum(o.length),u=c>0?"cmmShareBackPresent":"cmmShareBackEmpty",l.report(u,{count:c}));case 26:case"end":return t.stop()}}),t)})))()},_fetchMediasFromUserLibraryForShareBack:function(e,t){var n=this;return x$(regeneratorRuntime.mark((function i(){var r,a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=t+k$,a=e-k$,s=n.momentsCollection.container,i.next=5,s.loadMediasForDateRangeEfficiently(r,a,F$);case 5:return i.abrupt("return",i.sent);case 6:case"end":return i.stop()}}),i)})))()},_shouldSuppressShareBackMutableReasons:function(){return j$||this.attemptedToCalculateShareBack||this._isShareIncomplete()},_shouldSuppressShareBackImmutableReasons:function(){var e=this;return x$(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._isShareOwnedByUser()||e._isShareTimeRangeTooLarge()||e._isShareNonContiguous(N$,U$,G$))){t.next=2;break}return t.abrupt("return",!0);case 2:return n=e.rootRecord.originatingZoneName,t.next=5,e._isOriginatingShareOwnedByUser(n);case 5:if(!t.sent){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},_isShareOwnedByUser:function(){var e=this.currentUserIsShareOwner;return e&&u.b.debug("Share is owned by user, suppressing share back"),e},_isShareIncomplete:function(){var e=this.container,t=this.rootRecord,n=!(e.medias.length>0&&on.isShareCompleteEnough(t,e));return n&&u.b.debug("Share is incomplete, suppressing share back"),n},_isShareTimeRangeTooLarge:function(){var e=this.rootRecord,t=e.startDate,n=e.endDate-t>B$;return n&&u.b.debug("Share time range is too large, suppressing share back"),n},_isShareNonContiguous:function(e,t,n){for(var i=this.container.medias,r=void 0===e?i.length:Math.min(i.length,e),a=-1/0,s=0,o=0;o<r;o++){var l=i.storeDataForObjectAt(o);if(l){var c=pr.a.getDataHashForPrimaryKey(l.asset).assetDate;if(c>a+t&&++s>n)return u.b.debug("Share is non-contiguous, suppressing share back"),!0;a=c}}return!1},_isOriginatingShareOwnedByUser:function(e){var t=this;return x$(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",!1);case 2:return t._originatingZonePromise||(i=jd.Zone.getPrimaryKeyFromParts({zoneName:e,ownerRecordName:t.dataManager.cplZoneID.ownerRecordName}),t._originatingZonePromise=jd.Zone.load({primaryKeys:[i]})),n.prev=3,n.next=6,t._originatingZonePromise;case 6:n.next=13;break;case 8:if(n.prev=8,n.t0=n.catch(3),n.t0.context.ckErrorCode!==CloudKit.CKError.ZONE_NOT_FOUND){n.next=12;break}return n.abrupt("return",!1);case 12:throw n.t0;case 13:return u.b.debug("Originating share owned by user, suppressing share back"),n.abrupt("return",!0);case 15:case"end":return n.stop()}}),n,null,[[3,8]])})))()},_originatingZonePromise:void 0,_getValidShareBackCandidatesFromResults:function(e){for(var t=[],n=0;n<e.length;n++){var i=e.primaryKeyForObjectAt(n);this._isMediaValidForShareBack(i)&&t.push(i)}return t},_isMediaValidForShareBack:function(e){var t=fr.a.getDataHashForPrimaryKey(e),n=pr.a.getDataHashForPrimaryKey(t.asset),i=n._assetSubtypeV2;if((void 0===i?n._assetSubtype:i)===nC.a.PHOTO_SCREENSHOT.value)return!1;var r=eC.a.getDataHashForPrimaryKey(t.master);if(r.importedBy===M$.a.MOMENT_SHARE.value)return!1;var a=r.dataClassType;return a===tC.a.IMAGE.value||a===tC.a.MOVIE.value},_filterCandidatesByLocation:function(e,t,n,i){var r=this._getLocationsInShareSubset(n),a=r.locations,s=r.lastDate;if(!a.length)return e;for(var o=[],l=s+i,c=0;c<e.length;c++){var u=e[c],d=fr.a.getDataHashForPrimaryKey(u),h=pr.a.getDataHashForPrimaryKey(d.asset);if(!this._hasLocation(h)||h.assetDate>l)o.push(u);else for(var p=L$(h.locationLatitude),f=L$(h.locationLongitude),g=0;g<a.length;g++){var m=a[g];if(P$(p,f,m.latitude,m.longitude,!0)<t){o.push(u);break}}}return o},_getLocationsInShareSubset:function(e){for(var t,n=this.container.medias,i=[],r=void 0===e?n.length:Math.min(n.length,e),a=0;a<r;a++){var s=n.storeDataForObjectAt(a);if(s){var o=pr.a.getDataHashForPrimaryKey(s.asset);this._hasLocation(o)&&(t=o.assetDate,i.push({latitude:L$(o.locationLatitude),longitude:L$(o.locationLongitude)}))}}return{locations:i,lastDate:t}},_hasLocation:function(e){return Number.isFinite(e.locationLatitude)&&Number.isFinite(e.locationLongitude)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareBackSuggestionsService"}});function W$(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function $$(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){W$(a,i,r,s,o,"next",e)}function o(e){W$(a,i,r,s,o,"throw",e)}s(void 0)}))}}var z$=xU.sharedInstance,K$=UU.sharedInstance,q$=Gk.extend({mixinDependencies:[fl.a,CA,uU,fU,bW,AU,hU,zH,sW],init:function(){var e=this,t=this,n=arguments;t.__s._$dt$init.apply(t,n),this._gridScrollBottomListener=this.listen("gridViewController.gridScrollTop",(function(t){t>0&&0===e.gridViewController.grid.scrollBottom&&e.feedbackService&&(e.feedbackService.report("shareDidScrollToEnd"),e._gridScrollBottomListener.disconnect(),e._gridScrollBottomListener=void 0)}))},dispose:function(){var e=this,t=arguments;this._gridScrollBottomListener&&(this._gridScrollBottomListener.disconnect(),this._gridScrollBottomListener=void 0),e.__s._$xy$dispose.apply(e,t)},oneUpPageViewControllerClass:BW,oneUpPageViewController:V.b({downstreamBindings:{isAuthenticated:"(owner).isAuthenticated",currentUserIsShareOwner:"(owner).currentUserIsShareOwner",addToLibraryDelegate:"(owner)",rootRecord:"(owner).rootRecord",libraryInfo:"(owner).libraryInfo",userIsUnableToImport:"(owner).userIsUnableToImport",oneUpSelectionIsAllowed:"(owner).oneUpSelectionIsAllowed"}}),oneUpSelectionIsAllowed:V.b({readOnly:!0,dependencies:["selectionModeIsActive"],get:Object.assign((function(){return this.selectionModeIsActive}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])}})}),viewClass:lW,view:V.b({downstreamBindings:{possibleImportProgressLabels:"(owner).possibleImportProgressLabels",importProgressIsIndeterminate:"(owner).importProgressIsIndeterminate",importProgressLabel:"(owner).importProgressLabel",importProgressValue:"(owner).importProgressValue",shouldShowImportProgressView:"(owner).shouldShowImportProgressView"}}),navItem:V.b({readOnly:!0,strong:!0,type:yU,get:function(){var e=this;return yU.create({container:this.bindingFor("container"),currentUserIsShareOwner:this.bindingFor("currentUserIsShareOwner"),isAuthenticated:this.bindingFor("isAuthenticated"),rootRecord:this.bindingFor("rootRecord"),hostedByCloudOSOne:this.hostedByCloudOSOne,nextResponder:this,shareBackReadyForDisplay:this.bindingFor("shareBackSuggestionsService.shareBackReadyForDisplay"),navigateToShareListingPage:function(){return e.navigateToShareListingPage()}})}}),hostedByCloudOSOne:!1,gridViewController:Ci.b({readOnly:!0,strong:!0,viewOutlet:"photosGridView",defaultValue:k.c(RH),downstreamBindings:{collection:"(owner).collection",headerElement:"(owner).shareHeaderView.element",footerElement:"(owner).shareFooterView.element",rootRecord:"(owner).rootRecord",selectionModeIsActive:"(owner).selectionModeIsActive"}}),shareBackSuggestionsService:V.b({defaultValue:k.c(H$),downstreamBindings:{container:"(owner).container",rootRecord:"(owner).rootRecord",currentUserIsShareOwner:"(owner).currentUserIsShareOwner"}}),triggerShareBackService:B.h({inputs:["shareBackSuggestionsService","shareBackSuggestionsService.isReadyToCalculate","isAuthenticated"],callback:function(e,t,n){t&&n&&e.calculateShareBack()}}),dateRange:V.b({dependencies:["rootRecord"],get:function(){var e=Gd.a(this,"rootRecord.endDate"),t=Gd.a(this,"rootRecord.startDate");return Wp.fmt(t,e)},readOnly:!0}),expiryDate:V.b({dependencies:["rootRecord"],readOnly:!0,get:function(){return this.getPath("rootRecord.expiryDate")||0}}),isAuthenticated:V.b(),userIsUnableToImport:V.b(!1),uploadIsComplete:V.b({type:Boolean,readOnly:!0,dependencies:["rootRecord","container","container.isLoaded","container.medias.length"],get:Object.assign((function(){var e=this.rootRecord,t=this.container;if(void 0!==e&&void 0!==t&&t.isLoaded)return e.assetCount===t.medias.length}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(void 0!==r&&void 0!==a&&a.isLoaded)return r.assetCount===a.medias.length}})}),itemsRemaining:V.b({dependencies:["rootRecord","libraryInfo"],readOnly:!0,get:Object.assign((function(){var e=this.rootRecord;if(!e)return 0;var t=e.assetCount,n=void 0===t?0:t;if(0===n)return n;var i=this.libraryInfo,r=i.videosCount+i.photosCount;return n<r?0:n-r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return 0;var a=r.assetCount,s=void 0===a?0:a;if(0===s)return s;var o=i.internalGet(this,t[1+n]),l=o.videosCount+o.photosCount;return s<l?0:s-l}})}),isWhitespaceDeselectionEnabled:V.b(Ec.isWhitespaceDeselectionEnabled),libraryInfo:V.b(),selectedIndices:V.b(Oi.c("gridViewController.selectedIndices")),selectionHasBeenManipulated:V.b(Oi.c("gridViewController.userHasManipulatedSelection")),selectedItemCount:V.b({readOnly:!0,dependencies:["selectedIndices","selectedIndices.length"],get:Object.assign((function(){return this.selectedIndices.length}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])}})}),assetCount:V.b(Oi.c("rootRecord.assetCount")),photosCount:V.b(Oi.c("rootRecord.photosCount")),videosCount:V.b(Oi.c("rootRecord.videosCount")),selectionModeIsActive:V.b({writeDependencies:[],dependencies:["primaryInteractionMode","currentUserIsShareOwner"],get:Object.assign((function(e){return e||!this.currentUserIsShareOwner&&this.primaryInteractionMode===yn.a.MOUSE&&Ec.implicitDesktopSelectionMode}),{__CW__getter:function(e,t,n,i){return e||!i.internalGet(this,t[1+n])&&i.internalGet(this,t[0+n])===yn.a.MOUSE&&Ec.implicitDesktopSelectionMode}})}),importedAssetDescriptor:V.b(),importedAssetCount:V.b(0),importingAssetCount:V.b(0),isAllAddedToLibrary:V.b({readOnly:!0,dependencies:["importedAssetCount","importingAssetCount","gridViewController.collection.length"],get:Object.assign((function(){return this.importedAssetCount+this.importingAssetCount>=this.gridViewController.collection.length}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])+i.internalGet(this,t[1+n])>=i.internalGetPath(this,t[2+n])}})}),downloadIsInProgress:V.b(),viewShareBack:function(){var e=this.primaryInteractionMode,t=this.rootRecord,n=this.shareBackSuggestionsService.shareBackContainer,i=G.a.application.feedbackService;i&&i.report&&i.report("cmmViewShareBackClicked");var r=T$.create({container:n,rootRecord:t,primaryInteractionMode:e});this.showViewController(r)},toggleSelectionMode:function(){(this.selectionModeIsActive=!this.selectionModeIsActive)&&this.gridViewController.selectAll();var e=this.feedbackService;e&&e.report("didEnterSelectMode")},containerDidUpdate:function(e){var t=this;return $$(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!0===t.selectionModeIsActive&&t.gridViewController.selectAll(),n.next=3,vA.load({zonePK:e.zone.pk});case 3:(i=n.sent)&&pi.a(i,Wo.b)&&(t.libraryInfo=i.objectAt(0));case 5:case"end":return n.stop()}}),n)})))()},downloadMedias:function(e){var t=this;return $$(regeneratorRuntime.mark((function n(){var i,r,a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.collection,r=t.container,a=t.rootRecord,s=t.selectionModeIsActive,o=t.primaryInteractionMode,l=t.assetCount,c=t.libraryInfo,t.downloadIsInProgress=!0,u=s?e.toArray():Array.from(Array(i.length).keys()),n.next=5,t.downloadMediasManager.prepareDownloadURL({collection:i,container:r,selectedIndicesArray:u,primaryInteractionMode:o,rootRecord:a,showSpinner:!0,spinnerHideDelay:0,preventDownloadWindow:!0});case 5:d=n.sent,t.downloadIsInProgress=!1,d.hasError?OU():(h={assetCount:l,downloadURL:d.downloadURL,libraryInfo:c,downloadCount:u.length,downloadWindow:d.downloadWindow},t.zipDownloadWillBegin(d.archiveDetails,h));case 8:case"end":return n.stop()}}),n)})))()},pageLoadedListener:B.g({inputs:["container.medias.length","container.isLoaded","libraryInfo.loadStatus","rootRecord","feedbackService"],callback:function(e,t,n,i,r){if(r&&e&&t&&n===jT.a.LOADED&&i){var a=r.getDaysRemaining(i.expiryDate),s=r.roundToNearestTen(i.assetCount),o=i.assetCount!==e;r.report("shareLoaded",{daysLeft:a,assetCount:s,isShareIncomplete:o})}}}),downloadMediasManager:V.b(z$),importMediasManager:V.b(K$),doAddToLibraryButtonAction:function(){var e=this;return $$(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.gridViewController.selectedIndices,i=n.clone(),!e.userIsUnableToImport){t.next=6;break}return t.next=5,e.downloadMedias(i);case 5:return t.abrupt("return",t.sent);case 6:if(!e.isAuthenticated){t.next=10;break}return t.next=9,e.importSelectionToLibrary(i);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",TU(e.collection,i,e.signInAndImportMedias.bind(e),e.downloadMedias.bind(e),e.selectionModeIsActive).catch((function(e){throw e})));case 11:case"end":return t.stop()}}),t)})))()},navigateToShareListingPage:U.a,shouldNavigateAwayWhenZoneIsDeleted:V.b(!0),zone:V.b(Oi.c("container.zone")),__superMap:{_$dt$init:"init",_$xy$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ReceiverPageViewController"}}).extend({mixinDependencies:[bj,Jl,VC,FC,$B,tc.a],viewClass:F.b(eu),gridViewController:F.b({columnCount:Oi.c("parent.columnCount")}),renderInsetsAsPositioning:function(){var e=this,t=arguments;e.__s._$Sx$renderInsetsAsPositioning.apply(e,t),this.gridViewController.measureViewport()},parentRoute:V.b({readOnly:!0,get:function(){var e=this.getPath("dataManager.cplSystemContainersMap");if(e){var t=e.get(jt.a.PredefinedName.MOMENTS);if(t)return{routeName:"container",options:{container:t}}}}}),preferredColumnCount:V.b({binding:null,defaultValue:4}),shouldRenderInsetsAsPositioning:!0,hostedByCloudOSOne:!0,toolbarConfiguration:V.b({defaultValue:k.c(hu.extend({rightItems:["dotDotDotButton"],dotDotDotButton:V.b(Oi.c("navItem.rightBarButtonItem")),gridViewController:V.b(),navItem:V.b()})),downstreamBindings:{gridViewController:"(owner)",parentRoute:"(owner).parentRoute",navItem:"(owner).navItem"}}),viewShareBack:function(){var e={routeName:"cmmReview",options:{rootRecord:this.rootRecord,shareBackSuggestionsService:this.shareBackSuggestionsService}};this.sendEvent("navigateTo",e)},__superMap:{_$Sx$renderInsetsAsPositioning:"renderInsetsAsPositioning"},staticMembers:{__QUALIFIED_CLASS_NAME__:"P2ReceiverPageViewController"}});function Q$(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function Y$(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Q$(a,i,r,s,o,"next",e)}function o(e){Q$(a,i,r,s,o,"throw",e)}s(void 0)}))}}var Z$=yj.extend({gridViewController:F.b({itemViewClass:F.b({isTimeRemainingTextAllowed:!0}),layoutMetrics:V.b({defaultValue:F.b({captionHeight:18,hasCaptions:!0}),downstreamBindings:{hasCaptions:null}}),userNavigationRequest:U.a}),rightToolbarItems:V.b([]),removeSelection:function(){this.permanentlyDeleteMedia()},permanentlyDeleteMedia:function(){var e=this.container;if(Dd.isSelectionOverLimit(this.sparseSelection))Dd.showSelectionLimitAlert(ph.EXPUNGE);else{var t=this.sparseSelection.length||e.medias.length;Nn.create({message:Md(["","Alert.Expunge.Item.Message.1","Alert.Expunge.Item.Message.More"],t),description:s.d("Alert.Expunge.Item.Description.More"),primaryButton:{title:s.d("Alert.Expunge.Button.Title"),target:this,action:"_completePermanentlyDeleteMedia",additionalClassNames:F.b(["destructive"])},alternateButton:{title:s.d("Alert.Cancel.Button.Title")}}).show()}},collectionRecordsLoader:V.b({readOnly:!0,dependencies:["collection","container"],get:Object.assign((function(){var e=this.container,t=this.collection;if(e&&t)return new Bd(t,e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=i.internalGet(this,t[0+n]);if(r&&a)return new Bd(a,r)}})}),_completePermanentlyDeleteMedia:function(){var e=this;return Y$(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.container,!e.sparseSelection.length){t.next=7;break}return t.next=4,e.sparseSelection.getFullyLoadedSelection(e);case 4:i=t.sent,t.next=10;break;case 7:return t.next=9,e.collectionRecordsLoader.loadAllRecordsInThisCollection();case 9:i=n.medias;case 10:i.forEach((function(e){return e&&e.permanentlyDelete()})),L.n().commit();case 13:case"end":return t.stop()}}),t)})))()},recoverMedia:function(){var e=this;return Y$(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.sparseSelection)&&0!==n.length){t.next=3;break}return t.abrupt("return");case 3:if(!Dd.isSelectionOverLimit(n)){t.next=6;break}return Dd.showSelectionLimitAlert(ph.RECOVER),t.abrupt("return");case 6:return t.abrupt("return",e.recoverSelection(n));case 7:case"end":return t.stop()}}),t)})))()},staticMembers:{__QUALIFIED_CLASS_NAME__:"P2RecentlyDeletedPageViewController"}}),X$=T$.extend({mixinDependencies:[bj,Jl,VC,FC,tc.a],container:V.b(Oi.c("shareBackSuggestionsService.shareBackContainer")),shareBackSuggestionsService:V.b(),shareBackPlacardMediaPK:V.b(Oi.c("shareBackSuggestionsService.shareBackPlacardMediaPK")),viewClass:F.b(eu),parentRoute:V.b({readOnly:!0,get:function(){return{routeName:"cmmReceiver",options:{rootRecordPK:this.rootRecord.pk}}}}),toolbarConfiguration:V.b({defaultValue:k.c(hu.extend({gridViewController:V.b()})),downstreamBindings:{gridViewController:"(owner)",parentRoute:"(owner).parentRoute",isReturnToAllowed:"(owner).isReturnToAllowed"}}),isReturnToAllowed:V.b(!0),shouldRenderInsetsAsPositioning:!0,renderInsetsAsPositioning:function(){var e=this,t=arguments;e.__s._$hp$renderInsetsAsPositioning.apply(e,t),this.gridViewController.measureViewport()},presentViewController:function(e,t){e.presentingViewController=this;var n=e.view.element,i=G.a.getPath("application.toolbarHeight");yl.c(n,"top",i+"px"),G.a.application._paneManager.addPane(e),this.isReturnToAllowed=!1},dismissViewController:function(e,t){e.presentingViewController=null,G.a.application._paneManager.removePane(e),this.isReturnToAllowed=!0},__superMap:{_$hp$renderInsetsAsPositioning:"renderInsetsAsPositioning"},staticMembers:{__QUALIFIED_CLASS_NAME__:"P2ReviewPageViewController"}}),J$=jt.a,ez=fi.a.extend({mixinDependencies:[ec,Kl,Tf,tc.a],viewClass:Fp,sidebarViewController:Ci.a.create({defaultValue:k.c(_A,{shouldRenderInsetsAsPositioning:!0}),downstreamBindings:{baseInsetTop:"(owner).insetTop",currentUploadViewController:"(owner).currentUploadViewController"},viewOutlet:"sidebarView"}),isInDarkMode:V.b(!1),isInEditMode:V.b(!1),isSidebarAllowed:V.b({type:Boolean,readOnly:!0,dependencies:["currentNavigationLocation",te.a.sharedInstance.window.bindingFor("width")],get:Object.assign((function(){var e=this.currentNavigationLocation;return(!e||"firstRun"!==e.routeName&&"loading"!==e.routeName&&"cmmReceiver"!==e.routeName&&"cmmReview"!==e.routeName&&"cmmIncompleteState"!==e.routeName)&&!(te.a.sharedInstance.window.width<800)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return(!r||"firstRun"!==r.routeName&&"loading"!==r.routeName&&"cmmReceiver"!==r.routeName&&"cmmReview"!==r.routeName&&"cmmIncompleteState"!==r.routeName)&&!(i.internalGet(this,t[1+n])<800)}})}),sidebarIsOpen:V.b({type:Boolean,dependencies:[G.a.bindingFor("application.userSidebarToggle"),"isSidebarAllowed"],writeDependencies:[G.a.bindingFor("application.userSidebarToggle")],get:Object.assign((function(){return!!this.isSidebarAllowed&&Boolean(G.a.application.userSidebarToggle)}),{__CW__getter:function(e,t,n,i){return!!i.internalGet(this,t[1+n])&&Boolean(i.internalGetPath(this,t[0+n]))}}),set:Object.assign((function(e){this.isSidebarAllowed&&(G.a.application.userSidebarToggle=Boolean(e))}),{__CW__setter:function(e,t,n,i,r){this.isSidebarAllowed&&(n[0+i]=Boolean(e))}}),didChange:function(e){this.sidebarViewController.view[e?"unretract":"retract"](this.getPath("primaryViewController.content.isUIResizeSlow")?0:NaN)},writeDependencySetPathMap:[!0]}),sidebarViewRetractionChangedTo:function(e){this.sidebarIsOpen=1!==e},view:V.b({downstreamBindings:{applicationRootRoute:"(owner).applicationRootRoute",currentUploadViewController:"(owner).currentUploadViewController",isInDarkMode:"(owner).isInDarkMode",isInEditMode:"(owner).isInEditMode",routeSwitcherSegments:"(owner).routeSwitcherSegments",toolbarConfiguration:"(owner).currentNavigationViewController.toolbarConfiguration"}}),primaryViewController:Ci.a.create({defaultValue:k.c(fi.a.extend(yi,{viewClass:F.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"contentViews"}],classes:["primary-panel"]}}}}),content:vi({defaultTransitionClass:Si,options:{viewsOutlet:"contentViews",duration:250},didChange:function(e){e&&(e.baseInsetsProvider=this.owner)}})})),viewOutlet:"primaryView"}),increaseLoadsInProgress:function(e){this.view.loadsInProgress+=e},decreaseLoadsInProgress:function(e){this.view.loadsInProgress=Math.max(0,this.loadsInProgress-e)},stateStoreId:"constMainViewController",routes:{oneUp:{viewControllerClass:tA},firstRun:{viewControllerClass:Tj},loading:{viewControllerClass:pu},album:{viewControllerClass:yj},allPhotos:{viewControllerClass:Ij,options:{stateStoreId:"constAllPhotos"}},deleted:{viewControllerClass:Z$,options:{stateStoreId:"constDeleted"}},folder:{viewControllerClass:Nj},moments:{viewControllerClass:EU,options:{stateStoreId:"constMoments"}},cmmIncompleteState:{viewControllerClass:wU},cmmReceiver:{viewControllerClass:q$},cmmReview:{viewControllerClass:X$}},defaultRoute:V.b({readOnly:!0,defaultValue:function(){var e="moments";return(window.location.hash.slice(1)||"").split("?")[0]&&(e="loading"),{routeName:e}}}),enterDarkMode:function(){this.isInDarkMode=!0},exitDarkMode:function(){this.isInDarkMode=!1},enterEditMode:function(){this.isInEditMode=!0},exitEditMode:function(){this.isInEditMode=!1},updateSidebar:function(){var e=this.sidebarViewController.containerListViewController;e&&pi.a(e,Ei.a)&&this.sidebarViewController.containerListViewController.update()},notifyTopViewControllerOfSizeChange:function(){var e=this.currentNavigationViewController;e&&e.measureViewport&&e.measureViewport()},routeSwitcherSegments:V.b({readOnly:!0,dependencies:["rootRoutes"],get:Object.assign((function(){var e=this.rootRoutes;return e?e.map((function(e){return{value:e,title:s.d("Toolbar.SegmentedControl."+e)}})):null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.map((function(e){return{value:e,title:s.d("Toolbar.SegmentedControl."+e)}})):null}})}),rootRoutes:V.b({readOnly:!0,defaultValue:function(){return Ai.a.create(["allPhotos","moments"])}}),applicationRootRoute:V.b({dependencies:["currentNavigationViewController","currentNavigationViewController.container"],writeDependencies:[],get:Object.assign((function(){var e=this.currentNavigationViewController;if(pi.a(e,q$))return"cmmReceiver";if(pi.a(e,X$))return"cmmReview";if(pi.a(e,wU))return"cmmIncompleteState";var t=this.getPath("currentNavigationViewController.container");return t?t.isMomentsAlbum?"moments":"allPhotos":null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(pi.a(r,q$))return"cmmReceiver";if(pi.a(r,X$))return"cmmReview";if(pi.a(r,wU))return"cmmIncompleteState";var a=i.internalGetPath(this,t[1+n]);return a?a.isMomentsAlbum?"moments":"allPhotos":null}}),set:function(e){var t=this.currentNavigationLocation;e!==(t?t.routeName:null)&&this.navigateTo(e)}}),currentNavigationViewController:V.b({downstreamBindings:{isSidebarAllowed:"(owner).isSidebarAllowed"},didChange:function(){}}),currentUploadViewController:V.b(Oi.c("currentNavigationViewController")),navigateToContainer:function(e){this.navigateTo(e)},navigateToOneUp:function(e,t,n){this.navigateTo({routeName:"oneUp",options:{media:e,collection:t,selectionDelegate:n}})},navigateUp:function(){ve.a.cloudOSService.setRoute("");var e=this.getPath("currentNavigationViewController.parentRoute");this.navigateTo(e)},navigateToErrorMessage:function(e){this.navigateTo({routeName:"firstRun",options:{errors:e}})},navigateToCMMReceiver:function(e){this.navigateTo({routeName:"cmmReceiver",options:{rootRecordPK:e}})},navigateToCMMIncompleteState:function(e){this.navigateTo({routeName:"cmmIncompleteState",options:{rootRecordPK:e}})},navigateTo:function(e){e&&"CMM_SHARE"===e.type||this.__s._$4b9$navigateTo.call(this,function(e){var t=L.n();return e||_.b("Must provide a routing parameter when navigating",e),pi.a(e,ql)||pi.a(e,jt.a)?(t.feedbackService.routeSelected=e,t.feedbackService.report("containerPageViewed",{type:(n=e,n.isNormalAlbum?"UserAlbum":n.isFolder&&!n.isVirtualFolder?"UserFolder":n.isPredefinedSmartAlbum?n.recordName:"Other")}),tz(e)):(J.a(e)||J.a(e.routeName)||_.b("Must provide a routing parameter when navigating",e),"oneUp"!==e&&"oneUp"!==e.routeName||function(e){e.options||_.b("Must provide an `options` hash with `.media` and `.collection` when navigating to the 'oneUp' route name.",e),e.options.media||_.b("Must provide an `options` hash with `.media` when navigating to the 'oneUp' route name.",e),e.options.collection||_.b("Must provide an `options` hash with `.collection` when navigating to the 'oneUp' route name.",e)}(e),"container"===e||"container"===e.routeName?(function(e){e.options||_.b("Must provide an `options` hash with `.container` when navigating to the 'container' route name.",e),e.options.container||_.b("Must provide an `options` hash with `.container` when navigating to the 'container' route name.",e)}(e),tz(e.options.container)):"allPhotos"===e||"allPhotos"===e.routeName?tz(L.n().cplSystemContainersMap.get(jt.a.PredefinedName.PHOTOS)):e);var n}(e))},transition:function(e,t){e!==t&&this.primaryViewController.transition("content",t)},viewControllerForNavigationObject:function(e){var t=e.options,n=void 0===t?e.options={}:t,i=n.container;return i&&(n.stateStoreId=this._stateStoreIdForContainer(i,["pk"])),this.__s._$4od$viewControllerForNavigationObject.call(this,e)},_stateStoreIdForContainer:function(e,t){for(var n="",i=0,r=t.length;i<r;i++)n+=":"+e[t[i]];return n},_consumeAndUpdateNavigationObjectForInstance:function(e,t){var n=this,i=arguments;n.__s._$4uh$_consumeAndUpdateNavigationObjectForInstance.apply(n,i)},_updateSidebarSelection:B.h({inputs:["sidebarViewController.containerListViewController","sidebarViewController.containerListViewController.isAttached","sidebarIsOpen","currentNavigationViewController.container"],callback:function(e,t,n,i){if(e&&t&&n){if(e.clearSelection(),i){var r=L.n().cplSystemContainersMap,a=i.isAllPhotosAlbum?r.get(J$.PredefinedName.MOMENTS):i;e.selectContainer(a)}e.update()}}}),_maintainInsets:B.h("primaryViewController.content","sidebarViewController.view.finalRetractedWidth","sidebarViewController.view.retractedWidth",G.a.bindingFor("application.toolbarHeight"),(function(e,t,n,i){var r=e&&e.isUIResizeSlow;this.registerInsetLeft("sidebarWidth",r?t:n),this.registerInsetTop("toolbarHeight",i)})),__superMap:{_$4b9$navigateTo:"navigateTo",_$4od$viewControllerForNavigationObject:"viewControllerForNavigationObject",_$4uh$_consumeAndUpdateNavigationObjectForInstance:"_consumeAndUpdateNavigationObjectForInstance"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MainViewController"}});function tz(e){var t;switch(e.recordName){case J$.ROOT_RECORD_NAME:case J$.PredefinedName.MOMENTS:return{routeName:"moments"};case J$.PredefinedName.DELETED:t="deleted";break;case J$.PredefinedName.PHOTOS:t="allPhotos";break;default:t=e.isFolder?"folder":"album"}if("CMM_SHARE"!==e.type)return{routeName:t,options:{container:e}}}var nz=P.a.extend({isCapable:H.d({readOnly:!0,defaultValue:function(){return!!f.useTranslucency&&(document.body||document.createElement("div")).style.hasOwnProperty("webkitBackdropFilter")}})}).create(),iz=yt.a.extend({action:function(){nz.isCapable&&document.body.classList.add("translucency-capable")},staticMembers:{__QUALIFIED_CLASS_NAME__:"UIInitializer"}}),rz={mixinDependencies:[zn],eventsToReport:H.d(F.b({ckRetryCount:qn.REPORT_ALL}))},az={derivativeRequest:qn.REPORT_ALL,derivativeNontranscoderBackgroundRequest:qn.REPORT_ALL,derivativeNontranscoderForegroundRequest:qn.REPORT_ALL};new Set([].concat(XC.b,Object.keys(XC.d),["Unknown"])).forEach((function(e){az["derivativeTranscoderForegroundRequestFrom"+e]=qn.REPORT_ALL,az["derivativeTranscoderBackgroundRequestFrom"+e]=qn.REPORT_ALL})),Jp.a.items.forEach((function(e){az["derivativeRequestFrom"+e.value]=qn.REPORT_ALL}));var sz={mixinDependencies:[zn],eventsToReport:H.d(F.b(Object.assign({invalidDerivativeInfo:qn.REPORT_ALL,cvwsRequestFailure:qn.REPORT_ALL},az,{cvws:qn.REPORT_ALL,"cvws.3xx":qn.REPORT_ALL,"cvws.4xx":qn.REPORT_ALL,"cvws.5xx":qn.REPORT_ALL,"cvws.timeout":qn.REPORT_ALL})))},oz={mixinDependencies:[zn,{mixinDependencies:[zn],eventsToReport:H.d(F.b({fileUpload:qn.REPORT_ALL,fileUploadValid:qn.REPORT_ALL,fileUploadRequestSent:qn.REPORT_ALL,fileUploadReadError:qn.REPORT_ALL,fileUploadExifFailure:qn.REPORT_ALL,uploadFileLarge:qn.REPORT_ALL,fileUploadAbortCount:qn.REPORT_ALL,fileUploadFilenameValidation:qn.REPORT_ALL,fileUploadBadRequestError:qn.REPORT_ALL,fileUploadPCSError:qn.REPORT_ALL,fileUploadInternalError:qn.REPORT_ALL,fileUploadBadGatewayError:qn.REPORT_ALL,fileUploadServiceUnavailableError:qn.REPORT_ALL,fileUploadUnknownError:qn.REPORT_ALL}))},sz,rz,cC,Ql],eventsToReport:H.d(F.b({iCPLstat:qn.REPORT_ONCE,appDidStart:qn.REPORT_ONCE,momentsPhotoCount:qn.REPORT_ONCE,dragDropInsideApp:qn.REPORT_ONCE,timeToLoad1:qn.REPORT_ONCE,timeToLoad10:qn.REPORT_ONCE,timeToLoad100:qn.REPORT_ONCE,CouldNotLoadCloudKitJS:qn.REPORT_ONCE,cloudKitJSLoadedAfterRetries:qn.REPORT_ONCE,cloudKitJSLoadedButBroken:qn.REPORT_ONCE,containerPageViewed:qn.REPORT_ALL,createNewAlbumOrFolder:qn.REPORT_ALL,itemsAddedToAlbum:qn.REPORT_ALL,cmmShareInitiated:qn.REPORT_ALL,numFilesUploaded:qn.REPORT_ALL,recentlyDeletedCountFetchError:qn.REPORT_ALL,downloadEvent:qn.REPORT_ALL,assetCopierFailed:qn.REPORT_ALL,assetCopierRequestFailed:qn.REPORT_ALL,assetCopierSuccess:qn.REPORT_ALL,assetCopierTimeToProgress:qn.REPORT_ALL,videoPlayerError:qn.REPORT_ALL,videoPlayerStart:qn.REPORT_ALL,videoPlayerReload:qn.REPORT_ALL,videoPlaybackTiming:qn.REPORT_ALL,livePhotoPlayback:qn.REPORT_SUM,livePhotoExtraPlayback:qn.REPORT_SUM,oneUpViewed:qn.REPORT_SUM,staticHlsJsLoadSuccess:qn.REPORT_SUM,staticHlsJsLoadFailure:qn.REPORT_SUM,requestInfo:qn.REPORT_ALL}))},lz=Yn.extend(oz,{isInCloudOS:V.b(di.bindingFor("isInCloudOS")),doNotReportStat:V.b({dependencies:["isInCloudOS"],readOnly:!0,get:Object.assign((function(){return!this.isInCloudOS}),{__CW__getter:function(e,t,n,i){return!i.internalGet(this,t[0+n])}})}),coskService:V.b({dependencies:["isInCloudOS"],readOnly:!0,get:Object.assign((function(){if(this.isInCloudOS)return ve.a.cloudOSService}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return ve.a.cloudOSService}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosFeedbackService"}}),cz=Uf.a.extend({token:Uf.c({type:String,readOnly:!0}),tokenTTL:Uf.c({type:Number,readOnly:!0}),databasePartition:Uf.c({type:String,readOnly:!0}),lastUpdatedTime:Uf.c({type:Number,readOnly:!0}),updateToken:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=this.getDataHash();n.token=e,n.lastUpdatedTime=t},staticMembers:{__QUALIFIED_CLASS_NAME__:"AnonymousPublicAccess"}}),uz=n(482),dz=Uf.a.extend({mixinDependencies:[qS.a,YS.a,uz.a],staticMembers:{findAllByZonePK:function(e){return this.findAll().filter((function(t){return t.zonePK===e}))},findByZonePK:function(e){var t=this.findAllByZonePK(e);if(t.length>0)return t.objectAt(0)},getDataValuesFromServiceValues:function(){var e=this,t=arguments,n=e.__s._$ZE$getDataValuesFromServiceValues.apply(e,t),i=n.zonePK;void 0===i&&(n.zonePK=NU.a.getZoneIdString(n.zoneID));var r=n.anonymousPublicAccess;return void 0!==r&&void 0===r.lastUpdatedTime&&(r.lastUpdatedTime=Date.now()),n},load:function(e){return this.performOperation(L.d.READ.LOAD,e)},__superMap:{_$ZE$getDataValuesFromServiceValues:"getDataValuesFromServiceValues"},__QUALIFIED_CLASS_NAME__:"RecordInfo"},shortGUID:Object(Qt.c)({isPrimaryKey:!0,type:String,getDataValueFromServiceValue:function(e){return e.value}}),containerIdentifier:Object(Qt.c)({type:String}),databaseScope:Object(Qt.c)({type:String}),anonymousPublicAccess:Object(Qt.d)({type:cz,embedded:!0}),rootRecord:Object(Qt.c)(),share:Object(Qt.c)(),environment:Object(Qt.c)(),zoneID:Object(qt.f)({readOnly:!0,type:NU.a}),zonePK:Uf.c({readOnly:!0,type:String})}),hz=Uf.a.extend({mixinDependencies:[YS.a],staticMembers:{fetchChanges:function(e){return this.performOperation("fetchChanges",e)},__QUALIFIED_CLASS_NAME__:"Database"},scope:Uf.c({isPrimaryKey:!0,readOnly:!0}),syncToken:Object(Qt.c)({readOnly:!0}),zones:zt.a.toMany({readOnly:!0,strong:!0,type:jd.Zone}),fetchChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.constructor.fetchChanges(Object.assign({},e,{scope:this.scope,syncToken:this.syncToken}))}}),pz=we.b("iCloudWeb.Data.CKDatabaseType",(function(e){e("Public"),e("Private"),e("Shared")})),fz=P.a.extend({environment:null,containerIdentifier:null,databaseType:null,partition:null,services:null,databaseInstance:H.d({readOnly:!0,get:function(){var e=this._databaseInstance;if(e)return e;var t=this.containerIdentifier,n=this.databaseType,i=window.CloudKit.getContainer(t);return n===pz.Public?e=i.publicCloudDatabase:n===pz.Private?e=i.privateCloudDatabase:n===pz.Shared?e=i.sharedCloudDatabase:_.b("DatabaseSupport - Invalid database type: %{database}",{database:e}),this._databaseInstance=e}}),bootstrapConfiguration:H.d({readOnly:!0,get:function(){var e=this.partition,t={containers:[{containerIdentifier:this.containerIdentifier,environment:this.environment,privateDatabasePartition:e,publicDatabasePartition:e,sharedDatabasePartition:e}]},n=this.services;return n&&(t.services=n),t}}),init:function(e){var t=this,n=arguments;t.__s._$1VO$init.apply(t,n);var i=this.bootstrapConfiguration;window.CloudKit||_.b("CloudKit.js is missing"),window.CloudKit.configure(i)},_databaseInstance:null,__superMap:{_$1VO$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKDatabase"}}),gz=function(e){e||_.b("CKPromise must be called with a resolver function.");var t=Z.a.create();return e(t.resolve.bind(t),t.reject.bind(t)),t};gz.all=function(e){return Z.a.all(e)},gz.race=function(e){return Z.a.race(e)},gz.reject=function(e){return Z.a.reject(e)},gz.resolve=function(e){return Z.a.resolve(e)};var mz={removeDataByStoreIds:function(e){if(!(e&&Array.isArray(e)&&e.length>0&&Number.isSafeInteger(e[0])))throw new _.a("DataManager#removeDataByStoreIds: storeIds must be an array of store ID numbers.",{dataManager:this});for(var t,n=lP.a.create(),i=L.n(),r=i._persistenceStore,a=0,s=e.length;a<s;a++)t=e[a],n.recordChange(_z(t,r));return this.merge(n).then(this.didRemoveData.bind(this,n)).then((function(){for(var t,n=i._changes||[],r=0,a=e.length;r<a;r++){t=e[r];for(var s=void 0,o=0,l=n.length;o<l;o++)(s=n.objectAt(o)).storeId===t&&(i._commitChange(s),n.removeAt(r))}}))}};function _z(e,t){var n=Me.a(t.readData(e));return t.deleteData(e),cP.a.create(e,n,null)}var vz=n(797);function bz(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var yz=globalThis.CloudKit,wz=P.a.extend(B.b,{method:kn.a.POST,requestPath:V.b({readOnly:!0,dependencies:["scope"],get:Object.assign((function(){var e=this.scope,t=L.n().getDatabaseForScope(e);return t.partition+"/database/1/"+t.containerIdentifier+"/"+t.environment+"/private/internal/records/query/batch?parallel=true"}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=L.n().getDatabaseForScope(r);return a.partition+"/database/1/"+a.containerIdentifier+"/"+a.environment+"/private/internal/records/query/batch?parallel=true"}})}),scope:V.b(null),queries:k.c(Array),addQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t,{query:e});return this.queries.push(n),this},commit:function(){return this.send()},send:function(){var e=this.queries,t={credentials:"include",body:{batch:e},headers:{"Content-Type":"text/plain"},method:kn.a.POST};return this.fetch(this.requestPath,t).then(function(e){return function(t){return t.json().then((function(t){return t.batch.map((function(t,n){return new Iz(e[n],t)}))}))}}(e))},fetch:function(e,t){return hn.a(im)(L.n().getCustomCloudKitUrlFromUrl(e),t)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKBatchRequest"}}),Iz=function(){function e(e,t){this.query=e.query,this._ckResponse=t,this.continuationMarker=t.continuationMarker;var n=[],i=[],r=function(e){return yz&&yz.CKError&&yz.CKError.isErrorObject(e)};r(t)?i.push(yz.CKError.fromServerError(t)):t.records.forEach((function(e){r(e)?i.push(yz.CKError.fromServerError(e)):n.push(e)})),this._errors=i,this._results=n,this.desiredKeys=e.desiredKeys,this.resultsLimit=e.resultsLimit,this.zoneID=e.zoneID,this.numbersAsStrings=e.numbersAsStrings||!1,this.zoneWide=e.zoneWide}var t,n;return t=e,(n=[{key:"isQueryResponse",get:function(){return!0}},{key:"isRecordResponse",get:function(){return!0}},{key:"records",get:function(){return this._results}},{key:"errors",get:function(){return this._errors}},{key:"hasErrors",get:function(){return this.errors.length>0}},{key:"moreComing",get:function(){return Boolean(this.continuationMarker)}}])&&bz(t.prototype,n),e}(),Sz=P.a.extend({successHandler:null,errorHandler:null,scope:null,db:H.d({readOnly:!0,get:function(){var e=L.n().getDatabaseForScope(this.scope).databaseInstance;if(!e)throw new _.a("No CK DB!");return e}}),chain:function(e){if("batchRequest"===e)this._chain=wz.create({scope:this.scope});else{var t;this._chain=this._chain||this.db;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this._chain=(t=this._chain)[e].apply(t,i)}return this},send:function(e){var t=this._chain||this.db;this._chain=null;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t[e].apply(t,i).then(this.successHandler).catch(this.errorHandler)},staticMembers:{__QUALIFIED_CLASS_NAME__:"CKRequestWrapper"}}),Cz=n(268);function Ez(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Az={ingestDatabaseChangesResponse:function(e){return(t=regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u,d,h,p,f,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.zones,i=n.length,r=[],a=[],s=0;s<i;s++)o=n[s],l=jd.Zone.getPrimaryKey(o.zoneID),c=jd.Zone.getDataValuesFromServiceValues(o,Object.assign({},jd.Zone.getDataHashForPrimaryKey(l),{scope:e.scope,database:e.scope})),r.push(c),a.push(c.pk);return u=L.n(),t.next=8,u.loadData(jd.Zone,r,!1);case 8:return d=hz.find(e.scope),h=d.getDataHash(),p=hz.getDataValuesFromServiceValues({syncToken:e.syncToken}),f=p.syncToken,g=Object.assign({},h,{syncToken:f,zones:[].concat(a)}),u.loadData(hz,g,!1),t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){Ez(a,i,r,s,o,"next",e)}function o(e){Ez(a,i,r,s,o,"throw",e)}s(void 0)}))})();var t}},Oz=vz.a.extend({mixinDependencies:[Cz.a,Az],staticMembers:{makeFinalAttemptToFindExistingModelForDeletion:U.a,ingestResponse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isRecordZoneChangesResponse,n=L.n();if(e.isRecordsResponse){var i=e.records,r=e.httpResponse.body.syncToken,a=e.zoneID,s=void 0===a?e.request.getBody().zoneID:a,o=jd.Zone.findByZoneID(s);i&&i.length&&Oz.ingestRecords(o.pk,i,t),r&&s&&o===n.cplZoneID&&o.syncToken!==r&&(u.b.debug("Detected old syncToken; Triggering update."),n.update())}else if(e.isRecordZoneChangesResponse)for(var l=e.zones,c=function(e,t){var i=l[e],r=i.zoneID,a=i.syncToken,s=i.records,o=jd.Zone.findByZoneID(r);if(o===n.cplZoneID)return"continue";o.syncToken!==a&&o.updateSyncToken(a),Oz.ingestRecords(o.pk,s,!0),i.moreComing&&X.a((function(){return n.update(r)}),500)},d=0,h=l.length;d<h;d++)c(d,h);else e.isDatabaseChangesResponse?this.ingestDatabaseChangesResponse(e):_.b("Unable to ingest response, unrecognized response type");return e},ingestRecords:function(e,t,n){t.length&&(n?Oz._ingestRecordsForChangesResponse(e,t):Oz._ingestRecordsForRead(e,t))},_ingestRecordsForRead:function(e,t){for(var n={},i=0,r=t.length;i<r;i++){var a=t[i],s=a.recordType;(n[s]||(n[s]=[])).push(a)}var o=L.n(),l=jd.Zone.find(e).zoneID,c=function(t){if(!n.hasOwnProperty(t))return"continue";var i=n[t],r=Kt.Record.getModelClassForRecordType(t);if(r&&r.isSerializableModel){var a=i.map((function(t){return r.getDataValuesFromServiceValues(t,{zone:e,zoneID:l})}));o.loadData(r,a,!0)}else u.b.warn("BaseHandler#ingestRecords(): Unhandled incoming records: recordType="+t)};for(var d in n)c(d)},_ingestRecordsForChangesResponse:function(e,t){var n=L.n();Pe.a.pause();for(var i=0,r=t.length;i<r;i++){var a=t[i],s=a.recordName,o=Kt.Record.getPrimaryKeyWithZonePK(e,s),l=void 0,c=void 0,d=void 0;if(a.deleted){if(d=n.findModelFromRecordNameOnly(e,s),this.deletedModels&&!d){for(var h=void 0,p=0;p<this.deletedModels.length;p++){var f=this.deletedModels[p];f.recordName===s&&(h=f,this.deletedModels.splice(p,1))}d=h}if(!d){var g=this.makeFinalAttemptToFindExistingModelForDeletion();g&&(d=g)}if(!d){u.b.debug("Ignoring untracked change record recordName="+s);continue}c=d.constructor;var m=d.recordType;l=void 0===m?c.CK_RECORD_TYPE:m}else{if(l=a.recordType,!(c=Kt.Record.getModelClassForRecordType(l))){u.b.warn("Ignoring "+l+" change: "+s);continue}d=c.find(o)}var _=tP.a(c,n.operationHandlers);if(void 0!==_&&"function"===typeof _.ingestChange){var v=void 0;if(!a.deleted){var b=jd.Zone.find(e),y=c.getDataValuesFromServiceValues(a,{zone:e,zoneID:b.zoneID});if(d){var w=Object.assign({},d.getDataHash(),y);v=c.createFromDataHash(w)}else n.loadData(c,y,!0),v=c.find(o)}var I=a.created,S=a.modified,C="object"==typeof I&&"number"==typeof I.timestamp&&"object"==typeof S&&"number"==typeof S.timestamp&&I.timestamp===S.timestamp;if(d&&d.storeStatus!==jo.b.CLEAN){var E=n.readOriginalData(d._cwStoreId),A=E&&c.createFromDataHash(E);sc.f(A,this,"BaseHandler: originalModel"),_.ingestChange(v,A,C,a),sc.e(A,this,"BaseHandler: originalModel")}else _.ingestChange(v,d,C,a);if(d)if(v){v.retain(this,"BaseHandler: model");var O=!c.areLoadDataCallsAlwaysComplete;n.loadData(c,v.getDataHash(),O),v.release(this,"BaseHandler: model")}else a.deleted&&(d.retain(this,"BaseHandler: model"),d.release(this,"BaseHandler: model"))}else u.b.error("No ingestChange handler recordType="+l)}Pe.a.resume()},__QUALIFIED_CLASS_NAME__:"BaseHandlerOperationHandler"},shouldIngestChangesOnResponse:!1,shouldIngestChangesAsChangeSet:!1,ckRequest:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CloudKit.DatabaseScope.PRIVATE,i=e.context,r=void 0===i?{}:i,a=r.scope,s=void 0===a?n:a;return Sz.create({successHandler:function(n){return t._handleSuccess(n,e)},errorHandler:function(n){return t.handleError(n,e)},scope:s})},baseCKOptions:function(e){return{atomic:!0,zoneID:e}},_handleSuccess:function(e,t){var n=this.processResponseErrors(e);return n?this.handleError(n,t):(this.shouldIngestChangesOnResponse&&this.constructor.ingestResponse(e,this.shouldIngestChangesAsChangeSet),e)},processResponseErrors:function(e){var t=e.errors;if(t&&t.length>0)return t[0]}}),Tz={BaseHandlerOperationHandler:Oz,defaultZone:V.b({strong:!0,type:jd.Zone}),_updatePromise:null,update:function(e){var t=this;if(this._updatePromise)return this._updatePromise;var n=L.n(),i=e?jd.Zone.findByZoneID(e):n.defaultZone;return i?this._updatePromise=i.fetchRecordZoneChanges().then(this.BaseHandlerOperationHandler.ingestResponse).finally((function(){t._updatePromise=null})):Z.a.resolve()}},Mz=we.b("CPLSubscriptionState",{NOT_SET:"NOT_SET",LISTENING:"LISTENING",FAILED:"FAILED"}),Dz=Mz,Pz=Oz.extend({handlesType:"createSubscription",action:function(e){var t=this,n=L.n();return this.ckRequest(e).send("fetchAllSubscriptions").then((function(i){var r=i.subscriptions;if(!(r&&r.length&&r.filter(Lz).length))return t._createSubscription(e);n.subscriptionState=Dz.LISTENING}))},_createSubscription:function(e){var t=L.n(),n={subscriptionType:"zone",zoneID:this.baseCKOptions().zoneID};return this.ckRequest(e).send("saveSubscriptions",n).then((function(){return t.subscriptionState=Dz.LISTENING})).catch((function(){return t.subscriptionState=Dz.FAILED}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"CreateSubscriptionOperationHandler"}});function Lz(e){return e.subscriptionType&&"zone"===e.subscriptionType}var Rz={mixinDependencies:[Tz],operationHandlers:F.b([Pz]),changesetMode:V.b($t.NONE),isUserIdle:V.b(!1),startup:function(){var e=this,t=this,n=t.__s._$IH$startup?t.__s._$IH$startup.apply(this,arguments):void 0;return(n||Z.a.resolve()).then((function(){return e._setupChangesetListening()}))},subscriptionState:V.b({defaultValue:Mz.NOT_SET,didChange:function(e){e===Mz.LISTENING&&this._setupCloudKitPush()}}),shouldListenForChangesets:V.b({readOnly:!0,dependencies:["changesetMode"],get:Object.assign((function(){return this.changesetMode!==$t.NONE}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])!==$t.NONE}})}),_maintainChangesetListening:B.h("isUserIdle",(function(){this.shouldListenForChangesets&&this.startupDidComplete&&this.resetUpdater()})),_setupChangesetListening:function(){var e=$t;switch(this.changesetMode){case e.POLL:u.b.debug("CK4CW: polling for changesets."),this.resetUpdater();break;case e.PUSH:u.b.debug("CK4CW: manual push changeset listening setup."),this._hasSetupPush=!0,this.resetUpdater();break;case e.CLOUDKIT_PUSH:this._hasSetupPush||this.performOperation("createSubscription");break;case e.NONE:default:u.b.debug("CK4CW: NOT listening for changesets.")}},_setupCloudKitPush:function(){var e=this;if(!this._hasSetupPush){u.b.debug("CK4CW: setting up CloudKit push notifications...");var t=globalThis.CloudKit.getDefaultContainer();t.registerForNotifications(),t.addNotificationListener((function(){u.b.debug("CK4CW: CloudKit.js push notification"),e.update()})),this._hasSetupPush=!0,this.resetUpdater(),u.b.debug("CK4CW: CloudKit push notifications setup.")}},update:function(e){var t=this;return this.__s._$1Cx$update.call(this,e).finally((function(){t.shouldListenForChangesets&&t.resetUpdater()}))},_updateInterval:H.d({get:function(){return this.isUserIdle?Pu.changesetIntervalWhileIdle:this._hasSetupPush?Pu.changesetIntervalWithPush:Pu.changesetIntervalWithoutPush}}),_hasSetupPush:!1,_updaterTimer:null,isUpdaterEnabled:V.b(!1),enableUpdater:function(){return u.b.debug("CK4CW: changeset polling reset to every "+this._updateInterval/1e3+"secs"),this._updaterTimer||(this._updaterTimer=pn(this.update.bind(this),this._updateInterval)),this.isUpdaterEnabled=!0},disableUpdater:function(){return this._updaterTimer=globalThis.clearInterval(this._updaterTimer),this.isUpdaterEnabled=!1},resetUpdater:function(){this.shouldListenForChangesets&&this.startupDidComplete&&(this._updaterTimer&&this.disableUpdater(),this.enableUpdater())},__superMap:{_$IH$startup:"startup",_$1Cx$update:"update"}};function xz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Nz=vz.a.extend({mixinDependencies:[Cz.a,Az],handlesType:"fetchChanges",action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context,a=i.scope,s=i.syncToken,t.next=3;break;case 3:o=L.n(),l=o.getDatabaseForScope(a).databaseInstance,c={_results:[],syncToken:s},t.prev=6;case 7:return t.next=9,l.fetchDatabaseChanges(c);case 9:if((u=t.sent).hasErrors)for(d=0;d<u.errors.length;d++)h=u.errors[d],r.handleError(h,e,n);c=r._mergeResponses(c,u);case 12:if(!0===u.moreComing){t.next=7;break}case 13:return c.scope=a,t.abrupt("return",r.ingestDatabaseChangesResponse(c));case 17:return t.prev=17,t.t0=t.catch(6),t.abrupt("return",r.handleError(t.t0,e,n));case 20:case"end":return t.stop()}}),t,null,[[6,17]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){xz(a,n,r,s,o,"next",e)}function o(e){xz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},_mergeResponses:function(e,t){var n=t._results;return t._results=e._results.concat(n),t},staticMembers:{__QUALIFIED_CLASS_NAME__:"DatabaseFetchChangesOperation"}}),Fz=vz.a.extend({handlesType:hz,nestedOperationHandlers:[Nz.create()],staticMembers:{__QUALIFIED_CLASS_NAME__:"DatabaseOperations"}});function Vz(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return kz(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kz(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Bz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var jz=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:return a=L.n(),s=a.sharedDatabase.databaseInstance,t.prev=5,o=s._container,t.next=9,o.fetchRecordInfos(i);case 9:if((l=t.sent).hasErrors)for(c=0;c<l.errors.length;c++)u=l.errors[c],r.handleError(u,e,n);for(d=[],h=Vz(l.results);!(p=h()).done;)f=p.value,g=dz.getDataValuesFromServiceValues(f),d.push(g);return t.next=15,a.loadData(dz,d,!1);case 15:return m=t.sent,_=Array.isArray(m)?m:m.storeIds,t.abrupt("return",Ac.a.createFromStoreIds(_,dz,a));case 20:return t.prev=20,t.t0=t.catch(5),t.abrupt("return",r.handleError(t.t0,e,n));case 23:case"end":return t.stop()}}),t,null,[[5,20]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Bz(a,n,r,s,o,"next",e)}function o(e){Bz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordInfoLoadOperation"}}),Uz=vz.a.extend({handlesType:dz,nestedOperationHandlers:[jz].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordInfoOperations"}});function Gz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Hz=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.WRITE.CREATE,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.context,a=i.primaryKey,s=i.newData,o=s.scope,l=L.n(),c=l.getDatabaseForScope(o).databaseInstance,t.prev=4,u=jd.Zone.getZoneNameFromPrimaryKey(a),t.next=8,c.saveRecordZones(u);case 8:if((d=t.sent).hasErrors)for(h=0;h<d.errors.length;h++)p=d.errors[h],r.handleError(p,e,n);for(f=[],g=0;g<d.zones.length;g++)m=d.zones[g],_=jd.Zone.getDataValuesFromServiceValues(m,{scope:o}),f.push(_);return t.abrupt("return",l.loadData(jd.Zone,f,!1));case 15:return t.prev=15,t.t0=t.catch(4),t.abrupt("return",r.handleError(t.t0,e,n));case 18:case"end":return t.stop()}}),t,null,[[4,15]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Gz(a,n,r,s,o,"next",e)}function o(e){Gz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneCreateOperation"}});function Wz(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return $z(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$z(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Kz=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.WRITE.DESTROY,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,v,b,y,w,I,S,C,E,A,O,T,M,D,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.context.primaryKeys,a=L.n(),o=Wz(i);!(l=o()).done;)c=l.value,(u=jd.Zone.find(c,a))||_.b("Invalid Zone PK"),(d=u.scope)||_.b("No scope found for Zone"),s&&s!==d&&_.b("Cannot delete Zones with different scopes"),s=d;t.next=6;break;case 6:return h=a.getDatabaseForScope(s),p=h.databaseInstance,t.prev=7,f=i.map(jd.Zone.getPartsFromPrimaryKey),t.next=11,p.deleteRecordZones(f);case 11:if(g=t.sent,m=g.zones,v=g.hasErrors,b=g.errors,v)for(y=Wz(b);!(w=y()).done;)I=w.value,r.handleError(I,e,n);for(S=[],C=Wz(m);!(E=C()).done;)A=E.value,O=A.zoneID,T=jd.Zone.getPrimaryKeyFromParts(O),M=a.constructor.getStoreIdForPrimaryKey(jd.Zone,T),D=Kt.Record.getAllRecordsByClassForZonePK(T,a),P=Object.values(D).reduce(qz,[]),S.push.apply(S,[M].concat(P));return t.abrupt("return",a.removeDataByStoreIds(S));case 21:return t.prev=21,t.t0=t.catch(7),t.abrupt("return",r.handleError(t.t0,e,n));case 24:case"end":return t.stop()}}),t,null,[[7,21]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){zz(a,n,r,s,o,"next",e)}function o(e){zz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneDeleteOperation"}});function qz(e,t){return e.push.apply(e,t.storeIds),e}function Qz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Yz=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context,a=i.primaryKeys,s=i.scope,o=void 0===s?CloudKit.DatabaseScope.PRIVATE:s,t.next=3;break;case 3:t.next=5;break;case 5:return l=a.map((function(e){return{ownerRecordName:jd.Zone.getOwnerRecordNameFromPrimaryKey(e),zoneName:jd.Zone.getZoneNameFromPrimaryKey(e)}})),c=L.n(),u=c.getDatabaseForScope(o).databaseInstance,t.prev=8,t.next=11,u.fetchRecordZones(l);case 11:if((d=t.sent).hasErrors)for(h=0;h<d.errors.length;h++)p=d.errors[h],r.handleError(p,e,n);for(f=[],g=0;g<d.zones.length;g++)m=d.zones[g],_=jd.Zone.getDataValuesFromServiceValues(m,{scope:o}),f.push(_);return t.next=17,c.loadData(jd.Zone,f,!1);case 17:return v=t.sent,b=Array.isArray(v)?v:v.storeIds,y=Ac.a.createFromStoreIds(b,jd.Zone,c),t.abrupt("return",y);case 23:return t.prev=23,t.t0=t.catch(8),t.abrupt("return",r.handleError(t.t0,e,n));case 26:case"end":return t.stop()}}),t,null,[[8,23]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Qz(a,n,r,s,o,"next",e)}function o(e){Qz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneLoadOperation"}});function Zz(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Xz=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.READ.LIST,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.scope,a=void 0===i?CloudKit.DatabaseScope.PRIVATE:i,t.next=3;break;case 3:return s=L.n(),o=s.getDatabaseForScope(a).databaseInstance,t.prev=5,t.next=8,o.fetchAllRecordZones();case 8:if((l=t.sent).hasErrors)for(c=0;c<l.errors.length;c++)u=l.errors[c],r.handleError(u,e,n);if(l.isRecordZonesResponse){t.next=12;break}throw new _.a("Expected Record Zone Response");case 12:for(d=[],h=0;h<l.zones.length;h++)p=l.zones[h],f=jd.Zone.getDataValuesFromServiceValues(p,{scope:a}),a===CloudKit.DatabaseScope.SHARED&&(f.syncToken=void 0),d.push(f);return t.next=16,s.loadData(jd.Zone,d,!1);case 16:return g=t.sent,m=Array.isArray(g)?g:g.storeIds,(v=s.getZonesForScope(a)).encodedRawSplice.apply(v,[0,v.length].concat(m)),s.updateZonesLoadedTimeForScope(a),t.abrupt("return",v);case 24:return t.prev=24,t.t0=t.catch(5),t.abrupt("return",r.handleError(t.t0,e,n));case 27:case"end":return t.stop()}}),t,null,[[5,24]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Zz(a,n,r,s,o,"next",e)}function o(e){Zz(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneListOperation"}}),Jz=n(798);function eK(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function tK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function nK(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){tK(a,i,r,s,o,"next",e)}function o(e){tK(a,i,r,s,o,"throw",e)}s(void 0)}))}}var iK={isRecordZoneChangesResponse:!0,zones:[]},rK=vz.a.extend({mixinDependencies:[Cz.a],handlesType:"fetchRecordZoneChanges",shouldThrowMaxRetryFatalError:!1,retryRequest:function(){var e=arguments,t=this;return nK(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t,r=e,n.prev=1,n.next=4,i.__s._$LZ$retryRequest.apply(i,r);case 4:return a=n.sent,n.abrupt("return",a);case 8:if(n.prev=8,n.t0=n.catch(1),!(n.t0 instanceof Jz.a)){n.next=12;break}return n.abrupt("return",iK);case 12:throw n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,8]])})))()},action:function(e,t,n){var i=this;return nK(regeneratorRuntime.mark((function t(){var r,a,s,o,l,c,u,d,h,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.context,a=r.zonePK,s=eK(r,["zonePK"]),t.next=3;break;case 3:return o=jd.Zone.find(a),l=o.scope,c=o.zoneID,u=L.n(),d=u.getDatabaseForScope(l).databaseInstance,t.prev=7,t.next=10,d.fetchRecordZoneChanges(Object.assign({},s,{zoneID:c}));case 10:if((h=t.sent).hasErrors)for(p=0;p<h.errors.length;p++)f=h.errors[p],i.handleError(f,e,n);return t.abrupt("return",h);case 15:return t.prev=15,t.t0=t.catch(7),t.abrupt("return",i.handleError(t.t0,e,n));case 18:case"end":return t.stop()}}),t,null,[[7,15]])})))()},__superMap:{_$LZ$retryRequest:"retryRequest"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneRecordChangesOperation"}}),aK=n(802);function sK(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return oK(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oK(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function lK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function cK(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){lK(a,i,r,s,o,"next",e)}function o(e){lK(a,i,r,s,o,"throw",e)}s(void 0)}))}}var uK=vz.a.extend({handlesType:"fetchRecords",action:function(e,t,n){var i=this;return cK(regeneratorRuntime.mark((function t(){var r,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.context,a=r.recordNames,s=r.recordClassNames,o=r.zonePK,l=r.scope,c=NU.a.getFromZonePK(o),u=L.n(),d=u.getDatabaseForScope(l).databaseInstance,t.prev=6,t.next=9,d.fetchRecords(a,{zoneID:c});case 9:if(!(h=t.sent).hasErrors){t.next=19;break}p=sK(h.errors);case 12:if((f=p()).done){t.next=19;break}if(g=f.value,!i._ignorableErrors(g.ckErrorCode)){t.next=16;break}return t.abrupt("return",!1);case 16:return t.abrupt("return",i.handleError(g,e,n));case 17:t.next=12;break;case 19:m=h.syncToken,_=sK(h.records);case 21:if((v=_()).done){t.next=33;break}b=v.value,y=sK(s);case 24:if((w=y()).done){t.next=31;break}if(I=w.value,b.recordType!==I.CK_RECORD_TYPE){t.next=29;break}return i._ingestRecord(u,I,b,o,c,m),t.abrupt("break",31);case 29:t.next=24;break;case 31:t.next=21;break;case 33:return t.abrupt("return",!0);case 36:if(t.prev=36,t.t0=t.catch(6),!i._ignorableErrors(t.t0.ckErrorCode)){t.next=40;break}return t.abrupt("return");case 40:return t.abrupt("return",i.handleError(t.t0,e,n));case 41:case"end":return t.stop()}}),t,null,[[6,36]])})))()},_ingestRecord:function(e,t,n,i,r,a){return cK(regeneratorRuntime.mark((function s(){var o;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=t.getDataValuesFromServiceValues(n,{zone:i,zoneID:r,recordChangeTag:a}),s.next=3,e.loadData(t,o,!1);case 3:case"end":return s.stop()}}),s)})))()},_ignorableErrors:function(e){var t=CloudKit.CKError;return e===t.ZONE_NOT_FOUND||e===t.NOT_FOUND},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneFetchRecordsOperation"}}),dK=vz.a.extend({handlesType:jd.Zone,nestedOperationHandlers:[Hz,Kz,Yz,Xz,rK,aK.a,uK].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneOperations"}});function hK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var pK=vz.a.extend({handlesType:L.d.WRITE.CREATE,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.context,r=L.n(),a=r.privateDatabase.databaseInstance,delete(s=Object.assign({},i)).itemsTotalEstimate,delete s._temporaryJobID,t.prev=6,t.next=9,a.startAssetCopierJob(s);case 9:return o=t.sent,l=r.constructor.getStoreIdForPrimaryKey(JS,i._temporaryJobID),r.constructor.setPrimaryKeyForStoreId(l,o.jobID),c=JS.getDataValuesFromServiceValues(o,Object.assign({},s,{status:ZS.SUBMITTED.value,itemsProcessed:0,itemsTotalEstimate:i.itemsTotalEstimate})),t.next=15,r.loadData(JS,c,!1);case 15:return t.abrupt("return",JS.find(o.jobID).retain().autorelease());case 18:return t.prev=18,t.t0=t.catch(6),u=i._temporaryJobID,r.loadData(JS,{jobID:u,status:ZS.FAILED.value},!0),t.abrupt("return",n.handleError(t.t0,u));case 23:case"end":return t.stop()}}),t,null,[[6,18]])})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){hK(a,i,r,s,o,"next",e)}function o(e){hK(a,i,r,s,o,"throw",e)}s(void 0)}))})()},handleError:function(e,t){var n=L.n().feedbackService;if(n&&n.report){var i=JS.find(t);n.report("assetCopierRequestFailed",{endpoint:"jobStart",message:e.message,workflowSource:i&&i.workflowSource})}},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobCreateOperation"}});function fK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var gK=vz.a.extend({handlesType:L.d.READ.LOAD,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:if(!(r=i[0]).startsWith("temporaryJobID-")){t.next=6;break}return t.abrupt("return");case 6:return a=L.n(),s=a.privateDatabase.databaseInstance,o=JS.findByPrimaryKeys(i),(l=o.objectAt(0))&&(l.countOfStatusCalls+=1),t.prev=11,t.next=14,s.checkAssetCopierJobStatus({jobID:r});case 14:return c=t.sent,u=JS.getDataHashForPrimaryKey(r),d=JS.getDataValuesFromServiceValues(c,Object.assign({},u)),a.loadData(JS,d,!1),t.abrupt("return",o);case 21:return t.prev=21,t.t0=t.catch(11),l&&(l.countOfFailedStatusCalls+=1,l.countOfFailedStatusCalls>=5&&a.loadData(JS,{jobID:r,status:ZS.FAILED.value},!0)),t.abrupt("return",n.handleError(t.t0,l));case 25:case"end":return t.stop()}}),t,null,[[11,21]])})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){fK(a,i,r,s,o,"next",e)}function o(e){fK(a,i,r,s,o,"throw",e)}s(void 0)}))})()},handleError:function(e,t){var n=L.n().feedbackService;n&&n.report&&n.report("assetCopierRequestFailed",{endpoint:"jobStatus",message:e.message,workflowSource:t&&t.workflowSource})},staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobLoadOperation"}}),mK=vz.a.extend({handlesType:JS,nestedOperationHandlers:[pK,gK].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"RecordCopierJobOperations"}});function _K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vK=function(){for(var e,t=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return _K(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_K(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(document.scripts);!(e=t()).done;){var n=e.value.src;if(n.endsWith("/cloudkit.js"))return n}return null}(),bK=we.b("CloudKitJSStatus",{LOADED:"loaded",LOADED_VIA_RETRY:"retried",LOADED_BUT_BROKEN:"broken",FAILED_TO_LOAD:"failed"});function yK(){return"string"!==typeof vK&&_.b("CloudKit.js script tag not found."),globalThis.CloudKit?Z.a.resolve({status:bK.LOADED}):function(){var e=1,t=Z.a.create();return function n(){if(globalThis.CloudKit)t.resolve({status:bK.LOADED_VIA_RETRY,retries:e});else{var i=document.createElement("script");i.type="text/javascript",Ze.a(i,"load",(function(){globalThis.CloudKit?t.resolve({status:bK.LOADED_VIA_RETRY,retries:e}):t.reject({status:bK.LOADED_BUT_BROKEN,retries:e})})),Ze.a(i,"error",(function(r){document.body.removeChild(i),++e>5?t.reject({status:bK.FAILED_TO_LOAD,err:r}):n()})),document.body.appendChild(i),i.src=vK+"?"+Date.now()}}(),t}()}function wK(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return IK(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IK(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function IK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function SK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function CK(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){SK(a,i,r,s,o,"next",e)}function o(e){SK(a,i,r,s,o,"throw",e)}s(void 0)}))}}var EK=[{test:function(e){return e.includes("/singleFileUpload")},redact:function(e){return"[REDACTED]"+e.substring(e.indexOf("/singleFileUpload"))}}],AK={mixinDependencies:[mz,YD,{linkModel:function(e,t,n){var i=this,r=arguments,a=i.__s._$9n$linkModel.apply(i,r);if(e.isInitialized&&void 0===t){var s=e._cwStoreId;"number"===typeof s&&this.notifyModelClassThatStoreItemDidChange(e.constructor,e._cwStoreId,!1)}return a},didRemoveData:function(e){for(var t=this,n=arguments,i=t.__s._$Ny$didRemoveData.apply(t,n),r=e.storeIds,a=0,s=r.length;a<s;a++){var o=r[a],l=this.constructor.getModelClassForStoreId(o);this.notifyModelClassThatStoreItemDidChange(l,o,!0)}return i},didLoadData:function(e){for(var t=this,n=arguments,i=t.__s._$ZY$didLoadData.apply(t,n),r=0,a=e.length;r<a;r++){var s=e.objectAt(r);if(null!==s.diff){var o=s.storeId,l=this.constructor.getModelClassForStoreId(o);this.notifyModelClassThatStoreItemDidChange(l,o,!1)}}return i},_fastBulkLoadedStoreIdsToNotify:[],loadData:function(e,t,n){var i=this,r=this,a=arguments,s=r.__s._$tX$loadData.apply(r,a);if("function"!==typeof this.persistenceDataDidUpdate)return s;var o=[].concat(this._fastBulkLoadedStoreIdsToNotify);return this._fastBulkLoadedStoreIdsToNotify.length=0,s.finally((function(t){for(var n=0,r=o.length;n<r;n++){var a=o[n];i.notifyModelClassThatStoreItemDidChange(e,a,!1)}return t}))},persistenceDataDidUpdate:function(e,t){var n=this,i=arguments,r=n.__s._$1EA$persistenceDataDidUpdate.apply(n,i);return null!==t&&this._fastBulkLoadedStoreIdsToNotify.push(e),r},notifyModelClassThatStoreItemDidChange:function(e,t,n){"function"===typeof e.storeItemDidChange&&e.storeItemDidChange(t,n)},__superMap:{_$9n$linkModel:"linkModel",_$Ny$didRemoveData:"didRemoveData",_$ZY$didLoadData:"didLoadData",_$tX$loadData:"loadData",_$1EA$persistenceDataDidUpdate:"persistenceDataDidUpdate"}},Rz],feedbackService:V.b({report:function(e,t){return u.b.debug("FakeFeedback: "+e,t)}}),isStartupEnsuringCloudKitJS:!0,cloudKitJsScriptInfo:void 0,startup:function(){var e=arguments,t=this;return CK(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=t).__s._$os$startup){n.next=4;break}return n.next=4,i.__s._$os$startup.apply(t,e);case 4:if(!t.isStartupEnsuringCloudKitJS){n.next=17;break}return n.prev=5,n.next=8,yK();case 8:t.cloudKitJsScriptInfo=n.sent,t.onCloudKitJsScriptLoaded(),n.next=17;break;case 12:throw n.prev=12,n.t0=n.catch(5),t.cloudKitJsScriptInfo=n.t0,t.onCloudKitJsScriptFailed(),n.t0;case 17:case"end":return n.stop()}}),n,null,[[5,12]])})))()},onCloudKitJsScriptLoaded:function(){var e=this.cloudKitJsScriptInfo,t=e.status,n=e.retries,i=globalThis.CloudKit.VERSION;switch(t){case bK.LOADED_VIA_RETRY:this.feedbackService.report("cloudKitJSLoadedAfterRetries",{retries:n}),u.b.info("CloudKit.js (v"+i+") successfully loaded after "+n+" retries.");break;case bK.LOADED:default:u.b.info("CloudKit.js (v"+i+") successfully loaded via external script tag.")}},onCloudKitJsScriptFailed:function(){var e=this.cloudKitJsScriptInfo,t=e.status,n=e.retries;switch(e.err,t){case bK.LOADED_BUT_BROKEN:this.feedbackService.report("cloudKitJSLoadedButBroken",{retries:n});break;case bK.FAILED_TO_LOAD:default:this.feedbackService.report("CouldNotLoadCloudKitJS")}this.notifyUserCloudKitJSIsUnavailable()},notifyUserCloudKitJSIsUnavailable:function(){throw new _.a("CloudKit.js is missing")},userRecordName:V.b(),isRecordOwnedByCurrentUser:function(e){var t=this.userRecordName;return void 0!==t&&Gd.a(e,"zoneID.ownerRecordName")===t},operationHandlers:F.b([Fz,Uz,dK,mK].map((function(e){return e.create()}))),ckEnvironment:V.b(Pu.bindingFor("ckEnvironment")),ckContainerId:V.b(Pu.bindingFor("ckContainerId")),apnsEnvironment:V.b(Pu.bindingFor("apnsEnvironment")),serviceUrl:V.b({defaultValue:function(){return function(e){if(void 0!==e)return e.endsWith("/")?e.substring(0,e.length-1):e}(lr("ckdatabasews"))}}),_databases:V.b({readOnly:!0,dependencies:["serviceUrl","apnsEnvironment","ckEnvironment","ckContainerId"],get:Object.assign((function(){var e=this,t=this.apnsEnvironment,n=this.ckContainerId,i=this.ckEnvironment,r=this.serviceUrl,a=pz;return[a.Public,a.Private,a.Shared].map((function(a){return fz.create({apnsEnvironment:t,environment:i,containerIdentifier:n,databaseType:a,partition:r,services:{Promise:gz,fetch:e.ckFetch.bind(e)}})}))}),{__CW__getter:function(e,t,n,i){var r=this,a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[3+n]),o=i.internalGet(this,t[2+n]),l=i.internalGet(this,t[0+n]),c=pz;return[c.Public,c.Private,c.Shared].map((function(e){return fz.create({apnsEnvironment:a,environment:o,containerIdentifier:s,databaseType:e,partition:l,services:{Promise:gz,fetch:r.ckFetch.bind(r)}})}))}})}),_fetchMechanism:hn.a(im),isCloudKitUrlPrivate:function(e){return e.includes("/"+this.ckEnvironment+"/private/")},ckFetch:function(e){var t=arguments,n=this;return CK(regeneratorRuntime.mark((function i(){var r,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(r=t.length>1&&void 0!==t[1]?t[1]:{},a=n.serviceUrl,s=n.getCustomCloudKitUrlFromUrl(e),o=j.a.create(s).retain().autorelease(),l=o.pathname,c=!1,u=0;d=EK[u];u++)d.test(l)&&(c=!0,l=d.redact(l));if(c&&(r.reportingPathname=l),"string"!==typeof(p=r.body)||void 0===(f=JSON.parse(p))||void 0===(g=f.zoneID||f.sourceZoneID)||void 0===(m=dz.findByZonePK(jd.Zone.getPrimaryKey(g)))||void 0===(h=m.anonymousPublicAccess)){i.next=20;break}if("string"!==typeof(_=h.token)){i.next=18;break}if(v=h.lastUpdatedTime+h.tokenTTL,!(Date.now()>=v)){i.next=16;break}return i.next=15,m.reload();case 15:return i.abrupt("return",n.ckFetch(e,r));case 16:b=s.includes("?")?"&":"?",s=""+s+b+"publicAccessAuthToken="+_;case 18:"string"===typeof(y=h.databasePartition)&&"string"===typeof a&&a.length>0&&s.startsWith(a)&&(s=y+s.slice(a.length));case 20:return i.next=22,n._fetchMechanism(s,r);case 22:return w=i.sent,void 0!==h&&"string"===typeof(I=w.headers["X-CloudKit-PublicAccess-AuthToken"])&&h.updateToken(I),i.abrupt("return",w);case 25:case"end":return i.stop()}}),i)})))()},publicDatabase:V.b({readOnly:!0,dependencies:["_databases"],get:Object.assign((function(){return this._databases[0]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[0]}})}),privateDatabase:V.b({readOnly:!0,dependencies:["_databases"],get:Object.assign((function(){return this._databases[1]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[1]}})}),sharedDatabase:V.b({readOnly:!0,dependencies:["_databases"],get:Object.assign((function(){return this._databases[2]}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])[2]}})}),getDatabaseForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDatabase;case i:return this.privateDatabase;case r:return this.sharedDatabase;default:throw new _.a("Invalid CloudKit DatabaseScope: "+e)}},publicDbZones:V.b({readOnly:!0,defaultValue:function(){return Ac.a.create([],jd.Zone)}}),publicDbZonesLoadedTime:null,privateDbZones:V.b({readOnly:!0,defaultValue:function(){return Ac.a.create([],jd.Zone)}}),privateDbZonesLoadedTime:null,sharedDbZones:V.b({readOnly:!0,defaultValue:function(){return Ac.a.create([],jd.Zone)}}),sharedDbZonesLoadedTime:null,getCustomCloudKitUrlFromUrl:function(e){var t=e,n=this.isCloudKitUrlPrivate(e),i=e.includes("?");return t.includes("getCurrentSyncToken=")||(t+=i?"&":"?",t+="getCurrentSyncToken="+n,i=!0),this.serviceUrl&&!t.includes("remapEnums=")&&(t+=i?"&":"?",t+="remapEnums=true"),t},getZonesForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDbZones;case i:return this.privateDbZones;case r:return this.sharedDbZones;default:throw new _.a("Invalid CloudKit DatabaseScope: "+e)}},getZonesLoadedTimeForScope:function(e){var t=CloudKit.DatabaseScope,n=t.PUBLIC,i=t.PRIVATE,r=t.SHARED;switch(e){case n:return this.publicDbZonesLoadedTime;case i:return this.privateDbZonesLoadedTime;case r:return this.sharedDbZonesLoadedTime;default:throw new _.a("Invalid CloudKit DatabaseScope: "+e)}},updateZonesLoadedTimeForScope:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=CloudKit.DatabaseScope,i=n.PUBLIC,r=n.PRIVATE,a=n.SHARED;switch(e){case i:this.publicDbZonesLoadedTime=t;break;case r:this.privateDbZonesLoadedTime=t;break;case a:this.sharedDbZonesLoadedTime=t;break;default:throw new _.a("Invalid CloudKit DatabaseScope: "+e)}},findNestedOperationHandlerForOperation:function(e){var t=this.findHandlerForOperation(e);if(t){var n=e.operation;return n?tP.a(n.type,t.nestedOperationHandlers):t}},findModelFromRecordNameOnly:function(e,t){for(var n=Kt.Record.getPrimaryKeyWithZonePK(e,t),i=Kt.Record.recordModelClasses,r=0,a=i.length;r<a;r++){var s=i[r].find(n);if(s)return s}},dataDidChangeForPrimaryKeys:function(e){return this._last_ddcfpk_mapOfSetsByModelClass=this._uniteMapsOfSetsByModelClass(this._last_ddcfpk_mapOfSetsByModelClass,e),this.__s._$5yN$dataDidChangeForPrimaryKeys.call(this,this._last_ddcfpk_mapOfSetsByModelClass)},peekModel:function(e,t){if(e&&t)return this._materializedModels[this.constructor.getStoreIdForPrimaryKey(e,t)]||void 0},_clear_last_ddcfpk_mapOfSetsByModelClass:B.h("dataDidChangeForPrimaryKeys",(function(){this._last_ddcfpk_mapOfSetsByModelClass=void 0})),_uniteMapsOfSetsByModelClass:function(){for(var e=new Map,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var s=a[r];if(s)for(var o,l=wK(s.entries());!(o=l()).done;){var c=o.value,u=c[0],d=c[1],h=e.get(u)||new Set;h.size||e.set(u,h);for(var p,f=wK(d);!(p=f()).done;){var g=p.value;h.add(g)}}}return e},__superMap:{_$os$startup:"startup",_$5yN$dataDidChangeForPrimaryKeys:"dataDidChangeForPrimaryKeys"}},OK=Oz.extend({staticMembers:{makeFinalAttemptToFindExistingModelForDeletion:function(e,t){if(hr.a.isWellFormedRecordName(e))return hr.a.findOrCreatePlaceholder(t)},__QUALIFIED_CLASS_NAME__:"BaseHandlerOperationHandler"}});function TK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var MK=OK.extend({handlesType:L.d.WRITE.BULK,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context.changes.filter(PK);if(0===t.length)return Z.a.resolve();var n=t.objectAt(0).model,i=n.zoneID,r=(n.zone,n.zone.scope);t.models.toArray().map((function(e){return e.pk}));for(var a=this.baseCKOptions(i),s=[],o=0;o<t.length;o++){var l=t.objectAt(o).modelClass;-1===s.indexOf(l)&&s.push(l)}for(var c=[],u=0;u<s.length;u++)s[u].serviceKeys.forEach((function(e){-1===c.indexOf(e)&&c.push(e)}));a.desiredKeys=c;var d=t.filter(RK),h=t.filter(xK),p=t.filter(LK),f=[];if(d.length>0){var g=this.ckRequest(e,r).chain("newRecordsBatch",a);d.forEach((function(e){var t=e.model,n=e.diff,i=n.added,r=n.updated,a=[].concat(i,r);if(0!==a.length){var s=t.getServiceValuesFromDataValues(a);g.chain("create",s)}})),f.push(g.send("commit"))}if(h.length>0){var m=this.ckRequest(e,r).chain("newRecordsBatch",a);h.forEach((function(e){var t=e.model,n=e.diff,i=n.added,r=n.updated,a=[].concat(i,r);if(0!==a.length){var s=t.getServiceValuesFromDataValues(a);m.chain("update",s)}})),f.push(m.send("commit"))}if(p.length>0){var _=p.map((function(e){return e.originalData.recordName})),v=[];p.forEach((function(e){return v.push(e.model)})),this.deletedModels=v;var b=this.ckRequest(e,r).send("deleteRecords",_.toArray(),a);f.push(b)}return Z.a.all(f)},ingestChangesOnResponse:function(e){var t=this,n=arguments;return e.records.every((function(e){return e.deleted}))?e:t.__s._$1Jl$ingestChangesOnResponse.apply(t,n)},handleError:function(e,t){var n=this,i=arguments;if(!this.handleOverQuotaError(e,t))return n.__s._$1OV$handleError.apply(n,i)},handleOverQuotaError:function(e,t){if(e&&e.ckErrorCode===window.CloudKit.CKError.QUOTA_EXCEEDED&&t.context&&t.context.changes&&t.context.changes.every(DK)){for(var n,i=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return TK(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TK(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.context.changes);!(n=i()).done;){var r=n.value.model;L.n().resetData(r.constructor.getStoreIdForPrimaryKey(r.pk)),r.propertyChanged("isDeleted")}return!0}},__superMap:{_$1Jl$ingestChangesOnResponse:"ingestChangesOnResponse",_$1OV$handleError:"handleError"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BulkHandlerOperationHandler"}});function DK(e){if(!e)return!1;var t=e.diff,n=e.newData,i=e.model;return!!(pi.a(i,pr.a)&&t&&t.updated&&1===t.updated.length&&"isDeleted"===t.updated[0]&&n&&!1===n.isDeleted)}function PK(e){var t=e.modelClass;return t===eC.a||t===pr.a||t===jt.a||t===hr.a}function LK(e){var t=function(e){return e.changeType===cP.a.DESTROY}(e);if(t&&e.modelClass===hr.a){var n=e.originalData.containerId,i=n&&!jt.a.isSystemAlbumRecordName(n);if(!i){var r=L.n().feedbackService,a=L.n().FeedbackErrorType;a&&r&&r.reportError({errorType:a.SYSTEM_ALBUM_ACTION.value})}return i}return t}function RK(e){var t,n=function(e){return!e.model.recordChangeTag&&e.changeType!==L.d.WRITE.DESTROY}(e);if(n&&(e.modelClass===hr.a||e.modelClass===jt.a)){var i="CPLContainerRelation"===(t=e.newData).recordType?t.containerId:"CPLAlbum"===t.recordType?t.recordName:null,r=i&&!jt.a.isSystemAlbumRecordName(i);if(!r){var a=L.n().feedbackService,s=L.n().FeedbackErrorType;a&&s&&a.reportError({errorType:s.SYSTEM_ALBUM_ACTION.value})}return r}return n}function xK(e){var t=function(e){var t=e.model;return Boolean(t.recordChangeTag)}(e);if(t&&e.modelClass===jt.a){var n=function(e){return"CPLAlbum"===e.recordType?e.recordName:null}(e.newData),i=n&&!jt.a.isSystemAlbumRecordName(n);if(!i){var r=L.n().feedbackService,a=L.n().FeedbackErrorType;r&&a&&r.reportError({errorType:a.SYSTEM_ALBUM_ACTION.value})}return i}return t}function NK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FK(e){var t="function"===typeof Map?new Map:void 0;return(FK=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return VK(e,arguments,jK(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),BK(i,e)})(e)}function VK(e,t,n){return(VK=kK()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&BK(r,n.prototype),r}).apply(null,arguments)}function kK(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function BK(e,t){return(BK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jK(e){return(jK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UK=function(e){var t,n;function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request error",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=e.call(this)||this,Object.setPrototypeOf(NK(t),i.prototype),t.type=Ut.INDEXING_STATE_ERROR,t.state=n,t.progress=r,t}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,BK(t,n),i}(FK(Error)),GK=Kt.Record.extend({staticMembers:{CK_RECORD_TYPE:"CheckIndexingState",__QUALIFIED_CLASS_NAME__:"IndexingState"},state:qt.j(Gt,{readOnly:!0}),progress:qt.e({readOnly:!0}),error:qt.e({readOnly:!0})});function HK(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var WK=function(e){var t=e.state,n=void 0===t?Gt.UNKNOWN:t,i=e.progress;if(n!==Gt.FINISHED)throw new UK(n.value,i)},$K=OK.extend({handlesType:L.d.READ.LIST,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.zonePK,t.next=3;break;case 3:return r=jd.Zone.find(i),a={recordType:GK.CK_RECORD_TYPE},s=n.baseCKOptions(r.zoneID),t.next=8,n.ckRequest(e,r.scope).send("performQuery",a,s);case 8:if(o=t.sent,l=o.records,c=l[0]){t.next=12;break}return t.abrupt("return");case 12:return d=GK.getDataValuesFromServiceValues(c,{zone:i}),h=GK.createFromDataHash(d),L.n().indexingState=h,WK(h),u.b.debug("INIT: CPL CheckIndexingState: state="+h.state),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){HK(a,i,r,s,o,"next",e)}function o(e){HK(a,i,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexingStateListOperation"}}),zK=vz.a.extend({handlesType:GK,nestedOperationHandlers:[$K].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"IndexingStateOperations"}}),KK={bulkFilterPredicate:function(e){var t=e.operation.type;return L.d.WRITEBULK===t},processBulkRequests:function(e){for(var t=this,n=Pu.maxOperationsInSingleRequest,i=0;i<e.length;i++){var r=e[i];if((r.operation.operation||r.operation).type===L.d.WRITEBULK){var a=r.changes,s=a.filter(QK),o=a.filter(YK),l=a.filter(qK);if(this._verifySingleType(s,o,l)){if(a.length>n){for(var c=[],u=void 0,d=0;d<a.length;d++){u||(u=lP.a.create());var h=a.objectAt(d);u.recordChange(h),u.length===n&&(c.push(u),u=void 0)}return u&&c.push(u),this.splitAndSendTransactions(r,c)}this.sendTransaction(r)}else{var p=function(){var e=[];return[s,o,l].forEach((function(t){if(t.length>0){var n=lP.a.create();t.forEach((function(e){n.recordChange(e)})),e.push(n)}})),{v:t.splitAndSendTransactions(r,e)}}();if("object"===typeof p)return p.v}}}return!1},_verifySingleType:function(e,t,n){var i=0;return[e,t,n].forEach((function(e){e.length>0&&i++})),!(i>1)},splitAndSendTransactions:function(e,t){var n=[];return t.forEach((function(e){var t=pP.create({changes:e,operation:e.get("operation")});n.push(t)})),this.addTransactions(n),this.removeTransaction(e),Z.a.all(n).then((function(t){e.complete(t)}),(function(t){e.fail(t)})),!0}};function qK(e){return e.changeType===L.d.WRITE.DESTROY}function QK(e){var t=e.model;return t&&!t.recordChangeTag&&e.changeType!==L.d.WRITE.DESTROY}function YK(e){var t=e.model;return!!t&&Boolean(t.recordChangeTag)}var ZK=n(325),XK=n(230),JK={burstListFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===pP.PENDING&&t.type===fr.a&&n&&n.type===XK.a.Media.BurstList},processBurstList:function(e,t){for(var n=[].concat(e,t).map((function(e){return e._burstOrigData})),i=0,r=e.length;i<r;i++){var a=eq(e[i]);if(this.isBurstTransactionDuplicate(n,a))this.removeTransaction(a);else if(this.splitBurstListTransactionIfOversized(a))return!0}return e.sort(this.pendingTimeSortComparator).forEach(this.sendTransaction.bind(this)),!1},isBurstTransactionDuplicate:function(e,t){if(t._isBurstSplit)return!1;var n=t._burstOrigData;return e.indexOf(n)>-1},splitBurstListTransactionIfOversized:function(e){if(e._isBurstSplit)return!1;var t=ZK.MediaListOperationHandler.itemsMax,n=e.operation.operation.context,i=n.parentMediaPK,r=n.first,a=n.last;if(Math.abs(a-r)+1<=t)return!1;for(var s=fr.a.find(i),o=[],l=(t-1)*(r<=a?1:-1),c=r;c<=a;){var u=c+l;u>a&&(u=a);var d=s.loadBurstMediasForRange(c,u);d._burstOrigData=e._burstOrigData,d._isBurstSplit=!0,o.push(d),c=u+1}return this.removeTransaction(e),Z.a.all(o).then((function(){var t=s.burstMedias._array.slice(r,a+1),n=Ac.a.createFromStoreIds(t,fr.a);return e.complete(n)})).catch(e.fail.bind(e)),!0}};function eq(e){if(e._burstOrigData)return e;var t=e.operation.operation.context,n=t.burstId,i=t.first,r=t.last;return e._burstOrigData=n+":"+i+":"+r,e}var tq={delayableOperationsFilterPredicate:function(e){return tq._getTransactionDelay(e)>0},processDelayableOperations:function(e){var t=this;return 0!==e.length&&e.reduce((function(e,n){return Math.max(t._getTransactionDelay(n,!0),e)}),0)},_getTransactionDelay:function(e){var t,n=e.operation,i=L.n().findNestedOperationHandlerForOperation(n);if(!(i instanceof Object&&(t=i.constructor)instanceof Object&&"function"===typeof t.getIsDelayable))return-1;if(!t.getIsDelayable(n))return-1;var r=t.getDelay(n);if(r<=0)return-1;var a=Date.now()-n._pendTime;return Math.max(r-a,0)}},nq={MASTER_ASSET_DEBOUNCE_TIME:500,masterAssetFilterPredicate:function(e){return e.operation.type===pr.a||e.operation.type===eC.a},processMastersOrAssets:function(e){var t=this,n={},i=!1;e.sort(this.pendingTimeSortComparator);for(var r=function(r,a){var s=e[r],o=s.operation,l=o.operation.context.model,c=l&&l.getPrimaryKey(),u=o.operation.context.diff;if(!1===u)return s.complete(),"continue";if(!u&&"LOAD"===o.operation.type.name)return t.sendTransaction(s),"continue";var d=u.added,h=u.removed,p=u.updated,f=c+":"+[].concat(d,h,p).sort().join(","),g=n[f];if(g)g.then((function(e){return s.complete(e),e})),t.removeTransaction(s);else{n[f]=s;var m=Date.now();s._masterAssetSendTime||(s._masterAssetSendTime=m+t.MASTER_ASSET_DEBOUNCE_TIME),m>s._masterAssetSendTime?t.sendTransaction(s):i=!0}},a=0,s=e.length;a<s;a++)r(a);return i}},iq={maxActiveMedia:5,mediaListFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===pP.PENDING&&t.type===fr.a&&n&&n.type===L.d.READ.LIST},processMedia:function(e,t){if(0===e.length)return!1;var n=ZK.MediaListOperationHandler.itemsMax;e.sort(this.pendingTimeSortComparator);for(var i=0,r=e.length;i<r;i++){var a=e[i],s=a.operation,o=s.operation;if(o&&o.type===L.d.READ.LIST){if(this.shrinkMediaListRangeIfFulfilled(a,e,t),s._removeTime){e.splice(i,1),i--,r--;continue}if(this.splitMediaListRangeIfOversized(a,n),s._removeTime)return!0}}e.sort(this.pendingTimeSortComparator);for(var l=0,c=e.length;l<c;l++){var u=e[l];this.sendTransaction(u)}return!1},splitMediaListRangeIfOversized:function(e,t){var n=e.operation,i=n.operation.context,r=i.containerPK,a=i.queryType,s=i.first,o=i.last,l=i.limit,c=i.hydrationLevel;if(a&&a!==ZK.MediaListOperationHandler.QueryType.RANK)return e;if(Math.max(l||0,Math.abs(o-s)+1)<=t)return e;for(var u=n._pendTimeOriginal||n._pendTime,d=[],h=(t-1)*(s<=o?1:-1),p=s;p<=o;){var f=p+h;f>o&&(f=o);var g=fr.a.list({containerPK:r,first:p,last:f,hydrationLevel:c});g.operation._pendTimeOriginal=u,d.push(g),p=f+1}return this.removeTransaction(e),Z.a.all(d).then((function(){return e.complete()}),(function(t){return e.fail(t)}))},shrinkMediaListRangeIfFulfilled:function(e,t,n){var i=e.operation,r=i.operation.context,a=r.containerPK,s=r.queryType,o=r.first,l=r.last,c=r.limit,u=r.hydrationLevel;if(s&&s!==ZK.MediaListOperationHandler.QueryType.RANK)return e;for(var d,h,p=Math.max(c||0,Math.abs(l-o)+1),f=u.value,g=o<=l?1:-1,m=o,_=l,v=p,b=jt.a.findOrCreatePlaceholder(a).medias,y=[],w=[];v>0&&(h=b.storeIdForObjectAt(m))>=0&&(d=b.store.readData(h),f<=fr.a.HydrationLevel[d.hydrationLevel].value);)y.push(h),m+=g,v--;for(;v>0&&(h=b.storeIdForObjectAt(_))>=0&&(d=b.store.readData(h),f<=fr.a.HydrationLevel[d.hydrationLevel].value);)w.push(h),_-=g,v--;if(v>0)for(var I=m<_?m:_,S=m<_?_:m,C=[].concat(n,t),E=0,A=C.length;E<A;E++){var O=C[E];if(O!==e){var T=O.operation;if(T&&T.type===fr.a){var M=T.operation;if(M&&M.type===L.d.READ.LIST){var D=M.context;if(D.containerPK===a){var P=D.queryType;if(!P||P===ZK.MediaListOperationHandler.QueryType.RANK){var R=D.first,x=D.last,N=R<x?R:x,F=R<x?x:R,V=N<=I&&I<=F,k=N<=S&&S<=F;if(V&&!k?(m=I=F+1,_=S):k&&!V&&(m=I,_=S=N-1),(V||k)&&i._pendTimeOriginal>T._pendTimeOriginal&&(T._pendTimeOriginal=i._pendTimeOriginal),V&&k||I>S)return this.removeTransaction(e),O.then(e.complete.bind(e))}}}}}}return 0===v?(this.removeTransaction(e),e.complete()):(v!==p&&(r.first=m,r.last=_),e)}};function rq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var aq={mergeableOperationsFilterPredicate:function(e){var t=e.operation,n=L.n().findNestedOperationHandlerForOperation(t);return e.status===pP.PENDING&&n instanceof Object&&"function"===typeof n.constructor.merge},processMergeableOperations:function(e){for(var t=this._groupTransactionsByType(e),n=0,i=Object.keys(t);n<i.length;n++){var r=t[i[n]];this._mergeAndSendTransactions(r)}return!1},_groupTransactionsByType:function(e){for(var t,n=L.n(),i={},r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return rq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rq(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(t=r()).done;){var a=t.value,s=n.findNestedOperationHandlerForOperation(a.operation).constructor.name,o=i[s];o||(o=[],i[s]=o),o.push(a)}return i},_mergeAndSendTransactions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==e.length){for(var n=L.n(),i=[],r=e[t],a=r.operation,s=n.findNestedOperationHandlerForOperation(a),o=s.constructor,l=e.length,c=t;!o.isOperationMergeable(a)&&c<l;)i.push(r),a=(r=e[++c]).operation;for(c+=1;c<l;c++){var u=e[c],d=u.operation,h=o.isOperationMergeable(d)&&o.isOperationPairMergeable(a,d);if(r.storeIds.length>=Pu.maxOperationsInSingleRequest)break;var p=h&&o.merge(a,d);p?(this.removeTransaction(u),r.then(u.complete.bind(u),u.fail.bind(u))):i.push(u)}this.sendTransaction(r);for(var f=0,g=i;f<g.length;f++){var m=g[f];this.sendTransaction(m)}c<l&&this._mergeAndSendTransactions(e,c)}}},sq={_currentBatchTransactions:k.c(wc.a),_processBatchTransactions:function(e,t,n,i,r){for(var a=!1,s=0,o=0,l=e.length;o<l;o++){var c=e[o];if(c.__isBatch)Date.now()-c.operation._pendTimeOriginal>r&&(u.b.debug("Batch timeout reached, sending batch..."),this.sendBatchTransaction(c),s++);else{var d=this.getBatchTransaction(t,n),h=d||this.createBatchTransaction(t,n);d||(a=!0);var p=h.operation.operation.context._coalescedTransactions;p.push(c),this.removeTransaction(c),p.length>=i&&(u.b.debug("Batch limit reached, sending batch..."),this.sendBatchTransaction(h))}}return 0===s&&(a=!0),a},getBatchTransaction:function(e,t){return this._currentBatchTransactions.get(t)},createBatchTransaction:function(e,t){var n=e.performOperation(t,{_coalescedTransactions:[]});return n.__isBatch=!0,n.then(this.completeInFlightBatchTransactions.bind(this,n)),this._currentBatchTransactions.set(t,n),n},sendBatchTransaction:function(e){var t=e.operation.operation,n=t.context,i=t.type,r=n._coalescedTransactions;0===r.length?this.removeTransaction(e):this.sendTransaction(e)?u.b.debug("sending "+i.fullName+": "+r.length+" coalesced requests"):u.b.debug(i.fullName+" transaction queued... "+r.length+" coalesced requests"),e===this._currentBatchTransactions.get(i)&&this._currentBatchTransactions.delete(i)},completeInFlightBatchTransactions:function(e,t){var n=e.operation.operation.context._coalescedTransactions;t.forEach((function(e,t){var i=n[t];e.then((function(e){return i.complete(e)})).catch((function(e){return i.fail(e)}))}))}},oq={mixinDependencies:[B.b],isAppReadOnly:function(){var e=L.n();return e&&e.readOnly},initTransactionFiltering:function(e){this.numTransactionsCKJS=0,this.writeOnWireCKJS=this.recordCopierJobStoppingWrites,this.recordCopierJobStoppingWrites||this._processActiveTransactions(e)},_processActiveTransactions:function(e){var t=this;e.forEach((function(e){t.isCKJSTransaction(e)&&(t.numTransactionsCKJS++,t.isWriteTransaction(e)&&(t.writeOnWireCKJS=!0))}))},isRecordCopierJobCreate:function(e){return!!this.isWriteTransaction(e)&&e.operation.type===JS},isWriteTransaction:function(e){var t=e.operation,n=t.type;return t.operation&&(n=t.operation.type),"string"!==typeof n&&L.d.WRITE.contains(n)},isReadTransaction:function(e){var t=e.operation,n=t.type;return t.operation&&(n=t.operation.type),"string"===typeof n||n===XK.a.Container.CountItemsInIndex||L.d.READ.contains(n)},isCKJSTransaction:function(e){var t=e.operation.type;if("string"===typeof t)return"getZoneInfo"===t;if(t===L.d.WRITEBULK){var n=e.changes.objectAt(0);n&&(t=n.modelClass)}return t===fr.a||t===JS||Rf.a(t,Kt.Record)},shouldSendInReadOnlyMode:function(e){return this.isReadTransaction(e)},sendTransaction:function(e){var t=this,n=arguments;if(this.isAppReadOnly()&&!this.shouldSendInReadOnlyMode(e))return this.removeTransaction(e),u.b.warn("dropping write transaction while in read-only mode"),!1;var i=!0;return this.isCKJSTransaction(e)&&(i=this._shouldSendCJKSTransaction(e)),i&&t.__s._$1Ze$sendTransaction.apply(t,n),i},_shouldSendCJKSTransaction:function(e){if(this.numTransactionsCKJS>=this.maxActive)return!1;if(this.isWriteTransaction(e)){if(this.writeOnWireCKJS)return!1;if(this.isRecordCopierJobCreate(e)){var t=e.operation.operation.context._temporaryJobID;this.recordCopierJobInProgress=JS.find(t)}return this.writeOnWireCKJS=!0,this.numTransactionsCKJS++,!0}return this.numTransactionsCKJS++,!0},recordCopierJobInProgress:V.b(),recordCopierJobStoppingWrites:V.b({readOnly:!0,dependencies:["recordCopierJobInProgress","recordCopierJobInProgress.jobStatus"],get:Object.assign((function(){var e=this.recordCopierJobInProgress;if(!e)return!1;var t=e.jobStatus,n=WS,i=n.COMPLETED,r=n.FAILED;return t!==i&&t!==r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return!1;var a=r.jobStatus,s=WS,o=s.COMPLETED,l=s.FAILED;return a!==o&&a!==l}}),didChange:function(e){e||(this.recordCopierJobInProgress=void 0)}}),__superMap:{_$1Ze$sendTransaction:"sendTransaction"}},lq=function(){function e(){}var t=e.prototype;return t.init=function(e,t,n){return this.pending=e,this.active=t,this.context=n,this._reprocessDelay=-1,this},t.next=function(e,t){var n=this.pending;if(n.length>0){var i;if(t){var r=wV(n,t);i=r[0],this.pending=r[1]}else i=n;if(i.length>0){var a=e.call(this.context,i,this.active);"number"===typeof a?a>=0&&a>this._reprocessDelay&&(this._reprocessDelay=a):!0===a&&this._reprocessDelay<0&&(this._reprocessDelay=0)}}return this},t.reprocess=function(e){this._reprocessDelay>=0&&(e.call(this.context,this._reprocessDelay),this._reprocessDelay=-1)},e}(),cq={keyMediaFilterPredicate:function(e){var t=e.operation,n=t.operation;return e.status===pP.PENDING&&t.type===fr.a&&(n&&n.type===XK.a.Media.LoadKey||n&&n.type===XK.a.Media.BatchLoadKey)},KEY_MEDIA_BATCH_SIZE:10,KEY_MEDIA_BATCH_WAIT_TIME:50,processKeyMedia:function(e){return this._processBatchTransactions(e,fr.a,XK.a.Media.BatchLoadKey,this.KEY_MEDIA_BATCH_SIZE,this.KEY_MEDIA_BATCH_WAIT_TIME)}},uq={mixinDependencies:[B.b],progressTrackedPendingTransactions:V.b({readOnly:!0,defaultValue:k.c(Wo.b)}),progressTrackedCompletedTransactions:V.b({defaultValue:k.c(Wo.b)}),progress:V.b({readOnly:!0,dependencies:["progressTrackedPendingTransactions.length","progressTrackedCompletedTransactions.length"],get:function(){var e=this.progressTrackedPendingTransactions.length,t=this.progressTrackedCompletedTransactions.length;return 0===e&&0===t?NaN:t/(e+t)}}),_cleanupCompletedTransactions:B.h({inputs:["progress"],callback:function(){1===this.progress&&0===this.progressTrackedPendingTransactions.length&&(this.progressTrackedCompletedTransactions=Wo.b.create())}}),progressReportingFilterPredicate:function(e){return this.isWriteTransaction(e)},transactionWasCompletedOrErrored:function(e){var t=this.progressTrackedPendingTransactions,n=this.progressTrackedCompletedTransactions;t.beginBatchedChanges(),n.beginBatchedChanges(),this._removeTransactionFromList(e)&&n.push(e),t.endBatchedChanges(),n.endBatchedChanges()},addTransaction:function(){var e=this,t=arguments,n=this.progressTrackedPendingTransactions,i=e.__s._$ft$addTransaction.apply(e,t);if(this.progressReportingFilterPredicate(i)){n.push(i);var r=this.transactionWasCompletedOrErrored.bind(this,i);return i.finally(r)}return i},addTransactions:function(){var e=this,t=this,n=this.progressTrackedPendingTransactions;n.beginBatchedChanges();var i=t.__s._$pX$addTransactions.apply(this,arguments).map((function(t){if(e.progressReportingFilterPredicate(t)){n.push(t);var i=e.transactionWasCompletedOrErrored.bind(e,t);return t.finally(i)}return t}));return n.endBatchedChanges(),i},removeTransaction:function(e){var t=this,n=arguments;return this._removeTransactionFromList(e),t.__s._$10I$removeTransaction.apply(t,n)},_removeTransactionFromList:function(e){var t=this.progressTrackedPendingTransactions,n=t.indexOf(e);return-1!==n&&(t.removeAt(n),!0)},__superMap:{_$ft$addTransaction:"addTransaction",_$pX$addTransactions:"addTransactions",_$10I$removeTransaction:"removeTransaction"}},dq=new lq,hq=SP.extend(sq,JK,cq,aq,tq,iq,nq,KK,oq,uq).extend({staticMembers:{getTransactionId:function(e){for(var t=[],n=e.operation;n;n=n.operation){var i=n,r=i.handlesType,a=i.type;r&&t.push(r.name),t.push("string"===typeof a?a:a.name)}return t.join("/")},__QUALIFIED_CLASS_NAME__:"TransactionProcessor"},maxActive:6,process:function(e,t){t.length>=this.maxActive||(this.initTransactionFiltering(t),dq.init(e,t,this).next(this.processDelayableOperations,this.delayableOperationsFilterPredicate).next(this.processMergeableOperations,this.mergeableOperationsFilterPredicate).next(this.processMedia,this.mediaListFilterPredicate).next(this.processKeyMedia,this.keyMediaFilterPredicate).next(this.processMastersOrAssets,this.masterAssetFilterPredicate).next(this.processBurstList,this.burstListFilterPredicate).next(this.processBulkRequests,this.bulkFilterPredicate).next(this.processRemaining).reprocess(this.reprocess))},processRemaining:function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];i.status===pP.PENDING&&(i.operation._removeTime||this.sendTransaction(i))}return!1},addTransaction:function(e){var t=this,n=arguments,i=Date.now(),r=e.operation;return this._pended=(this._pended||(this._pended=0))+1,r._pendId=this._pended,r._pendTime=i,r._pendTimeOriginal||(r._pendTimeOriginal=i),t.__s._$1Y9$addTransaction.apply(t,n)},addTransactions:function(e){for(var t=this,n=arguments,i=Date.now(),r=0,a=e.length;r<a;r++){var s=e[r],o=s.operation;this._pended=(this._pended||(this._pended=0))+1,o._pendId=this._pended,o._pendTime=i,o._pendTimeOriginal||(o._pendTimeOriginal=i)}return t.__s._$1k7$addTransactions.apply(t,n)},sendTransaction:function(e){var t=this,n=arguments;e.operation._sendTime=Date.now();var i=this.constructor.getTransactionId(e);return u.b.debug("TransactionProcessor#sendTransaction: "+i),t.__s._$1si$sendTransaction.apply(t,n)},removeTransaction:function(e){var t=this,n=arguments;return e.operation._removeTime=Date.now(),t.__s._$1z8$removeTransaction.apply(t,n)},reprocess:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Date.now();if(this._reprocessTimer){var r=i-this._reprocessTimerOrigStart;if((e=Math.min(200-r,n))<=0)return;clearTimeout(this._reprocessTimer)}else e=Math.min(200,n),this._reprocessTimerOrigStart=i;this._reprocessTimer=X.a((function(){t._reprocessTimer=null,t._reprocessTimerOrigStart=null,t._process()}),e)},_reprocessTimer:null,_reprocessTimerOrigStart:0,pendingTimeSortComparator:function(e,t){var n=e.operation,i=t.operation;return i._pendTimeOriginal-n._pendTimeOriginal||n._pendId-i._pendId},__superMap:{_$1Y9$addTransaction:"addTransaction",_$1k7$addTransactions:"addTransactions",_$1si$sendTransaction:"sendTransaction",_$1z8$removeTransaction:"removeTransaction"}}),pq=we.b("ZoneAvailabilityType",{HIDDEN:1,PUBLISHED:2,NOT_AVAILABLE:3}),fq=Kt.Record.extend({staticMembers:{CK_RECORD_TYPE:"CPLZoneState",RECORD_NAME:"PrimarySync-0000-ZS",ZoneAvailabilityType:pq,getPrimaryKeyFromParts:function(e){var t=e.zone,n=e.recordName,i=void 0===n?this.RECORD_NAME:n;return this.__s._$Gn$getPrimaryKeyFromParts.call(this,{zone:t,recordName:i})},load:function(e){var t=this,n=arguments;return void 0===e.primaryKeys&&(e.primaryKeys=[this.getPrimaryKeyFromParts({zone:e.zonePK})]),t.__s._$NJ$load.apply(t,n)},__superMap:{_$Gn$getPrimaryKeyFromParts:"getPrimaryKeyFromParts",_$NJ$load:"load"},__QUALIFIED_CLASS_NAME__:"ZoneState"},enabled:qt.b({readOnly:!0}),disabledTime:qt.e({readOnly:!0}),deleteTime:qt.e({readOnly:!0}),availabilityType:qt.j(pq,{readOnly:!0,defaultValue:pq.PUBLISHED})});function gq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var mq=OK.extend({handlesType:L.d.READ.LOAD,shouldIngestChangesOnResponse:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:return r=i[0],a=fq.getZonePrimaryKeyFromPrimaryKey(r),s=jd.Zone.find(a),o=s.zoneID,l=fq.getRecordNameFromPrimaryKey(r),t.next=10,n.ckRequest(e,s.scope).send("fetchRecords",l,n.baseCKOptions(o));case 10:if(c=t.sent,(u=c.records)&&0!==u.length){t.next=14;break}return t.abrupt("return");case 14:return d=u[0],h=fq.getDataValuesFromServiceValues(d,{zone:a,zoneID:o}),L.n().loadData(fq,h,!1),t.abrupt("return",fq.find(h.pk));case 19:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){gq(a,i,r,s,o,"next",e)}function o(e){gq(a,i,r,s,o,"throw",e)}s(void 0)}))})()},processResponseErrors:function(e){var t=this,n=arguments;if(e.hasErrors){var i=e.errors[0];if(i.ckErrorCode!==CloudKit.CKError.NOT_FOUND)return t.__s._$gP$processResponseErrors.apply(t,n)}},__superMap:{_$gP$processResponseErrors:"processResponseErrors"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneStateLoadOperationHandler"}}),_q=OK.extend({handlesType:fq,nestedOperationHandlers:[mq].map((function(e){return e.create()})),ingestChange:function(e,t,n){var i=e.recordType;u.b.error("Unhandled change records recordType="+i)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ZoneStateOperations"}}),vq=OK.extend({handlesType:L.d.WRITE.CREATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.newData;i.parentId&&(n.parentId=i.parentId);var r=n.getServiceValuesFromDataValues(["albumNameEnc","albumType","isDeleted","isExpunged","parentId","position","sortType","sortTypeExt","sortAscending"]);if(jt.a.isSystemAlbumRecordName(r.recordName)){var a=L.n().feedbackService,s=L.n().FeedbackErrorType;return a&&a.reportError&&a.reportError({errorType:s.SYSTEM_ALBUM_ACTION.value}),Z.a.resolve()}var o=i.zoneID,l=i.zone,c=jd.Zone.find(l).scope,u=this.baseCKOptions(o);return u.desiredKeys=jt.a.serviceKeys,this.ckRequest(e,c).send("saveRecords",r,u)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerCreateOperation"}}),bq=n(483),yq={staticMembers:{getNestedOperation:function(e){for(var t=e,n=t;(n=t.operation)instanceof Object;)t=n;return t},getNestedOperationContext:function(e){return this.getNestedOperation(e).context}}},wq={mixinDependencies:[yq,{staticMembers:{isDelayableByDefault:!0,getIsDelayable:function(e){if(!(e instanceof Object))return this.isDelayableByDefault;var t=e.isDelayable;return void 0===t?this.isDelayableByDefault:t},defaultDelayMs:50,getDelay:function(e){if(!(e instanceof Object))return this.defaultDelayMs;var t=e.delayMs;return void 0===t?this.defaultDelayMs:t}}}],staticMembers:{getIsDelayable:function(e){var t=this.getNestedOperationContext(e);return this.__s._$9l$getIsDelayable.call(this,t)},getDelay:function(e){var t=this.getNestedOperationContext(e);return this.__s._$Ec$getDelay.call(this,t)},__superMap:{_$9l$getIsDelayable:"getIsDelayable",_$Ec$getDelay:"getDelay"}}},Iq={mixinDependencies:[{mixinDependencies:[{mixinDependencies:[{staticMembers:{isMergeableByDefault:!0,isOperationMergeable:function(e){if(!(e instanceof Object))return this.isMergeableByDefault;var t=e.isMergeable;return void 0===t?this.isMergeableByDefault:t},isOperationPairMergeable:function(e,t){return typeof e===typeof t},merge:function(e,t){return e===t}}},yq],staticMembers:{isOperationMergeable:function(e){var t=this.getNestedOperationContext(e);return this.__s._$9V$isOperationMergeable.call(this,t)},isOperationPairMergeable:function(e,t){for(var n=e,i=t;n.type===i.type;){if(n.context instanceof Object&&i.context instanceof Object)return!0;if(!((n=n.operation)instanceof Object&&(i=i.operation)instanceof Object))return!1}return!1},merge:function(e,t){var n=this.getNestedOperationContext(e),i=this.getNestedOperationContext(t);return this.mergeContexts(n,i)},mergeContexts:function(e,t){return e===t},__superMap:{_$9V$isOperationMergeable:"isOperationMergeable"}}}],staticMembers:{mergeContexts:function(e,t){for(var n=e.primaryKeys,i=t.primaryKeys,r=0,a=i.length;r<a;r++){var s=i[r];n.includes(s)||n.push(s)}return!0}}}],staticMembers:{isMergeableAcrossZones:!1,mergeContexts:function(e,t){var n=this,i=arguments;if(!this.isMergeableAcrossZones){for(var r=e.primaryKeys,a=t.primaryKeys,s=new Set,o=0,l=a.length;o<l;o++){var c=Kt.Record.getZonePrimaryKeyFromPrimaryKey(a[o]);s.add(c)}for(var u=0,d=r.length;u<d;u++){var h=Kt.Record.getZonePrimaryKeyFromPrimaryKey(r[u]);if(!s.has(h))return!1}}return n.__s._$VA$mergeContexts.apply(n,i)},__superMap:{_$VA$mergeContexts:"mergeContexts"}}};function Sq(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Cq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cq(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Eq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Aq=CloudKit.QueryFilterComparator.IN,Oq=bq.a.STRING_LIST.name,Tq=vz.a.extend({mixinDependencies:[Cz.a,wq,Iq],staticMembers:{getRequestFromOperation:function(e){var t=e.context.primaryKeys,n=t.map((function(e){var t=jt.a.find(e),n=t.recordName,i=t.type;return jt.a.getQueryIndexCountId(n,i)})),i=t[0],r=jt.a.getZonePrimaryKeyFromPrimaryKey(i),a=jd.Zone.find(r);return{query:{recordType:"HyperionIndexCountLookup",filterBy:{fieldName:"indexCountID",comparator:Aq,fieldValue:{value:n,type:Oq}}},options:{zoneID:a.zoneID},zone:a}},getDataHashesFromResponse:function(e){for(var t=[],n=e.records,i=e.zoneID,r=jd.Zone.getPrimaryKey(i),a=0,s=n.length;a<s;a++){var o=n[a],l=o.recordName,c=jt.a.getRecordNameFromIndexCountId(l);if(!$p.a.getIsRecordNameAProjectRootFolder(c)){var u=jt.a.getPrimaryKeyWithZonePK(r,c),d=jt.a.find(u),h=qt.d(o,"itemCount"),p="number"===typeof h&&h>0?h:0,f=c===jt.a.ROOT_RECORD_NAME?p+jt.a.PredefinedNames.length-1:p,g=d.getDataHash(),m=Object.assign({},g);if(jt.a.isQueryIndexCountIdForContainers(l)){var _=m.containers,v=[].concat(void 0===_?[]:_);v.length=f,m.containers=v}else{var b=m.medias,y=[].concat(void 0===b?[]:b);y.length=f,m.medias=y}t.push(m)}}return t},__QUALIFIED_CLASS_NAME__:"ContainerLoadOperation"},handlesType:L.d.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=r.constructor.getRequestFromOperation(e),a=i.query,s=i.options,o=i.zone,l=L.n(),c=l.getDatabaseForScope(o.scope).databaseInstance,t.prev=3,u=[],d=a;case 6:return t.next=8,c.performQuery(d,s);case 8:if((h=t.sent).hasErrors)for(p=Sq(h.errors);!(f=p()).done;)g=f.value,r.handleError(g,e,n);return m=Tq.getDataHashesFromResponse(h),t.next=13,l.loadData(jt.a,m,!1);case 13:_=t.sent,u.push.apply(u,_),d=h;case 16:if(!0===a.moreComing){t.next=6;break}case 17:return t.abrupt("return",Ac.a.createFromStoreIds(u,jt.a,l));case 20:return t.prev=20,t.t0=t.catch(3),t.abrupt("return",r.handleError(t.t0,e,n));case 23:case"end":return t.stop()}}),t,null,[[3,20]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Eq(a,n,r,s,o,"next",e)}function o(e){Eq(a,n,r,s,o,"throw",e)}s(void 0)}))})()}});function Mq(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Dq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dq(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Pq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Lq=vz.a.extend({mixinDependencies:[Cz.a],staticMembers:{getRequestFromOperation:function(e){var t=e.context.parentPK,n=jt.a.find(t),i=n.isRootFolder,r=n.zone,a={recordType:"CPLAlbumByPositionLive"};return i||(a.filterBy=[jt.a.getQueryItemListFilterBy(n.recordName)]),{query:a,options:{zoneID:r.zoneID}}},getDataHashesFromResponse:function(e,t){for(var n=[],i=e.records,r=0,a=i.length;r<a;r++){var s=i[r],o=s.recordType;if(o===jt.a.CK_RECORD_TYPE){if($p.a.getIsContainerRecordUsable(s)){var l=jt.a.getDataValuesFromServiceValues(s,{zone:t});n.push(l)}}else u.b.warn("Container/List: Ignoring unknown recordType="+o)}return n},__QUALIFIED_CLASS_NAME__:"ContainerListOperation"},handlesType:L.d.READ.LIST,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A,O,T,M,D,P,R,x,N,F,V,k,B,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Lq.getRequestFromOperation(e),a=i.query,s=i.options,o=e.context.parentPK,l=jt.a.find(o),c=l.isRootFolder,d=l.zone,h=d.pk,p=L.n(),f=p.getDatabaseForScope(d.scope).databaseInstance,t.prev=7,g=a,m=0;case 10:return t.next=12,f.performQuery(g,s);case 12:if((v=t.sent).hasErrors)for(b=Mq(v.errors);!(y=b()).done;)w=y.value,r.handleError(w,e,n);if(I=[],S=Lq.getDataHashesFromResponse(v,h),c&&0===m){for(C=Mq(jt.a.PredefinedNames);!(E=C()).done;)A=E.value,O=jt.a.getPrimaryKey(d,A),I.push(O);for(T=void 0,M=0,D=S.length;M<D;M++)P=S[M],c&&P.recordName===jt.a.ROOT_RECORD_NAME?(p.loadData(jt.a,P,!0),T=M):I.push(P.pk);"number"===typeof T&&S.splice(T,1)}else for(R=0,x=S.length;R<x;R++)N=S[R],I.push(N.pk);p.loadData(jt.a,S,!0),F=l.getDataHash(),V=F.containers,k=void 0===V?[]:V,B=Object.assign({},F,{containers:[].concat(k)}),(_=B.containers).splice.apply(_,[m,I.length].concat(I)),v.moreComing||(j=m+I.length,B.containers.length!==j&&(c&&u.b.warn("Container/List: container "+B.recordName+" expected length of "+j+" but actual length is "+B.containers.length+"; truncating\u2026"),B.containers.length=j)),p.loadData(jt.a,B,!1),g=v,m+=I.length;case 26:if(!0===g.moreComing){t.next=10;break}case 27:return t.abrupt("return",l.containers);case 30:return t.prev=30,t.t0=t.catch(7),t.abrupt("return",r.handleError(t.t0,e,n));case 33:case"end":return t.stop()}}),t,null,[[7,30]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Pq(a,n,r,s,o,"next",e)}function o(e){Pq(a,n,r,s,o,"throw",e)}s(void 0)}))})()}}),Rq=OK.extend({handlesType:L.d.WRITE.UPDATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.diff;if(!i)return Z.a.resolve();var r=i.added,a=i.updated,s=[].concat(r,a);if(0===s.length)return Z.a.resolve();var o=n.zone.scope,l=n.getServiceValuesFromDataValues(s);if(jt.a.isSystemAlbumRecordName(l.recordName)){var c=L.n().feedbackService,d=L.n().FeedbackErrorType;return c&&d&&c.reportError({errorType:d.SYSTEM_ALBUM_ACTION.value}),Z.a.resolve()}var h=this.baseCKOptions(n.zoneID);return h.desiredKeys=jt.a.serviceKeys,this.ckRequest(e,o).send("saveRecords",l,h).then((function(){u.b.debug("handleSuccess: ContainerUpdate")}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerUpdateOperation"}});function xq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Nq=CloudKit.QueryFilterComparator.EQUALS,Fq=bq.a.STRING.name,Vq=OK.extend({handlesType:XK.a.Container.CountItemsInIndex,staticMembers:{getRequestFromOperation:function(e){var t=e.context,n=t.containerPK,i=t.preset,r=jt.a.find(n),a=r.recordName,s=r.type,o=r.zone;return{query:{recordType:"CountItemsInIndex",filterBy:[{fieldName:"indexName",comparator:Nq,fieldValue:{value:jt.a.getQueryIndexCountId(a,s),type:Fq}},{fieldName:"preset",comparator:Nq,fieldValue:{value:i,type:Fq}}]},options:{zoneID:o.zoneID}}},__QUALIFIED_CLASS_NAME__:"CountItemsInIndexOperation"},action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o,l,c,u,d,h,p,f,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=L.n(),r=Vq.getRequestFromOperation(e),a=r.query,s=r.options,o=e.context.containerPK,l=jt.a.find(o),c=l.zone,t.next=7,n.ckRequest(e,c.scope).send("performQuery",a,s);case 7:if(u=t.sent,d=u.records,!u.hasErrors&&d&&1===d.length){t.next=11;break}return t.abrupt("return");case 11:if(h=d[0],"number"===typeof(p=qt.d(h,"count"))){t.next=15;break}return t.abrupt("return");case 15:return f=NU.a.getZoneIdString(u.zoneID),(g=Object.assign({},l.getDataHash(),{zone:f})).medias||(g.medias=[]),g.medias.length=p,i.loadData(jt.a,g,!1),"string"===typeof u.httpResponse.body.syncToken&&jd.Zone.updateSyncToken(f,u.httpResponse.body.syncToken),t.abrupt("return",l);case 23:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){xq(a,i,r,s,o,"next",e)}function o(e){xq(a,i,r,s,o,"throw",e)}s(void 0)}))})()}}),kq=vz.a.extend({handlesType:jt.a,nestedOperationHandlers:[vq,Tq,Lq,Rq,Vq].map((function(e){return e.create()})),ingestChange:function(e,t,n){if(!e.isRootFolder){var i=e.albumType;if(i&&$p.a.getIsAlbumTypeUsable(i.value)){var r=!1;if(t){var a=e&&t.sortType!==e.sortType,s=e&&t.sortAscending!==e.sortAscending;(a||s)&&u.b.error("Unimplemented changeset handling for container re-sorting");var o=!e||e.isDeleted&&!t.isDeleted,l=e&&t.parentId!==e.parentId,c=e&&t.position!==e.position;if(o||l||c){var d=t.parent;d&&d.removeContainerRef(t),r=!0}}if((!t||r||n)&&e&&!e.isDeleted){var h=e.parent;h&&h.addContainerRef(e)}}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerOperations"}}),Bq=OK.extend({handlesType:L.d.WRITE.CREATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t=e.context,n=t.model,i=t.diff,r=n.getServiceValuesFromDataValues(i.added);if(jt.a.isSystemAlbumRecordName(r.fields.containerId.value)){var a=L.n().feedbackService,s=L.n().FeedbackErrorType;return a&&a.reportError&&a.reportError({errorType:s.SYSTEM_ALBUM_ACTION.value}),Z.a.resolve()}var o=this.baseCKOptions(r.zoneID);return o.desiredKeys=hr.a.serviceKeys,this.ckRequest(e,n.zone.scope).send("saveRecords",r,o)},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationCreateOperationHandler"}});function jq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Uq=OK.extend({mixinDependencies:[wq,Iq],handlesType:L.d.WRITE.DESTROY,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){for(var t,n,i=[],r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return jq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jq(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.context.primaryKeys);!(n=r()).done;){var a=n.value,s={recordName:(t=hr.a.find(a)).recordName,recordChangeTag:t.recordChangeTag};i.push(s)}var o=t.zone.scope;return this.ckRequest(e,o).send("deleteRecords",i,this.baseCKOptions(t.zoneID))},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationDeleteOperationHandler"}}),Gq=OK.extend({handlesType:hr.a,nestedOperationHandlers:[Bq,Uq].map((function(e){return e.create()})),ingestChange:function(e,t,n){var i=!1;if(t){var r=!e||e.isDeleted&&!t.isDeleted,a=e&&t.position!==e.position;if(r||a){var s=pr.a.getPrimaryKey(t.zone,t.itemId),o=fr.a.findByAssetPK(s);if(o){o.removeContainerRelationRef(t);var l=jt.a.getPrimaryKey(t.zone,t.containerId),c=jt.a.find(l);c&&c.removeMediaRef(o)}i=!0}}if((!t||n||i)&&e&&!e.isDeleted){var u=jt.a.getPrimaryKey(e.zone,e.containerId),d=jt.a.find(u);if(d){var h=Kt.Record.getPrimaryKey(d.zone,e.itemId),p=fr.a.findByAssetPK(h);if(p)p.addContainerRelationRef(e),d.addMediaRef(p);else if(d.sortType===zo.a.MANUAL){var f={position:e.position};d.addMediaRef(f)}else X.a((function(){fr.a.load({primaryKeys:[h]}).then((function(e){var t=jt.a.find(u);t&&t.addMediaRef(e.objectAt(0))}))}),0)}}if(t||e){var g=e?e.containerId:t.containerId,m=e?e.zone.pk:t.zone.pk,_=Kt.Record.getPrimaryKeyWithZonePK(m,g),v=jt.a.find(_);if(v){var b=e?fr.a.findByAssetPK(Kt.Record.getPrimaryKeyWithZonePK(m,e.itemId)):void 0;b&&e.isKeyAsset?v.keyMediaByUser=b:(v.keyMediaByUser=null,v.keyMediaBySystem=v.medias?v.medias.lastItem:null)}}},staticMembers:{__QUALIFIED_CLASS_NAME__:"ContainerRelationOperations"}}),Hq=CloudKit.QueryFilterComparator.IN,Wq=bq.a.STRING_LIST.name,$q=OK.extend({handlesType:XK.a.Media.BurstCount,action:function(e){var t=e.context,n=t.burstId,i=t.parentMediaPK,r=fr.a.find(i),a=this.baseCKOptions(r.primaryAsset.zoneID),s={recordType:"HyperionIndexCountLookup",filterBy:{fieldName:"indexCountID",comparator:Hq,fieldValue:{value:["CPLAssetForBurstId:"+n],type:Wq}}};return this.ckRequest(e,r.primaryAsset.zone.scope).send("performQuery",s,a).then((function(e){var t=L.n(),n=0;return e.records.forEach((function(e){var a={pk:i,burstMedias:r.getDataHash().burstMedias||[]};n=e.fields.itemCount.value,a.burstMedias.length=n,t.loadData(fr.a,a,!0)})),n}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBurstCountOperationHandler"}});function zq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var Kq=CloudKit.QueryFilterComparator.EQUALS,qq=bq.a.INT64.name,Qq=bq.a.STRING.name,Yq=OK.extend({handlesType:XK.a.Media.BurstList,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A,O,T,M,D,P,R,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=L.n(),a=e.context,s=a.burstId,o=a.parentMediaPK,l=a.first,c=a.last,d=Kt.Record.getZonePrimaryKeyFromPrimaryKey(o),t.next=5;break;case 5:h=fr.a.HydrationLevel.FULL,p=l<=c?1:-1,f=Math.abs(c-l)+1,g=fr.a.find(o),m=g.burstMedias.length-1,v={recordType:"CPLAssetAndMasterInBurstByAssetDate",filterBy:[{comparator:Kq,fieldName:"burstId",fieldValue:{value:s,type:Qq}},{fieldName:"startRank",comparator:Kq,fieldValue:{value:_=m-l,type:qq}},{fieldName:"direction",comparator:Kq,fieldValue:{value:_<=m-c?"ASCENDING":"DESCENDING",type:Qq}}]},b=Object.assign({},r.baseCKOptions(g.primaryAsset.zoneID),{desiredKeys:$p.a.systemContainerItemServiceKeys,resultsLimit:2*f}),t.prev=14,y=v,w=0;case 17:return t.next=19,r.ckRequest(e,g.primaryAsset.zone.scope).send("performQuery",y,b);case 19:S=t.sent,C=$p.a.getRawHashesForRecordsByType(d,S.records,h),E=C.mediaPKs,A=C.mediaHashes,O=C.masterHashes,T=C.assetHashes,M=l+w*p,w+=A.length,i.loadData(eC.a,O,!1),i.loadData(pr.a,T,!1),i.loadData(fr.a,A,!0),D=g.getDataHash(),P=D.burstMedias||[],R={pk:o,burstMedias:[].concat(P)},(I=R.burstMedias).splice.apply(I,[M,A.length].concat(E)),i.loadData(fr.a,R,!0),y=S,w<f&&(x=f-w,b.resultsLimit=2*x);case 33:if(!0===y.moreComing&&w<f){t.next=17;break}case 34:return w<f&&u.b.warn("Media/BurstList: expected "+f+" but got "+w+" for burst "+s),t.abrupt("return",g.burstMedias);case 38:return t.prev=38,t.t0=t.catch(14),t.abrupt("return",r.handleError(t.t0,e,n));case 41:case"end":return t.stop()}}),t,null,[[14,38]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){zq(a,n,r,s,o,"next",e)}function o(e){zq(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBurstListOperationHandler"}});function Zq(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Xq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xq(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jq(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var eQ=CloudKit.QueryFilterComparator.EQUALS,tQ=bq.a.STRING.name,nQ=vz.a.extend({mixinDependencies:[Cz.a],handlesType:XK.a.Media.LoadKey,staticMembers:{getRequestFromOperation:function(e){var t=e.context,n=t.parentPK,i=t.hydrationLevel,r=jt.a.find(n),a=r.zone;return{query:{recordType:"HyperionKeyAssetRelationsForContainerIdEndpoint",filterBy:{fieldName:"parentId",comparator:eQ,fieldValue:{value:r.recordName,type:tQ}}},options:{zoneID:a.zoneID,desiredKeys:$p.a.getDesiredKeys(r,i)}}},__QUALIFIED_CLASS_NAME__:"MediaLoadKeyOperationHandler"},action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context,a=i.parentPK,s=i.hydrationLevel,t.next=3;break;case 3:t.next=5;break;case 5:o=jt.a.find(a),t.next=8;break;case 8:return l=o.zone,c=L.n(),u=c.getDatabaseForScope(l.scope).databaseInstance,d=s.value<fr.a.HydrationLevel.FULL.value,h=nQ.getRequestFromOperation(e),p=h.query,f=h.options,t.prev=13,t.next=16,u.performQuery(p,f);case 16:if((g=t.sent).hasErrors)for(m=Zq(g.errors);!(_=m()).done;)v=_.value,r.handleError(v,e,n);if(0!==(b=g.records).length){t.next=21;break}return t.abrupt("return");case 21:return y=$p.a.getRawHashesForRecordsByType(b,s),w=y.mediaHashes,I=y.masterHashes,S=y.assetHashes,c.loadData(eC.a,I,d),c.loadData(pr.a,S,d),t.next=26,c.loadData(fr.a,w,d);case 26:return C=t.sent,E=C[0],A=E?c.materializeModel(E):void 0,o.keyMediaByUser=A,t.abrupt("return",A);case 33:return t.prev=33,t.t0=t.catch(13),t.abrupt("return",r.handleError(t.t0,e,n));case 36:case"end":return t.stop()}}),t,null,[[13,33]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){Jq(a,n,r,s,o,"next",e)}function o(e){Jq(a,n,r,s,o,"throw",e)}s(void 0)}))})()}});function iQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var rQ=OK.extend({handlesType:XK.a.Media.BatchLoadKey,action:function(e){for(var t,n=e.context._coalescedTransactions,i=n[0],r=(i.operation&&i.operation.operation).context.parentPK,a=jt.a.find(r).zone.scope,s=this.ckRequest(e,a).chain("batchRequest"),o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return iQ(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iQ(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(t=o()).done;){var l=t.value,c=nQ.getRequestFromOperation(l.operation.operation),u=c.query,d=c.options;s.chain("addQuery",u,Object.assign({},d,{desiredKeys:void 0,resultsLimit:3}))}return s.send("commit").then((function(e){return e.map((function(e,t){return function(e,t){t.hasErrors;var n=L.n(),i=e.operation.operation.context,r=i.parentPK,a=i.hydrationLevel,s=jt.a.find(r),o=a.value<fr.a.HydrationLevel.FULL.value,l=$p.a.getRawHashesForRecordsByType(t.records,a),c=l.mediaHashes,u=l.masterHashes,d=l.assetHashes;return Z.a.all([n.loadData(eC.a,u,o),n.loadData(pr.a,d,o)]).then((function(){return n.loadData(fr.a,c,o)})).then((function(e){var t=Array.isArray(e)?e[0]:e,i=t?n.materializeModel(t):null;return s.keyMediaByUser=i,i}))}(n[t],e)}))}))},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaBatchLoadKeyOperationHandler"}}),aQ=vz.a.extend({handlesType:fr.a,nestedOperationHandlers:[ZK.MediaListOperationHandler,nQ,rQ,$q,Yq].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaOperations"}});function sQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var oQ=OK.extend({handlesType:L.d.READ.LOAD,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.b.debug("INIT: CPL DataManager Master/Load"),i=e.context.primaryKeys,t.next=4;break;case 4:r=Array.isArray(i)?i:[i],a=r.map(eC.a.getRecordNameFromPrimaryKey),s=Kt.Record.getZonePrimaryKeyFromPrimaryKey(r[0]),o=L.n().readDataForPrimaryKey(jd.Zone,s),t.next=10;break;case 10:return t.next=12,n.ckRequest(e,o.scope).send("fetchRecords",a,n.baseCKOptions(o.zoneID));case 12:return t.abrupt("return",eC.a.findByPrimaryKeys(i).retain().autorelease());case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){sQ(a,i,r,s,o,"next",e)}function o(e){sQ(a,i,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"MasterLoadOperationHandler"}}),lQ=OK.extend({handlesType:L.d.WRITE.UPDATE,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){u.b.debug("Media/Update: begin");var t=e.context,n=t.model,i=t.diff;if(!i)return Z.a.resolve();var r=i.added,a=i.updated,s=[].concat(r,a);if(0===s.length)return Z.a.resolve();var o=n.zone.scope,l=n.getServiceValuesFromDataValues(s),c=this.baseCKOptions(n.zoneID);return c.desiredKeys=n.serviceKeys,this.ckRequest(e,o).send("saveRecords",l,c).then((function(){u.b.debug("Media/Update: success")}))},handleError:function(e,t){var n=this,i=arguments;if(!this.handleOverQuotaError(e,t))return n.__s._$XN$handleError.apply(n,i)},handleOverQuotaError:function(e,t){if(e&&e.ckErrorCode===window.CloudKit.CKError.QUOTA_EXCEEDED&&DK(t.context)){var n=t.context.model;return L.n().resetData(n.constructor.getStoreIdForPrimaryKey(n.pk)),n.propertyChanged("isDeleted"),!0}},__superMap:{_$XN$handleError:"handleError"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaUpdateOperationHandler"}}),cQ=OK.extend({handlesType:eC.a,nestedOperationHandlers:[lQ,oQ].map((function(e){return e.create()})),ingestChange:function(){},staticMembers:{__QUALIFIED_CLASS_NAME__:"MasterOperations"}});function uQ(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return dQ(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dQ(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function hQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var pQ=vz.a.extend({handlesType:L.d.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:a=i[0],s=vA.getZonePrimaryKeyFromPrimaryKey(a),o=jd.Zone.find(s),t.next=8;break;case 8:return l=o.zoneID,c=i.map(vA.getRecordNameFromPrimaryKey),u=L.n(),d=u.getDatabaseForScope(o.scope).databaseInstance,t.prev=12,t.next=15,d.fetchRecords(c,{zoneID:l});case 15:for(h=t.sent,p=[],f=uQ(h.records);!(g=f()).done;)m=g.value,_=vA.getDataValuesFromServiceValues(m,{zone:s,zoneID:l}),p.push(_);return t.next=20,u.loadData(vA,p,!1);case 20:return v=t.sent,t.abrupt("return",Ac.a.createFromStoreIds(v,vA,u));case 24:return t.prev=24,t.t0=t.catch(12),t.abrupt("return",r.handleError(t.t0,e,n));case 27:case"end":return t.stop()}}),t,null,[[12,24]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){hQ(a,n,r,s,o,"next",e)}function o(e){hQ(a,n,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"LibraryInfoLoadOperation"}}),fQ=vz.a.extend({handlesType:vA,nestedOperationHandlers:[pQ].map((function(e){return e.create()})),ingestChange:function(){},staticMembers:{__QUALIFIED_CLASS_NAME__:"LibraryInfoOperations"}}),gQ=n(304);function mQ(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return _Q(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_Q(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function vQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var bQ=vz.a.extend({mixinDependencies:[Cz.a],handlesType:L.d.READ.LOAD,action:function(e,t,n){var i,r=this;return(i=regeneratorRuntime.mark((function t(){var i,a,s,o,l,c,u,d,h,p,f,g,m,_,v,b,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.context.primaryKeys,t.next=3;break;case 3:a=L.n(),s=gQ.a.getZonePrimaryKeyFromPrimaryKey(i[0]),o=jd.Zone.find(s,a),l=o.zoneID,t.next=9;break;case 9:return c=i.map((function(e){return gQ.a.getRecordNameFromPrimaryKey(e)})),u=a.getDatabaseForScope(o.scope).databaseInstance,t.prev=11,t.next=14,u.fetchRecords(c,{zoneID:l});case 14:if((d=t.sent).hasErrors)for(h=mQ(d.errors);!(p=h()).done;)f=p.value,r.handleError(f,e,n);for(g=[],m=mQ(d.records);!(_=m()).done;)v=_.value,b=gQ.a.getDataValuesFromServiceValues(v,{zone:s,zoneID:l}),g.push(b);return t.next=20,a.loadData(gQ.a,g,!1);case 20:return y=t.sent,t.abrupt("return",Ac.a.createFromStoreIds(y,gQ.a,a));case 24:return t.prev=24,t.t0=t.catch(11),t.abrupt("return",r.handleError(t.t0,e,n));case 27:case"end":return t.stop()}}),t,null,[[11,24]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function s(e){vQ(a,n,r,s,o,"next",e)}function o(e){vQ(a,n,r,s,o,"throw",e)}s(void 0)}))})()},handleError:function(e){var t=this,n=arguments;return this._ignorableErrors(e.ckErrorCode)?[]:t.__s._$ee$handleError.apply(t,n)},_ignorableErrors:function(e){var t=CloudKit.CKError;return e===t.ZONE_NOT_FOUND||e===t.NOT_FOUND},__superMap:{_$ee$handleError:"handleError"},staticMembers:{__QUALIFIED_CLASS_NAME__:"CountInfoLoadOperation"}}),yQ=vz.a.extend({handlesType:gQ.a,nestedOperationHandlers:[bQ].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"CountInfoOperations"}});function wQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var IQ=OK.extend({handlesType:L.d.READ.LOAD,shouldIngestChangesOnResponse:!0,shouldIngestChangesAsChangeSet:!0,action:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var i,r,a,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.b.debug("INIT: CPL DataManager Asset/Load"),i=e.context.primaryKeys,t.next=4;break;case 4:r=Array.isArray(i)?i:[i],a=r.map(pr.a.getRecordNameFromPrimaryKey),s=Kt.Record.getZonePrimaryKeyFromPrimaryKey(r[0]),o=L.n().readDataForPrimaryKey(jd.Zone,s),t.next=10;break;case 10:return t.next=12,n.ckRequest(e,o.scope).send("fetchRecords",a,n.baseCKOptions(o.zoneID));case 12:return t.abrupt("return",pr.a.findByPrimaryKeys(i).retain().autorelease());case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(e){wQ(a,i,r,s,o,"next",e)}function o(e){wQ(a,i,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetLoadOperationHandler"}}),SQ=OK.extend({handlesType:pr.a,nestedOperationHandlers:[lQ,IQ].map((function(e){return e.create()})),ingestChange:function(e,t,n){var i,r=L.n(),a=e instanceof Object,s=t instanceof Object;if(a&&(i=fr.a.findOrCreateByAssetPK(e.pk),K.a(e.remappedRef)))u.b.debug("Skipping ingestion of asset w/ remapped ref: "+e.pk);else{var o=a?e.zone:s?t.zone:void 0;if(o instanceof Object&&o===r.cplZone){var l=r.cplSystemContainersMap;if(!t&&!n){var c=[l.get(jt.a.PredefinedName.MOMENTS),l.get(jt.a.PredefinedName.PHOTOS),l.get(jt.a.PredefinedName.FAVORITES),l.get(jt.a.PredefinedName.HIDDEN)],d=l.get(jt.a.PredefinedName.DELETED);if(Array.isArray(d.medias)&&d.medias.length>0){if(e.isDeleted){var h=d.getDataHash(),p=h.pk,f=h.recordType,g=h.medias;g||(g=[]);var m=g.slice(0);m.splice(0,0,void 0);var _={recordType:f,pk:p,medias:m};r.loadData(jt.a,_,!0)}}else c.push(d);for(var v=0,b=c.length;v<b;v++){var y=c[v],w=y.medias.length,I=[];I.length=w;var S={recordType:y.recordType,pk:y.pk,medias:I};r.loadData(jt.a,S,!0),y.load()}return}for(var C=jt.a.PredefinedNames,E=0,A=C.length;E<A;E++){var O=C[E],T=l.get(O),M=jt.a.QueryInfoByPredefinedName[O].isMediaMemberOf,D=!1,P=void 0;s&&(P=fr.a.findByAssetPK(t.pk))&&(D=M(t,P.primaryMaster));var R=!1;if(a){if(!i||!i.primaryMaster)continue;R=M(e,i.primaryMaster)}D&&P&&!R&&T.removeMediaRef(P),R&&i&&!D&&T.addMediaRef(i)}}a&&s&&i instanceof Object&&(e.isEdited!==t.isEdited||e.isEdited&&pr.a.isContentDifferent(e,t))&&(u.b.warn("resetting derivative..."),i.resetDerivatives())}},staticMembers:{__QUALIFIED_CLASS_NAME__:"AssetOperations"}});function CQ(e){var t="function"===typeof Map?new Map:void 0;return(CQ=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return EQ(e,arguments,TQ(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),OQ(i,e)})(e)}function EQ(e,t,n){return(EQ=AQ()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&OQ(r,n.prototype),r}).apply(null,arguments)}function AQ(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(aY){return!1}}function OQ(e,t){return(OQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TQ(e){return(TQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MQ=function(e){var t,n;function i(){var t;return t=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),i.prototype),t.type=Ut.NO_ZONES,t}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,OQ(t,n),i}(CQ(Error));function DQ(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return PQ(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PQ(e,void 0):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function LQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function RQ(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){LQ(a,i,r,s,o,"next",e)}function o(e){LQ(a,i,r,s,o,"throw",e)}s(void 0)}))}}var xQ={mixinDependencies:[GM,AK],BaseHandlerOperationHandler:OK,operationHandlers:F.b([zK,_q,kq,Gq,aQ,cQ,SQ,MK,fQ,yQ].map((function(e){return e.create()}))),init:function(){var e=this,t=arguments;e.__s._$gH$init.apply(e,t),u.b.info("INIT: CPL DataManager")},startup:function(e){var t=this,n=this,i=arguments;if(this.startupPromise&&!e)return this.startupPromise;this.startupDidComplete=!1;var r=n.__s._$pB$startup.apply(n,i);return this.startupPromise=r.then((function(){return t._startup()}))},shutdownCpl:function(){this.changesetMode=$t.NONE,this.indexingState=void 0,this.cplZone=void 0},isStartupFetchingCplZone:!0,isStartupFetchingCplContainers:!0,isMyAlbumsLoaded:V.b({readOnly:!0,dependencies:["cplRootContainer.containers.contentsDidChange"],get:function(){var e=this.getPath("cplRootContainer.containers");if(e){var t=jt.a.PredefinedNames.length;return e.length<=t||void 0!==e.objectAt(t)}return!1}}),_startup:function(){var e=this;return RQ(regeneratorRuntime.mark((function t(){var n,i,r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isStartupFetchingCplZone){t.next=21;break}return t.next=3,e.getCurrentSyncZone();case 3:if(n=t.sent){t.next=7;break}throw e.noZoneError=!0,new MQ;case 7:return e.cplZone=n,t.next=10,e._checkIndexingState();case 10:if(!e.isStartupFetchingCplContainers){t.next=21;break}return i=e.cplSystemContainers.storeIds.map(e.constructor.getPrimaryKeyForStoreId),r=L.n(),a=r.cplSystemContainersMap,s=a.get(jt.a.PredefinedName.MOMENTS),o=Wt.a.maxMediasForRangeRequest,l=Wt.a.numRangeRequestsToPrefetchForMoments,c=l*o-1,s.loadMediasForRange(0,c),u=jt.a.load({primaryKeys:i,isDelayable:!1}),jt.a.list({parentPK:e.cplRootContainer.pk}),t.next=21,u;case 21:e.startupDidComplete=!0;case 22:case"end":return t.stop()}}),t)})))()},getCurrentSyncZone:function(){var e=this;return RQ(regeneratorRuntime.mark((function t(){var n,i,r,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jd.Zone.list({scope:CloudKit.DatabaseScope.PRIVATE});case 2:if(n=t.sent,i=e.cplZoneID.zoneName,0!==(r=n.filter((function(e){return e.zoneID.zoneName.startsWith(i)})).toArray()).length){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,Z.a.all(r.map((function(e){return fq.load({zonePK:e.pk})})));case 9:if(a=t.sent,-1!==(s=a.findIndex((function(e){return!e||e.enabled||e.availabilityType===pq.PUBLISHED})))){t.next=13;break}return t.abrupt("return");case 13:return t.abrupt("return",r[s]);case 14:case"end":return t.stop()}}),t)})))()},userRecordName:V.b({dependencies:["cplZone"],readOnly:!0,type:String,get:function(){return this.getPath("cplZone.zoneID.ownerRecordName")},didChange:function(){this.updateAllZoneScopes()}}),updateAllZoneScopes:function(){var e=this,t=jd.Zone;t.findAll().forEach((function(n){var i=n.getDataHash(),r=Object.assign({},i,{scope:i.originalScope});!0===e.isRecordOwnedByCurrentUser(n)&&(r.scope=CloudKit.DatabaseScope.PRIVATE),e.loadData(t,r,!1)}))},cplZone:V.b({strong:!0,type:jd.Zone,binding:"defaultZone"}),cplZoneID:V.b({readOnly:!0,strong:!0,dependencies:["cplZone"],get:function(){var e=this.cplZone,t=(void 0===e?{}:e).zoneID;return void 0===t?this.getDefaultZoneID():t}}),getDefaultZoneID:function(){return NU.a.create({zoneName:"PrimarySync"})},cplSystemContainers:V.b({dependencies:["cplZone"],readOnly:!0,get:Object.assign((function(){var e=this.cplZone;if(void 0!==e)return jt.a.loadPredefinedContainers(e)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(void 0!==r)return jt.a.loadPredefinedContainers(r)}})}),cplRootContainer:V.b({dependencies:["cplSystemContainers"],strong:!0,readOnly:!0,type:jt.a,get:Object.assign((function(){var e=this.cplSystemContainers;if(void 0!==e)return e.objectAt(0)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(void 0!==r)return r.objectAt(0)}})}),cplSystemContainersMap:V.b({dependencies:["cplSystemContainers"],readOnly:!0,type:Map,get:Object.assign((function(){var e=this.cplSystemContainers;if(void 0!==e){for(var t,n=new Map,i=DQ(e);!(t=i()).done;){var r=t.value;n.set(r.recordName,r)}return n}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(void 0!==r){for(var a,s=new Map,o=DQ(r);!(a=o()).done;){var l=a.value;s.set(l.recordName,l)}return s}}})}),noZoneError:V.b(),cplZoneState:V.b({readOnly:!0,dependencies:["cplZone"],get:Object.assign((function(){var e=this.cplZone;if(void 0!==e){var t=fq.getPrimaryKeyWithZonePK(e.pk,fq.RECORD_NAME);return fq.find(t)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(void 0!==r){var a=fq.getPrimaryKeyWithZonePK(r.pk,fq.RECORD_NAME);return fq.find(a)}}})}),indexingState:V.b(),isIndexingStateRunningOnStartup:V.b(!1),isCplZoneReadable:V.b({readOnly:!0,dependencies:["cplZone","indexingState"],get:Object.assign((function(){return this.cplZone instanceof jd.Zone.constructor&&this.indexingState===Gt.FINISHED}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])instanceof jd.Zone.constructor&&i.internalGet(this,t[1+n])===Gt.FINISHED}})}),isCplZoneWritable:V.b({readOnly:!0,dependencies:["isCplZoneReadable","readOnly"],get:Object.assign((function(){return this.isCplZoneReadable&&!this.readOnly}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&!i.internalGet(this,t[1+n])}})}),readOnly:V.b({readOnly:!0,type:Boolean,dependencies:["cplZoneState"],get:function(){var e=this.cplZoneState;return"number"===typeof(void 0===e?{}:e).disabledTime}}),startupDidComplete:V.b(!1),startupPromise:null,transactionProcessor:V.b(k.c(hq)),_checkIndexingState:function(){var e=this;return RQ(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,GK.listFromZone(e.cplZone);case 3:e.indexingState=Gt.FINISHED,t.next=14;break;case 6:if(t.prev=6,t.t0=t.catch(0),t.t0.type===Ut.INDEXING_STATE_ERROR){t.next=10;break}throw t.t0;case 10:if(e._startPollingForIndexingState(t.t0),e.isIndexingStateRunningOnStartup){t.next=14;break}return e.isIndexingStateRunningOnStartup=!0,t.abrupt("return",Z.a.reject(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,6]])})))()},_startPollingForIndexingState:function(e){e.type===Ut.INDEXING_STATE_ERROR&&e.state===Gt.RUNNING.value?(this.indexingState=Gt.RUNNING,this._indexingStatePollingTimer=X.a(this._checkIndexingState.bind(this),Wt.a.indexingStatePollingInterval)):this.indexingState=Gt.FAILED},__superMap:{_$gH$init:"init",_$pB$startup:"startup"}};function NQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var FQ=vz.a.extend({handlesType:L.d.WRITE.CREATE,action:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var r,a,s,o,l,c,u,d,h,p,f,g,m,_,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.context,a=r.model,s=r.newData,o=s.scope,l=s.zoneID,c=a.getServiceValuesFromDataValues(a.constructor.serviceKeys,{createShortGUID:!0}),u=L.n(),d=u.getDatabaseForScope(o).databaseInstance,n.prev=5,n.next=8,d.saveRecords(c,{zoneID:l});case 8:if((h=n.sent).hasErrors)for(p=h.errors,f=0;f<p.length;f++)i.handleError(p[f],e,t);for(g=[],m=h.records,_=0;_<m.length;_++)v=on.getDataValuesFromServiceValues(m[_],{scope:o,zone:NU.a.getZoneIdString(l),zoneID:l}),g.push(v);return n.abrupt("return",u.loadData(on,g,!1));case 16:return n.prev=16,n.t0=n.catch(5),n.abrupt("return",i.handleError(n.t0,e,t));case 19:case"end":return n.stop()}}),n,null,[[5,16]])})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){NQ(a,i,r,s,o,"next",e)}function o(e){NQ(a,i,r,s,o,"throw",e)}s(void 0)}))})()},staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMRootCreateOperation"}}),VQ=vz.a.extend({handlesType:on,nestedOperationHandlers:[FQ.create()],staticMembers:{__QUALIFIED_CLASS_NAME__:"CMMRootOperations"}}),kQ={isTransactionForCMM:function(e){var t=L.n(),n=e&&e.operation;n&&n.operation&&(n=n.operation);var i=n&&n.context,r=i&&i.newData&&i.newData.zoneID&&i.newData.zoneID.zoneName;if(t.isZoneNameForCMM(r))return!0;var a=i&&i.sourceZoneID&&i.sourceZoneID.zoneName,s=i&&i.targetZoneID&&i.targetZoneID.zoneName;return t.isZoneNameForCMM(a)||t.isZoneNameForCMM(s)},shouldSendInReadOnlyMode:function(e){var t=this,n=arguments,i=this.isTransactionForCMM(e);return!0===i||t.__s._$ao$shouldSendInReadOnlyMode.apply(t,n)},__superMap:{_$ao$shouldSendInReadOnlyMode:"shouldSendInReadOnlyMode"}};function BQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}var jQ={orderedCMMZones:V.b({strong:!0,readOnly:!0,get:function(){var e=L.n();return Ac.a.create([],jd.Zone,e)}}),loadAllRecordsForCMMZone:function(e,t){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var r,a,s,o,l,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[on.RECORD_NAME,tn.RECORD_NAME,vA.CK_RECORD_NAME_FOR_OTHER],a=[on,tn,vA],n.next=5,jd.Zone.fetchRecords({zonePK:e,recordNames:r,recordClassNames:a,scope:t});case 5:if(!(s=n.sent)){n.next=14;break}return o=tn.getPrimaryKeyWithZonePK(e,tn.RECORD_NAME),l=on.getPrimaryKeyWithZonePK(e,on.RECORD_NAME),c=on.find(l),(u=c.getDataHash()).share=o,n.next=14,i.loadData(on,u,!1);case 14:return n.abrupt("return",s);case 15:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,r){var a=n.apply(e,t);function s(e){BQ(a,i,r,s,o,"next",e)}function o(e){BQ(a,i,r,s,o,"throw",e)}s(void 0)}))})()},updateOrderedCMMZonesWithChanges:function(e){var t=this;return Z.a.all(e.map((function(e){return t._addOrRemoveCMMZone(e)})))},removeThisZoneFromTheOrderedCMMZones:function(e){var t=this.orderedCMMZones,n=t.encodedToArray().indexOf(e);-1!==n&&t.splice(n,1)},_addOrRemoveCMMZone:function(e){var t=jd.Zone.find(e),n=t.zoneID.zoneName;if(this.isZoneNameForCMM(n)){if(t.deleted)this._removeCMMZone(t);else if(!this.orderedCMMZones.contains(t))return this._addCMMZone(t);return Z.a.resolve()}},_removeCMMZone:function(e){var t=this.orderedCMMZones,n=t.indexOf(e);-1!==n&&t.splice(n,1)},_addCMMZone:function(e){var t=this,n=e.pk,i=on.getPrimaryKeyWithZonePK(n,on.RECORD_NAME),r=on.find(i),a=this.orderedCMMZones;if(!r||!r.share)return this.loadAllRecordsForCMMZone(n,e.scope).then((function(n){if(n){var i=t._findIndexToInsertNewCmmZoneAt(e,a);a.splice(i,0,e)}}));var s=a.encode(e);if(!a.encodedContains(s)){var o=this._findIndexToInsertNewCmmZoneAt(e,a);a.splice(o,0,e)}return Z.a.resolve()},_findIndexToInsertNewCmmZoneAt:function(e,t){for(var n=L.n()._dataHashes,i=this._getCreateDateOfZone(n,e),r=t.encodedToArray(),a=r.length,s=0;s<a;s++){var o=n[r[s]];if(this._getCreateDateOfZone(n,o)<i)return s}return a},_getCreateDateOfZone:function(e,t){var n=on.getPrimaryKeyWithZonePK(t.pk,on.RECORD_NAME);return e[on.getStoreIdForPrimaryKey(n)].createDate}};function UQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function GQ(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){UQ(a,i,r,s,o,"next",e)}function o(e){UQ(a,i,r,s,o,"throw",e)}s(void 0)}))}}var HQ={mixinDependencies:[GM,xQ,jQ],ckShareServiceReportSpamUrl:V.b({dependencies:["ckEnvironment","ckContainerId"],readOnly:!0,get:Object.assign((function(){var e=this.ckEnvironment,t=this.ckContainerId;return nn.ckShareServiceUrlPrefix+"/"+t+"/"+e+"/"+nn.ckShareServiceReportAsSpamSuffix}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);return nn.ckShareServiceUrlPrefix+"/"+a+"/"+r+"/"+nn.ckShareServiceReportAsSpamSuffix}})}),reportShareAsSpam:function(e){return this.ckFetch(this.ckShareServiceReportSpamUrl,{method:kn.a.POST,body:JSON.stringify({shortGUID:e})})},operationHandlers:F.b([VQ.create()]),createCMMZone:function(){var e="CMM-"+Y.a().toUpperCase(),t=this.cplZone.zoneID.ownerRecordName,n=NU.a.create({ownerRecordName:t,zoneName:e}),i=jd.Zone.getPrimaryKey(n);return jd.Zone.createFromDataHash({pk:i,scope:CloudKit.DatabaseScope.PRIVATE,zoneID:n},this)},createCMMRootRecord:function(e,t){var n=e.zoneID,i=n.ownerRecordName,r={zoneName:n.zoneName,ownerRecordName:i},a=Object.assign({},t,{recordName:on.RECORD_NAME,pk:on.getPrimaryKeyWithZonePK(e.pk,on.RECORD_NAME),zoneID:r,recordType:on.CK_RECORD_TYPE,scope:CloudKit.DatabaseScope.PRIVATE});return on.createFromDataHash(a,this)},loadCMMRootFromRecordInfo:function(e){var t=e.databaseScope,n=e.rootRecord,i=e.share,r=e.zoneID,a=jd.Zone.getPrimaryKey(r),s=jd.Zone.getDataValuesFromServiceValues({},{scope:t,zoneID:r});this.loadData(jd.Zone,s);var o=jd.Zone.find(a),l=dz.getDataValuesFromServiceValues(e);this.loadData(dz,l,!0),this.loadContainerForCMMZone(o);var c=tn.getDataValuesFromServiceValues(i,{zone:a,zoneID:r});this.loadData(tn,c,!1);var u=on.getDataValuesFromServiceValues(n,{share:c.pk,zone:a,zoneID:r});return this.loadData(on,u,!1),on.find(u.pk)},loadContainerForCMMZone:function(e){var t=Kt.Record.getPrimaryKeyWithZonePK(e.pk,jt.a.PredefinedName.MOMENTS),n=jt.a.find(t);if(!n){jt.a.loadPredefinedContainers(e);var i={pk:t,sortAscending:!0};this.loadData(jt.a,i,!0),n=jt.a.find(t)}return n},resolveShortGUID:function(e){var t=this;return GQ(regeneratorRuntime.mark((function n(){var i,r,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error("Please provide a shortGUID");case 2:return t.sharedDatabase,i=globalThis.CloudKit.getDefaultContainer(),r=Array.isArray(e)?e:[e],n.next=7,i.fetchRecordInfos(r);case 7:return a=n.sent,s=a.results,n.abrupt("return",s&&s[0]);case 10:case"end":return n.stop()}}),n)})))()},acceptShortGUID:function(e){return GQ(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,CloudKit.getDefaultContainer().acceptShares([e]);case 2:return n=t.sent,t.abrupt("return",n&&n[0]);case 4:case"end":return t.stop()}}),t)})))()},transactionProcessor:F.b(kQ),isZoneNameForCMM:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("CMM-")},fetchZonesForShareListingPage:function(){var e=this;if(0===this._numberOfRequestsForFetchingZones)return Z.a.resolve();var t=hz.findOrCreatePlaceholder(CloudKit.DatabaseScope.PRIVATE),n=hz.findOrCreatePlaceholder(CloudKit.DatabaseScope.SHARED);return Z.a.all([t.fetchChanges(),n.fetchChanges()]).then((function(t){var n=t[0].concat(t[1]);return e.updateOrderedCMMZonesWithChanges(n)})).then((function(){e._databaseFetchChangesTimeout=X.a(e.fetchZonesForShareListingPage.bind(e),nn.databaseFetchChangesPollingInterval)}))},_numberOfRequestsForFetchingZones:0,startFetchingZonesForShareListingPage:function(){return this._numberOfRequestsForFetchingZones+=1,1===this._numberOfRequestsForFetchingZones?this.fetchZonesForShareListingPage():Z.a.resolve()},stopFetchingZonesForShareListingPage:function(){this._numberOfRequestsForFetchingZones>0&&(this._numberOfRequestsForFetchingZones-=1),0===this._numberOfRequestsForFetchingZones&&this._databaseFetchChangesTimeout&&(globalThis.clearTimeout(this._databaseFetchChangesTimeout),this._databaseFetchChangesTimeout=void 0)}},WQ=h.a.extend({staticMembers:{storageKey:"revgeo"},maxRetries:h.a.numberProperty(5),retryAfterMillisecondsMinimum:h.a.numberProperty(100),retryAfterMillisecondsMaximum:h.a.numberProperty(1500)}).create(),$Q=ei.extend({method:kn.a.POST,locale:V.b("en-us"),locations:k.c(Array),retryLimit:WQ.maxRetries,isFull:!1,retryAttempt:0,init:function(){var e=this,t=arguments;e.__s._$7S$init.apply(e,t),this.setHeader("Content-Type","text/plain")},addLocation:function(e,t){this.locations.push({lat:e,lng:t})},generateBody:function(){this.body={locale:this.locale,coordinates:Gf(this.locations),retryAttempt:this.retryAttempt}},url:V.b({readOnly:!0,type:j.a,get:function(){var e=G.a.application.urlForServiceName;return j.a.create(e("geows","reverseGeocodeCoordinates"))}}),__superMap:{_$7S$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BatchRevGeoRequest"}}),zQ=iv.a.extend({handlesType:L.d.READ.LOAD,staticMembers:{gateRetryTime:function(e){var t=WQ.retryAfterMillisecondsMinimum,n=WQ.retryAfterMillisecondsMaximum;return Number.isSafeInteger(e)?e>=t&&e<=n?e:e>n?n:t:t},sendRevGeoRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=L.n(),i=$Q.create();i.locale=n.userLocale||"en-us",i.retryAttempt=t;for(var r=0,a=e.length;r<a;r++){var s=e[r];i.addLocation(s.lat,s.lng)}return 0===i.locations.length?Z.a.resolve():(i.generateBody(),i.timeSent=window.performance.now(),i.send().then((function(e){return zQ.onRevGeoResponse(e,t,i)})).catch(zQ.onRevGeoError))},onRevGeoResponse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=L.n(),r=e.body,a=r.places,s=r.missingCoordinates;if(this._reportCompletedState(e,n.get("url"),n.timeSent,n.get("state"),n.get("method")),a.length>0){for(var o=[],l=0,c=a.length;l<c;l++){var d=a[l],h=d.lat,p=d.lng,f=d.placeResult;o[l]={pk:Wf.getPrimaryKey(h,p),lat:h,lng:p,placeResult:f}}i.loadData(Wf,o,!1)}if(s.length>0){var g=r.retryAfterMilliseconds;if(t>=WQ.maxRetries){var m="REVGEO: retry limit reached";throw u.b.warn(m),new Error(m)}var _=Z.a.create(),v=zQ.gateRetryTime(g);return X.a((function(){_.resolve(zQ.sendRevGeoRequest(s,t+1))}),v),_}},_reportCompletedState:function(e,t,n,i,r){var a=e.get("encodedBody"),s={httpMethod:r,statusCode:e.get("status"),hostname:t.get("hostname"),serviceName:"geows",clientTiming:window.performance.now()-n,uncompressedResponseSize:a?a.length:null,timedOut:i===kn.b.TIMEDOUT,urlPath:t.get("pathname")},o=G.a.application.feedbackService;o&&o.report("requestInfo",s)},onRevGeoError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"no response":t;u.b.warn("RevGeo request failed:  "+n)},__QUALIFIED_CLASS_NAME__:"PlaceResultLoadOperation"},action:function(e){var t=e.context.primaryKeys.map((function(e){return Wf.getPartsFromPrimaryKey(e)}));return zQ.sendRevGeoRequest(t)}}),KQ=iv.a.extend({handlesType:Wf,nestedOperationHandlers:[zQ].map((function(e){return e.create()})),staticMembers:{__QUALIFIED_CLASS_NAME__:"PlaceResultOperations"}}),qQ={mixinDependencies:[GM],operationHandlers:F.b([KQ].map((function(e){return e.create()})))},QQ=Rt.Loaded,YQ=jo.a.extend(OP,{mixinDependencies:[qQ,HQ],startup:function(e){var t=this,n=arguments;return t.__s._$Cp$startup.apply(t,n)},feedbackService:V.b(),timingService:V.b(),serviceUrl:V.b("https://p01-ckdatabasews.icloud.com"),userLocale:V.b("en-us"),appState:V.b({defaultValue:QQ.Active,didChange:function(e){if(this.shouldListenForChangesets&&this.startupDidComplete&&(e===QQ.Suspended&&(u.b.info("CPL: app suspended disabling changeset polling..."),this.disableUpdater()),e===QQ.Active)){if(!this.startupDidComplete)return;u.b.info("CPL: app activated, requesting changeset..."),this.update()}}}),isUserIdle:V.b(!1),__superMap:{_$Cp$startup:"startup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"DataManager"}});function ZQ(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(i,r)}function XQ(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){ZQ(a,i,r,s,o,"next",e)}function o(e){ZQ(a,i,r,s,o,"throw",e)}s(void 0)}))}}var JQ=Bt.extend({Initializers:F.b([si,iz,un,ui]),sizeClassHorizontal:V.b(dn.a.REGULAR),sizeClassVertical:V.b(dn.a.REGULAR),persistentStateStore:V.b(),navigationHistoryManager:V.b(),toolbarHeight:V.b(44),previewLength:V.b({readOnly:!0,dependencies:["sidebarItemSizeMode"],get:Object.assign((function(){switch(this.sidebarItemSizeMode){case"medium":return 22;case"small":default:return 17}}),{__CW__getter:function(e,t,n,i){switch(i.internalGet(this,t[0+n])){case"medium":return 22;case"small":default:return 17}}})}),toolbarSliderValue:V.b(.5),sidebarItemSizeMode:V.b("small"),userSidebarToggle:V.b(hi.sharedInstance.bindingFor("userWantsSidebar")),defaultSidebarWidth:V.b(hi.sharedInstance.bindingFor("sidebarWidth")),primaryInteractionMode:V.b(yn.a.MOUSE),isLPKLoaded:V.b(!1),applicationIsReadyToRun:V.b(!1),isUserIdle:V.b(!1),cplChangesetMode:V.b({readOnly:!0,dependencies:[di.bindingFor("isInCloudOS")],get:Object.assign((function(){return di.isInCloudOS?$t.PUSH:$t.POLL}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?$t.PUSH:$t.POLL}})}),cplServiceUrl:V.b({readOnly:!0,get:function(){return di.isInCloudOS?"":"https://p01-ckdatabasews.icloud.com"}}),userLocale:V.b({readOnly:!0,get:function(){var e="en-us";try{e=ve.a.environment.accountPreferences.locale}catch(sY){u.b.warn("Error getting userLocale:",sY)}return e}}),dataManager:V.b({defaultValue:k.c(YQ),downstreamBindings:{appState:"(owner).cloudOSState",changesetMode:"(owner).cplChangesetMode",isUserIdle:"(owner).isUserIdle",serviceUrl:"(owner).cplServiceUrl",userLocale:"(owner).userLocale",timingService:"(owner).timingService",feedbackService:"(owner).feedbackService"}}),feedbackService:V.b(k.c(lz)),regionService:V.b({readOnly:!0,strong:!0,get:function(){return Ke}}),timingService:V.b(),rootViewController:V.b({readOnly:!0,strong:!0,type:ez,get:function(){return ez.create()}}),isCreateAllowed:V.b({type:Boolean,readOnly:!0,dependencies:["iCloudPhotoLibraryWasExited","isUserOverQuota","isRestarting","iCPLEnabled"],get:Object.assign((function(){var e=this.iCPLEnabled,t=this.iCloudPhotoLibraryWasExited,n=this.isUserOverQuota,i=this.isRestarting;return!(t||n||i)&&e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[3+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]),o=i.internalGet(this,t[2+n]);return!(a||s||o)&&r}})}),isDeleteAllowed:V.b({type:Boolean,readOnly:!0,dependencies:["iCloudPhotoLibraryWasExited","isRestarting","iCPLEnabled"],get:Object.assign((function(){var e=this.iCPLEnabled,t=this.iCloudPhotoLibraryWasExited,n=this.isRestarting;return!(t||n)&&e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[0+n]),s=i.internalGet(this,t[1+n]);return!(a||s)&&r}})}),isRestarting:V.b(!1),didReceiveNotification:function(){u.b.info("CloudOS push notification"),this.cplChangesetMode===$t.PUSH&&L.n().update()},isUserOverQuota:V.b(ve.a.bindingFor("cloudOSService.environment.isUserOverQuota")),iCloudPhotoLibraryWasExited:V.b({type:Boolean,readOnly:!0,cacheable:!0,dependencies:["exitedDate"],get:Object.assign((function(){return Boolean(this.exitedDate)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),exitedDate:V.b({type:Number,readOnly:!0,dependencies:["dataManager.cplZoneState"],get:Object.assign((function(){var e=this.dataManager.cplZoneState;return e?e.disabledTime:void 0}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.disabledTime:void 0}})}),iCPLEnabled:V.b({type:Boolean,readOnly:!0,dependencies:["dataManager.noZoneError","dataManager.cplZoneState"],get:Object.assign((function(){var e=this.dataManager,t=e.cplZoneState;return!e.noZoneError&&(!t||t&&t.enabled)}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return!i.internalGetPath(this,t[0+n])&&(!r||r&&r.enabled)}})}),_daysRemaining:V.b({readOnly:!0,dependencies:["exitedDate",bn.bindingFor("sharedInstance.today")],get:Object.assign((function(){var e=this.exitedDate;if(e){var t=bn.sharedInstance.today;return Math.max(30-Math.round(Math.abs(Number(t)-e)/864e5),1)}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r){var a=i.internalGetPath(this,t[1+n]);return Math.max(30-Math.round(Math.abs(Number(a)-r)/864e5),1)}}})}),_photosLibraryWasExited:B.h({inputs:["iCloudPhotoLibraryWasExited",ve.a.bindingFor("cloudOSService"),"_daysRemaining"],callback:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._cachedDaysRemaining;if(t)if(e){if(i!==n){var r=1===n?s.d("Banner.ExitedHyperion.SingleDayRemaining.Description"):s.d("Banner.ExitedHyperion.MultipleDaysRemaining.Description",{daysRemaining:n});t.setAppBanner({title:s.d("Banner.ExitedHyperion.Title"),description:r,optionalLink:{text:s.d("Banner.ExitedHyperion.LinkText"),url:"http://support.apple.com/kb/HT6378"}})}this._cachedDaysRemaining=n}else e||i&&(t.setAppBanner(null),this._cachedDaysRemaining=null)}}),prepareForLoad:function(){this.__s._$3q6$prepareForLoad.call(this),this.run()},startup:function(){di.isInCloudOS?this.load():(globalThis["cosk.application.loadCloudOSServiceDelegate"]=function(){return P.a.extend(ye).create()},this.run())},run:function(){this.__s._$42O$run.call(this),u.b.debug("CloudKit.js loaded and application is ready to run, proceed to database setup."),this.dataManager.startup().then(this.startupComplete.bind(this)).catch(this.startupFail.bind(this));var e=ri.sharedInstance;e.hostedByCloudOSOne=!0,e.alertViewController=Nn,e.feedbackService=this.feedbackService},notifyCloudOSOnLoad:function(){di.isInCloudOS&&this.didPrepareForLoad()},startupComplete:function(){var e=this.feedbackService,t=this.didCloudOSRunStartup;this.didCloudOSRunStartup=!0;var n=this.dataManager.cplSystemContainersMap.get(jt.a.PredefinedName.MOMENTS),i=this.dataManager.cplZoneState;if(i){if(!i.enabled){if(!this.iCloudPhotoLibraryWasExited)return e.report("iCPLstat",{type:"not_enabled"}),this.rootViewController.navigateToErrorMessage([]),void this.notifyCloudOSOnLoad();e.report("iCPLstat",{type:"disabled:previously_enabled"})}}else 0===n.medias.length&&e.report("iCPLstat",{type:"enabled:no_photos"});e.report("appDidStart");var r=n.medias.length;e.report("momentsPhotoCount",{count:e.getSignificantNum(r)}),u.b.debug("P2.Application: startupComplete"),t?this.rootViewController.navigateTo(this.rootViewController.defaultRoute):this.notifyCloudOSOnLoad()},startupFail:function(e){this.didCloudOSRunStartup=!0,u.b.warn("P2.Application: startupFail"),this.feedbackService.reportError({errorType:Qn.STARTUP_FAIL.value});var t=Array.isArray(e)?e:[e];this._recordIndexingStateError(t),this._recordZoneStateError(t),this.rootViewController.navigateToErrorMessage(t),this.notifyCloudOSOnLoad()},_recordIndexingStateError:function(e){var t=e.find((function(e){return e.type===Ut.INDEXING_STATE_ERROR}));if(di.isInCloudOS&&t){var n=t.state===Gt.FAILED.value?ve.a.currentUser.dsid:void 0;this.feedbackService.reportError({errorType:Qn.INVALID_INDEX.value,errorState:t.state,dsid:n,progress:t.progress})}},_listenForIndexinStateChange:B.g({inputs:["dataManager.indexingState","dataManager.isIndexingStateRunningOnStartup"],callback:function(e,t){t&&e===Gt.FINISHED&&this.dataManager.startup(!0).then(this.startupComplete.bind(this)).catch(this.startupFail.bind(this))}}),_recordZoneStateError:function(e){di.isInCloudOS&&e.some((function(e){return e.type===Ut.NO_ZONES}))&&this.feedbackService.report("iCPLstat",{type:"enabled:no_viable_zone"})},didResolveCKShortGUID:function(e){var t=arguments,n=this;return XQ(regeneratorRuntime.mark((function i(){var r,a,s,o,l,c,u,d,h,p,f,g;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{},a=n.dataManager,!(r instanceof Object&&r.containerIdentifier===a.ckContainerId&&void 0!==(s=r.rootRecord)&&s.recordName===on.RECORD_NAME)){i.next=17;break}return o=a.loadCMMRootFromRecordInfo(r),l=o.pk,c=o.zone,u=Ht.a.getPrimaryKeyWithZonePK(c.pk,jt.a.PredefinedName.MOMENTS),d=jt.a.find(u),h=d.getDataHash(),p=h.medias,f=void 0===p?[]:p,(g=Object.assign({},h,{medias:[].concat(f)})).medias.length=o.assetCount,a.loadData(jt.a,g,!1),d.loadMediasForRange(0,Wt.a.maxMediasForRangeRequest-1),i.next=15,d.reload();case 15:return d.medias.length>0&&on.isShareCompleteEnough(o,d)?n.rootViewController.navigateToCMMReceiver(l):n.rootViewController.navigateToCMMIncompleteState(l),i.abrupt("return");case 17:n.didFailToResolveCKShortGUID(e,"Not a valid CMM share");case 18:case"end":return i.stop()}}),i)})))()},didFailToResolveCKShortGUID:function(e,t){u.b.debug("Error: "+t+"."),u.b.debug("shortGUID: "+e),u.b.debug("Navigating to Moments, but we should show an error VC or at least a dialog."),this.rootViewController.navigateTo("moments")},user:V.b({readOnly:!0,strong:!0,type:We,get:function(){return ve.a.getPath("environment.authBag.user")}}),urlForServiceName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=ve.a.getPath("environment.authBag.servicesInfo");if(!n)return null;var i=n[e];if(!i)return null;var r=j.a.create(i.url);return t&&(r.pathname=t.startsWith("/")?t:"/"+t),r.href},updateShareGUID:U.a,__superMap:{_$3q6$prepareForLoad:"prepareForLoad",_$42O$run:"run"},staticMembers:{__QUALIFIED_CLASS_NAME__:"Application"}}),eY=n(358),tY=/applications\/(photos[3]?)\//,nY={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function iY(e,t,n){console.log("%c "+e+" ","background: "+(t||"#fff")+"; color: "+(n||"#000"))}var rY=function(){function e(){}return e.run=function(t){var n=tY.exec(window.location.pathname)[1],i={appName:n||"",platformInfo:e.getBrowser(),subDomain:e.getSubdomain(),video:Object.assign({},e.getVideoReport(n))};t?console.log(JSON.stringify(i,null,4)):(console.log(i),e.saveSysDiagnoseToFile(i))},e.getBrowser=function(){return{deviceName:eY.a.sharedInstance.deviceHostName,browserName:eY.a.sharedInstance.browserName,browserVersion:eY.a.sharedInstance.browserVersion}},e.getSubdomain=function(){return globalThis.location.hostname.split(".").shift()},e.getVideoReport=function(t){var n=e.getVPV(t);if(void 0!==n){var i=Array.from(n.element.classList),r=n.videoPlayer?n.videoPlayer.getMediaElement():void 0,a=r&&r.error?r.error:void 0,s=n.isUsingHls?void 0:n.preferredCrabsVideoDerivativeInfo,o=n.media.serverDerivativeInfosByDerivativeId,l=s&&o&&o[s.transcodeSourceDerivativeId],c=n.media.originalVideoDerivativeInfos[0],u=n.element.querySelectorAll(".ac-video-player")[0],d=n.videoPlayer;return{videoPlaybackMode:n.playbackMode.value||"",isActuallyPresentingAudio:n.isActuallyPresentingAudio,classList:i,acVideo:d?{isAttached:Boolean(u),classList:u?Array.from(u.classList):[],version:d.VERSION.toString(),options:{autoplay:Boolean(d.options.autoplay),controls:Boolean(d.options.controls),debugHls:Boolean(d.options.debugHls),enablePerformanceLogging:Boolean(d.options.enablePerformanceLogging),hls:Boolean(d.options.hls),useNativeHls:Boolean(d.options.useNativeHls)}}:void 0,subdomainFlags:n.subdomainFlags||{},windowHlsJs:Boolean(window.Hls),hlsJsVersion:window.Hls?window.Hls.version:"",canUseHlsJs:Boolean(n.canUseHlsJs),canUseHlsNative:Boolean(n.canUseHlsNative),sentPlaybackStat:n._sentPlaybackStat,sentPlayTimingStat:n._sentPlayTimingStat,currentHlsJsOwner:Boolean(window.Hls&&window.Hls._Photos_vpvOwner===n),videoPlayTimeout:Boolean(n._videoPlayTimeout),hlsMasterPlaylistUrl:{videoPresenterView:Boolean(n.hlsMasterPlaylistUrl),media:Boolean(n.media.hlsMasterPlaylistUrl)},recoveryMode:Boolean(n.crabsRecoveryMode),videoElementError:a?{type:nY[a.code]||"",message:a.message||""}:{},videoPlayerError:Object.assign({},n._sanitizedError(n.videoPlayerError)),videoDerivativeInfo:Object.assign({},e.getVideoDerivativeInfoFields("videoCrabsDerivative",s,n),e.getVideoDerivativeInfoFields("videoCrabsDerivativeTranscodeSource",l,n),e.getVideoDerivativeInfoFields("videoOriginal",c,n))}}iY("No Video Player found. Please run this command with a video open.","#000","#fff")},e.getVPV=function(e){if("photos"===e){var t=document.querySelectorAll(".p2-video-presenter-view");if(0===t.length)return;return t[0].view}if("photos3"===e){var n=document.querySelectorAll(".pok-video-presenter-view");if(0===n.length)return;return n[0].view}},e.getVideoDerivativeInfoFields=function(e,t,n){var i;return t?((i={})[e+"MIMEType"]=t.mimeType,i[e+"UTI"]=t.uti,i[e+"ApproxBitrateMbps"]=Object(qC.a)(8*t.byteSize/1e6/(n.media.primaryAsset.duration/1e3)),i[e+"IsTranscoded"]=t.isDynamic,i[e+"IsHighEfficiencyCodec"]=t.isHighEfficiencyCodec,i[e+"ReflectsEdits"]=t.reflectsEdits,i[e+"ApproxArea"]=Object(qC.a)(t.width*t.height),i):{}},e.saveSysDiagnoseToFile=function(e){var t=new Blob([JSON.stringify(e,null,4)],{type:"text/json"}),n=window.URL.createObjectURL(t),i="icloud_photos_web_diagnose_"+(new Date).getTime()+".json",r=window.document.createElement("a");r.href=n,r.download=i,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),iY("Please add "+i+" to your radar. Thanks :)","#000","#fff")},e}();u.b.logOutputLevel=f.logLevel,Gn.wrapDrawImage(),["carry","beta","future"].map((function(e){return"https://"+e+".icloud.com"})).includes(window.origin)&&(globalThis._PhotosSysDiagnose=rY.run),d.b((function(){w(Ed),N.record("MAIN"),JQ.create({name:"photos",timingService:N}).startup()}))},function(e,t,n){"use strict";n.r(t),n.d(t,"FacebookExtension",(function(){return nt})),n(1),n(0),n(4),n(6),n(3),n(5),n(2),n(12),n(10),n(151),n(116),n(159),n(149),n(142);var i=n(117),r=n(199),a=n(7),s=n(55),o=n(78),l=n(139),c=n(161),u=n(350),d=n(238),h=n(190),p=n(265),f=n(20),g=n(321),m=n(130),_=n(1317),v=n(255),b=n(202),y=n(574),w=n(262),I=n(209),S=n(193),C=n(256),E=n(469),A=b.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"userView"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"VIEWOUTLET",tagname:"view",name:"continueSubmitButton"}],classes:["fbex-footer-view"]},className:"vendor-sharing-facebook-ui-footer-view",__QUALIFIED_CLASS_NAME__:"FacebookUIFooterView"},user:a.b(),extension:a.b(),isInAuthMode:a.b(),userView:a.b({strong:!0,defaultValue:s.c(b.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["fbex-user-picture"],styles:{"background-image":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"userPicture",attributes:{},unit:null,property:"background-image"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"userPicture",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"userName",attributes:{}}],classes:["fbex-user-name"]},{type:"VIEWOUTLET",tagname:"view",name:"changeUserButton"}],classes:["fbex-user-view"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"userName",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},changeUserButton:s.c(E.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"spinner"}]}}},additionalClassNames:r.b(["fbex-button","fbex-change-user-button"]),isDisabled:a.b({readOnly:!0,dependencies:["parent.parent.extension.isSubmitting","parent.parent.extension.isLoggingOut"],get:Object.assign((function(){return this.getPath("parent.parent.extension.isSubmitting")||this.getPath("parent.parent.extension.isLoggingOut")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),title:i.d("Button.Not.You"),action:"displayLogoutDialog",_spinner:a.b(s.c(y.a.extend({size:12,color:"rgba(0, 0, 0, 0.75)"}))),spinner:a.b({readOnly:!0,dependencies:["parent.parent.extension.isLoggingOut","_spinner"],get:Object.assign((function(){return this.getPath("parent.parent.extension.isLoggingOut")?this._spinner:null}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGet(this,t[1+n]):null}})})})),userName:a.b(o.c("parent.user.displayName")),userPicture:a.b({readOnly:!0,dependencies:["parent.user.pictureURL"],get:Object.assign((function(){var e=this.getPath("parent.user.pictureURL");return e?"url("+e+")":""}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?"url("+r+")":""}})})}))}),cancelButton:a.b({strong:!0,readOnly:!0,dependencies:["parent.extension.isSubmitting","_cancelButton"],get:Object.assign((function(){return this.getPath("parent.extension.isSubmitting")?null:this._cancelButton}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?null:i.internalGet(this,t[1+n])}})}),continueSubmitButton:a.b({strong:!0,readOnly:!0,dependencies:["isInAuthMode","parent.extension.isSubmitting","_submitButton","_continueButton","_submitSpinner"],get:Object.assign((function(){return this.getPath("parent.extension.isSubmitting")?this._submitSpinner:this.isInAuthMode?this._continueButton:this._submitButton}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGet(this,t[4+n]):i.internalGet(this,t[0+n])?i.internalGet(this,t[3+n]):i.internalGet(this,t[2+n])}})}),_cancelButton:a.b({strong:!0,defaultValue:s.c(E.a.extend({additionalClassNames:r.b(["fbex-button","fbex-cancel-button"]),isDisabled:o.c("parent.extension.isSubmitting"),title:i.d("Button.Cancel"),action:"terminatePendingUserConfirmation"}))}),_continueButton:a.b({strong:!0,defaultValue:s.c(E.a.extend({additionalClassNames:r.b(["fbex-button","fbex-submit-button"]),isDisabled:a.b({readOnly:!0,dependencies:["parent.extension.isSubmitting","parent.extension.isExpectingLoginPopupResponse"],get:Object.assign((function(){return this.getPath("parent.extension.isSubmitting")||this.getPath("parent.extension.isExpectingLoginPopupResponse")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),title:i.d("Button.Continue"),action:"beginExpectingLoginPopupResponse"}))}),_submitButton:a.b({strong:!0,defaultValue:s.c(E.a.extend({isDisabled:a.b({readOnly:!0,dependencies:["parent.extension.isSubmitting","parent.extension.canSubmit"],get:Object.assign((function(){return this.getPath("parent.extension.isSubmitting")||!this.getPath("parent.extension.canSubmit")}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||!i.internalGetPath(this,t[1+n])}})}),additionalClassNames:r.b(["fbex-button","fbex-submit-button"]),title:i.d("Button.Post"),action:"submit"}))}),_submitSpinner:a.b({strong:!0,defaultValue:s.c(y.a.extend({additionalClassNames:["fbex-submit-spinner"],size:32,color:"rgba(0, 0, 0, 0.5)"}))})}),O=n(195),T=b.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"textarea",name:"textContainer",classes:["fbex-text-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"placeholderText",attributes:{}}],classes:["fbex-text-container","fbex-placeholder-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"characterLimitWarningText",attributes:{}}],classes:["fbex-character-limit-warning"]}],classes:["fbex-text-entry-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"userMessage",truevalue:"fbex-has-message",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"characterLimitWarningText",truevalue:"fbex-has-character-limit-warning",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOverCharacterLimit",truevalue:"fbex-over-character-limit",attributes:{}}]},className:"vendor-sharing-facebook-ui-text-entry-view",__QUALIFIED_CLASS_NAME__:"FacebookUITextEntryView"},userMessage:a.b({readOnly:!0,get:function(){return this.textContainer.value}}),isDisabled:a.b(),isFocused:a.b(),maxLength:a.b(),placeholderText:i.d("Facebook.MessagePlaceholder"),characterLimitVisibilityFactor:a.b(.8),isOverCharacterLimit:a.b({readOnly:!0,dependencies:["maxLength","userMessage"],get:Object.assign((function(){return this.userMessage.length>this.maxLength}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n]).length>i.internalGet(this,t[0+n])}})}),characterLimitWarningText:a.b({readOnly:!0,dependencies:["maxLength","userMessage","characterLimitVisibilityFactor"],get:Object.assign((function(){return M.maxLength=this.maxLength,M.length=this.userMessage.length,M.length/M.maxLength<this.characterLimitVisibilityFactor?"":i.d("Facebook.CharacterLimitWarning",M)}),{__CW__getter:function(e,t,n,r){return M.maxLength=r.internalGet(this,t[0+n]),M.length=r.internalGet(this,t[1+n]).length,M.length/M.maxLength<r.internalGet(this,t[2+n])?"":i.d("Facebook.CharacterLimitWarning",M)}})}),focus:function(){this.textContainer.focus()},init:function(){var e=this,t=arguments;e.__s._$kg$init.apply(e,t);var i=n(1309).FacebookExtension;O.a(i.previousUserTextLostToError)&&(this.textContainer.value=i.previousUserTextLostToError,i.previousUserTextLostToError=null),c.a(this.textContainer,"input",this.propertyChanged.bind(this,"userMessage")),c.a(this.textContainer,"valuechange",this.propertyChanged.bind(this,"userMessage")),c.a(this.textContainer,"focus",function(){this.focus()}.bind(this)),c.a(this.textContainer,"blur",function(){this.blur()}.bind(this))},__superMap:{_$kg$init:"init"}}),M={},D=n(201),P=n(451),L=n(587),R=w.a.extend({extensionClass:L.a,multiResImageData:a.b(),image:a.b({readOnly:!0,dependencies:["_image"],get:Object.assign((function(){var e=this._image;return e?(this._savedImage=e,e):this._savedImage}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?(this._savedImage=r,r):this._savedImage}})}),_image:a.b(),_maintainImage:f.h("multiResImageData","width","height",D.a.sharedInstance.bindingFor("devicePixelRatio"),(function(e,t,n,i){if(!e)return this._image&&(this._image=null),void(this._imagePromise&&(this._imagePromise=null));var r=this.extensionClass.getMediaResForSize(e,t*i,n*i);if(r){var a=this._image;if(!a||a._shareData!==r){var s=this.extensionClass.getLoadedImageForSize(e,t*i,n*i);a!==s&&(this._image=s);var o=this._imagePromise;if(!o||o._shareData!==r){var l=this._imagePromise=this.extensionClass.getImage(r);l.finally(function(e){l===this._imagePromise&&(this._imagePromise=null,this._image=e||null)}.bind(this))}}}})),dispose:function(){var e=this,t=arguments;this._imagePromise=null,e.__s._$qI$dispose.apply(e,t)},__superMap:{_$qI$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ShareDataImageLoaderRect"}});function x(e,t,n,i,r,a,s){"fit"===e&&(e=!1),"cover"===e&&(e=!0),e=!!e;var o,l,c,u,d,h=arguments.length;6!==h&&(s=h-1),2===s||3===s?(l=t.height,o=t.width,u=n.height,c=n.width,d=i):(o=t,l=n,c=i,u=r,d=a);var p=o/l,f=c/u,g=e?p<f:p>f;return(d=d||{}).width=g?c:u*p,d.height=g?c/p:u,d}var N=n(13),F=n(298),V=n(82),k=n(155),B=n(143),j=n(316),U=n(132),G=a.a.extend({readOnly:!0,desiredOutputType:null,source:null,retainsInputs:!0,retainsOutputs:!0,outputForInput:function(e){return e},inputDidEnter:function(e,t){},inputDidExit:function(e){},outputDidEnter:function(e){},outputDidExit:function(e){},inputDidMutate:function(e,t,n,i){if(this[i._key_lastReturnedValueWasObservableArray]){var r=this[i._key_lastReturnedValue];r.beginBatchedChanges();for(var a,s=0;!isNaN(a=n[s]);s++)r.splice(a,1,t);r.endBatchedChanges()}else this.propertyChanged(i.key)},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments,i=e.source,r=e.dependencies;(!i||r&&1!==r.length)&&N.b("Must include exactly one dependency binding at `source` on MappedArrayProperty."),e.dependencies=[i],t.__s._$2xK$init.apply(t,n)},wasRegistered:function(e,t){var n=this,i=arguments,r=F.a(e);this._inputRetainReasonName="input to MappedArrayProperty `"+t+"` on "+r,this._outputRetainReasonName="output from MappedArrayProperty `"+t+"` on "+r;var a="_mappedArrayProperty_at_"+t+"_";this._key_inputsByInputGuid=a+"inputsByInputGuid",this._key_outputsByOutputGuid=a+"outputsByOutputGuid",this._key_outputsByInputGuid=a+"outputsByInputGuid",this._key_knownInputGuids=a+"knownInputGuids",this._key_knownInputGuids_hash=a+"knownInputGuids_hash",this._key_knownOutputGuids=a+"knownOutputGuids",this._key_knownOutputGuids_hash=a+"knownOutputGuids_hash",this._key_lastReturnedValue=a+"lastReturnedValue",this._key_lastReturnedValueWasObservableArray=a+"lastReturnedValueWasObservableArray",this._key_outputCountsByOutputGuid=a+"outputCountsByOutputGuid",this._key_knownInputFirstIndices=a+"knownInputFirstIndices",this._key_knownInputDupeMap=a+"knownInputDupeMap",this._key_isDisposed=a+"isDisposed",this._key_notifyChangeFunc=a+"notifyChangeFunc";var s=a+"inputsContentsDidChangeObserver";e.registerMetadata(a+"inputsContentsDidChangeObserverMaintenanceObserver",f.h(this.source,(function(e){var n=this[s];n&&(n.disconnect(),n.release(this,"mappedArrayProperty invalidation from contentsDidChange"),this[s]=null),V.a(e,k.b)&&(this[s]=e.listen("contentsDidChange",u.a(this.propertyChanged,this,t)).retain(this,"mappedArrayProperty invalidation from contentsDidChange"))}))),n.__s._$3_v$wasRegistered.apply(n,i)},get:function(e,t,n,i){var r,a,s,o,l,c,u=i,d=this[u._key_isDisposed]?null:u.internalGet(this,t[0+n]),h=Array.isArray(d)?Array:d?d.constructor:null,p=null;if(d&&d.objectAt){for(var f=(p=U.b.getInstance()).length=d.length;f--;)p[f]=d.objectAt(f);d=p}var g=!1;d||(g=!0,d=U.b.getInstance());var m=this[u._key_knownInputGuids];m&&(this[u._key_knownInputGuids]=null);var _=this[u._key_knownInputGuids_hash];_&&(this[u._key_knownInputGuids_hash]=null);var v=this[u._key_knownOutputGuids];v&&(this[u._key_knownOutputGuids]=null);var b=this[u._key_knownOutputGuids_hash];b&&(this[u._key_knownOutputGuids_hash]=null);var y=this[u._key_lastReturnedValue];y&&(W.autodisposeInstance(y),this[u._key_lastReturnedValue]=y=null);var w=this[u._key_outputCountsByOutputGuid];w&&(U.c.disposeInstance(w),this[u._key_outputCountsByOutputGuid]=w=null);var I=this[u._key_knownInputFirstIndices];I&&(U.c.disposeInstance(I),this[u._key_knownInputFirstIndices]=I=null);var S=this[u._key_knownInputDupeMap];S&&(U.b.disposeInstance(S),this[u._key_knownInputDupeMap]=null),this[u._key_lastReturnedValueWasObservableArray]=void 0;var C=this[u._key_inputsByInputGuid]||(this[u._key_inputsByInputGuid]={}),E=this[u._key_outputsByInputGuid]||(this[u._key_outputsByInputGuid]={}),A=this[u._key_outputsByOutputGuid]||(this[u._key_outputsByOutputGuid]={}),O=u.desiredOutputType||h,T=W.getInstanceOf(O),M=V.a(T,k.b),D=O===Array;M&&T.beginBatchedChanges();var P=U.b.getInstance(),L=U.b.getInstance(),R=U.c.getInstance(),x=U.c.getInstance();for(w=U.c.getInstance(),a=d.length,r=0;r<a;r++)s=d[r],o=B.b(s),l=E.hasOwnProperty(o)?E[o]:u.outputForInput.call(this,d[r]),c=B.b(l),D?T[r]=l:T.setIndex(r,l),R[o]||(R[o]=!0,P.push(o)),x[c]||(x[c]=!0,L.push(c)),w[c]=1+(w[c]||0),C[o]=s,E[o]=l,A[c]=l;for(a=P.length,r=0;r<a;r++)o=P[r],_&&_[o]||u._inputDidEnter.call(this,u,C[o]);for(a=m?m.length:0,r=0;r<a;r++)o=m[r],R&&R[o]||(u._inputDidExit.call(this,u,C[o]),delete C[o],delete E[o]);for(a=L.length,r=0;r<a;r++)c=L[r],b&&b[c]||u._outputDidEnter.call(this,u,A[c]);for(a=v?v.length:0,r=0;r<a;r++)c=v[r],x&&x[c]||(u._outputDidExit.call(this,u,A[c]),delete A[c]);if(m&&U.b.disposeInstance(m),_&&U.c.disposeInstance(_),v&&U.b.disposeInstance(v),b&&U.c.disposeInstance(b),g&&(U.b.disposeInstance(d),U.b.disposeInstance(P),U.c.disposeInstance(R),W.disposeInstance(T),U.b.disposeInstance(L),U.c.disposeInstance(x),U.c.disposeInstance(w),d=P=R=T=L=x=w=null),this[u._key_knownInputGuids]=P,this[u._key_knownInputGuids_hash]=R,this[u._key_lastReturnedValue]=T,this[u._key_knownOutputGuids]=L,this[u._key_knownOutputGuids_hash]=x,this[u._key_outputCountsByOutputGuid]=w,T){this[u._key_lastReturnedValueWasObservableArray]=M;var N=function(e,t,n){var i=e.length;n.length!==i&&(n.length=i);for(var r=0;r<i;r++)n[r]=t(e[r],r);return n}(d,B.b,U.b.getAutodisposingInstance()),F=this[u._key_knownInputFirstIndices]=U.c.getInstance(),j=this[u._key_knownInputDupeMap]=U.b.getInstance();for(j.length=N.length,r=N.length-1;r>=0;r--){var G=F[o=N[r]]||0;j[r]=G,F[o]=r}}return p&&(U.b.disposeInstance(p),p=d=null),T&&M&&T.endBatchedChanges(),T},_inputDidMutate:function(e,t){var n=this[e._key_outputsByInputGuid],i=B.b(t),r=n[i],a=e.outputForInput.call(this,t);if(a!==r){n[i]=a;for(var s=this[e._key_outputsByOutputGuid],o=this[e._key_outputCountsByOutputGuid],l=this[e._key_knownOutputGuids],c=this[e._key_knownOutputGuids_hash],u=U.b.getAutodisposingInstance(),d=this[e._key_knownInputDupeMap],h=this[e._key_knownInputFirstIndices][i];h;)u.push(h),h=d[h];var p=B.b(r),f=o[p]||0,g=B.b(a),m=o[g]||0,_=u.length;m||(s[g]=a,c[g]=!0,l.push(g),e._outputDidEnter.call(this,e,a)),o[p]=f-=_,o[g]=m+=_,f||(delete s[p],delete c[p],function(e,t){for(var n=0,i=e.length,r=0;r<i-n;r++)if(e[r]===t&&(n++,r--),n){var a=r+1;e[a]=e[a+n]}e.length-=n}(l,p),e._outputDidExit.call(this,e,r)),e.inputDidMutate.call(this,t,a,u,e)}},_inputDidEnter:function(e,t){var n=this[e._key_notifyChangeFunc]||(this[e._key_notifyChangeFunc]=e._inputDidMutate.bind(this,e));e.retainsInputs&&t&&t.retain&&t.retain(this,e._inputRetainReasonName),e.inputDidEnter.call(this,t,n)},_inputDidExit:function(e,t){e.inputDidExit.call(this,t),e.retainsInputs&&t&&t.release&&t.release(this,e._inputRetainReasonName)},_outputDidEnter:function(e,t){e.retainsOutputs&&t&&t.retain&&t.retain(this,e._outputRetainReasonName),e.outputDidEnter.call(this,t)},_outputDidExit:function(e,t){e.outputDidExit.call(this,t),e.retainsOutputs&&t&&t.release&&t.release(this,e._outputRetainReasonName)},_disposeMappedArrayProperty:function(e){this[e._key_isDisposed]=!0,e.get.call(this,void 0,null,NaN,e),this[e._key_isDisposed]=void 0},disposeForObject:function(e,t){var n=this,i=arguments;this._disposeMappedArrayProperty.call(e,this),n.__s._$A1l$disposeForObject.apply(n,i)},__superMap:{_$2xK$init:"init",_$3_v$wasRegistered:"wasRegistered",_$A1l$disposeForObject:"disposeForObject"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MappedArrayProperty"}});function H(){return G.define.apply(G,arguments)}var W={getInstanceOf:function(e){return this._getPoolForArrayClass(e).getInstance()},disposeInstance:function(e){var t=this._getPoolForArrayClass(e.constructor);V.a(e,k.b)?t.autodisposeInstance(e):t.disposeInstance(e)},autodisposeInstance:function(e){this._getPoolForArrayClass(e.constructor).autodisposeInstance(e)},_getPoolForArrayClass:function(e){if(!j.a(e))return U.b;var t=B.b(e);return this._arrayPools[t]||(this._arrayPools[t]=U.a.extend({createInstance:function(){return e.create()},disposeInstance:function(e){var t=this,n=arguments;e.clear(),t.__s._$Atw$disposeInstance.apply(t,n)},__superMap:{_$Atw$disposeInstance:"disposeInstance"}}).create())},_arrayPools:{}},$=b.a.extend({staticMembers:{className:"vendor-sharing-facebook-ui-thumbnail-view",__QUALIFIED_CLASS_NAME__:"FacebookUIThumbnailView"},additionalClassNames:r.b(["fbex-thumbnail-view"]),maxImageCount:a.b(3),verticalOffsetFraction:a.b(1/15),shrinkageFactor:a.b(.85),paddingTop:a.b(0),paddingLeft:a.b(0),paddingRight:a.b(0),paddingBottom:a.b(0),availableWidth:a.b(),availableHeight:a.b(),availableImages:a.b(),usedImages:a.b({readOnly:!0,dependencies:["availableImages","maxImageCount"],get:Object.assign((function(){return(this.availableImages||[]).slice(0,this.maxImageCount)}),{__CW__getter:function(e,t,n,i){return(i.internalGet(this,t[0+n])||[]).slice(0,i.internalGet(this,t[1+n]))}})}),actualWidth:a.b(),actualHeight:a.b(),imageRects:a.b(),loadedImages:H({source:"imageRects",outputForInput:function(e){return e.image},inputDidEnter:function(e,t){e._thumbnailView_imageListener=e.listen("image",t.bind(void 0,e)),e._thumbnailView_imageListener.retain()},inputDidExit:function(e){e._thumbnailView_imageListener.disconnect(),e._thumbnailView_imageListener.release(),e._thumbnailView_imageListener=null},outputDidEnter:function(e){e&&this.element.appendChild(e)},outputDidExit:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},retainsInputs:!1,retainsOutputs:!1}),_firstLoadedImagesHole:a.b({readOnly:!0,dependencies:["loadedImages"],get:Object.assign((function(){var e=this.loadedImages;if(!e)return NaN;for(var t=0;;t++)if(!e[t])return t}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return NaN;for(var a=0;;a++)if(!r[a])return a}})}),_render:f.h("loadedImages","imageRects","paddingTop","paddingLeft","paddingRight","paddingBottom","actualWidth","actualHeight",D.a.sharedInstance.bindingFor("devicePixelRatio"),(function(){var e,t=D.a.sharedInstance.devicePixelRatio;if(this.loadedImages&&this.imageRects)for(e=this.loadedImages.length-1;e>=0;e--){var n=this.imageRects[e],i=this.loadedImages[e];n&&i&&S.c(i).set("pointer-events","none").set("position","absolute").set("transform-origin","0 0").set("z-index",100+10*(this.loadedImages.length-e)).set("display",e>=this._firstLoadedImagesHole?"none":"block").translateDevicePixels(n.x+this.paddingLeft,n.y+this.paddingTop).scale(Math.round(n.width*t)/t/i.width,Math.round(n.height*t)/t/i.height)}if(this._firstLoadedImagesHole>=2){this._distanceMask||(this._distanceMask=document.createElement("canvas")),this._distanceMask.parentNode||this.element.appendChild(this._distanceMask);var r=this._distanceMask;r.width=(this.actualWidth-this.paddingRight-this.paddingLeft)*t,r.height=(this.actualHeight-this.paddingBottom-this.paddingTop)*t;var a=r.getContext("2d");for(e=this.imageRects.length-1;e>=0;e--){var s=this.imageRects[e],o=this.imageRects[e-1],l=s.y*t,c=s.x*t,u=s.width*t,d=(e?o.y-s.y:s.height)*t;a.fillStyle="rgba(0, 0, 0, "+Math.min(1,t/6)+")",a.fillRect(c+1,l,u-2,1),a.fillRect(c,l,1,d),a.fillRect(c+u-1,l,1,d),e||a.fillRect(c+1,l+d-1,u-2,1),e&&(a.fillStyle="white",a.globalAlpha=.8*Math.pow(e/this.imageRects.length,.75),a.fillRect(c,l,u,d),a.globalAlpha=1,a.drawImage(Z,c,l,u,d))}S.c(r).set("pointer-events","none").set("position","absolute").set("transform-origin","0 0").set("z-index",100+10*(this.loadedImages.length+1)).translateDevicePixels(this.paddingLeft,this.paddingTop).scale(1/t,1/t)}else this._distanceMask&&this._distanceMask.parentNode&&this._distanceMask.parentNode.removeChild(this._distanceMask);this.style.set("width",this.actualWidth).set("height",this.actualHeight)})),_doLayout:f.h("usedImages","shrinkageFactor","verticalOffsetFraction","paddingTop","paddingLeft","paddingRight","paddingBottom","availableWidth","availableHeight",D.a.sharedInstance.bindingFor("devicePixelRatio"),(function(){if(!this.usedImages||!this.usedImages.length||!this.availableWidth||!this.availableHeight)return this.imageRects&&(this.imageRects.length=0),void P.a.begin().set(this,"imageRects",m).setIfChanged(this,"actualWidth",0).setIfChanged(this,"actualHeight",0).end();var e=this.usedImages.length;z.length=K.length=q.length=Q.length=e;for(var t=this.usedImages[0],n=t?t[t.length-1]:null,i=0,r=n?n.width:1,a=n?n.height:1,s=0;s<e;s++)Q[s]=i,q[s]=-r/2,K[s]=q[s]+r,z[s]=Q[s]+a,r*=this.shrinkageFactor,a*=this.shrinkageFactor,i-=Math.max(a,r)*this.verticalOffsetFraction;for(var o=Math.max.apply(Math,K)-Math.min.apply(Math,q),l=function(e,t,n,i,r){return x(!1,e,t,n,i,r,arguments.length)}(o,Math.max.apply(Math,z)-Math.min.apply(Math,Q),this.availableWidth-(this.paddingLeft+this.paddingRight),this.availableHeight-(this.paddingTop+this.paddingBottom),Y).width/o,c=0;c<e;c++)Q[c]*=l,q[c]*=l,K[c]*=l,z[c]*=l;for(var u=Math.min.apply(Math,Q),d=Math.min.apply(Math,q),h=0;h<e;h++)Q[h]-=u,q[h]-=d,K[h]-=d,z[h]-=u;for(var p=D.a.sharedInstance.devicePixelRatio,f=0;f<e;f++)Q[f]=Math.floor(Q[f]*p)/p,q[f]=Math.floor(q[f]*p)/p,K[f]=Math.ceil(K[f]*p)/p,z[f]=Math.ceil(z[f]*p)/p;var g=P.a.begin(),m=this.imageRects||[];m.length=e;for(var _=0;_<e;_++){var v=m[_];v||(v=m[_]=R.create()),g.setIfChanged(v,"multiResImageData",this.usedImages[_]),g.setIfChanged(v,"x",q[_]),g.setIfChanged(v,"y",Q[_]),g.setIfChanged(v,"width",K[_]-q[_]),g.setIfChanged(v,"height",z[_]-Q[_])}g.setIfChanged(this,"actualWidth",Math.max.apply(Math,K)+(this.paddingLeft+this.paddingRight)),g.setIfChanged(this,"actualHeight",Math.max.apply(Math,z)+(this.paddingTop+this.paddingBottom)),g.set(this,"imageRects",m),g.end()}))}),z=[],K=[],q=[],Q=[],Y={},Z=function(){var e=document.createElement("canvas");e.width=1,e.height=32;var t=e.getContext("2d"),n=t.createLinearGradient(0,0,0,e.height);return n.addColorStop(0,"rgba(255, 255, 255, 0)"),n.addColorStop(.85,"rgba(255, 255, 255, 0.35)"),n.addColorStop(.95,"rgba(255, 255, 255, 0.675)"),n.addColorStop(1,"rgba(255, 255, 255, 1)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}(),X=n(40),J=n(15),ee=n(550),te=n(214),ne=function(e){return ie[e]},ie={everyone:"EVERYONE",friends:"ALL_FRIENDS",self:"SELF",friends_except_acquaintances:"FRIENDS_EXCEPT_ACQUAINTANCES"},re=X.a.extend(f.b,{staticMembers:{REQUIRED_APP_PERMISSIONS:["public_profile","publish_actions"],ADDITIONAL_APP_PERMISSIONS:["read_custom_friendlists","user_photos"],ALL_APP_PERMISSIONS:J.d({readOnly:!0,defaultValue:function(){var e=[];return ee.a(e,this.REQUIRED_APP_PERMISSIONS,this.ADDITIONAL_APP_PERMISSIONS),e}}),__QUALIFIED_CLASS_NAME__:"FacebookUser"},isLoginStateKnown:a.b({readOnly:!0,dependencies:["isLoggedOut","isLoggedIn","isLoggedInAndAuthorized"],get:Object.assign((function(){return this.isLoggedOut||this.isLoggedIn||this.isLoggedInAndAuthorized}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGet(this,t[1+n])||i.internalGet(this,t[2+n])}})}),isLoggedOut:a.b({readOnly:!0,dependencies:["_loginState"],get:Object.assign((function(){return"unknown"===this._loginState}),{__CW__getter:function(e,t,n,i){return"unknown"===i.internalGet(this,t[0+n])}})}),isLoggedIn:a.b({readOnly:!0,dependencies:["_loginState"],get:Object.assign((function(){return"not_authorized"===this._loginState||"connected"===this._loginState}),{__CW__getter:function(e,t,n,i){return"not_authorized"===i.internalGet(this,t[0+n])||"connected"===i.internalGet(this,t[0+n])}})}),isLoggedInAndAuthorized:a.b({readOnly:!0,dependencies:["_loginState"],get:Object.assign((function(){return"connected"===this._loginState}),{__CW__getter:function(e,t,n,i){return"connected"===i.internalGet(this,t[0+n])}})}),hasRequiredAppPermissions:a.b({readOnly:!0,dependencies:["_grantedPermissions"],get:Object.assign((function(){var e=this._grantedPermissions,t=this.constructor.REQUIRED_APP_PERMISSIONS,n=!0;return t.forEach((function(t){-1===e.indexOf(t)&&(n=!1)})),n}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=this.constructor.REQUIRED_APP_PERMISSIONS,s=!0;return a.forEach((function(e){-1===r.indexOf(e)&&(s=!1)})),s}})}),id:a.b(),displayName:a.b({get:function(e){return String(e||"")},set:te.a}),pictureURL:a.b(),appAlbum:a.b({readOnly:!0,dependencies:["albums"],get:Object.assign((function(){var e=this.albums.filter((function(e){return"app"===e.type}));return e.length?e[0]:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]).filter((function(e){return"app"===e.type}));return r.length?r[0]:null}})}),albums:a.b({get:function(e){return Array.isArray(e)?e:[]},set:te.a}),privacyOptions:a.b({get:function(e){return Array.isArray(e)?e:[]},set:te.a}),defaultPrivacyOption:a.b({readOnly:!0,dependencies:["privacyOptions"],get:Object.assign((function(){var e=this.privacyOptions.filter((function(e){return e.is_currently_selected}));return e.length?e[0]:null}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]).filter((function(e){return e.is_currently_selected}));return r.length?r[0]:null}})}),toString:function(){var e=[];return e.push("isLoggedOut: "+this.isLoggedOut),e.push("isLoggedIn: "+this.isLoggedIn),e.push("isLoggedInAndAuthorized: "+this.isLoggedInAndAuthorized),e.push("hasRequiredAppPermissions: "+this.hasRequiredAppPermissions),e.push("id: "+this.id),e.push("displayName: "+this.displayName),e.push("album count: "+this.albums.length),e.push("has app album: "+!!this.appAlbum),e.push("privacy options count: "+this.privacyOptions.length),e.join("\n")},_loginState:a.b("not_asked"),_grantedPermissions:a.b({readOnly:!0,dependencies:["_permissions"],get:Object.assign((function(){return this._permissions.filter((function(e){return"granted"===e.status})).map((function(e){return e.permission}))}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).filter((function(e){return"granted"===e.status})).map((function(e){return e.permission}))}})}),_declinedPermissions:a.b({readOnly:!0,dependencies:["_permissions"],get:Object.assign((function(){return this._permissions.filter((function(e){return"declined"===e.status})).map((function(e){return e.permission}))}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n]).filter((function(e){return"declined"===e.status})).map((function(e){return e.permission}))}})}),_permissions:a.b(s.c(Array))}),ae=n(453),se=n(138),oe=n(471),le=n(1240),ce=n(278),ue=n(280),de=n(778),he=n(254),pe=n(579),fe=n(246),ge=n(477),me={init:function(){var e=this,t=arguments,n=this._revertablePropertyValues={},i=this.getMetadataByType(J.a);for(var r in i){var a=i[r];a&&a.isRevertable&&(n[r]=this[r])}e.__s._$FV$init.apply(e,t)},revertRevertableProperties:function(e){var t=this._revertablePropertyValues;for(var n in t)t.hasOwnProperty(n)&&(e&&e.hasOwnProperty(n)||(this[n]=t[n]))},__superMap:{_$FV$init:"init"}},_e=ge.a.extend(me,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["cw-menu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}],styles:{font:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"fontStyle",attributes:{},unit:null,property:"font"},"padding-top":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"verticalLabelOffset",attributes:{},unit:"px",property:"padding-top"},"box-sizing":"border-box"}},className:"vs-to-cw-ui-menu-item-view",__QUALIFIED_CLASS_NAME__:"MenuItemView"},content:a.b({didChange:function(e){if(e)for(var t in this.revertRevertableProperties(e),e)e.hasOwnProperty(t)&&(this[t]=e[t])}}),label:a.b({isRevertable:!0}),value:a.b({isRevertable:!0}),isDisabled:a.b({defaultValue:!1,isRevertable:!0}),wantsHighlight:a.b({defaultValue:!1,isRevertable:!0}),isHighlighted:a.b({readOnly:!0,dependencies:["isDisabled","wantsHighlight"],get:Object.assign((function(){return this.wantsHighlight&&!this.isDisabled}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])&&!i.internalGet(this,t[0+n])}})})}),ve=ge.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",classes:["cw-menu-separator-view"]},className:"vs-to-cw-ui-menu-separator-view",__QUALIFIED_CLASS_NAME__:"MenuSeparatorView"},isDisabled:a.b(!0)}),be=n(270),ye=de.a.extend({viewClass:r.b({additionalClassNames:r.b(["cw-submenu-view"]),hasHorizontalScrollIndicator:!1,hasVerticalScrollIndicator:!1,fontStyle:a.b(),verticalLabelOffsetInItemViews:a.b(),_scrollBy:function(e,t){var n=this,i=arguments;if(!this.viewController.isSelectionFinalized){if(!t||this._isAdjustingForScroll)return n.__s._$Hc$_scrollBy.apply(n,i);this._isAdjustingForScroll=!0;var r=this.viewController._possiblyAdjustLayoutForScrollBy(t);if(this._isAdjustingForScroll=!1,!r)return n.__s._$Hc$_scrollBy.apply(n,i)}},__superMap:{_$Hc$_scrollBy:"_scrollBy"}}),view:a.b({strong:!0,downstreamBindings:{fontStyle:"(owner).fontStyle",verticalLabelOffsetInItemViews:"(owner).verticalLabelOffsetInItemViews"}}),isSelectionFinalized:a.b(!1),options:a.b(),shouldIgnorePointerUp:a.b(!1),finalLayout:a.b({strong:!0,defaultValue:s.c(w.a)}),anchorLayout:a.b(),spaceLayout:a.b(I.a.sharedInstance.window),layoutModeToAnchor:a.b(),targetedOptionValue:a.b(),fontStyle:a.b(),requiredInset:a.b(15),menuItemHeight:a.b({get:function(e){return e||Math.ceil(1.5*function(e){if(Ee[e])return Ee[e];document.body.appendChild(Se),Ce.set("font",e);var t=Ce.get("font-size");return document.body.removeChild(Se),Ee[e]=parseInt(t)}(this.fontStyle))}}),verticalLabelOffsetInItemViews:a.b({readOnly:!0,dependencies:["menuItemHeight","anchorLayout.height"],get:Object.assign((function(){return this.menuItemHeight/2-this.getPath("anchorLayout.height")/2|0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/2-i.internalGetPath(this,t[1+n])/2|0}})}),totalVerticalOffset:a.b({readOnly:!0,dependencies:["verticalLabelOffsetInItemViews"],get:Object.assign((function(){return top.it=this,-this.verticalLabelOffsetInItemViews}),{__CW__getter:function(e,t,n,i){return top.it=this,-i.internalGet(this,t[0+n])}})}),desiredSize:a.b({strong:!0,readOnly:!0,dependencies:["options","fontStyle","menuItemHeight"],defaultValue:s.c(he.a),get:te.a,didChange:function(e){var t=this.options,n=this.fontStyle,i=this.menuItemHeight;return e.width=t&&n?function(e,t){var n=B.b(e)+":"+t;if(Ee[n])return Ee[n];for(var i="",r=0;r<e.length;r++)r&&(i+="\n"),i+=e[r].label;document.body.appendChild(Se),Ce.set("font",t),Se.textContent=i;var a=Math.ceil(Se.getBoundingClientRect().width);return Se.innerHTML="",document.body.removeChild(Se),Ee[n]=a}(t,n):0,e.height=t.length*i,e}}),viewClassForItem:function(e){return e.isSeparator?Ie:we},collection:a.b({strong:!0,readOnly:!0,dependencies:["options"],get:Object.assign((function(){var e=this.options;return Array.isArray(e)?k.b.create(e):e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Array.isArray(r)?k.b.create(r):r}})}),rowHeight:a.b({readOnly:!0,binding:"menuItemHeight"}),rowWidth:a.b({readOnly:!0,binding:"finalLayout.width"}),_doInitialLayout:f.h("desiredSize.width","desiredSize.height","spaceLayout","anchorLayout","layoutModeToAnchor","targetedOptionValue","requiredInset","isAttached",(function(){this.updateLayout()})),updateLayout:function(){if(this.isAttached&&this.options){var e=this.options,t=this.desiredSize,n=this.spaceLayout,i=this.anchorLayout,r=this.targetedOptionValue,a=this.requiredInset,s=0|parseFloat(this.view.style.get("padding-top")),o=0|parseFloat(this.view.style.get("padding-left")),l=0|parseFloat(this.view.style.get("padding-right")),c=0|parseFloat(this.view.style.get("padding-bottom")),u=a+s,d=a+c,h=e.map((function(e){return e.value})).indexOf(r),p=-1!==h,f=p?h:0,g=i.top-f*this.menuItemHeight+this.totalVerticalOffset-s;p||(g+=this.menuItemHeight);var m=Math.max(u,g),_=(e.length-h)*this.menuItemHeight+(i.top-m-s)+c+s+this.totalVerticalOffset,v=Math.min(n.height-d-m,_),b=this.finalLayout;P.a.begin().set(b,"x",i.left-o).set(b,"y",m).set(b,"width",t.width+o+l).set(b,"height",v).end(),this._firstCellItemIndex=f,this._firstCellTopPosition=f*this.menuItemHeight-(m-g),this._valueToAutohighlight=r,this._requiredTopInset=u,this._requiredBottomInset=d,this._paddingTop=s,this._paddingLeft=o,this._paddingRight=l,this._paddingBottom=c,this.measureViewport()}},measureViewport:function(){var e=this.isAttached&&this.getPath("view.element");if(e){var t=e.offsetWidth,n=e.offsetHeight-(this._paddingTop+this._paddingBottom||0);this.viewportWidth===t&&this.viewportHeight===n||(P.a.begin().set(this,"viewportWidth",t).set(this,"viewportHeight",n).end(),this.update())}},_possiblyAdjustLayoutForScrollBy:function(e){var t=this.finalLayout.y,n=this.finalLayout.bottom,i=this._requiredTopInset,r=this.spaceLayout.height-this._requiredBottomInset;return!!(t&&i&&n&&r)&&(e>0&&t>i?(this.finalLayout.y=Math.max(i,t-e),this.finalLayout.height=n-Math.max(i,t-e),this.measureViewport(),!0):e<0&&n<r&&(this.finalLayout.height=Math.min(r,n-e)-t,this.measureViewport(),!0))},renderFinalLayout:f.h("finalLayout.top","finalLayout.left","finalLayout.width","finalLayout.height",(function(e,t,n,i){this.view.style.set("top",e).set("left",t).set("width",n).set("height",i)})),update:function(){var e=this,t=arguments,n=e.__s._$3tu$update.apply(e,t);return this._highlightHoveredItemView(),n},_pointerPosition:s.c(ce.a.extend({subtractPoint:function(e){var t=this._reusablePoint||(this._reusablePoint=ce.a.create());return t.x=this.x-e.x,t.y=this.y-e.y,t}})),pointerMoveAtCoords:function(e,t){this._savePointerPosition(e,t),this._highlightHoveredItemView()},pointerUpAtCoords:function(e,t){if(this._savePointerPosition(e,t),!this.shouldIgnorePointerUp){var n=this._highlightHoveredItemView();n&&(n.isDisabled?this.sendEvent("dismiss"):this._finalizeSelectionWithView(n))}},_savePointerPosition:function(e,t){var n=this._pointerPosition;n.x=e,n.y=t},_highlightHoveredItemView:function(){if(!this.isSelectionFinalized){var e=this._pointerPosition.subtractPoint(this.finalLayout);e.y-=this._paddingTop;for(var t=this.layoutController.visibleCells,n=this.presenter.activeViews,i=null,r=0;r<n.length;r++){var a=n.objectAt(r);if(a){var s=t.objectAt(r).containsPoint(e);s!==a.wantsHighlight&&(a.wantsHighlight=s),s&&(i=a)}}return i}},_finalizeSelectionWithView:function(e){this.isSelectionFinalized||(this.isSelectionFinalized=!0,e.wantsHighlight=!1,l.a(Object(be.a)(this._blinkOfViewDidFinish,this,e),5/60*1e3))},_blinkOfViewDidFinish:function(e){e.wantsHighlight=!0,l.a(Object(be.a)(this.sendEvent,this,"userDidSelectMenuItem",e.value),4/60*1e3)},presenter:s.c(pe.a.extend({cellDidMove:function(e){var t=this,n=arguments,i=t.__s._$58k$cellDidMove.apply(t,n);if(!this.owner._valueToAutohighlight)return i;var r=this.viewForCell(e);return r?(r.value===this.owner._valueToAutohighlight&&(this.owner._valueToAutohighlight=null,this.owner._pointerPosition.x=e.x+e.width/2+this.owner.finalLayout.x|0,this.owner._pointerPosition.y=e.y+e.height/2+this.owner.finalLayout.y|0),i):i},itemViewClassForItem:function(e){return this.owner.viewClassForItem(e.handle.value)},__superMap:{_$58k$cellDidMove:"cellDidMove"}})),layoutMetrics:a.b({defaultValue:s.c(fe.b.extend({rowWidth:a.b()})),downstreamBindings:{rowHeight:"(owner).rowHeight",rowWidth:"(owner).rowWidth"}}),layoutDelegate:a.b({defaultValue:r.b({sizeForItem:function(e,t){return he.a.create({height:e.layoutMetrics.rowHeight,width:e.layoutMetrics.rowWidth})},setUpFirstCell:function(e,t){if(void 0===this.owner._firstCellItemIndex)return null;if(!t)return null;var n=t.startHandle.retain(this,"setUpFirstCell");if(!n.isValid)return n.release(this,"setUpFirstCell"),null;var i=this.cellForHandle(n).retain(this,"setUpFirstCell");return n.release(this,"setUpFirstCell"),this.layOutCellInDirection(e,i,1,this.owner._firstCellTopPosition||0,1,this.owner._firstCellLeftPosition||0),i.autorelease(this,"setUpFirstCell")}})}),__superMap:{_$3tu$update:"update"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SubmenuViewController"}}),we=_e.extend({staticMembers:{className:"vs-to-cw-ui-_menu-item-view",__QUALIFIED_CLASS_NAME__:"_MenuItemView"},fontStyle:o.c("parent.fontStyle"),verticalLabelOffset:o.c("parent.verticalLabelOffsetInItemViews")}),Ie=ve,Se=document.createElement("div"),Ce=S.c(Se),Ee={};Ce.set("position","absolute").set("white-space","pre");var Ae=n(468),Oe=a.a.extend({staticMembers:{create:function(e){return O.a(e)&&(e={viewsOutlet:e}),e.defaultValue||(e.defaultValue=s.c(Ae.a)),this.__s._$FO$create.call(this,e)},__superMap:{_$FO$create:"create"},__QUALIFIED_CLASS_NAME__:"MultiChildViewControllerProperty"},viewsOutlet:null,initializeMember:function(e,t){var n=this,i=arguments,r=n.__s._$MZ$initializeMember.apply(n,i),a="_multiChildViewControllerProperty_at_"+t+"_",s=a+"viewsArray",o="_parent"+a+"viewListener",l=a+"viewArrayObserver",c=a+"enteringChildVCs",u=a+"exitingChildVCs";e.registerMetadata(s,H({source:t,outputForInput:function(e){return e.view},inputDidEnter:function(e,t){e[o]=e.listen("view",t.bind(void 0,e)),(this[c]||(this[c]=U.b.getInstance())).push(e),e.willMoveToParentViewController(this)},inputDidExit:function(e){e[o].disconnect(),delete e[o],(this[u]||(this[u]=U.b.getInstance())).push(e),e.willMoveToParentViewController(null)}}));var d=this.viewsOutlet;return e.registerMetadata(l,f.h("view",s,s+".contentsDidChange",(function(e,t){if(e){var n=t?t.length:0,i=this.view[d];i.beginBatchedChanges(),i.clear();for(var r=0;r<n;r++)i.setIndex(r,t.objectAt(r));i.endBatchedChanges();for(var a=this[c],s=this[u],o=a?a.length:0,l=s?s.length:0,h=0;h<o;h++){var p=a[h];this.addChildViewController(p),p.didMoveToParentViewController(this)}for(var f=0;f<l;f++){var g=s[f];this.removeChildViewController(g),g.didMoveToParentViewController(null)}a&&U.b.disposeInstance(a),s&&U.b.disposeInstance(s),this[c]=this[u]=null}}))),r},__superMap:{_$MZ$initializeMember:"initializeMember"}}),Te=function(){return Oe.create.apply(Oe,arguments)},Me=se.b("MENU_LAYOUT",(function(e){e("PULLDOWN"),e("SUBMENU"),e("TARGET_OPTION")})),De=oe.a.extend({viewClass:r.b({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",name:"submenuViews"}],classes:["cw-menu-view"]}}},fadeOut:function(e){this._isFadingOut||(this._isFadingOut=!0,this.style.set("opacity",1).set("transition","opacity 300ms"),l.a(Object(be.a)(this.style.set,this.style,"opacity",0)),l.a(e,300))},wheel:function(e){e&&e.nativeEvent&&e.nativeEvent.preventDefault()}}),submenuViewControllers:Te("submenuViews"),submenuRects:H({desiredOutputType:Array,source:"submenuViewControllers",outputForInput:function(e){return e.finalLayout},inputDidEnter:function(e,t){e._menuViewController_submenuRects_rectListener=e.listen("finalLayout",t.bind(void 0,e)).retain()},inputDidExit:function(e){e._menuViewController_submenuRects_rectListener.disconnect(),e._menuViewController_submenuRects_rectListener.release()}}),options:a.b(),anchor:a.b({strong:!0}),anchorLayout:a.b(o.c("anchorLayoutMeasurer.targetLayout")),anchorLayoutMeasurer:a.b({strong:!0,defaultValue:s.c(le.a.extend({owner:a.b(),target:o.c("owner.anchor"),shouldMeasure:o.c("owner.view.isAttached")}))}),layoutModeToAnchor:J.d(Me.PULLDOWN),targetedOptionValue:J.d(),fontStyle:J.d(),_createInitialMenu:f.h("options",(function(e){e||N.b("Must provide `options` with a CW.UI.MenuViewController"),this.submenuViewControllers.splice(0,this.submenuViewControllers.length,ye.create({options:this.options,anchorLayout:this.anchorLayout,layoutModeToAnchor:this.layoutModeToAnchor,targetedOptionValue:this.targetedOptionValue,fontStyle:this.fontStyle,shouldIgnorePointerUp:this.bindingFor("shouldIgnorePointerUp")})),this.propertyChanged("submenuViewControllers")})),shouldIgnorePointerUp:a.b(!0),init:function(){var e=this,t=arguments;e.__s._$23e$init.apply(e,t),l.a(this.stopIgnoringPointerUp.bind(this),I.a.sharedInstance.isEdgeOrIE?2e3:333)},show:function(){var e=this,t=arguments;e.__s._$2Dz$show.apply(e,t),this._recomputeLayoutOnWindowResize||(this._recomputeLayoutOnWindowResize=function(){this.anchorLayoutMeasurer.recomputeLayoutIfNecessary();var e=this.submenuViewControllers.objectAt(0);e&&e.updateLayout&&e.updateLayout()}.bind(this)),c.a(window,"resize",this._recomputeLayoutOnWindowResize)},hide:function(){var e=this,t=arguments;e.__s._$2VY$hide.apply(e,t),this._recomputeLayoutOnWindowResize&&d.a(window,"resize",this._recomputeLayoutOnWindowResize)},stopIgnoringPointerUp:function(){this.isDisposed||(this.shouldIgnorePointerUp=!1)},pointerMove:function(e){return this._pointerMoveCount=(this._pointerMoveCount||0)+1,this._pointerMoveCount===(I.a.sharedInstance.isEdgeOrIE?7:3)&&(this.shouldIgnorePointerUp=!1),this._invokeOnArrayItems(this.submenuViewControllers,"pointerMoveAtCoords",e.clientX,e.clientY),!0},pointerUp:function(e){if(this._invokeOnArrayItems(this.submenuViewControllers,"pointerUpAtCoords",e.clientX,e.clientY),!this.shouldIgnorePointerUp){var t=ce.a.create();t.x=e.clientX,t.y=e.clientY,this.submenuRects.some((function(e){return e.containsPoint(t)}))||this.dismiss()}return!0},pointerDown:function(){return!0},pointerLeave:function(){return!0},_invokeOnArrayItems:function(e,t){for(var n=ue.a(arguments,0,2),i=e.length,r=!Array.isArray(e),a=0;a<i;a++){var s=r?e.objectAt(a):e[a];s[t].apply(s,n)}},dismiss:function(){this.view.fadeOut(Object(be.a)(this.hide,this))},userDidSelectMenuItem:function(){return this.dismiss(),!1},__superMap:{_$23e$init:"init",_$2Dz$show:"show",_$2VY$hide:"hide"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MenuViewController"}}),Pe=b.a.extend({owner:a.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayLabel",attributes:{}}],classes:["cw-select-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]},className:"MISSING_NAMESPACE--select-view",__QUALIFIED_CLASS_NAME__:"SelectView"},isDisabled:a.b(!1),noSelectionPlaceholderLabel:a.b(""),value:a.b(),defaultValue:a.b({dependencies:["options"],writeDependencies:[],get:Object.assign((function(e){if(e)return e;var t=this.options;return t&&t.length?this.pickDefaultValueInOptions(t):null}),{__CW__getter:function(e,t,n,i){if(e)return e;var r=i.internalGet(this,t[0+n]);return r&&r.length?this.pickDefaultValueInOptions(r):null}}),set:function(e){return e}}),pickDefaultValueInOptions:function(e){return e[0].value},options:a.b({didChange:function(e){Le(e,this.value)||(this.value=this.defaultValue,this.didChangeValueForNewOptions())}}),didChangeValueForNewOptions:f.i(),selectedOption:a.b({dependencies:["value","options"],get:Object.assign((function(){return Le(this.options,this.value)}),{__CW__getter:function(e,t,n,i){return Le(i.internalGet(this,t[1+n]),i.internalGet(this,t[0+n]))}}),writeDependencies:["value"],set:Object.assign((function(e){this.value=e?e.value:null}),{__CW__setter:function(e,t,n,i,r){n[0+i]=e?e.value:null}}),writeDependencySetPathMap:[!1]}),displayLabel:a.b({readOnly:!0,dependencies:["selectedOption","noSelectionPlaceholderLabel"],get:Object.assign((function(){var e=this.selectedOption;return e?e.label:this.noSelectionPlaceholderLabel}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r?r.label:i.internalGet(this,t[1+n])}})}),pointerDown:function(){if(!this.isDisabled)return this.showPopupMenu(),!0},showPopupMenu:function(){De.create({options:this.options,fontStyle:this.style.get("font"),anchor:this,targetedOptionValue:this.value,nextResponder:this}).show()},userDidSelectMenuItem:function(e){var t=V.a(e,ae.a)?e.context:e;this.value=t}});function Le(e,t){if(!e)return null;for(var n=0,i=e.length;n<i;n++){var r=e[n];if(r.hasOwnProperty("value")&&r.value===t)return r;if(r.hasOwnProperty("options")){var a=Le(r.options,t);if(a)return a}}return null}var Re=b.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"privacySelectionView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",classes:["fbex-fb-logo",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isStandardDPR",truevalue:"fbex-standard-dpr",falsevalue:"fbex-nonstandard-dpr",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"Facebook"}],classes:["fbex-title"]}],classes:["fbex-title-container"]},{type:"VIEWOUTLET",tagname:"view",name:"albumSelectionView"}],classes:["fbex-toolbar-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPrivacyKnowable",truevalue:"",falsevalue:"fbex-hide-privacy",attributes:{}}]},className:"vendor-sharing-facebook-ui-toolbar-view",__QUALIFIED_CLASS_NAME__:"FacebookUIToolbarView"},extension:a.b(),privacyOptions:a.b(),albumOptions:a.b(),selectedPrivacyId:a.b(o.c("privacySelectionView.value")),selectedAlbumId:a.b(o.c("albumSelectionView.value")),selectedAlbumOption:a.b(o.c("albumSelectionView.selectedOption")),isPrivacySelectable:a.b({readOnly:!0,dependencies:["selectedAlbumOption"],get:Object.assign((function(){var e=this.selectedAlbumOption;return!!e&&("app"===e.type||"timeline"===e.type)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return!!r&&("app"===r.type||"timeline"===r.type)}})}),selectedAlbumDefaultPrivacySearchCriteria:a.b({readOnly:!0,dependencies:["selectedAlbumOption"],get:Object.assign((function(){var e=this.selectedAlbumOption;if(!e)return null;if("app"===e.type||"timeline"===e.type)return[{is_currently_selected:!0},{type:"ALL_FRIENDS"},{type:"SELF"}];var t=ne(e.privacy);return t?[{type:t},{type:"ALL_FRIENDS"},{type:"SELF"}]:[{type:"SELF"}]}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(!r)return null;if("app"===r.type||"timeline"===r.type)return[{is_currently_selected:!0},{type:"ALL_FRIENDS"},{type:"SELF"}];var a=ne(r.privacy);return a?[{type:a},{type:"ALL_FRIENDS"},{type:"SELF"}]:[{type:"SELF"}]}})}),isPrivacyKnowable:a.b({readOnly:!0,dependencies:["isPrivacySelectable","selectedAlbumOption"],get:Object.assign((function(){if(this.isPrivacySelectable)return!0;var e=this.selectedAlbumOption;return!(!e||!ne(e.privacy))}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=i.internalGet(this,t[1+n]);return!(!r||!ne(r.privacy))}})}),choosePrivacyOptionWhenSelectedAlbumChanges:f.h("privacySelectionView.didChangeValueForNewOptions","selectedAlbumDefaultPrivacySearchCriteria","selectedAlbumId",(function(e,t,n){var i=this.privacySelectionView.options;if(i&&i.length&&t){var r=this.privacySelectionView.value;if(this._lastSelectedAlbumId!==(this._lastSelectedAlbumId=n)&&(r=null),!r){for(var a=0;a<t.length;a++)for(var s=t[a],o=0;o<i.length;o++){var l=i[o],c=!0;for(var u in s)if(s.hasOwnProperty(u)&&l[u]!==s[u]){c=!1;break}if(c)return void(this.privacySelectionView.selectedOption=l)}this.privacySelectionView.selectedOption=i[1]||i[0]||null}}})),privacySelectionView:a.b({strong:!0,defaultValue:s.c(Pe.extend({additionalClassNames:r.b(["fbex-privacy-selection"]),noSelectionPlaceholderLabel:i.d("Toolbar.Privacy"),isDisabled:a.b({readOnly:!0,dependencies:["parent.isPrivacySelectable","parent.extension.isSubmitting"],get:Object.assign((function(){return!this.getPath("parent.isPrivacySelectable")||this.getPath("parent.extension.isSubmitting")}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}})}),options:a.b({readOnly:!0,dependencies:["parent.privacyOptions"],get:Object.assign((function(){return(this.getPath("parent.privacyOptions")||[]).map((function(e){return{value:e.id,label:e.description,type:e.type,is_currently_selected:e.is_currently_selected}}))}),{__CW__getter:function(e,t,n,i){return(i.internalGetPath(this,t[0+n])||[]).map((function(e){return{value:e.id,label:e.description,type:e.type,is_currently_selected:e.is_currently_selected}}))}})}),pickDefaultValueInOptions:function(){return null}}))}),albumSelectionView:a.b({strong:!0,defaultValue:s.c(Pe.extend({additionalClassNames:r.b(["fbex-album-selection"]),noSelectionPlaceholderLabel:i.d("Toolbar.Album"),isDisabled:o.c("parent.extension.isSubmitting"),options:a.b({readOnly:!0,dependencies:["parent.albumOptions"],get:Object.assign((function(){return(this.getPath("parent.albumOptions")||[]).map((function(e){return{isDisabled:!e.can_upload,value:e.id,label:e.name,type:e.type,privacy:e.privacy}}))}),{__CW__getter:function(e,t,n,i){return(i.internalGetPath(this,t[0+n])||[]).map((function(e){return{isDisabled:!e.can_upload,value:e.id,label:e.name,type:e.type,privacy:e.privacy}}))}})})}))}),_isStandardDPR:a.b({readOnly:!0,dependencies:[D.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){var e=D.a.sharedInstance.devicePixelRatio;return 1===e||2===e}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return 1===r||2===r}})})}),xe=b.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"toolbarView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",name:"textEntryView"},{type:"VIEWOUTLET",tagname:"view",name:"thumbnailView"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"authMessage",attributes:{signal:"authMessageDidRender"}}],name:"authMessageContainer",classes:["fbex-auth-message"]}],name:"mainContainer",classes:["fbex-main-container"]},{type:"VIEWOUTLET",tagname:"view",name:"footerView"},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],classes:["fbex-ui-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInAuthMode",truevalue:"fbex-auth-mode",falsevalue:"fbex-post-mode",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInSpinnerMode",truevalue:"fbex-spinner-mode",attributes:{}}]},className:"MISSING_NAMESPACE-facebook-ui-view",__QUALIFIED_CLASS_NAME__:"FacebookUIView"},extension:a.b(),user:a.b(o.c("extension.user")),shareData:a.b(o.c("extension.shareData")),userMessage:a.b(o.c("textEntryView.userMessage")),selectedPrivacyId:a.b(o.c("toolbarView.selectedPrivacyId")),selectedAlbumId:a.b(o.c("toolbarView.selectedAlbumId")),isInAuthMode:a.b(!0),isInSpinnerMode:a.b({readOnly:!0,dependencies:["extension.isUIMostlyStable"],get:Object.assign((function(){return!this.extension.isUIMostlyStable}),{__CW__getter:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}})}),generalSpacing:a.b(15),authMessage:a.b({readOnly:!0,dependencies:["isInAuthMode","user.isLoggedIn","shareData"],get:Object.assign((function(){if(!this.isInAuthMode)return"";if(this.user.isLoggedIn)return i.d("Facebook.iCloudPermissions");var e=this.shareData||Fe,t=(e.images||Ne).length,n=(e.videos||Ne).length;return t&&!n?1===t?i.d("Facebook.Login.Photos.1"):i.d("Facebook.Login.Photos.More"):!t&&n?1===n?i.d("Facebook.Login.Videos.1"):i.d("Facebook.Login.Videos.More"):1===t&&1===n?i.d("Facebook.Login.Photos.1.Videos.1"):1===t&&n>1?i.d("Facebook.Login.Photos.1.Videos.More"):t>1&&1===n?i.d("Facebook.Login.Photos.More.Videos.1"):t>1&&n>1?i.d("Facebook.Login.Photos.More.Videos.More"):i.d("Facebook.Login")}),{__CW__getter:function(e,t,n,r){if(!r.internalGet(this,t[0+n]))return"";if(r.internalGetPath(this,t[1+n]))return i.d("Facebook.iCloudPermissions");var a=r.internalGet(this,t[2+n])||Fe,s=(a.images||Ne).length,o=(a.videos||Ne).length;return s&&!o?1===s?i.d("Facebook.Login.Photos.1"):i.d("Facebook.Login.Photos.More"):!s&&o?1===o?i.d("Facebook.Login.Videos.1"):i.d("Facebook.Login.Videos.More"):1===s&&1===o?i.d("Facebook.Login.Photos.1.Videos.1"):1===s&&o>1?i.d("Facebook.Login.Photos.1.Videos.More"):s>1&&1===o?i.d("Facebook.Login.Photos.More.Videos.1"):s>1&&o>1?i.d("Facebook.Login.Photos.More.Videos.More"):i.d("Facebook.Login")}})}),toolbarView:a.b({strong:!0,defaultValue:s.c(Re.extend({extension:o.c("parent.extension"),privacyOptions:o.c("parent.user.privacyOptions"),albumOptions:o.c("parent.user.albums")}))}),textEntryView:a.b({strong:!0,defaultValue:s.c(T.extend({maxLength:o.c("parent.extension.maximumUserMessageLength"),isDisabled:o.c("parent.extension.isSubmitting"),_focusOnAppear:f.h("parent.isInAuthMode","parent.isInSpinnerMode","isDisabled",(function(){var e=this;this.getPath("parent.isInAuthMode")||this.getPath("parent.isInSpinnerMode")||this.isDisabled||(this.focus(),this.retain(this,"self-hold during async focus"),l.a((function(){e.focus(),e.autorelease(e,"self-hold during async focus")})))}))}))}),thumbnailView:a.b({strong:!0,defaultValue:s.c($.extend({availableWidth:a.b({readOnly:!0,dependencies:["parent.layout.width","parent.isInAuthMode"],get:Object.assign((function(){return this.parent.isInAuthMode?this.parent.layout.width:.25*this.parent.layout.width+75}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):.25*i.internalGetPath(this,t[0+n])+75}})}),availableHeight:a.b({readOnly:!0,dependencies:["isAttached","parent.isInAuthMode","parent.authMessageContainerHeight"],writeDependencies:[],get:Object.assign((function(){return this.isAttached?this.parent.mainContainer.offsetHeight-this.parent.isInAuthMode*this.parent.authMessageContainerHeight|0:0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?this.parent.mainContainer.offsetHeight-i.internalGetPath(this,t[1+n])*i.internalGetPath(this,t[2+n])|0:0}})}),availableImages:a.b({readOnly:!0,dependencies:["parent.shareData"],get:Object.assign((function(){var e=this.getPath("parent.shareData");return e?(e.videos||Ne).concat(e.images||Ne):Ne}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?(r.videos||Ne).concat(r.images||Ne):Ne}})}),paddingTop:o.c("parent.generalSpacing"),paddingLeft:o.c("parent.generalSpacing"),paddingRight:o.c("parent.generalSpacing"),paddingBottom:a.b({readOnly:!0,dependencies:["parent.isInAuthMode","parent.generalSpacing"],get:Object.assign((function(){return this.parent.isInAuthMode?0:this.parent.generalSpacing}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?0:i.internalGetPath(this,t[1+n])}})})}))}),footerView:a.b({strong:!0,defaultValue:s.c(A.extend({user:o.c("parent.user"),extension:o.c("parent.extension"),isInAuthMode:o.c("parent.isInAuthMode")}))}),_spinnerView:a.b({strong:!0,defaultValue:s.c(y.a.extend({size:48,color:"rgba(0, 0, 0, 0.5)",additionalClassNames:r.b(["fbex-main-spinner"])}))}),spinnerView:a.b({readOnly:!0,dependencies:["_spinnerView","isInSpinnerMode"],get:Object.assign((function(){return this.isInSpinnerMode?this._spinnerView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[1+n])?i.internalGet(this,t[0+n]):null}})}),layout:a.b({strong:!0,defaultValue:s.c(w.a.extend({windowSize:a.b(I.a.sharedInstance.window),width:a.b({readOnly:!0,dependencies:["windowSize.width"],get:Object.assign((function(){return 0|Math.min(500,Math.max(350,.9*this.windowSize.width))}),{__CW__getter:function(e,t,n,i){return 0|Math.min(500,Math.max(350,.9*i.internalGetPath(this,t[0+n])))}})}),height:a.b({readOnly:!0,dependencies:["windowSize.height"],get:Object.assign((function(){return 0|Math.min(300,Math.max(200,.8*this.windowSize.height))}),{__CW__getter:function(e,t,n,i){return 0|Math.min(300,Math.max(200,.8*i.internalGetPath(this,t[0+n])))}})}),x:a.b({readOnly:!0,dependencies:["windowSize.width","width"],get:Object.assign((function(){return Math.ceil(Math.max(10,this.windowSize.width/2-this.width/2))}),{__CW__getter:function(e,t,n,i){return Math.ceil(Math.max(10,i.internalGetPath(this,t[0+n])/2-i.internalGet(this,t[1+n])/2))}})}),y:a.b({readOnly:!0,dependencies:["windowSize.height","height"],get:Object.assign((function(){return Math.ceil(Math.max(10,this.windowSize.height/2-this.height/2))}),{__CW__getter:function(e,t,n,i){return Math.ceil(Math.max(10,i.internalGetPath(this,t[0+n])/2-i.internalGet(this,t[1+n])/2))}})})}))}),_maintainAuthMessageContainerHeight:f.g("authMessageDidRender",(function(){this.propertyChanged("authMessageContainerHeight")})),authMessageContainerHeight:a.b({readOnly:!0,get:function(){return this.authMessageContainer?this.authMessageContainer.offsetHeight:0}}),_renderLayout:f.h("layout.x","layout.y","layout.width","layout.height",(function(e,t,n,i){this.style.set("left",e).set("top",t).set("width",n).set("height",i),this.propertyChanged("authMessageContainerHeight")})),_maintainIFrameLayout:f.h("isAttached","_renderLayout","isInAuthMode","extension.iframe",(function(){if(this.isAttached&&this.getPath("extension.iframe")){var e=this.isInAuthMode?this.footerView.continueSubmitButton.element.getBoundingClientRect():Ve;S.c(this.extension.iframe).set("top",0|e.top).set("left",0|e.left).set("width",Math.ceil(e.width)).set("height",Math.ceil(e.height)).set("position","fixed").set("z-index",1e3).set("opacity",1e-4).set("border","none")}})),_renderThumbnailAndTextFieldLayout:f.h("thumbnailView.availableWidth","thumbnailView.availableHeight","thumbnailView.actualWidth","thumbnailView.actualHeight","isInAuthMode","isAttached",(function(){if(this.isAttached){var e=this.textEntryView,t=this.thumbnailView;if(e&&t){var n=this.isInAuthMode;e.style.set("display",n?"none":"block").set("right",t.actualWidth+(0|parseFloat(e.style.get("padding-right")))|0),t.style.set("right",n?t.availableWidth/2-t.actualWidth/2:0).set("top",n?t.availableHeight/2-t.actualHeight/2:0)}}})),_animateOut:f.h("extension.state",(function(){var e=this.getPath("extension.state"),t=this.extension&&this.extension.constructor;!this._isAnimatingOut&&t&&e&&this.getPath("extension.isStateFinal")&&(this._isAnimatingOut=!0,this.style.set("transition","transform 200ms ease-in").translate(0,0),this.retain(this,"self-hold during exit animation"),C.a(function(){e===t.FINISHED?this.style.translate(0,-this.layout.top-this.layout.height):this.style.scale(.8),l.a(function(){this.style.clear("transition"),this._isAnimatingOut=!1,this.release(this,"self-hold during exit animation")}.bind(this),200)}.bind(this)))}))}),Ne=[],Fe={},Ve={top:-1e4,left:-1e4,width:1,height:1},ke=v.a.extend({extension:a.b(),nextResponder:a.b(),view:a.b({downstreamBindings:{extension:"(owner).extension",isInAuthMode:"(owner).isInAuthMode"}}),viewClass:xe,userMessage:a.b(o.c("view.userMessage")),selectedAlbumId:a.b(o.c("view.selectedAlbumId")),selectedPrivacyId:a.b(o.c("view.selectedPrivacyId")),isInAuthMode:a.b({readOnly:!0,dependencies:["extension.user.isLoggedInAndAuthorized","extension.user.hasRequiredAppPermissions"],get:Object.assign((function(){return!(this.getPath("extension.user.isLoggedInAndAuthorized")&&this.getPath("extension.user.hasRequiredAppPermissions"))}),{__CW__getter:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FacebookUIViewController"}}),Be=n(93),je=n(387),Ue=n(221),Ge=n(740),He=n(288),We=He.a.RESOLVED.FULFILLED.name,$e=He.a.RESOLVED.REJECTED.name,ze={staticMembers:{isEnabledForBrowser:!!globalThis.MessageChannel,url:a.b({set:function(e){return e},get:function(e){return!O.a(e)||/(\?|\&)env=/.test(e)?e:e+(-1===e.indexOf("?")?"?":"&")+"env="+location.host.split(".")[0]}}),domain:a.b({readOnly:!0,dependencies:["url"],get:Object.assign((function(){return je.a.create(this.url).origin}),{__CW__getter:function(e,t,n,i){return je.a.create(i.internalGet(this,t[0+n])).origin}})}),capabilities:["allow-scripts","allow-forms","allow-popups","allow-same-origin"],proxiedMethods:{_loadSandboxDependencies:"loadSandboxDependencies"}},iframe:a.b(),_iframePointerEventsPort:a.b({didChange:function(e){var t=u.a(this._handleIframePointerEvent,this),n=this._ipep_lastPort;this._ipep_lastPort=e,n&&d.a(n,"message",t),e&&c.a(e,"message",t)}}),_handleIframePointerEvent:function(e){var t=this.iframePointerEventsTargetView,n=t.element,i={get:function(){return n}};Ke(e,"target",i),Ke(e,"currentTarget",i),Ke(e,"srcElement",i),t&&t.sendEvent(e.data,ae.a.create({type:e.data,cwType:e.data,target:n,nativeEvent:e}))},iframePointerEventsTargetView:a.b({strong:!0,didChange:function(e){var t=this._ownHitTestsBackup,n=this._ifpetv_lastSeenValue;if(this._ifpetv_lastSeenValue=e,e&&(t.set(e,e.hasOwnProperty("pointerHitTest")&&e.pointerHitTest),e.pointerHitTest=this._pointerHitTestOverrideForIFPTV),n){var i=t.get(n);!1!==i?n.pointerHitTest=i:delete n.pointerHitTest,t.delete(n)}}}),_ownHitTestsBackup:J.d((function(){return new WeakMap})),_pointerHitTestOverrideForIFPTV:function(e){return this.element.contains(e.target)},loadDependencies:function(){var e=this,t=arguments,n=He.a.create(),i=this.iframe=document.createElement("iframe"),r=this.constructor.capabilities,a=this.constructor.url;return this._createProxyMethods(),r&&(i.sandbox=r.join(" ")),c.a(this.iframe,"load",this._iFrameDidLoad.bind(this,n)),c.a(this.iframe,"error",n.reject.bind(n)),i.classList.add("vendor-sandbox"),i.width=i.height=0,i.src=a,document.body.appendChild(i),He.a.all([e.__s._$24n$loadDependencies.apply(e,t),n])},_iFrameDidLoad:function(e){var t=this,n=new MessageChannel;this._iframePointerEventsPort=n.port1,this._iframePointerEventsPort.start(),this.retain(this,"self-hold for _iframeDidLoad");var i=!1,r=function(){i||(i=!0,t.autorelease(t,"self-hold for _iframeDidLoad"),e.reject())};l.a(r,500),this._loadSandboxDependencies(n.port2).then((function(){i||(i=!0,t.autorelease(t,"self-hold for _iframeDidLoad"),e.resolve())})).catch(r)},_createProxyMethods:function(){var e=this.constructor.proxiedMethods;for(var t in e)if(!Object.prototype.hasOwnProperty(t)){var n=e[t];this._createProxyMethod(t,n||t)}},_createProxyMethod:function(e,t){this[e]&&N.b(this.toString()+" already has "+e);var n=function(){var e=new MessageChannel,n=e.port1,i=this.iframe.contentWindow,r=this.constructor.domain,a=[e.port2],s=Array.prototype.map.call(arguments,(function(e){return e instanceof MessagePort?(a.push(e),{_sandboxPortPlaceholder:a.length-1}):e})),o=He.a.create();o.retain();var l=function(e){var i=e&&e.data?e.data:null;switch(i&&i.state&&(i.state===We||i.state===$e)||(i={state:$e,response:{error:{type:"app",message:"Invalid MessageChannel response from Sandbox received."}}}),i.state){case We:o.resolve(i.response),i.response&&!i.response.isRecordStatUnnecessary&&this._recordFulfilledPromise(t,i.response);break;case $e:o.reject(i.response),i.response&&!i.response.isRecordStatUnnecessary&&this._recordRejectedPromise(t,i.response)}n.close(),o.release()};return c.a(n,"message",Object(be.a)(l,this),!0),n.start(),i.postMessage({targetMethod:t,arguments:s},r,a),o}.bind(this);this[e]=Ue.a(n)},_recordFulfilledPromise:function(e,t){var n=Be.a.cloudOSService;if(n){var i=Ge.a(e)+"PromiseFulfilled";n.recordStat(i,{message:i+" from Sandboxed iframe via MessageChannel"})}},_recordRejectedPromise:function(e,t){var n=Be.a.cloudOSService;if(n){var i=Ge.a(e)+"PromiseRejected",r=t.error&&t.error.message?t.error.message:"No error message provided";n.recordStat(i,{errorType:i,errorTitle:r})}},terminate:function(){var e=this,t=arguments,n=this.iframe;n&&n.parentNode&&n.parentNode.removeChild(n),e.__s._$3vP$terminate.apply(e,t)},__superMap:{_$24n$loadDependencies:"loadDependencies",_$3vP$terminate:"terminate"}};function Ke(e,t,n){try{Object.defineProperty(e,t,n)}catch(i){Object.defineProperty(e,"_"+t,n)}}var qe=n(160),Qe=n(348),Ye={dispose:function(){var e=this,t=arguments;this._throttledFunctionKeys.forEach(this._cleanUpThrottledFunctionForDispose,this),e.__s._$5X$dispose.apply(e,t)},_throttledFunctionDataForKey:function(e){var t="_"+e+"_throttledFunctionData",n=this.hasOwnProperty(t)&&this[t];return n||(n=this[t]=new et(this[t])),n},_cleanUpThrottledFunctionForDispose:function(e){this._fireThrottledFunctionIfNeeded(e);var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId)},_fireThrottledFunctionIfNeeded:function(e){var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId);var n=t.status;if(0!==n)if(1===n)t.status=0;else if(2===n){t.status=1;var i=t.args;if(t.func.apply(this,i),1===t.status)for(var r=i.length,a=0;a<r;a++)i[a]=null;t.timeoutId=l.a(Ze,t.time,this,e)}},__superMap:{_$5X$dispose:"dispose"}},Ze=function(e,t){e||N.b("ThrottledFunction lost its object.",arguments),e._fireThrottledFunctionIfNeeded(t)},Xe=qe.a.extend({requiresSupport:Ye,func:null,throttleTime:100,shouldAlwaysDefer:!1,init:function(e,t,n){this.func=e,void 0!==t&&(this.throttleTime=t),void 0!==n&&(this.shouldAlwaysDefer=n),this.__s._$yZ$init.call(this)},initializeMember:function(e,t){e._throttledFunctionKeys=e._throttledFunctionKeys||[],e.hasOwnProperty("_throttledFunctionKeys")||(e._throttledFunctionKeys=e._throttledFunctionKeys.slice()),e._throttledFunctionKeys.push(t);var n=e._throttledFunctionDataForKey(t);n.time=this.throttleTime,n.shouldAlwaysDefer=this.shouldAlwaysDefer;var i=function(){var e=this._throttledFunctionDataForKey(t);(0!==e.status||(e.shouldAlwaysDefer||(e.status=1,e.func.apply(this,arguments)),e.timeoutId=l.a(Ze,e.time,this,t),e.shouldAlwaysDefer))&&(Qe.a(e.args,arguments,0,0),e.status=2)},r=this.func;return n.func=function(){var e=r.apply(this,arguments);e&&i.apply(this,arguments)},i},__superMap:{_$yZ$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ThrottledFunction"}}),Je=function(e,t,n){return Xe.create.apply(Xe,arguments)},et=function(e){this.args=[],e&&Object.assign(this,e)};et.prototype={status:0,args:null,timeoutId:0,time:-1,shouldAlwaysDefer:!1,func:null};var tt={mixinDependencies:[n(300).a],_self:a.b((function(){return this})),canShowUI:a.b(!0),extensionViewController:a.b({strong:!0,downstreamBindings:{extension:"(owner)._self",nextResponder:"(owner)._self"}}),spinnerViewController:a.b({strong:!0,defaultValue:s.c(v.a.extend({viewClass:y.a.extend({color:"white",size:64})}))}),show:function(){var e=this._popupVC;e.show.apply(e,arguments)},hide:function(){var e=this._popupVC;e.hide.apply(e,arguments)},isActiveInUI:a.b(o.c("_popupVC.isActivePane")),terminate:function(){var e=this,t=arguments;this.hide(),e.__s._$au$terminate.apply(e,t)},_popupVC:a.b({strong:!0,defaultValue:s.c(oe.a.extend({owner:a.b(),viewClass:r.b({additionalClassNames:["vendor-extension-modal-root-view"]}),contentController:a.b({strong:!0,readOnly:!0,dependencies:["owner.canShowUI","owner.extensionViewController","owner.spinnerViewController"],get:Object.assign((function(){return this.owner.canShowUI?this.owner.extensionViewController:this.owner.spinnerViewController}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):i.internalGetPath(this,t[2+n])}})}),duration:200,show:function(){var e=this,t=arguments;if(this._hideTimeout&&(clearTimeout(this._hideTimeout),this._hideTimeout=null,this.owner.release(),this.release(this,"self-hold during hide animation delay")),!this.isAttached){var n=this.view.style;n.set("opacity",0).set("transition","opacity "+this.duration+"ms"),e.__s._$12q$show.apply(e,t),C.a(function(){this._hideTimeout||this.view.style.set("opacity",1)}.bind(this))}},init:function(){var e=this,t=arguments;e.__s._$1Bv$init.apply(e,t)},_hideOverride:function(e){!this._hideTimeout&&this.isAttached&&(this.view.style.set("opacity",0),this.retain(this,"self-hold during hide animation delay"),this.owner.retain(),this._hideTimeout=l.a(function(t){e.apply(this,t),this._hideTimeout=null,this.owner.release(),this.release(this,"self-hold during hide animation delay")}.bind(this,arguments),this.duration))},__superMap:{_$12q$show:"show",_$1Bv$init:"init"}}))}),__superMap:{_$au$terminate:"terminate"}},nt=L.a.extend(ze,tt,{staticMembers:{vendorName:"Facebook",buttonClassName:"vendor-sharing-facebook-button",displayName:i.d("Share.DisplayNames.Facebook"),url:"https://facebook.icloud-sandbox.com/sandbox/facebook/current/",proxiedMethods:r.b({openLoginWindowOnClick:"",getLoginStatus:"",getPermissions:"",getUserProfile:"",getUserPicture:"",getAlbums:"",getPrivacyOptions:"",createAlbum:"",postToAlbum:"",_logout:"logout"}),capabilities:null,shareDataValidator:_.a,previousUserTextLostToError:null,__QUALIFIED_CLASS_NAME__:"FacebookExtension"},maximumAllowedLoadTime:1e4,maximumUserMessageLength:a.b(5e4),extensionViewController:s.c(ke),user:a.b({strong:!0,defaultValue:s.c(re)}),userMessage:a.b(o.c("extensionViewController.userMessage")),selectedAlbumId:a.b(o.c("extensionViewController.selectedAlbumId")),selectedPrivacyId:a.b(o.c("extensionViewController.selectedPrivacyId")),userMessageCharsRemaining:a.b({readOnly:!0,dependencies:["maximumUserMessageLength","userMessage"],get:Object.assign((function(){return this.maximumUserMessageLength-this.userMessage.length}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])-i.internalGet(this,t[1+n]).length}})}),isLoggingOut:a.b(!1),iframePointerEventsTargetView:o.c("extensionViewController.view.footerView.continueSubmitButton"),isUIMostlyStable:a.b({readOnly:!0,dependencies:["user.isLoginStateKnown","_hasPopulatedUserOrPreparedButton"],get:Object.assign((function(){return this.getPath("user.isLoginStateKnown")&&this._hasPopulatedUserOrPreparedButton}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),isExpectingLoginPopupResponse:a.b(!1),_hasPopulatedUserOrPreparedButton:a.b(!1),init:function(){var e=this,t=arguments;e.__s._$1QJ$init.apply(e,t),l.a(Object(be.a)(this.show,this),0),this._loginStatusTimer.retain()},show:function(){var e=this,t=arguments;e.__s._$1Vm$show.apply(e,t),c.a(document,"keydown",u.a(this.handleKeyDown,this))},hide:function(){var e=this,t=arguments;d.a(document,"keydown",u.a(this.handleKeyDown,this)),e.__s._$1aQ$hide.apply(e,t)},handleKeyDown:function(e){this.isActiveInUI&&this.state===this.constructor.READY&&e.which===h.a.ESC&&this.terminatePendingUserConfirmation()},loadingDidFail:function(){var e=this,t=arguments;this.showErrorAlertDialogWithStat({message:i.d("Facebook.Cannot.Connect.Message"),description:i.d("Facebook.Cannot.Connect.Description")}),e.__s._$1kS$loadingDidFail.apply(e,t)},canSubmit_getter:function(){var e=this,t=arguments;return e.__s._$1mh$canSubmit_getter.apply(e,t)&&this.userMessageCharsRemaining>=0},canSubmit_dependencies:r.b(["userMessageCharsRemaining"]),submit:function(){var e=this,t=arguments;e.__s._$1tN$submit.apply(e,t);var n=+new Date,r=function(e){var t=i.d("Facebook.PostToAlbum.Upload.InProgress");return e.returnValue=t,t};c.a(window,"beforeunload",r);var a=this.postToAlbum(this.selectedAlbumId,this.selectedPrivacyId,this.userMessage,this.shareData.images.map(function(e){return this.constructor.getLargestMediaRes(e,(function(e){return!!e.url&&!1===e.hasGeo&&"image"===(e.mimeType+"").substring(0,5)})).url}.bind(this)));a.then(function(e){this._recordStats("FacebookPostToAlbumSuccess",{duration:+new Date-n,numImages:e.successes.length}),this._markAsFinishedAndTerminate()}.bind(this)),a.catch(function(e){e=e||{};var t,r="FacebookPostToAlbumFailure",a=p.a(e.failures);a.forEach((function(e){e.url="REDACTED"})),this._recordStats(r,{errorType:r,errorTitle:r,errorData:JSON.stringify(a),numImagesSuccess:e.successes?e.successes.length:0,numImagesFailure:e.failures?e.failures.length:0,duration:+new Date-n}),t=1===this.shareData.images.length?"Facebook.PostToAlbum.1.Failed":e.successes&&e.successes.length?"Facebook.PostToAlbum.Some.Failed":"Facebook.PostToAlbum.All.Failed",this.showErrorAlertDialogWithStat({message:i.d("Facebook.PostToAlbum.Failed.Message"),description:i.d(t)}),this.state=this.constructor.READY}.bind(this)),a.finally((function(){d.a(window,"beforeunload",r)}))},terminatePendingUserConfirmation:function(){this.userMessage?this._showErrorAlertDialog({message:i.d("Facebook.ConfirmCancel.Message"),description:i.d("Facebook.ConfirmCancel.Description"),primaryButton:{title:i.d("Facebook.ConfirmCancel.Cancel"),target:this,action:"_markAsCanceledAndTerminate"},alternateButton:{title:i.d("Facebook.ConfirmCancel.Continue")}}):this._markAsCanceledAndTerminate()},beginExpectingLoginPopupResponse:function(){this.isExpectingLoginPopupResponse||(this.isExpectingLoginPopupResponse=!0)},logout:function(){if(!this.isLoggingOut)return this.isLoggingOut=!0,this._populatingUserToken=void 0,this._logout().finally(function(e){this.user._loginState=e&&e.status||"unknown",this.isLoggingOut=!1,this.user.isLoggedInAndAuthorized?this.showErrorAlertDialogWithStat({message:i.d("Facebook.Cannot.Logout.Message"),description:i.d("Facebook.Cannot.Logout.Description")}):this._prepareContinueButton()}.bind(this))},displayLogoutDialog:function(){this._showAlertDialog({message:i.d("Facebook.ExplainLogout.Message"),description:i.d("Facebook.ExplainLogout.Description"),primaryButton:{title:i.d("Facebook.ExplainLogout.OpenFacebook"),buttonWillActivate:function(){var e=.8*window.outerWidth;e<1080&&(e=Math.min(window.outerWidth-40,1080));var t=.7*window.outerHeight;t<640&&(t=Math.min(window.outerHeight-40,640));var n=window.screenX+window.outerWidth/2-e/2|0,i=window.screenY+window.outerHeight/2-t/2|0;this._closeFacebookLogoutPopup(),this._facebookLogoutPopup=window.open("https://www.facebook.com/",null,"width="+e+",height="+t+",left="+n+",top="+i),this._frequentCheckLoginStatus(!0)}.bind(this)},alternateButton:{title:i.d("Facebook.ExplainLogout.Cancel")},showsError:!1})},_closeFacebookLogoutPopupWhenLoggedOut:f.h("user.isLoggedOut",(function(e){e&&this._closeFacebookLogoutPopup()})),_closeFacebookLogoutPopup:function(){this._facebookLogoutPopup&&(this._facebookLogoutPopup.close(),this._facebookLogoutPopup=null)},_didBecomeReady:f.h("state",(function(e){this.state===this.constructor.READY&&this._loginStatusTimer._restartDueToActivity()})),_loginStatusTimer:s.c(g.a.extend(Ye,{delays:[0,.25,.5,1,2,4,8,15,30,60,720,1440,1/0].map((function(e){return 6e4*e})),action:"_checkLoginStatus",start:function(){var e=this,t=arguments;this.owner.state===this.owner.constructor.READY&&(this._setUpListenersIfNeeded(),e.__s._$4gV$start.apply(e,t))},_setUpListenersIfNeeded:function(){this._hasOutstandingListeners||(this._hasOutstandingListeners=!0,this._restartDueToActivity=this._restartDueToActivity.bind(this),c.a(document,"mousemove",this._restartDueToActivity),c.a(document,"pointerdown",this._restartDueToActivity),c.a(document,"keypress",this._restartDueToActivity),c.a(window,"resize",this._restartDueToActivity))},dispose:function(){var e=this,t=arguments;this._hasOutstandingListeners&&(d.a(document,"mousemove",this._restartDueToActivity),d.a(document,"pointerdown",this._restartDueToActivity),d.a(document,"keypress",this._restartDueToActivity),d.a(window,"resize",this._restartDueToActivity)),e.__s._$4xK$dispose.apply(e,t)},callAction:function(){var e=this,t=arguments;e.__s._$4yM$callAction.apply(e,t),this._restartDueToActivity(!0)},_restartDueToActivity:Je((function(e){!0!==e&&this.restart()}),15e3),__superMap:{_$4gV$start:"start",_$4xK$dispose:"dispose",_$4yM$callAction:"callAction"}})),_maintainUserInfo:f.h("user.hasRequiredAppPermissions","user.isLoggedInAndAuthorized",(function(e,t){var n=e&&t;this._lastNUI!==n&&(this._lastNUI=n,n?this._populateUser():this._depopulateUser())})),_checkLoginStatus:function(){this.state===this.constructor.READY&&(this._isCheckingLoginStatus||(this._isCheckingLoginStatus=!0,m.b.info("Checking Facebook for user login status. Time is "+new Date+"."),this.getLoginStatus().finally(function(e){e&&e.status&&(this.user._loginState=e.status),this.user.isLoggedInAndAuthorized?this.getPermissions().finally(function(e){e&&e.data&&(this.user._permissions=e.data),this.user.hasRequiredAppPermissions||this._prepareContinueButton(),this._isCheckingLoginStatus=!1}.bind(this)):(this._prepareContinueButton(),this._isCheckingLoginStatus=!1)}.bind(this))))},_frequentCheckLoginStatus:function(e){e||this._checkLoginStatus(),clearTimeout(this._frequentCheckTimeout),this._frequentCheckTimeout=null,this._frequentCheckLoginStatusCount=e?0:this._frequentCheckLoginStatusCount+1,this._frequentCheckLoginStatusCount<30&&(this._frequentCheckTimeout=l.a(u.a(this._frequentCheckLoginStatus,this),2e3))},_prepareContinueButton:function(){if(m.b.info("User is not logged in to Facebook or has not approved the required app permissions."),!this.isExpectingLoginPopupResponse){var e=function(t){t&&t.error&&"Sandbox button was never pressed"===t.error.message||(this.isExpectingLoginPopupResponse&&(this.isExpectingLoginPopupResponse=!1),t&&t.status&&(this.user._loginState=t.status,t.authResponse&&t.authResponse.grantedScopes&&(this.user._permissions=t.authResponse.grantedScopes.split(",").map((function(e){return{permission:e,status:"granted"}})))),this.user.isLoggedInAndAuthorized&&this.user.hasRequiredAppPermissions||this.openLoginWindowOnClick(this.user.constructor.ALL_APP_PERMISSIONS).then(e,e))}.bind(this);this.openLoginWindowOnClick(this.user.constructor.ALL_APP_PERMISSIONS).then(e,e),this._hasPopulatedUserOrPreparedButton||(this._hasPopulatedUserOrPreparedButton=!0)}},_populateUser:function(){m.b.info("User is logged in with proper app permissions. Starting load of user data.");var e=function(e){return function(){if(this._populatingUserToken===s)return e.apply(this,arguments)}.bind(this)}.bind(this),t=e((function(e){if(!e||!e.id||!e.name)return this._showLoginErrorAlert(e),void this.terminate();o.id=e.id,o.displayName=i.d("Facebook.UserName",{firstName:e.first_name,lastName:e.last_name})})),n=e((function(e){e&&e.data&&e.data.url&&(o.pictureURL=e.data.url)})),r=e((function(e){e||(e={}),e.data||(e.data=[]),e.data.unshift({id:"me",name:i.d("Facebook.Timeline"),type:"timeline",can_upload:!0,privacy:"friends"}),o.albums=e.data.filter((function(e){return e.can_upload}))})),a=e((function(e){if(!e||!e.data)return this._showLoginErrorAlert(e),void this.terminate();o.privacyOptions=e.data})),s=this._populatingUserToken=(Math.random()+"").substring(2),o=this.user;He.a.all([this.getAlbums().finally(r),this.getUserProfile().finally(t),this.getUserPicture().finally(n),this.getPrivacyOptions().finally(a)]).then(function(){this._populatingUserToken=void 0,this._hasPopulatedUserOrPreparedButton||(this._hasPopulatedUserOrPreparedButton=!0),m.b.info("Loading of user data from Facebook complete.")}.bind(this))},_depopulateUser:function(){this._populatingUserToken=void 0;var e=this.user;e.id=null,e.displayName=null,e.pictureURL=null,e.albums=null,e.privacyOptions=null},_showLoginErrorAlert:function(e){this.showErrorAlertDialogWithStat({message:i.d("Facebook.Cannot.Login.Message"),description:i.d("Facebook.Cannot.Login.Description")},e)},_showGenericErrorAlert:function(){this.showErrorAlertDialogWithStat({message:i.d("Facebook.Error.Message"),description:i.d("Facebook.Error.Description")})},_findMinURLExpiryInAssetsArray:function(e){for(var t,n,i=1/0,r=0;r<e.length;r++)if((t=e[r])&&t.length)for(var a=0;a<t.length;a++)!(n=t[a]).hasGeo&&n.urlExpiry&&(i=Math.min(i,n.urlExpiry));return i},_findMinURLExpiryInShareData:f.h("shareData",(function(e){var t,n,i,r,a,s;if(this._expiryTimeout&&clearInterval(this._expiryTimeout),e&&(r=e.images||[],a=e.videos||[],(t=Math.min(this._findMinURLExpiryInAssetsArray(r),this._findMinURLExpiryInAssetsArray(a)))!==1/0)){if(i=t-(n=+Date.now()),n>=t)return;m.b.info("URL EXPIRY: Setting timeout for asset expiration to "+i),s=function(){this._recordStats("FacebookNonGeoURLExpiration",{errorType:"FacebookNonGeoURLExpiration",errorTitle:"One or more URL's have expired"}),this._showGenericErrorAlert(),this.terminate()}.bind(this),this._expiryTimeout=l.a(s,i)}})),_markAsFinishedAndTerminate:function(){this.state=this.constructor.FINISHED,this.terminate()},_markAsCanceledAndTerminate:function(){this.state=this.constructor.CANCELED,this.terminate()},terminate:function(){var e=this,t=arguments;e.__s._$8zk$terminate.apply(e,t),this._expiryTimeout&&clearInterval(this._expiryTimeout),this.state===this.constructor.FAILED&&(this.constructor.previousUserTextLostToError=this.userMessage||"")},dispose:function(){var e=this,t=arguments;this._loginStatusTimer.release(),clearTimeout(this._frequentCheckTimeout),e.__s._$9D3$dispose.apply(e,t)},__superMap:{_$1QJ$init:"init",_$1Vm$show:"show",_$1aQ$hide:"hide",_$1kS$loadingDidFail:"loadingDidFail",_$1mh$canSubmit_getter:"canSubmit_getter",_$1tN$submit:"submit",_$8zk$terminate:"terminate",_$9D3$dispose:"dispose"}})},function(e,t,n){"use strict";n.r(t),n.d(t,"videoDerivativeStore",(function(){return D})),n(1),n(0),n(2);var i=n(669),r=n(7),a=n(15),s=n(20),o=n(78),l=n(161),c=n(350),u=n(238),d=n(42),h=n(756),p=n(266),f=n(203),g=n(1233),m=n(485),_=n(759),v=n(13),b=n(298),y=n(324),w=n(410),I={_smdls_loadRefs:a.d((function(){return new y.a})),createLoadRef:function(e,t){var n=(t||w.a.create(this)).retain(this).autorelease(this);return e?n.resolve():(n._didBeginWantingCancel=n._smdls_willDispose=this._smdls_loadRefCancelledOrDisposed,this._smdls_loadRefs.add(n)),n},claimLoadRef:function(e,t){return _.a(e,w.a)||v.b("Object of type "+b.a(this)+" is attempting to claim a loadRef of the wrong type."),this.createLoadRef(t,e)},didLoad:function(){this._smdls_clearLoadRefsWithMethod("resolve")},didError:function(e){this._smdls_clearLoadRefsWithMethod("reject",e)},cancelLoad:function(){this._smdls_clearLoadRefsWithMethod("cancel")},_smdls_clearLoadRefsWithMethod:function(e,t){for(var n=this._smdls_loadRefs;n.length;){var i=n.oneItem;n.remove(i),i[e](t)}},_smdls_loadRefCancelledOrDisposed:f.b((function(e){this._smdls_loadRefs.remove(e),this._smdls_loadRefs.length||this.cancelLoad()})),cleanup:function(){var e=this,t=arguments;this.cancelLoad(),e.__s._$13i$cleanup.apply(e,t)},__superMap:{_$13i$cleanup:"cleanup"}},S=n(484),C=n(197),E=n(179),A=n(804),O=n(803),T=n(585),M=m.a.extend(I,h.b).extend({element:r.b((function(){var e=document.createElement("video");return e.setAttribute("playsinline",""),e.controls="controls",e.classList.add("video-derivative-element"),e})),rectInElement:r.b({readOnly:!0,dependencies:["element","hasMetadata"],get:Object.assign((function(){if(!this.hasMetadata)return null;var e=this.element,t=this._reusableRect||(this._reusableRect={});return t.x=t.y=0,t.width=e.videoWidth,t.height=e.videoHeight,t}),{__CW__getter:function(e,t,n,i){if(!i.internalGet(this,t[1+n]))return null;var r=i.internalGet(this,t[0+n]),a=this._reusableRect||(this._reusableRect={});return a.x=a.y=0,a.width=r.videoWidth,a.height=r.videoHeight,a}})}),pause:function(){var e=this.element;e.readyState>0&&!e.paused&&e.pause(),e.autoplay=!1},play:function(){var e=this.element;e.readyState>=4&&e.paused&&(this.currentTime>=this.duration-.005&&(this.currentTime=0),e.play()),e.autoplay=!0},stop:function(){var e=this.element;e.readyState>0&&(e.currentTime=0),this.pause()},isPlaying:a.d({get:function(){var e=this.element;return e.readyState>0&&!e.paused}}),currentTime:a.d({get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}}),duration:a.d({readOnly:!0,get:function(){return this.element.duration}}),didFinishPlaying:s.i(),hasMetadata:r.b({isRevertible:!0,defaultValue:!1}),isDisplayable:r.b({isRevertible:!0,defaultValue:!1}),isLoaded:r.b({readOnly:!0,binding:o.c("isDisplayable"),didChange:function(e){this._isLoaded_value!==(this._isLoaded_value=e)&&e&&this.didLoad()}}),error:r.b({isRevertible:!0,defaultValue:null,didChange:function(e){e&&this.didError(e)}}),cleanup:function(){var e=this,t=arguments;this._selfLoadRef=null,this.cancelLoad(),this._revertToUnloadedState(),this.revertRevertibleProperties(),e.__s._$1KG$cleanup.apply(e,t)},resetForChangeset:function(){var e=this,t=arguments;this.cancelLoad(),e.__s._$1LU$resetForChangeset.apply(e,t)},loadSelfIfNeeded:function(){if(!this.isLoaded&&!this._selfLoadRef){var e=this._selfLoadRef=this._load().retain(this,"retaining own load ref for self-load"),t=p.a(e.release,e,this,"retaining own load ref for self-load");this._selfLoadRef.then(t,t)}},_selfLoadRef:a.d({weak:!0}),_load:function(e){var t=e?this.claimLoadRef(e,this.isLoaded):this.createLoadRef(this.isLoaded);return this.isLoaded||this._isLoading||(this._isLoading=!0,this._doLoadWork()),t},_doLoadWork:f.b((function(){var e=this;if(!this.isLoaded&&this._isLoading){var t=this.media;if(t.constructor.isURLExpiryTooSoon(this))t.fetchDerivativeInfo((function(){var n=t.derivativeInfoForDerivativeId(e.derivativeId);return n&&Object(S.e)(n,e),n})).then(this._doLoadWork,this._videoHadError);else{var n=this.element;l.a(n,"error",this._videoHadError),l.a(n,"canplay",c.a(this.set,this,"isDisplayable",!0)),l.a(n,"loadeddata",c.a(this.set,this,"hasMetadata",!0)),l.a(n,"ended",c.a(this.didFinishPlaying,this)),n.src=this.url?this.url+"&og="+encodeURIComponent(O.a.RESOURCE_DOWNLOAD.value):"",n.load(),this._sendVideoDerivativeRequestStat()}}})),_videoHadError:f.b((function(e){!this.isLoaded&&this._isLoading&&(this.error=e instanceof Error?e:e.target.error,this._revertToUnloadedState())})),_revertToUnloadedState:function(){this._isLoading=!1;var e=this.element;u.a(e,"error",this._videoHadError),u.a(e,"canplay",c.a(this.set,this,"isDisplayable",!0)),u.a(e,"loadeddata",c.a(this.set,this,"hasMetadata",!0)),u.a(e,"ended",c.a(this.didFinishPlaying,this)),e.src="",e.autoplay=!1,this.isDisplayable=!1,this.hasMetadata=!1},cancelLoad:function(){var e=this,t=arguments;e.__s._$2Ij$cancelLoad.apply(e,t),this.isLoaded||this._revertToUnloadedState()},_sendVideoDerivativeRequestStat:function(){var e=C.a.derivativeRequestFeedbackReportProbability;if(d.n().feedbackService&&(e>=1||e>=0&&Math.random()<e)){var t=this.media,n=t&&t.serverDerivativeInfosByDerivativeId,i=n&&n[this.transcodeSourceDerivativeId],r=i?i.width*i.height:void 0;Object(T.a)(Object.assign({derivativeRequestReason:A.a.ONEUP_NONHLS_VIDEO_PLAYBACK_BEGIN.value,derivativeApproxArea:g.a(this.width*this.height),derivativeNameByArea:Object(E.f)(this.width*this.height),derivativeNameNominal:this.derivativeName,derivativeApproxByteSize:g.a(this.byteSize),derivativeUTI:this.uti,derivativeMIMETypeForWebClient:this.mimeType,derivativeIsTranscoded:this.isDynamic,derivativeRequestReportProbability:e,derivativeOffscreeninessAtSend:0},i?{derivativeTranscodeSourceApproxByteSize:g.a(i.byteSize),derivativeTranscodeSourceApproxDerivativeArea:g.a(r),derivativeTranscodeSourceDerivativeNameByArea:Object(E.e)(r/1.2),derivativeTranscodeSourceDerivativeNameNominal:i.derivativeName,derivativeTranscodeSourceUTI:i.uti}:{}))}},__superMap:{_$1KG$cleanup:"cleanup",_$1LU$resetForChangeset:"resetForChangeset",_$2Ij$cancelLoad:"cancelLoad"},staticMembers:{__QUALIFIED_CLASS_NAME__:"VideoDerivative"}}),D=i.ObjectStore.extend({itemClass:M,computeStoreKey:function(e){return e.derivativeId},maxCachedItemCount:1,staticMembers:{__QUALIFIED_CLASS_NAME__:"VideoDerivativeStore"}}).create()},function(e,t,n){"use strict";n.r(t),n.d(t,"BurstPresenterView",(function(){return F})),n(1),n(0),n(4),n(6),n(3),n(2),n(66),n(28),n(31),n(32),n(30),n(71),n(67),n(72),n(11),n(90),n(79);var i=n(7),r=n(78),a=n(55),s=n(469),o=n(117),l=n(155),c=n(20),u=n(301),d=n(697),h=n(42),p=n(13),f=n(202),g=n(199),m=n(574),_=n(15),v=n(51),b=n(193),y=n(17),w=n(231),I=n(789),S=n(1254),C=n(790),E=n(25),A=n(1291),O=n(1272),T=n(266),M=n(327),D=n(332),P=n(815),L=n(814),R=n(120),x={count:0};function N(e,t){var n=R.a(t)?0|t.count:t,i=n===t?x:t,r=e[Math.min(n,e.length-1)];return i.count=function(e){return String(e)}(n),o.d(r,i)}var F=D.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",name:"enterBurstButton"},{type:"VIEWOUTLET",tagname:"view",name:"burstSelectionToolbar"},{type:"VIEWOUTLET",tagname:"view",name:"burstOneUpView"}],classes:["pok-burst-presenter-view"]}},__QUALIFIED_CLASS_NAME__:"BurstPresenterView"},burstCount:i.b(r.c("media.burstCount")),wantsFullUIControl:r.c("hasBurstMode"),wantsBurstMode:i.b(!1),canHaveBurstMode:i.b(r.c("_canHaveBurstMode_ratchet.value")),_canHaveBurstMode_ratchet:i.b({strong:!0,defaultValue:a.c(I.a.extend({allowsDowngrades:!1,targetValue:r.c("owner.isSteadilyAloneInParent")}))}),hasBurstMode:i.b({readOnly:!0,dependencies:["wantsBurstMode","canHaveBurstMode"],get:Object.assign((function(){return this.wantsBurstMode&&this.canHaveBurstMode}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])&&i.internalGet(this,t[1+n])}})}),enterBurstButton:i.b({strong:!0,defaultValue:a.c(s.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-enter-burst-button"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageTop",attributes:{},unit:"px",property:"top"},left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"owner.pinnedImageLeft",attributes:{},unit:"px",property:"left"}}}}},label:o.d("OneUp.Burst.Button.MakeASelection"),action:"enterBurstMode"}))}),allSelectedItems:i.b({readOnly:!0,type:l.b,strong:!0,dependencies:["didEnterBurstMode","_burstOneUpView.promotionAlterations","media.burstMedias","media.burstMedias.contentsDidChange"],get:function(){return this._filterAllMediasByIsSelected(!0)}}),allNonSelectedItems:i.b({readOnly:!0,type:l.b,strong:!0,dependencies:["didEnterBurstMode","_burstOneUpView.promotionAlterations","media.burstMedias","media.burstMedias.contentsDidChange"],get:function(){return this._filterAllMediasByIsSelected(!1)}}),didEnterBurstMode:c.i(),_selectionIsAllOrNone:i.b({readOnly:!0,type:Boolean,dependencies:["allSelectedItems","allNonSelectedItems"],get:Object.assign((function(){return u.a(this.allNonSelectedItems)||u.a(this.allSelectedItems)}),{__CW__getter:function(e,t,n,i){return u.a(i.internalGet(this,t[1+n]))||u.a(i.internalGet(this,t[0+n]))}})}),_rerenderSelfWhenExitingBurstMode:c.h("burstOneUpView","burstOneUpView.targetMedia","burstOneUpView.transition.sourceView","burstOneUpView.transition.targetView",(function(){var e=this.isRenderDisabled();this._rswebm_last_isRenderDisabled!==(this._rswebm_last_isRenderDisabled=e)&&this.renderSelfSoon()})),_resetBurstModeWhenFallingOffscreen:c.h("isShowingInParent",(function(e){e||this.resetBurstMode()})),enterBurstMode:function(){this._burstOneUpView.targetMedia=this.media,this.wantsBurstMode=!0,this.didEnterBurstMode(),this.zoomLevel=this.unzoomedZoomLevel},exitBurstMode:function(){this.wantsBurstMode=!1,d.a(this._burstOneUpView.promotionAlterations),this._burstOneUpView.targetMedia=null},resetBurstMode:function(){this.exitBurstMode(),this._canHaveBurstMode_ratchet.reset()},commitPromotionAlterations:function(){return this.media.commitBurstPromotionAlterations(this._burstOneUpView.promotionAlterations)},deleteNonSelectedItemsAndThenExitBurstMode:function(){var e=this.allNonSelectedItems;!e||e.some((function(e){return!e}))?this.showCommitFailAlert():(e.forEach((function(e){return e.delete()})),h.n().commit()),this.exitBurstMode()},showKeepSelectionDialogue:function(){var e={iconNames:["photos-icon"],message:N(["","Alert.Burst.Message.1","Alert.Burst.Message.2","Alert.Burst.Message.More"],this.allNonSelectedItems.length),primaryButton:{title:o.d("Alert.Burst.KeepAll"),target:this,action:"exitBurstMode"},alternateButton:{title:o.d("Alert.Burst.KeepSelection"),target:this,action:"deleteNonSelectedItemsAndThenExitBurstMode"},otherButton:{title:o.d("Alert.Cancel.Button.Title")}};p.b("No BaseAlertViewController available",e)},showCommitFailAlert:function(){var e={iconNames:["photos-icon"],message:o.d("Alert.Burst.Selection.Error"),primaryButton:{title:o.d("Alert.OK.Button.Title")}};p.b("No BaseAlertViewController available",e)},commitPromotionAlterationsAndExitBurstMode:function(){var e=this;this._commitInProgress=!0,this.commitPromotionAlterations().then((function(){e._commitInProgress=!1,e._selectionIsAllOrNone?e.exitBurstMode():e.showKeepSelectionDialogue()})).catch((function(){e._commitInProgress=!1,e.showCommitFailAlert()}))},isRenderDisabled:function(){var e=this,t=arguments;if(e.__s._$2Lf$isRenderDisabled.apply(e,t))return!0;var n=this.burstOneUpView;if(!n)return!1;var i=n.transition;if(!i)return!!n.targetMedia;var r=i.sourceView,a=i.targetView;return!(r&&!a||a&&!r)},cleanup:function(){var e=this,t=arguments;this.resetBurstMode(),e.__s._$2iA$cleanup.apply(e,t)},_filterAllMediasByIsSelected:function(e){var t=this.getPath("_burstOneUpView.promotionAlterations");if(this.media&&this.media.burstMedias)return this.media.burstMedias.filter((function(n){var i=n.pk;return t.hasOwnProperty(i)?t[i]===e:n.isPromotedFromBurst===e}))},burstSelectionToolbar:i.b({readOnly:!0,dependencies:["hasBurstMode","_burstSelectionToolbar","_burstSelectionToolbar.isNotFullyRetracted"],get:Object.assign((function(){return this.hasBurstMode||this.getPath("_burstSelectionToolbar.isNotFullyRetracted")?this._burstSelectionToolbar:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n])?i.internalGet(this,t[1+n]):null}})}),_commitInProgress:i.b(!1),_burstSelectionToolbar:i.b({strong:!0,downstreamBindings:{allSelectedItems:"(owner).allSelectedItems",_commitInProgress:"(owner)._commitInProgress"},defaultValue:a.c(f.a.extend(S.a,C.a,{owner:i.b(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"burstCountString",attributes:{}}],name:"burstCountElement",classes:["pok-burst-count-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"makeASelectionString",attributes:{}}],name:"makeASelectionElement",classes:["pok-make-selection-text"]},{type:"VIEWOUTLET",tagname:"view",name:"burstModificationSpinner"},{type:"VIEWOUTLET",tagname:"view",name:"cancelButton"},{type:"VIEWOUTLET",tagname:"view",name:"doneButton"}],classes:["pok-burst-selection-toolbar"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.baseInsetsProvider.insetTop",attributes:{},unit:"px",property:"top"},"line-height":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"viewportHeight",attributes:{},unit:"px",property:"line-height"}}}},additionalClassNames:g.b(["pok-burst-selection-toolbar"]),retractionAttachment:"top",retractionAmount:w.b(1),fadesWhileRetracting:!0,viewportWidth:r.c("parent.viewportWidth"),viewportHeight:33,burstCountString:i.b({readOnly:!0,dependencies:["owner.burstCount"],get:Object.assign((function(){var e=this.getPath("owner.burstCount");return e?N(E.arrayPool.getAutodisposingInstanceFromParams("","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"),e):""}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?N(E.arrayPool.getAutodisposingInstanceFromParams("","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"),r):""}})}),allSelectedItems:i.b(),makeASelectionString:i.b({readOnly:!0,dependencies:["allSelectedItems","allSelectedItems.length"],get:Object.assign((function(){var e=this.allSelectedItems;if(e)return N(["OneUp.Burst.Toolbar.MakeASelection","OneUp.Burst.Toolbar.Selection.1","OneUp.Burst.Toolbar.Selection.2","OneUp.Burst.Toolbar.Selection.More"],e.length)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return N(["OneUp.Burst.Toolbar.MakeASelection","OneUp.Burst.Toolbar.Selection.1","OneUp.Burst.Toolbar.Selection.2","OneUp.Burst.Toolbar.Selection.More"],r.length)}})}),_commitInProgress:i.b(),burstModificationSpinner:i.b({strong:!0,downstreamBindings:{isVisible:"(owner)._commitInProgress"},defaultValue:a.c(m.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"visible",attributes:{}}]}}},size:20,isVisible:i.b()}))}),cancelButton:i.b({strong:!0,downstreamBindings:{isDisabled:"(owner)._commitInProgress"},defaultValue:a.c(s.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-cancel-button"]}},label:o.d("OneUp.Burst.Toolbar.Cancel"),action:"exitBurstMode"}))}),doneButton:i.b({strong:!0,downstreamBindings:{isDisabled:"(owner)._commitInProgress"},defaultValue:a.c(s.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["pok-done-button"]}},label:o.d("OneUp.Burst.Toolbar.Done"),action:"commitPromotionAlterationsAndExitBurstMode"}))}),_renderSelf:c.h("viewportWidth","burstCountString",(function(e,t){var n=Math.ceil(A.a(t,"13px helvetica")),i=Math.ceil(A.a(this.makeASelectionString,"13px helvetica")),r=Math.ceil(A.a(this.cancelButton.label,"15px helvetica")),a=this.burstModificationSpinner.size,s=11,o=e-Math.ceil(A.a(this.doneButton.label,"15px helvetica"))-11,l=o-11-r,c=l-11-a,u=l-11-i>s+n+11?Math.round(e/2-i/2):-1e4;l>s+n+11||(s=-1e4),this.burstCountElement.style.left=s+"px",this.makeASelectionElement.style.left=u+"px",this.burstModificationSpinner.element.style.left=c+"px",this.cancelButton.element.style.left=l+"px",this.doneButton.element.style.left=o+"px"})),_animateUponGettingOrLosingBurstMode:c.h("owner.hasBurstMode",(function(e){e&&this.unretract(),e||this.retract()}))}))}),_adjustForToolbarInset:c.h("_burstSelectionToolbar.retractedHeight",(function(e){this.registerInsetTop(this._burstSelectionToolbar,e)})),_adjustForBurstOneUpThumbstripInset:c.h("_burstOneUpView.thumbnailsStripView.retractedHeight",(function(e){this.registerInsetBottom(this._burstOneUpView.thumbnailsStripView,e)})),_maintainBurstOneUpAsSurrogateOneUpNavigee:c.h("hasBurstMode",(function(){this.sendEvent("useSurrogateOneUpNavigee",this.hasBurstMode?this._burstOneUpView:null)})),burstOneUpView:i.b({readOnly:!0,dependencies:["hasBurstMode","_burstOneUpView","_burstOneUpView.thumbnailsStripView.isNotFullyRetracted"],get:Object.assign((function(){return this.hasBurstMode||this.getPath("_burstOneUpView.thumbnailsStripView.isNotFullyRetracted")?this._burstOneUpView:null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])||i.internalGetPath(this,t[2+n])?i.internalGet(this,t[1+n]):null}})}),_burstOneUpView:i.b({strong:!0,defaultValue:a.c(L.a.extend(C.a,{collection:r.c("parent.media.burstMedias"),viewportWidth:r.c("parent.viewportWidth"),viewportHeight:r.c("parent.viewportHeight"),baseInsetsProvider:r.c("parent"),promotionAlterations:i.b(a.c(Object)),isMediaAtLeastTentativelyPromoted:function(e){var t=this.promotionAlterations,n=e.pk;return t.hasOwnProperty(n)?t[n]:e.isPromotedFromBurst},tentativelyTogglePromotionForMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)?this.tentativelyDemoteMedia(e):this.tentativelyPromoteMedia(e)},tentativelyDemoteMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)&&(this.promotionAlterations[e.pk]=!1,this.propertyChanged("promotionAlterations"))},tentativelyPromoteMedia:function(e){this.isMediaAtLeastTentativelyPromoted(e)||(this.promotionAlterations[e.pk]=!0,this.propertyChanged("promotionAlterations"))},getTransitionFromViewToView:function(){var e=this,t=arguments,n=e.__s._$6am$getTransitionFromViewToView.apply(e,t);return n&&n.distanceX&&(n.distanceX=0),n},viewClassForMedia:function(){var e=this,t=arguments,n=e.__s._$6dq$viewClassForMedia.apply(e,t);return n&&(n=this.viewClassForAllMedias),n},viewClassForAllMedias:_.d((function(){return D.a.extend({owner:i.b(this),isRenderDisabled:function(){var e=this,t=arguments;return e.__s._$6kT$isRenderDisabled.apply(e,t)||!this.getPath("owner.owner.burstOneUpView")},_rerenderSelfWhenExitingBurstMode:c.h("owner.owner.burstOneUpView",(function(){this.renderSelfSoon()})),staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-promoted-from-burst-circle",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"doesMediaAppearPromotedFromBurst",truevalue:"pok-promoted",attributes:{}}],styles:{right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageRight",attributes:{},unit:"px",property:"right"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"pinnedImageBottom",attributes:{},unit:"px",property:"bottom"}}}],classes:["pok-burst-child-photo-presenter-view"]}}},doesMediaAppearPromotedFromBurst:i.b({readOnly:!0,dependencies:["media.pk","owner.promotionAlterations","media.isPromotedFromBurst"],get:Object.assign((function(){var e=this.getPath("media.pk"),t=this.getPath("owner.promotionAlterations");return!(!e||!t)&&(t.hasOwnProperty(e)?t[e]:this.getPath("media.isPromotedFromBurst"))}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return!(!r||!a)&&(a.hasOwnProperty(r)?a[r]:i.internalGetPath(this,t[2+n]))}})}),pointerDown:function(e){return e.target===this.element||this.owner.tentativelyTogglePromotionForMedia(this.media),!0},__superMap:{_$6kT$isRenderDisabled:"isRenderDisabled"}})})),shouldUIBeClear:i.b({readOnly:!0,dependencies:["targetMediaView.wantsUIControl","transition.targetView","transition.sourceView"],get:Object.assign((function(){if(this.getPath("targetView.wantsUIControl"))return!0;var e=this.getPath("transition.targetView"),t=this.getPath("transition.sourceView");return!!(e&&!t||t&&!e)}),{__CW__getter:function(e,t,n,i){if(this.getPath("targetView.wantsUIControl"))return!0;var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]);return!!(r&&!a||a&&!r)}})}),_ensureEntireMediaRangeImmediately:c.h("collection","collection.length",(function(e,t){if(e&&t)return this.owner.media.loadBurstMediasForRange(0,t-1)})),ensureMediaRange:v.a,_compensateForDoubleThumbnailsStripView:c.h("thumbnailsStripView.retractedHeight",(function(e){this.registerInsetBottom(this.thumbnailsStripView+"compensation",-e)})),thumbnailsStripView:a.c(P.a.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",classes:["pok-center-arrow"],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"insetCenterX",attributes:{},unit:"px",property:"left"},top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"topCoordOfCenterOfInsetTop",attributes:{},unit:"px",property:"top"}}},{type:"VIEWOUTLET",tagname:"view",name:"spinnerView"}],styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"parent.parent.parent.thumbnailsStripView.retractedHeight",attributes:{},unit:"px",property:"bottom"}}}}},targetMediaIndex:r.c("parent.targetMediaIndex"),collection:r.c("parent.collection"),viewportWidth:r.c("parent.viewportWidth"),viewportHeight:85,minimumHeight:55,allowsRetractionDuringResize:!1,fadesWhileRetracting:!0,retractionAmount:w.b(1),expandsTargetedThumbs:!1,thumbAspectRatio:r.c("parent.parent.media.aspectRatio"),thumbRendererClass:g.b({doesMediaAppearPromotedFromBurst:i.b({readOnly:!0,dependencies:["media.pk","ownerStripView.owner.promotionAlterations","media.isPromotedFromBurst"],get:Object.assign((function(){var e=this.getPath("media.pk"),t=this.getPath("ownerStripView.owner.promotionAlterations");return!(!e||!t)&&(t.hasOwnProperty(e)?t[e]:this.getPath("media.isPromotedFromBurst"))}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),a=i.internalGetPath(this,t[1+n]);return!(!r||!a)&&(a.hasOwnProperty(r)?a[r]:i.internalGetPath(this,t[2+n]))}})}),_rerenderForPromotion:c.h("media","doesMediaAppearPromotedFromBurst",(function(e,t){e&&this.render()})),doAdditionalRendering:function(e,t,i,r,a,s){var o=this,l=arguments;o.__s._$9OA$doAdditionalRendering.apply(o,l),this.doesMediaAppearPromotedFromBurst&&(e.context.fillStyle="rgba(237, 237, 237, 0.5)",e.context.fillRect(i,r,a,s),O.a(n(1306)).thenSync(T.a(this._drawBlueCheck,this,e,i,r,a,s)))},_drawBlueCheck:function(e,t,n,i,r,a,s,o){if(o){var l=M.c(a.naturalWidth,a.naturalHeight,i/3.5,r/3.5,E.objectPool.getAutodisposingInstance()),c=M.d(a.naturalWidth,a.naturalHeight,.9*i,.9*r,E.objectPool.getAutodisposingInstance()),u=Math.min(l.width,c.width),d=Math.min(l.height,c.height),h=e.context;h.save(),h.translate(t+i/2,n+r/2.1),h.scale(1.4*l.width,1.4*l.height),h.fillStyle=this._backingGradientForCheck,h.fillRect(-1,-1,2,2),h.restore(),h.drawImage(a,Math.floor(t+i/2-u/2),Math.floor(n+r/2-d/2),Math.ceil(u),Math.ceil(d))}else this.render()},_backingGradientForCheck:function(){var e=E.canvasPool.getAutodisposingInstance().getContext("2d").createRadialGradient(0,0,0,0,0,1);return e.addColorStop(0,"rgba(255, 255, 255, 0.5)"),e.addColorStop(.25,"rgba(255, 255, 255, 0.45)"),e.addColorStop(.5,"rgba(255, 255, 255, 0.32)"),e.addColorStop(.75,"rgba(255, 255, 255, 0.08)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),e}(),__superMap:{_$9OA$doAdditionalRendering:"doAdditionalRendering"}}),contentHeight:i.b({readOnly:!0,dependencies:["viewportHeight"],get:Object.assign((function(){var e=this.viewportHeight;return Math.round(e-4-.16*e-14)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return Math.round(r-4-.16*r-14)}})}),topCoordOfCenterOfInsetTop:i.b({readOnly:!0,dependencies:["insetTop"],get:Object.assign((function(){return Math.round(this.insetTop/2)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/2)}})}),bottomCoordOfCenterOfInsetBottom:i.b({readOnly:!0,dependencies:["insetBottom"],get:Object.assign((function(){return Math.round(this.insetBottom/2)}),{__CW__getter:function(e,t,n,i){return Math.round(i.internalGet(this,t[0+n])/2)}})}),_animateUponGettingOrLosingBurstMode:c.h("owner.owner.hasBurstMode",(function(e){e&&this.unretract(),e||this.retract()})),ensureMediaRange:function(e,t){return this.owner.ensureMediaRange(e,t)},_autopickDotElements:a.c(Array),_autopickDotElementsLength:_.d({get:function(){return this._autopickDotElements.length},set:function(e){for(var t=this._autopickDotElements,n=t.length,i=n;i<e;i++){var r=t[i]=E.divPool.getInstance();r.className="pok-promoted-from-burst-dot",this.element.appendChild(r)}for(var a=e;a<n;a++){var s=t[a];E.divPool.disposeInstance(s)}t.length=e}}),_clearAutopickDotElementsArrayWhenReused:c.h("firstVisibleThumbIndex","lastVisibleThumbIndex",(function(e,t){e+t||(this._autopickDotElementsLength=0)})),cleanup:function(){var e=this,t=arguments;this._autopickDotElementsLength=0,e.__s._$C5T$cleanup.apply(e,t)},renderStrip:function(){var e=this,t=arguments;e.__s._$C77$renderStrip.apply(e,t);for(var n=this.firstVisibleThumbIndex,i=this.lastVisibleThumbIndex,r=this.collection,a=E.arrayPool.getAutodisposingInstance(),s=n;s<=i;s++){var o=r.objectAt(s);o&&o.isAutopickedInBurst&&a.push(s)}var l=this._autopickDotElementsLength;a.length>l&&(l=this._autopickDotElementsLength=a.length);var c,u=this._autopickDotElements,d=this.stripLeft,h=this.insetBottom;for(c=0;c<a.length;c++)b.c(u[c]).translateDevicePixels(d+this.centerInStripForThumbIndex(a[c]),-h/2).layerBack();for(;c<l;c++)b.c(u[c]).translate(-1e4,-1e4).layerBack()},spinnerView:i.b({readOnly:!0,dependencies:["owner.owner.media.isPreparingBurstMediasArray","_spinnerView"],get:Object.assign((function(){return this.getPath("owner.owner.media.isPreparingBurstMediasArray")?this._spinnerView:null}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGet(this,t[1+n]):null}})}),_spinnerView:i.b({strong:!0,defaultValue:a.c(m.a.extend({owner:i.b(),size:i.b({readOnly:!0,dependencies:["owner.insetHeight"],get:Object.assign((function(){return this.getPath("owner.insetHeight")/2|"0px"}),{__CW__getter:function(e,t,n,i){return i.internalGetPath(this,t[0+n])/2|"0px"}})}),_updateLayout:c.h("size","owner.insetCenterX","owner.insetCenterY",(function(e,t,n){this.style.translateDevicePixels(t-e/2,n-e/2).set("position","absolute")}))}))}),_maintainHorizontalInsets:c.h("owner.owner.insetLeft","owner.owner.insetRight",(function(e,t){y.a.pause(),this.registerInsetLeft("ownerOneUp",e),this.registerInsetRight("ownerOneUp",t),y.a.resume()})),__superMap:{_$C5T$cleanup:"cleanup",_$C77$renderStrip:"renderStrip"}})),__superMap:{_$6am$getTransitionFromViewToView:"getTransitionFromViewToView",_$6dq$viewClassForMedia:"viewClassForMedia"}}))}),__superMap:{_$2Lf$isRenderDisabled:"isRenderDisabled",_$2iA$cleanup:"cleanup"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(20),a=n(15),s=n(7),o=n(98),l=n(42),c=["itemType","masterRef","resJPEGThumbRes","resJPEGThumbWidth","resJPEGThumbHeight","resJPEGThumbFileSize","resJPEGMedRes","resJPEGMedWidth","resJPEGMedHeight","resJPEGMedFileSize","resJPEGLargeRes","resJPEGLargeWidth","resJPEGLargeHeight","resJPEGLargeFileSize","resJPEGFullRes","resJPEGFullWidth","resJPEGFullHeight","resJPEGFullFileSize","resVidSmallRes","resVidSmallWidth","resVidSmallHeight","resVidSmallFileSize","resVidMedRes","resVidMedWidth","resVidMedHeight","resVidMedFileSize","resVidFullRes","resVidFullWidth","resVidFullHeight","resVidFullFileSize","resOriginalRes","resOriginalWidth","resOriginalHeight","resOriginalFileSize","resOriginalAltRes","resOriginalAltWidth","resOriginalAltHeight","resOriginalAltFileSize","resOriginalVidComplRes","resOriginalVidComplWidth","resOriginalVidComplHeight","resOriginalVidComplFileSize"],u=i.a.extend(r.b,{init:function(){var e=this,t=arguments;e.__s._$Ly$init.apply(e,t),this._startTime=Date.now()},recordName:a.d(),masterRef:a.d(),itemType:a.d(),resJPEGThumbRes:a.d(),resJPEGThumbWidth:a.d(),resJPEGThumbHeight:a.d(),resJPEGThumbFileSize:a.d(),resJPEGMedRes:a.d(),resJPEGMedWidth:a.d(),resJPEGMedHeight:a.d(),resJPEGMedFileSize:a.d(),resJPEGLargeRes:a.d(),resJPEGLargeWidth:a.d(),resJPEGLargeHeight:a.d(),resJPEGLargeFileSize:a.d(),resJPEGFullRes:a.d(),resJPEGFullWidth:a.d(),resJPEGFullHeight:a.d(),resJPEGFullFileSize:a.d(),resVidSmallRes:a.d(),resVidSmallWidth:a.d(),resVidSmallHeight:a.d(),resVidSmallFileSize:a.d(),resVidMedRes:a.d(),resVidMedWidth:a.d(),resVidMedHeight:a.d(),resVidMedFileSize:a.d(),resVidFullRes:a.d(),resVidFullWidth:a.d(),resVidFullHeight:a.d(),resVidFullFileSize:a.d(),resOriginalRes:a.d(),resOriginalWidth:a.d(),resOriginalHeight:a.d(),resOriginalFileSize:a.d(),resOriginalAltRes:a.d(),resOriginalAltWidth:a.d(),resOriginalAltHeight:a.d(),resOriginalAltFileSize:a.d(),resOriginalVidComplRes:a.d(),resOriginalVidComplWidth:a.d(),resOriginalVidComplHeight:a.d(),resOriginalVidComplFileSize:a.d(),vsShareData:a.d({get:function(){var e,t=[],n=(e=this,function(t){var n=e["res"+t+"Res"].value.downloadURL;return{width:e["res"+t+"Width"].value,height:e["res"+t+"Height"].value,fileSize:e["res"+t+"FileSize"].value,derivativeName:t,originalUrl:n,hasGeo:!1,urlExpiry:e.urlExpiry,recordName:e.recordName}});return this.resJPEGThumbRes&&t.push(n("JPEGThumb")),this.resJPEGMedRes&&t.push(n("JPEGMed")),this.resJPEGLargeRes&&t.push(n("JPEGLarge")),this.resJPEGFullRes&&t.push(n("JPEGFull")),this.resVidSmallRes&&t.push(n("VidSmall")),this.resVidMedRes&&t.push(n("VidMed")),this.resVidFullRes&&t.push(n("VidFull")),this.resOriginalRes&&t.push(n("Original")),this.resOriginalAltRes&&t.push(n("OriginalAlt")),this.resOriginalVidComplRes&&t.push(n("OriginalVidCompl")),t}}),_startTime:0,ttl:a.d({get:function(){return 144e5-(Date.now()-this._startTime)}}),urlExpiry:a.d({get:function(){return this._startTime+144e5}}),hasExpired:s.b({get:function(){return this.ttl<0}}),__superMap:{_$Ly$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"MediaRecord"}}),d=i.a.extend({staticMembers:{fetch:function(e){var t=o.a.create(),n=e.map((function(e){return u.create({recordName:e})}));return function(e){var t=l.n(),n=t.cplZone,i=t.getDatabaseForScope(n.scope).databaseInstance,r={zoneID:n.zoneID,desiredKeys:c,assetPrivacyMaskType:"NONE"};return i.fetchRecords(e,r)}(n).then((function(e){return e.hasErrors&&t.reject(),e.records.forEach(function(e){var t=e.length;return function(n){return function(n){for(var i=[],r=n.recordName,a=0;a<t;a++){var s=e[a];r===s.recordName&&i.push(s),s.masterRef&&r===s.masterRef.value.recordName&&i.push(s)}return i}(n).forEach(function(e){var t=e.fields;return function(e){c.forEach((function(n){t[n]&&!e[n]&&(e[n]=t[n])}))}}(n))}}(n)),t.resolve(n)})),t},__QUALIFIED_CLASS_NAME__:"GeoStrippedURLs"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(40),r=n(20),a=n(7),s=n(201),o=n(248),l=n(55),c=n(78),u=n(17),d=n(697),h=n(327),p=n(25),f=n(203),g=i.a.extend(r.b,{owner:a.b(),derivativeRequestReason:a.b(),width:a.b(NaN),height:a.b(NaN),shouldCorrectForDevicePixelRatio:a.b(!1),shouldCover:a.b(!1),media:a.b({strong:!0}),derivativeSubset:a.b("renderableImage"),offscreeniness:a.b(),priority:a.b(0),minPriorityReduction:a.b(2e3),priorityReductionRange:a.b(1),wantsDownsampledDerivatives:a.b(!1),allowsShrinking:a.b(!0),areRequestsAllowed:a.b(!0),areMediaRequestsAllowed:a.b(!0),isDisabled:a.b(),firstByteSizeLimit:1/0,byteSizeLimitMultiplier:a.b(10),_perfectSize_compoundInt:a.b({readOnly:!0,dependencies:["width","height","media.width","media.height","shouldCover","shouldCorrectForDevicePixelRatio",s.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){var e=this.shouldCorrectForDevicePixelRatio,t=this.shouldCover,n=this.getPath("media.height"),i=this.getPath("media.width"),r=this.height,a=this.width;if(!a||!r||!i||!n)return NaN;if(e){var o=s.a.sharedInstance.devicePixelRatio;a*=o,r*=o}var l=h.b(t?"cover":"fit",i,n,a,r,m),c=l.width,u=l.height;return 1e9*Math.ceil(c)+Math.ceil(u)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[5+n]),a=i.internalGet(this,t[4+n]),s=i.internalGetPath(this,t[3+n]),o=i.internalGetPath(this,t[2+n]),l=i.internalGet(this,t[1+n]),c=i.internalGet(this,t[0+n]);if(!c||!l||!o||!s)return NaN;if(r){var u=i.internalGet(this,t[6+n]);c*=u,l*=u}var d=h.b(a?"cover":"fit",o,s,c,l,m),p=d.width,f=d.height;return 1e9*Math.ceil(p)+Math.ceil(f)}})}),perfectWidth:a.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign((function(){return this._perfectSize_compoundInt/1e9|0}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])/1e9|0}})}),perfectHeight:a.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign((function(){var e=this._perfectSize_compoundInt;return e-1e9*(e/1e9|0)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);return r-1e9*(r/1e9|0)}})}),perfectGeometricLength:a.b({readOnly:!0,dependencies:["perfectWidth","perfectHeight"],get:Object.assign((function(){return Math.max(this.perfectWidth,this.perfectHeight)}),{__CW__getter:function(e,t,n,i){return Math.max(i.internalGet(this,t[0+n]),i.internalGet(this,t[1+n]))}})}),nonOutdatedDerivative:a.b({strong:!0,readOnly:!0,dependencies:["perfectGeometricLength","derivativeSubset","media","allowsShrinking","media.derivativeDidLoad","_derivativeInfos"],get:Object.assign((function(){var e=this.perfectGeometricLength,t=this.derivativeSubset,n=this.media;this.allowsShrinking||(e=Math.max(this._longestReturnedDerivativeDimension,e));var i=e&&n?n.getBestLoadedDerivative(e,t):null;return i&&(this._longestReturnedDerivativeDimension=Math.max(this._longestReturnedDerivativeDimension,i.geometricLength)),i}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=i.internalGet(this,t[2+n]);i.internalGet(this,t[3+n])||(r=Math.max(this._longestReturnedDerivativeDimension,r));var o=r&&s?s.getBestLoadedDerivative(r,a):null;return o&&(this._longestReturnedDerivativeDimension=Math.max(this._longestReturnedDerivativeDimension,o.geometricLength)),o}})}),derivative:a.b({strong:!0,readOnly:!0,dependencies:["nonOutdatedDerivative"],get:Object.assign((function(){var e=this.nonOutdatedDerivative,t=this.media,n=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=t?t.pk:NaN),i=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=t?t.aspectRatio:NaN))<.05),r=n||i?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=e||r,this._derivative_lastExistentDerivative}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=this.media,s=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=a?a.pk:NaN),o=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=a?a.aspectRatio:NaN))<.05),l=s||o?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=r||l,this._derivative_lastExistentDerivative}})}),shouldShowError:a.b({readOnly:!0,dependencies:["isComplete","_error","_derivativeInfos","_media.loadStatus"],get:Object.assign((function(){var e=this.getPath("_media.loadStatus"),t=this._derivativeInfos,n=this._error;return!this.isComplete&&(e===o.a.LOADED?Boolean(n||!t||!t.length):e===o.a.ERRORED)}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),a=i.internalGet(this,t[2+n]),s=i.internalGet(this,t[1+n]);return!i.internalGet(this,t[0+n])&&(r===o.a.LOADED?Boolean(s||!a||!a.length):r===o.a.ERRORED)}})}),isLoading:a.b({readOnly:!0,dependencies:["_loadRef"],get:Object.assign((function(){return Boolean(this._loadRef)}),{__CW__getter:function(e,t,n,i){return Boolean(i.internalGet(this,t[0+n]))}})}),loadProgress:a.b({readOnly:!0,dependencies:["isComplete","isLoading","_loadRef.progress"],get:Object.assign((function(){var e=this.getPath("_loadRef.progress"),t=this.isLoading;return this.isComplete?1:t?Number(e)||0:NaN}),{__CW__getter:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),a=i.internalGet(this,t[1+n]);return i.internalGet(this,t[0+n])?1:a?Number(r)||0:NaN}})}),totalProgress:a.b({readOnly:!0,dependencies:["isComplete","loadProgress","_loadRef","_media","_derivativeInfos","perfectGeometricLength","byteSizeLimitMultiplier","_byteSizeLimit"],get:Object.assign((function(){var e=this._byteSizeLimit,t=this.byteSizeLimitMultiplier,n=this.perfectGeometricLength,i=this._derivativeInfos,r=this._media,a=this._loadRef,s=this.loadProgress;if(this.isComplete)return 1;if(!i||!n||!a||!r)return NaN;var o=r.derivativeInfoForDerivativeId(this._loadingDerivativeDerivativeId);if(!o)return NaN;var l=0|this._totalProgressTrackingObject.loadedBytes,c=l,u=l;if(o&&(c+=o.byteSize,u+=s*o.byteSize),o.geometricLength<n){e=Math.max(e,o.byteSize*t);for(var d=i.indexOf(o);++d<i.length;){var h=i[d],p=i[d+1],f=!p||h.geometricLength>=n;if((f||p.byteSize>=e)&&(e=Math.max(e,h.byteSize*t),c+=h.byteSize),f)break}}return u/c}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[7+n]),a=i.internalGet(this,t[6+n]),s=i.internalGet(this,t[5+n]),o=i.internalGet(this,t[4+n]),l=i.internalGet(this,t[3+n]),c=i.internalGet(this,t[2+n]),u=i.internalGet(this,t[1+n]);if(i.internalGet(this,t[0+n]))return 1;if(!o||!s||!c||!l)return NaN;var d=l.derivativeInfoForDerivativeId(this._loadingDerivativeDerivativeId);if(!d)return NaN;var h=0|this._totalProgressTrackingObject.loadedBytes,p=h,f=h;if(d&&(p+=d.byteSize,f+=u*d.byteSize),d.geometricLength<s){r=Math.max(r,d.byteSize*a);for(var g=o.indexOf(d);++g<o.length;){var m=o[g],_=o[g+1],v=!_||m.geometricLength>=s;if((v||_.byteSize>=r)&&(r=Math.max(r,m.byteSize*a),p+=m.byteSize),v)break}}return f/p}})}),_totalProgressTrackingObject:l.c(Object),imperfection:a.b({readOnly:!0,dependencies:["perfectGeometricLength","nonOutdatedDerivative"],get:Object.assign((function(){var e=this.nonOutdatedDerivative,t=e?e.geometricLength:0;return Math.max(0,this.perfectGeometricLength/t-1)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[1+n]),a=r?r.geometricLength:0;return Math.max(0,i.internalGet(this,t[0+n])/a-1)}})}),isPerfect:a.b({readOnly:!0,dependencies:["imperfection"],get:Object.assign((function(){return 0===this.imperfection}),{__CW__getter:function(e,t,n,i){return 0===i.internalGet(this,t[0+n])}})}),isComplete:a.b({readOnly:!0,dependencies:["isPerfect","_derivativeInfos","nonOutdatedDerivative"],get:Object.assign((function(){if(this.isPerfect)return!0;var e=this.nonOutdatedDerivative,t=this._derivativeInfos,n=t&&t[t.length-1];return(e?e.geometricLength:0)>=(n?n.geometricLength:0)}),{__CW__getter:function(e,t,n,i){if(i.internalGet(this,t[0+n]))return!0;var r=i.internalGet(this,t[2+n]),a=i.internalGet(this,t[1+n]),s=a&&a[a.length-1];return(r?r.geometricLength:0)>=(s?s.geometricLength:0)}})}),_media:a.b({readOnly:!0,dependencies:["media","media.cannotHaveImageDerivative","isDisabled"],get:Object.assign((function(){return this.isDisabled||this.getPath("media.cannotHaveImageDerivative")?void 0:this.media}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[2+n])||i.internalGetPath(this,t[1+n])?void 0:i.internalGet(this,t[0+n])}})}),_loadRef:a.b({strong:!0,didChange:function(e){e||(this._loadingDerivativeDerivativeId=null,this._loadingDerivativeGeometricLength=NaN)}}),_loadingDerivativeGeometricLength:NaN,_loadingDerivativeDerivativeId:null,_error:a.b(null),error:a.b({readOnly:!0,dependencies:["shouldShowError","_error"],get:Object.assign((function(){return this.shouldShowError?this._error||new Error("Metadata load failure"):null}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])?i.internalGet(this,t[1+n])||new Error("Metadata load failure"):null}})}),_byteSizeLimit:a.b({defaultValue:function(){return this.firstByteSizeLimit}}),_adjustedPriority:a.b({readOnly:!0,dependencies:["priority","nonOutdatedDerivative","imperfection","minPriorityReduction","priorityReductionRange"],get:Object.assign((function(){var e=this.priorityReductionRange,t=this.minPriorityReduction,n=this.imperfection,i=this.nonOutdatedDerivative,r=this.priority;return i?r+(t+(1-Math.min(n/4,1))*e):r}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[4+n]),a=i.internalGet(this,t[3+n]),s=i.internalGet(this,t[2+n]),o=i.internalGet(this,t[1+n]),l=i.internalGet(this,t[0+n]);return o?l+(a+(1-Math.min(s/4,1))*r):l}})}),_longestReturnedDerivativeDimension:0,_derivativeInfos:a.b(),_maintainDerivativeInfosBinding:function(){var e={};return r.h("derivativeSubset",(function(t){this.bind("_derivativeInfos",function(t){var n=e[t];return n||(n=e[t]=c.c("_media."+t+"DerivativeInfos")),n}(t))}))}(),_maintainRefPriority:r.h({inputs:["_loadRef","_adjustedPriority","offscreeniness","derivativeRequestReason"],callback:function(e,t,n,i){e&&(e.priority!==t&&(e.priority=t),e.offscreeniness!==n&&(e.offscreeniness=n),e.derivativeRequestReason!==i&&(e.derivativeRequestReason=i))}}),_updateStateForNewOrBetterDerivatives:r.h({inputs:["nonOutdatedDerivative","_derivativeInfos"],callback:function(e,t){u.a.pause();var n=this._usfnobd_lastDerivativeIds!==(this._usfnobd_lastDerivativeIds=t&&p.arrayPool.getAutodisposingInstanceFromMap(t,_).join("\n"));if(t&&t[0]&&!n){if(e){var i=e.derivativeId,r=e.byteSize,a=this._totalProgressTrackingObject;a[i]||(a[i]=!0,a.loadedBytes=(0|a.loadedBytes)+r);var s=Math.max(r*this.byteSizeLimitMultiplier,this._byteSizeLimit);this._byteSizeLimit!==s&&(this._byteSizeLimit=s)}}else this._cleanUpCurrentLoad(),this._longestReturnedDerivativeDimension=0,null!==this._error&&(this._error=null),this._byteSizeLimit!==this.firstByteSizeLimit&&(this._byteSizeLimit=this.firstByteSizeLimit),d.a(this._totalProgressTrackingObject);u.a.resume()}}),_manageWhetherLoading:r.h({inputs:["_media","_derivativeInfos","isComplete","areRequestsAllowed","perfectGeometricLength","_updateStateForNewOrBetterDerivatives"],callback:function(e,t,n,i,r){var a=Boolean(i&&t&&r&&(!n||!this.nonOutdatedDerivative)&&!this._error);if(t&&t.length){var s=this._loadRef,o=s;if(!a&&s&&(s.cancel(),s=null),a){for(var l=null,c=this._byteSizeLimit,u=0|this.getPath("nonOutdatedDerivative.geometricLength"),d=0;d<t.length&&!l;d++){var h=t[d];if(h.url&&!(h.geometricLength<=u)){var p=t[d+1];(h.geometricLength>=r||!p||p.byteSize>c)&&(l=h)}}l?(s&&this._loadingDerivativeGeometricLength<l.geometricLength&&(s.cancel(),s=null),s||(this._loadingDerivativeGeometricLength=l.geometricLength,this._loadingDerivativeDerivativeId=l.derivativeId,(s=e.requestDerivative(l)).then(this._derivativeDidLoad),s.catch(this._derivativeDidFail))):this._derivativeDidFail()}o!==(s=s||null)&&(this._loadRef=s)}}}),_informMediaOfDownsampleDesire:r.h({inputs:["wantsDownsampledDerivatives","perfectGeometricLength","nonOutdatedDerivative","_media"],callback:function(e,t,n,i){e&&t&&n&&i&&i.requestDownsample(t,n)}}),_derivativeDidLoad:f.b((function(e,t){t===this._loadRef&&(u.a.pause(),this._cleanUpCurrentLoad(),this._error=null,u.a.resume())})),_derivativeDidFail:f.b((function(e,t){t===this._loadRef&&(u.a.pause(),this._cleanUpCurrentLoad(),this._error=e||new Error("Derivative load failure"),u.a.resume())})),_cleanUpCurrentLoad:function(){var e=this._loadRef;e&&(e.cancel(),this._loadRef=null)},dispose:function(){var e=this,t=arguments;this._cleanUpCurrentLoad(),e.__s._$C9O$dispose.apply(e,t)},__superMap:{_$C9O$dispose:"dispose"},staticMembers:{__QUALIFIED_CLASS_NAME__:"ImageDerivativeLoader"}}),m={},_=function(e){return e.derivativeId}},function(e,t,n){var i=function(e,t){if(!e||!t)throw"record and supportedFields need to be provided in order to create a CacheItem";for(var n in this.originalRecord=e,e)"guid"!==n?this[n]=e[n]:(this.temp_guid=e[n],this.guidKey="temp_guid",e.guidKey&&delete e.guidKey);this.supportedFields=t};i.create=function(e,t){return new i(e,t)},i.prototype={supportedFields:null,guidKey:null,normalized:null,guid:function(){if(this.guidKey)return this[this.guidKey]}};var r=function(){};r.create=function(){return new r},r.prototype={generateGUID:function(){for(var e=CW.UUID(),t=this._guidToRecordMapping;t[e];)e=CW.UUID();return e},getAllRecords:function(){return this._guidToRecordMapping},getRecordsForCacheKey:function(e){var t;if(!e)throw"cacheKey required in order to fetch records.";return this._cache[e]&&(t=this._cache[e].guidToRecordMapping),t},getRecordForGuid:function(e){if(!e)throw"No guid provided";return this._guidToRecordMapping[e]?this._guidToRecordMapping[e].originalRecord:null},addRecords:function(e,t,n){var i,r,a,s,l,c,u,d,h,p,f=this._cache,g=this.__dummy_prefix__;if(!e||!Array.isArray(e))throw"Invalid records found, cannot process of type "+type;for(this._createKeysForFields(t,n),"Recents"===t?this._processRecentsRecords(e,n):this._processRecords(e,t,n),this._guidToRecordMapping=o(this._guidToRecordMapping,f[t].guidToRecordMapping),a=f[t],l=n.length,i=0;i<l;++i)if(c=(s=a[n[i]]).values,u=s.temp){for(c.sort(),d=[],h=c.length,r=0;r<h;++r)p=u[g+c[r]],d.push(p);s.records=d}return"Groups"===t&&this._resolveGroupsMembershipAsPossibleWithLoadedData(t),f},findCompletionsInLoadedData:function(e,t){var n=this._cache;if(!n)return[];var i,r,a=e.split(" "),o=[],l=a.length;for(i=0;i<l;++i)(r=a[i])&&o.push(r);var c,u,d,h,p,f,g,m,_,v={},b=o.length;for(i=0;i<b;++i){for(var y={},w=o[i],I=s(w).toLowerCase(),S=I,C=0;C<t.length;C++)for(h in cacheItemType=t[C],d=n[cacheItemType])if("guidToRecordMapping"!==h){if(f=(p=d[h]).values,b>1&&"companyName"===h){if(0!==i)continue;I=s(e).toLowerCase()}var E=this._indexForString(f,I),A=I.length-1,O=I.substr(0,A),T=I.charCodeAt(A);O+=String.fromCharCode(T+1);var M=this._indexForString(f,O);if(E<f.length&&E<M){var D="emailAddresses"===h,P=p.records.slice(E,M),L=P.length;for(u=0;u<L;++u)if(g=P[u])for(var R=g.length,x=0;x<R;++x){var N,F;m=N=F=null,D?(F=(N=g[x]).idx,m=N.rec):m=g[x];var V=m.guid();if(V)if(v[V]||(v[V]={fields:{},rec:m.originalRecord}),y[V]=!0,D){var k=v[V].fields,B=k[h];B||(k[h]={},B=k[h]),B[F]=w}else{var j=w;"groups"!==cacheItemType&&"companyName"!==h||(j=e),v[V].fields[h]=j}}}I!==S&&(I=S)}for(c in v)_=v[c],!v.hasOwnProperty(c)||y[c]||0!==i&&(_.rec.groupId||_.fields.companyName)||delete v[c];records=[];var U={contacts:[],groups:[],result:[]};for(c in v)v.hasOwnProperty(c)&&(record=v[c].rec,record.address||record.members?U.result.push(record):record.contactId?U.contacts.push(record):record.groupId&&U.groups.push(record))}return v},resetCache:function(){this._cache={}},_cache:{},_guidToRecordMapping:{},_lastMatch:{},__dummy_prefix__:"__dummy_prefix__",_processRecords:function(e,t,n){var r,a,o,l,c,u,d,h,p,f,g,m,_,v=e.length,b=this.__dummy_prefix__;for(c=this._cache[t],r=0;r<v;++r){if(l=e[r],f=null,"Contacts"===t)if(l.managedAppleId)l.normalized=f=((l.firstName||"")+":"+(l.middleName||"")+":"+(l.lastName||"")+":"+l.managedAppleId).toLowerCase(),l.guidKey="managedAppleId",p=(_=i.create(l,n)).guid();else{var y,w=l.emailAddresses,I=l.phones;for(y=w&&w.length||0;y--;)w[y].field||w.splice(y,1);for(y=I&&I.length||0;y--;)I[y].field||I.splice(y,1);if((!w||w.length<1)&&(!I||I.length<1))continue;l.guidKey="contactId",f=(_=i.create(l,n)).normalized,p=_.guid()}else{if("Groups"!==t)continue;if(!l.contactIds&&!l.id)continue;if((h=l.name)&&(f=s(h).toLowerCase()+":"),l.normalized=f,l.groupId)l.guidKey="groupId";else{if(!l.id)throw"Niether id or guidKey found in the record";l.guidKey="id"}p=(_=i.create(l,n)).guid()}var S,C;if(f)for(p&&(c.guidToRecordMapping[p]=_),g=f.split(":"),m=n.length,a=0;a<m;++a){var E=_[d=n[a]];if(E)if("emailAddresses"===d){var A=E.length;for(o=0;o<A;++o)(f=g[a+o])&&"NULL"!==f&&((S=(u=c[d]).temp)||(S={},u.temp=S),(C=S[b+f])?C.push({idx:o,rec:_}):(S[b+f]=[{idx:o,rec:_}],u.values.push(f)))}else{if(!(f=g[a])||"NULL"===f)continue;(S=(u=c[d]).temp)||(S={},u.temp=S),(C=S[b+f])?C.push(_):(S[b+f]=[_],u.values.push(f))}}}},_processRecentsRecords:function(e,t){if(!Array.isArray(e))return dataCache;var n,r,a,o,l,c,u,d,h,p,f,g,m,_,v,b,y,w,I,S,C,E,A,O,T=this._cache.Recents,M=[],D=[],P="",L=this.__dummy_prefix__;for(E=e.filter((function(e){return"CoreMail.RecentRecipient"===e.type})),A=e.filter((function(e){return"CoreMail.RecentGroup"===e.type})),n=E.length,a=0;a<n;a++)if(h=(d=E[a]).name,C=d.address)if(d.recentsGuid=d.guid,p=L+C.toLowerCase(),d.guid=p,1===(D=(h=h.replace(/["|\u201c|\u201d]/g,"").replace(/,/g," ")).split(/\s+/)).length&&(D=h.split(/,/)),d.names=D,O=i.create(d,t),T.guidToRecordMapping[p]=O,g=t.length,M=d.normalizedValues){for(o=0;o<g;o++)if("names"===(w=t[o])){var R=O.names.length;for(l=0;l<R;++l)(I=M[o+l])&&this._addRecentsRecipientFieldToLookupTable("names",I,O,T)}else(I=M[o])&&this._addRecentsRecipientFieldToLookupTable(w,I,O,T);guid=O.guid(),T.guidToRecordMapping[guid]=O}else{if(C=O.address,P=O.name,!C)continue;if(M=[C=s(C).toLowerCase()],this._addRecentsRecipientFieldToLookupTable("address",C,O,T),P)for(P=P.replace(/["|\u201c|\u201d]/g," ").trim(),O.name=P,1===(S=(D=P.split(/\s/)).length)&&(S=(D=P.split(/,/)).length),u=0;u<S;u++)P=D[u],-1===M.indexOf(P)&&(P=s(P).toLowerCase(),M.push(P),this._addRecentsRecipientFieldToLookupTable("names",P,O,T));O.normalizedValues=M}for(r=A.length,a=0;a<r;a++)if(d=A[a],guid=d.guid,h=d.name,m=d.members,d.guidKey="guid",O=i.create(d,t),m)for(b=m.length,c=0;c<b;c++)h=(_=m[c]).name,(v=_.address)&&(f=L+v.toLowerCase(),_.guid=f,D=h.replace(/["|\u201c|\u201d]/g,"").split(/\s+/),_.isMemberOf=[{guid:guid,memberName:h,memberNames:D}],(y=T.guidToRecordMapping[f])?y.isMemberOf?(y.isMemberOf.push({guid:guid,memberName:h,memberNames:D}),y.names.concat(h)):y.isMemberOf=[{guid:guid,memberName:h,memberNames:D}]:(_.timestamps=d.timestamps,_.names=D,_.isGroupMemberOnly=!0,E.push(_),T.guidToRecordMapping[f]=_),T.guidToRecordMapping[guid]=O)},_createKeysForFields:function(e,t){var n,i=this._cache;n=i[e]?i[e]:i[e]={};for(var r=t.length,a=0;a<r;++a){var s=t[a];n[s]||(n[s]={values:[],records:[]})}n.guidToRecordMapping||(n.guidToRecordMapping={})},_addRecentsRecipientFieldToLookupTable:function(e,t,n,i){var r,a,s,o=this.__dummy_prefix__;return(a=(r=i[e]).temp)||(a={},r.temp=a),(s=a[o+t])?s.push(n):(a[o+t]=[n],r.values.push(t)),t},_indexForString:function(e,t){for(var n,i,r=!1,a=0,s=e.length-1;!r&&a<=s;){n=!1;var o=e[i=Math.floor((a+s)/2)];o===t?r=!0:o<t?(a=i+1,n=!0):s=i-1}var l=i;return n&&++l,l},_resolveGroupsMembershipAsPossibleWithLoadedData:function(e){var t=this._guidToRecordMapping;t||(t={});var n,i,r,a,s,o=this._cache[e];if(o)for(n in o)if(o.hasOwnProperty(n)&&(i=o[n].records))for(a=i.length-1;a>=0;--a)for(s=(r=i[a]).length-1;s>=0;--s){var l=r[s];this._resolveGroupMembershipAsPossibleWithLoadedData(l,t),l.resolvedContacts&&l.resolvedContacts.length<=0&&(delete t[l.groupId],r.splice(s,1))}},_resolveGroupMembershipAsPossibleWithLoadedData:function(e,t,n){var i=e.resolvedContacts;if(!i||-1===i){n||(n=0),i=[];var r,a={},s=e.contactIds;if(s)for(r=s.length-1;r>=0;--r){var o=s[r],l=t[o];l?a[o]||(i.push(l),a[o]=!0):s.splice(r,1)}void 0!==e.rosterCount&&0!==e.rosterCount||(e.resolvedContacts=i,e.originalRecord.resolvedContacts=i)}}};var a={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u0100":"A","\u0102":"A","\u0104":"A","\u01cd":"A","\u01de":"A","\u01e0":"A","\u01fa":"A","\u0200":"A","\u0202":"A","\u0226":"A","\u1e00":"A","\u1ea0":"A","\u1ea2":"A","\u1ea4":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\u1eac":"A","\u1eae":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\u212b":"A","\u1e02":"B","\u1e04":"B","\u1e06":"B","\xc7":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u1e08":"C","\u010e":"D","\u1e0a":"D","\u1e0c":"D","\u1e0e":"D","\u1e10":"D","\u1e12":"D","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u0228":"E","\u1e14":"E","\u1e16":"E","\u1e18":"E","\u1e1a":"E","\u1e1c":"E","\u1eb8":"E","\u1eba":"E","\u1ebc":"E","\u1ebe":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1ec6":"E","\u1e1e":"F","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u01e6":"G","\u01f4":"G","\u1e20":"G","\u0124":"H","\u021e":"H","\u1e22":"H","\u1e24":"H","\u1e26":"H","\u1e28":"H","\u1e2a":"H","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1e2c":"I","\u1e2e":"I","\u1ec8":"I","\u1eca":"I","\u0134":"J","\u0136":"K","\u01e8":"K","\u1e30":"K","\u1e32":"K","\u1e34":"K","\u0139":"L","\u013b":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u1e3a":"L","\u1e3c":"L","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\xd1":"N","\u0143":"N","\u0145":"N","\u0147":"N","\u01f8":"N","\u1e44":"N","\u1e46":"N","\u1e48":"N","\u1e4a":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\u014c":"O","\u014e":"O","\u0150":"O","\u01a0":"O","\u01d1":"O","\u01ea":"O","\u01ec":"O","\u020c":"O","\u020e":"O","\u022a":"O","\u022c":"O","\u022e":"O","\u0230":"O","\u1e4c":"O","\u1e4e":"O","\u1e50":"O","\u1e52":"O","\u1ecc":"O","\u1ece":"O","\u1ed0":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\u1ed8":"O","\u1eda":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u1ee2":"O","\u1e54":"P","\u1e56":"P","\u0154":"R","\u0156":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e58":"R","\u1e5a":"R","\u1e5c":"R","\u1e5e":"R","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u0218":"S","\u1e60":"S","\u1e62":"S","\u1e64":"S","\u1e66":"S","\u1e68":"S","\u0162":"T","\u0164":"T","\u021a":"T","\u1e6a":"T","\u1e6c":"T","\u1e6e":"T","\u1e70":"T","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u01af":"U","\u01d3":"U","\u01d5":"U","\u01d7":"U","\u01d9":"U","\u01db":"U","\u0214":"U","\u0216":"U","\u1e72":"U","\u1e74":"U","\u1e76":"U","\u1e78":"U","\u1e7a":"U","\u1ee4":"U","\u1ee6":"U","\u1ee8":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u1ef0":"U","\u1e7c":"V","\u1e7e":"V","\u0174":"W","\u1e80":"W","\u1e82":"W","\u1e84":"W","\u1e86":"W","\u1e88":"W","\u1e8a":"X","\u1e8c":"X","\xdd":"Y","\u0176":"Y","\u0178":"Y","\u0232":"Y","\u1e8e":"Y","\u1ef2":"Y","\u1ef4":"Y","\u1ef6":"Y","\u1ef8":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u1e90":"Z","\u1e92":"Z","\u1e94":"Z","\u1fef":"`","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u0101":"a","\u0103":"a","\u0105":"a","\u01ce":"a","\u01df":"a","\u01e1":"a","\u01fb":"a","\u0201":"a","\u0203":"a","\u0227":"a","\u1e01":"a","\u1ea1":"a","\u1ea3":"a","\u1ea5":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\u1ead":"a","\u1eaf":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\u1e03":"b","\u1e05":"b","\u1e07":"b","\xe7":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u1e09":"c","\u010f":"d","\u1e0b":"d","\u1e0d":"d","\u1e0f":"d","\u1e11":"d","\u1e13":"d","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u0229":"e","\u1e15":"e","\u1e17":"e","\u1e19":"e","\u1e1b":"e","\u1e1d":"e","\u1eb9":"e","\u1ebb":"e","\u1ebd":"e","\u1ebf":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1ec7":"e","\u1e1f":"f","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u01e7":"g","\u01f5":"g","\u1e21":"g","\u0125":"h","\u021f":"h","\u1e23":"h","\u1e25":"h","\u1e27":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1e2d":"i","\u1e2f":"i","\u1ec9":"i","\u1ecb":"i","\u0135":"j","\u01f0":"j","\u0137":"k","\u01e9":"k","\u1e31":"k","\u1e33":"k","\u1e35":"k","\u013a":"l","\u013c":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u1e3b":"l","\u1e3d":"l","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\xf1":"n","\u0144":"n","\u0146":"n","\u0148":"n","\u01f9":"n","\u1e45":"n","\u1e47":"n","\u1e49":"n","\u1e4b":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\u014d":"o","\u014f":"o","\u0151":"o","\u01a1":"o","\u01d2":"o","\u01eb":"o","\u01ed":"o","\u020d":"o","\u020f":"o","\u022b":"o","\u022d":"o","\u022f":"o","\u0231":"o","\u1e4d":"o","\u1e4f":"o","\u1e51":"o","\u1e53":"o","\u1ecd":"o","\u1ecf":"o","\u1ed1":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\u1ed9":"o","\u1edb":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u1ee3":"o","\u1e55":"p","\u1e57":"p","\u0155":"r","\u0157":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e59":"r","\u1e5b":"r","\u1e5d":"r","\u1e5f":"r","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0219":"s","\u1e61":"s","\u1e63":"s","\u1e65":"s","\u1e67":"s","\u1e69":"s","\u0163":"t","\u0165":"t","\u021b":"t","\u1e6b":"t","\u1e6d":"t","\u1e6f":"t","\u1e71":"t","\u1e97":"t","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u01b0":"u","\u01d4":"u","\u01d6":"u","\u01d8":"u","\u01da":"u","\u01dc":"u","\u0215":"u","\u0217":"u","\u1e73":"u","\u1e75":"u","\u1e77":"u","\u1e79":"u","\u1e7b":"u","\u1ee5":"u","\u1ee7":"u","\u1ee9":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u1ef1":"u","\u1e7d":"v","\u1e7f":"v","\u0175":"w","\u1e81":"w","\u1e83":"w","\u1e85":"w","\u1e87":"w","\u1e89":"w","\u1e98":"w","\u1e8b":"x","\u1e8d":"x","\xfd":"y","\xff":"y","\u0177":"y","\u0233":"y","\u1e8f":"y","\u1e99":"y","\u1ef3":"y","\u1ef5":"y","\u1ef7":"y","\u1ef9":"y","\u017a":"z","\u017c":"z","\u017e":"z","\u1e91":"z","\u1e93":"z","\u1e95":"z"},s=function(e){for(var t,n="",i=e.length,r=0;r<=i;++r)t=e.charAt(r),n+=a[t]||t;return n},o=function(e,t){return[e,t].reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),{})};"object"==typeof e.exports&&(e.exports.DataCache=r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(123),r=n(171),a=n(74),s={mixinDependencies:[i.a],hostInfo:r.a.define(),addHostedApplication:a.a.define(),removeHostedApplication:a.a.define(),findHostedApplication:a.a.define(),openHelp:a.a.define(),logOut:a.a.define(),setRouteForApp:a.a.define(),recordStat:a.a.define()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(7),r=n(55),a=n(51),s=n(392),o={mixinDependencies:[n(1315).a],hostInfo:i.b({type:Object,readOnly:!0,defaultValue:r.c(Object)}),addHostedApplication:function(e){var t=this._hostedApplications,n=e.appId;t.set(n,e)},removeHostedApplication:function(e){var t=this._hostedApplications,n=e.appId;t.delete(n)},findHostedApplication:function(e){var t=this._hostedApplications;return t.has(e)?t.get(e):null},openHelp:a.a,logOut:a.a,setRouteForApp:a.a,recordStat:a.a,_hostedApplications:i.b(r.c(s.a))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(199),r=n(117),a=n(331).a.extend({images:i.b({maxLength:50,allowsGeo:!1}),videos:i.b({maxLength:0,tooManyString:r.d("Share.Validation.VideoSharingDisabled"),allowsGeo:!1}),staticMembers:{__QUALIFIED_CLASS_NAME__:"FacebookShareDataValidator"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b})),n(1),n(0),n(2),n(79);var i=n(15),r=n(7),a=n(20),s=n(17),o=n(214),l=n(480),c=n(567),u=n(327),d=n(25),h=n(328),p=n(202),f=n(193),g=p.a.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",name:"southeastClipper",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalWidth",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalHeight",attributes:{},unit:"px",property:"height"}}}],name:"northwestClipper",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalWidth",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"contentNaturalHeight",attributes:{},unit:"px",property:"height"}}}],classes:["fast-floating-crop-container-view"]},__QUALIFIED_CLASS_NAME__:"FastFloatingCropContainerView"},contentElement:r.b({didChange:function(e){var t=this._lastContentElement;this._lastContentElement=e;var n=this.southeastClipper;t&&t.parentNode===n&&(n.removeChild(t),d.Pool.releaseInstance(t)),e&&(n.appendChild(e),d.Pool.retainInstance(e))}}),x:r.b(),y:r.b(),width:r.b(),height:r.b(),contentNaturalWidth:r.b({readOnly:!0,dependencies:["contentElement"],get:Object.assign((function(){var e=this.contentElement;if(e)return e.naturalWidth||e.width||e.offsetWidth}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return r.naturalWidth||r.width||r.offsetWidth}})}),contentNaturalHeight:r.b({readOnly:!0,dependencies:["contentElement"],get:Object.assign((function(){var e=this.contentElement;if(e)return e.naturalHeight||e.height||e.offsetHeight}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r)return r.naturalHeight||r.height||r.offsetHeight}})}),takeLayout:function(e,t,n,i){s.a.pause(),this.x=e,this.y=t,this.width=n,this.height=i,s.a.resume()},_updateLayout:a.h({inputs:["contentElement","contentNaturalWidth","contentNaturalHeight","x","y","width","height"],callback:function(e,t,n,i,r,a,s){if(!isNaN(t+n+i+r+a+s)){var o=u.d(a,s,t,n,d.objectPool.getAutodisposingInstance()),l=u.d(o.width,o.height,t,n,d.objectPool.getAutodisposingInstance()),c=(t-l.width)/2,h=(n-l.height)/2;f.c(e).translate(c,h).layerBack(),f.c(this.southeastClipper).translate(-2*c,-2*h).layerBack(),this.style.translate(i,r).scale(a/l.width,s/l.height).layerBack()}}}),cleanup:function(){var e=this,t=arguments;this.contentElement=void 0,e.__s._$1Fz$cleanup.apply(e,t)},__superMap:{_$1Fz$cleanup:"cleanup"}}),m=n(166),_=m.a.extend({staticMembers:{storageKey:"photos-oneup-kit"},maxDerivativeZoomSizeTouch:m.a.numberProperty(600),maxDerivativeZoomSizeMouse:m.a.numberProperty(2048)}).create(),v=l.a.extend({mixinDependencies:[c.a],duration:375,floatingZoomedImage:i.d({strong:!0}),zoomRectedMedia:i.d({strong:!0}),maxZoomySize:r.b({readOnly:!0,dependencies:["primaryInteractionMode"],get:Object.assign((function(){return this.primaryInteractionMode===h.a.MOUSE?_.maxDerivativeZoomSizeMouse:_.maxDerivativeZoomSizeTouch}),{__CW__getter:function(e,t,n,i){return i.internalGet(this,t[0+n])===h.a.MOUSE?_.maxDerivativeZoomSizeMouse:_.maxDerivativeZoomSizeTouch}})}),hasBothVCs:function(){var e=this.getTransitionees(),t=e.fromView,n=e.fromVC,i=e.toView,r=e.toVC;return t&&n&&i&&r},canDoZoom:function(){return Boolean(this.zoomRectedMedia&&this.zoomRectedDerivative&&this.hasBothVCs())},discoverZoomRectedMedia:function(){var e=this.getTransitionees(),t=e.fromVC,n=e.toVC,i=t.getPrimaryZoomRectableMedia(),r=n.getPrimaryZoomRectableMedia();if(!i||!r||i===r)return i||r||void 0},startAnimation:function(){var e=this,t=arguments;if(!this.hasBothVCs())return e.__s._$V3$startAnimation.apply(e,t);var n=this.zoomRectedMedia=this.discoverZoomRectedMedia();if(!n)return e.__s._$V3$startAnimation.apply(e,t);var i=this.getTransitionees(),r=i.fromVC,a=i.toVC,s=r.getRectInWindowForPrimaryZoomRectableMedia(n);if(!s)return e.__s._$V3$startAnimation.apply(e,t);var o=a.getRectInWindowForPrimaryZoomRectableMedia(n),l=Math.max(s.width,s.height,o?o.width:0,o?o.height:0),c=this.zoomRectedDerivative=n.getBestLoadedDerivative(Math.min(l,this.maxZoomySize));if(!c)return e.__s._$V3$startAnimation.apply(e,t);r.retain(this,"retaining as fromVC"),a.retain(this,"retaining as toVC"),r.zoomTransitionWillStartWithMedia(n,!1),a.zoomTransitionWillStartWithMedia(n,!0);var h=u.d(c.physicalWidth,c.physicalHeight,this.maxZoomySize,this.maxZoomySize),p=Math.min(c.physicalWidth,h.width),f=Math.min(c.physicalHeight,h.height),m=d.canvasPool.getInstanceAtSize(p,f);c.drawIntoContext(m.getContext("2d"),0,0,p,f);var _=this.floatingZoomedImage=g.create({contentElement:m});return this._placeZoomedImageOffScreen(),document.body.appendChild(_.element),e.__s._$V3$startAnimation.apply(e,t)},animationDidFinish:function(){var e=this,t=arguments,n=e.__s._$1J3$animationDidFinish.apply(e,t);if(!this.canDoZoom())return n;var i=this.getTransitionees(),r=i.fromVC,a=i.toVC;return r.zoomTransitionDidFinish(),a.zoomTransitionDidFinish(),r.release(this,"retaining as fromVC"),a.release(this,"retaining as toVC"),document.body.removeChild(this.floatingZoomedImage.element),n},_propagateTransitionProgressToVCs:a.g("transitionProgress",(function(e){var t=this.getTransitionees(),n=t.fromVC,i=t.toVC;s.a.pause(),i&&(i.zoomTransitionValue=e),n&&(n.zoomTransitionValue=1-e),s.a.resume()})),_updateZoomRectedImage:a.g("transitionProgress",(function(){this.updateZoomRectedImage()})),updateZoomRectedImage:function(){var e=this.zoomRectedMedia,t=this.floatingZoomedImage;if(this.canDoZoom()&&t){var n=this.getTransitionees(),i=n.fromVC,r=n.toVC,a=i.getRectInWindowForPrimaryZoomRectableMedia(e),s=r.getRectInWindowForPrimaryZoomRectableMedia(e),o=this.calculateFloatingZoomRectForTransitionProgress(a,s,this.transitionProgress);o?this.floatingZoomedImage.takeLayout(o.left,o.top,o.width,o.height):this._placeZoomedImageOffScreen()}else this._placeZoomedImageOffScreen()},calculateFloatingZoomRectForTransitionProgress:function(e,t,n){if(e&&t){var i=this.zoomRectMotionTween(n),r=1-i;return{left:i*t.left+r*e.left,top:i*t.top+r*e.top,width:i*t.width+r*e.width,height:i*t.height+r*e.height}}},_placeZoomedImageOffScreen:function(){var e=this.floatingZoomedImage;e&&e.takeLayout(-1e4,-1e4,0,0)},zoomRectMotionTween:o.a,__superMap:{_$V3$startAnimation:"startAnimation",_$1J3$animationDidFinish:"animationDidFinish"},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotoZoomTransition"}}),b=v.extend({_zoomRectMotionTween:function(e){return 1-Math.pow(1.15*e-1,2)},zoomRectMotionTween:function(e){return this._zoomRectMotionTween(e)/this._zoomRectMotionTween(1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotoSpringyZoomTransition"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(329),r=function(e,t){if(t&&Object(i.f)(t),e.cursor=0,!Object(i.a)(e))return i.b.warn("BPlist: Data is not a binary plist, no magic number."),null;var n=Object(i.e)(e);n||i.b.warn("BPlist: data is invalid, too short.");var r={stream:e,trailer:n,offsets:Object(i.d)(e,n)};return Object(i.c)(r,n.topObject)}},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n(387);function r(){return e!==globalThis.parent}function a(){if(r()){var e;return e=globalThis.location!==globalThis.parent.location?document.referrer:document.location.href,i.a.create(e).origin}return null}n(195),n(13)}).call(this,n(172))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(40),r=n(20),a=n(7),s=n(51),o=n(200),l=n(78),c=n(407),u=n(1313),d=i.a.extend(r.b,{owner:a.b(),derivativeRequestReason:a.b(),offscreeninessBase:a.b(),offscreeninessCenterIndex:a.b(),offscreeninessDeltaPerIndex:a.b(),shouldCover:a.b(!1),width:a.b(0),height:a.b(0),priority:a.b(0),wantsDownsampledDerivatives:a.b(!1),medias:a.b({strong:!0}),didError:r.i(),_derivativeLoaders:c.b({source:"medias",desiredOutputType:Array,outputForInput:function(e){return e?h.create(this,e):null},didChange:s.a}),derivatives:c.b({source:"_derivativeLoaders",inputDidEnter:function(e,t){e&&(e.notifyDerivativeChange=t)},inputDidExit:function(e){e&&(e.notifyDerivativeChange=null)},outputForInput:function(e){return e&&e.derivative}}),hasErrorAtIndex:function(e){var t=this._derivativeLoaders[e];return t&&t.shouldShowError},_maintainDerivativeLoaderOffscreenini:r.h({inputs:["offscreeninessBase","offscreeninessCenterIndex","offscreeninessDeltaPerIndex","_derivativeLoaders"],callback:function(e,t,n,i){for(var r,a=0;r=i&&i[a];a++){var s=e+Math.abs(a-t)*n;r.offscreeniness=s<=1/0?s:void 0}}}),staticMembers:{__QUALIFIED_CLASS_NAME__:"MultipleImageDerivativeLoader"}}),h=u.a.extend(o.a,{derivativeRequestReason:l.c("owner.derivativeRequestReason"),shouldCover:l.c("owner.shouldCover"),width:l.c("owner.width"),height:l.c("owner.height"),priority:l.c("owner.priority"),wantsDownsampledDerivatives:l.c("owner.wantsDownsampledDerivatives"),notifyDerivativeChange:null,_derivativeDidChange:r.g("derivative",(function(){this.notifyDerivativeChange&&this.notifyDerivativeChange(this)})),_shouldShowErrorDidChange:r.g("shouldShowError",(function(){this.owner&&this.owner.didError&&this.owner.didError()})),initFromPool:function(e,t){this.__s._$1xM$initFromPool.call(this),this.owner=e,this.media=t},cleanup:function(){var e=this,t=arguments;this.owner=this.media=null,e.__s._$1_Q$cleanup.apply(e,t)},__superMap:{_$1xM$initFromPool:"initFromPool",_$1_Q$cleanup:"cleanup"},staticMembers:{__QUALIFIED_CLASS_NAME__:"SingleImageDerivativeLoader"}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var i=n(20),r=n(7),a=n(201),s=n(15),o=n(40),l=n(327),c=n(25),u=n(203),d={mixinDependencies:[i.b],derivativeRequestReason:void 0,media:r.b({strong:!0}),areNewDerivativeRequestsAllowed:r.b(!0),shouldAvoidDerivativeTranscoder:!1,derivativeContainerWidth:r.b(),derivativeContainerHeight:r.b(),derivativePriority:r.b(0),derivativeOffscreeniness:r.b(),shouldDerivativeCoverContainer:!1,shouldCorrectDerivativeForDevicePixelRatio:!1,wantsDownsampledDerivatives:!1,_geometricLengthOfPerfectRenderableDerivative:r.b(),__geometricLengthOfPerfectRenderableDerivative:r.b({readOnly:!0,dependencies:["perfectDerivativeGeometricLength","media","media.renderableImageDerivativeInfos"],get:Object.assign((function(){var e=this.perfectDerivativeGeometricLength;if(e&&this.getPath("media.renderableImageDerivativeInfos")){var t=this.media.derivativeInfoForGeometricLength(e);if(t)return t.geometricLength}}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]);if(r&&i.internalGetPath(this,t[2+n])){var a=i.internalGet(this,t[1+n]).derivativeInfoForGeometricLength(r);if(a)return a.geometricLength}}}),didChange:function(e){this._geometricLengthOfPerfectRenderableDerivative!==e&&(this._geometricLengthOfPerfectRenderableDerivative=e)}}),nonOutdatedDerivative:r.b({strong:!0}),_nonOutdatedDerivative:r.b({readOnly:!0,strong:!0,dependencies:["media","_geometricLengthOfPerfectRenderableDerivative","media.derivativeDidLoad","media.renderableImageDerivativeInfos"],get:Object.assign((function(){var e=this.media,t=this._geometricLengthOfPerfectRenderableDerivative;if(e&&t)return e.getBestLoadedDerivative(t,"renderableImage")}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(r&&a)return r.getBestLoadedDerivative(a,"renderableImage")}}),didChange:function(e){this.nonOutdatedDerivative!==e&&(this.nonOutdatedDerivative=e)}}),_askForDownsampledDerivativesIfNecessary:i.h("nonOutdatedDerivative",(function(e){e&&this.wantsDownsampledDerivatives&&this.media.requestDownsample(this.perfectDerivativeGeometricLength,e)})),derivative:r.b({strong:!0,readOnly:!0,dependencies:["nonOutdatedDerivative","media"],get:Object.assign((function(){var e=this.nonOutdatedDerivative,t=this.media,n=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=t?t.pk:NaN),i=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=t?t.aspectRatio:NaN))<.05),r=n||i?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=e||r,this._derivative_lastExistentDerivative}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]),s=this._derivative_lastMediaPK!==(this._derivative_lastMediaPK=a?a.pk:NaN),o=!(Math.abs(this._derivative_lastAspectRatio-(this._derivative_lastAspectRatio=a?a.aspectRatio:NaN))<.05),l=s||o?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=r||l,this._derivative_lastExistentDerivative}})}),derivativeError:r.b(!1),_perfectSize_compoundInt:r.b({readOnly:!0,dependencies:["derivativeContainerWidth","derivativeContainerHeight","media.width","media.height",a.a.sharedInstance.bindingFor("devicePixelRatio")],get:Object.assign((function(){var e=this.shouldCorrectDerivativeForDevicePixelRatio,t=this.shouldDerivativeCoverContainer,n=this.getPath("media.height"),i=this.getPath("media.width"),r=this.derivativeContainerHeight,s=this.derivativeContainerWidth;if(!s||!r||!i||!n)return NaN;if(e){var o=a.a.sharedInstance.devicePixelRatio;s*=o,r*=o}var c=l.b(t?"cover":"fit",i,n,s,r,p),u=c.width,d=c.height;return 1e9*Math.ceil(u)+Math.ceil(d)}),{__CW__getter:function(e,t,n,i){var r=this.shouldCorrectDerivativeForDevicePixelRatio,a=this.shouldDerivativeCoverContainer,s=i.internalGetPath(this,t[3+n]),o=i.internalGetPath(this,t[2+n]),c=i.internalGet(this,t[1+n]),u=i.internalGet(this,t[0+n]);if(!u||!c||!o||!s)return NaN;if(r){var d=i.internalGet(this,t[4+n]);u*=d,c*=d}var h=l.b(a?"cover":"fit",o,s,u,c,p),f=h.width,g=h.height;return 1e9*Math.ceil(f)+Math.ceil(g)}})}),perfectDerivativeGeometricLength:r.b({readOnly:!0,dependencies:["_perfectSize_compoundInt"],get:Object.assign((function(){var e=this._perfectSize_compoundInt,t=e/1e9|0,n=e-1e9*t;return Math.max(t,n)}),{__CW__getter:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=r/1e9|0,s=r-1e9*a;return Math.max(a,s)}})}),_manageWhetherLoading:i.h({inputs:["media","perfectDerivativeGeometricLength","areNewDerivativeRequestsAllowed","media.renderableImageDerivativeInfos"],callback:function(e,t,n,i){if(n){this._mwl_lastDerivativeIds!==(this._mwl_lastDerivativeIds=i&&c.arrayPool.getAutodisposingInstanceFromMap(i,f).join("\n"))&&(this.derivativeError=!1);var r=this.nonOutdatedDerivative,a=Boolean(t&&(!r||r.geometricLength<t)&&!this.derivativeError);!a&&this._derivativeLoadRef&&this._ensureNotLoading(),a&&this._ensureLoading(e,t)}}}),_ensureNotLoading:function(){var e=this._derivativeLoadRef;e&&(e.cancel(),this._derivativeLoadRef=null)},_ensureLoading:function(e,t){var n=e.renderableImageDerivativeInfos,i=this._derivativeLoadRef,r=i&&i.derivative;if(r){if(r.geometricLength>=t&&n&&e.derivativeInfosByDerivativeId[r.derivativeId])return;this._ensureNotLoading()}if(e&&t&&n&&n.length){var a=this._derivativeLoadRef=e.requestDerivative(t,"renderableImage",this.shouldAvoidDerivativeTranscoder);a.derivativeRequestReason=this.derivativeRequestReason,this._maintainPriorityOnRef(),a.then(this._derivativeDidLoad,this._derivativeDidError),this.didUseDerivativeTranscoder&&a.derivative&&a.derivative.isDynamic&&this.didUseDerivativeTranscoder()}},didUseDerivativeTranscoder:void 0,_derivativeDidLoad:u.b((function(){this._derivativeLoadRef=null})),_derivativeDidError:u.b((function(e,t){t===this._derivativeLoadRef&&(this._derivativeLoadRef=null,this.derivativeError=!0)})),_derivativeLoadRef:s.d({strong:!0}),_maintainPriorityOnRef:i.h({inputs:["derivativePriority","derivativeOffscreeniness"],callback:function(e,t){var n=this._derivativeLoadRef;n&&(n.priority=e,n.offscreeniness=t),this._fastRead_derivativePriority=e}})},h=o.a.extend(d,{owner:r.b(),staticMembers:{__QUALIFIED_CLASS_NAME__:"PerformanceOrientedImageDerivativeLoader"}}),p={},f=function(e){return e.derivativeId}},function(e,t,n){"use strict";(function(e){n(1),n(0),n(4),n(6),n(3),n(2),n(90),n(11),n(28),n(31),n(32),n(30),n(79),n(66),n(71),n(67),n(72),n.d(t,"a",(function(){return g}));var i=n(255),r=n(7),a=n(214),s=n(20),o=n(201),l=n(190),c=n(208),u=n(161),d=n(238),h=n(357),p=n(203),f=n(814),g=i.a.extend({collection:r.b({strong:!0}),media:r.b({strong:!0}),shouldHideMostProminentDisplayOfMediaWithPK:r.b(),viewClass:f.a.extend(h.a),customPresenterViewModifications:r.b(),handheldViewControllerTransition:r.b(),view:r.b({downstreamBindings:{collection:"(owner).collection",desiredMedia:"(owner).media",shouldHideMostProminentDisplayOfMediaWithPK:"(owner).shouldHideMostProminentDisplayOfMediaWithPK",customPresenterViewModifications:"(owner).customPresenterViewModifications",handheldViewControllerTransition:"(owner).handheldViewControllerTransition"}}),surrogateOneUpNavigee:r.b({dependencies:["view"],get:Object.assign((function(e){return e||this.view}),{__CW__getter:function(e,t,n,i){return e||i.internalGet(this,t[0+n])}}),writeDependencies:[],set:a.a}),useSurrogateOneUpNavigee:function(e){this.surrogateOneUpNavigee=e},isFocusable:r.b(!0),autoFocusOnAttach:s.h("isAttached",(function(e){e&&this.focus()})),isMetaKeyPressedForEvent:function(e){var t=e.ctrlKey,n=e.metaKey;return o.a.sharedInstance.isWindows?t:n},keyDown:function(t){var n,i=this.surrogateOneUpNavigee,r=t.keyCode,a=l.a,s="";r===a.UP||r===a.LEFT?(s="goToPreviousUnobtrusively",i.repetitionAction!==s&&i[s](),t.preventDefault()):r===a.DOWN||r===a.RIGHT?(s="goToNextUnobtrusively",i.repetitionAction!==s&&i[s](),t.preventDefault()):r===a.EQUALS?(i.zoomInOneStepIfPossible(),s="zoomInOneStepIfPossible"):r===a.MINUS?(i.zoomOutOneStepIfPossible(),s="zoomOutOneStepIfPossible"):r===a.DIGIT_0?i.zoomTo1IfPossible():r===a.DIGIT_9?i.zoomToFitIfPossible():r===a.Z?i.toggleZoomIfPossible():r===a.SPACE||r===a.ENTER?(n=this.getPath("view.desiredMediaView"))&&c.a(n.togglePlayback)&&n.togglePlayback():(r===a.ESC||this.isMetaKeyPressedForEvent(t)&&190===r)&&this.sendEvent("popViewController"),s&&!i.repetitionAction&&(u.a(globalThis.document,"keyup",this._endRepetitionAction),u.a(globalThis.document,"mousedown",this._endRepetitionAction),u.a(e,"blur",this._endRepetitionAction)),i.repetitionAction=s},_endRepetitionAction:p.b((function(){var t=this.surrogateOneUpNavigee;d.a(globalThis.document,"keyup",this._endRepetitionAction),d.a(globalThis.document,"mousedown",this._endRepetitionAction),d.a(e,"blur",this._endRepetitionAction),t.repetitionAction&&(t.repetitionAction="")})),staticMembers:{__QUALIFIED_CLASS_NAME__:"PhotosOneUpViewController"}})}).call(this,n(172))},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(40),r=n(130),a=n(359),s=n(329),o=n(204),l=n(1319),c=n(191),u=n(15),d=n(120),h=n(390),p=i.a.extend({init:function(e){this.__s._$27$init.call(this),this.raw=function e(t){var n=t;for(var i in n)d.a(n[i])&&delete(n=h.a(n,e(n[i])))[i];return n}(e)},raw:u.d(null),__superMap:{_$27$init:"init"},staticMembers:{__QUALIFIED_CLASS_NAME__:"BaseInterface"}});var f=n(303),g=a.b,m=p.extend({raw:u.d(null),Make:Object(c.e)("Make"),Model:Object(c.e)("Model"),Software:Object(c.e)("Software"),Height:u.d({readOnly:!0,get:function(){var e=this.raw;return e.hasOwnProperty("PixelYDimension")?e.PixelYDimension:e.hasOwnProperty("ImageHeight")?e.ImageHeight:e.hasOwnProperty("VerticalLines")?e.VerticalLines:null}}),Width:u.d({readOnly:!0,get:function(){var e=this.raw;return e.hasOwnProperty("PixelXDimension")?e.PixelXDimension:e.hasOwnProperty("ImageLength")?e.ImageLength:e.hasOwnProperty("HorizontalLines")?e.HorizontalLines:null}}),Orientation:Object(c.e)("Orientation",1),WhiteBalance:u.d({get:function(){return["Auto","Manual"][this.raw.WhiteBalance]||null}}),MeteringMode:u.d({get:function(){var e=this.raw.MeteringMode;return 255===e?"other":["unknown","Average","CenterWeightedAverage","Spot","Multispot","Pattern","Partial"][e]||null}}),FocalLength:Object(c.d)("FocalLength"),FNumber:Object(c.d)("FNumber"),ColorSpace:u.d({get:function(){if("undefined"===typeof this.raw.ColorSpace)return null;switch(this.raw.ColorSpace){case 1:return"sRGB";case 2:return"Adobe RGB";case 65535:return"Uncalibrated";case 65534:return"ICC Profile";case 65533:return"Wide Gamut RGB";default:return null}}}),ISOSpeedRatings:Object(c.d)("ISOSpeedRatings"),ExposureTime:Object(c.d)("ExposureTime"),ExposureBiasValue:Object(c.d)("ExposureBiasValue"),MakerNote:u.d({get:function(){var e=this.raw.MakerNote;if("undefined"!==typeof e)return 0===e.length?{}:function(e){var t=new globalThis.ArrayBuffer(e.length),n=new globalThis.DataView(t);e.forEach((function(e,t){return n.setUint8(t,e)})),g.reset(n);for(var i="",r=0;r<9;r++)i+=g.nextChar;if("Apple iOS"!==i)return null;g.fastForward(3);var a=g.nextChar+g.nextChar;return g.le="II"===a,Object(c.f)(g,f.a.AppleMakerNotes)}(e);var t={};for(var n in f.a.AppleMakerNotes)this.raw[n]&&(t[f.a.AppleMakerNotes[n]]=this.raw[n]);return t}}),Latitude:u.d({get:function(){if(this.raw.Latitude)return this.raw.Latitude;var e=this.raw.GPSLatitude;return"undefined"===typeof e?null:("S"===this.raw.GPSLatitudeRef?-1:1)*(e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600)}}),Longitude:u.d({get:function(){if(this.raw.Longitude)return this.raw.Longitude;var e=this.raw.GPSLongitude;return"undefined"===typeof e?null:("W"===this.raw.GPSLongitudeRef?-1:1)*(e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600)}}),LivePhotosUUID:u.d({get:function(){return this.MakerNote&&this.MakerNote.LivePhotosUUID||null}}),LensModel:Object(c.e)("LensModel"),DateStamp:Object(c.e)("DateStamp",null,"GPS"),TimeStamp:Object(c.e)("TimeStamp",null,"GPS"),DateTimeOriginal:Object(c.e)("DateTimeOriginal"),staticMembers:{__QUALIFIED_CLASS_NAME__:"jpegInterface"}}),_=n(800),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.cursor,a=i+10;if(!Object(c.a)(e.fastForward(4).uint32))return r.b.warn("No valid EXIF data! Missing `Exif` ID code."),t;e.jumpTo(a);var s=Object(c.c)(e.uint32);if(null===s)return r.b.warn("No valid EXIF data! Can't find endianness string."),t;e.le=s,e.offset=a;var o=e.jumpTo(4).uint32;return Object(c.f)(e.jumpTo(o),f.a.Tiff,t,n),t.ExifOffset&&Object(c.f)(e.jumpTo(t.ExifOffset),f.a.Exif,t,n),t.GPSOffset&&Object(c.f)(e.jumpTo(t.GPSOffset),f.a.GPS,t,n),t},b=function(e,t){return e.fastForward(5),t.VerticalLines=e.uint16,t.HorizontalLines=e.uint16,t},y=f.a.MarkerSegments;function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==a.b)return r.b.warn("Jpeg parser must accept an ByteStream.ByteStream."),{};var n,i,s,o=e.length,l={},c={};for(e.jumpTo(_.b);e.cursor<o&&(i=e.cursor,n=e.uint16,s=e.uint16,null!==n||null!==s)&&(c.hasOwnProperty(n)||(c[n]=i),n!==y.SOS);)e.jumpTo(i+2+s);for(var u in c)if(c.hasOwnProperty(u)){var d=c[u];switch(Number(u)){case y.APP1:v(e.jumpTo(d),l,t);break;case y.SOF:b(e.jumpTo(d),l)}}return l}var I=a.b,S=s.a,C=o.b,E=i.a.extend({staticMembers:{read:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"===typeof e)e.slice(0,C.length)===C?I.resetWithBase64(e):I.resetWithString(e),n&&(r.b.warn("Cannot zero Exif Orientation in a data stream provided as a string."),n=!1);else if(e instanceof globalThis.DataView)I.reset(e);else{if(!(e instanceof globalThis.ArrayBuffer))return r.b.warn("Unknown data type, can not read Exif."),null;I.reset(new globalThis.DataView(e))}return 0===I.length?(r.b.warn("Data stream is empty, can not parse Exif."),null):Object(c.b)(I)?(t=w(I,n),m.create(t)):S(I)?(t=l.a(I),m.create(t)):(r.b.warn("No valid file type found for Exif parsing."),null)},readAndZeroOrientation:function(e){return this.read(e,!0)},__QUALIFIED_CLASS_NAME__:"Reader"}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n(1),n(0),n(2),n(30);var i=n(28),r='\n<div class="controls-container">\n\t<div class="center-button-container {elementClassPrefix}-play-pause-button-container">\n\t\t<div class="button-wrapper">\n\t\t\t<button type="button" class="ac-video-icon centered-button {elementClassPrefix}-play-pause-button {elementClassPrefix}-button no-autoplay" value="{playpause}" aria-label="{playpause}" role="button" tabindex="0" data-acv-active-area data-acv-draggable-area>\n\t\t\t\t<div class="loading-indicator-container"></div>\n\t\t\t</button>\n\t\t\t<span id=\'loading-status\' class="visuallyhidden" aria-live=\'polite\' style="display: none;"></span>\n\t\t</div>\n\t</div>\n\t<div class="main-controls-container">\n\t\t<div class="ac-video-overlay-container"></div>\n\t\t<div class="main-controls">\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<div class="main-controls-item controls-volume">\n\t\t\t\t\t<button type="button" class="ac-video-icon {elementClassPrefix}-toggle-mute-volume-button {elementClassPrefix}-button" value="{togglemutevolume}" aria-label="{togglemutevolume}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t\t<div class="{elementClassPrefix}-volume-level-indicator" tabindex="0" aria-valuemin="0" aria-valuemax="100" min="0" max="100" aria-label="{adjustvolume}" role="slider" aria-orientation="vertical" step="0.05" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="main-controls-item controls-progress">\n\t\t\t\t<div class="controls-progress-time controls-progress-time-1">\n\t\t\t\t\t<div class="{elementClassPrefix}-elapsed-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{elapsed}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-elapsed-time">00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-bar">\n\t\t\t\t\t<div class="{elementClassPrefix}-buffered-indicator"></div>\n\t\t\t\t\t<div class="{elementClassPrefix}-progress-indicator ac-slider-inactive" aria-label="progress-indicator" role="slider" precision="float" min="0" max="1" step="0.0005" value="0" tabindex="0" aria-valuemax="1" aria-valuemin="0" aria-valuenow="{value}" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-time controls-progress-time-2">\n\t\t\t\t\t<div class="{elementClassPrefix}-remaining-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{remaining}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-remaining-time">-00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">-44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-full-screen-button {elementClassPrefix}-button fullscreen-unsupported" value="{fullscreen}" aria-label="{fullscreen}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\t<div class="end-state-wrapper">\n\t\t<div class="end-state-container"></div>\n\t</div>\n</div>\n',a=n(209),s=n(283),o=n(347),l=n(1274),c=n(358);function u(e,t,n){return(u=d()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&h(r,n.prototype),r}).apply(null,arguments)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,f=n(30);function g(e){var t=s.a.getPath("application.feedbackService");t&&t.report(e)}n(31),n(32),!a.a.sharedInstance.isIE||(p=Promise.resolve()),p||(p=new Promise((function(e){var t=function(){g("staticHlsJsLoadFailure"),e()},n=document.createElement("script");n.setAttribute("async",""),n.onload=function(){try{window.Hls=function(e){var t=e.Events,n=new Set([t.FRAG_LOAD_EMERGENCY_ABORTED,t.MEDIA_ATTACHED,t.MEDIA_DETACHED,t.LEVEL_SWITCHED,t.FPS_DROP,t.ERROR,t.STALLED,t.FRAG_LOADED]),i=e.prototype.loadSource;e.prototype.loadSource=function(){var e=Array.prototype.slice.call(arguments),t=e[1]||{},n=t.appData||{};return n.reportingAgent=m(),e[1]=t,t.appData=n,i.apply(this,e)};var r=e.prototype.emit;e.prototype.emit=function(){return _(arguments[0],arguments[2]),this._Photos_vpvOwner&&arguments[2]&&arguments[2].fatal&&this._Photos_vpvOwner._receivedVideoPlayerError({event:arguments[2],_Photos_hls_interception:!0}),r.apply(this,arguments)};var a={default:{timeoutRetry:{maxNumRetry:0},errorRetry:{maxNumRetry:0}},customURL:{timeoutRetry:{maxNumRetry:0},errorRetry:{maxNumRetry:0}}},d=function(){var t=Array.prototype.slice.call(arguments),n=t[0]||(t[0]={});n.enableRtcReporting=!0,n.maxBufferLength=10,n.enableIFramePreloading=!1,n.manifestLoadPolicy=l.a(e.DefaultConfig.manifestLoadPolicy,a),n.playlistLoadPolicy=l.a(e.DefaultConfig.playlistLoadPolicy,a),n.fragLoadPolicy=l.a(e.DefaultConfig.fragLoadPolicy,a,{default:{reportHTTPResponseHeaders:Array.from(new Set((e.DefaultConfig.fragLoadPolicy.default.reportHTTPResponseHeaders||[]).concat(["via","x-apple-request-uuid"])).values()),reportCDNServer:!1}});var i=u(e,t);return i._Photos_vpvOwner=window.Hls._Photos_vpvOwner,i},h=Object.getOwnPropertyDescriptors(e),p=function(t){if(!h.hasOwnProperty(t)||void 0!==function(){}[t])return"continue";var n,i=h[t],r=Object.assign({},i);i.get&&(r.get=i.get.bind(e)),i.set&&(r.set=i.set.bind(e)),i.hasOwnProperty("value")&&(n=t,delete r.value,delete r.writable,r.get=function(){var t=e[n];return"function"===typeof t&&(t=t.bind(e)),t},r.set=i.writable?function(t){e[n]=t}:void 0),Object.defineProperty(d,t,r)};for(var g in h)p(g);function m(){if(["www","carry","beta","future"].map((function(e){return"https://"+e+".icloud.com"})).includes(window.origin)){var e={clientName:"ICPW",serviceName:"Photos",appName:"iCloudWebPhotos"};e.deviceName=c.a.sharedInstance.deviceHostName;var t=[];t[f.RTCReportingAgentConfigKeys.Sender]="HLSJS",t[f.RTCReportingAgentConfigKeys.ClientName]=e.clientName,t[f.RTCReportingAgentConfigKeys.ServiceName]=e.serviceName,t[f.RTCReportingAgentConfigKeys.ApplicationName]=e.appName,t[f.RTCReportingAgentConfigKeys.DeviceName]=e.deviceName;var n={};n.model=c.a.sharedInstance.browserName,n.firmwareVersion=c.a.sharedInstance.browserVersion,t[f.RTCReportingAgentConfigKeys.UserInfoDict]=n;var i=window.origin+"/configurations/hls/store_bags/hlsjs/icpl/v1/rtc_storebag.json",r=new f.RTCStorebag.RTCReportingStoreBag(i,e.clientName,e.serviceName,e.appName,e.deviceName,{});t[f.RTCReportingAgentConfigKeys.ReportingStoreBag]=r;var a=new f.RTCObjectRef;return a.addInstantiatedObject(new f.RTCReportingAgent(t)),a.instance}}function _(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.a.application.feedbackService;if(r&&n.has(e)){var a;switch(e){case t.FRAG_LOADED:a={duration:o.a(i,"frag.duration"),trequest:o.a(i,"stats.trequest"),tfirst:o.a(i,"stats.tfirst"),tload:o.a(i,"stats.tload"),serverInfo:o.a(i,"serverInfo")};break;case t.LEVEL_SWITCHED:a={level:i.level};break;case t.ERROR:a={type:i.type,details:i.details,fatal:i.fatal};break;case t.STALLED:a={isLowBufferStall:i.isLowBufferStall}}r.report(e,a)}}return d}(window.Hls),g("staticHlsJsLoadSuccess"),e()}catch(n){delete window.Hls,t()}},n.onerror=t,n.src="../static-hls/hls.js",document.body.appendChild(n)})));var m="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";i.Player.prototype._Photos_removeFromParent=function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},i.Player.prototype._onError=function(e){var t=this._videoImpl&&this._videoImpl.getError(),n=this._videoImpl&&this.getMediaElement();n&&n.currentTime>0||this._vpv_receivedVideoPlayerError&&this._vpv_receivedVideoPlayerError({error:t,event:e})},i.Player.prototype._onPlayPromiseError=function(e){var t=this._videoImpl&&this._videoImpl.getError();this._vpv_receivedVideoPlayerError&&this._vpv_receivedVideoPlayerError({error:t,event:e})};var _=i.Player.prototype.isStalled;i.Player.prototype.isStalled=function(){return this._videoImpl._hls?this._videoImpl.isStalled():_.apply(this,arguments)};var v,b,y=i.Player.prototype.destroy;i.Player.prototype.destroy=function(){if(!this._photos_isDestroyed){this._photos_isDestroyed=!0;var e=this._videoImpl&&this._videoImpl._listeners;return e&&(e.webkitbeginfullscreen||(e.webkitbeginfullscreen=[]),e.webkitendfullscreen||(e.webkitendfullscreen=[])),y.apply(this,arguments)}};var w={get videoPlayerStatic(){return v||(v=i.Player.create({hls:!1,poster:m,template:r,forceEnglishLabels:!0}))},get videoPlayerHls(){var e=globalThis._PhotosEnableHlsLogging;return b||(b=i.Player.create({hls:!0,poster:m,template:r,debugHls:e,enablePerformanceLogging:e,useNativeHls:!1,forceEnglishLabels:!0}))},destroyPlayer:function(e){setTimeout((function(){e.destroy()}),1e3),e===v&&(v=void 0),e===b&&(b=void 0)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(40),r=n(130),a=n(13),s=n(387),o=n(741),l=n(265),c=n(448),u=n(747),d=i.a.extend(u.a,{regionFormat:"",formattingRules:{},serializedProperties:["regionFormat","formattingRules"],toString:function(){return this.serialize()},staticMembers:{__QUALIFIED_CLASS_NAME__:"Response"}}),h=(n(23),globalThis.IntlPolyfill),p=i.a.extend({_region:null,_cachedNumberInstances:{},_cachedDateTimeInstances:{},_pendingRegionsToRegister:{},_is12HourTimeForRegions:{},localeMap:null,SHORT_DATE:{month:"numeric",day:"numeric",year:"numeric"},MEDIUM_DATE:{month:"short",day:"numeric",year:"numeric"},LONG_DATE:{month:"long",day:"numeric",year:"numeric"},FULL_DATE:{weekday:"long",month:"long",day:"numeric",year:"numeric"},SHORT_TIME:{hour:"numeric",minute:"numeric"},MEDIUM_TIME:{hour:"numeric",minute:"numeric",second:"numeric"},LONG_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},FULL_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},registerRegionFormat:function(e){if(e&&h){h.__disableRegExpRestore();var t=e.locale.toLowerCase();this._region=t,this._pendingRegionsToRegister[t]=e}else r.b.info("No Intl polyfill or region rules. Skipping RegionFormatter initialization.")},loadFormattingRules:function(e,t,n){e.validate()||a.b("Invalid hostInfo",e.errors);var i=this.localeMap;i&&t in i&&(t=i[t]);var r=s.a.create(e.urlString),l=o.a.create(e.requestProperties);n||(n={});var c=n.fallbackRegionFormat||"en-us",u="maxRetries"in n?n.maxRetries:3,h=r.pathname;"/"!==h.charAt(h.length-1)&&(r.pathname=h+"/");var p=this._getISOnameForRegion(t);return r.pathname=r.pathname+p+".json",l.url=r,l.send().then(function(e){var n=e.body;return this.registerRegionFormat(n),d.create({regionFormat:t,formattingRules:n})}.bind(this)).catch(function(i){var r=t.split("-"),a=c;if(404===i.status&&t!==c&&r.length>1&&(r.pop(),a=r.join("-")),u>0)return a===c&&(n.maxRetries=u-1),this.loadFormattingRules(e,a,n);throw new Error('Cannot load region formatting rules for "'+t+'".')}.bind(this))},getNumberFormatter:function(e){h||a.b("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var t=this._getCacheKeyForOptions(e),n=this._cachedNumberInstances[t];return n||(n=new h.NumberFormat(this._region,e),this._cachedNumberInstances[t]=n),n},getDateTimeFormatter:function(e){h||a.b("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var t=this._getCacheKeyForOptions(e),n=this._cachedDateTimeInstances[t];return n||(n=new h.DateTimeFormat(this._region,e),this._cachedDateTimeInstances[t]=n),n},is12HourTime:function(e){this._registerPendingRegionFormats();var t=e?e.toLowerCase():this._region;return this._is12HourTimeForRegions[t]},_registerPendingRegionFormats:function(){for(var e=this._pendingRegionsToRegister,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]];h.__addLocaleData(l.a(i));var r=i.locale.toLowerCase();this._is12HourTimeForRegions[r]=i.date.hour12,delete this._pendingRegionsToRegister[r]}},_getCacheKeyForOptions:function(e){return e?this._region+":"+c.a(e):this._region+":default"},_getISOnameForRegion:function(e){var t="",n=e?e.split("-"):["en","us"];return t=n[0].toLowerCase(),n.length>2?(t+="-"+this._capitalizeFirstLetter(n[1]),t+="-"+n[2].toUpperCase()):n.length>1&&(t+=n[1].length>2?"-"+this._capitalizeFirstLetter(n[1]):"-"+n[1].toUpperCase()),t},_capitalizeFirstLetter:function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},staticMembers:{__QUALIFIED_CLASS_NAME__:"RegionFormatter"}}).create({localeMap:{no:"nb","no-no":"nb-no"}})}]);